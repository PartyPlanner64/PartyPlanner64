function Xj(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var fn=(n=>(n[n.EDITOR=0]="EDITOR",n[n.DETAILS=1]="DETAILS",n[n.SETTINGS=2]="SETTINGS",n[n.ABOUT=3]="ABOUT",n[n.MODELS=4]="MODELS",n[n.PATCHES=5]="PATCHES",n[n.STRINGS=6]="STRINGS",n[n.EVENTS=7]="EVENTS",n[n.CREATEEVENT_ASM=8]="CREATEEVENT_ASM",n[n.CREATEEVENT_C=9]="CREATEEVENT_C",n[n.DEBUG=10]="DEBUG",n[n.AUDIO=11]="AUDIO",n[n.ADDITIONAL_BGS=12]="ADDITIONAL_BGS",n[n.AUDIO_SELECTION_CODE=13]="AUDIO_SELECTION_CODE",n[n.SPRITES=14]="SPRITES",n))(fn||{}),de=(n=>(n[n.OTHER=0]="OTHER",n[n.BLUE=1]="BLUE",n[n.RED=2]="RED",n[n.MINIGAME=3]="MINIGAME",n[n.HAPPENING=4]="HAPPENING",n[n.STAR=5]="STAR",n[n.CHANCE=6]="CHANCE",n[n.START=7]="START",n[n.SHROOM=8]="SHROOM",n[n.BOWSER=9]="BOWSER",n[n.ITEM=10]="ITEM",n[n.BATTLE=11]="BATTLE",n[n.BANK=12]="BANK",n[n.ARROW=13]="ARROW",n[n.BLACKSTAR=14]="BLACKSTAR",n[n.GAMEGUY=15]="GAMEGUY",n[n.DUEL_BASIC=16]="DUEL_BASIC",n[n.DUEL_START_BLUE=17]="DUEL_START_BLUE",n[n.DUEL_START_RED=18]="DUEL_START_RED",n[n.DUEL_POWERUP=19]="DUEL_POWERUP",n[n.DUEL_REVERSE=20]="DUEL_REVERSE",n))(de||{}),yt=(n=>(n[n.TOAD=0]="TOAD",n[n.BOWSER=1]="BOWSER",n[n.KOOPA=2]="KOOPA",n[n.BOO=3]="BOO",n[n.GOOMBA=4]="GOOMBA",n[n.BANK=5]="BANK",n[n.BANKCOIN=6]="BANKCOIN",n[n.ITEMSHOP=7]="ITEMSHOP",n[n.GATE=8]="GATE",n))(yt||{}),zn=(n=>(n.NORMAL="NORMAL",n.DUEL="DUEL",n))(zn||{}),d0=(n=>(n[n.NORMAL=0]="NORMAL",n[n.WESTERN=1]="WESTERN",n[n.PIRATE=2]="PIRATE",n[n.HORROR=3]="HORROR",n[n.SPACE=4]="SPACE",n[n.MYSTERY=5]="MYSTERY",n))(d0||{}),ce=(n=>(n[n.MOVE=0]="MOVE",n[n.LINE=1]="LINE",n[n.LINE_STICKY=2]="LINE_STICKY",n[n.ROTATE=3]="ROTATE",n[n.ERASE=4]="ERASE",n[n.ROM_LOAD=5]="ROM_LOAD",n[n.ROM_UNLOAD=6]="ROM_UNLOAD",n[n.BOARD_LOAD=7]="BOARD_LOAD",n[n.BOARD_SAVE=8]="BOARD_SAVE",n[n.BOARD_NEW=9]="BOARD_NEW",n[n.BOARD_WRITE=10]="BOARD_WRITE",n[n.BOARD_DETAILS=11]="BOARD_DETAILS",n[n.BOARD_EDITOR=12]="BOARD_EDITOR",n[n.BOARD_COPY=13]="BOARD_COPY",n[n.MODEL_VIEWER=13.3]="MODEL_VIEWER",n[n.STRINGS_EDITOR=13.4]="STRINGS_EDITOR",n[n.SPRITE_VIEWER=13.45]="SPRITE_VIEWER",n[n.EVENTS=13.5]="EVENTS",n[n.CREATEEVENT=13.6]="CREATEEVENT",n[n.BACK_TO_EVENTS=13.7]="BACK_TO_EVENTS",n[n.SAVE_EVENT=13.8]="SAVE_EVENT",n[n.EVENT_LOAD=13.9]="EVENT_LOAD",n[n.SET_BG=14]="SET_BG",n[n.SCREENSHOT=14.1]="SCREENSHOT",n[n.SAVE_ADDITIONALBG=14.2]="SAVE_ADDITIONALBG",n[n.ADDITIONALBG_BACK=14.3]="ADDITIONALBG_BACK",n[n.SAVE_AUDIOSELECTCODE=14.2]="SAVE_AUDIOSELECTCODE",n[n.AUDIOSELECTCODE_BACK=14.3]="AUDIOSELECTCODE_BACK",n[n.ROM_SAVE=15]="ROM_SAVE",n[n.SETTINGS=15.1]="SETTINGS",n[n.ABOUT=15.2]="ABOUT",n[n.PATCHES=15.3]="PATCHES",n[n.DEBUG=15.4]="DEBUG",n[n.AUDIO=15.5]="AUDIO",n[n.ADD_OTHER=16]="ADD_OTHER",n[n.ADD_BLUE=17]="ADD_BLUE",n[n.ADD_RED=18]="ADD_RED",n[n.ADD_MINIGAME=19]="ADD_MINIGAME",n[n.ADD_HAPPENING=20]="ADD_HAPPENING",n[n.ADD_STAR=21]="ADD_STAR",n[n.ADD_BLACKSTAR=21.2]="ADD_BLACKSTAR",n[n.ADD_START=21.3]="ADD_START",n[n.ADD_CHANCE=22]="ADD_CHANCE",n[n.ADD_SHROOM=23]="ADD_SHROOM",n[n.ADD_BOWSER=24]="ADD_BOWSER",n[n.ADD_TOAD_CHARACTER=25]="ADD_TOAD_CHARACTER",n[n.ADD_BOWSER_CHARACTER=26]="ADD_BOWSER_CHARACTER",n[n.ADD_KOOPA_CHARACTER=27]="ADD_KOOPA_CHARACTER",n[n.ADD_BOO_CHARACTER=28]="ADD_BOO_CHARACTER",n[n.ADD_ITEM=29]="ADD_ITEM",n[n.ADD_BATTLE=30]="ADD_BATTLE",n[n.ADD_BANK=31]="ADD_BANK",n[n.ADD_GAMEGUY=32]="ADD_GAMEGUY",n[n.ADD_ARROW=32.2]="ADD_ARROW",n[n.MARK_STAR=33]="MARK_STAR",n[n.MARK_GATE=33.1]="MARK_GATE",n[n.ADD_BANK_SUBTYPE=34]="ADD_BANK_SUBTYPE",n[n.ADD_BANKCOIN_SUBTYPE=35]="ADD_BANKCOIN_SUBTYPE",n[n.ADD_ITEMSHOP_SUBTYPE=36]="ADD_ITEMSHOP_SUBTYPE",n[n.ADD_DUEL_BASIC=37]="ADD_DUEL_BASIC",n[n.ADD_DUEL_REVERSE=38]="ADD_DUEL_REVERSE",n[n.ADD_DUEL_POWERUP=39]="ADD_DUEL_POWERUP",n[n.ADD_DUEL_START_BLUE=40]="ADD_DUEL_START_BLUE",n[n.ADD_DUEL_START_RED=41]="ADD_DUEL_START_RED",n[n.TELESCOPE=42]="TELESCOPE",n))(ce||{}),Qe=(n=>(n.MP1_USA="CLBE",n.MP1_JPN="CLBJ",n.MP1_PAL="NLBP",n.MP2_USA="NMWE",n.MP2_JPN="NMWJ",n.MP2_PAL="NMWP",n.MP3_USA="NMVE",n.MP3_JPN="NMVJ",n.MP3_PAL="NMVP",n))(Qe||{});function ku(n){for(const e in Qe)if(Qe[e]===n)return e;return null}var En=(n=>(n[n.MIPS=0]="MIPS",n[n.C=1]="C",n))(En||{}),$B=(n=>(n[n.WALKOVER=1]="WALKOVER",n[n.LANDON=3]="LANDON",n[n.SPECIAL=7]="SPECIAL",n[n.BEGINORWALKOVER=8]="BEGINORWALKOVER",n))($B||{}),Wt=(n=>(n[n.WALKOVER=1]="WALKOVER",n[n.LANDON=3]="LANDON",n[n.BEFORE_DICE_ROLL=-5]="BEFORE_DICE_ROLL",n[n.BEFORE_PLAYER_TURN=-4]="BEFORE_PLAYER_TURN",n[n.AFTER_TURN=-3]="AFTER_TURN",n[n.BEFORE_TURN=-2]="BEFORE_TURN",n[n.BEGINORWALKOVER=8]="BEGINORWALKOVER",n))(Wt||{});function zw(n){switch(n){case 3:return 3;case 1:return 1;case-2:case-3:case-4:case-5:return 7;case 8:return 8;default:throw new Error(`Unrecognized editor activation type ${n}`)}}var s0=(n=>(n[n.DIRECT=1]="DIRECT",n[n.PROCESS=2]="PROCESS",n))(s0||{});function eM(n){switch(n){case 1:return"Direct";case 2:return"Process"}throw new Error(`Unknown execution type ${n}.`)}function Kj(n){switch(n){case"Direct":return 1;case"Process":return 2}return null}var w0=(n=>(n[n.ERROR=1]="ERROR",n[n.WARNING=2]="WARNING",n))(w0||{});const Yj=["Boolean","Number","+Number","Number[]","Space","Space[]"];var an=(n=>(n.Boolean="Boolean",n.Number="Number",n.PositiveNumber="+Number",n.NumberArray="Number[]",n.Space="Space",n.SpaceArray="Space[]",n))(an||{});function tM(n){return n.endsWith("[]")}var Jl=(n=>(n.Classic="classic",n.DarkGray="dark-gray",n))(Jl||{});function Sc(n){return JSON.parse(JSON.stringify(n))}function nM(n){for(const e in n)return!1;return!0}function qj(n,e){const t=document.createElement("canvas");return t.width=n,t.height=e,t}let Qj=qj;function No(n,e){return Qj(n,e).getContext("2d")}function Jj(){return new Image}let Zj=Jj;function Xs(){return Zj()}function W4(n,e,t){const r=n.getBoundingClientRect();return e=Math.round(e),t=Math.round(t),[e-Math.round(r.left),t-Math.round(r.top)]}let rM=!1;function G0(){return rM}function e8(n){rM=!!n}function wt(...n){G0()&&console.log.apply(console,arguments)}function At(n,e="0x"){let t=Number(Math.abs(n)).toString(16).toUpperCase();return t.length===1&&(t="0"+t),(n<0?"-":"")+e+t}function Bn(n){if(G0()&&!n){debugger;throw new Error("Assertion failed")}}const $j=["setUint8","setInt8","setUint16","setInt16","setUint32","setInt32","setFloat32","setFloat64"];$j.forEach(n=>{const e=DataView.prototype[n];DataView.prototype[n]=function(t,r){if(typeof t!="number"||Number.isNaN(t))throw new Error(`Invalid offset in ${n}`);if(typeof r!="number"||Number.isNaN(r))throw new Error(`Invalid value in ${n}`);e.apply(this,arguments)}});var Ks=function(n,e){return n+e&4294967295},r3=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function c_(n,e,t,r,i,a){return e=Ks(Ks(e,n),Ks(r,a)),Ks(e<<i|e>>>32-i,t)}function Vi(n,e,t,r,i,a,o){return c_(e&t|~e&r,n,e,i,a,o)}function Di(n,e,t,r,i,a,o){return c_(e&r|t&~r,n,e,i,a,o)}function Fi(n,e,t,r,i,a,o){return c_(e^t^r,n,e,i,a,o)}function Ti(n,e,t,r,i,a,o){return c_(t^(e|~r),n,e,i,a,o)}function As(n,e){var t=n[0],r=n[1],i=n[2],a=n[3];t=Vi(t,r,i,a,e[0],7,-680876936),a=Vi(a,t,r,i,e[1],12,-389564586),i=Vi(i,a,t,r,e[2],17,606105819),r=Vi(r,i,a,t,e[3],22,-1044525330),t=Vi(t,r,i,a,e[4],7,-176418897),a=Vi(a,t,r,i,e[5],12,1200080426),i=Vi(i,a,t,r,e[6],17,-1473231341),r=Vi(r,i,a,t,e[7],22,-45705983),t=Vi(t,r,i,a,e[8],7,1770035416),a=Vi(a,t,r,i,e[9],12,-1958414417),i=Vi(i,a,t,r,e[10],17,-42063),r=Vi(r,i,a,t,e[11],22,-1990404162),t=Vi(t,r,i,a,e[12],7,1804603682),a=Vi(a,t,r,i,e[13],12,-40341101),i=Vi(i,a,t,r,e[14],17,-1502002290),r=Vi(r,i,a,t,e[15],22,1236535329),t=Di(t,r,i,a,e[1],5,-165796510),a=Di(a,t,r,i,e[6],9,-1069501632),i=Di(i,a,t,r,e[11],14,643717713),r=Di(r,i,a,t,e[0],20,-373897302),t=Di(t,r,i,a,e[5],5,-701558691),a=Di(a,t,r,i,e[10],9,38016083),i=Di(i,a,t,r,e[15],14,-660478335),r=Di(r,i,a,t,e[4],20,-405537848),t=Di(t,r,i,a,e[9],5,568446438),a=Di(a,t,r,i,e[14],9,-1019803690),i=Di(i,a,t,r,e[3],14,-187363961),r=Di(r,i,a,t,e[8],20,1163531501),t=Di(t,r,i,a,e[13],5,-1444681467),a=Di(a,t,r,i,e[2],9,-51403784),i=Di(i,a,t,r,e[7],14,1735328473),r=Di(r,i,a,t,e[12],20,-1926607734),t=Fi(t,r,i,a,e[5],4,-378558),a=Fi(a,t,r,i,e[8],11,-2022574463),i=Fi(i,a,t,r,e[11],16,1839030562),r=Fi(r,i,a,t,e[14],23,-35309556),t=Fi(t,r,i,a,e[1],4,-1530992060),a=Fi(a,t,r,i,e[4],11,1272893353),i=Fi(i,a,t,r,e[7],16,-155497632),r=Fi(r,i,a,t,e[10],23,-1094730640),t=Fi(t,r,i,a,e[13],4,681279174),a=Fi(a,t,r,i,e[0],11,-358537222),i=Fi(i,a,t,r,e[3],16,-722521979),r=Fi(r,i,a,t,e[6],23,76029189),t=Fi(t,r,i,a,e[9],4,-640364487),a=Fi(a,t,r,i,e[12],11,-421815835),i=Fi(i,a,t,r,e[15],16,530742520),r=Fi(r,i,a,t,e[2],23,-995338651),t=Ti(t,r,i,a,e[0],6,-198630844),a=Ti(a,t,r,i,e[7],10,1126891415),i=Ti(i,a,t,r,e[14],15,-1416354905),r=Ti(r,i,a,t,e[5],21,-57434055),t=Ti(t,r,i,a,e[12],6,1700485571),a=Ti(a,t,r,i,e[3],10,-1894986606),i=Ti(i,a,t,r,e[10],15,-1051523),r=Ti(r,i,a,t,e[1],21,-2054922799),t=Ti(t,r,i,a,e[8],6,1873313359),a=Ti(a,t,r,i,e[15],10,-30611744),i=Ti(i,a,t,r,e[6],15,-1560198380),r=Ti(r,i,a,t,e[13],21,1309151649),t=Ti(t,r,i,a,e[4],6,-145523070),a=Ti(a,t,r,i,e[11],10,-1120210379),i=Ti(i,a,t,r,e[2],15,718787259),r=Ti(r,i,a,t,e[9],21,-343485551),n[0]=Ks(t,n[0]),n[1]=Ks(r,n[1]),n[2]=Ks(i,n[2]),n[3]=Ks(a,n[3])}function iM(n){var e=[],t;for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}function aM(n){var e=[],t;for(t=0;t<64;t+=4)e[t>>2]=n[t]+(n[t+1]<<8)+(n[t+2]<<16)+(n[t+3]<<24);return e}function oM(n){var e=n.length,t=[1732584193,-271733879,-1732584194,271733878],r,i,a,o,s,l;for(r=64;r<=e;r+=64)As(t,iM(n.substring(r-64,r)));for(n=n.substring(r-64),i=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<i;r+=1)a[r>>2]|=n.charCodeAt(r)<<(r%4<<3);if(a[r>>2]|=128<<(r%4<<3),r>55)for(As(t,a),r=0;r<16;r+=1)a[r]=0;return o=e*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(o[2],16),l=parseInt(o[1],16)||0,a[14]=s,a[15]=l,As(t,a),t}function eG(n){var e=n.length,t=[1732584193,-271733879,-1732584194,271733878],r,i,a,o,s,l;for(r=64;r<=e;r+=64)As(t,aM(n.subarray(r-64,r)));for(n=r-64<e?n.subarray(r-64):new Uint8Array(0),i=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<i;r+=1)a[r>>2]|=n[r]<<(r%4<<3);if(a[r>>2]|=128<<(r%4<<3),r>55)for(As(t,a),r=0;r<16;r+=1)a[r]=0;return o=e*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(o[2],16),l=parseInt(o[1],16)||0,a[14]=s,a[15]=l,As(t,a),t}function tG(n){var e="",t;for(t=0;t<4;t+=1)e+=r3[n>>t*8+4&15]+r3[n>>t*8&15];return e}function Tp(n){var e;for(e=0;e<n.length;e+=1)n[e]=tG(n[e]);return n.join("")}Tp(oM("hello"))!=="5d41402abc4b2a76b9719d911017c592"&&(Ks=function(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535});function sM(n){return/[\u0080-\uFFFF]/.test(n)&&(n=unescape(encodeURIComponent(n))),n}function nG(n,e){var t=n.length,r=new ArrayBuffer(t),i=new Uint8Array(r),a;for(a=0;a<t;a++)i[a]=n.charCodeAt(a);return e?i:r}function rG(n){return String.fromCharCode.apply(null,new Uint8Array(n))}function iG(n,e,t){var r=new Uint8Array(n.byteLength+e.byteLength);return r.set(new Uint8Array(n)),r.set(new Uint8Array(e),n.byteLength),t?r:r.buffer}function W0(){this.reset()}W0.prototype.append=function(n){return this.appendBinary(sM(n)),this};W0.prototype.appendBinary=function(n){this._buff+=n,this._length+=n.length;var e=this._buff.length,t;for(t=64;t<=e;t+=64)As(this._hash,iM(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this};W0.prototype.end=function(n){var e=this._buff,t=e.length,r,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a;for(r=0;r<t;r+=1)i[r>>2]|=e.charCodeAt(r)<<(r%4<<3);return this._finish(i,t),a=n?this._hash:Tp(this._hash),this.reset(),a};W0.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this};W0.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}};W0.prototype.setState=function(n){return this._buff=n.buff,this._length=n.length,this._hash=n.hash,this};W0.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length};W0.prototype._finish=function(n,e){var t=e,r,i,a;if(n[t>>2]|=128<<(t%4<<3),t>55)for(As(this._hash,n),t=0;t<16;t+=1)n[t]=0;r=this._length*8,r=r.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),a=parseInt(r[1],16)||0,n[14]=i,n[15]=a,As(this._hash,n)};W0.hash=function(n,e){return W0.hashBinary(sM(n),e)};W0.hashBinary=function(n,e){var t=oM(n);return e?t:Tp(t)};W0.ArrayBuffer=function(){this.reset()};W0.ArrayBuffer.prototype.append=function(n){var e=iG(this._buff.buffer,n,!0),t=e.length,r;for(this._length+=n.byteLength,r=64;r<=t;r+=64)As(this._hash,aM(e.subarray(r-64,r)));return this._buff=r-64<t?e.subarray(r-64):new Uint8Array(0),this};W0.ArrayBuffer.prototype.end=function(n){var e=this._buff,t=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i,a;for(i=0;i<t;i+=1)r[i>>2]|=e[i]<<(i%4<<3);return this._finish(r,t),a=n?this._hash:Tp(this._hash),this.reset(),a};W0.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this};W0.ArrayBuffer.prototype.getState=function(){var n=W0.prototype.getState.call(this);return n.buff=rG(n.buff),n};W0.ArrayBuffer.prototype.setState=function(n){return n.buff=nG(n.buff,!0),W0.prototype.setState.call(this,n)};W0.ArrayBuffer.prototype.destroy=W0.prototype.destroy;W0.ArrayBuffer.prototype._finish=W0.prototype._finish;W0.ArrayBuffer.hash=function(n,e){e=e||{};var t=eG(new Uint8Array(n,e.start||0,e.length));return e.raw?t:Tp(t)};function fr(n,e,t,r,i){if(n instanceof ArrayBuffer&&(n=new DataView(n)),e instanceof ArrayBuffer&&(e=new DataView(e)),Array.isArray(e))for(let a=0;a<i;a++)n.setUint8(t+a,e[r+a]);else for(let a=0;a<i;a++)n.setUint8(t+a,e.getUint8(r+a))}function hi(n){const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n[r];return e}function aG(n,e,t){return e+t>n.byteLength?"":W0.ArrayBuffer.hash(n,{start:e,length:t})}function Wn(n,e){return aG.apply(null,n).toLowerCase()===e.toLowerCase()}function X4(n,e=n.byteLength,t=0){let r="",i;n instanceof ArrayBuffer?i=new DataView(n):i=n;for(let a=0;a<e;a++)r+=At(i.getUint8(a),"")+(a&&t&&(a+1)%t===0?`
`:" ");return r}function oG(n,e=n.byteLength,t=0){console.log(X4(n,e,t))}function lM(n,e,t){const i=No(e,t).createImageData(e,t),a=new Uint8Array(n);for(let o=0;o<n.byteLength;o++)i.data[o]=a[o];return i}function Ea(n,e,t){const r=lM(n,e,t),i=No(e,t);return i.putImageData(r,0,0),i.canvas.toDataURL()}function cM(n){const e=atob(n.split(",")[1]),t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return t}function uM(n,e){if(n.byteLength!==e.byteLength)return!1;const t=new Uint8Array(n),r=new Uint8Array(e);for(let i=0;i<t.byteLength;i++)if(t[i]!==r[i])return!1;return!0}function sG(n,e){if(!n||!e)return n||e;const t=new Uint8Array(n.byteLength+e.byteLength);return t.set(new Uint8Array(n),0),t.set(new Uint8Array(e),n.byteLength),t.buffer}function lG(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function cG(n,e,t=(r,i)=>r===i){const r=[];for(let i=0;i<n.length;i++){const a=n[i];for(let o=0;o<e.length;o++)if(t(a,e[o])){r.push(a);break}}return r}function Gd(n,e){const t=new Array(e);for(let r=0;r<e;r++)t[r]=n;return t}const uG=[{addr:2147484416,type:"u32",name:"osTvType",desc:"0=PAL"},{addr:2147484420,type:"u32",name:"osRomType",desc:"0=cart"},{addr:2147484424,type:"data",name:"osRomBase",desc:"B0000000=cart"},{addr:2147484428,type:"data",name:"osResetType",desc:"0=cold reset"},{addr:2147484440,type:"data",name:"osMemSize",desc:"Size of RDRAM"},{addr:2147567024,type:"code",name:"ReadMainFS",desc:"Reads file from MainFS"},{addr:2147567408,type:"code",name:"FreeMainFS",desc:"Free's an allocated MainFS file pointer"},{addr:2147578972,type:"code",name:"DMA",desc:"A0=rom_addr"},{addr:2147579176,type:"code",name:"LoadFormFile",desc:"A0=main_fs_DDDDFFFF"},{addr:2147579276,type:"code",name:"GetRandomByte"},{addr:2147579328,type:"code",name:"LoadOverlay",desc:"A0=overlay_index"},{addr:2147584272,type:"code",name:"InitSprite",desc:"A0=u32 file_id DDDDFFFF"},{addr:2147585104,type:"code",name:"ShowBasicSprite",desc:"A0=u16 basic_sprite_index"},{addr:2147585148,type:"code",name:"HideBasicSprite",desc:"A0=u16 basic_sprite_index"},{addr:2147585232,type:"code",name:"SetBasicSpritePos",desc:"A0=u16 basic_sprite_index"},{addr:2147585816,type:"code",name:"SetBasicSpriteSize",desc:"A0=u16 basic_sprite_index"},{addr:2147586144,type:"code",name:"InitBasicSprite",desc:"A0=short sprite_index"},{addr:2147594896,type:"code",name:"ParseObjType10",desc:"Parse OBJ1 type 0x10"},{addr:2147599080,type:"code",name:"FindFormEntry",desc:'Finds a FORM entry. A0=entry type (like "OBJ1")'},{addr:2147603008,type:"code",name:"InitCameras",desc:"A0=int cameras count"},{addr:2147604788,type:"code",name:"Convert3DTo2D",desc:"A0=3 point vector"},{addr:2147630100,type:"code",name:"LoadFormBinary",desc:"A0=form_addr"},{addr:2147726976,type:"code",name:"MakePermHeap",desc:"A0=heap_addr"},{addr:2147727012,type:"code",name:"MallocPerm",desc:"A0=size"},{addr:2147727048,type:"code",name:"FreePerm",desc:"A0=addr"},{addr:2147727184,type:"code",name:"MakeTempHeap",desc:"A0=heap_addr"},{addr:2147727220,type:"code",name:"MallocTemp",desc:"A0=size"},{addr:2147727256,type:"code",name:"FreeTemp",desc:"A0=addr"},{addr:2147729740,type:"code",name:"DirectionPrompt",desc:"Prompts player to choose path at branch"},{addr:2147740080,type:"code",name:"RunDecisionTree",desc:"A0=decision_tree_pointer"},{addr:2147768184,type:"code",name:"ShowPlayerCoinChange",desc:"A0=player_index"},{addr:2147787668,type:"code",name:"HVQDecode",desc:"HVQ image decoder"},{addr:2147795436,type:"code",name:"GetSpaceData",desc:"A0=space_index"},{addr:2147795460,type:"code",name:"GetAbsSpaceIndexFromChainSpaceIndex",desc:"A0=chain_index"},{addr:2147795504,type:"code",name:"GetChainLength",desc:"A0=chain_index"},{addr:2147795532,type:"code",name:"GetChainSpaceIndexFromAbsSpaceIndex",desc:"A0=abs_space_index"},{addr:2147796108,type:"code",name:"SetSpaceType",desc:"A0=space_index"},{addr:2147797248,type:"code",name:"EventTableHydrate",desc:"Moves event table data into the space data"},{addr:2147797804,type:"code",name:"SetCurrentSpaceIndex",desc:"A0=space_index"},{addr:2147797816,type:"code",name:"GetCurrentSpaceIndex"},{addr:2147798640,type:"code",name:"SwapPlayerLocationData",desc:"A0=player_index_1"},{addr:2147798848,type:"code",name:"SetPlayerBlue",desc:"Sets the player's turn state blue"},{addr:2147798856,type:"code",name:"SetPlayerRed",desc:"Sets the player's turn state red"},{addr:2147798864,type:"code",name:"SetPlayerGreen",desc:"Sets the player's turn state green"},{addr:2147798896,type:"code",name:"GetSumOfPlayerStars",desc:"sums the star count of all players"},{addr:2147798976,type:"code",name:"RNGPercentChance",desc:"A0=percent chance the call returns true"},{addr:2147799048,type:"code",name:"GetTurnsRemaining",desc:"Subtracts elapsed turns from total turns"},{addr:2147801048,type:"code",name:"SetPlayerOntoChain",desc:"A0=player_index"},{addr:2147801156,type:"code",name:"SetNextChainAndSpace",desc:"A0=player_index"},{addr:2147801392,type:"code",name:"CreateTextWindow",desc:"creates a text window based on upper left x and y coordinate"},{addr:2147801560,type:"code",name:"ShowTextWindow"},{addr:2147801808,type:"code",name:"HideTextWindow"},{addr:2147802724,type:"code",name:"WaitForTextConfirmation"},{addr:2147822208,type:"code",name:"GetCurrentPlayerIndex"},{addr:2147822220,type:"code",name:"GetPlayerStruct",desc:"A0=player_index pass -1 to get current player's struct"},{addr:2147822284,type:"code",name:"PlayerIsCurrent",desc:"A0=player_index tests if A0 is the current player"},{addr:2147822312,type:"code",name:"PlayerStructIsCurrent",desc:"A0=struct player pointer"},{addr:2147822368,type:"code",name:"PlayerIsCPU",desc:"A0=player_index"},{addr:2147822408,type:"code",name:"AdjustPlayerCoins",desc:"A0=player_index"},{addr:2147822520,type:"code",name:"PlayerHasCoins",desc:"A0=player_index"},{addr:2147823648,type:"code",name:"ClearPlayer0x20",desc:"clears all 0x20 entries in player structs"},{addr:2147834208,type:"code",name:"AdjustPlayerCoinsGradual",desc:"A0=player_index"},{addr:2147845968,type:"code",name:"ExecBoardScene",desc:"A0=board_fns"},{addr:2147850136,type:"code",name:"IsBoardFeatureFlagSet"},{addr:2147850204,type:"code",name:"SetBoardFeatureFlag",desc:"A0=feature"},{addr:2147850284,type:"code",name:"ClearBoardFeatureFlag",desc:"A0=feature"},{addr:2147850368,type:"code",name:"MakeHeap",desc:"A0=addr"},{addr:2147850400,type:"code",name:"Malloc",desc:"A0=heap pointer (main or temp)"},{addr:2147850540,type:"code",name:"Free",desc:"A0=allocated heap pointer"},{addr:2147851008,type:"code",name:"Ensure16",desc:"A0=num"},{addr:2147858488,type:"code",name:"FreeString",desc:"A0=*str"},{addr:2147864368,type:"code",name:"InitObjectSystem",desc:"A0=int max_objects"},{addr:2147867688,type:"code",name:"InitProcess",desc:"A0=fn"},{addr:2147868048,type:"code",name:"EndProcess"},{addr:2147877548,type:"code",name:"PlaySound",desc:"A0=index"},{addr:2147885756,type:"code",name:"DrawDebugText",desc:"A0=x_pos"},{addr:2147890512,type:"code",name:"SleepProcess"},{addr:2147890612,type:"code",name:"SleepVProcess"},{addr:2147932120,type:"code",name:"LoadStringIntoWindow",desc:"A0=window_id"},{addr:2147934320,type:"code",name:"SetTextCharsPerFrame",desc:"A0=window_id"},{addr:2148005196,type:"code",name:"HVQDecodeInner",desc:"HVQ image decoder"},{addr:2148007236,type:"code",name:"__leoCommand"},{addr:2148010448,type:"code",name:"__leoAnalize_asic_status"},{addr:2148011632,type:"code",name:"__leoSend_asic_cmd_w"},{addr:2148011688,type:"code",name:"__leoSend_asic_cmd_w_nochkDiskChange"},{addr:2148012004,type:"code",name:"__leoRecal_w"},{addr:2148012144,type:"code",name:"__leoSeek_w"},{addr:2148012288,type:"code",name:"__leoChk_err_retry"},{addr:2148012560,type:"code",name:"__leoChk_cur_drvmode"},{addr:2148012832,type:"code",name:"__LEOrw_flags"},{addr:2148012834,type:"code",name:"__LEOdma_que"},{addr:2148012858,type:"code",name:"__LEOPiDmaParam"},{addr:2148012882,type:"code",name:"__LEOtgt_param"},{addr:2148012894,type:"code",name:"__LEOPiInfo"},{addr:2148012898,type:"code",name:"__LEOasic_seq_ctl_shadow"},{addr:2148012902,type:"code",name:"__leoSet_mseq"},{addr:2148013268,type:"code",name:"__leoClr_reset"},{addr:2148013380,type:"code",name:"__LEOcommand_que"},{addr:2148013404,type:"code",name:"__leoClr_queue"},{addr:2148013552,type:"code",name:"__leoLba_to_phys"},{addr:2148014484,type:"code",name:"LeoReadDiskID"},{addr:2148014580,type:"code",name:"LeoReadWrite"},{addr:2148017600,type:"code",name:"osLeoDiskInit"},{addr:2148017756,type:"code",name:"__osDiskHandle"},{addr:2148017760,type:"code",name:"__LeoDiskHandle"},{addr:2148018112,type:"code",name:"LeoDriveExist"},{addr:2148029872,type:"code",name:"sqrtf",desc:"of F0 and F12"},{addr:2148029888,type:"code",name:"cosf"},{addr:2148030224,type:"code",name:"guLookAt",desc:"Calculate a 'lookat' view matrix."},{addr:2148031124,type:"code",name:"guLookAtF",desc:"Calculate a 'lookat' view matrix (floating point)"},{addr:2148032032,type:"code",name:"guLookAtReflect"},{addr:2148032140,type:"code",name:"guLookAtReflectF"},{addr:2148033552,type:"code",name:"guLookAtHilite"},{addr:2148033764,type:"code",name:"guLookAtHiliteF"},{addr:2148036208,type:"code",name:"guMtxF2L"},{addr:2148036360,type:"code",name:"guMtxL2F"},{addr:2148036448,type:"code",name:"guMtxIdentF"},{addr:2148036528,type:"code",name:"guMtxIdentF"},{addr:2148036696,type:"code",name:"guMtxF2L"},{addr:2148036848,type:"code",name:"guMtxXFMF"},{addr:2148037020,type:"code",name:"guMtxCatF"},{addr:2148037068,type:"code",name:"guMtxXFMF"},{addr:2148037248,type:"code",name:"guMtxXFML"},{addr:2148037388,type:"code",name:"guMtxCatL"},{addr:2148037504,type:"code",name:"guOrtho",desc:"Calculate a positive projection matrix."},{addr:2148037836,type:"code",name:"guOrthoF",desc:"Calculate a positive projection matrix (floating point)"},{addr:2148038144,type:"code",name:"guPerspective",desc:"Calculate a perspective drawing projection matrix."},{addr:2148038600,type:"code",name:"guPerspectiveF",desc:"Calculate a perspective drawing projection matrix (floating point)"},{addr:2148039040,type:"code",name:"guRotate"},{addr:2148039416,type:"code",name:"guRotateF"},{addr:2148039776,type:"code",name:"guRotateRPY"},{addr:2148040172,type:"code",name:"guRotateRPYF"},{addr:2148040576,type:"code",name:"guScale"},{addr:2148040700,type:"code",name:"guScaleF"},{addr:2148040800,type:"code",name:"sinf"},{addr:2148041216,type:"code",name:"guTranslate"},{addr:2148041328,type:"code",name:"guTranslateF"},{addr:2148041424,type:"code",name:"guRandom",desc:"Generates a pseudo-random number"},{addr:2148041472,type:"code",name:"osInvalDCache"},{addr:2148041872,type:"code",name:"osSetIntMask"},{addr:2148042096,type:"code",name:"osWritebackDCache"},{addr:2148042272,type:"code",name:"osCreateMesgQueue"},{addr:2148042320,type:"code",name:"osCreateThread"},{addr:2148042736,type:"code",name:"osGetThreadPri"},{addr:2148042768,type:"code",name:"osGetTime"},{addr:2148042912,type:"code",name:"osJamMesg"},{addr:2148043232,type:"code",name:"osRecvMesg"},{addr:2148043536,type:"code",name:"osSendMesg"},{addr:2148043840,type:"code",name:"osSetThreadPri"},{addr:2148044048,type:"code",name:"osStartThread"},{addr:2148044336,type:"code",name:"osStopThread"},{addr:2148044528,type:"code",name:"__osDequeueThread"},{addr:2148044580,type:"code",name:"__osFaultedThread"},{addr:2148044584,type:"code",name:"__osRunningThread"},{addr:2148044588,type:"code",name:"__osActiveQueue"},{addr:2148044592,type:"code",name:"__osRunQueue"},{addr:2148044596,type:"code",name:"__osThreadTail"},{addr:2148044992,type:"code",name:"__osSetTimerIntr"},{addr:2148045088,type:"code",name:"__osInsertTimer"},{addr:2148045360,type:"code",name:"osVirtualToPhysical",desc:"Translates between CPU virtual address/physical memory address"},{addr:2148045472,type:"code",name:"alBnkfNew",desc:"Initializes a bank file"},{addr:2148045620,type:"code",name:"alSeqFileNew"},{addr:2148045684,type:"code",name:"__bnkf_o_0098"},{addr:2148045856,type:"code",name:"__bnkf_o_0118"},{addr:2148046004,type:"code",name:"__bnkf_o_01D8"},{addr:2148046092,type:"code",name:"__bnkf_o_0258"},{addr:2148046192,type:"code",name:"alEvtqFlushType"},{addr:2148046316,type:"code",name:"alEvtqNextEvent"},{addr:2148046368,type:"code",name:"alEvtqFlushstring_num",desc:"returns pointer"},{addr:2148046468,type:"code",name:"alEvtqPostEvent"},{addr:2148046488,type:"code",name:"alEvtqPostEvent"},{addr:2148046756,type:"code",name:"alEvtqNextEvent"},{addr:2148046856,type:"code",name:"alEvtqFlushType"},{addr:2148046908,type:"code",name:"alEvtqNew"},{addr:2148047132,type:"code",name:"alLink"},{addr:2148047164,type:"code",name:"alUnlink"},{addr:2148047216,type:"code",name:"alHeapInit"},{addr:2148047280,type:"code",name:"alHeapDBAlloc"},{addr:2148047360,type:"code",name:"alCopy"},{addr:2148047424,type:"code",name:"alCSeqGetLoc"},{addr:2148047540,type:"code",name:"alCSeqSetLoc"},{addr:2148047656,type:"code",name:"alCSeqNewMarker"},{addr:2148047692,type:"code",name:"alCSeqNextEvent"},{addr:2148047936,type:"code",name:"__alCSeqNextDelta"},{addr:2148048064,type:"code",name:"__cseq_o_0194"},{addr:2148048320,type:"code",name:"alCSeqGetTicks"},{addr:2148048328,type:"code",name:"alCSeqSecToTicks"},{addr:2148048488,type:"code",name:"alCSeqTicksToSec"},{addr:2148048612,type:"code",name:"__alCSeqNextDelta"},{addr:2148048740,type:"code",name:"alCSeqNextEvent"},{addr:2148048984,type:"code",name:"alCSeqNew"},{addr:2148049876,type:"code",name:"__cseq_o_02A4"},{addr:2148050060,type:"code",name:"__cseq_o_0088"},{addr:2148050176,type:"code",name:"alSeqpDelete"},{addr:2148050208,type:"code",name:"alSeqpGetChlFXMix"},{addr:2148050240,type:"code",name:"alSeqpGetChlPan"},{addr:2148050272,type:"code",name:"alSeqpGetChlVol"},{addr:2148050304,type:"code",name:"alSeqpGetChlProgram"},{addr:2148050432,type:"code",name:"alCSPGetTempo"},{addr:2148050480,type:"code",name:"alSeqpGetState"},{addr:2148050496,type:"code",name:"alSeqpPlay"},{addr:2148050544,type:"code",name:"alSeqpSetBank"},{addr:2148050592,type:"code",name:"alSeqpSetChlFXMix"},{addr:2148050672,type:"code",name:"alSeqpSetSeq"},{addr:2148050720,type:"code",name:"alSeqpSetTempo"},{addr:2148050800,type:"code",name:"alSeqpSetVol"},{addr:2148050848,type:"code",name:"alSeqpStop"},{addr:2148050896,type:"code",name:"alSndpDelete"},{addr:2148050944,type:"code",name:"alSndpAllocate"},{addr:2148051136,type:"code",name:"alSndpDeallocate"},{addr:2148051216,type:"code",name:"alSndpSetSound"},{addr:2148051232,type:"code",name:"alSndpPlay"},{addr:2148051328,type:"code",name:"alSndpGetSound"},{addr:2148051344,type:"code",name:"alSndpStop"},{addr:2148051424,type:"code",name:"alSndpGetState"},{addr:2148051456,type:"code",name:"alSndpSetPitch"},{addr:2148051536,type:"code",name:"alSndpSetPriority"},{addr:2148051584,type:"code",name:"alSndpSetVol"},{addr:2148051664,type:"code",name:"alSndpSetPan"},{addr:2148051744,type:"code",name:"alSndpSetFXMix"},{addr:2148051824,type:"code",name:"alSynDelete"},{addr:2148051840,type:"code",name:"alSynAddPlayer"},{addr:2148051920,type:"code",name:"alSynRemovePlayer"},{addr:2148052080,type:"code",name:"alSynFreeVoice"},{addr:2148052240,type:"code",name:"_allocatePVoice"},{addr:2148052424,type:"code",name:"alSynAllocVoice"},{addr:2148052536,type:"code",name:"__synallocvoice_o_0048"},{addr:2148052720,type:"code",name:"alSynStopVoice"},{addr:2148052848,type:"code",name:"alSynStartVoice"},{addr:2148053008,type:"code",name:"alSynSetPitch"},{addr:2148053152,type:"code",name:"alSynSetVol"},{addr:2148053344,type:"code",name:"alCents2Ratio"},{addr:2148053440,type:"code",name:"osAiGetLength"},{addr:2148053616,type:"code",name:"osSpTaskStartGo"},{addr:2148053660,type:"code",name:"osSpTaskLoad"},{addr:2148054192,type:"code",name:"osSpTaskYield"},{addr:2148054224,type:"code",name:"osSpTaskYielded"},{addr:2148054304,type:"code",name:"osViGetCurrentFramebuffer"},{addr:2148054432,type:"code",name:"osViSetEvent"},{addr:2148054528,type:"code",name:"osViSetMode"},{addr:2148054608,type:"code",name:"osViSwapBuffer"},{addr:2148054688,type:"code",name:"osViBlack"},{addr:2148055664,type:"code",name:"__osPfsGetInitData"},{addr:2148055844,type:"code",name:"__osPfsRequestData"},{addr:2148056008,type:"code",name:"__osPfsPifRam"},{addr:2148056044,type:"code",name:"__pfsisplug_o_004C"},{addr:2148056072,type:"code",name:"osPfsIsPlug"},{addr:2148056208,type:"code",name:"__pfsisplug_o_0094"},{addr:2148056400,type:"code",name:"osEepromLongWrite"},{addr:2148056640,type:"code",name:"osEepromLongRead"},{addr:2148056752,type:"code",name:"osEPiStartDma"},{addr:2148056912,type:"code",name:"__osPiCreateAccessQueue"},{addr:2148056952,type:"code",name:"__osPiGetAccess"},{addr:2148056996,type:"code",name:"__osPiGetAccess"},{addr:2148057060,type:"code",name:"__osPiAccessQueue"},{addr:2148057084,type:"code",name:"__osPiCreateAccessQueue"},{addr:2148057104,type:"code",name:"__osPiRelAccess"},{addr:2148057152,type:"code",name:"bcopy"},{addr:2148057952,type:"code",name:"bzero",desc:"Writes all zeroes"},{addr:2148058112,type:"code",name:"strchr"},{addr:2148058204,type:"code",name:"memcpy"},{addr:2148058168,type:"code",name:"strlen"},{addr:2148058256,type:"code",name:"sprintf",desc:"A0=out_addr"},{addr:2148058400,type:"code",name:"rmonPrintf",desc:"no-op in release"},{addr:2148058420,type:"code",name:"osSyncPrintf",desc:"no-op in release"},{addr:2148058564,type:"code",name:"alCSPNew"},{addr:2148065316,type:"code",name:"alSeqpNew"},{addr:2148065496,type:"code",name:"__seqplayer_o_03EC"},{addr:2148067584,type:"code",name:"__seqplayer_o_0400"},{addr:2148067692,type:"code",name:"__seqplayer_o_0A54"},{addr:2148067772,type:"code",name:"__seqplayer_o_0244"},{addr:2148067872,type:"code",name:"__seqplayer_o_0D18"},{addr:2148067956,type:"code",name:"__seqplayer_o_0A1C"},{addr:2148068168,type:"code",name:"__seqplayer_o_0284"},{addr:2148068280,type:"code",name:"__seqplayer_o_0320"},{addr:2148068308,type:"code",name:"__seqplayer_o_0C7C"},{addr:2148068376,type:"code",name:"__seqplayer_o_04F8"},{addr:2148068668,type:"code",name:"__seqplayer_o_04E0"},{addr:2148068844,type:"code",name:"__seqplayer_o_0600"},{addr:2148069016,type:"code",name:"__seqplayer_o_107C"},{addr:2148069100,type:"code",name:"__seqplayer_o_167C"},{addr:2148069228,type:"code",name:"__seqplayer_o_00BC"},{addr:2148069408,type:"code",name:"__seqplayer_o_0238"},{addr:2148069648,type:"code",name:"__seqplayer_o_05D8"},{addr:2148069712,type:"code",name:"alSynSetFXMix"},{addr:2148070164,type:"code",name:"alAudioFrame"},{addr:2148070596,type:"code",name:"alSynNew"},{addr:2148071472,type:"code",name:"osAiSetFrequency"},{addr:2148071760,type:"code",name:"__CartRomHandle"},{addr:2148071876,type:"code",name:"osCartRomInit"},{addr:2148072144,type:"code",name:"osEepromProbe"},{addr:2148072272,type:"code",name:"osEepromRead"},{addr:2148072680,type:"code",name:"__conteepread_o_00A8"},{addr:2148072816,type:"code",name:"osEepromWrite"},{addr:2148073176,type:"code",name:"__conteepwrite_o_00AC"},{addr:2148073344,type:"code",name:"__osEepStatus"},{addr:2148073760,type:"code",name:"osContGetReadData"},{addr:2148073916,type:"code",name:"osContStartReadData"},{addr:2148074052,type:"code",name:"__contreaddata_o_0028"},{addr:2148074736,type:"code",name:"osEPiReadIo"},{addr:2148074832,type:"code",name:"osEPiWriteIo"},{addr:2148074928,type:"code",name:"osMotorInit"},{addr:2148075512,type:"code",name:"__osMotorAccess"},{addr:2148075840,type:"code",name:"__osPfsDeclearPage"},{addr:2148076120,type:"code",name:"osPfsAllocateFile"},{addr:2148076620,type:"code",name:"__pfsallocatefile_o_0178"},{addr:2148076912,type:"code",name:"__osPfsReleasePages"},{addr:2148077016,type:"code",name:"osPfsDeleteFile"},{addr:2148077340,type:"code",name:"__pfsdeletefile_o_00EC"},{addr:2148077436,type:"code",name:"alHeapCheck"},{addr:2148077856,type:"code",name:"osPfsFreeBlocks"},{addr:2148078128,type:"code",name:"osPfsInitPak"},{addr:2148078632,type:"code",name:"__pfsinitpak_o_0050"},{addr:2148080192,type:"code",name:"osPfsRepairId"},{addr:2148080288,type:"code",name:"osPfsFindFile"},{addr:2148080704,type:"code",name:"__osPfsSelectBank"},{addr:2148080816,type:"code",name:"osCreatePiManager"},{addr:2148081216,type:"code",name:"__osPiRawStartDma"},{addr:2148081224,type:"code",name:"__osPiTable"},{addr:2148081228,type:"code",name:"__osPiDevMgr"},{addr:2148081332,type:"code",name:"__Dom1SpeedParam"},{addr:2148081424,type:"code",name:"__osSiRawStartDma"},{addr:2148081448,type:"code",name:"__osCurrentHandle"},{addr:2148081456,type:"code",name:"__osPiTable"},{addr:2148081460,type:"code",name:"__osPiDevMgr"},{addr:2148081600,type:"code",name:"__osSpRawStartDma"},{addr:2148082576,type:"code",name:"osViSetSpecialFeatures"},{addr:2148082944,type:"code",name:"__osViSwapContext"},{addr:2148083728,type:"code",name:"osAfterPreNMI"},{addr:2148085420,type:"code",name:"__osEnqueueAndYield"},{addr:2148085756,type:"code",name:"__osPopThread"},{addr:2148086176,type:"code",name:"osGetMemSize"},{addr:2148087072,type:"code",name:"__osDisableInt"},{addr:2148087184,type:"code",name:"__osRestoreInt"},{addr:2148087216,type:"code",name:"osSetEventMesg"},{addr:2148087392,type:"code",name:"__osSetHWIntrRoutine"},{addr:2148087680,type:"code",name:"osGetCount"},{addr:2148087712,type:"code",name:"__osProbeTLB"},{addr:2148088096,type:"code",name:"osSetTimer"},{addr:2148088256,type:"code",name:"alLoadParam"},{addr:2148088684,type:"code",name:"alRaw16Pull"},{addr:2148089608,type:"code",name:"alAdpcmPull"},{addr:2148090272,type:"code",name:"alLoadParam"},{addr:2148090700,type:"code",name:"__load_o_0108"},{addr:2148091088,type:"code",name:"alAuxBusParam"},{addr:2148091136,type:"code",name:"alAuxBusPull"},{addr:2148091308,type:"code",name:"alAuxBusParam"},{addr:2148091360,type:"code",name:"alMainBusParam"},{addr:2148091408,type:"code",name:"alMainBusPull"},{addr:2148091680,type:"code",name:"alMainBusParam"},{addr:2148091728,type:"code",name:"alResampleParam"},{addr:2148091920,type:"code",name:"alResamplePull"},{addr:2148092220,type:"code",name:"alResampleParam"},{addr:2148092416,type:"code",name:"alSeqGetLoc"},{addr:2148092480,type:"code",name:"alSeqNewMarker"},{addr:2148092648,type:"code",name:"__seq_o_044C"},{addr:2148092756,type:"code",name:"alSeqSecToTicks"},{addr:2148092900,type:"code",name:"alSeqTicksToSec"},{addr:2148093008,type:"code",name:"__alSeqNextDelta"},{addr:2148093108,type:"code",name:"alSeqNextEvent"},{addr:2148093468,type:"code",name:"alSeqNew"},{addr:2148093644,type:"code",name:"alSeqSetLoc"},{addr:2148093700,type:"code",name:"__seq_o_011C"},{addr:2148093720,type:"code",name:"__seq_o_0040"},{addr:2148093768,type:"code",name:"__seq_o_0020"},{addr:2148093848,type:"code",name:"__seq_o_0104"},{addr:2148093936,type:"code",name:"alSynSetPriority"},{addr:2148093952,type:"code",name:"alSynAllocFX"},{addr:2148094112,type:"code",name:"__osAiDeviceBusy"},{addr:2148094144,type:"code",name:"__osSpDeviceBusy"},{addr:2148094176,type:"code",name:"__osSpGetStatus"},{addr:2148094192,type:"code",name:"__osSpSetStatus"},{addr:2148094208,type:"code",name:"__osSpSetPc"},{addr:2148094628,type:"code",name:"__osSiGetAccess"},{addr:2148094736,type:"code",name:"__osSiRelAccess"},{addr:2148094784,type:"code",name:"osPiGetCmdQueue"},{addr:2148097860,type:"code",name:"alFxNew"},{addr:2148099036,type:"code",name:"alEnvmixerNew"},{addr:2148099220,type:"code",name:"alLoadNew"},{addr:2148099396,type:"code",name:"alResampleNew"},{addr:2148099536,type:"code",name:"alAuxBusNew"},{addr:2148099628,type:"code",name:"alMainBusNew"},{addr:2148099720,type:"code",name:"alSaveNew"},{addr:2148099792,type:"code",name:"_ldexpf",desc:"multiply floating-point number by integral power of 2"},{addr:2148099828,type:"code",name:"_frexpf",desc:"convert floating-point number to fractional and integral components"},{addr:2148100052,type:"code",name:"alEnvmixerParam"},{addr:2148100264,type:"code",name:"alEnvmixerPull"},{addr:2148101072,type:"code",name:"alEnvmixerParam"},{addr:2148101284,type:"code",name:"__env_o_01E0"},{addr:2148102268,type:"code",name:"__env_o_0718"},{addr:2148102908,type:"code",name:"__env_o_027C"},{addr:2148103040,type:"code",name:"_doModFunc"},{addr:2148103180,type:"code",name:"alFxParamHdl"},{addr:2148103676,type:"code",name:"alFxParam"},{addr:2148103696,type:"code",name:"_filterBuffer"},{addr:2148103852,type:"code",name:"_loadOutputBuffer"},{addr:2148103924,type:"code",name:"alFxParam"},{addr:2148104388,type:"code",name:"_loadBuffer"},{addr:2148104440,type:"code",name:"__reverb_o_0178"},{addr:2148104756,type:"code",name:"_saveBuffer"},{addr:2148104976,type:"code",name:"__reverb_o_0154"},{addr:2148105124,type:"code",name:"alFxPull"},{addr:2148105344,type:"code",name:"__reverb_o_00C4"},{addr:2148105712,type:"code",name:"__reverb_o_024C"},{addr:2148105868,type:"code",name:"__reverb_o_05D0"},{addr:2148106016,type:"code",name:"alSaveParam"},{addr:2148106056,type:"code",name:"alSavePull"},{addr:2148106184,type:"code",name:"alSaveParam"},{addr:2148106224,type:"code",name:"__osPfsInodeCache"},{addr:2148106276,type:"code",name:"__osIdCheckSum"},{addr:2148106344,type:"code",name:"__osRepairPackId"},{addr:2148106480,type:"code",name:"__osPfsRWInode"},{addr:2148107092,type:"code",name:"__osCheckPackId"},{addr:2148107304,type:"code",name:"__osCheckId"},{addr:2148107448,type:"code",name:"__osGetId"},{addr:2148107488,type:"code",name:"__osGetId"},{addr:2148107908,type:"code",name:"__osCheckId"},{addr:2148107948,type:"code",name:"__osCheckPackId"},{addr:2148108092,type:"code",name:"__osPfsRWInode"},{addr:2148108304,type:"code",name:"__osRepairPackId"},{addr:2148108928,type:"code",name:"__osContRamRead"},{addr:2148109052,type:"code",name:"__osIdCheckSum"},{addr:2148109120,type:"code",name:"__osSumcalc"},{addr:2148109172,type:"code",name:"__osPfsInodeCacheBank"},{addr:2148109173,type:"code",name:"__osPfsInodeCacheChannel"},{addr:2148109440,type:"code",name:"__osContRamWrite"},{addr:2148109984,type:"code",name:"__osContDataCrc"},{addr:2148110108,type:"code",name:"__osContAddressCrc"},{addr:2148110224,type:"code",name:"__osDevMgrMain"},{addr:2148111184,type:"code",name:"__osEPiRawReadIo"},{addr:2148111552,type:"code",name:"__osEPiRawWriteIo"},{addr:2148111920,type:"code",name:"osPfsChecker"},{addr:2148113744,type:"code",name:"__osPfsGetStatus"},{addr:2148113872,type:"code",name:"__osPfsRequestOneChannel"},{addr:2148113984,type:"code",name:"__pfsgetstatus_o_0030"},{addr:2148114020,type:"code",name:"__osPfsGetStatus"},{addr:2148114132,type:"code",name:"__pfsgetstatus_o_0084"},{addr:2148114272,type:"code",name:"__osSpRawReadIo"},{addr:2148114352,type:"code",name:"__osSpRawWriteIo"},{addr:2148114432,type:"code",name:"__osResetGlobalIntMask"},{addr:2148114512,type:"code",name:"__osSetGlobalIntMask"},{addr:2148114576,type:"code",name:"osYieldThread"},{addr:2148114656,type:"code",name:"alFilterNew"},{addr:2148114688,type:"code",name:"__osSpDeviceBusy"},{addr:2148277364,type:"data",name:"overlay_table"},{addr:2148282356,type:"data",name:"rng_seed"},{addr:2148287312,type:"data",name:"model_info"},{addr:2148292986,type:"u16",name:"cur_board_scene_state",desc:"Determines how the board scene starts up when (re)loaded"},{addr:2148313792,type:"data",name:"jt_ai_logic",desc:"Jump table for 8003E9B0"},{addr:2148315232,type:"data",name:"jt_spacetype_to_turneffect",desc:"Jump table for space type to turn effect"},{addr:2148330124,type:"data",name:"__ALSndPlayer*sndp"},{addr:2148340464,type:"data",name:"main_fs_rom_location"},{addr:2148340468,type:"data",name:"main_fs_dir_count",desc:"Number of directories in main filesystem"},{addr:2148340480,type:"data",name:"main_fs_cur_dir_file_count",desc:"Count of files in directory being accessed"},{addr:2148360240,type:"data",name:"perm_heap_addr",desc:"Address of permanent heap"},{addr:2148360256,type:"data",name:"temp_heap_addr",desc:"Address of temporary heap"},{addr:2148368648,type:"data",name:"space_data",desc:"pointer to space data parsed from board def file"},{addr:2148368656,type:"data",name:"chain_data_addr",desc:"pointer to array of chain lengths and indices"},{addr:2148453156,type:"data",name:"debug_font_color",desc:"16 color values"},{addr:2148454722,type:"u16",name:"bank_coins",desc:"Coins in bank"},{addr:2148454724,type:"u16",name:"bank_stars",desc:"Stars in bank"},{addr:2148454728,type:"u16",name:"enabled_feature_flags"},{addr:2148454802,type:"u16",name:"times_passed_start",desc:"Number of times the start space has been passed"},{addr:2148455760,type:"u16",name:"max_objects",desc:"set from InitObjectSystem"},{addr:2148455879,type:"u8",name:"total_turns",desc:"Total game turns"},{addr:2148455881,type:"u8",name:"current_turn",desc:"Elapsed turns"},{addr:2148455900,type:"u16",name:"current_player_index",desc:"Player who's turn is active"},{addr:2148469236,type:"u32",name:"scene",desc:"Current scene"},{addr:2148478172,type:"u16",name:"hidden_block_space_index",desc:"Space index of hidden block"},{addr:2148479665,type:"u8",name:"p1_cpu_difficulty_1",desc:"Player 1 CPU difficulty"},{addr:2148479666,type:"u8",name:"p1_cpu_difficulty_2",desc:"Player 1 CPU difficulty"},{addr:2148479668,type:"u8",name:"p1_char",desc:"Player 1 character"},{addr:2148479672,type:"u16",name:"p1_coins",desc:"Player 1 coin count"},{addr:2148479674,type:"s16",name:"p1_minigame_coins",desc:"Player 1 coins in current Mini-Game"},{addr:2148479676,type:"u16",name:"p1_stars",desc:"Player 1 star count"},{addr:2148479678,type:"u16",name:"p1_cur_chain_index",desc:"Player 1 current chain index"},{addr:2148479680,type:"u16",name:"p1_cur_space_index",desc:"Player 1 current space index"},{addr:2148479682,type:"u16",name:"p1_next_chain_index",desc:"Player 1 next chain index"},{addr:2148479684,type:"u16",name:"p1_next_space_index",desc:"Player 1 next space index"},{addr:2148479686,type:"u8",name:"p1_poisoned",desc:"Player 1 poisoned boolean"},{addr:2148479687,type:"u8",name:"p1_turn_status",desc:"Color based on type of space landed on"},{addr:2148479700,type:"u16",name:"p1_total_minigame_coins",desc:"Player 1 total Mini-Game coins collected"},{addr:2148479702,type:"u16",name:"p1_total_coins",desc:"Player 1 total coins collected"},{addr:2148479704,type:"u8",name:"p1_total_happening_spaces",desc:"Player 1 total number of Happening Spaces landed on"},{addr:2148479705,type:"u8",name:"p1_total_red_spaces",desc:"Player 1 total number of red spaces landed on"},{addr:2148479706,type:"u8",name:"p1_total_blue_spaces",desc:"Player 1 total number of blue spaces landed on"},{addr:2148479707,type:"u8",name:"p1_total_minigame_spaces",desc:"Player 1 total number of Mini-Game spaces landed on"},{addr:2148479708,type:"u8",name:"p1_total_chance_spaces",desc:"Player 1 total number of Chance Time spaces landed on"},{addr:2148479709,type:"u8",name:"p1_total_mushroom_spaces",desc:"Player 1 total number of Mushroom spaces landed on"},{addr:2148479710,type:"u8",name:"p1_total_bowser_spaces",desc:"Player 1 total number of Bowser spaces landed on"},{addr:2148479713,type:"u8",name:"p2_cpu_difficulty_1",desc:"Player 2 CPU difficulty"},{addr:2148479714,type:"u8",name:"p2_cpu_difficulty_2",desc:"Player 2 CPU difficulty"},{addr:2148479716,type:"u8",name:"p2_char",desc:"Player 2 character"},{addr:2148479720,type:"u16",name:"p2_coins",desc:"Player 2 coin count"},{addr:2148479722,type:"s16",name:"p2_minigame_coins",desc:"Player 2 coins in current Mini-Game"},{addr:2148479724,type:"u16",name:"p2_stars",desc:"Player 2 star count"},{addr:2148479726,type:"u16",name:"p2_cur_chain_index",desc:"Player 2 current chain index"},{addr:2148479728,type:"u16",name:"p2_cur_space_index",desc:"Player 2 current space index"},{addr:2148479730,type:"u16",name:"p2_next_chain_index",desc:"Player 2 next chain index"},{addr:2148479732,type:"u16",name:"p2_next_space_index",desc:"Player 2 next space index"},{addr:2148479734,type:"u8",name:"p2_poisoned",desc:"Player 2 poisoned boolean"},{addr:2148479735,type:"u8",name:"p2_turn_status",desc:"Color based on type of spaced landed on"},{addr:2148479748,type:"u16",name:"p2_total_minigame_coins",desc:"Player 2 total Mini-Game coins collected"},{addr:2148479750,type:"u16",name:"p2_total_coins",desc:"Player 2 total coins collected"},{addr:2148479752,type:"u8",name:"p2_total_happening_spaces",desc:"Player 2 total number of Happening spaces landed on"},{addr:2148479753,type:"u8",name:"p2_total_red_spaces",desc:"Player 2 total number of red spaces landed on"},{addr:2148479754,type:"u8",name:"p2_total_blue_spaces",desc:"Player 2 total number of blue spaces landed on"},{addr:2148479755,type:"u8",name:"p2_total_minigame_spaces",desc:"Player 2 total number of Mini-Game spaces landed on"},{addr:2148479756,type:"u8",name:"p2_total_chance_spaces",desc:"Player 2 total number of Chance Time spaces landed on"},{addr:2148479757,type:"u8",name:"p2_total_mushroom_spaces",desc:"Player 2 total number of Mushroom spaces landed on"},{addr:2148479758,type:"u8",name:"p2_total_bowser_spaces",desc:"Player 2 total number of Bowser spaces landed on"},{addr:2148479761,type:"u8",name:"p3_cpu_difficulty_1",desc:"Player 3 CPU difficulty"},{addr:2148479762,type:"u8",name:"p3_cpu_difficulty_2",desc:"Player 3 CPU difficulty"},{addr:2148479764,type:"u8",name:"p3_char",desc:"Player 3 character"},{addr:2148479768,type:"u16",name:"p3_coins",desc:"Player 3 coin count"},{addr:2148479770,type:"s16",name:"p3_minigame_coins",desc:"Player 3 coins in current Mini-Game"},{addr:2148479772,type:"u16",name:"p3_stars",desc:"Player 3 star count"},{addr:2148479774,type:"u16",name:"p3_cur_chain_index",desc:"Player 3 current chain index"},{addr:2148479776,type:"u16",name:"p3_cur_space_index",desc:"Player 3 current space index"},{addr:2148479778,type:"u16",name:"p3_next_chain_index",desc:"Player 3 next chain index"},{addr:2148479780,type:"u16",name:"p3_next_space_index",desc:"Player 3 next space index"},{addr:2148479782,type:"u8",name:"p3_poisoned",desc:"Player 3 poisoned boolean"},{addr:2148479783,type:"u8",name:"p3_turn_status",desc:"Color based on type of space landed on"},{addr:2148479796,type:"u16",name:"p3_total_minigame_coins",desc:"Player 3 total Mini-Game coins collected"},{addr:2148479798,type:"u16",name:"p3_total_coins",desc:"Player 3 total coins collected"},{addr:2148479800,type:"u8",name:"p3_total_happening_spaces",desc:"Player 3 total number of Happening spaces landed on"},{addr:2148479801,type:"u8",name:"p3_total_red_spaces",desc:"Player 3 total number of red spaces landed on"},{addr:2148479802,type:"u8",name:"p3_total_blue_spaces",desc:"Player 3 total number of blue spaces landed on"},{addr:2148479803,type:"u8",name:"p3_total_minigame_spaces",desc:"Player 3 total number of Mini-Game spaces landed on"},{addr:2148479804,type:"u8",name:"p3_total_chance_spaces",desc:"Player 3 total number of Chance Time spaces landed on"},{addr:2148479805,type:"u8",name:"p3_total_mushroom_spaces",desc:"Player 3 total number of Mushroom spaces landed on"},{addr:2148479806,type:"u8",name:"p3_total_bowser_spaces",desc:"Player 3 total number of Bowser spaces landed on"},{addr:2148479809,type:"u8",name:"p3_cpu_difficulty_1",desc:"Player 3 CPU difficulty"},{addr:2148479810,type:"u8",name:"p3_cpu_difficulty_2",desc:"Player 3 CPU difficulty"},{addr:2148479812,type:"u8",name:"p4_char",desc:"Player 4 character"},{addr:2148479816,type:"u16",name:"p4_coins",desc:"Player 4 coin count"},{addr:2148479818,type:"s16",name:"p4_minigame_coins",desc:"Player 4 coins in current Mini-Game"},{addr:2148479820,type:"u16",name:"p4_stars",desc:"Player 4 star count"},{addr:2148479822,type:"u16",name:"p4_cur_chain_index",desc:"Player 4 current chain index"},{addr:2148479824,type:"u16",name:"p4_cur_space_index",desc:"Player 4 current space index"},{addr:2148479826,type:"u16",name:"p4_next_chain_index",desc:"Player 4 next chain index"},{addr:2148479828,type:"u16",name:"p4_next_space_index",desc:"Player 4 next space index"},{addr:2148479830,type:"u8",name:"p4_poisoned",desc:"Player 4 poisoned boolean"},{addr:2148479831,type:"u8",name:"p4_turn_status",desc:"Color based on type of space landed on"},{addr:2148479844,type:"u16",name:"p4_total_minigame_coins",desc:"Player 4 total Mini-Game coins collected"},{addr:2148479846,type:"u16",name:"p4_total_coins",desc:"Player 4 total coins collected"},{addr:2148479848,type:"u8",name:"p4_total_happening_spaces",desc:"Player 4 total number of Happening spaces landed on"},{addr:2148479849,type:"u8",name:"p4_total_red_spaces",desc:"Player 4 total number of red spaces landed on"},{addr:2148479850,type:"u8",name:"p4_total_blue_spaces",desc:"Player 4 total number of blue spaces landed on"},{addr:2148479851,type:"u8",name:"p4_total_minigame_spaces",desc:"Player 4 total number of Mini-Game spaces landed on"},{addr:2148479852,type:"u8",name:"p4_total_chance_spaces",desc:"Player 4 total number of Chance Time spaces landed on"},{addr:2148479853,type:"u8",name:"p4_total_mushroom_spaces",desc:"Player 4 total number of Mushroom spaces landed on"},{addr:2148479854,type:"u8",name:"p4_total_bowser_spaces",desc:"Player 4 total number of Bowser spaces landed on"}],dG=[{addr:2148275156,type:"data",name:"overlay_table"},{addr:2148489776,type:"data",name:"overlay_ram_start"}],AG=[{addr:2148307636,type:"data",name:"overlay_table"},{addr:2148546384,type:"data",name:"overlay_ram_start"}],fG=[{addr:2147484416,type:"u32",name:"osTvType",desc:"0=PAL"},{addr:2147484420,type:"u32",name:"osRomType",desc:"0=cart"},{addr:2147484424,type:"data",name:"osRomBase",desc:"B0000000=cart"},{addr:2147484428,type:"data",name:"osResetType",desc:"0=cold reset"},{addr:2147484440,type:"data",name:"osMemSize",desc:"Size of RDRAM"},{addr:2147568404,type:"code",name:"PlaySound",desc:"A0=sound_index"},{addr:2147579520,type:"code",name:"ReadMainFS",desc:"Reads file from MainFS"},{addr:2147579904,type:"code",name:"FreeMainFS",desc:"Free's an allocated MainFS file pointer"},{addr:2147584764,type:"code",name:"GetRandomByte"},{addr:2147749248,type:"code",name:"MakePermHeap",desc:"A0=heap_addr"},{addr:2147749284,type:"code",name:"MallocPerm",desc:"A0=size"},{addr:2147749320,type:"code",name:"FreePerm",desc:"A0=addr"},{addr:2147749456,type:"code",name:"MakeTempHeap",desc:"A0=heap_addr"},{addr:2147749492,type:"code",name:"MallocTemp",desc:"A0=size"},{addr:2147749528,type:"code",name:"FreeTemp",desc:"A0=addr"},{addr:2147764224,type:"code",name:"RunDecisionTree",desc:"A0=decision_tree_pointer"},{addr:2147797556,type:"code",name:"ShowPlayerCoinChange",desc:"A0=player_index"},{addr:2147800736,type:"code",name:"UseMushroom",desc:"Mushroom item function"},{addr:2147800884,type:"code",name:"UseSkeleton_key",desc:"Skeleton Key item function"},{addr:2147800920,type:"code",name:"UsePlunder_chest",desc:"Plunder Chest item function"},{addr:2147800960,type:"code",name:"UseBowserBomb",desc:"Bowser Bomb item function"},{addr:2147800992,type:"code",name:"UseDuelingGlove",desc:"Dueling Glove item function"},{addr:2147801176,type:"code",name:"UseWarpBlock",desc:"Warp Block item function"},{addr:2147801264,type:"code",name:"UseGoldenMushroom",desc:"Golden Mushroom item function"},{addr:2147801412,type:"code",name:"UseBooBell",desc:"Boo Bell item function"},{addr:2147801644,type:"code",name:"UseBowserSuit",desc:"Bowser Suit item function"},{addr:2147801796,type:"code",name:"UseMagicLamp",desc:"Magic Lamp item function"},{addr:2147828328,type:"code",name:"AddArrowAngle",desc:"F0=degree_rot_of_arrow"},{addr:2147830668,type:"code",name:"GetSpaceData",desc:"A0=space_index"},{addr:2147830704,type:"code",name:"GetAbsSpaceIndexFromChainSpaceIndex",desc:"A0=chain_index"},{addr:2147833484,type:"code",name:"EventTableHydrate",desc:"Moves event table data into the space data"},{addr:2147836228,type:"code",name:"CloseMessage",desc:"Closes open message window (with animation)"},{addr:2147836776,type:"code",name:"ShowMessage",desc:"A0=character_index"},{addr:2147839024,type:"code",name:"RotateCharacterModel",desc:"A0=player_index (-1 for cur)"},{addr:2147840736,type:"code",name:"SetPlayerOntoChain",desc:"A0=player_index"},{addr:2147840844,type:"code",name:"SetNextChainAndSpace"},{addr:2147867696,type:"code",name:"GetCurrentPlayerIndex"},{addr:2147867708,type:"code",name:"GetPlayerStruct",desc:"A0=player_index pass -1 to get current player's struct"},{addr:2147867780,type:"code",name:"PlayerIsCurrent",desc:"A0=player_index tests if A0 is the current player"},{addr:2147867808,type:"code",name:"PlayerIsCPU",desc:"A0=player_index"},{addr:2147867848,type:"code",name:"AdjustPlayerCoins",desc:"A0=player_index"},{addr:2147867960,type:"code",name:"PlayerHasCoins",desc:"A0=player_index"},{addr:2147868008,type:"code",name:"SetBoardPlayerAnimation",desc:"A0=player_index"},{addr:2147882164,type:"code",name:"AdjustPlayerCoinsGradual",desc:"A0=player_index"},{addr:2147910752,type:"code",name:"MakeHeap",desc:"A0=addr"},{addr:2147910784,type:"code",name:"Malloc",desc:"A0=heap pointer (main or temp)"},{addr:2147910924,type:"code",name:"Free",desc:"A0=allocated heap pointer"},{addr:2147967168,type:"code",name:"InitObjSys"},{addr:2147970660,type:"code",name:"InitProcess"},{addr:2147981148,type:"code",name:"PlayCharacterSound",desc:"A0=sound_index"},{addr:2147998176,type:"code",name:"SleepProcess"},{addr:2147998276,type:"code",name:"SleepVProcess"},{addr:2148070724,type:"code",name:"InitFadeIn",desc:"A0=fade_type"},{addr:2148070828,type:"code",name:"InitFadeOut",desc:"A0=fade_type"},{addr:2148397008,type:"data",name:"perm_heap_addr",desc:"Permanent heap pointer"},{addr:2148397024,type:"data",name:"temp_heap_addr",desc:"Temporary heap address"},{addr:2148084464,type:"code",name:"alSynStartVoiceParams"},{addr:2148084880,type:"code",name:"alSynSetPan"},{addr:2148101828,type:"code",name:"__leoCommand"},{addr:2148105040,type:"code",name:"__leoAnalize_asic_status"},{addr:2148106224,type:"code",name:"__leoSend_asic_cmd_w"},{addr:2148106280,type:"code",name:"__leoSend_asic_cmd_w_nochkDiskChange"},{addr:2148106596,type:"code",name:"__leoRecal_w"},{addr:2148106736,type:"code",name:"__leoSeek_w"},{addr:2148106880,type:"code",name:"__leoChk_err_retry"},{addr:2148107152,type:"code",name:"__leoChk_cur_drvmode"},{addr:2148107424,type:"code",name:"__LEOrw_flags"},{addr:2148107426,type:"code",name:"__LEOdma_que"},{addr:2148107450,type:"code",name:"__LEOPiDmaParam"},{addr:2148107474,type:"code",name:"__LEOtgt_param"},{addr:2148107490,type:"code",name:"__LEOasic_seq_ctl_shadow"},{addr:2148107494,type:"code",name:"__leoSet_mseq"},{addr:2148107860,type:"code",name:"__leoClr_reset"},{addr:2148107972,type:"code",name:"__LEOcommand_que"},{addr:2148107996,type:"code",name:"__leoClr_queue"},{addr:2148108144,type:"code",name:"__leoLba_to_phys"},{addr:2148108736,type:"code",name:"LeoDriveExist"},{addr:2148109280,type:"code",name:"__leoActive"},{addr:2148109284,type:"code",name:"LeoReadDiskID"},{addr:2148109376,type:"code",name:"__leoActive"},{addr:2148109380,type:"code",name:"LeoReadWrite"},{addr:2148109524,type:"code",name:"__LEO_country_code"},{addr:2148109528,type:"code",name:"__osShutdown"},{addr:2148109836,type:"code",name:"__LeoBootGame2"},{addr:2148110360,type:"code",name:"LeoBootGame"},{addr:2148110672,type:"code",name:"__LeoBootGame3"},{addr:2148117912,type:"code",name:"__leoInquiry"},{addr:2148118084,type:"code",name:"__leoMode_sel"},{addr:2148118260,type:"code",name:"__leoStart_stop"},{addr:2148118496,type:"code",name:"__LEORAM_BYTE"},{addr:2148118524,type:"code",name:"__LEOdisk_type"},{addr:2148118525,type:"code",name:"__LEORAM_START_LBA"},{addr:2148118543,type:"code",name:"__leoRd_capacity"},{addr:2148119508,type:"code",name:"__LEOtgt_param"},{addr:2148119520,type:"code",name:"leoRezero"},{addr:2148119668,type:"code",name:"leoSeek"},{addr:2148119860,type:"code",name:"__leoTest_unit_rdy"},{addr:2148123936,type:"code",name:"__osPiTable"},{addr:2148123940,type:"code",name:"osLeoDiskInit"},{addr:2148124092,type:"code",name:"__osDiskHandle"},{addr:2148124096,type:"code",name:"__LeoDiskHandle"},{addr:2148124448,type:"code",name:"osEepromWrite"},{addr:2148124808,type:"code",name:"__conteepwrite_o_00AC"},{addr:2148124976,type:"code",name:"__osEepStatus"},{addr:2148125392,type:"code",name:"osEepromProbe"},{addr:2148125520,type:"code",name:"osEepromLongWrite"},{addr:2148125760,type:"code",name:"osEepromLongRead"},{addr:2148127548,type:"code",name:"__osEnqueueAndYield"},{addr:2148127884,type:"code",name:"__osPopThread"},{addr:2148128304,type:"code",name:"__osDisableInt"},{addr:2148128416,type:"code",name:"__osRestoreInt"},{addr:2148128448,type:"code",name:"osSetIntMask"},{addr:2148128608,type:"code",name:"__osSetHWIntrRoutine"},{addr:2148128704,type:"code",name:"osCreatePiManager"},{addr:2148129104,type:"code",name:"__Dom2SpeedParam"},{addr:2148129112,type:"code",name:"__osPiTable"},{addr:2148129116,type:"code",name:"__osPiDevMgr"},{addr:2148129220,type:"code",name:"__Dom1SpeedParam"},{addr:2148129336,type:"code",name:"__osCurrentHandle"},{addr:2148129344,type:"code",name:"__osPiTable"},{addr:2148129348,type:"code",name:"__osPiDevMgr"},{addr:2148129600,type:"code",name:"osEPiWriteIo"},{addr:2148129696,type:"code",name:"osEPiReadIo"},{addr:2148129792,type:"code",name:"osEPiStartDma"},{addr:2148129952,type:"code",name:"__CartRomHandle"},{addr:2148130068,type:"code",name:"osCartRomInit"},{addr:2148130336,type:"code",name:"__osDevMgrMain"},{addr:2148131296,type:"code",name:"__osPiCreateAccessQueue"},{addr:2148131336,type:"code",name:"__osPiGetAccess"},{addr:2148131380,type:"code",name:"__osPiGetAccess"},{addr:2148131444,type:"code",name:"__osPiAccessQueue"},{addr:2148131468,type:"code",name:"__osPiCreateAccessQueue"},{addr:2148131488,type:"code",name:"__osPiRelAccess"},{addr:2148131536,type:"code",name:"osAiGetLength"},{addr:2148131552,type:"code",name:"__osPiAccessQueueEnabled"},{addr:2148132e3,type:"code",name:"alBnkfNew"},{addr:2148132148,type:"code",name:"alSeqFileNew"},{addr:2148132212,type:"code",name:"__bnkf_o_0098"},{addr:2148132384,type:"code",name:"__bnkf_o_0118"},{addr:2148132532,type:"code",name:"__bnkf_o_01D8"},{addr:2148132620,type:"code",name:"__bnkf_o_0258"},{addr:2148132720,type:"code",name:"alEvtqFlushType"},{addr:2148132844,type:"code",name:"alEvtqNextEvent"},{addr:2148132896,type:"code",name:"alEvtqFlush"},{addr:2148132996,type:"code",name:"alEvtqPostEvent"},{addr:2148133016,type:"code",name:"alEvtqPostEvent"},{addr:2148133284,type:"code",name:"alEvtqNextEvent"},{addr:2148133384,type:"code",name:"alEvtqFlushType"},{addr:2148133436,type:"code",name:"alEvtqNew"},{addr:2148133660,type:"code",name:"alLink"},{addr:2148133692,type:"code",name:"alUnlink"},{addr:2148133744,type:"code",name:"alHeapInit"},{addr:2148133808,type:"code",name:"alHeapDBAlloc"},{addr:2148133888,type:"code",name:"alCopy"},{addr:2148133952,type:"code",name:"alCSeqGetLoc"},{addr:2148134068,type:"code",name:"alCSeqSetLoc"},{addr:2148134184,type:"code",name:"alCSeqNewMarker"},{addr:2148134220,type:"code",name:"alCSeqNextEvent"},{addr:2148134464,type:"code",name:"__alCSeqNextDelta"},{addr:2148134592,type:"code",name:"__cseq_o_0194"},{addr:2148135140,type:"code",name:"__alCSeqNextDelta"},{addr:2148135512,type:"code",name:"alCSeqNew"},{addr:2148136404,type:"code",name:"__cseq_o_02A4"},{addr:2148136588,type:"code",name:"__cseq_o_0088"},{addr:2148136704,type:"code",name:"alSeqpDelete"},{addr:2148136736,type:"code",name:"alSeqpGetChlFXMix"},{addr:2148136768,type:"code",name:"alSeqpGetChlPan"},{addr:2148136800,type:"code",name:"alSeqpGetChlVol"},{addr:2148136832,type:"code",name:"alSeqpGetChlProgram"},{addr:2148136960,type:"code",name:"alCSPGetTempo"},{addr:2148137008,type:"code",name:"alSeqpGetState"},{addr:2148137024,type:"code",name:"alSeqpPlay"},{addr:2148137072,type:"code",name:"alSeqpSetBank"},{addr:2148137120,type:"code",name:"alSeqpSetSeq"},{addr:2148137168,type:"code",name:"alSeqpSetTempo"},{addr:2148137248,type:"code",name:"alSeqpSetVol"},{addr:2148137296,type:"code",name:"alSeqpStop"},{addr:2148137344,type:"code",name:"__CSPPostNextSeqEvent"},{addr:2148137460,type:"code",name:"alCSPNew"},{addr:2148138936,type:"code",name:"__csplayer_o_046C"},{addr:2148139052,type:"code",name:"__csplayer_o_01D0"},{addr:2148139308,type:"code",name:"__csplayer_o_03E0"},{addr:2148141448,type:"code",name:"__csplayer_o_03F4"},{addr:2148141848,type:"code",name:"__csplayer_o_115C"},{addr:2148141992,type:"code",name:"__csplayer_o_05B4"},{addr:2148142048,type:"code",name:"alSndpDelete"},{addr:2148142096,type:"code",name:"alSndpAllocate"},{addr:2148142288,type:"code",name:"alSndpDeallocate"},{addr:2148142368,type:"code",name:"alSndpSetSound"},{addr:2148142384,type:"code",name:"alSndpPlay"},{addr:2148142480,type:"code",name:"alSndpStop"},{addr:2148142560,type:"code",name:"alSndpGetState"},{addr:2148142592,type:"code",name:"alSndpSetPitch"},{addr:2148142672,type:"code",name:"alSndpSetPriority"},{addr:2148142720,type:"code",name:"alSndpSetVol"},{addr:2148142800,type:"code",name:"alSndpSetPan"},{addr:2148142880,type:"code",name:"alSndpSetFXMix"},{addr:2148143252,type:"code",name:"alAudioFrame"},{addr:2148143684,type:"code",name:"alSynNew"},{addr:2148144176,type:"code",name:"__synthesizer_o_0440"},{addr:2148144324,type:"code",name:"__synthesizer_o_0370"},{addr:2148144472,type:"code",name:"__synthesizer_o_032C"},{addr:2148144560,type:"code",name:"alSynDelete"},{addr:2148144576,type:"code",name:"alSynAddPlayer"},{addr:2148144656,type:"code",name:"alSynRemovePlayer"},{addr:2148144816,type:"code",name:"alSynFreeVoice"},{addr:2148144976,type:"code",name:"alSynAllocVoice"},{addr:2148145160,type:"code",name:"alSynAllocVoice"},{addr:2148145272,type:"code",name:"__synallocvoice_o_0048"},{addr:2148145456,type:"code",name:"alSynStopVoice"},{addr:2148145584,type:"code",name:"alSynStartVoice"},{addr:2148145744,type:"code",name:"alSynSetPitch"},{addr:2148145888,type:"code",name:"alSynSetVol"},{addr:2148146080,type:"code",name:"alSynSetFXMix"},{addr:2148146240,type:"code",name:"alSynAllocFX"},{addr:2148146400,type:"code",name:"alCents2Ratio"},{addr:2148146496,type:"code",name:"osInvalDCache"},{addr:2148146672,type:"code",name:"osInvalICache"},{addr:2148146800,type:"code",name:"osWritebackDCache"},{addr:2148146928,type:"code",name:"osWritebackDCacheAll"},{addr:2148146976,type:"code",name:"osContGetReadData"},{addr:2148147132,type:"code",name:"osContStartReadData"},{addr:2148147268,type:"code",name:"__contreaddata_o_0028"},{addr:2148148336,type:"code",name:"osVirtualToPhysical"},{addr:2148148432,type:"code",name:"cosf"},{addr:2148148768,type:"code",name:"guLookAt"},{addr:2148149668,type:"code",name:"guLookAtF"},{addr:2148150576,type:"code",name:"guLookAtHilite"},{addr:2148150788,type:"code",name:"guLookAtHiliteF"},{addr:2148153232,type:"code",name:"guLookAtReflect"},{addr:2148153340,type:"code",name:"guLookAtReflectF"},{addr:2148154924,type:"code",name:"guMtxCatF"},{addr:2148155152,type:"code",name:"guMtxXFML"},{addr:2148155292,type:"code",name:"guMtxCatL"},{addr:2148155408,type:"code",name:"guMtxF2L"},{addr:2148155560,type:"code",name:"guMtxL2F"},{addr:2148155648,type:"code",name:"guMtxIdentF"},{addr:2148155728,type:"code",name:"guMtxIdentF"},{addr:2148156048,type:"code",name:"guOrtho"},{addr:2148156380,type:"code",name:"guOrthoF"},{addr:2148156688,type:"code",name:"guPerspective"},{addr:2148157144,type:"code",name:"guPerspectiveF"},{addr:2148157584,type:"code",name:"guRandom",desc:"Generates a pseudo-random number"},{addr:2148157632,type:"code",name:"guRotate"},{addr:2148158008,type:"code",name:"guRotateF"},{addr:2148158368,type:"code",name:"guRotateRPY"},{addr:2148158764,type:"code",name:"guRotateRPYF"},{addr:2148159168,type:"code",name:"guScale"},{addr:2148159292,type:"code",name:"guScaleF"},{addr:2148159392,type:"code",name:"sinf"},{addr:2148159808,type:"code",name:"guTranslate"},{addr:2148159920,type:"code",name:"guTranslateF"},{addr:2148160016,type:"code",name:"bcopy"},{addr:2148160816,type:"code",name:"bzero"},{addr:2148160976,type:"code",name:"memcpy"},{addr:2148161016,type:"code",name:"strlen"},{addr:2148161040,type:"code",name:"strlen"},{addr:2148161052,type:"code",name:"strchr"},{addr:2148161076,type:"code",name:"memcpy"},{addr:2148161120,type:"code",name:"sprintf"},{addr:2148161264,type:"code",name:"rmonPrintf",desc:"no-op in released ROM"},{addr:2148161284,type:"code",name:"osSyncPrintf",desc:"no-op in released ROM"},{addr:2148161312,type:"code",name:"osCreateMesgQueue"},{addr:2148161360,type:"code",name:"osJamMesg"},{addr:2148161680,type:"code",name:"osRecvMesg"},{addr:2148161984,type:"code",name:"osSendMesg"},{addr:2148162288,type:"code",name:"osSetEventMesg"},{addr:2148162464,type:"code",name:"__osSetCause"},{addr:2148162480,type:"code",name:"__osSetCompare"},{addr:2148162496,type:"code",name:"__osSetCount"},{addr:2148162512,type:"code",name:"__osSetSR"},{addr:2148162528,type:"code",name:"osSpTaskStartGo"},{addr:2148162572,type:"code",name:"osSpTaskLoad"},{addr:2148163104,type:"code",name:"osSpTaskYield"},{addr:2148163136,type:"code",name:"osSpTaskYielded"},{addr:2148163216,type:"code",name:"__osSiRawStartDma"},{addr:2148163476,type:"code",name:"__osSiGetAccess"},{addr:2148163584,type:"code",name:"__osSiRelAccess"},{addr:2148163632,type:"code",name:"osCreateThread"},{addr:2148164064,type:"code",name:"osGetThreadPri"},{addr:2148164096,type:"code",name:"osSetThreadPri"},{addr:2148164304,type:"code",name:"osStartThread"},{addr:2148164592,type:"code",name:"osStopThread"},{addr:2148164784,type:"code",name:"__osDequeueThread"},{addr:2148164836,type:"code",name:"__osFaultedThread"},{addr:2148164840,type:"code",name:"__osRunningThread"},{addr:2148164844,type:"code",name:"__osActiveQueue"},{addr:2148164848,type:"code",name:"osYieldThread"},{addr:2148164852,type:"code",name:"__osThreadTail"},{addr:2148164928,type:"code",name:"osGetTime"},{addr:2148165072,type:"code",name:"osSetTimer"},{addr:2148165632,type:"code",name:"__osSetTimerIntr"},{addr:2148165728,type:"code",name:"__osInsertTimer"},{addr:2148166e3,type:"code",name:"__osProbeTLB"},{addr:2148166192,type:"code",name:"osViGetCurrentFramebuffer"},{addr:2148167152,type:"code",name:"osViSetEvent"},{addr:2148167248,type:"code",name:"osViSetMode"},{addr:2148167328,type:"code",name:"osViSetSpecialFeatures"},{addr:2148167696,type:"code",name:"osViSetYScale"},{addr:2148167776,type:"code",name:"osViSwapBuffer"},{addr:2148167856,type:"code",name:"__osViSwapContext"},{addr:2148168640,type:"code",name:"osViBlack"},{addr:2148168736,type:"code",name:"osMotorInit"},{addr:2148169320,type:"code",name:"__osMotorAccess"},{addr:2148169648,type:"code",name:"__osPfsSelectBank"},{addr:2148169760,type:"code",name:"__osContRamRead"},{addr:2148170248,type:"code",name:"__osPfsLastChannel"},{addr:2148170256,type:"code",name:"__osContRamWrite"},{addr:2148170880,type:"code",name:"osAfterPreNMI"},{addr:2148170912,type:"code",name:"osGetMemSize"},{addr:2148171824,type:"code",name:"osEepromRead"},{addr:2148172232,type:"code",name:"__conteepread_o_00A8"},{addr:2148172368,type:"code",name:"__osSetGlobalIntMask"},{addr:2148172432,type:"code",name:"__osResetGlobalIntMask"},{addr:2148172512,type:"code",name:"__osPiRawStartDma"},{addr:2148172720,type:"code",name:"osPiGetCmdQueue"},{addr:2148172752,type:"code",name:"__osEPiRawReadIo"},{addr:2148173104,type:"code",name:"alHeapCheck"},{addr:2148173120,type:"code",name:"__osEPiRawWriteIo"},{addr:2148173488,type:"code",name:"__osAiDeviceBusy"},{addr:2148173520,type:"code",name:"_init_lpfilter"},{addr:2148173684,type:"code",name:"alFxNew"},{addr:2148174860,type:"code",name:"alEnvmixerNew"},{addr:2148175044,type:"code",name:"alLoadNew"},{addr:2148175220,type:"code",name:"alResampleNew"},{addr:2148175360,type:"code",name:"alAuxBusNew"},{addr:2148175452,type:"code",name:"alMainBusNew"},{addr:2148175544,type:"code",name:"alSaveNew"},{addr:2148175616,type:"code",name:"alLoadParam"},{addr:2148176044,type:"code",name:"alRaw16Pull"},{addr:2148176968,type:"code",name:"alAdpcmPull"},{addr:2148177632,type:"code",name:"alLoadParam"},{addr:2148178060,type:"code",name:"__load_o_0108"},{addr:2148178448,type:"code",name:"alAuxBusParam"},{addr:2148178496,type:"code",name:"alAuxBusPull"},{addr:2148178668,type:"code",name:"alAuxBusParam"},{addr:2148178720,type:"code",name:"_ldexpf"},{addr:2148178756,type:"code",name:"_frexpf"},{addr:2148178980,type:"code",name:"alEnvmixerParam"},{addr:2148179192,type:"code",name:"alEnvmixerPull"},{addr:214818e4,type:"code",name:"alEnvmixerParam"},{addr:2148180212,type:"code",name:"__env_o_01E0"},{addr:2148181196,type:"code",name:"__env_o_0718"},{addr:2148181836,type:"code",name:"__env_o_027C"},{addr:2148181968,type:"code",name:"alFilterNew"},{addr:2148182e3,type:"code",name:"alMainBusParam"},{addr:2148182048,type:"code",name:"alMainBusPull"},{addr:2148182320,type:"code",name:"alMainBusParam"},{addr:2148182368,type:"code",name:"alResampleParam"},{addr:2148182560,type:"code",name:"alResamplePull"},{addr:2148182860,type:"code",name:"alResampleParam"},{addr:2148183056,type:"code",name:"_doModFunc"},{addr:2148183196,type:"code",name:"alFxParamHdl"},{addr:2148183692,type:"code",name:"alFxParam"},{addr:2148183712,type:"code",name:"_filterBuffer"},{addr:2148183868,type:"code",name:"_loadOutputBuffer"},{addr:2148183940,type:"code",name:"alFxParam"},{addr:2148184404,type:"code",name:"_loadBuffer"},{addr:2148184456,type:"code",name:"__reverb_o_0178"},{addr:2148184772,type:"code",name:"_saveBuffer"},{addr:2148184992,type:"code",name:"__reverb_o_0154"},{addr:2148185140,type:"code",name:"alFxPull"},{addr:2148185360,type:"code",name:"__reverb_o_00C4"},{addr:2148185728,type:"code",name:"__reverb_o_024C"},{addr:2148185884,type:"code",name:"__reverb_o_05D0"},{addr:2148186032,type:"code",name:"alSaveParam"},{addr:2148186072,type:"code",name:"alSavePull"},{addr:2148186200,type:"code",name:"alSaveParam"},{addr:2148186240,type:"code",name:"__resetPerfChanState"},{addr:2148186368,type:"code",name:"__setInstChanState"},{addr:2148186452,type:"code",name:"__lookupVoice"},{addr:2148186536,type:"code",name:"__vsPan"},{addr:2148186604,type:"code",name:"__mapVoice"},{addr:2148186684,type:"code",name:"__lookupSoundQuick"},{addr:2148186896,type:"code",name:"__initFromBank"},{addr:2148187068,type:"code",name:"__seqpReleaseVoice"},{addr:2148187360,type:"code",name:"__voiceNeedsNoteKill"},{addr:2148187536,type:"code",name:"__postNextSeqEvent"},{addr:2148187744,type:"code",name:"__vsDelta"},{addr:2148187772,type:"code",name:"__vsVol"},{addr:2148187864,type:"code",name:"__seqplayer_o_0420"},{addr:2148187884,type:"code",name:"__unmapVoice"},{addr:2148187984,type:"code",name:"__seqpStopOsc"},{addr:2148188072,type:"code",name:"__seqplayer_o_01DC"},{addr:2148188224,type:"code",name:"__initChanState"},{addr:2148188404,type:"code",name:"alSeqpNew"},{addr:2148188584,type:"code",name:"__seqplayer_o_03EC"},{addr:2148190672,type:"code",name:"__seqplayer_o_0400"},{addr:2148190780,type:"code",name:"__seqplayer_o_0A54"},{addr:2148190860,type:"code",name:"__seqplayer_o_0244"},{addr:2148190960,type:"code",name:"__seqplayer_o_0D18"},{addr:2148191044,type:"code",name:"__seqplayer_o_0A1C"},{addr:2148191256,type:"code",name:"__seqplayer_o_0284"},{addr:2148191368,type:"code",name:"__seqplayer_o_0320"},{addr:2148191396,type:"code",name:"__seqplayer_o_0C7C"},{addr:2148191464,type:"code",name:"__seqplayer_o_04F8"},{addr:2148191756,type:"code",name:"__seqplayer_o_04E0"},{addr:2148191932,type:"code",name:"__seqplayer_o_0600"},{addr:2148192104,type:"code",name:"__seqplayer_o_107C"},{addr:2148192188,type:"code",name:"__seqplayer_o_167C"},{addr:2148192316,type:"code",name:"__seqplayer_o_00BC"},{addr:2148192496,type:"code",name:"__seqplayer_o_0238"},{addr:2148192736,type:"code",name:"__seqplayer_o_05D8"},{addr:2148192800,type:"code",name:"alSynSetPriority"},{addr:2148192816,type:"code",name:"sqrtf",desc:"SQRT.S F0"},{addr:2148195664,type:"code",name:"osGetCount"},{addr:2148195728,type:"code",name:"__osSpDeviceBusy"},{addr:2148195760,type:"code",name:"__osSpGetStatus"},{addr:2148195776,type:"code",name:"__osSpSetStatus"},{addr:2148195792,type:"code",name:"__osSpSetPc"},{addr:2148195840,type:"code",name:"__osSpRawStartDma"},{addr:2148195984,type:"code",name:"__osSpRawReadIo"},{addr:2148196064,type:"code",name:"__osSpRawWriteIo"},{addr:2148196144,type:"code",name:"__osContDataCrc"},{addr:2148196252,type:"code",name:"__osContDataCrc"},{addr:2148196268,type:"code",name:"__osContAddressCrc"},{addr:2148196848,type:"code",name:"__osPfsGetInitData"},{addr:2148197028,type:"code",name:"__osPfsRequestData"},{addr:2148197192,type:"code",name:"__osPfsPifRam"},{addr:2148197228,type:"code",name:"__pfsisplug_o_004C"},{addr:2148197256,type:"code",name:"osPfsIsPlug"},{addr:2148197392,type:"code",name:"__pfsisplug_o_0094"},{addr:2148197584,type:"code",name:"__osPfsGetOneChannelData"},{addr:2148197712,type:"code",name:"__osPfsRequestOneChannel"},{addr:2148197824,type:"code",name:"__pfsgetstatus_o_0030"},{addr:2148197860,type:"code",name:"__osPfsGetStatus"},{addr:2148197972,type:"code",name:"__pfsgetstatus_o_0084"},{addr:2148198112,type:"code",name:"__osPfsInodeCache"},{addr:2148198232,type:"code",name:"__contpfs_o_0598"},{addr:2148198368,type:"code",name:"__osPfsRWInode"},{addr:2148198980,type:"code",name:"__contpfs_o_0578"},{addr:2148199192,type:"code",name:"__osCheckId"},{addr:2148199376,type:"code",name:"__osGetId"},{addr:2148199836,type:"code",name:"__osCheckPackId"},{addr:2148200192,type:"code",name:"__osRepairPackId"},{addr:2148202608,type:"code",name:"_Litob"},{addr:2148203200,type:"code",name:"_Ldtob"},{addr:2148204300,type:"code",name:"__xldtob_o_0080"},{addr:2148204452,type:"code",name:"__xldtob_o_0414"},{addr:2148205904,type:"code",name:"__osSpDeviceBusy"},{addr:2148209696,type:"code",name:"__divdi3"},{addr:2148210064,type:"code",name:"__udivdi3"},{addr:2148210096,type:"code",name:"__umoddi3"},{addr:2148305012,type:"data",name:"overlay_table"},{addr:2148319248,type:"data",name:"item_function_pointers",desc:"u32[10]"},{addr:2148397008,type:"data",name:"perm_heap_addr",desc:"Address of permanent heap"},{addr:2148397024,type:"data",name:"temp_heap_addr",desc:"Address of temporary heap"},{addr:2148407504,type:"u16",name:"num_board_spaces"},{addr:2148407506,type:"u16",name:"num_chains"},{addr:2148407508,type:"u32",name:"hydrated_space_data"},{addr:2148407512,type:"u32",name:"hydrated_chains"},{addr:2148407616,type:"data",name:"arrow_angles",desc:"f32[8]"},{addr:2148407648,type:"u32",name:"num_arrow_angles"},{addr:2148504494,type:"u16",name:"total_turns"},{addr:2148504496,type:"u16",name:"current_turn"},{addr:2148509246,type:"u16",name:"scene",desc:"Current scene number"},{addr:2148520643,type:"u8",name:"p1_controller"},{addr:2148520644,type:"u8",name:"p1_char",desc:"00=Mario"},{addr:2148520648,type:"u16",name:"p1_coins",desc:"Player 1 coin count"},{addr:2148520654,type:"u16",name:"p1_stars",desc:"Player 1 star count"},{addr:2148520656,type:"u16",name:"p1_cur_chain_index",desc:"Player 1 current chain index"},{addr:2148520658,type:"u16",name:"p1_cur_space_index",desc:"Player 1 current space index"},{addr:2148520660,type:"u16",name:"p1_next_chain_index",desc:"Player 1 next chain index"},{addr:2148520662,type:"u16",name:"p1_next_space_index",desc:"Player 1 next space index"},{addr:2148520665,type:"u8",name:"p1_item",desc:"Player 1 item"},{addr:2148520666,type:"u16",name:"p1_turn_status",desc:"Player 1 turn status"},{addr:2148520696,type:"u8",name:"p2_char",desc:"00=Mario"},{addr:2148520700,type:"u16",name:"p2_coins",desc:"Player 2 coin count"},{addr:2148520706,type:"u16",name:"p2_stars",desc:"Player 2 star count"},{addr:2148520708,type:"u16",name:"p2_cur_chain_index",desc:"Player 2 current chain index"},{addr:2148520710,type:"u16",name:"p2_cur_space_index",desc:"Player 2 current space index"},{addr:2148520712,type:"u16",name:"p2_next_chain_index",desc:"Player 2 next chain index"},{addr:2148520714,type:"u16",name:"p2_next_space_index",desc:"Player 2 next space index"},{addr:2148520717,type:"u8",name:"p2_item",desc:"Player 2 item"},{addr:2148520718,type:"u16",name:"p2_turn_status",desc:"Player 2 turn status"},{addr:2148520748,type:"u8",name:"p3_char",desc:"00=Mario"},{addr:2148520752,type:"u16",name:"p3_coins",desc:"Player 3 coin count"},{addr:2148520758,type:"u16",name:"p3_stars",desc:"Player 3 star count"},{addr:2148520769,type:"u8",name:"p3_item",desc:"Player 3 item"},{addr:2148520770,type:"u16",name:"p3_turn_statu",desc:"Player 3 turn status"},{addr:2148520800,type:"u8",name:"p4_char",desc:"00=Mario"},{addr:2148520804,type:"u16",name:"p4_coins",desc:"Player 4 coin count"},{addr:2148520810,type:"u16",name:"p4_stars",desc:"Player 4 star count"},{addr:2148520821,type:"u8",name:"p4_item",desc:"Player 4 item"},{addr:2148520822,type:"u16",name:"p4_turn_status",desc:"Player 4 turn status"},{addr:2148520984,type:"u16",name:"hidden_space_primary",desc:"space index of primary hidden space"}],hG=[{addr:2148305220,type:"data",name:"overlay_table"},{addr:2148533744,type:"data",name:"overlay_ram_start"}],pG=[{addr:2147484416,type:"u32",name:"osTvType",desc:"0=PAL"},{addr:2147484420,type:"u32",name:"osRomType",desc:"0=cart"},{addr:2147484424,type:"data",name:"osRomBase",desc:"B0000000=cart"},{addr:2147484428,type:"data",name:"osResetType",desc:"0=cold reset"},{addr:2147484440,type:"data",name:"osMemSize",desc:"Size of RDRAM"},{addr:2147523600,type:"code",name:"ReadMainFS",desc:"Reads file from MainFS"},{addr:2147524204,type:"code",name:"FreeMainFS",desc:"Free's an allocated MainFS file pointer"},{addr:2147525168,type:"code",name:"DecodeNone"},{addr:2147525324,type:"code",name:"DecodeLZ"},{addr:2147528704,type:"code",name:"DecodeFile"},{addr:2147529068,type:"code",name:"GetRandomByte"},{addr:2147530808,type:"code",name:"LoadGraphics"},{addr:2147532780,type:"code",name:"InitEspriteSlot"},{addr:2147533188,type:"code",name:"CloseEsprite"},{addr:2147557920,type:"code",name:"InitCameras",desc:"A0=num_cameras"},{addr:2147614240,type:"code",name:"InitAnimations",desc:"A0=1"},{addr:2147702848,type:"code",name:"MakePermHeap"},{addr:2147702884,type:"code",name:"MallocPerm",desc:"A0=size"},{addr:2147702920,type:"code",name:"FreePerm",desc:"A0=ptr"},{addr:2147702948,type:"code",name:"ReallocPerm"},{addr:2147702992,type:"code",name:"GetAllocatedPermHeapSize"},{addr:2147703024,type:"code",name:"GetUsedMemoryBlockCountPerm"},{addr:2147703056,type:"code",name:"MakeTempHeap"},{addr:2147703092,type:"code",name:"MallocTemp"},{addr:2147703128,type:"code",name:"FreeTemp"},{addr:2147703156,type:"code",name:"ReallocTemp"},{addr:2147703200,type:"code",name:"GetAllocatedTempHeapSize"},{addr:2147703232,type:"code",name:"GetUsedMemoryBlockCountTemp"},{addr:2147705040,type:"code",name:"MakeHeap"},{addr:2147705072,type:"code",name:"Malloc"},{addr:2147705224,type:"code",name:"Free"},{addr:2147705416,type:"code",name:"Realloc"},{addr:2147705616,type:"code",name:"GetAllocatedHeapSize"},{addr:2147705668,type:"code",name:"GetUsedMemoryBlockCount"},{addr:2147705708,type:"code",name:"GetMemoryAllocSize"},{addr:2147774816,type:"code",name:"InitObjSys"},{addr:2147778208,type:"code",name:"InitProcess"},{addr:2147778568,type:"code",name:"EndProcess"},{addr:2147778856,type:"code",name:"LoadOverlay",desc:"A0=num"},{addr:2147788064,type:"code",name:"PlayMusic",desc:"A0=index"},{addr:2147789448,type:"code",name:"PlaySound",desc:"A0=index"},{addr:2147802492,type:"code",name:"DrawDebugText",desc:"A0=x_pos"},{addr:2147807248,type:"code",name:"SleepProcess"},{addr:2147807348,type:"code",name:"SleepVProcess",desc:"Sleep 1 frame"},{addr:2147808676,type:"code",name:"SaveFileEncode",desc:"A0=start addr of data to encode"},{addr:2147809868,type:"code",name:"SaveFileDecode",desc:"A0=start addr of portion to decode"},{addr:2147833456,type:"code",name:"FreeGraphics"},{addr:2147833872,type:"code",name:"ImgPackParse"},{addr:2147877132,type:"code",name:"DisablePromptOption",desc:"A0=window_id"},{addr:2147885032,type:"code",name:"InitFadeIn",desc:"A0=fade_type"},{addr:2147885136,type:"code",name:"InitFadeOut",desc:"A0=fade_type"},{addr:2147885244,type:"code",name:"GetFadeStatus",desc:"returns 0 when fade action is finished"},{addr:2147902720,type:"code",name:"setjmp"},{addr:2147902820,type:"code",name:"longjmp"},{addr:2147930096,type:"code",name:"alSeqpGetChlVol"},{addr:2147930128,type:"code",name:"alSeqpGetChlFXMix"},{addr:2147930160,type:"code",name:"alSeqpGetChlPan"},{addr:2147930192,type:"code",name:"alSeqpGetChlProgram"},{addr:2147930320,type:"code",name:"alSeqpGetState"},{addr:2147930336,type:"code",name:"alCSPGetTempo"},{addr:2147930384,type:"code",name:"alSeqpPlay"},{addr:2147930432,type:"code",name:"alSeqpSetBank"},{addr:2147930480,type:"code",name:"alSeqpSetSeq"},{addr:2147930528,type:"code",name:"alSeqpSetTempo"},{addr:2147930608,type:"code",name:"alSeqpSetVol"},{addr:2147930656,type:"code",name:"alSeqpStop"},{addr:2147933812,type:"code",name:"alEvtqPostEvent"},{addr:2147950624,type:"code",name:"osEepromWrite"},{addr:2147951228,type:"code",name:"__osEepStatus"},{addr:2147951776,type:"code",name:"osEepromLongWrite"},{addr:2147952016,type:"code",name:"osEepromLongRead"},{addr:2147952128,type:"code",name:"osSetIntMask"},{addr:2147952288,type:"code",name:"osCreatePiManager"},{addr:2147952748,type:"code",name:"__Dom2SpeedParam"},{addr:2147952756,type:"code",name:"__osPiTable"},{addr:2147952760,type:"code",name:"__osPiDevMgr"},{addr:2147952864,type:"code",name:"__Dom1SpeedParam"},{addr:2147952976,type:"code",name:"__osEPiRawStartDma"},{addr:2147952980,type:"code",name:"__osCurrentHandle"},{addr:2147952988,type:"code",name:"__osPiTable"},{addr:2147952992,type:"code",name:"__osPiDevMgr"},{addr:2147953472,type:"code",name:"osEPiStartDma"},{addr:2147953632,type:"code",name:"__CartRomHandle"},{addr:2147953748,type:"code",name:"osCartRomInit"},{addr:2147954016,type:"code",name:"__osDevMgrMain"},{addr:2147954976,type:"code",name:"__osPiRelAccess"},{addr:2147955016,type:"code",name:"__osPiGetAccess"},{addr:2147955060,type:"code",name:"__osPiGetAccess"},{addr:2147955124,type:"code",name:"__osPiAccessQueue"},{addr:2147955148,type:"code",name:"__osPiCreateAccessQueue"},{addr:2147955168,type:"code",name:"__osPiRelAccess"},{addr:2147955216,type:"code",name:"osAiGetLength"},{addr:2147955232,type:"code",name:"__osPiAccessQueueEnabled"},{addr:2147955680,type:"code",name:"_init_lpfilter"},{addr:2147955844,type:"code",name:"alFxNew"},{addr:2147957020,type:"code",name:"alEnvmixerNew"},{addr:2147957204,type:"code",name:"alLoadNew"},{addr:2147957380,type:"code",name:"alResampleNew"},{addr:2147957520,type:"code",name:"alAuxBusNew"},{addr:2147957612,type:"code",name:"alMainBusNew"},{addr:2147957704,type:"code",name:"alSaveNew"},{addr:2147957776,type:"code",name:"alLoadParam"},{addr:2147958204,type:"code",name:"alRaw16Pull"},{addr:2147959128,type:"code",name:"alAdpcmPull"},{addr:2147959792,type:"code",name:"alLoadParam"},{addr:2147960220,type:"code",name:"__load_o_0108"},{addr:2147960608,type:"code",name:"alAuxBusParam"},{addr:2147960656,type:"code",name:"alAuxBusPull"},{addr:2147960828,type:"code",name:"alAuxBusParam"},{addr:2147960880,type:"code",name:"alBnkfNew"},{addr:2147961028,type:"code",name:"alSeqFileNew"},{addr:2147961092,type:"code",name:"__bnkf_o_0098"},{addr:2147961264,type:"code",name:"__bnkf_o_0118"},{addr:2147961412,type:"code",name:"__bnkf_o_01D8"},{addr:2147961500,type:"code",name:"__bnkf_o_0258"},{addr:2147961600,type:"code",name:"_ldexpf"},{addr:2147961636,type:"code",name:"_frexpf"},{addr:2147961860,type:"code",name:"alEnvmixerParam"},{addr:2147962072,type:"code",name:"alEnvmixerPull"},{addr:2147962880,type:"code",name:"alEnvmixerParam"},{addr:2147963092,type:"code",name:"__env_o_01E0"},{addr:2147964076,type:"code",name:"__env_o_0718"},{addr:2147964716,type:"code",name:"__env_o_027C"},{addr:2147964848,type:"code",name:"alEvtqFlushType"},{addr:2147965024,type:"code",name:"alEvtqFlush"},{addr:2147965144,type:"code",name:"alEvtqPostEvent"},{addr:2147965412,type:"code",name:"alEvtqNextEvent"},{addr:2147965564,type:"code",name:"alEvtqNew"},{addr:2147965696,type:"code",name:"alFilterNew"},{addr:2147965728,type:"code",name:"alMainBusParam"},{addr:2147965776,type:"code",name:"alMainBusPull"},{addr:2147966048,type:"code",name:"alMainBusParam"},{addr:2147966096,type:"code",name:"alResampleParam"},{addr:2147966288,type:"code",name:"alResamplePull"},{addr:2147966588,type:"code",name:"alResampleParam"},{addr:2147971580,type:"code",name:"alLink"},{addr:2147971612,type:"code",name:"alUnlink"},{addr:2147971664,type:"code",name:"alHeapInit"},{addr:2147971728,type:"code",name:"alHeapDBAlloc"},{addr:2147971808,type:"code",name:"alCopy"},{addr:2147971872,type:"code",name:"alCSeqGetLoc"},{addr:2147971988,type:"code",name:"alCSeqSetLoc"},{addr:2147972104,type:"code",name:"alCSeqNewMarker"},{addr:2147972384,type:"code",name:"__alCSeqNextDelta"},{addr:2147972512,type:"code",name:"__cseq_o_0194"},{addr:2147972768,type:"code",name:"alCSeqGetTicks"},{addr:2147972776,type:"code",name:"alCSeqSecToTicks"},{addr:2147972936,type:"code",name:"alCSeqTicksToSec"},{addr:2147973060,type:"code",name:"__alCSeqNextDelta"},{addr:2147973188,type:"code",name:"alCSeqNextEvent"},{addr:2147973432,type:"code",name:"alCSeqNew"},{addr:2147974324,type:"code",name:"__cseq_o_02A4"},{addr:2147974508,type:"code",name:"__cseq_o_0088"},{addr:2147974916,type:"code",name:"alAudioFrame"},{addr:2147975348,type:"code",name:"alSynNew"},{addr:2147975840,type:"code",name:"__synthesizer_o_0440"},{addr:2147975988,type:"code",name:"__synthesizer_o_0370"},{addr:2147976136,type:"code",name:"__synthesizer_o_032C"},{addr:2147976224,type:"code",name:"alSynDelete"},{addr:2147976240,type:"code",name:"alSynAddPlayer"},{addr:2147976320,type:"code",name:"alSynFreeVoice"},{addr:2147976664,type:"code",name:"alSynAllocVoice"},{addr:2147976776,type:"code",name:"__synallocvoice_o_0048"},{addr:2147976960,type:"code",name:"alSynStopVoice"},{addr:2147977088,type:"code",name:"alSynStartVoice"},{addr:2147977248,type:"code",name:"alSynSetPitch"},{addr:2147977392,type:"code",name:"alSynSetVol"},{addr:2147977584,type:"code",name:"alSynSetFXMix"},{addr:2147977744,type:"code",name:"alSynSetPan"},{addr:2147977888,type:"code",name:"alSynAllocFX"},{addr:2147978048,type:"code",name:"alCents2Ratio"},{addr:2147978144,type:"code",name:"osInvalDCache"},{addr:2147978320,type:"code",name:"osInvalICache"},{addr:2147978448,type:"code",name:"osWritebackDCache"},{addr:2147978624,type:"code",name:"osContGetReadData"},{addr:2147978780,type:"code",name:"osContStartReadData"},{addr:2147978916,type:"code",name:"__contreaddata_o_0028"},{addr:2147979984,type:"code",name:"osVirtualToPhysical"},{addr:2147980080,type:"code",name:"cosf"},{addr:2147980416,type:"code",name:"guLookAt"},{addr:2147981316,type:"code",name:"guLookAtF"},{addr:2147982224,type:"code",name:"guLookAtHilite"},{addr:2147982436,type:"code",name:"guLookAtHiliteF"},{addr:2147984880,type:"code",name:"guLookAtReflect"},{addr:2147984988,type:"code",name:"guLookAtReflectF"},{addr:2147986400,type:"code",name:"guOrtho"},{addr:2147986732,type:"code",name:"guOrthoF"},{addr:2147987040,type:"code",name:"guPerspective"},{addr:2147987496,type:"code",name:"guPerspectiveF"},{addr:2147987936,type:"code",name:"guRandom"},{addr:2147987984,type:"code",name:"guRotateRPY"},{addr:2147988380,type:"code",name:"guRotateRPYF"},{addr:2147988784,type:"code",name:"sinf"},{addr:2147989200,type:"code",name:"__osRdbSend"},{addr:2147989736,type:"code",name:"__osRdb_IP6_Empty"},{addr:2147989744,type:"code",name:"__osRdb_IP6_CurSend"},{addr:2147989748,type:"code",name:"__osRdb_IP6_CurWrite"},{addr:2147989752,type:"code",name:"__osRdb_IP6_Ct"},{addr:2147989756,type:"code",name:"__osRdb_IP6_Size"},{addr:2147989760,type:"code",name:"__osRdb_IP6_Data"},{addr:2147989764,type:"code",name:"osInitRdb"},{addr:2147989872,type:"code",name:"bcopy"},{addr:2147990672,type:"code",name:"bzero"},{addr:2147990832,type:"code",name:"memcpy"},{addr:2147990896,type:"code",name:"strlen"},{addr:2147990976,type:"code",name:"sprintf"},{addr:2147991120,type:"code",name:"rmonPrintf",desc:"disabled behind flag"},{addr:2147991168,type:"code",name:"osSyncPrintf",desc:"disabled behind flag"},{addr:2147991296,type:"code",name:"osCreateMesgQueue"},{addr:2147991344,type:"code",name:"osJamMesg"},{addr:2147991664,type:"code",name:"osRecvMesg"},{addr:2147991968,type:"code",name:"osSendMesg"},{addr:2147992272,type:"code",name:"__osEventStateTab"},{addr:2147992392,type:"code",name:"osSetEventMesg"},{addr:2147992456,type:"code",name:"osSetEventMesg"},{addr:2147992512,type:"code",name:"osSpTaskStartGo"},{addr:2147992556,type:"code",name:"osSpTaskLoad"},{addr:2147993088,type:"code",name:"osSpTaskYield"},{addr:2147993120,type:"code",name:"osSpTaskYielded"},{addr:2147993200,type:"code",name:"__osSiRawStartDma"},{addr:2147993460,type:"code",name:"__osSiGetAccess"},{addr:2147993568,type:"code",name:"__osSiRelAccess"},{addr:2147993616,type:"code",name:"osCreateThread"},{addr:2147994096,type:"code",name:"osGetThreadPri"},{addr:2147994128,type:"code",name:"osSetThreadPri"},{addr:2147994336,type:"code",name:"osStartThread"},{addr:2147994624,type:"code",name:"__osDequeueThread"},{addr:2147994676,type:"code",name:"__osFaultedThread"},{addr:2147994680,type:"code",name:"__osRunningThread"},{addr:2147994684,type:"code",name:"__osActiveQueue"},{addr:2147994688,type:"code",name:"osYieldThread"},{addr:2147994692,type:"code",name:"__osThreadTail"},{addr:2147994768,type:"code",name:"osGetTime"},{addr:2147994912,type:"code",name:"osSetTimer"},{addr:2147995784,type:"code",name:"__osSetTimerIntr"},{addr:2147995912,type:"code",name:"__osInsertTimer"},{addr:2147996176,type:"code",name:"__osProbeTLB"},{addr:2147996368,type:"code",name:"osViGetCurrentFramebuffer"},{addr:2147997328,type:"code",name:"osViSetEvent"},{addr:2147997424,type:"code",name:"osViSetMode"},{addr:2147997504,type:"code",name:"osViSetSpecialFeatures"},{addr:2147997872,type:"code",name:"osViSetYScale"},{addr:2147997952,type:"code",name:"osViSwapBuffer"},{addr:2147998032,type:"code",name:"__osViSwapContext"},{addr:2147998816,type:"code",name:"osViBlack"},{addr:2147998912,type:"code",name:"guMtxIdentF"},{addr:2147999008,type:"code",name:"guMtxF2L"},{addr:2147999136,type:"code",name:"guMtxL2F"},{addr:2147999264,type:"code",name:"guMtxCatF"},{addr:2147999808,type:"code",name:"guMtxCatL"},{addr:2147999936,type:"code",name:"guRotate"},{addr:2148000312,type:"code",name:"guRotateF"},{addr:2148000672,type:"code",name:"osMotorInit"},{addr:2148001256,type:"code",name:"__osMotorAccess"},{addr:2148001584,type:"code",name:"__osPfsSelectBank"},{addr:2148001696,type:"code",name:"__osContRamRead"},{addr:2148002184,type:"code",name:"__osPfsLastChannel"},{addr:2148002192,type:"code",name:"__osContRamWrite"},{addr:2148002816,type:"code",name:"osAfterPreNMI"},{addr:2148002848,type:"code",name:"osGetMemSize"},{addr:2148004048,type:"code",name:"__checkHardware_kmc"},{addr:2148004108,type:"code",name:"__osInitialize_kmc"},{addr:2148005024,type:"code",name:"__checkHardware_msp"},{addr:2148005072,type:"code",name:"__osInitialize_msp"},{addr:2148005984,type:"code",name:"__osInitialize_emu"},{addr:2148006112,type:"code",name:"__osEepromRead16K"},{addr:2148006116,type:"code",name:"__osEepPifRam"},{addr:2148006180,type:"code",name:"osEepromRead"},{addr:2148006536,type:"code",name:"__conteepread_o_00B8"},{addr:2148009500,type:"code",name:"__osEnqueueAndYield"},{addr:2148009844,type:"code",name:"__osPopThread"},{addr:2148010304,type:"code",name:"__osDisableInt"},{addr:2148010416,type:"code",name:"__osRestoreInt"},{addr:2148010448,type:"code",name:"__osSetGlobalIntMask"},{addr:2148010512,type:"code",name:"__osResetGlobalIntMask"},{addr:2148010592,type:"code",name:"__osPiRawStartDma"},{addr:2148010800,type:"code",name:"osPiGetCmdQueue"},{addr:2148010832,type:"code",name:"__osEPiRawReadIo"},{addr:2148011184,type:"code",name:"alHeapCheck"},{addr:2148011200,type:"code",name:"__osEPiRawWriteIo"},{addr:2148011568,type:"code",name:"osPiWriteIo"},{addr:2148011648,type:"code",name:"osPiReadIo"},{addr:2148011728,type:"code",name:"__osAiDeviceBusy"},{addr:2148011760,type:"code",name:"__osThreadSave"},{addr:2148012464,type:"code",name:"__osThprofStack"},{addr:2148012468,type:"code",name:"__osThprofHeap"},{addr:2148012608,type:"code",name:"sqrtf"},{addr:2148012624,type:"code",name:"__osRdb_Read_Data_Ct"},{addr:2148012628,type:"code",name:"__osRdb_Read_Data_Buf"},{addr:2148012632,type:"code",name:"osReadHost"},{addr:2148014272,type:"code",name:"MonitorInitBreak"},{addr:2148014304,type:"code",name:"__isExp"},{addr:2148014628,type:"code",name:"__isExpJP"},{addr:2148015540,type:"code",name:"__osThprofCount"},{addr:2148015544,type:"code",name:"__osThprofLastTimer"},{addr:2148015548,type:"code",name:"osThreadProfileCallback"},{addr:2148015680,type:"code",name:"__osThprofFunc"},{addr:2148015684,type:"code",name:"__osThprofFlag"},{addr:2148017296,type:"code",name:"__osGetCause"},{addr:2148017312,type:"code",name:"osGetCount"},{addr:2148017376,type:"code",name:"__rmonSendFault"},{addr:2148017380,type:"code",name:"rmonRdbReadBuf"},{addr:2148017808,type:"code",name:"__osSpDeviceBusy"},{addr:2148017840,type:"code",name:"__osSpGetStatus"},{addr:2148017856,type:"code",name:"__osSpSetStatus"},{addr:2148017872,type:"code",name:"__osSpSetPc"},{addr:2148017920,type:"code",name:"__osSpRawStartDma"},{addr:2148018064,type:"code",name:"__osSpRawReadIo"},{addr:2148018144,type:"code",name:"__osSpRawWriteIo"},{addr:2148018224,type:"code",name:"__osContDataCrc"},{addr:2148018332,type:"code",name:"__osContDataCrc"},{addr:2148018348,type:"code",name:"__osContAddressCrc"},{addr:2148019040,type:"code",name:"__osPfsGetInitData"},{addr:2148019220,type:"code",name:"__osPfsRequestData"},{addr:2148019384,type:"code",name:"__osPfsPifRam"},{addr:2148019420,type:"code",name:"__pfsisplug_o_004C"},{addr:2148019428,type:"code",name:"__rmonIOhandler"},{addr:2148019448,type:"code",name:"osPfsIsPlug"},{addr:2148019584,type:"code",name:"__pfsisplug_o_0094"},{addr:2148019604,type:"code",name:"__rmonIOputw"},{addr:2148019696,type:"code",name:"__rmonIOflush"},{addr:2148019756,type:"code",name:"__rmonSendFault"},{addr:2148019776,type:"code",name:"__osPfsGetOneChannelData"},{addr:2148019904,type:"code",name:"__osPfsRequestOneChannel"},{addr:2148020016,type:"code",name:"__pfsgetstatus_o_0030"},{addr:2148020052,type:"code",name:"__osPfsGetStatus"},{addr:2148020164,type:"code",name:"__pfsgetstatus_o_0084"},{addr:2148020304,type:"code",name:"__osPfsInodeCache"},{addr:2148020424,type:"code",name:"__contpfs_o_0598"},{addr:2148020560,type:"code",name:"__osPfsRWInode"},{addr:2148021172,type:"code",name:"__contpfs_o_0578"},{addr:2148021384,type:"code",name:"__osCheckId"},{addr:2148021568,type:"code",name:"__osGetId"},{addr:2148022028,type:"code",name:"__osCheckPackId"},{addr:2148022384,type:"code",name:"__osRepairPackId"},{addr:2148023008,type:"code",name:"__osPiRawReadIo"},{addr:2148023088,type:"code",name:"__osPiRawWriteIo"},{addr:2148023132,type:"code",name:"__osIdCheckSum"},{addr:2148023168,type:"code",name:"osEPiWriteIo"},{addr:2148023200,type:"code",name:"__osSumcalc"},{addr:2148023252,type:"code",name:"__osPfsInodeCacheBank"},{addr:2148023253,type:"code",name:"__osPfsInodeCacheChannel"},{addr:2148023632,type:"code",name:"_Litob"},{addr:2148024224,type:"code",name:"_Ldtob"},{addr:2148025324,type:"code",name:"__xldtob_o_0080"},{addr:2148025476,type:"code",name:"__xldtob_o_0414"},{addr:2148026928,type:"code",name:"__rmonExecute"},{addr:2148027072,type:"code",name:"__rmonWriteWordTo"},{addr:2148027136,type:"code",name:"__rmonReadWordAt"},{addr:2148027248,type:"code",name:"__rmonCopyWords"},{addr:2148027464,type:"code",name:"__rmonGetRegionCount"},{addr:2148027548,type:"code",name:"__rmonGetExeName"},{addr:2148027736,type:"code",name:"__rmonLoadProgram"},{addr:2148027744,type:"code",name:"__rmonListProcesses"},{addr:2148027832,type:"code",name:"__rmonWriteMem"},{addr:2148028380,type:"code",name:"__rmonUtilityBuffer"},{addr:2148028636,type:"code",name:"__rmonReadMem"},{addr:2148028976,type:"code",name:"__rmonSetComm"},{addr:2148029004,type:"code",name:"__rmonCopyWords"},{addr:2148029032,type:"code",name:"__rmonPanic"},{addr:2148029040,type:"code",name:"__rmonMQ"},{addr:2148029052,type:"code",name:"__rmonMemcpy"},{addr:2148029064,type:"code",name:"__rmonInit"},{addr:2148029100,type:"code",name:"__rmonReadWordAt"},{addr:2148029164,type:"code",name:"__rmonWriteWordTo"},{addr:2148029272,type:"code",name:"__rmonSetFault"},{addr:2148029312,type:"code",name:"__rmonGetRegisterContents"},{addr:2148029432,type:"code",name:"__rmonSetVRegs"},{addr:2148029868,type:"code",name:"__rmonGetVRegs"},{addr:2148030048,type:"code",name:"__rmonregs_o_0AA4"},{addr:2148030340,type:"code",name:"__rmonSetSRegs"},{addr:2148030704,type:"code",name:"__rmonGetSRegs"},{addr:2148031112,type:"code",name:"__rmonSetFRegisters"},{addr:2148031252,type:"code",name:"__rmonGetFRegisters"},{addr:2148031392,type:"code",name:"__rmonSetGRegisters"},{addr:2148031632,type:"code",name:"__rmonGetGRegisters"},{addr:2148031940,type:"code",name:"__rmonGetRegisterContents"},{addr:2148032064,type:"code",name:"__rmonMaskIdleThreadInts"},{addr:2148032168,type:"code",name:"__rmonGetTCB"},{addr:2148032268,type:"code",name:"__rmonStopUserThreads"},{addr:2148032752,type:"code",name:"__rmonGetThreadStatus"},{addr:2148034320,type:"code",name:"__rmonSendHeader"},{addr:2148034424,type:"code",name:"__rmonSendReply"},{addr:2148034608,type:"code",name:"__rmonSendData"},{addr:2148035248,type:"code",name:"__osSpRawReadIo"},{addr:2148035328,type:"code",name:"__osSpRawWriteIo"},{addr:2148035408,type:"code",name:"__osSpDeviceBusy"},{addr:2148035440,type:"code",name:"osStopThread"},{addr:2148035632,type:"code",name:"__osGetActiveQueue"},{addr:2148036096,type:"code",name:"__rmonRCPrunning"},{addr:2148036200,type:"code",name:"__rmonStepRCP"},{addr:2148036256,type:"code",name:"__rmonHitCpuFault"},{addr:2148036300,type:"code",name:"__rmonRcpAtBreak"},{addr:2148036301,type:"code",name:"__rmonHitSpBreak"},{addr:2148036441,type:"code",name:"__rmonHitBreak"},{addr:2148036661,type:"code",name:"__rmonGetExceptionStatus"},{addr:2148036721,type:"code",name:"__rmonSetSingleStep"},{addr:2148037149,type:"code",name:"__rmonGetBranchTarget"},{addr:2148037533,type:"code",name:"__rmonClearBreak"},{addr:2148037817,type:"code",name:"__rmonListBreak"},{addr:2148037825,type:"code",name:"__rmonSetBreak"},{addr:2148040448,type:"code",name:"__divdi3"},{addr:2148040816,type:"code",name:"__udivdi3"},{addr:2148040848,type:"code",name:"__umoddi3"},{addr:2148047536,type:"code",name:"midpoint",desc:"A0=output_xyz"},{addr:2148098804,type:"data",name:"overlay_table"},{addr:2148103760,type:"u32",name:"rng_seed"},{addr:2148146544,type:"data",name:"generic_save_data_decode_table",desc:"44 bytes"},{addr:2148317348,type:"u32",name:"debug_font_color",desc:"Used with DrawDebugText"},{addr:2148320244,type:"u8",name:"p1_buttonpress",desc:"0x80 (A)"},{addr:2148320245,type:"u8",name:"p1_buttonpress2",desc:"0x1 (Right C)"},{addr:2148320246,type:"u8",name:"p1_analog_x_axis"},{addr:2148320247,type:"u8",name:"p1_analog_y_axis"},{addr:2148320252,type:"u8",name:"p2_buttonpress",desc:"0x80 (A)"},{addr:2148320253,type:"u8",name:"p2_buttonpress2",desc:"0x1 (Right C)"},{addr:2148320254,type:"u8",name:"p2_analog_x_axis"},{addr:2148320255,type:"u8",name:"p2_analog_y_axis"},{addr:2148320260,type:"u8",name:"p3_buttonpress",desc:"0x80 (A)"},{addr:2148320261,type:"u8",name:"p3_buttonpress2",desc:"0x1 (Right C)"},{addr:2148320262,type:"u8",name:"p3_analog_x_axis"},{addr:2148320263,type:"u8",name:"p3_analog_y_axis"},{addr:2148320268,type:"u8",name:"p4_buttonpress",desc:"0x80 (A)"},{addr:2148320269,type:"u8",name:"p4_buttonpress2",desc:"0x1 (Right C)"},{addr:2148320270,type:"u8",name:"p4_analog_x_axis"},{addr:2148320271,type:"u8",name:"p4_analog_y_axis"},{addr:2148320485,type:"u8",name:"hidden_block_item_space_index"},{addr:2148323196,type:"u8",name:"p1_buttonpress3",desc:"see above"},{addr:2148323197,type:"u8",name:"p1_buttonpress4"},{addr:2148323198,type:"u8",name:"p2_buttonpress3"},{addr:2148323199,type:"u8",name:"p2_buttonpress4"},{addr:2148323200,type:"u8",name:"p3_buttonpress3"},{addr:2148323201,type:"u8",name:"p3_buttonpress4"},{addr:2148323202,type:"u8",name:"p4_buttonpress3"},{addr:2148323203,type:"u8",name:"p4_buttonpress4"},{addr:2148323418,type:"u8",name:"total_turns"},{addr:2148323419,type:"u8",name:"current_turn"},{addr:2148323420,type:"u8",name:"current_game_length",desc:"00=Lite Play"},{addr:2148323421,type:"u8",name:"current_star_spawn",desc:"00 for first star spawn"},{addr:2148323422,type:"u8",name:"star_spawn_indices",desc:"array length 8 of the current star order"},{addr:2148323431,type:"u8",name:"current_player_index",desc:"Player who's turn is active"},{addr:2148323433,type:"u8",name:"current_space_index"},{addr:2148323488,type:"u8",name:"board_ram9",desc:"free for board use"},{addr:2148323489,type:"u8",name:"board_ram10",desc:"free for board use"},{addr:2148323490,type:"u8",name:"board_ram11",desc:"free for board use"},{addr:2148323491,type:"u8",name:"board_ram12",desc:"free for board use"},{addr:2148323492,type:"u8",name:"board_ram13",desc:"free for board use"},{addr:2148323493,type:"u8",name:"board_ram14",desc:"free for board use"},{addr:2148323494,type:"u8",name:"board_ram15",desc:"free for board use"},{addr:2148323495,type:"u8",name:"board_ram16",desc:"free for board use"},{addr:2148323496,type:"u8",name:"board_ram17",desc:"free for board use"},{addr:2148323497,type:"u8",name:"cur_player_used_item",desc:"0=Player can use item"},{addr:2148323503,type:"u8",name:"slow_dice_flags",desc:"bit0 is P1"},{addr:2148323508,type:"u16",name:"bank_coin_total",desc:"Number of coins in bank"},{addr:2148326354,type:"u8",name:"p1_forced_dice_roll",desc:" forces p1's normal roll"},{addr:2148326355,type:"u8",name:"p1_forced_dice_roll2",desc:" forces p1's second roll when using a mushroom"},{addr:2148326356,type:"u8",name:"p1_forced_dice_roll3",desc:" forces p1's third roll when using a golden mushroom"},{addr:2148326357,type:"u8",name:"p1_spaces_remaining",desc:" controls the number above the player's head"},{addr:2148326430,type:"u8",name:"p2_forced_dice_roll",desc:" forces p2's normal roll"},{addr:2148326431,type:"u8",name:"p2_forced_dice_roll2",desc:" forces p2's second roll when using a mushroom"},{addr:2148326432,type:"u8",name:"p2_forced_dice_roll3",desc:" forces p2's third roll when using a golden mushroom"},{addr:2148326433,type:"u8",name:"p2_spaces_remaining",desc:" controls the number above the player's head"},{addr:2148326506,type:"u8",name:"p3_forced_dice_roll",desc:" forces p3's normal roll"},{addr:2148326507,type:"u8",name:"p3_forced_dice_roll2",desc:" forces p3's second roll when using a mushroom"},{addr:2148326508,type:"u8",name:"p3_forced_dice_roll3",desc:" forces p3's third roll when using a golden mushroom"},{addr:2148326509,type:"u8",name:"p3_spaces_remaining",desc:" controls the number above the player's head"},{addr:2148326582,type:"u8",name:"p4_forced_dice_roll",desc:" forces p4's normal roll"},{addr:2148326583,type:"u8",name:"p4_forced_dice_roll2",desc:" forces p4's second roll when using a mushroom"},{addr:2148326584,type:"u8",name:"p4_forced_dice_roll3",desc:" forces p4's third roll when using a golden mushroom"},{addr:2148326585,type:"u8",name:"p4_spaces_remaining",desc:" controls the number above the player's head"},{addr:2148327877,type:"u8",name:"hidden_block_coins_space_index"},{addr:2148327938,type:"u16",name:"current_scene"},{addr:2148339976,type:"data",name:"player_structs"},{addr:2148339977,type:"u8",name:"p1_cpu_difficulty"},{addr:2148339978,type:"u8",name:"p1_controller"},{addr:2148339979,type:"u8",name:"p1_char",desc:"Mario=0"},{addr:2148339986,type:"u16",name:"p1_coins",desc:"Player 1 coin count"},{addr:2148339990,type:"u8",name:"p1_stars",desc:"Player 1 star count"},{addr:2148339991,type:"u8",name:"p1_cur_chain_index",desc:"Player 1 current chain index"},{addr:2148339992,type:"u8",name:"p1_cur_space_index",desc:"Player 1 current space index"},{addr:2148339993,type:"u8",name:"p1_next_chain_index",desc:"Player 1 next chain index"},{addr:2148339994,type:"u8",name:"p1_next_space_index",desc:"Player 1 next space index"},{addr:2148339997,type:"u8",name:"p1_prev_chain_index",desc:"Player 1 previous chain index"},{addr:2148339998,type:"u8",name:"p1_prev_space_index",desc:"Player 1 previous space index"},{addr:2148339999,type:"u8",name:"p1_status_flags",desc:"0x80 (reset effect you land)"},{addr:214834e4,type:"u8",name:"p1_item1",desc:"Player 1 first item"},{addr:2148340001,type:"u8",name:"p1_item2",desc:"Player 1 second item"},{addr:2148340002,type:"u8",name:"p1_item3",desc:"Player 1 third item"},{addr:2148340003,type:"u8",name:"p1_bowser_suit_flag",desc:"1 = suit is on"},{addr:2148340004,type:"u8",name:"p1_turn_color_status",desc:"00=blank"},{addr:2148340016,type:"u16",name:"p1_minigame_star"},{addr:2148340018,type:"u16",name:"p1_coin_star"},{addr:2148340020,type:"s8",name:"p1_happening_space_count"},{addr:2148340021,type:"u8",name:"p1_red_space_count"},{addr:2148340022,type:"u8",name:"p1_blue_space_count"},{addr:2148340023,type:"u8",name:"p1_chance_space_count"},{addr:2148340024,type:"u8",name:"p1_bowser_space_count"},{addr:2148340025,type:"u8",name:"p1_battle_space_count"},{addr:2148340026,type:"u8",name:"p1_item_space_count"},{addr:2148340027,type:"u8",name:"p1_bank_space_count"},{addr:2148340028,type:"u8",name:"p1_game_guy_space_count"},{addr:2148340033,type:"u8",name:"p2_cpu_difficulty"},{addr:2148340034,type:"u8",name:"p2_controller"},{addr:2148340035,type:"u8",name:"p2_char"},{addr:2148340042,type:"u16",name:"p2_coins",desc:"Player 2 coin count"},{addr:2148340046,type:"u8",name:"p2_stars",desc:"Player 2 star count"},{addr:2148340047,type:"u8",name:"p2_cur_chain_index",desc:"Player 2 current chain index"},{addr:2148340048,type:"u8",name:"p2_cur_space_index",desc:"Player 2 current space index"},{addr:2148340049,type:"u8",name:"p2_next_chain_index",desc:"Player 2 next chain index"},{addr:2148340050,type:"u8",name:"p2_next_space_index",desc:"Player 2 next space index"},{addr:2148340053,type:"u8",name:"p2_prev_chain_index",desc:"Player 2 previous chain index"},{addr:2148340054,type:"u8",name:"p2_prev_space_index",desc:"Player 2 previous space index"},{addr:2148340055,type:"u8",name:"p2_status_flags",desc:"see p1 notes"},{addr:2148340056,type:"u8",name:"p2_item1",desc:"Player 2 first item"},{addr:2148340057,type:"u8",name:"p2_item2",desc:"Player 2 second item"},{addr:2148340058,type:"u8",name:"p2_item3",desc:"Player 2 third item"},{addr:2148340059,type:"u8",name:"p2_bowser_suit_flag",desc:"1 = suit is on"},{addr:2148340060,type:"u8",name:"p2_turn_color_status",desc:"00=blank"},{addr:2148340072,type:"u16",name:"p2_minigame_star"},{addr:2148340074,type:"u16",name:"p2_coin_star"},{addr:2148340076,type:"s8",name:"p2_happening_space_count"},{addr:2148340077,type:"u8",name:"p2_red_space_count"},{addr:2148340078,type:"u8",name:"p2_blue_space_count"},{addr:2148340079,type:"u8",name:"p2_chance_space_count"},{addr:2148340080,type:"u8",name:"p2_bowser_space_count"},{addr:2148340081,type:"u8",name:"p2_battle_space_count"},{addr:2148340082,type:"u8",name:"p2_item_space_count"},{addr:2148340083,type:"u8",name:"p2_bank_space_count"},{addr:2148340084,type:"u8",name:"p2_game_guy_space_count"},{addr:2148340089,type:"u8",name:"p3_cpu_difficulty"},{addr:2148340090,type:"u8",name:"p3_controller"},{addr:2148340091,type:"u8",name:"p3_char"},{addr:2148340098,type:"u16",name:"p3_coins",desc:"Player 3 coin count"},{addr:2148340102,type:"u8",name:"p3_stars",desc:"Player 3 star count"},{addr:2148340103,type:"u8",name:"p3_cur_chain_index",desc:"Player 3 current chain index"},{addr:2148340104,type:"u8",name:"p3_cur_space_index",desc:"Player 3 current space index"},{addr:2148340105,type:"u8",name:"p3_next_chain_index",desc:"Player 3 next chain index"},{addr:2148340106,type:"u8",name:"p3_next_space_index",desc:"Player 3 next space index"},{addr:2148340109,type:"u8",name:"p3_prev_chain_index",desc:"Player 3 previous chain index"},{addr:2148340110,type:"u8",name:"p3_prev_space_index",desc:"Player 3 previous space index"},{addr:2148340111,type:"u8",name:"p3_status_flags",desc:"see p1 notes"},{addr:2148340112,type:"u8",name:"p3_item1",desc:"Player 3 first item"},{addr:2148340113,type:"u8",name:"p3_item2",desc:"Player 3 second item"},{addr:2148340114,type:"u8",name:"p3_item3",desc:"Player 3 third item"},{addr:2148340115,type:"u8",name:"p3_bowser_suit_flag",desc:"1 = suit is on"},{addr:2148340116,type:"u8",name:"p3_turn_color_status",desc:"00=blank"},{addr:2148340128,type:"u16",name:"p3_minigame_star"},{addr:2148340130,type:"u16",name:"p3_coin_star"},{addr:2148340132,type:"s8",name:"p3_happening_space_count"},{addr:2148340133,type:"u8",name:"p3_red_space_count"},{addr:2148340134,type:"u8",name:"p3_blue_space_count"},{addr:2148340135,type:"u8",name:"p3_chance_space_count"},{addr:2148340136,type:"u8",name:"p3_bowser_space_count"},{addr:2148340137,type:"u8",name:"p3_battle_space_count"},{addr:2148340138,type:"u8",name:"p3_item_space_count"},{addr:2148340139,type:"u8",name:"p3_bank_space_count"},{addr:2148340140,type:"u8",name:"p3_game_guy_space_count"},{addr:2148340145,type:"u8",name:"p4_cpu_difficulty"},{addr:2148340146,type:"u8",name:"p4_controller"},{addr:2148340147,type:"u8",name:"p4_char"},{addr:2148340154,type:"u16",name:"p4_coins",desc:"Player 4 coin count"},{addr:2148340158,type:"u8",name:"p4_stars",desc:"Player 4 star count"},{addr:2148340159,type:"u8",name:"p4_cur_chain_index",desc:"Player 4 current chain index"},{addr:2148340160,type:"u8",name:"p4_cur_space_index",desc:"Player 4 current space index"},{addr:2148340161,type:"u8",name:"p4_next_chain_index",desc:"Player 4 next chain index"},{addr:2148340162,type:"u8",name:"p4_next_space_index",desc:"Player 4 next space index"},{addr:2148340165,type:"u8",name:"p4_prev_chain_index",desc:"Player 4 previous chain index"},{addr:2148340166,type:"u8",name:"p4_prev_space_index",desc:"Player 4 previous space index"},{addr:2148340167,type:"u8",name:"p4_status_flags",desc:"see p1 notes"},{addr:2148340168,type:"u8",name:"p4_item1",desc:"Player 4 first item"},{addr:2148340169,type:"u8",name:"p4_item2",desc:"Player 4 second item"},{addr:2148340170,type:"u8",name:"p4_item3",desc:"Player 4 third item"},{addr:2148340171,type:"u8",name:"p4_bowser_suit_flag",desc:"1 = suit is on"},{addr:2148340172,type:"u8",name:"p4_turn_color_status",desc:"00=blank"},{addr:2148340184,type:"u16",name:"p4_minigame_star"},{addr:2148340186,type:"u16",name:"p4_coin_star"},{addr:2148340188,type:"s8",name:"p4_happening_space_count"},{addr:2148340189,type:"u8",name:"p4_red_space_count"},{addr:2148340190,type:"u8",name:"p4_blue_space_count"},{addr:2148340191,type:"u8",name:"p4_chance_space_count"},{addr:2148340192,type:"u8",name:"p4_bowser_space_count"},{addr:2148340193,type:"u8",name:"p4_battle_space_count"},{addr:2148340194,type:"u8",name:"p4_item_space_count"},{addr:2148340195,type:"u8",name:"p4_bank_space_count"},{addr:2148340196,type:"u8",name:"p4_game_guy_space_count"},{addr:2148340303,type:"u8",name:"hidden_block_star_space_index"},{addr:2148352448,type:"u32",name:"cur_player_spaces_remaining"},{addr:2148376976,type:"code",name:"RunDecisionTree",desc:"A0=decision_tree_pointer"},{addr:2148409160,type:"code",name:"ShowPlayerCoinChange",desc:"A0=player_index"},{addr:2148419960,type:"code",name:"PlayerHasItem",desc:"A0=player_index"},{addr:2148420060,type:"code",name:"PlayerHasEmptyItemSlot",desc:"A0=player_index"},{addr:2148420104,type:"code",name:"FixUpPlayerItemSlots",desc:"A0=player_index"},{addr:2148443744,type:"code",name:"AddArrowAngle",desc:"F0=degree_rot_of_arrow"},{addr:2148446560,type:"code",name:"GetSpaceData",desc:"A0=space_index"},{addr:2148446596,type:"code",name:"GetAbsSpaceIndexFromChainSpaceIndex",desc:"A0=chain_index"},{addr:2148446640,type:"code",name:"GetChainLength",desc:"A0=chain_index"},{addr:2148446668,type:"code",name:"GetChainSpaceIndexFromAbsSpaceIndex",desc:"A0=abs_space_index"},{addr:2148446796,type:"code",name:"SetPlayerOntoAbsSpaceIndex",desc:"A0=abs_space_index"},{addr:2148448240,type:"code",name:"SetSpaceType",desc:"A0=space_index"},{addr:2148448864,type:"code",name:"EventTableHydrate",desc:"Moves event table data into the space data"},{addr:2148449468,type:"code",name:"SetCurrentSpaceIndex",desc:"A0=space_index"},{addr:2148449480,type:"code",name:"GetCurrentSpaceIndex"},{addr:2148449708,type:"code",name:"RedrawSpaces"},{addr:2148452040,type:"code",name:"CloseMessage",desc:"Closes open message window (with animation)"},{addr:2148452588,type:"code",name:"ShowMessage",desc:"A0=character_index"},{addr:2148453208,type:"code",name:"GetAngleBetweenSpaces",desc:"A0=space_1_data[0x8]"},{addr:2148453916,type:"code",name:"SetPlayerBlue",desc:"Sets the player's turn state blue"},{addr:2148453924,type:"code",name:"SetPlayerRed",desc:"Sets the player's turn state red"},{addr:2148453932,type:"code",name:"SetPlayerGreen",desc:"Sets the player's turn state green"},{addr:2148453964,type:"code",name:"GetSumOfPlayerStars",desc:"sums the star count of all players"},{addr:2148454044,type:"code",name:"RNGPercentChance",desc:"A0=percent_chance"},{addr:2148454116,type:"code",name:"GetTurnsElapsed"},{addr:2148454924,type:"code",name:"RotatePlayerModel",desc:"A0=player_index"},{addr:2148456732,type:"code",name:"SetPlayerOntoChain",desc:"A0=player_index"},{addr:2148456856,type:"code",name:"SetNextChainAndSpace",desc:"A0=player_index"},{addr:2148456952,type:"code",name:"SetPrevChainAndSpace",desc:"A0=player_index"},{addr:2148457048,type:"code",name:"ChangeStarLocation"},{addr:2148460992,type:"code",name:"GetPlayerPlacement",desc:"A0=player_index"},{addr:2148461144,type:"code",name:"GetPlayerPlacementAtEndOfGame",desc:"A0=player_index"},{addr:2148475184,type:"code",name:"GetCurrentPlayerIndex"},{addr:2148475196,type:"code",name:"GetPlayerStruct",desc:"A0=player_index pass -1 to get current player's struct"},{addr:2148475260,type:"code",name:"PlayerIsCurrent",desc:"A0=player_index tests if A0 is the current player"},{addr:2148475288,type:"code",name:"PlayerIsCPU",desc:"A0=player_index"},{addr:2148475328,type:"code",name:"AdjustPlayerCoins",desc:"A0=player_index"},{addr:2148475440,type:"code",name:"PlayerHasCoins",desc:"A0=player_index"},{addr:2148475652,type:"code",name:"SetBoardPlayerAnimation",desc:"A0=player_index"},{addr:2148490564,type:"code",name:"AdjustPlayerCoinsGradual",desc:"A0=player_index"},{addr:2148492272,type:"code",name:"RefreshHUD",desc:"A0=player_index"},{addr:2148503900,type:"code",name:"SetCameraType",desc:"A0=type"},{addr:2148535712,type:"data",name:"mini_ids_4p"},{addr:2148535732,type:"data",name:"mini_ids_4p_easy"},{addr:2148535744,type:"data",name:"mini_ids_1v3"},{addr:2148535756,type:"data",name:"mini_ids_1v3_easy"},{addr:2148535764,type:"data",name:"mini_ids_2v2"},{addr:2148535776,type:"data",name:"mini_ids_2v2_easy"},{addr:2148535784,type:"data",name:"mini_ids_battle"},{addr:2148535792,type:"data",name:"mini_ids_battle_easy"},{addr:2148535796,type:"data",name:"mini_ids_item"},{addr:2148535804,type:"data",name:"mini_ids_item_easy"},{addr:2148535816,type:"data",name:"mini_ids_duel"},{addr:2148535824,type:"data",name:"mini_ids_duel_easy"},{addr:2148535832,type:"data",name:"num_minis_in_roulette",desc:"Number of Mini-Games to populate the roulette with for each type (4p"},{addr:2148543576,type:"u32",name:"boo_function_pointer"},{addr:2148553232,type:"u16",name:"num_board_spaces"},{addr:2148553234,type:"u16",name:"num_chains"},{addr:2148553236,type:"u32",name:"hydrated_space_data"},{addr:2148553240,type:"u32",name:"hydrated_chains"},{addr:2148553360,type:"data",name:"arrow_angles",desc:"f32[8]"},{addr:2148553392,type:"u32",name:"num_arrow_angles"},{addr:2148554736,type:"u32",name:"p1_hud_xpos",desc:" float for p1's HUD x pos"},{addr:2148554740,type:"u32",name:"p1_hud_ypos",desc:" float for p1's HUD y pos"},{addr:2148554844,type:"u32",name:"p2_hud_xpos",desc:" see p1"},{addr:2148554848,type:"u32",name:"p2_hud_ypos",desc:" see p1"},{addr:2148554952,type:"u32",name:"p3_hud_xpos",desc:" see p1"},{addr:2148554956,type:"u32",name:"p3_hud_ypos",desc:" see p1"},{addr:2148555060,type:"u32",name:"p4_hud_xpos",desc:" see p1"},{addr:2148555064,type:"u32",name:"p4_hud_ypos",desc:" see p1"},{addr:2148555168,type:"data",name:"overlay_base",desc:"Overlay starting location"}],mG=[{addr:2148078296,type:"data",name:"overlay_table"},{addr:2148507904,type:"data",name:"overlay_ram_start"}];function dM(n){switch(n){case Qe.MP1_USA:return uG;case Qe.MP1_JPN:return dG;case Qe.MP1_PAL:return AG;case Qe.MP2_USA:return fG;case Qe.MP2_JPN:return hG;case Qe.MP2_PAL:throw new Error("Symbols not available for game type "+n);case Qe.MP3_USA:return pG;case Qe.MP3_JPN:return mG;case Qe.MP3_PAL:throw new Error("Symbols not available for game type "+n)}throw new Error("Unrecognized game type "+n)}function Dg(n,e){let t=dM(n);return t?(e&&(t=t.filter(r=>r.type===e)),t=t.filter(r=>r.name[0]!=="_"&&r.name[0]!=="?"),t):[]}function to(n,e){const t=dM(n);if(!t)throw new Error(`Symbols aren't available for ${n}.`);for(let r=0;r<t.length;r++)if(t[r].name===e)return t[r].addr;throw new Error(`Symbol ${e} wasn't found for ${n}.`)}function SG(n){return(n-3072|2147483648)>>>0}function i3(n){return(n+3072&2147483647)>>>0}const a3=9*4,cn=new class{constructor(){this._overlays=[],this._sceneInfo=[]}clearCache(){this._overlays=null,this._sceneInfo=null}count(){return this._sceneInfo.length}getInfo(e){return this._sceneInfo[e]||null}getDataView(e){return new DataView(this._overlays[e])}getCodeDataView(e){const t=this._sceneInfo[e],r=t.code_start&2147483647,i=t.code_end&2147483647;return new DataView(this._overlays[e],0,i-r)}getRoDataView(e){const t=this._sceneInfo[e],r=t.rodata_start&2147483647,i=t.rodata_end&2147483647,a=t.ram_start&2147483647;return new DataView(this._overlays[e],r-a,i-r)}getByteLength(){return this._sceneInfo.reduce((e,t)=>e+t.rom_end-t.rom_start,0)}extractAsync(){return new Promise(e=>{this.extract(),e()})}extract(){this._overlays=[],this._sceneInfo=[];let e=to(Tt.getROMGame(),"overlay_table");if(!e){wt("overlay_table symbol undefined for current ROM");return}e=i3(e);const t=Tt.getROMBuffer(),r=Tt.getDataView();let i=e;for(;r.getUint32(i)!==1142947840;){const a={rom_start:r.getUint32(i),rom_end:r.getUint32(i+4),ram_start:r.getUint32(i+8),code_start:r.getUint32(i+12),code_end:r.getUint32(i+16),rodata_start:r.getUint32(i+20),rodata_end:r.getUint32(i+24),bss_start:r.getUint32(i+28),bss_end:r.getUint32(i+32)};this._sceneInfo.push(a),this._overlays.push(t.slice(a.rom_start,a.rom_end)),i+=a3}}pack(e,t=0){let r=to(Tt.getROMGame(),"overlay_table");if(!r)throw new Error("overlay_table symbol undefined for current ROM");r=i3(r);const i=new DataView(e);let a=r,o=0;for(;i.getUint32(a)!==1142947840;){const s=this._sceneInfo[o];i.setUint32(a,s.rom_start),i.setUint32(a+4,s.rom_end),i.setUint32(a+8,s.ram_start),i.setUint32(a+12,s.code_start),i.setUint32(a+16,s.code_end),i.setUint32(a+20,s.rodata_start),i.setUint32(a+24,s.rodata_end),i.setUint32(a+28,s.bss_start),i.setUint32(a+32,s.bss_end);const l=this._overlays[o];fr(e,l,s.rom_start,0,l.byteLength),a+=a3,o++}}replace(e,t,r){if(t.byteLength%16)throw new Error("Cannot have overlay byte length that is not divisible by 16");this._overlays[e]=t;const i=this._sceneInfo[e],a=i.rom_end-i.rom_start,o=t.byteLength-a;if(i.rom_end=i.rom_start+t.byteLength,r)for(const s in r){const l=r[s];l&&(i[s]=l)}for(let s=e+1;s<this._sceneInfo.length;s++){const l=this._sceneInfo[s];i.rom_start<l.rom_start&&(l.rom_start+=o,l.rom_end+=o)}wt(`Replaced overlay ${At(e)} with new buffer of length ${t.byteLength}`,r)}},gG=958,$m=1024,_G=3;function AM(n,e,t){let r=0,i=0,a=gG;const o=new ArrayBuffer($m),s=new DataView(o);let l=0;for(;i<t;){if((l&256)===0&&(l=n.getUint8(r),l|=65280,++r),(l&1)===1)e.setUint8(i,n.getUint8(r)),s.setUint8(a,n.getUint8(r)),++i,++r,a=(a+1)%$m;else{const u=n.getUint8(r),d=n.getUint8(r+1);r+=2;let h=(d&192)<<2|u;const f=(d&63)+_G;let m;for(let g=0;g<f;++g)m=s.getUint8(h%$m),s.setUint8(a,m),a=(a+1)%$m,e.setUint8(i,m),++i,++h}l>>=1}return r}function xG(n){const e=Math.ceil(n.byteLength/8),t=n.byteLength+e,r=new ArrayBuffer(t),i=new DataView(r);let a=0,o=0;for(;a<t;)!a||!(a%9)?i.setUint8(a,255):(i.setUint8(a,n.getUint8(o)),o++),a++;return r}function fM(n,e,t){let r=0,i=0,a=0,o=0;for(;i<t;){if(o===0&&(a=n.getUint32(r),o=32,r+=4),(a&2147483648)!==0)e.setUint8(i,n.getUint8(r)),++i,++r;else{const s=n.getUint8(r),l=n.getUint8(r+1);r+=2;const u=((s&15)<<8|l)+1;let d=((s&240)>>4)+2;d===2&&(d=n.getUint8(r)+18,++r);let h,f;for(h=0;h<d&&i<t;++h)u>i?f=0:f=e.getUint8(i-u),e.setUint8(i,f),++i}a<<=1,--o}return r}function vG(n){const e=n.byteLength/32,t=n.byteLength+e*4,r=new ArrayBuffer(t),i=new DataView(r);let a=0;for(let o=0;o<t;o+=36,a+=32)i.setUint32(o,4294967295),i.setUint32(o+4,n.getUint32(a)),i.setUint32(o+8,n.getUint32(a+4)),i.setUint32(o+12,n.getUint32(a+8)),i.setUint32(o+16,n.getUint32(a+12)),i.setUint32(o+20,n.getUint32(a+16)),i.setUint32(o+24,n.getUint32(a+20)),i.setUint32(o+28,n.getUint32(a+24)),i.setUint32(o+32,n.getUint32(a+28));return r}function hM(n,e,t){let r=0,i=0;for(;i<t;){const a=n.getUint8(r);r++;const o=a&127;if(a&128)for(let s=0;s<o;s++){const l=n.getUint8(r);r++,e.setUint8(i,l),i++}else{const s=n.getUint8(r);r++;for(let l=0;l<o;l++)e.setUint8(i,s),i++}}return r}function wG(n){const e=new ArrayBuffer(n.byteLength*3),t=new DataView(e);let r=0,i=0,a=0,o,s;for(;i<n.byteLength;)if(o=n.getUint8(i),s=n.getUint8(i+1),o===s){a=0;for(let l=0;l<127;l++){if(o=n.getUint8(i+l),s=n.getUint8(i+l+1),o!==s||i+l>=n.byteLength){a++;break}a++}t.setUint8(r,a),t.setUint8(r+1,n.getUint8(i)),r+=2,i+=a}else{a=0;for(let l=0;l<127&&(o=n.getUint8(i+l),s=n.getUint8(i+l+1),!(o===s||i+l>=n.byteLength));l++)a++;t.setUint8(r,128|a),r+=1;for(let l=0;l<a;l++)t.setUint8(r,n.getUint8(i+l)),r+=1,i+=1}return e.slice(0,r)}function u_(n,e,t){const r=new ArrayBuffer(t),i=new DataView(r);let a;switch(n){case 1:a=AM(e,i,t);break;case 2:case 3:case 4:a=fM(e,i,t);break;case 5:a=hM(e,i,t);break;case 0:a=t;for(let o=0;o<t;o++)i.setUint8(o,e.getUint8(o));break;default:wt(`decompression ${n} not implemented.`);break}return r.compressedSize=a,r}function pM(n,e){switch(n){case 1:return xG(e);case 2:case 3:case 4:return vG(e);case 5:return wG(e);case 0:default:return e.buffer.slice(0)}}function yG(n,e,t){const r=new ArrayBuffer(t),i=new DataView(r);switch(n){case 1:return AM(e,i,t);case 2:case 3:case 4:return fM(e,i,t);case 5:return hM(e,i,t);case 0:return t;default:wt(`getCompressedSize ${n} not implemented.`)}}function Ro(n,e,t,r){return Math.sqrt((n-t)*(n-t)+(e-r)*(e-r))}function yx(n,e,t,r){return{x:(n+t)/2,y:(e+r)/2}}function EG(n,e,t,r,i,a){return Math.abs((a-r)*n-(i-t)*e+i*r-a*t)/Math.sqrt(Math.pow(a-r,2)+Math.pow(i-t,2))}function CG(n,e,t,r,i,a){const[o,s]=[Math.min(t,i),Math.max(t,i)],[l,u]=[Math.min(r,a),Math.max(r,a)];return n>=o&&n<=s&&e>=l&&e<=u}function xn(n,e){return e*Math.ceil(n/e)}function G1(n){return n*Math.PI/180}function VG(n){return n*180/Math.PI}function DG(n,e,t,r){const i=t-n,a=r-e,o=Math.atan2(a,i);return o<0?Math.abs(o):Math.abs(o-Math.PI)+Math.PI}function mM(n){const e=new ArrayBuffer(4),t=new DataView(e);return t.setFloat32(0,n),t.getUint32(0)}const Ww={r0:0,zero:0,at:1,v0:2,v1:3,a0:4,a1:5,a2:6,a3:7,t0:8,t1:9,t2:10,t3:11,t4:12,t5:13,t6:14,t7:15,s0:16,s1:17,s2:18,s3:19,s4:20,s5:21,s6:22,s7:23,t8:24,t9:25,k0:26,k1:27,gp:28,sp:29,fp:30,ra:31};function FG(n){if(!!n)return Ww[n.toLowerCase()]}function TG(n){for(let e in Ww)if(Ww[e]===n)return e;return""}function bG(n){if(typeof n!="number")throw new Error("getFloatRegName encountered non-number");return"F"+n}const t8={S:16,D:17,W:20,L:21};function SM(n){return t8[n.toUpperCase()]}function PG(n){for(let e in t8)if(t8[e]===n)return e;return""}const n8={S:0,D:1,W:4,L:5};function gM(n){return n8[n.toUpperCase()]}function RG(n){for(let e in n8)if(n8[e]===n)return e;return""}function LG(n){return t8.hasOwnProperty(n.toUpperCase())||n8.hasOwnProperty(n.toUpperCase())}const r8={F:0,UN:1,EQ:2,UEQ:3,OLT:4,ULT:5,OLE:6,ULE:7,SF:8,NGLE:9,SEQ:10,NGL:11,LT:12,NGE:13,LE:14,NGT:15};function BG(n){return r8[n.toUpperCase()]}function MG(n){for(let e in r8)if(r8[e]===n)return e;return""}function IG(n){return r8.hasOwnProperty(n.toUpperCase())}function Ih(n){return n[0]==="0"||n[0]==="1"}function Ex(n,e,t){let r=n>>>t&i8(e.length),i=_M(e);return r===i}function _M(n){let e=0;for(var t=0;t<n.length;t++){let r=n[t]==="1"?1:0;e<<=1,e=e|r}return e}function i8(n){if(n<=0)throw new Error(`makeBitMask cannot make mask of length ${n}`);let e=1;for(;--n;)e<<=1,e=e|1;return e}function Xw(n,e){for(;n.length<e;)n="0"+n;return n}function OG(n,e,t,r){let[i,a,o]=n;a=a.toLowerCase();let s;return a==="b"?s=parseInt(o,2):a==="o"?s=parseInt(o,8):a==="x"?s=parseInt(o,16):s=parseInt(o,10),isNaN(s)||(r&&(s>>>=r),e===16&&t&&(s=xM(s)),i&&(s=-s)),s}function xM(n){return new Int16Array([n])[0]}function d_(n){if(n[n.length-1]==="?"&&(n=n.substring(0,n.length-1)),n.indexOf("int")===-1)return n.substr(0,2)==="cc"?{signed:!1,bits:4,shift:!1}:null;let e=0;const t=n.indexOf("shift");return t>0&&(e=n.substr(t).match(/\d+/g)),{signed:n[0]!=="u",bits:parseInt(n.match(/\d+/g)),shift:e}}const be="rs",ke="rt",Ut="rd",Mt="fs",T0="ft",Yt="fd",Tl="fr",ei="uint5",bl="uint5",Hd="uint10",Ct="int16",An="uint16",o3="uint20",Pl="uint26",eS="uint26shift2",_a="cc",kG="cond",g0="fmt",ah="fmt3";function a8(n){return Fg[n.toLowerCase()]}const Cx=new Map;function aA(n){if(Cx.has(n))return Cx.get(n);const e=NG(n);return Cx.set(n,e),e}function NG(n){if(Ih(n))return n.length;switch(n=n.replace("?",""),n){case"cc":case"fmt3":return 3;case"cond":return 4;case"rs":case"rt":case"rd":case"fs":case"ft":case"fd":case"fr":case"sa":case"fmt":return 5}const e=d_(n);if(e)return e.bits;throw new Error(`Unrecongized format value: ${n}`)}function UG(n){let e="",t=0;for(let r in Fg){const i=Fg[r].format,a=Fg[r].fmts,o=jG(n,i,a);o>t&&(e=r,t=o)}return e}function jG(n,e,t){let r=0,i,a=0;for(let o=e.length-1;o>=0;o--){let s,l=e[o];if(Array.isArray(l)){let u=!1;for(let d=0;d<l.length;d++)if(i=s3(l[d],n,a,t),i>=0){u=!0,r+=i,s=aA(l[d]);break}if(!u)return 0}else if(i=s3(l,n,a,t),i>=0)r+=i,s=aA(l);else return 0;a+=s}return r}function s3(n,e,t,r){if(!Ih(n)){if(n===g0){for(let i=0;i<r.length;i++){let a=Xw(SM(r[i]).toString(2),5);if(Ex(e,a,t))return a.length}return-1}if(n===ah){for(let i=0;i<r.length;i++){let a=Xw(gM(r[i]).toString(2),3);if(Ex(e,a,t))return a.length}return-1}return 0}return Ex(e,n,t)?n.length:-1}const Fg={"abs.fmt":{format:["010001",g0,"00000",Mt,Yt,"000101"],fmts:["S","D"],display:[Yt,Mt]},add:{format:["000000",be,ke,Ut,"00000100000"],display:[Ut,be,ke]},"add.fmt":{format:["010001",g0,T0,Mt,Yt,"000000"],fmts:["S","D"],display:[Yt,Mt,T0]},addi:{format:["001000",be,ke,Ct],display:[ke,be,Ct]},addiu:{format:["001001",be,ke,An],display:[ke,be,An]},addu:{format:["000000",be,ke,Ut,"00000100001"],display:[Ut,be,ke]},and:{format:["000000",be,ke,Ut,"00000100100"],display:[Ut,be,ke]},andi:{format:["001100",be,ke,An],display:[ke,be,An]},bc1f:{format:["010001","01000",[_a,"000"],"00",Ct],display:["cc?",Ct]},bc1fl:{format:["010001","01000",[_a,"000"],"10",Ct],display:["cc?",Ct]},bc1t:{format:["010001","01000",[_a,"000"],"01",Ct],display:["cc?",Ct]},bc1tl:{format:["010001","01000",[_a,"000"],"11",Ct],display:["cc?",Ct]},beq:{format:["000100",be,ke,An],display:[be,ke,An]},beql:{format:["010100",be,ke,An],display:[be,ke,An]},bgez:{format:["000001",be,"00001",An],display:[be,An]},bgezal:{format:["000001",be,"10001",An],display:[be,An]},bgezall:{format:["000001",be,"10011",An],display:[be,An]},bgezl:{format:["000001",be,"00011",An],display:[be,An]},bgtz:{format:["000111",be,"00000",An],display:[be,An]},bgtzl:{format:["010111",be,"00000",An],display:[be,An]},blez:{format:["000110",be,"00000",An],display:[be,An]},blezl:{format:["010110",be,"00000",An],display:[be,An]},bltz:{format:["000001",be,"00000",An],display:[be,An]},bltzal:{format:["000001",be,"10000",An],display:[be,An]},bltzall:{format:["000001",be,"10010",An],display:[be,An]},bltzl:{format:["000001",be,"00010",An],display:[be,An]},bne:{format:["000101",be,ke,An],display:[be,ke,An]},bnel:{format:["010101",be,ke,An],display:[be,ke,An]},break:{format:["000000",[o3,"00000000000000000000"],"001101"],display:["uint20?"]},"c.cond.fmt":{format:["010001",g0,T0,Mt,[_a,"000"],"00","11",kG],fmts:["S","D"],display:["cc?",Mt,T0]},"ceil.l.fmt":{format:["010001",g0,"00000",Mt,Yt,"001010"],fmts:["S","D"],display:[Yt,Mt]},"ceil.w.fmt":{format:["010001",g0,"00000",Mt,Yt,"001110"],fmts:["S","D"],display:[Yt,Mt]},cfc1:{format:["010001","00010",ke,Mt,"00000000000"],display:[ke,Mt]},ctc1:{format:["010001","00110",ke,Mt,"00000000000"],display:[ke,Mt]},cop0:{format:["010000",Pl],display:[Pl]},cop1:{format:["010001",Pl],display:[Pl]},cop2:{format:["010010",Pl],display:[Pl]},cop3:{format:["010011",Pl],display:[Pl]},"cvt.d.fmt":{format:["010001",g0,"00000",Mt,Yt,"100001"],fmts:["S","W","L"],display:[Yt,Mt]},"cvt.l.fmt":{format:["010001",g0,"00000",Mt,Yt,"100101"],fmts:["S","D"],display:[Yt,Mt]},"cvt.s.fmt":{format:["010001",g0,"00000",Mt,Yt,"100000"],fmts:["D","W","L"],display:[Yt,Mt]},"cvt.w.fmt":{format:["010001",g0,"00000",Mt,Yt,"100100"],fmts:["S","D"],display:[Yt,Mt]},dadd:{format:["000000",be,ke,Ut,"00000101100"],display:[Ut,be,ke]},daddi:{format:["011000",be,ke,Ct],display:[ke,be,Ct]},daddiu:{format:["011001",be,ke,An],display:[ke,be,An]},daddu:{format:["000000",be,ke,Ut,"00000101101"],display:[Ut,be,ke]},ddiv:{format:["000000",be,ke,"0000000000011110"],display:[be,ke]},ddivu:{format:["000000",be,ke,"0000000000011111"],display:[be,ke]},div:{format:["000000",be,ke,"0000000000011010"],display:[be,ke]},"div.fmt":{format:["010001",g0,T0,Mt,Yt,"000011"],fmts:["S","D"],display:[Yt,Mt,T0]},divu:{format:["000000",be,ke,"0000000000011011"],display:[be,ke]},dmfc1:{format:["010001","00001",ke,Mt,"00000000000"],display:[ke,Mt]},dmult:{format:["000000",be,ke,"0000000000011100"],display:[be,ke]},dmultu:{format:["000000",be,ke,"0000000000011101"],display:[be,ke]},dmtc1:{format:["010001","00101",ke,Mt,"00000000000"],display:[ke,Mt]},dsll:{format:["00000000000",ke,Ut,ei,"111000"],display:[Ut,ke,ei]},dsll32:{format:["00000000000",ke,Ut,ei,"111100"],display:[Ut,ke,ei]},dsllv:{format:["000000",be,ke,Ut,"00000010100"],display:[Ut,ke,be]},dsra:{format:["00000000000",ke,Ut,ei,"111011"],display:[Ut,ke,ei]},dsra32:{format:["00000000000",ke,Ut,ei,"111111"],display:[Ut,ke,ei]},dsrav:{format:["000000",be,ke,Ut,"00000010111"],display:[Ut,ke,be]},dsrl:{format:["00000000000",ke,Ut,ei,"111010"],display:[Ut,ke,ei]},dsrl32:{format:["00000000000",ke,Ut,ei,"111110"],display:[Ut,ke,ei]},dsrlv:{format:["000000",be,ke,Ut,"00000010110"],display:[Ut,ke,be]},dsub:{format:["000000",be,ke,Ut,"00000101110"],display:[Ut,be,ke]},dsubu:{format:["000000",be,ke,Ut,"00000101111"],display:[Ut,be,ke]},"floor.l.fmt":{format:["010001",g0,"00000",Mt,Yt,"001011"],fmts:["S","D"],display:[Yt,Mt]},"floor.w.fmt":{format:["010001",g0,"00000",Mt,Yt,"001111"],fmts:["S","D"],display:[Yt,Mt]},j:{format:["000010",eS],display:[eS]},jal:{format:["000011",eS],display:[eS]},jalr:{format:["000000",be,"00000",[Ut,"11111"],"00000","001001"],display:["rd?",be]},jr:{format:["000000",be,"000000000000000","001000"],display:[be]},lb:{format:["100000",be,ke,Ct],display:[ke,Ct,"(",be,")"]},lbu:{format:["100100",be,ke,An],display:[ke,An,"(",be,")"]},ld:{format:["110111",be,ke,Ct],display:[ke,Ct,"(",be,")"]},ldc1:{format:["110101",be,T0,Ct],display:[T0,Ct,"(",be,")"]},ldc2:{format:["110110",be,ke,Ct],display:[ke,Ct,"(",be,")"]},ldl:{format:["011010",be,ke,Ct],display:[ke,Ct,"(",be,")"]},ldr:{format:["011011",be,ke,Ct],display:[ke,Ct,"(",be,")"]},ldxc1:{format:["010011",be,ke,"00000",Yt,"000001"],display:[Yt,ke,"(",be,")"]},lh:{format:["100001",be,ke,Ct],display:[ke,Ct,"(",be,")"]},lhu:{format:["100101",be,ke,Ct],display:[ke,Ct,"(",be,")"]},ll:{format:["110000",be,ke,Ct],display:[ke,Ct,"(",be,")"]},lld:{format:["110100",be,ke,Ct],display:[ke,Ct,"(",be,")"]},lui:{format:["001111","00000",ke,An],display:[ke,An]},lw:{format:["100011",be,ke,Ct],display:[ke,Ct,"(",be,")"]},lwc1:{format:["110001",be,T0,Ct],display:[T0,Ct,"(",be,")"]},lwc2:{format:["110010",be,ke,Ct],display:[ke,Ct,"(",be,")"]},lwc3:{format:["110011",be,ke,Ct],display:[ke,Ct,"(",be,")"]},lwl:{format:["100010",be,ke,Ct],display:[ke,Ct,"(",be,")"]},lwr:{format:["100110",be,ke,Ct],display:[ke,Ct,"(",be,")"]},lwu:{format:["100111",be,ke,Ct],display:[ke,Ct,"(",be,")"]},lwxc1:{format:["010011",be,ke,"00000",Yt,"000000"],display:[Yt,ke,"(",be,")"]},"madd.fmt":{format:["010011",Tl,T0,Mt,Yt,"100",ah],fmts:["S","D"],display:[Yt,Tl,Mt,T0]},mfc1:{format:["010001","00000",ke,Mt,"00000000000"],display:[ke,Mt]},mfhi:{format:["000000","0000000000",Ut,"00000","010000"],display:[Ut]},mflo:{format:["000000","0000000000",Ut,"00000","010010"],display:[Ut]},"mov.fmt":{format:["010001",g0,"00000",Mt,Yt,"000110"],fmts:["S","D"],display:[Yt,Mt]},movf:{format:["000000",be,_a,"00",Ut,"00000","000001"],display:[Ut,be,_a]},"movf.fmt":{format:["010001",g0,_a,"00",Mt,Yt,"010001"],fmts:["S","D"],display:[Yt,Mt,_a]},movn:{format:["000000",be,ke,Ut,"00000","001011"],display:[Ut,be,ke]},"movn.fmt":{format:["010001",g0,ke,Mt,Yt,"010011"],fmts:["S","D"],display:[Yt,Mt,ke]},movt:{format:["000000",be,_a,"01",Ut,"00000","000001"],display:[Ut,be,_a]},"movt.fmt":{format:["010001",g0,_a,"01",Mt,Yt,"010001"],fmts:["S","D"],display:[Yt,Mt,_a]},movz:{format:["000000",be,ke,Ut,"00000","001010"],display:[Ut,be,ke]},"movz.fmt":{format:["010001",g0,ke,Mt,Yt,"010010"],fmts:["S","D"],display:[Yt,Mt,ke]},"msub.fmt":{format:["010011",Tl,T0,Mt,Yt,"101",ah],fmts:["S","D"],display:[Yt,Tl,Mt,T0]},mtc1:{format:["010001","00100",ke,Mt,"00000000000"],display:[ke,Mt]},mthi:{format:["000000",be,"000000000000000","010001"],display:[be]},mtlo:{format:["000000",be,"000000000000000","010011"],display:[be]},"mul.fmt":{format:["010001",g0,T0,Mt,Yt,"000010"],fmts:["S","D"],display:[Yt,Mt,T0]},mult:{format:["000000",be,ke,"0000000000","011000"],display:[be,ke]},multu:{format:["000000",be,ke,"0000000000","011001"],display:[be,ke]},"neg.fmt":{format:["010001",g0,"00000",Mt,Yt,"000111"],fmts:["S","D"],display:[Yt,Mt]},"nmadd.fmt":{format:["010011",Tl,T0,Mt,Yt,"110",ah],fmts:["S","D"],display:[Yt,Tl,Mt,T0]},"nmsub.fmt":{format:["010011",Tl,T0,Mt,Yt,"111",ah],fmts:["S","D"],display:[Yt,Tl,Mt,T0]},nop:{format:["00000000000000000000000000000000"],display:[]},nor:{format:["000000",be,ke,Ut,"00000","100111"],display:[Ut,be,ke]},or:{format:["000000",be,ke,Ut,"00000","100101"],display:[Ut,be,ke]},ori:{format:["001101",be,ke,An],display:[ke,be,An]},pref:{format:["110011",be,bl,Ct],display:[bl,Ct,"(",be,")"]},prefx:{format:["010011",be,ke,bl,"00000","001111"],display:[bl,ke,"(",be,")"]},"recip.fmt":{format:["010001",g0,"00000",Mt,Yt,"010101"],fmts:["S","D"],display:[Yt,Mt]},"round.l.fmt":{format:["010001",g0,"00000",Mt,Yt,"001000"],fmts:["S","D"],display:[Yt,Mt]},"round.w.fmt":{format:["010001",g0,"00000",Mt,Yt,"001100"],fmts:["S","D"],display:[Yt,Mt]},"rsqrt.fmt":{format:["010001",g0,"00000",Mt,Yt,"010110"],fmts:["S","D"],display:[Yt,Mt]},sb:{format:["101000",be,ke,Ct],display:[ke,Ct,"(",be,")"]},sc:{format:["111000",be,ke,Ct],display:[ke,Ct,"(",be,")"]},scd:{format:["111100",be,ke,Ct],display:[ke,Ct,"(",be,")"]},sd:{format:["111111",be,ke,Ct],display:[ke,Ct,"(",be,")"]},sdc1:{format:["111101",be,T0,Ct],display:[T0,Ct,"(",be,")"]},sdc2:{format:["111110",be,ke,Ct],display:[ke,Ct,"(",be,")"]},sdl:{format:["101100",be,ke,Ct],display:[ke,Ct,"(",be,")"]},sdr:{format:["101101",be,ke,Ct],display:[ke,Ct,"(",be,")"]},sdxc1:{format:["010011",be,bl,Mt,"00000","001001"],display:[Mt,bl,"(",be,")"]},sh:{format:["101001",be,ke,Ct],display:[ke,Ct,"(",be,")"]},sll:{format:["000000","00000",ke,Ut,ei,"000000"],display:[Ut,ke,ei]},sllv:{format:["000000",be,ke,Ut,"00000","000100"],display:[Ut,ke,be]},slt:{format:["000000",be,ke,Ut,"00000","101010"],display:[Ut,be,ke]},slti:{format:["001010",be,ke,Ct],display:[ke,be,Ct]},sltiu:{format:["001011",be,ke,An],display:[ke,be,An]},sltu:{format:["000000",be,ke,Ut,"00000","101011"],display:[Ut,be,ke]},"sqrt.fmt":{format:["010001",g0,"00000",Mt,Yt,"000100"],fmts:["S","D"],display:[Yt,Mt]},sra:{format:["000000","00000",ke,Ut,ei,"000011"],display:[Ut,ke,ei]},srav:{format:["000000",be,ke,Ut,"00000","000111"],display:[Ut,ke,be]},srl:{format:["000000","00000",ke,Ut,ei,"000010"],display:[Ut,ke,ei]},srlv:{format:["000000",be,ke,Ut,"00000","000110"],display:[Ut,ke,be]},sub:{format:["000000",be,ke,Ut,"00000","100010"],display:[Ut,be,ke]},"sub.fmt":{format:["010001",g0,T0,Mt,Yt,"000001"],fmts:["S","D"],display:[Yt,Mt,T0]},subu:{format:["000000",be,ke,Ut,"00000","100011"],display:[Ut,be,ke]},sw:{format:["101011",be,ke,Ct],display:[ke,Ct,"(",be,")"]},swc1:{format:["111001",be,T0,Ct],display:[T0,Ct,"(",be,")"]},swc2:{format:["111010",be,ke,Ct],display:[ke,Ct,"(",be,")"]},swc3:{format:["111011",be,ke,Ct],display:[ke,Ct,"(",be,")"]},swl:{format:["101010",be,ke,Ct],display:[ke,Ct,"(",be,")"]},swr:{format:["101110",be,ke,Ct],display:[ke,Ct,"(",be,")"]},swxc1:{format:["010011",be,bl,Mt,"00000","001000"],display:[Mt,bl,"(",be,")"]},sync:{format:["000000","000000000000000","00000","001111"],display:[]},syscall:{format:["000000",[o3,"00000000000000000000"],"001100"],display:[]},teq:{format:["000000",be,ke,Hd,"110100"],display:[be,ke]},teqi:{format:["000001",be,"01100",Ct],display:[be,Ct]},tge:{format:["000000",be,ke,Hd,"110000"],display:[be,ke]},tgei:{format:["000001",be,"01000",Ct],display:[be,Ct]},tgeiu:{format:["000001",be,"01001",An],display:[be,An]},tgeu:{format:["000000",be,ke,Hd,"110001"],display:[be,ke]},tlt:{format:["000000",be,ke,Hd,"110010"],display:[be,ke]},tlti:{format:["000001",be,"01010",Ct],display:[be,Ct]},tltiu:{format:["000001",be,"01011",An],display:[be,An]},tltu:{format:["000000",be,ke,Hd,"110011"],display:[be,ke]},tne:{format:["000000",be,ke,Hd,"110110"],display:[be,ke]},tnei:{format:["000001",be,"01110",Ct],display:[be,Ct]},"trunc.l.fmt":{format:["010001",g0,"00000",Mt,Yt,"001001"],fmts:["S","D"],display:[Yt,Mt]},"trunc.w.fmt":{format:["010001",g0,"00000",Mt,Yt,"001101"],fmts:["S","D"],display:[Yt,Mt]},xor:{format:["000000",be,ke,Ut,"00000","100110"],display:[Ut,be,ke]},xori:{format:["001110",be,ke,An],display:[ke,be,An]}},vM="([A-Za-z0-3.]+)",GG="(-)?0?([xbo]?)([A-Fa-f0-9]+)",HG="\\$?(\\w+)",zG="\\$?[Ff]([0-9]+)",WG=new RegExp("^\\s*"+vM),Vx=Object.create(null);function l3(n){const e=WG.exec(n);if(e){const t=e[1].split(".");if(t.length===1)return t[0].toLowerCase();let r="",i=!1,a=!1;for(let o=t.length-1;o>0;o--){let s=t[o];i||(s==="fmt"||LG(s))&&(i=!0,s="fmt"),a||IG(s)&&(a=!0,s="cond"),r="."+s+r}return(t[0]+r).toLowerCase()}return null}function XG(n,e){if(Vx[n])return Vx[n];const t=[vM],r=e.display;for(let o=0;o<r.length;o++){const s=r[o],l=s.endsWith("?");let u="";if(l&&(u+="(?:[,\\s]+"),r[o+1]==="("){if(l)throw new Error("Not prepared to generate optional regex with parenthesis");if(r[o+3]!==")")throw new Error("Not prepared to generate regex for multiple values in parenthesis");u+=KG(Dx(s),Dx(r[o+2])),o=o+3}else u+=Dx(s);l&&(u+=")?"),t.push(u)}let i="^\\s*"+t.reduce((o,s,l)=>l===0||YG(s)?o+s:o+"[,\\s]+"+s,"")+"\\s*$";const a=new RegExp(i);return Vx[n]=a,a}function Dx(n){if(qG(n))return HG;if(QG(n))return zG;if(d_(n))return GG;throw new Error(`Unrecognized display entry ${n}`)}function KG(n,e){return n+"\\s*\\(?"+e+"\\)?"}function YG(n){return n.startsWith("(?:")}function qG(n){if(!n)return!1;switch(n.substr(0,2)){case"rs":case"rt":case"rd":return!0}return!1}function QG(n){if(!n)return!1;switch(n.substr(0,2)){case"fs":case"ft":case"fd":return!0}return!1}function t0(n,e){if(e=JG(e),Array.isArray(n))return n.map(t=>tS(t,e));if(typeof n=="object")return tS(n,e);if(typeof n=="string"){const t=n.split(/\r?\n/).filter(r=>!!r.trim());return t.length===1?tS(t[0],e):t.map(r=>tS(r,e))}throw new Error("Unexpected input to parse. Pass a string or array of strings.")}function JG(n){return Object.assign({intermediate:!1},n)}function tS(n,e){let t,r,i;if(typeof n=="string"){if(t=l3(n),!t)throw new Error(`Could not parse opcode from ${n}`);if(r=a8(t),!r)throw new Error(`Opcode ${t} was not recognized`);i=ZG(t,r,n)}else if(typeof n=="object"){if(t=l3(n.op),!t)throw new Error("Object input to parse did not contain 'op'");if(r=a8(t),!r)throw new Error(`Opcode ${t} was not recognized`);i=n}return e.intermediate?i:$G(r.format,i)}function ZG(n,e,t){let i=XG(n,e).exec(t);if(!i)throw new Error(`Could not parse instruction: ${t}`);let a={op:n};(n.indexOf(".fmt")!==-1||n.indexOf(".cond")!==-1)&&eH(i[1],n,e.fmts,e.format,a);const o=e.display;let s=2;for(let l=0;l<o.length;l++,s++){const u=i[s];let d=o[l];const h=d.endsWith("?");switch(h&&(d=d.replace("?","")),d){case"(":case")":s--;continue;case"rs":case"rd":case"rt":{const m=FG(u);if(m===void 0){if(h)continue;throw new Error(`Unrecognized ${d} register ${u}`)}a[d]=m;continue}case"fs":case"ft":case"fd":case"fr":if(a[d]=parseInt(u),isNaN(a[d]))throw new Error(`Unrecognized ${d} register ${u}`);continue}const f=d_(d);if(f){let m;const g=[i[s],i[s+1],i[s+2]];if(!h||g[2]){if(m=OG(g,f.bits,f.signed,f.shift),isNaN(m))throw new Error(`Could not parse immediate ${g.join("")}`);a[d]=m}s+=2;continue}throw new Error(`Unrecognized opcode display entry ${d}`)}return a}function $G(n,e){let t=0,r=0;for(let i=0;i<n.length;i++){let a,o=n[i],s=aA(Array.isArray(o)?o[0]:o);if(t=t<<s>>>0,Array.isArray(o)){for(let l=0;l<o.length;l++)if(a=c3(o[l],t,e),a.wrote){t=a.output;break}}else a=c3(o,t,e),a.wrote&&(t=a.output);r+=s}if(r!=32)throw new Error("Incorrect number of bits written for format "+n);return t}function c3(n,e,t){let r=!1;if(Ih(n))e|=_M(n),r=!0;else if(t[n]!==void 0){let i=t[n]&i8(aA(n));r=!0,e|=i}return{wrote:r,output:e>>>0}}function eH(n,e,t,r,i){const a=n.split("."),o=e.split(".");if(a.length!==o.length)throw new Error(`Given opcode ${n} does not have all pieces (${e})`);for(let s=0;s<o.length;s++){const l=o[s];if(l==="fmt"||l==="ftm3"){if(t.indexOf(a[s].toUpperCase())===-1)throw new Error(`Format ${a[s]} is not allowed for ${l}. Allowed values are ${t}`);l==="fmt"?i.fmt=SM(a[s]):l==="fmt3"&&(i.fmt3=gM(a[s]))}l==="cond"&&(i.cond=BG(a[s]))}}function tH(n,e){if(e=nH(e),Array.isArray(n))return n.map(i=>Fx(i,e));const t=n instanceof ArrayBuffer;if(t||n instanceof DataView){const i=t?new DataView(n):n,a=[];for(let o=0;o<i.byteLength;o+=4)a.push(Fx(i.getUint32(o),e));return a}const r=typeof n;if(r==="number"||r==="object")return Fx(n,e);throw new Error("Unexpected input to print.")}function nH(n){return Object.assign({casing:"toUpperCase",commas:!1,include$:!1,intermediate:!1,numBase:16},n)}function Fx(n,e){let t,r,i;if(typeof n=="number"){if(r=UG(n),!r)throw new Error("Unrecognized instruction");t=a8(r),i=iH(n,t.format),i.op=r}else if(typeof n=="object"){if(!n.op)throw new Error("Instruction object did not contain op");t=a8(n.op),i=n}else throw new Error(`Unexpected value ${n}`);if(!t)throw new Error("Invalid opcode");return e.intermediate?i:rH(i,t,e)}function rH(n,e,t){let r=sH(n,t);function i(o){switch(o){case"rs":case"rt":case"rd":return TG(n[o]);case"fs":case"ft":case"fd":return bG(n[o])}}const a=e.display;for(let o=0;o<a.length;o++){let s=a[o];if(s.endsWith("?")&&(s=s.replace("?",""),n[s]===void 0))continue;let l=n[s];if(l===void 0&&s!=="("&&s!==")")throw new Error(`Expected ${s} value, got undefined`);let u=t.commas;switch(s){case"rs":case"rt":case"rd":case"fs":case"ft":case"fd":r.endsWith("(")||(r+=" "),r+=oH(i(s),t);break;case"(":case")":u=!1,r.endsWith(",")&&(r=r.slice(0,-1)),r+=s;break}const d=d_(s);d&&(r.endsWith("(")||(r+=" "),d.signed&&d.bits===16&&(l=xM(l)),d.shift&&(l=l<<d.shift),r+=aH(l,t)),u&&o!==a.length-1&&!r.endsWith(",")&&(r+=",")}return r.trim()}function iH(n,e){let t={};for(let r=e.length-1;r>=0;r--){let i,a,o=e[r];if(Array.isArray(o))for(let s=o.length-1;s>=0;s--)if(a=aA(o[s]),i=n&i8(a),Ih(o[s])){if(o[s]===Xw(i.toString(2),a)){o=o[s];break}}else{o=o[s];break}else a=aA(o),i=n&i8(a);if(Ih(o)){n>>>=a;continue}t[o]=i,n>>>=a}return t}function aH(n,e){if(n===0)return n.toString(e.numBase);let t="";return n<0&&(t+="-"),e.numBase===16?t+="0x":e.numBase===8?t+="0o":e.numBase===2&&(t+="0b"),t+=K4(Math.abs(n).toString(e.numBase),e.casing),t}function oH(n,e){let t="";return e.include$&&(t+="$"),t+=K4(n,e.casing),t}function sH(n,e){const t=n.op.split(".");for(let i=0;i<t.length;i++)if(t[i]==="fmt")if(n.hasOwnProperty("fmt3"))t[i]=RG(n.fmt3);else if(n.hasOwnProperty("fmt"))t[i]=PG(n.fmt);else throw new Error("Format value not available");else if(t[i]==="cond")if(n.hasOwnProperty("cond"))t[i]=MG(n.cond);else throw new Error("Condition value not available");let r=t.join(".");return K4(r,e.casing)}function K4(n,e){switch(e){case"toLowerCase":return n.toLowerCase();case"toUpperCase":default:return n.toUpperCase()}}function A_(n){let e=n&65535,t=n>>>16;return e&32768&&(t+=1),[t,e]}function Nu(n,e){return n=n&65535,e=e&65535,e&32768&&(n-=1),(n<<16|e)&2147483647}function wM(n,e){let t=e+4;for(;n.getUint32(t)!==65011720&&t<e+8192;)t+=4;if(n.getUint32(t)===65011720)t+=8;else return null;return t-e}function lH(n,e){const t=t0(`JAL ${e}`),r=[];for(let i=0;i<n.byteLength;i+=4)n.getUint32(i)===t&&r.push(i);return r}function cH(n,e,t){const r=t0(`JAL ${t}`),i=[];for(let a=e;a<n.byteLength;a+=4){const o=n.getUint32(a);if(o===65011720)break;o===r&&i.push(a)}return i}const Vc={};Vc[Qe.MP1_USA]=[{upper:87974,lower:87978},{upper:245782,lower:245790}];Vc[Qe.MP1_JPN]=[{upper:87766,lower:87770},{upper:245554,lower:245562}];Vc[Qe.MP1_PAL]=[{upper:90358,lower:90362},{upper:251962,lower:251966}];Vc[Qe.MP2_USA]=[{upper:268006,lower:268014}];Vc[Qe.MP2_JPN]=[{upper:265610,lower:265618}];Vc[Qe.MP3_USA]=[{upper:221598,lower:221606}];Vc[Qe.MP3_JPN]=[{upper:221578,lower:221586}];let b0;function zd(n){switch(n){case 0:case 1:case 5:return 8;case 2:case 3:case 4:return 12}throw new Error(`_getFileHeaderSize(${n}) not handled`)}class dt{static getROMOffset(){const e=Tt.getDataView(),t=dt.getPatchOffsets();if(!t)return null;const r=t[0],i=e.getUint16(r.upper)<<16,a=e.getUint16(r.lower);let o=i|a;if(a&32768&&(o=o-65536),wt(`MainFS.getROMOffset -> ${At(o)}`),G0())for(let s=1;s<t.length;s++){const l=e.getUint16(t[s].upper)<<16,u=e.getUint16(t[s].lower);if(l!==i||u!==a)throw new Error(`MainFS.getROMOffset patch offset ${s} seems wrong`)}return o}static setROMOffset(e,t){const r=new DataView(t),i=dt.getPatchOffsets(),[a,o]=A_(e);for(let s=0;s<i.length;s++)r.setUint16(i[s].upper,a),r.setUint16(i[s].lower,o);wt(`MainFS.setROMOffset -> ${At(Nu(a,o))}`)}static getPatchOffsets(){return Vc[Tt.getROMGame()]}static get(e,t){return b0[e][t].decompressed}static has(e,t){return!!b0[e][t]}static read(e,t,r){const i=Tt.getROMBuffer(),a=dt.getROMOffset(),o=new DataView(i,a),s=a+o.getUint32(4*(1+e)),l=new DataView(i,s),u=s+l.getUint32(4*(1+t)),d=new DataView(i,u),h=d.getUint32(0),f=d.getUint32(4),m=u+zd(f),g=new DataView(i,m),_={compressionType:f,decompressedSize:h,decompressed:u_(f,g,h)};if(G0()&&h!==_.decompressed.byteLength)throw new Error(`MainFS Dir: ${e}, File: ${t} decompressed size mismatch`);if(r){const E=_.decompressed.compressedSize;_.compressed=i.slice(m,m+E)}return _}static write(e,t,r){let i=b0[e][t];if(!i)wt(`Adding new file to MainFS: ${e}/${t}`),b0[e][t]=i={compressionType:0};else if(r!==i.decompressed&&uM(r,i.decompressed))return;i.compressed&&(delete i.decompressedSize,delete i.compressed,i.compressionType=0),i.decompressed=r.slice(0)}static clearCache(){b0=null}static extract(){let e,t;G0()&&typeof performance<"u"&&(e=performance.now());const r=dt.getDirectoryCount();b0=new Array(r);for(let i=0;i<r;i++){const a=dt.getFileCount(i);b0[i]=new Array(a);for(let o=0;o<a;o++)b0[i][o]=dt.read(i,o,!0)}return G0()&&e&&(t=performance.now(),wt(`MainFS.extract() -> ${t-e}ms`)),b0}static extractAsync(){return new Promise(e=>{dt.extract(),e()})}static pack(e,t,r=0){const i=new DataView(e,r),a=dt.getDirectoryCount();i.setUint32(0,a);let o=4,s=4+a*4;for(let l=0;l<a;l++)i.setUint32(o,s),o+=4,s=dt._writeDir(l,i,s,t),s=xn(s,2);return s}static _writeDir(e,t,r,i){const a=dt.getFileCount(e);t.setUint32(r,a);let o=r+4,s=r+4+a*4;for(let l=0;l<a;l++)t.setUint32(o,s-r),o+=4,s=dt._writeFile(e,l,t,s,i),s=xn(s,2);return s}static _writeFile(e,t,r,i,a){const o=b0[e][t];if(o){r.setUint32(i,o.decompressedSize||o.decompressed.byteLength);const s=a?0:o.compressionType;r.setUint32(i+4,s);let l=i+8;zd(s)===12&&(r.setUint32(i+8,o.decompressedSize||o.decompressed.byteLength),l+=4);let u;return a?u=o.decompressed:u=o.compressed||o.decompressed,fr(r,u,l,0,u.byteLength),l+u.byteLength}else{r.setUint32(i,0),r.setUint32(i+4,0);let s=i+8;return zd(0)===12&&(r.setUint32(i+8,0),s+=4),s}}static getDirectoryCount(){if(b0)return b0.length;const e=Tt.getROMBuffer();return new DataView(e,dt.getROMOffset()).getUint32(0)}static getFileCount(e){if(b0&&b0[e])return b0[e].length;const t=Tt.getROMBuffer(),r=dt.getROMOffset(),i=new DataView(t,r),a=r+i.getUint32(4*(1+e));return new DataView(t,a).getUint32(0)}static getByteLength(e){const t=b0.length;let r=0;r+=4,r+=4*t;for(let i=0;i<t;i++){const a=b0[i].length;r+=4,r+=4*a;for(let o=0;o<a;o++){const s=b0[i][o];s?(r+=zd(e?0:s.compressionType),s.compressed&&!e?r+=s.compressed.byteLength:r+=s.decompressed.byteLength,r=xn(r,2)):r+=zd(0)}}return r}static getCompressedSize(e,t){return b0&&b0[e][t]&&b0[e][t].compressed?b0[e][t].compressed.byteLength:0}static getFileHeaderSize(e,t){return b0&&b0[e][t]&&typeof b0[e][t].compressionType=="number"?zd(b0[e][t].compressionType):8}}const u3=Object.create(null),uH={};function l0(n,e){if(u3[n])throw new Error(`Cannot create an already existing BoardInfo ${n}.`);const t=Object.create(uH);return e&&Object.assign(t,e),u3[n]=t,t}const Tg={name:"Test Info",boardDefFile:1,bgDir:1,str:{},img:{}};let nS=null;function dH(n){const e=n.getUint32(0),t=(e&4294967040)===1213616384;if(e===3){const r=new DataView(n.buffer,8),i=n.getUint32(4);return u_(3,r,i)}if(!t)return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if(!nS){nS=new ArrayBuffer(6144);const r=new DataView(nS);for(let i=0;i<6144/2;i++)r.setUint16(i*2,1)}return nS}function AH(n,e,t){const r=Tt.getGameVersion();if(r===null)throw new Error("HVQ encode not implemented");if(r>1){const i=pM(3,new DataView(n)),a=new ArrayBuffer(i.byteLength+8),o=new DataView(a);return o.setUint32(0,3),o.setUint32(4,n.byteLength),fr(o,i,8,0,i.byteLength),a}return n}function Oh(n,e,t,r,i){const a=e*r,o=t*i,s=new ArrayBuffer(a*o),l=new DataView(s);let u,d,h,f,m,g,_,E;for(let x=0;x<o;x++){d=x%i,f=Math.floor(x/i)*e,g=d*r,E=x*a;for(let v=0;v<a;v+=4)u=v%r,h=f+Math.floor(v/r),m=g+u,_=E+v,l.setUint32(_,n[h].getUint32(m))}return s}function Y4(n,e,t,r,i){const a=e*r,o=t*i,s=[],l=[],u=e*t;for(let f=0;f<u;f++)s.push(new ArrayBuffer(r*i)),l.push(new DataView(s[f]));let d,h;for(let f=0;f<o;f++){h=Math.floor(f/i)*e;for(let m=0;m<a;m++){d=h+Math.floor(m/r);const g=m%r,E=f%i*r+g,x=f*a+m;l[d].setUint8(E,n[x])}}return s}function bp(n,e,t){const r=new ArrayBuffer(e*t*4),i=new Uint8Array(r),a=new DataView(n);let o=0;for(let s=0;s<e*t;s++){const l=a.getUint16(s*2);i[o]=((l&63488)>>>11)*8,i[o+1]=((l&1984)>>>6)*8,i[o+2]=((l&62)>>>1)*8,i[o+3]=l&1?255:0,o+=4}return r}function kh(n,e,t){const r=new ArrayBuffer(e*t*2),i=new DataView(r),a=new Uint8Array(n);let o=0;for(let s=0;s<e*t;s++){let l=a[o]/8;l<<=11;let u=a[o+1]/8;u<<=6;let d=a[o+2]/8;d<<=1;const h=a[o+3]>>>7;i.setUint16(s*2,(l|u|d|h)&65535),o+=4}return r}const Pp={};let e0,Ff;Pp[Qe.MP1_USA]=[{upper:357926,lower:357930},{upper:380946,lower:380950},{ovl:1,upper:566,lower:574},{ovl:63,upper:2774,lower:2782},{ovl:64,upper:23038,lower:23046},{ovl:65,upper:1826,lower:1834},{ovl:66,upper:14490,lower:14498},{ovl:67,upper:15970,lower:15978},{ovl:68,upper:3606,lower:3614},{ovl:69,upper:2186,lower:2194},{ovl:70,upper:10390,lower:10398},{ovl:71,upper:2230,lower:2238},{ovl:72,upper:2714,lower:2722},{ovl:73,upper:2730,lower:2738},{ovl:74,upper:5282,lower:5290},{ovl:75,upper:4494,lower:4502},{ovl:76,upper:3774,lower:3782},{ovl:77,upper:4082,lower:4090},{ovl:78,upper:4614,lower:4622},{ovl:79,upper:3822,lower:3830},{ovl:80,upper:1270,lower:1278},{ovl:81,upper:1490,lower:1498},{ovl:82,upper:6726,lower:6734},{ovl:83,upper:2370,lower:2378},{ovl:84,upper:2914,lower:2922},{ovl:85,upper:4350,lower:4358},{ovl:86,upper:1930,lower:1938},{ovl:87,upper:6294,lower:6302},{ovl:89,upper:2218,lower:2226},{ovl:90,upper:3006,lower:3014},{ovl:91,upper:3938,lower:3946},{ovl:92,upper:866,lower:874},{ovl:93,upper:2610,lower:2618},{ovl:94,upper:6042,lower:6050},{ovl:95,upper:1570,lower:1578},{ovl:96,upper:1582,lower:1590},{ovl:97,upper:21754,lower:21762},{ovl:98,upper:11426,lower:11434},{ovl:100,upper:23142,lower:23150},{ovl:101,upper:11470,lower:11478},{ovl:119,upper:10730,lower:10738},{ovl:120,upper:10614,lower:10622},{ovl:121,upper:3582,lower:3590},{ovl:123,upper:9394,lower:9398},{ovl:124,upper:5438,lower:5446},{ovl:125,upper:4842,lower:4850},{ovl:128,upper:7834,lower:7842},{ovl:130,upper:4898,lower:4906}];Pp[Qe.MP1_JPN]=[{upper:357526,lower:2},{upper:379858,lower:2},{upper:870598,lower:6},{upper:2462374,lower:6},{upper:2485734,lower:6},{upper:2488530,lower:6},{upper:2604202,lower:6},{upper:2621122,lower:6},{upper:2625478,lower:6},{upper:2628346,lower:6},{upper:2639334,lower:6},{upper:2641942,lower:6},{upper:2644794,lower:6},{upper:2647770,lower:6},{upper:2653298,lower:6},{upper:2658142,lower:6},{upper:2662286,lower:6},{upper:2666690,lower:6},{upper:2671526,lower:6},{upper:2675726,lower:6},{upper:2677334,lower:6},{upper:2679090,lower:6},{upper:2685974,lower:6},{upper:2688866,lower:6},{upper:2692082,lower:6},{upper:2696782,lower:6},{upper:2699034,lower:6},{upper:2705462,lower:6},{upper:2708010,lower:6},{upper:2711338,lower:6},{upper:2715646,lower:6},{upper:2716770,lower:6},{upper:2719490,lower:6},{upper:2725790,lower:6},{upper:2727746,lower:6},{upper:2729598,lower:6},{upper:2752006,lower:6},{upper:2770646,lower:6},{upper:2844246,lower:6},{upper:2856686,lower:6},{upper:3132114,lower:6},{upper:3143158,lower:6},{upper:3147502,lower:6},{upper:3167842,lower:2},{upper:3183310,lower:6},{upper:3197802,lower:6},{upper:3226138,lower:6},{upper:3238402,lower:6}];Pp[Qe.MP2_USA]=[{upper:347090,lower:347098},{upper:408118,lower:408126},{upper:478570,lower:478574},{ovl:63,upper:154,lower:162},{ovl:64,upper:150,lower:158},{ovl:66,upper:154,lower:162},{ovl:68,upper:154,lower:162},{ovl:70,upper:158,lower:166},{ovl:72,upper:162,lower:170},{ovl:74,upper:154,lower:162},{ovl:77,upper:3602,lower:3610},{ovl:78,upper:174,lower:182},{ovl:79,upper:166,lower:174},{ovl:80,upper:166,lower:174},{ovl:81,upper:22522,lower:22530},{ovl:82,upper:13326,lower:13334},{ovl:83,upper:154,lower:162},{ovl:84,upper:3950,lower:3958},{ovl:85,upper:158,lower:166},{ovl:98,upper:206,lower:214},{ovl:109,upper:14818,lower:14826},{ovl:110,upper:5558,lower:5566},{ovl:112,upper:7002,lower:7010},{ovl:114,upper:30,lower:38}];Pp[Qe.MP3_USA]=[{ovl:129,upper:73318,lower:73326},{ovl:129,upper:153366,lower:153374},{ovl:128,upper:77898,lower:77906},{ovl:128,upper:138886,lower:138894},{ovl:79,upper:25386,lower:25394},{ovl:80,upper:14662,lower:14670},{ovl:81,upper:6754,lower:6762},{ovl:83,upper:13170,lower:13178},{ovl:84,upper:7126,lower:7134},{ovl:98,upper:20950,lower:20958},{ovl:100,upper:14346,lower:14354},{ovl:101,upper:12106,lower:12114},{ovl:110,upper:41914,lower:41918},{ovl:113,upper:5682,lower:5690},{ovl:115,upper:298,lower:306},{ovl:116,upper:1374,lower:1382},{ovl:122,upper:10058,lower:10066},{ovl:124,upper:30842,lower:30846},{ovl:125,upper:6382,lower:6390},{ovl:125,upper:10422,lower:10430}];const $n={getROMOffset(){const n=this.getPatchOffsets();if(!n)return null;const e=n[0];if(!e)return null;const t=e.upper,r=e.lower;let i,a;if(typeof e.ovl=="number"){const s=cn.getDataView(e.ovl);i=s.getUint16(t),a=s.getUint16(r)}else{const s=Tt.getDataView();i=s.getUint16(t),a=s.getUint16(r)}const o=Nu(i,a);if(G0())for(let s=1;s<n.length;s++){const l=n[s],u=l.upper,d=l.lower;let h,f;if(typeof l.ovl=="number"){const m=cn.getDataView(l.ovl);h=m.getUint16(u),f=m.getUint16(d)}else{const m=Tt.getDataView();h=m.getUint16(u),f=m.getUint16(d)}if(h!==i||f!==a)throw new Error(`HVQFS.getROMOffset patch offset ${s} seems wrong:
          offset: ${At(o)} vs ${At(h>>>16)+At(f,"")}
          reading upper: ${At(u)}, lower: ${At(d)}`)}return o},setROMOffset(n,e){wt(`HVQFS.setROMOffset(${At(n)})`);const t=this.getPatchOffsets(),[r,i]=A_(n);for(let a=0;a<t.length;a++){const o=t[a],s=o.upper,l=o.lower;if(typeof o.ovl=="number"){const u=cn.getDataView(o.ovl);u.setUint16(s,r),u.setUint16(l,i)}else{const u=new DataView(e);u.setUint16(s,r),u.setUint16(l,i)}}wt(`HVQFS.setROMOffset -> ${At(r<<16|i)}`)},getPatchOffsets(){const n=Pp[Tt.getROMGame()];return n?n.map(e=>e.lower<10&&!e.ovl?{upper:e.upper,lower:e.upper+2+e.lower}:{upper:e.upper,lower:e.lower,ovl:e.ovl}):null},get(n,e){return e0[n][e]},read(n,e){const t=Tt.getROMBuffer(),r=this.getROMOffset(),i=new DataView(t,r),a=r+i.getUint32(4*(1+n)),o=new DataView(t,a),s=a+o.getUint32(4*(1+e)),l=a+o.getUint32(4*(1+e+1));return t.slice(s,l)},write(n,e,t){e0[n][e]=t.slice(0)},clearCache(){e0=null,Ff=null},extract(){let n,e;G0()&&typeof performance<"u"&&(n=performance.now());const t=this.getDirectoryCount();e0=new Array(t),Ff=new Array(t);for(let r=0;r<t;r++){const i=this.getHVQFileCount(r);e0[r]=new Array(i);for(let a=0;a<i;a++)e0[r][a]=this.read(r,a);this._readMetadata(r)}return G0()&&n&&(e=performance.now(),wt(`HVQFS.extract() -> ${e-n}ms`)),e0},extractAsync(){return new Promise(n=>{this.extract(),n()})},pack(n,e=0){const t=new DataView(n,e),r=this.getDirectoryCount();t.setUint32(0,r+1);let i=4,a=4+(r+1)*4;for(let o=0;o<r;o++)t.setUint32(i,a),i+=4,a=this._writeBg(o,t,a),a=xn(a,4);return t.setUint32(i,a),a},_writeBg(n,e,t){const r=this.getHVQFileCount(n);e.setUint32(t,r+1),this._writeMetadata(n);let i=t+4,a=t+4+(r+1)*4;for(let o=0;o<r;o++)e.setUint32(i,a-t),i+=4,a=this._writeFile(n,o,e,a),a=xn(a,4);return e.setUint32(i,a-t),a},_writeFile(n,e,t,r){const i=e0[n][e];return fr(t,i,r,0,i.byteLength),r+i.byteLength},_readMetadata(n){const e=new DataView(e0[n][0],0),t={tileWidth:e.getUint32(0),tileHeight:e.getUint32(4),tileCountX:e.getUint32(8),tileCountY:e.getUint32(12),fov:e.getFloat32(16),scaleFactor:e.getFloat32(20),cameraEyePosX:e.getFloat32(24),cameraEyePosZ:e.getFloat32(28),cameraEyePosY:e.getFloat32(32),lookatPointX:e.getFloat32(36),lookatPointZ:e.getFloat32(40),lookatPointY:e.getFloat32(44),cameraUpVecX:e.getFloat32(48),cameraUpVecZ:e.getFloat32(52),cameraUpVecY:e.getFloat32(56)};this._setMetadata(n,t)},_writeMetadata(n){const e=new DataView(e0[n][0],0),t=this.getMetadata(n);e.setUint32(0,t.tileWidth),e.setUint32(4,t.tileHeight),e.setUint32(8,t.tileCountX),e.setUint32(12,t.tileCountY),e.setFloat32(16,t.fov),e.setFloat32(20,t.scaleFactor),e.setFloat32(24,t.cameraEyePosX),e.setFloat32(28,t.cameraEyePosZ),e.setFloat32(32,t.cameraEyePosY),e.setFloat32(36,t.lookatPointX),e.setFloat32(40,t.lookatPointZ),e.setFloat32(44,t.lookatPointY),e.setFloat32(48,t.cameraUpVecX),e.setFloat32(52,t.cameraUpVecZ),e.setFloat32(56,t.cameraUpVecY)},_getBgDimensions(n){const e=Ff[n],t=e.tileWidth*e.tileCountX,r=e.tileHeight*e.tileCountY;return[t,r]},getMetadata(n){return Ff[n]},_setMetadata(n,e){Ff[n]=e},updateMetadata(n,e){const t=this.getMetadata(n);"tileWidth"in e&&(t.tileWidth=e.tileWidth),"tileHeight"in e&&(t.tileHeight=e.tileHeight),"tileCountX"in e&&(t.tileCountX=e.tileCountX),"tileCountY"in e&&(t.tileCountY=e.tileCountY),"fov"in e&&(t.fov=e.fov),"scaleFactor"in e&&(t.scaleFactor=e.scaleFactor),"cameraEyePosX"in e&&(t.cameraEyePosX=e.cameraEyePosX),"cameraEyePosZ"in e&&(t.cameraEyePosZ=e.cameraEyePosZ),"cameraEyePosY"in e&&(t.cameraEyePosY=e.cameraEyePosY),"lookatPointX"in e&&(t.lookatPointX=e.lookatPointX),"lookatPointZ"in e&&(t.lookatPointZ=e.lookatPointZ),"lookatPointY"in e&&(t.lookatPointY=e.lookatPointY),"cameraUpVecX"in e&&(t.cameraUpVecX=e.cameraUpVecX),"cameraUpVecZ"in e&&(t.cameraUpVecZ=e.cameraUpVecZ),"cameraUpVecY"in e&&(t.cameraUpVecY=e.cameraUpVecY),this._setMetadata(n,t)},readBackgroundImgData(n){const e=e0[n].length-1,t=this.getMetadata(n),r=t.tileWidth,i=t.tileHeight,a=t.tileCountX,o=t.tileCountY,s=r*a,l=i*o;wt(`HVQFS.readBackground, dir: ${n}, tiles: ${e}, board is ${s}x${l}`);const u=[],h=Tt.getGameVersion()===1?1:2;for(let V=h;V<e0[n].length;V++)u.push(new DataView(e0[n][V]));const m=u.map(dH).map(V=>new DataView(V)),g=[];for(let V=o-1;V>=0;V--)for(let D=0;D<a;D++)g.push(m[V*a+D]);const _=Oh(g,a,o,r*2,i),E=bp(_,s,l),x=new Uint8Array(E),C=No(s,l).createImageData(s,l);for(let V=0;V<x.byteLength;V++)C.data[V]=x[V];return C},readBackground(n){const e=this.getMetadata(n),[t,r]=this._getBgDimensions(n),i=No(t,r),a=this.readBackgroundImgData(n);return i.putImageData(a,0,0),Object.assign({},e,{width:t,height:r,src:i.canvas.toDataURL()})},writeBackground(n,e,t,r,i){const a=t/64,o=r/48,s=a*o;wt(`HVQFS.writeBackground, dir: ${n}, img is ${t}x${r}`);const d=Y4(e.data,a,o,64*4,48).map(m=>kh(m,64,48)).map(m=>AH(m)),h=[];for(let m=o-1;m>=0;m--)for(let g=0;g<a;g++)h.push(d[m*a+g]);const f=Tt.getGameVersion();if(!e0[n]){if(!i)throw new Error("Cannot write a new HVQ background without metadata");e0[n]=[],f>1?(e0[n][0]=e0[3][0],e0[n][1]=e0[3][1]):e0[n][0]=e0[0][0],this._readMetadata(n)}if(i&&this.updateMetadata(n,i),f===1)for(let m=1;m<=s;m++)e0[n][m]=h[m-1];else for(let m=2;m<=s+1;m++)e0[n][m]=h[m-2]},getDirectoryCount(){if(e0)return e0.length;const n=Tt.getROMBuffer(),e=this.getROMOffset();return e===null?0:new DataView(n,e).getUint32(0)-1},getHVQFileCount(n){if(e0&&e0[n])return e0[n].length;const e=Tt.getROMBuffer(),t=this.getROMOffset();if(t===null)return 0;const r=new DataView(e,t),i=t+r.getUint32(4*(1+n));return new DataView(e,i).getUint32(0)-1},getByteLength(){let n=0;const e=e0.length;n+=4,n+=4*(e+1);for(let t=0;t<e;t++){const r=e0[t].length;n+=4,n+=4*(r+1);for(let i=0;i<r;i++)n+=e0[t][i].byteLength,n=xn(n,4)}return n}};function o8(n,e,t,r){let i=n;i instanceof DataView||(i=new DataView(i));const a=i.byteLength*(r/t),o=new ArrayBuffer(a),s=new DataView(o);let l=0,u=0,d;const h=r/8,f="setUint"+r;for(;u<a;)if(t===8)d=i.getUint8(l),s[f](u,nu(e,d)),l+=1,u+=h;else if(t===4)d=(i.getUint8(l)&240)>>4,s[f](u,nu(e,d)),u+=h,d=i.getUint8(l)&15,s[f](u,nu(e,d)),u+=h,l+=1;else if(t===2)d=(i.getUint8(l)&192)>>6,s[f](u,nu(e,d)),u+=h,d=(i.getUint8(l)&48)>>4,s[f](u,nu(e,d)),u+=h,d=(i.getUint8(l)&12)>>2,s[f](u,nu(e,d)),u+=h,d=i.getUint8(l)&3,s[f](u,nu(e,d)),u+=h,l+=1;else throw new Error(`Cannot decode palette with bpp: ${t}`);return o}function q4(n,e,t){let r=n;r instanceof DataView||(r=new DataView(r));const i={colors:[],bpp:e},a={},o=e/8,s="getUint"+e;let l=0;for(;l<n.byteLength;){const m=r[s](l);if(a.hasOwnProperty(m.toString(16))){l+=o;continue}a[m.toString(16)]=i.colors.length,i.colors.push(m),l+=o}const u=new ArrayBuffer(n.byteLength/o*(t/8)),d=new DataView(u),h="setUint"+t;let f=0;for(l=0;f<u.byteLength;)if(t===8){const m=r[s](l),g=a[m.toString(16)];d[h](f,g),l+=o,f++}else throw new Error(`Cannot encode palette with bpp: ${t}`);return[u,i]}function nu(n,e){if(e>=n.length)throw new Error(`Invalid palette access (index ${e} of palette length ${n.length})`);return n[e]}function fH(n,e,t,r){const i=new ArrayBuffer(e*t*4),a=new Uint8Array(i),o=new DataView(n);let s=0;for(let l=0;l<e*t;l++){let u;if(r===8)u=o.getUint8(l);else if(r===4)u=o.getUint8(l/2)&(l%2?15:240),l%2===0&&(u>>=4,u=u&15),u=u/15*255;else throw new Error("bpp must be 4 or 8");a[s]=u,a[s+1]=u,a[s+2]=u,a[s+3]=255,s+=4}return i}function vu(n){const e=new DataView(n),t=e.getUint32(0);let r=e.getUint32(12);const i=e.getUint16(16),a=e.getUint8(25),o=r!==e.byteLength,s=[];if(o)for(;r!==e.byteLength;)s.push(e.getUint16(r)),r+=2;const l=[];let u=t,d=new DataView(n,u);for(let h=0;h<i;h++){const f=d.getUint32(0),m=d.getUint16(4),g=d.getUint16(6);let _;a>=8?_=a*m*g/8:_=m*g/(8/a);let E=n.slice(f,f+_);o&&(E=o8(E,s,a,16));const x={width:m,height:g};a===32?x.src=E:a===16||o?x.src=bp(E,m,g):(a===4||a===8)&&(x.src=fH(E,m,g,a)),l.push(x),u+=12,d=new DataView(n,u)}return l}function Pr(n,e,t,r){let i=hH(n,e),a,o;t&&([a,o]=q4(n[0].src,n[0].bpp,8),n[0]._bmpData=a,i+=o.colors.length*(e/t),i-=n[0].src.byteLength-a.byteLength);const s=new ArrayBuffer(i),l=new DataView(s);let u;r&&(u=new DataView(r)),l.setUint32(0,32),l.setUint32(4,44),l.setUint32(8,44),o?l.setUint32(12,i-o.colors.length*(e/t)):l.setUint32(12,i),l.setUint16(16,n.length),l.setUint16(18,0);let d=0,h=0;for(let m=0;m<n.length;m++)d+=n[m].width,h+=n[m].height;if(l.setUint16(20,d),l.setUint16(22,h),u?l.setUint8(24,u.getUint8(24)):l.setUint8(24,0),l.setUint8(25,t||e),o){l.setUint8(26,o.colors.length);const m=i-o.colors.length*(e/t);for(let g=0;g<o.colors.length;g++)l.setUint16(m+g*2,o.colors[g])}let f=32;for(let m=0;m<n.length;m++)f=pH(l,f,n[m],e,u);return s}function hH(n,e){let t=32;for(let r=0;r<n.length;r++)t+=12,n[r].bpp===e?t+=n[r].src.byteLength:n[r].bpp===32&&e===16&&(t+=n[r].src.byteLength/2);return t}function pH(n,e,t,r,i){n.setUint32(e,e+12),n.setUint16(e+=4,t.width),n.setUint16(e+=2,t.height),i?(n.setUint32(e+=2,i.getUint32(e)),e+=4):(n.setUint16(e+=2,t.width/2),n.setUint16(e+=2,t.height/2),e+=2);let a;if(t._bmpData)a=new DataView(t._bmpData);else if(t.bpp===r)a=new DataView(t.src);else if(t.bpp===32&&r===16){const o=kh(t.src,t.width,t.height);a=new DataView(o)}else throw new Error(`Cannot create ImgPack (yet) with inBpp=${t.bpp} and outBpp=${r}.`);return fr(n,a,e,0,a.byteLength),e+a.byteLength}const bg=l0("MP1_USA_DK",{name:"DK's Jungle Adventure",canOverwrite:!0,boardDefFile:69,bgDir:0,pauseBgDir:4,sceneIndex:54,mainfsEventFile:[10,422],mainfsBoardFile:[10,423],koopaSpaceInst:3412,bowserSpaceInst:3256,boosLoopFnOffset:4568,boosReadbackFnOffset:4304,starSpaceArrOffset:13088,starSpaceCount:7,toadSpaceArrOffset:[13104,13128],audioIndexOffset:3006,str:{boardSelect:652,koopaIntro:571,starComments:[286,287,288,289,290,291,292]},img:{boardSelectImg:17,pauseLogoImg:276,introLogoImg:[356,357],introLogoImgDimens:[272,112],titleScreenImg:385},onLoad:function(n){n.otherbg.largescene=$n.readBackground(bg.bgDir+1).src,n.otherbg.conversation=$n.readBackground(bg.bgDir+2).src,n.otherbg.splashscreen=$n.readBackground(bg.bgDir+6).src},onAfterOverwrite:function(){const n=cn.getDataView(98);n.setUint32(28824,3313106944),n.setUint32(28828,0),n.setUint32(28832,0);let e=[];e=e.concat(Bt._strToBytes(`You're looking for Stars?
How about this instead...`)),e.push(255),e.push(0);const t=hi(e);Bt.write(396,t),Bt.write(399,t),Bt.write(402,t)}}),Pg=l0("MP1_USA_PEACH",{name:"Peach's Birthday Cake",canOverwrite:!0,boardDefFile:70,bgDir:7,pauseBgDir:14,str:{boardSelect:653,koopaIntro:572},img:{boardSelectImg:20,pauseLogoImg:277,introLogoImg:[359],introLogoImgDimens:[284,126],titleScreenImg:382},sceneIndex:55,mainfsEventFile:[10,424],mainfsBoardFile:[10,425],eventASMStart:0,koopaSpaceInst:1984,bowserSpaceInst:2440,goombaSpaceInst:2304,onLoad:function(n){n.otherbg.largescene=$n.readBackground(Pg.bgDir+1).src,n.otherbg.conversation=$n.readBackground(Pg.bgDir+2).src,n.otherbg.splashscreen=$n.readBackground(Pg.bgDir+10).src},onAfterOverwrite:function(n){const e=dt.get(10,360),t=[{src:new ArrayBuffer(250*50*4),width:250,height:50,bpp:32}],r=Pr(t,16,0,e);dt.write(10,360,r)}}),Rg=l0("MP1_USA_YOSHI",{name:"Yoshi's Tropical Island",canOverwrite:!0,boardDefFile:71,bgDir:18,pauseBgDir:25,str:{boardSelect:654,koopaIntro:573},img:{boardSelectImg:18,pauseLogoImg:278,introLogoImg:[362],introLogoImgDimens:[270,120],titleScreenImg:383},sceneIndex:56,mainfsEventFile:[10,426],mainfsBoardFile:[10,427],onLoad:function(n){n.otherbg.largescene=$n.readBackground(Rg.bgDir+1).src,n.otherbg.conversation=$n.readBackground(Rg.bgDir+2).src,n.otherbg.splashscreen=$n.readBackground(Rg.bgDir+8).src},onAfterOverwrite:function(n){const e=dt.get(10,363),t=[{src:new ArrayBuffer(208*40*4),width:208,height:40,bpp:32}],r=Pr(t,16,0,e);dt.write(10,363,r)}}),Lg=l0("MP1_USA_WARIO",{name:"Wario's Battle Canyon",canOverwrite:!0,boardDefFile:72,bgDir:27,pauseBgDir:36,str:{boardSelect:655,koopaIntro:574},img:{boardSelectImg:19,pauseLogoImg:279,introLogoImg:[365],introLogoImgDimens:[290,114],titleScreenImg:384},sceneIndex:57,mainfsEventFile:[10,428],mainfsBoardFile:[10,429],koopaSpaceInst:3792,bowserSpaceInst:3496,boosLoopFnOffset:4508,boosReadbackFnOffset:4244,starSpaceArrOffset:12864,starSpaceCount:7,toadSpaceArrOffset:[12880,12912],onLoad:function(n){n.otherbg.largescene=$n.readBackground(Lg.bgDir+1).src,n.otherbg.conversation=$n.readBackground(Lg.bgDir+2).src,n.otherbg.splashscreen=$n.readBackground(Lg.bgDir+11).src},onAfterOverwrite:function(n){const e=dt.get(10,366),t=[{src:new ArrayBuffer(280*76*4),width:280,height:76,bpp:32}],r=Pr(t,16,0,e);dt.write(10,366,r)}}),zo=l0("MP1_USA_LUIGI");zo.name="Luigi's Engine Room";zo.boardDefFile=73;zo.bgDir=39;zo.str={boardSelect:656,koopaIntro:575};zo.img={boardSelectImg:21,pauseLogoImg:280,introLogoImg:[368],introLogoImgDimens:[276,128],titleScreenImg:381};zo.sceneIndex=58;zo.eventASMStart=0;zo.starSpaceArrOffset=12128;zo.starSpaceCount=7;zo.toadSpaceArrOffset=[12144,12276];const Dc=l0("MP1_USA_MARIO");Dc.name="Mario's Rainbow Castle";Dc.boardDefFile=74;Dc.bgDir=47;Dc.str={boardSelect:657,koopaIntro:576};Dc.img={boardSelectImg:22,pauseLogoImg:281,introLogoImg:[371],introLogoImgDimens:[270,96],titleScreenImg:380};Dc.sceneIndex=59;Dc.eventASMStart=0;const Wo=l0("MP1_USA_BOWSER");Wo.name="Bowser's Magma Mountain";Wo.boardDefFile=75;Wo.bgDir=56;Wo.str={boardSelect:658,koopaIntro:577};Wo.img={boardSelectImg:23,pauseLogoImg:282,introLogoImg:[374],introLogoImgDimens:[270,106]};Wo.sceneIndex=60;Wo.eventASMStart=0;Wo.starSpaceArrOffset=8856;Wo.starSpaceCount=7;Wo.toadSpaceArrOffset=[8872,8904];const uo=l0("MP1_USA_ETERNALSTAR");uo.name="Eternal Star";uo.boardDefFile=76;uo.bgDir=68;uo.str={boardSelect:[659,660],koopaIntro:578};uo.img={boardSelectImg:24,pauseLogoImg:283,introLogoImg:[378]};uo.sceneIndex=61;uo.eventASMStart=0;uo.bowserSpaceInst=3548;uo.starSpaceArrOffset=9712;uo.starSpaceCount=7;uo.toadSpaceArrOffset=9728;const Ao=l0("MP1_USA_TRAINING");Ao.name="Training";Ao.boardDefFile=77;Ao.bgDir=77;Ao.str={};Ao.img={};Ao.sceneIndex=62;Ao.eventASMStart=0;Ao.bowserSpaceInst=812;Ao.toadSpaceInst=364;Ao.koopaSpaceInst=500;Ao.booSpaceInst=676;const EA=l0("MP1_USA_STADIUM");EA.name="Mini-Game Stadium";EA.boardDefFile=83;EA.bgDir=99;EA.str={};EA.img={};const Fc=l0("MP1_USA_ISLAND");Fc.name="Mini-Game Island";Fc.boardDefFile=78;Fc.bgDir=79;Fc.str={};Fc.img={};Fc.sceneIndex=114;Fc.eventASMStart=0;function mH(){return[bg,Pg,Rg,Lg,zo,Dc,Wo,uo,Ao,Fc,EA]}const Tc=l0("MP1_JPN_DK");Tc.name="DK's Jungle Adventure";Tc.boardDefFile=69;Tc.bgDir=0;Tc.str={boardSelect:652,koopaIntro:571,starComments:[286,287,288,289,290,291,292]};Tc.img={boardSelectImg:17,pauseLogoImg:276,introLogoImg:[356,357],titleScreenImg:385};Tc.eventASMStart=0;Tc.eventASMEnd=0;function SH(){return[Tc]}const yM=l0("MP2_WESTERN",{name:"Western Land",canOverwrite:!0,boardDefFile:64,bgDir:2,animBgSet:0,costumeType:d0.WESTERN,str:{boardSelect:197,boardNames:[190,210],boardGreeting:[1248,1249],boardWinner:707,boardPlayCount:1327},img:{introLogoImg:406,pauseLogoImg:380,boardSelectImg:30,boardSelectIconCoords:[39,20],boardSelectIconMask:20},mainfsEventFile:[10,682],mainfsBoardFile:[10,683],sceneIndex:62,eventASMStart:54096,eventASMEnd:60132,spaceEventTables:[{upper:13292,lower:13300},{upper:13304,lower:13312,primary:!0},{upper:13316,lower:13324}],starSpaceArrOffset:[61828,61940],starSpaceCount:7,toadSpaceArrOffset:[61844,62020],bankArrOffset:[62344],bankCoinArrOffset:[62060],bankCount:2,itemShopArrOffset:[62348],itemShopCount:1,booArrOffset:[62056],booCount:2,audioIndexOffset:13226,onLoad:function(n){n.otherbg.largescene=$n.readBackground(yM.bgDir+2).src},onAfterOverwrite:function(n){cn.getDataView(82).setUint16(11790,81);let t=[];t.push(11),t=t.concat(Bt._strToBytes("Don't listen to Toad!")),t.push(10),t=t.concat(Bt._strToBytes("I've got the results. Follow me!")),t.push(0),Bt.write(697,hi(t));let r=dt.get(10,410),i=[{src:new ArrayBuffer(144*128*4),width:144,height:128,bpp:32}],a=Pr(i,16,0,r);dt.write(10,410,a),r=dt.get(10,411),i=[{src:new ArrayBuffer(32*16*4),width:32,height:16,bpp:32}],a=Pr(i,16,0,r),dt.write(10,411,a),r=dt.get(10,412),i=[{src:new ArrayBuffer(64*64*4),width:64,height:64,bpp:32}],a=Pr(i,16,0,r),dt.write(10,412,a);let o=dt.get(10,394),s=new DataView(o);s.setUint16(508,0),s.setUint16(4358,0),dt.write(10,394,o),o=dt.get(10,395),s=new DataView(o),s.setUint16(516,0),s.setUint16(1558,0),dt.write(10,395,o)}}),_s=l0("MP2_PIRATE");_s.name="Pirate Land";_s.boardDefFile=65;_s.bgDir=10;_s.animBgSet=1;_s.costumeType=d0.PIRATE;_s.str={boardSelect:198};_s.img={introLogoImg:422,pauseLogoImg:381,boardSelectImg:31,boardSelectIconCoords:[35,61]};_s.arrowRotStartOffset=0;_s.arrowRotEndOffset=0;const fo=l0("MP2_HORROR");fo.name="Horror Land";fo.boardDefFile=66;fo.bgDir=21;fo.animBgSet=2;fo.costumeType=d0.HORROR;fo.str={boardSelect:201};fo.img={introLogoImg:581,pauseLogoImg:382,boardSelectImg:32,boardSelectIconCoords:[133,60]};fo.sceneIndex=67;fo.eventASMStart=0;fo.eventASMEnd=0;fo.spaceEventTables=[{upper:14420,lower:14428},{upper:14432,lower:14440},{upper:14488,lower:14496},{upper:14500,lower:14504}];const bc=l0("MP2_SPACE");bc.name="Space Land";bc.boardDefFile=67;bc.bgDir=24;bc.animBgSet=3;bc.costumeType=d0.SPACE;bc.str={boardSelect:199,boardNames:[193,212]};bc.img={introLogoImg:500,pauseLogoImg:383,boardSelectImg:33,boardSelectIconCoords:[93,10]};const Ju=l0("MP2_MYSTERY");Ju.name="Mystery Land";Ju.boardDefFile=68;Ju.bgDir=16;Ju.costumeType=d0.MYSTERY;Ju.str={boardSelect:200};Ju.img={introLogoImg:502,pauseLogoImg:384,boardSelectImg:34,boardSelectIconCoords:[139,19]};const Pc=l0("MP2_BOWSER");Pc.name="Bowser Land";Pc.boardDefFile=69;Pc.bgDir=37;Pc.animBgSet=4;Pc.costumeType=d0.NORMAL;Pc.str={boardSelect:202};Pc.img={introLogoImg:547,pauseLogoImg:385,boardSelectImg:35};function gH(){return[yM,_s,fo,bc,Ju,Pc]}const EM=l0("MP3_CHILLY",{name:"Chilly Waters",canOverwrite:!0,boardDefFile:570,bgDir:3,pauseBgDir:5,str:{boardSelect:[[21,30],[26,17]],boardGreeting:[24,12],boardGreetingDuel:[24,0],boardNames:[[49,39],[83,43]]},img:{boardSelectImg:72,splashLogoImg:22,splashLogoTextImg:28,pauseLogoImg:125,statsLogoImg:[19,105],gateImg:354},sceneIndex:72,mainfsEventFile:[19,618],mainfsBoardFile:[19,619],eventASMStart:84720,eventASMEnd:93164,spaceEventTables:[{upper:9896,lower:9904},{upper:9908,lower:9916},{upper:9932,lower:9940}],starSpaceArrOffset:[96528,96640],starSpaceCount:8,toadSpaceArrOffset:[96544,96732],bankArrOffset:[97124],bankCoinArrOffset:[96768],bankCount:2,itemShopArrOffset:[97128],itemShopCount:2,booArrOffset:[96764],booCount:1,gateNeighborsOffset:[96724],gateArrOffset:[96892],gateCount:2,arrowRotStartOffset:9112,arrowRotEndOffset:9280,audioIndexOffset:9858,onLoad:function(n){n.otherbg.largescene=$n.readBackground(EM.bgDir+1).src}}),CM=l0("MP3_BLOOBER",{name:"Deep Bloober Sea",canOverwrite:!0,boardDefFile:571,bgDir:6,pauseBgDir:8,str:{boardSelect:[[21,31],[26,18]],boardGreeting:[24,13],boardGreetingDuel:[24,2],boardNames:[[49,40],[83,44]]},img:{boardSelectImg:73,splashLogoImg:23,splashLogoTextImg:29,pauseLogoImg:126,statsLogoImg:[19,106],gateImg:359},sceneIndex:73,mainfsEventFile:[19,620],mainfsBoardFile:[19,621],onLoad:function(n){n.otherbg.largescene=$n.readBackground(CM.bgDir+1).src}}),VM=l0("MP3_SPINY",{name:"Spiny Desert",canOverwrite:!0,boardDefFile:572,bgDir:9,pauseBgDir:11,str:{boardSelect:[[21,32],[26,19]],boardGreeting:[24,14],boardGreetingDuel:[24,4],boardNames:[[49,41],[83,45]]},img:{boardSelectImg:74,splashLogoImg:24,splashLogoTextImg:30,pauseLogoImg:127,statsLogoImg:[19,107],gateImg:366},sceneIndex:74,mainfsEventFile:[19,622],mainfsBoardFile:[19,623],onLoad:function(n){n.otherbg.largescene=$n.readBackground(VM.bgDir+1).src}}),DM=l0("MP3_WOODY",{name:"Woody Woods",canOverwrite:!0,boardDefFile:573,bgDir:12,pauseBgDir:14,str:{boardSelect:[[21,33],[26,20]],boardGreeting:[24,15],boardGreetingDuel:[24,6],boardNames:[[49,42],[83,46]]},img:{boardSelectImg:75,splashLogoImg:25,splashLogoTextImg:31,pauseLogoImg:128,statsLogoImg:[19,108],gateImg:373},sceneIndex:75,mainfsEventFile:[19,624],mainfsBoardFile:[19,625],onLoad:function(n){n.otherbg.largescene=$n.readBackground(DM.bgDir+1).src}}),FM=l0("MP3_CAVERN",{name:"Creepy Cavern",canOverwrite:!0,boardDefFile:574,bgDir:15,pauseBgDir:17,str:{boardSelect:[[21,34],[26,21]],boardGreeting:[24,16],boardGreetingDuel:[24,8],boardNames:[[49,43],[83,47]]},img:{boardSelectImg:76,splashLogoImg:26,splashLogoTextImg:32,pauseLogoImg:129,statsLogoImg:[19,109],gateImg:383},sceneIndex:76,mainfsEventFile:[19,626],mainfsBoardFile:[19,627],onLoad:function(n){n.otherbg.largescene=$n.readBackground(FM.bgDir+1).src}}),TM=l0("MP3_WALUIGI",{name:"Waluigi's Land",canOverwrite:!0,boardDefFile:575,bgDir:18,pauseBgDir:20,str:{boardSelect:[[21,35],[26,22]],boardGreeting:[24,17],boardGreetingDuel:[24,10],boardNames:[[49,44],[83,48]]},img:{boardSelectImg:77,splashLogoImg:27,splashLogoTextImg:33,pauseLogoImg:130,statsLogoImg:[19,110],gateImg:387},sceneIndex:77,mainfsEventFile:[19,628],mainfsBoardFile:[19,629],onLoad:function(n){n.otherbg.largescene=$n.readBackground(TM.bgDir+1).src}}),ul=l0("MP3U_GATEGUY");ul.name="Gate Guy";ul.type=zn.DUEL;ul.boardDefFile=577;ul.bgDir=24;ul.img={boardSelectImg:81,splashLogoImg:34,splashLogoTextImg:40,miniMapWithBg:279,miniMapDots:280};ul.sceneIndex=91;ul.spaceEventTables=[{upper:33052,lower:33060},{upper:33064,lower:33072}];ul.onAfterOverwrite=function(n){};const CA=l0("MP3U_ARROWHEAD");CA.name="Arrowhead";CA.type=zn.DUEL;CA.boardDefFile=578;CA.bgDir=25;CA.img={boardSelectImg:82,splashLogoImg:35,splashLogoTextImg:41,miniMapWithBg:310,miniMapDots:311};const VA=l0("MP3U_PIPESQUEAK");VA.name="Pipesqueak";VA.type=zn.DUEL;VA.boardDefFile=579;VA.bgDir=26;VA.img={boardSelectImg:83,splashLogoImg:36,splashLogoTextImg:42,miniMapWithBg:312,miniMapDots:313};const DA=l0("MP3U_BLOWHARD");DA.name="Blowhard";DA.type=zn.DUEL;DA.boardDefFile=580;DA.bgDir=27;DA.img={boardSelectImg:84,splashLogoImg:37,splashLogoTextImg:43,miniMapWithBg:315,miniMapDots:316};const FA=l0("MP3U_MRMOVER");FA.name="Mr. Mover";FA.type=zn.DUEL;FA.boardDefFile=581;FA.bgDir=28;FA.img={boardSelectImg:85,splashLogoImg:38,splashLogoTextImg:44,miniMapWithBg:317,miniMapDots:318};const TA=l0("MP3U_BACKTRACK");TA.name="Backtrack";TA.type=zn.DUEL;TA.boardDefFile=582;TA.bgDir=29;TA.img={boardSelectImg:86,splashLogoImg:39,splashLogoTextImg:45,miniMapWithBg:319,miniMapDots:320};function _H(){return[EM,CM,VM,DM,FM,TM,ul,CA,VA,DA,FA,TA]}function Q4(n){switch(n){case Qe.MP1_USA:return mH();case Qe.MP1_JPN:return SH();case Qe.MP2_USA:return gH();case Qe.MP3_USA:return _H()}return wt("Missing boardinfo for "+n),null}function xH(n,e){return Q4(n)[e]}function f_(){return 8}class bM{constructor(e,t,r){this.__type="ALEnv",this.__smallVolumes=r,this._extract(e,t)}_extract(e,t){this.attackTime=e.getInt32(t),this.decayTime=e.getInt32(t+4),this.releaseTime=e.getInt32(t+8),this.__smallVolumes?(this.attackVolume=e.getUint8(t+12),this.decayVolume=e.getUint8(t+13)):(this.attackVolume=e.getInt16(t+12),this.decayVolume=e.getInt16(t+14))}}class vH{constructor(e,t){this.__type="ALKey",this._extract(e,t)}_extract(e,t){this.velocityMin=e.getUint8(t),this.velocityMax=e.getUint8(t+1),this.keyMin=e.getUint8(t+2),this.keyMax=e.getUint8(t+3),this.keyBase=e.getUint8(t+4),this.detune=e.getInt8(t+5)}}class wH{constructor(e,t){this.__type="ALADPCMLoop",this._extract(e,t)}_extract(e,t){this.start=e.getUint32(t),this.end=e.getUint32(t+4),this.count=e.getUint32(t+8),this.state=[];for(let r=0;r<16;r++)this.state[r]=e.getUint16(t+12+r*2)}}class yH{constructor(e,t){this.__type="ALADPCMBook",this._extract(e,t)}_extract(e,t){this.order=e.getInt32(t),this.npredictors=e.getInt32(t+4);const r=this.order*this.npredictors*8;this.predictors=new Array(r);for(let i=0;i<r;i++)this.predictors[i]=e.getInt16(t+8+i*2)}}class EH{constructor(e,t){this.__type="ALADPCMWaveInfo",this.loop=null,this.book=null,this._extract(e,t)}_extract(e,t){const r=e.getUint32(t);r!==0&&(this.loop=new wH(e,r));const i=e.getUint32(t+4);i!==0&&(this.book=new yH(e,i))}}class CH{constructor(e,t){this.__type="ALRAWWaveInfo",this._extract(e,t)}_extract(e,t){this.start=e.getUint32(t),this.end=e.getUint32(t+4),this.count=e.getUint32(t+8)}}class VH{constructor(e,t){this.__type="ALRAWWaveInfo",this.loop=null,this._extract(e,t)}_extract(e,t){const r=e.getUint32(t);r!==0&&(this.loop=new CH(e,t+r))}}var Kw=(n=>(n[n.AL_ADPCM_WAVE=0]="AL_ADPCM_WAVE",n[n.AL_RAW16_WAVE=1]="AL_RAW16_WAVE",n[n.AL_VOX_WAVE=2]="AL_VOX_WAVE",n[n.AL_MUSYX_WAVE=3]="AL_MUSYX_WAVE",n))(Kw||{});class PM{constructor(e,t){this.__type="ALWave",this._extract(e,t)}_extract(e,t){if(this.waveBase=e.getUint32(t),this.waveLen=e.getUint32(t+4),this.type=e.getUint8(t+8),this.flags=e.getUint8(t+9),this.type===0)this.adpcmWave=new EH(e,t+12);else if(this.type===1)this.rawWave=new VH(e,t+12);else throw new Error(`Unrecognized ALWaveTable type ${this.type}`)}}class DH{constructor(e,t){this.__type="ALSound",this._extract(e,t)}_extract(e,t){const r=e.getUint32(t);this.env=new bM(e,r);const i=e.getUint32(t+4);this.keymap=new vH(e,i);const a=e.getUint32(t+8);this.wave=new PM(e,a),this.samplePan=e.getUint8(t+12),this.sampleVolume=e.getUint8(t+13),this.flags=e.getUint8(t+14)}}class FH{constructor(e,t){this.__type="ALInst",this.sounds=[],this._extract(e,t)}_extract(e,t){this.volume=e.getUint8(t),this.pan=e.getUint8(t+1),this.priority=e.getUint8(t+2),this.flags=e.getUint8(t+3),this.tremType=e.getUint8(t+4),this.tremRate=e.getUint8(t+5),this.tremDepth=e.getUint8(t+6),this.tremDelay=e.getUint8(t+7),this.vibType=e.getUint8(t+8),this.vibRate=e.getUint8(t+9),this.vibDepth=e.getUint8(t+10),this.vibDelay=e.getUint8(t+11),this.bendRange=e.getInt16(t+12);const r=e.getInt16(t+14);for(let i=0;i<r;i++){const a=e.getUint32(t+16+i*4);this.sounds.push(new DH(e,a))}}}class TH{constructor(e,t){this.__type="ALBank",this.instruments=[],this._extract(e,t)}_extract(e,t){if(this.flags=e.getUint8(t+2),this.pad=e.getUint8(t+3),this.sampleRate=e.getInt32(t+4),e.getUint32(t+8))throw new Error(`Need to parse percussion at bank offset 0x${(e.byteOffset+t).toString(16)}`);const i=e.getUint16(t);for(let a=0;a<i;a++){const o=e.getUint32(t+12+a*4);this.instruments.push(new FH(e,o))}}}class RM{constructor(e){if(this.__type="B1",this.banks=[],e.getUint16(0)!==16945)throw new Error("B1 constructor encountered non-B1 structure");this._extract(e)}_extract(e){const t=e.getUint16(2);for(let r=0;r<t;r++){const i=e.getUint32(4+r*4);this.banks.push(new TH(e,i))}}}const d3=21298;class bH{constructor(e){this.__type="S2",this.midis=[],this._extract(e)}_extract(e){if(e.getUint16(0)!==d3)throw new Error("S2 constructor encountered non-S2 structure");const t=e.getUint16(2),r=4+t*8;for(let u=0;u<t;u++){const d=e.getUint32(4+u*4*2),h=e.getUint32(8+u*4*2),f=e.byteOffset+d;this.midis.push({buffer:e.buffer.slice(f,f+h),soundbankIndex:e.getUint8(r+u*16)})}const i=e.getUint32(r+12),a=e.getUint32(4);this.tbl=e.buffer.slice(e.byteOffset+i,e.byteOffset+a);const o=e.getUint32(r+4),s=e.getUint32(r+8),l=new DataView(e.buffer,e.byteOffset+o);this.soundbanks=new RM(l),this._rawB1=e.buffer.slice(e.byteOffset+o,e.byteOffset+o+s)}pack(e,t=0){const r=new DataView(e,t);let i=0;r.setUint16(0,d3),r.setUint16(2,this.midis.length),i+=4;const a=this.midis.length*8,o=this.midis.length*16+4,s=xn(4+a+o,16);let l=s+this._rawB1.byteLength+this.tbl.byteLength;l=xn(l,8);for(const u of this.midis){r.setUint32(i,l);const d=xn(u.buffer.byteLength,8);r.setUint32(i+4,d),i+=8,l+=d}for(const u of this.midis)r.setInt8(i,u.soundbankIndex),r.setInt8(i+1,127),r.setUint8(i+2,255),r.setUint8(i+3,255),r.setUint32(i+4,s),r.setUint32(i+8,this._rawB1.byteLength),r.setUint32(i+12,s+this._rawB1.byteLength),i+=16;r.setUint32(i,4294967295),i+=4,i=xn(i,16),fr(r,this._rawB1,i,0,this._rawB1.byteLength),i+=xn(this._rawB1.byteLength,8),fr(r,this.tbl,i,0,this.tbl.byteLength),i+=xn(this.tbl.byteLength,8);for(const u of this.midis)fr(r,u.buffer,i,0,u.buffer.byteLength),i+=xn(u.buffer.byteLength,8);return i=xn(i,16),G0()&&Bn(this.getByteLength()===i),i}getByteLength(){let e=0;e+=2,e+=2,e+=this.midis.length*8,e+=this.midis.length*16+4,e=xn(e,16),e+=xn(this._rawB1.byteLength,8),e+=xn(this.tbl.byteLength,8);for(const t of this.midis)e+=xn(t.buffer.byteLength,8);return e=xn(e,16),e}}const A3=1296188976,Tf=64;class PH{constructor(e){this.__type="MBF0",this.midis=[],this._extract(e)}_extract(e){if(e.getUint32(0)!==A3)throw new Error("MBF0 constructor encountered non-MBF0 structure");const t=e.getUint32(4);this._headerContents=new ArrayBuffer(56),fr(this._headerContents,e,0,8,this._headerContents.byteLength);const r=Tf,i=new Map;for(let h=0;h<t;h++){const f=r+h*16,m=e.getUint32(f+8),g=e.getUint32(f+12);let _;i.has(m)?_=i.get(m):(_=e.buffer.slice(e.byteOffset+m,e.byteOffset+m+g),i.set(m,_)),this.midis.push({buffer:_,mystery0:e.getUint8(f),mystery1:e.getUint8(f+1),mystery4:e.getUint32(f+4),soundbankIndex:e.getUint8(f+2)}),Bn(e.getUint8(f+3)===0),Bn(e.getUint32(f+4)===117440512||e.getUint32(f+4)===0)}const a=Tf+16*t,o=e.getUint32(a),s=e.getUint32(a+4),l=e.getUint32(a+8),u=l+e.getUint32(a+12);this.tbl=e.buffer.slice(e.byteOffset+l,e.byteOffset+u);const d=new DataView(e.buffer,e.byteOffset+o,s);this.soundbanks=new RM(d),this._soundbackBuffer=e.buffer.slice(e.byteOffset+o,e.byteOffset+o+s)}pack(e,t=0){const r=new DataView(e,t);let i=0;r.setUint32(0,A3),r.setUint32(4,this.midis.length),fr(r,this._headerContents,8,0,this._headerContents.byteLength),i+=Tf,i+=16*this.midis.length,i+=16;const a=new Map;for(const f of this.midis)a.has(f.buffer)||(Bn(i%8===0),a.set(f.buffer,i),fr(r,f.buffer,i,0,f.buffer.byteLength),i+=xn(f.buffer.byteLength,8));i=xn(i,16);const o=i,s=this._soundbackBuffer.byteLength;fr(r,this._soundbackBuffer,i,0,s),i+=xn(s,8);const l=i,u=this.tbl.byteLength;fr(r,this.tbl,i,0,u),i+=xn(u,8);const d=xn(i,16);i=Tf;for(const f of this.midis)r.setUint8(i,f.mystery0||0),r.setUint8(i+1,typeof f.mystery1=="number"?f.mystery1:111),r.setUint8(i+2,f.soundbankIndex),r.setUint8(i+3,0),r.setUint32(i+4,typeof f.mystery4=="number"?f.mystery4:117440512),r.setUint32(i+8,a.get(f.buffer)),r.setUint32(i+12,f.buffer.byteLength),i+=16;r.setUint32(i,o),r.setUint32(i+4,s),r.setUint32(i+8,l),r.setUint32(i+12,u);const h=d;return G0()&&Bn(this.getByteLength()===h),h}getByteLength(){let e=0;e+=4,e+=4,e+=this._headerContents.byteLength,Bn(e===Tf),e+=this.midis.length*16,e+=16,Bn(e%16===0);const t=new Set;for(const r of this.midis)t.has(r.buffer)||(t.add(r.buffer),e+=xn(r.buffer.byteLength,8));return e=xn(e,16),Bn(this._soundbackBuffer.byteLength%8===0),e+=this._soundbackBuffer.byteLength,Bn(this.tbl.byteLength%8===0),e+=this.tbl.byteLength,e=xn(e,16),e}}class LM{constructor(e,t){this.__type="ALSoundSimple",this._extract(e,t)}_extract(e,t){const r=e.getUint32(t);this.env=new bM(e,r),this.sampleRate=e.getUint32(t+4);const i=e.getUint32(t+8);this.wave=new PM(e,i),this.samplePan=e.getUint8(t+12),this.sampleVolume=e.getUint8(t+13),this.flags=e.getUint8(t+14)}}class RH{constructor(e){if(this.__type="SBF0",this.sounds=[],e.getUint32(0)!==1396852272)throw new Error("SBF0 constructor encountered non-SBF0 structure");this._extract(e)}_extract(e){const t=e.getUint32(68),r=116;if(t===0)throw new Error("Does soundCount === 0?");const i=new DataView(e.buffer,e.byteOffset+r);for(let s=0;s<t;s++)this.sounds.push(new LM(i,s*16));const a=e.getUint32(84),o=a+e.getUint32(88);if(this.tbl=e.buffer.slice(e.byteOffset+a,e.byteOffset+o),G0()){let s="";const l=e.getUint32(4),u=o;for(let d=0;d<l;d++){const h=e.getUint32(u+d*4),f=e.getUint8(u+h),m=u+h+8;for(let g=0;g<f;g++){const _=e.getUint32(m+g*8+4);let E;const x=e.getUint8(u+_);switch(x){case 146:case 147:E=e.getUint16(u+_+1);break;case 18:case 19:E=e.getUint16(u+_+2);break;case 1:case 160:continue;default:throw new Error("Unrecongized soundFxInfoType "+At(x)+" at "+At(e.byteOffset+u+_))}s+=`
${At(d)}: ${At(E)}`}}wt(s)}}}class LH{constructor(e){if(this.__type="T3",this.sounds=[],e.getUint16(0)!==21555)throw new Error("T3 constructor encountered non-T3 structure");this._extract(e)}_extract(e){const t=e.getUint16(2),r=[];for(let u=0;u<t;u++)r.push({rawSound:e.getUint16(4+u*8+4)&4095,sampleRate:e.getUint16(4+u*8+6)});const i=e.getUint32(4+t*8+4),a=4+t*8+44,o=new DataView(e.buffer,e.byteOffset+a);for(let u=0;u<i;u++){const d=new LM(o,u*16);for(const h of r)if(h.rawSound===u){d.sampleRate=h.sampleRate;break}d.sampleRate||(wt(`Unknown sample rate for raw sound ${u}, guessing...`),d.sampleRate=22050),this.sounds.push(d)}const s=e.getUint32(4+t*8+12),l=s+e.getUint32(4+t*8+20);this.tbl=e.buffer.slice(e.byteOffset+s,e.byteOffset+l)}}class BH{constructor(e){if(this.__type="FXD0",e.getUint32(0)!==1180189744)throw new Error("FXD0 constructor encountered non-FXD0 structure");this._extract(e)}_extract(e){this.hunks=[];const t=e.getUint32(4);let r=16;for(let i=0;i<t;i++,r+=520){const a=r+520;this.hunks.push(e.buffer.slice(e.byteOffset+r,e.byteOffset+a))}}}let vo,P0;const MH={[Qe.MP1_USA]:[{type:"S2",offsets:[{upper:399174,lower:399178},{ovl:110,upper:3682,lower:3686}]},{type:"S2",offsets:[{upper:110378,lower:110382},{upper:399182,lower:399186},{upper:399230,lower:399234},{ovl:110,upper:3690,lower:3694},{ovl:110,upper:3730,lower:3734}]},{type:"T3",byteLength:3692928,offsets:[{upper:110386,lower:110390},{upper:399150,lower:399154},{upper:399238,lower:399242},{ovl:110,upper:3662,lower:3666},{ovl:110,upper:3738,lower:3742}]},{type:"T3",byteLength:1263616,offsets:[{upper:110350,lower:110354},{upper:399202,lower:399206},{ovl:110,upper:3706,lower:3710}]},{type:"FXD0",byteLength:2096,offsets:[{upper:110426,lower:110430}]},{type:"Pointer",byteLength:0,offsets:[{upper:110438,lower:110442}]}],[Qe.MP1_JPN]:[],[Qe.MP1_PAL]:[],[Qe.MP2_USA]:[{type:"MBF0",offsets:[{upper:119618,lower:119622},{upper:502254,lower:502258},{upper:502290,lower:502294}]},{type:"SBF0",byteLength:3888e3,offsets:[{upper:502266,lower:502270}]},{type:"SBF0",byteLength:1487184,offsets:[{upper:119630,lower:119634},{upper:502302,lower:502306}]},{type:"FXD0",byteLength:2624,offsets:[{upper:119682,lower:119686}]}],[Qe.MP2_JPN]:[],[Qe.MP2_PAL]:[],[Qe.MP3_USA]:[{type:"MBF0",offsets:[{upper:62058,lower:62062},{upper:311026,lower:311030}]},{type:"SBF0",byteLength:4876240,offsets:[{upper:62070,lower:62074},{upper:311038,lower:311042}]},{type:"FXD0",byteLength:2624,offsets:[{upper:62110,lower:62114}]}],[Qe.MP3_JPN]:[],[Qe.MP3_PAL]:[]},Rr={getROMOffset(n=0){const e=this.getPatchInfo();if(!e||!e.length)return null;const t=e[n];if(!t)return null;const r=t.offsets[0],i=r.upper,a=r.lower;let o,s;if(typeof r.ovl=="number"){const u=cn.getDataView(r.ovl);o=u.getUint16(i),s=u.getUint16(a)}else{const u=Tt.getDataView();o=u.getUint16(i),s=u.getUint16(a)}const l=Nu(o,s);return wt(`Audio.getROMOffset -> ${At(l)}`),G0()&&t.offsets.forEach((u,d)=>{const h=u.upper,f=u.lower;let m,g;if(typeof u.ovl=="number"){const E=cn.getDataView(u.ovl);m=E.getUint16(h),g=E.getUint16(f)}else{const E=Tt.getDataView();m=E.getUint16(h),g=E.getUint16(f)}const _=Nu(m,g);if(_!==l)throw new Error(`AudioFS.getROMOffset patch offset ${n}/${d} seems wrong:
          offset: ${At(l)} vs ${At(_)}
          reading upper: ${At(h)}, lower: ${At(f)}`)}),l},setROMOffset(n,e){wt(`Audio.setROMOffset(${At(n)})`);const t=this.getPatchInfo();let r=n;for(let i=0;i<t.length;i++){const a=t[i],[o,s]=A_(r);for(let l=0;l<a.offsets.length;l++){const u=a.offsets[l],d=u.upper,h=u.lower;if(typeof u.ovl=="number"){const f=cn.getDataView(u.ovl);f.setUint16(d,o),f.setUint16(h,s)}else{const f=new DataView(e);f.setUint16(d,o),f.setUint16(h,s)}}switch(a.type){case"T3":case"SBF0":case"FXD0":Bn(typeof a.byteLength=="number"),Bn(a.byteLength%16===0),r+=a.byteLength;break;case"S2":Bn(!!P0[i]),r+=P0[i].getByteLength();break;case"MBF0":Bn(!!P0[i]),r+=P0[i].getByteLength();break;case"Pointer":break;default:throw new Error("Unhandled audio subsection type: "+a.type)}}},getPatchInfo(){return MH[Tt.getROMGame()]},read(n){throw new Error("audio.read not implemented")},write(n,e){throw new Error("audio.write not implemented")},getSequenceTableCount(){let n=0;for(let e=0;e<P0.length;e++){const t=P0[e];t&&"midis"in t&&n++}return n},getSequenceTable(n){if(!P0)return null;let e=-1;for(let t=0;t<P0.length;t++){const r=P0[t];if(r&&"midis"in r&&(e++,e===n))return r}return null},getSoundTableCount(){let n=0;for(let e=0;e<P0.length;e++){const t=P0[e];t&&"sounds"in t&&n++}return n},getSoundTable(n){if(!P0)return null;let e=-1;for(let t=0;t<P0.length;t++){const r=P0[t];if(r&&"sounds"in r&&(e++,e===n))return r}return null},clearCache(){vo=null,P0=null},extract(){const n=Tt.getROMBuffer();if(this.getROMOffset()===null)return;const t=this.getPatchInfo();vo=new Array(t.length),P0=new Array(t.length);for(let r=0;r<t.length;r++){const i=t[r];switch(i.type){case"S2":{const a=this.getROMOffset(r),o=P0[r]=new bH(Tt.getDataView(a));vo[r]=n.slice(a,a+o.getByteLength())}break;case"T3":{Bn(typeof i.byteLength=="number");const a=this.getROMOffset(r);vo[r]=n.slice(a,a+i.byteLength),P0[r]=new LH(Tt.getDataView(a))}break;case"MBF0":{const a=this.getROMOffset(r),o=P0[r]=new PH(Tt.getDataView(a));vo[r]=n.slice(a,a+o.getByteLength())}break;case"SBF0":{Bn(typeof i.byteLength=="number");const a=this.getROMOffset(r);vo[r]=n.slice(a,a+i.byteLength),P0[r]=new RH(Tt.getDataView(a))}break;case"FXD0":{Bn(typeof i.byteLength=="number");const a=this.getROMOffset(r);vo[r]=n.slice(a,a+i.byteLength),P0[r]=new BH(Tt.getDataView(a))}break;case"Pointer":vo[r]=P0[r]=null;break;default:throw new Error("Unhandled audio subsection type: "+i.type)}}},extractAsync(){return new Promise(n=>{this.extract(),n()})},pack(n,e=0){const t=this.getPatchInfo();if(!t||!t.length||!vo)throw new Error("Unable to write audio section.");let r=e;for(let a=0;a<t.length;a++){const o=t[a];switch(o.type){case"T3":case"SBF0":case"FXD0":Bn(typeof o.byteLength=="number"),fr(n,vo[a],r,0,vo[a].byteLength),r+=o.byteLength;break;case"S2":r+=P0[a].pack(n,r),r=xn(r,16);break;case"MBF0":r+=P0[a].pack(n,r),r=xn(r,16);break;case"Pointer":break;default:throw new Error("Unhandled audio subsection type: "+o.type)}}const i=r-e;return Bn(i%16===0),i},getByteLength(){const n=this.getPatchInfo();if(!n||!n.length)throw new Error("Unable to determine audio section length.");let e=0;for(let t=0;t<n.length;t++){const r=n[t];switch(r.type){case"T3":case"SBF0":case"FXD0":Bn(typeof r.byteLength=="number"),e+=r.byteLength;break;case"S2":e+=P0[t].getByteLength();break;case"MBF0":e+=P0[t].getByteLength();break;case"Pointer":break;default:throw new Error("Unhandled audio subsection type: "+r.type)}}return e}};function IH(n,e){const t=BM(n);e.spaces=OH(n,t);const r=kH(n,t);return e.links=r.links,e._chains=r.chains,wt(`Parsing board def, ${At(t.spaceCount)} (${t.spaceCount}) spaces`),e}function BM(n){const e=new DataView(n),t=Tt.getGameVersion();switch(t){case 1:return{spaceCount:e.getUint16(0),chainCount:e.getUint16(4),spaceStartOffset:e.getUint16(6),linkStartOffset:e.getUint16(10)};case 2:case 3:return{spaceCount:e.getUint16(0),chainCount:e.getUint16(2),spaceStartOffset:e.getUint16(4),linkStartOffset:e.getUint16(6)}}throw new Error("Unrecongized game "+t)}function OH(n,e){const t=new DataView(n,e.spaceStartOffset),r=[];let i=0;for(let a=0;a<e.spaceCount;a++)r.push({type:t.getUint8(i+3),x:t.getFloat32(i+4),y:t.getFloat32(i+12),z:t.getFloat32(i+8)}),i+=16;return r}function kH(n,e){const t=new Array(e.chainCount),r={},i=new DataView(n,e.linkStartOffset);for(let a=0;a<e.chainCount;a++){const o=i.getUint16(a*2),s=new DataView(n,e.linkStartOffset+o),l=s.getUint16(0);if(t[a]=[],l===1)t[a].push(s.getUint16(2));else for(let u=1;u<l;u++){const d=s.getUint16(u*2),h=s.getUint16((u+1)*2);r.hasOwnProperty(d)?(Array.isArray(r[d])||(r[d]=[r[d]]),r[d].indexOf(h)===-1&&r[d].push(h)):r[d]=h,t[a].push(d),u+1===l&&t[a].push(h)}}return{links:r,chains:t}}function NH(n,e=MM(n)){const t=new ArrayBuffer(UH(n,e));return jH(t,n,e),GH(t,n.spaces),HH(t,e),t}function UH(n,e){const t=J4(),r=n.spaces.length*16;let i=e.length*2;return e.forEach(a=>{i+=(a.length+1)*2}),t+r+i}function J4(){let n;const e=Tt.getGameVersion();switch(e){case 1:n=12;break;case 2:case 3:n=8;break;default:throw new Error(`_boardDefHeaderSize: unknown game version ${e}`)}return n}function jH(n,e,t){const r=new DataView(n),i=Tt.getGameVersion(),a=J4()+e.spaces.length*16;switch(i){case 1:r.setUint16(0,e.spaces.length),r.setUint16(4,t.length),r.setUint16(6,12),r.setUint16(8,a),r.setUint16(10,a);break;case 2:case 3:r.setUint16(0,e.spaces.length),r.setUint16(2,t.length),r.setUint16(4,8),r.setUint16(6,a);break}}function GH(n,e){const t=new DataView(n);let r=J4();e.forEach(i=>{t.setUint32(r,i.type),t.setFloat32(r+4,i.x),t.setFloat32(r+8,i.z||0),t.setFloat32(r+12,i.y),r+=16})}function HH(n,e){const t=new DataView(n);let r=BM(n).linkStartOffset;const i=r;let a=e.length*2;for(let o=0;o<e.length;o++){t.setUint16(r,a),t.setUint16(i+a,e[o].length),a+=2;for(let s=0;s<e[o].length;s++)t.setUint16(i+a,e[o][s]),a+=2;r+=2}}function MM(n){n=Sc(n);const e=n.spaces,t=n.links,r=[];function i(s){const l=[];let u=s,d;for(;!e[u]._seen;){if(e[u]._seen=!0,l.push(u),d=t[u],Array.isArray(d)){r.push(l),d.forEach(h=>{i(h)});return}if(typeof d!="number"){console.warn(`determineChains.parseChain hit a dead end at ${At(u)} (${u})`),r.push(l);return}if(o(d,u)){r.push(l),i(d);return}u=d}l.length&&r.push(l)}const a={};for(let s=0;s<e.length;s++)e[s]&&(a[s]=[]);for(const s in t)Pa(parseInt(s,10),n).forEach(u=>{a[u].push(Number(s))});function o(s,l){return l===void 0?!!a[s].length:a[s].length?a[s].indexOf(Number(l))===-1||a[s].length>1:!1}i(T_(n));for(let s=0;s<e.length;s++)!e[s]||e[s]._seen||!o(s)&&iC(s,"*",n)&&i(s);for(let s=0;s<e.length;s++)!e[s]||e[s]._seen||i(s);return wt("chains: ",r),r}function zH(n,e){const t=n.spaces,r=n.links;for(let i=0;i<e.length;i++){const a=e[i];if(a.length===1){const o=a[0],s=t[o],l=r[o];let u,d;if(Array.isArray(l))if(l.length===1){const h=t[l[0]],f=yx(s.x,s.y,h.x,h.y);u=f.x,d=f.y}else if(l.length===2){const h=t[l[0]],f=t[l[1]],m=yx(h.x,h.y,f.x,f.y),g=Ro(s.x,s.y,m.x,m.y),_=.01/g;u=(1-_)*s.x+_*m.x,d=(1-_)*s.y+_*m.y,wt(`Padding branch x: ${s.x}, y: ${s.y}, padX: ${u}, padY: ${d}`)}else u=s.x,d=s.y;else if(typeof l=="number"){const h=t[l],f=yx(s.x,s.y,h.x,h.y);u=f.x,d=f.y}if(typeof u=="number"&&typeof d=="number"){const h=lC(u,d,de.OTHER,void 0,n);a.push(h),r[o]=h,r[h]=l}}}}function s8(n,e){for(let t=0;t<n.length;t++){const i=n[t].indexOf(e);if(i>=0)return[t,i]}return[-1,-1]}var WH=function(){var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(e){e=e||{};var t=typeof e<"u"?e:{},r={},i;for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);var a=[],o="./this.program",s=function(b,M){throw M},l=!1,u=!1,d=!1,h=!1;l=typeof window=="object",u=typeof importScripts=="function",d=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",h=!l&&!d&&!u;var f="";function m(b){return t.locateFile?t.locateFile(b,f):f+b}var g,_,E,x;d?(u?f=f+"/":f=__dirname+"/",g=function(M,X){return E||(E=null),x||(x=null),M=x.normalize(M),E.readFileSync(M,X?null:"utf8")},_=function(M){var X=g(M,!0);return X.buffer||(X=new Uint8Array(X)),$(X.buffer),X},process.argv.length>1&&(o=process.argv[1].replace(/\\/g,"/")),a=process.argv.slice(2),process.on("uncaughtException",function(b){if(!(b instanceof vi))throw b}),process.on("unhandledRejection",Ce),s=function(b){process.exit(b)},t.inspect=function(){return"[Emscripten Module object]"}):h?(typeof read<"u"&&(g=function(M){return read(M)}),_=function(M){var X;return typeof readbuffer=="function"?new Uint8Array(readbuffer(M)):(X=read(M,"binary"),$(typeof X=="object"),X)},typeof scriptArgs<"u"?a=scriptArgs:typeof arguments<"u"&&(a=arguments),typeof quit=="function"&&(s=function(b){quit(b)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(l||u)&&(u?f=self.location.href:document.currentScript&&(f=document.currentScript.src),n&&(f=n),f.indexOf("blob:")!==0?f=f.substr(0,f.lastIndexOf("/")+1):f="",g=function(M){var X=new XMLHttpRequest;return X.open("GET",M,!1),X.send(null),X.responseText},u&&(_=function(M){var X=new XMLHttpRequest;return X.open("GET",M,!1),X.responseType="arraybuffer",X.send(null),new Uint8Array(X.response)}));var v=t.print||console.log.bind(console),C=t.printErr||console.warn.bind(console);for(i in r)r.hasOwnProperty(i)&&(t[i]=r[i]);r=null,t.arguments&&(a=t.arguments),t.thisProgram&&(o=t.thisProgram),t.quit&&(s=t.quit);var V;t.wasmBinary&&(V=t.wasmBinary);var D;t.noExitRuntime&&(D=t.noExitRuntime),typeof WebAssembly!="object"&&C("no native wasm support detected");function H(b,M,X,Ae){switch(X=X||"i8",X.charAt(X.length-1)==="*"&&(X="i32"),X){case"i1":Be[b>>0]=M;break;case"i8":Be[b>>0]=M;break;case"i16":ye[b>>1]=M;break;case"i32":We[b>>2]=M;break;case"i64":on=[M>>>0,(xt=M,+Le(xt)>=1?xt>0?(Ee(+rt(xt/4294967296),4294967295)|0)>>>0:~~+Pe((xt-+(~~xt>>>0))/4294967296)>>>0:0)],We[b>>2]=on[0],We[b+4>>2]=on[1];break;case"float":at[b>>2]=M;break;case"double":Ke[b>>3]=M;break;default:Ce("invalid type for setValue: "+X)}}var R,j=new WebAssembly.Table({initial:9,maximum:9+0,element:"anyfunc"}),te=!1;function $(b,M){b||Ce("Assertion failed: "+M)}function z(b){var M=t["_"+b];return $(M,"Cannot call unknown function "+b+", make sure it is exported"),M}function I(b,M,X,Ae,xe){var Me={string:function(qt){var yn=0;if(qt!=null&&qt!==0){var K0=(qt.length<<2)+1;yn=en(K0),O(qt,yn,K0)}return yn},array:function(qt){var yn=en(qt.length);return se(qt,yn),yn}};function ze(qt){return M==="string"?ue(qt):M==="boolean"?Boolean(qt):qt}var Ye=z(b),it=[],Gt=0;if(Ae)for(var Zt=0;Zt<Ae.length;Zt++){var vn=Me[X[Zt]];vn?(Gt===0&&(Gt=Ur()),it[Zt]=vn(Ae[Zt])):it[Zt]=Ae[Zt]}var zt=Ye.apply(null,it);return zt=ze(zt),Gt!==0&&Rt(Gt),zt}function q(b,M,X,Ae){X=X||[];var xe=X.every(function(ze){return ze==="number"}),Me=M!=="string";return Me&&xe&&!Ae?z(b):function(){return I(b,M,X,arguments)}}var P=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ee(b,M,X){for(var Ae=M+X,xe=M;b[xe]&&!(xe>=Ae);)++xe;if(xe-M>16&&b.subarray&&P)return P.decode(b.subarray(M,xe));for(var Me="";M<xe;){var ze=b[M++];if(!(ze&128)){Me+=String.fromCharCode(ze);continue}var Ye=b[M++]&63;if((ze&224)==192){Me+=String.fromCharCode((ze&31)<<6|Ye);continue}var it=b[M++]&63;if((ze&240)==224?ze=(ze&15)<<12|Ye<<6|it:ze=(ze&7)<<18|Ye<<12|it<<6|b[M++]&63,ze<65536)Me+=String.fromCharCode(ze);else{var Gt=ze-65536;Me+=String.fromCharCode(55296|Gt>>10,56320|Gt&1023)}}return Me}function ue(b,M){return b?ee(Te,b,M):""}function U(b,M,X,Ae){if(!(Ae>0))return 0;for(var xe=X,Me=X+Ae-1,ze=0;ze<b.length;++ze){var Ye=b.charCodeAt(ze);if(Ye>=55296&&Ye<=57343){var it=b.charCodeAt(++ze);Ye=65536+((Ye&1023)<<10)|it&1023}if(Ye<=127){if(X>=Me)break;M[X++]=Ye}else if(Ye<=2047){if(X+1>=Me)break;M[X++]=192|Ye>>6,M[X++]=128|Ye&63}else if(Ye<=65535){if(X+2>=Me)break;M[X++]=224|Ye>>12,M[X++]=128|Ye>>6&63,M[X++]=128|Ye&63}else{if(X+3>=Me)break;M[X++]=240|Ye>>18,M[X++]=128|Ye>>12&63,M[X++]=128|Ye>>6&63,M[X++]=128|Ye&63}}return M[X]=0,X-xe}function O(b,M,X){return U(b,Te,M,X)}function G(b){for(var M=0,X=0;X<b.length;++X){var Ae=b.charCodeAt(X);Ae>=55296&&Ae<=57343&&(Ae=65536+((Ae&1023)<<10)|b.charCodeAt(++X)&1023),Ae<=127?++M:Ae<=2047?M+=2:Ae<=65535?M+=3:M+=4}return M}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function ne(b){var M=G(b)+1,X=en(M);return U(b,Be,X,M),X}function se(b,M){Be.set(b,M)}var ie=65536,Re,Be,Te,ye,We,at,Ke;function tt(b){Re=b,t.HEAP8=Be=new Int8Array(b),t.HEAP16=ye=new Int16Array(b),t.HEAP32=We=new Int32Array(b),t.HEAPU8=Te=new Uint8Array(b),t.HEAPU16=new Uint16Array(b),t.HEAPU32=new Uint32Array(b),t.HEAPF32=at=new Float32Array(b),t.HEAPF64=Ke=new Float64Array(b)}var lt=5285248,Ie=42208,Ue=t.TOTAL_MEMORY||16777216;t.wasmMemory?R=t.wasmMemory:R=new WebAssembly.Memory({initial:Ue/ie,maximum:Ue/ie}),R&&(Re=R.buffer),Ue=Re.byteLength,tt(Re),We[Ie>>2]=lt;function k(b){for(;b.length>0;){var M=b.shift();if(typeof M=="function"){M();continue}var X=M.func;typeof X=="number"?M.arg===void 0?t.dynCall_v(X):t.dynCall_vi(X,M.arg):X(M.arg===void 0?null:M.arg)}}var De=[],we=[],le=[],re=[];function fe(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)_e(t.preRun.shift());k(De)}function He(){!t.noFSInit&&!Q.init.initialized&&Q.init(),k(we)}function oe(){Q.ignorePermissions=!1,k(le)}function Y(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Fe(t.postRun.shift());k(re)}function _e(b){De.unshift(b)}function Fe(b){re.unshift(b)}var Le=Math.abs,Pe=Math.ceil,rt=Math.floor,Ee=Math.min,ve=0,$e=null;function _t(b){ve++,t.monitorRunDependencies&&t.monitorRunDependencies(ve)}function gt(b){if(ve--,t.monitorRunDependencies&&t.monitorRunDependencies(ve),ve==0&&$e){var M=$e;$e=null,M()}}t.preloadedImages={},t.preloadedAudios={};function Ce(b){throw t.onAbort&&t.onAbort(b),b+="",v(b),C(b),te=!0,b="abort("+b+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(b)}var Ft="data:application/octet-stream;base64,";function ht(b){return String.prototype.startsWith?b.startsWith(Ft):b.indexOf(Ft)===0}var Nt="smlrc.wasm";ht(Nt)||(Nt=m(Nt));function Je(){try{if(V)return new Uint8Array(V);if(_)return _(Nt);throw"both async and sync fetching of the wasm failed"}catch(b){Ce(b)}}function mt(){return!V&&(l||u)&&typeof fetch=="function"?fetch(Nt,{credentials:"same-origin"}).then(function(b){if(!b.ok)throw"failed to load wasm binary file at '"+Nt+"'";return b.arrayBuffer()}).catch(function(){return Je()}):new Promise(function(b,M){b(Je())})}function Xt(){var b={a:dn};function M(ze,Ye){var it=ze.exports;t.asm=it,gt()}_t();function X(ze){M(ze.instance)}function Ae(ze){return mt().then(function(Ye){return WebAssembly.instantiate(Ye,b)}).then(ze,function(Ye){C("failed to asynchronously prepare wasm: "+Ye),Ce(Ye)})}function xe(){if(!V&&typeof WebAssembly.instantiateStreaming=="function"&&!ht(Nt)&&typeof fetch=="function")fetch(Nt,{credentials:"same-origin"}).then(function(ze){var Ye=WebAssembly.instantiateStreaming(ze,b);return Ye.then(X,function(it){C("wasm streaming compile failed: "+it),C("falling back to ArrayBuffer instantiation"),Ae(X)})});else return Ae(X)}if(t.instantiateWasm)try{var Me=t.instantiateWasm(b,M);return Me}catch(ze){return C("Module.instantiateWasm callback failed with error: "+ze),!1}return xe(),{}}var xt,on;we.push({func:function(){m0()}});function wn(b){return b}function On(b){var M=/\b_Z[\w\d_]+/g;return b.replace(M,function(X){var Ae=X;return X===Ae?X:Ae+" ["+X+"]"})}function V0(){var b=new Error;if(!b.stack){try{throw new Error}catch(M){b=M}if(!b.stack)return"(no stack trace available)"}return b.stack.toString()}function X0(){var b=V0();return t.extraStackTrace&&(b+=`
`+t.extraStackTrace()),On(b)}function ki(){}function na(b){return t.___errno_location&&(We[t.___errno_location()>>2]=b),b}var $t={splitPath:function(b){var M=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return M.exec(b).slice(1)},normalizeArray:function(b,M){for(var X=0,Ae=b.length-1;Ae>=0;Ae--){var xe=b[Ae];xe==="."?b.splice(Ae,1):xe===".."?(b.splice(Ae,1),X++):X&&(b.splice(Ae,1),X--)}if(M)for(;X;X--)b.unshift("..");return b},normalize:function(b){var M=b.charAt(0)==="/",X=b.substr(-1)==="/";return b=$t.normalizeArray(b.split("/").filter(function(Ae){return!!Ae}),!M).join("/"),!b&&!M&&(b="."),b&&X&&(b+="/"),(M?"/":"")+b},dirname:function(b){var M=$t.splitPath(b),X=M[0],Ae=M[1];return!X&&!Ae?".":(Ae&&(Ae=Ae.substr(0,Ae.length-1)),X+Ae)},basename:function(b){if(b==="/")return"/";var M=b.lastIndexOf("/");return M===-1?b:b.substr(M+1)},extname:function(b){return $t.splitPath(b)[3]},join:function(){var b=Array.prototype.slice.call(arguments,0);return $t.normalize(b.join("/"))},join2:function(b,M){return $t.normalize(b+"/"+M)}},Nr={resolve:function(){for(var b="",M=!1,X=arguments.length-1;X>=-1&&!M;X--){var Ae=X>=0?arguments[X]:Q.cwd();if(typeof Ae!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!Ae)return"";b=Ae+"/"+b,M=Ae.charAt(0)==="/"}return b=$t.normalizeArray(b.split("/").filter(function(xe){return!!xe}),!M).join("/"),(M?"/":"")+b||"."},relative:function(b,M){b=Nr.resolve(b).substr(1),M=Nr.resolve(M).substr(1);function X(Gt){for(var Zt=0;Zt<Gt.length&&Gt[Zt]==="";Zt++);for(var vn=Gt.length-1;vn>=0&&Gt[vn]==="";vn--);return Zt>vn?[]:Gt.slice(Zt,vn-Zt+1)}for(var Ae=X(b.split("/")),xe=X(M.split("/")),Me=Math.min(Ae.length,xe.length),ze=Me,Ye=0;Ye<Me;Ye++)if(Ae[Ye]!==xe[Ye]){ze=Ye;break}for(var it=[],Ye=ze;Ye<Ae.length;Ye++)it.push("..");return it=it.concat(xe.slice(ze)),it.join("/")}},xi={ttys:[],init:function(){},shutdown:function(){},register:function(b,M){xi.ttys[b]={input:[],output:[],ops:M},Q.registerDevice(b,xi.stream_ops)},stream_ops:{open:function(b){var M=xi.ttys[b.node.rdev];if(!M)throw new Q.ErrnoError(43);b.tty=M,b.seekable=!1},close:function(b){b.tty.ops.flush(b.tty)},flush:function(b){b.tty.ops.flush(b.tty)},read:function(b,M,X,Ae,xe){if(!b.tty||!b.tty.ops.get_char)throw new Q.ErrnoError(60);for(var Me=0,ze=0;ze<Ae;ze++){var Ye;try{Ye=b.tty.ops.get_char(b.tty)}catch{throw new Q.ErrnoError(29)}if(Ye===void 0&&Me===0)throw new Q.ErrnoError(6);if(Ye==null)break;Me++,M[X+ze]=Ye}return Me&&(b.node.timestamp=Date.now()),Me},write:function(b,M,X,Ae,xe){if(!b.tty||!b.tty.ops.put_char)throw new Q.ErrnoError(60);try{for(var Me=0;Me<Ae;Me++)b.tty.ops.put_char(b.tty,M[X+Me])}catch{throw new Q.ErrnoError(29)}return Ae&&(b.node.timestamp=Date.now()),Me}},default_tty_ops:{get_char:function(b){if(!b.input.length){var M=null;if(d){var X=256,Ae=Buffer.alloc?Buffer.alloc(X):new Buffer(X),xe=0;try{xe=E.readSync(process.stdin.fd,Ae,0,X,null)}catch(Me){if(Me.toString().indexOf("EOF")!=-1)xe=0;else throw Me}xe>0?M=Ae.slice(0,xe).toString("utf-8"):M=null}else typeof window<"u"&&typeof window.prompt=="function"?(M=window.prompt("Input: "),M!==null&&(M+=`
`)):typeof readline=="function"&&(M=readline(),M!==null&&(M+=`
`));if(!M)return null;b.input=Jr(M,!0)}return b.input.shift()},put_char:function(b,M){M===null||M===10?(v(ee(b.output,0)),b.output=[]):M!=0&&b.output.push(M)},flush:function(b){b.output&&b.output.length>0&&(v(ee(b.output,0)),b.output=[])}},default_tty1_ops:{put_char:function(b,M){M===null||M===10?(C(ee(b.output,0)),b.output=[]):M!=0&&b.output.push(M)},flush:function(b){b.output&&b.output.length>0&&(C(ee(b.output,0)),b.output=[])}}},gn={ops_table:null,mount:function(b){return gn.createNode(null,"/",16895,0)},createNode:function(b,M,X,Ae){if(Q.isBlkdev(X)||Q.isFIFO(X))throw new Q.ErrnoError(63);gn.ops_table||(gn.ops_table={dir:{node:{getattr:gn.node_ops.getattr,setattr:gn.node_ops.setattr,lookup:gn.node_ops.lookup,mknod:gn.node_ops.mknod,rename:gn.node_ops.rename,unlink:gn.node_ops.unlink,rmdir:gn.node_ops.rmdir,readdir:gn.node_ops.readdir,symlink:gn.node_ops.symlink},stream:{llseek:gn.stream_ops.llseek}},file:{node:{getattr:gn.node_ops.getattr,setattr:gn.node_ops.setattr},stream:{llseek:gn.stream_ops.llseek,read:gn.stream_ops.read,write:gn.stream_ops.write,allocate:gn.stream_ops.allocate,mmap:gn.stream_ops.mmap,msync:gn.stream_ops.msync}},link:{node:{getattr:gn.node_ops.getattr,setattr:gn.node_ops.setattr,readlink:gn.node_ops.readlink},stream:{}},chrdev:{node:{getattr:gn.node_ops.getattr,setattr:gn.node_ops.setattr},stream:Q.chrdev_stream_ops}});var xe=Q.createNode(b,M,X,Ae);return Q.isDir(xe.mode)?(xe.node_ops=gn.ops_table.dir.node,xe.stream_ops=gn.ops_table.dir.stream,xe.contents={}):Q.isFile(xe.mode)?(xe.node_ops=gn.ops_table.file.node,xe.stream_ops=gn.ops_table.file.stream,xe.usedBytes=0,xe.contents=null):Q.isLink(xe.mode)?(xe.node_ops=gn.ops_table.link.node,xe.stream_ops=gn.ops_table.link.stream):Q.isChrdev(xe.mode)&&(xe.node_ops=gn.ops_table.chrdev.node,xe.stream_ops=gn.ops_table.chrdev.stream),xe.timestamp=Date.now(),b&&(b.contents[M]=xe),xe},getFileDataAsRegularArray:function(b){if(b.contents&&b.contents.subarray){for(var M=[],X=0;X<b.usedBytes;++X)M.push(b.contents[X]);return M}return b.contents},getFileDataAsTypedArray:function(b){return b.contents?b.contents.subarray?b.contents.subarray(0,b.usedBytes):new Uint8Array(b.contents):new Uint8Array},expandFileStorage:function(b,M){var X=b.contents?b.contents.length:0;if(!(X>=M)){var Ae=1024*1024;M=Math.max(M,X*(X<Ae?2:1.125)|0),X!=0&&(M=Math.max(M,256));var xe=b.contents;b.contents=new Uint8Array(M),b.usedBytes>0&&b.contents.set(xe.subarray(0,b.usedBytes),0)}},resizeFileStorage:function(b,M){if(b.usedBytes!=M){if(M==0){b.contents=null,b.usedBytes=0;return}if(!b.contents||b.contents.subarray){var X=b.contents;b.contents=new Uint8Array(M),X&&b.contents.set(X.subarray(0,Math.min(M,b.usedBytes))),b.usedBytes=M;return}if(b.contents||(b.contents=[]),b.contents.length>M)b.contents.length=M;else for(;b.contents.length<M;)b.contents.push(0);b.usedBytes=M}},node_ops:{getattr:function(b){var M={};return M.dev=Q.isChrdev(b.mode)?b.id:1,M.ino=b.id,M.mode=b.mode,M.nlink=1,M.uid=0,M.gid=0,M.rdev=b.rdev,Q.isDir(b.mode)?M.size=4096:Q.isFile(b.mode)?M.size=b.usedBytes:Q.isLink(b.mode)?M.size=b.link.length:M.size=0,M.atime=new Date(b.timestamp),M.mtime=new Date(b.timestamp),M.ctime=new Date(b.timestamp),M.blksize=4096,M.blocks=Math.ceil(M.size/M.blksize),M},setattr:function(b,M){M.mode!==void 0&&(b.mode=M.mode),M.timestamp!==void 0&&(b.timestamp=M.timestamp),M.size!==void 0&&gn.resizeFileStorage(b,M.size)},lookup:function(b,M){throw Q.genericErrors[44]},mknod:function(b,M,X,Ae){return gn.createNode(b,M,X,Ae)},rename:function(b,M,X){if(Q.isDir(b.mode)){var Ae;try{Ae=Q.lookupNode(M,X)}catch{}if(Ae)for(var xe in Ae.contents)throw new Q.ErrnoError(55)}delete b.parent.contents[b.name],b.name=X,M.contents[X]=b,b.parent=M},unlink:function(b,M){delete b.contents[M]},rmdir:function(b,M){var X=Q.lookupNode(b,M);for(var Ae in X.contents)throw new Q.ErrnoError(55);delete b.contents[M]},readdir:function(b){var M=[".",".."];for(var X in b.contents)!b.contents.hasOwnProperty(X)||M.push(X);return M},symlink:function(b,M,X){var Ae=gn.createNode(b,M,41471,0);return Ae.link=X,Ae},readlink:function(b){if(!Q.isLink(b.mode))throw new Q.ErrnoError(28);return b.link}},stream_ops:{read:function(b,M,X,Ae,xe){var Me=b.node.contents;if(xe>=b.node.usedBytes)return 0;var ze=Math.min(b.node.usedBytes-xe,Ae);if(ze>8&&Me.subarray)M.set(Me.subarray(xe,xe+ze),X);else for(var Ye=0;Ye<ze;Ye++)M[X+Ye]=Me[xe+Ye];return ze},write:function(b,M,X,Ae,xe,Me){if(!Ae)return 0;var ze=b.node;if(ze.timestamp=Date.now(),M.subarray&&(!ze.contents||ze.contents.subarray)){if(Me)return ze.contents=M.subarray(X,X+Ae),ze.usedBytes=Ae,Ae;if(ze.usedBytes===0&&xe===0)return ze.contents=M.slice(X,X+Ae),ze.usedBytes=Ae,Ae;if(xe+Ae<=ze.usedBytes)return ze.contents.set(M.subarray(X,X+Ae),xe),Ae}if(gn.expandFileStorage(ze,xe+Ae),ze.contents.subarray&&M.subarray)ze.contents.set(M.subarray(X,X+Ae),xe);else for(var Ye=0;Ye<Ae;Ye++)ze.contents[xe+Ye]=M[X+Ye];return ze.usedBytes=Math.max(ze.usedBytes,xe+Ae),Ae},llseek:function(b,M,X){var Ae=M;if(X===1?Ae+=b.position:X===2&&Q.isFile(b.node.mode)&&(Ae+=b.node.usedBytes),Ae<0)throw new Q.ErrnoError(28);return Ae},allocate:function(b,M,X){gn.expandFileStorage(b.node,M+X),b.node.usedBytes=Math.max(b.node.usedBytes,M+X)},mmap:function(b,M,X,Ae,xe,Me,ze){if(!Q.isFile(b.node.mode))throw new Q.ErrnoError(43);var Ye,it,Gt=b.node.contents;if(!(ze&2)&&Gt.buffer===M.buffer)it=!1,Ye=Gt.byteOffset;else{(xe>0||xe+Ae<b.node.usedBytes)&&(Gt.subarray?Gt=Gt.subarray(xe,xe+Ae):Gt=Array.prototype.slice.call(Gt,xe,xe+Ae)),it=!0;var Zt=M.buffer==Be.buffer;if(Ye=Dn(Ae),!Ye)throw new Q.ErrnoError(48);(Zt?Be:M).set(Gt,Ye)}return{ptr:Ye,allocated:it}},msync:function(b,M,X,Ae,xe){if(!Q.isFile(b.node.mode))throw new Q.ErrnoError(43);return xe&2||gn.stream_ops.write(b,M,0,Ae,X,!1),0}}},Q={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(b){if(!(b instanceof Q.ErrnoError))throw b+" : "+X0();return na(b.errno)},lookupPath:function(b,M){if(b=Nr.resolve(Q.cwd(),b),M=M||{},!b)return{path:"",node:null};var X={follow_mount:!0,recurse_count:0};for(var Ae in X)M[Ae]===void 0&&(M[Ae]=X[Ae]);if(M.recurse_count>8)throw new Q.ErrnoError(32);for(var xe=$t.normalizeArray(b.split("/").filter(function(zt){return!!zt}),!1),Me=Q.root,ze="/",Ye=0;Ye<xe.length;Ye++){var it=Ye===xe.length-1;if(it&&M.parent)break;if(Me=Q.lookupNode(Me,xe[Ye]),ze=$t.join2(ze,xe[Ye]),Q.isMountpoint(Me)&&(!it||it&&M.follow_mount)&&(Me=Me.mounted.root),!it||M.follow)for(var Gt=0;Q.isLink(Me.mode);){var Zt=Q.readlink(ze);ze=Nr.resolve($t.dirname(ze),Zt);var vn=Q.lookupPath(ze,{recurse_count:M.recurse_count});if(Me=vn.node,Gt++>40)throw new Q.ErrnoError(32)}}return{path:ze,node:Me}},getPath:function(b){for(var M;;){if(Q.isRoot(b)){var X=b.mount.mountpoint;return M?X[X.length-1]!=="/"?X+"/"+M:X+M:X}M=M?b.name+"/"+M:b.name,b=b.parent}},hashName:function(b,M){for(var X=0,Ae=0;Ae<M.length;Ae++)X=(X<<5)-X+M.charCodeAt(Ae)|0;return(b+X>>>0)%Q.nameTable.length},hashAddNode:function(b){var M=Q.hashName(b.parent.id,b.name);b.name_next=Q.nameTable[M],Q.nameTable[M]=b},hashRemoveNode:function(b){var M=Q.hashName(b.parent.id,b.name);if(Q.nameTable[M]===b)Q.nameTable[M]=b.name_next;else for(var X=Q.nameTable[M];X;){if(X.name_next===b){X.name_next=b.name_next;break}X=X.name_next}},lookupNode:function(b,M){var X=Q.mayLookup(b);if(X)throw new Q.ErrnoError(X,b);for(var Ae=Q.hashName(b.id,M),xe=Q.nameTable[Ae];xe;xe=xe.name_next){var Me=xe.name;if(xe.parent.id===b.id&&Me===M)return xe}return Q.lookup(b,M)},createNode:function(b,M,X,Ae){if(!Q.FSNode){Q.FSNode=function(Ye,it,Gt,Zt){Ye||(Ye=this),this.parent=Ye,this.mount=Ye.mount,this.mounted=null,this.id=Q.nextInode++,this.name=it,this.mode=Gt,this.node_ops={},this.stream_ops={},this.rdev=Zt},Q.FSNode.prototype={};var xe=365,Me=146;Object.defineProperties(Q.FSNode.prototype,{read:{get:function(){return(this.mode&xe)===xe},set:function(Ye){Ye?this.mode|=xe:this.mode&=~xe}},write:{get:function(){return(this.mode&Me)===Me},set:function(Ye){Ye?this.mode|=Me:this.mode&=~Me}},isFolder:{get:function(){return Q.isDir(this.mode)}},isDevice:{get:function(){return Q.isChrdev(this.mode)}}})}var ze=new Q.FSNode(b,M,X,Ae);return Q.hashAddNode(ze),ze},destroyNode:function(b){Q.hashRemoveNode(b)},isRoot:function(b){return b===b.parent},isMountpoint:function(b){return!!b.mounted},isFile:function(b){return(b&61440)===32768},isDir:function(b){return(b&61440)===16384},isLink:function(b){return(b&61440)===40960},isChrdev:function(b){return(b&61440)===8192},isBlkdev:function(b){return(b&61440)===24576},isFIFO:function(b){return(b&61440)===4096},isSocket:function(b){return(b&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(b){var M=Q.flagModes[b];if(typeof M>"u")throw new Error("Unknown file open mode: "+b);return M},flagsToPermissionString:function(b){var M=["r","w","rw"][b&3];return b&512&&(M+="w"),M},nodePermissions:function(b,M){return Q.ignorePermissions?0:M.indexOf("r")!==-1&&!(b.mode&292)||M.indexOf("w")!==-1&&!(b.mode&146)||M.indexOf("x")!==-1&&!(b.mode&73)?2:0},mayLookup:function(b){var M=Q.nodePermissions(b,"x");return M||(b.node_ops.lookup?0:2)},mayCreate:function(b,M){try{var X=Q.lookupNode(b,M);return 20}catch{}return Q.nodePermissions(b,"wx")},mayDelete:function(b,M,X){var Ae;try{Ae=Q.lookupNode(b,M)}catch(Me){return Me.errno}var xe=Q.nodePermissions(b,"wx");if(xe)return xe;if(X){if(!Q.isDir(Ae.mode))return 54;if(Q.isRoot(Ae)||Q.getPath(Ae)===Q.cwd())return 10}else if(Q.isDir(Ae.mode))return 31;return 0},mayOpen:function(b,M){return b?Q.isLink(b.mode)?32:Q.isDir(b.mode)&&(Q.flagsToPermissionString(M)!=="r"||M&512)?31:Q.nodePermissions(b,Q.flagsToPermissionString(M)):44},MAX_OPEN_FDS:4096,nextfd:function(b,M){b=b||0,M=M||Q.MAX_OPEN_FDS;for(var X=b;X<=M;X++)if(!Q.streams[X])return X;throw new Q.ErrnoError(33)},getStream:function(b){return Q.streams[b]},createStream:function(b,M,X){Q.FSStream||(Q.FSStream=function(){},Q.FSStream.prototype={},Object.defineProperties(Q.FSStream.prototype,{object:{get:function(){return this.node},set:function(ze){this.node=ze}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}}));var Ae=new Q.FSStream;for(var xe in b)Ae[xe]=b[xe];b=Ae;var Me=Q.nextfd(M,X);return b.fd=Me,Q.streams[Me]=b,b},closeStream:function(b){Q.streams[b]=null},chrdev_stream_ops:{open:function(b){var M=Q.getDevice(b.node.rdev);b.stream_ops=M.stream_ops,b.stream_ops.open&&b.stream_ops.open(b)},llseek:function(){throw new Q.ErrnoError(70)}},major:function(b){return b>>8},minor:function(b){return b&255},makedev:function(b,M){return b<<8|M},registerDevice:function(b,M){Q.devices[b]={stream_ops:M}},getDevice:function(b){return Q.devices[b]},getMounts:function(b){for(var M=[],X=[b];X.length;){var Ae=X.pop();M.push(Ae),X.push.apply(X,Ae.mounts)}return M},syncfs:function(b,M){typeof b=="function"&&(M=b,b=!1),Q.syncFSRequests++,Q.syncFSRequests>1&&C("warning: "+Q.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var X=Q.getMounts(Q.root.mount),Ae=0;function xe(ze){return Q.syncFSRequests--,M(ze)}function Me(ze){if(ze)return Me.errored?void 0:(Me.errored=!0,xe(ze));++Ae>=X.length&&xe(null)}X.forEach(function(ze){if(!ze.type.syncfs)return Me(null);ze.type.syncfs(ze,b,Me)})},mount:function(b,M,X){var Ae=X==="/",xe=!X,Me;if(Ae&&Q.root)throw new Q.ErrnoError(10);if(!Ae&&!xe){var ze=Q.lookupPath(X,{follow_mount:!1});if(X=ze.path,Me=ze.node,Q.isMountpoint(Me))throw new Q.ErrnoError(10);if(!Q.isDir(Me.mode))throw new Q.ErrnoError(54)}var Ye={type:b,opts:M,mountpoint:X,mounts:[]},it=b.mount(Ye);return it.mount=Ye,Ye.root=it,Ae?Q.root=it:Me&&(Me.mounted=Ye,Me.mount&&Me.mount.mounts.push(Ye)),it},unmount:function(b){var M=Q.lookupPath(b,{follow_mount:!1});if(!Q.isMountpoint(M.node))throw new Q.ErrnoError(28);var X=M.node,Ae=X.mounted,xe=Q.getMounts(Ae);Object.keys(Q.nameTable).forEach(function(ze){for(var Ye=Q.nameTable[ze];Ye;){var it=Ye.name_next;xe.indexOf(Ye.mount)!==-1&&Q.destroyNode(Ye),Ye=it}}),X.mounted=null;var Me=X.mount.mounts.indexOf(Ae);X.mount.mounts.splice(Me,1)},lookup:function(b,M){return b.node_ops.lookup(b,M)},mknod:function(b,M,X){var Ae=Q.lookupPath(b,{parent:!0}),xe=Ae.node,Me=$t.basename(b);if(!Me||Me==="."||Me==="..")throw new Q.ErrnoError(28);var ze=Q.mayCreate(xe,Me);if(ze)throw new Q.ErrnoError(ze);if(!xe.node_ops.mknod)throw new Q.ErrnoError(63);return xe.node_ops.mknod(xe,Me,M,X)},create:function(b,M){return M=M!==void 0?M:438,M&=4095,M|=32768,Q.mknod(b,M,0)},mkdir:function(b,M){return M=M!==void 0?M:511,M&=1023,M|=16384,Q.mknod(b,M,0)},mkdirTree:function(b,M){for(var X=b.split("/"),Ae="",xe=0;xe<X.length;++xe)if(!!X[xe]){Ae+="/"+X[xe];try{Q.mkdir(Ae,M)}catch(Me){if(Me.errno!=20)throw Me}}},mkdev:function(b,M,X){return typeof X>"u"&&(X=M,M=438),M|=8192,Q.mknod(b,M,X)},symlink:function(b,M){if(!Nr.resolve(b))throw new Q.ErrnoError(44);var X=Q.lookupPath(M,{parent:!0}),Ae=X.node;if(!Ae)throw new Q.ErrnoError(44);var xe=$t.basename(M),Me=Q.mayCreate(Ae,xe);if(Me)throw new Q.ErrnoError(Me);if(!Ae.node_ops.symlink)throw new Q.ErrnoError(63);return Ae.node_ops.symlink(Ae,xe,b)},rename:function(b,M){var X=$t.dirname(b),Ae=$t.dirname(M),xe=$t.basename(b),Me=$t.basename(M),ze,Ye,it;try{ze=Q.lookupPath(b,{parent:!0}),Ye=ze.node,ze=Q.lookupPath(M,{parent:!0}),it=ze.node}catch{throw new Q.ErrnoError(10)}if(!Ye||!it)throw new Q.ErrnoError(44);if(Ye.mount!==it.mount)throw new Q.ErrnoError(75);var Gt=Q.lookupNode(Ye,xe),Zt=Nr.relative(b,Ae);if(Zt.charAt(0)!==".")throw new Q.ErrnoError(28);if(Zt=Nr.relative(M,X),Zt.charAt(0)!==".")throw new Q.ErrnoError(55);var vn;try{vn=Q.lookupNode(it,Me)}catch{}if(Gt!==vn){var zt=Q.isDir(Gt.mode),qt=Q.mayDelete(Ye,xe,zt);if(qt)throw new Q.ErrnoError(qt);if(qt=vn?Q.mayDelete(it,Me,zt):Q.mayCreate(it,Me),qt)throw new Q.ErrnoError(qt);if(!Ye.node_ops.rename)throw new Q.ErrnoError(63);if(Q.isMountpoint(Gt)||vn&&Q.isMountpoint(vn))throw new Q.ErrnoError(10);if(it!==Ye&&(qt=Q.nodePermissions(Ye,"w"),qt))throw new Q.ErrnoError(qt);try{Q.trackingDelegate.willMovePath&&Q.trackingDelegate.willMovePath(b,M)}catch(yn){C("FS.trackingDelegate['willMovePath']('"+b+"', '"+M+"') threw an exception: "+yn.message)}Q.hashRemoveNode(Gt);try{Ye.node_ops.rename(Gt,it,Me)}catch(yn){throw yn}finally{Q.hashAddNode(Gt)}try{Q.trackingDelegate.onMovePath&&Q.trackingDelegate.onMovePath(b,M)}catch(yn){C("FS.trackingDelegate['onMovePath']('"+b+"', '"+M+"') threw an exception: "+yn.message)}}},rmdir:function(b){var M=Q.lookupPath(b,{parent:!0}),X=M.node,Ae=$t.basename(b),xe=Q.lookupNode(X,Ae),Me=Q.mayDelete(X,Ae,!0);if(Me)throw new Q.ErrnoError(Me);if(!X.node_ops.rmdir)throw new Q.ErrnoError(63);if(Q.isMountpoint(xe))throw new Q.ErrnoError(10);try{Q.trackingDelegate.willDeletePath&&Q.trackingDelegate.willDeletePath(b)}catch(ze){C("FS.trackingDelegate['willDeletePath']('"+b+"') threw an exception: "+ze.message)}X.node_ops.rmdir(X,Ae),Q.destroyNode(xe);try{Q.trackingDelegate.onDeletePath&&Q.trackingDelegate.onDeletePath(b)}catch(ze){C("FS.trackingDelegate['onDeletePath']('"+b+"') threw an exception: "+ze.message)}},readdir:function(b){var M=Q.lookupPath(b,{follow:!0}),X=M.node;if(!X.node_ops.readdir)throw new Q.ErrnoError(54);return X.node_ops.readdir(X)},unlink:function(b){var M=Q.lookupPath(b,{parent:!0}),X=M.node,Ae=$t.basename(b),xe=Q.lookupNode(X,Ae),Me=Q.mayDelete(X,Ae,!1);if(Me)throw new Q.ErrnoError(Me);if(!X.node_ops.unlink)throw new Q.ErrnoError(63);if(Q.isMountpoint(xe))throw new Q.ErrnoError(10);try{Q.trackingDelegate.willDeletePath&&Q.trackingDelegate.willDeletePath(b)}catch(ze){C("FS.trackingDelegate['willDeletePath']('"+b+"') threw an exception: "+ze.message)}X.node_ops.unlink(X,Ae),Q.destroyNode(xe);try{Q.trackingDelegate.onDeletePath&&Q.trackingDelegate.onDeletePath(b)}catch(ze){C("FS.trackingDelegate['onDeletePath']('"+b+"') threw an exception: "+ze.message)}},readlink:function(b){var M=Q.lookupPath(b),X=M.node;if(!X)throw new Q.ErrnoError(44);if(!X.node_ops.readlink)throw new Q.ErrnoError(28);return Nr.resolve(Q.getPath(X.parent),X.node_ops.readlink(X))},stat:function(b,M){var X=Q.lookupPath(b,{follow:!M}),Ae=X.node;if(!Ae)throw new Q.ErrnoError(44);if(!Ae.node_ops.getattr)throw new Q.ErrnoError(63);return Ae.node_ops.getattr(Ae)},lstat:function(b){return Q.stat(b,!0)},chmod:function(b,M,X){var Ae;if(typeof b=="string"){var xe=Q.lookupPath(b,{follow:!X});Ae=xe.node}else Ae=b;if(!Ae.node_ops.setattr)throw new Q.ErrnoError(63);Ae.node_ops.setattr(Ae,{mode:M&4095|Ae.mode&-4096,timestamp:Date.now()})},lchmod:function(b,M){Q.chmod(b,M,!0)},fchmod:function(b,M){var X=Q.getStream(b);if(!X)throw new Q.ErrnoError(8);Q.chmod(X.node,M)},chown:function(b,M,X,Ae){var xe;if(typeof b=="string"){var Me=Q.lookupPath(b,{follow:!Ae});xe=Me.node}else xe=b;if(!xe.node_ops.setattr)throw new Q.ErrnoError(63);xe.node_ops.setattr(xe,{timestamp:Date.now()})},lchown:function(b,M,X){Q.chown(b,M,X,!0)},fchown:function(b,M,X){var Ae=Q.getStream(b);if(!Ae)throw new Q.ErrnoError(8);Q.chown(Ae.node,M,X)},truncate:function(b,M){if(M<0)throw new Q.ErrnoError(28);var X;if(typeof b=="string"){var Ae=Q.lookupPath(b,{follow:!0});X=Ae.node}else X=b;if(!X.node_ops.setattr)throw new Q.ErrnoError(63);if(Q.isDir(X.mode))throw new Q.ErrnoError(31);if(!Q.isFile(X.mode))throw new Q.ErrnoError(28);var xe=Q.nodePermissions(X,"w");if(xe)throw new Q.ErrnoError(xe);X.node_ops.setattr(X,{size:M,timestamp:Date.now()})},ftruncate:function(b,M){var X=Q.getStream(b);if(!X)throw new Q.ErrnoError(8);if((X.flags&2097155)===0)throw new Q.ErrnoError(28);Q.truncate(X.node,M)},utime:function(b,M,X){var Ae=Q.lookupPath(b,{follow:!0}),xe=Ae.node;xe.node_ops.setattr(xe,{timestamp:Math.max(M,X)})},open:function(b,M,X,Ae,xe){if(b==="")throw new Q.ErrnoError(44);M=typeof M=="string"?Q.modeStringToFlags(M):M,X=typeof X>"u"?438:X,M&64?X=X&4095|32768:X=0;var Me;if(typeof b=="object")Me=b;else{b=$t.normalize(b);try{var ze=Q.lookupPath(b,{follow:!(M&131072)});Me=ze.node}catch{}}var Ye=!1;if(M&64)if(Me){if(M&128)throw new Q.ErrnoError(20)}else Me=Q.mknod(b,X,0),Ye=!0;if(!Me)throw new Q.ErrnoError(44);if(Q.isChrdev(Me.mode)&&(M&=-513),M&65536&&!Q.isDir(Me.mode))throw new Q.ErrnoError(54);if(!Ye){var it=Q.mayOpen(Me,M);if(it)throw new Q.ErrnoError(it)}M&512&&Q.truncate(Me,0),M&=-641;var Gt=Q.createStream({node:Me,path:Q.getPath(Me),flags:M,seekable:!0,position:0,stream_ops:Me.stream_ops,ungotten:[],error:!1},Ae,xe);Gt.stream_ops.open&&Gt.stream_ops.open(Gt),t.logReadFiles&&!(M&1)&&(Q.readFiles||(Q.readFiles={}),b in Q.readFiles||(Q.readFiles[b]=1,C("FS.trackingDelegate error on read file: "+b)));try{if(Q.trackingDelegate.onOpenFile){var Zt=0;(M&2097155)!==1&&(Zt|=Q.tracking.openFlags.READ),(M&2097155)!==0&&(Zt|=Q.tracking.openFlags.WRITE),Q.trackingDelegate.onOpenFile(b,Zt)}}catch(vn){C("FS.trackingDelegate['onOpenFile']('"+b+"', flags) threw an exception: "+vn.message)}return Gt},close:function(b){if(Q.isClosed(b))throw new Q.ErrnoError(8);b.getdents&&(b.getdents=null);try{b.stream_ops.close&&b.stream_ops.close(b)}catch(M){throw M}finally{Q.closeStream(b.fd)}b.fd=null},isClosed:function(b){return b.fd===null},llseek:function(b,M,X){if(Q.isClosed(b))throw new Q.ErrnoError(8);if(!b.seekable||!b.stream_ops.llseek)throw new Q.ErrnoError(70);if(X!=0&&X!=1&&X!=2)throw new Q.ErrnoError(28);return b.position=b.stream_ops.llseek(b,M,X),b.ungotten=[],b.position},read:function(b,M,X,Ae,xe){if(Ae<0||xe<0)throw new Q.ErrnoError(28);if(Q.isClosed(b))throw new Q.ErrnoError(8);if((b.flags&2097155)===1)throw new Q.ErrnoError(8);if(Q.isDir(b.node.mode))throw new Q.ErrnoError(31);if(!b.stream_ops.read)throw new Q.ErrnoError(28);var Me=typeof xe<"u";if(!Me)xe=b.position;else if(!b.seekable)throw new Q.ErrnoError(70);var ze=b.stream_ops.read(b,M,X,Ae,xe);return Me||(b.position+=ze),ze},write:function(b,M,X,Ae,xe,Me){if(Ae<0||xe<0)throw new Q.ErrnoError(28);if(Q.isClosed(b))throw new Q.ErrnoError(8);if((b.flags&2097155)===0)throw new Q.ErrnoError(8);if(Q.isDir(b.node.mode))throw new Q.ErrnoError(31);if(!b.stream_ops.write)throw new Q.ErrnoError(28);b.flags&1024&&Q.llseek(b,0,2);var ze=typeof xe<"u";if(!ze)xe=b.position;else if(!b.seekable)throw new Q.ErrnoError(70);var Ye=b.stream_ops.write(b,M,X,Ae,xe,Me);ze||(b.position+=Ye);try{b.path&&Q.trackingDelegate.onWriteToFile&&Q.trackingDelegate.onWriteToFile(b.path)}catch(it){C("FS.trackingDelegate['onWriteToFile']('"+b.path+"') threw an exception: "+it.message)}return Ye},allocate:function(b,M,X){if(Q.isClosed(b))throw new Q.ErrnoError(8);if(M<0||X<=0)throw new Q.ErrnoError(28);if((b.flags&2097155)===0)throw new Q.ErrnoError(8);if(!Q.isFile(b.node.mode)&&!Q.isDir(b.node.mode))throw new Q.ErrnoError(43);if(!b.stream_ops.allocate)throw new Q.ErrnoError(138);b.stream_ops.allocate(b,M,X)},mmap:function(b,M,X,Ae,xe,Me,ze){if((Me&2)!==0&&(ze&2)===0&&(b.flags&2097155)!==2)throw new Q.ErrnoError(2);if((b.flags&2097155)===1)throw new Q.ErrnoError(2);if(!b.stream_ops.mmap)throw new Q.ErrnoError(43);return b.stream_ops.mmap(b,M,X,Ae,xe,Me,ze)},msync:function(b,M,X,Ae,xe){return!b||!b.stream_ops.msync?0:b.stream_ops.msync(b,M,X,Ae,xe)},munmap:function(b){return 0},ioctl:function(b,M,X){if(!b.stream_ops.ioctl)throw new Q.ErrnoError(59);return b.stream_ops.ioctl(b,M,X)},readFile:function(b,M){if(M=M||{},M.flags=M.flags||"r",M.encoding=M.encoding||"binary",M.encoding!=="utf8"&&M.encoding!=="binary")throw new Error('Invalid encoding type "'+M.encoding+'"');var X,Ae=Q.open(b,M.flags),xe=Q.stat(b),Me=xe.size,ze=new Uint8Array(Me);return Q.read(Ae,ze,0,Me,0),M.encoding==="utf8"?X=ee(ze,0):M.encoding==="binary"&&(X=ze),Q.close(Ae),X},writeFile:function(b,M,X){X=X||{},X.flags=X.flags||"w";var Ae=Q.open(b,X.flags,X.mode);if(typeof M=="string"){var xe=new Uint8Array(G(M)+1),Me=U(M,xe,0,xe.length);Q.write(Ae,xe,0,Me,void 0,X.canOwn)}else if(ArrayBuffer.isView(M))Q.write(Ae,M,0,M.byteLength,void 0,X.canOwn);else throw new Error("Unsupported data type");Q.close(Ae)},cwd:function(){return Q.currentPath},chdir:function(b){var M=Q.lookupPath(b,{follow:!0});if(M.node===null)throw new Q.ErrnoError(44);if(!Q.isDir(M.node.mode))throw new Q.ErrnoError(54);var X=Q.nodePermissions(M.node,"x");if(X)throw new Q.ErrnoError(X);Q.currentPath=M.path},createDefaultDirectories:function(){Q.mkdir("/tmp"),Q.mkdir("/home"),Q.mkdir("/home/web_user")},createDefaultDevices:function(){Q.mkdir("/dev"),Q.registerDevice(Q.makedev(1,3),{read:function(){return 0},write:function(Ae,xe,Me,ze,Ye){return ze}}),Q.mkdev("/dev/null",Q.makedev(1,3)),xi.register(Q.makedev(5,0),xi.default_tty_ops),xi.register(Q.makedev(6,0),xi.default_tty1_ops),Q.mkdev("/dev/tty",Q.makedev(5,0)),Q.mkdev("/dev/tty1",Q.makedev(6,0));var b;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var M=new Uint8Array(1);b=function(){return crypto.getRandomValues(M),M[0]}}else if(d)try{var X=null;b=function(){return X.randomBytes(1)[0]}}catch{}b||(b=function(){Ce("random_device")}),Q.createDevice("/dev","random",b),Q.createDevice("/dev","urandom",b),Q.mkdir("/dev/shm"),Q.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){Q.mkdir("/proc"),Q.mkdir("/proc/self"),Q.mkdir("/proc/self/fd"),Q.mount({mount:function(){var b=Q.createNode("/proc/self","fd",16895,73);return b.node_ops={lookup:function(M,X){var Ae=+X,xe=Q.getStream(Ae);if(!xe)throw new Q.ErrnoError(8);var Me={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return xe.path}}};return Me.parent=Me,Me}},b}},{},"/proc/self/fd")},createStandardStreams:function(){t.stdin?Q.createDevice("/dev","stdin",t.stdin):Q.symlink("/dev/tty","/dev/stdin"),t.stdout?Q.createDevice("/dev","stdout",null,t.stdout):Q.symlink("/dev/tty","/dev/stdout"),t.stderr?Q.createDevice("/dev","stderr",null,t.stderr):Q.symlink("/dev/tty1","/dev/stderr"),Q.open("/dev/stdin","r"),Q.open("/dev/stdout","w"),Q.open("/dev/stderr","w")},ensureErrnoError:function(){Q.ErrnoError||(Q.ErrnoError=function(M,X){this.node=X,this.setErrno=function(Ae){this.errno=Ae},this.setErrno(M),this.message="FS error"},Q.ErrnoError.prototype=new Error,Q.ErrnoError.prototype.constructor=Q.ErrnoError,[44].forEach(function(b){Q.genericErrors[b]=new Q.ErrnoError(b),Q.genericErrors[b].stack="<generic error, no stack>"}))},staticInit:function(){Q.ensureErrnoError(),Q.nameTable=new Array(4096),Q.mount(gn,{},"/"),Q.createDefaultDirectories(),Q.createDefaultDevices(),Q.createSpecialDirectories(),Q.filesystems={MEMFS:gn}},init:function(b,M,X){Q.init.initialized=!0,Q.ensureErrnoError(),t.stdin=b||t.stdin,t.stdout=M||t.stdout,t.stderr=X||t.stderr,Q.createStandardStreams()},quit:function(){Q.init.initialized=!1;var b=t._fflush;b&&b(0);for(var M=0;M<Q.streams.length;M++){var X=Q.streams[M];!X||Q.close(X)}},getMode:function(b,M){var X=0;return b&&(X|=365),M&&(X|=146),X},joinPath:function(b,M){var X=$t.join.apply(null,b);return M&&X[0]=="/"&&(X=X.substr(1)),X},absolutePath:function(b,M){return Nr.resolve(M,b)},standardizePath:function(b){return $t.normalize(b)},findObject:function(b,M){var X=Q.analyzePath(b,M);return X.exists?X.object:(na(X.error),null)},analyzePath:function(b,M){try{var X=Q.lookupPath(b,{follow:!M});b=X.path}catch{}var Ae={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var X=Q.lookupPath(b,{parent:!0});Ae.parentExists=!0,Ae.parentPath=X.path,Ae.parentObject=X.node,Ae.name=$t.basename(b),X=Q.lookupPath(b,{follow:!M}),Ae.exists=!0,Ae.path=X.path,Ae.object=X.node,Ae.name=X.node.name,Ae.isRoot=X.path==="/"}catch(xe){Ae.error=xe.errno}return Ae},createFolder:function(b,M,X,Ae){var xe=$t.join2(typeof b=="string"?b:Q.getPath(b),M),Me=Q.getMode(X,Ae);return Q.mkdir(xe,Me)},createPath:function(b,M,X,Ae){b=typeof b=="string"?b:Q.getPath(b);for(var xe=M.split("/").reverse();xe.length;){var Me=xe.pop();if(!!Me){var ze=$t.join2(b,Me);try{Q.mkdir(ze)}catch{}b=ze}}return ze},createFile:function(b,M,X,Ae,xe){var Me=$t.join2(typeof b=="string"?b:Q.getPath(b),M),ze=Q.getMode(Ae,xe);return Q.create(Me,ze)},createDataFile:function(b,M,X,Ae,xe,Me){var ze=M?$t.join2(typeof b=="string"?b:Q.getPath(b),M):b,Ye=Q.getMode(Ae,xe),it=Q.create(ze,Ye);if(X){if(typeof X=="string"){for(var Gt=new Array(X.length),Zt=0,vn=X.length;Zt<vn;++Zt)Gt[Zt]=X.charCodeAt(Zt);X=Gt}Q.chmod(it,Ye|146);var zt=Q.open(it,"w");Q.write(zt,X,0,X.length,0,Me),Q.close(zt),Q.chmod(it,Ye)}return it},createDevice:function(b,M,X,Ae){var xe=$t.join2(typeof b=="string"?b:Q.getPath(b),M),Me=Q.getMode(!!X,!!Ae);Q.createDevice.major||(Q.createDevice.major=64);var ze=Q.makedev(Q.createDevice.major++,0);return Q.registerDevice(ze,{open:function(Ye){Ye.seekable=!1},close:function(Ye){Ae&&Ae.buffer&&Ae.buffer.length&&Ae(10)},read:function(Ye,it,Gt,Zt,vn){for(var zt=0,qt=0;qt<Zt;qt++){var yn;try{yn=X()}catch{throw new Q.ErrnoError(29)}if(yn===void 0&&zt===0)throw new Q.ErrnoError(6);if(yn==null)break;zt++,it[Gt+qt]=yn}return zt&&(Ye.node.timestamp=Date.now()),zt},write:function(Ye,it,Gt,Zt,vn){for(var zt=0;zt<Zt;zt++)try{Ae(it[Gt+zt])}catch{throw new Q.ErrnoError(29)}return Zt&&(Ye.node.timestamp=Date.now()),zt}}),Q.mkdev(xe,Me,ze)},createLink:function(b,M,X,Ae,xe){var Me=$t.join2(typeof b=="string"?b:Q.getPath(b),M);return Q.symlink(X,Me)},forceLoadFile:function(b){if(b.isDevice||b.isFolder||b.link||b.contents)return!0;var M=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(g)try{b.contents=Jr(g(b.url),!0),b.usedBytes=b.contents.length}catch{M=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return M||na(29),M},createLazyFile:function(b,M,X,Ae,xe){function Me(){this.lengthKnown=!1,this.chunks=[]}if(Me.prototype.get=function(zt){if(!(zt>this.length-1||zt<0)){var qt=zt%this.chunkSize,yn=zt/this.chunkSize|0;return this.getter(yn)[qt]}},Me.prototype.setDataGetter=function(zt){this.getter=zt},Me.prototype.cacheLength=function(){var zt=new XMLHttpRequest;if(zt.open("HEAD",X,!1),zt.send(null),!(zt.status>=200&&zt.status<300||zt.status===304))throw new Error("Couldn't load "+X+". Status: "+zt.status);var qt=Number(zt.getResponseHeader("Content-length")),yn,K0=(yn=zt.getResponseHeader("Accept-Ranges"))&&yn==="bytes",Na=(yn=zt.getResponseHeader("Content-Encoding"))&&yn==="gzip",Zr=1024*1024;K0||(Zr=qt);var jn=function(wi,O0){if(wi>O0)throw new Error("invalid range ("+wi+", "+O0+") or no bytes requested!");if(O0>qt-1)throw new Error("only "+qt+" bytes available! programmer error!");var c0=new XMLHttpRequest;if(c0.open("GET",X,!1),qt!==Zr&&c0.setRequestHeader("Range","bytes="+wi+"-"+O0),typeof Uint8Array<"u"&&(c0.responseType="arraybuffer"),c0.overrideMimeType&&c0.overrideMimeType("text/plain; charset=x-user-defined"),c0.send(null),!(c0.status>=200&&c0.status<300||c0.status===304))throw new Error("Couldn't load "+X+". Status: "+c0.status);return c0.response!==void 0?new Uint8Array(c0.response||[]):Jr(c0.responseText||"",!0)},mr=this;mr.setDataGetter(function(wi){var O0=wi*Zr,c0=(wi+1)*Zr-1;if(c0=Math.min(c0,qt-1),typeof mr.chunks[wi]>"u"&&(mr.chunks[wi]=jn(O0,c0)),typeof mr.chunks[wi]>"u")throw new Error("doXHR failed!");return mr.chunks[wi]}),(Na||!qt)&&(Zr=qt=1,qt=this.getter(0).length,Zr=qt,v("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=qt,this._chunkSize=Zr,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var ze=new Me;Object.defineProperties(ze,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var Ye={isDevice:!1,contents:ze}}else var Ye={isDevice:!1,url:X};var it=Q.createFile(b,M,Ye,Ae,xe);Ye.contents?it.contents=Ye.contents:Ye.url&&(it.contents=null,it.url=Ye.url),Object.defineProperties(it,{usedBytes:{get:function(){return this.contents.length}}});var Gt={},Zt=Object.keys(it.stream_ops);return Zt.forEach(function(vn){var zt=it.stream_ops[vn];Gt[vn]=function(){if(!Q.forceLoadFile(it))throw new Q.ErrnoError(29);return zt.apply(null,arguments)}}),Gt.read=function(zt,qt,yn,K0,Na){if(!Q.forceLoadFile(it))throw new Q.ErrnoError(29);var Zr=zt.node.contents;if(Na>=Zr.length)return 0;var jn=Math.min(Zr.length-Na,K0);if(Zr.slice)for(var mr=0;mr<jn;mr++)qt[yn+mr]=Zr[Na+mr];else for(var mr=0;mr<jn;mr++)qt[yn+mr]=Zr.get(Na+mr);return jn},it.stream_ops=Gt,it},createPreloadedFile:function(b,M,X,Ae,xe,Me,ze,Ye,it,Gt){Browser.init();var Zt=M?Nr.resolve($t.join2(b,M)):b;function vn(zt){function qt(K0){Gt&&Gt(),Ye||Q.createDataFile(b,M,K0,Ae,xe,it),Me&&Me(),gt()}var yn=!1;t.preloadPlugins.forEach(function(K0){yn||K0.canHandle(Zt)&&(K0.handle(zt,Zt,qt,function(){ze&&ze(),gt()}),yn=!0)}),yn||qt(zt)}_t(),typeof X=="string"?Browser.asyncLoad(X,function(zt){vn(zt)},ze):vn(X)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(b,M,X){M=M||function(){},X=X||function(){};var Ae=Q.indexedDB();try{var xe=Ae.open(Q.DB_NAME(),Q.DB_VERSION)}catch(Me){return X(Me)}xe.onupgradeneeded=function(){v("creating db");var ze=xe.result;ze.createObjectStore(Q.DB_STORE_NAME)},xe.onsuccess=function(){var ze=xe.result,Ye=ze.transaction([Q.DB_STORE_NAME],"readwrite"),it=Ye.objectStore(Q.DB_STORE_NAME),Gt=0,Zt=0,vn=b.length;function zt(){Zt==0?M():X()}b.forEach(function(qt){var yn=it.put(Q.analyzePath(qt).object.contents,qt);yn.onsuccess=function(){Gt++,Gt+Zt==vn&&zt()},yn.onerror=function(){Zt++,Gt+Zt==vn&&zt()}}),Ye.onerror=X},xe.onerror=X},loadFilesFromDB:function(b,M,X){M=M||function(){},X=X||function(){};var Ae=Q.indexedDB();try{var xe=Ae.open(Q.DB_NAME(),Q.DB_VERSION)}catch(Me){return X(Me)}xe.onupgradeneeded=X,xe.onsuccess=function(){var ze=xe.result;try{var Ye=ze.transaction([Q.DB_STORE_NAME],"readonly")}catch(qt){X(qt);return}var it=Ye.objectStore(Q.DB_STORE_NAME),Gt=0,Zt=0,vn=b.length;function zt(){Zt==0?M():X()}b.forEach(function(qt){var yn=it.get(qt);yn.onsuccess=function(){Q.analyzePath(qt).exists&&Q.unlink(qt),Q.createDataFile($t.dirname(qt),$t.basename(qt),yn.result,!0,!0,!0),Gt++,Gt+Zt==vn&&zt()},yn.onerror=function(){Zt++,Gt+Zt==vn&&zt()}}),Ye.onerror=X},xe.onerror=X}},he={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(b,M){if(M[0]!=="/"){var X;if(b===-100)X=Q.cwd();else{var Ae=Q.getStream(b);if(!Ae)throw new Q.ErrnoError(8);X=Ae.path}M=$t.join2(X,M)}return M},doStat:function(b,M,X){try{var Ae=b(M)}catch(xe){if(xe&&xe.node&&$t.normalize(M)!==$t.normalize(Q.getPath(xe.node)))return-54;throw xe}return We[X>>2]=Ae.dev,We[X+4>>2]=0,We[X+8>>2]=Ae.ino,We[X+12>>2]=Ae.mode,We[X+16>>2]=Ae.nlink,We[X+20>>2]=Ae.uid,We[X+24>>2]=Ae.gid,We[X+28>>2]=Ae.rdev,We[X+32>>2]=0,on=[Ae.size>>>0,(xt=Ae.size,+Le(xt)>=1?xt>0?(Ee(+rt(xt/4294967296),4294967295)|0)>>>0:~~+Pe((xt-+(~~xt>>>0))/4294967296)>>>0:0)],We[X+40>>2]=on[0],We[X+44>>2]=on[1],We[X+48>>2]=4096,We[X+52>>2]=Ae.blocks,We[X+56>>2]=Ae.atime.getTime()/1e3|0,We[X+60>>2]=0,We[X+64>>2]=Ae.mtime.getTime()/1e3|0,We[X+68>>2]=0,We[X+72>>2]=Ae.ctime.getTime()/1e3|0,We[X+76>>2]=0,on=[Ae.ino>>>0,(xt=Ae.ino,+Le(xt)>=1?xt>0?(Ee(+rt(xt/4294967296),4294967295)|0)>>>0:~~+Pe((xt-+(~~xt>>>0))/4294967296)>>>0:0)],We[X+80>>2]=on[0],We[X+84>>2]=on[1],0},doMsync:function(b,M,X,Ae,xe){var Me=Te.slice(b,b+X);Q.msync(M,Me,xe,X,Ae)},doMkdir:function(b,M){return b=$t.normalize(b),b[b.length-1]==="/"&&(b=b.substr(0,b.length-1)),Q.mkdir(b,M,0),0},doMknod:function(b,M,X){switch(M&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return Q.mknod(b,M,X),0},doReadlink:function(b,M,X){if(X<=0)return-28;var Ae=Q.readlink(b),xe=Math.min(X,G(Ae)),Me=Be[M+xe];return O(Ae,M,X+1),Be[M+xe]=Me,xe},doAccess:function(b,M){if(M&-8)return-28;var X,Ae=Q.lookupPath(b,{follow:!0});if(X=Ae.node,!X)return-44;var xe="";return M&4&&(xe+="r"),M&2&&(xe+="w"),M&1&&(xe+="x"),xe&&Q.nodePermissions(X,xe)?-2:0},doDup:function(b,M,X){var Ae=Q.getStream(X);return Ae&&Q.close(Ae),Q.open(b,M,0,X,X).fd},doReadv:function(b,M,X,Ae){for(var xe=0,Me=0;Me<X;Me++){var ze=We[M+Me*8>>2],Ye=We[M+(Me*8+4)>>2],it=Q.read(b,Be,ze,Ye,Ae);if(it<0)return-1;if(xe+=it,it<Ye)break}return xe},doWritev:function(b,M,X,Ae){for(var xe=0,Me=0;Me<X;Me++){var ze=We[M+Me*8>>2],Ye=We[M+(Me*8+4)>>2],it=Q.write(b,Be,ze,Ye,Ae);if(it<0)return-1;xe+=it}return xe},varargs:0,get:function(b){he.varargs+=4;var M=We[he.varargs-4>>2];return M},getStr:function(){var b=ue(he.get());return b},getStreamFromFD:function(b){b===void 0&&(b=he.get());var M=Q.getStream(b);if(!M)throw new Q.ErrnoError(8);return M},get64:function(){var b=he.get();return he.get(),b},getZero:function(){he.get()}};function qe(b,M){he.varargs=M;try{var X=he.getStreamFromFD(),Ae=he.get();switch(Ae){case 0:{var xe=he.get();if(xe<0)return-28;var Me;return Me=Q.open(X.path,X.flags,0,xe),Me.fd}case 1:case 2:return 0;case 3:return X.flags;case 4:{var xe=he.get();return X.flags|=xe,0}case 12:{var xe=he.get(),ze=0;return ye[xe+ze>>1]=2,0}case 13:case 14:return 0;case 16:case 8:return-28;case 9:return na(28),-1;default:return-28}}catch(Ye){return(typeof Q>"u"||!(Ye instanceof Q.ErrnoError))&&Ce(Ye),-Ye.errno}}function st(b,M){he.varargs=M;try{var X=he.getStr(),Ae=he.get(),xe=he.get(),Me=Q.open(X,Ae,xe);return Me.fd}catch(ze){return(typeof Q>"u"||!(ze instanceof Q.ErrnoError))&&Ce(ze),-ze.errno}}function Ze(b,M){he.varargs=M;try{var X=he.getStreamFromFD(),Ae=he.get();switch(Ae){case 21509:case 21505:return X.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return X.tty?0:-59;case 21519:{if(!X.tty)return-59;var xe=he.get();return We[xe>>2]=0,0}case 21520:return X.tty?-28:-59;case 21531:{var xe=he.get();return Q.ioctl(X,Ae,xe)}case 21523:return X.tty?0:-59;case 21524:return X.tty?0:-59;default:Ce("bad ioctl syscall "+Ae)}}catch(Me){return(typeof Q>"u"||!(Me instanceof Q.ErrnoError))&&Ce(Me),-Me.errno}}function ft(){}function tn(b,M,X){Te.set(Te.subarray(M,M+X),b)}function mn(b){Ce("OOM")}function Cn(b){mn()}function Sn(b){E0(b)}function Tn(b){try{var M=he.getStreamFromFD(b);return Q.close(M),0}catch(X){return(typeof Q>"u"||!(X instanceof Q.ErrnoError))&&Ce(X),X.errno}}function hn(b,M,X,Ae){try{var xe=he.getStreamFromFD(b),Me=he.doReadv(xe,M,X);return We[Ae>>2]=Me,0}catch(ze){return(typeof Q>"u"||!(ze instanceof Q.ErrnoError))&&Ce(ze),ze.errno}}function jt(b,M,X,Ae,xe){try{var Me=he.getStreamFromFD(b),ze=4294967296,Ye=X*ze+(M>>>0),it=9007199254740992;return Ye<=-it||Ye>=it?-61:(Q.llseek(Me,Ye,Ae),on=[Me.position>>>0,(xt=Me.position,+Le(xt)>=1?xt>0?(Ee(+rt(xt/4294967296),4294967295)|0)>>>0:~~+Pe((xt-+(~~xt>>>0))/4294967296)>>>0:0)],We[xe>>2]=on[0],We[xe+4>>2]=on[1],Me.getdents&&Ye===0&&Ae===0&&(Me.getdents=null),0)}catch(Gt){return(typeof Q>"u"||!(Gt instanceof Q.ErrnoError))&&Ce(Gt),Gt.errno}}function Xn(b,M,X,Ae){try{var xe=he.getStreamFromFD(b),Me=he.doWritev(xe,M,X);return We[Ae>>2]=Me,0}catch(ze){return(typeof Q>"u"||!(ze instanceof Q.ErrnoError))&&Ce(ze),ze.errno}}Q.staticInit();function Jr(b,M,X){var Ae=X>0?X:G(b)+1,xe=new Array(Ae),Me=U(b,xe,0,xe.length);return M&&(xe.length=Me),xe}var dn={f:ki,c:qe,k:st,h:Ze,a:ft,j:tn,d:Cn,l:Sn,b:Tn,g:hn,i:jt,e:Xn,memory:R,table:j},oi=Xt();t.asm=oi;var m0=t.___wasm_call_ctors=function(){return(m0=t.___wasm_call_ctors=t.asm.m).apply(null,arguments)};t._main=function(){return(t._main=t.asm.n).apply(null,arguments)},t.___errno_location=function(){return(t.___errno_location=t.asm.o).apply(null,arguments)};var Dn=t._malloc=function(){return(Dn=t._malloc=t.asm.p).apply(null,arguments)},Ur=t.stackSave=function(){return(Ur=t.stackSave=t.asm.q).apply(null,arguments)},en=t.stackAlloc=function(){return(en=t.stackAlloc=t.asm.r).apply(null,arguments)},Rt=t.stackRestore=function(){return(Rt=t.stackRestore=t.asm.s).apply(null,arguments)};t.asm=oi,t.ccall=I,t.cwrap=q,t.setValue=H,t.FS=Q;var D0;t.then=function(b){if(D0)b(t);else{var M=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){M&&M(),b(t)}}return t};function vi(b){this.name="ExitStatus",this.message="Program terminated with exit("+b+")",this.status=b}$e=function b(){D0||sn(),D0||($e=b)};function Vr(b){var M=t._main;b=b||[];var X=b.length+1,Ae=en((X+1)*4);We[Ae>>2]=ne(o);for(var xe=1;xe<X;xe++)We[(Ae>>2)+xe]=ne(b[xe-1]);We[(Ae>>2)+X]=0;try{var Me=M(X,Ae);E0(Me,!0)}catch(Ye){if(Ye instanceof vi)return;if(Ye=="unwind"){D=!0;return}else{var ze=Ye;Ye&&typeof Ye=="object"&&Ye.stack&&(ze=[Ye,Ye.stack]),C("exception thrown: "+ze),s(1,Ye)}}finally{}}function sn(b){if(b=b||a,ve>0||(fe(),ve>0))return;function M(){D0||(D0=!0,!te&&(He(),oe(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Ni&&Vr(b),Y()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),M()},1)):M()}t.run=sn;function E0(b,M){M&&D&&b===0||(D||(te=!0,t.onExit&&t.onExit(b)),s(b,new vi(b)))}if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();var Ni=!0;return t.noInitialRun&&(Ni=!1),D=!0,sn(),e}}();/** @license

cpp.js - Simple implementation of the C Preprocessor in Javascript

Copyright (c) 2011, Alexander Christoph Gessler
All rights reserved.

Redistribution and use of this software in source and binary forms,
with or without modification, are permitted provided that the
following conditions are met:

* Redistributions of source code must retain the above
  copyright notice, this list of conditions and the
  following disclaimer.

* Redistributions in binary form must reproduce the above
  copyright notice, this list of conditions and the
  following disclaimer in the documentation and/or other
  materials provided with the distribution.

* Neither the name of the cpp.js team, nor the names of its
  contributors may be used to endorse or promote products
  derived from this software without specific prior
  written permission of the cpp.js Development Team.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function IM(n){var e=function(U){return U.trim()},t=function(U){U=("__"+U.replace(/\r\n/g,`
`)+"__").split("");var O=!1,G=!1,ne=!1,se=0;for(let ie=0,Re=U.length;ie<Re;ie++){if(ne){(U[ie]==="'"||U[ie]==='"')&&U[ie-1]!=="\\"&&(ne=!1);continue}if(O){U[ie]==="*"&&U[ie+1]==="/"&&(U[ie+1]="",O=!1),U[ie]="",U[ie]===`
`&&++se;continue}if(G){U[ie+1]===`
`&&(G=!1),U[ie]="";continue}if(U[ie]===`
`)if(U[ie-1]==="\\")U[ie-1]="",U[ie]="",++se;else for(;se>0;)U[ie]+=`
`,--se;if(ne=U[ie]==="'"||U[ie]==='"',U[ie]==="/"){if(U[ie+1]==="*"){U[ie]="",O=!0;continue}if(U[ie+1]==="/"){U[ie]="",G=!0;continue}}}return U.join("").slice(2,-2)},r=function(U,O){return(U[O]==='"'||U[O]==="'")&&(!O||U[O-1]!=="\\"||O>1&&U[O-2]==="\\")},i={signal_char:"#",warn_func:function(U){console.log(U)},error_func:function(U){throw console.log(U),U},comment_stripper:t,include_func:null,completion_func:null,pragma_func:function(U){return null}};if(n)for(var a in i)a in n||(n[a]=i[a]);else n=i;n.include_func&&!n.completion_func&&n.error_func("include_func but not completion_func specified");var o=n.error_func;n.error_func=function(U){throw o(U),U};var s=new RegExp("^"+n.signal_char+"(\\w+)[ 	]*(.*?)[ 	]*$","m"),l=/\b(d(?!efined)|[a-ce-zA-Z_])\w*(?![\w"])/g,u=/^(d(?!efined)|[a-ce-zA-Z_])\w*$/g,d=/^((?:d(?!efined)|[a-ce-zA-Z_])\w*)\s*\((.*)\)$/g,h=/defined\s+([a-zA-Z_]\w*)/g,f=/defined\s*\((\s*[a-zA-Z_]\w*\s*)\)/g,m=/__defined_magic_([a-zA-Z_]\w*)_/,g=/\b(\+|-|)(0|0x|)([1-9a-f][0-9a-f]*|0)([ul]*)\b/ig,_=/"(.*?)"/g,E=/[+\-*%\/&^|]?=/g,x=/--|\+\+/g,v=/(?:(<)(.*)>|"(.*)")(.*)/,C="__doublesharp_magic__",V=new RegExp(C,"g"),D="__whitespace_magic__",H=new RegExp(D,"g"),R="__empty_magic__",j=new RegExp(R,"g"),te="__nosubs__",$=new RegExp(te,"g"),z={"==":1,"!=":1,"+":1,"-":1,"*":1,"/":1,"%":1,"<=":1,">=":1,"<":1,">":1,"=":1,"+=":1,"*=":1,"/=":1,"&=":1,"|=":1,"^=":1,"#":1,"##":1,"->":1},I={},q={},P=null,ee=0,ue={};return{clear:function(){I={},ue={},q={},ee=0},defined:function(U){return U in I},define:function(U,O){var G=this._get_macro_info(U);!this._is_identifier(U)&&!G&&n.error_func("not a valid preprocessor identifier: '"+U+"'"),typeof O=="number"&&(O=O.toString(10)),G?(U=G.name,this.undefine(U),q[U]=G):this.undefine(U),I[U]=O||"",ue[U.length]=(ue[U.length]||0)+1,U.length>ee&&(ee=U.length)},undefine:function(U){if(U in I){delete I[U];var O=ue[U.length]-1;if(U.length===ee&&!O){ee=0;for(let ne=U.length-1;ne>=0;--ne)if(ue[ne]){ee=ne;break}}ue[U.length]=O,delete q[U]}else{var G=this._get_macro_info(U);G&&this.undefine(G.name)}},define_multiple:function(U){for(var O in U)this.define(O,U[O])},run:function(U,O){O=O||"<unnamed>",U||ye("input empty or null"),U=n.comment_stripper(U);var G=U.split(s),ne=new Array(Math.floor(G.length/3)+2),se=0;for(let lt=0;lt<ne.length;++lt)ne[lt]="";var ie=0,Re=1,Be,Te=[],ye=function(lt){n.error_func("(cpp) error # "+O+":"+Re+": "+lt)},We=function(lt){n.warn_func("(cpp) warning # "+O+":"+Re+": "+lt)},at=this,Ke=function(lt,Ie,Ue){switch(lt){case"define":var k,De;Ie=e(Ie);for(var we=void 0,le=0;le<Ie.length;++le)if(Ie[le]==="(")we=(we||0)+1;else if(Ie[le]===")"&&--we===0||Ie[le].match(/\s/)&&we===void 0){Ie[le]===")"&&++le,k=Ie.slice(0,le),De=e(Ie.slice(le));break}we&&ye("unbalanced parentheses in define: "+Ie),k===void 0&&(k=Ie),at.defined(k)&&We(k+" redefined"),!at._is_identifier(k)&&!at._is_macro(k)&&ye("not a valid preprocessor identifier: '"+k+"'"),at.define(k,De);break;case"undef":at.undefine(Ie);break;case"include":Ie=at.subs(Ie,{},ye,We);var re=Ie.match(v);re[4]&&ye("unrecognized characters in include: "+Ie);var fe=(re[2]||"")+(re[3]||"");return n.include_func||ye("include directive not supported, no handler specified"),n.include_func(fe,re[1]==="<",function(He){He===null&&ye("failed to access include file: "+fe);var oe={};for(var Y in n)oe[Y]=n[Y];var _e;oe.completion_func=function(Fe,Le,Pe){for(ne.length=se,se+=Le.length,ne=ne.concat(Le),at._set_state(_e),++Ue;Ue<G.length;++Ue)if(!tt(Ue,G[Ue]))return!1;at._result(ne,I)},_e=IM(oe),_e._set_state(at),_e.run(He,fe)}),!1;case"error":ye("#error: "+Ie);break;case"pragma":n.pragma_func(Ie)||We("ignoring unrecognized #pragma: "+Ie);break;default:We("unrecognized preprocessor command: "+lt);break}return!0},tt=function(lt,Ue){var Ue=G[lt];switch(lt%3){case 0:Re+=Ue.split(`
`).length-1,!ie&&e(Ue).length&&(ne[se++]=at.subs(Ue,ye,We));break;case 1:Be=Ue;break;case 2:var k=!0;switch(Be){case"ifdef":case"ifndef":Ue||ye("expected identifier after "+Be),Ue="(defined "+Ue+")",Be=="ifndef"&&(Ue="!"+Ue);case"if":Te.push(!1),Ue.length||ye("expected identifier after if");case"else":case"elif":var De=!1;(Be=="elif"||Be=="else")&&(De=Te[Te.length-1],ie>0&&--ie,Be=="else"&&Ue.length&&We("ignoring tokens after else")),ie>0||De||Be!="else"&&!at._eval(Ue,ye,We)?++ie:Te[Te.length-1]=!0;break;case"endif":Te.length||ye("endif with no matching if"),ie>0&&--ie,Te.pop();break;default:k=ie>0}if(!k&&!Ke(Be,Ue,lt))return!1;break}return!0};for(let lt=0;lt<G.length;++lt)if(!tt(lt,G[lt]))return null;return Te.length>0&&ye("unexpected EOF, expected endif"),this._result(ne,I)},subs:function(U,O,G,ne,se){G=G||n.error_func,ne=ne||n.warn_func;var ie=1e10,Re={};if(O)for(let lt in O)Re[lt]=ie;se=se||0;for(var Be=U,Te=/\b.|["']/g,ye,We=[],at=!1;ye=Te.exec(Be);){var Ke=ye.index;if(r(Be,Ke)&&(at=!at),!at)for(let lt=Math.min(Be.length-Ke,ee);lt>=1;--lt){if(!ue[lt])continue;let Ie=Be.slice(Ke,Ke+lt);if(Ie in I){if(Re[Ie]>Ke){We.push(Be.slice(0,Ke)),We.push(te+Ie),Be=Be.slice(Ke+Ie.length),Te.lastIndex=0;for(let Ue in Re)Re[Ue]!=ie&&(Re[Ue]>Ke?Re[Ue]-=Ke+Ie.length:delete Re[Ue]);break}else delete Re[Ie];var tt;if(this._is_macro(Ie)?tt=this._subs_macro(Be,Ie,{},G,ne,se,Ke):tt=this._subs_simple(Be,Ie,{},G,ne,se,Ke),tt===null)continue;tt[0]=this._handle_ops(tt[0],G,ne),tt[0]=this._handle_pragma(tt[0],G,ne),We.push(Be.slice(0,Ke)),Be=tt[0]+Be.slice(Ke+tt[1]),Te.lastIndex=0;for(let Ue in Re)Re[Ue]!=ie&&(Re[Ue]>Ke?Re[Ue]=tt[0].length-tt[1]+(Re[Ue]-Ke):delete Re[Ue]);Re[Ie]=tt[0].length;break}}}return We.push(Be),Be=We.join(""),se||(Be=this._remove_sentinels(Be)),Be},_set_state:function(U){U=U._get_state(),I=U.state,ue=U.macro_counts_by_length,q=U.macro_cache,ee=U.max_macro_length},_get_state:function(U){return{state:I,macro_counts_by_length:ue,macro_cache:q,max_macro_length:ee}},_result:function(U,O){for(let ne=U.length-1;ne>=0&&!U[ne];--ne)U.pop();var G=U.join(`
`);return n.completion_func&&n.completion_func(G,U,O),G},_is_identifier:function(U){return!!U.match(u)},_is_macro:function(U){return this._get_macro_info(U)!=null},_is_pp_special_token:function(U){return e(U)in z},_get_macro_info:function(U){if(q[U])return q[U];var O=d.exec(U);if(!O)return null;d.lastIndex=0;var G=O[2].split(",");if(G.length===1&&!e(G[0]))G=[];else for(let ie=0;ie<G.length;++ie){var ne=G[ie]=e(G[ie]);if(!this._is_identifier(ne)&&!this._is_macro(ne))return null}var se=new RegExp(O[1]+"\\s*\\(","g");return{params:G,pat:se,name:O[1],full:U}},_remove_sentinels:function(U){return U=U.replace(V,"##"),U=U.replace(H," "),U=U.replace(j,""),U=U.replace($,""),U},_handle_pragma:function(U,O,G){var ne=this;return U.replace(/_Pragma\s*\(\s*"(.*?([^\\]|\\\\))"\s*\)/g,function(se,ie){return ie=ie.replace(/\\"/g,'"').replace(/\\\\/g,"\\"),ie=ne._remove_sentinels(ie),ie=ne._concatenate_strings(ie),n.pragma_func(ie)||G("unrecognized _Pragma(): "+ie),""})},_concatenate_strings:function(U){var O=!1,G=null,ne=0,se=[];for(let ie=0;ie<U.length;++ie)r(U,ie)?(O?G=ie:G!==null&&(se.push(U.slice(ne,G)),ne=ie+1),O=!O):U[ie].match(/\s/)||(se.push(U.slice(ne,ie)),ne=ie,G=null);return se.push(U.slice(ne)),se.join("")},_handle_ops:function(U,O,G){var ne=[],se=!1,ie,Re;for(let lt=0;lt<U.length-1;++lt){if(r(U,lt)){se=!se;continue}if(!(U[lt]!=="#"||se)){var Be=U[lt+1]==="#",Te=null,ye=null,We=!1,at=0;if(Be){for(ie=lt-1;ie>=0;--ie)if(!U[ie].match(/\s/))r(U,ie)?We=!We:U[ie]==="("?++at:U[ie]===")"&&--at,Te=U[ie]+(Te||"");else if(Te!==null){if(!We&&!at)break;Te=" "+Te}++ie}else ie=lt;We=!1,at=0;var Ke=!0;for(Re=lt+(Be?2:1);Re<U.length;++Re)if(!U[Re].match(/\s/))Ke=!0,r(U,Re)?We=!We:U[Re]==="("?++at:U[Re]===")"&&--at,ye=(ye||"")+U[Re];else{if(ye!==null&&!We&&!at)break;(Be||Ke||We)&&ye!==null&&(ye=ye+" ",Ke=!1)}ye=e(ye||"");var tt;Be?(Te=e(Te||""),(!ye||!Te)&&O("## cannot appear at either end of a macro expansion"),(this._is_pp_special_token(Te)||this._is_pp_special_token(ye))&&!this._is_pp_special_token(Te+ye)&&O('pasting "'+Te+'" and "'+ye+'" does not give a valid preprocessing token'),tt=Te+ye,tt==="##"?tt=C:tt=tt.replace($,"")):(ye||O("# cannot appear at the end of a macro expansion"),tt='"'+ye.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'),ne.push(U.slice(0,ie)),ne.push(tt),Re<U.length&&ne.push(U.slice(Re)),U=ne.join(""),ne.length=0,lt=0}}return U},_subs_simple:function(U,O,G,ne,se,ie,Re){var Be=new RegExp(O+"(\\b|"+D+"|"+R+")","g");Be.lastIndex=Re||0;var Te=Be.exec(U);return!Te||Te.index!=Re?null:[I[O],Te[0].length]},_subs_macro:function(U,O,G,ne,se,ie,Re){var Be=this._get_macro_info(O);Be.pat.lastIndex=Re||0;var Te=Be.pat.exec(U);if(!Te||Te.index!=Re)return null;var ye=[],We,at=-1,Ke=!1;for(let fe=Te.index;fe<U.length;++fe)if(U[fe]===","&&!at&&(ye.push(e(U.slice(We,fe))),We=fe+1),U[fe]==="(")++at===0&&(We=fe+1);else if((U[fe]==='"'||U[fe]==="'")&&(!fe||U[fe-1]!=="\\"))Ke?--at:++at,Ke=!Ke;else if(U[fe]===")"&&--at===-1){ye.push(e(U.slice(We,fe))),We=fe+1;break}at!==-1&&ne("unbalanced parentheses, expected )"),ye.length!==Be.params.length&&(Be.params.length||ye.length>1||ye[0]?ne("illegal invocation of macro "+O+", expected "+Be.params.length+" parameters but got "+ye.length):ye=[]);for(let fe=0;fe<ye.length;++fe)ye[fe]||(ye[fe]=R);var tt=I[O];for(let fe=0;fe<Be.params.length;++fe){var lt=ye[fe].replace(/(\w)\s+(\w)/g,"$1"+D+"$2");lt=this.subs(lt,G,ne,se,ie+1);for(var Ie=new RegExp("^"+Be.params[fe]+"\\b"),Ue=!1,k=[],De,we=!0,le=0;le<tt.length;++le){if(tt[le]==="#")Ue=!0;else if(we&&(De=Ie.exec(tt.slice(le)))){if(!Ue){for(var re=le+De[0].length;re<tt.length;++re)if(tt[re]==="#")Ue=!0;else if(!tt[re].match(/\s/))break}k.push(tt.slice(0,le)),k.push(Ue?ye[fe]:lt),tt=tt.slice(le+De[0].length),le=-1;continue}else tt[le].match(/\s/)||(Ue=!1);we=tt[le].match(/\W/)}k.push(tt),tt=k.join("")}return[tt,We-Re]},_masked_eval:function(U){if(!P){P={};var O=[];try{O=[window,{window:1}]}catch{try{O=[window,{window:1,process:1,require:1,module:1,__filename:1,__dirname:1}]}catch{}}for(let ne=0;ne<O.length;++ne)for(var G in O[ne])P[G]=void 0;P.defined=this.defined}return P.__result__=!1,new Function("with(this) { __result__ = ("+U+"); }").call(P),P.__result__},_eval:function(U,O,G){var ne=U;U.match(_)&&O("string literal not allowed in if expression"),U.replace(/[=!<>]=/g,"").match(E)&&O("assignment operator not allowed in if expression"),U.match(x)&&O("--/++ operators not allowed in if expression"),U=U.replace(g,"$1$2$3"),U=U.replace(h,"defined($1)"),U=U.replace(f," __defined_magic_$1_ "),U=this.subs(U,{},O,G),U=U.replace(m,'defined("$1")'),U=U.replace(l," 0 ");try{var se=!!this._masked_eval(U)}catch(ie){O("error in expression: "+ne+" ("+ie+")")}return se}}}const XH=`
#ifndef _ULTRA64_TYPES_H_
#define _ULTRA64_TYPES_H_

#ifndef NULL
#define NULL    (void *)0
#endif

#define TRUE 1
#define FALSE 0

typedef signed char            s8;
typedef unsigned char          u8;
typedef signed short int       s16;
typedef unsigned short int     u16;
typedef signed int             s32;
typedef unsigned int           u32;

// SmallerC can't do u64...
typedef struct { u32 upper; u32 lower; } u64;

typedef float  f32;

#endif /* _ULTRA64_TYPES_H_ */


#ifndef _ULTRA64_THREAD_H_
#define _ULTRA64_THREAD_H_

/* Recommended priorities for system threads */
#define OS_PRIORITY_MAX      255
#define OS_PRIORITY_VIMGR    254
#define OS_PRIORITY_RMON     250
#define OS_PRIORITY_RMONSPIN 200
#define OS_PRIORITY_PIMGR    150
#define OS_PRIORITY_SIMGR    140
#define OS_PRIORITY_APPMAX   127
#define OS_PRIORITY_IDLE       0

#define OS_STATE_STOPPED    1
#define OS_STATE_RUNNABLE    2
#define OS_STATE_RUNNING    4
#define OS_STATE_WAITING    8

typedef s32 OSPri;
typedef s32 OSId;

typedef union
{
    struct {
      f32 f_odd;
      f32 f_even;
    } f;
} __OSfp;

typedef struct
{
    /* registers */
    u64 at, v0, v1, a0, a1, a2, a3;
    u64 t0, t1, t2, t3, t4, t5, t6, t7;
    u64 s0, s1, s2, s3, s4, s5, s6, s7;
    u64 t8, t9, gp, sp, s8, ra;
    u64 lo, hi;
    u32 sr, pc, cause, badvaddr, rcp;
    u32 fpcsr;
    __OSfp  fp0,  fp2,  fp4,  fp6,  fp8, fp10, fp12, fp14;
    __OSfp fp16, fp18, fp20, fp22, fp24, fp26, fp28, fp30;
} __OSThreadContext;

typedef struct
{
    u32 flag;
    u32 count;
    u64 time;
} __OSThreadprofile_s;

typedef struct OSThread_s
{
    struct OSThread_s *next;
    OSPri priority;
    struct OSThread_s **queue;
    struct OSThread_s *tlnext;
    u16 state;
    u16 flags;
    OSId id;
    int fp;
    __OSThreadprofile_s *thprof;
    __OSThreadContext context;
} OSThread;

void osCreateThread(OSThread *thread, OSId id, void (*entry)(void *), void *arg, void *sp, OSPri pri);
OSId osGetThreadId(OSThread *thread);
OSPri osGetThreadPri(OSThread *thread);
void osSetThreadPri(OSThread *thread, OSPri pri);
void osStartThread(OSThread *thread);
void osStopThread(OSThread *thread);

#endif /* _ULTRA64_THREAD_H_ */


#ifndef _OS_MESSAGE_H_
#define	_OS_MESSAGE_H_

typedef u32 OSEvent;

/*
 * Structure for message
 */
typedef void * OSMesg;

/*
 * Structure for message queue
 */
typedef struct OSMesgQueue_s {
	OSThread	*mtqueue;   /* Queue to store threads blocked on empty mailboxes (receive) */
	OSThread	*fullqueue; /* Queue to store threads blocked on full mailboxes (send) */
	s32		validCount;	/* Contains number of valid message */
	s32		first;		/* Points to first valid message */
	s32		msgCount;	/* Contains total # of messages */
	OSMesg		*msg;		/* Points to message buffer array */
} OSMesgQueue;

/* Events */
#define OS_EVENT_SW1              0     /* CPU SW1 interrupt */
#define OS_EVENT_SW2              1     /* CPU SW2 interrupt */
#define OS_EVENT_CART             2     /* Cartridge interrupt: used by rmon */
#define OS_EVENT_COUNTER          3     /* Counter int: used by VI/Timer Mgr */
#define OS_EVENT_SP               4     /* SP task done interrupt */
#define OS_EVENT_SI               5     /* SI (controller) interrupt */
#define OS_EVENT_AI               6     /* AI interrupt */
#define OS_EVENT_VI               7     /* VI interrupt: used by VI/Timer Mgr */
#define OS_EVENT_PI               8     /* PI interrupt: used by PI Manager */
#define OS_EVENT_DP               9     /* DP full sync interrupt */
#define OS_EVENT_CPU_BREAK        10    /* CPU breakpoint: used by rmon */
#define OS_EVENT_SP_BREAK         11    /* SP breakpoint:  used by rmon */
#define OS_EVENT_FAULT            12    /* CPU fault event: used by rmon */
#define OS_EVENT_THREADSTATUS     13    /* CPU thread status: used by rmon */
#define OS_EVENT_PRENMI           14    /* Pre NMI interrupt */

/* Flags to turn blocking on/off when sending/receiving message */
#define	OS_MESG_NOBLOCK		0
#define	OS_MESG_BLOCK		1

extern void		osCreateMesgQueue(OSMesgQueue *, OSMesg *, s32);
extern s32		osSendMesg(OSMesgQueue *, OSMesg, s32);
extern s32		osJamMesg(OSMesgQueue *, OSMesg, s32);
extern s32		osRecvMesg(OSMesgQueue *, OSMesg *, s32);
extern void		osSetEventMesg(OSEvent, OSMesgQueue *, OSMesg);

#endif /* !_OS_MESSAGE_H_ */


#ifndef _OS_CONT_H_
#define	_OS_CONT_H_

typedef struct {
	u16     type;    /* Controller Type */
	u8      status;  /* Controller status */
	u8      errno;
} OSContStatus;

typedef struct {
	u16     button;
	s8      stick_x; /* -80 <= stick_x <= 80 */
	s8      stick_y; /* -80 <= stick_y <= 80 */
	u8      errno;
} OSContPad;

typedef struct {
	void    *address;               /* Ram pad Address:  11 bits */
	u8      databuffer[32];         /* address of the data buffer */
	u8      addressCrc;             /* CRC code for address */
	u8      dataCrc;                /* CRC code for data */
	u8      errno;
} OSContRamIo;

/* Controller type */

#define CONT_ABSOLUTE           0x0001
#define CONT_RELATIVE           0x0002
#define CONT_JOYPORT            0x0004
#define CONT_EEPROM		0x8000
#define CONT_EEP16K		0x4000
#define	CONT_TYPE_MASK		0x1f07
#define	CONT_TYPE_NORMAL	0x0005
#define	CONT_TYPE_MOUSE		0x0002
#define	CONT_TYPE_VOICE		0x0100

/* Controller status */

#define CONT_CARD_ON            0x01
#define CONT_CARD_PULL          0x02
#define CONT_ADDR_CRC_ER        0x04
#define CONT_EEPROM_BUSY	0x80

/* Buttons */

#define CONT_A      0x8000
#define CONT_B      0x4000
#define CONT_G	    0x2000
#define CONT_START  0x1000
#define CONT_UP     0x0800
#define CONT_DOWN   0x0400
#define CONT_LEFT   0x0200
#define CONT_RIGHT  0x0100
#define CONT_L      0x0020
#define CONT_R      0x0010
#define CONT_E      0x0008
#define CONT_D      0x0004
#define CONT_C      0x0002
#define CONT_F      0x0001

/* Nintendo's official button names */

#define A_BUTTON	CONT_A
#define B_BUTTON	CONT_B
#define L_TRIG		CONT_L
#define R_TRIG		CONT_R
#define Z_TRIG		CONT_G
#define START_BUTTON	CONT_START
#define U_JPAD		CONT_UP
#define L_JPAD		CONT_LEFT
#define R_JPAD		CONT_RIGHT
#define D_JPAD		CONT_DOWN
#define U_CBUTTONS	CONT_E
#define L_CBUTTONS	CONT_C
#define R_CBUTTONS	CONT_F
#define D_CBUTTONS	CONT_D

/* Controller error number */

#define	CONT_ERR_NO_CONTROLLER		PFS_ERR_NOPACK 		/* 1 */
#define	CONT_ERR_CONTRFAIL		CONT_OVERRUN_ERROR	/* 4 */
#define	CONT_ERR_INVALID		PFS_ERR_INVALID		/* 5 */
#define	CONT_ERR_DEVICE			PFS_ERR_DEVICE 		/* 11 */
#define	CONT_ERR_NOT_READY		12
#define	CONT_ERR_VOICE_MEMORY		13
#define	CONT_ERR_VOICE_WORD		14
#define	CONT_ERR_VOICE_NO_RESPONSE	15

/* Controller interface */

extern s32 osContInit(OSMesgQueue *, u8 *, OSContStatus *);
extern s32 osContReset(OSMesgQueue *, OSContStatus *);
extern s32 osContStartQuery(OSMesgQueue *);
extern s32 osContStartReadData(OSMesgQueue *);
extern void osContGetQuery(OSContStatus *);
extern void osContGetReadData(OSContPad *);

#endif /* _OS_CONT_H_ */

#ifndef _MBI_H_
#define	_MBI_H_

#define _SHIFTL(v, s, w)	    ((unsigned int) (((unsigned int)(v) & ((0x01 << (w)) - 1)) << (s)))
#define _SHIFTR(v, s, w)	    ((unsigned int)(((unsigned int)(v) >> (s)) & ((0x01 << (w)) - 1)))

#define _SHIFT _SHIFTL

#define G_ON	(1)
#define G_OFF	(0)

//include <PR/abi.h>

#define	M_GFXTASK	1
#define	M_AUDTASK	2
#define	M_VIDTASK	3
#define M_HVQTASK	6
#define M_HVQMTASK	7

#define	NUM_SEGMENTS		(16)
#define	SEGMENT_OFFSET(a)	((unsigned int)(a) & 0x00ffffff)
#define	SEGMENT_NUMBER(a)	(((unsigned int)(a) << 4) >> 28)
#define	SEGMENT_ADDR(num, off)	(((num) << 24) + (off))

#endif /* !_MBI_H_ */

#ifndef _GBI_H_
#define	_GBI_H_

#define F3DEX_GBI_2 1
#define _LANGUAGE_C 1

#ifdef    F3DEX_GBI_2
#ifndef  F3DEX_GBI
#define F3DEX_GBI
#endif
#define	G_NOOP			0x00
#define	G_RDPHALF_2		0xf1
#define	G_SETOTHERMODE_H	0xe3
#define	G_SETOTHERMODE_L	0xe2
#define	G_RDPHALF_1		0xe1
#define	G_SPNOOP		0xe0
#define	G_ENDDL			0xdf
#define	G_DL			0xde
#define	G_LOAD_UCODE		0xdd
#define	G_MOVEMEM		0xdc
#define	G_MOVEWORD		0xdb
#define	G_MTX			0xda
#define G_GEOMETRYMODE		0xd9
#define	G_POPMTX		0xd8
#define	G_TEXTURE		0xd7
#define	G_DMA_IO		0xd6
#define	G_SPECIAL_1		0xd5
#define	G_SPECIAL_2		0xd4
#define	G_SPECIAL_3		0xd3

#define	G_VTX			0x01
#define	G_MODIFYVTX		0x02
#define	G_CULLDL		0x03
#define	G_BRANCH_Z		0x04
#define	G_TRI1			0x05
#define G_TRI2			0x06
#define G_QUAD			0x07
#define G_LINE3D		0x08
#else

/* DMA commands: */
#define	G_SPNOOP		0	/* handle 0 gracefully */
#define	G_MTX			1
#define G_RESERVED0		2	/* not implemeted */
#define G_MOVEMEM		3	/* move a block of memory (up to 4 words) to dmem */
#define	G_VTX			4
#define G_RESERVED1		5	/* not implemeted */
#define	G_DL			6
#define G_RESERVED2		7	/* not implemeted */
#define G_RESERVED3		8	/* not implemeted */
#define G_SPRITE2D_BASE		9	/* sprite command */

/* IMMEDIATE commands: */
#define	G_IMMFIRST		-65
#define	G_TRI1			(G_IMMFIRST-0)
#define G_CULLDL		(G_IMMFIRST-1)
#define	G_POPMTX		(G_IMMFIRST-2)
#define	G_MOVEWORD		(G_IMMFIRST-3)
#define	G_TEXTURE		(G_IMMFIRST-4)
#define	G_SETOTHERMODE_H	(G_IMMFIRST-5)
#define	G_SETOTHERMODE_L	(G_IMMFIRST-6)
#define G_ENDDL			(G_IMMFIRST-7)
#define G_SETGEOMETRYMODE	(G_IMMFIRST-8)
#define G_CLEARGEOMETRYMODE	(G_IMMFIRST-9)
#define G_LINE3D		(G_IMMFIRST-10)
#define G_RDPHALF_1		(G_IMMFIRST-11)
#define G_RDPHALF_2		(G_IMMFIRST-12)
#if (defined(F3DEX_GBI)||defined(F3DLP_GBI))
#define G_MODIFYVTX		(G_IMMFIRST-13)
#define G_TRI2		(G_IMMFIRST-14)
#define G_BRANCH_Z		(G_IMMFIRST-15)
#define G_LOAD_UCODE		(G_IMMFIRST-16)
#else
#define G_RDPHALF_CONT	(G_IMMFIRST-13)
#endif

#define G_SPRITE2D_SCALEFLIP    (G_IMMFIRST-1)
#define G_SPRITE2D_DRAW         (G_IMMFIRST-2)

/* RDP commands: */
#define	G_NOOP			0xc0	/*   0 */

#endif

/* RDP commands: */
#define	G_SETCIMG		0xff	/*  -1 */
#define	G_SETZIMG		0xfe	/*  -2 */
#define	G_SETTIMG		0xfd	/*  -3 */
#define	G_SETCOMBINE		0xfc	/*  -4 */
#define	G_SETENVCOLOR		0xfb	/*  -5 */
#define	G_SETPRIMCOLOR		0xfa	/*  -6 */
#define	G_SETBLENDCOLOR		0xf9	/*  -7 */
#define	G_SETFOGCOLOR		0xf8	/*  -8 */
#define	G_SETFILLCOLOR		0xf7	/*  -9 */
#define	G_FILLRECT		0xf6	/* -10 */
#define	G_SETTILE		0xf5	/* -11 */
#define	G_LOADTILE		0xf4	/* -12 */
#define	G_LOADBLOCK		0xf3	/* -13 */
#define	G_SETTILESIZE		0xf2	/* -14 */
#define	G_LOADTLUT		0xf0	/* -16 */
#define	G_RDPSETOTHERMODE	0xef	/* -17 */
#define	G_SETPRIMDEPTH		0xee	/* -18 */
#define	G_SETSCISSOR		0xed	/* -19 */
#define	G_SETCONVERT		0xec	/* -20 */
#define	G_SETKEYR		0xeb	/* -21 */
#define	G_SETKEYGB		0xea	/* -22 */
#define	G_RDPFULLSYNC		0xe9	/* -23 */
#define	G_RDPTILESYNC		0xe8	/* -24 */
#define	G_RDPPIPESYNC		0xe7	/* -25 */
#define	G_RDPLOADSYNC		0xe6	/* -26 */
#define G_TEXRECTFLIP		0xe5	/* -27 */
#define G_TEXRECT		0xe4	/* -28 */

#define G_TRI_FILL		0xc8 /* fill triangle:            11001000 */
#define G_TRI_SHADE		0xcc /* shade triangle:           11001100 */
#define G_TRI_TXTR		0xca /* texture triangle:         11001010 */
#define G_TRI_SHADE_TXTR	0xce /* shade, texture triangle:  11001110 */
#define G_TRI_FILL_ZBUFF	0xc9 /* fill, zbuff triangle:     11001001 */
#define G_TRI_SHADE_ZBUFF	0xcd /* shade, zbuff triangle:    11001101 */
#define G_TRI_TXTR_ZBUFF	0xcb /* texture, zbuff triangle:  11001011 */
#define G_TRI_SHADE_TXTR_ZBUFF	0xcf /* shade, txtr, zbuff trngl: 11001111 */

#define G_RDP_TRI_FILL_MASK	0x08
#define G_RDP_TRI_SHADE_MASK	0x04
#define G_RDP_TRI_TXTR_MASK	0x02
#define G_RDP_TRI_ZBUFF_MASK	0x01

#define BOWTIE_VAL	0

#define G_RDP_ADDR_FIXUP	3

#define	GDMACMD(x)		(x)
#define	GIMMCMD(x)		(G_IMMFIRST-(x))
#define	GRDPCMD(x)		(0xff-(x))

#define	G_DMACMDSIZ		128
#define	G_IMMCMDSIZ		64
#define	G_RDPCMDSIZ		64

#define	G_TEXTURE_IMAGE_FRAC	2
#define	G_TEXTURE_SCALE_FRAC	16
#define	G_SCALE_FRAC		8
#define	G_ROTATE_FRAC		16

#define	G_MAXFBZ		0x3fff	/* 3b exp, 11b mantissa */

#define	GPACK_RGBA5551(r, g, b, a)	((((r)<<8) & 0xf800) | 							 (((g)<<3) & 0x7c0) |							 (((b)>>2) & 0x3e) | ((a) & 0x1))
#define	GPACK_ZDZ(z, dz)		((z) << 2 | (dz))

#define G_MTX_MODELVIEW	0x00	/* matrix types */
#define G_MTX_PROJECTION	0x04
#define G_MTX_MUL		0x00	/* concat or load */
#define G_MTX_LOAD		0x02
#define G_MTX_NOPUSH		0x00	/* push or not */
#define G_MTX_PUSH		0x01

#define G_ZBUFFER		0x00000001
#define G_SHADE			0x00000004	/* enable Gouraud interp */

#define G_TEXTURE_ENABLE	0x00000000	/* Ignored               */
#define G_SHADING_SMOOTH	0x00200000	/* flat or smooth shaded */
#define G_CULL_FRONT		0x00000200
#define G_CULL_BACK		0x00000400
#define G_CULL_BOTH		0x00000600	/* To make code cleaner */

#define G_FOG			0x00010000
#define G_LIGHTING		0x00020000
#define G_TEXTURE_GEN		0x00040000
#define G_TEXTURE_GEN_LINEAR	0x00080000
#define G_LOD			0x00100000	/* NOT IMPLEMENTED */
#if	(defined(F3DEX_GBI)||defined(F3DLP_GBI))
#define G_CLIPPING		0x00800000
#else
#define G_CLIPPING		0x00000000
#endif

#ifdef _LANGUAGE_ASSEMBLY
#define G_FOG_H			(G_FOG/0x10000)
#define G_LIGHTING_H		(G_LIGHTING/0x10000)
#define G_TEXTURE_GEN_H		(G_TEXTURE_GEN/0x10000)
#define G_TEXTURE_GEN_LINEAR_H	(G_TEXTURE_GEN_LINEAR/0x10000)
#define G_LOD_H			(G_LOD/0x10000)	/* NOT IMPLEMENTED */
#if	(defined(F3DEX_GBI)||defined(F3DLP_GBI))
#define G_CLIPPING_H		(G_CLIPPING/0x10000)
#endif
#endif

#define G_IM_FMT_RGBA	0
#define G_IM_FMT_YUV	1
#define G_IM_FMT_CI	2
#define G_IM_FMT_IA	3
#define G_IM_FMT_I	4

#define G_IM_SIZ_4b	0
#define G_IM_SIZ_8b	1
#define G_IM_SIZ_16b	2
#define G_IM_SIZ_32b	3
#define G_IM_SIZ_DD	5

#define G_IM_SIZ_4b_BYTES		0
#define G_IM_SIZ_4b_TILE_BYTES	G_IM_SIZ_4b_BYTES
#define G_IM_SIZ_4b_LINE_BYTES	G_IM_SIZ_4b_BYTES

#define G_IM_SIZ_8b_BYTES		1
#define G_IM_SIZ_8b_TILE_BYTES	G_IM_SIZ_8b_BYTES
#define G_IM_SIZ_8b_LINE_BYTES	G_IM_SIZ_8b_BYTES

#define G_IM_SIZ_16b_BYTES		2
#define G_IM_SIZ_16b_TILE_BYTES	G_IM_SIZ_16b_BYTES
#define G_IM_SIZ_16b_LINE_BYTES	G_IM_SIZ_16b_BYTES

#define G_IM_SIZ_32b_BYTES		4
#define G_IM_SIZ_32b_TILE_BYTES	2
#define G_IM_SIZ_32b_LINE_BYTES	2

#define G_IM_SIZ_4b_LOAD_BLOCK	G_IM_SIZ_16b
#define G_IM_SIZ_8b_LOAD_BLOCK	G_IM_SIZ_16b
#define G_IM_SIZ_16b_LOAD_BLOCK	G_IM_SIZ_16b
#define G_IM_SIZ_32b_LOAD_BLOCK	G_IM_SIZ_32b

#define G_IM_SIZ_4b_SHIFT  2
#define G_IM_SIZ_8b_SHIFT  1
#define G_IM_SIZ_16b_SHIFT 0
#define G_IM_SIZ_32b_SHIFT 0

#define G_IM_SIZ_4b_INCR  3
#define G_IM_SIZ_8b_INCR  1
#define G_IM_SIZ_16b_INCR 0
#define G_IM_SIZ_32b_INCR 0

#define G_CCMUX_COMBINED	0
#define G_CCMUX_TEXEL0		1
#define G_CCMUX_TEXEL1		2
#define G_CCMUX_PRIMITIVE	3
#define G_CCMUX_SHADE		4
#define G_CCMUX_ENVIRONMENT	5
#define G_CCMUX_CENTER		6
#define G_CCMUX_SCALE		6
#define G_CCMUX_COMBINED_ALPHA	7
#define G_CCMUX_TEXEL0_ALPHA	8
#define G_CCMUX_TEXEL1_ALPHA	9
#define G_CCMUX_PRIMITIVE_ALPHA	10
#define G_CCMUX_SHADE_ALPHA	11
#define G_CCMUX_ENV_ALPHA	12
#define G_CCMUX_LOD_FRACTION	13
#define G_CCMUX_PRIM_LOD_FRAC	14
#define G_CCMUX_NOISE		7
#define G_CCMUX_K4		7
#define G_CCMUX_K5		15
#define G_CCMUX_1		6
#define G_CCMUX_0		31

#define G_ACMUX_COMBINED	0
#define G_ACMUX_TEXEL0		1
#define G_ACMUX_TEXEL1		2
#define G_ACMUX_PRIMITIVE	3
#define G_ACMUX_SHADE		4
#define G_ACMUX_ENVIRONMENT	5
#define G_ACMUX_LOD_FRACTION	0
#define G_ACMUX_PRIM_LOD_FRAC	6
#define G_ACMUX_1		6
#define G_ACMUX_0		7

#define	G_CC_PRIMITIVE		0, 0, 0, PRIMITIVE, 0, 0, 0, PRIMITIVE
#define	G_CC_SHADE		0, 0, 0, SHADE, 0, 0, 0, SHADE
#define	G_CC_MODULATEI		TEXEL0, 0, SHADE, 0, 0, 0, 0, SHADE
#define	G_CC_MODULATEIA		TEXEL0, 0, SHADE, 0, TEXEL0, 0, SHADE, 0
#define	G_CC_MODULATEIDECALA	TEXEL0, 0, SHADE, 0, 0, 0, 0, TEXEL0
#define	G_CC_MODULATERGB	G_CC_MODULATEI
#define	G_CC_MODULATERGBA	G_CC_MODULATEIA
#define	G_CC_MODULATERGBDECALA	G_CC_MODULATEIDECALA
#define	G_CC_MODULATEI_PRIM	TEXEL0, 0, PRIMITIVE, 0, 0, 0, 0, PRIMITIVE
#define	G_CC_MODULATEIA_PRIM	TEXEL0, 0, PRIMITIVE, 0, TEXEL0, 0, PRIMITIVE, 0
#define	G_CC_MODULATEIDECALA_PRIM	TEXEL0, 0, PRIMITIVE, 0, 0, 0, 0, TEXEL0
#define	G_CC_MODULATERGB_PRIM	G_CC_MODULATEI_PRIM
#define	G_CC_MODULATERGBA_PRIM	G_CC_MODULATEIA_PRIM
#define	G_CC_MODULATERGBDECALA_PRIM	G_CC_MODULATEIDECALA_PRIM
#define	G_CC_DECALRGB		0, 0, 0, TEXEL0, 0, 0, 0, SHADE
#define	G_CC_DECALRGBA		0, 0, 0, TEXEL0, 0, 0, 0, TEXEL0
#define	G_CC_BLENDI		ENVIRONMENT, SHADE, TEXEL0, SHADE, 0, 0, 0, SHADE
#define	G_CC_BLENDIA		ENVIRONMENT, SHADE, TEXEL0, SHADE, TEXEL0, 0, SHADE, 0
#define	G_CC_BLENDIDECALA	ENVIRONMENT, SHADE, TEXEL0, SHADE, 0, 0, 0, TEXEL0
#define	G_CC_BLENDRGBA		TEXEL0, SHADE, TEXEL0_ALPHA, SHADE, 0, 0, 0, SHADE
#define	G_CC_BLENDRGBDECALA	TEXEL0, SHADE, TEXEL0_ALPHA, SHADE, 0, 0, 0, TEXEL0
#define G_CC_ADDRGB		1, 0, TEXEL0, SHADE, 0, 0, 0, SHADE
#define G_CC_ADDRGBDECALA	1, 0, TEXEL0, SHADE, 0, 0, 0, TEXEL0
#define G_CC_REFLECTRGB		ENVIRONMENT, 0, TEXEL0, SHADE, 0, 0, 0, SHADE
#define G_CC_REFLECTRGBDECALA	ENVIRONMENT, 0, TEXEL0, SHADE, 0, 0, 0, TEXEL0
#define G_CC_HILITERGB		PRIMITIVE, SHADE, TEXEL0, SHADE, 0, 0, 0, SHADE
#define G_CC_HILITERGBA		PRIMITIVE, SHADE, TEXEL0, SHADE, PRIMITIVE, SHADE, TEXEL0, SHADE
#define G_CC_HILITERGBDECALA	PRIMITIVE, SHADE, TEXEL0, SHADE, 0, 0, 0, TEXEL0
#define G_CC_SHADEDECALA	0, 0, 0, SHADE, 0, 0, 0, TEXEL0
#define	G_CC_BLENDPE		PRIMITIVE, ENVIRONMENT, TEXEL0, ENVIRONMENT, TEXEL0, 0, SHADE, 0
#define	G_CC_BLENDPEDECALA	PRIMITIVE, ENVIRONMENT, TEXEL0, ENVIRONMENT, 0, 0, 0, TEXEL0

#define	_G_CC_BLENDPE		ENVIRONMENT, PRIMITIVE, TEXEL0, PRIMITIVE, TEXEL0, 0, SHADE, 0
#define	_G_CC_BLENDPEDECALA	ENVIRONMENT, PRIMITIVE, TEXEL0, PRIMITIVE, 0, 0, 0, TEXEL0
#define	_G_CC_TWOCOLORTEX	PRIMITIVE, SHADE, TEXEL0, SHADE, 0, 0, 0, SHADE
#define	_G_CC_SPARSEST		PRIMITIVE, TEXEL0, LOD_FRACTION, TEXEL0, PRIMITIVE, TEXEL0, LOD_FRACTION, TEXEL0
#define G_CC_TEMPLERP   TEXEL1, TEXEL0, PRIM_LOD_FRAC, TEXEL0, TEXEL1, TEXEL0, PRIM_LOD_FRAC, TEXEL0

#define	G_CC_TRILERP		TEXEL1, TEXEL0, LOD_FRACTION, TEXEL0, TEXEL1, TEXEL0, LOD_FRACTION, TEXEL0
#define	G_CC_INTERFERENCE	TEXEL0, 0, TEXEL1, 0, TEXEL0, 0, TEXEL1, 0

#define	G_CC_1CYUV2RGB		TEXEL0, K4, K5, TEXEL0, 0, 0, 0, SHADE

#define	G_CC_YUV2RGB		TEXEL1, K4, K5, TEXEL1, 0, 0, 0, 0

#define	G_CC_PASS2		0, 0, 0, COMBINED, 0, 0, 0, COMBINED
#define	G_CC_MODULATEI2		COMBINED, 0, SHADE, 0, 0, 0, 0, SHADE
#define	G_CC_MODULATEIA2	COMBINED, 0, SHADE, 0, COMBINED, 0, SHADE, 0
#define	G_CC_MODULATERGB2	G_CC_MODULATEI2
#define	G_CC_MODULATERGBA2	G_CC_MODULATEIA2
#define	G_CC_MODULATEI_PRIM2	COMBINED, 0, PRIMITIVE, 0, 0, 0, 0, PRIMITIVE
#define	G_CC_MODULATEIA_PRIM2	COMBINED, 0, PRIMITIVE, 0, COMBINED, 0, PRIMITIVE, 0
#define	G_CC_MODULATERGB_PRIM2	G_CC_MODULATEI_PRIM2
#define	G_CC_MODULATERGBA_PRIM2	G_CC_MODULATEIA_PRIM2
#define	G_CC_DECALRGB2		0, 0, 0, COMBINED, 0, 0, 0, SHADE

#define	G_CC_BLENDI2		ENVIRONMENT, SHADE, COMBINED, SHADE, 0, 0, 0, SHADE
#define	G_CC_BLENDIA2		ENVIRONMENT, SHADE, COMBINED, SHADE, COMBINED, 0, SHADE, 0
#define	G_CC_CHROMA_KEY2	TEXEL0, CENTER, SCALE, 0, 0, 0, 0, 0
#define G_CC_HILITERGB2		ENVIRONMENT, COMBINED, TEXEL0, COMBINED, 0, 0, 0, SHADE
#define G_CC_HILITERGBA2	ENVIRONMENT, COMBINED, TEXEL0, COMBINED, ENVIRONMENT, COMBINED, TEXEL0, COMBINED
#define G_CC_HILITERGBDECALA2	ENVIRONMENT, COMBINED, TEXEL0, COMBINED, 0, 0, 0, TEXEL0
#define G_CC_HILITERGBPASSA2	ENVIRONMENT, COMBINED, TEXEL0, COMBINED, 0, 0, 0, COMBINED

#define	G_MDSFT_ALPHACOMPARE		0
#define	G_MDSFT_ZSRCSEL			2
#define	G_MDSFT_RENDERMODE		3
#define	G_MDSFT_BLENDER			16

#define	G_MDSFT_BLENDMASK		0	/* unsupported */
#define	G_MDSFT_ALPHADITHER		4
#define	G_MDSFT_RGBDITHER		6

#define	G_MDSFT_COMBKEY			8
#define	G_MDSFT_TEXTCONV		9
#define	G_MDSFT_TEXTFILT		12
#define	G_MDSFT_TEXTLUT			14
#define	G_MDSFT_TEXTLOD			16
#define	G_MDSFT_TEXTDETAIL		17
#define	G_MDSFT_TEXTPERSP		19
#define	G_MDSFT_CYCLETYPE		20
#define	G_MDSFT_COLORDITHER		22	/* unsupported in HW 2.0 */
#define	G_MDSFT_PIPELINE		23

#define	G_PM_1PRIMITIVE		(1 << G_MDSFT_PIPELINE)
#define	G_PM_NPRIMITIVE		(0 << G_MDSFT_PIPELINE)

#define	G_CYC_1CYCLE		(0 << G_MDSFT_CYCLETYPE)
#define	G_CYC_2CYCLE		(1 << G_MDSFT_CYCLETYPE)
#define	G_CYC_COPY		(2 << G_MDSFT_CYCLETYPE)
#define	G_CYC_FILL		(3 << G_MDSFT_CYCLETYPE)

#define G_TP_NONE	(0 << G_MDSFT_TEXTPERSP)
#define G_TP_PERSP	(1 << G_MDSFT_TEXTPERSP)

#define G_TD_CLAMP	(0 << G_MDSFT_TEXTDETAIL)
#define G_TD_SHARPEN	(1 << G_MDSFT_TEXTDETAIL)
#define G_TD_DETAIL	(2 << G_MDSFT_TEXTDETAIL)

#define G_TL_TILE	(0 << G_MDSFT_TEXTLOD)
#define G_TL_LOD	(1 << G_MDSFT_TEXTLOD)

#define G_TT_NONE	(0 << G_MDSFT_TEXTLUT)
#define G_TT_RGBA16	(2 << G_MDSFT_TEXTLUT)
#define G_TT_IA16	(3 << G_MDSFT_TEXTLUT)

#define G_TF_POINT	(0 << G_MDSFT_TEXTFILT)
#define G_TF_AVERAGE	(3 << G_MDSFT_TEXTFILT)
#define G_TF_BILERP	(2 << G_MDSFT_TEXTFILT)

#define G_TC_CONV	(0 << G_MDSFT_TEXTCONV)
#define G_TC_FILTCONV	(5 << G_MDSFT_TEXTCONV)
#define G_TC_FILT	(6 << G_MDSFT_TEXTCONV)

#define G_CK_NONE	(0 << G_MDSFT_COMBKEY)
#define G_CK_KEY	(1 << G_MDSFT_COMBKEY)

#define	G_CD_MAGICSQ		(0 << G_MDSFT_RGBDITHER)
#define	G_CD_BAYER		(1 << G_MDSFT_RGBDITHER)
#define	G_CD_NOISE		(2 << G_MDSFT_RGBDITHER)

#ifndef _HW_VERSION_1
#define	G_CD_DISABLE		(3 << G_MDSFT_RGBDITHER)
#define	G_CD_ENABLE		G_CD_NOISE	/* HW 1.0 compatibility mode */
#else
#define G_CD_ENABLE		(1 << G_MDSFT_COLORDITHER)
#define G_CD_DISABLE		(0 << G_MDSFT_COLORDITHER)
#endif

#define	G_AD_PATTERN		(0 << G_MDSFT_ALPHADITHER)
#define	G_AD_NOTPATTERN		(1 << G_MDSFT_ALPHADITHER)
#define	G_AD_NOISE		(2 << G_MDSFT_ALPHADITHER)
#define	G_AD_DISABLE		(3 << G_MDSFT_ALPHADITHER)

#define	G_AC_NONE		(0 << G_MDSFT_ALPHACOMPARE)
#define	G_AC_THRESHOLD		(1 << G_MDSFT_ALPHACOMPARE)
#define	G_AC_DITHER		(3 << G_MDSFT_ALPHACOMPARE)

#define	G_ZS_PIXEL		(0 << G_MDSFT_ZSRCSEL)
#define	G_ZS_PRIM		(1 << G_MDSFT_ZSRCSEL)

#define	AA_EN		0x8
#define	Z_CMP		0x10
#define	Z_UPD		0x20
#define	IM_RD		0x40
#define	CLR_ON_CVG	0x80
#define	CVG_DST_CLAMP	0
#define	CVG_DST_WRAP	0x100
#define	CVG_DST_FULL	0x200
#define	CVG_DST_SAVE	0x300
#define	ZMODE_OPA	0
#define	ZMODE_INTER	0x400
#define	ZMODE_XLU	0x800
#define	ZMODE_DEC	0xc00
#define	CVG_X_ALPHA	0x1000
#define	ALPHA_CVG_SEL	0x2000
#define	FORCE_BL	0x4000
#define	TEX_EDGE	0x0000 /* used to be 0x8000 */

#define	G_BL_CLR_IN	0
#define	G_BL_CLR_MEM	1
#define	G_BL_CLR_BL	2
#define	G_BL_CLR_FOG	3
#define	G_BL_1MA	0
#define	G_BL_A_MEM	1
#define	G_BL_A_IN	0
#define	G_BL_A_FOG	1
#define	G_BL_A_SHADE	2
#define	G_BL_1		2
#define	G_BL_0		3

#define	GBL_c1(m1a, m1b, m2a, m2b)		(m1a) << 30 | (m1b) << 26 | (m2a) << 22 | (m2b) << 18
#define	GBL_c2(m1a, m1b, m2a, m2b)		(m1a) << 28 | (m1b) << 24 | (m2a) << 20 | (m2b) << 16

#define	RM_AA_ZB_OPA_SURF(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_RA_ZB_OPA_SURF(clk)						AA_EN | Z_CMP | Z_UPD | CVG_DST_CLAMP |				ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_ZB_XLU_SURF(clk)						AA_EN | Z_CMP | IM_RD | CVG_DST_WRAP | CLR_ON_CVG |		FORCE_BL | ZMODE_XLU |						GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_OPA_DECAL(clk)						AA_EN | Z_CMP | IM_RD | CVG_DST_WRAP | ALPHA_CVG_SEL |		ZMODE_DEC |							GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_RA_ZB_OPA_DECAL(clk)						AA_EN | Z_CMP | CVG_DST_WRAP | ALPHA_CVG_SEL |			ZMODE_DEC |							GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_ZB_XLU_DECAL(clk)						AA_EN | Z_CMP | IM_RD | CVG_DST_WRAP | CLR_ON_CVG |		FORCE_BL | ZMODE_DEC |						GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_OPA_INTER(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			ALPHA_CVG_SEL |	ZMODE_INTER |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_RA_ZB_OPA_INTER(clk)						AA_EN | Z_CMP | Z_UPD | CVG_DST_CLAMP |				ALPHA_CVG_SEL |	ZMODE_INTER |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_ZB_XLU_INTER(clk)						AA_EN | Z_CMP | IM_RD | CVG_DST_WRAP | CLR_ON_CVG |		FORCE_BL | ZMODE_INTER |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_XLU_LINE(clk)						AA_EN | Z_CMP | IM_RD | CVG_DST_CLAMP | CVG_X_ALPHA |		ALPHA_CVG_SEL | FORCE_BL | ZMODE_XLU |				GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_DEC_LINE(clk)						AA_EN | Z_CMP | IM_RD | CVG_DST_SAVE | CVG_X_ALPHA |		ALPHA_CVG_SEL | FORCE_BL | ZMODE_DEC |				GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_TEX_EDGE(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_OPA | TEX_EDGE |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_ZB_TEX_INTER(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_INTER | TEX_EDGE |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_ZB_SUB_SURF(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_FULL |			ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_ZB_PCL_SURF(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			ZMODE_OPA | G_AC_DITHER | 					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_OPA_TERR(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_TEX_TERR(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_OPA | TEX_EDGE |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_SUB_TERR(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_FULL |			ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)


#define	RM_AA_OPA_SURF(clk)						AA_EN | IM_RD | CVG_DST_CLAMP |					ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_RA_OPA_SURF(clk)						AA_EN | CVG_DST_CLAMP |					ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_XLU_SURF(clk)						AA_EN | IM_RD | CVG_DST_WRAP | CLR_ON_CVG | FORCE_BL |		ZMODE_OPA |							GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_XLU_LINE(clk)						AA_EN | IM_RD | CVG_DST_CLAMP | CVG_X_ALPHA |			ALPHA_CVG_SEL | FORCE_BL | ZMODE_OPA |				GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_DEC_LINE(clk)						AA_EN | IM_RD | CVG_DST_FULL | CVG_X_ALPHA |			ALPHA_CVG_SEL | FORCE_BL | ZMODE_OPA |				GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_TEX_EDGE(clk)						AA_EN | IM_RD | CVG_DST_CLAMP |					CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_OPA | TEX_EDGE |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_SUB_SURF(clk)						AA_EN | IM_RD | CVG_DST_FULL |					ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_PCL_SURF(clk)						AA_EN | IM_RD | CVG_DST_CLAMP |					ZMODE_OPA | G_AC_DITHER | 					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_OPA_TERR(clk)						AA_EN | IM_RD | CVG_DST_CLAMP |					ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_TEX_TERR(clk)						AA_EN | IM_RD | CVG_DST_CLAMP |					CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_OPA | TEX_EDGE |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_SUB_TERR(clk)						AA_EN | IM_RD | CVG_DST_FULL |					ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)


#define	RM_ZB_OPA_SURF(clk)						Z_CMP | Z_UPD | CVG_DST_FULL | ALPHA_CVG_SEL |			ZMODE_OPA |							GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_ZB_XLU_SURF(clk)						Z_CMP | IM_RD | CVG_DST_FULL | FORCE_BL | ZMODE_XLU |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_ZB_OPA_DECAL(clk)						Z_CMP | CVG_DST_FULL | ALPHA_CVG_SEL | ZMODE_DEC |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_ZB_XLU_DECAL(clk)						Z_CMP | IM_RD | CVG_DST_FULL | FORCE_BL | ZMODE_DEC |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_ZB_CLD_SURF(clk)						Z_CMP | IM_RD | CVG_DST_SAVE | FORCE_BL | ZMODE_XLU |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_ZB_OVL_SURF(clk)						Z_CMP | IM_RD | CVG_DST_SAVE | FORCE_BL | ZMODE_DEC |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_ZB_PCL_SURF(clk)						Z_CMP | Z_UPD | CVG_DST_FULL | ZMODE_OPA |			G_AC_DITHER | 							GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)


#define	RM_OPA_SURF(clk)						CVG_DST_CLAMP | FORCE_BL | ZMODE_OPA |				GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)

#define	RM_XLU_SURF(clk)						IM_RD | CVG_DST_FULL | FORCE_BL | ZMODE_OPA |			GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_TEX_EDGE(clk)						CVG_DST_CLAMP | CVG_X_ALPHA | ALPHA_CVG_SEL | FORCE_BL |	ZMODE_OPA | TEX_EDGE | AA_EN |						GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)

#define	RM_CLD_SURF(clk)						IM_RD | CVG_DST_SAVE | FORCE_BL | ZMODE_OPA |			GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_PCL_SURF(clk)						CVG_DST_FULL | FORCE_BL | ZMODE_OPA | 				G_AC_DITHER | 							GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)

#define	RM_ADD(clk)						IM_RD | CVG_DST_SAVE | FORCE_BL | ZMODE_OPA |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_FOG, G_BL_CLR_MEM, G_BL_1)

#define	RM_NOOP(clk)		GBL_c##clk(0, 0, 0, 0)

#define RM_VISCVG(clk) 	IM_RD | FORCE_BL |     	GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_BL, G_BL_A_MEM)

/* for rendering to an 8-bit framebuffer */
#define RM_OPA_CI(clk)                    	CVG_DST_CLAMP | ZMODE_OPA |          	GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)

#define	G_RM_AA_ZB_OPA_SURF	RM_AA_ZB_OPA_SURF(1)
#define	G_RM_AA_ZB_OPA_SURF2	RM_AA_ZB_OPA_SURF(2)
#define	G_RM_AA_ZB_XLU_SURF	RM_AA_ZB_XLU_SURF(1)
#define	G_RM_AA_ZB_XLU_SURF2	RM_AA_ZB_XLU_SURF(2)
#define	G_RM_AA_ZB_OPA_DECAL	RM_AA_ZB_OPA_DECAL(1)
#define	G_RM_AA_ZB_OPA_DECAL2	RM_AA_ZB_OPA_DECAL(2)
#define	G_RM_AA_ZB_XLU_DECAL	RM_AA_ZB_XLU_DECAL(1)
#define	G_RM_AA_ZB_XLU_DECAL2	RM_AA_ZB_XLU_DECAL(2)
#define	G_RM_AA_ZB_OPA_INTER	RM_AA_ZB_OPA_INTER(1)
#define	G_RM_AA_ZB_OPA_INTER2	RM_AA_ZB_OPA_INTER(2)
#define	G_RM_AA_ZB_XLU_INTER	RM_AA_ZB_XLU_INTER(1)
#define	G_RM_AA_ZB_XLU_INTER2	RM_AA_ZB_XLU_INTER(2)
#define	G_RM_AA_ZB_XLU_LINE	RM_AA_ZB_XLU_LINE(1)
#define	G_RM_AA_ZB_XLU_LINE2	RM_AA_ZB_XLU_LINE(2)
#define	G_RM_AA_ZB_DEC_LINE	RM_AA_ZB_DEC_LINE(1)
#define	G_RM_AA_ZB_DEC_LINE2	RM_AA_ZB_DEC_LINE(2)
#define	G_RM_AA_ZB_TEX_EDGE	RM_AA_ZB_TEX_EDGE(1)
#define	G_RM_AA_ZB_TEX_EDGE2	RM_AA_ZB_TEX_EDGE(2)
#define	G_RM_AA_ZB_TEX_INTER	RM_AA_ZB_TEX_INTER(1)
#define	G_RM_AA_ZB_TEX_INTER2	RM_AA_ZB_TEX_INTER(2)
#define	G_RM_AA_ZB_SUB_SURF	RM_AA_ZB_SUB_SURF(1)
#define	G_RM_AA_ZB_SUB_SURF2	RM_AA_ZB_SUB_SURF(2)
#define	G_RM_AA_ZB_PCL_SURF	RM_AA_ZB_PCL_SURF(1)
#define	G_RM_AA_ZB_PCL_SURF2	RM_AA_ZB_PCL_SURF(2)
#define	G_RM_AA_ZB_OPA_TERR	RM_AA_ZB_OPA_TERR(1)
#define	G_RM_AA_ZB_OPA_TERR2	RM_AA_ZB_OPA_TERR(2)
#define	G_RM_AA_ZB_TEX_TERR	RM_AA_ZB_TEX_TERR(1)
#define	G_RM_AA_ZB_TEX_TERR2	RM_AA_ZB_TEX_TERR(2)
#define	G_RM_AA_ZB_SUB_TERR	RM_AA_ZB_SUB_TERR(1)
#define	G_RM_AA_ZB_SUB_TERR2	RM_AA_ZB_SUB_TERR(2)

#define	G_RM_RA_ZB_OPA_SURF	RM_RA_ZB_OPA_SURF(1)
#define	G_RM_RA_ZB_OPA_SURF2	RM_RA_ZB_OPA_SURF(2)
#define	G_RM_RA_ZB_OPA_DECAL	RM_RA_ZB_OPA_DECAL(1)
#define	G_RM_RA_ZB_OPA_DECAL2	RM_RA_ZB_OPA_DECAL(2)
#define	G_RM_RA_ZB_OPA_INTER	RM_RA_ZB_OPA_INTER(1)
#define	G_RM_RA_ZB_OPA_INTER2	RM_RA_ZB_OPA_INTER(2)

#define	G_RM_AA_OPA_SURF	RM_AA_OPA_SURF(1)
#define	G_RM_AA_OPA_SURF2	RM_AA_OPA_SURF(2)
#define	G_RM_AA_XLU_SURF	RM_AA_XLU_SURF(1)
#define	G_RM_AA_XLU_SURF2	RM_AA_XLU_SURF(2)
#define	G_RM_AA_XLU_LINE	RM_AA_XLU_LINE(1)
#define	G_RM_AA_XLU_LINE2	RM_AA_XLU_LINE(2)
#define	G_RM_AA_DEC_LINE	RM_AA_DEC_LINE(1)
#define	G_RM_AA_DEC_LINE2	RM_AA_DEC_LINE(2)
#define	G_RM_AA_TEX_EDGE	RM_AA_TEX_EDGE(1)
#define	G_RM_AA_TEX_EDGE2	RM_AA_TEX_EDGE(2)
#define	G_RM_AA_SUB_SURF	RM_AA_SUB_SURF(1)
#define	G_RM_AA_SUB_SURF2	RM_AA_SUB_SURF(2)
#define	G_RM_AA_PCL_SURF	RM_AA_PCL_SURF(1)
#define	G_RM_AA_PCL_SURF2	RM_AA_PCL_SURF(2)
#define	G_RM_AA_OPA_TERR	RM_AA_OPA_TERR(1)
#define	G_RM_AA_OPA_TERR2	RM_AA_OPA_TERR(2)
#define	G_RM_AA_TEX_TERR	RM_AA_TEX_TERR(1)
#define	G_RM_AA_TEX_TERR2	RM_AA_TEX_TERR(2)
#define	G_RM_AA_SUB_TERR	RM_AA_SUB_TERR(1)
#define	G_RM_AA_SUB_TERR2	RM_AA_SUB_TERR(2)

#define	G_RM_RA_OPA_SURF	RM_RA_OPA_SURF(1)
#define	G_RM_RA_OPA_SURF2	RM_RA_OPA_SURF(2)

#define	G_RM_ZB_OPA_SURF	RM_ZB_OPA_SURF(1)
#define	G_RM_ZB_OPA_SURF2	RM_ZB_OPA_SURF(2)
#define	G_RM_ZB_XLU_SURF	RM_ZB_XLU_SURF(1)
#define	G_RM_ZB_XLU_SURF2	RM_ZB_XLU_SURF(2)
#define	G_RM_ZB_OPA_DECAL	RM_ZB_OPA_DECAL(1)
#define	G_RM_ZB_OPA_DECAL2	RM_ZB_OPA_DECAL(2)
#define	G_RM_ZB_XLU_DECAL	RM_ZB_XLU_DECAL(1)
#define	G_RM_ZB_XLU_DECAL2	RM_ZB_XLU_DECAL(2)
#define	G_RM_ZB_CLD_SURF	RM_ZB_CLD_SURF(1)
#define	G_RM_ZB_CLD_SURF2	RM_ZB_CLD_SURF(2)
#define	G_RM_ZB_OVL_SURF	RM_ZB_OVL_SURF(1)
#define	G_RM_ZB_OVL_SURF2	RM_ZB_OVL_SURF(2)
#define	G_RM_ZB_PCL_SURF	RM_ZB_PCL_SURF(1)
#define	G_RM_ZB_PCL_SURF2	RM_ZB_PCL_SURF(2)

#define	G_RM_OPA_SURF		RM_OPA_SURF(1)
#define	G_RM_OPA_SURF2		RM_OPA_SURF(2)
#define	G_RM_XLU_SURF		RM_XLU_SURF(1)
#define	G_RM_XLU_SURF2		RM_XLU_SURF(2)
#define	G_RM_CLD_SURF		RM_CLD_SURF(1)
#define	G_RM_CLD_SURF2		RM_CLD_SURF(2)
#define	G_RM_TEX_EDGE		RM_TEX_EDGE(1)
#define	G_RM_TEX_EDGE2		RM_TEX_EDGE(2)
#define	G_RM_PCL_SURF		RM_PCL_SURF(1)
#define	G_RM_PCL_SURF2		RM_PCL_SURF(2)
#define G_RM_ADD       		RM_ADD(1)
#define G_RM_ADD2      		RM_ADD(2)
#define G_RM_NOOP       	RM_NOOP(1)
#define G_RM_NOOP2      	RM_NOOP(2)
#define G_RM_VISCVG    		RM_VISCVG(1)
#define G_RM_VISCVG2    	RM_VISCVG(2)
#define G_RM_OPA_CI         RM_OPA_CI(1)
#define G_RM_OPA_CI2        RM_OPA_CI(2)


#define	G_RM_FOG_SHADE_A	GBL_c1(G_BL_CLR_FOG, G_BL_A_SHADE, G_BL_CLR_IN, G_BL_1MA)
#define	G_RM_FOG_PRIM_A		GBL_c1(G_BL_CLR_FOG, G_BL_A_FOG, G_BL_CLR_IN, G_BL_1MA)
#define	G_RM_PASS		GBL_c1(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)

#define	G_CV_K0		175
#define	G_CV_K1		-43
#define	G_CV_K2		-89
#define	G_CV_K3		222
#define	G_CV_K4		114
#define	G_CV_K5		42

#define	G_SC_NON_INTERLACE	0
#define	G_SC_ODD_INTERLACE	3
#define	G_SC_EVEN_INTERLACE	2

#define G_DL_PUSH		0x00
#define G_DL_NOPUSH		0x01

#if defined(_LANGUAGE_C)

typedef struct {
	short		ob[3];	/* x, y, z */
	unsigned short	flag;
	short		tc[2];	/* texture coord */
	unsigned char	cn[4];	/* color & alpha */
} Vtx_t;

typedef struct {
	short		ob[3];	/* x, y, z */
	unsigned short	flag;
	short		tc[2];	/* texture coord */
	signed char	n[3];	/* normal */
	unsigned char   a;      /* alpha  */
} Vtx_tn;

typedef union {
    Vtx_t		v;  /* Use this one for colors  */
    Vtx_tn              n;  /* Use this one for normals */
    u64	force_structure_alignment;
} Vtx;

typedef struct {
  void *SourceImagePointer;
  void *TlutPointer;
  short Stride;
  short SubImageWidth;
  short SubImageHeight;
  char  SourceImageType;
  char  SourceImageBitSize;
  short SourceImageOffsetS;
  short SourceImageOffsetT;
  /* 20 bytes for above */

  /* padding to bring structure size to 64 bit allignment */
  char dummy[4];

} uSprite_t;

typedef union {
  uSprite_t  s;

  /* Need to make sure this is 64 bit aligned */
  u64         force_structure_allignment[3];
} uSprite;

typedef struct {
	unsigned char	flag;
	unsigned char	v[3];
} Tri;

typedef long	Mtx_t[4][4];

typedef union {
    Mtx_t		m;
    u64	force_structure_alignment;
} Mtx;

#define G_MAXZ		0x03ff	/* 10 bits of integer screen-Z precision */

typedef struct {
	short	vscale[4];  /* scale, 2 bits fraction */
	short	vtrans[4];  /* translate, 2 bits fraction */
	/* both the above arrays are padded to 64-bit boundary */
} Vp_t;

typedef union {
    Vp_t		vp;
    u64	force_structure_alignment;
} Vp;

#define G_MV_MMTX	2
#define G_MV_PMTX	6
#define G_MV_VIEWPORT	8
#define G_MV_LIGHT	10
#define G_MV_POINT	12
#define G_MV_MATRIX	14
#define G_MVO_LOOKATX	(0*24)
#define G_MVO_LOOKATY	(1*24)
#define G_MVO_L0	(2*24)
#define G_MVO_L1	(3*24)
#define G_MVO_L2	(4*24)
#define G_MVO_L3	(5*24)
#define G_MVO_L4	(6*24)
#define G_MVO_L5	(7*24)
#define G_MVO_L6	(8*24)
#define G_MVO_L7	(9*24)

#define G_MW_MATRIX		0x00
#define G_MW_NUMLIGHT		0x02
#define G_MW_CLIP		0x04
#define G_MW_SEGMENT		0x06
#define G_MW_FOG		0x08
#define G_MW_LIGHTCOL		0x0a
#ifdef	F3DEX_GBI_2
#define G_MW_FORCEMTX		0x0c
#else	/* F3DEX_GBI_2 */
#define G_MW_POINTS		0x0c
#endif	/* F3DEX_GBI_2 */
#define	G_MW_PERSPNORM		0x0e

#define G_MWO_NUMLIGHT		0x00
#define G_MWO_CLIP_RNX		0x04
#define G_MWO_CLIP_RNY		0x0c
#define G_MWO_CLIP_RPX		0x14
#define G_MWO_CLIP_RPY		0x1c
#define G_MWO_SEGMENT_0		0x00
#define G_MWO_SEGMENT_1		0x01
#define G_MWO_SEGMENT_2		0x02
#define G_MWO_SEGMENT_3		0x03
#define G_MWO_SEGMENT_4		0x04
#define G_MWO_SEGMENT_5		0x05
#define G_MWO_SEGMENT_6		0x06
#define G_MWO_SEGMENT_7		0x07
#define G_MWO_SEGMENT_8		0x08
#define G_MWO_SEGMENT_9		0x09
#define G_MWO_SEGMENT_A		0x0a
#define G_MWO_SEGMENT_B		0x0b
#define G_MWO_SEGMENT_C		0x0c
#define G_MWO_SEGMENT_D		0x0d
#define G_MWO_SEGMENT_E		0x0e
#define G_MWO_SEGMENT_F		0x0f
#define G_MWO_FOG		0x00
#define G_MWO_aLIGHT_1		0x00
#define G_MWO_bLIGHT_1		0x04
#ifdef	F3DEX_GBI_2
#define G_MWO_aLIGHT_2		0x18
#define G_MWO_bLIGHT_2		0x1c
#define G_MWO_aLIGHT_3		0x30
#define G_MWO_bLIGHT_3		0x34
#define G_MWO_aLIGHT_4		0x48
#define G_MWO_bLIGHT_4		0x4c
#define G_MWO_aLIGHT_5		0x60
#define G_MWO_bLIGHT_5		0x64
#define G_MWO_aLIGHT_6		0x78
#define G_MWO_bLIGHT_6		0x7c
#define G_MWO_aLIGHT_7		0x90
#define G_MWO_bLIGHT_7		0x94
#define G_MWO_aLIGHT_8		0xa8
#define G_MWO_bLIGHT_8		0xac
#else
#define G_MWO_aLIGHT_2		0x20
#define G_MWO_bLIGHT_2		0x24
#define G_MWO_aLIGHT_3		0x40
#define G_MWO_bLIGHT_3		0x44
#define G_MWO_aLIGHT_4		0x60
#define G_MWO_bLIGHT_4		0x64
#define G_MWO_aLIGHT_5		0x80
#define G_MWO_bLIGHT_5		0x84
#define G_MWO_aLIGHT_6		0xa0
#define G_MWO_bLIGHT_6		0xa4
#define G_MWO_aLIGHT_7		0xc0
#define G_MWO_bLIGHT_7		0xc4
#define G_MWO_aLIGHT_8		0xe0
#define G_MWO_bLIGHT_8		0xe4
#endif
#define G_MWO_MATRIX_XX_XY_I	0x00
#define G_MWO_MATRIX_XZ_XW_I	0x04
#define G_MWO_MATRIX_YX_YY_I	0x08
#define G_MWO_MATRIX_YZ_YW_I	0x0c
#define G_MWO_MATRIX_ZX_ZY_I	0x10
#define G_MWO_MATRIX_ZZ_ZW_I	0x14
#define G_MWO_MATRIX_WX_WY_I	0x18
#define G_MWO_MATRIX_WZ_WW_I	0x1c
#define G_MWO_MATRIX_XX_XY_F	0x20
#define G_MWO_MATRIX_XZ_XW_F	0x24
#define G_MWO_MATRIX_YX_YY_F	0x28
#define G_MWO_MATRIX_YZ_YW_F	0x2c
#define G_MWO_MATRIX_ZX_ZY_F	0x30
#define G_MWO_MATRIX_ZZ_ZW_F	0x34
#define G_MWO_MATRIX_WX_WY_F	0x38
#define G_MWO_MATRIX_WZ_WW_F	0x3c
#define G_MWO_POINT_RGBA	0x10
#define G_MWO_POINT_ST		0x14
#define G_MWO_POINT_XYSCREEN	0x18
#define G_MWO_POINT_ZSCREEN	0x1c

typedef struct {
  unsigned char	col[3];		/* diffuse light value (rgba) */
  char 		pad1;
  unsigned char	colc[3];	/* copy of diffuse light value (rgba) */
  char 		pad2;
  signed char	dir[3];		/* direction of light (normalized) */
  char 		pad3;
} Light_t;

typedef struct {
  unsigned char	col[3];		/* ambient light value (rgba) */
  char 		pad1;
  unsigned char	colc[3];	/* copy of ambient light value (rgba) */
  char 		pad2;
} Ambient_t;

typedef struct {
  int		x1,y1,x2,y2;	/* texture offsets for highlight 1/2 */
} Hilite_t;

typedef union {
    Light_t	l;
    u64	force_structure_alignment[2];
} Light;

typedef union {
    Ambient_t	l;
    u64	force_structure_alignment[1];
} Ambient;

typedef struct {
    Ambient	a;
    Light	l[7];
} Lightsn;

typedef struct {
    Ambient	a;
    Light	l[1];
} Lights0;

typedef struct {
    Ambient	a;
    Light	l[1];
} Lights1;

typedef struct {
    Ambient	a;
    Light	l[2];
} Lights2;

typedef struct {
    Ambient	a;
    Light	l[3];
} Lights3;

typedef struct {
    Ambient	a;
    Light	l[4];
} Lights4;

typedef struct {
    Ambient	a;
    Light	l[5];
} Lights5;

typedef struct {
    Ambient	a;
    Light	l[6];
} Lights6;

typedef struct {
    Ambient	a;
    Light	l[7];
} Lights7;

typedef struct {
    Light	l[2];
} LookAt;

typedef union {
    Hilite_t	h;
    long int	force_structure_alignment[4];
} Hilite;

#define gdSPDefLights0(ar,ag,ab)							{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ { 0, 0, 0},0,{ 0, 0, 0},0,{ 0, 0, 0},0}}} }
#define gdSPDefLights1(ar,ag,ab,r1,g1,b1,x1,y1,z1)					{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}}} }
#define gdSPDefLights2(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2)			{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},				{{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}}} }
#define gdSPDefLights3(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3)											{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},				{{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},				{{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}}} }
#define gdSPDefLights4(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3,r4,g4,b4,x4,y4,z4)								{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},				{{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},				{{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}},				{{ {r4,g4,b4},0,{r4,g4,b4},0,{x4,y4,z4},0}}} }
#define gdSPDefLights5(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3,r4,g4,b4,x4,y4,z4,r5,g5,b5,x5,y5,z5)						{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},				{{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},				{{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}},				{{ {r4,g4,b4},0,{r4,g4,b4},0,{x4,y4,z4},0}},				{{ {r5,g5,b5},0,{r5,g5,b5},0,{x5,y5,z5},0}}} }


#define gdSPDefLights6(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3,r4,g4,b4,x4,y4,z4,r5,g5,b5,x5,y5,z5,r6,g6,b6,x6,y6,z6)				{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},				{{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},				{{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}},				{{ {r4,g4,b4},0,{r4,g4,b4},0,{x4,y4,z4},0}},				{{ {r5,g5,b5},0,{r5,g5,b5},0,{x5,y5,z5},0}},				{{ {r6,g6,b6},0,{r6,g6,b6},0,{x6,y6,z6},0}}} }


#define gdSPDefLights7(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3,r4,g4,b4,x4,y4,z4,r5,g5,b5,x5,y5,z5,r6,g6,b6,x6,y6,z6,r7,g7,b7,x7,y7,z7)			{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},				{{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},				{{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}},				{{ {r4,g4,b4},0,{r4,g4,b4},0,{x4,y4,z4},0}},				{{ {r5,g5,b5},0,{r5,g5,b5},0,{x5,y5,z5},0}},				{{ {r6,g6,b6},0,{r6,g6,b6},0,{x6,y6,z6},0}},				{{ {r7,g7,b7},0,{r7,g7,b7},0,{x7,y7,z7},0}}} }


#define gdSPDefLookAt(rightx,righty,rightz,upx,upy,upz)			    		{	{{ {{0,0,0},0,{0,0,0},0,{rightx,righty,rightz},0}}, 			{ {{0,0x80,0},0,{0,0x80,0},0,{upx,upy,upz},0}}}   }

// bit fields not supported in SmallerC.
typedef struct {
	int		cmd;
	// unsigned int	par:8;
	// unsigned int	len:16;
	unsigned int	addr;
} Gdma;

typedef struct {
		int		cmd;
		//int		pad:24;
		Tri		tri;
} Gtri;

typedef struct {
		int		cmd;
		//int		pad1:24;
		//int             pad2:24;
		unsigned char	param;
} Gpopmtx;

typedef struct {
		int		cmd;
		//int		pad0:8;
		//int		mw_index:8;
		//int		number:8;
		//int		pad1:8;
		int		base; //:24;
} Gsegment;

typedef struct {
		int		cmd;
		//int		pad0:8;
		//int		sft:8;
		//int		len:8;
		unsigned int	data; //:32;
} GsetothermodeL;

typedef struct {
		int		cmd;
		//int		pad0:8;
		//int		sft:8;
		//int		len:8;
		unsigned int	data; //:32;
} GsetothermodeH;

typedef struct {
		unsigned char	cmd;
		unsigned char	lodscale;
		unsigned char	tile;
		unsigned char	on;
		unsigned short	s;
		unsigned short	t;
} Gtexture;

typedef struct {
		int		cmd;
		//int		pad:24;
		Tri		line;
} Gline3D;

typedef struct {
		int		cmd;
		//int		pad1:24;
		short int	pad2;
		short int       scale;
} Gperspnorm;

typedef struct {
                int             cmd;
                //unsigned int    fmt:3;
                //unsigned int    siz:2;
               // unsigned int    pad:7;
                //unsigned int    wd:12;
                unsigned int    dram;
} Gsetimg;

typedef struct {
		int		cmd;
		//unsigned int	muxs0:24;
		unsigned int	muxs1; //:32;
} Gsetcombine;

typedef struct {
		int		cmd;
		unsigned char	pad;
		unsigned char	prim_min_level;
		unsigned char	prim_level;
		unsigned long	color;
} Gsetcolor;

typedef struct {
		int		cmd;
		//int		x0:10;
		//int		x0frac:2;
		//int		y0:10;
		//int		y0frac:2;
		//unsigned int	pad:8;
		//int		x1:10;
		//int		x1frac:2;
		//int		y1:10;
		//int		y1frac:2;
} Gfillrect;

typedef struct {
		int		cmd;
		// unsigned int	fmt:3;
		// unsigned int	siz:2;
		// unsigned int	pad0:1;
		// unsigned int	line:9;
		// unsigned int	tmem:9;
		// unsigned int	pad1:5;
		// unsigned int	tile:3;
		// unsigned int	palette:4;
		// unsigned int	ct:1;
		// unsigned int	mt:1;
		// unsigned int	maskt:4;
		// unsigned int	shiftt:4;
		// unsigned int	cs:1;
		// unsigned int	ms:1;
		// unsigned int	masks:4;
		// unsigned int	shifts:4;
} Gsettile;

typedef struct {
		int		cmd;
		// unsigned int	sl:12;
		// unsigned int	tl:12;
		// int		pad:5;
		// unsigned int	tile:3;
		// unsigned int	sh:12;
		// unsigned int	th:12;
} Gloadtile;

typedef Gloadtile Gloadblock;

typedef Gloadtile Gsettilesize;

typedef Gloadtile Gloadtlut;

typedef struct {
		unsigned int	cmd;
		// unsigned int	xl:12;
		// unsigned int	yl:12;
		// unsigned int	pad1:5;
		// unsigned int	tile:3;
		// unsigned int	xh:12;
		// unsigned int	yh:12;
		// unsigned int	s:16;
		// unsigned int	t:16;
		// unsigned int	dsdx:16;
		// unsigned int	dtdy:16;
} Gtexrect;

#define	MakeTexRect(xh,yh,flip,tile,xl,yl,s,t,dsdx,dtdy)			G_TEXRECT, xh, yh, 0, flip, 0, tile, xl, yl, s, t, dsdx, dtdy

typedef struct {
    unsigned long w0;
    unsigned long w1;
    unsigned long w2;
    unsigned long w3;
} TexRect;

typedef struct {
	unsigned int w0;
	unsigned int w1;
} Gwords;

typedef union {
	Gwords		words;
	Gdma		dma;
	Gtri		tri;
	Gline3D		line;
	Gpopmtx		popmtx;
	Gsegment	segment;
	GsetothermodeH	setothermodeH;
	GsetothermodeL	setothermodeL;
	Gtexture	texture;
	Gperspnorm	perspnorm;
	Gsetimg		setimg;
	Gsetcombine	setcombine;
	Gsetcolor	setcolor;
	Gfillrect	fillrect;	/* use for setscissor also */
	Gsettile	settile;
	Gloadtile	loadtile;	/* use for loadblock also, th is dxt */
	Gsettilesize	settilesize;
	Gloadtlut	loadtlut;
       u64	force_structure_alignment;
} Gfx;

#define	gDma0p(pkt, c, s, l)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL((c), 24, 8) | _SHIFTL((l), 0, 24);		_g->words.w1 = (unsigned int)(s);				}

#define	gsDma0p(c, s, l)						{{										_SHIFTL((c), 24, 8) | _SHIFTL((l), 0, 24), (unsigned int)(s)	}}

#define	gDma1p(pkt, c, s, l, p)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL((c), 24, 8) | _SHIFTL((p), 16, 8) |				_SHIFTL((l), 0, 16));					_g->words.w1 = (unsigned int)(s);				}

#define	gsDma1p(c, s, l, p)						{{										(_SHIFTL((c), 24, 8) | _SHIFTL((p), 16, 8) | 				 _SHIFTL((l), 0, 16)), 						        (unsigned int)(s)						}}

#define	gDma2p(pkt, c, adrs, len, idx, ofs)				{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = (_SHIFTL((c),24,8)|_SHIFTL(((len)-1)/8,19,5)|				_SHIFTL((ofs)/8,8,8)|_SHIFTL((idx),0,8));		_g->words.w1 = (unsigned int)(adrs);				}
#define	gsDma2p(c, adrs, len, idx, ofs)					{{										(_SHIFTL((c),24,8)|_SHIFTL(((len)-1)/8,19,5)|				 _SHIFTL((ofs)/8,8,8)|_SHIFTL((idx),0,8)),			        (unsigned int)(adrs)						}}

#define	gSPNoOp(pkt)		gDma0p(pkt, G_SPNOOP, 0, 0)
#define	gsSPNoOp()		gsDma0p(G_SPNOOP, 0, 0)

#ifdef	F3DEX_GBI_2
#define	gSPMatrix(pkt, m, p)			gDma2p((pkt),G_MTX,(m),sizeof(Mtx),(p)^G_MTX_PUSH,0)
#define	gsSPMatrix(m, p)			gsDma2p(     G_MTX,(m),sizeof(Mtx),(p)^G_MTX_PUSH,0)
#else	/* F3DEX_GBI_2 */
#define	gSPMatrix(pkt, m, p)	gDma1p(pkt, G_MTX, m, sizeof(Mtx), p)
#define	gsSPMatrix(m, p)	gsDma1p(G_MTX, m, sizeof(Mtx), p)
#endif	/* F3DEX_GBI_2 */

#if	defined(F3DEX_GBI_2)

#define	gSPVertex(pkt, v, n, v0)				{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 =								  _SHIFTL(G_VTX,24,8)|_SHIFTL((n),12,8)|_SHIFTL((v0)+(n),1,7);		_g->words.w1 = (unsigned int)(v);				}
#define	gsSPVertex(v, n, v0)					{{										(_SHIFTL(G_VTX,24,8)|_SHIFTL((n),12,8)|_SHIFTL((v0)+(n),1,7)),	        (unsigned int)(v)						}}
#elif	(defined(F3DEX_GBI)||defined(F3DLP_GBI))

#define	gSPVertex(pkt, v, n, v0)                 gDma1p((pkt),G_VTX,(v),((n)<<10)|(sizeof(Vtx)*(n)-1),(v0)*2)
#define	gsSPVertex(v, n, v0)                 gsDma1p(G_VTX,(v),((n)<<10)|(sizeof(Vtx)*(n)-1),(v0)*2)
#else
#define	gSPVertex(pkt, v, n, v0)                 gDma1p(pkt, G_VTX, v, sizeof(Vtx)*(n),((n)-1)<<4|(v0))
#define	gsSPVertex(v, n, v0)                 gsDma1p(G_VTX, v, sizeof(Vtx)*(n), ((n)-1)<<4|(v0))
#endif

#ifdef	F3DEX_GBI_2
#define gSPViewport(pkt, v)			gDma2p((pkt), G_MOVEMEM, (v), sizeof(Vp), G_MV_VIEWPORT, 0)
#define gsSPViewport(v)			gsDma2p(      G_MOVEMEM, (v), sizeof(Vp), G_MV_VIEWPORT, 0)
#else	/* F3DEX_GBI_2 */
#define gSPViewport(pkt,v)			gDma1p((pkt), G_MOVEMEM, (v), sizeof(Vp), G_MV_VIEWPORT)
#define gsSPViewport(v)			gsDma1p(      G_MOVEMEM, (v), sizeof(Vp), G_MV_VIEWPORT)
#endif	/* F3DEX_GBI_2 */

#define	gSPDisplayList(pkt,dl)	gDma1p(pkt,G_DL,dl,0,G_DL_PUSH)
#define	gsSPDisplayList(   dl)	gsDma1p(   G_DL,dl,0,G_DL_PUSH)

#define	gSPBranchList(pkt,dl)	gDma1p(pkt,G_DL,dl,0,G_DL_NOPUSH)
#define	gsSPBranchList(   dl)	gsDma1p(   G_DL,dl,0,G_DL_NOPUSH)

#define	gSPSprite2DBase(pkt, s)	gDma1p(pkt, G_SPRITE2D_BASE, s, sizeof(uSprite), 0)
#define	gsSPSprite2DBase(s)	gsDma1p(G_SPRITE2D_BASE, s, sizeof(uSprite), 0)

#define	gImmp0(pkt, c)							{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL((c), 24, 8);				}

#define	gsImmp0(c)							{{										_SHIFTL((c), 24, 8)						}}

#define	gImmp1(pkt, c, p0)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL((c), 24, 8);					_g->words.w1 = (unsigned int)(p0);				}

#define	gsImmp1(c, p0)							{{										_SHIFTL((c), 24, 8), (unsigned int)(p0)				}}

#define	gImmp2(pkt, c, p0, p1)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL((c), 24, 8);					_g->words.w1 = _SHIFTL((p0), 16, 16) | _SHIFTL((p1), 8, 8);	}

#define	gsImmp2(c, p0, p1)						{{										_SHIFTL((c), 24, 8),  _SHIFTL((p0), 16, 16) | _SHIFTL((p1), 8, 8)}}

#define	gImmp3(pkt, c, p0, p1, p2)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL((c), 24, 8);					_g->words.w1 = (_SHIFTL((p0), 16, 16) | _SHIFTL((p1), 8, 8) |				_SHIFTL((p2), 0, 8));				}

#define	gsImmp3(c, p0, p1, p2)						{{										_SHIFTL((c), 24, 8), (_SHIFTL((p0), 16, 16) | 						      _SHIFTL((p1), 8, 8) | _SHIFTL((p2), 0, 8))}}

#define	gImmp21(pkt, c, p0, p1, dat)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL((c), 24, 8)  | _SHIFTL((p0), 8, 16) |				_SHIFTL((p1), 0, 8));					_g->words.w1 = (unsigned int) (dat);				}

#define	gsImmp21(c, p0, p1, dat)					{{										_SHIFTL((c), 24, 8) | _SHIFTL((p0), 8, 16) | _SHIFTL((p1), 0, 8),        (unsigned int) (dat)						}}

#ifdef	F3DEX_GBI_2
#define gMoveWd(pkt, index, offset, data)					gDma1p((pkt), G_MOVEWORD, data, offset, index)
#define gsMoveWd(    index, offset, data)					gsDma1p(      G_MOVEWORD, data, offset, index)
#else	/* F3DEX_GBI_2 */
#define gMoveWd(pkt, index, offset, data)					gImmp21((pkt), G_MOVEWORD, offset, index, data)
#define gsMoveWd(    index, offset, data)					gsImmp21(      G_MOVEWORD, offset, index, data)
#endif	/* F3DEX_GBI_2 */

#define gSPSprite2DScaleFlip(pkt, sx, sy, fx, fy)                       {                                                                       	Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_SPRITE2D_SCALEFLIP, 24, 8) |          			_SHIFTL((fx), 8, 8) |                           			_SHIFTL((fy), 0, 8));	                        	_g->words.w1 = (_SHIFTL((sx), 16, 16) |                         			_SHIFTL((sy),  0, 16));                         }

#define gsSPSprite2DScaleFlip(sx, sy, fx, fy)                           {{                                                                                 (_SHIFTL(G_SPRITE2D_SCALEFLIP, 24, 8) |                       	   _SHIFTL((fx), 8, 8) |                                        	   _SHIFTL((fy), 0, 8)),	                                	  (_SHIFTL((sx), 16, 16) |                                      	   _SHIFTL((sy),  0, 16))                                       }}

#define gSPSprite2DDraw(pkt, px, py)                                    {                                                                       	Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_SPRITE2D_DRAW, 24, 8));               	_g->words.w1 = (_SHIFTL((px), 16, 16) |                         			_SHIFTL((py),  0, 16));                         }

#define gsSPSprite2DDraw(px, py)                                        {{                                                                                 (_SHIFTL(G_SPRITE2D_DRAW, 24, 8)),                            	  (_SHIFTL((px), 16, 16) |                                      	   _SHIFTL((py),  0, 16))                                       }}

#if	(defined(F3DLP_GBI)||defined(F3DEX_GBI))
#define __gsSP1Triangle_w1(v0, v1, v2)			     (_SHIFTL((v0)*2,16,8)|_SHIFTL((v1)*2,8,8)|_SHIFTL((v2)*2,0,8))
#define __gsSP1Triangle_w1f(v0, v1, v2, flag)			     (((flag) == 0) ? __gsSP1Triangle_w1(v0, v1, v2):		      ((flag) == 1) ? __gsSP1Triangle_w1(v1, v2, v0):			              __gsSP1Triangle_w1(v2, v0, v1))
#define __gsSPLine3D_w1(v0, v1, wd)				     (_SHIFTL((v0)*2,16,8)|_SHIFT((v1)*2,8,8)|_SHIFT((wd),0,8))
#define __gsSPLine3D_w1f(v0, v1, wd, flag)			     (((flag) == 0) ? __gsSPLine3D_w1(v0, v1, wd):			              __gsSPLine3D_w1(v1, v0, wd))
#define __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag)	  (((flag) == 0) ? __gsSP1Triangle_w1(v0, v1, v2):         ((flag) == 1) ? __gsSP1Triangle_w1(v1, v2, v3):         ((flag) == 2) ? __gsSP1Triangle_w1(v2, v3, v0):                         __gsSP1Triangle_w1(v3, v0, v1))
#define __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag)	  (((flag) == 0) ? __gsSP1Triangle_w1(v0, v2, v3):         ((flag) == 1) ? __gsSP1Triangle_w1(v1, v3, v0):         ((flag) == 2) ? __gsSP1Triangle_w1(v2, v0, v1):                         __gsSP1Triangle_w1(v3, v1, v2))
#else
#define __gsSP1Triangle_w1f(v0, v1, v2, flag)			     (_SHIFTL((flag), 24,8)|_SHIFTL((v0)*10,16,8)|		      _SHIFTL((v1)*10, 8,8)|_SHIFTL((v2)*10, 0,8))
#define __gsSPLine3D_w1f(v0, v1, wd, flag)			     (_SHIFTL((flag), 24,8)|_SHIFTL((v0)*10,16,8)| 		      _SHIFTL((v1)*10, 8,8)|_SHIFTL((wd),    0,8))
#endif

#ifdef	F3DEX_GBI_2

#define gSP1Triangle(pkt, v0, v1, v2, flag)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_TRI1, 24, 8)|							__gsSP1Triangle_w1f(v0, v1, v2, flag);			_g->words.w1 = 0;						}
#define gsSP1Triangle(v0, v1, v2, flag)					{{										_SHIFTL(G_TRI1, 24, 8)|__gsSP1Triangle_w1f(v0, v1, v2, flag),		0								}}

#define gSPLine3D(pkt, v0, v1, flag)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_LINE3D, 24, 8)|						__gsSPLine3D_w1f(v0, v1, 0, flag);			_g->words.w1 = 0;						}
#define gsSPLine3D(v0, v1, flag)					{{										_SHIFTL(G_LINE3D, 24, 8)|__gsSPLine3D_w1f(v0, v1, 0, flag),		0								}}

#define gSPLineW3D(pkt, v0, v1, wd, flag)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_LINE3D, 24, 8)|						__gsSPLine3D_w1f(v0, v1, wd, flag);			_g->words.w1 = 0;						}
#define gsSPLineW3D(v0, v1, wd, flag)					{{										_SHIFTL(G_LINE3D, 24, 8)|__gsSPLine3D_w1f(v0, v1, wd, flag),		0								}}

#define gSP1Quadrangle(pkt, v0, v1, v2, v3, flag)                       {                                                                               Gfx *_g = (Gfx *)(pkt);                                                                                                                         _g->words.w0 = (_SHIFTL(G_QUAD, 24, 8)|	                                                __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag));           _g->words.w1 =  __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag);    }

#define gsSP1Quadrangle(v0, v1, v2, v3, flag)                           {{                                                                               (_SHIFTL(G_QUAD, 24, 8)|                                                 __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag)),                           __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag)                    }}
#else	/* F3DEX_GBI_2 */

#define gSP1Triangle(pkt, v0, v1, v2, flag)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_TRI1, 24, 8);					_g->words.w1 = __gsSP1Triangle_w1f(v0, v1, v2, flag);		}
#define gsSP1Triangle(v0, v1, v2, flag)					{{										_SHIFTL(G_TRI1, 24, 8),							__gsSP1Triangle_w1f(v0, v1, v2, flag)				}}

#define gSPLine3D(pkt, v0, v1, flag)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_LINE3D, 24, 8);				_g->words.w1 = __gsSPLine3D_w1f(v0, v1, 0, flag);		}
#define gsSPLine3D(v0, v1, flag)					{{										_SHIFTL(G_LINE3D, 24, 8),						__gsSPLine3D_w1f(v0, v1, 0, flag)				}}

#define gSPLineW3D(pkt, v0, v1, wd, flag)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_LINE3D, 24, 8);				_g->words.w1 = __gsSPLine3D_w1f(v0, v1, wd, flag);		}
#define gsSPLineW3D(v0, v1, wd, flag)					{{										_SHIFTL(G_LINE3D, 24, 8),						__gsSPLine3D_w1f(v0, v1, wd, flag)				}}

#define gSP1Quadrangle(pkt, v0, v1, v2, v3, flag)                       {                                                                               Gfx *_g = (Gfx *)(pkt);                                                                                                                         _g->words.w0 = (_SHIFTL(G_TRI2, 24, 8)|	                                                __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag));           _g->words.w1 =  __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag);    }

#define gsSP1Quadrangle(v0, v1, v2, v3, flag)                           {{                                                                               (_SHIFTL(G_TRI2, 24, 8)|                                                 __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag)),                           __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag)                    }}
#endif	/* F3DEX_GBI_2 */

#if	(defined(F3DLP_GBI)||defined(F3DEX_GBI))

#define gSP2Triangles(pkt, v00, v01, v02, flag0, v10, v11, v12, flag1)	{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_TRI2, 24, 8)|							__gsSP1Triangle_w1f(v00, v01, v02, flag0));	        _g->words.w1 =  __gsSP1Triangle_w1f(v10, v11, v12, flag1); 	}

#define gsSP2Triangles(v00, v01, v02, flag0, v10, v11, v12, flag1)	{{										(_SHIFTL(G_TRI2, 24, 8)|						 __gsSP1Triangle_w1f(v00, v01, v02, flag0)),				 __gsSP1Triangle_w1f(v10, v11, v12, flag1)			}}

#endif	/* F3DEX_GBI/F3DLP_GBI */

#if	(defined(F3DEX_GBI)||defined(F3DLP_GBI))
#define gSPCullDisplayList(pkt,vstart,vend)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_CULLDL, 24, 8) | 						_SHIFTL((vstart)*2, 0, 16);				_g->words.w1 = _SHIFTL((vend)*2, 0, 16);			}

#define gsSPCullDisplayList(vstart,vend)				{{										_SHIFTL(G_CULLDL, 24, 8) | _SHIFTL((vstart)*2, 0, 16),			_SHIFTL((vend)*2, 0, 16)					}}

#else
#define gSPCullDisplayList(pkt,vstart,vend)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_CULLDL, 24, 8) |			                       ((0x0f & (vstart))*40);					_g->words.w1 = (unsigned int)((0x0f & ((vend)+1))*40);		}

#define gsSPCullDisplayList(vstart,vend)				{{										_SHIFTL(G_CULLDL, 24, 8) | ((0x0f & (vstart))*40), 			((0x0f & ((vend)+1))*40)					}}
#endif

#define gSPSegment(pkt, segment, base)						gMoveWd(pkt, G_MW_SEGMENT, (segment)*4, base)
#define gsSPSegment(segment, base)						gsMoveWd(    G_MW_SEGMENT, (segment)*4, base)


#define FR_NEG_FRUSTRATIO_1	0x00000001
#define FR_POS_FRUSTRATIO_1	0x0000ffff
#define FR_NEG_FRUSTRATIO_2	0x00000002
#define FR_POS_FRUSTRATIO_2	0x0000fffe
#define FR_NEG_FRUSTRATIO_3	0x00000003
#define FR_POS_FRUSTRATIO_3	0x0000fffd
#define FR_NEG_FRUSTRATIO_4	0x00000004
#define FR_POS_FRUSTRATIO_4	0x0000fffc
#define FR_NEG_FRUSTRATIO_5	0x00000005
#define FR_POS_FRUSTRATIO_5	0x0000fffb
#define FR_NEG_FRUSTRATIO_6	0x00000006
#define FR_POS_FRUSTRATIO_6	0x0000fffa

#define gSPClipRatio(pkt, r)						{										gMoveWd(pkt, G_MW_CLIP, G_MWO_CLIP_RNX, FR_NEG_##r);			gMoveWd(pkt, G_MW_CLIP, G_MWO_CLIP_RNY, FR_NEG_##r);			gMoveWd(pkt, G_MW_CLIP, G_MWO_CLIP_RPX, FR_POS_##r);			gMoveWd(pkt, G_MW_CLIP, G_MWO_CLIP_RPY, FR_POS_##r);		}

#define gsSPClipRatio(r)							gsMoveWd(G_MW_CLIP, G_MWO_CLIP_RNX, FR_NEG_##r),			gsMoveWd(G_MW_CLIP, G_MWO_CLIP_RNY, FR_NEG_##r),			gsMoveWd(G_MW_CLIP, G_MWO_CLIP_RPX, FR_POS_##r),			gsMoveWd(G_MW_CLIP, G_MWO_CLIP_RPY, FR_POS_##r)

#ifdef	F3DEX_GBI_2
#define gSPInsertMatrix(pkt, where, num)					ERROR!! gSPInsertMatrix is no longer supported.
#define gsSPInsertMatrix(where, num)						ERROR!! gsSPInsertMatrix is no longer supported.
#else
#define gSPInsertMatrix(pkt, where, num)					gMoveWd(pkt, G_MW_MATRIX, where, num)
#define gsSPInsertMatrix(where, num)						gsMoveWd(G_MW_MATRIX, where, num)
#endif

#ifdef	F3DEX_GBI_2
#define	gSPForceMatrix(pkt, mptr)					{	gDma2p((pkt),G_MOVEMEM,(mptr),sizeof(Mtx),G_MV_MATRIX,0);		gMoveWd((pkt), G_MW_FORCEMTX,0,0x00010000);			}
#define	gsSPForceMatrix(mptr)							gsDma2p(G_MOVEMEM,(mptr),sizeof(Mtx),G_MV_MATRIX,0),			gsMoveWd(G_MW_FORCEMTX,0,0x00010000)

#else	/* F3DEX_GBI_2 */
#define	gSPForceMatrix(pkt, mptr)					{										gDma1p(pkt, G_MOVEMEM, mptr,              16, G_MV_MATRIX_1);		gDma1p(pkt, G_MOVEMEM, (char *)(mptr)+16, 16, G_MV_MATRIX_2);		gDma1p(pkt, G_MOVEMEM, (char *)(mptr)+32, 16, G_MV_MATRIX_3);		gDma1p(pkt, G_MOVEMEM, (char *)(mptr)+48, 16, G_MV_MATRIX_4);	}
#define	gsSPForceMatrix(mptr)							gsDma1p(    G_MOVEMEM, mptr,              16, G_MV_MATRIX_1),		gsDma1p(    G_MOVEMEM, (char *)(mptr)+16, 16, G_MV_MATRIX_2),		gsDma1p(    G_MOVEMEM, (char *)(mptr)+32, 16, G_MV_MATRIX_3),		gsDma1p(    G_MOVEMEM, (char *)(mptr)+48, 16, G_MV_MATRIX_4)
#endif	/* F3DEX_GBI_2 */

#if	(defined(F3DEX_GBI)||defined(F3DLP_GBI))
#define gSPModifyVertex(pkt, vtx, where, val)				{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = (_SHIFTL(G_MODIFYVTX,24,8)|					        _SHIFTL((where),16,8)|_SHIFTL((vtx)*2,0,16));		_g->words.w1 = (unsigned int)(val);				}
#define gsSPModifyVertex(vtx, where, val)				{{										_SHIFTL(G_MODIFYVTX,24,8)|						_SHIFTL((where),16,8)|_SHIFTL((vtx)*2,0,16),				(unsigned int)(val)						}}
#else
#define gSPModifyVertex(pkt, vtx, where, val)					 gMoveWd(pkt, G_MW_POINTS, (vtx)*40+(where), val)
#define gsSPModifyVertex(vtx, where, val)					 gsMoveWd(G_MW_POINTS, (vtx)*40+(where), val)
#endif

#if	(defined(F3DEX_GBI)||defined(F3DLP_GBI))

#define	G_BZ_PERSP	0
#define	G_BZ_ORTHO	1

#define	G_DEPTOZSrg(zval, near, far, flag, zmin, zmax)			(((unsigned int)FTOFIX32(((flag) == G_BZ_PERSP ? 						  (1.0f-(float)(near)/(float)(zval)) / 					  (1.0f-(float)(near)/(float)(far )) :					  ((float)(zval) - (float)(near)) /					  ((float)(far ) - (float)(near))))) *		 (((int)((zmax) - (zmin)))&~1) + (int)FTOFIX32(zmin))

#define	G_DEPTOZS(zval, near, far, flag) 	G_DEPTOZSrg(zval, near, far, flag, 0, G_MAXZ)

#define	gSPBranchLessZrg(pkt, dl, vtx, zval, near, far, flag, zmin, zmax) {										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = _SHIFTL(G_RDPHALF_1,24,8);				_g->words.w1 = (unsigned int)(dl);					_g = (Gfx *)(pkt);							_g->words.w0 = (_SHIFTL(G_BRANCH_Z,24,8)|					        _SHIFTL((vtx)*5,12,12)|_SHIFTL((vtx)*2,0,12));		_g->words.w1 = G_DEPTOZSrg(zval, near, far, flag, zmin, zmax);	}

#define	gsSPBranchLessZrg(dl, vtx, zval, near, far, flag, zmin, zmax)	      {{	_SHIFTL(G_RDPHALF_1,24,8),					      	(unsigned int)(dl),						}},    {{	_SHIFTL(G_BRANCH_Z,24,8)|_SHIFTL((vtx)*5,12,12)|_SHIFTL((vtx)*2,0,12),	G_DEPTOZSrg(zval, near, far, flag, zmin, zmax),			}}

#define	gSPBranchLessZ(pkt, dl, vtx, zval, near, far, flag)			gSPBranchLessZrg(pkt, dl, vtx, zval, near, far, flag, 0, G_MAXZ)
#define	gsSPBranchLessZ(dl, vtx, zval, near, far, flag)				gsSPBranchLessZrg(dl, vtx, zval, near, far, flag, 0, G_MAXZ)

#define	gSPBranchLessZraw(pkt, dl, vtx, zval)				{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = _SHIFTL(G_RDPHALF_1,24,8);				_g->words.w1 = (unsigned int)(dl);					_g = (Gfx *)(pkt);							_g->words.w0 = (_SHIFTL(G_BRANCH_Z,24,8)|					        _SHIFTL((vtx)*5,12,12)|_SHIFTL((vtx)*2,0,12));		_g->words.w1 = (unsigned int)(zval);				}

#define	gsSPBranchLessZraw(dl, vtx, zval)				{{	_SHIFTL(G_RDPHALF_1,24,8),					      	(unsigned int)(dl),						}},    {{	_SHIFTL(G_BRANCH_Z,24,8)|_SHIFTL((vtx)*5,12,12)|_SHIFTL((vtx)*2,0,12),	(unsigned int)(zval),						}}

#define	gSPLoadUcodeEx(pkt, uc_start, uc_dstart, uc_dsize)		{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = _SHIFTL(G_RDPHALF_1,24,8);				_g->words.w1 = (unsigned int)(uc_dstart);				_g = (Gfx *)(pkt);							_g->words.w0 = (_SHIFTL(G_LOAD_UCODE,24,8)|						_SHIFTL((int)(uc_dsize)-1,0,16));			_g->words.w1 = (unsigned int)(uc_start);			}

#define	gsSPLoadUcodeEx(uc_start, uc_dstart, uc_dsize)			{{	_SHIFTL(G_RDPHALF_1,24,8),						(unsigned int)(uc_dstart),				}},	{{	_SHIFTL(G_LOAD_UCODE,24,8)|						  _SHIFTL((int)(uc_dsize)-1,0,16),					(unsigned int)(uc_start),				}}

#define	gSPLoadUcode(pkt, uc_start, uc_dstart)				        gSPLoadUcodeEx((pkt), (uc_start), (uc_dstart), SP_UCODE_DATA_SIZE)
#define	gsSPLoadUcode(uc_start, uc_dstart)				        gsSPLoadUcodeEx((uc_start), (uc_dstart), SP_UCODE_DATA_SIZE)

#define	gSPLoadUcodeL(pkt, ucode)					        gSPLoadUcode((pkt), OS_K0_TO_PHYSICAL(&##ucode##TextStart),			            OS_K0_TO_PHYSICAL(&##ucode##DataStart))
#define	gsSPLoadUcodeL(ucode)						        gsSPLoadUcode(OS_K0_TO_PHYSICAL(&##ucode##TextStart),				      OS_K0_TO_PHYSICAL(&##ucode##DataStart))
#endif

#ifdef	F3DEX_GBI_2

#define	gSPDma_io(pkt, flag, dmem, dram, size)				{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = _SHIFTL(G_DMA_IO,24,8)|_SHIFTL((flag),23,1)|		  _SHIFTL((dmem)/8,13,10)|_SHIFTL((size)-1,0,12);			_g->words.w1 = (unsigned int)(dram);				}

#define	gsSPDma_io(flag, dmem, dram, size)				{{										_SHIFTL(G_DMA_IO,24,8)|_SHIFTL((flag),23,1)|				_SHIFTL((dmem)/8,13,10)|_SHIFTL((size)-1,0,12),				(unsigned int)(dram)						}}

#define	gSPDmaRead(pkt,dmem,dram,size)	gSPDma_io((pkt),0,(dmem),(dram),(size))
#define	gsSPDmaRead(dmem,dram,size)	gsSPDma_io(0,(dmem),(dram),(size))
#define	gSPDmaWrite(pkt,dmem,dram,size)	gSPDma_io((pkt),1,(dmem),(dram),(size))
#define	gsSPDmaWrite(dmem,dram,size)	gsSPDma_io(1,(dmem),(dram),(size))
#endif

#ifdef	F3DEX_GBI_2
#define NUML(n)	((n)*24)
#else
#define NUML(n)	(((n)+1)*32 + 0x80000000)
#endif
#define NUMLIGHTS_0	1
#define NUMLIGHTS_1	1
#define NUMLIGHTS_2	2
#define NUMLIGHTS_3	3
#define NUMLIGHTS_4	4
#define NUMLIGHTS_5	5
#define NUMLIGHTS_6	6
#define NUMLIGHTS_7	7

#define gSPNumLights(pkt, n)							gMoveWd(pkt, G_MW_NUMLIGHT, G_MWO_NUMLIGHT, NUML(n))
#define gsSPNumLights(n)							gsMoveWd(    G_MW_NUMLIGHT, G_MWO_NUMLIGHT, NUML(n))

#define LIGHT_1		1
#define LIGHT_2		2
#define LIGHT_3		3
#define LIGHT_4		4
#define LIGHT_5		5
#define LIGHT_6		6
#define LIGHT_7		7
#define LIGHT_8		8

#ifdef	F3DEX_GBI_2
#define gSPLight(pkt, l, n)		  gDma2p((pkt),G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,(n)*24+24)
#define gsSPLight(l, n)		 gsDma2p(      G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,(n)*24+24)
#else	/* F3DEX_GBI_2 */
#define gSPLight(pkt, l, n)		 gDma1p(pkt, G_MOVEMEM, l, sizeof(Light),((n)-1)*2+G_MV_L0)
#define gsSPLight(l, n)		 gsDma1p(    G_MOVEMEM, l, sizeof(Light),((n)-1)*2+G_MV_L0)
#endif	/* F3DEX_GBI_2 */

#define gSPLightColor(pkt, n, col)					{										gMoveWd(pkt, G_MW_LIGHTCOL, G_MWO_a##n, col);				gMoveWd(pkt, G_MW_LIGHTCOL, G_MWO_b##n, col);			}
#define gsSPLightColor(n, col)							gsMoveWd(G_MW_LIGHTCOL, G_MWO_a##n, col),				gsMoveWd(G_MW_LIGHTCOL, G_MWO_b##n, col)

#define gSPSetLights0(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_0);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.a,2);					}
#define gsSPSetLights0(name)							gsSPNumLights(NUMLIGHTS_0),						gsSPLight(&name.l[0],1),						gsSPLight(&name.a,2)

#define gSPSetLights1(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_1);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.a,2);					}
#define gsSPSetLights1(name)							gsSPNumLights(NUMLIGHTS_1),						gsSPLight(&name.l[0],1),						gsSPLight(&name.a,2)

#define gSPSetLights2(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_2);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.l[1],2);						gSPLight(pkt,&name.a,3);					}
#define gsSPSetLights2(name)							gsSPNumLights(NUMLIGHTS_2),						gsSPLight(&name.l[0],1),						gsSPLight(&name.l[1],2),						gsSPLight(&name.a,3)

#define gSPSetLights3(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_3);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.l[1],2);						gSPLight(pkt,&name.l[2],3);						gSPLight(pkt,&name.a,4);					}
#define gsSPSetLights3(name)							gsSPNumLights(NUMLIGHTS_3),						gsSPLight(&name.l[0],1),						gsSPLight(&name.l[1],2),						gsSPLight(&name.l[2],3),						gsSPLight(&name.a,4)

#define gSPSetLights4(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_4);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.l[1],2);						gSPLight(pkt,&name.l[2],3);						gSPLight(pkt,&name.l[3],4);						gSPLight(pkt,&name.a,5);					}
#define gsSPSetLights4(name)							gsSPNumLights(NUMLIGHTS_4),						gsSPLight(&name.l[0],1),						gsSPLight(&name.l[1],2),						gsSPLight(&name.l[2],3),						gsSPLight(&name.l[3],4),						gsSPLight(&name.a,5)

#define gSPSetLights5(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_5);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.l[1],2);						gSPLight(pkt,&name.l[2],3);						gSPLight(pkt,&name.l[3],4);						gSPLight(pkt,&name.l[4],5);						gSPLight(pkt,&name.a,6);					}

#define gsSPSetLights5(name)							gsSPNumLights(NUMLIGHTS_5),						gsSPLight(&name.l[0],1),						gsSPLight(&name.l[1],2),						gsSPLight(&name.l[2],3),						gsSPLight(&name.l[3],4),						gsSPLight(&name.l[4],5),						gsSPLight(&name.a,6)

#define gSPSetLights6(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_6);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.l[1],2);						gSPLight(pkt,&name.l[2],3);						gSPLight(pkt,&name.l[3],4);						gSPLight(pkt,&name.l[4],5);						gSPLight(pkt,&name.l[5],6);						gSPLight(pkt,&name.a,7);					}

#define gsSPSetLights6(name)							gsSPNumLights(NUMLIGHTS_6),						gsSPLight(&name.l[0],1),						gsSPLight(&name.l[1],2),						gsSPLight(&name.l[2],3),						gsSPLight(&name.l[3],4),						gsSPLight(&name.l[4],5),						gsSPLight(&name.l[5],6),						gsSPLight(&name.a,7)

#define gSPSetLights7(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_7);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.l[1],2);						gSPLight(pkt,&name.l[2],3);						gSPLight(pkt,&name.l[3],4);						gSPLight(pkt,&name.l[4],5);						gSPLight(pkt,&name.l[5],6);						gSPLight(pkt,&name.l[6],7);						gSPLight(pkt,&name.a,8);					}

#define gsSPSetLights7(name)							gsSPNumLights(NUMLIGHTS_7),						gsSPLight(&name.l[0],1),						gsSPLight(&name.l[1],2),						gsSPLight(&name.l[2],3),						gsSPLight(&name.l[3],4),						gsSPLight(&name.l[4],5),						gsSPLight(&name.l[5],6),						gsSPLight(&name.l[6],7),						gsSPLight(&name.a,8)

#ifdef	F3DEX_GBI_2
#define gSPLookAtX(pkt, l)		 gDma2p((pkt),G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,G_MVO_LOOKATX)
#define gsSPLookAtX(l)			 gsDma2p(     G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,G_MVO_LOOKATX)
#define gSPLookAtY(pkt, l)		 gDma2p((pkt),G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,G_MVO_LOOKATY)
#define gsSPLookAtY(l)			 gsDma2p(     G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,G_MVO_LOOKATY)
#else	/* F3DEX_GBI_2 */
#define gSPLookAtX(pkt, l)		 gDma1p(pkt, G_MOVEMEM, l, sizeof(Light),G_MV_LOOKATX)
#define gsSPLookAtX(l)			 gsDma1p(    G_MOVEMEM, l, sizeof(Light),G_MV_LOOKATX)
#define gSPLookAtY(pkt, l)		 gDma1p(pkt, G_MOVEMEM, l, sizeof(Light),G_MV_LOOKATY)
#define gsSPLookAtY(l)			 gsDma1p(    G_MOVEMEM, l, sizeof(Light),G_MV_LOOKATY)
#endif	/* F3DEX_GBI_2 */

#define gSPLookAt(pkt, la)						{										gSPLookAtX(pkt,la)							gSPLookAtY(pkt,(char *)(la)+16)					}
#define gsSPLookAt(la)								gsSPLookAtX(la),							gsSPLookAtY((char *)(la)+16)

#define gDPSetHilite1Tile(pkt, tile, hilite, width, height)			gDPSetTileSize(pkt, tile, (hilite)->h.x1 & 0xfff, (hilite)->h.y1 & 0xfff, 			((((width)-1)*4)+(hilite)->h.x1) & 0xfff, ((((height)-1)*4)+(hilite)->h.y1) & 0xfff)

#define gDPSetHilite2Tile(pkt, tile, hilite, width, height)			gDPSetTileSize(pkt, tile, (hilite)->h.x2 & 0xfff, (hilite)->h.y2 & 0xfff, 			((((width)-1)*4)+(hilite)->h.x2) & 0xfff, ((((height)-1)*4)+(hilite)->h.y2) & 0xfff)

#define gSPFogFactor(pkt, fm, fo)				        gMoveWd(pkt, G_MW_FOG, G_MWO_FOG, 					(_SHIFTL(fm,16,16) | _SHIFTL(fo,0,16)))

#define gsSPFogFactor(fm, fo)					        gsMoveWd(G_MW_FOG, G_MWO_FOG, 						(_SHIFTL(fm,16,16) | _SHIFTL(fo,0,16)))

#define gSPFogPosition(pkt, min, max)					gMoveWd(pkt, G_MW_FOG, G_MWO_FOG, 					(_SHIFTL((128000/((max)-(min))),16,16) |				_SHIFTL(((500-(min))*256/((max)-(min))),0,16)))

#define gsSPFogPosition(min, max)					gsMoveWd(G_MW_FOG, G_MWO_FOG, 						(_SHIFTL((128000/((max)-(min))),16,16) |				_SHIFTL(((500-(min))*256/((max)-(min))),0,16)))

#ifdef	F3DEX_GBI_2

#define gSPTexture(pkt, s, t, level, tile, on)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_TEXTURE,24,8) | 						_SHIFTL(BOWTIE_VAL,16,8) |						_SHIFTL((level),11,3) | _SHIFTL((tile),8,3) |				_SHIFTL((on),1,7));					_g->words.w1 = (_SHIFTL((s),16,16) | _SHIFTL((t),0,16));	}
#define gsSPTexture(s, t, level, tile, on)				{{										(_SHIFTL(G_TEXTURE,24,8) | _SHIFTL(BOWTIE_VAL,16,8) |			 _SHIFTL((level),11,3) | _SHIFTL((tile),8,3) | _SHIFTL((on),1,7)),        (_SHIFTL((s),16,16) | _SHIFTL((t),0,16))			}}

#define gSPTextureL(pkt, s, t, level, xparam, tile, on)		{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_TEXTURE,24,8) | 						_SHIFTL((xparam),16,8) | 						_SHIFTL((level),11,3) | _SHIFTL((tile),8,3) |				_SHIFTL((on),1,7));					_g->words.w1 = (_SHIFTL((s),16,16) | _SHIFTL((t),0,16));	}
#define gsSPTextureL(s, t, level, xparam, tile, on)			{{										(_SHIFTL(G_TEXTURE,24,8) | _SHIFTL((xparam),16,8) |			 _SHIFTL((level),11,3) | _SHIFTL((tile),8,3) | _SHIFTL((on),1,7)),        (_SHIFTL((s),16,16) | _SHIFTL((t),0,16))			}}
#else

#define gSPTexture(pkt, s, t, level, tile, on)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_TEXTURE,24,8)|_SHIFTL(BOWTIE_VAL,16,8)|			_SHIFTL((level),11,3)|_SHIFTL((tile),8,3)|				_SHIFTL((on),0,8));					_g->words.w1 = (_SHIFTL((s),16,16)|_SHIFTL((t),0,16));		}
#define gsSPTexture(s, t, level, tile, on)				{{										(_SHIFTL(G_TEXTURE,24,8)|_SHIFTL(BOWTIE_VAL,16,8)|			 _SHIFTL((level),11,3)|_SHIFTL((tile),8,3)|_SHIFTL((on),0,8)),	        (_SHIFTL((s),16,16)|_SHIFTL((t),0,16))				}}

#define gSPTextureL(pkt, s, t, level, xparam, tile, on)		{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_TEXTURE,24,8)|_SHIFTL((xparam),16,8)|				_SHIFTL((level),11,3)|_SHIFTL((tile),8,3)|				_SHIFTL((on),0,8));					_g->words.w1 = (_SHIFTL((s),16,16)|_SHIFTL((t),0,16));		}
#define gsSPTextureL(s, t, level, xparam, tile, on)			{{										(_SHIFTL(G_TEXTURE,24,8)|_SHIFTL((xparam),16,8)|			 _SHIFTL((level),11,3)|_SHIFTL((tile),8,3)|_SHIFTL((on),0,8)),	        (_SHIFTL((s),16,16)|_SHIFTL((t),0,16))				}}
#endif

#define gSPPerspNormalize(pkt, s)	gMoveWd(pkt, G_MW_PERSPNORM, 0, (s))
#define gsSPPerspNormalize(s)		gsMoveWd(    G_MW_PERSPNORM, 0, (s))

#ifdef	F3DEX_GBI_2
#define gSPPopMatrixN(pkt, n, num)	gDma2p((pkt),G_POPMTX,(num)*64,64,2,0)
#define gsSPPopMatrixN(n, num)		gsDma2p(     G_POPMTX,(num)*64,64,2,0)
#define gSPPopMatrix(pkt, n)		gSPPopMatrixN((pkt), (n), 1)
#define gsSPPopMatrix(n)		gsSPPopMatrixN(      (n), 1)
#else	/* F3DEX_GBI_2 */
#define gSPPopMatrix(pkt, n)		gImmp1(pkt, G_POPMTX, n)
#define gsSPPopMatrix(n)		gsImmp1(    G_POPMTX, n)
#endif	/* F3DEX_GBI_2 */

#define gSPEndDisplayList(pkt)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_ENDDL, 24, 8);					_g->words.w1 = 0;						}

#define gsSPEndDisplayList()						{{										_SHIFTL(G_ENDDL, 24, 8), 0					}}

#ifdef	F3DEX_GBI_2

#define	gSPGeometryMode(pkt, c, s)					{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = _SHIFTL(G_GEOMETRYMODE,24,8)|_SHIFTL(~(u32)(c),0,24);	_g->words.w1 = (u32)(s);					}

#define	gsSPGeometryMode(c, s)						{{										(_SHIFTL(G_GEOMETRYMODE,24,8)|_SHIFTL(~(u32)(c),0,24)),(u32)(s)	}}
#define	gSPSetGeometryMode(pkt, word)	gSPGeometryMode((pkt),0,(word))
#define	gsSPSetGeometryMode(word)	gsSPGeometryMode(0,(word))
#define	gSPClearGeometryMode(pkt, word)	gSPGeometryMode((pkt),(word),0)
#define	gsSPClearGeometryMode(word)	gsSPGeometryMode((word),0)
#define	gSPLoadGeometryMode(pkt, word)	gSPGeometryMode((pkt),-1,(word))
#define	gsSPLoadGeometryMode(word)	gsSPGeometryMode(-1,(word))

#else	/* F3DEX_GBI_2 */
#define	gSPSetGeometryMode(pkt, word)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_SETGEOMETRYMODE, 24, 8);			_g->words.w1 = (unsigned int)(word);				}

#define	gsSPSetGeometryMode(word)					{{										_SHIFTL(G_SETGEOMETRYMODE, 24, 8), (unsigned int)(word)		}}

#define	gSPClearGeometryMode(pkt, word)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_CLEARGEOMETRYMODE, 24, 8);			_g->words.w1 = (unsigned int)(word);				}

#define	gsSPClearGeometryMode(word)					{{										_SHIFTL(G_CLEARGEOMETRYMODE, 24, 8), (unsigned int)(word)	}}
#endif	/* F3DEX_GBI_2 */

#ifdef	F3DEX_GBI_2
#define	gSPSetOtherMode(pkt, cmd, sft, len, data)			{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = (_SHIFTL(cmd,24,8)|_SHIFTL(32-(sft)-(len),8,8)|				_SHIFTL((len)-1,0,8));					_g->words.w1 = (unsigned int)(data);				}

#define	gsSPSetOtherMode(cmd, sft, len, data)				{{										_SHIFTL(cmd,24,8)|_SHIFTL(32-(sft)-(len),8,8)|_SHIFTL((len)-1,0,8), 	(unsigned int)(data)						}}
#else
#define	gSPSetOtherMode(pkt, cmd, sft, len, data)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(cmd, 24, 8) | _SHIFTL(sft, 8, 8) |				_SHIFTL(len, 0, 8));					_g->words.w1 = (unsigned int)(data);				}

#define	gsSPSetOtherMode(cmd, sft, len, data)				{{										_SHIFTL(cmd, 24, 8) | _SHIFTL(sft, 8, 8) | _SHIFTL(len, 0, 8),		(unsigned int)(data)						}}
#endif

#define	gDPPipelineMode(pkt, mode)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_PIPELINE, 1, mode)
#define	gsDPPipelineMode(mode)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_PIPELINE, 1, mode)

#define	gDPSetCycleType(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_CYCLETYPE, 2, type)
#define	gsDPSetCycleType(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_CYCLETYPE, 2, type)

#define	gDPSetTexturePersp(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTPERSP, 1, type)
#define	gsDPSetTexturePersp(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTPERSP, 1, type)

#define	gDPSetTextureDetail(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTDETAIL, 2, type)
#define	gsDPSetTextureDetail(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTDETAIL, 2, type)

#define	gDPSetTextureLOD(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTLOD, 1, type)
#define	gsDPSetTextureLOD(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTLOD, 1, type)

#define	gDPSetTextureLUT(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTLUT, 2, type)
#define	gsDPSetTextureLUT(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTLUT, 2, type)

#define	gDPSetTextureFilter(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTFILT, 2, type)
#define	gsDPSetTextureFilter(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTFILT, 2, type)

#define	gDPSetTextureConvert(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTCONV, 3, type)
#define	gsDPSetTextureConvert(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTCONV, 3, type)

#define	gDPSetCombineKey(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_COMBKEY, 1, type)
#define	gsDPSetCombineKey(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_COMBKEY, 1, type)

#ifndef _HW_VERSION_1
#define	gDPSetColorDither(pkt, mode)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_RGBDITHER, 2, mode)
#define	gsDPSetColorDither(mode)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_RGBDITHER, 2, mode)
#else
#define gDPSetColorDither(pkt, mode)    	gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_COLORDITHER, 1, mode)
#define gsDPSetColorDither(mode)                	gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_COLORDITHER, 1, mode)
#endif

#ifndef _HW_VERSION_1
#define	gDPSetAlphaDither(pkt, mode)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_ALPHADITHER, 2, mode)
#define	gsDPSetAlphaDither(mode)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_ALPHADITHER, 2, mode)
#endif

#define	gDPSetBlendMask(pkt, mask)      gDPNoOp(pkt)
#define	gsDPSetBlendMask(mask)		gsDPNoOp()

#define	gDPSetAlphaCompare(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_L, G_MDSFT_ALPHACOMPARE, 2, type)
#define	gsDPSetAlphaCompare(type)			gsSPSetOtherMode(G_SETOTHERMODE_L, G_MDSFT_ALPHACOMPARE, 2, type)

#define	gDPSetDepthSource(pkt, src)		gSPSetOtherMode(pkt, G_SETOTHERMODE_L, G_MDSFT_ZSRCSEL, 1, src)
#define	gsDPSetDepthSource(src)		gsSPSetOtherMode(G_SETOTHERMODE_L, G_MDSFT_ZSRCSEL, 1, src)

#define	gDPSetRenderMode(pkt, c0, c1)		gSPSetOtherMode(pkt, G_SETOTHERMODE_L, G_MDSFT_RENDERMODE, 29, 				(c0) | (c1))
#define	gsDPSetRenderMode(c0, c1)		gsSPSetOtherMode(G_SETOTHERMODE_L, G_MDSFT_RENDERMODE, 29, 				 (c0) | (c1))

#define	gSetImage(pkt, cmd, fmt, siz, width, i)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(cmd, 24, 8) | _SHIFTL(fmt, 21, 3) |			       _SHIFTL(siz, 19, 2) | _SHIFTL((width)-1, 0, 12);		_g->words.w1 = (unsigned int)(i);				}

#define	gsSetImage(cmd, fmt, siz, width, i)				{{										_SHIFTL(cmd, 24, 8) | _SHIFTL(fmt, 21, 3) |				_SHIFTL(siz, 19, 2) | _SHIFTL((width)-1, 0, 12),			(unsigned int)(i)						}}

#define	gDPSetColorImage(pkt, f, s, w, i)	gSetImage(pkt, G_SETCIMG, f, s, w, i)
#define	gsDPSetColorImage(f, s, w, i)		gsSetImage(G_SETCIMG, f, s, w, i)

#define	gDPSetDepthImage(pkt, i)	gSetImage(pkt, G_SETZIMG, 0, 0, 1, i)
#define	gsDPSetDepthImage(i)		gsSetImage(G_SETZIMG, 0, 0, 1, i)
/* kept for compatibility */
#define	gDPSetMaskImage(pkt, i)		gDPSetDepthImage(pkt, i)
#define	gsDPSetMaskImage(i)			gsDPSetDepthImage(i)

#define	gDPSetTextureImage(pkt, f, s, w, i)	gSetImage(pkt, G_SETTIMG, f, s, w, i)
#define	gsDPSetTextureImage(f, s, w, i)	gsSetImage(G_SETTIMG, f, s, w, i)

#define	gDPSetCombine(pkt, muxs0, muxs1)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_SETCOMBINE, 24, 8) | _SHIFTL(muxs0, 0, 24);	_g->words.w1 = (unsigned int)(muxs1);				}

#define	gsDPSetCombine(muxs0, muxs1)					{{										_SHIFTL(G_SETCOMBINE, 24, 8) | _SHIFTL(muxs0, 0, 24),			(unsigned int)(muxs1)						}}

#define	GCCc0w0(saRGB0, mRGB0, saA0, mA0)						(_SHIFTL((saRGB0), 20, 4) | _SHIFTL((mRGB0), 15, 5) | 			 _SHIFTL((saA0), 12, 3) | _SHIFTL((mA0), 9, 3))

#define	GCCc1w0(saRGB1, mRGB1)								(_SHIFTL((saRGB1), 5, 4) | _SHIFTL((mRGB1), 0, 5))

#define GCCc0w1(sbRGB0, aRGB0, sbA0, aA0)				                (_SHIFTL((sbRGB0), 28, 4) | _SHIFTL((aRGB0), 15, 3) |			 _SHIFTL((sbA0), 12, 3) | _SHIFTL((aA0), 9, 3))

#define	GCCc1w1(sbRGB1, saA1, mA1, aRGB1, sbA1, aA1)					(_SHIFTL((sbRGB1), 24, 4) | _SHIFTL((saA1), 21, 3) |			 _SHIFTL((mA1), 18, 3) | _SHIFTL((aRGB1), 6, 3) |			 _SHIFTL((sbA1), 3, 3) | _SHIFTL((aA1), 0, 3))

#define	gDPSetCombineLERP(pkt, a0, b0, c0, d0, Aa0, Ab0, Ac0, Ad0,			a1, b1, c1, d1,	Aa1, Ab1, Ac1, Ad1)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 =	_SHIFTL(G_SETCOMBINE, 24, 8) |						_SHIFTL(GCCc0w0(G_CCMUX_##a0, G_CCMUX_##c0,					       G_ACMUX_##Aa0, G_ACMUX_##Ac0) |				       GCCc1w0(G_CCMUX_##a1, G_CCMUX_##c1), 				       0, 24);						_g->words.w1 =	(unsigned int)(GCCc0w1(G_CCMUX_##b0, 							       G_CCMUX_##d0,							       G_ACMUX_##Ab0, 							       G_ACMUX_##Ad0) |						       GCCc1w1(G_CCMUX_##b1, 							       G_ACMUX_##Aa1,							       G_ACMUX_##Ac1, 							       G_CCMUX_##d1,							       G_ACMUX_##Ab1, 							       G_ACMUX_##Ad1));		}

#define	gsDPSetCombineLERP(a0, b0, c0, d0, Aa0, Ab0, Ac0, Ad0,				a1, b1, c1, d1,	Aa1, Ab1, Ac1, Ad1)			{{										_SHIFTL(G_SETCOMBINE, 24, 8) |						_SHIFTL(GCCc0w0(G_CCMUX_##a0, G_CCMUX_##c0,					       G_ACMUX_##Aa0, G_ACMUX_##Ac0) |				       GCCc1w0(G_CCMUX_##a1, G_CCMUX_##c1), 0, 24),			(unsigned int)(GCCc0w1(G_CCMUX_##b0, G_CCMUX_##d0,					       G_ACMUX_##Ab0, G_ACMUX_##Ad0) |				       GCCc1w1(G_CCMUX_##b1, G_ACMUX_##Aa1,					       G_ACMUX_##Ac1, G_CCMUX_##d1,					       G_ACMUX_##Ab1, G_ACMUX_##Ad1))		}}

#define gDPSetCombineMode(pkt, a, b)	gDPSetCombineLERP(pkt, a, b)
#define	gsDPSetCombineMode(a, b)	gsDPSetCombineLERP(a, b)

#define	gDPSetColor(pkt, c, d)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(c, 24, 8);					_g->words.w1 = (unsigned int)(d);				}

#define	gsDPSetColor(c, d)						{{										_SHIFTL(c, 24, 8), (unsigned int)(d)				}}

#define	DPRGBColor(pkt, cmd, r, g, b, a)				            gDPSetColor(pkt, cmd,								(_SHIFTL(r, 24, 8) | _SHIFTL(g, 16, 8) | 				 _SHIFTL(b, 8, 8) | _SHIFTL(a, 0, 8)))
#define	sDPRGBColor(cmd, r, g, b, a)						    gsDPSetColor(cmd,									 (_SHIFTL(r, 24, 8) | _SHIFTL(g, 16, 8) | 				  _SHIFTL(b, 8, 8) | _SHIFTL(a, 0, 8)))

#define	gDPSetEnvColor(pkt, r, g, b, a)					            DPRGBColor(pkt, G_SETENVCOLOR, r,g,b,a)
#define	gsDPSetEnvColor(r, g, b, a)					            sDPRGBColor(G_SETENVCOLOR, r,g,b,a)
#define	gDPSetBlendColor(pkt, r, g, b, a)				            DPRGBColor(pkt, G_SETBLENDCOLOR, r,g,b,a)
#define	gsDPSetBlendColor(r, g, b, a)					            sDPRGBColor(G_SETBLENDCOLOR, r,g,b,a)
#define	gDPSetFogColor(pkt, r, g, b, a)					            DPRGBColor(pkt, G_SETFOGCOLOR, r,g,b,a)
#define	gsDPSetFogColor(r, g, b, a)					            sDPRGBColor(G_SETFOGCOLOR, r,g,b,a)
#define	gDPSetFillColor(pkt, d)						            gDPSetColor(pkt, G_SETFILLCOLOR, (d))
#define	gsDPSetFillColor(d)						            gsDPSetColor(G_SETFILLCOLOR, (d))

#define	gDPSetPrimDepth(pkt, z, dz)							gDPSetColor(pkt, G_SETPRIMDEPTH, 						    _SHIFTL(z, 16, 16) | _SHIFTL(dz, 0, 16))
#define	gsDPSetPrimDepth(z, dz)								gsDPSetColor(G_SETPRIMDEPTH, _SHIFTL(z, 16, 16) | 				     _SHIFTL(dz, 0, 16))

#define	gDPSetPrimColor(pkt, m, l, r, g, b, a)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 =	(_SHIFTL(G_SETPRIMCOLOR, 24, 8) | 					 _SHIFTL(m, 8, 8) | _SHIFTL(l, 0, 8));			_g->words.w1 =  (_SHIFTL(r, 24, 8) | _SHIFTL(g, 16, 8) | 				 _SHIFTL(b, 8, 8) | _SHIFTL(a, 0, 8));		}

#define	gsDPSetPrimColor(m, l, r, g, b, a)				{{										(_SHIFTL(G_SETPRIMCOLOR, 24, 8) | _SHIFTL(m, 8, 8) |			 _SHIFTL(l, 0, 8)),							(_SHIFTL(r, 24, 8) | _SHIFTL(g, 16, 8) | _SHIFTL(b, 8, 8) |		 _SHIFTL(a, 0, 8))						}}

#define	gDPSetOtherMode(pkt, mode0, mode1)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_RDPSETOTHERMODE,24,8)|_SHIFTL(mode0,0,24);	_g->words.w1 = (unsigned int)(mode1);				}

#define	gsDPSetOtherMode(mode0, mode1)					{{										_SHIFTL(G_RDPSETOTHERMODE,24,8)|_SHIFTL(mode0,0,24),			(unsigned int)(mode1)						}}

#define	G_TX_LOADTILE	7
#define	G_TX_RENDERTILE	0

#define	G_TX_NOMIRROR	0
#define	G_TX_WRAP	0
#define	G_TX_MIRROR	0x1
#define	G_TX_CLAMP	0x2
#define	G_TX_NOMASK	0
#define	G_TX_NOLOD	0


#ifndef MAX
#define MAX(a, b)				((a) > (b) ? (a) : (b))
#endif

#ifndef MIN
#define MIN(a, b)				((a) < (b) ? (a) : (b))
#endif

#define	G_TX_DXT_FRAC	11

#ifdef _HW_VERSION_1
#define G_TX_LDBLK_MAX_TXL	4095
#else
#define G_TX_LDBLK_MAX_TXL	2047
#endif /* _HW_VERSION_1 */

#define TXL2WORDS(txls, b_txl)	MAX(1, ((txls)*(b_txl)/8))
#define CALC_DXT(width, b_txl)			(((1 << G_TX_DXT_FRAC) + TXL2WORDS(width, b_txl) - 1) / 					TXL2WORDS(width, b_txl))

#define TXL2WORDS_4b(txls)	MAX(1, ((txls)/16))
#define CALC_DXT_4b(width)			(((1 << G_TX_DXT_FRAC) + TXL2WORDS_4b(width) - 1) / 					TXL2WORDS_4b(width))

#define gDPLoadTileGeneric(pkt, c, tile, uls, ult, lrs, lrt)		{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(c, 24, 8) | _SHIFTL(uls, 12, 12) |			      _SHIFTL(ult, 0, 12);					_g->words.w1 = _SHIFTL(tile, 24, 3) | _SHIFTL(lrs, 12, 12) |			      _SHIFTL(lrt, 0, 12);				}

#define gsDPLoadTileGeneric(c, tile, uls, ult, lrs, lrt)		{{										_SHIFTL(c, 24, 8) | _SHIFTL(uls, 12, 12) | _SHIFTL(ult, 0, 12),		_SHIFTL(tile, 24, 3) | _SHIFTL(lrs, 12, 12) | _SHIFTL(lrt, 0, 12)}}

#define	gDPSetTileSize(pkt, t, uls, ult, lrs, lrt)					gDPLoadTileGeneric(pkt, G_SETTILESIZE, t, uls, ult, lrs, lrt)
#define	gsDPSetTileSize(t, uls, ult, lrs, lrt)						gsDPLoadTileGeneric(G_SETTILESIZE, t, uls, ult, lrs, lrt)
#define	gDPLoadTile(pkt, t, uls, ult, lrs, lrt)						gDPLoadTileGeneric(pkt, G_LOADTILE, t, uls, ult, lrs, lrt)
#define	gsDPLoadTile(t, uls, ult, lrs, lrt)						gsDPLoadTileGeneric(G_LOADTILE, t, uls, ult, lrs, lrt)

#define	gDPSetTile(pkt, fmt, siz, line, tmem, tile, palette, cmt,			maskt, shiftt, cms, masks, shifts)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_SETTILE, 24, 8) | _SHIFTL(fmt, 21, 3) |		       _SHIFTL(siz, 19, 2) | _SHIFTL(line, 9, 9) |			       _SHIFTL(tmem, 0, 9);					_g->words.w1 = _SHIFTL(tile, 24, 3) | _SHIFTL(palette, 20, 4) |			       _SHIFTL(cmt, 18, 2) | _SHIFTL(maskt, 14, 4) |			       _SHIFTL(shiftt, 10, 4) |_SHIFTL(cms, 8, 2) |			       _SHIFTL(masks, 4, 4) | _SHIFTL(shifts, 0, 4);	}

#define	gsDPSetTile(fmt, siz, line, tmem, tile, palette, cmt,				maskt, shiftt, cms, masks, shifts)			{{										(_SHIFTL(G_SETTILE, 24, 8) | _SHIFTL(fmt, 21, 3) | 			 _SHIFTL(siz, 19, 2) | _SHIFTL(line, 9, 9) | _SHIFTL(tmem, 0, 9)),        (_SHIFTL(tile, 24, 3) | _SHIFTL(palette, 20, 4) | 			 _SHIFTL(cmt, 18, 2) | _SHIFTL(maskt, 14, 4) | 				 _SHIFTL(shiftt, 10, 4) | _SHIFTL(cms, 8, 2) | 				 _SHIFTL(masks, 4, 4) | _SHIFTL(shifts, 0, 4))			}}

#define gDPLoadBlock(pkt, tile, uls, ult, lrs, dxt)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_LOADBLOCK, 24, 8) | 						_SHIFTL(uls, 12, 12) | _SHIFTL(ult, 0, 12));		_g->words.w1 = (_SHIFTL(tile, 24, 3) |							_SHIFTL((MIN(lrs,G_TX_LDBLK_MAX_TXL)), 12, 12) |			_SHIFTL(dxt, 0, 12));				}

#define gsDPLoadBlock(tile, uls, ult, lrs, dxt)				{{										(_SHIFTL(G_LOADBLOCK, 24, 8) | _SHIFTL(uls, 12, 12) | 			 _SHIFTL(ult, 0, 12)),							(_SHIFTL(tile, 24, 3) | 						 _SHIFTL((MIN(lrs,G_TX_LDBLK_MAX_TXL)), 12, 12) |			 _SHIFTL(dxt, 0, 12))						}}

#define	gDPLoadTLUTCmd(pkt, tile, count)				{										Gfx *_g = (Gfx *)pkt;																_g->words.w0 = _SHIFTL(G_LOADTLUT, 24, 8);				_g->words.w1 = _SHIFTL((tile), 24, 3) | _SHIFTL((count), 14, 10);}

#define	gsDPLoadTLUTCmd(tile, count)					{{										_SHIFTL(G_LOADTLUT, 24, 8),						_SHIFTL((tile), 24, 3) | _SHIFTL((count), 14, 10)		}}

#define	gDPLoadTextureBlock(pkt, timg, fmt, siz, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE, 			0 , cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT) -1,			CALC_DXT(width, siz##_BYTES)); 					gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((width) * siz##_LINE_BYTES)+7)>>3, 0,					G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadTextureBlockYuv(pkt, timg, fmt, siz, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE, 			0 , cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT) -1,			CALC_DXT(width, siz##_BYTES)); 					gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((width) * 1)+7)>>3, 0,						G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadTextureBlockS(pkt, timg, fmt, siz, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE, 			0 , cmt, maskt,	shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,0);		gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((width) * siz##_LINE_BYTES)+7)>>3, 0,					G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadMultiBlockS(pkt, timg, tmem, rtile, fmt, siz, width, 			   height, pal, cms, cmt, masks, maskt, shifts, shiftt)	{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 			0 , cmt, maskt,	shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,0);		gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((width) * siz##_LINE_BYTES)+7)>>3, tmem,				rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts);							gDPSetTileSize(pkt, rtile, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}


#define	gDPLoadTextureBlockYuvS(pkt, timg, fmt, siz, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE, 			0 , cmt, maskt,	shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,0);		gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((width) * 1)+7)>>3, 0,						G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	_gDPLoadTextureBlock(pkt, timg, tmem, fmt, siz, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE,  		0, cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)); 					gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz, (((width) * siz##_LINE_BYTES)+7)>>3,			tmem, G_TX_RENDERTILE, pal, cmt,					maskt, shiftt, cms, masks, shifts);				gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	_gDPLoadTextureBlockTile(pkt, timg, tmem, rtile, fmt, siz, width,  		height, pal, cms, cmt, masks, maskt, shifts, shiftt)	{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 0,		cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)); 					gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz, (((width) * siz##_LINE_BYTES)+7)>>3,			tmem, rtile, pal, cmt,							maskt, shiftt, cms, masks, shifts);				gDPSetTileSize(pkt, rtile, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadMultiBlock(pkt, timg, tmem, rtile, fmt, siz, width,  			height, pal, cms, cmt, masks, maskt, shifts, shiftt)	{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 0,		cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)); 					gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz, (((width) * siz##_LINE_BYTES)+7)>>3,			tmem, rtile, pal, cmt,							maskt, shiftt, cms, masks, shifts);				gDPSetTileSize(pkt, rtile, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gsDPLoadTextureBlock(timg, fmt, siz, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),			gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, 0, 					G_TX_LOADTILE, 	0 , cmt, maskt,	shiftt, cms, 				masks, shifts),							gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)), 					gsDPPipeSync(),								gsDPSetTile(fmt, siz, ((((width) * siz##_LINE_BYTES)+7)>>3), 0,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)


#define	gsDPLoadTextureBlockS(timg, fmt, siz, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),			gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE, 0 , 			cmt, maskt,shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1, 0 ),	gsDPPipeSync(),								gsDPSetTile(fmt, siz, ((((width) * siz##_LINE_BYTES)+7)>>3), 0,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)

#define	_gsDPLoadTextureBlock(timg, tmem, fmt, siz, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),			gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 			0 , cmt, maskt,	shiftt, cms, masks, shifts),			gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)), 					gsDPPipeSync(),								gsDPSetTile(fmt, siz,								((((width) * siz##_LINE_BYTES)+7)>>3), tmem,				G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)


#define	_gsDPLoadTextureBlockTile(timg, tmem, rtile, fmt, siz, width,			height, pal, cms, cmt, masks, maskt, shifts, shiftt)											gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),			gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 			0 , cmt, maskt,	shiftt, cms, masks, shifts),			gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)), 					gsDPPipeSync(),								gsDPSetTile(fmt, siz,								((((width) * siz##_LINE_BYTES)+7)>>3), tmem,				rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts),							gsDPSetTileSize(rtile, 0, 0,							((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)


#define	gsDPLoadMultiBlock(timg, tmem, rtile, fmt, siz, width,				height, pal, cms, cmt, masks, maskt, shifts, shiftt)											gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),			gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 			0 , cmt, maskt,	shiftt, cms, masks, shifts),			gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)), 					gsDPPipeSync(),								gsDPSetTile(fmt, siz,								((((width) * siz##_LINE_BYTES)+7)>>3), tmem,				rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts),							gsDPSetTileSize(rtile, 0, 0,							((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)

#define	gsDPLoadMultiBlockS(timg, tmem, rtile, fmt, siz, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),			gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 0 , 			cmt, maskt,shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1, 0 ),	gsDPPipeSync(),								gsDPSetTile(fmt, siz, ((((width) * siz##_LINE_BYTES)+7)>>3), tmem,		rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts),							gsDPSetTileSize(rtile, 0, 0,							((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)


#define	gDPLoadTextureBlock_4b(pkt, timg, fmt, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);			gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, 0, G_TX_LOADTILE, 0,			cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,						(((width)*(height)+3)>>2)-1,						CALC_DXT_4b(width)); 						gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), 0,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadTextureBlock_4bS(pkt, timg, fmt, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);			gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, 0, G_TX_LOADTILE, 0,			cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,						(((width)*(height)+3)>>2)-1, 0 );				gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), 0,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadMultiBlock_4b(pkt, timg, tmem, rtile, fmt, width, height,		pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);			gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0,			cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,						(((width)*(height)+3)>>2)-1,						CALC_DXT_4b(width));						gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), tmem,			rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts);							gDPSetTileSize(pkt, rtile, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadMultiBlock_4bS(pkt, timg, tmem, rtile, fmt, width, height,		pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);			gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0,			cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,						(((width)*(height)+3)>>2)-1, 0 );				gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), tmem,			rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts);							gDPSetTileSize(pkt, rtile, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}


#define	_gDPLoadTextureBlock_4b(pkt, timg, tmem, fmt, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);			gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0,			cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,						(((width)*(height)+3)>>2)-1,						CALC_DXT_4b(width));						gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), tmem,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gsDPLoadTextureBlock_4b(timg, fmt, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),			gsDPSetTile(fmt, G_IM_SIZ_16b, 0, 0, G_TX_LOADTILE, 0 , cmt,			maskt, shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)>>2)-1,			CALC_DXT_4b(width)),						gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), 0,				G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)

#define	gsDPLoadTextureBlock_4bS(timg, fmt, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),			gsDPSetTile(fmt, G_IM_SIZ_16b, 0, 0, G_TX_LOADTILE, 0 , cmt,			maskt, shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)>>2)-1,0),	gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), 0,				G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)

#define	gsDPLoadMultiBlock_4b(timg, tmem, rtile, fmt, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),			gsDPSetTile(fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0 , cmt,			maskt, shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)>>2)-1,			CALC_DXT_4b(width)), 						gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), tmem,			rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts),							gsDPSetTileSize(rtile, 0, 0,							((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)


#define	gsDPLoadMultiBlock_4bS(timg, tmem, rtile, fmt, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),			gsDPSetTile(fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0 , cmt,			maskt, shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)>>2)-1,0),	gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), tmem,			rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts),							gsDPSetTileSize(rtile, 0, 0,							((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)


#define	_gsDPLoadTextureBlock_4b(timg, tmem, fmt, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),			gsDPSetTile(fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0 , cmt,			maskt, shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)>>2)-1,			CALC_DXT_4b(width)), 						gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), tmem,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)

#ifndef _HW_VERSION_1

#define	gDPLoadTextureTile(pkt, timg, fmt, siz, width, height,				uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)			{										gDPSetTextureImage(pkt, fmt, siz, width, timg);				gDPSetTile(pkt, fmt, siz,							(((((lrs)-(uls)+1) * siz##_TILE_BYTES)+7)>>3), 0,			G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,			shifts);							gDPLoadSync(pkt);							gDPLoadTile(	pkt, G_TX_LOADTILE,							(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC);				gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((((lrs)-(uls)+1) * siz##_LINE_BYTES)+7)>>3), 0,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE,							(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)			}

#else /******** WORKAROUND hw 1 load tile bug ********/

#define	gDPLoadTextureTile(pkt, timg, fmt, siz, width, height,				uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)												{										int _loadtile_i, _loadtile_nw; Gfx *_loadtile_temp = pkt; 		guDPLoadTextureTile(_loadtile_temp, timg, fmt, siz, 				width, height,        					                uls, ult, lrs, lrt, pal,                                                cms, cmt, masks, maskt, shifts, shiftt);			_loadtile_nw = guGetDPLoadTextureTileSz(ult, lrt) - 1;			for(_loadtile_i = 0; _loadtile_i < _loadtile_nw; _loadtile_i++)		  pkt;								}

#endif /* HW_VERSION_1 */

#define	gDPLoadMultiTile(pkt, timg, tmem, rtile, fmt, siz, width, height,		uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)			{										gDPSetTextureImage(pkt, fmt, siz, width, timg);				gDPSetTile(pkt, fmt, siz,							(((((lrs)-(uls)+1) * siz##_TILE_BYTES)+7)>>3), tmem,			G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,			shifts);							gDPLoadSync(pkt);							gDPLoadTile(	pkt, G_TX_LOADTILE,							(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC);				gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((((lrs)-(uls)+1) * siz##_LINE_BYTES)+7)>>3), tmem,			rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts);							gDPSetTileSize(pkt, rtile,								(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)			}


#define	gsDPLoadTextureTile(timg, fmt, siz, width, height,				uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)													gsDPSetTextureImage(fmt, siz, width, timg),				gsDPSetTile(fmt, siz, 								    (((((lrs)-(uls)+1) * siz##_TILE_BYTES)+7)>>3), 0,			    G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,			    shifts),							gsDPLoadSync(),								gsDPLoadTile(	G_TX_LOADTILE,								(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC),				gsDPPipeSync(),								gsDPSetTile(fmt, siz, 								    (((((lrs)-(uls)+1) * siz##_LINE_BYTES)+7)>>3), 0,			    G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,		    shifts),							gsDPSetTileSize(G_TX_RENDERTILE,							(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)

#define	gsDPLoadMultiTile(timg, tmem, rtile, fmt, siz, width, height,			uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)													gsDPSetTextureImage(fmt, siz, width, timg),				gsDPSetTile(fmt, siz, 								    (((((lrs)-(uls)+1) * siz##_TILE_BYTES)+7)>>3), 			    tmem, G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, 			    masks, shifts),						gsDPLoadSync(),								gsDPLoadTile(	G_TX_LOADTILE,								(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC),				gsDPPipeSync(),								gsDPSetTile(fmt, siz, 								    (((((lrs)-(uls)+1) * siz##_LINE_BYTES)+7)>>3), 			    tmem, rtile, pal, cmt, maskt, shiftt, cms, masks,			    shifts),							gsDPSetTileSize(rtile,									(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)

#define	gDPLoadTextureTile_4b(pkt, timg, fmt, width, height,				uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)			{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_8b, ((width)>>1), timg);		gDPSetTile(pkt, fmt, G_IM_SIZ_8b, 						   (((((lrs)-(uls)+1)>>1)+7)>>3), 0,					   G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,			   shifts);							gDPLoadSync(pkt);							gDPLoadTile(	pkt, G_TX_LOADTILE,							(uls)<<(G_TEXTURE_IMAGE_FRAC-1),					(ult)<<(G_TEXTURE_IMAGE_FRAC),						(lrs)<<(G_TEXTURE_IMAGE_FRAC-1),					(lrt)<<(G_TEXTURE_IMAGE_FRAC));				gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, 						   (((((lrs)-(uls)+1)>>1)+7)>>3), 0,					   G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, 			   masks, shifts);						gDPSetTileSize(pkt, G_TX_RENDERTILE,							(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadMultiTile_4b(pkt, timg, tmem, rtile, fmt, width, height,			uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)			{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_8b, ((width)>>1), timg);		gDPSetTile(pkt, fmt, G_IM_SIZ_8b, 			        		   (((((lrs)-(uls)+1)>>1)+7)>>3), tmem,					   G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,			   shifts);							gDPLoadSync(pkt);							gDPLoadTile(	pkt, G_TX_LOADTILE,							(uls)<<(G_TEXTURE_IMAGE_FRAC-1),					(ult)<<(G_TEXTURE_IMAGE_FRAC),						(lrs)<<(G_TEXTURE_IMAGE_FRAC-1),					(lrt)<<(G_TEXTURE_IMAGE_FRAC));				gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, 						   (((((lrs)-(uls)+1)>>1)+7)>>3), tmem,					   rtile, pal, cmt, maskt, shiftt, cms, masks,				   shifts);							gDPSetTileSize(pkt, rtile,								(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)			}

#define	gsDPLoadTextureTile_4b(timg, fmt, width, height,				uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)													gsDPSetTextureImage(fmt, G_IM_SIZ_8b, ((width)>>1), timg),		gsDPSetTile(fmt, G_IM_SIZ_8b, (((((lrs)-(uls)+1)>>1)+7)>>3), 0,			G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,			shifts),							gsDPLoadSync(),								gsDPLoadTile(	G_TX_LOADTILE,								(uls)<<(G_TEXTURE_IMAGE_FRAC-1),					(ult)<<(G_TEXTURE_IMAGE_FRAC),						(lrs)<<(G_TEXTURE_IMAGE_FRAC-1),					(lrt)<<(G_TEXTURE_IMAGE_FRAC)),				gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, (((((lrs)-(uls)+1)>>1)+7)>>3), 0,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE,							(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)

#define	gsDPLoadMultiTile_4b(timg, tmem, rtile, fmt, width, height,			uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)													gsDPSetTextureImage(fmt, G_IM_SIZ_8b, ((width)>>1), timg),		gsDPSetTile(fmt, G_IM_SIZ_8b, (((((lrs)-(uls)+1)>>1)+7)>>3), 			    tmem, G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, 			    masks, shifts),						gsDPLoadSync(),								gsDPLoadTile(	G_TX_LOADTILE,								(uls)<<(G_TEXTURE_IMAGE_FRAC-1),					(ult)<<(G_TEXTURE_IMAGE_FRAC),						(lrs)<<(G_TEXTURE_IMAGE_FRAC-1),					(lrt)<<(G_TEXTURE_IMAGE_FRAC)),				gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, (((((lrs)-(uls)+1)>>1)+7)>>3), 			    tmem, rtile, pal, cmt, maskt, shiftt, cms, masks,			    shifts),							gsDPSetTileSize(rtile,									(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)

#ifndef _HW_VERSION_1

#define gDPLoadTLUT_pal16(pkt, pal, dram)				{										gDPSetTextureImage(pkt, G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram);		gDPTileSync(pkt);							gDPSetTile(pkt, 0, 0, 0, (256+(((pal)&0xf)*16)),				G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0);				gDPLoadSync(pkt);							gDPLoadTLUTCmd(pkt, G_TX_LOADTILE, 15);					gDPPipeSync(pkt)						}

#else /* **** WORKAROUND hardware 1 load_tlut bug ****** */

#define gDPLoadTLUT_pal16(pkt, pal, dram)													        _gDPLoadTextureBlock(pkt, dram, (256+(((pal)&0xf)*16)),				G_IM_FMT_RGBA, G_IM_SIZ_16b, 4*16, 1,					pal, 0, 0, 0, 0, 0, 0)

#endif /* _HW_VERSION_1 */

#ifndef _HW_VERSION_1

#define gsDPLoadTLUT_pal16(pal, dram)					 										gsDPSetTextureImage(G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram),		gsDPTileSync(),								gsDPSetTile(0, 0, 0, (256+(((pal)&0xf)*16)),					G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0),				gsDPLoadSync(),								gsDPLoadTLUTCmd(G_TX_LOADTILE, 15),					gsDPPipeSync()

#else /* **** WORKAROUND hardware 1 load_tlut bug ****** */

#define gsDPLoadTLUT_pal16(pal, dram)                                   										_gsDPLoadTextureBlock(dram, (256+(((pal)&0xf)*16)),           	                G_IM_FMT_RGBA, G_IM_SIZ_16b, 4*16, 1,                                   pal, 0, 0, 0, 0, 0, 0)

#endif /* _HW_VERSION_1 */ 

#ifndef _HW_VERSION_1

#define gDPLoadTLUT_pal256(pkt, dram)					{										gDPSetTextureImage(pkt, G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram);		gDPTileSync(pkt);							gDPSetTile(pkt, 0, 0, 0, 256,							G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0);				gDPLoadSync(pkt);							gDPLoadTLUTCmd(pkt, G_TX_LOADTILE, 255);				gDPPipeSync(pkt)						}

#else /* **** WORKAROUND hardware 1 load_tlut bug ****** */

#define gDPLoadTLUT_pal256(pkt, dram)                                   	                                                                	_gDPLoadTextureBlock(pkt, dram, 256,           			                G_IM_FMT_RGBA, G_IM_SIZ_16b, 4*256, 1,			                0, 0, 0, 0, 0, 0, 0)


#endif /* _HW_VERSION_1 */

#ifndef _HW_VERSION_1

#define gsDPLoadTLUT_pal256(dram)					 										gsDPSetTextureImage(G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram),		gsDPTileSync(),								gsDPSetTile(0, 0, 0, 256,							G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0),				gsDPLoadSync(),								gsDPLoadTLUTCmd(G_TX_LOADTILE, 255),					gsDPPipeSync()

#else /* **** WORKAROUND hardware 1 load_tlut bug ****** */

#define gsDPLoadTLUT_pal256(dram)                                                                                                               	_gsDPLoadTextureBlock(dram, 256,                            	                G_IM_FMT_RGBA, G_IM_SIZ_16b, 4*256, 1,                                  0, 0, 0, 0, 0, 0, 0)

#endif /* _HW_VERSION_1 */


#ifndef _HW_VERSION_1

#define gDPLoadTLUT(pkt, count, tmemaddr, dram)				{										gDPSetTextureImage(pkt, G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram);		gDPTileSync(pkt);							gDPSetTile(pkt, 0, 0, 0, tmemaddr,						G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0);				gDPLoadSync(pkt);							gDPLoadTLUTCmd(pkt, G_TX_LOADTILE, ((count)-1));			gDPPipeSync(pkt);						}

#else /* **** WORKAROUND hardware 1 load_tlut bug ****** */

#define gDPLoadTLUT(pkt, count, tmemaddr, dram)                         									        _gDPLoadTextureBlock(pkt, dram, tmemaddr,                                       G_IM_FMT_RGBA, G_IM_SIZ_16b, 4, count,                                  0, 0, 0, 0, 0, 0, 0)

#endif /* _HW_VERSION_1 */


#ifndef _HW_VERSION_1

#define gsDPLoadTLUT(count, tmemaddr, dram)				 										gsDPSetTextureImage(G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram),		gsDPTileSync(),								gsDPSetTile(0, 0, 0, tmemaddr,							G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0),				gsDPLoadSync(),								gsDPLoadTLUTCmd(G_TX_LOADTILE, ((count)-1)),				gsDPPipeSync()

#else /* **** WORKAROUND hardware 1 load_tlut bug ****** */
#define gsDPLoadTLUT(count, tmemaddr, dram)                                                                                                             _gsDPLoadTextureBlock(dram, tmemaddr,                       	                G_IM_FMT_RGBA, G_IM_SIZ_16b, 4, count,                                  0, 0, 0, 0, 0, 0, 0)

#endif /* _HW_VERSION_1 */

#define gDPSetScissor(pkt, mode, ulx, uly, lrx, lry)			{										Gfx *_g = (Gfx *)pkt;																_g->words.w0 = _SHIFTL(G_SETSCISSOR, 24, 8) |					       _SHIFTL((int)((float)(ulx)*4.0F), 12, 12) |	                       _SHIFTL((int)((float)(uly)*4.0F), 0, 12);		_g->words.w1 = _SHIFTL(mode, 24, 2) |						       _SHIFTL((int)((float)(lrx)*4.0F), 12, 12) |	                       _SHIFTL((int)((float)(lry)*4.0F), 0, 12);	}

#define gDPSetScissorFrac(pkt, mode, ulx, uly, lrx, lry)		{										Gfx *_g = (Gfx *)pkt;																_g->words.w0 = _SHIFTL(G_SETSCISSOR, 24, 8) |					       _SHIFTL((int)((ulx)), 12, 12) |			                       _SHIFTL((int)((uly)), 0, 12);				_g->words.w1 = _SHIFTL(mode, 24, 2) |						       _SHIFTL((int)((lrx)), 12, 12) | 			                       _SHIFTL((int)((lry)), 0, 12);			}

#define gsDPSetScissor(mode, ulx, uly, lrx, lry)			{{										_SHIFTL(G_SETSCISSOR, 24, 8) |						_SHIFTL((int)((float)(ulx)*4.0F), 12, 12) |				_SHIFTL((int)((float)(uly)*4.0F), 0, 12),				_SHIFTL(mode, 24, 2) |							_SHIFTL((int)((float)(lrx)*4.0F), 12, 12) |				_SHIFTL((int)((float)(lry)*4.0F), 0, 12)			}}

#define gsDPSetScissorFrac(mode, ulx, uly, lrx, lry)			{{										_SHIFTL(G_SETSCISSOR, 24, 8) |						_SHIFTL((int)((ulx)), 12, 12) |						_SHIFTL((int)((uly)), 0, 12),						_SHIFTL(mode, 24, 2) |							_SHIFTL((int)(lrx), 12, 12) |						_SHIFTL((int)(lry), 0, 12)					}}

#define	gDPFillRectangle(pkt, ulx, uly, lrx, lry)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_FILLRECT, 24, 8) | 						_SHIFTL((lrx), 14, 10) | _SHIFTL((lry), 2, 10));	_g->words.w1 = (_SHIFTL((ulx), 14, 10) | _SHIFTL((uly), 2, 10));}

#define	gsDPFillRectangle(ulx, uly, lrx, lry)				{{										(_SHIFTL(G_FILLRECT, 24, 8) | _SHIFTL((lrx), 14, 10) | 			 _SHIFTL((lry), 2, 10)),						(_SHIFTL((ulx), 14, 10) | _SHIFTL((uly), 2, 10))		}}

#define	gDPScisFillRectangle(pkt, ulx, uly, lrx, lry)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_FILLRECT, 24, 8) | 						_SHIFTL(MAX((lrx),0), 14, 10) | 					_SHIFTL(MAX((lry),0), 2, 10));				_g->words.w1 = (_SHIFTL(MAX((ulx),0), 14, 10) | 					_SHIFTL(MAX((uly),0), 2, 10));			}

#define	gDPSetConvert(pkt, k0, k1, k2, k3, k4, k5)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_SETCONVERT, 24, 8) |						_SHIFTL(k0, 13, 9) | _SHIFTL(k1, 4, 9) | 				_SHIFTR(k2, 5, 4));					_g->words.w1 = (_SHIFTL(k2, 27, 5) | _SHIFTL(k3, 18, 9) |				_SHIFTL(k4, 9, 9) | _SHIFTL(k5, 0, 9));		}

#define gsDPSetConvert(k0, k1, k2, k3, k4, k5)				{{										(_SHIFTL(G_SETCONVERT, 24, 8) |						 _SHIFTL(k0, 13, 9) | _SHIFTL(k1, 4, 9) | _SHIFTR(k2, 5, 4)),		(_SHIFTL(k2, 27, 5) | _SHIFTL(k3, 18, 9) | _SHIFTL(k4, 9, 9) | 		 _SHIFTL(k5, 0, 9))						}}

#define	gDPSetKeyR(pkt, cR, sR, wR)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_SETKEYR, 24, 8);				_g->words.w1 = (_SHIFTL(wR, 16, 12) | _SHIFTL(cR, 8, 8) | 				_SHIFTL(sR, 0, 8));				}

#define	gsDPSetKeyR(cR, sR, wR)						{{										_SHIFTL(G_SETKEYR, 24, 8),						_SHIFTL(wR, 16, 12) | _SHIFTL(cR, 8, 8) | _SHIFTL(sR, 0, 8)	}}

#define	gDPSetKeyGB(pkt, cG, sG, wG, cB, sB, wB)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_SETKEYGB, 24, 8) |						_SHIFTL(wG, 12, 12) | _SHIFTL(wB, 0, 12));		_g->words.w1 = (_SHIFTL(cG, 24, 8) | _SHIFTL(sG, 16, 8) |				 _SHIFTL(cB, 8, 8) | _SHIFTL(sB, 0, 8));	}

#define	gsDPSetKeyGB(cG, sG, wG, cB, sB, wB)				{{										(_SHIFTL(G_SETKEYGB, 24, 8) | _SHIFTL(wG, 12, 12) |			 _SHIFTL(wB, 0, 12)),							(_SHIFTL(cG, 24, 8) | _SHIFTL(sG, 16, 8) | _SHIFTL(cB, 8, 8) |		 _SHIFTL(sB, 0, 8))						}}

#define gDPNoParam(pkt, cmd)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(cmd, 24, 8);					_g->words.w1 = 0;						}

#define gsDPNoParam(cmd)						{{										_SHIFTL(cmd, 24, 8), 0						}}

#define gDPParam(pkt, cmd, param)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(cmd, 24, 8);					_g->words.w1 = (param);						}

#define gsDPParam(cmd, param)						{{										_SHIFTL(cmd, 24, 8), (param)					}}

#define gsDPTextureRectangle(xl, yl, xh, yh, tile, s, t, dsdx, dtdy)	{{									    (_SHIFTL(G_TEXRECT, 24, 8) | _SHIFTL(xh, 12, 12) | 			     _SHIFTL(yh, 0, 12)),						    (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) | _SHIFTL(yl, 0, 12)),	}},									{{									    _SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16),				    _SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)			}}

#define gDPTextureRectangle(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy){									    Gfx *_g = (Gfx *)(pkt);						    if (pkt);								    _g->words.w0 = (_SHIFTL(G_TEXRECT, 24, 8) | _SHIFTL(xh, 12, 12) |			    _SHIFTL(yh, 0, 12));    				    _g->words.w1 = (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) |			    _SHIFTL(yl, 0, 12));				    _g ++;								    _g->words.w0 = (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16));		    _g->words.w1 = (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16));	}

#define gsDPTextureRectangleFlip(xl, yl, xh, yh, tile, s, t, dsdx, dtdy) {{									    (_SHIFTL(G_TEXRECTFLIP, 24, 8) | _SHIFTL(xh, 12, 12) |		     _SHIFTL(yh, 0, 12)),						    (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) | _SHIFTL(yl, 0, 12)),	}},									{{									    _SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16),				    _SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)			}}

#define gDPTextureRectangleFlip(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy){									    Gfx *_g = (Gfx *)(pkt);						    if (pkt);								    _g->words.w0 = (_SHIFTL(G_TEXRECTFLIP, 24, 8) | _SHIFTL(xh, 12, 12) | 		    _SHIFTL(yh, 0, 12));    				    _g->words.w1 = (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) |			    _SHIFTL(yl, 0, 12));				    _g ++;								    _g->words.w0 = (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16));		    _g->words.w1 = (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16));	}

#define gsSPTextureRectangle(xl, yl, xh, yh, tile, s, t, dsdx, dtdy)	    {{(_SHIFTL(G_TEXRECT, 24, 8) | _SHIFTL(xh, 12, 12) | _SHIFTL(yh, 0, 12)),    (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) | _SHIFTL(yl, 0, 12))}},	    gsImmp1(G_RDPHALF_1, (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16))),	    gsImmp1(G_RDPHALF_2, (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)))

#define gSPTextureRectangle(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy){									    Gfx *_g = (Gfx *)(pkt);															    _g->words.w0 = (_SHIFTL(G_TEXRECT, 24, 8) | _SHIFTL(xh, 12, 12) |			    _SHIFTL(yh, 0, 12));    				    _g->words.w1 = (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) |			    _SHIFTL(yl, 0, 12));				    gImmp1(pkt, G_RDPHALF_1, (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16)));	    gImmp1(pkt, G_RDPHALF_2, (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)));}

#define gSPScisTextureRectangle(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy) {                                                                                Gfx *_g = (Gfx *)(pkt);                                                                                                                                   _g->words.w0 = (_SHIFTL(G_TEXRECT, 24, 8) |                                                  _SHIFTL(MAX((s16)(xh),0), 12, 12) |                                          _SHIFTL(MAX((s16)(yh),0), 0, 12));                           _g->words.w1 = (_SHIFTL((tile), 24, 3) |                                                     _SHIFTL(MAX((s16)(xl),0), 12, 12) |                                          _SHIFTL(MAX((s16)(yl),0), 0, 12));                           gImmp1(pkt, G_RDPHALF_1,                                                                 (_SHIFTL(((s) -                                                                        (((s16)(xl) < 0) ?                                                            (((s16)(dsdx) < 0) ?                                                          (MAX((((s16)(xl)*(s16)(dsdx))>>7),0)) :          			    (MIN((((s16)(xl)*(s16)(dsdx))>>7),0))) : 0)),    			 16, 16) |                                                            _SHIFTL(((t) -                                                                        (((yl) < 0) ?                                                                 (((s16)(dtdy) < 0) ?                                                          (MAX((((s16)(yl)*(s16)(dtdy))>>7),0)) :                                      (MIN((((s16)(yl)*(s16)(dtdy))>>7),0))) : 0)),    			 0, 16)));                                               gImmp1(pkt, G_RDPHALF_2, (_SHIFTL((dsdx), 16, 16) |                                                    _SHIFTL((dtdy), 0, 16)));                      }

#define gsSPTextureRectangleFlip(xl, yl, xh, yh, tile, s, t, dsdx, dtdy)     {{(_SHIFTL(G_TEXRECTFLIP, 24, 8) | _SHIFTL(xh, 12, 12) |		     _SHIFTL(yh, 0, 12)),						    (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) | _SHIFTL(yl, 0, 12))}},	    gsImmp1(G_RDPHALF_1, (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16))),	    gsImmp1(G_RDPHALF_2, (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)))

#define gSPTextureRectangleFlip(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy) {								       	    Gfx *_g = (Gfx *)(pkt);					       										     _g->words.w0 = (_SHIFTL(G_TEXRECTFLIP, 24, 8) | _SHIFTL(xh, 12, 12) |		    _SHIFTL(yh, 0, 12)); 				    _g->words.w1 = (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) |			    _SHIFTL(yl, 0, 12));				    gImmp1(pkt, G_RDPHALF_1, (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16)));	    gImmp1(pkt, G_RDPHALF_2, (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16))); }

#define gsDPWord(wordhi, wordlo)			    gsImmp1(G_RDPHALF_1, (unsigned int)(wordhi)),	    gsImmp1(G_RDPHALF_2, (unsigned int)(wordlo))

#define gDPWord(pkt, wordhi, wordlo)      		{							    Gfx *_g = (Gfx *)(pkt);											    gImmp1(pkt, G_RDPHALF_1, (unsigned int)(wordhi));	    gImmp1(pkt, G_RDPHALF_2, (unsigned int)(wordlo));	}

#define	gDPFullSync(pkt)	gDPNoParam(pkt, G_RDPFULLSYNC)
#define	gsDPFullSync()		gsDPNoParam(G_RDPFULLSYNC)
#define	gDPTileSync(pkt)	gDPNoParam(pkt, G_RDPTILESYNC)
#define	gsDPTileSync()		gsDPNoParam(G_RDPTILESYNC)
#define	gDPPipeSync(pkt)	gDPNoParam(pkt, G_RDPPIPESYNC)
#define	gsDPPipeSync()		gsDPNoParam(G_RDPPIPESYNC)
#define	gDPLoadSync(pkt)	gDPNoParam(pkt, G_RDPLOADSYNC)
#define	gsDPLoadSync()		gsDPNoParam(G_RDPLOADSYNC)
#define	gDPNoOp(pkt)		gDPNoParam(pkt, G_NOOP)
#define	gsDPNoOp()		gsDPNoParam(G_NOOP)
#define	gDPNoOpTag(pkt, tag)	gDPParam(pkt, G_NOOP, tag)
#define	gsDPNoOpTag(tag)	gsDPParam(G_NOOP, tag)

#endif /* _LANGUAGE_C */

#endif /* _GBI_H_ */
`;async function KH(n){return new Promise((e,t)=>{IM({include_func:(i,a,o)=>{if(i.toLowerCase()==="ultra64.h"){o(XH);return}o(null)},completion_func(i){e(i)},warn_func(i){console.warn(i)},error_func(i){console.error(i),t(i)}}).run(n)})}const YH=""+new URL("smlrc.558256a6.wasm",import.meta.url).href;async function bA(n){try{n=await KH(n)}catch(d){throw typeof d=="string"?new Error(d):d}let e;const t=[],r=d=>{d=d.replace('in "/input.c"',""),t.push(d)},i=WH({noInitialRun:!0,locateFile:(d,h)=>d==="smlrc.wasm"?YH:h+d,wasmBinary:void 0,print:r,printErr:r});await new Promise(d=>{i.then(h=>{e=h,d()})}),e.FS.writeFile("/input.c",n,{flags:"w+"});const o="/output.s",s=["./smallerc","/input.c",o],l=[s.length,QH(e,s)];try{e.ccall("main","number",["number","number"],l)}catch{throw new Error(`Error during event compile:
`+t.join(`
`))}let u=e.FS.readFile(o,{encoding:"utf8"});return u=ZH(u),u=JH(u),u=oz(u),u}function qH(n,e){const t=n._malloc((e.length+1)*Uint8Array.BYTES_PER_ELEMENT);if(!t)throw new Error("Null pointer returned in str2ptr");for(let r=0;r<e.length;r++)n.setValue(t+r,e.charCodeAt(r),"i8");return n.setValue(t+e.length,0,"i8"),t}function QH(n,e){const t=n._malloc(e.length*Uint32Array.BYTES_PER_ELEMENT);if(!t)throw new Error("Null pointer returned in str2ptrs");return e.forEach((r,i)=>{const a=qH(n,r);n.setValue(t+4*i,a,"i32")}),t}const Tx=[["r0","$0"],["at","$1"],["v0","$2"],["v1","$3"],["a0","$4"],["a1","$5"],["a2","$6"],["a3","$7"],["t0","$8"],["t1","$9"],["t2","$10"],["t3","$11"],["t4","$12"],["t5","$13"],["t6","$14"],["t7","$15"],["s0","$16"],["s1","$17"],["s2","$18"],["s3","$19"],["s4","$20"],["s5","$21"],["s6","$22"],["s7","$23"],["t8","$24"],["t9","$25"],["k0","$26"],["k1","$27"],["gp","$28"],["sp","$29"],["fp","$30"],["ra","$31"]];function JH(n){for(let e=Tx.length-1;e>=0;e--)n=n.replace(new RegExp("\\"+Tx[e][1],"g"),Tx[e][0]);return n}function ZH(n){const e={text:[],data:[],rdata:[],bss:[]};let t="text";return n.split(`
`).forEach(r=>{switch(r.trim()){case".text":t="text";break;case".data":t="data";break;case".rdata":t="rdata";break;case".bss":t="bss";break;default:e[t].push(r);break}}),`; .text
${e.text.join(`
`)}
; .data
${e.data.join(`
`)}
; .rdata
${e.rdata.join(`
`)}
; .bss
${e.bss.join(`
`)}`}const f3=`__floatsisf:
__floatunsisf:
  mtc1 A0, F12
  cvt.s.w F12, F12
  mfc1 V0, F12
  JR RA
  NOP`,h3=`__fixsfsi:
__fixunssfsi:
  mtc1 A0, F12
  cvt.w.s F12, F12
  mfc1 V0, F12
  JR RA
  NOP`,$H=`__addsf3:
  mtc1 A0, F12
  mtc1 A1, F13
  add.s F12, F12, F13
  mfc1 V0, F12
  JR RA
  NOP`,ez=`__subsf3:
  mtc1 A0, F12
  mtc1 A1, F13
  sub.s F12, F12, F13
  mfc1 V0, F12
  JR RA
  NOP`,tz=`__negsf2:
  mtc1 A0, F12
  neg.s F12, F12
  mfc1 V0, F12
  JR RA
  NOP`,nz=`__mulsf3:
  mtc1 A0, F12
  mtc1 A1, F13
  mul.s F12, F12, F13
  mfc1 V0, F12
  JR RA
  NOP`,rz=`__divsf3:
  mtc1 A0, F12
  mtc1 A1, F13
  div.s F12, F12, F13
  mfc1 V0, F12
  JR RA
  NOP`,iz=`__lesf2:
  mtc1 A0, F12
  mtc1 A1, F13

  c.eq.s F12, F13
  bc1t __lesf2_ret ; a == b
  li V0, 0

  c.lt.s F12, F13
  li V0, -1 ; a < b
  bc1t __lesf2_ret
  nop

  li V0, 1 ; a > b

  mfc1 V0, F12
__lesf2_ret:
  JR RA
  NOP`,az=`__gesf2:
  mtc1 A0, F12
  mtc1 A1, F13

  c.eq.s F12, F13
  bc1t __gesf2_ret ; a == b
  li V0, 0

  c.lt.s F12, F13
  li V0, -1 ; a < b
  bc1t __gesf2_ret
  nop

  li V0, 1 ; a > b

  mfc1 V0, F12
__gesf2_ret:
  JR RA
  NOP`;function oz(n){let e="";return n.indexOf("__floatsisf")>=0&&(e+=`
`+f3),n.indexOf("__floatunsisf")>=0&&(e+=`
`+f3),n.indexOf("__fixsfsi")>=0&&(e+=`
`+h3),n.indexOf("__fixunssfsi")>=0&&(e+=`
`+h3),n.indexOf("__addsf3")>=0&&(e+=`
`+$H),n.indexOf("__subsf3")>=0&&(e+=`
`+ez),n.indexOf("__negsf2")>=0&&(e+=`
`+tz),n.indexOf("__mulsf3")>=0&&(e+=`
`+nz),n.indexOf("__divsf3")>=0&&(e+=`
`+rz),n.indexOf("__lesf2")>=0&&(e+=`
`+iz),n.indexOf("__gesf2")>=0&&(e+=`
`+az),e&&(n+=`
; .text
.align 4
`+e.trim()),n}var kr;(function(n){n[n.firstPass=0]="firstPass",n[n.secondPass=1]="secondPass"})(kr||(kr={}));var OM="\\?\\!\\@",Z4="@?@?[\\w\\?\\!]+",sz=new RegExp("^("+Z4+")\\:");function lz(n){var e=n.line.match(sz);if(e===null)return!1;var t=e[1];return!$4(t)&&!eE(t)&&(n.currentLabel=t),tE(n,t,cz(n)),t}function $4(n){return n.indexOf("@@")===0}function eE(n){return n.indexOf("@")===0&&n[1]!=="@"}function cz(n){return n.memPos+n.outIndex>>>0}function Pt(n,e){throw new Error(n+`
Line: `+e.line)}function tE(n,e,t){$4(e)?(n.currentLabel||Pt("Local label "+e+" (starts with @@) cannot be used before a window label",n),dz(n,e,t)):eE(e)?Az(n,e,t):uz(n,e,t)}function uz(n,e,t){n.symbols[e]=t,n.symbolsByValue[t]=e,n.symbolOutputMap&&(n.symbolOutputMap[e]=n.outIndex)}function dz(n,e,t){var r=n.localSymbols[n.currentLabel];r||(r=n.localSymbols[n.currentLabel]=Object.create(null)),r[e]=t}function Az(n,e,t){var r=n.staticSymbols[n.staticSymbols.length-1];r[e]=t}function fz(n){if(n.currentPass===kr.firstPass){n.staticSymbols.push(Object.create(null));var e=n.staticSymbolIndices[n.staticSymbolIndices.length-1],t=n.staticSymbols.length-1;n.staticSymbolIndices.before[t]=e,n.staticSymbolIndices.push(t)}else n.staticSymbolIndices.shift()}function hz(n){if(n.currentPass===kr.firstPass){var e=n.staticSymbolIndices;e.push(e.before[e[e.length-1]])}else n.staticSymbolIndices.shift()}function pz(n){return n.currentPass===kr.firstPass?n.staticSymbols[n.staticSymbolIndices[n.staticSymbolIndices.length-1]]:n.staticSymbols[n.staticSymbolIndices[0]]}function Yw(n,e){if($4(e)){n.currentLabel||Pt("Local label "+e+" cannot be referenced in the current scope",n);var t=n.localSymbols[n.currentLabel];return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:null}if(eE(e)){var r=pz(n);return Object.prototype.hasOwnProperty.call(r,e)?r[e]:null}return Object.prototype.hasOwnProperty.call(n.symbols,e)?n.symbols[e]:null}function mz(n,e){return n.symbolsByValue[e]||null}function Sz(n){if(typeof n!="string")return null;var e=n[0]==="-";e&&(n=n.substr(1));var t;return n[0]==="b"||n[0]==="0"&&n[1]==="b"?t=parseInt(n.substr(2),2):n[0]==="o"||n[0]==="0"&&n[1]==="o"?t=parseInt(n.substr(2),8):n[0]==="x"||n[0]==="0"&&n[1]==="x"?t=parseInt(n.substr(2),16):t=parseInt(n,10),isNaN(t)?null:(e&&(t=-t),t)}function gz(n){var e=n===0,t=n<0,r=n.toString(16).toUpperCase();return t&&(r=r.substr(1)),(t?"-":"")+(e?"":"0x")+r}function _z(n){if(n.length<2)return null;var e=n[0];if(n[n.length-1]!==e||e!=='"'&&e!=="'")return null;for(var t="",r=1;r<n.length-1;r++){var i=n[r];if(i==="\\"){var a=n[r+1],o=n[r+2],s=n[r+3];switch(a){case"\\":case'"':case"'":case"?":t+=a,r++;continue;case"n":t+=`
`,r++;continue;case"r":t+="\r",r++;continue;case"t":t+="	",r++;continue;case"b":t+="\b",r++;continue;case"x":if(p3(o))p3(s)?(t+=String.fromCharCode(parseInt(o+s,16)),r+=3):(t+=String.fromCharCode(parseInt(o,16)),r+=2);else throw new Error("Hex escape sequence followed by non-hex character: "+a);continue;default:if(bx(a)){bx(o)?bx(s)?(t+=String.fromCharCode(parseInt(a+o+s,8)),r+=3):(t+=String.fromCharCode(parseInt(a+o,8)),r+=2):(t+=String.fromCharCode(parseInt(a,8)),r++);continue}}}t+=i}return t}function bx(n){switch(n){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":return!0}return!1}function p3(n){switch(n.toUpperCase()){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"A":case"B":case"C":case"D":case"E":case"F":return!0}return!1}function kM(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=[],i=0,a=e;i<a.length;i++){var o=a[i],s=n.indexOf(o);s>=0&&r.push(s)}return r.length===0?-1:Math.min.apply(Math,r)}function xz(n,e){return typeof e=="string"&&Pt('Assembler function abs cannot be called with string "'+e+'", value must be a number.',n),Math.abs(e)}function vz(n,e){typeof e=="string"&&Pt('Assembler function hi cannot be called with string "'+e+'", value must be a number.',n);var t=e&65535,r=e>>>16;return t&32768&&(r+=1),r}function wz(n,e){return typeof e=="string"&&Pt('Assembler function lo cannot be called with string "'+e+'", value must be a number.',n),e&65535}function yz(n,e){return n.memPos+n.outIndex}function La(n,e){return NM(n,e)}var Ez=new RegExp("^([-\\w]+)\\(([\\(\\),-\\w"+OM+"]*)\\)$","i");function NM(n,e){var t=Ez.exec(n);if(t===null){var r=Yw(e,n);if(r!==null)return r;var i=Sz(n);if(i!==null)return i;var a=_z(n);return typeof a=="string"?a:null}else{var o=t[1];if(!oA[o]){var r=Yw(e,o);return r!==null?r:null}var s="",l=0,u=void 0;for(u=o.length+1;u<n.length-1;u++){var d=n[u];if(d==="(")l++;else if(d===")"&&(l--,l<0)){u++;break}s+=d}var h="";u<n.length-1&&(h=n.substring(u,n.length));var f=0;if(s&&(f=NM(s,e)),f===null)return Pt("Could not evaluate "+s,e),null;var m=oA[o](e,f);return h&&(m=m+h),m}}var oA=Object.create(null);oA.abs=xz;oA.hi=vz;oA.lo=wz;oA.org=yz;function UM(n){n.lineExpressions.length!==2&&Pt(".definelabel must have two arguments, a label name and value",n);var e=n.lineExpressions[0],t=La(n.lineExpressions[1],n);return typeof t!="number"?(Pt("The value in .definelabel must evaluate to a numeric value",n),!1):(tE(n,e,t),!0)}var Cz=new RegExp("^\\.definelabel\\s+("+Z4+")[\\s,]+([-\\w"+OM+"]+)$","i");UM.matches=function(n){var e=n.line.match(Cz);return e!==null};var jM=new RegExp("^\\s*("+Z4+")\\s+equ(?:$|(?:\\s+(.+)$))","i");function GM(n){var e=n.line.match(jM);e||Pt("equ directive was not able to be parsed",n);var t=e[1],r=e[2]||"";return tE(n,t,r),!0}GM.matches=function(n){var e=n.line.match(jM);return e!==null};function Vz(n){var e=n.line,t=kM(e," ","	");if(t===-1){n.lineExpressions=[];return}var r=e.substr(t+1),i=[];nE(r,i,n),n.lineExpressions=i}function m3(n){var e=n.line,t=kM(e," ","	");if(t===-1)return e;var r=e.substring(0,t),i=e.substr(t+1),a=[];if(nE(i,a,n),n.lineExpressions=a,a.length>0){var o=[];a.forEach(function(s,l){var u=La(s,n);typeof u=="number"&&l===a.length-1&&(u=Fz(r,u,n)),o.push(u)}),n.evaluatedLineExpressions=o,e=r+" "+Dz(o,a).join(" ")}return e}function Dz(n,e){return n.map(function(t,r){return typeof t=="number"?gz(t):t===null?e[r]:t})}function Fz(n,e,t){if(Tz(n)){var r=t.memPos+t.outIndex,i=e-r;i%4!==0&&Pt("Misaligned branch instruction detected",t);var a=i/4-1;return a}return e}function Tz(n){if(n=n.toLowerCase(),n[0]!=="b")return!1;switch(n){case"bc1f":case"bc1fl":case"bc1t":case"bc1tl":case"beq":case"beql":case"bgez":case"bgezal":case"bgezall":case"bgezl":case"bgtz":case"bgtzl":case"blez":case"blezl":case"bltz":case"bltzal":case"bltzall":case"bltzl":case"bne":case"bnel":return!0}return!1}function nE(n,e,t){var r="",i="",a=0,o=!1,s="";function l(m){r+=m}function u(){for(;S3(r[r.length-1]);)r=r.slice(0,-1);if(r=r.trim(),!!r){var m=Yw(t,r);typeof m=="string"?nE(m,e,t):e.push(r),r=""}}function d(){i||a||!S3(s)||u()}for(var h=0;h<n.length;h++){var f=n[h];switch(d(),f){case"(":!o&&!i&&a++;break;case")":!o&&!i&&(a<=0&&Pt("Imbalanced parenthesis in expression: "+n,t),a--);break;case'"':case"'":o||(i?i===f&&(i=""):i=f);break}l(f),!o&&f==="\\"?o=!0:o=!1,s=f}return a>0&&Pt("Imbalanced parenthesis in expression: "+n,t),i&&Pt("Unterminated string: "+r,t),u(),e}function S3(n){return n===","||bz(n)}function bz(n){return n===" "||n==="	"}function Cr(n,e){var t=Pz(n,e);return function(r){return!!r.line.match(t)}}function Pz(n,e){return new RegExp("^\\."+n+(e?"":"\\s+"),"i")}function HM(n){n.lineExpressions.length!==1&&Pt(".org directive requires one numeric argument",n);var e=La(n.lineExpressions[0],n);return typeof e!="number"?(Pt("Could not parse .org immediate "+e,n),!1):(e<0&&Pt(".org directive cannot be negative",n),n.memPos=e>>>0,!0)}HM.matches=Cr("org");function zM(n){n.lineExpressions.length!==1&&Pt(".orga directive requires one numeric argument",n);var e=La(n.lineExpressions[0],n);return typeof e!="number"?(Pt("Could not parse .orga immediate "+e,n),!1):(e<0&&Pt(".orga directive cannot be negative.",n),n.outIndex=e>>>0,!0)}zM.matches=Cr("orga");function WM(n){n.lineExpressions.length!==1&&Pt(".align requires one power of two number argument",n);var e=La(n.lineExpressions[0],n);if(e===null&&Pt("Could not parse .align immediate "+n.lineExpressions,n),typeof e!="number")return Pt(".align requires one power of two number argument",n),!1;for(e%2&&Pt(".align directive requires a power of two.",n),e<0&&Pt(".align directive cannot align by a negative value.",n);n.outIndex%e;)n.currentPass===kr.secondPass&&n.dataView.setUint8(n.outIndex,0),n.outIndex++;return!0}WM.matches=Cr("align");function XM(n){n.lineExpressions.length!==1&&Pt(".skip directive requires one numeric argument",n);var e=La(n.lineExpressions[0],n);return typeof e!="number"?(Pt("Could not parse .skip immediate "+e,n),!1):(e<0&&Pt(".skip directive cannot skip a negative length.",n),n.outIndex+=e,!0)}XM.matches=Cr("skip");function KM(n){(!n.lineExpressions.length||n.lineExpressions.length>2)&&Pt(".fill directive takes a length and optional value",n);var e,t;if(e=La(n.lineExpressions[0],n),typeof e!="number")return Pt("Could not parse .fill length "+n.lineExpressions[0],n),!1;if(e<0&&Pt(".fill length must be positive.",n),n.lineExpressions.length>1){if(t=La(n.lineExpressions[1],n),typeof t!="number")return Pt("Could not parse .fill value "+n.lineExpressions[1],n),!1}else t=0;if(n.currentPass===kr.secondPass)for(var r=0;r<e;r++)n.dataView.setInt8(n.outIndex+r,t);return n.outIndex+=e,!0}KM.matches=Cr("fill");function YM(n){return rE(n,!0)}YM.matches=Cr("asciiz");function rE(n,e){var t=[],r=n.lineExpressions;if(r.forEach(function(a){var o=La(a,n);if(o===null&&Pt("Could not parse .ascii value "+a,n),typeof o=="number")t.push(o);else if(typeof o=="string")for(var s=0;s<o.length;s++)t.push(o.charCodeAt(s))}),e&&t.push(0),n.currentPass===kr.secondPass)for(var i=0;i<t.length;i++)t[i]<0?n.dataView.setInt8(n.outIndex+i,t[i]):n.dataView.setUint8(n.outIndex+i,t[i]);return n.outIndex+=t.length,!0}rE.matches=Cr("ascii");function qM(n){if(n.currentPass===kr.secondPass){n.evaluatedLineExpressions.length||Pt(".byte directive requires arguments",n);for(var e=n.evaluatedLineExpressions,t=0;t<e.length;t++){var r=e[t];typeof r!="number"&&Pt(".byte directive requires numeric arguments, saw: "+r,n),r<0?n.dataView.setInt8(n.outIndex+t,r):n.dataView.setUint8(n.outIndex+t,r)}}return n.outIndex+=n.lineExpressions.length,!0}var Rz=Cr("byte"),Lz=Cr("db");qM.matches=function(n){return Rz(n)||Lz(n)};function QM(n){if(n.currentPass===kr.secondPass){n.evaluatedLineExpressions.length||Pt(".halfword directive requires arguments",n);for(var e=n.evaluatedLineExpressions,t=0;t<e.length;t++){var r=e[t];typeof r!="number"&&Pt(".halfword directive requires numeric arguments, saw: "+r,n),r<0?n.dataView.setInt16(n.outIndex+t*2,r):n.dataView.setUint16(n.outIndex+t*2,r)}}return n.outIndex+=2*n.lineExpressions.length,!0}var Bz=Cr("halfword"),Mz=Cr("dh");QM.matches=function(n){return Bz(n)||Mz(n)};function JM(n){if(n.currentPass===kr.secondPass){n.evaluatedLineExpressions.length||Pt(".word directive requires arguments",n);for(var e=n.evaluatedLineExpressions,t=0;t<e.length;t++){var r=e[t];typeof r!="number"&&Pt(".word directive requires numeric arguments, saw: "+r,n),r<0?n.dataView.setInt32(n.outIndex+t*4,r):n.dataView.setUint32(n.outIndex+t*4,r)}}return n.outIndex+=4*n.lineExpressions.length,!0}var Iz=Cr("word"),Oz=Cr("dw");JM.matches=function(n){return Iz(n)||Oz(n)};function ZM(n){if(n.currentPass===kr.secondPass){n.evaluatedLineExpressions.length||Pt(".float directive requires arguments",n),n.evaluatedLineExpressions.some(function(r){return typeof r!="number"})&&Pt(".float directive requires numeric arguments",n);for(var e=n.evaluatedLineExpressions,t=0;t<e.length;t++)n.dataView.setFloat32(n.outIndex+t*4,e[t])}return n.outIndex+=4*n.lineExpressions.length,!0}ZM.matches=Cr("float");var yr;(function(n){n[n.None=0]="None",n[n.AcceptingBlock=1]="AcceptingBlock",n[n.ExecutingBlock=2]="ExecutingBlock",n[n.NoLongerAcceptingBlock=4]="NoLongerAcceptingBlock",n[n.SawElse=8]="SawElse"})(yr||(yr={}));var iE=yr.AcceptingBlock|yr.ExecutingBlock|yr.NoLongerAcceptingBlock;function l8(n,e){n.ifElseStack[n.ifElseStack.length-1]&=~iE,n.ifElseStack[n.ifElseStack.length-1]|=e}function $M(n){n.lineExpressions.length||Pt("A condition must be passed to an if directive",n),n.lineExpressions.length>1&&Pt("Only a single condition can be passed to an if directive",n);var e=La(n.lineExpressions[0],n);return e===null&&Pt("Could not parse .if condition",n),typeof e!="number"&&Pt("Condition of if directive must evaluate to a numeric value, saw: "+e,n),e?n.ifElseStack.push(yr.ExecutingBlock):n.ifElseStack.push(yr.AcceptingBlock),!0}$M.matches=Cr("if");function e6(n){n.lineExpressions.length&&Pt("The else directive cannot take a condition or parameters",n),n.ifElseStack.length||Pt("An else directive was reached, but there was no previous if directive",n);var e=n.ifElseStack[n.ifElseStack.length-1];switch(e&yr.SawElse&&Pt("Encountered another else directive, but an else directive was already passed",n),e&iE){case yr.AcceptingBlock:l8(n,yr.ExecutingBlock);break;case yr.ExecutingBlock:l8(n,yr.NoLongerAcceptingBlock);break;case yr.NoLongerAcceptingBlock:break;default:Pt("Unexpected conditional block state: "+e.toString(16),n)}return n.ifElseStack[n.ifElseStack.length-1]|=yr.SawElse,!0}e6.matches=Cr("else",!0);function t6(n){n.lineExpressions.length||Pt("A condition must be passed to an elseif directive",n),n.lineExpressions.length>1&&Pt("Only a single condition can be passed to an elseif directive",n),n.ifElseStack.length||Pt("An elseif directive was reached, but there was no previous if directive",n);var e=n.ifElseStack[n.ifElseStack.length-1];e&yr.SawElse&&Pt("Encountered an elseif after seeing an else directive",n);var t=La(n.lineExpressions[0],n);switch(t===null&&Pt("Could not parse .elseif condition",n),typeof t!="number"&&Pt("Condition of elseif directive must evaluate to a numeric value, saw: "+t,n),e&iE){case yr.AcceptingBlock:t&&l8(n,yr.ExecutingBlock);break;case yr.ExecutingBlock:l8(n,yr.NoLongerAcceptingBlock);break;case yr.NoLongerAcceptingBlock:break;default:Pt("Unexpected conditional block state: "+e.toString(16),n)}return!0}t6.matches=Cr("elseif");function n6(n){return n.lineExpressions.length&&Pt("The endif directive cannot take a condition or parameters",n),n.ifElseStack.length||Pt("An endif directive was reached, but there was no previous if directive",n),n.ifElseStack.pop(),!0}n6.matches=Cr("endif",!0);function r6(n){n.lineExpressions.length||Pt("A file name must be passed to an include directive",n),n.lineExpressions.length>1&&Pt("Only a single file name can be passed to an include directive",n);var e=La(n.lineExpressions[0],n);if(e===null&&Pt("Could not parse .include file name",n),typeof e!="string"){Pt("File name of include directive must evaluate to a string, saw: "+e,n);return}var t=n.files[e];if(typeof t!="string"&&Pt("The "+e+" file was not a string",n),n.currentPass!==kr.firstPass){Pt("The `include` directive shouldn't be present after the first assembly phase",n);return}n.linesToInsert=`.beginfile
`+t+`
.endfile`,n.line=""}r6.matches=Cr("include");function i6(n){return n.lineExpressions.length&&Pt("The beginfile directive takes no arguments",n),fz(n),!0}i6.matches=Cr("beginfile",!0);function a6(n){return n.lineExpressions.length&&Pt("The endfile directive takes no arguments",n),hz(n),!0}a6.matches=Cr("endfile",!0);function Rp(n){var e=kz(n);return function(t){return!!t.line.match(e)}}function kz(n){return new RegExp("^"+n+"\\s+","i")}function o6(n){if(n.currentPass!==kr.firstPass){Pt("The `beqz` macro shouldn't be present after the first assembly phase",n);return}n.lineExpressions.length!==2&&Pt("The `beqz` macro must take a register and label",n),n.line="",n.linesToInsert="BEQ "+n.lineExpressions[0]+" R0 "+n.lineExpressions[1]}o6.matches=Rp("beqz");function s6(n){if(n.currentPass!==kr.firstPass){Pt("The `bnez` macro shouldn't be present after the first assembly phase",n);return}n.lineExpressions.length!==2&&Pt("The `bnez` macro must take a register and label",n),n.line="",n.linesToInsert="BNE "+n.lineExpressions[0]+" R0 "+n.lineExpressions[1]}s6.matches=Rp("bnez");function l6(n){if(n.currentPass!==kr.firstPass){Pt("The `bnezl` macro shouldn't be present after the first assembly phase",n);return}n.lineExpressions.length!==2&&Pt("The `bnezl` macro must take a register and label",n),n.line="",n.linesToInsert="BNEL "+n.lineExpressions[0]+" R0 "+n.lineExpressions[1]}l6.matches=Rp("bnezl");function c6(n){if(n.currentPass!==kr.firstPass){Pt("The `li` macro shouldn't be present after the first assembly phase",n);return}n.lineExpressions.length<=1&&Pt("The `li` macro must take a register and immediate",n);var e=n.lineExpressions[0],t=La(n.lineExpressions[1],n);if(t===null){n.line="",n.linesToInsert="LUI "+e+", hi("+n.lineExpressions[1]+`)
ADDIU `+e+", "+e+", lo("+n.lineExpressions[1]+")";return}if(typeof t!="number"){Pt("Immediate value of `li` macro must evaluate to a number, saw: "+t,n);return}if(n.line="",t>=-32768&&t<=32767)n.linesToInsert="ADDIU "+e+", R0, "+t;else if(t>0&&t<=65535)n.linesToInsert="ORI "+e+", R0, "+t;else if((t&65535)===0)n.linesToInsert="LUI "+e+", "+(t>>16);else if(t>=-4294967295&&t<=4294901759){var r=(t&32768)!==0;n.linesToInsert="LUI "+e+", "+((t>>>16)+(r?1:0))+`
ADDIU `+e+", "+e+", "+(t&65535)}else Pt("li immediate value "+t+" seems out of range",n)}c6.matches=Rp("li");function u6(n){if(n.currentPass!==kr.firstPass){Pt("The `move` macro shouldn't be present after the first assembly phase",n);return}n.lineExpressions.length!==2&&Pt("The `move` macro must take two registers",n),n.line="",n.linesToInsert="ADDU "+n.lineExpressions[0]+" "+n.lineExpressions[1]+" R0"}u6.matches=Rp("move");var Nz=[UM,GM,HM,zM,WM,XM,KM,rE,YM,qM,QM,JM,ZM,$M,t6,e6,n6,r6,i6,a6],Uz=[o6,s6,l6,c6,u6];function g3(n){for(var e=0,t=Nz;e<t.length;e++){var r=t[e];if(r.matches(n))return r}for(var i=0,a=Uz;i<a.length;i++){var o=a[i];if(o.matches(n))return o}return null}function _3(n,e){e(n)}function jz(n){var e=n.toLowerCase();return Px(e,".if")||Px(e,".else")||Px(e,".endif")}function Px(n,e){return n.substr(0,e.length)===e}function Gz(n){var e=[0];return e.before=Object.create(null),{buffer:null,dataView:null,line:"",memPos:0,outIndex:0,symbols:Object.create(null),symbolsByValue:Object.create(null),symbolOutputMap:n.symbolOutputMap,currentLabel:null,localSymbols:Object.create(null),staticSymbols:[Object.create(null)],staticSymbolIndices:e,currentPass:kr.firstPass,lineExpressions:[],evaluatedLineExpressions:null,ifElseStack:[],files:n.files||Object.create(null),linesToInsert:null}}var Hz=globalThis&&globalThis.__spreadArrays||function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r};function rl(n,e){e=e||{};for(var t=v3(n),r=Gz(e),i=[],a=[],o=0;o<t.length;o++){var s=t[o];if(r.line=s,x3(r)){s&&a.push(s);continue}s=zz(r);var l=g3(r);if(l?(Vz(r),_3(r,l),s=r.line):s&&(r.outIndex+=4),s&&a.push(s),"linesToInsert"in r&&r.linesToInsert){var u=v3(r.linesToInsert);t.splice.apply(t,Hz([o+1,0],u)),r.linesToInsert=null}}return t=a,r.buffer=e.buffer||new ArrayBuffer(r.outIndex),r.dataView=new DataView(r.buffer),r.memPos=0,r.outIndex=0,r.currentPass=kr.secondPass,t.forEach(function(d){if(r.line=d,r.lineExpressions=[],r.evaluatedLineExpressions=[],x3(r))return d;var h=g3(r);if(h){m3(r),_3(r,h);return}var f=mz(r,r.memPos+r.outIndex);f!==null&&(r.currentLabel=f),d=r.line=m3(r),e.text&&i.push(d);var m;try{m=t0(d)}catch(g){Pt(g,r);return}r.dataView.setUint32(r.outIndex,m),r.outIndex+=4}),r.ifElseStack.length&&Pt("An if directive was used without an endif directive",r),r.staticSymbolIndices[0]!==0&&Pt("A beginfile directive was used without an endfile directive",r),e.text?i:r.buffer}function x3(n){if(n.ifElseStack.length){var e=n.ifElseStack[n.ifElseStack.length-1];return!(e&yr.ExecutingBlock)&&!jz(n.line)}return!1}function zz(n){for(var e;e=lz(n);)n.line=n.line.substr(e.length+1).trim();return n.line}function v3(n){var e=Xz(n);return e=e.filter(function(t){return typeof t=="string"}),e=Wz(e),e=e.map(function(t){return t.trim()}),e=e.filter(Boolean),e}function Wz(n){var e=!1,t=n.map(function(r){if(e){var i=r.indexOf("*/");i>=0&&(r=r.substr(i+2),e=!1)}if(e)return"";for(var a=r.indexOf("/*");a>=0;){if(Rx(r,a))a++;else{var i=r.indexOf("*/",a+2);if(i>=0)r=r.substr(0,a)+r.substr(i+2);else{r=r.substr(0,a),e=!0;break}}a=r.indexOf("/*",a)}for(var o=r.indexOf(";");o>=0;){if(!Rx(r,o)){r=r.substr(0,o),e=!1;break}o=r.indexOf(";",o+1)}for(var s=r.indexOf("//");s>=0;){if(!Rx(r,s)){r=r.substr(0,s),e=!1;break}s=r.indexOf("//",s+2)}return r});if(e)throw new Error("Unclosed block comment detected.");return t}function Rx(n,e){return w3(n,e,'"')||w3(n,e,"'")}function w3(n,e,t){var r=n.indexOf(t);if(r===-1||r>e)return!1;var i=n.indexOf(t,e);return i!==-1}function Xz(n){if(typeof n=="string")return n.split(/\r?\n/);if(!Array.isArray(n))throw new Error("Input must be a string or array of strings");return n}const d6=`; Customize the background used each turn!
; This function runs at the start of each turn.
; The default background is available as DEFAULT_BG.
; Additional backgrounds are available as ADDITIONAL_BG_#,
; e.g. ADDITIONAL_BG_1 for the first added background.
ADDIU SP SP -4
SW RA 0(SP)

; Return the background index in V0.
LI V0 DEFAULT_BG

LW RA 0(SP)
JR RA
ADDIU SP SP 4`,Kz=`// Customize the background used each turn!
// This function runs at the start of each turn.
// The default background is available as DEFAULT_BG.
// Additional backgrounds are available as ADDITIONAL_BG_#,
// e.g. ADDITIONAL_BG_1 for the first added background.

int PickBackground() {
    return DEFAULT_BG;
}`;function Yz(n){switch(n){case En.C:return Kz;case En.MIPS:return d6}throw new Error(`Unrecognized event code language ${n}`)}function qz(n){if(!n.additionalbg)return[];let e=0;return n.additionalbg.map(t=>++e)}async function Qz(n,e,t){const r=Jz(t);let i=[];for(const a of r)i=i.concat(await A6(n,e,t,a));return i.length===r.length?i.unshift("All possible target game versions failed to compile/assemble."):i=[],i}async function A6(n,e,t,r){const i=[],a=qz(t);if(e===En.C){const o=f6(n,0,a);try{const s=Lp(o,r);wt(s);const l=await bA(s);wt(l);const u=Nh(l,2147483648,r);rl(u)}catch(s){i.push(`Failed test compile/assemble for ${ku(r)}:
${s}
`)}}else{const o=qw(n,0,a);try{const s=Nh(o,2147483648,r);wt(s),rl(s)}catch(s){i.push(`Failed test assembly for ${ku(r)}:
${s}
`)}}return i}function Jz(n){switch(n.game){case 1:return[Qe.MP1_USA,Qe.MP1_PAL,Qe.MP1_JPN];case 2:return[Qe.MP2_USA,Qe.MP2_PAL,Qe.MP2_JPN];case 3:return[Qe.MP3_USA,Qe.MP3_PAL,Qe.MP3_JPN]}}async function aE(n,e,t){const r=aC(n);if(!r)return qw(d6,e,t);switch(r.language){case En.C:{const i=f6(r.code,e,t);Tt.getROMGame();const a=Lp(i),o=await bA(a);return Bp(`
        .beginfile ; Scopes static labels
        ${o}
        .align 4
        .endfile
      `,!0)}case En.MIPS:return qw(r.code,e,t);default:throw new Error(`Unrecognized event code language ${r.language}`)}}function qw(n,e,t){return Bp(`
    .beginfile ; Scopes static labels
    __PP64_INTERNAL_ADDITIONAL_BG_CHOICE:
    ${oE(e,t).join(`
`)}
    ${n}
    .align 4
    .endfile
  `,!0)}function oE(n,e){const t=[`.definelabel DEFAULT_BG,${n}`];return e&&e.forEach((r,i)=>{t.push(`.definelabel ADDITIONAL_BG_${i+1},${r}`)}),t}function f6(n,e,t){return`
#define PickBackground __PP64_INTERNAL_ADDITIONAL_BG_CHOICE
${h6(e,t).join(`
`)}
${n}
  `}function h6(n,e){const t=[`#define DEFAULT_BG ${n}`];return e&&e.forEach((r,i)=>{t.push(`#define ADDITIONAL_BG_${i+1} ${r}`)}),t}function PA(n){return n!=null&&n.additionalbg?n.additionalbg.map((e,t)=>Tt.romIsLoaded()?$n.getDirectoryCount()+t:t):null}function p6(n,e,t,r){const i=Zz(e,t,r),a=x6(r.audioIndices),o=h6(r.boardInfo.bgDir,PA(r.board)),s=[...i,...a,...o,n].join(`
`);return Lp(s,r.game)}function Lp(n,e){return[n].join(`
`)}function Zz(n,e,t){const r=[],i=n.parameters,a=e.parameterValues;return i&&i.length&&a&&i.forEach(o=>{const s=a[o.name];switch(o.type){case an.Boolean:r.push(`#define ${o.name} ${s?1:0}`);break;case an.Number:case an.PositiveNumber:typeof s=="number"?r.push(`#define ${o.name} ${s}`):r.push(`#define ${o.name} 0`);break;case an.NumberArray:break;case an.Space:if(t.testCompile)r.push(`#define ${o.name} 0`),r.push(`#define ${o.name}_chain_index 0`),r.push(`#define ${o.name}_chain_space_index 0`);else if(r.push(`#define ${o.name} ${s}`),t.chains){const l=s8(t.chains,s);r.push(`#define ${o.name}_chain_index ${l[0]}`),r.push(`#define ${o.name}_chain_space_index ${l[1]}`)}break;case an.SpaceArray:if(t.testCompile)r.push(`#define ${o.name} 0`),r.push(`#define ${o.name}_length 1`),r.push(`#define ${o.name}_chain_indices 0`),r.push(`#define ${o.name}_chain_space_indices 0`);else{const l=s||[];r.push(`#define ${o.name} ${l.join(",")}`),r.push(`#define ${o.name}_length ${l.length}`);const u=l.map(f=>s8(t.chains,f)),d=u.map(f=>f[0]),h=u.map(f=>f[1]);r.push(`#define ${o.name}_chain_indices ${d.join(",")}`),r.push(`#define ${o.name}_chain_space_indices ${h.join(",")}`)}break;default:typeof s<"u"&&s!==null&&r.push(`#define ${o.name} ${s}`);break}}),r}const m6=`; Customize the background music used each turn!
; This function runs whenever the board music starts playing.
; Custom tracks you've added are available as MUSIC_TRACK_INDEX_#,
; e.g. MUSIC_TRACK_INDEX_1 for the first added custom song.
; (If you aren't using custom music, then only MUSIC_TRACK_INDEX_1
; exists and it is set to the in-game music index you chose.)
ADDIU SP SP -4
SW RA 0(SP)

; Return the audio index in V0.
LI V0 MUSIC_TRACK_INDEX_1

LW RA 0(SP)
JR RA
ADDIU SP SP 4`,$z=`// Customize the background music used each turn!
// This function runs whenever the board music starts playing.
// Custom tracks you've added are available as MUSIC_TRACK_INDEX_#,
// e.g. MUSIC_TRACK_INDEX_1 for the first added custom song.
// (If you aren't using custom music, then only MUSIC_TRACK_INDEX_1
// exists and it is set to the in-game music index you chose.)

int PickAudioIndex() {
    return MUSIC_TRACK_INDEX_1;
}`;function eW(n){switch(n){case En.C:return $z;case En.MIPS:return m6}throw new Error(`Unrecognized event code language ${n}`)}async function tW(n,e,t){const r=nW(t);let i=[];for(const a of r)i=i.concat(await S6(n,e,t,a));return i.length===r.length?i.unshift("All possible target game versions failed to compile/assemble."):i=[],i}async function S6(n,e,t,r){const i=[],a=g6(t);if(e===En.C){const o=_6(n,a);try{const s=Lp(o,r);wt(s);const l=await bA(s);wt(l);const u=Nh(l,2147483648,r);rl(u)}catch(s){i.push(`Failed test compile/assemble for ${ku(r)}:
${s}
`)}}else{const o=Qw(n,a);try{const s=Nh(o,2147483648,r);wt(s),rl(s)}catch(s){i.push(`Failed test assembly for ${ku(r)}:
${s}
`)}}return i}function nW(n){switch(n.game){case 1:return[Qe.MP1_USA,Qe.MP1_PAL,Qe.MP1_JPN];case 2:return[Qe.MP2_USA,Qe.MP2_PAL,Qe.MP2_JPN];case 3:return[Qe.MP3_USA,Qe.MP3_PAL,Qe.MP3_JPN]}}async function sE(n,e){const t=oC(n);if(!t)return Qw(m6,e);switch(t.language){case En.C:{const r=_6(t.code,e);Tt.getROMGame();const i=Lp(r),a=await bA(i);return Bp(`
        .beginfile ; Scopes static labels
        ${a}
        .align 4
        .endfile
      `,!0)}case En.MIPS:return Qw(t.code,e);default:throw new Error(`Unrecognized event code language ${t.language}`)}}function Qw(n,e){return Bp(`
    .beginfile ; Scopes static labels
    __PP64_INTERNAL_GET_BOARD_AUDIO_INDEX:
    ${lE(e).join(`
`)}
    ${n}
    .align 4
    .endfile
  `,!0)}function g6(n){if(!n.audioData||!n.audioData.length)return[1];let e=0;return n.audioData.map(t=>++e)}function lE(n){return n.map((t,r)=>`.definelabel MUSIC_TRACK_INDEX_${r+1},${t}`)}function _6(n,e){return`
#define PickAudioIndex __PP64_INTERNAL_GET_BOARD_AUDIO_INDEX
${x6(e).join(`
`)}
${n}
  `}function x6(n){return n?n.map((t,r)=>`#define MUSIC_TRACK_INDEX_${r+1} ${t}`):[]}function y3(n,e,t,r){const i=v6(e,t,r),a=lE(r.audioIndices),o=oE(r.boardInfo.bgDir,PA(r.board)),s=[...i,...a,...o,n].join(`
`);return Nh(s,r.addr,r.game)}function Nh(n,e,t){const r=`.org ${At(e)}`,i=Zw(n),a=Jw(t,!0);return[r,...i,...a,n,".align 4"].join(`
`)}function E3(n,e,t,r,i,a){const o=n.split(`
`).find(d=>d.startsWith("main:")),s=w6(r.curSpaceIndex,a),l=!o&&`${s}:`,u=o&&`.definelabel ${s},main`;return Bp(`
    .beginfile ; Scopes static labels
    ${l||""}
    ${v6(e,t,r).join(`
`)}
    ${n}
    ${u||""}
    .align 4
    .endfile
  `,i)}function Jw(n,e){const r=Dg(n).map(i=>`.definelabel ${i.name},0x${i.addr.toString(16)}`);switch(n){case Qe.MP1_USA:e?r.push(".definelabel GetBoardAudioIndex,0"):r.push(".definelabel GetBoardAudioIndex,__PP64_INTERNAL_GET_BOARD_AUDIO_INDEX");break;case Qe.MP2_USA:e?(r.push(".definelabel ViewBoardMap,0"),r.push(".definelabel GetBoardAudioIndex,0"),r.push(".definelabel GetRandPromptSelection,0")):(r.push(".definelabel ViewBoardMap,__PP64_INTERNAL_VIEW_MAP"),r.push(".definelabel GetBoardAudioIndex,__PP64_INTERNAL_GET_BOARD_AUDIO_INDEX"),r.push(".definelabel GetRandPromptSelection,__PP64_INTERNAL_RAND_MESSAGE_CHOICE"));break;case Qe.MP3_USA:e?(r.push(".definelabel GetBasicPromptSelection,0"),r.push(".definelabel ViewBoardMap,0"),r.push(".definelabel GetBoardAudioIndex,0")):(r.push(".definelabel GetBasicPromptSelection,__PP64_INTERNAL_BASIC_MESSAGE_CHOICE"),r.push(".definelabel ViewBoardMap,__PP64_INTERNAL_VIEW_MAP"),r.push(".definelabel GetBoardAudioIndex,__PP64_INTERNAL_GET_BOARD_AUDIO_INDEX"));break}return r}const rW=/func_(8[0-9A-Fa-f]{7})/g,iW=/D_(8[0-9A-Fa-f]{7})/g;function Zw(n){let e=[];const t=n.match(rW);t&&t.forEach(i=>{if(n.indexOf(i+":")>=0)return;const a=i.substr(5).toUpperCase();e.push(`.definelabel ${i},0x${a}`)});const r=n.match(iW);return r&&r.forEach(i=>{if(n.indexOf(i+":")>=0)return;const a=i.substr(2).toUpperCase();e.push(`.definelabel ${i},0x${a}`)}),e=e.filter((i,a)=>e.indexOf(i)===a),e}function v6(n,e,t){const r=[],i=n.parameters,a=e.parameterValues;return i&&i.length&&a&&i.forEach(o=>{const s=a[o.name];switch(o.type){case an.Boolean:r.push(`.definelabel ${o.name},${s?1:0}`);break;case an.Number:typeof s=="number"&&r.push(`.definelabel ${o.name},${s}`);break;case an.NumberArray:break;case an.Space:if(r.push(`.definelabel ${o.name},${s}`),t.chains){const l=s8(t.chains,s);r.push(`.definelabel ${o.name}_chain_index,${l[0]}`),r.push(`.definelabel ${o.name}_chain_space_index,${l[1]}`)}else r.push(`.definelabel ${o.name}_chain_index,-1`),r.push(`.definelabel ${o.name}_chain_space_index,-1`);break;case an.SpaceArray:if(t.testCompile)r.push(`${o.name} equ 0`),r.push(`${o.name}_length equ 1`),r.push(`${o.name}_chain_indices equ 0`),r.push(`${o.name}_chain_space_indices equ 0`);else{const l=s||[];r.push(`${o.name} equ ${l.join(",")}`),r.push(`${o.name}_length equ ${l.length}`);const u=l.map(f=>s8(t.chains,f)),d=u.map(f=>f[0]),h=u.map(f=>f[1]);r.push(`${o.name}_chain_indices equ ${d.join(",")}`),r.push(`${o.name}_chain_space_indices equ ${h.join(",")}`)}break;default:typeof s<"u"&&s!==null&&r.push(`.definelabel ${o.name},${s}`);break}}),r}function Bp(n,e){const t=n.split(`
`).map(o=>o.trim()),r=sW(t,e),i=aW(r);n=e?lW(t):r.join(`
`);const a=/[@\w!?]/;return i.forEach(o=>{let s=-1;do if(s=n.indexOf(o,s),s>=0){if(s>0){const l=n[s-1];if(a.test(l)){s+=o.length;continue}}if(s+o.length<n.length){const l=n[s+o.length];if(a.test(l)){s+=o.length;continue}}n=n.slice(0,s)+"@"+n.slice(s),s+=o.length+1}while(s>=0)}),n}function aW(n){const e=/^\.definelabel\s+([^,]+)/i,t=/^([@\w!?]+):/i,r=/^\s*([@\w!?]+)\s+equ(?:$|\s+)/i;let i=[];return n.forEach(a=>{let o=e.exec(a);if(o){i.push(o[1]);return}if(o=r.exec(a),o){i.push(o[1]);return}for(;o=t.exec(a);)i.push(o[1]),a=a.substr(o[0].length)}),i=i.filter(oW),i}function oW(n){return!(n.indexOf("__PP64_INTERNAL")>=0||n[0]==="@")}function sW(n,e){let t=!1;const r=[];for(let i=0;i<n.length;i++){if(n[i]===".beginstatic"){if(t)throw new Error("Cannot repeat .beginstatic within a static section");t=!0,e||r.push("; omitted statics");continue}else if(n[i]===".endstatic"){if(!t)throw new Error("Saw .endstatic without .beginstatic");t=!1;continue}t||r.push(n[i])}if(t)throw new Error("Saw .beginstatic without .endstatic");return r}function lW(n){const e=[];for(let t=0;t<n.length;t++)n[t]===".beginstatic"?e.push("; .beginstatic"):n[t]===".endstatic"?e.push("; .endstatic"):e.push(n[t]);return e.join(`
`)}function w6(n,e){return`__PP64_INTERNAL_EVENT_${n<0?"minus"+Math.abs(n):n}_${e}`}class Wd{constructor(e){this._spaceIndex=e,this._entries=[]}parse(e,t){let r;e instanceof ArrayBuffer?r=new DataView(e,t):r=e;let i=0,a,o,s;for(;(a=r.getUint16(i))!==0;)o=r.getUint16(i+2),s=r.getUint32(i+4),this.add(a,o,s),i+=8}write(e,t){const r=new DataView(e,t);let i=0;return this.forEach(a=>{if(typeof a.address=="string")throw new Error("Cannot write event list with symbolic address");this._writeEntry(r,i,a.activationType,a.executionType,a.address),i+=8}),this._writeEntry(r,i,0,0),i+=8,i}getAssembly(){let e=`${y6(this._spaceIndex)}:
`;return this.forEach((t,r)=>{e+=`.halfword ${t.activationType}, ${t.executionType}
`,typeof t.address=="string"?e+=`.word ${t.address}
`:e+=`.word ${w6(this._spaceIndex,r)}
`}),e+=`.word 0, 0
`,e}_writeEntry(e,t,r,i,a=0){if(e.setUint16(t,r),e.setUint16(t+2,i),!a&&(r||i))throw new Error("Tried to write null address from SpaceEventList.");e.setUint32(t+4,a)}add(e,t,r=0){this._entries.push(new cW(e,t,r))}setAddress(e,t=0){this._entries[e].address=t>>>0}forEach(e){this._entries.forEach(e)}count(){return this._entries.length}byteLength(){return this._entries.length*8+8}static byteLength(e){return e*8+8}}class cW{constructor(e,t,r){this.activationType=e,this.executionType=t,this.address=r}}function y6(n){return`__PP64_INTERNAL_SPACE_LIST_${n<0?"minus"+Math.abs(n):n}`}class C3{constructor(){this._entries={}}parse(e,t){let r;e instanceof ArrayBuffer?r=new DataView(e,t):r=e;let i=0,a,o;for(;(a=r.getInt16(i))!==-1;)o=r.getUint32(i+4),this.add(a,o),i+=8}write(e,t){const r=new DataView(e,t);let i=0;for(const a in this._entries)this._writeEntry(r,i,parseInt(a),this._entries[a]),i+=8;return this._writeEntry(r,i,65535,0),i+=8,i}getAssembly(){let e=`__PP64_INTERNAL_SPACE_TABLE:
`;for(const t in this._entries)e+=`.halfword ${parseInt(t)}, 0
       .word ${y6(parseInt(t))}
`;return e+=`.halfword 0xFFFF, 0, 0, 0
`,e}_writeEntry(e,t,r,i){if(e.setUint16(t,r),e.setUint16(t+2,0),!i&&r!==65535)throw new Error(`Tried to write null address from SpaceEventTable at space index ${r}.`);e.setUint32(t+4,i)}add(e,t=0){this._entries[e]=t}forEach(e){for(const t in this._entries){const r={spaceIndex:Number(t),address:this._entries[t]};e(r)}}byteLength(){return Object.keys(this._entries).length*8+8}}function V3(n){return String.fromCharCode((n&4278190080)>>>24)+String.fromCharCode((n&16711680)>>>16)+String.fromCharCode((n&65280)>>>8)+String.fromCharCode(n&255)}function uW(n){const e=new Array(n.length);for(let t=0;t<n.length;++t)e[t]=n.charCodeAt(t);return e}function dW(n){if(typeof TextEncoder<"u")return new TextEncoder().encode(n).buffer;const e=new ArrayBuffer(n.length*2),t=new Uint16Array(e);for(let r=0,i=n.length;r<i;r++)t[r]=n.charCodeAt(r);return e}function AW(n){return typeof TextDecoder<"u"?new TextDecoder().decode(n):String.fromCharCode.apply(null,new Uint16Array(n))}function wu(n,e,t){for(;n.length<e;)n=t+n;return n}function fW(n,e,t,r){return n.slice(0,e)+r+n.slice(e+Math.abs(t))}function D3(n,e){return n<e?-1:n>e?1:0}function F3(n){return n&&n.replace(/\r\n|\r/g,`
`)}function hW(n){return n?n.replace(/<\w+>/g,"").replace("\u3000","\u24B6").replace("\u3001","\u24B7").replace("\u3002","\u25B2").replace("\u3003","\u25BA").replace("\u3004","\u25C4").replace("\u3005","\u25BC").replace("\u3006","\u24CF").replace("\u3007","\u{1F579}\uFE0F").replace("\u3008","\u272A").replace("\u3009","\u2605").replace("\u3010","\u24C8").replace("\u3011","\u24C7"):""}var RA=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function E6(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function pW(n){var e=n.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var mW=ImageData;const SW=mW;function gW(n,e){let t=0;for(let r=0;r<e.height;r++)for(let i=0;i<e.width;i++){const a=Math.floor(i*n.width/e.width);let s=(Math.floor(r*n.height/e.height)*n.width+a)*4;e.data[t++]=n.data[s++],e.data[t++]=n.data[s++],e.data[t++]=n.data[s++],e.data[t++]=n.data[s++]}}function T3(n,e){function t(o,s,l,u,d){return Math.round((o-s)*d+(l-o)*u)}function r(o,s,l,u,d){const h=n.data[(l*n.width+u)*4+o];if(u===d)return h;const f=n.data[(l*n.width+d)*4+o];return t(s,u,d,h,f)}function i(o,s,l,u,d,h,f){const m=r(o,s,h,l,u);if(h===f)return m;const g=r(o,s,f,l,u);return t(d,h,f,m,g)}let a=0;for(let o=0;o<e.height;o++)for(let s=0;s<e.width;s++){const l=s*n.width/e.width,u=o*n.height/e.height,d=Math.floor(l),h=Math.floor(u),f=Math.min(Math.ceil(l),n.width-1),m=Math.min(Math.ceil(u),n.height-1);e.data[a++]=i(0,l,d,f,u,h,m),e.data[a++]=i(1,l,d,f,u,h,m),e.data[a++]=i(2,l,d,f,u,h,m),e.data[a++]=i(3,l,d,f,u,h,m)}}var C6=function(e,t,r,i){i=i||"bilinear-interpolation";let a;switch(i){case"nearest-neighbor":a=gW;break;case"bilinear-interpolation":a=T3;break;case"biliniear-interpolation":a=T3;break;default:throw new Error(`Unknown algorithm: ${i}`)}const o=new SW(t,r);return a(e,o),o};function _W(n,e,t,r,i,a,o,s){const l=o*(r/8),u=new ArrayBuffer(l*s),d=new Uint8Array(u),h=new Uint8Array(n),f=e*(r/8),m=i*(r/8);let g=0;for(let _=a;_<a+s;_++){const E=m+f*_;for(let x=0;x<l;x++)d[g++]=h[E+x]}return u}function Pu(n,e,t){const r=n.width,i=n.height,a=No(r,i);a.drawImage(n,0,0,r,i);let o=a.getImageData(0,0,r,i);return(e!==r||t!==i)&&(o=C6(o,e,t)),o.data.buffer}function xW(n){const e=n>>>16&255,t=n>>>8&255,r=n&255,i=255-e,a=255-t,o=255-r;return i<<16|a<<8|o}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const cE="138",Xd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Kd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},vW=0,b3=1,wW=2,V6=1,yW=2,oh=3,Uh=0,Wr=1,Uu=2,D6=1,rc=0,H1=1,P3=2,R3=3,L3=4,EW=5,v1=100,CW=101,VW=102,B3=103,M3=104,DW=200,FW=201,TW=202,bW=203,F6=204,T6=205,PW=206,RW=207,LW=208,BW=209,MW=210,IW=0,OW=1,kW=2,$w=3,NW=4,UW=5,jW=6,GW=7,h_=0,HW=1,zW=2,ic=0,WW=1,XW=2,KW=3,YW=4,qW=5,b6=300,sA=301,lA=302,ey=303,ty=304,p_=306,uE=307,jh=1e3,la=1001,Gh=1002,Kr=1003,ny=1004,ry=1005,pi=1006,P6=1007,Mp=1008,ju=1009,QW=1010,JW=1011,Hh=1012,ZW=1013,Bg=1014,yu=1015,z1=1016,$W=1017,eX=1018,W1=1020,tX=1021,nX=1022,Qi=1023,rX=1024,iX=1025,Ru=1026,cA=1027,aX=1028,oX=1029,sX=1030,lX=1031,cX=1033,Lx=33776,Bx=33777,Mx=33778,Ix=33779,I3=35840,O3=35841,k3=35842,N3=35843,uX=36196,U3=37492,j3=37496,G3=37808,H3=37809,z3=37810,W3=37811,X3=37812,K3=37813,Y3=37814,q3=37815,Q3=37816,J3=37817,Z3=37818,$3=37819,eT=37820,tT=37821,nT=36492,dX=2200,AX=2201,fX=2202,zh=2300,Wh=2301,Ox=2302,E1=2400,C1=2401,c8=2402,dE=2500,R6=2501,hX=0,gc=3e3,Q0=3001,pX=3200,mX=3201,LA=0,SX=1,kx=7680,gX=519,Xh=35044,u8=35048,rT="300 es",iy=1035;class dl{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,o=i.length;a<o;a++)i[a].call(this,e);e.target=null}}}const ui=[];for(let n=0;n<256;n++)ui[n]=(n<16?"0":"")+n.toString(16);let rS=1234567;const X1=Math.PI/180,Kh=180/Math.PI;function Mo(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ui[n&255]+ui[n>>8&255]+ui[n>>16&255]+ui[n>>24&255]+"-"+ui[e&255]+ui[e>>8&255]+"-"+ui[e>>16&15|64]+ui[e>>24&255]+"-"+ui[t&63|128]+ui[t>>8&255]+"-"+ui[t>>16&255]+ui[t>>24&255]+ui[r&255]+ui[r>>8&255]+ui[r>>16&255]+ui[r>>24&255]).toUpperCase()}function qi(n,e,t){return Math.max(e,Math.min(t,n))}function AE(n,e){return(n%e+e)%e}function _X(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function xX(n,e,t){return n!==e?(t-n)/(e-n):0}function Sh(n,e,t){return(1-t)*n+t*e}function vX(n,e,t,r){return Sh(n,e,1-Math.exp(-t*r))}function wX(n,e=1){return e-Math.abs(AE(n,e*2)-e)}function yX(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function EX(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function CX(n,e){return n+Math.floor(Math.random()*(e-n+1))}function VX(n,e){return n+Math.random()*(e-n)}function DX(n){return n*(.5-Math.random())}function FX(n){return n!==void 0&&(rS=n%2147483647),rS=rS*16807%2147483647,(rS-1)/2147483646}function TX(n){return n*X1}function bX(n){return n*Kh}function ay(n){return(n&n-1)===0&&n!==0}function PX(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function d8(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function RX(n,e,t,r,i){const a=Math.cos,o=Math.sin,s=a(t/2),l=o(t/2),u=a((e+r)/2),d=o((e+r)/2),h=a((e-r)/2),f=o((e-r)/2),m=a((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":n.set(s*d,l*h,l*f,s*u);break;case"YZY":n.set(l*f,s*d,l*h,s*u);break;case"ZXZ":n.set(l*h,l*f,s*d,s*u);break;case"XZX":n.set(s*d,l*g,l*m,s*u);break;case"YXY":n.set(l*m,s*d,l*g,s*u);break;case"ZYZ":n.set(l*g,l*m,s*d,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}var L6=Object.freeze({__proto__:null,DEG2RAD:X1,RAD2DEG:Kh,generateUUID:Mo,clamp:qi,euclideanModulo:AE,mapLinear:_X,inverseLerp:xX,lerp:Sh,damp:vX,pingpong:wX,smoothstep:yX,smootherstep:EX,randInt:CX,randFloat:VX,randFloatSpread:DX,seededRandom:FX,degToRad:TX,radToDeg:bX,isPowerOfTwo:ay,ceilPowerOfTwo:PX,floorPowerOfTwo:d8,setQuaternionFromProperEuler:RX});class pt{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),a=this.x-e.x,o=this.y-e.y;return this.x=a*r-o*i+e.x,this.y=a*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}pt.prototype.isVector2=!0;class Ir{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,a,o,s,l,u){const d=this.elements;return d[0]=e,d[1]=i,d[2]=s,d[3]=t,d[4]=a,d[5]=l,d[6]=r,d[7]=o,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,o=r[0],s=r[3],l=r[6],u=r[1],d=r[4],h=r[7],f=r[2],m=r[5],g=r[8],_=i[0],E=i[3],x=i[6],v=i[1],C=i[4],V=i[7],D=i[2],H=i[5],R=i[8];return a[0]=o*_+s*v+l*D,a[3]=o*E+s*C+l*H,a[6]=o*x+s*V+l*R,a[1]=u*_+d*v+h*D,a[4]=u*E+d*C+h*H,a[7]=u*x+d*V+h*R,a[2]=f*_+m*v+g*D,a[5]=f*E+m*C+g*H,a[8]=f*x+m*V+g*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],d=e[8];return t*o*d-t*s*u-r*a*d+r*s*l+i*a*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],d=e[8],h=d*o-s*u,f=s*l-d*a,m=u*a-o*l,g=t*h+r*f+i*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/g;return e[0]=h*_,e[1]=(i*u-d*r)*_,e[2]=(s*r-i*o)*_,e[3]=f*_,e[4]=(d*t-i*l)*_,e[5]=(i*a-s*t)*_,e[6]=m*_,e[7]=(r*l-u*t)*_,e[8]=(o*t-r*a)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,a,o,s){const l=Math.cos(a),u=Math.sin(a);return this.set(r*l,r*u,-r*(l*o+u*s)+o+e,-i*u,i*l,-i*(-u*o+l*s)+s+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,a=i[0],o=i[3],s=i[6],l=i[1],u=i[4],d=i[7];return i[0]=t*a+r*l,i[3]=t*o+r*u,i[6]=t*s+r*d,i[1]=-r*a+t*l,i[4]=-r*o+t*u,i[7]=-r*s+t*d,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}Ir.prototype.isMatrix3=!0;function B6(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}function Yh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const M6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wo={h:0,s:0,l:0},iS={h:0,s:0,l:0};function Nx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function K1(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ux(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}class Jt{constructor(e,t,r){return t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,r){return this.r=e,this.g=t,this.b=r,this}setHSL(e,t,r){if(e=AE(e,1),t=qi(t,0,1),r=qi(r,0,1),t===0)this.r=this.g=this.b=r;else{const i=r<=.5?r*(1+t):r+t-r*t,a=2*r-i;this.r=Nx(a,i,e+1/3),this.g=Nx(a,i,e),this.b=Nx(a,i,e-1/3)}return this}setStyle(e){function t(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const s=parseFloat(i[1])/360,l=parseInt(i[2],10)/100,u=parseInt(i[3],10)/100;return t(i[4]),this.setHSL(s,l,u)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=r[1],a=i.length;if(a===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(a===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=M6[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=K1(e.r),this.g=K1(e.g),this.b=K1(e.b),this}copyLinearToSRGB(e){return this.r=Ux(e.r),this.g=Ux(e.g),this.b=Ux(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,r=this.g,i=this.b,a=Math.max(t,r,i),o=Math.min(t,r,i);let s,l;const u=(o+a)/2;if(o===a)s=0,l=0;else{const d=a-o;switch(l=u<=.5?d/(a+o):d/(2-a-o),a){case t:s=(r-i)/d+(r<i?6:0);break;case r:s=(i-t)/d+2;break;case i:s=(t-r)/d+4;break}s/=6}return e.h=s,e.s=l,e.l=u,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,r){return this.getHSL(wo),wo.h+=e,wo.s+=t,wo.l+=r,this.setHSL(wo.h,wo.s,wo.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(wo),e.getHSL(iS);const r=Sh(wo.h,iS.h,t),i=Sh(wo.s,iS.s,t),a=Sh(wo.l,iS.l,t);return this.setHSL(r,i,a),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Jt.NAMES=M6;Jt.prototype.isColor=!0;Jt.prototype.r=1;Jt.prototype.g=1;Jt.prototype.b=1;let Yd;class Zu{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Yd===void 0&&(Yd=Yh("canvas")),Yd.width=e.width,Yd.height=e.height;const r=Yd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Yd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Yh("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let o=0;o<a.length;o++)a[o]=K1(a[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(K1(t[r]/255)*255):t[r]=K1(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class I6{constructor(e=null){this.uuid=Mo(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let o=0,s=i.length;o<s;o++)i[o].isDataTexture?a.push(jx(i[o].image)):a.push(jx(i[o]))}else a=jx(i);r.url=a}return t||(e.images[this.uuid]=r),r}}function jx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Zu.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}I6.prototype.isSource=!0;let LX=0;class qr extends dl{constructor(e=qr.DEFAULT_IMAGE,t=qr.DEFAULT_MAPPING,r=la,i=la,a=pi,o=Mp,s=Qi,l=ju,u=1,d=gc){super(),Object.defineProperty(this,"id",{value:LX++}),this.uuid=Mo(),this.name="",this.source=new I6(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=o,this.anisotropy=u,this.format=s,this.internalFormat=null,this.type=l,this.offset=new pt(0,0),this.repeat=new pt(1,1),this.center=new pt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ir,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==b6)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case jh:e.x=e.x-Math.floor(e.x);break;case la:e.x=e.x<0?0:1;break;case Gh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case jh:e.y=e.y-Math.floor(e.y);break;case la:e.y=e.y<0?0:1;break;case Gh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}qr.DEFAULT_IMAGE=null;qr.DEFAULT_MAPPING=b6;qr.prototype.isTexture=!0;class x0{constructor(e=0,t=0,r=0,i=1){this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*a,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*a,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*a,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,a;const l=e.elements,u=l[0],d=l[4],h=l[8],f=l[1],m=l[5],g=l[9],_=l[2],E=l[6],x=l[10];if(Math.abs(d-f)<.01&&Math.abs(h-_)<.01&&Math.abs(g-E)<.01){if(Math.abs(d+f)<.1&&Math.abs(h+_)<.1&&Math.abs(g+E)<.1&&Math.abs(u+m+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const C=(u+1)/2,V=(m+1)/2,D=(x+1)/2,H=(d+f)/4,R=(h+_)/4,j=(g+E)/4;return C>V&&C>D?C<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(C),i=H/r,a=R/r):V>D?V<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(V),r=H/i,a=j/i):D<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(D),r=R/a,i=j/a),this.set(r,i,a,t),this}let v=Math.sqrt((E-g)*(E-g)+(h-_)*(h-_)+(f-d)*(f-d));return Math.abs(v)<.001&&(v=1),this.x=(E-g)/v,this.y=(h-_)/v,this.z=(f-d)/v,this.w=Math.acos((u+m+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}x0.prototype.isVector4=!0;class ba extends dl{constructor(e,t,r={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new x0(0,0,e,t),this.scissorTest=!1,this.viewport=new x0(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new qr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:pi,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}ba.prototype.isWebGLRenderTarget=!0;class m_ extends qr{constructor(e=null,t=1,r=1,i=1){super(null),this.image={data:e,width:t,height:r,depth:i},this.magFilter=Kr,this.minFilter=Kr,this.wrapR=la,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}m_.prototype.isDataArrayTexture=!0;class BX extends ba{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new m_(null,e,t,r),this.texture.isRenderTargetTexture=!0}}BX.prototype.isWebGLArrayRenderTarget=!0;class fE extends qr{constructor(e=null,t=1,r=1,i=1){super(null),this.image={data:e,width:t,height:r,depth:i},this.magFilter=Kr,this.minFilter=Kr,this.wrapR=la,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}fE.prototype.isData3DTexture=!0;class MX extends ba{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new fE(null,e,t,r),this.texture.isRenderTargetTexture=!0}}MX.prototype.isWebGL3DRenderTarget=!0;class IX extends ba{constructor(e,t,r,i={}){super(e,t,i);const a=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=a.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,a=this.texture.length;i<a;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}IX.prototype.isWebGLMultipleRenderTargets=!0;class Si{constructor(e=0,t=0,r=0,i=1){this._x=e,this._y=t,this._z=r,this._w=i}static slerp(e,t,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,i)}static slerpFlat(e,t,r,i,a,o,s){let l=r[i+0],u=r[i+1],d=r[i+2],h=r[i+3];const f=a[o+0],m=a[o+1],g=a[o+2],_=a[o+3];if(s===0){e[t+0]=l,e[t+1]=u,e[t+2]=d,e[t+3]=h;return}if(s===1){e[t+0]=f,e[t+1]=m,e[t+2]=g,e[t+3]=_;return}if(h!==_||l!==f||u!==m||d!==g){let E=1-s;const x=l*f+u*m+d*g+h*_,v=x>=0?1:-1,C=1-x*x;if(C>Number.EPSILON){const D=Math.sqrt(C),H=Math.atan2(D,x*v);E=Math.sin(E*H)/D,s=Math.sin(s*H)/D}const V=s*v;if(l=l*E+f*V,u=u*E+m*V,d=d*E+g*V,h=h*E+_*V,E===1-s){const D=1/Math.sqrt(l*l+u*u+d*d+h*h);l*=D,u*=D,d*=D,h*=D}}e[t]=l,e[t+1]=u,e[t+2]=d,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,a,o){const s=r[i],l=r[i+1],u=r[i+2],d=r[i+3],h=a[o],f=a[o+1],m=a[o+2],g=a[o+3];return e[t]=s*g+d*h+l*m-u*f,e[t+1]=l*g+d*f+u*h-s*m,e[t+2]=u*g+d*m+s*f-l*h,e[t+3]=d*g-s*h-l*f-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,i=e._y,a=e._z,o=e._order,s=Math.cos,l=Math.sin,u=s(r/2),d=s(i/2),h=s(a/2),f=l(r/2),m=l(i/2),g=l(a/2);switch(o){case"XYZ":this._x=f*d*h+u*m*g,this._y=u*m*h-f*d*g,this._z=u*d*g+f*m*h,this._w=u*d*h-f*m*g;break;case"YXZ":this._x=f*d*h+u*m*g,this._y=u*m*h-f*d*g,this._z=u*d*g-f*m*h,this._w=u*d*h+f*m*g;break;case"ZXY":this._x=f*d*h-u*m*g,this._y=u*m*h+f*d*g,this._z=u*d*g+f*m*h,this._w=u*d*h-f*m*g;break;case"ZYX":this._x=f*d*h-u*m*g,this._y=u*m*h+f*d*g,this._z=u*d*g-f*m*h,this._w=u*d*h+f*m*g;break;case"YZX":this._x=f*d*h+u*m*g,this._y=u*m*h+f*d*g,this._z=u*d*g-f*m*h,this._w=u*d*h-f*m*g;break;case"XZY":this._x=f*d*h-u*m*g,this._y=u*m*h-f*d*g,this._z=u*d*g+f*m*h,this._w=u*d*h+f*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],a=t[8],o=t[1],s=t[5],l=t[9],u=t[2],d=t[6],h=t[10],f=r+s+h;if(f>0){const m=.5/Math.sqrt(f+1);this._w=.25/m,this._x=(d-l)*m,this._y=(a-u)*m,this._z=(o-i)*m}else if(r>s&&r>h){const m=2*Math.sqrt(1+r-s-h);this._w=(d-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(a+u)/m}else if(s>h){const m=2*Math.sqrt(1+s-r-h);this._w=(a-u)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+h-r-s);this._w=(o-i)/m,this._x=(a+u)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(qi(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,a=e._z,o=e._w,s=t._x,l=t._y,u=t._z,d=t._w;return this._x=r*d+o*s+i*u-a*l,this._y=i*d+o*l+a*s-r*u,this._z=a*d+o*u+r*l-i*s,this._w=o*d-r*s-i*l-a*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,a=this._z,o=this._w;let s=o*e._w+r*e._x+i*e._y+a*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=r,this._y=i,this._z=a,this;const l=1-s*s;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*a+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),d=Math.atan2(u,s),h=Math.sin((1-t)*d)/u,f=Math.sin(t*d)/u;return this._w=o*h+this._w*f,this._x=r*h+this._x*f,this._y=i*h+this._y*f,this._z=a*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(a),r*Math.cos(a),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Si.prototype.isQuaternion=!0;class Se{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(iT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(iT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*i,this.y=a[1]*t+a[4]*r+a[7]*i,this.z=a[2]*t+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=e.elements,o=1/(a[3]*t+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*i+a[12])*o,this.y=(a[1]*t+a[5]*r+a[9]*i+a[13])*o,this.z=(a[2]*t+a[6]*r+a[10]*i+a[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,a=e.x,o=e.y,s=e.z,l=e.w,u=l*t+o*i-s*r,d=l*r+s*t-a*i,h=l*i+a*r-o*t,f=-a*t-o*r-s*i;return this.x=u*l+f*-a+d*-s-h*-o,this.y=d*l+f*-o+h*-a-u*-s,this.z=h*l+f*-s+u*-o-d*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i,this.y=a[1]*t+a[5]*r+a[9]*i,this.z=a[2]*t+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,a=e.z,o=t.x,s=t.y,l=t.z;return this.x=i*l-a*s,this.y=a*o-r*l,this.z=r*s-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Gx.copy(this).projectOnVector(e),this.sub(Gx)}reflect(e){return this.sub(Gx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(qi(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Se.prototype.isVector3=!0;const Gx=new Se,iT=new Si;class ho{constructor(e=new Se(1/0,1/0,1/0),t=new Se(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,a=-1/0,o=-1/0,s=-1/0;for(let l=0,u=e.length;l<u;l+=3){const d=e[l],h=e[l+1],f=e[l+2];d<t&&(t=d),h<r&&(r=h),f<i&&(i=f),d>a&&(a=d),h>o&&(o=h),f>s&&(s=f)}return this.min.set(t,r,i),this.max.set(a,o,s),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,a=-1/0,o=-1/0,s=-1/0;for(let l=0,u=e.count;l<u;l++){const d=e.getX(l),h=e.getY(l),f=e.getZ(l);d<t&&(t=d),h<r&&(r=h),f<i&&(i=f),d>a&&(a=d),h>o&&(o=h),f>s&&(s=f)}return this.min.set(t,r,i),this.max.set(a,o,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=ru.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const a=r.attributes.position;for(let o=0,s=a.count;o<s;o++)ru.fromBufferAttribute(a,o).applyMatrix4(e.matrixWorld),this.expandByPoint(ru)}else r.boundingBox===null&&r.computeBoundingBox(),Hx.copy(r.boundingBox),Hx.applyMatrix4(e.matrixWorld),this.union(Hx);const i=e.children;for(let a=0,o=i.length;a<o;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ru),ru.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(bf),aS.subVectors(this.max,bf),qd.subVectors(e.a,bf),Qd.subVectors(e.b,bf),Jd.subVectors(e.c,bf),Rl.subVectors(Qd,qd),Ll.subVectors(Jd,Qd),iu.subVectors(qd,Jd);let t=[0,-Rl.z,Rl.y,0,-Ll.z,Ll.y,0,-iu.z,iu.y,Rl.z,0,-Rl.x,Ll.z,0,-Ll.x,iu.z,0,-iu.x,-Rl.y,Rl.x,0,-Ll.y,Ll.x,0,-iu.y,iu.x,0];return!zx(t,qd,Qd,Jd,aS)||(t=[1,0,0,0,1,0,0,0,1],!zx(t,qd,Qd,Jd,aS))?!1:(oS.crossVectors(Rl,Ll),t=[oS.x,oS.y,oS.z],zx(t,qd,Qd,Jd,aS))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ru.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(ru).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Rs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Rs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Rs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Rs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Rs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Rs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Rs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Rs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Rs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}ho.prototype.isBox3=!0;const Rs=[new Se,new Se,new Se,new Se,new Se,new Se,new Se,new Se],ru=new Se,Hx=new ho,qd=new Se,Qd=new Se,Jd=new Se,Rl=new Se,Ll=new Se,iu=new Se,bf=new Se,aS=new Se,oS=new Se,au=new Se;function zx(n,e,t,r,i){for(let a=0,o=n.length-3;a<=o;a+=3){au.fromArray(n,a);const s=i.x*Math.abs(au.x)+i.y*Math.abs(au.y)+i.z*Math.abs(au.z),l=e.dot(au),u=t.dot(au),d=r.dot(au);if(Math.max(-Math.max(l,u,d),Math.min(l,u,d))>s)return!1}return!0}const OX=new ho,aT=new Se,sS=new Se,Wx=new Se;class $u{constructor(e=new Se,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):OX.setFromPoints(e).getCenter(r);let i=0;for(let a=0,o=e.length;a<o;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Wx.subVectors(e,this.center);const t=Wx.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.add(Wx.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return this.center.equals(e.center)===!0?sS.set(0,0,1).multiplyScalar(e.radius):sS.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(aT.copy(e.center).add(sS)),this.expandByPoint(aT.copy(e.center).sub(sS)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ls=new Se,Xx=new Se,lS=new Se,Bl=new Se,Kx=new Se,cS=new Se,Yx=new Se;class BA{constructor(e=new Se,t=new Se(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ls)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ls.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ls.copy(this.direction).multiplyScalar(t).add(this.origin),Ls.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Xx.copy(e).add(t).multiplyScalar(.5),lS.copy(t).sub(e).normalize(),Bl.copy(this.origin).sub(Xx);const a=e.distanceTo(t)*.5,o=-this.direction.dot(lS),s=Bl.dot(this.direction),l=-Bl.dot(lS),u=Bl.lengthSq(),d=Math.abs(1-o*o);let h,f,m,g;if(d>0)if(h=o*l-s,f=o*s-l,g=a*d,h>=0)if(f>=-g)if(f<=g){const _=1/d;h*=_,f*=_,m=h*(h+o*f+2*s)+f*(o*h+f+2*l)+u}else f=a,h=Math.max(0,-(o*f+s)),m=-h*h+f*(f+2*l)+u;else f=-a,h=Math.max(0,-(o*f+s)),m=-h*h+f*(f+2*l)+u;else f<=-g?(h=Math.max(0,-(-o*a+s)),f=h>0?-a:Math.min(Math.max(-a,-l),a),m=-h*h+f*(f+2*l)+u):f<=g?(h=0,f=Math.min(Math.max(-a,-l),a),m=f*(f+2*l)+u):(h=Math.max(0,-(o*a+s)),f=h>0?a:Math.min(Math.max(-a,-l),a),m=-h*h+f*(f+2*l)+u);else f=o>0?-a:a,h=Math.max(0,-(o*f+s)),m=-h*h+f*(f+2*l)+u;return r&&r.copy(this.direction).multiplyScalar(h).add(this.origin),i&&i.copy(lS).multiplyScalar(f).add(Xx),m}intersectSphere(e,t){Ls.subVectors(e.center,this.origin);const r=Ls.dot(this.direction),i=Ls.dot(Ls)-r*r,a=e.radius*e.radius;if(i>a)return null;const o=Math.sqrt(a-i),s=r-o,l=r+o;return s<0&&l<0?null:s<0?this.at(l,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,a,o,s,l;const u=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,f=this.origin;return u>=0?(r=(e.min.x-f.x)*u,i=(e.max.x-f.x)*u):(r=(e.max.x-f.x)*u,i=(e.min.x-f.x)*u),d>=0?(a=(e.min.y-f.y)*d,o=(e.max.y-f.y)*d):(a=(e.max.y-f.y)*d,o=(e.min.y-f.y)*d),r>o||a>i||((a>r||r!==r)&&(r=a),(o<i||i!==i)&&(i=o),h>=0?(s=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(s=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),r>l||s>i)||((s>r||r!==r)&&(r=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Ls)!==null}intersectTriangle(e,t,r,i,a){Kx.subVectors(t,e),cS.subVectors(r,e),Yx.crossVectors(Kx,cS);let o=this.direction.dot(Yx),s;if(o>0){if(i)return null;s=1}else if(o<0)s=-1,o=-o;else return null;Bl.subVectors(this.origin,e);const l=s*this.direction.dot(cS.crossVectors(Bl,cS));if(l<0)return null;const u=s*this.direction.dot(Kx.cross(Bl));if(u<0||l+u>o)return null;const d=-s*Bl.dot(Yx);return d<0?null:this.at(d/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class un{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,a,o,s,l,u,d,h,f,m,g,_,E){const x=this.elements;return x[0]=e,x[4]=t,x[8]=r,x[12]=i,x[1]=a,x[5]=o,x[9]=s,x[13]=l,x[2]=u,x[6]=d,x[10]=h,x[14]=f,x[3]=m,x[7]=g,x[11]=_,x[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new un().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Zd.setFromMatrixColumn(e,0).length(),a=1/Zd.setFromMatrixColumn(e,1).length(),o=1/Zd.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,i=e.y,a=e.z,o=Math.cos(r),s=Math.sin(r),l=Math.cos(i),u=Math.sin(i),d=Math.cos(a),h=Math.sin(a);if(e.order==="XYZ"){const f=o*d,m=o*h,g=s*d,_=s*h;t[0]=l*d,t[4]=-l*h,t[8]=u,t[1]=m+g*u,t[5]=f-_*u,t[9]=-s*l,t[2]=_-f*u,t[6]=g+m*u,t[10]=o*l}else if(e.order==="YXZ"){const f=l*d,m=l*h,g=u*d,_=u*h;t[0]=f+_*s,t[4]=g*s-m,t[8]=o*u,t[1]=o*h,t[5]=o*d,t[9]=-s,t[2]=m*s-g,t[6]=_+f*s,t[10]=o*l}else if(e.order==="ZXY"){const f=l*d,m=l*h,g=u*d,_=u*h;t[0]=f-_*s,t[4]=-o*h,t[8]=g+m*s,t[1]=m+g*s,t[5]=o*d,t[9]=_-f*s,t[2]=-o*u,t[6]=s,t[10]=o*l}else if(e.order==="ZYX"){const f=o*d,m=o*h,g=s*d,_=s*h;t[0]=l*d,t[4]=g*u-m,t[8]=f*u+_,t[1]=l*h,t[5]=_*u+f,t[9]=m*u-g,t[2]=-u,t[6]=s*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,m=o*u,g=s*l,_=s*u;t[0]=l*d,t[4]=_-f*h,t[8]=g*h+m,t[1]=h,t[5]=o*d,t[9]=-s*d,t[2]=-u*d,t[6]=m*h+g,t[10]=f-_*h}else if(e.order==="XZY"){const f=o*l,m=o*u,g=s*l,_=s*u;t[0]=l*d,t[4]=-h,t[8]=u*d,t[1]=f*h+_,t[5]=o*d,t[9]=m*h-g,t[2]=g*h-m,t[6]=s*d,t[10]=_*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(kX,e,NX)}lookAt(e,t,r){const i=this.elements;return xa.subVectors(e,t),xa.lengthSq()===0&&(xa.z=1),xa.normalize(),Ml.crossVectors(r,xa),Ml.lengthSq()===0&&(Math.abs(r.z)===1?xa.x+=1e-4:xa.z+=1e-4,xa.normalize(),Ml.crossVectors(r,xa)),Ml.normalize(),uS.crossVectors(xa,Ml),i[0]=Ml.x,i[4]=uS.x,i[8]=xa.x,i[1]=Ml.y,i[5]=uS.y,i[9]=xa.y,i[2]=Ml.z,i[6]=uS.z,i[10]=xa.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,o=r[0],s=r[4],l=r[8],u=r[12],d=r[1],h=r[5],f=r[9],m=r[13],g=r[2],_=r[6],E=r[10],x=r[14],v=r[3],C=r[7],V=r[11],D=r[15],H=i[0],R=i[4],j=i[8],te=i[12],$=i[1],z=i[5],I=i[9],q=i[13],P=i[2],ee=i[6],ue=i[10],U=i[14],O=i[3],G=i[7],ne=i[11],se=i[15];return a[0]=o*H+s*$+l*P+u*O,a[4]=o*R+s*z+l*ee+u*G,a[8]=o*j+s*I+l*ue+u*ne,a[12]=o*te+s*q+l*U+u*se,a[1]=d*H+h*$+f*P+m*O,a[5]=d*R+h*z+f*ee+m*G,a[9]=d*j+h*I+f*ue+m*ne,a[13]=d*te+h*q+f*U+m*se,a[2]=g*H+_*$+E*P+x*O,a[6]=g*R+_*z+E*ee+x*G,a[10]=g*j+_*I+E*ue+x*ne,a[14]=g*te+_*q+E*U+x*se,a[3]=v*H+C*$+V*P+D*O,a[7]=v*R+C*z+V*ee+D*G,a[11]=v*j+C*I+V*ue+D*ne,a[15]=v*te+C*q+V*U+D*se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],a=e[12],o=e[1],s=e[5],l=e[9],u=e[13],d=e[2],h=e[6],f=e[10],m=e[14],g=e[3],_=e[7],E=e[11],x=e[15];return g*(+a*l*h-i*u*h-a*s*f+r*u*f+i*s*m-r*l*m)+_*(+t*l*m-t*u*f+a*o*f-i*o*m+i*u*d-a*l*d)+E*(+t*u*h-t*s*m-a*o*h+r*o*m+a*s*d-r*u*d)+x*(-i*s*d-t*l*h+t*s*f+i*o*h-r*o*f+r*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],d=e[8],h=e[9],f=e[10],m=e[11],g=e[12],_=e[13],E=e[14],x=e[15],v=h*E*u-_*f*u+_*l*m-s*E*m-h*l*x+s*f*x,C=g*f*u-d*E*u-g*l*m+o*E*m+d*l*x-o*f*x,V=d*_*u-g*h*u+g*s*m-o*_*m-d*s*x+o*h*x,D=g*h*l-d*_*l-g*s*f+o*_*f+d*s*E-o*h*E,H=t*v+r*C+i*V+a*D;if(H===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/H;return e[0]=v*R,e[1]=(_*f*a-h*E*a-_*i*m+r*E*m+h*i*x-r*f*x)*R,e[2]=(s*E*a-_*l*a+_*i*u-r*E*u-s*i*x+r*l*x)*R,e[3]=(h*l*a-s*f*a-h*i*u+r*f*u+s*i*m-r*l*m)*R,e[4]=C*R,e[5]=(d*E*a-g*f*a+g*i*m-t*E*m-d*i*x+t*f*x)*R,e[6]=(g*l*a-o*E*a-g*i*u+t*E*u+o*i*x-t*l*x)*R,e[7]=(o*f*a-d*l*a+d*i*u-t*f*u-o*i*m+t*l*m)*R,e[8]=V*R,e[9]=(g*h*a-d*_*a-g*r*m+t*_*m+d*r*x-t*h*x)*R,e[10]=(o*_*a-g*s*a+g*r*u-t*_*u-o*r*x+t*s*x)*R,e[11]=(d*s*a-o*h*a-d*r*u+t*h*u+o*r*m-t*s*m)*R,e[12]=D*R,e[13]=(d*_*i-g*h*i+g*r*f-t*_*f-d*r*E+t*h*E)*R,e[14]=(g*s*i-o*_*i-g*r*l+t*_*l+o*r*E-t*s*E)*R,e[15]=(o*h*i-d*s*i+d*r*l-t*h*l-o*r*f+t*s*f)*R,this}scale(e){const t=this.elements,r=e.x,i=e.y,a=e.z;return t[0]*=r,t[4]*=i,t[8]*=a,t[1]*=r,t[5]*=i,t[9]*=a,t[2]*=r,t[6]*=i,t[10]*=a,t[3]*=r,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),a=1-r,o=e.x,s=e.y,l=e.z,u=a*o,d=a*s;return this.set(u*o+r,u*s-i*l,u*l+i*s,0,u*s+i*l,d*s+r,d*l-i*o,0,u*l-i*s,d*l+i*o,a*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,a,o){return this.set(1,r,a,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,a=t._x,o=t._y,s=t._z,l=t._w,u=a+a,d=o+o,h=s+s,f=a*u,m=a*d,g=a*h,_=o*d,E=o*h,x=s*h,v=l*u,C=l*d,V=l*h,D=r.x,H=r.y,R=r.z;return i[0]=(1-(_+x))*D,i[1]=(m+V)*D,i[2]=(g-C)*D,i[3]=0,i[4]=(m-V)*H,i[5]=(1-(f+x))*H,i[6]=(E+v)*H,i[7]=0,i[8]=(g+C)*R,i[9]=(E-v)*R,i[10]=(1-(f+_))*R,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let a=Zd.set(i[0],i[1],i[2]).length();const o=Zd.set(i[4],i[5],i[6]).length(),s=Zd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],yo.copy(this);const u=1/a,d=1/o,h=1/s;return yo.elements[0]*=u,yo.elements[1]*=u,yo.elements[2]*=u,yo.elements[4]*=d,yo.elements[5]*=d,yo.elements[6]*=d,yo.elements[8]*=h,yo.elements[9]*=h,yo.elements[10]*=h,t.setFromRotationMatrix(yo),r.x=a,r.y=o,r.z=s,this}makePerspective(e,t,r,i,a,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,l=2*a/(t-e),u=2*a/(r-i),d=(t+e)/(t-e),h=(r+i)/(r-i),f=-(o+a)/(o-a),m=-2*o*a/(o-a);return s[0]=l,s[4]=0,s[8]=d,s[12]=0,s[1]=0,s[5]=u,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=f,s[14]=m,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,r,i,a,o){const s=this.elements,l=1/(t-e),u=1/(r-i),d=1/(o-a),h=(t+e)*l,f=(r+i)*u,m=(o+a)*d;return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-f,s[2]=0,s[6]=0,s[10]=-2*d,s[14]=-m,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}un.prototype.isMatrix4=!0;const Zd=new Se,yo=new un,kX=new Se(0,0,0),NX=new Se(1,1,1),Ml=new Se,uS=new Se,xa=new Se,oT=new un,sT=new Si;class ed{constructor(e=0,t=0,r=0,i=ed.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],d=i[9],h=i[2],f=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(qi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-qi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(s,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(qi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-qi(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(qi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,m));break;case"XZY":this._z=Math.asin(-qi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return oT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(oT,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return sT.setFromEuler(this),this.setFromQuaternion(sT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}ed.prototype.isEuler=!0;ed.DefaultOrder="XYZ";ed.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class O6{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let UX=0;const lT=new Se,$d=new Si,Bs=new un,dS=new Se,Pf=new Se,jX=new Se,GX=new Si,cT=new Se(1,0,0),uT=new Se(0,1,0),dT=new Se(0,0,1),HX={type:"added"},AT={type:"removed"};class n0 extends dl{constructor(){super(),Object.defineProperty(this,"id",{value:UX++}),this.uuid=Mo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n0.DefaultUp.clone();const e=new Se,t=new ed,r=new Si,i=new Se(1,1,1);function a(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(a),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new un},normalMatrix:{value:new Ir}}),this.matrix=new un,this.matrixWorld=new un,this.matrixAutoUpdate=n0.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new O6,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return $d.setFromAxisAngle(e,t),this.quaternion.multiply($d),this}rotateOnWorldAxis(e,t){return $d.setFromAxisAngle(e,t),this.quaternion.premultiply($d),this}rotateX(e){return this.rotateOnAxis(cT,e)}rotateY(e){return this.rotateOnAxis(uT,e)}rotateZ(e){return this.rotateOnAxis(dT,e)}translateOnAxis(e,t){return lT.copy(e).applyQuaternion(this.quaternion),this.position.add(lT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(cT,e)}translateY(e){return this.translateOnAxis(uT,e)}translateZ(e){return this.translateOnAxis(dT,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Bs.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?dS.copy(e):dS.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Pf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Bs.lookAt(Pf,dS,this.up):Bs.lookAt(dS,Pf,this.up),this.quaternion.setFromRotationMatrix(Bs),i&&(Bs.extractRotation(i.matrixWorld),$d.setFromRotationMatrix(Bs),this.quaternion.premultiply($d.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(HX)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(AT)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(AT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Bs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Bs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Bs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pf,e,jX),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pf,GX,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let a=0,o=i.length;a<o;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function a(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){const h=l[u];a(e.shapes,h)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,u=this.material.length;l<u;l++)s.push(a(e.materials,this.material[l]));i.material=s}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(a(e.animations,l))}}if(t){const s=o(e.geometries),l=o(e.materials),u=o(e.textures),d=o(e.images),h=o(e.shapes),f=o(e.skeletons),m=o(e.animations),g=o(e.nodes);s.length>0&&(r.geometries=s),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),m.length>0&&(r.animations=m),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(s){const l=[];for(const u in s){const d=s[u];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}n0.DefaultUp=new Se(0,1,0);n0.DefaultMatrixAutoUpdate=!0;n0.prototype.isObject3D=!0;const Eo=new Se,Ms=new Se,qx=new Se,Is=new Se,e1=new Se,t1=new Se,fT=new Se,Qx=new Se,Jx=new Se,Zx=new Se;class Lr{constructor(e=new Se,t=new Se,r=new Se){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Eo.subVectors(e,t),i.cross(Eo);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,r,i,a){Eo.subVectors(i,t),Ms.subVectors(r,t),qx.subVectors(e,t);const o=Eo.dot(Eo),s=Eo.dot(Ms),l=Eo.dot(qx),u=Ms.dot(Ms),d=Ms.dot(qx),h=o*u-s*s;if(h===0)return a.set(-2,-1,-1);const f=1/h,m=(u*l-s*d)*f,g=(o*d-s*l)*f;return a.set(1-m-g,g,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Is),Is.x>=0&&Is.y>=0&&Is.x+Is.y<=1}static getUV(e,t,r,i,a,o,s,l){return this.getBarycoord(e,t,r,i,Is),l.set(0,0),l.addScaledVector(a,Is.x),l.addScaledVector(o,Is.y),l.addScaledVector(s,Is.z),l}static isFrontFacing(e,t,r,i){return Eo.subVectors(r,t),Ms.subVectors(e,t),Eo.cross(Ms).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Eo.subVectors(this.c,this.b),Ms.subVectors(this.a,this.b),Eo.cross(Ms).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Lr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Lr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,a){return Lr.getUV(e,this.a,this.b,this.c,t,r,i,a)}containsPoint(e){return Lr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Lr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,a=this.c;let o,s;e1.subVectors(i,r),t1.subVectors(a,r),Qx.subVectors(e,r);const l=e1.dot(Qx),u=t1.dot(Qx);if(l<=0&&u<=0)return t.copy(r);Jx.subVectors(e,i);const d=e1.dot(Jx),h=t1.dot(Jx);if(d>=0&&h<=d)return t.copy(i);const f=l*h-d*u;if(f<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(r).addScaledVector(e1,o);Zx.subVectors(e,a);const m=e1.dot(Zx),g=t1.dot(Zx);if(g>=0&&m<=g)return t.copy(a);const _=m*u-l*g;if(_<=0&&u>=0&&g<=0)return s=u/(u-g),t.copy(r).addScaledVector(t1,s);const E=d*g-m*h;if(E<=0&&h-d>=0&&m-g>=0)return fT.subVectors(a,i),s=(h-d)/(h-d+(m-g)),t.copy(i).addScaledVector(fT,s);const x=1/(E+_+f);return o=_*x,s=f*x,t.copy(r).addScaledVector(e1,o).addScaledVector(t1,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let zX=0;class Qr extends dl{constructor(){super(),Object.defineProperty(this,"id",{value:zX++}),this.uuid=Mo(),this.name="",this.type="Material",this.fog=!0,this.blending=H1,this.side=Uh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=F6,this.blendDst=T6,this.blendEquation=v1,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=$w,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=gX,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=kx,this.stencilZFail=kx,this.stencilZPass=kx,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===D6;continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==H1&&(r.blending=this.blending),this.side!==Uh&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(a){const o=[];for(const s in a){const l=a[s];delete l.metadata,o.push(l)}return o}if(t){const a=i(e.textures),o=i(e.images);a.length>0&&(r.textures=a),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}Qr.prototype.isMaterial=!0;Qr.fromType=function(){return null};class Lu extends Qr{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=h_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Lu.prototype.isMeshBasicMaterial=!0;const R0=new Se,AS=new pt;class v0{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=Xh,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let i=0,a=e.length;i<a;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new Jt),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let i=0,a=e.length;i<a;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new pt),t[r++]=o.x,t[r++]=o.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let i=0,a=e.length;i<a;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new Se),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let i=0,a=e.length;i<a;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new x0),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)AS.fromBufferAttribute(this,t),AS.applyMatrix3(e),this.setXY(t,AS.x,AS.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)R0.fromBufferAttribute(this,t),R0.applyMatrix3(e),this.setXYZ(t,R0.x,R0.y,R0.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)R0.x=this.getX(t),R0.y=this.getY(t),R0.z=this.getZ(t),R0.applyMatrix4(e),this.setXYZ(t,R0.x,R0.y,R0.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)R0.x=this.getX(t),R0.y=this.getY(t),R0.z=this.getZ(t),R0.applyNormalMatrix(e),this.setXYZ(t,R0.x,R0.y,R0.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)R0.x=this.getX(t),R0.y=this.getY(t),R0.z=this.getZ(t),R0.transformDirection(e),this.setXYZ(t,R0.x,R0.y,R0.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Xh&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}v0.prototype.isBufferAttribute=!0;class k6 extends v0{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class N6 extends v0{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class WX extends v0{constructor(e,t,r){super(new Uint16Array(e),t,r)}}WX.prototype.isFloat16BufferAttribute=!0;class B0 extends v0{constructor(e,t,r){super(new Float32Array(e),t,r)}}let XX=0;const Xa=new un,$x=new n0,n1=new Se,va=new ho,Rf=new ho,ti=new Se;class y0 extends dl{constructor(){super(),Object.defineProperty(this,"id",{value:XX++}),this.uuid=Mo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(B6(e)?N6:k6)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new Ir().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Xa.makeRotationFromQuaternion(e),this.applyMatrix4(Xa),this}rotateX(e){return Xa.makeRotationX(e),this.applyMatrix4(Xa),this}rotateY(e){return Xa.makeRotationY(e),this.applyMatrix4(Xa),this}rotateZ(e){return Xa.makeRotationZ(e),this.applyMatrix4(Xa),this}translate(e,t,r){return Xa.makeTranslation(e,t,r),this.applyMatrix4(Xa),this}scale(e,t,r){return Xa.makeScale(e,t,r),this.applyMatrix4(Xa),this}lookAt(e){return $x.lookAt(e),$x.updateMatrix(),this.applyMatrix4($x.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(n1).negate(),this.translate(n1.x,n1.y,n1.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const a=e[r];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new B0(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ho);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Se(-1/0,-1/0,-1/0),new Se(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const a=t[r];va.setFromBufferAttribute(a),this.morphTargetsRelative?(ti.addVectors(this.boundingBox.min,va.min),this.boundingBox.expandByPoint(ti),ti.addVectors(this.boundingBox.max,va.max),this.boundingBox.expandByPoint(ti)):(this.boundingBox.expandByPoint(va.min),this.boundingBox.expandByPoint(va.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $u);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Se,1/0);return}if(e){const r=this.boundingSphere.center;if(va.setFromBufferAttribute(e),t)for(let a=0,o=t.length;a<o;a++){const s=t[a];Rf.setFromBufferAttribute(s),this.morphTargetsRelative?(ti.addVectors(va.min,Rf.min),va.expandByPoint(ti),ti.addVectors(va.max,Rf.max),va.expandByPoint(ti)):(va.expandByPoint(Rf.min),va.expandByPoint(Rf.max))}va.getCenter(r);let i=0;for(let a=0,o=e.count;a<o;a++)ti.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(ti));if(t)for(let a=0,o=t.length;a<o;a++){const s=t[a],l=this.morphTargetsRelative;for(let u=0,d=s.count;u<d;u++)ti.fromBufferAttribute(s,u),l&&(n1.fromBufferAttribute(e,u),ti.add(n1)),i=Math.max(i,r.distanceToSquared(ti))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,a=t.normal.array,o=t.uv.array,s=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new v0(new Float32Array(4*s),4));const l=this.getAttribute("tangent").array,u=[],d=[];for(let $=0;$<s;$++)u[$]=new Se,d[$]=new Se;const h=new Se,f=new Se,m=new Se,g=new pt,_=new pt,E=new pt,x=new Se,v=new Se;function C($,z,I){h.fromArray(i,$*3),f.fromArray(i,z*3),m.fromArray(i,I*3),g.fromArray(o,$*2),_.fromArray(o,z*2),E.fromArray(o,I*2),f.sub(h),m.sub(h),_.sub(g),E.sub(g);const q=1/(_.x*E.y-E.x*_.y);!isFinite(q)||(x.copy(f).multiplyScalar(E.y).addScaledVector(m,-_.y).multiplyScalar(q),v.copy(m).multiplyScalar(_.x).addScaledVector(f,-E.x).multiplyScalar(q),u[$].add(x),u[z].add(x),u[I].add(x),d[$].add(v),d[z].add(v),d[I].add(v))}let V=this.groups;V.length===0&&(V=[{start:0,count:r.length}]);for(let $=0,z=V.length;$<z;++$){const I=V[$],q=I.start,P=I.count;for(let ee=q,ue=q+P;ee<ue;ee+=3)C(r[ee+0],r[ee+1],r[ee+2])}const D=new Se,H=new Se,R=new Se,j=new Se;function te($){R.fromArray(a,$*3),j.copy(R);const z=u[$];D.copy(z),D.sub(R.multiplyScalar(R.dot(z))).normalize(),H.crossVectors(j,z);const q=H.dot(d[$])<0?-1:1;l[$*4]=D.x,l[$*4+1]=D.y,l[$*4+2]=D.z,l[$*4+3]=q}for(let $=0,z=V.length;$<z;++$){const I=V[$],q=I.start,P=I.count;for(let ee=q,ue=q+P;ee<ue;ee+=3)te(r[ee+0]),te(r[ee+1]),te(r[ee+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new v0(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,m=r.count;f<m;f++)r.setXYZ(f,0,0,0);const i=new Se,a=new Se,o=new Se,s=new Se,l=new Se,u=new Se,d=new Se,h=new Se;if(e)for(let f=0,m=e.count;f<m;f+=3){const g=e.getX(f+0),_=e.getX(f+1),E=e.getX(f+2);i.fromBufferAttribute(t,g),a.fromBufferAttribute(t,_),o.fromBufferAttribute(t,E),d.subVectors(o,a),h.subVectors(i,a),d.cross(h),s.fromBufferAttribute(r,g),l.fromBufferAttribute(r,_),u.fromBufferAttribute(r,E),s.add(d),l.add(d),u.add(d),r.setXYZ(g,s.x,s.y,s.z),r.setXYZ(_,l.x,l.y,l.z),r.setXYZ(E,u.x,u.y,u.z)}else for(let f=0,m=t.count;f<m;f+=3)i.fromBufferAttribute(t,f+0),a.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),d.subVectors(o,a),h.subVectors(i,a),d.cross(h),r.setXYZ(f+0,d.x,d.y,d.z),r.setXYZ(f+1,d.x,d.y,d.z),r.setXYZ(f+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(e.attributes[i]===void 0)continue;const o=r[i].array,s=e.attributes[i],l=s.array,u=s.itemSize*t,d=Math.min(l.length,o.length-u);for(let h=0,f=u;h<d;h++,f++)o[f]=l[h]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ti.fromBufferAttribute(e,t),ti.normalize(),e.setXYZ(t,ti.x,ti.y,ti.z)}toNonIndexed(){function e(s,l){const u=s.array,d=s.itemSize,h=s.normalized,f=new u.constructor(l.length*d);let m=0,g=0;for(let _=0,E=l.length;_<E;_++){s.isInterleavedBufferAttribute?m=l[_]*s.data.stride+s.offset:m=l[_]*d;for(let x=0;x<d;x++)f[g++]=u[m++]}return new v0(f,d,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new y0,r=this.index.array,i=this.attributes;for(const s in i){const l=i[s],u=e(l,r);t.setAttribute(s,u)}const a=this.morphAttributes;for(const s in a){const l=[],u=a[s];for(let d=0,h=u.length;d<h;d++){const f=u[d],m=e(f,r);l.push(m)}t.morphAttributes[s]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,l=o.length;s<l;s++){const u=o[s];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],d=[];for(let h=0,f=u.length;h<f;h++){const m=u[h];d.push(m.toJSON(e.data))}d.length>0&&(i[l]=d,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const d=i[u];this.setAttribute(u,d.clone(t))}const a=e.morphAttributes;for(const u in a){const d=[],h=a[u];for(let f=0,m=h.length;f<m;f++)d.push(h[f].clone(t));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,d=o.length;u<d;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}y0.prototype.isBufferGeometry=!0;const hT=new un,r1=new BA,ev=new $u,Il=new Se,Ol=new Se,kl=new Se,tv=new Se,nv=new Se,rv=new Se,fS=new Se,hS=new Se,pS=new Se,mS=new pt,SS=new pt,gS=new pt,iv=new Se,_S=new Se;class Mi extends n0{constructor(e=new y0,t=new Lu){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,i=this.material,a=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),ev.copy(r.boundingSphere),ev.applyMatrix4(a),e.ray.intersectsSphere(ev)===!1)||(hT.copy(a).invert(),r1.copy(e.ray).applyMatrix4(hT),r.boundingBox!==null&&r1.intersectsBox(r.boundingBox)===!1))return;let o;if(r.isBufferGeometry){const s=r.index,l=r.attributes.position,u=r.morphAttributes.position,d=r.morphTargetsRelative,h=r.attributes.uv,f=r.attributes.uv2,m=r.groups,g=r.drawRange;if(s!==null)if(Array.isArray(i))for(let _=0,E=m.length;_<E;_++){const x=m[_],v=i[x.materialIndex],C=Math.max(x.start,g.start),V=Math.min(s.count,Math.min(x.start+x.count,g.start+g.count));for(let D=C,H=V;D<H;D+=3){const R=s.getX(D),j=s.getX(D+1),te=s.getX(D+2);o=xS(this,v,e,r1,l,u,d,h,f,R,j,te),o&&(o.faceIndex=Math.floor(D/3),o.face.materialIndex=x.materialIndex,t.push(o))}}else{const _=Math.max(0,g.start),E=Math.min(s.count,g.start+g.count);for(let x=_,v=E;x<v;x+=3){const C=s.getX(x),V=s.getX(x+1),D=s.getX(x+2);o=xS(this,i,e,r1,l,u,d,h,f,C,V,D),o&&(o.faceIndex=Math.floor(x/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let _=0,E=m.length;_<E;_++){const x=m[_],v=i[x.materialIndex],C=Math.max(x.start,g.start),V=Math.min(l.count,Math.min(x.start+x.count,g.start+g.count));for(let D=C,H=V;D<H;D+=3){const R=D,j=D+1,te=D+2;o=xS(this,v,e,r1,l,u,d,h,f,R,j,te),o&&(o.faceIndex=Math.floor(D/3),o.face.materialIndex=x.materialIndex,t.push(o))}}else{const _=Math.max(0,g.start),E=Math.min(l.count,g.start+g.count);for(let x=_,v=E;x<v;x+=3){const C=x,V=x+1,D=x+2;o=xS(this,i,e,r1,l,u,d,h,f,C,V,D),o&&(o.faceIndex=Math.floor(x/3),t.push(o))}}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Mi.prototype.isMesh=!0;function KX(n,e,t,r,i,a,o,s){let l;if(e.side===Wr?l=r.intersectTriangle(o,a,i,!0,s):l=r.intersectTriangle(i,a,o,e.side!==Uu,s),l===null)return null;_S.copy(s),_S.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(_S);return u<t.near||u>t.far?null:{distance:u,point:_S.clone(),object:n}}function xS(n,e,t,r,i,a,o,s,l,u,d,h){Il.fromBufferAttribute(i,u),Ol.fromBufferAttribute(i,d),kl.fromBufferAttribute(i,h);const f=n.morphTargetInfluences;if(a&&f){fS.set(0,0,0),hS.set(0,0,0),pS.set(0,0,0);for(let g=0,_=a.length;g<_;g++){const E=f[g],x=a[g];E!==0&&(tv.fromBufferAttribute(x,u),nv.fromBufferAttribute(x,d),rv.fromBufferAttribute(x,h),o?(fS.addScaledVector(tv,E),hS.addScaledVector(nv,E),pS.addScaledVector(rv,E)):(fS.addScaledVector(tv.sub(Il),E),hS.addScaledVector(nv.sub(Ol),E),pS.addScaledVector(rv.sub(kl),E)))}Il.add(fS),Ol.add(hS),kl.add(pS)}n.isSkinnedMesh&&(n.boneTransform(u,Il),n.boneTransform(d,Ol),n.boneTransform(h,kl));const m=KX(n,e,t,r,Il,Ol,kl,iv);if(m){s&&(mS.fromBufferAttribute(s,u),SS.fromBufferAttribute(s,d),gS.fromBufferAttribute(s,h),m.uv=Lr.getUV(iv,Il,Ol,kl,mS,SS,gS,new pt)),l&&(mS.fromBufferAttribute(l,u),SS.fromBufferAttribute(l,d),gS.fromBufferAttribute(l,h),m.uv2=Lr.getUV(iv,Il,Ol,kl,mS,SS,gS,new pt));const g={a:u,b:d,c:h,normal:new Se,materialIndex:0};Lr.getNormal(Il,Ol,kl,g.normal),m.face=g}return m}class Ip extends y0{constructor(e=1,t=1,r=1,i=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:a,depthSegments:o};const s=this;i=Math.floor(i),a=Math.floor(a),o=Math.floor(o);const l=[],u=[],d=[],h=[];let f=0,m=0;g("z","y","x",-1,-1,r,t,e,o,a,0),g("z","y","x",1,-1,r,t,-e,o,a,1),g("x","z","y",1,1,e,r,t,i,o,2),g("x","z","y",1,-1,e,r,-t,i,o,3),g("x","y","z",1,-1,e,t,r,i,a,4),g("x","y","z",-1,-1,e,t,-r,i,a,5),this.setIndex(l),this.setAttribute("position",new B0(u,3)),this.setAttribute("normal",new B0(d,3)),this.setAttribute("uv",new B0(h,2));function g(_,E,x,v,C,V,D,H,R,j,te){const $=V/R,z=D/j,I=V/2,q=D/2,P=H/2,ee=R+1,ue=j+1;let U=0,O=0;const G=new Se;for(let ne=0;ne<ue;ne++){const se=ne*z-q;for(let ie=0;ie<ee;ie++){const Re=ie*$-I;G[_]=Re*v,G[E]=se*C,G[x]=P,u.push(G.x,G.y,G.z),G[_]=0,G[E]=0,G[x]=H>0?1:-1,d.push(G.x,G.y,G.z),h.push(ie/R),h.push(1-ne/j),U+=1}}for(let ne=0;ne<j;ne++)for(let se=0;se<R;se++){const ie=f+se+ee*ne,Re=f+se+ee*(ne+1),Be=f+(se+1)+ee*(ne+1),Te=f+(se+1)+ee*ne;l.push(ie,Re,Te),l.push(Re,Be,Te),O+=6}s.addGroup(m,O,te),m+=O,f+=U}}static fromJSON(e){return new Ip(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function uA(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Ri(n){const e={};for(let t=0;t<n.length;t++){const r=uA(n[t]);for(const i in r)e[i]=r[i]}return e}const YX={clone:uA,merge:Ri};var qX=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,QX=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Uo extends Qr{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=qX,this.fragmentShader=QX,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=uA(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}Uo.prototype.isShaderMaterial=!0;class hE extends n0{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new un,this.projectionMatrix=new un,this.projectionMatrixInverse=new un}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}hE.prototype.isCamera=!0;class mi extends hE{constructor(e=50,t=1,r=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Kh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(X1*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Kh*2*Math.atan(Math.tan(X1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,a,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(X1*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,a=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;a+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const s=this.filmOffset;s!==0&&(a+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}mi.prototype.isPerspectiveCamera=!0;const i1=90,a1=1;class pE extends n0{constructor(e,t,r){if(super(),this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const i=new mi(i1,a1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Se(1,0,0)),this.add(i);const a=new mi(i1,a1,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Se(-1,0,0)),this.add(a);const o=new mi(i1,a1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Se(0,1,0)),this.add(o);const s=new mi(i1,a1,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new Se(0,-1,0)),this.add(s);const l=new mi(i1,a1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Se(0,0,1)),this.add(l);const u=new mi(i1,a1,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new Se(0,0,-1)),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,a,o,s,l,u]=this.children,d=e.xr.enabled,h=e.getRenderTarget();e.xr.enabled=!1;const f=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,a),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,s),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=f,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(h),e.xr.enabled=d,r.texture.needsPMREMUpdate=!0}}class S_ extends qr{constructor(e,t,r,i,a,o,s,l,u,d){e=e!==void 0?e:[],t=t!==void 0?t:sA,super(e,t,r,i,a,o,s,l,u,d),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}S_.prototype.isCubeTexture=!0;class U6 extends ba{constructor(e,t={}){super(e,e,t);const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new S_(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:pi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Qi,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ip(5,5,5),a=new Uo({name:"CubemapFromEquirect",uniforms:uA(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Wr,blending:rc});a.uniforms.tEquirect.value=t;const o=new Mi(i,a),s=t.minFilter;return t.minFilter===Mp&&(t.minFilter=pi),new pE(1,10,this).update(e,o),t.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const a=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(a)}}U6.prototype.isWebGLCubeRenderTarget=!0;const av=new Se,JX=new Se,ZX=new Ir;class zs{constructor(e=new Se(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=av.subVectors(r,t).cross(JX.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(av),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(r).multiplyScalar(a).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||ZX.getNormalMatrix(e),i=this.coplanarPoint(av).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}zs.prototype.isPlane=!0;const o1=new $u,vS=new Se;class g_{constructor(e=new zs,t=new zs,r=new zs,i=new zs,a=new zs,o=new zs){this.planes=[e,t,r,i,a,o]}set(e,t,r,i,a,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(r),s[3].copy(i),s[4].copy(a),s[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],d=r[6],h=r[7],f=r[8],m=r[9],g=r[10],_=r[11],E=r[12],x=r[13],v=r[14],C=r[15];return t[0].setComponents(s-i,h-l,_-f,C-E).normalize(),t[1].setComponents(s+i,h+l,_+f,C+E).normalize(),t[2].setComponents(s+a,h+u,_+m,C+x).normalize(),t[3].setComponents(s-a,h-u,_-m,C-x).normalize(),t[4].setComponents(s-o,h-d,_-g,C-v).normalize(),t[5].setComponents(s+o,h+d,_+g,C+v).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),o1.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(o1)}intersectsSprite(e){return o1.center.set(0,0,0),o1.radius=.7071067811865476,o1.applyMatrix4(e.matrixWorld),this.intersectsSphere(o1)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(vS.x=i.normal.x>0?e.max.x:e.min.x,vS.y=i.normal.y>0?e.max.y:e.min.y,vS.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(vS)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function j6(){let n=null,e=!1,t=null,r=null;function i(a,o){t(a,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function $X(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,d){const h=u.array,f=u.usage,m=n.createBuffer();n.bindBuffer(d,m),n.bufferData(d,h,f),u.onUploadCallback();let g;if(h instanceof Float32Array)g=5126;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(h instanceof Int16Array)g=5122;else if(h instanceof Uint32Array)g=5125;else if(h instanceof Int32Array)g=5124;else if(h instanceof Int8Array)g=5120;else if(h instanceof Uint8Array)g=5121;else if(h instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:m,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version}}function a(u,d,h){const f=d.array,m=d.updateRange;n.bindBuffer(h,u),m.count===-1?n.bufferSubData(h,0,f):(t?n.bufferSubData(h,m.offset*f.BYTES_PER_ELEMENT,f,m.offset,m.count):n.bufferSubData(h,m.offset*f.BYTES_PER_ELEMENT,f.subarray(m.offset,m.offset+m.count)),m.count=-1)}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function s(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=r.get(u);d&&(n.deleteBuffer(d.buffer),r.delete(u))}function l(u,d){if(u.isGLBufferAttribute){const f=r.get(u);(!f||f.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);h===void 0?r.set(u,i(u,d)):h.version<u.version&&(a(h.buffer,u,d),h.version=u.version)}return{get:o,remove:s,update:l}}class mE extends y0{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const a=e/2,o=t/2,s=Math.floor(r),l=Math.floor(i),u=s+1,d=l+1,h=e/s,f=t/l,m=[],g=[],_=[],E=[];for(let x=0;x<d;x++){const v=x*f-o;for(let C=0;C<u;C++){const V=C*h-a;g.push(V,-v,0),_.push(0,0,1),E.push(C/s),E.push(1-x/l)}}for(let x=0;x<l;x++)for(let v=0;v<s;v++){const C=v+u*x,V=v+u*(x+1),D=v+1+u*(x+1),H=v+1+u*x;m.push(C,V,H),m.push(V,D,H)}this.setIndex(m),this.setAttribute("position",new B0(g,3)),this.setAttribute("normal",new B0(_,3)),this.setAttribute("uv",new B0(E,2))}static fromJSON(e){return new mE(e.width,e.height,e.widthSegments,e.heightSegments)}}var eK=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,tK=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nK=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,rK=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,iK=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aK=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,oK="vec3 transformed = vec3( position );",sK=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,lK=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,cK=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,uK=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,dK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,AK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,fK=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,hK=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,pK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,mK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,SK=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,gK=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,_K=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,xK=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,vK=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,wK=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,yK=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,EK=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,CK="gl_FragColor = linearToOutputTexel( gl_FragColor );",VK=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,DK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,FK=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,TK=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,bK=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,PK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,RK=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,LK=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,BK=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,MK=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,IK=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,OK=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,kK=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,NK=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,UK=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,jK=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,GK=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,HK=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,zK=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,WK=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,XK=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,KK=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,YK=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,qK=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,QK=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,JK=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,ZK=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$K=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,eY=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,tY=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,nY=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,rY=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,iY=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,aY=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,oY=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,sY=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ]
		#endif
	}
#endif`,lY=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,cY=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			float texelIndex = float( vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,uY=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,dY=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,AY=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,fY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,pY=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,mY=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,SY=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,gY=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,_Y=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,xY=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,vY=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,wY=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,yY=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,EY=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,CY=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,VY=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,DY=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,FY=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,TY=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,bY=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,PY=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,RY=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,LY=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,BY=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,MY=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,IY=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,OY=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,kY=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,NY=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,UY=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,jY=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,GY=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,HY=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,zY=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,WY=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,XY=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,KY=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,YY=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const qY=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,QY=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,JY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ZY=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,$Y=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,eq=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,tq=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,nq=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,rq=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,iq=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,aq=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oq=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,sq=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,lq=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cq=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uq=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dq=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Aq=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fq=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,hq=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,pq=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mq=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Sq=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,gq=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_q=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xq=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vq=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,wq=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yq=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Eq=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Cq=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Vq=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,In={alphamap_fragment:eK,alphamap_pars_fragment:tK,alphatest_fragment:nK,alphatest_pars_fragment:rK,aomap_fragment:iK,aomap_pars_fragment:aK,begin_vertex:oK,beginnormal_vertex:sK,bsdfs:lK,bumpmap_pars_fragment:cK,clipping_planes_fragment:uK,clipping_planes_pars_fragment:dK,clipping_planes_pars_vertex:AK,clipping_planes_vertex:fK,color_fragment:hK,color_pars_fragment:pK,color_pars_vertex:mK,color_vertex:SK,common:gK,cube_uv_reflection_fragment:_K,defaultnormal_vertex:xK,displacementmap_pars_vertex:vK,displacementmap_vertex:wK,emissivemap_fragment:yK,emissivemap_pars_fragment:EK,encodings_fragment:CK,encodings_pars_fragment:VK,envmap_fragment:DK,envmap_common_pars_fragment:FK,envmap_pars_fragment:TK,envmap_pars_vertex:bK,envmap_physical_pars_fragment:jK,envmap_vertex:PK,fog_vertex:RK,fog_pars_vertex:LK,fog_fragment:BK,fog_pars_fragment:MK,gradientmap_pars_fragment:IK,lightmap_fragment:OK,lightmap_pars_fragment:kK,lights_lambert_vertex:NK,lights_pars_begin:UK,lights_toon_fragment:GK,lights_toon_pars_fragment:HK,lights_phong_fragment:zK,lights_phong_pars_fragment:WK,lights_physical_fragment:XK,lights_physical_pars_fragment:KK,lights_fragment_begin:YK,lights_fragment_maps:qK,lights_fragment_end:QK,logdepthbuf_fragment:JK,logdepthbuf_pars_fragment:ZK,logdepthbuf_pars_vertex:$K,logdepthbuf_vertex:eY,map_fragment:tY,map_pars_fragment:nY,map_particle_fragment:rY,map_particle_pars_fragment:iY,metalnessmap_fragment:aY,metalnessmap_pars_fragment:oY,morphcolor_vertex:sY,morphnormal_vertex:lY,morphtarget_pars_vertex:cY,morphtarget_vertex:uY,normal_fragment_begin:dY,normal_fragment_maps:AY,normal_pars_fragment:fY,normal_pars_vertex:hY,normal_vertex:pY,normalmap_pars_fragment:mY,clearcoat_normal_fragment_begin:SY,clearcoat_normal_fragment_maps:gY,clearcoat_pars_fragment:_Y,output_fragment:xY,packing:vY,premultiplied_alpha_fragment:wY,project_vertex:yY,dithering_fragment:EY,dithering_pars_fragment:CY,roughnessmap_fragment:VY,roughnessmap_pars_fragment:DY,shadowmap_pars_fragment:FY,shadowmap_pars_vertex:TY,shadowmap_vertex:bY,shadowmask_pars_fragment:PY,skinbase_vertex:RY,skinning_pars_vertex:LY,skinning_vertex:BY,skinnormal_vertex:MY,specularmap_fragment:IY,specularmap_pars_fragment:OY,tonemapping_fragment:kY,tonemapping_pars_fragment:NY,transmission_fragment:UY,transmission_pars_fragment:jY,uv_pars_fragment:GY,uv_pars_vertex:HY,uv_vertex:zY,uv2_pars_fragment:WY,uv2_pars_vertex:XY,uv2_vertex:KY,worldpos_vertex:YY,background_vert:qY,background_frag:QY,cube_vert:JY,cube_frag:ZY,depth_vert:$Y,depth_frag:eq,distanceRGBA_vert:tq,distanceRGBA_frag:nq,equirect_vert:rq,equirect_frag:iq,linedashed_vert:aq,linedashed_frag:oq,meshbasic_vert:sq,meshbasic_frag:lq,meshlambert_vert:cq,meshlambert_frag:uq,meshmatcap_vert:dq,meshmatcap_frag:Aq,meshnormal_vert:fq,meshnormal_frag:hq,meshphong_vert:pq,meshphong_frag:mq,meshphysical_vert:Sq,meshphysical_frag:gq,meshtoon_vert:_q,meshtoon_frag:xq,points_vert:vq,points_frag:wq,shadow_vert:yq,shadow_frag:Eq,sprite_vert:Cq,sprite_frag:Vq},It={common:{diffuse:{value:new Jt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ir},uv2Transform:{value:new Ir},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new pt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Jt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Jt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ir}},sprite:{diffuse:{value:new Jt(16777215)},opacity:{value:1},center:{value:new pt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ir}}},ss={basic:{uniforms:Ri([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.fog]),vertexShader:In.meshbasic_vert,fragmentShader:In.meshbasic_frag},lambert:{uniforms:Ri([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.fog,It.lights,{emissive:{value:new Jt(0)}}]),vertexShader:In.meshlambert_vert,fragmentShader:In.meshlambert_frag},phong:{uniforms:Ri([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.fog,It.lights,{emissive:{value:new Jt(0)},specular:{value:new Jt(1118481)},shininess:{value:30}}]),vertexShader:In.meshphong_vert,fragmentShader:In.meshphong_frag},standard:{uniforms:Ri([It.common,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.roughnessmap,It.metalnessmap,It.fog,It.lights,{emissive:{value:new Jt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:In.meshphysical_vert,fragmentShader:In.meshphysical_frag},toon:{uniforms:Ri([It.common,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.gradientmap,It.fog,It.lights,{emissive:{value:new Jt(0)}}]),vertexShader:In.meshtoon_vert,fragmentShader:In.meshtoon_frag},matcap:{uniforms:Ri([It.common,It.bumpmap,It.normalmap,It.displacementmap,It.fog,{matcap:{value:null}}]),vertexShader:In.meshmatcap_vert,fragmentShader:In.meshmatcap_frag},points:{uniforms:Ri([It.points,It.fog]),vertexShader:In.points_vert,fragmentShader:In.points_frag},dashed:{uniforms:Ri([It.common,It.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:In.linedashed_vert,fragmentShader:In.linedashed_frag},depth:{uniforms:Ri([It.common,It.displacementmap]),vertexShader:In.depth_vert,fragmentShader:In.depth_frag},normal:{uniforms:Ri([It.common,It.bumpmap,It.normalmap,It.displacementmap,{opacity:{value:1}}]),vertexShader:In.meshnormal_vert,fragmentShader:In.meshnormal_frag},sprite:{uniforms:Ri([It.sprite,It.fog]),vertexShader:In.sprite_vert,fragmentShader:In.sprite_frag},background:{uniforms:{uvTransform:{value:new Ir},t2D:{value:null}},vertexShader:In.background_vert,fragmentShader:In.background_frag},cube:{uniforms:Ri([It.envmap,{opacity:{value:1}}]),vertexShader:In.cube_vert,fragmentShader:In.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:In.equirect_vert,fragmentShader:In.equirect_frag},distanceRGBA:{uniforms:Ri([It.common,It.displacementmap,{referencePosition:{value:new Se},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:In.distanceRGBA_vert,fragmentShader:In.distanceRGBA_frag},shadow:{uniforms:Ri([It.lights,It.fog,{color:{value:new Jt(0)},opacity:{value:1}}]),vertexShader:In.shadow_vert,fragmentShader:In.shadow_frag}};ss.physical={uniforms:Ri([ss.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new pt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Jt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new pt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Jt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Jt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:In.meshphysical_vert,fragmentShader:In.meshphysical_frag};function Dq(n,e,t,r,i,a){const o=new Jt(0);let s=i===!0?0:1,l,u,d=null,h=0,f=null;function m(_,E){let x=!1,v=E.isScene===!0?E.background:null;v&&v.isTexture&&(v=e.get(v));const C=n.xr,V=C.getSession&&C.getSession();V&&V.environmentBlendMode==="additive"&&(v=null),v===null?g(o,s):v&&v.isColor&&(g(v,1),x=!0),(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||v.mapping===p_)?(u===void 0&&(u=new Mi(new Ip(1,1,1),new Uo({name:"BackgroundCubeMaterial",uniforms:uA(ss.cube.uniforms),vertexShader:ss.cube.vertexShader,fragmentShader:ss.cube.fragmentShader,side:Wr,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(D,H,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=v,u.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,(d!==v||h!==v.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=v,h=v.version,f=n.toneMapping),_.unshift(u,u.geometry,u.material,0,0,null)):v&&v.isTexture&&(l===void 0&&(l=new Mi(new mE(2,2),new Uo({name:"BackgroundMaterial",uniforms:uA(ss.background.uniforms),vertexShader:ss.background.vertexShader,fragmentShader:ss.background.fragmentShader,side:Uh,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=v,v.matrixAutoUpdate===!0&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),(d!==v||h!==v.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,d=v,h=v.version,f=n.toneMapping),_.unshift(l,l.geometry,l.material,0,0,null))}function g(_,E){t.buffers.color.setClear(_.r,_.g,_.b,E,a)}return{getClearColor:function(){return o},setClearColor:function(_,E=1){o.set(_),s=E,g(o,s)},getClearAlpha:function(){return s},setClearAlpha:function(_){s=_,g(o,s)},render:m}}function Fq(n,e,t,r){const i=n.getParameter(34921),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||a!==null,s={},l=_(null);let u=l;function d(q,P,ee,ue,U){let O=!1;if(o){const G=g(ue,ee,P);u!==G&&(u=G,f(u.object)),O=E(ue,U),O&&x(ue,U)}else{const G=P.wireframe===!0;(u.geometry!==ue.id||u.program!==ee.id||u.wireframe!==G)&&(u.geometry=ue.id,u.program=ee.id,u.wireframe=G,O=!0)}q.isInstancedMesh===!0&&(O=!0),U!==null&&t.update(U,34963),O&&(R(q,P,ee,ue),U!==null&&n.bindBuffer(34963,t.get(U).buffer))}function h(){return r.isWebGL2?n.createVertexArray():a.createVertexArrayOES()}function f(q){return r.isWebGL2?n.bindVertexArray(q):a.bindVertexArrayOES(q)}function m(q){return r.isWebGL2?n.deleteVertexArray(q):a.deleteVertexArrayOES(q)}function g(q,P,ee){const ue=ee.wireframe===!0;let U=s[q.id];U===void 0&&(U={},s[q.id]=U);let O=U[P.id];O===void 0&&(O={},U[P.id]=O);let G=O[ue];return G===void 0&&(G=_(h()),O[ue]=G),G}function _(q){const P=[],ee=[],ue=[];for(let U=0;U<i;U++)P[U]=0,ee[U]=0,ue[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:ee,attributeDivisors:ue,object:q,attributes:{},index:null}}function E(q,P){const ee=u.attributes,ue=q.attributes;let U=0;for(const O in ue){const G=ee[O],ne=ue[O];if(G===void 0||G.attribute!==ne||G.data!==ne.data)return!0;U++}return u.attributesNum!==U||u.index!==P}function x(q,P){const ee={},ue=q.attributes;let U=0;for(const O in ue){const G=ue[O],ne={};ne.attribute=G,G.data&&(ne.data=G.data),ee[O]=ne,U++}u.attributes=ee,u.attributesNum=U,u.index=P}function v(){const q=u.newAttributes;for(let P=0,ee=q.length;P<ee;P++)q[P]=0}function C(q){V(q,0)}function V(q,P){const ee=u.newAttributes,ue=u.enabledAttributes,U=u.attributeDivisors;ee[q]=1,ue[q]===0&&(n.enableVertexAttribArray(q),ue[q]=1),U[q]!==P&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](q,P),U[q]=P)}function D(){const q=u.newAttributes,P=u.enabledAttributes;for(let ee=0,ue=P.length;ee<ue;ee++)P[ee]!==q[ee]&&(n.disableVertexAttribArray(ee),P[ee]=0)}function H(q,P,ee,ue,U,O){r.isWebGL2===!0&&(ee===5124||ee===5125)?n.vertexAttribIPointer(q,P,ee,U,O):n.vertexAttribPointer(q,P,ee,ue,U,O)}function R(q,P,ee,ue){if(r.isWebGL2===!1&&(q.isInstancedMesh||ue.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;v();const U=ue.attributes,O=ee.getAttributes(),G=P.defaultAttributeValues;for(const ne in O){const se=O[ne];if(se.location>=0){let ie=U[ne];if(ie===void 0&&(ne==="instanceMatrix"&&q.instanceMatrix&&(ie=q.instanceMatrix),ne==="instanceColor"&&q.instanceColor&&(ie=q.instanceColor)),ie!==void 0){const Re=ie.normalized,Be=ie.itemSize,Te=t.get(ie);if(Te===void 0)continue;const ye=Te.buffer,We=Te.type,at=Te.bytesPerElement;if(ie.isInterleavedBufferAttribute){const Ke=ie.data,tt=Ke.stride,lt=ie.offset;if(Ke.isInstancedInterleavedBuffer){for(let Ie=0;Ie<se.locationSize;Ie++)V(se.location+Ie,Ke.meshPerAttribute);q.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=Ke.meshPerAttribute*Ke.count)}else for(let Ie=0;Ie<se.locationSize;Ie++)C(se.location+Ie);n.bindBuffer(34962,ye);for(let Ie=0;Ie<se.locationSize;Ie++)H(se.location+Ie,Be/se.locationSize,We,Re,tt*at,(lt+Be/se.locationSize*Ie)*at)}else{if(ie.isInstancedBufferAttribute){for(let Ke=0;Ke<se.locationSize;Ke++)V(se.location+Ke,ie.meshPerAttribute);q.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let Ke=0;Ke<se.locationSize;Ke++)C(se.location+Ke);n.bindBuffer(34962,ye);for(let Ke=0;Ke<se.locationSize;Ke++)H(se.location+Ke,Be/se.locationSize,We,Re,Be*at,Be/se.locationSize*Ke*at)}}else if(G!==void 0){const Re=G[ne];if(Re!==void 0)switch(Re.length){case 2:n.vertexAttrib2fv(se.location,Re);break;case 3:n.vertexAttrib3fv(se.location,Re);break;case 4:n.vertexAttrib4fv(se.location,Re);break;default:n.vertexAttrib1fv(se.location,Re)}}}}D()}function j(){z();for(const q in s){const P=s[q];for(const ee in P){const ue=P[ee];for(const U in ue)m(ue[U].object),delete ue[U];delete P[ee]}delete s[q]}}function te(q){if(s[q.id]===void 0)return;const P=s[q.id];for(const ee in P){const ue=P[ee];for(const U in ue)m(ue[U].object),delete ue[U];delete P[ee]}delete s[q.id]}function $(q){for(const P in s){const ee=s[P];if(ee[q.id]===void 0)continue;const ue=ee[q.id];for(const U in ue)m(ue[U].object),delete ue[U];delete ee[q.id]}}function z(){I(),u!==l&&(u=l,f(u.object))}function I(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:z,resetDefaultState:I,dispose:j,releaseStatesOfGeometry:te,releaseStatesOfProgram:$,initAttributes:v,enableAttribute:C,disableUnusedAttributes:D}}function Tq(n,e,t,r){const i=r.isWebGL2;let a;function o(u){a=u}function s(u,d){n.drawArrays(a,u,d),t.update(d,a,1)}function l(u,d,h){if(h===0)return;let f,m;if(i)f=n,m="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[m](a,u,d,h),t.update(d,a,h)}this.setMode=o,this.render=s,this.renderInstances=l}function bq(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(R){if(R==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let s=t.precision!==void 0?t.precision:"highp";const l=a(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const u=o||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,h=n.getParameter(34930),f=n.getParameter(35660),m=n.getParameter(3379),g=n.getParameter(34076),_=n.getParameter(34921),E=n.getParameter(36347),x=n.getParameter(36348),v=n.getParameter(36349),C=f>0,V=o||e.has("OES_texture_float"),D=C&&V,H=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:g,maxAttributes:_,maxVertexUniforms:E,maxVaryings:x,maxFragmentUniforms:v,vertexTextures:C,floatFragmentTextures:V,floatVertexTextures:D,maxSamples:H}}function Pq(n){const e=this;let t=null,r=0,i=!1,a=!1;const o=new zs,s=new Ir,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f,m){const g=h.length!==0||f||r!==0||i;return i=f,t=d(h,m,0),r=h.length,g},this.beginShadows=function(){a=!0,d(null)},this.endShadows=function(){a=!1,u()},this.setState=function(h,f,m){const g=h.clippingPlanes,_=h.clipIntersection,E=h.clipShadows,x=n.get(h);if(!i||g===null||g.length===0||a&&!E)a?d(null):u();else{const v=a?0:r,C=v*4;let V=x.clippingState||null;l.value=V,V=d(g,f,C,m);for(let D=0;D!==C;++D)V[D]=t[D];x.clippingState=V,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=v}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(h,f,m,g){const _=h!==null?h.length:0;let E=null;if(_!==0){if(E=l.value,g!==!0||E===null){const x=m+_*4,v=f.matrixWorldInverse;s.getNormalMatrix(v),(E===null||E.length<x)&&(E=new Float32Array(x));for(let C=0,V=m;C!==_;++C,V+=4)o.copy(h[C]).applyMatrix4(v,s),o.normal.toArray(E,V),E[V+3]=o.constant}l.value=E,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,E}}function Rq(n){let e=new WeakMap;function t(o,s){return s===ey?o.mapping=sA:s===ty&&(o.mapping=lA),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const s=o.mapping;if(s===ey||s===ty)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new U6(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const s=o.target;s.removeEventListener("dispose",i);const l=e.get(s);l!==void 0&&(e.delete(s),l.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}class SE extends hE{constructor(e=-1,t=1,r=1,i=-1,a=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,o=r+e,s=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,o=a+u*this.view.width,s-=d*this.view.offsetY,l=s-d*this.view.height}this.projectionMatrix.makeOrthographic(a,o,s,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}SE.prototype.isOrthographicCamera=!0;const V1=4,pT=[.125,.215,.35,.446,.526,.582],gu=20,ov=new SE,mT=new Jt;let sv=null;const fu=(1+Math.sqrt(5))/2,s1=1/fu,ST=[new Se(1,1,1),new Se(-1,1,1),new Se(1,1,-1),new Se(-1,1,-1),new Se(0,fu,s1),new Se(0,fu,-s1),new Se(s1,0,fu),new Se(-s1,0,fu),new Se(fu,s1,0),new Se(-fu,s1,0)];class gT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){sv=this._renderer.getRenderTarget(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,i,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=vT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=xT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(sv),e.scissorTest=!1,wS(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===sA||e.mapping===lA?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),sv=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize-32,r={magFilter:pi,minFilter:pi,generateMipmaps:!1,type:z1,format:Qi,encoding:gc,depthBuffer:!1},i=_T(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_T(e,t,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Lq(a)),this._blurMaterial=Bq(a,e,t)}return i}_compileMaterial(e){const t=new Mi(this._lodPlanes[0],e);this._renderer.compile(t,ov)}_sceneToCubeUV(e,t,r,i){const s=new mi(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,f=d.toneMapping;d.getClearColor(mT),d.toneMapping=ic,d.autoClear=!1;const m=new Lu({name:"PMREM.Background",side:Wr,depthWrite:!1,depthTest:!1}),g=new Mi(new Ip,m);let _=!1;const E=e.background;E?E.isColor&&(m.color.copy(E),e.background=null,_=!0):(m.color.copy(mT),_=!0);for(let x=0;x<6;x++){const v=x%3;v===0?(s.up.set(0,l[x],0),s.lookAt(u[x],0,0)):v===1?(s.up.set(0,0,l[x]),s.lookAt(0,u[x],0)):(s.up.set(0,l[x],0),s.lookAt(0,0,u[x]));const C=this._cubeSize;wS(i,v*C,x>2?C:0,C,C),d.setRenderTarget(i),_&&d.render(g,s),d.render(e,s)}g.geometry.dispose(),g.material.dispose(),d.toneMapping=f,d.autoClear=h,e.background=E}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===sA||e.mapping===lA;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=vT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=xT());const a=i?this._cubemapMaterial:this._equirectMaterial,o=new Mi(this._lodPlanes[0],a),s=a.uniforms;s.envMap.value=e;const l=this._cubeSize;wS(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,ov)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=ST[(i-1)%ST.length];this._blur(e,i-1,i,a,o)}t.autoClear=r}_blur(e,t,r,i,a){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",a),this._halfBlur(o,e,r,r,i,"longitudinal",a)}_halfBlur(e,t,r,i,a,o,s){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=new Mi(this._lodPlanes[i],u),f=u.uniforms,m=this._sizeLods[r]-1,g=isFinite(a)?Math.PI/(2*m):2*Math.PI/(2*gu-1),_=a/g,E=isFinite(a)?1+Math.floor(d*_):gu;E>gu&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${gu}`);const x=[];let v=0;for(let R=0;R<gu;++R){const j=R/_,te=Math.exp(-j*j/2);x.push(te),R===0?v+=te:R<E&&(v+=2*te)}for(let R=0;R<x.length;R++)x[R]=x[R]/v;f.envMap.value=e.texture,f.samples.value=E,f.weights.value=x,f.latitudinal.value=o==="latitudinal",s&&(f.poleAxis.value=s);const{_lodMax:C}=this;f.dTheta.value=g,f.mipInt.value=C-r;const V=this._sizeLods[i],D=3*V*(i>C-V1?i-C+V1:0),H=4*(this._cubeSize-V);wS(t,D,H,3*V,2*V),l.setRenderTarget(t),l.render(h,ov)}}function Lq(n){const e=[],t=[],r=[];let i=n;const a=n-V1+1+pT.length;for(let o=0;o<a;o++){const s=Math.pow(2,i);t.push(s);let l=1/s;o>n-V1?l=pT[o-n+V1-1]:o===0&&(l=0),r.push(l);const u=1/(s-1),d=-u/2,h=1+u/2,f=[d,d,h,d,h,h,d,d,h,h,d,h],m=6,g=6,_=3,E=2,x=1,v=new Float32Array(_*g*m),C=new Float32Array(E*g*m),V=new Float32Array(x*g*m);for(let H=0;H<m;H++){const R=H%3*2/3-1,j=H>2?0:-1,te=[R,j,0,R+2/3,j,0,R+2/3,j+1,0,R,j,0,R+2/3,j+1,0,R,j+1,0];v.set(te,_*g*H),C.set(f,E*g*H);const $=[H,H,H,H,H,H];V.set($,x*g*H)}const D=new y0;D.setAttribute("position",new v0(v,_)),D.setAttribute("uv",new v0(C,E)),D.setAttribute("faceIndex",new v0(V,x)),e.push(D),i>V1&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function _T(n,e,t){const r=new ba(n,e,t);return r.texture.mapping=p_,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function wS(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function Bq(n,e,t){const r=new Float32Array(gu),i=new Se(0,1,0);return new Uo({name:"SphericalGaussianBlur",defines:{n:gu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:gE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:rc,depthTest:!1,depthWrite:!1})}function xT(){return new Uo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:gE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:rc,depthTest:!1,depthWrite:!1})}function vT(){return new Uo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:gE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:rc,depthTest:!1,depthWrite:!1})}function gE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Mq(n){let e=new WeakMap,t=null;function r(s){if(s&&s.isTexture){const l=s.mapping,u=l===ey||l===ty,d=l===sA||l===lA;if(u||d)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let h=e.get(s);return t===null&&(t=new gT(n)),h=u?t.fromEquirectangular(s,h):t.fromCubemap(s,h),e.set(s,h),h.texture}else{if(e.has(s))return e.get(s).texture;{const h=s.image;if(u&&h&&h.height>0||d&&h&&i(h)){t===null&&(t=new gT(n));const f=u?t.fromEquirectangular(s):t.fromCubemap(s);return e.set(s,f),s.addEventListener("dispose",a),f.texture}else return null}}}return s}function i(s){let l=0;const u=6;for(let d=0;d<u;d++)s[d]!==void 0&&l++;return l===u}function a(s){const l=s.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function Iq(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Oq(n,e,t,r){const i={},a=new WeakMap;function o(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const g in f.attributes)e.remove(f.attributes[g]);f.removeEventListener("dispose",o),delete i[f.id];const m=a.get(f);m&&(e.remove(m),a.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function s(h,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,t.memory.geometries++),f}function l(h){const f=h.attributes;for(const g in f)e.update(f[g],34962);const m=h.morphAttributes;for(const g in m){const _=m[g];for(let E=0,x=_.length;E<x;E++)e.update(_[E],34962)}}function u(h){const f=[],m=h.index,g=h.attributes.position;let _=0;if(m!==null){const v=m.array;_=m.version;for(let C=0,V=v.length;C<V;C+=3){const D=v[C+0],H=v[C+1],R=v[C+2];f.push(D,H,H,R,R,D)}}else{const v=g.array;_=g.version;for(let C=0,V=v.length/3-1;C<V;C+=3){const D=C+0,H=C+1,R=C+2;f.push(D,H,H,R,R,D)}}const E=new(B6(f)?N6:k6)(f,1);E.version=_;const x=a.get(h);x&&e.remove(x),a.set(h,E)}function d(h){const f=a.get(h);if(f){const m=h.index;m!==null&&f.version<m.version&&u(h)}else u(h);return a.get(h)}return{get:s,update:l,getWireframeAttribute:d}}function kq(n,e,t,r){const i=r.isWebGL2;let a;function o(f){a=f}let s,l;function u(f){s=f.type,l=f.bytesPerElement}function d(f,m){n.drawElements(a,m,s,f*l),t.update(m,a,1)}function h(f,m,g){if(g===0)return;let _,E;if(i)_=n,E="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),E="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[E](a,m,s,f*l,g),t.update(m,a,g)}this.setMode=o,this.setIndex=u,this.render=d,this.renderInstances=h}function Nq(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,o,s){switch(t.calls++,o){case 4:t.triangles+=s*(a/3);break;case 1:t.lines+=s*(a/2);break;case 3:t.lines+=s*(a-1);break;case 2:t.lines+=s*a;break;case 0:t.points+=s*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Uq(n,e){return n[0]-e[0]}function jq(n,e){return Math.abs(e[1])-Math.abs(n[1])}function lv(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function Gq(n,e,t){const r={},i=new Float32Array(8),a=new WeakMap,o=new x0,s=[];for(let u=0;u<8;u++)s[u]=[u,0];function l(u,d,h,f){const m=u.morphTargetInfluences;if(e.isWebGL2===!0){const g=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,_=g!==void 0?g.length:0;let E=a.get(d);if(E===void 0||E.count!==_){let ee=function(){q.dispose(),a.delete(d),d.removeEventListener("dispose",ee)};E!==void 0&&E.texture.dispose();const C=d.morphAttributes.position!==void 0,V=d.morphAttributes.normal!==void 0,D=d.morphAttributes.color!==void 0,H=d.morphAttributes.position||[],R=d.morphAttributes.normal||[],j=d.morphAttributes.color||[];let te=0;C===!0&&(te=1),V===!0&&(te=2),D===!0&&(te=3);let $=d.attributes.position.count*te,z=1;$>e.maxTextureSize&&(z=Math.ceil($/e.maxTextureSize),$=e.maxTextureSize);const I=new Float32Array($*z*4*_),q=new m_(I,$,z,_);q.format=Qi,q.type=yu,q.needsUpdate=!0;const P=te*4;for(let ue=0;ue<_;ue++){const U=H[ue],O=R[ue],G=j[ue],ne=$*z*4*ue;for(let se=0;se<U.count;se++){const ie=se*P;C===!0&&(o.fromBufferAttribute(U,se),U.normalized===!0&&lv(o,U),I[ne+ie+0]=o.x,I[ne+ie+1]=o.y,I[ne+ie+2]=o.z,I[ne+ie+3]=0),V===!0&&(o.fromBufferAttribute(O,se),O.normalized===!0&&lv(o,O),I[ne+ie+4]=o.x,I[ne+ie+5]=o.y,I[ne+ie+6]=o.z,I[ne+ie+7]=0),D===!0&&(o.fromBufferAttribute(G,se),G.normalized===!0&&lv(o,O),I[ne+ie+8]=o.x,I[ne+ie+9]=o.y,I[ne+ie+10]=o.z,I[ne+ie+11]=G.itemSize===4?o.w:1)}}E={count:_,texture:q,size:new pt($,z)},a.set(d,E),d.addEventListener("dispose",ee)}let x=0;for(let C=0;C<m.length;C++)x+=m[C];const v=d.morphTargetsRelative?1:1-x;f.getUniforms().setValue(n,"morphTargetBaseInfluence",v),f.getUniforms().setValue(n,"morphTargetInfluences",m),f.getUniforms().setValue(n,"morphTargetsTexture",E.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",E.size)}else{const g=m===void 0?0:m.length;let _=r[d.id];if(_===void 0||_.length!==g){_=[];for(let V=0;V<g;V++)_[V]=[V,0];r[d.id]=_}for(let V=0;V<g;V++){const D=_[V];D[0]=V,D[1]=m[V]}_.sort(jq);for(let V=0;V<8;V++)V<g&&_[V][1]?(s[V][0]=_[V][0],s[V][1]=_[V][1]):(s[V][0]=Number.MAX_SAFE_INTEGER,s[V][1]=0);s.sort(Uq);const E=d.morphAttributes.position,x=d.morphAttributes.normal;let v=0;for(let V=0;V<8;V++){const D=s[V],H=D[0],R=D[1];H!==Number.MAX_SAFE_INTEGER&&R?(E&&d.getAttribute("morphTarget"+V)!==E[H]&&d.setAttribute("morphTarget"+V,E[H]),x&&d.getAttribute("morphNormal"+V)!==x[H]&&d.setAttribute("morphNormal"+V,x[H]),i[V]=R,v+=R):(E&&d.hasAttribute("morphTarget"+V)===!0&&d.deleteAttribute("morphTarget"+V),x&&d.hasAttribute("morphNormal"+V)===!0&&d.deleteAttribute("morphNormal"+V),i[V]=0)}const C=d.morphTargetsRelative?1:1-v;f.getUniforms().setValue(n,"morphTargetBaseInfluence",C),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function Hq(n,e,t,r){let i=new WeakMap;function a(l){const u=r.render.frame,d=l.geometry,h=e.get(l,d);return i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),h}function o(){i=new WeakMap}function s(l){const u=l.target;u.removeEventListener("dispose",s),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:a,dispose:o}}const G6=new qr,H6=new m_,z6=new fE,W6=new S_,wT=[],yT=[],ET=new Float32Array(16),CT=new Float32Array(9),VT=new Float32Array(4);function MA(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let a=wT[i];if(a===void 0&&(a=new Float32Array(i),wT[i]=a),e!==0){r.toArray(a,0);for(let o=1,s=0;o!==e;++o)s+=t,n[o].toArray(a,s)}return a}function Zi(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Ii(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function __(n,e){let t=yT[e];t===void 0&&(t=new Int32Array(e),yT[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function zq(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Wq(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zi(t,e))return;n.uniform2fv(this.addr,e),Ii(t,e)}}function Xq(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Zi(t,e))return;n.uniform3fv(this.addr,e),Ii(t,e)}}function Kq(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zi(t,e))return;n.uniform4fv(this.addr,e),Ii(t,e)}}function Yq(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Zi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ii(t,e)}else{if(Zi(t,r))return;VT.set(r),n.uniformMatrix2fv(this.addr,!1,VT),Ii(t,r)}}function qq(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Zi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ii(t,e)}else{if(Zi(t,r))return;CT.set(r),n.uniformMatrix3fv(this.addr,!1,CT),Ii(t,r)}}function Qq(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Zi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ii(t,e)}else{if(Zi(t,r))return;ET.set(r),n.uniformMatrix4fv(this.addr,!1,ET),Ii(t,r)}}function Jq(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Zq(n,e){const t=this.cache;Zi(t,e)||(n.uniform2iv(this.addr,e),Ii(t,e))}function $q(n,e){const t=this.cache;Zi(t,e)||(n.uniform3iv(this.addr,e),Ii(t,e))}function eQ(n,e){const t=this.cache;Zi(t,e)||(n.uniform4iv(this.addr,e),Ii(t,e))}function tQ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function nQ(n,e){const t=this.cache;Zi(t,e)||(n.uniform2uiv(this.addr,e),Ii(t,e))}function rQ(n,e){const t=this.cache;Zi(t,e)||(n.uniform3uiv(this.addr,e),Ii(t,e))}function iQ(n,e){const t=this.cache;Zi(t,e)||(n.uniform4uiv(this.addr,e),Ii(t,e))}function aQ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||G6,i)}function oQ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||z6,i)}function sQ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||W6,i)}function lQ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||H6,i)}function cQ(n){switch(n){case 5126:return zq;case 35664:return Wq;case 35665:return Xq;case 35666:return Kq;case 35674:return Yq;case 35675:return qq;case 35676:return Qq;case 5124:case 35670:return Jq;case 35667:case 35671:return Zq;case 35668:case 35672:return $q;case 35669:case 35673:return eQ;case 5125:return tQ;case 36294:return nQ;case 36295:return rQ;case 36296:return iQ;case 35678:case 36198:case 36298:case 36306:case 35682:return aQ;case 35679:case 36299:case 36307:return oQ;case 35680:case 36300:case 36308:case 36293:return sQ;case 36289:case 36303:case 36311:case 36292:return lQ}}function uQ(n,e){n.uniform1fv(this.addr,e)}function dQ(n,e){const t=MA(e,this.size,2);n.uniform2fv(this.addr,t)}function AQ(n,e){const t=MA(e,this.size,3);n.uniform3fv(this.addr,t)}function fQ(n,e){const t=MA(e,this.size,4);n.uniform4fv(this.addr,t)}function hQ(n,e){const t=MA(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function pQ(n,e){const t=MA(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function mQ(n,e){const t=MA(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function SQ(n,e){n.uniform1iv(this.addr,e)}function gQ(n,e){n.uniform2iv(this.addr,e)}function _Q(n,e){n.uniform3iv(this.addr,e)}function xQ(n,e){n.uniform4iv(this.addr,e)}function vQ(n,e){n.uniform1uiv(this.addr,e)}function wQ(n,e){n.uniform2uiv(this.addr,e)}function yQ(n,e){n.uniform3uiv(this.addr,e)}function EQ(n,e){n.uniform4uiv(this.addr,e)}function CQ(n,e,t){const r=e.length,i=__(t,r);n.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)t.setTexture2D(e[a]||G6,i[a])}function VQ(n,e,t){const r=e.length,i=__(t,r);n.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)t.setTexture3D(e[a]||z6,i[a])}function DQ(n,e,t){const r=e.length,i=__(t,r);n.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)t.setTextureCube(e[a]||W6,i[a])}function FQ(n,e,t){const r=e.length,i=__(t,r);n.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||H6,i[a])}function TQ(n){switch(n){case 5126:return uQ;case 35664:return dQ;case 35665:return AQ;case 35666:return fQ;case 35674:return hQ;case 35675:return pQ;case 35676:return mQ;case 5124:case 35670:return SQ;case 35667:case 35671:return gQ;case 35668:case 35672:return _Q;case 35669:case 35673:return xQ;case 5125:return vQ;case 36294:return wQ;case 36295:return yQ;case 36296:return EQ;case 35678:case 36198:case 36298:case 36306:case 35682:return CQ;case 35679:case 36299:case 36307:return VQ;case 35680:case 36300:case 36308:case 36293:return DQ;case 36289:case 36303:case 36311:case 36292:return FQ}}function bQ(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=cQ(e.type)}function X6(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=TQ(e.type)}X6.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Ii(e,n)};function K6(n){this.id=n,this.seq=[],this.map={}}K6.prototype.setValue=function(n,e,t){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const o=r[i];o.setValue(n,e[o.id],t)}};const cv=/(\w+)(\])?(\[|\.)?/g;function DT(n,e){n.seq.push(e),n.map[e.id]=e}function PQ(n,e,t){const r=n.name,i=r.length;for(cv.lastIndex=0;;){const a=cv.exec(r),o=cv.lastIndex;let s=a[1];const l=a[2]==="]",u=a[3];if(l&&(s=s|0),u===void 0||u==="["&&o+2===i){DT(t,u===void 0?new bQ(s,n,e):new X6(s,n,e));break}else{let h=t.map[s];h===void 0&&(h=new K6(s),DT(t,h)),t=h}}}function ac(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let r=0;r<t;++r){const i=n.getActiveUniform(e,r),a=n.getUniformLocation(e,i.name);PQ(i,a,this)}}ac.prototype.setValue=function(n,e,t,r){const i=this.map[e];i!==void 0&&i.setValue(n,t,r)};ac.prototype.setOptional=function(n,e,t){const r=e[t];r!==void 0&&this.setValue(n,t,r)};ac.upload=function(n,e,t,r){for(let i=0,a=e.length;i!==a;++i){const o=e[i],s=t[o.id];s.needsUpdate!==!1&&o.setValue(n,s.value,r)}};ac.seqWithValue=function(n,e){const t=[];for(let r=0,i=n.length;r!==i;++r){const a=n[r];a.id in e&&t.push(a)}return t};function FT(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let RQ=0;function LQ(n){const e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function BQ(n){switch(n){case gc:return["Linear","( value )"];case Q0:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function TT(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();return r&&i===""?"":t.toUpperCase()+`

`+i+`

`+LQ(n.getShaderSource(e))}function MQ(n,e){const t=BQ(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function IQ(n,e){let t;switch(e){case WW:t="Linear";break;case XW:t="Reinhard";break;case KW:t="OptimizedCineon";break;case YW:t="ACESFilmic";break;case qW:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function OQ(n){return[n.extensionDerivatives||!!n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(sh).join(`
`)}function kQ(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function NQ(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const a=n.getActiveAttrib(e,i),o=a.name;let s=1;a.type===35674&&(s=2),a.type===35675&&(s=3),a.type===35676&&(s=4),t[o]={type:a.type,location:n.getAttribLocation(e,o),locationSize:s}}return t}function sh(n){return n!==""}function bT(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function PT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const UQ=/^[ \t]*#include +<([\w\d./]+)>/gm;function oy(n){return n.replace(UQ,jQ)}function jQ(n,e){const t=In[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return oy(t)}const GQ=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,HQ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function RT(n){return n.replace(HQ,Y6).replace(GQ,zQ)}function zQ(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Y6(n,e,t,r)}function Y6(n,e,t,r){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function LT(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function WQ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===V6?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===yW?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===oh&&(e="SHADOWMAP_TYPE_VSM"),e}function XQ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case sA:case lA:e="ENVMAP_TYPE_CUBE";break;case p_:case uE:e="ENVMAP_TYPE_CUBE_UV";break}return e}function KQ(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case lA:case uE:e="ENVMAP_MODE_REFRACTION";break}return e}function YQ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case h_:e="ENVMAP_BLENDING_MULTIPLY";break;case HW:e="ENVMAP_BLENDING_MIX";break;case zW:e="ENVMAP_BLENDING_ADD";break}return e}function qQ(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e/32+1)+3,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function QQ(n,e,t,r){const i=n.getContext(),a=t.defines;let o=t.vertexShader,s=t.fragmentShader;const l=WQ(t),u=XQ(t),d=KQ(t),h=YQ(t),f=qQ(t),m=t.isWebGL2?"":OQ(t),g=kQ(a),_=i.createProgram();let E,x,v=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(E=[g].filter(sh).join(`
`),E.length>0&&(E+=`
`),x=[m,g].filter(sh).join(`
`),x.length>0&&(x+=`
`)):(E=[LT(t),"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(sh).join(`
`),x=[m,LT(t),"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ic?"#define TONE_MAPPING":"",t.toneMapping!==ic?In.tonemapping_pars_fragment:"",t.toneMapping!==ic?IQ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",In.encodings_pars_fragment,MQ("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(sh).join(`
`)),o=oy(o),o=bT(o,t),o=PT(o,t),s=oy(s),s=bT(s,t),s=PT(s,t),o=RT(o),s=RT(s),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,E=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,x=["#define varying in",t.glslVersion===rT?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===rT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const C=v+E+o,V=v+x+s,D=FT(i,35633,C),H=FT(i,35632,V);if(i.attachShader(_,D),i.attachShader(_,H),t.index0AttributeName!==void 0?i.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_),n.debug.checkShaderErrors){const te=i.getProgramInfoLog(_).trim(),$=i.getShaderInfoLog(D).trim(),z=i.getShaderInfoLog(H).trim();let I=!0,q=!0;if(i.getProgramParameter(_,35714)===!1){I=!1;const P=TT(i,D,"vertex"),ee=TT(i,H,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,35715)+`

Program Info Log: `+te+`
`+P+`
`+ee)}else te!==""?console.warn("THREE.WebGLProgram: Program Info Log:",te):($===""||z==="")&&(q=!1);q&&(this.diagnostics={runnable:I,programLog:te,vertexShader:{log:$,prefix:E},fragmentShader:{log:z,prefix:x}})}i.deleteShader(D),i.deleteShader(H);let R;this.getUniforms=function(){return R===void 0&&(R=new ac(i,_)),R};let j;return this.getAttributes=function(){return j===void 0&&(j=NQ(i,_)),j},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.name=t.shaderName,this.id=RQ++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=D,this.fragmentShader=H,this}let JQ=0;class ZQ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(a)===!1&&(o.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const r=new $Q;t.set(e,r)}return t.get(e)}}class $Q{constructor(){this.id=JQ++,this.usedTimes=0}}function eJ(n,e,t,r,i,a,o){const s=new O6,l=new ZQ,u=[],d=i.isWebGL2,h=i.logarithmicDepthBuffer,f=i.floatVertexTextures,m=i.maxVertexUniforms,g=i.vertexTextures;let _=i.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(z){const q=z.skeleton.bones;if(f)return 1024;{const ee=Math.floor((m-20)/4),ue=Math.min(ee,q.length);return ue<q.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+q.length+" bones. This GPU supports "+ue+"."),0):ue}}function v(z,I,q,P,ee){const ue=P.fog,U=ee.geometry,O=z.isMeshStandardMaterial?P.environment:null,G=(z.isMeshStandardMaterial?t:e).get(z.envMap||O),ne=!!G&&(G.mapping===p_||G.mapping===uE)?G.image.height:null,se=E[z.type],ie=ee.isSkinnedMesh?x(ee):0;z.precision!==null&&(_=i.getMaxPrecision(z.precision),_!==z.precision&&console.warn("THREE.WebGLProgram.getParameters:",z.precision,"not supported, using",_,"instead."));const Re=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,Be=Re!==void 0?Re.length:0;let Te=0;U.morphAttributes.position!==void 0&&(Te=1),U.morphAttributes.normal!==void 0&&(Te=2),U.morphAttributes.color!==void 0&&(Te=3);let ye,We,at,Ke;if(se){const k=ss[se];ye=k.vertexShader,We=k.fragmentShader}else ye=z.vertexShader,We=z.fragmentShader,l.update(z),at=l.getVertexShaderID(z),Ke=l.getFragmentShaderID(z);const tt=n.getRenderTarget(),lt=z.alphaTest>0,Ie=z.clearcoat>0;return{isWebGL2:d,shaderID:se,shaderName:z.type,vertexShader:ye,fragmentShader:We,defines:z.defines,customVertexShaderID:at,customFragmentShaderID:Ke,isRawShaderMaterial:z.isRawShaderMaterial===!0,glslVersion:z.glslVersion,precision:_,instancing:ee.isInstancedMesh===!0,instancingColor:ee.isInstancedMesh===!0&&ee.instanceColor!==null,supportsVertexTextures:g,outputEncoding:tt===null?n.outputEncoding:tt.isXRRenderTarget===!0?tt.texture.encoding:gc,map:!!z.map,matcap:!!z.matcap,envMap:!!G,envMapMode:G&&G.mapping,envMapCubeUVHeight:ne,lightMap:!!z.lightMap,aoMap:!!z.aoMap,emissiveMap:!!z.emissiveMap,bumpMap:!!z.bumpMap,normalMap:!!z.normalMap,objectSpaceNormalMap:z.normalMapType===SX,tangentSpaceNormalMap:z.normalMapType===LA,decodeVideoTexture:!!z.map&&z.map.isVideoTexture===!0&&z.map.encoding===Q0,clearcoat:Ie,clearcoatMap:Ie&&!!z.clearcoatMap,clearcoatRoughnessMap:Ie&&!!z.clearcoatRoughnessMap,clearcoatNormalMap:Ie&&!!z.clearcoatNormalMap,displacementMap:!!z.displacementMap,roughnessMap:!!z.roughnessMap,metalnessMap:!!z.metalnessMap,specularMap:!!z.specularMap,specularIntensityMap:!!z.specularIntensityMap,specularColorMap:!!z.specularColorMap,opaque:z.transparent===!1&&z.blending===H1,alphaMap:!!z.alphaMap,alphaTest:lt,gradientMap:!!z.gradientMap,sheen:z.sheen>0,sheenColorMap:!!z.sheenColorMap,sheenRoughnessMap:!!z.sheenRoughnessMap,transmission:z.transmission>0,transmissionMap:!!z.transmissionMap,thicknessMap:!!z.thicknessMap,combine:z.combine,vertexTangents:!!z.normalMap&&!!U.attributes.tangent,vertexColors:z.vertexColors,vertexAlphas:z.vertexColors===!0&&!!U.attributes.color&&U.attributes.color.itemSize===4,vertexUvs:!!z.map||!!z.bumpMap||!!z.normalMap||!!z.specularMap||!!z.alphaMap||!!z.emissiveMap||!!z.roughnessMap||!!z.metalnessMap||!!z.clearcoatMap||!!z.clearcoatRoughnessMap||!!z.clearcoatNormalMap||!!z.displacementMap||!!z.transmissionMap||!!z.thicknessMap||!!z.specularIntensityMap||!!z.specularColorMap||!!z.sheenColorMap||!!z.sheenRoughnessMap,uvsVertexOnly:!(!!z.map||!!z.bumpMap||!!z.normalMap||!!z.specularMap||!!z.alphaMap||!!z.emissiveMap||!!z.roughnessMap||!!z.metalnessMap||!!z.clearcoatNormalMap||z.transmission>0||!!z.transmissionMap||!!z.thicknessMap||!!z.specularIntensityMap||!!z.specularColorMap||z.sheen>0||!!z.sheenColorMap||!!z.sheenRoughnessMap)&&!!z.displacementMap,fog:!!ue,useFog:z.fog,fogExp2:ue&&ue.isFogExp2,flatShading:!!z.flatShading,sizeAttenuation:z.sizeAttenuation,logarithmicDepthBuffer:h,skinning:ee.isSkinnedMesh===!0&&ie>0,maxBones:ie,useVertexTexture:f,morphTargets:U.morphAttributes.position!==void 0,morphNormals:U.morphAttributes.normal!==void 0,morphColors:U.morphAttributes.color!==void 0,morphTargetsCount:Be,morphTextureStride:Te,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:z.dithering,shadowMapEnabled:n.shadowMap.enabled&&q.length>0,shadowMapType:n.shadowMap.type,toneMapping:z.toneMapped?n.toneMapping:ic,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:z.premultipliedAlpha,doubleSided:z.side===Uu,flipSided:z.side===Wr,depthPacking:z.depthPacking!==void 0?z.depthPacking:!1,index0AttributeName:z.index0AttributeName,extensionDerivatives:z.extensions&&z.extensions.derivatives,extensionFragDepth:z.extensions&&z.extensions.fragDepth,extensionDrawBuffers:z.extensions&&z.extensions.drawBuffers,extensionShaderTextureLOD:z.extensions&&z.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:z.customProgramCacheKey()}}function C(z){const I=[];if(z.shaderID?I.push(z.shaderID):(I.push(z.customVertexShaderID),I.push(z.customFragmentShaderID)),z.defines!==void 0)for(const q in z.defines)I.push(q),I.push(z.defines[q]);return z.isRawShaderMaterial===!1&&(V(I,z),D(I,z),I.push(n.outputEncoding)),I.push(z.customProgramCacheKey),I.join()}function V(z,I){z.push(I.precision),z.push(I.outputEncoding),z.push(I.envMapMode),z.push(I.envMapCubeUVHeight),z.push(I.combine),z.push(I.vertexUvs),z.push(I.fogExp2),z.push(I.sizeAttenuation),z.push(I.maxBones),z.push(I.morphTargetsCount),z.push(I.morphAttributeCount),z.push(I.numDirLights),z.push(I.numPointLights),z.push(I.numSpotLights),z.push(I.numHemiLights),z.push(I.numRectAreaLights),z.push(I.numDirLightShadows),z.push(I.numPointLightShadows),z.push(I.numSpotLightShadows),z.push(I.shadowMapType),z.push(I.toneMapping),z.push(I.numClippingPlanes),z.push(I.numClipIntersection)}function D(z,I){s.disableAll(),I.isWebGL2&&s.enable(0),I.supportsVertexTextures&&s.enable(1),I.instancing&&s.enable(2),I.instancingColor&&s.enable(3),I.map&&s.enable(4),I.matcap&&s.enable(5),I.envMap&&s.enable(6),I.lightMap&&s.enable(7),I.aoMap&&s.enable(8),I.emissiveMap&&s.enable(9),I.bumpMap&&s.enable(10),I.normalMap&&s.enable(11),I.objectSpaceNormalMap&&s.enable(12),I.tangentSpaceNormalMap&&s.enable(13),I.clearcoat&&s.enable(14),I.clearcoatMap&&s.enable(15),I.clearcoatRoughnessMap&&s.enable(16),I.clearcoatNormalMap&&s.enable(17),I.displacementMap&&s.enable(18),I.specularMap&&s.enable(19),I.roughnessMap&&s.enable(20),I.metalnessMap&&s.enable(21),I.gradientMap&&s.enable(22),I.alphaMap&&s.enable(23),I.alphaTest&&s.enable(24),I.vertexColors&&s.enable(25),I.vertexAlphas&&s.enable(26),I.vertexUvs&&s.enable(27),I.vertexTangents&&s.enable(28),I.uvsVertexOnly&&s.enable(29),I.fog&&s.enable(30),z.push(s.mask),s.disableAll(),I.useFog&&s.enable(0),I.flatShading&&s.enable(1),I.logarithmicDepthBuffer&&s.enable(2),I.skinning&&s.enable(3),I.useVertexTexture&&s.enable(4),I.morphTargets&&s.enable(5),I.morphNormals&&s.enable(6),I.morphColors&&s.enable(7),I.premultipliedAlpha&&s.enable(8),I.shadowMapEnabled&&s.enable(9),I.physicallyCorrectLights&&s.enable(10),I.doubleSided&&s.enable(11),I.flipSided&&s.enable(12),I.depthPacking&&s.enable(13),I.dithering&&s.enable(14),I.specularIntensityMap&&s.enable(15),I.specularColorMap&&s.enable(16),I.transmission&&s.enable(17),I.transmissionMap&&s.enable(18),I.thicknessMap&&s.enable(19),I.sheen&&s.enable(20),I.sheenColorMap&&s.enable(21),I.sheenRoughnessMap&&s.enable(22),I.decodeVideoTexture&&s.enable(23),I.opaque&&s.enable(24),z.push(s.mask)}function H(z){const I=E[z.type];let q;if(I){const P=ss[I];q=YX.clone(P.uniforms)}else q=z.uniforms;return q}function R(z,I){let q;for(let P=0,ee=u.length;P<ee;P++){const ue=u[P];if(ue.cacheKey===I){q=ue,++q.usedTimes;break}}return q===void 0&&(q=new QQ(n,I,z,a),u.push(q)),q}function j(z){if(--z.usedTimes===0){const I=u.indexOf(z);u[I]=u[u.length-1],u.pop(),z.destroy()}}function te(z){l.remove(z)}function $(){l.dispose()}return{getParameters:v,getProgramCacheKey:C,getUniforms:H,acquireProgram:R,releaseProgram:j,releaseShaderCache:te,programs:u,dispose:$}}function tJ(){let n=new WeakMap;function e(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function t(a){n.delete(a)}function r(a,o,s){n.get(a)[o]=s}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function nJ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function BT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function MT(){const n=[];let e=0;const t=[],r=[],i=[];function a(){e=0,t.length=0,r.length=0,i.length=0}function o(h,f,m,g,_,E){let x=n[e];return x===void 0?(x={id:h.id,object:h,geometry:f,material:m,groupOrder:g,renderOrder:h.renderOrder,z:_,group:E},n[e]=x):(x.id=h.id,x.object=h,x.geometry=f,x.material=m,x.groupOrder=g,x.renderOrder=h.renderOrder,x.z=_,x.group=E),e++,x}function s(h,f,m,g,_,E){const x=o(h,f,m,g,_,E);m.transmission>0?r.push(x):m.transparent===!0?i.push(x):t.push(x)}function l(h,f,m,g,_,E){const x=o(h,f,m,g,_,E);m.transmission>0?r.unshift(x):m.transparent===!0?i.unshift(x):t.unshift(x)}function u(h,f){t.length>1&&t.sort(h||nJ),r.length>1&&r.sort(f||BT),i.length>1&&i.sort(f||BT)}function d(){for(let h=e,f=n.length;h<f;h++){const m=n[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:a,push:s,unshift:l,finish:d,sort:u}}function rJ(){let n=new WeakMap;function e(r,i){let a;return n.has(r)===!1?(a=new MT,n.set(r,[a])):i>=n.get(r).length?(a=new MT,n.get(r).push(a)):a=n.get(r)[i],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function iJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Se,color:new Jt};break;case"SpotLight":t={position:new Se,direction:new Se,color:new Jt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Se,color:new Jt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Se,skyColor:new Jt,groundColor:new Jt};break;case"RectAreaLight":t={color:new Jt,position:new Se,halfWidth:new Se,halfHeight:new Se};break}return n[e.id]=t,t}}}function aJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let oJ=0;function sJ(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function lJ(n,e){const t=new iJ,r=aJ(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)i.probe.push(new Se);const a=new Se,o=new un,s=new un;function l(d,h){let f=0,m=0,g=0;for(let te=0;te<9;te++)i.probe[te].set(0,0,0);let _=0,E=0,x=0,v=0,C=0,V=0,D=0,H=0;d.sort(sJ);const R=h!==!0?Math.PI:1;for(let te=0,$=d.length;te<$;te++){const z=d[te],I=z.color,q=z.intensity,P=z.distance,ee=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)f+=I.r*q*R,m+=I.g*q*R,g+=I.b*q*R;else if(z.isLightProbe)for(let ue=0;ue<9;ue++)i.probe[ue].addScaledVector(z.sh.coefficients[ue],q);else if(z.isDirectionalLight){const ue=t.get(z);if(ue.color.copy(z.color).multiplyScalar(z.intensity*R),z.castShadow){const U=z.shadow,O=r.get(z);O.shadowBias=U.bias,O.shadowNormalBias=U.normalBias,O.shadowRadius=U.radius,O.shadowMapSize=U.mapSize,i.directionalShadow[_]=O,i.directionalShadowMap[_]=ee,i.directionalShadowMatrix[_]=z.shadow.matrix,V++}i.directional[_]=ue,_++}else if(z.isSpotLight){const ue=t.get(z);if(ue.position.setFromMatrixPosition(z.matrixWorld),ue.color.copy(I).multiplyScalar(q*R),ue.distance=P,ue.coneCos=Math.cos(z.angle),ue.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),ue.decay=z.decay,z.castShadow){const U=z.shadow,O=r.get(z);O.shadowBias=U.bias,O.shadowNormalBias=U.normalBias,O.shadowRadius=U.radius,O.shadowMapSize=U.mapSize,i.spotShadow[x]=O,i.spotShadowMap[x]=ee,i.spotShadowMatrix[x]=z.shadow.matrix,H++}i.spot[x]=ue,x++}else if(z.isRectAreaLight){const ue=t.get(z);ue.color.copy(I).multiplyScalar(q),ue.halfWidth.set(z.width*.5,0,0),ue.halfHeight.set(0,z.height*.5,0),i.rectArea[v]=ue,v++}else if(z.isPointLight){const ue=t.get(z);if(ue.color.copy(z.color).multiplyScalar(z.intensity*R),ue.distance=z.distance,ue.decay=z.decay,z.castShadow){const U=z.shadow,O=r.get(z);O.shadowBias=U.bias,O.shadowNormalBias=U.normalBias,O.shadowRadius=U.radius,O.shadowMapSize=U.mapSize,O.shadowCameraNear=U.camera.near,O.shadowCameraFar=U.camera.far,i.pointShadow[E]=O,i.pointShadowMap[E]=ee,i.pointShadowMatrix[E]=z.shadow.matrix,D++}i.point[E]=ue,E++}else if(z.isHemisphereLight){const ue=t.get(z);ue.skyColor.copy(z.color).multiplyScalar(q*R),ue.groundColor.copy(z.groundColor).multiplyScalar(q*R),i.hemi[C]=ue,C++}}v>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=It.LTC_FLOAT_1,i.rectAreaLTC2=It.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=It.LTC_HALF_1,i.rectAreaLTC2=It.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=m,i.ambient[2]=g;const j=i.hash;(j.directionalLength!==_||j.pointLength!==E||j.spotLength!==x||j.rectAreaLength!==v||j.hemiLength!==C||j.numDirectionalShadows!==V||j.numPointShadows!==D||j.numSpotShadows!==H)&&(i.directional.length=_,i.spot.length=x,i.rectArea.length=v,i.point.length=E,i.hemi.length=C,i.directionalShadow.length=V,i.directionalShadowMap.length=V,i.pointShadow.length=D,i.pointShadowMap.length=D,i.spotShadow.length=H,i.spotShadowMap.length=H,i.directionalShadowMatrix.length=V,i.pointShadowMatrix.length=D,i.spotShadowMatrix.length=H,j.directionalLength=_,j.pointLength=E,j.spotLength=x,j.rectAreaLength=v,j.hemiLength=C,j.numDirectionalShadows=V,j.numPointShadows=D,j.numSpotShadows=H,i.version=oJ++)}function u(d,h){let f=0,m=0,g=0,_=0,E=0;const x=h.matrixWorldInverse;for(let v=0,C=d.length;v<C;v++){const V=d[v];if(V.isDirectionalLight){const D=i.directional[f];D.direction.setFromMatrixPosition(V.matrixWorld),a.setFromMatrixPosition(V.target.matrixWorld),D.direction.sub(a),D.direction.transformDirection(x),f++}else if(V.isSpotLight){const D=i.spot[g];D.position.setFromMatrixPosition(V.matrixWorld),D.position.applyMatrix4(x),D.direction.setFromMatrixPosition(V.matrixWorld),a.setFromMatrixPosition(V.target.matrixWorld),D.direction.sub(a),D.direction.transformDirection(x),g++}else if(V.isRectAreaLight){const D=i.rectArea[_];D.position.setFromMatrixPosition(V.matrixWorld),D.position.applyMatrix4(x),s.identity(),o.copy(V.matrixWorld),o.premultiply(x),s.extractRotation(o),D.halfWidth.set(V.width*.5,0,0),D.halfHeight.set(0,V.height*.5,0),D.halfWidth.applyMatrix4(s),D.halfHeight.applyMatrix4(s),_++}else if(V.isPointLight){const D=i.point[m];D.position.setFromMatrixPosition(V.matrixWorld),D.position.applyMatrix4(x),m++}else if(V.isHemisphereLight){const D=i.hemi[E];D.direction.setFromMatrixPosition(V.matrixWorld),D.direction.transformDirection(x),D.direction.normalize(),E++}}}return{setup:l,setupView:u,state:i}}function IT(n,e){const t=new lJ(n,e),r=[],i=[];function a(){r.length=0,i.length=0}function o(h){r.push(h)}function s(h){i.push(h)}function l(h){t.setup(r,h)}function u(h){t.setupView(r,h)}return{init:a,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:s}}function cJ(n,e){let t=new WeakMap;function r(a,o=0){let s;return t.has(a)===!1?(s=new IT(n,e),t.set(a,[s])):o>=t.get(a).length?(s=new IT(n,e),t.get(a).push(s)):s=t.get(a)[o],s}function i(){t=new WeakMap}return{get:r,dispose:i}}class _E extends Qr{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=pX,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}_E.prototype.isMeshDepthMaterial=!0;class xE extends Qr{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Se,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}xE.prototype.isMeshDistanceMaterial=!0;const uJ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,dJ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function q6(n,e,t){let r=new g_;const i=new pt,a=new pt,o=new x0,s=new _E({depthPacking:mX}),l=new xE,u={},d=t.maxTextureSize,h={0:Wr,1:Uh,2:Uu},f=new Uo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pt},radius:{value:4}},vertexShader:uJ,fragmentShader:dJ}),m=f.clone();m.defines.HORIZONTAL_PASS=1;const g=new y0;g.setAttribute("position",new v0(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Mi(g,f),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=V6,this.render=function(V,D,H){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||V.length===0)return;const R=n.getRenderTarget(),j=n.getActiveCubeFace(),te=n.getActiveMipmapLevel(),$=n.state;$.setBlending(rc),$.buffers.color.setClear(1,1,1,1),$.buffers.depth.setTest(!0),$.setScissorTest(!1);for(let z=0,I=V.length;z<I;z++){const q=V[z],P=q.shadow;if(P===void 0){console.warn("THREE.WebGLShadowMap:",q,"has no shadow.");continue}if(P.autoUpdate===!1&&P.needsUpdate===!1)continue;i.copy(P.mapSize);const ee=P.getFrameExtents();if(i.multiply(ee),a.copy(P.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(a.x=Math.floor(d/ee.x),i.x=a.x*ee.x,P.mapSize.x=a.x),i.y>d&&(a.y=Math.floor(d/ee.y),i.y=a.y*ee.y,P.mapSize.y=a.y)),P.map===null&&!P.isPointLightShadow&&this.type===oh){const U={minFilter:pi,magFilter:pi,format:Qi};P.map=new ba(i.x,i.y,U),P.map.texture.name=q.name+".shadowMap",P.mapPass=new ba(i.x,i.y,U),P.camera.updateProjectionMatrix()}if(P.map===null){const U={minFilter:Kr,magFilter:Kr,format:Qi};P.map=new ba(i.x,i.y,U),P.map.texture.name=q.name+".shadowMap",P.camera.updateProjectionMatrix()}n.setRenderTarget(P.map),n.clear();const ue=P.getViewportCount();for(let U=0;U<ue;U++){const O=P.getViewport(U);o.set(a.x*O.x,a.y*O.y,a.x*O.z,a.y*O.w),$.viewport(o),P.updateMatrices(q,U),r=P.getFrustum(),C(D,H,P.camera,q,this.type)}!P.isPointLightShadow&&this.type===oh&&x(P,H),P.needsUpdate=!1}E.needsUpdate=!1,n.setRenderTarget(R,j,te)};function x(V,D){const H=e.update(_);f.defines.VSM_SAMPLES!==V.blurSamples&&(f.defines.VSM_SAMPLES=V.blurSamples,m.defines.VSM_SAMPLES=V.blurSamples,f.needsUpdate=!0,m.needsUpdate=!0),f.uniforms.shadow_pass.value=V.map.texture,f.uniforms.resolution.value=V.mapSize,f.uniforms.radius.value=V.radius,n.setRenderTarget(V.mapPass),n.clear(),n.renderBufferDirect(D,null,H,f,_,null),m.uniforms.shadow_pass.value=V.mapPass.texture,m.uniforms.resolution.value=V.mapSize,m.uniforms.radius.value=V.radius,n.setRenderTarget(V.map),n.clear(),n.renderBufferDirect(D,null,H,m,_,null)}function v(V,D,H,R,j,te){let $=null;const z=H.isPointLight===!0?V.customDistanceMaterial:V.customDepthMaterial;if(z!==void 0?$=z:$=H.isPointLight===!0?l:s,n.localClippingEnabled&&D.clipShadows===!0&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0){const I=$.uuid,q=D.uuid;let P=u[I];P===void 0&&(P={},u[I]=P);let ee=P[q];ee===void 0&&(ee=$.clone(),P[q]=ee),$=ee}return $.visible=D.visible,$.wireframe=D.wireframe,te===oh?$.side=D.shadowSide!==null?D.shadowSide:D.side:$.side=D.shadowSide!==null?D.shadowSide:h[D.side],$.alphaMap=D.alphaMap,$.alphaTest=D.alphaTest,$.clipShadows=D.clipShadows,$.clippingPlanes=D.clippingPlanes,$.clipIntersection=D.clipIntersection,$.displacementMap=D.displacementMap,$.displacementScale=D.displacementScale,$.displacementBias=D.displacementBias,$.wireframeLinewidth=D.wireframeLinewidth,$.linewidth=D.linewidth,H.isPointLight===!0&&$.isMeshDistanceMaterial===!0&&($.referencePosition.setFromMatrixPosition(H.matrixWorld),$.nearDistance=R,$.farDistance=j),$}function C(V,D,H,R,j){if(V.visible===!1)return;if(V.layers.test(D.layers)&&(V.isMesh||V.isLine||V.isPoints)&&(V.castShadow||V.receiveShadow&&j===oh)&&(!V.frustumCulled||r.intersectsObject(V))){V.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,V.matrixWorld);const z=e.update(V),I=V.material;if(Array.isArray(I)){const q=z.groups;for(let P=0,ee=q.length;P<ee;P++){const ue=q[P],U=I[ue.materialIndex];if(U&&U.visible){const O=v(V,U,R,H.near,H.far,j);n.renderBufferDirect(H,null,z,O,V,ue)}}}else if(I.visible){const q=v(V,I,R,H.near,H.far,j);n.renderBufferDirect(H,null,z,q,V,null)}}const $=V.children;for(let z=0,I=$.length;z<I;z++)C($[z],D,H,R,j)}}function AJ(n,e,t){const r=t.isWebGL2;function i(){let Ce=!1;const Ft=new x0;let ht=null;const Nt=new x0(0,0,0,0);return{setMask:function(Je){ht!==Je&&!Ce&&(n.colorMask(Je,Je,Je,Je),ht=Je)},setLocked:function(Je){Ce=Je},setClear:function(Je,mt,Xt,xt,on){on===!0&&(Je*=xt,mt*=xt,Xt*=xt),Ft.set(Je,mt,Xt,xt),Nt.equals(Ft)===!1&&(n.clearColor(Je,mt,Xt,xt),Nt.copy(Ft))},reset:function(){Ce=!1,ht=null,Nt.set(-1,0,0,0)}}}function a(){let Ce=!1,Ft=null,ht=null,Nt=null;return{setTest:function(Je){Je?Te(2929):ye(2929)},setMask:function(Je){Ft!==Je&&!Ce&&(n.depthMask(Je),Ft=Je)},setFunc:function(Je){if(ht!==Je){if(Je)switch(Je){case IW:n.depthFunc(512);break;case OW:n.depthFunc(519);break;case kW:n.depthFunc(513);break;case $w:n.depthFunc(515);break;case NW:n.depthFunc(514);break;case UW:n.depthFunc(518);break;case jW:n.depthFunc(516);break;case GW:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);ht=Je}},setLocked:function(Je){Ce=Je},setClear:function(Je){Nt!==Je&&(n.clearDepth(Je),Nt=Je)},reset:function(){Ce=!1,Ft=null,ht=null,Nt=null}}}function o(){let Ce=!1,Ft=null,ht=null,Nt=null,Je=null,mt=null,Xt=null,xt=null,on=null;return{setTest:function(wn){Ce||(wn?Te(2960):ye(2960))},setMask:function(wn){Ft!==wn&&!Ce&&(n.stencilMask(wn),Ft=wn)},setFunc:function(wn,On,V0){(ht!==wn||Nt!==On||Je!==V0)&&(n.stencilFunc(wn,On,V0),ht=wn,Nt=On,Je=V0)},setOp:function(wn,On,V0){(mt!==wn||Xt!==On||xt!==V0)&&(n.stencilOp(wn,On,V0),mt=wn,Xt=On,xt=V0)},setLocked:function(wn){Ce=wn},setClear:function(wn){on!==wn&&(n.clearStencil(wn),on=wn)},reset:function(){Ce=!1,Ft=null,ht=null,Nt=null,Je=null,mt=null,Xt=null,xt=null,on=null}}}const s=new i,l=new a,u=new o;let d={},h={},f=new WeakMap,m=[],g=null,_=!1,E=null,x=null,v=null,C=null,V=null,D=null,H=null,R=!1,j=null,te=null,$=null,z=null,I=null;const q=n.getParameter(35661);let P=!1,ee=0;const ue=n.getParameter(7938);ue.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(ue)[1]),P=ee>=1):ue.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(ue)[1]),P=ee>=2);let U=null,O={};const G=n.getParameter(3088),ne=n.getParameter(2978),se=new x0().fromArray(G),ie=new x0().fromArray(ne);function Re(Ce,Ft,ht){const Nt=new Uint8Array(4),Je=n.createTexture();n.bindTexture(Ce,Je),n.texParameteri(Ce,10241,9728),n.texParameteri(Ce,10240,9728);for(let mt=0;mt<ht;mt++)n.texImage2D(Ft+mt,0,6408,1,1,0,6408,5121,Nt);return Je}const Be={};Be[3553]=Re(3553,3553,1),Be[34067]=Re(34067,34069,6),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Te(2929),l.setFunc($w),k(!1),De(b3),Te(2884),Ie(rc);function Te(Ce){d[Ce]!==!0&&(n.enable(Ce),d[Ce]=!0)}function ye(Ce){d[Ce]!==!1&&(n.disable(Ce),d[Ce]=!1)}function We(Ce,Ft){return h[Ce]!==Ft?(n.bindFramebuffer(Ce,Ft),h[Ce]=Ft,r&&(Ce===36009&&(h[36160]=Ft),Ce===36160&&(h[36009]=Ft)),!0):!1}function at(Ce,Ft){let ht=m,Nt=!1;if(Ce)if(ht=f.get(Ft),ht===void 0&&(ht=[],f.set(Ft,ht)),Ce.isWebGLMultipleRenderTargets){const Je=Ce.texture;if(ht.length!==Je.length||ht[0]!==36064){for(let mt=0,Xt=Je.length;mt<Xt;mt++)ht[mt]=36064+mt;ht.length=Je.length,Nt=!0}}else ht[0]!==36064&&(ht[0]=36064,Nt=!0);else ht[0]!==1029&&(ht[0]=1029,Nt=!0);Nt&&(t.isWebGL2?n.drawBuffers(ht):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ht))}function Ke(Ce){return g!==Ce?(n.useProgram(Ce),g=Ce,!0):!1}const tt={[v1]:32774,[CW]:32778,[VW]:32779};if(r)tt[B3]=32775,tt[M3]=32776;else{const Ce=e.get("EXT_blend_minmax");Ce!==null&&(tt[B3]=Ce.MIN_EXT,tt[M3]=Ce.MAX_EXT)}const lt={[DW]:0,[FW]:1,[TW]:768,[F6]:770,[MW]:776,[LW]:774,[PW]:772,[bW]:769,[T6]:771,[BW]:775,[RW]:773};function Ie(Ce,Ft,ht,Nt,Je,mt,Xt,xt){if(Ce===rc){_===!0&&(ye(3042),_=!1);return}if(_===!1&&(Te(3042),_=!0),Ce!==EW){if(Ce!==E||xt!==R){if((x!==v1||V!==v1)&&(n.blendEquation(32774),x=v1,V=v1),xt)switch(Ce){case H1:n.blendFuncSeparate(1,771,1,771);break;case P3:n.blendFunc(1,1);break;case R3:n.blendFuncSeparate(0,769,0,1);break;case L3:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}else switch(Ce){case H1:n.blendFuncSeparate(770,771,1,771);break;case P3:n.blendFunc(770,1);break;case R3:n.blendFuncSeparate(0,769,0,1);break;case L3:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}v=null,C=null,D=null,H=null,E=Ce,R=xt}return}Je=Je||Ft,mt=mt||ht,Xt=Xt||Nt,(Ft!==x||Je!==V)&&(n.blendEquationSeparate(tt[Ft],tt[Je]),x=Ft,V=Je),(ht!==v||Nt!==C||mt!==D||Xt!==H)&&(n.blendFuncSeparate(lt[ht],lt[Nt],lt[mt],lt[Xt]),v=ht,C=Nt,D=mt,H=Xt),E=Ce,R=null}function Ue(Ce,Ft){Ce.side===Uu?ye(2884):Te(2884);let ht=Ce.side===Wr;Ft&&(ht=!ht),k(ht),Ce.blending===H1&&Ce.transparent===!1?Ie(rc):Ie(Ce.blending,Ce.blendEquation,Ce.blendSrc,Ce.blendDst,Ce.blendEquationAlpha,Ce.blendSrcAlpha,Ce.blendDstAlpha,Ce.premultipliedAlpha),l.setFunc(Ce.depthFunc),l.setTest(Ce.depthTest),l.setMask(Ce.depthWrite),s.setMask(Ce.colorWrite);const Nt=Ce.stencilWrite;u.setTest(Nt),Nt&&(u.setMask(Ce.stencilWriteMask),u.setFunc(Ce.stencilFunc,Ce.stencilRef,Ce.stencilFuncMask),u.setOp(Ce.stencilFail,Ce.stencilZFail,Ce.stencilZPass)),le(Ce.polygonOffset,Ce.polygonOffsetFactor,Ce.polygonOffsetUnits),Ce.alphaToCoverage===!0?Te(32926):ye(32926)}function k(Ce){j!==Ce&&(Ce?n.frontFace(2304):n.frontFace(2305),j=Ce)}function De(Ce){Ce!==vW?(Te(2884),Ce!==te&&(Ce===b3?n.cullFace(1029):Ce===wW?n.cullFace(1028):n.cullFace(1032))):ye(2884),te=Ce}function we(Ce){Ce!==$&&(P&&n.lineWidth(Ce),$=Ce)}function le(Ce,Ft,ht){Ce?(Te(32823),(z!==Ft||I!==ht)&&(n.polygonOffset(Ft,ht),z=Ft,I=ht)):ye(32823)}function re(Ce){Ce?Te(3089):ye(3089)}function fe(Ce){Ce===void 0&&(Ce=33984+q-1),U!==Ce&&(n.activeTexture(Ce),U=Ce)}function He(Ce,Ft){U===null&&fe();let ht=O[U];ht===void 0&&(ht={type:void 0,texture:void 0},O[U]=ht),(ht.type!==Ce||ht.texture!==Ft)&&(n.bindTexture(Ce,Ft||Be[Ce]),ht.type=Ce,ht.texture=Ft)}function oe(){const Ce=O[U];Ce!==void 0&&Ce.type!==void 0&&(n.bindTexture(Ce.type,null),Ce.type=void 0,Ce.texture=void 0)}function Y(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function _e(){try{n.texSubImage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Fe(){try{n.texSubImage3D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Le(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Pe(){try{n.texStorage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function rt(){try{n.texStorage3D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Ee(){try{n.texImage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ve(){try{n.texImage3D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function $e(Ce){se.equals(Ce)===!1&&(n.scissor(Ce.x,Ce.y,Ce.z,Ce.w),se.copy(Ce))}function _t(Ce){ie.equals(Ce)===!1&&(n.viewport(Ce.x,Ce.y,Ce.z,Ce.w),ie.copy(Ce))}function gt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},U=null,O={},h={},f=new WeakMap,m=[],g=null,_=!1,E=null,x=null,v=null,C=null,V=null,D=null,H=null,R=!1,j=null,te=null,$=null,z=null,I=null,se.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),s.reset(),l.reset(),u.reset()}return{buffers:{color:s,depth:l,stencil:u},enable:Te,disable:ye,bindFramebuffer:We,drawBuffers:at,useProgram:Ke,setBlending:Ie,setMaterial:Ue,setFlipSided:k,setCullFace:De,setLineWidth:we,setPolygonOffset:le,setScissorTest:re,activeTexture:fe,bindTexture:He,unbindTexture:oe,compressedTexImage2D:Y,texImage2D:Ee,texImage3D:ve,texStorage2D:Pe,texStorage3D:rt,texSubImage2D:_e,texSubImage3D:Fe,compressedTexSubImage2D:Le,scissor:$e,viewport:_t,reset:gt}}function fJ(n,e,t,r,i,a,o){const s=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,d=i.maxTextureSize,h=i.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=new WeakMap;let g;const _=new WeakMap;let E=!1;try{E=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(oe,Y){return E?new OffscreenCanvas(oe,Y):Yh("canvas")}function v(oe,Y,_e,Fe){let Le=1;if((oe.width>Fe||oe.height>Fe)&&(Le=Fe/Math.max(oe.width,oe.height)),Le<1||Y===!0)if(typeof HTMLImageElement<"u"&&oe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&oe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&oe instanceof ImageBitmap){const Pe=Y?d8:Math.floor,rt=Pe(Le*oe.width),Ee=Pe(Le*oe.height);g===void 0&&(g=x(rt,Ee));const ve=_e?x(rt,Ee):g;return ve.width=rt,ve.height=Ee,ve.getContext("2d").drawImage(oe,0,0,rt,Ee),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+oe.width+"x"+oe.height+") to ("+rt+"x"+Ee+")."),ve}else return"data"in oe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+oe.width+"x"+oe.height+")."),oe;return oe}function C(oe){return ay(oe.width)&&ay(oe.height)}function V(oe){return s?!1:oe.wrapS!==la||oe.wrapT!==la||oe.minFilter!==Kr&&oe.minFilter!==pi}function D(oe,Y){return oe.generateMipmaps&&Y&&oe.minFilter!==Kr&&oe.minFilter!==pi}function H(oe){n.generateMipmap(oe)}function R(oe,Y,_e,Fe,Le=!1){if(s===!1)return Y;if(oe!==null){if(n[oe]!==void 0)return n[oe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+oe+"'")}let Pe=Y;return Y===6403&&(_e===5126&&(Pe=33326),_e===5131&&(Pe=33325),_e===5121&&(Pe=33321)),Y===33319&&(_e===5126&&(Pe=33328),_e===5131&&(Pe=33327),_e===5121&&(Pe=33323)),Y===6408&&(_e===5126&&(Pe=34836),_e===5131&&(Pe=34842),_e===5121&&(Pe=Fe===Q0&&Le===!1?35907:32856),_e===32819&&(Pe=32854),_e===32820&&(Pe=32855)),(Pe===33325||Pe===33326||Pe===33327||Pe===33328||Pe===34842||Pe===34836)&&e.get("EXT_color_buffer_float"),Pe}function j(oe,Y,_e){return D(oe,_e)===!0||oe.isFramebufferTexture&&oe.minFilter!==Kr&&oe.minFilter!==pi?Math.log2(Math.max(Y.width,Y.height))+1:oe.mipmaps!==void 0&&oe.mipmaps.length>0?oe.mipmaps.length:oe.isCompressedTexture&&Array.isArray(oe.image)?Y.mipmaps.length:1}function te(oe){return oe===Kr||oe===ny||oe===ry?9728:9729}function $(oe){const Y=oe.target;Y.removeEventListener("dispose",$),I(Y),Y.isVideoTexture&&m.delete(Y)}function z(oe){const Y=oe.target;Y.removeEventListener("dispose",z),P(Y)}function I(oe){const Y=r.get(oe);if(Y.__webglInit===void 0)return;const _e=oe.source,Fe=_.get(_e);if(Fe){const Le=Fe[Y.__cacheKey];Le.usedTimes--,Le.usedTimes===0&&q(oe),Object.keys(Fe).length===0&&_.delete(_e)}r.remove(oe)}function q(oe){const Y=r.get(oe);n.deleteTexture(Y.__webglTexture);const _e=oe.source,Fe=_.get(_e);delete Fe[Y.__cacheKey],o.memory.textures--}function P(oe){const Y=oe.texture,_e=r.get(oe),Fe=r.get(Y);if(Fe.__webglTexture!==void 0&&(n.deleteTexture(Fe.__webglTexture),o.memory.textures--),oe.depthTexture&&oe.depthTexture.dispose(),oe.isWebGLCubeRenderTarget)for(let Le=0;Le<6;Le++)n.deleteFramebuffer(_e.__webglFramebuffer[Le]),_e.__webglDepthbuffer&&n.deleteRenderbuffer(_e.__webglDepthbuffer[Le]);else n.deleteFramebuffer(_e.__webglFramebuffer),_e.__webglDepthbuffer&&n.deleteRenderbuffer(_e.__webglDepthbuffer),_e.__webglMultisampledFramebuffer&&n.deleteFramebuffer(_e.__webglMultisampledFramebuffer),_e.__webglColorRenderbuffer&&n.deleteRenderbuffer(_e.__webglColorRenderbuffer),_e.__webglDepthRenderbuffer&&n.deleteRenderbuffer(_e.__webglDepthRenderbuffer);if(oe.isWebGLMultipleRenderTargets)for(let Le=0,Pe=Y.length;Le<Pe;Le++){const rt=r.get(Y[Le]);rt.__webglTexture&&(n.deleteTexture(rt.__webglTexture),o.memory.textures--),r.remove(Y[Le])}r.remove(Y),r.remove(oe)}let ee=0;function ue(){ee=0}function U(){const oe=ee;return oe>=l&&console.warn("THREE.WebGLTextures: Trying to use "+oe+" texture units while this GPU supports only "+l),ee+=1,oe}function O(oe){const Y=[];return Y.push(oe.wrapS),Y.push(oe.wrapT),Y.push(oe.magFilter),Y.push(oe.minFilter),Y.push(oe.anisotropy),Y.push(oe.internalFormat),Y.push(oe.format),Y.push(oe.type),Y.push(oe.generateMipmaps),Y.push(oe.premultiplyAlpha),Y.push(oe.flipY),Y.push(oe.unpackAlignment),Y.push(oe.encoding),Y.join()}function G(oe,Y){const _e=r.get(oe);if(oe.isVideoTexture&&fe(oe),oe.isRenderTargetTexture===!1&&oe.version>0&&_e.__version!==oe.version){const Fe=oe.image;if(Fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{We(_e,oe,Y);return}}t.activeTexture(33984+Y),t.bindTexture(3553,_e.__webglTexture)}function ne(oe,Y){const _e=r.get(oe);if(oe.version>0&&_e.__version!==oe.version){We(_e,oe,Y);return}t.activeTexture(33984+Y),t.bindTexture(35866,_e.__webglTexture)}function se(oe,Y){const _e=r.get(oe);if(oe.version>0&&_e.__version!==oe.version){We(_e,oe,Y);return}t.activeTexture(33984+Y),t.bindTexture(32879,_e.__webglTexture)}function ie(oe,Y){const _e=r.get(oe);if(oe.version>0&&_e.__version!==oe.version){at(_e,oe,Y);return}t.activeTexture(33984+Y),t.bindTexture(34067,_e.__webglTexture)}const Re={[jh]:10497,[la]:33071,[Gh]:33648},Be={[Kr]:9728,[ny]:9984,[ry]:9986,[pi]:9729,[P6]:9985,[Mp]:9987};function Te(oe,Y,_e){if(_e?(n.texParameteri(oe,10242,Re[Y.wrapS]),n.texParameteri(oe,10243,Re[Y.wrapT]),(oe===32879||oe===35866)&&n.texParameteri(oe,32882,Re[Y.wrapR]),n.texParameteri(oe,10240,Be[Y.magFilter]),n.texParameteri(oe,10241,Be[Y.minFilter])):(n.texParameteri(oe,10242,33071),n.texParameteri(oe,10243,33071),(oe===32879||oe===35866)&&n.texParameteri(oe,32882,33071),(Y.wrapS!==la||Y.wrapT!==la)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(oe,10240,te(Y.magFilter)),n.texParameteri(oe,10241,te(Y.minFilter)),Y.minFilter!==Kr&&Y.minFilter!==pi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Fe=e.get("EXT_texture_filter_anisotropic");if(Y.type===yu&&e.has("OES_texture_float_linear")===!1||s===!1&&Y.type===z1&&e.has("OES_texture_half_float_linear")===!1)return;(Y.anisotropy>1||r.get(Y).__currentAnisotropy)&&(n.texParameterf(oe,Fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,i.getMaxAnisotropy())),r.get(Y).__currentAnisotropy=Y.anisotropy)}}function ye(oe,Y){let _e=!1;oe.__webglInit===void 0&&(oe.__webglInit=!0,Y.addEventListener("dispose",$));const Fe=Y.source;let Le=_.get(Fe);Le===void 0&&(Le={},_.set(Fe,Le));const Pe=O(Y);if(Pe!==oe.__cacheKey){Le[Pe]===void 0&&(Le[Pe]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,_e=!0),Le[Pe].usedTimes++;const rt=Le[oe.__cacheKey];rt!==void 0&&(Le[oe.__cacheKey].usedTimes--,rt.usedTimes===0&&q(Y)),oe.__cacheKey=Pe,oe.__webglTexture=Le[Pe].texture}return _e}function We(oe,Y,_e){let Fe=3553;Y.isDataArrayTexture&&(Fe=35866),Y.isData3DTexture&&(Fe=32879);const Le=ye(oe,Y),Pe=Y.source;if(t.activeTexture(33984+_e),t.bindTexture(Fe,oe.__webglTexture),Pe.version!==Pe.__currentVersion||Le===!0){n.pixelStorei(37440,Y.flipY),n.pixelStorei(37441,Y.premultiplyAlpha),n.pixelStorei(3317,Y.unpackAlignment),n.pixelStorei(37443,0);const rt=V(Y)&&C(Y.image)===!1;let Ee=v(Y.image,rt,!1,d);Ee=He(Y,Ee);const ve=C(Ee)||s,$e=a.convert(Y.format,Y.encoding);let _t=a.convert(Y.type),gt=R(Y.internalFormat,$e,_t,Y.encoding,Y.isVideoTexture);Te(Fe,Y,ve);let Ce;const Ft=Y.mipmaps,ht=s&&Y.isVideoTexture!==!0,Nt=oe.__version===void 0,Je=j(Y,Ee,ve);if(Y.isDepthTexture)gt=6402,s?Y.type===yu?gt=36012:Y.type===Bg?gt=33190:Y.type===W1?gt=35056:gt=33189:Y.type===yu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Y.format===Ru&&gt===6402&&Y.type!==Hh&&Y.type!==Bg&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Y.type=Hh,_t=a.convert(Y.type)),Y.format===cA&&gt===6402&&(gt=34041,Y.type!==W1&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Y.type=W1,_t=a.convert(Y.type))),ht&&Nt?t.texStorage2D(3553,1,gt,Ee.width,Ee.height):t.texImage2D(3553,0,gt,Ee.width,Ee.height,0,$e,_t,null);else if(Y.isDataTexture)if(Ft.length>0&&ve){ht&&Nt&&t.texStorage2D(3553,Je,gt,Ft[0].width,Ft[0].height);for(let mt=0,Xt=Ft.length;mt<Xt;mt++)Ce=Ft[mt],ht?t.texSubImage2D(3553,mt,0,0,Ce.width,Ce.height,$e,_t,Ce.data):t.texImage2D(3553,mt,gt,Ce.width,Ce.height,0,$e,_t,Ce.data);Y.generateMipmaps=!1}else ht?(Nt&&t.texStorage2D(3553,Je,gt,Ee.width,Ee.height),t.texSubImage2D(3553,0,0,0,Ee.width,Ee.height,$e,_t,Ee.data)):t.texImage2D(3553,0,gt,Ee.width,Ee.height,0,$e,_t,Ee.data);else if(Y.isCompressedTexture){ht&&Nt&&t.texStorage2D(3553,Je,gt,Ft[0].width,Ft[0].height);for(let mt=0,Xt=Ft.length;mt<Xt;mt++)Ce=Ft[mt],Y.format!==Qi?$e!==null?ht?t.compressedTexSubImage2D(3553,mt,0,0,Ce.width,Ce.height,$e,Ce.data):t.compressedTexImage2D(3553,mt,gt,Ce.width,Ce.height,0,Ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ht?t.texSubImage2D(3553,mt,0,0,Ce.width,Ce.height,$e,_t,Ce.data):t.texImage2D(3553,mt,gt,Ce.width,Ce.height,0,$e,_t,Ce.data)}else if(Y.isDataArrayTexture)ht?(Nt&&t.texStorage3D(35866,Je,gt,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(35866,0,0,0,0,Ee.width,Ee.height,Ee.depth,$e,_t,Ee.data)):t.texImage3D(35866,0,gt,Ee.width,Ee.height,Ee.depth,0,$e,_t,Ee.data);else if(Y.isData3DTexture)ht?(Nt&&t.texStorage3D(32879,Je,gt,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(32879,0,0,0,0,Ee.width,Ee.height,Ee.depth,$e,_t,Ee.data)):t.texImage3D(32879,0,gt,Ee.width,Ee.height,Ee.depth,0,$e,_t,Ee.data);else if(Y.isFramebufferTexture)ht&&Nt?t.texStorage2D(3553,Je,gt,Ee.width,Ee.height):t.texImage2D(3553,0,gt,Ee.width,Ee.height,0,$e,_t,null);else if(Ft.length>0&&ve){ht&&Nt&&t.texStorage2D(3553,Je,gt,Ft[0].width,Ft[0].height);for(let mt=0,Xt=Ft.length;mt<Xt;mt++)Ce=Ft[mt],ht?t.texSubImage2D(3553,mt,0,0,$e,_t,Ce):t.texImage2D(3553,mt,gt,$e,_t,Ce);Y.generateMipmaps=!1}else ht?(Nt&&t.texStorage2D(3553,Je,gt,Ee.width,Ee.height),t.texSubImage2D(3553,0,0,0,$e,_t,Ee)):t.texImage2D(3553,0,gt,$e,_t,Ee);D(Y,ve)&&H(Fe),Pe.__currentVersion=Pe.version,Y.onUpdate&&Y.onUpdate(Y)}oe.__version=Y.version}function at(oe,Y,_e){if(Y.image.length!==6)return;const Fe=ye(oe,Y),Le=Y.source;if(t.activeTexture(33984+_e),t.bindTexture(34067,oe.__webglTexture),Le.version!==Le.__currentVersion||Fe===!0){n.pixelStorei(37440,Y.flipY),n.pixelStorei(37441,Y.premultiplyAlpha),n.pixelStorei(3317,Y.unpackAlignment),n.pixelStorei(37443,0);const Pe=Y.isCompressedTexture||Y.image[0].isCompressedTexture,rt=Y.image[0]&&Y.image[0].isDataTexture,Ee=[];for(let mt=0;mt<6;mt++)!Pe&&!rt?Ee[mt]=v(Y.image[mt],!1,!0,u):Ee[mt]=rt?Y.image[mt].image:Y.image[mt],Ee[mt]=He(Y,Ee[mt]);const ve=Ee[0],$e=C(ve)||s,_t=a.convert(Y.format,Y.encoding),gt=a.convert(Y.type),Ce=R(Y.internalFormat,_t,gt,Y.encoding),Ft=s&&Y.isVideoTexture!==!0,ht=oe.__version===void 0;let Nt=j(Y,ve,$e);Te(34067,Y,$e);let Je;if(Pe){Ft&&ht&&t.texStorage2D(34067,Nt,Ce,ve.width,ve.height);for(let mt=0;mt<6;mt++){Je=Ee[mt].mipmaps;for(let Xt=0;Xt<Je.length;Xt++){const xt=Je[Xt];Y.format!==Qi?_t!==null?Ft?t.compressedTexSubImage2D(34069+mt,Xt,0,0,xt.width,xt.height,_t,xt.data):t.compressedTexImage2D(34069+mt,Xt,Ce,xt.width,xt.height,0,xt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ft?t.texSubImage2D(34069+mt,Xt,0,0,xt.width,xt.height,_t,gt,xt.data):t.texImage2D(34069+mt,Xt,Ce,xt.width,xt.height,0,_t,gt,xt.data)}}}else{Je=Y.mipmaps,Ft&&ht&&(Je.length>0&&Nt++,t.texStorage2D(34067,Nt,Ce,Ee[0].width,Ee[0].height));for(let mt=0;mt<6;mt++)if(rt){Ft?t.texSubImage2D(34069+mt,0,0,0,Ee[mt].width,Ee[mt].height,_t,gt,Ee[mt].data):t.texImage2D(34069+mt,0,Ce,Ee[mt].width,Ee[mt].height,0,_t,gt,Ee[mt].data);for(let Xt=0;Xt<Je.length;Xt++){const on=Je[Xt].image[mt].image;Ft?t.texSubImage2D(34069+mt,Xt+1,0,0,on.width,on.height,_t,gt,on.data):t.texImage2D(34069+mt,Xt+1,Ce,on.width,on.height,0,_t,gt,on.data)}}else{Ft?t.texSubImage2D(34069+mt,0,0,0,_t,gt,Ee[mt]):t.texImage2D(34069+mt,0,Ce,_t,gt,Ee[mt]);for(let Xt=0;Xt<Je.length;Xt++){const xt=Je[Xt];Ft?t.texSubImage2D(34069+mt,Xt+1,0,0,_t,gt,xt.image[mt]):t.texImage2D(34069+mt,Xt+1,Ce,_t,gt,xt.image[mt])}}}D(Y,$e)&&H(34067),Le.__currentVersion=Le.version,Y.onUpdate&&Y.onUpdate(Y)}oe.__version=Y.version}function Ke(oe,Y,_e,Fe,Le){const Pe=a.convert(_e.format,_e.encoding),rt=a.convert(_e.type),Ee=R(_e.internalFormat,Pe,rt,_e.encoding);r.get(Y).__hasExternalTextures||(Le===32879||Le===35866?t.texImage3D(Le,0,Ee,Y.width,Y.height,Y.depth,0,Pe,rt,null):t.texImage2D(Le,0,Ee,Y.width,Y.height,0,Pe,rt,null)),t.bindFramebuffer(36160,oe),re(Y)?f.framebufferTexture2DMultisampleEXT(36160,Fe,Le,r.get(_e).__webglTexture,0,le(Y)):n.framebufferTexture2D(36160,Fe,Le,r.get(_e).__webglTexture,0),t.bindFramebuffer(36160,null)}function tt(oe,Y,_e){if(n.bindRenderbuffer(36161,oe),Y.depthBuffer&&!Y.stencilBuffer){let Fe=33189;if(_e||re(Y)){const Le=Y.depthTexture;Le&&Le.isDepthTexture&&(Le.type===yu?Fe=36012:Le.type===Bg&&(Fe=33190));const Pe=le(Y);re(Y)?f.renderbufferStorageMultisampleEXT(36161,Pe,Fe,Y.width,Y.height):n.renderbufferStorageMultisample(36161,Pe,Fe,Y.width,Y.height)}else n.renderbufferStorage(36161,Fe,Y.width,Y.height);n.framebufferRenderbuffer(36160,36096,36161,oe)}else if(Y.depthBuffer&&Y.stencilBuffer){const Fe=le(Y);_e&&re(Y)===!1?n.renderbufferStorageMultisample(36161,Fe,35056,Y.width,Y.height):re(Y)?f.renderbufferStorageMultisampleEXT(36161,Fe,35056,Y.width,Y.height):n.renderbufferStorage(36161,34041,Y.width,Y.height),n.framebufferRenderbuffer(36160,33306,36161,oe)}else{const Fe=Y.isWebGLMultipleRenderTargets===!0?Y.texture[0]:Y.texture,Le=a.convert(Fe.format,Fe.encoding),Pe=a.convert(Fe.type),rt=R(Fe.internalFormat,Le,Pe,Fe.encoding),Ee=le(Y);_e&&re(Y)===!1?n.renderbufferStorageMultisample(36161,Ee,rt,Y.width,Y.height):re(Y)?f.renderbufferStorageMultisampleEXT(36161,Ee,rt,Y.width,Y.height):n.renderbufferStorage(36161,rt,Y.width,Y.height)}n.bindRenderbuffer(36161,null)}function lt(oe,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,oe),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Y.depthTexture).__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),G(Y.depthTexture,0);const Fe=r.get(Y.depthTexture).__webglTexture,Le=le(Y);if(Y.depthTexture.format===Ru)re(Y)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,Fe,0,Le):n.framebufferTexture2D(36160,36096,3553,Fe,0);else if(Y.depthTexture.format===cA)re(Y)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,Fe,0,Le):n.framebufferTexture2D(36160,33306,3553,Fe,0);else throw new Error("Unknown depthTexture format")}function Ie(oe){const Y=r.get(oe),_e=oe.isWebGLCubeRenderTarget===!0;if(oe.depthTexture&&!Y.__autoAllocateDepthBuffer){if(_e)throw new Error("target.depthTexture not supported in Cube render targets");lt(Y.__webglFramebuffer,oe)}else if(_e){Y.__webglDepthbuffer=[];for(let Fe=0;Fe<6;Fe++)t.bindFramebuffer(36160,Y.__webglFramebuffer[Fe]),Y.__webglDepthbuffer[Fe]=n.createRenderbuffer(),tt(Y.__webglDepthbuffer[Fe],oe,!1)}else t.bindFramebuffer(36160,Y.__webglFramebuffer),Y.__webglDepthbuffer=n.createRenderbuffer(),tt(Y.__webglDepthbuffer,oe,!1);t.bindFramebuffer(36160,null)}function Ue(oe,Y,_e){const Fe=r.get(oe);Y!==void 0&&Ke(Fe.__webglFramebuffer,oe,oe.texture,36064,3553),_e!==void 0&&Ie(oe)}function k(oe){const Y=oe.texture,_e=r.get(oe),Fe=r.get(Y);oe.addEventListener("dispose",z),oe.isWebGLMultipleRenderTargets!==!0&&(Fe.__webglTexture===void 0&&(Fe.__webglTexture=n.createTexture()),Fe.__version=Y.version,o.memory.textures++);const Le=oe.isWebGLCubeRenderTarget===!0,Pe=oe.isWebGLMultipleRenderTargets===!0,rt=C(oe)||s;if(Le){_e.__webglFramebuffer=[];for(let Ee=0;Ee<6;Ee++)_e.__webglFramebuffer[Ee]=n.createFramebuffer()}else if(_e.__webglFramebuffer=n.createFramebuffer(),Pe)if(i.drawBuffers){const Ee=oe.texture;for(let ve=0,$e=Ee.length;ve<$e;ve++){const _t=r.get(Ee[ve]);_t.__webglTexture===void 0&&(_t.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(s&&oe.samples>0&&re(oe)===!1){_e.__webglMultisampledFramebuffer=n.createFramebuffer(),_e.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,_e.__webglColorRenderbuffer);const Ee=a.convert(Y.format,Y.encoding),ve=a.convert(Y.type),$e=R(Y.internalFormat,Ee,ve,Y.encoding),_t=le(oe);n.renderbufferStorageMultisample(36161,_t,$e,oe.width,oe.height),t.bindFramebuffer(36160,_e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,_e.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),oe.depthBuffer&&(_e.__webglDepthRenderbuffer=n.createRenderbuffer(),tt(_e.__webglDepthRenderbuffer,oe,!0)),t.bindFramebuffer(36160,null)}if(Le){t.bindTexture(34067,Fe.__webglTexture),Te(34067,Y,rt);for(let Ee=0;Ee<6;Ee++)Ke(_e.__webglFramebuffer[Ee],oe,Y,36064,34069+Ee);D(Y,rt)&&H(34067),t.unbindTexture()}else if(Pe){const Ee=oe.texture;for(let ve=0,$e=Ee.length;ve<$e;ve++){const _t=Ee[ve],gt=r.get(_t);t.bindTexture(3553,gt.__webglTexture),Te(3553,_t,rt),Ke(_e.__webglFramebuffer,oe,_t,36064+ve,3553),D(_t,rt)&&H(3553)}t.unbindTexture()}else{let Ee=3553;(oe.isWebGL3DRenderTarget||oe.isWebGLArrayRenderTarget)&&(s?Ee=oe.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ee,Fe.__webglTexture),Te(Ee,Y,rt),Ke(_e.__webglFramebuffer,oe,Y,36064,Ee),D(Y,rt)&&H(Ee),t.unbindTexture()}oe.depthBuffer&&Ie(oe)}function De(oe){const Y=C(oe)||s,_e=oe.isWebGLMultipleRenderTargets===!0?oe.texture:[oe.texture];for(let Fe=0,Le=_e.length;Fe<Le;Fe++){const Pe=_e[Fe];if(D(Pe,Y)){const rt=oe.isWebGLCubeRenderTarget?34067:3553,Ee=r.get(Pe).__webglTexture;t.bindTexture(rt,Ee),H(rt),t.unbindTexture()}}}function we(oe){if(s&&oe.samples>0&&re(oe)===!1){const Y=oe.width,_e=oe.height;let Fe=16384;const Le=[36064],Pe=oe.stencilBuffer?33306:36096;oe.depthBuffer&&Le.push(Pe);const rt=r.get(oe),Ee=rt.__ignoreDepthValues!==void 0?rt.__ignoreDepthValues:!1;Ee===!1&&(oe.depthBuffer&&(Fe|=256),oe.stencilBuffer&&(Fe|=1024)),t.bindFramebuffer(36008,rt.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,rt.__webglFramebuffer),Ee===!0&&(n.invalidateFramebuffer(36008,[Pe]),n.invalidateFramebuffer(36009,[Pe])),n.blitFramebuffer(0,0,Y,_e,0,0,Y,_e,Fe,9728),n.invalidateFramebuffer(36008,Le),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,rt.__webglMultisampledFramebuffer)}}function le(oe){return Math.min(h,oe.samples)}function re(oe){const Y=r.get(oe);return s&&oe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function fe(oe){const Y=o.render.frame;m.get(oe)!==Y&&(m.set(oe,Y),oe.update())}function He(oe,Y){const _e=oe.encoding,Fe=oe.format,Le=oe.type;return oe.isCompressedTexture===!0||oe.isVideoTexture===!0||oe.format===iy||_e!==gc&&(_e===Q0?s===!1?e.has("EXT_sRGB")===!0&&Fe===Qi?(oe.format=iy,oe.minFilter=pi,oe.generateMipmaps=!1):Y=Zu.sRGBToLinear(Y):(Fe!==Qi||Le!==ju)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",_e)),Y}this.allocateTextureUnit=U,this.resetTextureUnits=ue,this.setTexture2D=G,this.setTexture2DArray=ne,this.setTexture3D=se,this.setTextureCube=ie,this.rebindTextures=Ue,this.setupRenderTarget=k,this.updateRenderTargetMipmap=De,this.updateMultisampleRenderTarget=we,this.setupDepthRenderbuffer=Ie,this.setupFrameBufferTexture=Ke,this.useMultisampledRTT=re}function hJ(n,e,t){const r=t.isWebGL2;function i(a,o=null){let s;if(a===ju)return 5121;if(a===$W)return 32819;if(a===eX)return 32820;if(a===QW)return 5120;if(a===JW)return 5122;if(a===Hh)return 5123;if(a===ZW)return 5124;if(a===Bg)return 5125;if(a===yu)return 5126;if(a===z1)return r?5131:(s=e.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(a===tX)return 6406;if(a===Qi)return 6408;if(a===rX)return 6409;if(a===iX)return 6410;if(a===Ru)return 6402;if(a===cA)return 34041;if(a===aX)return 6403;if(a===nX)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(a===iy)return s=e.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(a===oX)return 36244;if(a===sX)return 33319;if(a===lX)return 33320;if(a===cX)return 36249;if(a===Lx||a===Bx||a===Mx||a===Ix)if(o===Q0)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(a===Lx)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===Bx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===Mx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===Ix)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(a===Lx)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===Bx)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===Mx)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===Ix)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===I3||a===O3||a===k3||a===N3)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(a===I3)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===O3)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===k3)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===N3)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===uX)return s=e.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===U3||a===j3)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(a===U3)return o===Q0?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(a===j3)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===G3||a===H3||a===z3||a===W3||a===X3||a===K3||a===Y3||a===q3||a===Q3||a===J3||a===Z3||a===$3||a===eT||a===tT)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(a===G3)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===H3)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===z3)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===W3)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===X3)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===K3)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===Y3)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===q3)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===Q3)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===J3)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===Z3)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===$3)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===eT)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===tT)return o===Q0?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===nT)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(a===nT)return o===Q0?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(a===W1)return r?34042:(s=e.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}class Q6 extends mi{constructor(e=[]){super(),this.cameras=e}}Q6.prototype.isArrayCamera=!0;class lh extends n0{constructor(){super(),this.type="Group"}}lh.prototype.isGroup=!0;const pJ={type:"move"};class uv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new lh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new lh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Se,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Se),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new lh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Se,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Se),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,a=null,o=null;const s=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(s!==null&&(i=t.getPose(e.targetRaySpace,r),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(pJ))),u&&e.hand){o=!0;for(const _ of e.hand.values()){const E=t.getJointPose(_,r);if(u.joints[_.jointName]===void 0){const v=new lh;v.matrixAutoUpdate=!1,v.visible=!1,u.joints[_.jointName]=v,u.add(v)}const x=u.joints[_.jointName];E!==null&&(x.matrix.fromArray(E.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.jointRadius=E.radius),x.visible=E!==null}const d=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],f=d.position.distanceTo(h.position),m=.02,g=.005;u.inputState.pinching&&f>m+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=m-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=o!==null),this}}class J6 extends qr{constructor(e,t,r,i,a,o,s,l,u,d){if(d=d!==void 0?d:Ru,d!==Ru&&d!==cA)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===Ru&&(r=Hh),r===void 0&&d===cA&&(r=W1),super(null,i,a,o,s,l,d,r,u),this.image={width:e,height:t},this.magFilter=s!==void 0?s:Kr,this.minFilter=l!==void 0?l:Kr,this.flipY=!1,this.generateMipmaps=!1}}J6.prototype.isDepthTexture=!0;class mJ extends dl{constructor(e,t){super();const r=this;let i=null,a=1,o=null,s="local-floor",l=null,u=null,d=null,h=null,f=null;const m=t.getContextAttributes();let g=null,_=null;const E=[],x=new Map,v=new mi;v.layers.enable(1),v.viewport=new x0;const C=new mi;C.layers.enable(2),C.viewport=new x0;const V=[v,C],D=new Q6;D.layers.enable(1),D.layers.enable(2);let H=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let G=E[O];return G===void 0&&(G=new uv,E[O]=G),G.getTargetRaySpace()},this.getControllerGrip=function(O){let G=E[O];return G===void 0&&(G=new uv,E[O]=G),G.getGripSpace()},this.getHand=function(O){let G=E[O];return G===void 0&&(G=new uv,E[O]=G),G.getHandSpace()};function j(O){const G=x.get(O.inputSource);G&&G.dispatchEvent({type:O.type,data:O.inputSource})}function te(){x.forEach(function(O,G){O.disconnect(G)}),x.clear(),H=null,R=null,e.setRenderTarget(g),h=null,d=null,u=null,i=null,_=null,U.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(O){a=O,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){s=O,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(O){if(i=O,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",j),i.addEventListener("selectstart",j),i.addEventListener("selectend",j),i.addEventListener("squeeze",j),i.addEventListener("squeezestart",j),i.addEventListener("squeezeend",j),i.addEventListener("end",te),i.addEventListener("inputsourceschange",$),m.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const G={antialias:i.renderState.layers===void 0?m.antialias:!0,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:a};h=new XRWebGLLayer(i,t,G),i.updateRenderState({baseLayer:h}),_=new ba(h.framebufferWidth,h.framebufferHeight,{format:Qi,type:ju,encoding:e.outputEncoding})}else{let G=null,ne=null,se=null;m.depth&&(se=m.stencil?35056:33190,G=m.stencil?cA:Ru,ne=m.stencil?W1:Hh);const ie={colorFormat:e.outputEncoding===Q0?35907:32856,depthFormat:se,scaleFactor:a};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(ie),i.updateRenderState({layers:[d]}),_=new ba(d.textureWidth,d.textureHeight,{format:Qi,type:ju,depthTexture:new J6(d.textureWidth,d.textureHeight,ne,void 0,void 0,void 0,void 0,void 0,void 0,G),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0});const Re=e.properties.get(_);Re.__ignoreDepthValues=d.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(1),o=await i.requestReferenceSpace(s),U.setContext(i),U.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function $(O){const G=i.inputSources;for(let ne=0;ne<E.length;ne++)x.set(G[ne],E[ne]);for(let ne=0;ne<O.removed.length;ne++){const se=O.removed[ne],ie=x.get(se);ie&&(ie.dispatchEvent({type:"disconnected",data:se}),x.delete(se))}for(let ne=0;ne<O.added.length;ne++){const se=O.added[ne],ie=x.get(se);ie&&ie.dispatchEvent({type:"connected",data:se})}}const z=new Se,I=new Se;function q(O,G,ne){z.setFromMatrixPosition(G.matrixWorld),I.setFromMatrixPosition(ne.matrixWorld);const se=z.distanceTo(I),ie=G.projectionMatrix.elements,Re=ne.projectionMatrix.elements,Be=ie[14]/(ie[10]-1),Te=ie[14]/(ie[10]+1),ye=(ie[9]+1)/ie[5],We=(ie[9]-1)/ie[5],at=(ie[8]-1)/ie[0],Ke=(Re[8]+1)/Re[0],tt=Be*at,lt=Be*Ke,Ie=se/(-at+Ke),Ue=Ie*-at;G.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(Ue),O.translateZ(Ie),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert();const k=Be+Ie,De=Te+Ie,we=tt-Ue,le=lt+(se-Ue),re=ye*Te/De*k,fe=We*Te/De*k;O.projectionMatrix.makePerspective(we,le,re,fe,k,De)}function P(O,G){G===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(G.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(i===null)return;D.near=C.near=v.near=O.near,D.far=C.far=v.far=O.far,(H!==D.near||R!==D.far)&&(i.updateRenderState({depthNear:D.near,depthFar:D.far}),H=D.near,R=D.far);const G=O.parent,ne=D.cameras;P(D,G);for(let ie=0;ie<ne.length;ie++)P(ne[ie],G);D.matrixWorld.decompose(D.position,D.quaternion,D.scale),O.position.copy(D.position),O.quaternion.copy(D.quaternion),O.scale.copy(D.scale),O.matrix.copy(D.matrix),O.matrixWorld.copy(D.matrixWorld);const se=O.children;for(let ie=0,Re=se.length;ie<Re;ie++)se[ie].updateMatrixWorld(!0);ne.length===2?q(D,v,C):D.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return D},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(h!==null)return h.fixedFoveation},this.setFoveation=function(O){d!==null&&(d.fixedFoveation=O),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=O)};let ee=null;function ue(O,G){if(l=G.getViewerPose(o),f=G,l!==null){const se=l.views;h!==null&&(e.setRenderTargetFramebuffer(_,h.framebuffer),e.setRenderTarget(_));let ie=!1;se.length!==D.cameras.length&&(D.cameras.length=0,ie=!0);for(let Re=0;Re<se.length;Re++){const Be=se[Re];let Te=null;if(h!==null)Te=h.getViewport(Be);else{const We=u.getViewSubImage(d,Be);Te=We.viewport,Re===0&&(e.setRenderTargetTextures(_,We.colorTexture,d.ignoreDepthValues?void 0:We.depthStencilTexture),e.setRenderTarget(_))}const ye=V[Re];ye.matrix.fromArray(Be.transform.matrix),ye.projectionMatrix.fromArray(Be.projectionMatrix),ye.viewport.set(Te.x,Te.y,Te.width,Te.height),Re===0&&D.matrix.copy(ye.matrix),ie===!0&&D.cameras.push(ye)}}const ne=i.inputSources;for(let se=0;se<E.length;se++){const ie=E[se],Re=ne[se];ie.update(Re,G,o)}ee&&ee(O,G),f=null}const U=new j6;U.setAnimationLoop(ue),this.setAnimationLoop=function(O){ee=O},this.dispose=function(){}}}function SJ(n){function e(x,v){x.fogColor.value.copy(v.color),v.isFog?(x.fogNear.value=v.near,x.fogFar.value=v.far):v.isFogExp2&&(x.fogDensity.value=v.density)}function t(x,v,C,V,D){v.isMeshBasicMaterial?r(x,v):v.isMeshLambertMaterial?(r(x,v),l(x,v)):v.isMeshToonMaterial?(r(x,v),d(x,v)):v.isMeshPhongMaterial?(r(x,v),u(x,v)):v.isMeshStandardMaterial?(r(x,v),v.isMeshPhysicalMaterial?f(x,v,D):h(x,v)):v.isMeshMatcapMaterial?(r(x,v),m(x,v)):v.isMeshDepthMaterial?(r(x,v),g(x,v)):v.isMeshDistanceMaterial?(r(x,v),_(x,v)):v.isMeshNormalMaterial?(r(x,v),E(x,v)):v.isLineBasicMaterial?(i(x,v),v.isLineDashedMaterial&&a(x,v)):v.isPointsMaterial?o(x,v,C,V):v.isSpriteMaterial?s(x,v):v.isShadowMaterial?(x.color.value.copy(v.color),x.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function r(x,v){x.opacity.value=v.opacity,v.color&&x.diffuse.value.copy(v.color),v.emissive&&x.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(x.map.value=v.map),v.alphaMap&&(x.alphaMap.value=v.alphaMap),v.specularMap&&(x.specularMap.value=v.specularMap),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest);const C=n.get(v).envMap;C&&(x.envMap.value=C,x.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=v.reflectivity,x.ior.value=v.ior,x.refractionRatio.value=v.refractionRatio),v.lightMap&&(x.lightMap.value=v.lightMap,x.lightMapIntensity.value=v.lightMapIntensity),v.aoMap&&(x.aoMap.value=v.aoMap,x.aoMapIntensity.value=v.aoMapIntensity);let V;v.map?V=v.map:v.specularMap?V=v.specularMap:v.displacementMap?V=v.displacementMap:v.normalMap?V=v.normalMap:v.bumpMap?V=v.bumpMap:v.roughnessMap?V=v.roughnessMap:v.metalnessMap?V=v.metalnessMap:v.alphaMap?V=v.alphaMap:v.emissiveMap?V=v.emissiveMap:v.clearcoatMap?V=v.clearcoatMap:v.clearcoatNormalMap?V=v.clearcoatNormalMap:v.clearcoatRoughnessMap?V=v.clearcoatRoughnessMap:v.specularIntensityMap?V=v.specularIntensityMap:v.specularColorMap?V=v.specularColorMap:v.transmissionMap?V=v.transmissionMap:v.thicknessMap?V=v.thicknessMap:v.sheenColorMap?V=v.sheenColorMap:v.sheenRoughnessMap&&(V=v.sheenRoughnessMap),V!==void 0&&(V.isWebGLRenderTarget&&(V=V.texture),V.matrixAutoUpdate===!0&&V.updateMatrix(),x.uvTransform.value.copy(V.matrix));let D;v.aoMap?D=v.aoMap:v.lightMap&&(D=v.lightMap),D!==void 0&&(D.isWebGLRenderTarget&&(D=D.texture),D.matrixAutoUpdate===!0&&D.updateMatrix(),x.uv2Transform.value.copy(D.matrix))}function i(x,v){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity}function a(x,v){x.dashSize.value=v.dashSize,x.totalSize.value=v.dashSize+v.gapSize,x.scale.value=v.scale}function o(x,v,C,V){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,x.size.value=v.size*C,x.scale.value=V*.5,v.map&&(x.map.value=v.map),v.alphaMap&&(x.alphaMap.value=v.alphaMap),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest);let D;v.map?D=v.map:v.alphaMap&&(D=v.alphaMap),D!==void 0&&(D.matrixAutoUpdate===!0&&D.updateMatrix(),x.uvTransform.value.copy(D.matrix))}function s(x,v){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,x.rotation.value=v.rotation,v.map&&(x.map.value=v.map),v.alphaMap&&(x.alphaMap.value=v.alphaMap),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest);let C;v.map?C=v.map:v.alphaMap&&(C=v.alphaMap),C!==void 0&&(C.matrixAutoUpdate===!0&&C.updateMatrix(),x.uvTransform.value.copy(C.matrix))}function l(x,v){v.emissiveMap&&(x.emissiveMap.value=v.emissiveMap)}function u(x,v){x.specular.value.copy(v.specular),x.shininess.value=Math.max(v.shininess,1e-4),v.emissiveMap&&(x.emissiveMap.value=v.emissiveMap),v.bumpMap&&(x.bumpMap.value=v.bumpMap,x.bumpScale.value=v.bumpScale,v.side===Wr&&(x.bumpScale.value*=-1)),v.normalMap&&(x.normalMap.value=v.normalMap,x.normalScale.value.copy(v.normalScale),v.side===Wr&&x.normalScale.value.negate()),v.displacementMap&&(x.displacementMap.value=v.displacementMap,x.displacementScale.value=v.displacementScale,x.displacementBias.value=v.displacementBias)}function d(x,v){v.gradientMap&&(x.gradientMap.value=v.gradientMap),v.emissiveMap&&(x.emissiveMap.value=v.emissiveMap),v.bumpMap&&(x.bumpMap.value=v.bumpMap,x.bumpScale.value=v.bumpScale,v.side===Wr&&(x.bumpScale.value*=-1)),v.normalMap&&(x.normalMap.value=v.normalMap,x.normalScale.value.copy(v.normalScale),v.side===Wr&&x.normalScale.value.negate()),v.displacementMap&&(x.displacementMap.value=v.displacementMap,x.displacementScale.value=v.displacementScale,x.displacementBias.value=v.displacementBias)}function h(x,v){x.roughness.value=v.roughness,x.metalness.value=v.metalness,v.roughnessMap&&(x.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(x.metalnessMap.value=v.metalnessMap),v.emissiveMap&&(x.emissiveMap.value=v.emissiveMap),v.bumpMap&&(x.bumpMap.value=v.bumpMap,x.bumpScale.value=v.bumpScale,v.side===Wr&&(x.bumpScale.value*=-1)),v.normalMap&&(x.normalMap.value=v.normalMap,x.normalScale.value.copy(v.normalScale),v.side===Wr&&x.normalScale.value.negate()),v.displacementMap&&(x.displacementMap.value=v.displacementMap,x.displacementScale.value=v.displacementScale,x.displacementBias.value=v.displacementBias),n.get(v).envMap&&(x.envMapIntensity.value=v.envMapIntensity)}function f(x,v,C){h(x,v),x.ior.value=v.ior,v.sheen>0&&(x.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),x.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(x.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(x.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(x.clearcoat.value=v.clearcoat,x.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(x.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),x.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===Wr&&x.clearcoatNormalScale.value.negate())),v.transmission>0&&(x.transmission.value=v.transmission,x.transmissionSamplerMap.value=C.texture,x.transmissionSamplerSize.value.set(C.width,C.height),v.transmissionMap&&(x.transmissionMap.value=v.transmissionMap),x.thickness.value=v.thickness,v.thicknessMap&&(x.thicknessMap.value=v.thicknessMap),x.attenuationDistance.value=v.attenuationDistance,x.attenuationColor.value.copy(v.attenuationColor)),x.specularIntensity.value=v.specularIntensity,x.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(x.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(x.specularColorMap.value=v.specularColorMap)}function m(x,v){v.matcap&&(x.matcap.value=v.matcap),v.bumpMap&&(x.bumpMap.value=v.bumpMap,x.bumpScale.value=v.bumpScale,v.side===Wr&&(x.bumpScale.value*=-1)),v.normalMap&&(x.normalMap.value=v.normalMap,x.normalScale.value.copy(v.normalScale),v.side===Wr&&x.normalScale.value.negate()),v.displacementMap&&(x.displacementMap.value=v.displacementMap,x.displacementScale.value=v.displacementScale,x.displacementBias.value=v.displacementBias)}function g(x,v){v.displacementMap&&(x.displacementMap.value=v.displacementMap,x.displacementScale.value=v.displacementScale,x.displacementBias.value=v.displacementBias)}function _(x,v){v.displacementMap&&(x.displacementMap.value=v.displacementMap,x.displacementScale.value=v.displacementScale,x.displacementBias.value=v.displacementBias),x.referencePosition.value.copy(v.referencePosition),x.nearDistance.value=v.nearDistance,x.farDistance.value=v.farDistance}function E(x,v){v.bumpMap&&(x.bumpMap.value=v.bumpMap,x.bumpScale.value=v.bumpScale,v.side===Wr&&(x.bumpScale.value*=-1)),v.normalMap&&(x.normalMap.value=v.normalMap,x.normalScale.value.copy(v.normalScale),v.side===Wr&&x.normalScale.value.negate()),v.displacementMap&&(x.displacementMap.value=v.displacementMap,x.displacementScale.value=v.displacementScale,x.displacementBias.value=v.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function gJ(){const n=Yh("canvas");return n.style.display="block",n}function f0(n={}){const e=n.canvas!==void 0?n.canvas:gJ(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,a=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,s=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",u=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let d;n.context!==void 0?d=t.getContextAttributes().alpha:d=n.alpha!==void 0?n.alpha:!1;let h=null,f=null;const m=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=gc,this.physicallyCorrectLights=!1,this.toneMapping=ic,this.toneMappingExposure=1;const _=this;let E=!1,x=0,v=0,C=null,V=-1,D=null;const H=new x0,R=new x0;let j=null,te=e.width,$=e.height,z=1,I=null,q=null;const P=new x0(0,0,te,$),ee=new x0(0,0,te,$);let ue=!1;const U=new g_;let O=!1,G=!1,ne=null;const se=new un,ie=new pt,Re=new Se,Be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Te(){return C===null?z:1}let ye=t;function We(he,qe){for(let st=0;st<he.length;st++){const Ze=he[st],ft=e.getContext(Ze,qe);if(ft!==null)return ft}return null}try{const he={alpha:!0,depth:r,stencil:i,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:s,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${cE}`),e.addEventListener("webglcontextlost",Ce,!1),e.addEventListener("webglcontextrestored",Ft,!1),ye===null){const qe=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&qe.shift(),ye=We(qe,he),ye===null)throw We(qe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ye.getShaderPrecisionFormat===void 0&&(ye.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(he){throw console.error("THREE.WebGLRenderer: "+he.message),he}let at,Ke,tt,lt,Ie,Ue,k,De,we,le,re,fe,He,oe,Y,_e,Fe,Le,Pe,rt,Ee,ve,$e;function _t(){at=new Iq(ye),Ke=new bq(ye,at,n),at.init(Ke),ve=new hJ(ye,at,Ke),tt=new AJ(ye,at,Ke),lt=new Nq,Ie=new tJ,Ue=new fJ(ye,at,tt,Ie,Ke,ve,lt),k=new Rq(_),De=new Mq(_),we=new $X(ye,Ke),$e=new Fq(ye,at,we,Ke),le=new Oq(ye,we,lt,$e),re=new Hq(ye,le,we,lt),Pe=new Gq(ye,Ke,Ue),_e=new Pq(Ie),fe=new eJ(_,k,De,at,Ke,$e,_e),He=new SJ(Ie),oe=new rJ,Y=new cJ(at,Ke),Le=new Dq(_,k,tt,re,d,o),Fe=new q6(_,re,Ke),rt=new Tq(ye,at,lt,Ke),Ee=new kq(ye,at,lt,Ke),lt.programs=fe.programs,_.capabilities=Ke,_.extensions=at,_.properties=Ie,_.renderLists=oe,_.shadowMap=Fe,_.state=tt,_.info=lt}_t();const gt=new mJ(_,ye);this.xr=gt,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){const he=at.get("WEBGL_lose_context");he&&he.loseContext()},this.forceContextRestore=function(){const he=at.get("WEBGL_lose_context");he&&he.restoreContext()},this.getPixelRatio=function(){return z},this.setPixelRatio=function(he){he!==void 0&&(z=he,this.setSize(te,$,!1))},this.getSize=function(he){return he.set(te,$)},this.setSize=function(he,qe,st){if(gt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}te=he,$=qe,e.width=Math.floor(he*z),e.height=Math.floor(qe*z),st!==!1&&(e.style.width=he+"px",e.style.height=qe+"px"),this.setViewport(0,0,he,qe)},this.getDrawingBufferSize=function(he){return he.set(te*z,$*z).floor()},this.setDrawingBufferSize=function(he,qe,st){te=he,$=qe,z=st,e.width=Math.floor(he*st),e.height=Math.floor(qe*st),this.setViewport(0,0,he,qe)},this.getCurrentViewport=function(he){return he.copy(H)},this.getViewport=function(he){return he.copy(P)},this.setViewport=function(he,qe,st,Ze){he.isVector4?P.set(he.x,he.y,he.z,he.w):P.set(he,qe,st,Ze),tt.viewport(H.copy(P).multiplyScalar(z).floor())},this.getScissor=function(he){return he.copy(ee)},this.setScissor=function(he,qe,st,Ze){he.isVector4?ee.set(he.x,he.y,he.z,he.w):ee.set(he,qe,st,Ze),tt.scissor(R.copy(ee).multiplyScalar(z).floor())},this.getScissorTest=function(){return ue},this.setScissorTest=function(he){tt.setScissorTest(ue=he)},this.setOpaqueSort=function(he){I=he},this.setTransparentSort=function(he){q=he},this.getClearColor=function(he){return he.copy(Le.getClearColor())},this.setClearColor=function(){Le.setClearColor.apply(Le,arguments)},this.getClearAlpha=function(){return Le.getClearAlpha()},this.setClearAlpha=function(){Le.setClearAlpha.apply(Le,arguments)},this.clear=function(he=!0,qe=!0,st=!0){let Ze=0;he&&(Ze|=16384),qe&&(Ze|=256),st&&(Ze|=1024),ye.clear(Ze)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ce,!1),e.removeEventListener("webglcontextrestored",Ft,!1),oe.dispose(),Y.dispose(),Ie.dispose(),k.dispose(),De.dispose(),re.dispose(),$e.dispose(),fe.dispose(),gt.dispose(),gt.removeEventListener("sessionstart",xt),gt.removeEventListener("sessionend",on),ne&&(ne.dispose(),ne=null),wn.stop()};function Ce(he){he.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Ft(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const he=lt.autoReset,qe=Fe.enabled,st=Fe.autoUpdate,Ze=Fe.needsUpdate,ft=Fe.type;_t(),lt.autoReset=he,Fe.enabled=qe,Fe.autoUpdate=st,Fe.needsUpdate=Ze,Fe.type=ft}function ht(he){const qe=he.target;qe.removeEventListener("dispose",ht),Nt(qe)}function Nt(he){Je(he),Ie.remove(he)}function Je(he){const qe=Ie.get(he).programs;qe!==void 0&&(qe.forEach(function(st){fe.releaseProgram(st)}),he.isShaderMaterial&&fe.releaseShaderCache(he))}this.renderBufferDirect=function(he,qe,st,Ze,ft,tn){qe===null&&(qe=Be);const mn=ft.isMesh&&ft.matrixWorld.determinant()<0,Cn=xi(he,qe,st,Ze,ft);tt.setMaterial(Ze,mn);let Sn=st.index;const Tn=st.attributes.position;if(Sn===null){if(Tn===void 0||Tn.count===0)return}else if(Sn.count===0)return;let hn=1;Ze.wireframe===!0&&(Sn=le.getWireframeAttribute(st),hn=2),$e.setup(ft,Ze,Cn,st,Sn);let jt,Xn=rt;Sn!==null&&(jt=we.get(Sn),Xn=Ee,Xn.setIndex(jt));const Jr=Sn!==null?Sn.count:Tn.count,dn=st.drawRange.start*hn,oi=st.drawRange.count*hn,m0=tn!==null?tn.start*hn:0,Dn=tn!==null?tn.count*hn:1/0,Ur=Math.max(dn,m0),en=Math.min(Jr,dn+oi,m0+Dn)-1,Rt=Math.max(0,en-Ur+1);if(Rt!==0){if(ft.isMesh)Ze.wireframe===!0?(tt.setLineWidth(Ze.wireframeLinewidth*Te()),Xn.setMode(1)):Xn.setMode(4);else if(ft.isLine){let D0=Ze.linewidth;D0===void 0&&(D0=1),tt.setLineWidth(D0*Te()),ft.isLineSegments?Xn.setMode(1):ft.isLineLoop?Xn.setMode(2):Xn.setMode(3)}else ft.isPoints?Xn.setMode(0):ft.isSprite&&Xn.setMode(4);if(ft.isInstancedMesh)Xn.renderInstances(Ur,Rt,ft.count);else if(st.isInstancedBufferGeometry){const D0=Math.min(st.instanceCount,st._maxInstanceCount);Xn.renderInstances(Ur,Rt,D0)}else Xn.render(Ur,Rt)}},this.compile=function(he,qe){f=Y.get(he),f.init(),g.push(f),he.traverseVisible(function(st){st.isLight&&st.layers.test(qe.layers)&&(f.pushLight(st),st.castShadow&&f.pushShadow(st))}),f.setupLights(_.physicallyCorrectLights),he.traverse(function(st){const Ze=st.material;if(Ze)if(Array.isArray(Ze))for(let ft=0;ft<Ze.length;ft++){const tn=Ze[ft];$t(tn,he,st)}else $t(Ze,he,st)}),g.pop(),f=null};let mt=null;function Xt(he){mt&&mt(he)}function xt(){wn.stop()}function on(){wn.start()}const wn=new j6;wn.setAnimationLoop(Xt),typeof window<"u"&&wn.setContext(window),this.setAnimationLoop=function(he){mt=he,gt.setAnimationLoop(he),he===null?wn.stop():wn.start()},gt.addEventListener("sessionstart",xt),gt.addEventListener("sessionend",on),this.render=function(he,qe){if(qe!==void 0&&qe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;he.autoUpdate===!0&&he.updateMatrixWorld(),qe.parent===null&&qe.updateMatrixWorld(),gt.enabled===!0&&gt.isPresenting===!0&&(gt.cameraAutoUpdate===!0&&gt.updateCamera(qe),qe=gt.getCamera()),he.isScene===!0&&he.onBeforeRender(_,he,qe,C),f=Y.get(he,g.length),f.init(),g.push(f),se.multiplyMatrices(qe.projectionMatrix,qe.matrixWorldInverse),U.setFromProjectionMatrix(se),G=this.localClippingEnabled,O=_e.init(this.clippingPlanes,G,qe),h=oe.get(he,m.length),h.init(),m.push(h),On(he,qe,0,_.sortObjects),h.finish(),_.sortObjects===!0&&h.sort(I,q),O===!0&&_e.beginShadows();const st=f.state.shadowsArray;if(Fe.render(st,he,qe),O===!0&&_e.endShadows(),this.info.autoReset===!0&&this.info.reset(),Le.render(h,he),f.setupLights(_.physicallyCorrectLights),qe.isArrayCamera){const Ze=qe.cameras;for(let ft=0,tn=Ze.length;ft<tn;ft++){const mn=Ze[ft];V0(h,he,mn,mn.viewport)}}else V0(h,he,qe);C!==null&&(Ue.updateMultisampleRenderTarget(C),Ue.updateRenderTargetMipmap(C)),he.isScene===!0&&he.onAfterRender(_,he,qe),$e.resetDefaultState(),V=-1,D=null,g.pop(),g.length>0?f=g[g.length-1]:f=null,m.pop(),m.length>0?h=m[m.length-1]:h=null};function On(he,qe,st,Ze){if(he.visible===!1)return;if(he.layers.test(qe.layers)){if(he.isGroup)st=he.renderOrder;else if(he.isLOD)he.autoUpdate===!0&&he.update(qe);else if(he.isLight)f.pushLight(he),he.castShadow&&f.pushShadow(he);else if(he.isSprite){if(!he.frustumCulled||U.intersectsSprite(he)){Ze&&Re.setFromMatrixPosition(he.matrixWorld).applyMatrix4(se);const mn=re.update(he),Cn=he.material;Cn.visible&&h.push(he,mn,Cn,st,Re.z,null)}}else if((he.isMesh||he.isLine||he.isPoints)&&(he.isSkinnedMesh&&he.skeleton.frame!==lt.render.frame&&(he.skeleton.update(),he.skeleton.frame=lt.render.frame),!he.frustumCulled||U.intersectsObject(he))){Ze&&Re.setFromMatrixPosition(he.matrixWorld).applyMatrix4(se);const mn=re.update(he),Cn=he.material;if(Array.isArray(Cn)){const Sn=mn.groups;for(let Tn=0,hn=Sn.length;Tn<hn;Tn++){const jt=Sn[Tn],Xn=Cn[jt.materialIndex];Xn&&Xn.visible&&h.push(he,mn,Xn,st,Re.z,jt)}}else Cn.visible&&h.push(he,mn,Cn,st,Re.z,null)}}const tn=he.children;for(let mn=0,Cn=tn.length;mn<Cn;mn++)On(tn[mn],qe,st,Ze)}function V0(he,qe,st,Ze){const ft=he.opaque,tn=he.transmissive,mn=he.transparent;f.setupLightsView(st),tn.length>0&&X0(ft,qe,st),Ze&&tt.viewport(H.copy(Ze)),ft.length>0&&ki(ft,qe,st),tn.length>0&&ki(tn,qe,st),mn.length>0&&ki(mn,qe,st),tt.buffers.depth.setTest(!0),tt.buffers.depth.setMask(!0),tt.buffers.color.setMask(!0),tt.setPolygonOffset(!1)}function X0(he,qe,st){const Ze=Ke.isWebGL2;ne===null&&(ne=new ba(1,1,{generateMipmaps:!0,type:ve.convert(z1)!==null?z1:ju,minFilter:Mp,samples:Ze&&a===!0?4:0})),_.getDrawingBufferSize(ie),Ze?ne.setSize(ie.x,ie.y):ne.setSize(d8(ie.x),d8(ie.y));const ft=_.getRenderTarget();_.setRenderTarget(ne),_.clear();const tn=_.toneMapping;_.toneMapping=ic,ki(he,qe,st),_.toneMapping=tn,Ue.updateMultisampleRenderTarget(ne),Ue.updateRenderTargetMipmap(ne),_.setRenderTarget(ft)}function ki(he,qe,st){const Ze=qe.isScene===!0?qe.overrideMaterial:null;for(let ft=0,tn=he.length;ft<tn;ft++){const mn=he[ft],Cn=mn.object,Sn=mn.geometry,Tn=Ze===null?mn.material:Ze,hn=mn.group;Cn.layers.test(st.layers)&&na(Cn,qe,st,Sn,Tn,hn)}}function na(he,qe,st,Ze,ft,tn){he.onBeforeRender(_,qe,st,Ze,ft,tn),he.modelViewMatrix.multiplyMatrices(st.matrixWorldInverse,he.matrixWorld),he.normalMatrix.getNormalMatrix(he.modelViewMatrix),ft.onBeforeRender(_,qe,st,Ze,he,tn),ft.transparent===!0&&ft.side===Uu?(ft.side=Wr,ft.needsUpdate=!0,_.renderBufferDirect(st,qe,Ze,ft,he,tn),ft.side=Uh,ft.needsUpdate=!0,_.renderBufferDirect(st,qe,Ze,ft,he,tn),ft.side=Uu):_.renderBufferDirect(st,qe,Ze,ft,he,tn),he.onAfterRender(_,qe,st,Ze,ft,tn)}function $t(he,qe,st){qe.isScene!==!0&&(qe=Be);const Ze=Ie.get(he),ft=f.state.lights,tn=f.state.shadowsArray,mn=ft.state.version,Cn=fe.getParameters(he,ft.state,tn,qe,st),Sn=fe.getProgramCacheKey(Cn);let Tn=Ze.programs;Ze.environment=he.isMeshStandardMaterial?qe.environment:null,Ze.fog=qe.fog,Ze.envMap=(he.isMeshStandardMaterial?De:k).get(he.envMap||Ze.environment),Tn===void 0&&(he.addEventListener("dispose",ht),Tn=new Map,Ze.programs=Tn);let hn=Tn.get(Sn);if(hn!==void 0){if(Ze.currentProgram===hn&&Ze.lightsStateVersion===mn)return Nr(he,Cn),hn}else Cn.uniforms=fe.getUniforms(he),he.onBuild(st,Cn,_),he.onBeforeCompile(Cn,_),hn=fe.acquireProgram(Cn,Sn),Tn.set(Sn,hn),Ze.uniforms=Cn.uniforms;const jt=Ze.uniforms;(!he.isShaderMaterial&&!he.isRawShaderMaterial||he.clipping===!0)&&(jt.clippingPlanes=_e.uniform),Nr(he,Cn),Ze.needsLights=Q(he),Ze.lightsStateVersion=mn,Ze.needsLights&&(jt.ambientLightColor.value=ft.state.ambient,jt.lightProbe.value=ft.state.probe,jt.directionalLights.value=ft.state.directional,jt.directionalLightShadows.value=ft.state.directionalShadow,jt.spotLights.value=ft.state.spot,jt.spotLightShadows.value=ft.state.spotShadow,jt.rectAreaLights.value=ft.state.rectArea,jt.ltc_1.value=ft.state.rectAreaLTC1,jt.ltc_2.value=ft.state.rectAreaLTC2,jt.pointLights.value=ft.state.point,jt.pointLightShadows.value=ft.state.pointShadow,jt.hemisphereLights.value=ft.state.hemi,jt.directionalShadowMap.value=ft.state.directionalShadowMap,jt.directionalShadowMatrix.value=ft.state.directionalShadowMatrix,jt.spotShadowMap.value=ft.state.spotShadowMap,jt.spotShadowMatrix.value=ft.state.spotShadowMatrix,jt.pointShadowMap.value=ft.state.pointShadowMap,jt.pointShadowMatrix.value=ft.state.pointShadowMatrix);const Xn=hn.getUniforms(),Jr=ac.seqWithValue(Xn.seq,jt);return Ze.currentProgram=hn,Ze.uniformsList=Jr,hn}function Nr(he,qe){const st=Ie.get(he);st.outputEncoding=qe.outputEncoding,st.instancing=qe.instancing,st.skinning=qe.skinning,st.morphTargets=qe.morphTargets,st.morphNormals=qe.morphNormals,st.morphColors=qe.morphColors,st.morphTargetsCount=qe.morphTargetsCount,st.numClippingPlanes=qe.numClippingPlanes,st.numIntersection=qe.numClipIntersection,st.vertexAlphas=qe.vertexAlphas,st.vertexTangents=qe.vertexTangents,st.toneMapping=qe.toneMapping}function xi(he,qe,st,Ze,ft){qe.isScene!==!0&&(qe=Be),Ue.resetTextureUnits();const tn=qe.fog,mn=Ze.isMeshStandardMaterial?qe.environment:null,Cn=C===null?_.outputEncoding:C.isXRRenderTarget===!0?C.texture.encoding:gc,Sn=(Ze.isMeshStandardMaterial?De:k).get(Ze.envMap||mn),Tn=Ze.vertexColors===!0&&!!st.attributes.color&&st.attributes.color.itemSize===4,hn=!!Ze.normalMap&&!!st.attributes.tangent,jt=!!st.morphAttributes.position,Xn=!!st.morphAttributes.normal,Jr=!!st.morphAttributes.color,dn=Ze.toneMapped?_.toneMapping:ic,oi=st.morphAttributes.position||st.morphAttributes.normal||st.morphAttributes.color,m0=oi!==void 0?oi.length:0,Dn=Ie.get(Ze),Ur=f.state.lights;if(O===!0&&(G===!0||he!==D)){const b=he===D&&Ze.id===V;_e.setState(Ze,he,b)}let en=!1;Ze.version===Dn.__version?(Dn.needsLights&&Dn.lightsStateVersion!==Ur.state.version||Dn.outputEncoding!==Cn||ft.isInstancedMesh&&Dn.instancing===!1||!ft.isInstancedMesh&&Dn.instancing===!0||ft.isSkinnedMesh&&Dn.skinning===!1||!ft.isSkinnedMesh&&Dn.skinning===!0||Dn.envMap!==Sn||Ze.fog&&Dn.fog!==tn||Dn.numClippingPlanes!==void 0&&(Dn.numClippingPlanes!==_e.numPlanes||Dn.numIntersection!==_e.numIntersection)||Dn.vertexAlphas!==Tn||Dn.vertexTangents!==hn||Dn.morphTargets!==jt||Dn.morphNormals!==Xn||Dn.morphColors!==Jr||Dn.toneMapping!==dn||Ke.isWebGL2===!0&&Dn.morphTargetsCount!==m0)&&(en=!0):(en=!0,Dn.__version=Ze.version);let Rt=Dn.currentProgram;en===!0&&(Rt=$t(Ze,qe,ft));let D0=!1,vi=!1,Vr=!1;const sn=Rt.getUniforms(),E0=Dn.uniforms;if(tt.useProgram(Rt.program)&&(D0=!0,vi=!0,Vr=!0),Ze.id!==V&&(V=Ze.id,vi=!0),D0||D!==he){if(sn.setValue(ye,"projectionMatrix",he.projectionMatrix),Ke.logarithmicDepthBuffer&&sn.setValue(ye,"logDepthBufFC",2/(Math.log(he.far+1)/Math.LN2)),D!==he&&(D=he,vi=!0,Vr=!0),Ze.isShaderMaterial||Ze.isMeshPhongMaterial||Ze.isMeshToonMaterial||Ze.isMeshStandardMaterial||Ze.envMap){const b=sn.map.cameraPosition;b!==void 0&&b.setValue(ye,Re.setFromMatrixPosition(he.matrixWorld))}(Ze.isMeshPhongMaterial||Ze.isMeshToonMaterial||Ze.isMeshLambertMaterial||Ze.isMeshBasicMaterial||Ze.isMeshStandardMaterial||Ze.isShaderMaterial)&&sn.setValue(ye,"isOrthographic",he.isOrthographicCamera===!0),(Ze.isMeshPhongMaterial||Ze.isMeshToonMaterial||Ze.isMeshLambertMaterial||Ze.isMeshBasicMaterial||Ze.isMeshStandardMaterial||Ze.isShaderMaterial||Ze.isShadowMaterial||ft.isSkinnedMesh)&&sn.setValue(ye,"viewMatrix",he.matrixWorldInverse)}if(ft.isSkinnedMesh){sn.setOptional(ye,ft,"bindMatrix"),sn.setOptional(ye,ft,"bindMatrixInverse");const b=ft.skeleton;b&&(Ke.floatVertexTextures?(b.boneTexture===null&&b.computeBoneTexture(),sn.setValue(ye,"boneTexture",b.boneTexture,Ue),sn.setValue(ye,"boneTextureSize",b.boneTextureSize)):sn.setOptional(ye,b,"boneMatrices"))}const Ni=st.morphAttributes;return(Ni.position!==void 0||Ni.normal!==void 0||Ni.color!==void 0&&Ke.isWebGL2===!0)&&Pe.update(ft,st,Ze,Rt),(vi||Dn.receiveShadow!==ft.receiveShadow)&&(Dn.receiveShadow=ft.receiveShadow,sn.setValue(ye,"receiveShadow",ft.receiveShadow)),vi&&(sn.setValue(ye,"toneMappingExposure",_.toneMappingExposure),Dn.needsLights&&gn(E0,Vr),tn&&Ze.fog&&He.refreshFogUniforms(E0,tn),He.refreshMaterialUniforms(E0,Ze,z,$,ne),ac.upload(ye,Dn.uniformsList,E0,Ue)),Ze.isShaderMaterial&&Ze.uniformsNeedUpdate===!0&&(ac.upload(ye,Dn.uniformsList,E0,Ue),Ze.uniformsNeedUpdate=!1),Ze.isSpriteMaterial&&sn.setValue(ye,"center",ft.center),sn.setValue(ye,"modelViewMatrix",ft.modelViewMatrix),sn.setValue(ye,"normalMatrix",ft.normalMatrix),sn.setValue(ye,"modelMatrix",ft.matrixWorld),Rt}function gn(he,qe){he.ambientLightColor.needsUpdate=qe,he.lightProbe.needsUpdate=qe,he.directionalLights.needsUpdate=qe,he.directionalLightShadows.needsUpdate=qe,he.pointLights.needsUpdate=qe,he.pointLightShadows.needsUpdate=qe,he.spotLights.needsUpdate=qe,he.spotLightShadows.needsUpdate=qe,he.rectAreaLights.needsUpdate=qe,he.hemisphereLights.needsUpdate=qe}function Q(he){return he.isMeshLambertMaterial||he.isMeshToonMaterial||he.isMeshPhongMaterial||he.isMeshStandardMaterial||he.isShadowMaterial||he.isShaderMaterial&&he.lights===!0}this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(he,qe,st){Ie.get(he.texture).__webglTexture=qe,Ie.get(he.depthTexture).__webglTexture=st;const Ze=Ie.get(he);Ze.__hasExternalTextures=!0,Ze.__hasExternalTextures&&(Ze.__autoAllocateDepthBuffer=st===void 0,Ze.__autoAllocateDepthBuffer||at.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ze.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(he,qe){const st=Ie.get(he);st.__webglFramebuffer=qe,st.__useDefaultFramebuffer=qe===void 0},this.setRenderTarget=function(he,qe=0,st=0){C=he,x=qe,v=st;let Ze=!0;if(he){const Sn=Ie.get(he);Sn.__useDefaultFramebuffer!==void 0?(tt.bindFramebuffer(36160,null),Ze=!1):Sn.__webglFramebuffer===void 0?Ue.setupRenderTarget(he):Sn.__hasExternalTextures&&Ue.rebindTextures(he,Ie.get(he.texture).__webglTexture,Ie.get(he.depthTexture).__webglTexture)}let ft=null,tn=!1,mn=!1;if(he){const Sn=he.texture;(Sn.isData3DTexture||Sn.isDataArrayTexture)&&(mn=!0);const Tn=Ie.get(he).__webglFramebuffer;he.isWebGLCubeRenderTarget?(ft=Tn[qe],tn=!0):Ke.isWebGL2&&he.samples>0&&Ue.useMultisampledRTT(he)===!1?ft=Ie.get(he).__webglMultisampledFramebuffer:ft=Tn,H.copy(he.viewport),R.copy(he.scissor),j=he.scissorTest}else H.copy(P).multiplyScalar(z).floor(),R.copy(ee).multiplyScalar(z).floor(),j=ue;if(tt.bindFramebuffer(36160,ft)&&Ke.drawBuffers&&Ze&&tt.drawBuffers(he,ft),tt.viewport(H),tt.scissor(R),tt.setScissorTest(j),tn){const Sn=Ie.get(he.texture);ye.framebufferTexture2D(36160,36064,34069+qe,Sn.__webglTexture,st)}else if(mn){const Sn=Ie.get(he.texture),Tn=qe||0;ye.framebufferTextureLayer(36160,36064,Sn.__webglTexture,st||0,Tn)}V=-1},this.readRenderTargetPixels=function(he,qe,st,Ze,ft,tn,mn){if(!(he&&he.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Cn=Ie.get(he).__webglFramebuffer;if(he.isWebGLCubeRenderTarget&&mn!==void 0&&(Cn=Cn[mn]),Cn){tt.bindFramebuffer(36160,Cn);try{const Sn=he.texture,Tn=Sn.format,hn=Sn.type;if(Tn!==Qi&&ve.convert(Tn)!==ye.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jt=hn===z1&&(at.has("EXT_color_buffer_half_float")||Ke.isWebGL2&&at.has("EXT_color_buffer_float"));if(hn!==ju&&ve.convert(hn)!==ye.getParameter(35738)&&!(hn===yu&&(Ke.isWebGL2||at.has("OES_texture_float")||at.has("WEBGL_color_buffer_float")))&&!jt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ye.checkFramebufferStatus(36160)===36053?qe>=0&&qe<=he.width-Ze&&st>=0&&st<=he.height-ft&&ye.readPixels(qe,st,Ze,ft,ve.convert(Tn),ve.convert(hn),tn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Sn=C!==null?Ie.get(C).__webglFramebuffer:null;tt.bindFramebuffer(36160,Sn)}}},this.copyFramebufferToTexture=function(he,qe,st=0){if(qe.isFramebufferTexture!==!0){console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");return}const Ze=Math.pow(2,-st),ft=Math.floor(qe.image.width*Ze),tn=Math.floor(qe.image.height*Ze);Ue.setTexture2D(qe,0),ye.copyTexSubImage2D(3553,st,0,0,he.x,he.y,ft,tn),tt.unbindTexture()},this.copyTextureToTexture=function(he,qe,st,Ze=0){const ft=qe.image.width,tn=qe.image.height,mn=ve.convert(st.format),Cn=ve.convert(st.type);Ue.setTexture2D(st,0),ye.pixelStorei(37440,st.flipY),ye.pixelStorei(37441,st.premultiplyAlpha),ye.pixelStorei(3317,st.unpackAlignment),qe.isDataTexture?ye.texSubImage2D(3553,Ze,he.x,he.y,ft,tn,mn,Cn,qe.image.data):qe.isCompressedTexture?ye.compressedTexSubImage2D(3553,Ze,he.x,he.y,qe.mipmaps[0].width,qe.mipmaps[0].height,mn,qe.mipmaps[0].data):ye.texSubImage2D(3553,Ze,he.x,he.y,mn,Cn,qe.image),Ze===0&&st.generateMipmaps&&ye.generateMipmap(3553),tt.unbindTexture()},this.copyTextureToTexture3D=function(he,qe,st,Ze,ft=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const tn=he.max.x-he.min.x+1,mn=he.max.y-he.min.y+1,Cn=he.max.z-he.min.z+1,Sn=ve.convert(Ze.format),Tn=ve.convert(Ze.type);let hn;if(Ze.isData3DTexture)Ue.setTexture3D(Ze,0),hn=32879;else if(Ze.isDataArrayTexture)Ue.setTexture2DArray(Ze,0),hn=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ye.pixelStorei(37440,Ze.flipY),ye.pixelStorei(37441,Ze.premultiplyAlpha),ye.pixelStorei(3317,Ze.unpackAlignment);const jt=ye.getParameter(3314),Xn=ye.getParameter(32878),Jr=ye.getParameter(3316),dn=ye.getParameter(3315),oi=ye.getParameter(32877),m0=st.isCompressedTexture?st.mipmaps[0]:st.image;ye.pixelStorei(3314,m0.width),ye.pixelStorei(32878,m0.height),ye.pixelStorei(3316,he.min.x),ye.pixelStorei(3315,he.min.y),ye.pixelStorei(32877,he.min.z),st.isDataTexture||st.isData3DTexture?ye.texSubImage3D(hn,ft,qe.x,qe.y,qe.z,tn,mn,Cn,Sn,Tn,m0.data):st.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ye.compressedTexSubImage3D(hn,ft,qe.x,qe.y,qe.z,tn,mn,Cn,Sn,m0.data)):ye.texSubImage3D(hn,ft,qe.x,qe.y,qe.z,tn,mn,Cn,Sn,Tn,m0),ye.pixelStorei(3314,jt),ye.pixelStorei(32878,Xn),ye.pixelStorei(3316,Jr),ye.pixelStorei(3315,dn),ye.pixelStorei(32877,oi),ft===0&&Ze.generateMipmaps&&ye.generateMipmap(hn),tt.unbindTexture()},this.initTexture=function(he){Ue.setTexture2D(he,0),tt.unbindTexture()},this.resetState=function(){x=0,v=0,C=null,tt.reset(),$e.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}f0.prototype.isWebGLRenderer=!0;class _J extends f0{}_J.prototype.isWebGL1Renderer=!0;class qh extends n0{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}qh.prototype.isScene=!0;class Op{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Xh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Mo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Op.prototype.isInterleavedBuffer=!0;const xr=new Se;class Qh{constructor(e,t,r,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)xr.x=this.getX(t),xr.y=this.getY(t),xr.z=this.getZ(t),xr.applyMatrix4(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)xr.x=this.getX(t),xr.y=this.getY(t),xr.z=this.getZ(t),xr.applyNormalMatrix(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)xr.x=this.getX(t),xr.y=this.getY(t),xr.z=this.getZ(t),xr.transformDirection(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new v0(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Qh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Qh.prototype.isInterleavedBufferAttribute=!0;class vE extends Qr{constructor(e){super(),this.type="SpriteMaterial",this.color=new Jt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}vE.prototype.isSpriteMaterial=!0;let l1;const Lf=new Se,c1=new Se,u1=new Se,d1=new pt,Bf=new pt,Z6=new un,yS=new Se,Mf=new Se,ES=new Se,OT=new pt,dv=new pt,kT=new pt;class xJ extends n0{constructor(e){if(super(),this.type="Sprite",l1===void 0){l1=new y0;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Op(t,5);l1.setIndex([0,1,2,0,2,3]),l1.setAttribute("position",new Qh(r,3,0,!1)),l1.setAttribute("uv",new Qh(r,2,3,!1))}this.geometry=l1,this.material=e!==void 0?e:new vE,this.center=new pt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),c1.setFromMatrixScale(this.matrixWorld),Z6.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),u1.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&c1.multiplyScalar(-u1.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const o=this.center;CS(yS.set(-.5,-.5,0),u1,o,c1,i,a),CS(Mf.set(.5,-.5,0),u1,o,c1,i,a),CS(ES.set(.5,.5,0),u1,o,c1,i,a),OT.set(0,0),dv.set(1,0),kT.set(1,1);let s=e.ray.intersectTriangle(yS,Mf,ES,!1,Lf);if(s===null&&(CS(Mf.set(-.5,.5,0),u1,o,c1,i,a),dv.set(0,1),s=e.ray.intersectTriangle(yS,ES,Mf,!1,Lf),s===null))return;const l=e.ray.origin.distanceTo(Lf);l<e.near||l>e.far||t.push({distance:l,point:Lf.clone(),uv:Lr.getUV(Lf,yS,Mf,ES,OT,dv,kT,new pt),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}xJ.prototype.isSprite=!0;function CS(n,e,t,r,i,a){d1.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Bf.x=a*d1.x-i*d1.y,Bf.y=i*d1.x+a*d1.y):Bf.copy(d1),n.copy(e),n.x+=Bf.x,n.y+=Bf.y,n.applyMatrix4(Z6)}const NT=new Se,UT=new x0,jT=new x0,vJ=new Se,GT=new un;class $6 extends Mi{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new un,this.bindMatrixInverse=new un}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new x0,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;UT.fromBufferAttribute(i.attributes.skinIndex,e),jT.fromBufferAttribute(i.attributes.skinWeight,e),NT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const o=jT.getComponent(a);if(o!==0){const s=UT.getComponent(a);GT.multiplyMatrices(r.bones[s].matrixWorld,r.boneInverses[s]),t.addScaledVector(vJ.copy(NT).applyMatrix4(GT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}$6.prototype.isSkinnedMesh=!0;class wJ extends n0{constructor(){super(),this.type="Bone"}}wJ.prototype.isBone=!0;class yJ extends qr{constructor(e=null,t=1,r=1,i,a,o,s,l,u=Kr,d=Kr,h,f){super(null,o,s,l,u,d,i,a,h,f),this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}yJ.prototype.isDataTexture=!0;class sy extends v0{constructor(e,t,r,i=1){typeof r=="number"&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}sy.prototype.isInstancedBufferAttribute=!0;const HT=new un,zT=new un,VS=[],If=new Mi;class EJ extends Mi{constructor(e,t,r){super(e,t),this.instanceMatrix=new sy(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(If.geometry=this.geometry,If.material=this.material,If.material!==void 0)for(let a=0;a<i;a++){this.getMatrixAt(a,HT),zT.multiplyMatrices(r,HT),If.matrixWorld=zT,If.raycast(e,VS);for(let o=0,s=VS.length;o<s;o++){const l=VS[o];l.instanceId=a,l.object=this,t.push(l)}VS.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new sy(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}EJ.prototype.isInstancedMesh=!0;class Rc extends Qr{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Jt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Rc.prototype.isLineBasicMaterial=!0;const WT=new Se,XT=new Se,KT=new un,Av=new BA,DS=new $u;class wE extends n0{constructor(e=new y0,t=new Rc){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,a=t.count;i<a;i++)WT.fromBufferAttribute(t,i-1),XT.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=WT.distanceTo(XT);e.setAttribute("lineDistance",new B0(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),DS.copy(r.boundingSphere),DS.applyMatrix4(i),DS.radius+=a,e.ray.intersectsSphere(DS)===!1)return;KT.copy(i).invert(),Av.copy(e.ray).applyMatrix4(KT);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,u=new Se,d=new Se,h=new Se,f=new Se,m=this.isLineSegments?2:1;if(r.isBufferGeometry){const g=r.index,E=r.attributes.position;if(g!==null){const x=Math.max(0,o.start),v=Math.min(g.count,o.start+o.count);for(let C=x,V=v-1;C<V;C+=m){const D=g.getX(C),H=g.getX(C+1);if(u.fromBufferAttribute(E,D),d.fromBufferAttribute(E,H),Av.distanceSqToSegment(u,d,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const j=e.ray.origin.distanceTo(f);j<e.near||j>e.far||t.push({distance:j,point:h.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}else{const x=Math.max(0,o.start),v=Math.min(E.count,o.start+o.count);for(let C=x,V=v-1;C<V;C+=m){if(u.fromBufferAttribute(E,C),d.fromBufferAttribute(E,C+1),Av.distanceSqToSegment(u,d,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const H=e.ray.origin.distanceTo(f);H<e.near||H>e.far||t.push({distance:H,point:h.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}wE.prototype.isLine=!0;const YT=new Se,qT=new Se;class kp extends wE{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,a=t.count;i<a;i+=2)YT.fromBufferAttribute(t,i),qT.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+YT.distanceTo(qT);e.setAttribute("lineDistance",new B0(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}kp.prototype.isLineSegments=!0;class CJ extends wE{constructor(e,t){super(e,t),this.type="LineLoop"}}CJ.prototype.isLineLoop=!0;class yE extends Qr{constructor(e){super(),this.type="PointsMaterial",this.color=new Jt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}yE.prototype.isPointsMaterial=!0;const QT=new un,ly=new BA,FS=new $u,TS=new Se;class VJ extends n0{constructor(e=new y0,t=new yE){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),FS.copy(r.boundingSphere),FS.applyMatrix4(i),FS.radius+=a,e.ray.intersectsSphere(FS)===!1)return;QT.copy(i).invert(),ly.copy(e.ray).applyMatrix4(QT);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s;if(r.isBufferGeometry){const u=r.index,h=r.attributes.position;if(u!==null){const f=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let g=f,_=m;g<_;g++){const E=u.getX(g);TS.fromBufferAttribute(h,E),JT(TS,E,l,i,e,t,this)}}else{const f=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let g=f,_=m;g<_;g++)TS.fromBufferAttribute(h,g),JT(TS,g,l,i,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}VJ.prototype.isPoints=!0;function JT(n,e,t,r,i,a,o){const s=ly.distanceSqToPoint(n);if(s<t){const l=new Se;ly.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:o})}}class DJ extends qr{constructor(e,t,r,i,a,o,s,l,u){super(e,t,r,i,a,o,s,l,u),this.minFilter=o!==void 0?o:pi,this.magFilter=a!==void 0?a:pi,this.generateMipmaps=!1;const d=this;function h(){d.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}DJ.prototype.isVideoTexture=!0;class FJ extends qr{constructor(e,t,r){super({width:e,height:t}),this.format=r,this.magFilter=Kr,this.minFilter=Kr,this.generateMipmaps=!1,this.needsUpdate=!0}}FJ.prototype.isFramebufferTexture=!0;class TJ extends qr{constructor(e,t,r,i,a,o,s,l,u,d,h,f){super(null,o,s,l,u,d,i,a,h,f),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}TJ.prototype.isCompressedTexture=!0;class bJ extends qr{constructor(e,t,r,i,a,o,s,l,u){super(e,t,r,i,a,o,s,l,u),this.needsUpdate=!0}}bJ.prototype.isCanvasTexture=!0;const bS=new Se,PS=new Se,fv=new Se,RS=new Lr;class PJ extends y0{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),a=Math.cos(X1*t),o=e.getIndex(),s=e.getAttribute("position"),l=o?o.count:s.count,u=[0,0,0],d=["a","b","c"],h=new Array(3),f={},m=[];for(let g=0;g<l;g+=3){o?(u[0]=o.getX(g),u[1]=o.getX(g+1),u[2]=o.getX(g+2)):(u[0]=g,u[1]=g+1,u[2]=g+2);const{a:_,b:E,c:x}=RS;if(_.fromBufferAttribute(s,u[0]),E.fromBufferAttribute(s,u[1]),x.fromBufferAttribute(s,u[2]),RS.getNormal(fv),h[0]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,h[1]=`${Math.round(E.x*i)},${Math.round(E.y*i)},${Math.round(E.z*i)}`,h[2]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let v=0;v<3;v++){const C=(v+1)%3,V=h[v],D=h[C],H=RS[d[v]],R=RS[d[C]],j=`${V}_${D}`,te=`${D}_${V}`;te in f&&f[te]?(fv.dot(f[te].normal)<=a&&(m.push(H.x,H.y,H.z),m.push(R.x,R.y,R.z)),f[te]=null):j in f||(f[j]={index0:u[v],index1:u[C],normal:fv.clone()})}}for(const g in f)if(f[g]){const{index0:_,index1:E}=f[g];bS.fromBufferAttribute(s,_),PS.fromBufferAttribute(s,E),m.push(bS.x,bS.y,bS.z),m.push(PS.x,PS.y,PS.z)}this.setAttribute("position",new B0(m,3))}}}class ao{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),a=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),a+=r.distanceTo(i),t.push(a),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const a=r.length;let o;t?o=t:o=e*r[a-1];let s=0,l=a-1,u;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),u=r[i]-o,u<0)s=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(a-1);const d=r[i],f=r[i+1]-d,m=(o-d)/f;return(i+m)/(a-1)}getTangent(e,t){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const o=this.getPoint(i),s=this.getPoint(a),l=t||(o.isVector2?new pt:new Se);return l.copy(s).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new Se,i=[],a=[],o=[],s=new Se,l=new un;for(let m=0;m<=e;m++){const g=m/e;i[m]=this.getTangentAt(g,new Se)}a[0]=new Se,o[0]=new Se;let u=Number.MAX_VALUE;const d=Math.abs(i[0].x),h=Math.abs(i[0].y),f=Math.abs(i[0].z);d<=u&&(u=d,r.set(1,0,0)),h<=u&&(u=h,r.set(0,1,0)),f<=u&&r.set(0,0,1),s.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],s),o[0].crossVectors(i[0],a[0]);for(let m=1;m<=e;m++){if(a[m]=a[m-1].clone(),o[m]=o[m-1].clone(),s.crossVectors(i[m-1],i[m]),s.length()>Number.EPSILON){s.normalize();const g=Math.acos(qi(i[m-1].dot(i[m]),-1,1));a[m].applyMatrix4(l.makeRotationAxis(s,g))}o[m].crossVectors(i[m],a[m])}if(t===!0){let m=Math.acos(qi(a[0].dot(a[e]),-1,1));m/=e,i[0].dot(s.crossVectors(a[0],a[e]))>0&&(m=-m);for(let g=1;g<=e;g++)a[g].applyMatrix4(l.makeRotationAxis(i[g],m*g)),o[g].crossVectors(i[g],a[g])}return{tangents:i,normals:a,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class x_ extends ao{constructor(e=0,t=0,r=1,i=1,a=0,o=Math.PI*2,s=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=s,this.aRotation=l}getPoint(e,t){const r=t||new pt,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const o=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(o?a=0:a=i),this.aClockwise===!0&&!o&&(a===i?a=-i:a=a-i);const s=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(s),u=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){const d=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,m=u-this.aY;l=f*d-m*h+this.aX,u=f*h+m*d+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}x_.prototype.isEllipseCurve=!0;class eI extends x_{constructor(e,t,r,i,a,o){super(e,t,r,r,i,a,o),this.type="ArcCurve"}}eI.prototype.isArcCurve=!0;function EE(){let n=0,e=0,t=0,r=0;function i(a,o,s,l){n=a,e=s,t=-3*a+3*o-2*s-l,r=2*a-2*o+s+l}return{initCatmullRom:function(a,o,s,l,u){i(o,s,u*(s-a),u*(l-o))},initNonuniformCatmullRom:function(a,o,s,l,u,d,h){let f=(o-a)/u-(s-a)/(u+d)+(s-o)/d,m=(s-o)/d-(l-o)/(d+h)+(l-s)/h;f*=d,m*=d,i(o,s,f,m)},calc:function(a){const o=a*a,s=o*a;return n+e*a+t*o+r*s}}}const LS=new Se,hv=new EE,pv=new EE,mv=new EE;class tI extends ao{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new Se){const r=t,i=this.points,a=i.length,o=(a-(this.closed?0:1))*e;let s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:l===0&&s===a-1&&(s=a-2,l=1);let u,d;this.closed||s>0?u=i[(s-1)%a]:(LS.subVectors(i[0],i[1]).add(i[0]),u=LS);const h=i[s%a],f=i[(s+1)%a];if(this.closed||s+2<a?d=i[(s+2)%a]:(LS.subVectors(i[a-1],i[a-2]).add(i[a-1]),d=LS),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(h),m),_=Math.pow(h.distanceToSquared(f),m),E=Math.pow(f.distanceToSquared(d),m);_<1e-4&&(_=1),g<1e-4&&(g=_),E<1e-4&&(E=_),hv.initNonuniformCatmullRom(u.x,h.x,f.x,d.x,g,_,E),pv.initNonuniformCatmullRom(u.y,h.y,f.y,d.y,g,_,E),mv.initNonuniformCatmullRom(u.z,h.z,f.z,d.z,g,_,E)}else this.curveType==="catmullrom"&&(hv.initCatmullRom(u.x,h.x,f.x,d.x,this.tension),pv.initCatmullRom(u.y,h.y,f.y,d.y,this.tension),mv.initCatmullRom(u.z,h.z,f.z,d.z,this.tension));return r.set(hv.calc(l),pv.calc(l),mv.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Se().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}tI.prototype.isCatmullRomCurve3=!0;function ZT(n,e,t,r,i){const a=(r-e)*.5,o=(i-t)*.5,s=n*n,l=n*s;return(2*t-2*r+a+o)*l+(-3*t+3*r-2*a-o)*s+a*n+t}function RJ(n,e){const t=1-n;return t*t*e}function LJ(n,e){return 2*(1-n)*n*e}function BJ(n,e){return n*n*e}function gh(n,e,t,r){return RJ(n,e)+LJ(n,t)+BJ(n,r)}function MJ(n,e){const t=1-n;return t*t*t*e}function IJ(n,e){const t=1-n;return 3*t*t*n*e}function OJ(n,e){return 3*(1-n)*n*n*e}function kJ(n,e){return n*n*n*e}function _h(n,e,t,r,i){return MJ(n,e)+IJ(n,t)+OJ(n,r)+kJ(n,i)}class CE extends ao{constructor(e=new pt,t=new pt,r=new pt,i=new pt){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new pt){const r=t,i=this.v0,a=this.v1,o=this.v2,s=this.v3;return r.set(_h(e,i.x,a.x,o.x,s.x),_h(e,i.y,a.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}CE.prototype.isCubicBezierCurve=!0;class nI extends ao{constructor(e=new Se,t=new Se,r=new Se,i=new Se){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Se){const r=t,i=this.v0,a=this.v1,o=this.v2,s=this.v3;return r.set(_h(e,i.x,a.x,o.x,s.x),_h(e,i.y,a.y,o.y,s.y),_h(e,i.z,a.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}nI.prototype.isCubicBezierCurve3=!0;class v_ extends ao{constructor(e=new pt,t=new pt){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new pt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new pt;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}v_.prototype.isLineCurve=!0;class NJ extends ao{constructor(e=new Se,t=new Se){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new Se){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class VE extends ao{constructor(e=new pt,t=new pt,r=new pt){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new pt){const r=t,i=this.v0,a=this.v1,o=this.v2;return r.set(gh(e,i.x,a.x,o.x),gh(e,i.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}VE.prototype.isQuadraticBezierCurve=!0;class rI extends ao{constructor(e=new Se,t=new Se,r=new Se){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Se){const r=t,i=this.v0,a=this.v1,o=this.v2;return r.set(gh(e,i.x,a.x,o.x),gh(e,i.y,a.y,o.y),gh(e,i.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}rI.prototype.isQuadraticBezierCurve3=!0;class DE extends ao{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new pt){const r=t,i=this.points,a=(i.length-1)*e,o=Math.floor(a),s=a-o,l=i[o===0?o:o-1],u=i[o],d=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(ZT(s,l.x,u.x,d.x,h.x),ZT(s,l.y,u.y,d.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new pt().fromArray(i))}return this}}DE.prototype.isSplineCurve=!0;var iI=Object.freeze({__proto__:null,ArcCurve:eI,CatmullRomCurve3:tI,CubicBezierCurve:CE,CubicBezierCurve3:nI,EllipseCurve:x_,LineCurve:v_,LineCurve3:NJ,QuadraticBezierCurve:VE,QuadraticBezierCurve3:rI,SplineCurve:DE});class UJ extends ao{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new v_(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=r){const o=i[a]-r,s=this.curves[a],l=s.getLength(),u=l===0?0:1-o/l;return s.getPointAt(u,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,a=this.curves;i<a.length;i++){const o=a[i],s=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(s);for(let u=0;u<l.length;u++){const d=l[u];r&&r.equals(d)||(t.push(d),r=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new iI[i.type]().fromJSON(i))}return this}}class cy extends UJ{constructor(e){super(),this.type="Path",this.currentPoint=new pt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new v_(this.currentPoint.clone(),new pt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const a=new VE(this.currentPoint.clone(),new pt(e,t),new pt(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,a,o){const s=new CE(this.currentPoint.clone(),new pt(e,t),new pt(r,i),new pt(a,o));return this.curves.push(s),this.currentPoint.set(a,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new DE(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,a,o){const s=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+s,t+l,r,i,a,o),this}absarc(e,t,r,i,a,o){return this.absellipse(e,t,r,r,i,a,o),this}ellipse(e,t,r,i,a,o,s,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+u,t+d,r,i,a,o,s,l),this}absellipse(e,t,r,i,a,o,s,l){const u=new x_(e,t,r,i,a,o,s,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Np extends cy{constructor(e){super(e),this.uuid=Mo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new cy().fromJSON(i))}return this}}const jJ={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let a=aI(n,0,i,t,!0);const o=[];if(!a||a.next===a.prev)return o;let s,l,u,d,h,f,m;if(r&&(a=XJ(n,e,a,t)),n.length>80*t){s=u=n[0],l=d=n[1];for(let g=t;g<i;g+=t)h=n[g],f=n[g+1],h<s&&(s=h),f<l&&(l=f),h>u&&(u=h),f>d&&(d=f);m=Math.max(u-s,d-l),m=m!==0?1/m:0}return Jh(a,o,t,s,l,m),o}};function aI(n,e,t,r,i){let a,o;if(i===rZ(n,e,t,r)>0)for(a=e;a<t;a+=r)o=$T(a,n[a],n[a+1],o);else for(a=t-r;a>=e;a-=r)o=$T(a,n[a],n[a+1],o);return o&&w_(o,o.next)&&($h(o),o=o.next),o}function _c(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(w_(t,t.next)||ar(t.prev,t,t.next)===0)){if($h(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Jh(n,e,t,r,i,a,o){if(!n)return;!o&&a&&JJ(n,r,i,a);let s=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,a?HJ(n,r,i,a):GJ(n)){e.push(l.i/t),e.push(n.i/t),e.push(u.i/t),$h(n),n=u.next,s=u.next;continue}if(n=u,n===s){o?o===1?(n=zJ(_c(n),e,t),Jh(n,e,t,r,i,a,2)):o===2&&WJ(n,e,t,r,i,a):Jh(_c(n),e,t,r,i,a,1);break}}}function GJ(n){const e=n.prev,t=n,r=n.next;if(ar(e,t,r)>=0)return!1;let i=n.next.next;for(;i!==n.prev;){if(D1(e.x,e.y,t.x,t.y,r.x,r.y,i.x,i.y)&&ar(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function HJ(n,e,t,r){const i=n.prev,a=n,o=n.next;if(ar(i,a,o)>=0)return!1;const s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,u=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,d=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=uy(s,l,e,t,r),f=uy(u,d,e,t,r);let m=n.prevZ,g=n.nextZ;for(;m&&m.z>=h&&g&&g.z<=f;){if(m!==n.prev&&m!==n.next&&D1(i.x,i.y,a.x,a.y,o.x,o.y,m.x,m.y)&&ar(m.prev,m,m.next)>=0||(m=m.prevZ,g!==n.prev&&g!==n.next&&D1(i.x,i.y,a.x,a.y,o.x,o.y,g.x,g.y)&&ar(g.prev,g,g.next)>=0))return!1;g=g.nextZ}for(;m&&m.z>=h;){if(m!==n.prev&&m!==n.next&&D1(i.x,i.y,a.x,a.y,o.x,o.y,m.x,m.y)&&ar(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;g&&g.z<=f;){if(g!==n.prev&&g!==n.next&&D1(i.x,i.y,a.x,a.y,o.x,o.y,g.x,g.y)&&ar(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function zJ(n,e,t){let r=n;do{const i=r.prev,a=r.next.next;!w_(i,a)&&oI(i,r,r.next,a)&&Zh(i,a)&&Zh(a,i)&&(e.push(i.i/t),e.push(r.i/t),e.push(a.i/t),$h(r),$h(r.next),r=n=a),r=r.next}while(r!==n);return _c(r)}function WJ(n,e,t,r,i,a){let o=n;do{let s=o.next.next;for(;s!==o.prev;){if(o.i!==s.i&&eZ(o,s)){let l=sI(o,s);o=_c(o,o.next),l=_c(l,l.next),Jh(o,e,t,r,i,a),Jh(l,e,t,r,i,a);return}s=s.next}o=o.next}while(o!==n)}function XJ(n,e,t,r){const i=[];let a,o,s,l,u;for(a=0,o=e.length;a<o;a++)s=e[a]*r,l=a<o-1?e[a+1]*r:n.length,u=aI(n,s,l,r,!1),u===u.next&&(u.steiner=!0),i.push($J(u));for(i.sort(KJ),a=0;a<i.length;a++)YJ(i[a],t),t=_c(t,t.next);return t}function KJ(n,e){return n.x-e.x}function YJ(n,e){if(e=qJ(n,e),e){const t=sI(e,n);_c(e,e.next),_c(t,t.next)}}function qJ(n,e){let t=e;const r=n.x,i=n.y;let a=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const f=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=r&&f>a){if(a=f,f===r){if(i===t.y)return t;if(i===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(r===a)return o;const s=o,l=o.x,u=o.y;let d=1/0,h;t=o;do r>=t.x&&t.x>=l&&r!==t.x&&D1(i<u?r:a,i,l,u,i<u?a:r,i,t.x,t.y)&&(h=Math.abs(i-t.y)/(r-t.x),Zh(t,n)&&(h<d||h===d&&(t.x>o.x||t.x===o.x&&QJ(o,t)))&&(o=t,d=h)),t=t.next;while(t!==s);return o}function QJ(n,e){return ar(n.prev,n,e.prev)<0&&ar(e.next,n,n.next)<0}function JJ(n,e,t,r){let i=n;do i.z===null&&(i.z=uy(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,ZJ(i)}function ZJ(n){let e,t,r,i,a,o,s,l,u=1;do{for(t=n,n=null,a=null,o=0;t;){for(o++,r=t,s=0,e=0;e<u&&(s++,r=r.nextZ,!!r);e++);for(l=u;s>0||l>0&&r;)s!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:n=i,i.prevZ=a,a=i;t=r}a.nextZ=null,u*=2}while(o>1);return n}function uy(n,e,t,r,i){return n=32767*(n-t)*i,e=32767*(e-r)*i,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function $J(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function D1(n,e,t,r,i,a,o,s){return(i-o)*(e-s)-(n-o)*(a-s)>=0&&(n-o)*(r-s)-(t-o)*(e-s)>=0&&(t-o)*(a-s)-(i-o)*(r-s)>=0}function eZ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!tZ(n,e)&&(Zh(n,e)&&Zh(e,n)&&nZ(n,e)&&(ar(n.prev,n,e.prev)||ar(n,e.prev,e))||w_(n,e)&&ar(n.prev,n,n.next)>0&&ar(e.prev,e,e.next)>0)}function ar(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function w_(n,e){return n.x===e.x&&n.y===e.y}function oI(n,e,t,r){const i=MS(ar(n,e,t)),a=MS(ar(n,e,r)),o=MS(ar(t,r,n)),s=MS(ar(t,r,e));return!!(i!==a&&o!==s||i===0&&BS(n,t,e)||a===0&&BS(n,r,e)||o===0&&BS(t,n,r)||s===0&&BS(t,e,r))}function BS(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function MS(n){return n>0?1:n<0?-1:0}function tZ(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&oI(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Zh(n,e){return ar(n.prev,n,n.next)<0?ar(n,e,n.next)>=0&&ar(n,n.prev,e)>=0:ar(n,e,n.prev)<0||ar(n,n.next,e)<0}function nZ(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function sI(n,e){const t=new dy(n.i,n.x,n.y),r=new dy(e.i,e.x,e.y),i=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,a.next=r,r.prev=a,r}function $T(n,e,t,r){const i=new dy(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function $h(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function dy(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function rZ(n,e,t,r){let i=0;for(let a=e,o=t-r;a<t;a+=r)i+=(n[o]-n[a])*(n[a+1]+n[o+1]),o=a;return i}class oc{static area(e){const t=e.length;let r=0;for(let i=t-1,a=0;a<t;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return oc.area(e)<0}static triangulateShape(e,t){const r=[],i=[],a=[];eb(e),tb(r,e);let o=e.length;t.forEach(eb);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,tb(r,t[l]);const s=jJ.triangulate(r,i);for(let l=0;l<s.length;l+=3)a.push(s.slice(l,l+3));return a}}function eb(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function tb(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class IA extends y0{constructor(e=new Np([new pt(.5,.5),new pt(-.5,.5),new pt(-.5,-.5),new pt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],a=[];for(let s=0,l=e.length;s<l;s++){const u=e[s];o(u)}this.setAttribute("position",new B0(i,3)),this.setAttribute("uv",new B0(a,2)),this.computeVertexNormals();function o(s){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1;let h=t.depth!==void 0?t.depth:1,f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:m-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,E=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,v=t.UVGenerator!==void 0?t.UVGenerator:iZ;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),h=t.amount);let C,V=!1,D,H,R,j;x&&(C=x.getSpacedPoints(d),V=!0,f=!1,D=x.computeFrenetFrames(d,!1),H=new Se,R=new Se,j=new Se),f||(E=0,m=0,g=0,_=0);const te=s.extractPoints(u);let $=te.shape;const z=te.holes;if(!oc.isClockWise($)){$=$.reverse();for(let Ie=0,Ue=z.length;Ie<Ue;Ie++){const k=z[Ie];oc.isClockWise(k)&&(z[Ie]=k.reverse())}}const q=oc.triangulateShape($,z),P=$;for(let Ie=0,Ue=z.length;Ie<Ue;Ie++){const k=z[Ie];$=$.concat(k)}function ee(Ie,Ue,k){return Ue||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ue.clone().multiplyScalar(k).add(Ie)}const ue=$.length,U=q.length;function O(Ie,Ue,k){let De,we,le;const re=Ie.x-Ue.x,fe=Ie.y-Ue.y,He=k.x-Ie.x,oe=k.y-Ie.y,Y=re*re+fe*fe,_e=re*oe-fe*He;if(Math.abs(_e)>Number.EPSILON){const Fe=Math.sqrt(Y),Le=Math.sqrt(He*He+oe*oe),Pe=Ue.x-fe/Fe,rt=Ue.y+re/Fe,Ee=k.x-oe/Le,ve=k.y+He/Le,$e=((Ee-Pe)*oe-(ve-rt)*He)/(re*oe-fe*He);De=Pe+re*$e-Ie.x,we=rt+fe*$e-Ie.y;const _t=De*De+we*we;if(_t<=2)return new pt(De,we);le=Math.sqrt(_t/2)}else{let Fe=!1;re>Number.EPSILON?He>Number.EPSILON&&(Fe=!0):re<-Number.EPSILON?He<-Number.EPSILON&&(Fe=!0):Math.sign(fe)===Math.sign(oe)&&(Fe=!0),Fe?(De=-fe,we=re,le=Math.sqrt(Y)):(De=re,we=fe,le=Math.sqrt(Y/2))}return new pt(De/le,we/le)}const G=[];for(let Ie=0,Ue=P.length,k=Ue-1,De=Ie+1;Ie<Ue;Ie++,k++,De++)k===Ue&&(k=0),De===Ue&&(De=0),G[Ie]=O(P[Ie],P[k],P[De]);const ne=[];let se,ie=G.concat();for(let Ie=0,Ue=z.length;Ie<Ue;Ie++){const k=z[Ie];se=[];for(let De=0,we=k.length,le=we-1,re=De+1;De<we;De++,le++,re++)le===we&&(le=0),re===we&&(re=0),se[De]=O(k[De],k[le],k[re]);ne.push(se),ie=ie.concat(se)}for(let Ie=0;Ie<E;Ie++){const Ue=Ie/E,k=m*Math.cos(Ue*Math.PI/2),De=g*Math.sin(Ue*Math.PI/2)+_;for(let we=0,le=P.length;we<le;we++){const re=ee(P[we],G[we],De);We(re.x,re.y,-k)}for(let we=0,le=z.length;we<le;we++){const re=z[we];se=ne[we];for(let fe=0,He=re.length;fe<He;fe++){const oe=ee(re[fe],se[fe],De);We(oe.x,oe.y,-k)}}}const Re=g+_;for(let Ie=0;Ie<ue;Ie++){const Ue=f?ee($[Ie],ie[Ie],Re):$[Ie];V?(R.copy(D.normals[0]).multiplyScalar(Ue.x),H.copy(D.binormals[0]).multiplyScalar(Ue.y),j.copy(C[0]).add(R).add(H),We(j.x,j.y,j.z)):We(Ue.x,Ue.y,0)}for(let Ie=1;Ie<=d;Ie++)for(let Ue=0;Ue<ue;Ue++){const k=f?ee($[Ue],ie[Ue],Re):$[Ue];V?(R.copy(D.normals[Ie]).multiplyScalar(k.x),H.copy(D.binormals[Ie]).multiplyScalar(k.y),j.copy(C[Ie]).add(R).add(H),We(j.x,j.y,j.z)):We(k.x,k.y,h/d*Ie)}for(let Ie=E-1;Ie>=0;Ie--){const Ue=Ie/E,k=m*Math.cos(Ue*Math.PI/2),De=g*Math.sin(Ue*Math.PI/2)+_;for(let we=0,le=P.length;we<le;we++){const re=ee(P[we],G[we],De);We(re.x,re.y,h+k)}for(let we=0,le=z.length;we<le;we++){const re=z[we];se=ne[we];for(let fe=0,He=re.length;fe<He;fe++){const oe=ee(re[fe],se[fe],De);V?We(oe.x,oe.y+C[d-1].y,C[d-1].x+k):We(oe.x,oe.y,h+k)}}}Be(),Te();function Be(){const Ie=i.length/3;if(f){let Ue=0,k=ue*Ue;for(let De=0;De<U;De++){const we=q[De];at(we[2]+k,we[1]+k,we[0]+k)}Ue=d+E*2,k=ue*Ue;for(let De=0;De<U;De++){const we=q[De];at(we[0]+k,we[1]+k,we[2]+k)}}else{for(let Ue=0;Ue<U;Ue++){const k=q[Ue];at(k[2],k[1],k[0])}for(let Ue=0;Ue<U;Ue++){const k=q[Ue];at(k[0]+ue*d,k[1]+ue*d,k[2]+ue*d)}}r.addGroup(Ie,i.length/3-Ie,0)}function Te(){const Ie=i.length/3;let Ue=0;ye(P,Ue),Ue+=P.length;for(let k=0,De=z.length;k<De;k++){const we=z[k];ye(we,Ue),Ue+=we.length}r.addGroup(Ie,i.length/3-Ie,1)}function ye(Ie,Ue){let k=Ie.length;for(;--k>=0;){const De=k;let we=k-1;we<0&&(we=Ie.length-1);for(let le=0,re=d+E*2;le<re;le++){const fe=ue*le,He=ue*(le+1),oe=Ue+De+fe,Y=Ue+we+fe,_e=Ue+we+He,Fe=Ue+De+He;Ke(oe,Y,_e,Fe)}}}function We(Ie,Ue,k){l.push(Ie),l.push(Ue),l.push(k)}function at(Ie,Ue,k){tt(Ie),tt(Ue),tt(k);const De=i.length/3,we=v.generateTopUV(r,i,De-3,De-2,De-1);lt(we[0]),lt(we[1]),lt(we[2])}function Ke(Ie,Ue,k,De){tt(Ie),tt(Ue),tt(De),tt(Ue),tt(k),tt(De);const we=i.length/3,le=v.generateSideWallUV(r,i,we-6,we-3,we-2,we-1);lt(le[0]),lt(le[1]),lt(le[3]),lt(le[1]),lt(le[2]),lt(le[3])}function tt(Ie){i.push(l[Ie*3+0]),i.push(l[Ie*3+1]),i.push(l[Ie*3+2])}function lt(Ie){a.push(Ie.x),a.push(Ie.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return aZ(t,r,e)}static fromJSON(e,t){const r=[];for(let a=0,o=e.shapes.length;a<o;a++){const s=t[e.shapes[a]];r.push(s)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new iI[i.type]().fromJSON(i)),new IA(r,e.options)}}const iZ={generateTopUV:function(n,e,t,r,i){const a=e[t*3],o=e[t*3+1],s=e[r*3],l=e[r*3+1],u=e[i*3],d=e[i*3+1];return[new pt(a,o),new pt(s,l),new pt(u,d)]},generateSideWallUV:function(n,e,t,r,i,a){const o=e[t*3],s=e[t*3+1],l=e[t*3+2],u=e[r*3],d=e[r*3+1],h=e[r*3+2],f=e[i*3],m=e[i*3+1],g=e[i*3+2],_=e[a*3],E=e[a*3+1],x=e[a*3+2];return Math.abs(s-d)<Math.abs(o-u)?[new pt(o,1-l),new pt(u,1-h),new pt(f,1-g),new pt(_,1-x)]:[new pt(s,1-l),new pt(d,1-h),new pt(m,1-g),new pt(E,1-x)]}};function aZ(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const a=n[r];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class FE extends y0{constructor(e=new Np([new pt(0,.5),new pt(-.5,-.5),new pt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],a=[],o=[];let s=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let d=0;d<e.length;d++)u(e[d]),this.addGroup(s,l,d),s+=l,l=0;this.setIndex(r),this.setAttribute("position",new B0(i,3)),this.setAttribute("normal",new B0(a,3)),this.setAttribute("uv",new B0(o,2));function u(d){const h=i.length/3,f=d.extractPoints(t);let m=f.shape;const g=f.holes;oc.isClockWise(m)===!1&&(m=m.reverse());for(let E=0,x=g.length;E<x;E++){const v=g[E];oc.isClockWise(v)===!0&&(g[E]=v.reverse())}const _=oc.triangulateShape(m,g);for(let E=0,x=g.length;E<x;E++){const v=g[E];m=m.concat(v)}for(let E=0,x=m.length;E<x;E++){const v=m[E];i.push(v.x,v.y,0),a.push(0,0,1),o.push(v.x,v.y)}for(let E=0,x=_.length;E<x;E++){const v=_[E],C=v[0]+h,V=v[1]+h,D=v[2]+h;r.push(C,V,D),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return oZ(t,e)}static fromJSON(e,t){const r=[];for(let i=0,a=e.shapes.length;i<a;i++){const o=t[e.shapes[i]];r.push(o)}return new FE(r,e.curveSegments)}}function oZ(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class lI extends Qr{constructor(e){super(),this.type="ShadowMaterial",this.color=new Jt(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}lI.prototype.isShadowMaterial=!0;class cI extends Uo{constructor(e){super(e),this.type="RawShaderMaterial"}}cI.prototype.isRawShaderMaterial=!0;class TE extends Qr{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Jt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=LA,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}TE.prototype.isMeshStandardMaterial=!0;class uI extends TE{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return qi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Jt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Jt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Jt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}uI.prototype.isMeshPhysicalMaterial=!0;class dI extends Qr{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Jt(16777215),this.specular=new Jt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=LA,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=h_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}dI.prototype.isMeshPhongMaterial=!0;class AI extends Qr{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Jt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=LA,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}AI.prototype.isMeshToonMaterial=!0;class fI extends Qr{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=LA,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}fI.prototype.isMeshNormalMaterial=!0;class hI extends Qr{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=h_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}hI.prototype.isMeshLambertMaterial=!0;class pI extends Qr{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Jt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=LA,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}pI.prototype.isMeshMatcapMaterial=!0;class mI extends Rc{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}mI.prototype.isLineDashedMaterial=!0;const sZ={ShadowMaterial:lI,SpriteMaterial:vE,RawShaderMaterial:cI,ShaderMaterial:Uo,PointsMaterial:yE,MeshPhysicalMaterial:uI,MeshStandardMaterial:TE,MeshPhongMaterial:dI,MeshToonMaterial:AI,MeshNormalMaterial:fI,MeshLambertMaterial:hI,MeshDepthMaterial:_E,MeshDistanceMaterial:xE,MeshBasicMaterial:Lu,MeshMatcapMaterial:pI,LineDashedMaterial:mI,LineBasicMaterial:Rc,Material:Qr};Qr.fromType=function(n){return new sZ[n]};const Z0={arraySlice:function(n,e,t){return Z0.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(i,a){return n[i]-n[a]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r},sortedArray:function(n,e,t){const r=n.length,i=new n.constructor(r);for(let a=0,o=0;o!==r;++a){const s=t[a]*e;for(let l=0;l!==e;++l)i[o++]=n[s+l]}return i},flattenJSON:function(n,e,t,r){let i=1,a=n[0];for(;a!==void 0&&a[r]===void 0;)a=n[i++];if(a===void 0)return;let o=a[r];if(o!==void 0)if(Array.isArray(o))do o=a[r],o!==void 0&&(e.push(a.time),t.push.apply(t,o)),a=n[i++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[r],o!==void 0&&(e.push(a.time),o.toArray(t,t.length)),a=n[i++];while(a!==void 0);else do o=a[r],o!==void 0&&(e.push(a.time),t.push(o)),a=n[i++];while(a!==void 0)},subclip:function(n,e,t,r,i=30){const a=n.clone();a.name=e;const o=[];for(let l=0;l<a.tracks.length;++l){const u=a.tracks[l],d=u.getValueSize(),h=[],f=[];for(let m=0;m<u.times.length;++m){const g=u.times[m]*i;if(!(g<t||g>=r)){h.push(u.times[m]);for(let _=0;_<d;++_)f.push(u.values[m*d+_])}}h.length!==0&&(u.times=Z0.convertArray(h,u.times.constructor),u.values=Z0.convertArray(f,u.values.constructor),o.push(u))}a.tracks=o;let s=1/0;for(let l=0;l<a.tracks.length;++l)s>a.tracks[l].times[0]&&(s=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*s);return a.resetDuration(),a},makeClipAdditive:function(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,a=e/r;for(let o=0;o<i;++o){const s=t.tracks[o],l=s.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(x){return x.name===s.name&&x.ValueTypeName===l});if(u===void 0)continue;let d=0;const h=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);let f=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=m/3);const g=s.times.length-1;let _;if(a<=s.times[0]){const x=d,v=h-d;_=Z0.arraySlice(s.values,x,v)}else if(a>=s.times[g]){const x=g*h+d,v=x+h-d;_=Z0.arraySlice(s.values,x,v)}else{const x=s.createInterpolant(),v=d,C=h-d;x.evaluate(a),_=Z0.arraySlice(x.resultBuffer,v,C)}l==="quaternion"&&new Si().fromArray(_).normalize().conjugate().toArray(_);const E=u.times.length;for(let x=0;x<E;++x){const v=x*m+f;if(l==="quaternion")Si.multiplyQuaternionsFlat(u.values,v,_,0,u.values,v);else{const C=m-f*2;for(let V=0;V<C;++V)u.values[v+V]-=_[V]}}}return n.blendMode=R6,n}};class xc{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],a=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let s=r+2;;){if(i===void 0){if(e<a)break r;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,a)}if(r===s)break;if(a=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=a)){const s=t[1];e<s&&(r=2,a=s);for(let l=r-2;;){if(a===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===l)break;if(i=a,a=t[--r-1],e>=a)break t}o=r,r=0;break n}break e}for(;r<o;){const s=r+o>>>1;e<t[s]?o=s:r=s+1}if(i=t[r],a=t[r-1],a===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,a,e)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let o=0;o!==i;++o)t[o]=r[a+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}xc.prototype.beforeStart_=xc.prototype.copySampleValue_;xc.prototype.afterEnd_=xc.prototype.copySampleValue_;class lZ extends xc{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:E1,endingEnd:E1}}intervalChanged_(e,t,r){const i=this.parameterPositions;let a=e-2,o=e+1,s=i[a],l=i[o];if(s===void 0)switch(this.getSettings_().endingStart){case C1:a=e,s=2*t-r;break;case c8:a=i.length-2,s=t+i[a]-i[a+1];break;default:a=e,s=r}if(l===void 0)switch(this.getSettings_().endingEnd){case C1:o=e,l=2*r-t;break;case c8:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,d=this.valueSize;this._weightPrev=u/(t-s),this._weightNext=u/(l-r),this._offsetPrev=a*d,this._offsetNext=o*d}interpolate_(e,t,r,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,u=l-s,d=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,m=this._weightNext,g=(r-t)/(i-t),_=g*g,E=_*g,x=-f*E+2*f*_-f*g,v=(1+f)*E+(-1.5-2*f)*_+(-.5+f)*g+1,C=(-1-m)*E+(1.5+m)*_+.5*g,V=m*E-m*_;for(let D=0;D!==s;++D)a[D]=x*o[d+D]+v*o[u+D]+C*o[l+D]+V*o[h+D];return a}}class SI extends xc{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,u=l-s,d=(r-t)/(i-t),h=1-d;for(let f=0;f!==s;++f)a[f]=o[u+f]*h+o[l+f]*d;return a}}class cZ extends xc{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class xs{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Z0.convertArray(t,this.TimeBufferType),this.values=Z0.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Z0.convertArray(e.times,Array),values:Z0.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new cZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new SI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new lZ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case zh:t=this.InterpolantFactoryMethodDiscrete;break;case Wh:t=this.InterpolantFactoryMethodLinear;break;case Ox:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return zh;case this.InterpolantFactoryMethodLinear:return Wh;case this.InterpolantFactoryMethodSmooth:return Ox}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let a=0,o=i-1;for(;a!==i&&r[a]<e;)++a;for(;o!==-1&&r[o]>t;)--o;if(++o,a!==0||o!==i){a>=o&&(o=Math.max(o,1),a=o-1);const s=this.getValueSize();this.times=Z0.arraySlice(r,a,o),this.values=Z0.arraySlice(this.values,a*s,o*s)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==a;s++){const l=r[s];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,o),e=!1;break}o=l}if(i!==void 0&&Z0.isTypedArray(i))for(let s=0,l=i.length;s!==l;++s){const u=i[s];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,u),e=!1;break}}return e}optimize(){const e=Z0.arraySlice(this.times),t=Z0.arraySlice(this.values),r=this.getValueSize(),i=this.getInterpolation()===Ox,a=e.length-1;let o=1;for(let s=1;s<a;++s){let l=!1;const u=e[s],d=e[s+1];if(u!==d&&(s!==1||u!==e[0]))if(i)l=!0;else{const h=s*r,f=h-r,m=h+r;for(let g=0;g!==r;++g){const _=t[h+g];if(_!==t[f+g]||_!==t[m+g]){l=!0;break}}}if(l){if(s!==o){e[o]=e[s];const h=s*r,f=o*r;for(let m=0;m!==r;++m)t[f+m]=t[h+m]}++o}}if(a>0){e[o]=e[a];for(let s=a*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[s+u];++o}return o!==e.length?(this.times=Z0.arraySlice(e,0,o),this.values=Z0.arraySlice(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Z0.arraySlice(this.times,0),t=Z0.arraySlice(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}xs.prototype.TimeBufferType=Float32Array;xs.prototype.ValueBufferType=Float32Array;xs.prototype.DefaultInterpolation=Wh;class OA extends xs{}OA.prototype.ValueTypeName="bool";OA.prototype.ValueBufferType=Array;OA.prototype.DefaultInterpolation=zh;OA.prototype.InterpolantFactoryMethodLinear=void 0;OA.prototype.InterpolantFactoryMethodSmooth=void 0;class gI extends xs{}gI.prototype.ValueTypeName="color";class A8 extends xs{}A8.prototype.ValueTypeName="number";class uZ extends xc{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=(r-t)/(i-t);let u=e*s;for(let d=u+s;u!==d;u+=4)Si.slerpFlat(a,0,o,u-s,o,u,l);return a}}class Up extends xs{InterpolantFactoryMethodLinear(e){return new uZ(this.times,this.values,this.getValueSize(),e)}}Up.prototype.ValueTypeName="quaternion";Up.prototype.DefaultInterpolation=Wh;Up.prototype.InterpolantFactoryMethodSmooth=void 0;class kA extends xs{}kA.prototype.ValueTypeName="string";kA.prototype.ValueBufferType=Array;kA.prototype.DefaultInterpolation=zh;kA.prototype.InterpolantFactoryMethodLinear=void 0;kA.prototype.InterpolantFactoryMethodSmooth=void 0;class Bu extends xs{}Bu.prototype.ValueTypeName="vector";class Ay{constructor(e,t=-1,r,i=dE){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Mo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,s=r.length;o!==s;++o)t.push(AZ(r[o]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,o=r.length;a!==o;++a)t.push(xs.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const a=t.length,o=[];for(let s=0;s<a;s++){let l=[],u=[];l.push((s+a-1)%a,s,(s+1)%a),u.push(0,1,0);const d=Z0.getKeyframeOrder(l);l=Z0.sortedArray(l,1,d),u=Z0.sortedArray(u,1,d),!i&&l[0]===0&&(l.push(a),u.push(u[0])),o.push(new A8(".morphTargetInfluences["+t[s].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let s=0,l=e.length;s<l;s++){const u=e[s],d=u.name.match(a);if(d&&d.length>1){const h=d[1];let f=i[h];f||(i[h]=f=[]),f.push(u)}}const o=[];for(const s in i)o.push(this.CreateFromMorphTargetSequence(s,i[s],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,f,m,g,_){if(m.length!==0){const E=[],x=[];Z0.flattenJSON(m,E,x,g),E.length!==0&&_.push(new h(f,E,x))}},i=[],a=e.name||"default",o=e.fps||30,s=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const f=u[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const m={};let g;for(g=0;g<f.length;g++)if(f[g].morphTargets)for(let _=0;_<f[g].morphTargets.length;_++)m[f[g].morphTargets[_]]=-1;for(const _ in m){const E=[],x=[];for(let v=0;v!==f[g].morphTargets.length;++v){const C=f[g];E.push(C.time),x.push(C.morphTarget===_?1:0)}i.push(new A8(".morphTargetInfluence["+_+"]",E,x))}l=m.length*o}else{const m=".bones["+t[h].name+"]";r(Bu,m+".position",f,"pos",i),r(Up,m+".quaternion",f,"rot",i),r(Bu,m+".scale",f,"scl",i)}}return i.length===0?null:new this(a,l,i,s)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function dZ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return A8;case"vector":case"vector2":case"vector3":case"vector4":return Bu;case"color":return gI;case"quaternion":return Up;case"bool":case"boolean":return OA;case"string":return kA}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function AZ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=dZ(n.type);if(n.times===void 0){const t=[],r=[];Z0.flattenJSON(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const dA={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class fZ{constructor(e,t,r){const i=this;let a=!1,o=0,s=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(d){s++,a===!1&&i.onStart!==void 0&&i.onStart(d,o,s),a=!0},this.itemEnd=function(d){o++,i.onProgress!==void 0&&i.onProgress(d,o,s),o===s&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return u.push(d,h),this},this.removeHandler=function(d){const h=u.indexOf(d);return h!==-1&&u.splice(h,2),this},this.getHandler=function(d){for(let h=0,f=u.length;h<f;h+=2){const m=u[h],g=u[h+1];if(m.global&&(m.lastIndex=0),m.test(d))return g}return null}}}const hZ=new fZ;class Lc{constructor(e){this.manager=e!==void 0?e:hZ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,a){r.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Os={};class pZ extends Lc{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=dA.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Os[e]!==void 0){Os[e].push({onLoad:t,onProgress:r,onError:i});return}Os[e]=[],Os[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=Os[e],h=u.body.getReader(),f=u.headers.get("Content-Length"),m=f?parseInt(f):0,g=m!==0;let _=0;const E=new ReadableStream({start(x){v();function v(){h.read().then(({done:C,value:V})=>{if(C)x.close();else{_+=V.byteLength;const D=new ProgressEvent("progress",{lengthComputable:g,loaded:_,total:m});for(let H=0,R=d.length;H<R;H++){const j=d[H];j.onProgress&&j.onProgress(D)}x.enqueue(V),v()}})}}});return new Response(E)}else throw Error(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,s));case"json":return u.json();default:if(s===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(s),f=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(f);return u.arrayBuffer().then(g=>m.decode(g))}}}).then(u=>{dA.add(e,u);const d=Os[e];delete Os[e];for(let h=0,f=d.length;h<f;h++){const m=d[h];m.onLoad&&m.onLoad(u)}}).catch(u=>{const d=Os[e];if(d===void 0)throw this.manager.itemError(e),u;delete Os[e];for(let h=0,f=d.length;h<f;h++){const m=d[h];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class _I extends Lc{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=dA.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;const s=Yh("img");function l(){d(),dA.add(e,this),t&&t(this),a.manager.itemEnd(e)}function u(h){d(),i&&i(h),a.manager.itemError(e),a.manager.itemEnd(e)}function d(){s.removeEventListener("load",l,!1),s.removeEventListener("error",u,!1)}return s.addEventListener("load",l,!1),s.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),a.manager.itemStart(e),s.src=e,s}}class mZ extends Lc{constructor(e){super(e)}load(e,t,r,i){const a=new S_,o=new _I(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function l(u){o.load(e[u],function(d){a.images[u]=d,s++,s===6&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return a}}class xI extends Lc{constructor(e){super(e)}load(e,t,r,i){const a=new qr,o=new _I(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(s){a.image=s,a.needsUpdate=!0,t!==void 0&&t(a)},r,i),a}}class ms extends n0{constructor(e,t=1){super(),this.type="Light",this.color=new Jt(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}ms.prototype.isLight=!0;class SZ extends ms{constructor(e,t,r){super(e,r),this.type="HemisphereLight",this.position.copy(n0.DefaultUp),this.updateMatrix(),this.groundColor=new Jt(t)}copy(e){return ms.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}SZ.prototype.isHemisphereLight=!0;const nb=new un,rb=new Se,ib=new Se;class bE{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pt(512,512),this.map=null,this.mapPass=null,this.matrix=new un,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new g_,this._frameExtents=new pt(1,1),this._viewportCount=1,this._viewports=[new x0(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;rb.setFromMatrixPosition(e.matrixWorld),t.position.copy(rb),ib.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ib),t.updateMatrixWorld(),nb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nb),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class vI extends bE{constructor(){super(new mi(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,r=Kh*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(r!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}vI.prototype.isSpotLightShadow=!0;class gZ extends ms{constructor(e,t,r=0,i=Math.PI/3,a=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(n0.DefaultUp),this.updateMatrix(),this.target=new n0,this.distance=r,this.angle=i,this.penumbra=a,this.decay=o,this.shadow=new vI}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}gZ.prototype.isSpotLight=!0;const ab=new un,Of=new Se,Sv=new Se;class wI extends bE{constructor(){super(new mi(90,1,.5,500)),this._frameExtents=new pt(4,2),this._viewportCount=6,this._viewports=[new x0(2,1,1,1),new x0(0,1,1,1),new x0(3,1,1,1),new x0(1,1,1,1),new x0(3,0,1,1),new x0(1,0,1,1)],this._cubeDirections=[new Se(1,0,0),new Se(-1,0,0),new Se(0,0,1),new Se(0,0,-1),new Se(0,1,0),new Se(0,-1,0)],this._cubeUps=[new Se(0,1,0),new Se(0,1,0),new Se(0,1,0),new Se(0,1,0),new Se(0,0,1),new Se(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),Of.setFromMatrixPosition(e.matrixWorld),r.position.copy(Of),Sv.copy(r.position),Sv.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Sv),r.updateMatrixWorld(),i.makeTranslation(-Of.x,-Of.y,-Of.z),ab.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ab)}}wI.prototype.isPointLightShadow=!0;class _Z extends ms{constructor(e,t,r=0,i=1){super(e,t),this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new wI}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}_Z.prototype.isPointLight=!0;class yI extends bE{constructor(){super(new SE(-5,5,5,-5,.5,500))}}yI.prototype.isDirectionalLightShadow=!0;class xZ extends ms{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(n0.DefaultUp),this.updateMatrix(),this.target=new n0,this.shadow=new yI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}xZ.prototype.isDirectionalLight=!0;class vZ extends ms{constructor(e,t){super(e,t),this.type="AmbientLight"}}vZ.prototype.isAmbientLight=!0;class wZ extends ms{constructor(e,t,r=10,i=10){super(e,t),this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}wZ.prototype.isRectAreaLight=!0;class EI{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Se)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,a=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*a),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*a)),t.addScaledVector(o[6],.315392*(3*a*a-1)),t.addScaledVector(o[7],1.092548*(r*a)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,a=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*a),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*a),t.addScaledVector(o[6],.743125*a*a-.247708),t.addScaledVector(o[7],2*.429043*r*a),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*r*a,t[8]=.546274*(r*r-i*i)}}EI.prototype.isSphericalHarmonics3=!0;class PE extends ms{constructor(e=new EI,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}PE.prototype.isLightProbe=!0;class yZ{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class EZ extends y0{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}EZ.prototype.isInstancedBufferGeometry=!0;class CZ extends Lc{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=dA.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;const s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(l){dA.add(e,l),t&&t(l),a.manager.itemEnd(e)}).catch(function(l){i&&i(l),a.manager.itemError(e),a.manager.itemEnd(e)}),a.manager.itemStart(e)}}CZ.prototype.isImageBitmapLoader=!0;let IS;const VZ={getContext:function(){return IS===void 0&&(IS=new(window.AudioContext||window.webkitAudioContext)),IS},setContext:function(n){IS=n}};class DZ extends Lc{constructor(e){super(e)}load(e,t,r,i){const a=this,o=new pZ(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(s){try{const l=s.slice(0);VZ.getContext().decodeAudioData(l,function(d){t(d)})}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}}class FZ extends PE{constructor(e,t,r=1){super(void 0,r);const i=new Jt().set(e),a=new Jt().set(t),o=new Se(i.r,i.g,i.b),s=new Se(a.r,a.g,a.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(u)}}FZ.prototype.isHemisphereLightProbe=!0;class TZ extends PE{constructor(e,t=1){super(void 0,t);const r=new Jt().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}TZ.prototype.isAmbientLightProbe=!0;class bZ{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ob(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ob();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ob(){return(typeof performance>"u"?Date:performance).now()}class PZ extends n0{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class RZ{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,a,o;switch(t){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,a=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let s=0;s!==i;++s)r[a+s]=r[s];o=t}else{o+=t;const s=t/o;this._mixBufferRegion(r,a,0,s,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-a,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){s.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let a=r,o=i;a!==o;++a)t[a]=t[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,a){if(i>=.5)for(let o=0;o!==a;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Si.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,a){const o=this._workIndex*a;Si.multiplyQuaternionsFlat(e,o,e,t,e,r),Si.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,a){const o=1-i;for(let s=0;s!==a;++s){const l=t+s;e[l]=e[l]*o+e[r+s]*i}}_lerpAdditive(e,t,r,i,a){for(let o=0;o!==a;++o){const s=t+o;e[s]=e[s]+e[r+o]*i}}}const RE="\\[\\]\\.:\\/",LZ=new RegExp("["+RE+"]","g"),LE="[^"+RE+"]",BZ="[^"+RE.replace("\\.","")+"]",MZ=/((?:WC+[\/:])*)/.source.replace("WC",LE),IZ=/(WCOD+)?/.source.replace("WCOD",BZ),OZ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",LE),kZ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",LE),NZ=new RegExp("^"+MZ+IZ+OZ+kZ+"$"),UZ=["material","materials","bones"];class jZ{constructor(e,t,r){const i=r||Yn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Yn{constructor(e,t,r){this.path=t,this.parsedPath=r||Yn.parseTrackName(t),this.node=Yn.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Yn.Composite(e,t,r):new Yn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(LZ,"")}static parseTrackName(e){const t=NZ.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);UZ.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(a){for(let o=0;o<a.length;o++){const s=a[o];if(s.name===t||s.uuid===t)return s;const l=r(s.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=Yn.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Yn.Composite=jZ;Yn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Yn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Yn.prototype.GetterByBindingType=[Yn.prototype._getValue_direct,Yn.prototype._getValue_array,Yn.prototype._getValue_arrayElement,Yn.prototype._getValue_toArray];Yn.prototype.SetterByBindingTypeAndVersioning=[[Yn.prototype._setValue_direct,Yn.prototype._setValue_direct_setNeedsUpdate,Yn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Yn.prototype._setValue_array,Yn.prototype._setValue_array_setNeedsUpdate,Yn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Yn.prototype._setValue_arrayElement,Yn.prototype._setValue_arrayElement_setNeedsUpdate,Yn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Yn.prototype._setValue_fromArray,Yn.prototype._setValue_fromArray_setNeedsUpdate,Yn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class GZ{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const a=t.tracks,o=a.length,s=new Array(o),l={endingStart:E1,endingEnd:E1};for(let u=0;u!==o;++u){const d=a[u].createInterpolant(null);s[u]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=AX,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,a=e._clip.duration,o=a/i,s=i/a;e.warp(1,o,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,a=i.time,o=this.timeScale;let s=this._timeScaleInterpolant;s===null&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const l=s.parameterPositions,u=s.sampleValues;return l[0]=a,l[1]=a+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*r;if(l<0||r===0)return;this._startTime=null,t=r*l}t*=this._updateTimeScale(e);const o=this._updateTime(t),s=this._updateWeight(e);if(s>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case R6:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),u[d].accumulateAdditive(s);break;case dE:default:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),u[d].accumulate(i,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,a=this._loopCount;const o=r===fX;if(e===0)return a===-1?i:o&&(a&1)===1?t-i:i;if(r===dX){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const s=Math.floor(i/t);i-=t*s,a+=Math.abs(s);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(o&&(a&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=C1,i.endingEnd=C1):(e?i.endingStart=this.zeroSlopeAtStart?C1:E1:i.endingStart=c8,t?i.endingEnd=this.zeroSlopeAtEnd?C1:E1:i.endingEnd=c8)}_scheduleFading(e,t,r){const i=this._mixer,a=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,l=o.sampleValues;return s[0]=a,l[0]=t,s[1]=a+e,l[1]=r,this}}class CI extends dl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,a=i.length,o=e._propertyBindings,s=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let d=u[l];d===void 0&&(d={},u[l]=d);for(let h=0;h!==a;++h){const f=i[h],m=f.name;let g=d[m];if(g!==void 0)++g.referenceCount,o[h]=g;else{if(g=o[h],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const _=t&&t._propertyBindings[h].binding.parsedPath;g=new RZ(Yn.create(r,m,_),f.ValueTypeName,f.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[h]=g}s[h].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,a=this._actionsByClip;let o=a[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=o;else{const s=o.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,o=this._actionsByClip,s=o[a],l=s.knownActions,u=l[l.length-1],d=e._byClipCacheIndex;u._byClipCacheIndex=d,l[d]=u,l.pop(),e._byClipCacheIndex=null;const h=s.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],l.length===0&&delete o[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,a=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,a=r.path,o=this._bindingsByRootAndName,s=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete s[a],Object.keys(s).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new SI(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=r,t[r]=a}clipAction(e,t,r){const i=t||this._root,a=i.uuid;let o=typeof e=="string"?Ay.findByName(i,e):e;const s=o!==null?o.uuid:e,l=this._actionsByClip[s];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=dE),l!==void 0){const h=l.actionByRoot[a];if(h!==void 0&&h.blendMode===r)return h;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const d=new GZ(this,o,t,r);return this._bindAction(d,u),this._addInactiveAction(d,s,a),d}existingAction(e,t){const r=t||this._root,i=r.uuid,a=typeof e=="string"?Ay.findByName(r,e):e,o=a?a.uuid:e,s=this._actionsByClip[o];return s!==void 0&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,a=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,a,o);const s=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)s[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const o=a.knownActions;for(let s=0,l=o.length;s!==l;++s){const u=o[s];this._deactivateAction(u);const d=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=d,t[d]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const s=r[o].actionByRoot,l=s[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,a=i[t];if(a!==void 0)for(const o in a){const s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}CI.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class HZ extends Op{constructor(e,t,r=1){super(e,t),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}HZ.prototype.isInstancedInterleavedBuffer=!0;class sb{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(qi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const Nl=new Se,OS=new un,gv=new un;class zZ extends kp{constructor(e){const t=VI(e),r=new y0,i=[],a=[],o=new Jt(0,0,1),s=new Jt(0,1,0);for(let u=0;u<t.length;u++){const d=t[u];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(o.r,o.g,o.b),a.push(s.r,s.g,s.b))}r.setAttribute("position",new B0(i,3)),r.setAttribute("color",new B0(a,3));const l=new Rc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");gv.copy(this.root.matrixWorld).invert();for(let a=0,o=0;a<t.length;a++){const s=t[a];s.parent&&s.parent.isBone&&(OS.multiplyMatrices(gv,s.matrixWorld),Nl.setFromMatrixPosition(OS),i.setXYZ(o,Nl.x,Nl.y,Nl.z),OS.multiplyMatrices(gv,s.parent.matrixWorld),Nl.setFromMatrixPosition(OS),i.setXYZ(o+1,Nl.x,Nl.y,Nl.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function VI(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,VI(n.children[t]));return e}class WZ extends kp{constructor(e=10,t=10,r=4473924,i=8947848){r=new Jt(r),i=new Jt(i);const a=t/2,o=e/t,s=e/2,l=[],u=[];for(let f=0,m=0,g=-s;f<=t;f++,g+=o){l.push(-s,0,g,s,0,g),l.push(g,0,-s,g,0,s);const _=f===a?r:i;_.toArray(u,m),m+=3,_.toArray(u,m),m+=3,_.toArray(u,m),m+=3,_.toArray(u,m),m+=3}const d=new y0;d.setAttribute("position",new B0(l,3)),d.setAttribute("color",new B0(u,3));const h=new Rc({vertexColors:!0,toneMapped:!1});super(d,h),this.type="GridHelper"}}const XZ=new Float32Array(1);new Int32Array(XZ.buffer);ao.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(ao.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};cy.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)};WZ.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};zZ.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Lc.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),yZ.extractUrlBase(n)};Lc.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};ho.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)};ho.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};ho.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};ho.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};ho.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)};ed.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")};$u.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};g_.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};Ir.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};Ir.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Ir.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Ir.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Ir.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Ir.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};un.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)};un.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};un.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Se().setFromMatrixColumn(this,3)};un.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)};un.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};un.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};un.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};un.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};un.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)};un.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};un.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};un.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};un.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};un.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};un.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};un.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};un.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};un.prototype.makeFrustum=function(n,e,t,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,r,t,i,a)};un.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};zs.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};Si.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)};Si.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};BA.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};BA.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)};BA.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};Lr.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};Lr.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)};Lr.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)};Lr.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)};Lr.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)};Lr.barycoordFromPoint=function(n,e,t,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Lr.getBarycoord(n,e,t,r,i)};Lr.normal=function(n,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Lr.getNormal(n,e,t,r)};Np.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)};Np.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new IA(this,n)};Np.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new FE(this,n)};pt.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};pt.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};pt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Se.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};Se.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};Se.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)};Se.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)};Se.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)};Se.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)};Se.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Se.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};Se.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};x0.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};x0.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};n0.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)};n0.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};n0.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)};n0.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};n0.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(n0.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Mi.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Mi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),hX},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});$6.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};mi.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(ms.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(v0.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===u8},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(u8)}}});v0.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?u8:Xh),this};v0.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},v0.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};y0.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)};y0.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new v0(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)};y0.prototype.addDrawCall=function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)};y0.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};y0.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};y0.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)};y0.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(y0.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Op.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?u8:Xh),this};Op.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};IA.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};IA.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};IA.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};qh.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(Qr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Jt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===D6}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Uo.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});f0.prototype.clearTarget=function(n,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,r)};f0.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)};f0.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};f0.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};f0.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};f0.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};f0.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};f0.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};f0.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};f0.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};f0.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};f0.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};f0.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};f0.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};f0.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)};f0.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};f0.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};f0.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};f0.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};f0.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};f0.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};f0.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};f0.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};f0.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};f0.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(f0.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?Q0:gc}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});Object.defineProperties(q6.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(ba.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});PZ.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new DZ().load(n,function(r){e.setBuffer(r)}),this};pE.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};pE.prototype.clear=function(n,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,r)};Zu.crossOrigin=void 0;Zu.loadTexture=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new xI;i.setCrossOrigin(this.crossOrigin);const a=i.load(n,t,void 0,r);return e&&(a.mapping=e),a};Zu.loadTextureCube=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new mZ;i.setCrossOrigin(this.crossOrigin);const a=i.load(n,t,void 0,r);return e&&(a.mapping=e),a};Zu.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Zu.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:cE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=cE);class KZ{constructor(){this._events=Object.create(null)}addEventToLibrary(e){this._events[e.id]=e}removeEventFromLibrary(e){if(!this._events[e])throw new Error(`Cannot remove event ${e}, as it isn't in the event library`);if(!this._events[e].custom)throw new Error(`Cannot remove event ${e}, as it is a built-in event`)}getEventFromLibrary(e){return this._events[e]}getEventsInLibrary(){return this._events}}let AA=new KZ;function YZ(n){const e=AA.getEventsInLibrary();for(const t in e)n.addEventToLibrary(e[t]);AA=n}function hr(n){AA.addEventToLibrary(n)}function qZ(n){AA.removeEventFromLibrary(n)}function jp(n){return AA.getEventFromLibrary(n)}function j0(){return AA.getEventsInLibrary()}var ns=(n=>(n[n.leaf=0]="leaf",n[n.hasCoins=1]="hasCoins",n[n.star=2]="star",n[n.remainingSpaces=3]="remainingSpaces",n[n.stateComparison=4]="stateComparison",n[n.winningHeuristic=5]="winningHeuristic",n[n.customCode=6]="customCode",n[n.turnsElapsed=7]="turnsElapsed",n[n.hasItem=8]="hasItem",n))(ns||{});function DI(n,e,t,r){const i=[];let a;do{a=n.getUint8(e);const o=n.getUint32(e+4),s=n.getUint32(e+8);s&2147483648?i.push({type:a,data:o,decision:DI(n,(s&2147483647)-t,t,r)}):i.push({type:a,data:o,decision:QZ(s,r)}),e+=12}while(a!==0);return i}function QZ(n,e){return e===3?{value:(n&4026531840)>>>28,probability:[n&127,(n&16256)>>>7,(n&2080768)>>>14,(n&266338304)>>>21]}:{value:(n&4294901760)>>>16,probability:[n&255,(n&65280)>>>8]}}const FI={id:"CHAINSPLIT1",name:"",activationType:Wt.WALKOVER,executionType:s0.PROCESS,parameters:[{name:"left_space",type:an.Space},{name:"right_space",type:an.Space},{name:"chains",type:an.NumberArray}],fakeEvent:!0,supportedGames:[Qe.MP1_USA],parse(n,e){const t={METHOD_START:"597324F65BC9A4D0BCA9527477258625",METHOD_MID1:"E276F5BAE352AC662ADCA86793409B62",METHOD_MID2:"24FBEBD7FA3B256016D536690EF70AD8",METHOD_END:"F153076BBD19ECBB4967EFC92CD738DF"};if(Wn([n.buffer,e.offset,44],t.METHOD_START)&&Wn([n.buffer,e.offset+76,28],t.METHOD_MID2)&&Wn([n.buffer,e.offset+224,40],t.METHOD_END)){const r=n.getUint16(e.offset+218),i=n.getUint16(e.offset+222),a=e.chains[r][0],o=e.chains[i][0];Go(e.curSpace,a,e.board),Go(e.curSpace,o,e.board);const s=to(e.game,"RunDecisionTree"),l=cH(n,e.offset,s);if(l.length){const u=l[0],d=n.getUint16(u-6),h=n.getUint16(u-2),f=Nu(d,h),m=e.addr&2147483647,g=f-m,_=e.offset+g,E=m-e.offset;DI(n,_,E,e.gameVersion),e.board,e.curSpaceIndex}return!0}return!1},write(n,e,t,r){const i=e.parameterValues.chains;return`
        ADDIU SP SP 0xFFD8
        SW RA 0x24(SP)
        SW S2 0x20(SP)
        SW S1 0x1C(SP)
        SW S0 0x18(SP)

        ; Change player to standing animation?
        ADDIU A0 R0 -1
        ADDIU A1 R0 -1
        JAL 0x80052BE8
        ADDIU A2 R0 2

        JAL SleepVProcess
        NOP
        JAL chainsplit_1_setup_arrows
        NOP
        LUI S0 0x800F
        ADDIU S0 S0 0xD5DC ; 0x800ED5DC
        LH A0 0(S0)
        LUI A1 hi(indices)
        JAL 0x8003C218
        ADDIU A1 A1 lo(indices)
        ADDU S2 V0 R0
        ADDU A0 S2 R0
        LH A1 0(S0)
        JAL 0x8003C060
        ADDU A2 R0 R0
        JAL PlayerIsCPU
        ADDIU A0 R0 -1
        BEQ V0 R0 do_direction_prompt
        NOP
        LUI A0 hi(ai_logic)
        ADDIU A0 A0 lo(ai_logic)
        JAL 0x8003E9B0
        ADDU S0 R0 R0
        SLL V0 V0 0x10
        SRA S1 V0 0x10
        BLEZ S1 choice_neg
        ADDU A0 S2 R0
      choice_pos:
        JAL 0x8003BE84
        ADDIU A1 R0 0xFFFE
        ADDIU S0 S0 1
        SLT V0 S0 S1
        BNE V0 R0 choice_pos
        ADDU A0 S2 R0
      choice_neg:
        JAL 0x8003BE84
        ADDIU A1 R0 0xFFFC
      do_direction_prompt:
        JAL 0x8003C14C ; DirectionPrompt
        ADDU A0 S2 R0
        ADDU S0 V0 R0
        JAL 0x8003B908
        ADDU A0 S2 R0
        JAL chainsplit_1_hide_arrows
        NOP
        BNE S0 R0 set_chain_right
        ADDIU A0 R0 -1
        J set_chain
        ADDIU A1 R0 ${i[0]}
      set_chain_right:
        ADDIU A1 R0 ${i[1]}
      set_chain:
        JAL SetNextChainAndSpace
        ADDU A2 R0 R0 ; 0th space of the chain
        JAL 0x8005DD90
        ADDU A0 R0 R0
        LW RA 0x24(SP)
        LW S2 0x20(SP)
        LW S1 0x1C(SP)
        LW S0 0x18(SP)
        JR RA
        ADDIU SP SP 0x28

      ; Choose randomly
      ai_logic:
        .word 0x00000000, 0x00000000, 0x00003232

      indices:
        .halfword left_space
        .halfword right_space
        .halfword 0xFFFF
        .align 4

    .beginstatic
      .definelabel CORE_800EE320,0x800EE320

      chainsplit_1_setup_arrows:
        addiu SP, SP, -0x18
        sw    RA, 0x10(SP)
      @@setup_arrows_loop1:
        jal 0x8004B850 ; waiting for this to signal
        NOP
        beq V0, R0, @@setup_arrows_loop1_exit
        NOP
        jal SleepVProcess
        NOP
        j @@setup_arrows_loop1
        NOP
      @@setup_arrows_loop1_exit:
        jal SleepVProcess
        NOP
        addu  A0, R0, R0
        addiu A1, R0, 146
        jal   0x80045D84
        addiu A2, R0, 1
        lui   AT, hi(chainsplit_1_memval1)
        sw    V0, lo(chainsplit_1_memval1)(AT)
        addiu A0, R0, 1
        addiu A1, R0, 160
        jal   0x80045D84
        addiu A2, R0, 1
        lui   AT, hi(chainsplit_1_memval2)
        sw    V0, lo(chainsplit_1_memval2)(AT)
        addiu A0, R0, 3
        addiu A1, R0, 174
        jal   0x80045D84
        addiu A2, R0, 1
        lui   AT, hi(chainsplit_1_memval3)
        sw    V0, lo(chainsplit_1_memval3)(AT)
        addiu A0, R0, 11
        addiu A1, R0, 188
        jal   0x80045D84
        addiu A2, R0, 1
        lui   AT, hi(chainsplit_1_memval4)
        sw    V0, lo(chainsplit_1_memval4)(AT)
        jal   SleepProcess
        addiu A0, R0, 3
        addiu V0, R0, 1
        lui   AT, hi(CORE_800EE320)
        sh    V0, lo(CORE_800EE320)(AT)
        lw    RA, 0x10(SP)
        jr    RA
        addiu SP, SP, 0x18

      chainsplit_1_hide_arrows:
        addiu SP, SP, -0x18
        sw    RA, 0x10(SP)
        lui   AT, hi(CORE_800EE320)
        sh    R0, lo(CORE_800EE320)(AT)
        lui   A0, hi(chainsplit_1_memval1)
        jal   0x80045E6C
        lw    A0, lo(chainsplit_1_memval1)(A0)
        lui   A0, hi(chainsplit_1_memval2)
        jal   0x80045E6C
        lw    A0, lo(chainsplit_1_memval2)(A0)
        lui   A0, hi(chainsplit_1_memval3)
        jal   0x80045E6C
        lw    A0, lo(chainsplit_1_memval3)(A0)
        lui   A0, hi(chainsplit_1_memval4)
        jal   0x80045E6C
        lw    A0, lo(chainsplit_1_memval4)(A0)
        lw    RA, 0x10(SP)
        jr    RA
        addiu SP, SP, 0x18

      chainsplit_1_memval1:
        .word 0
      chainsplit_1_memval2:
        .word 0
      chainsplit_1_memval3:
        .word 0
      chainsplit_1_memval4:
        .word 0
    .endstatic
    `}};hr(FI);const BE={id:"CHAINMERGE",name:"",activationType:Wt.WALKOVER,executionType:s0.DIRECT,parameters:[{name:"prevSpace",type:an.Number},{name:"chain",type:an.Number},{name:"spaceIndex",type:an.Number}],fakeEvent:!0,supportedGames:[Qe.MP1_USA,Qe.MP2_USA],parse(n,e){const t={START:"d218c758ea3247b6e5ec2ae0c3568a92",END:"560c69d6e851f4a22984b74c660e8536",EXTRA_CALL_START:"BABAF76D201027AE882BEB58BB38B4EB"};let r,i;return Wn([n.buffer,e.offset,12],t.START)&&Wn([n.buffer,e.offset+24,12],t.END)?(r=n.getUint16(e.offset+14),r=r>1e3?0:r,n.getUint16(e.offset+20)===0?i=e.chains[r][0]:i=e.chains[r][n.getUint16(e.offset+22)],isNaN(i)||Go(e.curSpace,i,e.board),!0):Wn([n.buffer,e.offset,24],t.EXTRA_CALL_START)&&Wn([n.buffer,e.offset+36,12],t.END)?(r=n.getUint16(e.offset+26),r=r>1e3?0:r,n.getUint16(e.offset+32)===0?i=e.chains[r][0]:i=e.chains[r][n.getUint16(e.offset+34)],typeof i=="number"&&Go(e.curSpace,i,e.board),!0):!1},write(n,e,t,r){return`
      ADDIU SP, SP, -0x18
      SW    RA, 0x10(SP)
      ADDIU A0, R0, -1
      ADDIU A1, R0, ${e.parameterValues.chain}
      JAL   SetNextChainAndSpace
      ADDIU A2, R0, ${e.parameterValues.spaceIndex||0}
      LW    RA, 0x10(SP)
      JR    RA
      ADDIU SP, SP, 0x18
    `}};hr(BE);const lb={id:"STAR1",name:"Buy star",activationType:Wt.WALKOVER,executionType:s0.DIRECT,fakeEvent:!0,supportedGames:[Qe.MP1_USA],parse(n,e){const t={METHOD_START:"14A3FD0F13B034F8C90659FF589A17DB",METHOD_MID:"B48ABB1B1FDBF7B5EF9765FD61C3940E",METHOD_END:"5FEE3364FDCA8B0E9247BFB37A391358"};return!!(Wn([n.buffer,e.offset,20],t.METHOD_START)&&Wn([n.buffer,e.offset+24,16],t.METHOD_MID)&&Wn([n.buffer,e.offset+48,52],t.METHOD_END))},write(n,e,t,r){return`
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)
      jal   GetCurrentSpaceIndex
      NOP
      sll   V0, V0, 0x10
      jal   __PP64_INTERNAL_STAR_SPACE
      sra   A0, V0, 0x10
      sll   V0, V0, 0x10
      sra   V0, V0, 0x10
      addiu V1, R0, 1
      bne   V0, V1, L800F9700 ; test if player bought star?
      addiu A0, R0, 68
      addu  A1, R0, R0
      jal   0x800587EC
      addiu A2, R0, 2
      jal   __PP64_INTERNAL_GET_NEXT_TOAD_INDEX
      NOP
      sll   V0, V0, 0x10
      addiu A0, R0, -1
      addiu A1, R0, 8
      jal   0x8004D2A4
      sra   A2, V0, 0x10
    L800F9700:
      lw    RA, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x18
    `}},cb={parse(n,e){const t={PLAYER_DIRECTION_CHANGE:"DAD5E635FE90ED982D02B3F1D5C0CE21",METHOD_END:"FF104A680C0ECE615B5A24AD95A908CC",DK_TWOBOO_METHOD_START:"94A87B51D2478E81AAC34F7D3C5C37F2"};return Wn([n.buffer,e.offset+28,24],t.METHOD_END)&&Wn([n.buffer,e.offset,20],t.PLAYER_DIRECTION_CHANGE)?n.getUint16(e.offset+26)===101:!!(Wn([n.buffer,e.offset+84,24],t.METHOD_END)&&Wn([n.buffer,e.offset,40],t.DK_TWOBOO_METHOD_START))},write(n,e,t,r){return`
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)

      ; TODO: Face player towards Boo
      ;jal   GetCurrentSpaceIndex
      ;NOP
      ;sll   V0, V0, 0x10
      ;sra   V1, V0, 0x10
      ;addiu    V0, R0, 10 ; bottom left boo invisible space index
      ;beq   V1, V0, boo_space_event_passing_bottom_boo
      ;addiu    V0, R0, 129 ; upper middle boo invisible space index
      ;bne   V1, V0, boo_space_event_goto_boo_scene
      ;addiu    A0, R0, 101 ; Boo overlay index
      ;addiu    A0, R0, -1
      ;addiu    A1, R0, 8
      ;j     L800F97E0
      ;addiu    A2, R0, 111 ; upper middle boo standing space index
    ;boo_space_event_passing_bottom_boo:
      ;addiu    A0, R0, -1
      ;addiu    A1, R0, 8
      ;addiu    A2, R0, 98 ; bottom left boo standing space index
    ;L800F97E0:
      ;jal   0x8004D2A4
      ;NOP

      addiu A0, R0, 101 ; Boo overlay index
    boo_space_event_goto_boo_scene:
      addu  A1, R0, R0
      jal   0x800587EC  ; 0x800587BC wrapper, A3 = 0 default
      addiu A2, R0, 1
      lw    RA, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x18
    `}},ub={id:"GATECLOSE3",name:"",activationType:Wt.WALKOVER,executionType:s0.DIRECT,parameters:[{name:"gateIndex",type:an.Number}],fakeEvent:!0,supportedGames:[Qe.MP3_USA],parse(n,e){if(wM(n,e.offset)!==28)return!1;const r=[201597626];return n.getUint32(e.offset+8)===r[e.boardIndex]},write(n,e,t,r){return`
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)
      jal   __PP64_INTERNAL_GATE_CLOSE_EVENT
       li    A0, ${e.parameterValues.gateIndex}
      lw    RA, 0x10(SP)
      jr    RA
       addiu SP, SP, 0x18
    `}},db={id:"GATE3",name:"",activationType:Wt.WALKOVER,executionType:s0.PROCESS,parameters:[{name:"gateEntryIndex",type:an.Number},{name:"gateSpaceIndex",type:an.Number},{name:"gateExitIndex",type:an.Number},{name:"gatePrevChain",type:an.NumberArray},{name:"gateNextChain",type:an.NumberArray}],fakeEvent:!0,supportedGames:[Qe.MP3_USA],parse(n,e){if(e.boardIndex===0){if(e.offset!==3274312)return!1;if(n.getUint16(e.offset+98)===e.curSpaceIndex)return e.board.spaces[n.getUint16(e.offset+262)].subtype=yt.GATE,!0;if(n.getUint16(e.offset+106)===e.curSpaceIndex)return e.board.spaces[n.getUint16(e.offset+270)].subtype=yt.GATE,!0}return!1},write(n,e,t,r){return`
      J __PP64_INTERNAL_GATE_EVENT
      NOP
    `}},Ab={parse(n,e){let t=!1;if(e.boardIndex===0){if(e.offset!==2755864)return!1;t=!0}return!!t},write(n,e,t,r){return`
      J __PP64_INTERNAL_BOO_SPACE_EVENT
      NOP
    `}},fb={parse(n,e){let t,r=!1;if(e.boardIndex===0){if(e.offset!==3291628||n.getUint32(e.offset+76)!==201568050)return!1;t=wM(n,e.offset),r=t===4564}return!!r},write(n,e,t,r){return`
      J __PP64_INTERNAL_BOO_SPACE_EVENT
      NOP
    `}},hb={parse(n,e){const t={WESTERN:"D52AD53C2FED642C3001C3579B4299C3"};return!!Wn([n.buffer,e.offset,2112],t.WESTERN)},write(n,e,t,r){return`
      J __PP64_INTERNAL_STAR_SPACE_EVENT ; star_space_event
      NOP
    `}},JZ={parse(n,e){const t={CHILLY:"E9B6C28983AAE724AC187EA8E0CBC79D"};return!!Wn([n.buffer,e.offset,956],t.CHILLY)},write(n,e,t,r){return`
      J __PP64_INTERNAL_STAR_SPACE_EVENT ; star_space_event
      NOP
    `}},pb={parse(n,e){let t=!1;if(e.boardIndex===0){if(e.offset!==2746652)return!1;t=!0}return!!t},write(n,e,t,r){return`
      J __PP64_INTERNAL_BANK_SPACE_EVENT
      NOP
    `}},mb={parse(n,e){const t={CHILLY:"FCA0025616E8B2BE4CD60F47EE60DC30"};return!!Wn([n.buffer,e.offset,180],t.CHILLY)},write(n,e,t,r){return`
      J __PP64_INTERNAL_BANK_SPACE_EVENT
      NOP
    `}},Sb={parse(n,e){let t=!1;if(e.boardIndex===0){if(e.offset!==2747904)return!1;t=!0}return!!t},write(n,e,t,r){return`
      J __PP64_INTERNAL_ITEM_SHOP_EVENT
      NOP
    `}},gb={parse(n,e){let t=!1;if(e.boardIndex===0){if(e.offset!==3281356||n.getUint32(e.offset+68)!==201574479)return!1;t=!0}return!!t},write(n,e,t,r){return`
      J __PP64_INTERNAL_ITEM_SHOP_EVENT
      NOP
    `}},ME={id:"BOO",name:"Visit Boo",activationType:Wt.WALKOVER,executionType:s0.DIRECT,supportedGames:[Qe.MP1_USA,Qe.MP2_USA,Qe.MP3_USA],parse(n,e){switch(e.gameVersion){case 1:return cb.parse(n,e);case 2:return Ab.parse(n,e);case 3:return fb.parse(n,e)}},write(n,e,t,r){switch(t.gameVersion){case 1:return cb.write(n,e,t,r);case 2:return Ab.write(n,e,t,r);case 3:return fb.write(n,e,t,r)}}};hr(ME);const TI={id:"STAR",name:"Buy star",activationType:Wt.WALKOVER,executionType:s0.DIRECT,fakeEvent:!0,supportedGames:[Qe.MP1_USA,Qe.MP2_USA,Qe.MP3_USA],parse(n,e){switch(e.gameVersion){case 1:return lb.parse(n,e);case 2:return hb.parse(n,e)}return!1},write(n,e,t,r){switch(t.gameVersion){case 1:return lb.write(n,e,t,r);case 2:return hb.write(n,e,t,r);case 3:return JZ.write(n,e,t,r)}return!1}};hr(TI);const NA={id:"BANK",name:"Visit Bank",activationType:Wt.WALKOVER,executionType:s0.DIRECT,supportedGames:[Qe.MP2_USA,Qe.MP3_USA],parse(n,e){switch(e.gameVersion){case 1:return!1;case 2:return pb.parse(n,e);case 3:return mb.parse(n,e)}return!1},write(n,e,t,r){switch(t.gameVersion){case 1:return!1;case 2:return pb.write(n,e,t,r);case 3:return mb.write(n,e,t,r)}return!1}};hr(NA);const y_={id:"ITEMSHOP",name:"Visit Item Shop",activationType:Wt.WALKOVER,executionType:s0.DIRECT,supportedGames:[Qe.MP2_USA,Qe.MP3_USA],parse(n,e){switch(e.gameVersion){case 1:return!1;case 2:return Sb.parse(n,e);case 3:return gb.parse(n,e)}return!1},write(n,e,t,r){switch(t.gameVersion){case 1:return!1;case 2:return Sb.write(n,e,t,r);case 3:return gb.write(n,e,t,r)}return!1}};hr(y_);const f8={id:"GATE",name:"Skeleton Key Gate",activationType:Wt.WALKOVER,executionType:s0.PROCESS,fakeEvent:!0,supportedGames:[Qe.MP3_USA],parse(n,e){switch(e.gameVersion){case 1:return!1;case 2:return!1;case 3:return db.parse(n,e)}return!1},write(n,e,t,r){switch(t.gameVersion){case 1:return!1;case 2:return!1;case 3:return db.write(n,e,t,r)}return!1}};hr(f8);const bI={id:"GATECLOSE",name:"Skeleton Key Gate Close",activationType:Wt.WALKOVER,executionType:s0.DIRECT,parameters:[{name:"gateIndex",type:an.Number}],fakeEvent:!0,supportedGames:[Qe.MP3_USA],parse(n,e){switch(e.gameVersion){case 1:return!1;case 2:return!1;case 3:return ub.parse(n,e)}return!1},write(n,e,t,r){switch(t.gameVersion){case 1:return!1;case 2:return!1;case 3:return ub.write(n,e,t,r)}return!1}};hr(bI);const PI={id:"CHAINSPLIT2",name:"",activationType:Wt.WALKOVER,executionType:s0.PROCESS,parameters:[{name:"left_space",type:an.Space},{name:"right_space",type:an.Space},{name:"chains",type:an.NumberArray}],fakeEvent:!0,supportedGames:[Qe.MP2_USA],parse(n,e){const t={METHOD_START:"0C01A009C54E209652DA667F464FB7C0",METHOD_MID2:"FC606B8F8BD2C8D39BB9581B0E4D8398",METHOD_END:"2F3A0045D0AC927FF23ACD73B5B62E1C"};if(Wn([n.buffer,e.offset,44],t.METHOD_START)&&Wn([n.buffer,e.offset+76,28],t.METHOD_MID2)&&Wn([n.buffer,e.offset+240,40],t.METHOD_END)){const r=n.getUint16(e.offset+234),i=n.getUint16(e.offset+238),a=e.chains[r][0],o=e.chains[i][0];return Go(e.curSpace,a,e.board),Go(e.curSpace,o,e.board),!0}return!1},write(n,e,t,r){const i=e.parameterValues.chains;return`
  addiu SP, SP, -0x28
  sw    RA, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)

  ; Change player to standing animation?
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2

  jal   func_8007DA44
   nop
  jal   chainsplit_setup_arrows
   nop
  lui   S0, hi(D_800F93C6)
  addiu S0, S0, lo(D_800F93C6)
  lh    A0, 0(S0)
  lui   A1, hi(indices)
  jal   func_80041A74
   addiu A1, A1, lo(indices)
  move  S2, V0
  move  A0, S2
  lh    A1, 0(S0)
  jal   func_800417EC
   move  A2, R0
  jal   func_8005DCA0
   li    A0, -1
  beqz  V0, L80107D14
   li    V0, 4
  lui   A0, hi(ai_random_choice)
  addiu A0, A0, lo(ai_random_choice)
  jal   func_80044800
   move  S0, R0
  sll   V0, V0, 0x10
  sra   S1, V0, 0x10
  blez  S1, L80107D0C
   move  A0, S2
L80107CF4:
  jal   func_80041610
   li    A1, -2
  addiu S0, S0, 1
  slt   V0, S0, S1
  bnez  V0, L80107CF4
   move  A0, S2
L80107D0C:
  jal   func_80041610
   li    A1, -4
L80107D14:
  jal   func_800418D8
   move  A0, S2
  move  S0, V0
  jal   func_8004108C
   move  A0, S2
  jal   chainsplit_hide_arrows
   nop
  bnez  S0, L80107D40
   li    A0, -1
  j     L80107D44
   li    A1, ${i[0]}
L80107D40:
  li    A1, ${i[1]}
L80107D44:
  jal   SetNextChainAndSpace
   move  A2, R0
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

ai_random_choice:
  .word 0x00000000, 0x00000000, 0x00003232

indices:
  .halfword left_space
  .halfword right_space
  .halfword 0xFFFF
  .align 4

.beginstatic

chainsplit_setup_arrows:
/* 298E94 80103BC4 27BDFFE8 */  addiu SP, SP, -0x18
/* 298E98 80103BC8 AFBF0010 */  sw    RA, 0x10(SP)
L80103BCC:
/* 298E9C 80103BCC 0C014E66 */  jal   func_80053998
/* 298EA0 80103BD0 00000000 */   nop
/* 298EA4 80103BD4 10400005 */  beqz  V0, L80103BEC
/* 298EA8 80103BD8 00000000 */   nop
/* 298EAC 80103BDC 0C01F691 */  jal   func_8007DA44
/* 298EB0 80103BE0 00000000 */   nop
/* 298EB4 80103BE4 08040EF3 */  j     L80103BCC
/* 298EB8 80103BE8 00000000 */   nop
L80103BEC:
/* 298EBC 80103BEC 0C01F691 */  jal   func_8007DA44
/* 298EC0 80103BF0 00000000 */   nop
/* 298EC4 80103BF4 00002021 */  move  A0, R0
/* 298EC8 80103BF8 24050092 */  li    A1, 146
/* 298ECC 80103BFC 0C01331F */  jal   func_8004CC7C
/* 298ED0 80103C00 24060001 */   li    A2, 1
/* 298ED4 80103C04 3C018011 */  lui   AT, hi(chainsplit_arrow_memval1)
/* 298ED8 80103C08 AC2236D8 */  sw    V0, lo(chainsplit_arrow_memval1)(AT)
/* 298EDC 80103C0C 24040001 */  li    A0, 1
/* 298EE0 80103C10 240500A0 */  li    A1, 160
/* 298EE4 80103C14 0C01331F */  jal   func_8004CC7C
/* 298EE8 80103C18 24060001 */   li    A2, 1
/* 298EEC 80103C1C 3C018011 */  lui   AT, hi(chainsplit_arrow_memval2)
/* 298EF0 80103C20 AC2236DC */  sw    V0, lo(chainsplit_arrow_memval2)(AT)
/* 298EF4 80103C24 2404000D */  li    A0, 13
/* 298EF8 80103C28 240500AE */  li    A1, 174
/* 298EFC 80103C2C 0C01331F */  jal   func_8004CC7C
/* 298F00 80103C30 24060001 */   li    A2, 1
/* 298F04 80103C34 3C018011 */  lui   AT, hi(chainsplit_arrow_memval3)
/* 298F08 80103C38 AC2236E8 */  sw    V0, lo(chainsplit_arrow_memval3)(AT)
/* 298F0C 80103C3C 24040003 */  li    A0, 3
/* 298F10 80103C40 240500BC */  li    A1, 188
/* 298F14 80103C44 0C01331F */  jal   func_8004CC7C
/* 298F18 80103C48 24060001 */   li    A2, 1
/* 298F1C 80103C4C 3C018011 */  lui   AT, hi(chainsplit_arrow_memval4)
/* 298F20 80103C50 AC2236E0 */  sw    V0, lo(chainsplit_arrow_memval4)(AT)
/* 298F24 80103C54 2404000B */  li    A0, 11
/* 298F28 80103C58 240500CA */  li    A1, 202
/* 298F2C 80103C5C 0C01331F */  jal   func_8004CC7C
/* 298F30 80103C60 24060001 */   li    A2, 1
/* 298F34 80103C64 3C018011 */  lui   AT, hi(chainsplit_arrow_memval5)
/* 298F38 80103C68 AC2236E4 */  sw    V0, lo(chainsplit_arrow_memval5)(AT)
/* 298F3C 80103C6C 0C01F678 */  jal   func_8007D9E0
/* 298F40 80103C70 24040003 */   li    A0, 3
/* 298F44 80103C74 24020001 */  li    V0, 1
/* 298F48 80103C78 3C018010 */  lui   AT, hi(D_800FA198)
/* 298F4C 80103C7C A422A198 */  sh    V0, lo(D_800FA198)(AT)
/* 298F50 80103C80 3C018010 */  lui   AT, hi(D_80101058)
/* 298F54 80103C84 A4221058 */  sh    V0, lo(D_80101058)(AT)
/* 298F58 80103C88 8FBF0010 */  lw    RA, 0x10(SP)
/* 298F5C 80103C8C 03E00008 */  jr    RA
/* 298F60 80103C90 27BD0018 */   addiu SP, SP, 0x18

chainsplit_hide_arrows:
/* 298F64 80103C94 27BDFFE8 */  addiu SP, SP, -0x18
/* 298F68 80103C98 AFBF0010 */  sw    RA, 0x10(SP)
/* 298F6C 80103C9C 3C018010 */  lui   AT, hi(D_800FA198)
/* 298F70 80103CA0 A420A198 */  sh    R0, lo(D_800FA198)(AT)
/* 298F74 80103CA4 3C018010 */  lui   AT, hi(D_80101058)
/* 298F78 80103CA8 A4201058 */  sh    R0, lo(D_80101058)(AT)
/* 298F7C 80103CAC 3C048011 */  lui   A0, hi(chainsplit_arrow_memval1)
/* 298F80 80103CB0 0C01335C */  jal   func_8004CD70
/* 298F84 80103CB4 8C8436D8 */   lw    A0, lo(chainsplit_arrow_memval1)(A0)
/* 298F88 80103CB8 3C048011 */  lui   A0, hi(chainsplit_arrow_memval2)
/* 298F8C 80103CBC 0C01335C */  jal   func_8004CD70
/* 298F90 80103CC0 8C8436DC */   lw    A0, lo(chainsplit_arrow_memval2)(A0)
/* 298F94 80103CC4 3C048011 */  lui   A0, hi(chainsplit_arrow_memval3)
/* 298F98 80103CC8 0C01335C */  jal   func_8004CD70
/* 298F9C 80103CCC 8C8436E8 */   lw    A0, lo(chainsplit_arrow_memval3)(A0)
/* 298FA0 80103CD0 3C048011 */  lui   A0, hi(chainsplit_arrow_memval4)
/* 298FA4 80103CD4 0C01335C */  jal   func_8004CD70
/* 298FA8 80103CD8 8C8436E0 */   lw    A0, lo(chainsplit_arrow_memval4)(A0)
/* 298FAC 80103CDC 3C048011 */  lui   A0, hi(chainsplit_arrow_memval5)
/* 298FB0 80103CE0 0C01335C */  jal   func_8004CD70
/* 298FB4 80103CE4 8C8436E4 */   lw    A0, lo(chainsplit_arrow_memval5)(A0)
/* 298FB8 80103CE8 8FBF0010 */  lw    RA, 0x10(SP)
/* 298FBC 80103CEC 03E00008 */  jr    RA
/* 298FC0 80103CF0 27BD0018 */   addiu SP, SP, 0x18

.align 4
  chainsplit_arrow_memval1:
    .word 0
  chainsplit_arrow_memval2:
    .word 0
  chainsplit_arrow_memval3:
    .word 0
  chainsplit_arrow_memval4:
    .word 0
  chainsplit_arrow_memval5:
    .word 0

.endstatic
`}};hr(PI);function Va(n,e,t){return new Promise((r,i)=>{const a=Xs(),o=setTimeout(()=>i("Failed to write image!"),45e3);a.onload=()=>{const s=a.height,l=a.width,u=No(l,s);u.drawImage(a,0,0,l,s);let d=u.getImageData(0,0,l,s);(e!==l||t!==s)&&(d=C6(d,e,t)),clearTimeout(o),r(d)},a.src=n})}const fy=68,ZZ=1297377380,_b=1297379947;function RI(n,e){const t=new ArrayBuffer(1e5),r=new DataView(t),i=$Z(n),a=n.getUint32(64);e$(r,i,a);let o=14;for(let s=0;s<fy-4;s+=4){const l=n.getUint32(s);if(l===0)continue;let u=0;const d=new Map,h={altPattern:null,altOffset:0,altLength:0,position:l,original:-1};let f=!1;for(;h.position<e&&!f;){h.position,h.original=-1,qa(n,h,!0);let g=bt(n,h,!0),_=g<128;if(g===255||_&&u===255){let E;if(_?E=g:E=bt(n,h,!0),E==81)(bt(n,h,!0)<<8|bt(n,h,!0))<<8|bt(n,h,!0);else if(E==45){let x=bt(n,h,!0);bt(n,h,!0);let v=((bt(n,h,!1)<<8|bt(n,h,!1))<<8|bt(n,h,!1))<<8|bt(n,h,!1);if(x==255||x==0)break;{const C=d.get(h.position);if(d.has(h.position)){let V=C;V===0?d.delete(h.position):d.set(h.position,V-1)}else d.set(h.position,x-1);h.altPattern===null?h.position=h.position-v:d.delete(h.position)}}else E==46?(bt(n,h,!0),bt(n,h,!0)):E==47&&(f=!0);_||(u=g)}else g>=144&&g<160||_&&u>=144&&u<160?(_||bt(n,h,!0),bt(n,h,!0),qa(n,h,!0),_||(u=g)):g>=176&&g<192||_&&u>=176&&u<192?(_||bt(n,h,!0),bt(n,h,!0),_||(u=g)):g>=192&&g<208||_&&u>=192&&u<208||g>=208&&g<224||_&&u>=208&&u<224?(_||bt(n,h,!0),_||(u=g)):(g>=224&&g<240||_&&u>=224&&u<240)&&(_||bt(n,h,!0),bt(n,h,!0),_||(u=g))}}for(let s=0;s<fy-4;s+=4){let l=0,u=0,d=new Array(196608);for(let f=0;f<196608;f++)d[f]=new w1;let h=n.getUint32(s);if(h!=0){r.setUint32(o,1297379947),o+=4;let f=0;const m=new Map,g=[],_={altPattern:null,altOffset:0,altLength:0,position:h,original:-1};let E=!1;for(;_.position<e&&!E;){if(u>=196608){for(let R=0;R<u;R++)d[R].contents!=null&&(d[R].contents=null);return console.error("Overflow? trackEventCountSub >= 0x30000"),t}_.position,_.original=-1;let V=qa(n,_,!0);d[u].deltaTime+=V,l+=V,d[u].absoluteTime=l;let D=bt(n,_,!0),H=D<128;if(D==255||H&&f==255){let R;if(H?R=D:R=bt(n,_,!0),R==81){let j=(bt(n,_,!0)<<8|bt(n,_,!0))<<8|bt(n,_,!0);d[u].type=255,d[u].contentSize=5,d[u].contents=new Array(5),d[u].contents[0]=81,d[u].contents[1]=3,d[u].contents[2]=j>>16&255,d[u].contents[3]=j>>8&255,d[u].contents[4]=j>>0&255,u++}else if(R==45){let j=0;g.length>0&&(j=g.pop()),d[u].type=176|s/4&15,d[u].contentSize=2,d[u].contents=new Array(2),d[u].contents[0]=103,d[u].contents[1]=j,u++;let te=bt(n,_,!0);bt(n,_,!0);let $=((bt(n,_,!1)<<8|bt(n,_,!1))<<8|bt(n,_,!1))<<8|bt(n,_,!1);if(!(te==255||te==0)){let z=m.get(_.position);if(m.has(_.position)){let I=z;I==0?m.delete(_.position):m.set(_.position,I-1)}else m.set(_.position,te-1);_.altPattern===null?_.position=_.position-$:m.delete(_.position)}}else if(R==46){let j=bt(n,_,!0);bt(n,_,!0),d[u].type=176|s/4&15,d[u].contentSize=2,d[u].contents=new Array(2),d[u].contents[0]=102,d[u].contents[1]=j,u++,g.push(j)}else R==47&&(d[u].type=255,d[u].contentSize=2,d[u].contents=new Array(2),d[u].contents[0]=47,d[u].contents[1]=0,u++,E=!0);H||(f=D)}else if(D>=144&&D<160||H&&f>=144&&f<160){let R;H?(d[u].type=f,R=D):(d[u].type=D,R=bt(n,_,!0));let j=bt(n,_,!0),te=qa(n,_,!0);d[u].durationTime=te,d[u].contentSize=2,d[u].contents=new Array(2),d[u].contents[0]=R,d[u].contents[1]=j,u++,H||(f=D)}else if(D>=176&&D<192||H&&f>=176&&f<192){let R;H?(R=D,d[u].type=f):(R=bt(n,_,!0),d[u].type=D);let j=bt(n,_,!0);d[u].contentSize=2,d[u].contents=new Array(2),d[u].contents[0]=R,d[u].contents[1]=j,u++,H||(f=D)}else if(D>=192&&D<208||H&&f>=192&&f<208){let R;H?(R=D,d[u].type=f):(R=bt(n,_,!0),d[u].type=D),d[u].contentSize=1,d[u].contents=[R],u++,H||(f=D)}else if(D>=208&&D<224||H&&f>=208&&f<224){let R;H?(R=D,d[u].type=f):(R=bt(n,_,!0),d[u].type=D),d[u].contentSize=1,d[u].contents=[R],u++,H||(f=D)}else if(D>=224&&D<240||H&&f>=224&&f<240){let R;H?(R=D,d[u].type=f):(R=bt(n,_,!0),d[u].type=D);let j=bt(n,_,!0);d[u].contentSize=2,d[u].contents=[R,j],u++,H||(f=D)}else D==254||console.error(`${D} ERROR MISSING PARSE OF TYPE`)}for(let V=0;V<u;V++){if(u>=196608){for(let H=0;H<u;H++)d[H].contents!==null&&(d[H].contents=null);return console.error("Overflow 2? trackEventCountSub >= 0x30000"),t}let D=d[V];if(D.type>=144&&D.type<160&&D.durationTime>0){let H=D.absoluteTime+D.durationTime;if(V!=u-1){for(let R=V+1;R<u;R++)if(d[R].absoluteTime>=H&&R!=u-1){for(let j=u-1;j>=R;j--){d[j+1].absoluteTime=d[j].absoluteTime,d[j+1].contentSize=d[j].contentSize,d[j+1].contents!==null&&(d[j+1].contents=null),d[j+1].contents=new Array(d[j].contentSize);for(let te=0;te<d[j].contentSize;te++)d[j+1].contents[te]=d[j].contents[te];d[j+1].deltaTime=d[j].deltaTime,d[j+1].durationTime=d[j].durationTime,d[j+1].obsoleteEvent=d[j].obsoleteEvent,d[j+1].type=d[j].type}d[R].type=d[V].type,d[R].absoluteTime=H,d[R].deltaTime=d[R].absoluteTime-d[R-1].absoluteTime,d[R].contentSize=d[V].contentSize,d[R].durationTime=0,d[R].contents=new Array(d[R].contentSize),d[R].contents[0]=d[V].contents[0],d[R].contents[1]=0,d[R+1].deltaTime=d[R+1].absoluteTime-d[R].absoluteTime,d[R].deltaTime>4278190080,u++;break}else if(R==u-1){d[R+1].absoluteTime=H,d[R+1].contentSize=d[R].contentSize,d[R+1].contents!==null&&(d[R+1].contents=null),d[R+1].contents=new Array(d[R].contentSize);for(let j=0;j<d[R].contentSize;j++)d[R+1].contents[j]=d[R].contents[j];d[R+1].deltaTime=d[R].deltaTime,d[R+1].durationTime=d[R].durationTime,d[R+1].obsoleteEvent=d[R].obsoleteEvent,d[R+1].type=d[R].type,d[R].type=d[V].type,d[R].absoluteTime=H,d[R].deltaTime=d[R].absoluteTime-d[R-1].absoluteTime,d[R].contentSize=d[V].contentSize,d[R].durationTime=0,d[R].contents=new Array(d[R].contentSize),d[R].contents[0]=d[V].contents[0],d[R].contents[1]=0,d[R+1].deltaTime=d[R+1].absoluteTime-d[R].absoluteTime,u++;break}}else{d[V+1].absoluteTime=H,d[V+1].contentSize=d[V].contentSize,d[V+1].contents!==null&&(d[V+1].contents=null),d[V+1].contents=new Array(d[V].contentSize);for(let R=0;R<d[V].contentSize;R++)d[V+1].contents[R]=d[V].contents[R];d[V+1].deltaTime=d[V].deltaTime,d[V+1].durationTime=d[V].durationTime,d[V+1].obsoleteEvent=d[V].obsoleteEvent,d[V+1].type=d[V].type,d[V].type=d[V].type,d[V].absoluteTime=H,d[V].absoluteTime-d[V-1].absoluteTime>4278190080,d[V].deltaTime=d[V].absoluteTime-d[V-1].absoluteTime,d[V].contentSize=d[V].contentSize,d[V].durationTime=0,d[V].contents=new Array(d[V].contentSize),d[V].contents[0]=d[V].contents[0],d[V].contents[1]=0,d[V+1].deltaTime=d[V+1].absoluteTime-d[V].absoluteTime,d[V].deltaTime>4278190080,u++}}}let x=0,v=0,C=0;for(let V=0;V<u;V++){let D=d[V];if(D.obsoleteEvent)x+=D.deltaTime;else{let[H,R]=F1(D.deltaTime+x);x=0,v+=R,(D.type!==C||D.type===255)&&(v+=1),v+=D.contentSize,C=D.type}}r.setUint32(o,v),o+=4,x=0,C=0;for(let V=0;V<u;V++){let D=d[V];if(D.obsoleteEvent)x+=D.deltaTime;else{let[H,R]=F1(D.deltaTime+x);x=0,o=hy(r,o,H,R),(D.type!=C||D.type==255)&&(r.setUint8(o,D.type),o++);for(let j=0;j<D.contentSize;j++)r.setUint8(o,D.contents[j]),o++;C=D.type}}}for(let f=0;f<u;f++)d[f].contents!==null&&(d[f].contents=null)}return t.slice(0,o)}function IE(n,e){const t=(e==null?void 0:e.loop)||!1,r=0;let i=[],a=[];for(let j=0;j<32;j++)a.push([]),i.push(0);const o=new DataView(n);if(o.getUint32(0)!==ZZ)return null;o.getUint32(4);const s=o.getUint16(8);let l=o.getUint16(10);const u=o.getUint16(12);if(l>16&&(console.log("Too many tracks, truncating to 16."),l=16),s!==0&&s!==1)return console.log("Invalid midi type"),null;let d={altPattern:null,altOffset:0,altLength:0,position:14,original:0},h=!1,f=0,m=[];for(let j=0;j<16;j++)m[j]=0;for(let j=0;j<l;j++){let te=0;if(o.getUint32(d.position)!==_b)return console.log("Invalid track midi header"),null;o.getUint32(d.position+4),d.position+=8;let $=255,z=!1;for(;!z&&d.position<n.byteLength;){d.original=0;let I=qa(o,d,!1);te+=I;let q=bt(o,d,!1),P=q<=127;if(q===255){let ee=bt(o,d,!1);if(ee===47)te-=I,z=!0,bt(o,d,!1);else if(ee===81)bt(o,d,!1),bt(o,d,!1),bt(o,d,!1),bt(o,d,!1);else if(ee<127&&!(ee===81||ee===47)){let ue=qa(o,d,!1);for(let U=0;U<ue;U++)bt(o,d,!1)}else if(ee===127){let ue=qa(o,d,!1);for(let U=0;U<ue;U++)bt(o,d,!1)}$=q}else if(q>=128&&q<144||P&&$>=128&&$<144)P||bt(o,d,!1),bt(o,d,!1),P||($=q);else if(q>=144&&q<160||P&&$>=144&&$<160)P||bt(o,d,!1),bt(o,d,!1),P||($=q);else if(q>=176&&q<192||P&&$>=176&&$<192)P||bt(o,d,!1),bt(o,d,!1),P||($=q);else if(q>=192&&q<208||P&&$>=192&&$<208)P||bt(o,d,!1),P||($=q);else if(q>=208&&q<224||P&&$>=208&&$<224)P||bt(o,d,!1),P||($=q);else if(q>=224&&q<240||P&&$>=224&&$<240)P||bt(o,d,!1),bt(o,d,!1),P||($=q);else if(q==240||q==247){let ee=qa(o,d,!1);for(let ue=0;ue<ee;ue++)bt(o,d,!1)}else h||(console.warn("Invalid midi character found"),h=!0)}te>f&&(f=te),te>m[j]&&(m[j]=te)}d={altPattern:null,altOffset:0,altLength:0,position:14,original:0};for(let j=0;j<l;j++){let te=0;if(o.getUint32(d.position)!==_b)return console.log("Invalid track midi header"),null;o.getUint32(d.position+4),d.position+=8;let $=255,z=!1,I=!1;if(t&&r===0&&m[j]>0){const q=a[j][i[j]]=new w1;q.type=255,q.absoluteTime=0,q.contentSize=3,q.contents=[46,0,255],q.deltaTime=0,q.obsoleteEvent=!1,i[j]++,I=!0}for(;!z&&d.position<n.byteLength;){d.original=0;let q=qa(o,d,!1);te+=q;let P=a[j][i[j]]=new w1;P.deltaTime=q,P.obsoleteEvent=!1,P.contents=null,P.absoluteTime=te,t&&!I&&m[j]>r&&(te==r?(P.type=255,P.absoluteTime=te,P.contentSize=3,P.contents=[46,0,255],P.deltaTime=q,P.obsoleteEvent=!1,i[j]++,P=a[j][i[j]]=new w1,P.deltaTime=q,P.obsoleteEvent=!1,P.contents=null,P.absoluteTime=te,I=!0):te>r&&(P.type=255,P.absoluteTime=r,P.contentSize=3,P.contents=[46,0,255],i[j]>0?P.deltaTime=r-a[j][i[j]-1].absoluteTime:P.deltaTime=r,P.obsoleteEvent=!1,i[j]++,P=a[j][i[j]]=new w1,P.deltaTime=te-r,P.obsoleteEvent=!1,P.contents=null,P.absoluteTime=te,I=!0));let ee=bt(o,d,!1),ue=ee<=127;if(ee===255){let U=bt(o,d,!1);if(U===47){if(z=!0,t&&m[j]>r){let O=a[j][i[j]-1];if(O.type===255&&O.contentSize>0&&O.contents[0]===46)P=O,P.type=255,P.contentSize=1,P.contents=[47];else{let G=a[j][i[j]+1]=new w1;G.absoluteTime=f,G.deltaTime=0,G.durationTime=P.durationTime,G.obsoleteEvent=P.obsoleteEvent,G.type=255,G.contentSize=1,G.contents=[47],P.type=255,f>O.absoluteTime+O.durationTime?(P.deltaTime=f-(O.absoluteTime+O.durationTime),P.absoluteTime=f):(P.deltaTime=0,P.absoluteTime=O.absoluteTime),P.contentSize=7,P.contents=[45,255,255,0,0,0,0],P.obsoleteEvent=!1,i[j]++}}else P.type=255,P.contentSize=1,P.contents=[47];bt(o,d,!1)}else if(U===81)bt(o,d,!1),P.type=255,P.contentSize=4,P.contents=[81,bt(o,d,!1),bt(o,d,!1),bt(o,d,!1)];else if(U<127&&!(U==81||U==47)){P.type=255;let O=qa(o,d,!1);for(let G=0;G<O;G++)bt(o,d,!1);P.obsoleteEvent=!0}else if(U===127){P.type=255;let O=qa(o,d,!1);for(let G=0;G<O;G++)bt(o,d,!1);P.obsoleteEvent=!0}$=ee}else if(ee>=128&&ee<144||ue&&$>=128&&$<144){let U,O;ue?(P.type=$,O=ee,U=$):(P.type=ee,O=bt(o,d,!1),U=ee);let G=bt(o,d,!1);for(let ne=i[j]-1;ne>=0;ne--)if(a[j][ne].type==(144|U&15)&&!a[j][ne].obsoleteEvent&&a[j][ne].contents[0]==O){a[j][ne].durationTime=te-a[j][ne].absoluteTime;break}P.durationTime=0,P.contentSize=2,P.contents=[O,G],P.obsoleteEvent=!0,ue||($=ee)}else if(ee>=144&&ee<160||ue&&$>=144&&$<160){let U,O;ue?(P.type=$,O=ee,U=$):(P.type=ee,O=bt(o,d,!1),U=ee);let G=bt(o,d,!1);if(G===0){for(let ne=i[j]-1;ne>=0;ne--)if(a[j][ne].type==U&&!a[j][ne].obsoleteEvent&&a[j][ne].contents[0]==O){a[j][ne].durationTime=te-a[j][ne].absoluteTime;break}P.durationTime=0,P.contentSize=2,P.contents=[O,G],P.obsoleteEvent=!0}else{for(let ne=i[j]-1;ne>=0;ne--)if(a[j][ne].type==U&&!a[j][ne].obsoleteEvent&&a[j][ne].contents[0]==O){a[j][ne].durationTime==0&&(a[j][ne].durationTime=te-a[j][ne].absoluteTime);break}P.durationTime=0,P.contentSize=2,P.contents=[O,G]}ue||($=ee)}else if(ee>=176&&ee<192||ue&&$>=176&&$<192){let U;ue?(U=ee,P.type=$):(U=bt(o,d,!1),P.type=ee);let O=bt(o,d,!1);P.contentSize=2,P.contents=[U,O],ue||($=ee)}else if(ee>=192&&ee<208||ue&&$>=192&&$<208){let U;ue?(U=ee,P.type=$):(U=bt(o,d,!1),P.type=ee),ee&15,U=U,P.contentSize=1,P.contents=[U],ue||($=ee)}else if(ee>=208&&ee<224||ue&&$>=208&&$<224){P.type=ee;let U;ue?(U=ee,P.type=$):(U=bt(o,d,!1),P.type=ee),P.contentSize=1,P.contents=[U],ue||($=ee)}else if(ee>=224&&ee<240||ue&&$>=224&&$<240){P.type=ee;let U;ue?(U=ee,P.type=$):(U=bt(o,d,!1),P.type=ee);let O=bt(o,d,!1);P.contentSize=2,P.contents=[U,O],ue||($=ee)}else if(ee==240||ee==247){P.type=ee;let U=qa(o,d,!1);for(let O=0;O<U;O++)bt(o,d,!1);P.obsoleteEvent=!0}else h||(console.error("Invalid midi character found"),h=!0);i[j]++}}let g=new ArrayBuffer(1048576),_=new DataView(g),E=0,x=0,v=68;for(let j=0;j<l;j++){let te=0,$=0,z=0;if(i[j]>0){_.setUint32(E,v),E+=4;for(let I=0;I<i[j];I++){const q=a[j][I];let[P,ee]=F1(q.deltaTime+x);if(q.obsoleteEvent)x+=q.deltaTime;else{if(q.type===255&&q.contents[0]===46&&($=v+te+1+q.contentSize+ee),x=0,te+=ee,q.type===255&&q.contents[0]===45){let ue=v+te-$+8;q.contents[3]=ue>>24&255,q.contents[4]=ue>>16&255,q.contents[5]=ue>>8&255,q.contents[6]=ue>>0&255}if((q.type!==z||q.type===255)&&(te+=1),te+=q.contentSize,q.type>=144&&q.type<160){let[ue,U]=F1(q.durationTime);te+=U}z=q.type}}v+=te}else _.setUint32(E,0),E+=4}for(let j=l;j<16;j++)_.setUint32(E,0),E+=4;_.setUint32(E,u),E+=4;for(let j=0;j<l;j++)if(i[j]>0){let te=0;for(let $=0;$<i[j];$++){let z=a[j][$];if(z.obsoleteEvent)x+=z.deltaTime;else{let[I,q]=F1(z.deltaTime+x);if(x=0,E=hy(_,E,I,q),(z.type!==te||z.type===255)&&(_.setUint8(E,z.type),E++),fr(_,z.contents,E,0,z.contentSize),E+=z.contentSize,z.type>=144&&z.type<160){let[P,ee]=F1(z.durationTime);E=hy(_,E,P,ee)}te=z.type}}}const C=g.slice(0,E),V=new DataView(C);let D=[],H=[];for(let j=0;j<64;j+=4)D[j/4]=((V.getUint8(j)<<8|V.getUint8(j+1))<<8|V.getUint8(j+2))<<8|V.getUint8(j+3),H[j/4]=0;for(let j=0;j<E;j++)if(j>68&&V.getUint8(j)===254)for(let te=0;te<l;te++)D[te]>j&&H[te]++;for(let j=0;j<16;j++)V.setUint32(j*4,D[j]+H[j]);let R=0;for(let j=0;j<E;j++)_.setUint8(R,V.getUint8(j)),R++,j>68&&V.getUint8(j)===254&&(_.setUint8(R,V.getUint8(j)),R++);return Bn(R>=E),g.slice(0,R)}function $Z(n){let e=0;for(let t=0;t<fy-4;t+=4)n.getUint32(t)!==0&&e++;return e}function e$(n,e,t){n.setUint32(0,1297377380),n.setUint32(4,6),n.setUint16(8,1),n.setUint16(10,e),n.setUint16(12,t)}function qa(n,e,t){let r=0,i=0;for(;;){if(e.altPattern!==null)i=e.altPattern[e.altOffset],e.altOffset++,e.altOffset===e.altLength&&(e.altPattern=null,e.altOffset=0,e.altLength=0);else{i=n.getUint8(e.position),e.position++;const o=n.getUint8(e.position);if(t&&i===254){if(o!==254){let s=o;e.position++;const l=s<<8|n.getUint8(e.position);e.position++;const u=n.getUint8(e.position);e.position++,e.altPattern=new Array(u);const d=e.position-4-l,h=d+u;for(let f=d;f<h;f++)e.altPattern[f-d]=n.getUint8(f);e.altOffset=0,e.altLength=u,i=e.altPattern[e.altOffset],e.altOffset++}else e.position++;e.altOffset===e.altLength&&e.altPattern!==null&&(e.altPattern=null,e.altOffset=0,e.altLength=0)}}if(i>>7===1)r+=i,r=r<<8;else{r+=i;break}}e.original=r;let a=0;for(let o=0,s=0;a+=(r>>o&127)<<s,o!=24;o+=8,s+=7);return a}function bt(n,e,t){let r;if(e.altPattern!==null)r=e.altPattern[e.altOffset],e.altOffset++;else if(r=n.getUint8(e.position),e.position++,t&&r===254){const i=n.getUint8(e.position);if(i!==254){let a=i;e.position++;const o=a<<8|n.getUint8(e.position);e.position++;const s=n.getUint8(e.position);e.position++,e.altPattern=new Array(s);const l=e.position-4-o,u=l+s;for(let d=l;d<u;d++)e.altPattern[d-l]=n.getUint8(d);e.altOffset=0,e.altLength=s,r=e.altPattern[e.altOffset],e.altOffset++}else e.position++}return e.altOffset===e.altLength&&e.altPattern!==null&&(e.altPattern=null,e.altOffset=0,e.altLength=0),r}function hy(n,e,t,r,i){let a;return r===1?(a=t&255,n.setUint8(e,a),e+=1):r===2?(a=t>>8&255,n.setUint8(e,a),e+=1,a=t&255,n.setUint8(e,a),e+=1):r===3?(a=t>>16&255,n.setUint8(e,a),e+=1,a=t>>8&255,n.setUint8(e,a),e+=1,a=t&255,n.setUint8(e,a),e+=1):(a=t>>24&255,n.setUint8(e,a),e+=1,a=t>>8&255,n.setUint8(e,a),e+=1,a=t&255,n.setUint8(e,a),e+=1),e}function F1(n){let e=n>>21&127,t=n>>14&127,r=n>>7&127,i=n>>0&127;if(e>0){let a=2155905024;return a|=e<<24,a|=t<<16,a|=r<<8,a|=i,[a,4]}else if(t>0){let a=8421376;return a|=t<<16,a|=r<<8,a|=i,[a,3]}else if(r>0){let a=32768;return a|=r<<8,a|=i,[a,2]}else return[n,1]}class w1{constructor(){this.obsoleteEvent=!1,this.deltaTime=0,this.durationTime=0,this.absoluteTime=0,this.type=0,this.contents=null,this.contentSize=0}}const t$=""+new URL("bootsplash.74126b65.png",import.meta.url).href;class OE{constructor(e){this.EVENT_MEM_SIZE=327680,this.EVENT_RAM_LOC=(2147483648|8388608-this.EVENT_MEM_SIZE)>>>0,this.EVENT_HEADER_SIZE=16,this.options=e,"writeBranding"in this.options||(this.options.writeBranding=!0)}loadBoards(){const e=[],t=Tt.getROMGame(),r=Q4(t);if(!r)return wt(`Game ${t} has no board infos defined in PP64`),[];for(let i=0;i<r.length;i++){G0()&&console.group(`Board ${i}`);const a=r[i],o=a.bgDir,s=$n.readBackground(o);let l;const u=this._pullBoardFromRom(a);if(u)l=u,l.bg=s,l.otherbg={};else{const d={game:this.gameVersion,type:a.type||zn.NORMAL,bg:s,otherbg:{},events:{}},h=dt.get(this.boardDefDirectory,a.boardDefFile);l=IH(h,d);const f=l._chains;delete l._chains,wt(`Board ${i} chains: `,f),this.onChangeBoardSpaceTypesFromGameSpaceTypes(l,f),this._applyPerspective(l),this._cleanLoadedBoard(l),this._parseAudio(l,a),this._findEventTableLocations(a),this._extractEvents(a,l,i,f),this._extractStarGuardians(l,a),this._extractBoos(l,a)}this.onParseStrings(l,a),l.name||(l.name=a.name||""),this.onParseBoardSelectImg(l,a),this.onParseBoardLogoImg(l,a),a.onLoad&&a.onLoad(l),this.onLoad&&this.onLoad(l,a,!!u),e.push(l),G0()&&console.groupEnd()}if(G0()){const i=Rr.getPatchInfo().length;for(let a=0;a<i;a++)Rr.getROMOffset(a)}return e}async overwriteBoard(e,t){const r=Sc(t),i=xH(Tt.getROMGame(),e),a=MM(r);zH(r,a),Yne(r),this.onChangeGameSpaceTypesFromBoardSpaceTypes(r),this._reversePerspective(r);const o=NH(r,a);dt.write(this.boardDefDirectory,i.boardDefFile,o),this._createGateEvents(r,i,a);const s=this.onWriteAudio(r,i,e),l=await this._writeNewBoardOverlay(r,i,e,s);this.onWriteStrings(r,i),this.onCreateChainEvents(r,a),this._createStarEvents(r),i.onWriteEvents&&i.onWriteEvents(r),this.onWriteEvents&&this.onWriteEvents(r),await this._writeEvents(r,i,e,a,l,s),this._clearOtherBoardNames(e),this._stashBoardIntoRom(t,i),$n.updateMetadata(i.bgDir,r.bg),i.onAfterOverwrite&&i.onAfterOverwrite(r);const u=Tt.getDataView();this.onAfterOverwrite&&this.onAfterOverwrite(u,r,i,e),await this.onOverwritePromises(t,i,e)}async _writeNewBoardOverlay(e,t,r,i){const a=await this.onCreateBoardOverlay(e,t,r,i),o=Tt.getROMGame(),s=`
        ${Jw(o,!0).join(`
`)}
        ${Zw(a).join(`
`)}

        ${a}
      `;wt(s);const l=Object.create(null),u=rl(s,{symbolOutputMap:l}),d=cn.getInfo(t.sceneIndex),h=this._makeSymbolsForEventAssembly(l,d);return cn.replace(t.sceneIndex,u.slice(0,l.bss),{code_end:d.code_start+l.rodata,rodata_start:d.code_start+l.rodata,rodata_end:d.code_start+l.bss,bss_start:d.code_start+l.bss,bss_end:d.code_start+u.byteLength}),h}async onCreateBoardOverlay(e,t,r,i){throw new Error("Adapter does not implement onCreateBoardOverlay")}onAfterSave(e){}onOverwritePromises(e,t,r){throw new Error("Adapter does not implement onOverwritePromises")}hydrateSpace(e,t,r){throw new Error("hydrateSpace not implemented")}onParseStrings(e,t){wt("Adapter does not implement onParseStrings")}onWriteStrings(e,t){wt("Adapter does not implement onWriteStrings")}_applyPerspective(e){const t=e.bg,[r,i]=[t.width,t.height],a=new mi(t.fov,r/i,1,1e4);e.game===1?a.position.set(t.cameraEyePosX,t.cameraEyePosY,t.cameraEyePosZ):a.position.set(t.cameraEyePosX/1.2,t.cameraEyePosY/1.2,t.cameraEyePosZ/1.2),a.lookAt(new Se(t.lookatPointX,t.lookatPointY,t.lookatPointZ)),a.scale.y=-1,a.updateMatrix(),a.updateMatrixWorld(!0),a.updateProjectionMatrix();for(let o=0;o<e.spaces.length;o++){const s=e.spaces[o],l=new Se(s.x,s.y,s.z||0);(e.game===2||e.game===3)&&(l.x*=t.scaleFactor/1.2,l.y*=t.scaleFactor/1.2,l.z*=t.scaleFactor/1.2);const u=l.project(a),d=r/2,h=i/2;s.x=Math.round(u.x*d+d),s.y=Math.round(-(u.y*h)+h),s.z=0}}_reversePerspective(e){const t=e.bg,[r,i]=[t.width,t.height],a=new mi(t.fov,r/i,1,1e4);e.game===1?a.position.set(t.cameraEyePosX,t.cameraEyePosY,t.cameraEyePosZ):a.position.set(t.cameraEyePosX/1.2,t.cameraEyePosY/1.2,t.cameraEyePosZ/1.2),a.lookAt(new Se(t.lookatPointX,t.lookatPointY,t.lookatPointZ)),a.scale.y=-1,a.updateMatrix(),a.updateMatrixWorld(!0),a.updateProjectionMatrix();for(let o=0;o<e.spaces.length;o++){const s=e.spaces[o],l=new Se(s.x/r*2-1,-(s.y/i)*2+1,.5);l.unproject(a),l.sub(a.position).normalize();const u=-a.position.z/l.z,d=new Se;d.copy(a.position).add(l.multiplyScalar(u)),(e.game===2||e.game===3)&&(d.x/=t.scaleFactor/1.2,d.y/=t.scaleFactor/1.2,d.z/=t.scaleFactor/1.2),s.x=d.x,s.y=d.y,s.z=d.z}}onGetGameCoordsFromBoardCoords(e,t,r,i){return wt("Adapter does not implement onGetGameCoordsFromBoardCoords"),[e,t,r]}onChangeBoardSpaceTypesFromGameSpaceTypes(e,t){wt("Adapter does not implement onChangeBoardSpaceTypesFromGameSpaceTypes")}onChangeGameSpaceTypesFromBoardSpaceTypes(e){wt("Adapter does not implement onChangeGameSpaceTypesFromBoardSpaceTypes")}_offsetToAddr(e,t){if(typeof t.sceneIndex=="number"&&t.sceneIndex>=0){const r=cn.getInfo(t.sceneIndex);return e<r.rom_start?(r.ram_start&2147483647)+e:(r.ram_start&2147483647)-(r.rom_start-e)}throw new Error("How do I _offsetToAddr?")}_offsetToAddrBase(e,t){return t+e>>>0}_addrToOffsetBase(e,t){return(e&2147483647)-(t&2147483647)>>>0}_stashBoardIntoRom(e,t){if(!t.mainfsBoardFile)return;const r=Sc(e);delete r.bg,delete r.otherbg,delete r.animbg;const i=dW(JSON.stringify(r)),[a,o]=t.mainfsBoardFile;dt.write(a,o,i)}_pullBoardFromRom(e){if(!e.mainfsBoardFile)return null;const[t,r]=e.mainfsBoardFile;if(!dt.has(t,r))return null;const i=dt.get(t,r);return JSON.parse(AW(i))}_cleanLoadedBoard(e){const t=e.spaces.length-1,r=e.spaces[e.spaces.length-1];r&&r.x>e.bg.width+50&&r.y>e.bg.height+50&&(wt("Pruning dead space",r),e.spaces.splice(t,1))}_findEventTableLocations(e){if(typeof e.sceneIndex!="number"||e.sceneIndex<0)return;const t=Tt.getROMGame(),r=to(t,"EventTableHydrate"),i=cn.getInfo(e.sceneIndex),a=cn.getCodeDataView(e.sceneIndex),o=lH(a,r),s=[];e.spaceEventTables||(e.spaceEventTables=s);for(let l=0;l<o.length;l++){const u=o[l],d=a.getUint32(u-4),h=a.getUint32(u+4),f=Nu(d,h),m=this._addrToOffsetBase(f,i.ram_start);wt(`Found event table ${At(f)} (ROM ${At(m)})`),s.push({tableOffset:m})}}_extractEvents(e,t,r,i){if(!e.spaceEventTables||!e.sceneIndex)return;let a,o;const s=new C3;if(e.mainfsEventFile){const[u,d]=e.mainfsEventFile;dt.has(u,d)&&(a=dt.get(u,d),o=new DataView(a),s.parse(a,16))}const l=cn.getInfo(e.sceneIndex);a||(o=cn.getDataView(e.sceneIndex),a=o.buffer,e.spaceEventTables.forEach(u=>{let d;if(u.tableOffset)d=u.tableOffset;else{const h=o.getUint32(u.upper),f=o.getUint32(u.lower);if(!h&&!f)return;const m=Nu(h,f);d=this._addrToOffsetBase(m,l.ram_start)}s.parse(a,d)})),s.forEach(u=>{const d=u.spaceIndex;d<0&&wt(`Space event on negative space ${d}`);const h=u.address&2147483647;let f;h>(this.EVENT_RAM_LOC&2147483647)?f=this._addrToOffsetBase(h,this.EVENT_RAM_LOC):f=this._addrToOffsetBase(h,l.ram_start);const m=new Wd;m.parse(a,f),m.forEach(g=>{const _=g.address&2147483647;let E,x;_>(this.EVENT_RAM_LOC&2147483647)?(E=this._addrToOffsetBase(_,this.EVENT_RAM_LOC),x=o):(E=this._addrToOffsetBase(_,l.ram_start),x=cn.getDataView(e.sceneIndex));const v=B$(x,{addr:_,offset:E,board:t,boardIndex:r,curSpace:d,curSpaceIndex:d,chains:i,game:Tt.getROMGame(),gameVersion:this.gameVersion});v&&v!==!0&&(v.activationType=g.activationType,v.executionType=g.executionType,_u(t,d,v,!1,j0())),G0()&&Object.values&&Object.values($B).indexOf(g.activationType)===-1&&wt(`Unknown event activation type ${At(g.activationType)}, boardIndex: ${r}, spaceIndex: ${At(d)}`)})})}onCreateChainEvents(e,t){for(let i=0;i<t.length;i++){const a=t[i],o=a[a.length-1],s=Pa(o,e);let l;if(s.length>1){const u=[];if(s.forEach(d=>{u.push(r(d))}),s.length>2)throw new Error(`Encountered branch with ${s.length} directions, only 2 are supported currently`);l=ri(this.gameVersion===1?FI:PI,{parameterValues:{left_space:s[0],right_space:s[1],chains:u}})}else s.length>0&&(l=ri(BE,{parameterValues:{chain:r(s[0])}}));l&&_u(e,o,l,!0,j0())}function r(i){for(let a=0;a<t.length;a++)if(t[a].indexOf(i)>=0)return a}}_createStarEvents(e){for(let t=0;t<e.spaces.length;t++){const r=e.spaces[t];if(!r||!r.star)continue;(r.events||[]).some(o=>o.id==="STAR")||Lo(e,r,ri(TI),!1,j0())}}_createGateEvents(e,t,r){let i=0;for(let l=0;l<e.spaces.length;l++){const u=e.spaces[l];if(!u||u.subtype!==yt.GATE)continue;const d=a(l),h=e.spaces[d];if(!h)throw new Error("Gate did not have entry space");const f=a(d);if(!e.spaces[f])throw new Error("Gate did not have previous space");const g=s(f),_=r[g].indexOf(f),E=o(l),x=e.spaces[E];if(!x)throw new Error("Gate did not have exit space");const v=o(E);if(!e.spaces[v])throw new Error("Gate did not have next space");const V=s(v),D=r[V].indexOf(v),H=ri(f8,{parameterValues:{gatePrevChain:[g,_],gateEntryIndex:d,gateSpaceIndex:l,gateExitIndex:E,gateNextChain:[V,D]}});Lo(e,h,H,!1,j0()),Lo(e,x,H,!1,j0()),Lo(e,u,ri(bI,{parameterValues:{gateIndex:i}}),!1,j0()),i++}function a(l){for(const u in e.links){const d=Pa(parseInt(u),e);for(let h=0;h<d.length;h++)if(d[h]===l)return Number(u)}return-1}function o(l){return Pa(l,e)[0]}function s(l){for(let u=0;u<r.length;u++)if(r[u].indexOf(l)>=0)return u}}async _writeEvents(e,t,r,i,a,o){t.mainfsEventFile&&await this._writeEventsNew2(e,t,r,i,a,o)}async _writeEventsNew2(e,t,r,i,a,o){if(!t.mainfsEventFile)throw new Error(`No MainFS file specified to place board ASM for board ${r}.`);const s=Tt.getROMGame(),l=new C3,u=[],d=[],h={},f={};for(let $=0;$<e.spaces.length;$++){const z=e.spaces[$];if(!z.events||!z.events.length)continue;l.add($,0);const I=new Wd($);for(let q=0;q<z.events.length;q++){const P=z.events[q],ee=zw(P.activationType);I.add(ee,P.executionType||P.mystery,0);const ue=h[P.id]||{},U={boardIndex:r,board:e,boardInfo:t,audioIndices:o,curSpaceIndex:$,curSpace:z,chains:i,game:s,gameVersion:this.gameVersion},O=await vb(new ArrayBuffer(0),P,U,ue);if(h[P.id]=ue,typeof O!="string")throw new Error(`Event ${P.id} did not return a string to assemble`);const G=jo(P.id,e,j0());Bn(!!G),d.push(E3(O,G,P,U,!f[P.id],q)),f[P.id]=!0}u.push(I)}const m=new Wd(-5),g=new Wd(-4),_=new Wd(-3),E=new Wd(-2),x=[{index:-5,list:m,type:Wt.BEFORE_DICE_ROLL},{index:-4,list:g,type:Wt.BEFORE_PLAYER_TURN},{index:-3,list:_,type:Wt.AFTER_TURN},{index:-2,list:E,type:Wt.BEFORE_TURN}];for(const{index:$,list:z,type:I}of x){const q=n$(e.boardevents||[],I),P=zw(I);for(let ee=0;ee<q.length;ee++){const ue=q[ee];z.add(P,ue.executionType,0);const U=h[ue.id]||{},O={boardIndex:r,board:e,boardInfo:t,audioIndices:o,curSpaceIndex:$,curSpace:null,chains:i,game:s,gameVersion:this.gameVersion},G=await vb(new ArrayBuffer(0),ue,O,U);if(h[ue.id]=U,typeof G!="string")throw new Error(`Event ${ue.id} did not return a string to assemble`);const ne=jo(ue.id,e,j0());Bn(!!ne),d.push(E3(G,ne,ue,O,!f[ue.id],ee)),f[ue.id]=!0}this.onAddDefaultBoardEvents(I,z),z.count()>0&&(l.add($,0),u.push(z))}const v=d.join(`
`),C=Zw(v),V=`
.org ${At(this.EVENT_RAM_LOC)}
.ascii "PP64"
.word ${At(this.EVENT_RAM_LOC)}
.word 0 // Populated with buffer size later
.align 16

${a}

${Jw(s,!1).join(`
`)}
${oE(t.bgDir,PA(e)).join(`
`)}
${lE(o).join(`
`)}
${C.join(`
`)}

${l.getAssembly()}
${u.map($=>$.getAssembly()).join(`
`)}
${v}
`;wt(V);let D;const H=Object.create(null);try{D=rl(V,{symbolOutputMap:H})}catch($){const z=`Error during board assembly: ${$}
Context: ${V}`;throw new Error(z)}wt("Overlay symbols: ",H);const R=new DataView(D);if(D.byteLength>this.EVENT_MEM_SIZE)throw new Error(`Event code exceeded available memory space (${D.byteLength}/${this.EVENT_MEM_SIZE})`);R.setUint32(8,D.byteLength);const[j,te]=t.mainfsEventFile;dt.write(j,te,D)}_makeSymbolsForEventAssembly(e,t){let r="";for(const i in e)i.indexOf("__PP64_INTERNAL_VAL_")===0?r+=`.definelabel ${i},${At(e[i])}
`:i.indexOf("__PP64_INTERNAL")===0&&(r+=`.definelabel ${i},${At(t.ram_start+e[i])}
`);return r}onWriteEventAsmHook(e,t,r){throw new Error("Adapter does not implement onWriteEventAsmHook")}onAddDefaultBoardEvents(e,t){}_extractStarGuardians(e,t){if(!t.sceneIndex)return;const r=cn.getDataView(t.sceneIndex);if(t.toadSpaceInst){const i=r.getUint16(t.toadSpaceInst+2);e.spaces[i]&&(e.spaces[i].subtype=yt.TOAD)}if(t.starSpaceCount){let i=t.starSpaceArrOffset;Array.isArray(i)&&(i=i[0]);for(let a=0;a<t.starSpaceCount;a++){const o=r.getUint16(i+a*2);e.spaces[o]&&(e.spaces[o].star=!0)}for(let a=0;a<t.starSpaceCount;a++){let o=t.toadSpaceArrOffset;Array.isArray(o)&&(o=o[0]);const s=r.getUint16(o+a*2);e.spaces[s]&&(e.spaces[s].subtype=yt.TOAD)}}}_writeStarInfo(e,t){const r=t.starSpaceCount;if(r){const i=cn.getDataView(t.sceneIndex),a=[];for(let u=0;u<e.spaces.length;u++)e.spaces[u].star&&a.push(u);let o=t.starSpaceArrOffset;Array.isArray(o)||(o=[o]);for(let u=0;u<o.length;u++){const d=o[u];for(let h=0;h<r;h++){const f=h<a.length?h:a.length-1;i.setUint16(d+h*2,a[f])}}const s=Br(yt.TOAD,e);let l=t.toadSpaceArrOffset;Array.isArray(l)||(l=[l]);for(let u=0;u<l.length;u++){const d=l[u];for(let h=0;h<r;h++){const f=h<a.length?h:a.length-1,m=e.spaces[a[f]];let g=Number.MAX_VALUE,_=a[f];for(let E=0;E<s.length;E++){const x=s[E],v=e.spaces[x],C=Ro(m.x,m.y,v.x,v.y);C<g&&(g=C,_=x)}i.setUint16(d+h*2,_)}}}}_extractBoos(e,t){if(!t.sceneIndex)return;const r=cn.getDataView(t.sceneIndex);let i;if(t.boosLoopFnOffset){let a=t.boosLoopFnOffset,o=r.getUint16(a+42);if(r.getUint32(a+40)===436273148&&(o=1),o===0)return;a=t.boosReadbackFnOffset;let s=r.getInt16(a+210);s=1048576+s;const l=cn.getInfo(t.sceneIndex),u=this._addrToOffsetBase(s,l.ram_start);for(let d=0;d<o;d++)i=r.getUint16(u+2*d),e.spaces[i]&&(e.spaces[i].subtype=yt.BOO)}else if(t.booSpaceInst)i=r.getUint16(t.booSpaceInst+2),e.spaces[i]&&(e.spaces[i].subtype=yt.BOO);else if(t.booCount){const a=t.booArrOffset;for(let o=0;o<a.length;o++){let s=a[o];for(let l=0;l<t.booCount;l++){const u=r.getUint16(s);e.spaces[u]&&(e.spaces[u].subtype=yt.BOO),s+=2}}}}_writeBoos(e,t){if(!t.sceneIndex)return;const r=Br(yt.BOO,e),i=cn.getDataView(t.sceneIndex);if(t.boosLoopFnOffset){let a=t.boosLoopFnOffset,o=i.getUint16(a+42);if(i.getUint32(a+40)===436273148?o=1:r.length&&o>r.length&&i.setUint16(a+42,r.length),o===0)return;a=t.boosReadbackFnOffset;let s=i.getInt16(a+210);s=1048576+s;const l=cn.getInfo(t.sceneIndex),u=this._addrToOffsetBase(s,l.ram_start);for(let d=0;d<o;d++){const h=r[d]===void 0?Mn(e):r[d];i.setUint16(u+2*d,h)}}else if(t.booSpaceInst){const a=r[0]===void 0?Mn(e):r[0];i.setUint16(t.booSpaceInst+2,a)}else if(t.booCount){const a=t.booArrOffset;for(let o=0;o<a.length;o++){let s=a[o];for(let l=0;l<t.booCount;l++){const u=r[l]===void 0?Mn(e):r[l];i.setUint16(s,u),s+=2}}}}_extractBanks(e,t){if(!t.bankCount||!t.sceneIndex)return;const r=cn.getDataView(t.sceneIndex),i=t.bankArrOffset;for(let a=0;a<i.length;a++){let o=i[a];for(let s=0;s<t.bankCount;s++){const l=r.getUint16(o);e.spaces[l]&&(e.spaces[l].subtype=yt.BANK),o+=2}}for(let a=0;a<t.bankCoinArrOffset.length;a++){let o=t.bankCoinArrOffset[a];for(let s=0;s<t.bankCount;s++){const l=r.getUint16(o);e.spaces[l]&&(e.spaces[l].subtype=yt.BANKCOIN),o+=2}}}_writeBanks(e,t){if(!t.bankCount||!t.sceneIndex)return;const r=cn.getDataView(t.sceneIndex),i=Br(yt.BANK,e),a=t.bankArrOffset;for(let s=0;s<a.length;s++){let l=a[s];for(let u=0;u<t.bankCount;u++){const d=i[u]===void 0?Mn(e):i[u];r.setUint16(l,d),l+=2}}const o=Br(yt.BANKCOIN,e);for(let s=0;s<t.bankCoinArrOffset.length;s++){let l=t.bankCoinArrOffset[s];for(let u=0;u<t.bankCount;u++){const d=o[u]===void 0?Mn(e):o[u];r.setUint16(l,d),l+=2}}}_extractItemShops(e,t){if(!t.itemShopCount||!t.sceneIndex)return;const r=cn.getDataView(t.sceneIndex);for(let i=0;i<t.itemShopArrOffset.length;i++){let a=t.itemShopArrOffset[i];for(let o=0;o<t.itemShopCount;o++){const s=r.getUint16(a);e.spaces[s]&&(e.spaces[s].subtype=yt.ITEMSHOP),a+=2}}}_writeItemShops(e,t){if(!t.itemShopCount||!t.sceneIndex)return;const r=cn.getDataView(t.sceneIndex),i=Br(yt.ITEMSHOP,e);for(let a=0;a<t.itemShopArrOffset.length;a++){let o=t.itemShopArrOffset[a];for(let s=0;s<t.itemShopCount;s++){const l=i[s]===void 0?Mn(e):i[s];r.setUint16(o,l),o+=2}}}_writeGates(e,t){if(!t.gateCount||!t.sceneIndex)return;const r=cn.getDataView(t.sceneIndex),i=[];for(let o=0;o<e.spaces.length;o++)e.spaces[o].subtype===yt.GATE&&i.push(o);const a=t.gateArrOffset;for(let o=0;o<a.length;o++){let s=a[o];for(let l=0;l<t.gateCount;l++){const u=i[l]===void 0?Mn(e):i[l];r.setUint16(s,u),s+=2}}}async _writeBackground(e,t,r,i){const a=await Va(t,r,i);$n.writeBackground(e,a,r,i)}async _writeAdditionalBackgrounds(e){const t=e.additionalbg;if(!t||!t.length)return;const{width:r,height:i}=e.bg,a=new Array(t.length),o=[];for(let s=0;s<t.length;s++){const l=new Promise(u=>{const d=s;Va(t[s],r,i).then(h=>{a[d]=h,u()})});o.push(l)}await Promise.all(o);for(const s of a)$n.writeBackground($n.getDirectoryCount(),s,r,i,e.bg)}onParseBoardSelectImg(e,t){wt("Adapter does not implement onParseBoardSelectImg")}onWriteBoardSelectImg(e,t){return wt("Adapter does not implement onWriteBoardSelectImg"),Promise.resolve()}onParseBoardLogoImg(e,t){wt("Adapter does not implement onParseBoardLogoImg")}onWriteBoardLogoImg(e,t){return wt("Adapter does not implement onWriteBoardLogoImg"),Promise.resolve()}_brandBootSplashscreen(){return new Promise((e,t)=>{if(!this.options.writeBranding){e();return}if(!this.nintendoLogoFSEntry||!this.hudsonLogoFSEntry){wt("Adapter cannot write branding"),e();return}const r=Xs(),i=setTimeout(()=>t("Failed to overwrite boot logo"),45e3);r.onload=()=>{this._combineSplashcreenLogos();const a=Pu(r,320,240),s=[{src:kh(a,320,240),width:320,height:240,bpp:16}],l=Pr(s,16,8);dt.write(this.hudsonLogoFSEntry[0],this.hudsonLogoFSEntry[1],l),clearTimeout(i),e()},r.src=t$})}_combineSplashcreenLogos(){const e=dt.get(this.nintendoLogoFSEntry[0],this.nintendoLogoFSEntry[1]);if(new Uint8Array(e)[26]!==32)return;const t=dt.get(this.hudsonLogoFSEntry[0],this.hudsonLogoFSEntry[1]),r=vu(e)[0],i=vu(t)[0],a=new Uint8Array(r.src),o=new Uint8Array(i.src),s=No(320,240);s.fillStyle="black",s.fillRect(0,0,320,240);const l=s.getImageData(0,0,320,240);for(let f=320*88*4;f<320*154*4;f++)l.data[f-320*40*4]=a[f];for(let f=320*88*4;f<320*154*4;f++)l.data[f+320*50*4]=o[f];const d=[{src:kh(l.data.buffer,320,240),width:320,height:240,bpp:16}],h=Pr(d,16,8);dt.write(this.nintendoLogoFSEntry[0],this.nintendoLogoFSEntry[1],h)}_clearOtherBoardNames(e){wt("Adapter does not implement _clearOtherBoardNames")}_readPackedFromMainFS(e,t){const r=dt.get(e,t),i=vu(r);return!i||!i.length?void 0:i.map(o=>new DataView(o.src))}_readImgsFromMainFS(e,t){const r=dt.get(e,t),i=vu(r);if(!(!i||!i.length))return i}_readImgInfoFromMainFS(e,t,r){return this._readImgsFromMainFS(e,t)[r||0]}_readImgFromMainFS(e,t,r){const i=this._readImgInfoFromMainFS(e,t,r);return Ea(i.src,i.width,i.height)}_parseAudio(e,t){if(!t.audioIndexOffset||!t.sceneIndex)return;const r=cn.getDataView(t.sceneIndex);e.audioIndex=r.getUint16(t.audioIndexOffset)}onWriteAudio(e,t,r){let i=[];switch(e.audioType){case Ca.Custom:{const a=Rr.getSequenceTable(0);Bn(!!a);for(const o of e.audioData)i.push(a.midis.length),a.midis.push({buffer:IE(cM(o.data),{loop:!0}),soundbankIndex:o.soundbankIndex})}break;case Ca.InGame:default:i=[e.audioIndex||0];break}return i}getAudioMap(e){return wt("Adapter does not implement getAudioMap"),[]}getSoundEffectMap(e){return wt("Adapter does not implement getSoundEffectMap"),[]}getCharacterMap(){return wt("Adapter does not implement getCharacterMap"),{}}}function n$(n,e){return n.filter(t=>t.activationType===e)}const Or=class Tr{static unpack(e){if(e instanceof DataView||(e=new DataView(e)),!Tr.isForm(e))return null;const t=Object.create(null);t.entries=[];let r=8;for(;r<e.byteLength-2;){let i=e.getUint32(r);i=V3(i),i==="HBIN"&&(r+=4,i+=V3(e.getUint32(r))),t.entries.push(i),r+=4;const a=e.getUint32(r);r+=4;const o={raw:e.buffer.slice(r,r+a)},s=Tr.parseType(i,o.raw);s&&(o.parsed=s),t[i]=t[i]||[],t[i].push(o),r+=a+a%2}if(t.BMP1)for(let i=0;i<t.BMP1.length;i++){const a=t.BMP1[i];a.parsed=Tr.parseBMP(a.raw,t.PAL1)}return t}static pack(e){const t=new ArrayBuffer(Tr.getByteLength(e)),r=new DataView(t);r.setUint32(0,1179603533),r.setUint32(4,t.byteLength-8);const i={};let a=8;for(let o=0;o<e.entries.length;o++){const s=e.entries[o],l=i[s]||0;i[s]=l+1;const u=uW(s);for(let f=0;f<u.length;f++)r.setUint8(a,u[f]),a++;const d=e[s][l],h=d.raw.byteLength;r.setUint32(a,h),a+=4,fr(r,d.raw,a,0,h),a+=h+h%2}return t}static isForm(e){return e?(e instanceof DataView||(e=new DataView(e)),e.getUint32(0)===1179603533):!1}static getByteLength(e){let t=0;for(const r in e)if(r!=="entries")for(let i=0;i<e[r].length;i++){const a=e[r][i].raw.byteLength;t+=a+a%2+r.length+4}return t+8}static parseType(e,t){switch(e){case"HBINMODE":return Tr.parseHBINMODE(t);case"OBJ1":return Tr.parseOBJ1(t);case"COL1":return Tr.parseCOL1(t);case"MAT1":return Tr.parseMAT1(t);case"ATR1":return Tr.parseATR1(t);case"VTX1":return Tr.parseVTX1(t);case"FAC1":return Tr.parseFAC1(t);case"PAL1":return Tr.parsePAL1(t);case"SKL1":return Tr.parseSKL1(t);case"STRG":return Tr.parseSTRG(t)}return null}static parseHBINMODE(e){const t=new DataView(e),r={E:t.getUint8(20),F:t.getUint8(21),G:t.getUint8(22)};return(r.E!==69||r.F!==70||r.G!==71)&&console.warn("HBINMODE unexpected EFG => ",r),r}static parseOBJ1(e){const t=new DataView(e),r={objects:[],mystery1:t.getUint16(2)},i=t.getUint16(0);let a=4;for(let o=0;o<i;o++){const s=t.getUint16(a),l=t.getUint8(a+2),u=t.getUint16(a+3);a+=5;let d;switch(l){case 61:{d={children:[]};const h=t.getUint16(a);for(let f=0;f<h;f++)d.children.push(t.getUint16(a+2+2*f));Object.assign(d,Tr._parseOBJ1Transforms(t,a+2+2*h))}break;case 58:d={mystery1:t.getUint8(a),faceIndex:t.getUint16(a+1),faceCount:t.getUint16(a+3)},Object.assign(d,Tr._parseOBJ1Transforms(t,a+5));break;case 16:d={skeletonGlobalIndex:t.getUint16(a)},Object.assign(d,Tr._parseOBJ1Transforms(t,a+2));break;case 59:d={},console.warn("Object type 0x3B");break;case 62:d={};break;case 97:d={},Object.assign(d,Tr._parseOBJ1Transforms(t,a));break;case 93:d={},console.warn("Object type 0x5D");break;default:console.warn(`Unrecognized object type ${At(l)}`),d={};break}d.objType=l,d.globalIndex=u,r.objects.push(d),a+=s-3}return r}static _parseOBJ1Transforms(e,t){return{posX:e.getFloat32(t),posY:e.getFloat32(t+4),posZ:e.getFloat32(t+8),rotX:e.getFloat32(t+12),rotY:e.getFloat32(t+16),rotZ:e.getFloat32(t+20),scaleX:e.getFloat32(t+24),scaleY:e.getFloat32(t+28),scaleZ:e.getFloat32(t+32)}}static parseCOL1(e){const t=new DataView(e),r=[],i=t.getUint16(0);let a=2;for(let o=0;o<i;o++)r.push(t.getUint32(a)),a+=4;return r}static parseMAT1(e){const t=new DataView(e),r={materials:[]},i=t.getUint16(0);let a=2;for(let o=0;o<i;o++){const s={mystery1:t.getUint16(a),colorIndex:t.getUint16(a+2),mystery3:t.getUint16(a+4),mystery4:t.getFloat32(a+6),mystery5:t.getUint16(a+10)};r.materials.push(s),a+=12}return r}static parseATR1(e){const t=new DataView(e),r={atrs:[]},i=t.getUint16(0);let a=2;for(let o=0;o<i;o++){const s={size:t.getUint16(a),xBehavior:t.getUint8(a+5),yBehavior:t.getUint8(a+6),bmpGlobalIndex:t.getUint16(a+10)};r.atrs.push(s),a+=s.size+2}return r}static parseVTX1(e){const t=new DataView(e),r={vertices:[],scale:t.getFloat32(4)},i=t.getUint16(0);let a=8;for(let o=0;o<i;o++){const s={x:t.getInt16(a),y:t.getInt16(a+2),z:t.getInt16(a+4),normalX:t.getInt8(a+6),normalY:t.getInt8(a+7),normalZ:t.getInt8(a+8)};r.vertices.push(s),a+=9}return r}static parseFAC1(e){const t=new DataView(e),r={faces:[]},i=t.getUint16(0);let a=8;for(let o=0;o<i;o++){const s=t.getUint8(a);if(s!==53&&s!==22&&s!==48)throw new Error(`Unrecognized faceType in FAC1: ${At(s)}`);const l={vtxEntries:[]};if(r.faces.push(l),a+=1,s===48)console.warn("Unsupported face type 0x30"),a+=6;else{const u=s===53?4:3;for(let d=0;d<u;d++)l.vtxEntries[d]={vertexIndex:t.getUint16(a),materialIndex:t.getInt16(a+2),u:t.getFloat32(a+4),v:t.getFloat32(a+8)},a+=12}l.materialIndex=t.getInt16(a),l.atrIndex=t.getInt16(a+2),l.mystery3=t.getUint8(a+4),l.mystery3!==54&&console.warn("Unsupported FAC1 mystery3 ",At(l.mystery3)),a+=5}return r}static parsePAL1(e){const t=new DataView(e),r={colors:[],bpp:0,globalIndex:t.getUint16(0)},i=t.getUint16(2);r.bpp=Math.floor((e.byteLength-4)/i)*8;let a=4;for(let o=0;o<i;o++){if(r.bpp===32)r.colors.push(t.getUint32(a));else if(r.bpp===16)r.colors.push(t.getUint16(a));else if(r.bpp===8)r.colors.push(t.getUint8(a));else throw new Error(`FORM.parseType(PAL1): bpp: ${r.bpp}`);a+=r.bpp/8}return r}static parseSKL1(e){const t=new DataView(e),r=t.getUint8(2),i={globalIndex:t.getUint16(0),skls:[]};let a=3;for(let o=0;o<r;o++){const s={mystery1:t.getUint8(a),objGlobalIndex:t.getUint16(a+1),nextSiblingRelativeIndex:t.getUint16(a+51),isParentNode:t.getUint16(a+53),mystery2:t.getUint8(a+54)};Object.assign(s,Tr._parseOBJ1Transforms(t,a+3)),i.skls.push(s),a+=56}return i}static parseSTRG(e){const t=new DataView(e),r=[],i=t.getUint16(0);let a=2+i;for(let o=0;o<i;o++){let s="";const l=t.getUint8(2+o);for(let u=0;u<l;u++)s+=String.fromCharCode(t.getUint8(a+u));a+=l,r.push(s)}return r}static parseBMP(e,t){const r=new DataView(e),i=r.getUint16(2),a=r.getUint16(5),o=r.getUint16(7);if(i===296||i===552){if(!t)throw new Error(`Palette needed for BMP format ${At(i)}`);const s=r.getUint16(9),l=r.getUint16(15);let u;for(let m=0;m<t.length;m++)if(t[m].parsed.globalIndex===s){u=t[m].parsed;break}if(!u)throw new Error(`Could not locate palette at window index ${s}`);const d=8/(a*o/l),h=u.bpp,f=new DataView(e,17,l);return{globalIndex:r.getUint16(0),origFormat:i,paletteGlobalIndex:s,width:a,height:o,src:o8(f,u.colors,d,h)}}else if(i===295){const s=r.getUint8(4),l=r.getUint16(11);switch(s){case 16:return{globalIndex:r.getUint16(0),origFormat:i,width:a,height:o,src:bp(e.slice(13,13+l),a,o)};case 32:return{globalIndex:r.getUint16(0),origFormat:i,width:a,height:o,src:e.slice(13,13+l)};default:console.warn(`BMP1 0x127 had unsupported bpp ${s}`)}}else if(i===294){const s=r.getUint16(11),l=new ArrayBuffer(a*o*4),u=new DataView(l);for(let d=0;d<s/3;d++){const h=r.getUint8(13+d),f=r.getUint8(13+d+1),m=r.getUint8(13+d+2),g=h<<24|f<<16|m<<8|255,_=d*4;u.setUint32(_,g)}return{globalIndex:r.getUint16(0),origFormat:i,width:a,height:o,src:l}}else if(i===293){const s=r.getUint16(11),l=new ArrayBuffer(s*4),u=new DataView(l);for(let d=0;d<s;d++){const h=r.getUint8(13+d),f=h&15|(h&15)<<4,m=h&240|(h&240)>>>4,g=m<<24|m<<16|m<<8|f,_=d*4;u.setUint32(_,g)}return{globalIndex:r.getUint16(0),origFormat:i,width:a,height:o,src:l}}else if(i===292){const s=r.getUint16(11),l=new ArrayBuffer(s*8),u=new DataView(l);let d=0;for(let h=0;h<s;h++){const f=r.getUint8(13+h);let m=(f&240)>>>4;m|=f&240,u.setUint32(d,m<<24|m<<16|m<<8|255),d+=4;let g=f&15;g|=g<<4,u.setUint32(d,g<<24|g<<16|g<<8|255),d+=4}return{globalIndex:r.getUint16(0),origFormat:i,width:a,height:o,src:l}}return console.warn(`Could not parse BMP format ${At(i)}`),{globalIndex:r.getUint16(0),origFormat:i,width:a,height:o,src:new ArrayBuffer(a*o*4)}}static replaceBMP(e,t,r,i){fr(e.BMP1[t].raw,r,17,0,r.byteLength),e.PAL1[t].parsed=i;const a=new DataView(e.PAL1[t].raw).getUint16(0),o=e.PAL1[t].raw=new ArrayBuffer(4+i.colors.length*4),s=new DataView(o);s.setUint16(0,a),s.setUint16(2,i.colors.length);let l=4;for(let u=0;u<i.colors.length;u++)s.setUint32(l,i.colors[u]),l+=4}static getByGlobalIndex(e,t,r){if(!e[t])return null;const i=[];for(let a=0;a<e[t].length;a++){const o=e[t][a].parsed;if(!o)throw new Error(`No parsed value for ${t}`);if(o.hasOwnProperty("globalIndex"))o.globalIndex===r&&i.push(o);else{let s=o;switch(t){case"OBJ1":s=o.objects;break}for(let l=0;l<s.length;l++){const u=s[l];if(!u.hasOwnProperty("globalIndex"))throw new Error(`globalIndex is not a property of the searched ${t} array in getByGlobalIndex`);u.globalIndex===r&&i.push(u)}}}return i.length?i.length===1?i[0]:i:null}static getObjectsByType(e,t){const r=e.OBJ1[0].parsed.objects,i=[];for(let a=0;a<r.length;a++)r[a].objType===t&&i.push(r[a]);return i}};function kE(n){switch(n){case 8:return{order:[1,2,3,0,4,5,6,7],bias:[0,0,0,1,1,1,1,2]};case 7:return{order:[3,5,6,0,1,2,4],bias:[0,0,0,1,1,1,3]};case 6:return{order:[0,1,2,3,4,5],bias:[0,0,0,1,1,1]};case 5:return{order:[0,1,2,3,4],bias:[0,0,0,1,1]};case 4:return{order:[0,1,2,3],bias:[0,0,0,1]};case 3:return{order:[0,1,2],bias:[0,0,1]};case 2:return{order:[0,1],bias:[0,0]};case 0:return{order:[0],bias:[0]}}return{order:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],bias:[0,0,0,1,1,1,1,2,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,4,5,6,6,6]}}async function r$(n,e,t,r){const[i,a]=e.mainfsEventFile,o=Br(yt.BOO,n),s=Br(yt.KOOPA,n),l=s.length?s[0]:Mn(n),u=Br(yt.BOWSER,n),d=u.length?u[0]:Mn(n),h=[];for(let C=0;C<n.spaces.length;C++)n.spaces[C].star&&h.push(C);const f=h.length?"show_next_star_spot":"show_next_star_no_op",m=kE(h.length),g=Br(yt.TOAD,n),_=[];for(let C=0;C<h.length;C++){const V=n.spaces[h[C]];let D=Number.MAX_VALUE,H=h[C];for(let R=0;R<g.length;R++){const j=g[R],te=n.spaces[j],$=Ro(V.x,V.y,te.x,te.y);$<D&&(D=$,H=j)}_.push(H)}const E=PA(n),x=await aE(n,e.bgDir,E),v=await sE(n,r);return`
.org 0x800F65E0

.definelabel CORE_800C597A,0x800C597A
.definelabel CORE_800ED154,0x800ED154
.definelabel CORE_800ED156,0x800ED156
.definelabel CORE_800ED158,0x800ED158
.definelabel CORE_800ED172,0x800ED172
.definelabel CORE_800ED192,0x800ED192
.definelabel CORE_800ED5C0,0x800ED5C0
.definelabel CORE_800ED5C2,0x800ED5C2
.definelabel CORE_800ED5CA,0x800ED5CA
.definelabel CORE_800ED5CC,0x800ED5CC
.definelabel CORE_800ED5D8,0x800ED5D8
.definelabel CORE_800EE320,0x800EE320
.definelabel CORE_800F2B7C,0x800F2B7C

.definelabel STAR_COUNT,${h.length}
.definelabel BOO_COUNT,${o.length}

main:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   A0, hi(overlaycalls)
  addiu A0, A0, lo(overlaycalls)
  lui   A1, hi(CORE_800C597A)
  jal   ExecBoardScene
   lh    A1, lo(CORE_800C597A)(A1)
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18
  NOP
  NOP

__PP64_INTERNAL_GET_NEXT_TOAD_INDEX:
  lui   V0, hi(CORE_800ED5CA)
  addiu V0, V0, lo(CORE_800ED5CA)
  lh    V1, 0(V0)
  sll   V1, V1, 1
  addu  V0, V0, V1
  lh    V0, 2(V0) ; get next toad index?
  sll   V0, V0, 1
  lui   AT, hi(toad_space_indices)
  addu  AT, AT, V0
  jr    RA
   lh    V0, lo(toad_space_indices)(AT)

func_800F663C:
  addiu SP, SP, -0x30
  sw    RA, 0x28(SP)
  sw    S5, 0x24(SP)
  sw    S4, 0x20(SP)
  sw    S3, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   S5, hi(CORE_800ED5C0)
  addiu S5, S5, lo(CORE_800ED5C0)
  addu  S1, R0, R0
  lui   S3, hi(shuffle_bias)
  addiu S3, S3, lo(shuffle_bias)
  lui   S2, hi(shuffle_order)
  addiu S2, S2, lo(shuffle_order)

L800F6680:
  ; rand1 = GetRandomByte() % STAR_COUNT;
  jal	GetRandomByte
  nop
  li   S4, STAR_COUNT
  div  V0, S4
  nop
  mfhi S0
  nop
  andi  S0, S0, 0xff
  nop

  ; rand2 = GetRandomByte() % STAR_COUNT;
  jal	GetRandomByte
  nop
  li   S4, STAR_COUNT
  div  V0, S4
  nop
  mfhi A0
  nop
  andi  A0, A0, 0xff
  nop

  beq   S0, A0, L800F6740
   sll   V1, A0, 1
  addu  A3, V1, S3
  lh    V0, 0(A3)
  slt   V0, S0, V0
  bnel V0, R0, L800F6744
   addiu S1, S1, 1
  sll   A1, S0, 1
  addu  A2, A1, S3
  lh    V0, 0(A2)
  slt   V0, A0, V0
  bnel V0, R0, L800F6744
   addiu S1, S1, 1
  addu  A0, A1, S2
  lh    A1, 0(A0)
  addu  V1, V1, S2
  lhu   V0, 0(V1)
  sh    V0, 0(A0)
  sh    A1, 0(V1)
  lh    A1, 0(A2)
  lhu   V0, 0(A3)
  sh    V0, 0(A2)
  sh    A1, 0(A3)
L800F6740:
  addiu S1, S1, 1
L800F6744:
  slti  V0, S1, 0x1e
  bne  V0, R0, L800F6680
   NOP
  addu  S1, R0, R0
  lui   A0, hi(shuffle_order)
  addiu A0, A0, lo(shuffle_order)
  sll   V0, S1, 1
L800F6760:
  addu  V1, V0, S5
  addu  V0, V0, A0
  lhu   V0, 0(V0)
  sh    V0, 0xc(V1)
  addiu S1, S1, 1
  slti  V0, S1, STAR_COUNT
  bne  V0, R0, L800F6760
   sll   V0, S1, 1
  lw    RA, 0x28(SP)
  lw    S5, 0x24(SP)
  lw    S4, 0x20(SP)
  lw    S3, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x30

func_800F67A4:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   V0, hi(CORE_800ED5CA)
  lhu   V0, lo(CORE_800ED5CA)(V0)
  addiu V0, V0, 1
  lui   AT, hi(CORE_800ED5CA)
  sh    V0, lo(CORE_800ED5CA)(AT)
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  slti  V0, V0, STAR_COUNT
  bne  V0, R0, L800F6820
   NOP
  lui   S0, hi(CORE_800ED5D8)
  lh    S0, lo(CORE_800ED5D8)(S0)
  lui   AT, hi(CORE_800ED5CA)
  sh    R0, lo(CORE_800ED5CA)(AT)
  jal   SetBoardFeatureFlag
   addiu    A0, R0, 68
  jal   func_800F663C
   NOP
  lui   V1, hi(CORE_800ED5CC)
  lh    V1, lo(CORE_800ED5CC)(V1)
  bne   S0, V1, L800F6820
   NOP
  lui   V0, hi(CORE_800ED5D8)
  lhu   V0, lo(CORE_800ED5D8)(V0)
  lui   AT, hi(CORE_800ED5CC)
  sh    V0, lo(CORE_800ED5CC)(AT)
  lui   AT, hi(CORE_800ED5D8)
  sh    V1, lo(CORE_800ED5D8)(AT)
L800F6820:
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

; Ensures star space shows a star, past stars are chance time
draw_star_space_state:
  addiu SP, SP, -0x30
  sw    RA, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S2, hi(CORE_800ED5C0)
  addiu S2, S2, lo(CORE_800ED5C0)
  addu  S1, R0, R0
  lui   S4, hi(star_space_indices)
  addiu S4, S4, lo(star_space_indices)
  lui   S3, hi(data_mystery_40s_list)
  addiu S3, S3, lo(data_mystery_40s_list)
  sll   S0, S1, 1
L800F686C:
  addu  V0, S0, S4
  lh    A0, 0(V0)
  jal   SetSpaceType
   addiu    A1, R0, 1
  addu  S0, S0, S3
  lh    A0, 0(S0)
  jal   SetBoardFeatureFlag
   addiu S1, S1, 1
  slti  V0, S1, STAR_COUNT
  bnel V0, R0, L800F686C
   sll   S0, S1, 1
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 68
  bne  V0, R0, L800F68AC
   addiu    S0, R0, STAR_COUNT
  lh    S0, 0xa(S2)
L800F68AC:
  blez  S0, L800F68EC
   addu  S1, R0, R0
  lui   S3, hi(star_space_indices)
  addiu S3, S3, lo(star_space_indices)
  sll   V0, S1, 1
L800F68C0:
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  lh    A0, 0(V0)
  jal   SetSpaceType
   addiu    A1, R0, 6 ; Chance
  addiu S1, S1, 1
  slt   V0, S1, S0
  bne  V0, R0, L800F68C0
   sll   V0, S1, 1
L800F68EC:
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  lui   A0, hi(star_space_indices)
  addu  A0, A0, V0
  lh    A0, lo(star_space_indices)(A0)
  jal   SetSpaceType
   addiu    A1, R0, 5 ; Star
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  lui   A0, hi(data_mystery_40s_list)
  addu  A0, A0, V0
  jal   ClearBoardFeatureFlag
   lh    A0, lo(data_mystery_40s_list)(A0)
  lw    RA, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x30

__PP64_INTERNAL_STAR_SPACE:
  addiu SP, SP, -0x28
  sw    RA, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S1, hi(CORE_800ED5C0)
  addiu S1, S1, lo(CORE_800ED5C0)
  addu  S0, R0, R0
  lui   A1, hi(star_space_indices)
  addiu A1, A1, lo(star_space_indices)
  sll   A0, A0, 0x10
  sra   A0, A0, 0x10
  lui   A2, hi(data_mystery_40s_list)
  addiu A2, A2, lo(data_mystery_40s_list)
  sll   V1, S0, 1
L800F6990:
  addu  V0, V1, A1
  lh    V0, 0(V0)
  bnel  A0, V0, L800F6A14
   addiu S0, S0, 1
  lh    V0, 0xa(S1)
  sll   V0, V0, 1
  addu  V0, V0, S1
  lh    V0, 0xc(V0)
  bne   S0, V0, L800F69C8
   addu  V0, V1, A2
  lhu   V0, 0(V0)
  sh    V0, 0x1a(S1)
  j     L800F6A24
   addiu    V0, R0, 1
L800F69C8:
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 68
  bne  V0, R0, L800F69DC
   addiu    A0, R0, STAR_COUNT
  lh    A0, 0xa(S1)
L800F69DC:
  blez  A0, L800F6A20
   addu  V1, R0, R0
  sll   V0, V1, 1
L800F69E8:
  addu  V0, V0, S1
  lh    V0, 0xc(V0)
  bne   S0, V0, L800F6A00
   addiu V1, V1, 1
  j     L800F6A24
   addiu    V0, R0, 2
L800F6A00:
  slt   V0, V1, A0
  bne  V0, R0, L800F69E8
   sll   V0, V1, 1
  j     L800F6A24
   addu  V0, R0, R0
L800F6A14:
  slti  V0, S0, STAR_COUNT
  bne  V0, R0, L800F6990
   sll   V1, S0, 1
L800F6A20:
  addu  V0, R0, R0
L800F6A24:
  lw    RA, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

show_next_star_spot_process:
  addiu SP, SP, -0x50
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F30, 0x48(SP)
  sdc1  F28, 0x40(SP)
  sdc1  F26, 0x38(SP)
  sdc1  F24, 0x30(SP)
  sdc1  F22, 0x28(SP)
  jal   0x800633A8
   sdc1  F20, 0x20(SP)
  lw    S0, 0x8c(V0)
  jal   PlaySound
   addiu    A0, R0, 109
  addiu    A0, R0, 64
  jal   0x8003DBE0
   addu  A1, R0, R0
  addu  S1, V0, R0
  lhu   V0, 0xa(S1)
  ori   V0, V0, 4
  sh    V0, 0xa(S1)
  jal   0x8004CDCC
   addu  A0, S1, R0
  addiu A0, S1, 0xc
  jal   0x800A0D50 ; posmodel
   addiu A1, S0, 4
  lui    AT, 0x43FA ; 500.000000
  mtc1  AT, F0
  NOP
  swc1  F0, 0x30(S1)
  addu  A0, S1, R0
  jal   0x80042728
   addu  A1, R0, R0
  addu  S2, V0, R0
  mtc1  R0, F20
  addu  S0, R0, R0
  lui   AT, 0x3ECC
  ori   AT, AT, 0xCCCD
  mtc1  AT, F22
L800F6AD8:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  NOP
  jal   0x800A0D00
   addiu A0, S1, 0x24
  jal   SleepVProcess
   ADD.S F20, F20, F22
  addiu S0, S0, 1
  slti  V0, S0, 6
  bne  V0, R0, L800F6AD8
   NOP
  addu  S0, R0, R0
  lui   AT, 0x3ECC
  ori   AT, AT, 0xCCCD
  mtc1  AT, F22
L800F6B18:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  NOP
  jal   0x800A0D00
   addiu A0, S1, 0x24
  jal   SleepVProcess
   SUB.S F20, F20, F22
  addiu S0, S0, 1
  slti  V0, S0, 3
  bne  V0, R0, L800F6B18
   NOP
  jal   SleepProcess
   addiu    A0, R0, 30
  jal   PlaySound
   addiu    A0, R0, 68
  mtc1  R0, F22
  lui   AT, 0x41A0 ; 20.000000
  mtc1  AT, F30
  lui   AT, 0x3CA3
  ori AT, AT, 0xd70a
  mtc1  AT, F28
  mtc1  R0, F26
  lui   AT, 0x40C0 ; 6.000000
  mtc1  AT, F24
L800F6B7C:
  lw    V0, 0x3c(S1)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(CORE_800F2B7C)
  lw    V0, lo(CORE_800F2B7C)(V0)  ; gets a pointer
  addu  A0, A0, V0
  mfc1  A1, F22
  NOP
  jal   0x800A40D0
   addiu A0, A0, 0x7c
  SUB.S F20, F20, F28
  C.LT.S F20, F26
  NOP
  NOP
  bc1t  L800F6BF8
   ADD.S F22, F22, F30
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  NOP
  jal   0x800A0D00
   addiu A0, S1, 0x24
  lwc1  F0, 0x30(S1)
  SUB.S F0, F0, F24
  jal   SleepVProcess
   swc1  F0, 0x30(S1)
  j     L800F6B7C
   NOP
L800F6BF8:
  jal   0x800427D4
   addu  A0, S2, R0
  jal   SleepProcess
   addiu    A0, R0, 30
  jal   0x8003E694
   addu  A0, S1, R0
  jal   EndProcess
   addu  A0, R0, R0
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F30, 0x48(SP)
  ldc1  F28, 0x40(SP)
  ldc1  F26, 0x38(SP)
  ldc1  F24, 0x30(SP)
  ldc1  F22, 0x28(SP)
  ldc1  F20, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x50

show_next_star_spot_inner:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  addu  S0, A0, R0
  lw    V0, 0(S0)
  lui   AT, 0x41A0 ; 20.000000
  mtc1  AT, F0
  NOP
  swc1  F0, 0x34(V0)
  lui   AT, 0xC040 ; -3.000000
  mtc1  AT, F0
  NOP
  swc1  F0, 0x38(V0)
  lw    A0, 0(S0)
  addu  A1, R0, R0
  jal   0x8003E81C
   addu  A2, R0, R0
  jal   SleepProcess
   addiu    A0, R0, 3
L800F6C94:
  lw    A0, 0(S0)
  jal   0x8003E940
   NOP
  andi  V0, V0, 0xffff
  bne  V0, R0, L800F6CBC
   addiu    A1, R0, -1
  jal   SleepVProcess
   NOP
  j     L800F6C94
   NOP
L800F6CBC:
  lw    A0, 0(S0)
  jal   0x8003E81C
   addiu    A2, R0, 2
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

show_next_star_spot:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   S2, hi(CORE_800ED5C0)
  addiu S2, S2, lo(CORE_800ED5C0)
  jal   0x80060128
   addiu    A0, R0, 43
  lui   A0, hi(data_star_related_800F9920)
  jal   0x80048224
   addiu A0, A0, lo(data_star_related_800F9920)
  addu  S0, V0, R0
  addiu    A0, R0, 2
  jal   0x80072644
   addiu    A1, R0, 16
L800F6D18:
  jal   0x80072718
   NOP
  beq  V0, R0, L800F6D38
   NOP
  jal   SleepVProcess
   NOP
  j     L800F6D18
   NOP
L800F6D38:
  jal   0x8004A520
   NOP
  lui   AT, 0x4040  ; 3.000000
  mtc1  AT, F12
  jal   0x8004B5C4
   NOP
  jal   show_next_star_spot_inner
   addu  A0, S0, R0
  lh    V0, 0xa(S2)
  bne  V0, R0, L800F6D78
   addiu    A1, R0, 1258
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 68
  bnel V0, R0, L800F6D78
   addiu    A1, R0, 1258 ; "Let me show you where to find the next Star."
  addiu    A1, R0, 1256 ; "Let me show you where to find the first Star."
L800F6D78:
  lh    A0, 8(S0)
  addiu    A2, R0, -1
  jal   LoadStringIntoWindow
   addiu    A3, R0, -1
  lh    A0, 8(S0)
  jal   0x80071C8C
   addiu    A1, R0, 1
  jal   PlaySound
   addiu    A0, R0, 1125
  lh    A0, 8(S0)
  jal   WaitForTextConfirmation
   NOP
  lh    A0, 8(S0)
  jal   0x80071E80
   addiu    A1, R0, 1
  lh    A0, 8(S0)
  jal   0x8006EB40
   NOP
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  lui   A0, hi(toad_space_indices)
  addu  A0, A0, V0
  jal   GetSpaceData
   lh    A0, lo(toad_space_indices)(A0)
  addu  S1, V0, R0
  jal   0x8004B5DC
   addiu A0, S1, 4
  lui    AT, 0x40A0 ; 5.000000
  mtc1  AT, F12
  jal   0x8004B838
   NOP
  jal   SleepProcess
   addiu    A0, R0, 5
L800F6E08:
  jal   0x8004B850
   NOP
  beq  V0, R0, L800F6E28
   NOP
  jal   SleepVProcess
   NOP
  j     L800F6E08
   NOP
L800F6E28:
  jal   SleepProcess
   addiu    A0, R0, 5
  lui   A0, hi(show_next_star_spot_process)
  addiu A0, A0, lo(show_next_star_spot_process)
  addiu    A1, R0, 18432
  addu  A2, R0, R0
  jal   InitProcess
   addu  A3, R0, R0
  sw    S1, 0x8c(V0)
  jal   SleepProcess
   addiu    A0, R0, 30
  lh    V0, 0xa(S2)
  bne  V0, R0, L800F6E74
   addiu    A1, R0, 1259
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 68
  bnel V0, R0, L800F6E74
   addiu    A1, R0, 1259 ; "This is the star spot. Get the star by giving Toad 20 coins"
  addiu    A1, R0, 1257 ; same?: "This is the star spot. Get the star by giving Toad 20 coins"
L800F6E74:
  lh    A0, 8(S0)
  addiu    A2, R0, -1
  jal   LoadStringIntoWindow
   addiu    A3, R0, -1
  lh    A0, 8(S0)
  jal   0x80071C8C
   addiu    A1, R0, 1
  lh    A0, 8(S0)
  jal   WaitForTextConfirmation
   NOP
  lh    A0, 8(S0)
  jal   0x80071E80
   addiu    A1, R0, 1
  jal   0x800601D4
   addiu    A0, R0, 90
  jal   SleepProcess
   addiu    A0, R0, 30
  addiu    A0, R0, 2
  jal   0x800726AC
   addiu    A1, R0, 16
  jal   SleepProcess
   addiu    A0, R0, 17
  jal   0x8004847C
   addu  A0, S0, R0
  jal   0x80056AF4
   NOP
  jal   0x8005DFB8
   addiu    A0, R0, 1
  jal   0x8005E3A8
   NOP
  jal   SleepVProcess
   NOP
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

; This custom alternative is the minimum necessary to skip Toad's star showing.
show_next_star_no_op:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)

  ; Causes fade back in (star shaped fade in)
  addiu    A0, R0, 2
  jal   0x80072644
  addiu    A1, R0, 16

  ; One or more of these may be unnecessary...
  jal   0x800601D4
  addiu    A0, R0, 90
  jal   0x80056AF4
  NOP
  jal   0x8005DFB8
  addiu    A0, R0, 1
  jal   0x8005E3A8
  NOP

  jal SleepVProcess
  nop

  lw    RA, 0x10(SP)
  jr    RA
  addiu SP, SP, 0x18

overlaycall0:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   AT, hi(CORE_800ED5C2)
  sh    R0, lo(CORE_800ED5C2)(AT)
  addiu    A0, R0, 10 ; max_objects
  jal   InitObjectSystem
   addu  A1, R0, R0 ; max_processes
  addiu    A0, R0, 53
  addu  A1, R0, R0
  jal   0x8005E044
   addiu    A2, R0, 146
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

overlaycall1:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  addiu    A0, R0, 10
  jal   InitObjectSystem
   addu  A1, R0, R0
; Set players at starting chain
  addu  A0, R0, R0
  addu  A1, R0, R0
  jal   SetPlayerOntoChain
   addu  A2, R0, R0
  addiu    A0, R0, 1
  addu  A1, R0, R0
  jal   SetPlayerOntoChain
   addu  A2, R0, R0
  addiu    A0, R0, 2
  addu  A1, R0, R0
  jal   SetPlayerOntoChain
   addu  A2, R0, R0
  addiu    A0, R0, 3
  addu  A1, R0, R0
  jal   SetPlayerOntoChain
   addu  A2, R0, R0
  lui   V1, hi(CORE_800ED5C0)
  lh    V1, lo(CORE_800ED5C0)(V1)
  beq  V1, R0, L800F6FB8
   addiu    V0, R0, 1
  beq   V1, V0, L800F6FD8
   NOP
  j     L800F6FEC
   NOP
L800F6FB8:
  jal   SetBoardFeatureFlag
   addiu    A0, R0, 0x46
  jal   SetBoardFeatureFlag
   addiu    A0, R0, 0x47
  jal   SetBoardFeatureFlag
   addiu    A0, R0, 0x49
  j     L800F6FE4
   addiu    A0, R0, 0x4B
L800F6FD8:
  jal   SetBoardFeatureFlag
   addiu    A0, R0, 0x47
  addiu    A0, R0, 0x49
L800F6FE4:
  jal   SetBoardFeatureFlag
   NOP
L800F6FEC:
  jal   SetBoardFeatureFlag
   addiu    A0, R0, 0x43
  jal   func_800F663C
   NOP
  ; Clear board-specific persistent state values
  lui   V0, hi(CORE_800ED154)
  addiu V0, V0, lo(CORE_800ED154)
  sh    R0, 0(V0)
  sh    R0, 2(V0)
  sh    R0, 4(V0)
  jal   0x8005DFB8
   addiu    A0, R0, 1
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

; called from multiple places
setup_routine:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  addiu    A0, R0, 80
  jal   InitObjectSystem
   addiu    A1, R0, 40
  jal   0x80060088
   addu  S1, R0, R0
  jal   0x80023448
   addiu    A0, R0, 1
  addu  A0, R0, R0
  addiu    A1, R0, 120
  addiu    A2, R0, 120
  jal   0x800234B8
   addiu    A3, R0, 120
  addiu    A0, R0, 1
  addiu    A1, R0, 64
  addiu    A2, R0, 64
  jal   0x800234B8
   addiu    A3, R0, 96
  lui   A1, 0xc2c8 ; -100.0
  lui   A2, 0x42c8 ; 100.0
  lui   A3, 0x4396 ; 300.0
  jal   0x80023504
   addiu    A0, R0, 1

  JAL   __PP64_INTERNAL_ADDITIONAL_BG_CHOICE
   NOP
  move  A0, V0 ; Determined by user-customizable hook
  addiu  A1, R0, ${e.boardDefFile}
  addiu  A2, R0, ${e.pauseBgDir}
  jal   0x80056A08 ; setup board?
   addu  A3, R0, R0

  jal   0x80052E84 ; reset animations for characters?
   addu  A0, R0, R0
  jal   0x80052E84
   addiu    A0, R0, 1
  jal   0x80052E84
   addiu    A0, R0, 2
  jal   0x80052E84
   addiu    A0, R0, 3
L800F70C0:
  jal   GetPlayerStruct
   addu  A0, S1, R0
  addu  S0, V0, R0
  lw    A0, 0x20(S0)
  jal   0x8003E174
   addiu S1, S1, 1
  lw    V1, 0x20(S0)
  lhu   V0, 0xa(V1)
  ori   V0, V0, 2
  sh    V0, 0xa(V1)
  slti  V0, S1, 4
  bne  V0, R0, L800F70C0
   NOP
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 78
  beq  V0, R0, L800F7114
   NOP
  jal   ClearBoardFeatureFlag
   addiu    A0, R0, 78
  jal   func_800F67A4
   NOP
L800F7114:
.if STAR_COUNT
  jal   draw_star_space_state
   NOP
  jal   draw_toads_outer
   NOP
.endif
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 14
  bne  V0, R0, L800F714C
   NOP
  jal   koopa_draw_outer
   NOP
L800F714C:
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 15
  bne  V0, R0, L800F7164
   NOP
.if BOO_COUNT
  jal   boo_draw_outer
.endif
   NOP
L800F7164:
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 13
  bne  V0, R0, L800F717C
   NOP
  jal   bowser_draw_outer
   NOP
L800F717C:
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

${x}

; A function that returns the audio index, to let custom events call to get the value.
${v}

overlaycall2:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)

  jal __PP64_INTERNAL_GET_BOARD_AUDIO_INDEX
   nop

  ; Start playing board audio.
  jal   0x80060128
   move A0, V0

  jal   0x8001D240
   addiu A0, R0, 2
  jal   setup_routine
   NOP
  JAL hydrate_events
   NOP

; TODO: Support the disabled koopa, boo, bowser setting with split event tables
;  jal   IsBoardFeatureFlagSet
;   addiu A0, R0, 14
;  bne  V0, R0, L800F71D8
;   NOP
;  lui   A0, hi(koopa_event_table)
;  jal   EventTableHydrate
;   addiu A0, A0, lo(koopa_event_table)
;L800F71D8:
;  jal   IsBoardFeatureFlagSet
;   addiu A0, R0, 15
;  bne  V0, R0, L800F71F4
;   NOP
;  lui   A0, hi(boo_event_table)
;  jal   EventTableHydrate
;   addiu A0, A0, lo(boo_event_table)
;L800F71F4:
;  jal   IsBoardFeatureFlagSet
;   addiu A0, R0, 13
;  bne  V0, R0, L800F7210
;   NOP
;  lui   A0, hi(bowser_event_table)
;  jal   EventTableHydrate
;   addiu A0, A0, lo(bowser_event_table)
L800F7210:
  jal   0x800584F0
   addu  A0, R0, R0
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

overlaycall3:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   0x8001D240
   addiu A0, R0, 1
  jal   setup_routine
   NOP
  jal   0x800584F0
   addiu A0, R0, 1
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

bowser_draw_inner:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   V0, hi(bss_bowser_model)
  lw    V0, lo(bss_bowser_model)(V0)
  bne  V0, R0, L800F72BC
   addiu A0, R0, 59 ; bowser model model_info index
  jal   0x8003DBE0
   addu  A1, R0, R0
  addu  S0, V0, R0
  jal   0x8003E174
   addu  A0, S0, R0
  lui   AT, hi(bss_bowser_model)
  sw    S0, lo(bss_bowser_model)(AT)
  lhu   V0, 0xa(S0)
  ori   V0, V0, 2
  sh    V0, 0xa(S0)
  jal   GetSpaceData
   addiu A0, R0, ${d}
  addiu A0, S0, 0xc
  jal   0x800A0D50 ; posmodel
   addiu A1, V0, 4
  addiu    A0, R0, 7
  addu  A1, S0, R0
  addiu    A2, R0, -2
  jal   0x8003C314
   addu  A3, R0, R0
L800F72BC:
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

bowser_draw_outer:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   AT, hi(bss_bowser_model)
  jal   bowser_draw_inner
   sw    R0, lo(bss_bowser_model)(AT)
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

koopa_draw_inner:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   V0, hi(bss_koopa_model)
  lw    V0, lo(bss_koopa_model)(V0)
  bne   V0, R0, L800F7358
   addiu A0, R0, 57 ; koopa model model_info index
  jal   0x8003DBE0 ; loads model
   addu  A1, R0, R0
  addu  S0, V0, R0
  jal   0x8003E174
   addu  A0, S0, R0
  lui   AT, hi(bss_koopa_model)
  sw    S0, lo(bss_koopa_model)(AT)
  lhu   V0, 0xa(S0)
  ori   V0, V0, 2
  sh    V0, 0xa(S0)
  jal   GetSpaceData
   addiu A0, R0, ${l}
  addiu A0, S0, 0xc
  jal   0x800A0D50 ; posmodel
   addiu A1, V0, 4
  addiu A0, R0, 9
  addu  A1, S0, R0
  addiu A2, R0, -1
  jal   0x8003C314
   addiu A3, R0, -3
L800F7358:
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

koopa_draw_outer:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   AT, hi(bss_koopa_model)
  jal   koopa_draw_inner
   sw    R0, lo(bss_koopa_model)(AT)
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

draw_toads_inner:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  addu  S0, A0, R0
  sll   A0, A0, 0x10
  sra   A0, A0, 0xe
  lui   V0, hi(bss_toad_instances)
  addu  V0, V0, A0
  lw    V0, lo(bss_toad_instances)(V0)
  bne  V0, R0, L800F7474
   NOP
  lui   V0, hi(bss_toad_model)
  lw    V0, lo(bss_toad_model)(V0)
  bne  V0, R0, L800F73F4
   NOP
  addiu    A0, R0, 58 ; Toads model_info index
  jal   0x8003DBE0
   addu  A1, R0, R0
  addu  S2, V0, R0
  jal   0x8003E174
   addu  A0, S2, R0
  lui   AT, hi(bss_toad_model)
  sw    S2, lo(bss_toad_model)(AT)
  j     L800F7408
   sll   S0, S0, 0x10
L800F73F4:
  lui   A0, hi(bss_toad_model)
  lw    A0, lo(bss_toad_model)(A0)
  jal   0x8003E320
   sll   S0, S0, 0x10
  addu  S2, V0, R0
L800F7408:
  sra   S0, S0, 0x10
  sll   S1, S0, 2
  lui   AT, hi(bss_toad_instances)
  addu  AT, AT, S1
  sw    S2, lo(bss_toad_instances)(AT)
  lhu   V0, 0xa(S2)
  ori   V0, V0, 2
  sh    V0, 0xa(S2)
  jal   0x8004CDCC
   addu  A0, S2, R0
  sll   S0, S0, 1
  lui   A0, hi(toad_space_indices_repeat)
  addu  A0, A0, S0
  jal   GetSpaceData
   lh    A0, lo(toad_space_indices_repeat)(A0)
  addiu A0, S2, 0xc
  jal   0x800A0D50 ; posmodel
   addiu A1, V0, 4
  addiu    A0, R0, 6
  lui   A2, hi(RO_800F9948)
  addu  A2, A2, S1
  lh    A2, lo(RO_800F9948)(A2)
  lui   A3, hi(RO_800F994A)
  addu  A3, A3, S1
  lh    A3, lo(RO_800F994A)(A3)
  jal   0x8003C314
   addu  A1, S2, R0
L800F7474:
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

draw_toads_outer:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   AT, hi(bss_toad_model)
  sw    R0, lo(bss_toad_model)(AT)
  addu  S0, R0, R0
  lui   S2, hi(bss_toad_instances)
  addiu S2, S2, lo(bss_toad_instances)
  lui   S1, hi(data_mystery_40s_list_2)
  addiu S1, S1, lo(data_mystery_40s_list_2)
  sll   V0, S0, 2
L800F74C0:
  addu  V0, V0, S2
  sw    R0, 0(V0)
  sll   V0, S0, 1
  addu  V0, V0, S1
  jal   IsBoardFeatureFlagSet
   lh    A0, 0(V0)
  bnel V0, R0, L800F74F0
   addiu S0, S0, 1
  sll   A0, S0, 0x10
  jal   draw_toads_inner
   sra   A0, A0, 0x10
  addiu S0, S0, 1
L800F74F0:
  slti  V0, S0, STAR_COUNT
  bne  V0, R0, L800F74C0
   sll   V0, S0, 2
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

.if BOO_COUNT
boo_draw_inner:
  ; A0 = index of boo to draw
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  addu  S0, A0, R0
  ; V0 = bss_boo_instances[A0]
  sll   A0, A0, 0x10
  sra   A0, A0, 0xe
  lui   V0, hi(bss_boo_instances)
  addu  V0, V0, A0
  lw    V0, lo(bss_boo_instances)(V0)
  ; If we have a non-zero in bss_boo_instances[A0], exit.
  bne  V0, R0, boo_draw_inner_exit
   NOP
  ; V0 = bss_boo_model
  lui   V0, hi(bss_boo_model)
  lw    V0, lo(bss_boo_model)(V0)
  ; If we have already loaded the boo model, jump ahead
  bne  V0, R0, L800F7714
   addiu    A0, R0, 106 ; Boo model_info index
  jal   0x8003DBE0
   addu  A1, R0, R0
  addu  S1, V0, R0
  jal   0x8003E174
   addu  A0, S1, R0
  lui   AT, hi(bss_boo_model)
  sw    S1, lo(bss_boo_model)(AT)
  j     L800F7728
   sll   S0, S0, 0x10
L800F7714:
  ; A0 = bss_boo_model
  lui   A0, hi(bss_boo_model)
  lw    A0, lo(bss_boo_model)(A0)
  jal   0x8003E320
   sll   S0, S0, 0x10
  addu  S1, V0, R0
L800F7728:
  sra   S0, S0, 0x10
  sll   V0, S0, 2
  ; bss_boo_instances[original index] = S1
  lui   AT, hi(bss_boo_instances)
  addu  AT, AT, V0
  sw    S1, lo(bss_boo_instances)(AT)
  lhu   V0, 0xa(S1)
  ori   V0, V0, 2
  sh    V0, 0xa(S1)
  addiu A0, S1, 0x24
  lui A1, 0x3f19
  ori A1, A1, 0x999a ; 0.6
  addu  A2, A1, R0 ; 0.6
  jal   0x800A0D00
   addu  A3, A1, R0 ; 0.6
  lui   AT, 0x42C8 ; 100.000000
  mtc1  AT, F0
  NOP
  swc1  F0, 0x30(S1)
  ; Get the space data for boo_space_indices[original index]
  sll   S0, S0, 1
  lui   A0, hi(boo_space_indices)
  addu  A0, A0, S0
  jal   GetSpaceData
   lh    A0, lo(boo_space_indices)(A0)
  addiu A0, S1, 0xc
  jal   0x800A0D50 ; posmodel
   addiu A1, V0, 4
  addiu    A0, R0, 8
  addu  A1, S1, R0
  addu  A2, R0, R0
  jal   0x8003C314
   addu  A3, R0, R0
boo_draw_inner_exit:
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

boo_draw_outer:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  ; bss_boo_model = 0
  lui   AT, hi(bss_boo_model)
  sw    R0, lo(bss_boo_model)(AT)
  addu  S0, R0, R0
  sll   A0, S0, 0x10
boo_draw_outer_loop:
  jal   boo_draw_inner
   sra   A0, A0, 0x10
  addiu S0, S0, 1
  slti  V0, S0, BOO_COUNT
  bne  V0, R0, boo_draw_outer_loop
   sll   A0, S0, 0x10
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18
.endif ; BOO_COUNT

overlaycall4:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   InitCameras
   addiu    A0, R0, 2 ; camera count
  lui   A1, hi(data_screen_dimensions)
  addiu A1, A1, lo(data_screen_dimensions)
  jal   0x8001D4D4
   addiu    A0, R0, 1
  jal   setup_routine
   NOP
  jal   0x800584F0
   addiu    A0, R0, 2
  lui   A0, hi(${f})
  addiu A0, A0, lo(${f})
  addiu    A1, R0, 4101
  addu  A2, R0, R0
  jal   InitProcess
   addu  A3, R0, R0
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

hydrate_events:
  ADDIU SP SP 0xFFE8
  SW RA, 0x0010(SP)

  // Call for the MainFS to read in the ASM blob.
  LUI A0 ${i}
  JAL ${to(Qe.MP1_USA,"ReadMainFS")}
  ADDIU A0 A0 ${a}

  // Now, V0 has the location that the MainFSRead put the blob... it isn't
  // where we want it, it is in the heap somewhere, so we will move it.

  // This is a pretty simple copy loop
  // T4 = Copy of V0, Current source RAM location
  // T0 = Current dest RAM location
  // T1 = Size of buffer remaining to copy
  // T2 = Temp word register to do the copy
  ADDU T4 V0 R0 // Copy V0 -> T4
  LW T0 0x4(T4) // LW T0, 0x4(T4) [RAM dest]
  LW T1 0x8(T4) // LW T1, 0x8(T4) [Buffer size]
hydrate_events_loop_start:
  LW T2 0(T4)
  SW T2 0(T0)
  ADDIU T4 T4 4
  ADDIU T0 T0 4
  ADDIU T1 T1 -4
  BGTZ T1 hydrate_events_loop_start
  NOP

  // Now we can hydrate the table.
  // T9 = V0 copy
  // T4 = Dest buffer addr + 0x10, where the table really starts
  ADDU T9 V0 R0 // Copy V0 -> T9
  LW T4 4(T9) // LW T4, 0x4(T9) [RAM dest]
  JAL ${to(Qe.MP1_USA,"EventTableHydrate")}
  ADDIU A0 T4 16 // ADDIU A0, T4, 16

  // Well, we copied the buffer... now we should "free" it with this magic JAL...
  // Free our T9 reference, which theoretically could be corrupted, but in practice not.
  JAL ${to(Qe.MP1_USA,"FreeMainFS")}
  ADDU A0 T9 R0

  LW RA 0x10(SP)
  JR RA
  ADDIU SP SP 0x18
.align 16

; 800F9890
rodata:
overlaycalls:
.word 0x00000000, overlaycall0
.word 0x00010000, overlaycall1
.word 0x00020000, overlaycall2
.word 0x00030000, overlaycall3
.word 0x00040000, overlaycall4
.word 0xFFFF0000, 0

data_screen_dimensions:
.word 0x00000000
.word 0x00000000
.word 0x43A00000 ; 320
.word 0x43700000 ; 240

shuffle_order:
.halfword ${m.order.join(",")}

.align 4
shuffle_bias:
.halfword ${m.bias.join(",")}

.align 4
data_mystery_40s_list:
.halfword 0x46, 0x47, 0x48, 0x49, 0x4A, 0x4B, 0x4C

.align 4
star_space_indices:
.halfword ${h.join(",")||0}

.align 4
toad_space_indices:
.halfword ${_.join(",")||0}

.align 4
data_star_related_800F9920:
.word 0x00000001, 0x00070003

.align 4
toad_space_indices_repeat:
.halfword ${_.join(",")||0}

.align 4
data_mystery_40s_list_2:
.halfword 0x46, 0x47, 0x48, 0x49, 0x4A, 0x4B, 0x4C, 0

RO_800F9948:
.halfword 6
RO_800F994A:
.halfword 0
.word 0x0000FFFD, 0x0000FFF8, 0xFFFD0000, 0xFFFE0000, 0xFFFE0000, 0xFFFD0000

.if BOO_COUNT
boo_space_indices:
.halfword ${o.join(",")}
.endif

.align 16

bss:
bss_bowser_model: .word 0

bss_koopa_model: .word 0

bss_toad_model: .word 0
bss_toad_instances: .word ${_.map(()=>0).join(",")||0}

.if BOO_COUNT
bss_boo_model: .word 0
bss_boo_instances: .word ${o.map(()=>0).join(",")}
.endif

.align 16

`}const LI={id:"CHANCETIME",name:"Chance Time",activationType:Wt.LANDON,executionType:s0.DIRECT,supportedGames:[Qe.MP1_USA],parse(n,e){const t={METHOD:"18F44B4AA1F4AAAA839C100E3B0FD863"};return!!Wn([n.buffer,e.offset,108],t.METHOD)},write(n,e,t,r){return`
      ADDIU SP SP 0xFFE0
      SW RA 0x18(SP)
      SW S1 0x14(SP)
      SW S0 0x10(SP)
      ADDU S1 R0 R0
    loop:
      JAL GetPlayerStruct
      ADDU A0 S1 R0
      JAL GetCurrentPlayerIndex
      ADDU S0 V0 R0
      SLL V0 V0 0x10
      SRA V0 V0 0x10
      XOR V0 S1 V0
      SLTU V0 R0 V0
      SB V0 0(S0)
      ADDIU S1 S1 1
      SLTI V0 S1 4
      BNE V0 R0 loop
      ADDIU A0 R0 1
      ADDU A1 R0 R0
      ADDIU A2 R0 5
      JAL 0x800587BC
      ADDIU A3 R0 1
      LW RA 0x18(SP)
      LW S1 0x14(SP)
      LW S0 0x10(SP)
      JR RA
      ADDIU SP SP 0x20
    `}};hr(LI);const BI={id:"STARCHANCE",name:"Chance Time from old star space",activationType:Wt.LANDON,executionType:s0.DIRECT,fakeEvent:!0,supportedGames:[Qe.MP1_USA],parse(n,e){const t={METHOD:"7E32BF9C855085A03CF3A8D208A6AB94"};return!!Wn([n.buffer,e.offset,140],t.METHOD)},write(n,e,t,r){return`
      addiu SP, SP, -0x20
      sw    RA, 0x18(SP)
      sw    S1, 0x14(SP)
      jal   GetCurrentSpaceIndex
      sw    S0, 0x10(SP)
      sll   V0, V0, 0x10
      jal   __PP64_INTERNAL_STAR_SPACE
      sra   A0, V0, 0x10
      sll   V0, V0, 0x10
      sra   V0, V0, 0x10
      addiu  V1, R0, 2
      bne   V0, V1, L800F9784
      addu  S1, R0, R0
    L800F9740:
      jal   GetPlayerStruct
      addu  A0, S1, R0
      jal   GetCurrentPlayerIndex
      addu  S0, V0, R0
      sll   V0, V0, 0x10
      sra   V0, V0, 0x10
      xor   V0, S1, V0
      sltu  V0, R0, V0
      sb    V0, 0(S0)
      addiu S1, S1, 1
      slti  V0, S1, 4 ; total players
      bne  V0, R0, L800F9740
      addiu    A0, R0, 1
      addu  A1, R0, R0
      addiu    A2, R0, 5
      jal   0x800587BC
      addiu    A3, R0, 1
    L800F9784:
      lw    RA, 0x18(SP)
      lw    S1, 0x14(SP)
      lw    S0, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x20
    `}};hr(BI);const i$=[];function a$(n){return i$}const o$=["","","Peaceful Mushroom Village","Traveling the Warp Pipe","Mushroom Bank","Option House Theme","Mushroom Shop Theme","Mini-Game House Theme","DK's Jungle Adventure Theme","Peach's Birthday Cake Theme","Yoshi's Tropical Island Theme","Wario's Battle Canyon Theme","Luigi's Engine Room Theme","Mario's Rainbow Castle Theme","Magma Mountain Theme","Eternal Star Theme","Outcome of Adventure","Adventure Begins","Bowser Meeting","Last 5 Turns","","Play A Mini-Game","Results","","Move to the Mambo","Wide, Wide Ocean","Mushroom Forest","Ducking and Dodging","Full of Danger","Coins of the World","Taking Coins","The Room Underground","Slowly, Slowly","Dodging Danger","Let's Limbo!","Let's Go Lightly","Chance Time","Can It Be Done","Faster Than All","Saving Courage","","","Playing the Game","Where Have The Stars Gone?","","","","The Stolen Star","Bowser's Chance Game","Mini-Game Stadium","","","","","","","","","","","","","","","After the Victory","Mini-Game Island","Mini-Game Island","Mini-Game Island","Mini-Game Island","Mini-Game Island","Mini-Game Island (Bowser)","Mini-Game Island","Mini-Game Island (Aquatic)","","","","","","","",""],s$=["","Mario Party Theme","Power of the Stars","After the Victory","","Everyone's a Superstar! (Credits)","Opening"];function l$(n){switch(n){case 1:return s$;default:return o$}}class c$ extends OE{constructor(){super(...arguments),this.gameVersion=1,this.nintendoLogoFSEntry=[9,110],this.hudsonLogoFSEntry=[9,111],this.boardDefDirectory=10,this.MAINFS_READ_ADDR=83376,this.HEAP_FREE_ADDR=83760,this.TABLE_HYDRATE_ADDR=313600}hydrateSpace(e,t,r){e.type===de.STAR?e.star=!0:e.type===de.CHANCE&&Lo(t,e,ri(LI),!1,r)}onLoad(e,t,r){r||(this._extractKoopa(e,t),this._extractBowser(e,t),this._extractGoomba(e,t))}onCreateBoardOverlay(e,t,r,i){return r$(e,t,r,i)}onAfterOverwrite(e,t,r,i){e.setUint16(245602,32832),e.setUint16(245610,4194304-this.EVENT_MEM_SIZE>>>16),e.setUint16(245622,32),e.setUint16(390134,32);const a=835536,o=832464;e.setUint32(307156,t0(`J ${o}`));const s=`
      .orga ${a}
      LW S5, 0x0(A0)
      LUI S6, 0x4856 // "HV"
      ADDIU S6, S6, 0x5120 // "Q "
      BEQ S5, S6, call_hvq_decode
      NOP
      ADDU S5, R0, A1
      ADDIU S6, S5, 0x1800 // (64 x 48 tile)
      ADDU S7, R0, A0
      LW GP, 0(S7)
      SW GP, 0(S5)
      ADDIU S5, S5, 4
      ADDIU S7, S7, 4
      BEQ S5, S6, ret_to_hook
      NOP
      J ${o+32} // J back to LW
      NOP
    call_hvq_decode:
      ADDU S5, R0, R0
      ADDU S6, R0, R0
      ADDU S7, R0, R0
      ADDU GP, R0, R0
      JAL 0x7F54C // JAL HVQDecode
      NOP
    ret_to_hook:
      ADDU S5, R0, R0
      ADDU S6, R0, R0
      ADDU S7, R0, R0
      ADDU GP, R0, R0
      J 0x4A3DC // J back into original function, skipping HVQDecode
      NOP
    `;rl(s,{buffer:e.buffer})}onOverwritePromises(e,t,r){const i=t.bgDir;let a=[this.onWriteBoardSelectImg(e,t),this.onWriteBoardLogoImg(e,t),this._brandBootSplashscreen(),this._writeBackground(i,e.bg.src,e.bg.width,e.bg.height),this._writeBackground(t.pauseBgDir,e.bg.src,320,240),this._writeAdditionalBackgrounds(e)];switch(r){case 0:a=a.concat([this._writeBackground(i+1,e.otherbg.largescene,320,240),this._writeBackground(i+2,e.otherbg.conversation,320,240),this._writeBackground(i+3,e.otherbg.conversation,320,240),this._writeBackground(i+5,e.bg.src,320,240),this._writeBackground(i+6,e.otherbg.splashscreen,320,240)]);break;case 1:a=a.concat([this._writeBackground(i+1,e.otherbg.largescene,320,240),this._writeBackground(i+2,e.otherbg.conversation,320,240),this._writeBackground(i+3,e.otherbg.conversation,320,240),this._writeBackground(i+4,e.otherbg.conversation,320,240),this._writeBackground(i+5,e.otherbg.conversation,320,240),this._writeBackground(i+6,e.otherbg.largescene,320,240),this._writeBackground(i+8,e.bg.src,320,240),this._writeBackground(i+9,e.bg.src,320,240),this._writeBackground(i+10,e.otherbg.splashscreen,320,240)]);break;case 2:a=a.concat([this._writeBackground(i+1,e.otherbg.largescene,320,240),this._writeBackground(i+2,e.otherbg.conversation,320,240),this._writeBackground(i+3,e.otherbg.conversation,320,240),this._writeBackground(i+4,e.otherbg.conversation,320,240),this._writeBackground(i+5,e.otherbg.conversation,320,240),this._writeBackground(i+6,e.bg.src,320,240),this._writeBackground(i+8,e.otherbg.splashscreen,320,240)]);break;case 3:a=a.concat([this._writeBackground(i+1,e.otherbg.largescene,320,240),this._writeBackground(i+2,e.otherbg.conversation,320,240),this._writeBackground(i+3,e.otherbg.conversation,320,240),this._writeBackground(i+4,e.otherbg.conversation,320,240),this._writeBackground(i+5,e.otherbg.conversation,320,240),this._writeBackground(i+6,e.bg.src,320,240),this._writeBackground(i+7,e.otherbg.conversation,320,240),this._writeBackground(i+8,e.otherbg.conversation,320,240),this._writeBackground(i+10,e.otherbg.conversation,320,240),this._writeBackground(i+11,e.otherbg.splashscreen,320,240)]);break}return Promise.all(a)}onWriteEvents(e){const t=e.spaces;for(let r=0;r<t.length;r++){const i=e.spaces[r];if(!i||!i.star)continue;(i.events||[]).some(s=>s.id==="STARCHANCE")||Lo(e,i,ri(BI),!1,j0())}}onWriteEventAsmHook(e,t,r){}onParseStrings(e,t){const r=t.str||{};if(r.boardSelect){let i=r.boardSelect;Array.isArray(i)&&(i=i[0]);const a=Bt.read(i),o=a.split(`
`),s=o[0].indexOf(">")+1,l=o[0].indexOf("<",s);e.name=o[0].substring(s,l),e.description=[o[1],o[2]].join(`
`);let u=0,d=a.indexOf(this.getCharacterMap()[42],0);for(;d!==-1;)u++,d=a.indexOf(this.getCharacterMap()[42],d+1);e.difficulty=u}}onWriteStrings(e,t){const r=t.str||{};if(r.boardSelect){let i=[];i.push(11),i.push(5),i=i.concat(Bt._strToBytes(e.name||"")),i.push(2),i.push(10),i=i.concat(Bt._strToBytes(e.description||"")),i.push(10),i=i.concat([16,16,16,16,16,16]),i.push(6),i=i.concat(Bt._strToBytes("Map Difficulty  "));const a=42;if(e.difficulty>5||e.difficulty<1)i.push(a),i=i.concat(Bt._strToBytes(" ")),i.push(62),i=i.concat(Bt._strToBytes(" "+e.difficulty.toString()));else for(let l=0;l<e.difficulty;l++)i.push(a);i.push(2),i.push(0);const o=hi(i),s=r.boardSelect;if(Array.isArray(s))for(let l=0;l<s.length;l++)Bt.write(s[l],o);else Bt.write(s,o)}if(r.koopaIntro){let i=[];i=i.concat(Bt._strToBytes(`Welcome, everybody!
I am your guide,
Koopa Troopa.`)),i.push(255),i.push(11),i=i.concat(Bt._strToBytes(`Now then,
let's decide turn order.`)),i.push(255),i.push(0);const a=hi(i);Bt.write(r.koopaIntro,a)}if(r.starComments){let i=[];i=i.concat(Bt._strToBytes(`Good luck!
With enough stars, you
could be the superstar!`)),i.push(255),i.push(0);const a=hi(i);for(let o=0;o<r.starComments.length;o++)Bt.write(r.starComments[o],a)}}onChangeBoardSpaceTypesFromGameSpaceTypes(e,t){}onChangeGameSpaceTypesFromBoardSpaceTypes(e){}_extractKoopa(e,t){if(!t.koopaSpaceInst||!t.sceneIndex)return;const i=cn.getDataView(t.sceneIndex).getUint16(t.koopaSpaceInst+2);e.spaces[i]&&(e.spaces[i].subtype=yt.KOOPA)}_writeKoopa(e,t){if(!t.koopaSpaceInst||!t.sceneIndex)return;let r;for(let a=0;a<e.spaces.length;a++)if(e.spaces[a].subtype===yt.KOOPA){r=a;break}r=r===void 0?Mn(e):r,cn.getDataView(t.sceneIndex).setUint16(t.koopaSpaceInst+2,r)}_extractBowser(e,t){if(!t.bowserSpaceInst||!t.sceneIndex)return;const i=cn.getDataView(t.sceneIndex).getUint16(t.bowserSpaceInst+2);e.spaces[i]&&(e.spaces[i].subtype=yt.BOWSER)}_writeBowser(e,t){if(!t.bowserSpaceInst||!t.sceneIndex)return;let r;for(let a=0;a<e.spaces.length;a++)if(e.spaces[a].subtype===yt.BOWSER){r=a;break}r=r===void 0?Mn(e):r,cn.getDataView(t.sceneIndex).setUint16(t.bowserSpaceInst+2,r)}_extractGoomba(e,t){if(!t.goombaSpaceInst||!t.sceneIndex)return;const i=cn.getDataView(t.sceneIndex).getUint16(t.goombaSpaceInst+2);e.spaces[i]&&(e.spaces[i].subtype=yt.GOOMBA)}onParseBoardSelectImg(e,t){if(!t.img.boardSelectImg)return;const r=dt.get(9,t.img.boardSelectImg),i=Or.unpack(r),a=[new DataView(i.BMP1[0].parsed.src),new DataView(i.BMP1[1].parsed.src),new DataView(i.BMP1[2].parsed.src),new DataView(i.BMP1[3].parsed.src)],o=Oh(a,2,2,64*4,32);e.otherbg.boardselect=Ea(o,128,64)}async onWriteBoardSelectImg(e,t){const r=t.img.boardSelectImg;if(!r)return;const[i,a]=[128,64],o=await Va(e.otherbg.boardselect,i,a),l=Y4(o.data,2,2,i/2*4,a/2).map(f=>q4(f,32,8)),u=dt.get(9,r),d=Or.unpack(u);for(let f=0;f<4;f++){const m=l[f][1];for(;m.colors.length<17;)m.colors.push(0);Or.replaceBMP(d,f,l[f][0],m)}const h=Or.pack(d);dt.write(9,r,h)}onParseBoardLogoImg(e,t){!t.img.pauseLogoImg||(e.otherbg.boardlogo=this._readImgFromMainFS(10,t.img.pauseLogoImg,0))}onWriteBoardLogoImg(e,t){return new Promise((r,i)=>{let a=t.img.introLogoImg;const o=t.img.pauseLogoImg;if(!a&&!o){r();return}const[s,l]=t.img.introLogoImgDimens,u=Xs(),d=setTimeout(()=>i(`Failed to write logos for ${t.name}`),45e3);u.onload=()=>{if(a){const h=Pu(u,s,l);Array.isArray(a)||(a=[a]);for(let f=0;f<a.length;f++){const m=a[f],g=dt.get(10,m),E=Pr([{src:h,width:s,height:l,bpp:32}],16,0,g);dt.write(10,m,E)}}if(o){const h=Pu(u,200,82),f=dt.get(10,o),g=Pr([{src:h,width:200,height:82,bpp:32}],16,0,f);dt.write(10,o,g)}clearTimeout(d),r()},u.src=e.otherbg.boardlogo})}_clearOtherBoardNames(e){const t=dt.get(10,406+e);new Uint8Array(t).fill(0,44),dt.write(10,406+e,t)}getAudioMap(e){return l$(e)}getSoundEffectMap(e){return a$()}getCharacterMap(){return{0:"",1:"<BLACK>",2:"<DEFAULT>",3:"<RED>",4:"<PURPLE>",5:"<GREEN>",6:"<BLUE>",7:"<YELLOW>",8:"<WHITE>",9:"<SEIZURE>",10:`
`,11:"\u3014",12:"\u25CB",13:"	",14:"	",16:" ",17:"{0}",18:"{1}",19:"{2}",20:"{3}",21:"{4}",22:"{5}",33:"\u3000",34:"\u3001",35:"\u3002",36:"\u3003",37:"\u3004",38:"\u3005",39:"\u3006",40:"\u3007",41:"\u3008",42:"\u3009",43:"\u3010",44:"\u3011",58:"\u3012",59:"\u3013",60:"+",61:"-",62:"x",63:"->",91:'"',92:"'",93:"(",94:")",95:"/",123:":",128:'"',129:"\xB0",130:",",131:"\xB0",133:".",192:"\u201C",193:"\u201D",194:"!",195:"?",255:"\u3015"}}}const MI={};MI[Qe.MP2_USA]=[{upper:345798,lower:345802}];let dr;const Kn={getROMOffset(){const n=Tt.getDataView(),e=Kn.getPatchOffsets();if(!e)return null;const t=e[0],r=n.getUint16(t.upper)<<16,i=n.getUint16(t.lower);let a=r|i;return i&32768&&(a=a-65536),wt(`AnimationFS.getROMOffset -> ${At(a)}`),a},setROMOffset(n,e){const t=new DataView(e),r=Kn.getPatchOffsets();if(!r)return;let i=(n&4294901760)>>>16;const a=n&65535;a&32768&&(i+=1);for(let o=0;o<r.length;o++)t.setUint16(r[o].upper,i),t.setUint16(r[o].lower,a);wt(`AnimationFS.setROMOffset -> ${At(i<<16|a)}`)},getPatchOffsets(){return MI[Tt.getROMGame()]},get(n,e,t){return dr[n][e][t].decompressed},write(n,e,t,r){const i=pM(3,new DataView(t));dr[n]||(dr[n]=[]),dr[n][e]||(dr[n][e]={}),dr[n][e][r]={compressionType:3,decompressed:t,compressed:i}},_createOrderedTiles(n,e,t){const r=e/64,i=t/48,o=Y4(n.data,r,i,64*4,48).map(l=>kh(l,64,48)),s=[];for(let l=i-1;l>=0;l--)for(let u=0;u<r;u++)s.push(o[l*r+u]);return s},writeAnimationBackground(n,e,t,r,i,a){wt(`AnimationFS.writeAnimationBackground, set: ${n}, entry: ${e}, img is ${i}x${a}`);const o=Kn._createOrderedTiles(t,i,a),s=Kn._createOrderedTiles(r,i,a);Kn.clearSetEntry(n,e);for(let l=0;l<s.length;l++)uM(o[l],s[l])||Kn.write(n,e,s[l],l+1)},_unorderTiles(n,e,t){const r=[];for(let i=t-1;i>=0;i--)for(let a=0;a<e;a++)r.push(n[i*e+a]);return r},_readAnimationBackground(n,e,t,r,i){let a=[];for(let _=0;_<t.length;_++)dr[n][e].hasOwnProperty(_+1)?a.push(new DataView(dr[n][e][_+1].decompressed)):a.push(new DataView(t[_]));const o=64,s=48,l=r/64,u=i/48;a=Kn._unorderTiles(a,l,u);const d=Oh(a,l,u,o*2,s),h=bp(d,r,i),f=new Uint8Array(h),m=No(r,i),g=m.createImageData(r,i);for(let _=0;_<f.byteLength;_++)g.data[_]=f[_];return m.putImageData(g,0,0),m.canvas.toDataURL()},readAnimationBackgrounds(n,e,t,r){const i=Kn.getSetEntryCount(n),a=Kn._createOrderedTiles(e,t,r),o=[];for(let s=0;s<i;s++)o.push(Kn._readAnimationBackground(n,s,a,t,r));return o},clearCache(){dr=null},extract(){const n=Kn.getROMOffset();if(n===null)return null;const e=Tt.getDataView();return dr=Kn._extractSets(e,n),dr},extractAsync(){return new Promise((n,e)=>{Kn.extract(),n()})},_extractSets(n,e){const t=[],r=n.getUint32(e)-1;for(let i=0;i<r;i++){const a=n.getUint32(e+4+i*4);t.push(Kn._extractSetEntries(n,e+a))}return t},_extractSetEntries(n,e){const t=[],r=n.getUint32(e);for(let i=0;i<r;i++){const a=n.getUint32(e+4+i*4);t.push(Kn._extractTiles(n,e+a))}return t},_extractTiles(n,e){const t={},r=n.getUint32(e)-1;for(let i=0;i<r;i++){const a=n.getUint32(e+4+i*4),o=Kn._readTile(n,e+a);t[o.index]={compressionType:o.compressionType,compressed:o.compressed,decompressed:o.decompressed}}return t},_readTile(n,e){const t=n.getUint32(e),r=n.getUint32(e+4),i=n.getUint32(e+8),a=n.buffer,o=e+12,s=new DataView(a,o),l=yG(r,s,i);return{index:t,compressionType:r,compressed:a.slice(o,o+l),decompressed:u_(r,s,i)}},pack(n,e=0){const t=new DataView(n,e),r=Kn.getSetCount();t.setUint32(0,r+1);let i=4,a=4+(r+1)*4;for(let o=0;o<r;o++)t.setUint32(i,a),i+=4,a=Kn._writeSet(o,t,a),a=xn(a,4);return t.setUint32(i,a),a},_writeSet(n,e,t){const r=Kn.getSetEntryCount(n);e.setUint32(t,r);let i=t+4,a=t+4+r*4;for(let o=0;o<r;o++)e.setUint32(i,a-t),i+=4,a=Kn._writeTiles(n,o,e,a),a=xn(a,4);return a},_writeTiles(n,e,t,r){const i=Kn.getSetEntryTileCount(n,e);t.setUint32(r,i+1);let a=r+4,o=r+4+(i+1)*4;for(const s in dr[n][e])!dr[n][e].hasOwnProperty(s)||(t.setUint32(a,o-r),a+=4,o=Kn._writeTile(n,e,s,t,o),o=xn(o,4));return t.setUint32(a,o-r),o},_writeTile(n,e,t,r,i){const a=dr[n][e][t];return r.setUint32(i,parseInt(t)),r.setUint32(i+4,3),r.setUint32(i+8,a.decompressed.byteLength),fr(r,a.compressed,i+12,0,a.compressed.byteLength),i+12+a.compressed.byteLength},getSetCount(){return dr.length},getSetEntryCount(n){return dr[n].length},setSetEntryCount(n,e){return dr[n].length=e},clearSetEntry(n,e){return dr[n][e]={}},getSetEntryTileCount(n,e){return Object.keys(dr[n][e]).length},getByteLength(){let n=0;const e=Kn.getSetCount();n+=4,n+=4*(e+1);for(let t=0;t<e;t++){const r=Kn.getSetEntryCount(t);n+=4,n+=4*r;for(let i=0;i<r;i++){const a=Kn.getSetEntryTileCount(t,i);n+=4,n+=4*(a+1);for(const o in dr[t][i]){if(!dr[t][i].hasOwnProperty(o))continue;const s=dr[t][i][o];n+=4,n+=4,n+=4,n+=s.compressed.byteLength,n=xn(n,4)}}}return n}};async function u$(n,e,t,r){const[i,a]=e.mainfsEventFile,o=[];for(let I=0;I<n.spaces.length;I++)n.spaces[I].star&&o.push(I);const s=kE(o.length),l=Br(yt.TOAD,n),u=[];for(let I=0;I<o.length;I++){const q=n.spaces[o[I]];let P=Number.MAX_VALUE,ee=o[I];for(let ue=0;ue<l.length;ue++){const U=l[ue],O=n.spaces[U],G=Ro(q.x,q.y,O.x,O.y);G<P&&(P=G,ee=U)}u.push(ee)}const d=Br(yt.BANKCOIN,n);for(let I=0;I<2;I++)d.length<2&&d.push(Mn(n));const h=Br(yt.BANK,n),f=Eu(NA.id,n),m=[];f.forEach(I=>{const q=n.spaces[I];let P=Number.MAX_VALUE,ee=Mn(n);for(let ue=0;ue<h.length;ue++){const U=h[ue],O=n.spaces[U],G=Ro(q.x,q.y,O.x,O.y);G<P&&(P=G,ee=U)}m.push(ee)}),h.length||h.push(Mn(n));for(let I=0;I<2;I++)f.length<2&&f.push(Mn(n));for(let I=0;I<2;I++)m.length<2&&m.push(Mn(n));const g=Br(yt.ITEMSHOP,n),_=Eu(y_.id,n),E=[];_.forEach(I=>{const q=n.spaces[I];let P=Number.MAX_VALUE,ee=Mn(n);for(let ue=0;ue<g.length;ue++){const U=g[ue],O=n.spaces[U],G=Ro(q.x,q.y,O.x,O.y);G<P&&(P=G,ee=U)}E.push(ee)}),g.length||g.push(Mn(n));for(let I=0;I<2;I++)_.length<2&&_.push(Mn(n));for(let I=0;I<2;I++)E.length<2&&E.push(Mn(n));const x=Br(yt.BOO,n),v=Eu(ME.id,n),C=[];v.forEach(I=>{const q=n.spaces[I];let P=Number.MAX_VALUE,ee=Mn(n);for(let ue=0;ue<x.length;ue++){const U=x[ue],O=n.spaces[U],G=Ro(q.x,q.y,O.x,O.y);G<P&&(P=G,ee=U)}C.push(ee)}),x.length||x.push(Mn(n));for(let I=0;I<2;I++)v.length<2&&v.push(Mn(n));for(let I=0;I<2;I++)C.length<2&&C.push(Mn(n));const V=[];for(let I=0;I<n.spaces.length;I++)n.spaces[I].type===de.ARROW&&V.push(n.spaces[I].rotation||0);const D=to(Qe.MP2_USA,"AddArrowAngle"),H=f_(),R=[],j=Math.min(H,V.length);for(let I=0;I<j;I++)R.push(`LUI A0 hi(${At(mM(V[I]))})`),R.push(`JAL ${D}`),R.push("MTC1 A0 F12");const te=PA(n),$=await aE(n,e.bgDir,te),z=await sE(n,r);return`
.org 0x80102800

.definelabel D_800C9B80,0x800C9B80
.definelabel D_800CAFD8,0x800CAFD8
.definelabel D_800CAFD9,0x800CAFD9
.definelabel D_800CC000,0x800CC000
.definelabel D_800CC001,0x800CC001
.definelabel D_800CC007,0x800CC007
.definelabel D_800CC1F0,0x800CC1F0
.definelabel D_800CC6A8,0x800CC6A8
.definelabel D_800CC6C4,0x800CC6C4
.definelabel D_800CCBDC,0x800CCBDC
.definelabel D_800CCC16,0x800CCC16
.definelabel D_800CCC18,0x800CCC18
.definelabel D_800CCD5C,0x800CCD5C
.definelabel D_800CD414,0x800CD414
.definelabel D_800D0032,0x800D0032
.definelabel D_800F6098,0x800F6098
.definelabel D_800F64B0,0x800F64B0
.definelabel D_800F64C8,0x800F64C8
.definelabel D_800F851A,0x800F851A
.definelabel D_800F8CE4,0x800F8CE4
.definelabel D_800F8D12,0x800F8D12
.definelabel D_800F8D16,0x800F8D16
.definelabel D_800F8D18,0x800F8D18
.definelabel D_800F8D1E,0x800F8D1E
.definelabel D_800F9052,0x800F9052
.definelabel D_800F920C,0x800F920C
.definelabel D_800F93A8,0x800F93A8
.definelabel D_800F93AA,0x800F93AA ; s16 board index to load
.definelabel D_800F93AE,0x800F93AE
.definelabel D_800F93B0,0x800F93B0
.definelabel D_800F93B2,0x800F93B2
.definelabel D_800F93B4,0x800F93B4
.definelabel D_800F93C0,0x800F93C0
.definelabel D_800F93C4,0x800F93C4
.definelabel D_800F93C6,0x800F93C6
.definelabel D_800FA188,0x800FA188
.definelabel D_800FA198,0x800FA198
.definelabel D_800FC734,0x800FC734
.definelabel D_800FC834,0x800FC834
.definelabel D_800FD2C0,0x800FD2C0
.definelabel D_800FD2C2,0x800FD2C2
.definelabel D_800FD2C6,0x800FD2C6
.definelabel D_800FD2D0,0x800FD2D0
.definelabel D_800FD2D2,0x800FD2D2
.definelabel D_800FD2E4,0x800FD2E4
.definelabel D_80100001,0x80100001
.definelabel D_80100009,0x80100009
.definelabel D_80100010,0x80100010
.definelabel D_80100012,0x80100012
.definelabel D_8010008C,0x8010008C
.definelabel D_80101058,0x80101058
.definelabel func_800114E8,0x800114E8
.definelabel func_800115B4,0x800115B4
.definelabel func_80017680,0x80017680
.definelabel func_80017800,0x80017800
.definelabel func_80020070,0x80020070
.definelabel func_80020324,0x80020324
.definelabel func_80026DAC,0x80026DAC
.definelabel func_80027154,0x80027154
.definelabel func_800297E8,0x800297E8
.definelabel func_80029E80,0x80029E80
.definelabel func_80029FE4,0x80029FE4
.definelabel func_8002D0A0,0x8002D0A0
.definelabel func_8002D124,0x8002D124
.definelabel func_8002D4A0,0x8002D4A0
.definelabel func_8004108C,0x8004108C
.definelabel func_80041610,0x80041610
.definelabel func_800417EC,0x800417EC
.definelabel func_800418D8,0x800418D8
.definelabel func_80041A74,0x80041A74
.definelabel func_80041AEC,0x80041AEC
.definelabel func_80041B40,0x80041B40
.definelabel func_80041B60,0x80041B60
.definelabel func_80042BE0,0x80042BE0
.definelabel func_80042D38,0x80042D38
.definelabel func_80043510,0x80043510
.definelabel func_800437F8,0x800437F8
.definelabel func_80043DAC,0x80043DAC
.definelabel func_80043F7C,0x80043F7C
.definelabel func_80044258,0x80044258
.definelabel func_800442DC,0x800442DC
.definelabel func_8004430C,0x8004430C
.definelabel func_80044494,0x80044494
.definelabel func_80044530,0x80044530
.definelabel func_800446B4,0x800446B4
.definelabel func_80044800,0x80044800
.definelabel func_80044D98,0x80044D98
.definelabel func_80045650,0x80045650
.definelabel func_8004655C,0x8004655C
.definelabel func_80046D2C,0x80046D2C
.definelabel func_80046EDC,0x80046EDC
.definelabel func_80046F98,0x80046F98
.definelabel func_80047A50,0x80047A50
.definelabel func_80047BB8,0x80047BB8
.definelabel func_80047D78,0x80047D78
.definelabel func_80047DE8,0x80047DE8
.definelabel func_80047E70,0x80047E70
.definelabel func_80048A48,0x80048A48
.definelabel func_800495A8,0x800495A8
.definelabel func_800495D8,0x800495D8
.definelabel func_80049ED4,0x80049ED4
.definelabel func_80049F90,0x80049F90
.definelabel func_8004B224,0x8004B224
.definelabel func_8004CA14,0x8004CA14
.definelabel func_8004CA34,0x8004CA34
.definelabel func_8004CC7C,0x8004CC7C
.definelabel func_8004CD70,0x8004CD70
.definelabel func_8004CDE0,0x8004CDE0
.definelabel func_8004CE80,0x8004CE80
.definelabel func_8004D5B0,0x8004D5B0
.definelabel func_8004D60C,0x8004D60C
.definelabel func_8004E484,0x8004E484
.definelabel func_80050304,0x80050304
.definelabel func_8005057C,0x8005057C
.definelabel func_8005070C,0x8005070C
.definelabel func_80050860,0x80050860
.definelabel func_800508E4,0x800508E4
.definelabel func_800509C4,0x800509C4
.definelabel func_800509FC,0x800509FC
.definelabel func_80051500,0x80051500
.definelabel func_80052F70,0x80052F70
.definelabel func_80053608,0x80053608
.definelabel func_80053620,0x80053620
.definelabel func_80053980,0x80053980
.definelabel func_80053998,0x80053998
.definelabel func_80053AA0,0x80053AA0
.definelabel func_80053F54,0x80053F54
.definelabel func_80053F7C,0x80053F7C
.definelabel func_800542B8,0x800542B8
.definelabel func_800542E8,0x800542E8
.definelabel func_80054B8C,0x80054B8C
.definelabel func_80054BB0,0x80054BB0
.definelabel func_80054BDC,0x80054BDC
.definelabel func_80054C78,0x80054C78
.definelabel func_80054D3C,0x80054D3C
.definelabel func_8005521C,0x8005521C
.definelabel func_800556F4,0x800556F4
.definelabel func_800558E8,0x800558E8
.definelabel func_800558F4,0x800558F4
.definelabel func_80055928,0x80055928
.definelabel func_80055980,0x80055980
.definelabel func_80055C88,0x80055C88
.definelabel func_80055E3C,0x80055E3C
.definelabel func_80055E60,0x80055E60
.definelabel func_80055E90,0x80055E90
.definelabel func_8005600C,0x8005600C
.definelabel func_800560A4,0x800560A4
.definelabel func_80056124,0x80056124
.definelabel func_80056144,0x80056144
.definelabel func_80056168,0x80056168
.definelabel func_80056368,0x80056368
.definelabel func_80056458,0x80056458
.definelabel func_80056524,0x80056524
.definelabel func_80056658,0x80056658
.definelabel func_8005670C,0x8005670C
.definelabel func_80056728,0x80056728
.definelabel func_80056754,0x80056754
.definelabel func_8005694C,0x8005694C
.definelabel func_80056B78,0x80056B78
.definelabel func_80056C30,0x80056C30
.definelabel func_80056D80,0x80056D80
.definelabel func_80056FD4,0x80056FD4
.definelabel func_80057150,0x80057150
.definelabel func_8005734C,0x8005734C
.definelabel func_800573AC,0x800573AC
.definelabel func_80057718,0x80057718
.definelabel func_80057DC0,0x80057DC0
.definelabel func_80059120,0x80059120
.definelabel func_80059158,0x80059158
.definelabel func_80059FD0,0x80059FD0
.definelabel func_8005A358,0x8005A358
.definelabel func_8005AB50,0x8005AB50
.definelabel func_8005AC6C,0x8005AC6C
.definelabel func_8005B338,0x8005B338
.definelabel func_8005DC30,0x8005DC30
.definelabel func_8005DC3C,0x8005DC3C
.definelabel func_8005DCA0,0x8005DCA0
.definelabel func_8005DD68,0x8005DD68
.definelabel func_8005DDEC,0x8005DDEC
.definelabel func_80060210,0x80060210
.definelabel func_800609D8,0x800609D8
.definelabel func_8006135C,0x8006135C
.definelabel func_800614B4,0x800614B4
.definelabel func_80061518,0x80061518
.definelabel func_80061584,0x80061584
.definelabel func_80062588,0x80062588
.definelabel func_80062824,0x80062824
.definelabel func_8006286C,0x8006286C
.definelabel func_800628C0,0x800628C0
.definelabel func_8006296C,0x8006296C
.definelabel func_800629AC,0x800629AC
.definelabel func_800629F0,0x800629F0
.definelabel func_80062A28,0x80062A28
.definelabel func_80062E10,0x80062E10
.definelabel func_80063178,0x80063178
.definelabel func_800632F0,0x800632F0
.definelabel func_800632FC,0x800632FC
.definelabel func_800636F8,0x800636F8
.definelabel func_80063710,0x80063710
.definelabel func_80063734,0x80063734
.definelabel func_80063C40,0x80063C40
.definelabel func_80064FF8,0x80064FF8
.definelabel func_800650BC,0x800650BC
.definelabel func_80066C34,0x80066C34
.definelabel func_80066F6C,0x80066F6C
.definelabel func_8006706C,0x8006706C
.definelabel func_800670B0,0x800670B0
.definelabel func_80067170,0x80067170
.definelabel func_800672BC,0x800672BC
.definelabel func_8006735C,0x8006735C
.definelabel func_80067558,0x80067558
.definelabel func_80067720,0x80067720
.definelabel func_80067C6C,0x80067C6C
.definelabel func_80068328,0x80068328
.definelabel func_8006836C,0x8006836C
.definelabel func_800683BC,0x800683BC
.definelabel func_80068480,0x80068480
.definelabel func_80076598,0x80076598
.definelabel func_8007695C,0x8007695C
.definelabel func_80076AFC,0x80076AFC
.definelabel func_80076B44,0x80076B44
.definelabel func_80076B70,0x80076B70
.definelabel func_80076FCC,0x80076FCC
.definelabel func_80077160,0x80077160
.definelabel func_800771EC,0x800771EC
.definelabel func_80077574,0x80077574
.definelabel func_80078EC8,0x80078EC8
.definelabel func_80078FF8,0x80078FF8
.definelabel func_80079390,0x80079390
.definelabel func_80079428,0x80079428
.definelabel func_80079464,0x80079464
.definelabel func_800794A8,0x800794A8
.definelabel func_8007959C,0x8007959C
.definelabel func_80079718,0x80079718
.definelabel func_80079798,0x80079798
.definelabel func_800797DC,0x800797DC
.definelabel func_80079848,0x80079848
.definelabel func_8007D700,0x8007D700
.definelabel func_8007D7E8,0x8007D7E8
.definelabel func_8007D838,0x8007D838
.definelabel func_8007D9E0,0x8007D9E0
.definelabel func_8007DA44,0x8007DA44
.definelabel func_8007F8B0,0x8007F8B0
.definelabel func_8007FA6C,0x8007FA6C
.definelabel func_80081AD0,0x80081AD0
.definelabel func_8008218C,0x8008218C
.definelabel func_8008225C,0x8008225C
.definelabel func_800822A8,0x800822A8
.definelabel func_80082384,0x80082384
.definelabel func_80082418,0x80082418
.definelabel func_80082488,0x80082488
.definelabel func_80082660,0x80082660
.definelabel func_80082800,0x80082800
.definelabel func_800890CC,0x800890CC
.definelabel func_80089284,0x80089284
.definelabel func_8008BB48,0x8008BB48
.definelabel func_8008CFD0,0x8008CFD0
.definelabel func_8008D07C,0x8008D07C
.definelabel func_8008D59C,0x8008D59C
.definelabel func_8008D854,0x8008D854
.definelabel func_8008DAC0,0x8008DAC0
.definelabel func_8008E2DC,0x8008E2DC
.definelabel func_8008E4D0,0x8008E4D0
.definelabel func_8008F544,0x8008F544
.definelabel func_8008F5AC,0x8008F5AC
.definelabel func_8008F618,0x8008F618
.definelabel func_8008F624,0x8008F624
.definelabel func_800A4FA0,0x800A4FA0
.definelabel func_800A5660,0x800A5660
.definelabel func_800B1870,0x800B1870
.definelabel func_800B3160,0x800B3160
.definelabel func_800B3170,0x800B3170
.definelabel func_800B31C0,0x800B31C0
.definelabel func_800B3200,0x800B3200
.definelabel func_800B3240,0x800B3240
.definelabel func_800B34B0,0x800B34B0
.definelabel func_800B39F0,0x800B39F0
.definelabel func_800B3B80,0x800B3B80
.definelabel func_800B7890,0x800B7890
.definelabel func_800B83C0,0x800B83C0

.definelabel BOARD_COUNT,6
.definelabel BANK_COUNT,${h.length}
.definelabel SHOP_COUNT,${g.length}
.definelabel STAR_COUNT,${o.length}
.definelabel BOO_COUNT,${x.length}

func_80102800:
/*  */  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   A0, hi(D_80111920)
  addiu A0, A0, lo(D_80111920)
  lui   A1, hi(D_800CD414)
  jal   func_80066F6C
   lh    A1, lo(D_800CD414)(A1)
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18
  nop
  nop

func_80102830:
  lui   V0, hi(D_800F93B2)
  addiu V0, V0, lo(D_800F93B2)
  lh    V1, 0(V0)
  sll   V1, V1, 1
  addu  V0, V0, V1
  lh    V0, 2(V0)
  sll   V0, V0, 1
  lui   AT, hi(D_80111994)
  addu  AT, AT, V0
  jr    RA
   lh    V0, lo(D_80111994)(AT)

func_8010285C:
  addiu SP, SP, -0x30
  sw    RA, 0x28(SP)
  sw    S5, 0x24(SP)
  sw    S4, 0x20(SP)
  sw    S3, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   S5, hi(D_800F93A8)
  addiu S5, S5, lo(D_800F93A8)
  move  S1, R0
  lui S4, 0x2492
  ori S4, S4, 0x4925
  lui   S3, hi(shuffle_bias)
  addiu S3, S3, lo(shuffle_bias)
  lui   S2, hi(shuffle_order)
  addiu S2, S2, lo(shuffle_order)
L801028A0:
  jal   GetRandomByte
   nop
  andi  V0, V0, 0xff
  multu V0, S4
  mfhi  A0
  subu  V1, V0, A0
  srl   V1, V1, 1
  addu  A0, A0, V1
  srl   A0, A0, 2
  sll   V1, A0, 3
  subu  V1, V1, A0
  subu  V0, V0, V1
  jal   GetRandomByte
   andi  S0, V0, 0xff
  andi  V0, V0, 0xff
  multu V0, S4
  mfhi  A0
  subu  V1, V0, A0
  srl   V1, V1, 1
  addu  A0, A0, V1
  srl   A0, A0, 2
  sll   V1, A0, 3
  subu  V1, V1, A0
  subu  V0, V0, V1
  andi  A0, V0, 0xff
  beq   S0, A0, L80102960
   sll   V1, A0, 1
  addu  A3, V1, S3
  lh    V0, 0(A3)
  slt   V0, S0, V0
  bnel  V0, R0, L80102964
   addiu S1, S1, 1
  sll   A1, S0, 1
  addu  A2, A1, S3
  lh    V0, 0(A2)
  slt   V0, A0, V0
  bnel  V0, R0, L80102964
   addiu S1, S1, 1
  addu  A0, A1, S2
  lh    A1, 0(A0)
  addu  V1, V1, S2
  lhu   V0, 0(V1)
  sh    V0, 0(A0)
  sh    A1, 0(V1)
  lh    A1, 0(A2)
  lhu   V0, 0(A3)
  sh    V0, 0(A2)
  sh    A1, 0(A3)
L80102960:
  addiu S1, S1, 1
L80102964:
  slti  V0, S1, 0x3c
  bnez  V0, L801028A0
   nop
  move  S1, R0
  lui   A0, hi(shuffle_order)
  addiu A0, A0, lo(shuffle_order)
  sll   V0, S1, 1
L80102980:
  addu  V1, V0, S5
  addu  V0, V0, A0
  lhu   V0, 0(V0)
  sh    V0, 0xc(V1)
  addiu S1, S1, 1
  slti  V0, S1, STAR_COUNT
  bnez  V0, L80102980
   sll   V0, S1, 1
  lh    V1, 0x1c(S5)
  li    V0, -1
  bne   V1, V0, L80102A20
   move  A1, R0
L801029B0:
  li    V0, 6
  subu  V0, V0, A1
  sll   V0, V0, 1
  addu  V0, V0, S5
  lhu   V0, 0xc(V0)
  sh    V0, 0x1c(S5)
  lui   V1, hi(D_80111970)
  lh    V1, lo(D_80111970)(V1)
  li    V0, -1
  beq   V1, V0, L80102A20
   move  S1, R0
  lui   A2, hi(D_80111970)
  addiu A2, A2, lo(D_80111970)
  lh    V1, 0x1c(S5)
  li    A0, -1
  sll   V0, S1, 1
L801029F0:
  addu  V0, V0, A2
  lh    V0, 0(V0)
  bnel  V1, V0, L80102A08
   addiu S1, S1, 1
  j     L801029B0
   addiu A1, A1, 1
L80102A08:
  sll   V0, S1, 1
  lui   AT, hi(D_80111970)
  addu  AT, AT, V0
  lh    V0, lo(D_80111970)(AT)
  bne   V0, A0, L801029F0
   sll   V0, S1, 1
L80102A20:
  lw    RA, 0x28(SP)
  lw    S5, 0x24(SP)
  lw    S4, 0x20(SP)
  lw    S3, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x30

func_80102A44:
  addiu SP, SP, -0x28
  sw    RA, 0x24(SP)
  sw    S0, 0x20(SP)
  lui   S0, hi(D_800F93A8)
  addiu S0, S0, lo(D_800F93A8)
  addiu A0, SP, 0x10
  jal   func_8004B224
   li    A1, 6
  lui   AT, hi(D_800F93B2)
  sh    R0, lo(D_800F93B2)(AT)
  move  A0, R0
  addiu A1, SP, 0x10
  sll   V1, A0, 1
L80102A78:
  addu  V1, V1, S0
  addu  V0, A1, A0
  lbu   V0, 0(V0)
  sh    V0, 0xc(V1)
  addiu A0, A0, 1
  slti  V0, A0, 7
  bnel  V0, R0, L80102A78
   sll   V1, A0, 1
  lhu   V0, 0x18(S0)
  sh    V0, 0x1c(S0)
  lw    RA, 0x24(SP)
  lw    S0, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x28

func_80102AB0:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   V0, hi(D_800F93B2)
  lh    V0, lo(D_800F93B2)(V0)
  sll   V1, V0, 1
  lui   AT, hi(D_800F93B4)
  addu  AT, AT, V1
  lhu   V1, lo(D_800F93B4)(AT)
  lui   AT, hi(D_800F93C4)
  sh    V1, lo(D_800F93C4)(AT)
  addiu V0, V0, 0x0001
  lui   AT, hi(D_800F93B2)
  sh    V0, lo(D_800F93B2)(AT)
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  slti  V0, V0, 7
  bnez  V0, L80102B44
   nop
  lui   S0, hi(D_800F93C0)
  lh    S0, lo(D_800F93C0)(S0)
  lui   AT, hi(D_800F93B2)
  sh    R0, lo(D_800F93B2)(AT)
  jal   func_8006836C
   li    A0, 68
  jal   func_8010285C
   nop
  lui   V1, hi(D_800F93B4)
  lh    V1, lo(D_800F93B4)(V1)
  bne   S0, V1, L80102B44
   nop
  lui   V0, hi(D_800F93C0)
  lhu   V0, lo(D_800F93C0)(V0)
  lui   AT, hi(D_800F93B4)
  sh    V0, lo(D_800F93B4)(AT)
  lui   AT, hi(D_800F93C0)
  sh    V1, lo(D_800F93C0)(AT)
L80102B44:
  lw    RA, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x20

func_80102B54:
  addiu SP, SP, -0x28
  sw    RA, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S2, hi(D_800F93A8)
  addiu S2, S2, lo(D_800F93A8)
  move  S0, R0
  lui   S1, hi(D_80111974)
  addiu S1, S1, lo(D_80111974)
  sll   V0, S0, 1
L80102B80:
  addu  V0, V0, S1
  lh    A0, 0(V0)
  jal   func_8006836C
   addiu S0, S0, 1
  slti  V0, S0, 7
  bnez  V0, L80102B80
   sll   V0, S0, 1
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  lui   S0, hi(D_80111984)
  addiu S0, S0, lo(D_80111984)
  lui   A0, hi(D_80111984)
  addu  A0, A0, V0
  lh    A0, lo(D_80111984)(A0)
  jal   func_8005521C
   li    A1, 14
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  lui   A0, hi(D_80111974)
  addu  A0, A0, V0
  jal   func_800683BC
   lh    A0, lo(D_80111974)(A0)
  lh    V1, 0x1c(S2)
  li    V0, -1
  beq   V1, V0, L80102C24
   sll   V0, V1, 1
  addu  V0, V0, S0
  lh    A0, 0(V0)
  jal   func_8005521C
   li    A1, 15
  lh    V0, 0x1c(S2)
  sll   V0, V0, 1
  addu  V0, V0, S0
  jal   func_800509C4
   lh    A0, 0(V0)
L80102C24:
  lw    RA, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

func_80102C3C:
  addiu SP, SP, -0x28
  sw    RA, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S1, hi(D_800F93A8)
  addiu S1, S1, lo(D_800F93A8)
  move  S0, R0
  lui   A1, hi(D_80111984)
  addiu A1, A1, lo(D_80111984)
  sll   A0, A0, 0x10
  sra   A0, A0, 0x10
  sll   V1, S0, 1
L80102C6C:
  addu  V0, V1, A1
  lh    V0, 0(V0)
  bnel  A0, V0, L80102D04
   addiu S0, S0, 1
  lh    V0, 0xa(S1)
  sll   V0, V0, 1
  addu  V0, V0, S1
  lh    V0, 0xc(V0)
  bne   S0, V0, L80102CAC
   nop
  lui   V0, hi(D_80111974)
  addu  V0, V0, V1
  lhu   V0, lo(D_80111974)(V0)
  sh    V0, 0x1a(S1)
  j     L80102D14
   li    V0, 1
L80102CAC:
  lh    V0, 0x1c(S1)
  beq   S0, V0, L80102D14
   li    V0, 2
  jal   func_80068328
   li    A0, 68
  bnez  V0, L80102CCC
   li    A0, 7
  lh    A0, 0xa(S1)
L80102CCC:
  blez  A0, L80102D10
   move  V1, R0
  sll   V0, V1, 1
L80102CD8:
  addu  V0, V0, S1
  lh    V0, 0xc(V0)
  bne   S0, V0, L80102CF0
   addiu V1, V1, 1
  j     L80102D14
   li    V0, 3
L80102CF0:
  slt   V0, V1, A0
  bnez  V0, L80102CD8
   sll   V0, V1, 1
  j     L80102D14
   move  V0, R0
L80102D04:
  slti  V0, S0, 7
  bnez  V0, L80102C6C
   sll   V1, S0, 1
L80102D10:
  move  V0, R0
L80102D14:
  lw    RA, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

func_80102D28:
  addiu SP, SP, -0x50
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F30, 0x48(SP)
  sdc1  F28, 0x40(SP)
  sdc1  F26, 0x38(SP)
  sdc1  F24, 0x30(SP)
  sdc1  F22, 0x28(SP)
  jal   func_8007D838
   sdc1  F20, 0x20(SP)
  lw    S0, 0x8c(V0)
  jal   func_8007959C
   li    A0, 846
  li    A0, 25
  jal   func_80043510
   move  A1, R0
  move  S1, V0
  lhu   V0, 0xa(S1)
  ori   V0, V0, 4
  sh    V0, 0xa(S1)
  jal   func_80056754
   move  A0, S1
  addiu A0, S1, 0xc
  jal   func_800B3170
   addiu A1, S0, 8
  li    AT, 0x42480000 ;50.0
  mtc1  AT, F0
  nop
  swc1  F0, 0x30(S1)
  move  A0, S1
  jal   func_80049ED4
   move  A1, R0
  move  S2, V0
  li    AT, 0x3DCC0000 ;0.099609
  ori   AT, AT, 0xcccd
  mtc1  AT, F0
  nop
  swc1  F0, 0x18(S2)
  mtc1  R0, F20
  move  S0, R0
  li    AT, 0x3F000000 ;0.500000
  mtc1  AT, F22
L80102DD8:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S1, 0x24
  jal   func_8007DA44
   add.s F20, F20, F22
  addiu S0, S0, 1
  slti  V0, S0, 6
  bnez  V0, L80102DD8
   nop
  move  S0, R0
  li    AT, 0x3ECC0000
  ori   AT, AT, 0xcccd
  mtc1  AT, F22
L80102E18:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S1, 0x24
  jal   func_8007DA44
   sub.s F20, F20, F22
  addiu S0, S0, 1
  slti  V0, S0, 3
  bnez  V0, L80102E18
   nop
  jal   func_8007D9E0
   li    A0, 30
  jal   func_8007959C
   li    A0, 812
  mtc1  R0, F22
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F30
  li    AT, 0x3D230000 ;0.039795
  ori   AT, AT, 0xd70a
  mtc1  AT, F28
  mtc1  R0, F26
  li    AT, 0x3F990000 ;1.195312
  ori   AT, AT, 0x999a
  mtc1  AT, F24
L80102E80:
  lw    V0, 0x3c(S1)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B39F0
   addiu A0, A0, 0x74
  sub.s F20, F20, F28
  c.lt.s F20, F26
  nop
  nop
  bc1t  L80102EFC
   add.s F22, F22, F30
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S1, 0x24
  lwc1  F0, 0x30(S1)
  sub.s F0, F0, F24
  jal   func_8007DA44
   swc1  F0, 0x30(S1)
  j     L80102E80
   nop
L80102EFC:
  jal   func_80049F90
   move  A0, S2
  jal   func_8004430C
   move  A0, S1
  lui   AT, hi(D_801136D0)
  sw    R0, lo(D_801136D0)(AT)
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F30, 0x48(SP)
  ldc1  F28, 0x40(SP)
  ldc1  F26, 0x38(SP)
  ldc1  F24, 0x30(SP)
  ldc1  F22, 0x28(SP)
  ldc1  F20, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x50

func_80102F4C:
  addiu SP, SP, -0x28
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F20, 0x20(SP)
  move  S1, A0
  lw    S0, 0(S1)
  li    AT, 0x40800000 ;4.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0x34(S0)
  li    AT, 0xBF190000 ;-0.597656
  ori   AT, AT, 0x999a
  mtc1  AT, F0
  nop
  swc1  F0, 0x38(S0)
  jal   func_8007D9E0
   li    A0, 3
  mtc1  R0, F2
  lwc1  F0, 0x38(S0)
  c.eq.s F0, F2
  nop
  bc1t  L80102FCC
   nop
  mtc1  R0, F20
L80102FB0:
  jal   func_8007DA44
   nop
  lwc1  F0, 0x38(S0)
  c.eq.s F0, F20
  nop
  bc1f  L80102FB0
   nop
L80102FCC:
  lw    A0, 0(S1)
  move  A1, R0
  jal   func_80044494
   li    A2, 2
  jal   func_8005B338
   move  A0, S1
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F20, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x28

; show_next_star_fn?
func_80102FFC:
  addiu SP, SP, -0x38
  sw    RA, 0x30(SP)
  sw    S3, 0x2c(SP)
  sw    S2, 0x28(SP)
  sw    S1, 0x24(SP)
  sw    S0, 0x20(SP)
  lui   S2, hi(D_800F93A8)
  addiu S2, S2, lo(D_800F93A8)
  move  S3, R0
  lui   AT, hi(D_800CCC18)
  sw    R0, lo(D_800CCC18)(AT)
  lui   V0, hi(D_800F93AA)
  lh    V0, lo(D_800F93AA)(V0)
  sll   V0, V0, 2
  lui   A0, hi(D_800CC6A8)
  addu  A0, A0, V0
  lw    A0, lo(D_800CC6A8)(A0)
  jal   func_80050304
   move  A1, R0
  move  S1, V0
  lui   V0, hi(D_800F93AA)
  lh    V0, lo(D_800F93AA)(V0)
  sll   V0, V0, 2
  lui   AT, hi(D_800CC6C4)
  addu  AT, AT, V0
  jal   func_800B83C0
   lwc1  F12, lo(D_800CC6C4)(AT)
  lw    V0, 0(S1)
  swc1  F0, 0x18(V0)
  lui   V0, hi(D_800F93AA)
  lh    V0, lo(D_800F93AA)(V0)
  sll   V0, V0, 2
  lui   AT, hi(D_800CC6C4)
  addu  AT, AT, V0
  jal   func_800B7890
   lwc1  F12, lo(D_800CC6C4)(AT)
  lw    V0, 0(S1)
  swc1  F0, 0x20(V0)
  jal   func_8005B338
   move  A0, S1
  jal   func_80079390
   li    A0, 17
  lw    A0, 0(S1)
  li    A1, 2
  lui   A3, hi(D_801119A4)
  lw    A3, lo(D_801119A4)(A3)
  jal   func_8005AB50
   li    A2, 8
  jal   func_80067558
   nop
  li    A0, 2
  jal   func_8008F544
   li    A1, 16
L801030D0:
  jal   func_8008F618
   nop
  beqz  V0, L801030F0
   nop
  jal   func_8007DA44
   nop
  j     L801030D0
   nop
L801030F0:
  jal   func_80051500
   nop
  li    AT, 0x40400000 ;3.000000
  mtc1  AT, F12
  jal   func_80053608
   nop
  jal   func_80102F4C
   move  A0, S1
  lh    V0, 0xa(S2)
  bnez  V0, L80103144
   nop
  jal   func_80068328
   li    A0, 68
  bnez  V0, L80103144
   nop
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beqz  V0, L8010315C
   li    A1, 1711
  j     L8010315C
   li    A1, 1713
L80103144:
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  sltu  V0, R0, V0
  subu V0, R0, V0
  andi  V0, V0, 0x6b1
  ori   A1, V0, 0x6b0
L8010315C:
  lh    A0, 8(S1)
  li    A2, -1
  jal   func_800890CC
   li    A3, -1
  lh    A0, 8(S1)
  jal   func_8008E2DC
   li    A1, 1
  jal   func_8007959C
   li    A0, 286
  lh    A0, 8(S1)
  jal   func_80057DC0
   nop
  li    V0, 2
  sw    V0, 0x10(SP)
  lw    A0, 0(S1)
  li    A1, -1
  move  A2, R0
  jal   func_80044530
   li    A3, 6
  jal   func_8005B338
   move  A0, S1
  lh    A0, 8(S1)
  jal   func_8008E4D0
   li    A1, 1
  lw    V0, 0(S1)
  lw    V0, 0x3c(V0)
  lw    V0, 0x40(V0)
  jal   func_8002D4A0
   lh    A0, 0(V0)
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beqz  V0, L80103204
   nop
  jal   GetRandomByte
   nop
  andi  S3, V0, 1
  andi  V0, S3, 0xff
  bnez  V0, L80103204
   nop
  lh    V0, 0x1c(S2)
  j     L80103218
   sll   V0, V0, 1
L80103204:
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
L80103218:
  lui   A0, hi(D_80111994)
  addu  A0, A0, V0
  jal   func_80054B8C
   lh    A0, lo(D_80111994)(A0)
  move  S0, V0
  jal   func_80053620
   addiu A0, S0, 8
  li    AT, 0x40600000 ;3.500000
  mtc1  AT, F12
  jal   func_80053980
   nop
  jal   func_8007D9E0
   li    A0, 5
L8010324C:
  jal   func_80053998
   nop
  beqz  V0, L8010326C
   nop
  jal   func_8007DA44
   nop
  j     L8010324C
   nop
L8010326C:
  jal   func_8007D9E0
   li    A0, 5
  lw    A0, 0(S1)
  move  A1, R0
  jal   func_80044494
   li    A2, 2
  jal   func_8005B338
   move  A0, S1
  lui   V0, hi(D_8010008C) ; TODO?
  lh    V0, lo(D_800F8D12)(V0)
  bnez  V0, L801032CC
   move  A2, R0
  lui   A0, hi(func_80102D28)
  addiu A0, A0, lo(func_80102D28)
  li    A1, 18432
  jal   InitProcess
   move  A3, R0
  lui   AT, hi(D_801136D0)
  sw    V0, lo(D_801136D0)(AT)
  sw    S0, lo(D_8010008C)(V0)
  jal   func_8007D9E0
   li    A0, 30
  j     L801032D4
   nop
L801032CC:
  lui   AT, hi(D_801136D0)
  sw    R0, lo(D_801136D0)(AT)
L801032D4:
  lh    V1, 8(S1)
  lui   A0, hi(D_800F920C)
  lw    A0, lo(D_800F920C)(A0)
  sll   V0, V1, 2
  addu  V0, V0, V1
  sll   V0, V0, 5
  subu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, A0
  li    V1, 1
  jal   func_8007DA44
   sb    V1, 0x20(V0)
  lh    A0, 8(S1)
  jal   func_8008E2DC
   li    A1, 1
  lh    A0, 8(S1)
  jal   func_80057DC0
   nop
  li    V0, 2
  sw    V0, 0x10(SP)
  lw    A0, 0(S1)
  li    A1, -1
  move  A2, R0
  jal   func_80044530
   li    A3, 6
  jal   func_8005B338
   move  A0, S1
  lh    A0, 8(S1)
  jal   func_8008E4D0
   li    A1, 1
  lw    V0, 0(S1)
  lw    V0, 0x3c(V0)
  lw    V0, 0x40(V0)
  jal   func_8002D4A0
   lh    A0, 0(V0)
  lh    V1, 0x1c(S2)
  li    V0, -1
  beq   V1, V0, L801034D0
   nop
  lui   V0, hi(D_801136D0)
  lw    V0, lo(D_801136D0)(V0)
  beqz  V0, L80103398
   nop
L80103380:
  jal   func_8007DA44
   nop
  lui   V0, hi(D_801136D0)
  lw    V0, lo(D_801136D0)(V0)
  bnez  V0, L80103380
   nop
L80103398:
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beqz  V0, L801033C8
   andi  V0, S3, 0xff
  bnez  V0, L801033C8
   nop
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  j     L801033D0
   sll   V0, V0, 1
L801033C8:
  lh    V0, 0x1c(S2)
  sll   V0, V0, 1
L801033D0:
  lui   A0, hi(D_80111994)
  addu  A0, A0, V0
  jal   func_80054B8C
   lh    A0, lo(D_80111994)(A0)
  move  S0, V0
  jal   func_80053620
   addiu A0, S0, 8
  li    AT, 0x40600000 ;3.500000
  mtc1  AT, F12
  jal   func_80053980
   nop
  jal   func_8007D9E0
   li    A0, 5
L80103404:
  jal   func_80053998
   nop
  beqz  V0, L80103424
   nop
  jal   func_8007DA44
   nop
  j     L80103404
   nop
L80103424:
  jal   func_8007D9E0
   li    A0, 5
  lw    A0, 0(S1)
  move  A1, R0
  jal   func_80044494
   li    A2, 2
  lw    V0, 0(S1)
  lw    V0, 0x3c(V0)
  lw    V1, 0x40(V0)
  lh    V0, 2(S2)
  sll   V0, V0, 2
  lh    A0, 0(V1)
  lui   A1, hi(D_801119AC)
  addu  A1, A1, V0
  jal   func_80029FE4
   lw    A1, lo(D_801119AC)(A1)
  jal   func_8005B338
   move  A0, S1
  lw    A0, 0(S1)
  lui   A1, hi(D_801119A8)
  jal   func_8005AC6C
   lw    A1, lo(D_801119A8)(A1)
  lh    V1, 8(S1)
  lui   A0, hi(D_800F920C)
  lw    A0, lo(D_800F920C)(A0)
  sll   V0, V1, 2
  addu  V0, V0, V1
  sll   V0, V0, 5
  subu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, A0
  li    V1, 1
  jal   func_8007DA44
   sb    V1, 0x20(V0)
  lh    A0, 8(S1)
  jal   func_8008E2DC
   li    A1, 1
  lh    A0, 8(S1)
  jal   func_80057DC0
   nop
  lh    A0, 8(S1)
  jal   func_8008E4D0
   li    A1, 1
L801034D0:
  jal   func_800794A8
   li    A0, 90
  jal   func_8007D9E0
   li    A0, 30
  li    A0, 2
  jal   func_8008F5AC
   li    A1, 16
  jal   func_8007D9E0
   li    A0, 17
  li    V0, 1
  lui   AT, hi(D_800CCC18)
  jal   func_80067720
   sw    V0, lo(D_800CCC18)(AT)
  jal   func_8005057C
   move  A0, S1
  jal   func_80063178
   nop
  jal   func_80077160
   li    A0, 1
  jal   func_80077574
   nop
  jal   func_8007DA44
   nop
  lw    RA, 0x30(SP)
  lw    S3, 0x2c(SP)
  lw    S2, 0x28(SP)
  lw    S1, 0x24(SP)
  lw    S0, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x38

func_80103548:
  addiu SP, SP, -0x60
  sw    RA, 0x30(SP)
  sw    S3, 0x2c(SP)
  sw    S2, 0x28(SP)
  sw    S1, 0x24(SP)
  sw    S0, 0x20(SP)
  sdc1  F28, 0x58(SP)
  sdc1  F26, 0x50(SP)
  sdc1  F24, 0x48(SP)
  sdc1  F22, 0x40(SP)
  jal   func_8007D838
   sdc1  F20, 0x38(SP)
  lw    S0, 0x8c(V0)
  jal   func_8005DC3C
   li    A0, -1
  move  S3, V0
  lui   V0, hi(D_801119D0)
  lw    V0, lo(D_801119D0)(V0)
  bnez  V0, L8010359C
   li    A0, 846
  li    A0, 853
L8010359C:
  jal   func_8007959C
   nop
  lui   V0, hi(D_801136D4)
  lw    V0, lo(D_801136D4)(V0)
  bnez  V0, L801035B8
   li    A0, 13
  li    A0, 25
L801035B8:
  jal   func_80043510
   move  A1, R0
  move  S1, V0
  lhu   V0, 0xa(S1)
  ori   V0, V0, 4
  sh    V0, 0xa(S1)
  jal   func_80056754
   move  A0, S1
  lwc1  F2, 0x10(S0)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F0
  lw    A1, 0xc(S0)
  add.s F0, F2, F0
  mfc1  A2, F0
  lw    A3, 0x14(S0)
  jal   func_800B3160
   addiu A0, S1, 0xc
  lui   V0, hi(D_800C9B80)
  lw    V0, lo(D_800C9B80)(V0)
  lw    A1, 0xc(V0)
  lw    A2, 0x10(V0)
  lw    A3, 0x14(V0)
  jal   func_800B3160
   addiu A0, SP, 0x10
  li    AT, 0x41700000 ;15.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0x30(S1)
  move  A0, S1
  jal   func_80049ED4
   move  A1, R0
  move  S2, V0
  li    AT, 0x3DCC0000 ;0.099609
  ori AT, AT, 0xcccd
  mtc1  AT, F0
  nop
  swc1  F0, 0x18(S2)
  mtc1  R0, F20
  move  S0, R0
  li    AT, 0x3F000000 ;0.500000
  mtc1  AT, F22
L8010365C:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S1, 0x24
  jal   func_8007DA44
   add.s F20, F20, F22
  addiu S0, S0, 1
  slti  V0, S0, 6
  bnez  V0, L8010365C
   nop
  move  S0, R0
  li    AT, 0x3ECC0000 ;0.398438
  ori AT, AT, 0xcccd
  mtc1  AT, F22
L8010369C:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S1, 0x24
  jal   func_8007DA44
   sub.s F20, F20, F22
  addiu S0, S0, 1
  slti  V0, S0, 3
  bnez  V0, L8010369C
   nop
  jal   func_8007D9E0
   li    A0, 20
  jal   func_8007959C
   li    A0, 812
  mtc1  R0, F22
  lw    V0, 0x24(S3)
  lwc1  F2, 0x10(V0)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F0
  lw    A1, 0xc(V0)
  sub.s F0, F2, F0
  mfc1  A2, F0
  lw    A3, 0x14(V0)
  jal   func_800B3160
   addiu A0, SP, 0x10
  addiu A2, S1, 0xc
  move  A0, A2
  addiu A1, SP, 0x10
  jal   func_80056D80
   li    A3, 40
  move  S0, R0
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  li    AT, 0x3D4C0000 ;0.049805
  ori AT, AT, 0xcccd
  mtc1  AT, F26
  mtc1  R0, F24
L80103738:
  lw    V0, 0x3c(S1)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B39F0
   addiu A0, A0, 0x74
  sub.s F20, F20, F26
  c.lt.s F20, F24
  nop
  nop
  bc1f  L80103788
   add.s F22, F22, F28
  mov.s F20, F24
L80103788:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S1, 0x24
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0x28
  bnez  V0, L80103738
   nop
  jal   func_8004430C
   move  A0, S1
  jal   func_80049F90
   move  A0, S2
  lw    A0, 0x24(S3)
  jal   func_8005670C
   addiu A0, A0, 0x18
  lui   V0, hi(D_801136D4)
  lw    V0, lo(D_801136D4)(V0)
  bnez  V0, L801038D0
   li    A0, -1
  jal   func_80067170
   li    A1, 5
  lui   V0, hi(D_801119D0)
  lw    V0, lo(D_801119D0)(V0)
  beqz  V0, L80103808
   nop
  jal   func_80079428
   li    A0, 92
  j     L80103810
   nop
L80103808:
  jal   func_80079390
   li    A0, 92
L80103810:
  lui   A0, hi(D_800F93C6)
  addiu A0, A0, lo(D_800F93C6)
  lh    V1, 0(A0)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   V1, hi(p1_stars)
  addu  V1, V1, V0
  lhu   V1, lo(p1_stars)(V1)
  addiu V1, V1, 1
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  sh    V1, lo(p1_stars)(AT)
  lh    V1, 0(A0)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V1, V0, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  slti  V0, V0, 0x64
  bnez  V0, L8010388C
   li    A0, -1
  li    V0, 99
  lui   AT, hi(p1_stars)
  addu  AT, AT, V1
  sh    V0, lo(p1_stars)(AT)
L8010388C:
  li    A1, 6
  jal   func_8005DD68
   move  A2, R0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 245
  j     L80103928
   nop
L801038D0:
  jal   func_80067170
   li    A1, 5
  jal   func_80079428
   li    A0, 93
  li    A0, -1
  li    A1, 3
  jal   func_8005DD68
   move  A2, R0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 273
  jal   func_8007D9E0
   li    A0, 30
L80103928:
  jal   func_8007D9E0
   li    A0, 60
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x30(SP)
  lw    S3, 0x2c(SP)
  lw    S2, 0x28(SP)
  lw    S1, 0x24(SP)
  lw    S0, 0x20(SP)
  ldc1  F28, 0x58(SP)
  ldc1  F26, 0x50(SP)
  ldc1  F24, 0x48(SP)
  ldc1  F22, 0x40(SP)
  ldc1  F20, 0x38(SP)
  jr    RA
   addiu SP, SP, 0x60

func_80103968:
  addiu SP, SP, -0x20
/*  */  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S1, A0
  lui   AT, hi(D_800FC734)
  sh    R0, lo(D_800FC734)(AT)
  lui   AT, hi(D_801136D4)
  sw    R0, lo(D_801136D4)(AT)
  lui   A0, hi(func_80103548)
  addiu A0, A0, lo(func_80103548)
  li    A1, 18432
  move  A2, R0
  jal   InitProcess
   move  A3, R0
  move  S0, V0
  jal   func_8007D838
   sw    S1, 0x8c(S0)
  move  A0, V0
  jal   func_8007D700
   move  A1, S0
  jal   func_8007D7E8
   nop
  li    V0, 1
  lui   AT, hi(D_800FC734)
  sh    V0, lo(D_800FC734)(AT)
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_801039E4:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S1, A0
  lui   AT, hi(D_800FC734)
  sh    R0, lo(D_800FC734)(AT)
  li    V0, 1
  lui   AT, hi(D_801136D4)
  sw    V0, lo(D_801136D4)(AT)
  lui   A0, hi(func_80103548)
  addiu A0, A0, lo(func_80103548)
  li    A1, 18432
  move  A2, R0
  jal   InitProcess
   move  A3, R0
  move  S0, V0
  jal   func_8007D838
   sw    S1, 0x8c(S0)
  move  A0, V0
  jal   func_8007D700
   move  A1, S0
  jal   func_8007D7E8
   nop
  li    V0, 1
  lui   AT, hi(D_800FC734)
  sh    V0, lo(D_800FC734)(AT)
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

; View map?
__PP64_INTERNAL_VIEW_MAP:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  li    S0, 1
  lui   AT, hi(D_800FA198)
  sh    S0, lo(D_800FA198)(AT) ; set 1 to indicate map is being viewed?
  lui   AT, hi(D_800FC734)
  jal   func_8007D838
   sh    R0, lo(D_800FC734)(AT)
  move  A0, V0
  jal   func_80076B44
   li    A1, 128
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_controller)
  addu  A0, A0, V0
  jal   func_80067C6C
   lbu   A0, lo(p1_controller)(A0)
  jal   func_8007D838
   nop
  move  A0, V0
  jal   func_80076B70
   li    A1, 128
  lui   AT, hi(D_800FA198)
  sh    R0, lo(D_800FA198)(AT)
  lui   AT, hi(D_800FC734)
  sh    S0, lo(D_800FC734)(AT)
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80103AF4:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  li    S0, 1
  lui   AT, hi(D_800FA198)
  sh    S0, lo(D_800FA198)(AT)
  lui   AT, hi(D_800FC734)
  jal   func_8007D838
   sh    R0, lo(D_800FC734)(AT)
  move  A0, V0
  jal   func_80076B44
   li    A1, 128
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_controller)
  addu  A0, A0, V0
  jal   func_80067C6C
   lbu   A0, lo(p1_controller)(A0)
  lui   AT, hi(D_800FA198)
  sh    R0, lo(D_800FA198)(AT)
  lui   AT, hi(D_800FC734)
  sh    S0, lo(D_800FC734)(AT)
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80103B70:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   GetRandomByte
   nop
  andi  V0, V0, 0xff
  mtc1  V0, F0
  nop
  cvt.s.w F0, F0
  li    AT, 0x43800000 ;256.000000
  mtc1  AT, F2
  nop
  div.s F0, F0, F2
  li    AT, 0x42C80000 ;100.000000
  mtc1  AT, F2
  nop
  mul.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  V0, F2
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80103CF4:
  addiu SP, SP, -0x48
  sw    RA, 0x40(SP)
  sw    S5, 0x3c(SP)
  sw    S4, 0x38(SP)
  sw    S3, 0x34(SP)
  sw    S2, 0x30(SP)
  sw    S1, 0x2c(SP)
  sw    S0, 0x28(SP)
  move  S5, A0
  move  S2, R0
  lui   A1, hi(D_80113590)
  addiu A1, A1, lo(D_80113590)
  lwl   V0, 0(A1)
  lwr   V0, 3(A1)
  swl   V0, 0x20(SP)
  swr   V0, 0x23(SP)
  move  S1, R0
  lui   S4, hi(D_800F93C6)
  addiu S4, S4, lo(D_800F93C6)
  addiu S3, SP, 0x18
L80103D44:
  lh    V0, 0(S4)
  bne   S1, V0, L80103E10
   sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(D_800FD2C6)
  addu  AT, AT, V0
  lhu   V0, lo(D_800FD2C6)(AT)
  andi  V0, V0, 1
  beqz  V0, L80103DBC
   sll   S0, S1, 1
  jal   func_8011155C
   addiu S1, S1, 1
  move  S2, V0
  lh    V1, 0(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, 1024
  j     L80103E3C
   sh    V1, 0(V0)
L80103DBC:
  addu  S0, S0, S1
  sll   S0, S0, 2
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  addu  V0, SP, V0
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  lbu   A1, 0x20(V0)
  jal   func_8008D59C
   addiu S1, S1, 1
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, -1
  j     L80103E3C
   sh    V1, 0(V0)
L80103E10:
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S3
  sh    R0, 0(V0)
  addiu S1, S1, 1
L80103E3C:
  slti  V0, S1, 4
  bnez  V0, L80103D44
   nop
  beqz  S2, L80103EFC
   li    A1, 2
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_80089284
   li    A2, 2
  move  S0, R0
  addiu S1, SP, 0x18
L80103E68:
  addiu S2, S2, -1
  bnez  S2, L80103EAC
   nop
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S1
  li    V1, -32768
  sh    V1, 0(V0)
L80103EAC:
  bnez  S0, L80103ED4
   li    V0, 16
  jal   func_80057718
   nop
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  j     L80103EE4
   andi  V0, V0, 0xff
L80103ED4:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
L80103EE4:
  jal   func_8008CFD0
   sw    V0, 0x10(SP)
  bnez  S2, L80103E68
   addiu S0, S0, 1
  j     L80103F14
   move  S1, R0
L80103EFC:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  jal   func_8008D07C
   move  S1, R0
L80103F14:
  addu  V0, S5, S1
L80103F18:
  lbu   V0, 0(V0)
  bnel  V0, R0, L80103F3C
   addiu S1, S1, 1
  sll   A1, S1, 0x10
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_8008D854
   sra   A1, A1, 0x10
  addiu S1, S1, 1
L80103F3C:
  slti  V0, S1, 2
  bnez  V0, L80103F18
   addu  V0, S5, S1
  move  S1, R0
  li    S0, -1
  sll   A1, S1, 0x10
L80103F54:
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  sra   A1, A1, 0x10
  jal   func_8008BB48
   move  A2, R0
  move  S1, V0
  beq   S1, S0, L80103F88
   addu  V0, S5, S1
  lbu   V0, 0(V0)
  beqz  V0, L80103F54
   sll   A1, S1, 0x10
  j     L80103F8C
   move  V0, S1
L80103F88:
  li    V0, -1
L80103F8C:
  lw    RA, 0x40(SP)
  lw    S5, 0x3c(SP)
  lw    S4, 0x38(SP)
  lw    S3, 0x34(SP)
  lw    S2, 0x30(SP)
  lw    S1, 0x2c(SP)
  lw    S0, 0x28(SP)
  jr    RA
   addiu SP, SP, 0x48

__PP64_INTERNAL_RAND_MESSAGE_CHOICE:
func_80103FB0:
  addiu SP, SP, -0x40
  sw    RA, 0x38(SP)
  sw    S3, 0x34(SP)
  sw    S2, 0x30(SP)
  sw    S1, 0x2c(SP)
  sw    S0, 0x28(SP)
  move  S2, R0
  lui   A1, hi(D_80113590)
  addiu A1, A1, lo(D_80113590)
  lwl   V0, 0(A1)
  lwr   V0, 3(A1)
  swl   V0, 0x20(SP)
  swr   V0, 0x23(SP)
  move  S1, R0
  addiu S3, SP, 0x18
L80103FEC:
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  bne   S1, V0, L801040A4
   sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   S0, V0, 2
  lui   V0, hi(D_800FD2C6)
  addu  V0, V0, S0
  lhu   V0, lo(D_800FD2C6)(V0)
  andi  V0, V0, 1
  beql  V0, R0, L80104050
   sll   S0, S1, 1
  jal   func_801118D8
   addiu S1, S1, 1
  move  S2, V0
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, 1024
  j     L801040D0
   sh    V1, 0(V0)
L80104050:
  addu  S0, S0, S1
  sll   S0, S0, 2
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  addu  V0, SP, V0
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  lbu   A1, 0x20(V0)
  jal   func_8008D59C
   addiu S1, S1, 1
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, -1
  j     L801040D0
   sh    V1, 0(V0)
L801040A4:
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S3
  sh    R0, 0(V0)
  addiu S1, S1, 1
L801040D0:
  slti  V0, S1, 4
  bnez  V0, L80103FEC
   nop
  beqz  S2, L80104190
   li    A1, 2
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_80089284
   li    A2, 2
  move  S0, R0
  addiu S1, SP, 0x18
L801040FC:
  addiu S2, S2, -1
  bnez  S2, L80104140
   nop
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S1
  li    V1, -32768
  sh    V1, 0(V0)
L80104140:
  bnez  S0, L80104168
   li    V0, 16
  jal   func_80057718
   nop
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  j     L80104178
   andi  V0, V0, 0xff
L80104168:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
L80104178:
  jal   func_8008CFD0
   sw    V0, 0x10(SP)
  bnez  S2, L801040FC
   addiu S0, S0, 1
  j     L801041A4
   nop
L80104190:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  jal   func_8008D07C
   lh    A3, 0x1e(SP)
L801041A4:
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  move  A1, R0
  jal   func_8008BB48
   li    A2, 1
  lw    RA, 0x38(SP)
  lw    S3, 0x34(SP)
  lw    S2, 0x30(SP)
  lw    S1, 0x2c(SP)
  lw    S0, 0x28(SP)
  jr    RA
   addiu SP, SP, 0x40

func_801041D4:
  addiu SP, SP, -0x40
  sw    RA, 0x38(SP)
  sw    S3, 0x34(SP)
  sw    S2, 0x30(SP)
  sw    S1, 0x2c(SP)
  sw    S0, 0x28(SP)
  move  S3, R0
  lui   A1, hi(D_80113590)
  addiu A1, A1, lo(D_80113590)
  lwl   V0, 0(A1)
  lwr   V0, 3(A1)
  swl   V0, 0x20(SP)
  swr   V0, 0x23(SP)
  move  S1, R0
  addiu S2, SP, 0x18
L80104210:
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  bne   S1, V0, L801042C0
   sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V1, V0, 2
  lui   V0, hi(D_800FD2C6)
  addu  V0, V0, V1
  lhu   V0, lo(D_800FD2C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L8010426C
   sll   S0, S1, 1
  li    S3, 1
  lui   V0, hi(p1_controller)
  addu  V0, V0, V1
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S2
  li    V1, -32768
  j     L801042E8
   sh    V1, 0(V0)
L8010426C:
  addu  S0, S0, S1
  sll   S0, S0, 2
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  addu  V0, SP, V0
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  lbu   A1, 0x20(V0)
  jal   func_8008D59C
   addiu S1, S1, 1
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S2
  li    V1, -1
  j     L801042EC
   sh    V1, 0(V0)
L801042C0:
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S2
  sh    R0, 0(V0)
L801042E8:
  addiu S1, S1, 1
L801042EC:
  slti  V0, S1, 4
  bnez  V0, L80104210
   nop
  beqz  S3, L8010433C
   li    A1, 2
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_80089284
   li    A2, 2
  jal   func_80057718
   nop
  andi  V0, V0, 0xff
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  jal   func_8008CFD0
   sw    V0, 0x10(SP)
  j     L80104350
   nop
L8010433C:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  jal   func_8008D07C
   lh    A3, 0x1e(SP)
L80104350:
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  move  A1, R0
  jal   func_8008BB48
   li    A2, 1
  lw    RA, 0x38(SP)
  lw    S3, 0x34(SP)
  lw    S2, 0x30(SP)
  lw    S1, 0x2c(SP)
  lw    S0, 0x28(SP)
  jr    RA
   addiu SP, SP, 0x40

func_80104380:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  V1, R0
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
L8010439C:
  beq   V1, A0, L801043C8
   sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  bnez  V0, L801043D8
   li    V0, 4
L801043C8:
  addiu V1, V1, 1
  slti  V0, V1, 4
  bnez  V0, L8010439C
   li    V0, 4
L801043D8:
  beq   V1, V0, L80104534
   nop
  lui   A0, hi(D_800F93C6)
  addiu A0, A0, lo(D_800F93C6)
  lh    V0, 0(A0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0x32
  bnez  V0, L80104534
   nop
  lh    V1, -0x18(A0)
  lh    V0, -0x16(A0)
  beq   V1, V0, L801045A4
   li    V0, 1
  lui   V0, hi(D_800F93B0)
  lh    V0, lo(D_800F93B0)(V0)
  slti  V0, V0, 0xa
  beqz  V0, L80104444
   nop
  j     L8010445C
   move  S1, R0
L80104444:
  lui   V0, hi(D_800F93B0)
  lh    V0, lo(D_800F93B0)(V0)
  slti  V0, V0, 0x1e
  beqz  V0, L8010445C
   li    S1, 2
  li    S1, 1
L8010445C:
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0x3d
  bnez  V0, L80104500
   move  S0, R0
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0x47
  bnez  V0, L80104500
   li    S0, 1
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0x65
  xori  V0, V0, 1
  subu V0, R0, V0
  andi  V0, V0, 3
  ori   S0, V0, 2
L80104500:
  jal   func_80103B70
   nop
  lui   A0, hi(D_801119D4)
  addiu A0, A0, lo(D_801119D4)
  sll   V1, S1, 2
  addu  V1, V1, A0
  addu  V1, V1, S0
  lbu   V1, 0(V1)
  slt   V0, V0, V1
  beqz  V0, L80104548
   li    V0, 1
  lui   AT, hi(D_80113710)
  sw    V0, lo(D_80113710)(AT)
L80104534:
  lui   V1, hi(D_80113710)
  lw    V1, lo(D_80113710)(V1)
  li    V0, 1
  beq   V1, V0, L801045AC
   nop
L80104548:
  move  V1, R0
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
L80104554:
  beq   V1, A0, L80104580
   sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  bnez  V0, L80104590
   li    V0, 4
L80104580:
  addiu V1, V1, 1
  slti  V0, V1, 4
  bnez  V0, L80104554
   li    V0, 4
L80104590:
  beq   V1, V0, L801045A4
   li    V0, 2
  lui   AT, hi(D_80113710)
  j     L801045AC
   sw    R0, lo(D_80113710)(AT)
L801045A4:
  lui   AT, hi(D_80113710)
  sw    V0, lo(D_80113710)(AT)
L801045AC:
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_801045C0:
  addiu SP, SP, -0x38
  sw    RA, 0x34(SP)
  sw    S4, 0x30(SP)
  sw    S3, 0x2c(SP)
  sw    S2, 0x28(SP)
  sw    S1, 0x24(SP)
  sw    S0, 0x20(SP)
  lui   A1, hi(D_80113594)
  addiu A1, A1, lo(D_80113594)
  lw    V0, 0(A1)
  lw    V1, 4(A1)
  lw    A0, 8(A1)
  sw    V0, 0x10(SP)
  sw    V1, 0x14(SP)
  sw    A0, 0x18(SP)
  lw    V0, 0xc(A1)
  sw    V0, 0x1c(SP)
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  lui   V1, hi(D_80113700)
  lw    V1, lo(D_80113700)(V1)
  beq   V0, V1, L80104644
   sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A2, hi(p1_coins)
  addu  A2, A2, V0
  lh    A2, lo(p1_coins)(A2)
  li    S1, 1
  j     L80104678
   sw    S1, 0x10(SP)
L80104644:
  lui   V0, hi(D_80113704)
  lw    V0, lo(D_80113704)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   A2, hi(p1_coins)
  addu  A2, A2, V1
  lh    A2, lo(p1_coins)(A2)
  li    S1, 2
  li    V0, 1
  sw    V0, 0x14(SP)
L80104678:
  slti  V0, S1, 4
  beqz  V0, L801046F8
   li    S2, 4
  lui   T2, hi(D_800F93C6)
  addiu T2, T2, lo(D_800F93C6)
  lui   T1, hi(D_80113700)
  addiu T1, T1, lo(D_80113700)
  addiu A3, SP, 0x10
  li    T0, 1
L8010469C:
  lh    V1, 0(T2)
  sll   A1, S1, 2
  addu  V0, A1, T1
  lw    A0, 0(V0)
  beq   V1, A0, L801046E8
   sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  addiu V0, V0, 5
  slt   V0, V0, A2
  bnel  V0, R0, L801046EC
   addiu S1, S1, 1
  addu  V0, A1, A3
  sw    T0, 0(V0)
L801046E8:
  addiu S1, S1, 1
L801046EC:
  slti  V0, S1, 4
  bnez  V0, L8010469C
   li    S2, 4
L801046F8:
  move  S1, R0
  addiu S3, SP, 0x10
  lui   S4, hi(D_80113700)
  addiu S4, S4, lo(D_80113700)
  sll   A0, S1, 2
L8010470C:
  addu  V0, A0, S3
  lw    V0, 0(V0)
  beqz  V0, L80104744
   addu  S0, A0, S4
  lw    A0, 0(S0)
  jal   func_80059FD0
   nop
  slt   V0, V0, S2
  beql  V0, R0, L80104748
   addiu S1, S1, 1
  lw    A0, 0(S0)
  jal   func_80059FD0
   nop
  move  S2, V0
L80104744:
  addiu S1, S1, 1
L80104748:
  slti  V0, S1, 4
  bnez  V0, L8010470C
   sll   A0, S1, 2
  move  V0, S2
  lw    RA, 0x34(SP)
  lw    S4, 0x30(SP)
  lw    S3, 0x2c(SP)
  lw    S2, 0x28(SP)
  lw    S1, 0x24(SP)
  lw    S0, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x38

func_80104778:
  addiu SP, SP, -0x30
  sw    RA, 0x28(SP)
  sw    S1, 0x24(SP)
  jal   func_80103B70
/*  */   sw    S0, 0x20(SP)
  lui   S0, hi(D_80113710)
  lw    S0, lo(D_80113710)(S0)
  beqz  S0, L80104AD4
   move  S1, V0
  li    V0, 1
  bne   S0, V0, L80104F68
   nop
  lui   A0, hi(D_800F93AE)
  addiu A0, A0, lo(D_800F93AE)
  lh    V1, 0(A0)
  lh    V0, 2(A0)
  addiu V0, V0, 5
  slt   V1, V1, V0
  beqz  V1, L80104948
   nop
  jal   func_80059FD0
   lh    A0, 0x18(A0)
  move  V1, V0
  beq   V1, S0, L80104880
   slti  V0, V1, 2
  beql  V0, R0, L801047F4
   li    V0, 2
  beqz  V1, L8010480C
   slti  V0, S1, 0x5f
  j     L80104F68
   nop
L801047F4:
  beq   V1, V0, L801048C4
   li    V0, 3
  beq   V1, V0, L80104908
   slti  V0, S1, 0x5f
  j     L80104F68
   nop
L8010480C:
  bnez  V0, L80104DD8
   li    V0, 1
  lui   V0, hi(D_801136F8)
  lw    V0, lo(D_801136F8)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  slti  V0, V0, 2
  beqz  V0, L80104DD8
   li    V0, 1
  lui   V0, hi(D_801136F8)
  lw    V0, lo(D_801136F8)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104A44
   li    V0, 2
  j     L80104DD8
   li    V0, 1
L80104880:
  slti  V0, S1, 0x5f
  bnez  V0, L80104EF4
   nop
  lui   V0, hi(D_801136F8)
  lw    V0, lo(D_801136F8)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104A44
   li    V0, 2
  j     L80104EF4
   nop
L801048C4:
  slti  V0, S1, 0x5f
  bnez  V0, L80104EF4
   nop
  lui   V0, hi(D_801136F4)
  lw    V0, lo(D_801136F4)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104DD8
   li    V0, 1
  j     L80104EF4
   nop
L80104908:
  bnez  V0, L80104EF4
   nop
  lui   V0, hi(D_801136F4)
  lw    V0, lo(D_801136F4)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104DD8
   li    V0, 1
  j     L80104EF4
   nop
L80104948:
  lui   A0, hi(D_800F93C6)
  jal   func_80059FD0
   lh    A0, lo(D_800F93C6)(A0)
  move  V1, V0
  li    V0, 1
  beq   V1, V0, L80104A08
   slti  V0, V1, 2
  beql  V0, R0, L8010497C
   li    V0, 2
  beqz  V1, L80104994
   slti  V0, S1, 0x50
  j     L80104F68
   nop
L8010497C:
  beq   V1, V0, L80104A50
   li    V0, 3
  beq   V1, V0, L80104A94
   slti  V0, S1, 0x5f
  j     L80104F68
   nop
L80104994:
  bnez  V0, L80104DD8
   li    V0, 1
  lui   V0, hi(D_801136F8)
  lw    V0, lo(D_801136F8)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  slti  V0, V0, 2
  beqz  V0, L80104DD8
   li    V0, 1
  lui   V0, hi(D_801136F8)
  lw    V0, lo(D_801136F8)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104A44
   li    V0, 2
  j     L80104DD8
   li    V0, 1
L80104A08:
  slti  V0, S1, 0x5a
  bnez  V0, L80104EF4
   nop
  lui   V0, hi(D_801136F8)
  lw    V0, lo(D_801136F8)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  beqz  V0, L80104EF4
   li    V0, 2
L80104A44:
  lui   AT, hi(D_80113718)
  j     L80104F68
   sw    V0, lo(D_80113718)(AT)
L80104A50:
  slti  V0, S1, 0x5a
  bnez  V0, L80104EF4
   nop
  lui   V0, hi(D_801136F4)
  lw    V0, lo(D_801136F4)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104DD8
   li    V0, 1
  j     L80104EF4
   nop
L80104A94:
  bnez  V0, L80104EF4
   nop
  lui   V0, hi(D_801136F4)
  lw    V0, lo(D_801136F4)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104DD8
   li    V0, 1
  j     L80104EF4
   nop
L80104AD4:
  move  V1, R0
  move  S0, R0
  addiu A0, SP, 0x10
  sll   V0, V1, 2
L80104AE4:
  addu  V0, V0, A0
  sw    R0, 0(V0)
  addiu V1, V1, 1
  slti  V0, V1, 4
  bnel  V0, R0, L80104AE4
   sll   V0, V1, 2
  beqz  S0, L80104B50
   nop
  lui   V0, hi(D_800F93AE)
  addiu V0, V0, lo(D_800F93AE)
  lh    V1, 0(V0)
  lh    V0, 2(V0)
  beq   V1, V0, L80104B50
   addiu V0, V0, 5
  slt   V0, V1, V0
  beqz  V0, L80104B3C
   nop
  jal   func_80103B70
   nop
  slti  V0, V0, 0x50
  bnez  V0, L80104B50
   nop
L80104B3C:
  jal   func_80103B70
   nop
  slti  V0, V0, 0x28
  beqz  V0, L80104F20
   move  V1, R0
L80104B50:
  lui   A0, hi(D_800F93AE)
  addiu A0, A0, lo(D_800F93AE)
  lh    V1, 0(A0)
  lh    V0, 2(A0)
  addiu V0, V0, 5
  slt   V1, V1, V0
  beqz  V1, L80104D30
   nop
  jal   func_80059FD0
   lh    A0, 0x18(A0)
  bnez  V0, L80104C18
   nop
  lui   V0, hi(D_801136F4)
  lw    V0, lo(D_801136F4)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  beqz  V0, L80104F00
   nop
  lui   A0, hi(D_801136F0)
  addiu A0, A0, lo(D_801136F0)
  lw    V0, 0(A0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lw    A0, 4(A0)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V1
  lh    V1, lo(p1_stars)(AT)
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  beq   V1, V0, L80104DD4
   slti  V0, S1, 0x55
  bnez  V0, L80104DD8
   li    V0, 1
  j     L80104F00
   nop
L80104C18:
  lui   V0, hi(D_801136F0)
  lw    V0, lo(D_801136F0)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  beqz  V0, L80104F00
   nop
  lui   A1, hi(D_801136F0)
  addiu A1, A1, lo(D_801136F0)
  lw    V1, 0(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_stars)
  addu  A0, A0, V0
  lh    A0, lo(p1_stars)(A0)
  addiu A0, A0, -1
  lw    V1, 4(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  slt   V0, V0, A0
  bnez  V0, L80104CB8
   slti  V0, S1, 0x50
  beqz  V0, L80104F00
   nop
  j     L80104EF4
   nop
L80104CB8:
  lw    V1, 0(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_stars)
  addu  A0, A0, V0
  lh    A0, lo(p1_stars)(A0)
  addiu A0, A0, -2
  lw    V1, 4(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  bne   A0, V0, L80104D20
   slti  V0, S1, 0x5f
  slti  V0, S1, 0x55
  beqz  V0, L80104F00
   nop
  j     L80104EF4
   nop
L80104D20:
  beqz  V0, L80104F00
   nop
  j     L80104EF4
   nop
L80104D30:
  lui   A0, hi(D_800F93C6)
  jal   func_80059FD0
   lh    A0, lo(D_800F93C6)(A0)
  bnez  V0, L80104DE4
   nop
  lui   V0, hi(D_801136F4)
  lw    V0, lo(D_801136F4)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  beqz  V0, L80104F00
   nop
  lui   A0, hi(D_801136F0)
  addiu A0, A0, lo(D_801136F0)
  lw    V0, 0(A0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lw    A0, 4(A0)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V1
  lh    V1, lo(p1_stars)(AT)
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  beq   V1, V0, L80104DD4
   slti  V0, S1, 0x23
  beqz  V0, L80104F00
   nop
L80104DD4:
  li    V0, 1
L80104DD8:
  lui   AT, hi(D_80113718)
  j     L80104F68
   sw    V0, lo(D_80113718)(AT)
L80104DE4:
  lui   V0, hi(D_801136F0)
  lw    V0, lo(D_801136F0)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  beqz  V0, L80104F00
   nop
  lui   A1, hi(D_801136F0)
  addiu A1, A1, lo(D_801136F0)
  lw    V1, 0(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_stars)
  addu  A0, A0, V0
  lh    A0, lo(p1_stars)(A0)
  addiu A0, A0, -1
  lw    V1, 4(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  slt   V0, V0, A0
  bnez  V0, L80104E84
   slti  V0, S1, 0x3c
  beqz  V0, L80104F00
   nop
  j     L80104EF4
   nop
L80104E84:
  lw    V1, 0(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_stars)
  addu  A0, A0, V0
  lh    A0, lo(p1_stars)(A0)
  addiu A0, A0, -2
  lw    V1, 4(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  bne   A0, V0, L80104EEC
   slti  V0, S1, 0x50
  slti  V0, S1, 0x4b
  beqz  V0, L80104F00
   nop
  j     L80104EF4
   nop
L80104EEC:
  beqz  V0, L80104F00
   nop
L80104EF4:
  lui   AT, hi(D_80113718)
  j     L80104F68
   sw    R0, lo(D_80113718)(AT)
L80104F00:
  jal   func_801045C0
   nop
  lui   AT, hi(D_80113718)
  j     L80104F68
   sw    V0, lo(D_80113718)(AT)
L80104F14:
  lui   AT, hi(D_80113718)
  j     L80104F68
   sw    V1, lo(D_80113718)(AT)
L80104F20:
  lui   A1, hi(D_801136F0)
  addiu A1, A1, lo(D_801136F0)
  addiu A0, SP, 0x10
  sll   V0, V1, 2
L80104F30:
  addu  V0, V0, A1
  lw    V0, 0(V0)
  sll   V0, V0, 2
  addu  V0, V0, A0
  lw    V0, 0(V0)
  beql  V0, R0, L80104F5C
   addiu V1, V1, 1
  addiu S0, S0, -1
  beqz  S0, L80104F14
   nop
  addiu V1, V1, 1
L80104F5C:
  slti  V0, V1, 4
  bnez  V0, L80104F30
   sll   V0, V1, 2
L80104F68:
  lw    RA, 0x28(SP)
  lw    S1, 0x24(SP)
  lw    S0, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x30

func_80104F7C:
  addiu SP, SP, -0x48
  sw    RA, 0x44(SP)
  sw    S4, 0x40(SP)
  sw    S3, 0x3c(SP)
  sw    S2, 0x38(SP)
  sw    S1, 0x34(SP)
  sw    S0, 0x30(SP)
  move  S0, R0
  addiu V1, SP, 0x10
  sll   V0, S0, 2
L80104FA4:
  addu  V0, V0, V1
  sw    R0, 0(V0)
  sw    R0, 0x10(V0)
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L80104FA4
   sll   V0, S0, 2
  move  S0, R0
  addiu S2, SP, 0x10
L80104FC8:
  jal   func_80059FD0
   move  A0, S0
  sll   V0, V0, 2
  addu  V0, V0, S2
  lw    V1, 0(V0)
  addiu V1, V1, 1
  sw    V1, 0(V0)
  move  S1, R0
  move  A0, R0
  sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   A1, V0, 2
L80105000:
  beq   S0, A0, L80105038
   sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   V1, hi(p1_coins)
  addu  V1, V1, A1
  lh    V1, lo(p1_coins)(V1)
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V1, V1, V0
  addu  S1, S1, V1
L80105038:
  addiu A0, A0, 1
  slti  V0, A0, 4
  bnez  V0, L80105000
   sll   V0, S1, 2
  addu  V0, V0, S2
  lw    V1, 0x10(V0)
  addiu V1, V1, 1
  sw    V1, 0x10(V0)
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L80104FC8
   li    A0, -1
  move  S0, R0
  lui   A2, hi(D_801136F0)
  addiu A2, A2, lo(D_801136F0)
  lui   A1, hi(D_80113700)
  addiu A1, A1, lo(D_80113700)
  sll   V0, S0, 2
L80105080:
  addu  V1, V0, A2
  sw    A0, 0(V1)
  addu  V0, V0, A1
  sw    A0, 0(V0)
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L80105080
   sll   V0, S0, 2
  move  S0, R0
  lui   S4, hi(D_801136F0)
  addiu S4, S4, lo(D_801136F0)
  li    S2, -1
  lui   S3, hi(D_80113700)
  addiu S3, S3, lo(D_80113700)
L801050B8:
  jal   func_80059FD0
   move  A0, S0
  move  A0, V0
L801050C4:
  sll   V0, A0, 2
  addu  V0, V0, S4
  lw    V0, 0(V0)
  beq   V0, S2, L801050E0
   sll   V0, A0, 2
  j     L801050C4
   addiu A0, A0, 1
L801050E0:
  addu  V0, V0, S4
  sw    S0, 0(V0)
  move  S1, R0
  move  A0, R0
  sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   A1, V0, 2
L80105104:
  beq   S0, A0, L8010513C
   sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   V1, hi(p1_coins)
  addu  V1, V1, A1
  lh    V1, lo(p1_coins)(V1)
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V1, V1, V0
  addu  S1, S1, V1
L8010513C:
  addiu A0, A0, 1
  slti  V0, A0, 4
  bnez  V0, L80105104
   nop
L8010514C:
  sll   V0, S1, 2
  addu  V0, V0, S3
  lw    V0, 0(V0)
  beq   V0, S2, L80105168
   sll   V0, S1, 2
  j     L8010514C
   addiu S1, S1, 1
L80105168:
  addu  V0, V0, S3
  sw    S0, 0(V0)
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L801050B8
   nop
  li    S0, -1
  lui   AT, hi(D_80113718)
  sw    S0, lo(D_80113718)(AT)
  lui   AT, hi(D_80113714)
  sw    S0, lo(D_80113714)(AT)
  lui   AT, hi(D_80113710)
  jal   func_80104380
   sw    S0, lo(D_80113710)(AT)
  lui   V0, hi(D_80113718)
  lw    V0, lo(D_80113718)(V0)
  bne   V0, S0, L801051C4
   move  A0, V0
  jal   func_80104778
   nop
  lui   V0, hi(D_80113718)
  lw    V0, lo(D_80113718)(V0)
  move  A0, V0
L801051C4:
  sll   V0, V0, 2
  addiu V1, SP, 0x10
  addu  V0, V0, V1
  lw    V0, 0(V0)
  bnez  V0, L80105200
   move  A1, V1
  addiu V0, A0, -1
L801051E0:
  lui   AT, hi(D_80113718)
  sw    V0, lo(D_80113718)(AT)
  move  A0, V0
  sll   V0, V0, 2
  addu  V0, V0, A1
  lw    V0, 0(V0)
  beqz  V0, L801051E0
   addiu V0, A0, -1
L80105200:
  lui   A0, hi(D_800F93C6)
  jal   func_80059FD0
   lh    A0, lo(D_800F93C6)(A0)
  move  V1, V0
  lui   V0, hi(D_80113718)
  lw    V0, lo(D_80113718)(V0)
  bne   V1, V0, L80105234
   sll   V0, V1, 2
  addiu V1, SP, 0x10
  addu  V0, V0, V1
  lw    V1, 0(V0)
  addiu V1, V1, -1
  sw    V1, 0(V0)
L80105234:
  jal   GetRandomByte
   move  S0, R0
  andi  S1, V0, 0xff
  lui   V0, hi(D_80113718)
  lw    V0, lo(D_80113718)(V0)
  sll   V0, V0, 2
  addu  V0, SP, V0
  lw    V0, 0x10(V0)
  div   S1, V0
  bnez  V0, L80105264
   nop
  .word 0x0007000D ; break 7
L80105264:
  li    AT, -1
  bne   V0, AT, L8010527C
   lui   AT, 0x8000
  bne   S1, AT, L8010527C
   nop
  .word 0x0006000D ; break 6
L8010527C:
  mfhi  S1
L80105280:
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  beql  S0, V0, L801052C0
   addiu S0, S0, 1
  jal   func_80059FD0
   move  A0, S0
  lui   V1, hi(D_80113718)
  lw    V1, lo(D_80113718)(V1)
  bnel  V1, V0, L801052C0
   addiu S0, S0, 1
  bnel  S1, R0, L801052BC
   addiu S1, S1, -1
  lui   AT, hi(D_80113714)
  j     L801052CC
   sw    S0, lo(D_80113714)(AT)
L801052BC:
  addiu S0, S0, 1
L801052C0:
  slti  V0, S0, 4
  bnez  V0, L80105280
   nop
L801052CC:
  lui   V0, hi(D_80113710)
  lw    V0, lo(D_80113710)(V0)
  bnez  V0, L8010535C
   nop
  lui   V0, hi(D_80113714)
  lw    V0, lo(D_80113714)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  bnez  V0, L8010535C
   move  S0, R0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
L80105314:
  beq   S0, V1, L8010534C
   sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  beql  V0, R0, L80105350
   addiu S0, S0, 1
  lui   AT, hi(D_80113714)
  j     L8010535C
   sw    S0, lo(D_80113714)(AT)
L8010534C:
  addiu S0, S0, 1
L80105350:
  slti  V0, S0, 4
  bnez  V0, L80105314
   nop
L8010535C:
  lw    RA, 0x44(SP)
  lw    S4, 0x40(SP)
  lw    S3, 0x3c(SP)
  lw    S2, 0x38(SP)
  lw    S1, 0x34(SP)
  lw    S0, 0x30(SP)
  jr    RA
   addiu SP, SP, 0x48

func_8010537C:
  addiu SP, SP, -0x48
  sw    RA, 0x40(SP)
  sw    S5, 0x3c(SP)
  sw    S4, 0x38(SP)
  sw    S3, 0x34(SP)
  sw    S2, 0x30(SP)
  sw    S1, 0x2c(SP)
  sw    S0, 0x28(SP)
  move  S5, A0
  move  S2, R0
  lui   A1, hi(D_80113590)
  addiu A1, A1, lo(D_80113590)
  lwl   V0, 0(A1)
  lwr   V0, 3(A1)
  swl   V0, 0x20(SP)
  swr   V0, 0x23(SP)
  move  S1, R0
  lui   S4, hi(D_800F93C6)
  addiu S4, S4, lo(D_800F93C6)
  addiu S3, SP, 0x18
L801053CC:
  lh    V0, 0(S4)
  bne   S1, V0, L801054A0
   sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(D_800FD2C6)
  addu  AT, AT, V0
  lhu   V0, lo(D_800FD2C6)(AT)
  andi  V0, V0, 1
  beqz  V0, L8010544C
   sll   S0, S1, 1
  jal   func_80104F7C
   addiu S1, S1, 1
  lui   V0, hi(D_80113710)
  lw    V0, lo(D_80113710)(V0)
  addiu S2, V0, 1
  lh    V1, 0(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, 1024
  j     L801054CC
   sh    V1, 0(V0)
L8010544C:
  addu  S0, S0, S1
  sll   S0, S0, 2
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  addu  V0, SP, V0
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  lbu   A1, 0x20(V0)
  jal   func_8008D59C
   addiu S1, S1, 1
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, -1
  j     L801054CC
   sh    V1, 0(V0)
L801054A0:
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S3
  sh    R0, 0(V0)
  addiu S1, S1, 1
L801054CC:
  slti  V0, S1, 4
  bnez  V0, L801053CC
   nop
  beqz  S2, L8010558C
   li    A1, 2
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_80089284
   li    A2, 2
  move  S0, R0
  addiu S1, SP, 0x18
L801054F8:
  addiu S2, S2, -1
  bnez  S2, L8010553C
   nop
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S1
  li    V1, -32768
  sh    V1, 0(V0)
L8010553C:
  bnez  S0, L80105564
   li    V0, 16
  jal   func_80057718
   nop
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  j     L80105574
   andi  V0, V0, 0xff
L80105564:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
L80105574:
  jal   func_8008CFD0
   sw    V0, 0x10(SP)
  bnez  S2, L801054F8
   addiu S0, S0, 1
  j     L801055A4
   move  S1, R0
L8010558C:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  jal   func_8008D07C
   move  S1, R0
L801055A4:
  addu  V0, S5, S1
L801055A8:
  lbu   V0, 0(V0)
  bnel  V0, R0, L801055CC
   addiu S1, S1, 1
  sll   A1, S1, 0x10
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_8008D854
   sra   A1, A1, 0x10
  addiu S1, S1, 1
L801055CC:
  slti  V0, S1, 2
  bnez  V0, L801055A8
   addu  V0, S5, S1
  move  S1, R0
  sll   A1, S1, 0x10
L801055E0:
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  sra   A1, A1, 0x10
  jal   func_8008BB48
   li    A2, 1
  move  S1, V0
  addu  V0, S5, S1
  lbu   V0, 0(V0)
  beqz  V0, L801055E0
   sll   A1, S1, 0x10
  move  V0, S1
  lw    RA, 0x40(SP)
  lw    S5, 0x3c(SP)
  lw    S4, 0x38(SP)
  lw    S3, 0x34(SP)
  lw    S2, 0x30(SP)
  lw    S1, 0x2c(SP)
  lw    S0, 0x28(SP)
  jr    RA
   addiu SP, SP, 0x48

func_80105630:
  addiu SP, SP, -0x40
  sw    RA, 0x3c(SP)
  sw    S4, 0x38(SP)
/*  */  sw    S3, 0x34(SP)
  sw    S2, 0x30(SP)
  sw    S1, 0x2c(SP)
  sw    S0, 0x28(SP)
  move  S4, A1
  move  S2, R0
  lui   A1, hi(D_80113590)
  addiu A1, A1, lo(D_80113590)
  lwl   V0, 0(A1)
  lwr   V0, 3(A1)
  swl   V0, 0x20(SP)
  swr   V0, 0x23(SP)
  move  S1, R0
  addiu S3, SP, 0x18
L80105674:
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  bne   S1, V0, L80105730
   sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V1, V0, 2
  lui   V0, hi(D_800FD2C6)
  addu  V0, V0, V1
  lhu   V0, lo(D_800FD2C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L801056DC
   sll   S0, S1, 1
  lui   S2, hi(D_80113714)
  lw    S2, lo(D_80113714)(S2)
  slt   V0, S2, S1
  addu  S2, S2, V0
  lui   V0, hi(p1_controller)
  addu  V0, V0, V1
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, 1024
  j     L80105758
   sh    V1, 0(V0)
L801056DC:
  addu  S0, S0, S1
  sll   S0, S0, 2
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  addu  V0, SP, V0
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  lbu   A1, 0x20(V0)
  jal   func_8008D59C
   addiu S1, S1, 1
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, -1
  j     L8010575C
   sh    V1, 0(V0)
L80105730:
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S3
  sh    R0, 0(V0)
L80105758:
  addiu S1, S1, 1
L8010575C:
  slti  V0, S1, 4
  bnez  V0, L80105674
   nop
  beqz  S2, L801057F4
   li    A1, 2
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_80089284
   li    A2, 2
  addiu S0, SP, 0x18
  li    S3, -32768
  li    S1, 16
  addiu S2, S2, -1
L80105790:
  bnez  S2, L801057CC
   nop
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_controller)
  addu  V0, V0, V1
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S0
  sh    S3, 0(V0)
L801057CC:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  jal   func_8008CFD0
   sw    S1, 0x10(SP)
  bnez  S2, L80105790
   addiu S2, S2, -1
  j     L8010580C
   move  S1, R0
L801057F4:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  jal   func_8008D07C
   move  S1, R0
L8010580C:
  addu  V0, S4, S1
L80105810:
  lbu   V0, 0(V0)
  bnel  V0, R0, L80105834
   addiu S1, S1, 1
  sll   A1, S1, 0x10
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_8008D854
   sra   A1, A1, 0x10
  addiu S1, S1, 1
L80105834:
  slti  V0, S1, 3
  bnez  V0, L80105810
   addu  V0, S4, S1
  move  S1, R0
  li    S0, -1
  sll   A1, S1, 0x10
L8010584C:
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  sra   A1, A1, 0x10
  jal   func_8008BB48
   move  A2, R0
  move  S1, V0
  beq   S1, S0, L80105880
   addu  V0, S4, S1
  lbu   V0, 0(V0)
  beqz  V0, L8010584C
   sll   A1, S1, 0x10
  j     L80105884
   move  V0, S1
L80105880:
  li    V0, -1
L80105884:
  lw    RA, 0x3c(SP)
  lw    S4, 0x38(SP)
  lw    S3, 0x34(SP)
  lw    S2, 0x30(SP)
  lw    S1, 0x2c(SP)
  lw    S0, 0x28(SP)
  jr    RA
   addiu SP, SP, 0x40

overlaycall0:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
; Declare which board index this is.
li    V0, ${t}
  lui   AT, hi(D_800F93AA)
  sh    V0, lo(D_800F93AA)(AT)
  li    A0, 10
  jal   InitObjSys
   move  A1, R0
  li    A0, 61
  move  A1, R0
  jal   func_800771EC
   li    A2, 402
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

overlaycall1:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  li    A0, 10
  jal   InitObjSys
   move  A1, R0
  move  A0, R0
  move  A1, R0
  jal   SetPlayerOntoChain
   move  A2, R0
  li    A0, 1
  move  A1, R0
  jal   SetPlayerOntoChain
   move  A2, R0
  li    A0, 2
  move  A1, R0
  jal   SetPlayerOntoChain
   move  A2, R0
  li    A0, 3
  move  A1, R0
  jal   SetPlayerOntoChain
   move  A2, R0
  jal   func_8006836C
   li    A0, 67
  jal   func_8010285C
   nop
  lui   V0, hi(D_800F8CE4)
  addiu V0, V0, lo(D_800F8CE4)
  sh    R0, 0(V0) ; clearing bank coins?
  sh    R0, 0x3c(V0)
  sh    R0, 0x3a(V0)
  sh    R0, 0x34(V0)
  sh    R0, 0x32(V0)
  sh    R0, 0x2e(V0)
  jal   func_80077160
   li    A0, 1
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

setup_routine:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  li    A0, 160
  jal   InitObjSys
   li    A1, 40
  li    A0, 1
  li    A1, 100
  li    A2, 100
  jal   func_80026DAC
   li    A3, 100
  li    A0, 2
  li    A1, 200
  li    A2, 200
  jal   func_80026DAC
   li    A3, 200
  JAL   __PP64_INTERNAL_ADDITIONAL_BG_CHOICE
   NOP
  move  A0, V0 ; Determined by user-customizable hook
  li    A1, ${e.boardDefFile}
  li    A2, 8 ; TODO: pauseBgDir?
  jal   func_80062E10 ; setup board?
   move  A3, R0

  lui   A0, hi(D_801119E4)
  addiu A0, A0, lo(D_801119E4)
  jal   func_80055928
   move  S0, R0
  lui   A0, hi(D_801119F4)
  jal   func_80055980
   addiu A0, A0, lo(D_801119F4)

  ; begin arrow rotation
  ${R.join(`
`)}
  ; end arrow rotation

  lui   A1, hi(func_8010BA48) ; boo event
  addiu A1, A1, lo(func_8010BA48)
  jal   func_8004D60C
   move  A0, R0
  lui   A1, hi(func_8010C6DC)
  addiu A1, A1, lo(func_8010C6DC)
  jal   func_8004D60C
   li    A0, 1
  lui   A1, hi(func_8010CA78)
  addiu A1, A1, lo(func_8010CA78)
  jal   func_8004D60C
   li    A0, 8
  lui   A1, hi(func_8010CAE8)
  addiu A1, A1, lo(func_8010CAE8)
  jal   func_8004D60C
   li    A0, 2
  lui   A1, hi(func_8010DE58)
  addiu A1, A1, lo(func_8010DE58)
  jal   func_8004D60C
   li    A0, 3
  lui   A1, hi(func_8010E3D0)
  addiu A1, A1, lo(func_8010E3D0)
  jal   func_8004D60C
   li    A0, 4
  lui   A1, hi(func_8010E640)
  addiu A1, A1, lo(func_8010E640)
  jal   func_8004D60C
   li    A0, 5
  lui   A1, hi(func_8010CFCC)
  addiu A1, A1, lo(func_8010CFCC)
  jal   func_8004D60C
   li    A0, 6
  lui   A1, hi(func_8010D9F4)
  addiu A1, A1, lo(func_8010D9F4)
  jal   func_8004D60C
   li    A0, 7
  lui   A1, hi(func_8010E874)
  addiu A1, A1, lo(func_8010E874)
  jal   func_8004D60C
   li    A0, 9
  lui   A1, hi(func_8010EB88)
  addiu A1, A1, lo(func_8010EB88)
  jal   func_8004D60C
   li    A0, 10
  lui   A1, hi(func_8010F1FC)
  addiu A1, A1, lo(func_8010F1FC)
  jal   func_8004D60C
   li    A0, 12
  lui   A1, hi(func_8010F430)
  addiu A1, A1, lo(func_8010F430)
  jal   func_8004D60C
   li    A0, 11
  lui   A1, hi(func_8010F940)
  addiu A1, A1, lo(func_8010F940)
  jal   func_8004D60C
   li    A0, 13
  lui   A0, hi(func_80111338)
  jal   func_80044D98
   addiu A0, A0, lo(func_80111338)
  lui   S1, hi(D_80111994)
  addiu S1, S1, lo(D_80111994)
  sll   V0, S0, 1
L80105AE0:
  addu  V0, V0, S1
  lh    A1, 0(V0)
  jal   func_800542E8
   move  A0, S0
  addiu S0, S0, 1
  slti  V0, S0, STAR_COUNT
  bnez  V0, L80105AE0
   sll   V0, S0, 1
  jal   func_80068328
   li    A0, 77
  beqz  V0, L80105B40
   nop
  jal   func_800683BC
   li    A0, 77
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beqz  V0, L80105B38
   nop
  jal   func_80102A44
   nop
  j     L80105B40
   nop
L80105B38:
  jal   func_80102AB0
   nop
L80105B40:
; drawing things (approximately starting around here)
  jal   func_80102B54
   nop
  jal   func_80105DDC ; baby bowser
   nop
  jal   func_80105D54 ; toad
   nop
  jal   func_8010602C ; boo
   nop
  jal   func_801062F4 ; bank coins
   nop
  ;jal   func_801064B8 ; gates
  ; nop
  jal   func_80106684 ; banks
   nop
  jal   func_801066FC
   nop
  ; jal   func_80106C44 ; train
  ; nop
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

${$}

; A function that returns the audio index, to let custom events call to get the value.
${z}

overlaycall2:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)

jal __PP64_INTERNAL_GET_BOARD_AUDIO_INDEX
 nop

; Start playing board audio.
  jal   func_80079390
   move  A0, V0
/*  */  jal   func_800632F0
   li    A0, 8 ; TODO also audio?
  jal   func_80020070
   li    A0, 2
  jal   setup_routine
   nop
  lui   V0, hi(func_80106944)
  addiu V0, V0, lo(func_80106944)
  sw    V0, 0x10(SP)
  li    A0, 1000
  move  A1, R0
  move  A2, R0
  jal   func_80076598
   li    A3, -1
  jal   func_80053AA0
   move  A0, R0

  jal hydrate_events
   nop

  jal func_randomize_minigames
   nop

  jal   func_80066C34
   move  A0, R0
  lw    RA, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x20

hydrate_events:
ADDIU SP SP 0xFFE8
SW RA, 0x0010(SP)

// Call for the MainFS to read in the ASM blob.
LUI A0 ${i}
JAL ReadMainFS
ADDIU A0 A0 ${a}

// Now, V0 has the location that the MainFSRead put the blob... it isn't
// where we want it, it is in the heap somewhere, so we will move it.

// This is a pretty simple copy loop
// T4 = Copy of V0, Current source RAM location
// T0 = Current dest RAM location
// T1 = Size of buffer remaining to copy
// T2 = Temp word register to do the copy
ADDU T4 V0 R0 // Copy V0 -> T4
LW T0 0x4(T4) // LW T0, 0x4(T4) [RAM dest]
LW T1 0x8(T4) // LW T1, 0x8(T4) [Buffer size]
hydrate_events_loop_start:
LW T2 0(T4)
SW T2 0(T0)
ADDIU T4 T4 4
ADDIU T0 T0 4
ADDIU T1 T1 -4
BGTZ T1 hydrate_events_loop_start
NOP

// Now we can hydrate the table.
// T9 = V0 copy
// T4 = Dest buffer addr + 0x10, where the table really starts
ADDU T9 V0 R0 // Copy V0 -> T9
LW T4 4(T9) // LW T4, 0x4(T9) [RAM dest]
JAL EventTableHydrate
ADDIU A0 T4 16 // ADDIU A0, T4, 16

// Well, we copied the buffer... now we should "free" it with this magic JAL...
// Free our T9 reference, which theoretically could be corrupted, but in practice not.
JAL FreeMainFS
ADDU A0 T9 R0

LW RA 0x10(SP)
JR RA
ADDIU SP SP 0x18

; Overwrite the static array entry for this board's duel mini-game.
func_randomize_minigames:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)

  ; T0 = GetRandomByte() % BOARD_COUNT;
  jal	GetRandomByte
  nop
  li   A0, BOARD_COUNT
  div  V0, A0
  nop
  mfhi T0
  nop
  andi T0, T0, 0xFF
  nop

  lui T1 hi(DuelMinigamesArray)
  addu T1 T1 T0
  lbu T1, lo(DuelMinigamesArray)(T1)

  lui T2 hi(D_800CCD5C)
  addiu T2 T2 ${t*4}
  sw T1 lo(D_800CCD5C)(T2)

  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

overlaycall3:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   func_80020070
   li    A0, 1
  jal   setup_routine
   nop
  jal   func_80066C34
   li    A0, 1
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80105C50:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S0, A0
  sll   A0, A0, 0x10
  sra   A0, A0, 0xe
  lui   V0, hi(D_80113720)
  addu  V0, V0, A0
  lw    V0, lo(D_80113720)(V0)
  bnez  V0, L80105D3C
   nop
  lui   V0, hi(D_8011371C)
  lw    V0, lo(D_8011371C)(V0)
  bnez  V0, L80105CBC
   nop
  li    A0, 23
  jal   func_80043510
   move  A1, R0
  move  S2, V0
  jal   func_80043DAC
   move  A0, S2
  lui   AT, hi(D_8011371C)
  sw    S2, lo(D_8011371C)(AT)
  j     L80105CD0
   sll   S0, S0, 0x10
L80105CBC:
  lui   A0, hi(D_8011371C)
  lw    A0, lo(D_8011371C)(A0)
  jal   func_80043F7C
   sll   S0, S0, 0x10
  move  S2, V0
L80105CD0:
  sra   S0, S0, 0x10
  sll   S1, S0, 2
  lui   AT, hi(D_80113720)
  addu  AT, AT, S1
  sw    S2, lo(D_80113720)(AT)
  lhu   V0, 0xa(S2)
  ori   V0, V0, 2
  sh    V0, 0xa(S2)
  jal   func_80056754
   move  A0, S2
  sll   S0, S0, 1
  lui   A0, hi(D_80111A44)
  addu  A0, A0, S0
  jal   func_80054B8C
   lh    A0, lo(D_80111A44)(A0)
  addiu A0, S2, 0xc
  jal   func_800B3170
   addiu A1, V0, 8
  li    A0, 6
  lui   A2, hi(D_80111A04)
  addu  A2, A2, S1
  lh    A2, lo(D_80111A04)(A2)
  lui   A3, hi(D_80111A06)
  addu  A3, A3, S1
  lh    A3, lo(D_80111A06)(A3)
  jal   func_80041AEC
   move  A1, S2
L80105D3C:
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_80105D54:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   AT, hi(D_8011371C)
  sw    R0, lo(D_8011371C)(AT)
  move  S0, R0
  lui   S2, hi(D_80113720)
  addiu S2, S2, lo(D_80113720)
  lui   S1, hi(D_80111A54)
  addiu S1, S1, lo(D_80111A54)
  sll   V0, S0, 2
L80105D88:
  addu  V0, V0, S2
  sw    R0, 0(V0)
  sll   V0, S0, 1
  addu  V0, V0, S1
  jal   func_80068328
   lh    A0, 0(V0)
  bnel  V0, R0, L80105DB8
   addiu S0, S0, 1
  sll   A0, S0, 0x10
  jal   func_80105C50
   sra   A0, A0, 0x10
  addiu S0, S0, 1
L80105DB8:
  slti  V0, S0, 7
  bnez  V0, L80105D88
   sll   V0, S0, 2
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_80105DDC:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   S1, hi(D_800F93A8)
  addiu S1, S1, lo(D_800F93A8)
  lui   V1, hi(D_800F93C4)
  lh    V1, lo(D_800F93C4)(V1)
  li    V0, -1
  beq   V1, V0, L80105EA8
   nop
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beqz  V0, L80105E1C
   li    A0, 29
  li    A0, 23
L80105E1C:
  jal   func_80043510
   move  A1, R0
  move  S0, V0
  jal   func_80043DAC
   move  A0, S0
  lui   AT, hi(D_800F64C8)
  sw    S0, lo(D_800F64C8)(AT)
  lhu   V0, 0xa(S0)
  ori V0, V0, 2
  sh    V0, 0xa(S0)
  jal   func_80056754
   move  A0, S0
  lh    V0, 0x1c(S1)
  sll   V0, V0, 1
  lui   A0, hi(D_80111A44)
  addu  A0, A0, V0
  jal   func_80054B8C
   lh    A0, lo(D_80111A44)(A0)
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, V0, 8
  lh    V0, 0x1c(S1)
  sll   V0, V0, 2
  li    A0, 11
  lui   A2, 0x8011
  addu  A2, A2, V0
  lh    A2, 0x1a04(A2)
  lui   A3, hi(D_80111A06)
  addu  A3, A3, V0
  lh    A3, lo(D_80111A06)(A3)
  jal   func_80041AEC
   move  A1, S0
  lui   AT, hi(D_80111A64)
  j     L80105EB0
   sw    V0, lo(D_80111A64)(AT)
L80105EA8:
  lui   AT, hi(D_800F64C8)
  sw    R0, lo(D_800F64C8)(AT)
L80105EB0:
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_80105EC4:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   A0, hi(D_800F64C8)
  lw    A0, lo(D_800F64C8)(A0)
  beqz  A0, L80105EE4
   nop
  jal   func_8004430C
   nop
L80105EE4:
  lui   A0, hi(D_80111A64)
  lw    A0, lo(D_80111A64)(A0)
  li    V0, -1
  beq   A0, V0, L80105F00
   nop
  jal   func_80041B40
   nop
L80105F00:
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80105F0C:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S0, A0
  sll   A0, A0, 0x10
  sra   A0, A0, 0xe
  lui   V0, hi(D_80113740)
  addu  V0, V0, A0
  lw    V0, lo(D_80113740)(V0)
  bnez  V0, L80106018
   nop
  lui   V0, hi(D_8011373C)
  lw    V0, lo(D_8011373C)(V0)
  bnez  V0, L80105F88
   nop
  li    A0, 8
  jal   func_80043510
   move  A1, R0
  move  S1, V0
  lw    V0, 0x3c(S1)
  lw    V0, 0x40(V0)
  jal   func_8002D124
   lh    A0, 0(V0)
  lw    V0, 0x40(S1)
  lw    V0, 0x40(V0)
  jal   func_8002D124
   lh    A0, 0(V0)
  lui   AT, hi(D_8011373C)
  j     L80105F98
   sw    S1, lo(D_8011373C)(AT)
L80105F88:
  lui   A0, hi(D_8011373C)
  jal   func_80043F7C
   lw    A0, lo(D_8011373C)(A0)
  move  S1, V0
L80105F98:
  jal   func_800442DC
   move  A0, S1
  sll   V1, S0, 0x10
  sra   V1, V1, 0x10
  sll   S0, V1, 2
  lui   AT, hi(D_80113740)
  addu  AT, AT, S0
  sw    S1, lo(D_80113740)(AT)
  lhu   V0, 0xa(S1)
  ori   V0, V0, 2
  sh    V0, 0xa(S1)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0x30(S1)
  sll   V1, V1, 1
  lui   A0, hi(D_80111A68)
  addu  A0, A0, V1
  jal   func_80054B8C
   lh    A0, lo(D_80111A68)(A0)
  addiu A0, S1, 0xc
  jal   func_800B3170
   addiu A1, V0, 8
  li    A0, 8
  lui   A2, hi(D_80111A20)
  addu  A2, A2, S0
  lh    A2, lo(D_80111A20)(A2)
  lui   A3, hi(D_80111A22)
  addu  A3, A3, S0
  lh    A3, lo(D_80111A22)(A3)
  jal   func_80041AEC
   move  A1, S1
L80106018:
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_8010602C:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   AT, hi(D_8011373C)
  sw    R0, lo(D_8011373C)(AT)
  move  S0, R0
  lui   S1, hi(D_80113740)
  addiu S1, S1, lo(D_80113740)
  sll   V0, S0, 2
L80106054:
  addu  V0, V0, S1
  sw    R0, 0(V0)
  sll   A0, S0, 0x10
  jal   func_80105F0C
   sra   A0, A0, 0x10
  addiu S0, S0, 1
  slti  V0, S0, 2
  bnez  V0, L80106054
   sll   V0, S0, 2
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_8010608C:
  addiu SP, SP, -0x38
  sw    RA, 0x30(SP)
  sw    S5, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  move  S3, R0
  lui S5, 0x6666
  ori S5, S5, 0x6667
  lui   S4, hi(D_80113750)
  addiu S4, S4, lo(D_80113750)
L801060C0:
  lui   V0, hi(D_800F8D1E)
  lh    V0, lo(D_800F8D1E)(V0)
  addiu V0, V0, 9
  mult  V0, S5
  mfhi  A1
  sra   V1, A1, 2
  sra   V0, V0, 0x1f
  subu  S1, V1, V0
  slti  V0, S1, 6
  beql  V0, R0, L801060EC
   li    S1, 5
L801060EC:
  blez  S1, L80106120
   move  S0, R0
  sll   V0, S3, 2
  addu  S2, V0, S3
  addu  V0, S2, S0
L80106100:
  sll   V0, V0, 2
  addu  V0, V0, S4
  lw    A0, 0(V0)
  jal   func_80044258
   addiu S0, S0, 1
  slt   V0, S0, S1
  bnez  V0, L80106100
   addu  V0, S2, S0
L80106120:
  slti  V0, S0, 5
  beqz  V0, L80106154
   sll   V0, S3, 2
  addu  S1, V0, S3
  addu  V0, S1, S0
L80106134:
  sll   V0, V0, 2
  addu  V0, V0, S4
  lw    A0, 0(V0)
  jal   func_800442DC
   addiu S0, S0, 1
  slti  V0, S0, 5
  bnez  V0, L80106134
   addu  V0, S1, S0
L80106154:
  addiu S3, S3, 1
  slti  V0, S3, 2
  bnez  V0, L801060C0
   nop
  lw    RA, 0x30(SP)
  lw    S5, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x38

func_80106188:
  addiu SP, SP, -0x28
  sw    RA, 0x20(SP)
  sw    S3, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S0, A0
  sll   A0, A0, 0x10
  sra   A0, A0, 0xe
  lui   V0, hi(D_80113750)
  addu  V0, V0, A0
  lw    V0, lo(D_80113750)(V0)
  bnez  V0, L801062D8
   nop
  lui   V0, hi(D_80113748)
  lw    V0, lo(D_80113748)(V0)
  bnez  V0, L801061F8
   nop
  li    A0, 108
  jal   func_80043510
   move  A1, R0
  move  S3, V0
  jal   func_80043DAC
   move  A0, S3
  lui   AT, hi(D_80113748)
  sw    S3, lo(D_80113748)(AT)
  j     L8010620C
   sll   V1, S0, 0x10
L801061F8:
  lui   A0, hi(D_80113748)
  jal   func_80043F7C
   lw    A0, lo(D_80113748)(A0)
  move  S3, V0
  sll   V1, S0, 0x10
L8010620C:
  sra   S1, V1, 0x10
  sll   V0, S1, 2
  lui   AT, hi(D_80113750)
  addu  AT, AT, V0
  sw    S3, lo(D_80113750)(AT)
  lhu   V0, 0xa(S3)
  ori   V0, V0, 2
  sh    V0, 0xa(S3)
  lui   V0, 0x6666
  ori   V0, V0, 0x6667
  mult  S1, V0
  mfhi  A3
  sra   S0, A3, 1
  sra   V1, V1, 0x1f
  subu  S0, S0, V1
  sll   V0, S0, 0x10
  sra   V0, V0, 0xf
  lui   A0, hi(D_80111A6C)
  addu  A0, A0, V0
  lh    A0, lo(D_80111A6C)(A0)
  jal   func_80054B8C
   addiu S2, S3, 0xc
  move  A0, S2
  jal   func_800B3170
   addiu A1, V0, 8
  sll   V0, S0, 2
  addu  V0, V0, S0
  subu  S1, S1, V0
  sll   S1, S1, 0x10
  sra   S1, S1, 0x10
  sll   S0, S1, 1
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   A1, hi(D_80111A70)
  addiu A1, A1, lo(D_80111A70)
  move  A0, S2
  addu  A1, S0, A1
  jal   func_800B31C0
   move  A2, S2
  lw    V0, 0x3c(S3)
  lui   AT, hi(D_80111AAC)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80111AAC)(AT)
  swc1  F0, 0x24(V0)
  lw    V0, 0x3c(S3)
  lui   AT, hi(D_80111AB4)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80111AB4)(AT)
  swc1  F0, 0x2c(V0)
  jal   func_800442DC
   move  A0, S3
L801062D8:
  lw    RA, 0x20(SP)
  lw    S3, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x28

func_801062F4:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   AT, hi(D_80113748)
  sw    R0, lo(D_80113748)(AT)
  move  S0, R0
  lui   S1, hi(D_80113750)
  addiu S1, S1, lo(D_80113750)
  sll   V0, S0, 2
L8010631C:
  addu  V0, V0, S1
  sw    R0, 0(V0)
  sll   A0, S0, 0x10
  jal   func_80106188
   sra   A0, A0, 0x10
  addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010631C
   sll   V0, S0, 2
  jal   func_8010608C
   nop
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_8010635C:
/*  */  addiu SP, SP, -0x28
  sw    RA, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  move  S0, A0
  sll   A0, A0, 0x10
  sra   A0, A0, 0xe
  lui   V0, hi(D_8011377C)
  addu  V0, V0, A0
  lw    V0, lo(D_8011377C)(V0)
  bnez  V0, L801064A0
   nop
  lui   V0, hi(D_80113778)
  lw    V0, lo(D_80113778)(V0)
  bnez  V0, L801063DC
   nop
  lui   V0, hi(D_800F93AA)
  lh    V0, lo(D_800F93AA)(V0)
  sll   V0, V0, 1
  lui   A0, hi(D_80111AED)
  addu  A0, A0, V0
  lbu   A0, lo(D_80111AED)(A0)
  jal   func_80043510
   move  A1, R0
  move  S2, V0
  jal   func_80043DAC
   move  A0, S2
  lui   AT, hi(D_80113778)
  sw    S2, lo(D_80113778)(AT)
  j     L801063F0
   sll   S0, S0, 0x10
L801063DC:
  lui   A0, hi(D_80113778)
  lw    A0, lo(D_80113778)(A0)
  jal   func_80043F7C
   sll   S0, S0, 0x10
  move  S2, V0
L801063F0:
  sra   S0, S0, 0x10
  sll   S1, S0, 2
  lui   AT, hi(D_8011377C)
  addu  AT, AT, S1
  sw    S2, lo(D_8011377C)(AT)
  lhu   V0, 0xa(S2)
  ori   V0, V0, 2
  sh    V0, 0xa(S2)
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  li    A1, 2
  jal   func_80029E80
   li    A2, 1
  sll   S0, S0, 1
  lui   A0, hi(D_80111AE8)
  addu  A0, A0, S0
  jal   func_80054B8C
   lh    A0, lo(D_80111AE8)(A0)
  addiu A0, S2, 0xc
  jal   func_800B3170
   addiu A1, V0, 8
  lui   A0, hi(D_80111A3C)
  addu  A0, A0, S1
  jal   func_80054B8C
   lh    A0, lo(D_80111A3C)(A0)
  lui   A0, hi(D_80111A3E)
  addu  A0, A0, S1
  lh    A0, lo(D_80111A3E)(A0)
  jal   func_80054B8C
   move  S0, V0
  addiu A0, V0, 8
  addiu A1, S0, 8
  jal   func_80056658
   addiu A2, S2, 0x18
  li    A0, 12
  lui   A2, hi(D_80111A34)
  addu  A2, A2, S1
  lh    A2, lo(D_80111A34)(A2)
  lui   A3, hi(D_80111A36)
  addu  A3, A3, S1
  lh    A3, lo(D_80111A36)(A3)
  jal   func_80041AEC
   move  A1, S2
L801064A0:
  lw    RA, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

func_801064B8:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   AT, hi(D_80113778)
  sw    R0, lo(D_80113778)(AT)
  move  S0, R0
  lui   S1, hi(D_8011377C)
  addiu S1, S1, lo(D_8011377C)
  sll   V0, S0, 2
L801064E0:
  addu  V0, V0, S1
  sw    R0, 0(V0)
  sll   A0, S0, 0x10
  jal   func_8010635C
   sra   A0, A0, 0x10
  addiu S0, S0, 1
  slti  V0, S0, 2
  bnez  V0, L801064E0
   sll   V0, S0, 2
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_80106518:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   S0, hi(D_800F93AA)
  addiu S0, S0, lo(D_800F93AA)
  lh    V0, 0(S0)
  sll   V0, V0, 2
  lui   A0, hi(D_80111B40)
  addu  A0, A0, V0
  jal   func_8007D9E0
   lw    A0, lo(D_80111B40)(A0)
  lh    V0, 0(S0)
  sll   V0, V0, 2
  lui   A0, hi(D_80111B1E)
  addu  A0, A0, V0
  jal   func_8007959C
   lh    A0, lo(D_80111B1E)(A0)
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80106618:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  sll   A0, A0, 2
  lui   V0, hi(D_8011377C)
  addu  V0, V0, A0
  lw    V0, lo(D_8011377C)(V0)
  lw    V0, 0x3c(V0)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  li    A1, 1
  jal   func_80029E80
   li    A2, 4
  lui   V0, hi(D_800F93AA)
  lh    V0, lo(D_800F93AA)(V0)
  lui   V1, hi(D_80111B64)
  addiu V1, V1, lo(D_80111B64)
  sll   V0, V0, 2
  addu  A0, V0, V1
  lw    V1, 0(A0)
  li    V0, -1
  beq   V1, V0, L80106678
   nop
  jal   func_8007959C
   lh    A0, 2(A0)
L80106678:
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80106684:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S0, R0
  lui   S1, hi(D_80111B88)
  addiu S1, S1, lo(D_80111B88)
  sll   V0, S0, 1
L801066A4:
  addu  V0, V0, S1
  jal   func_80054B8C
   lh    A0, 0(V0)
  sll   V1, S0, 2
  li    A0, 10
  lui   A2, hi(D_80111A28)
  addu  A2, A2, V1
  lh    A2, lo(D_80111A28)(A2)
  lui   A3, hi(D_80111A2A)
  addu  A3, A3, V1
  lh    A3, lo(D_80111A2A)(A3)
  jal   func_80041B60
   addiu A1, V0, 8
  addiu S0, S0, 1
  slti  V0, S0, 2
  bnez  V0, L801066A4
   sll   V0, S0, 1
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_801066FC:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   A0, hi(D_80111B8C)
  jal   func_80054B8C
   lh    A0, lo(D_80111B8C)(A0)
  lui   V1, hi(D_80111A30)
  addiu V1, V1, lo(D_80111A30)
  li    A0, 9
  lh    A2, 0(V1)
  lh    A3, 2(V1)
  jal   func_80041B60
   addiu A1, V0, 8
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80106738:
  addiu SP, SP, -0x58
  sw    RA, 0x40(SP)
  sw    S3, 0x3c(SP)
  sw    S2, 0x38(SP)
  sw    S1, 0x34(SP)
  sw    S0, 0x30(SP)
  sdc1  F22, 0x50(SP)
  sdc1  F20, 0x48(SP)
  lui   A1, hi(D_80113784)
  lw    A1, lo(D_80113784)(A1)
  addiu A0, SP, 0x10
  jal   func_800B3170
   addiu A1, A1, 0xc
  lui   A0, hi(D_80113784)
  lw    A0, lo(D_80113784)(A0)
  jal   func_80042BE0
   addiu A0, A0, 0x18
  li    AT, 0x43340000 ;180.000000
  mtc1  AT, F2
  nop
  add.s F22, F0, F2
  jal   func_800B83C0
   mov.s F12, F22
  li    AT, 0x41C00000 ;24.000000
  mtc1  AT, F20
  nop
  mul.s F0, F0, F20
  lwc1  F2, 0x10(SP)
  add.s F0, F0, F2
  swc1  F0, 0x20(SP)
  lwc1  F0, 0x14(SP)
  swc1  F0, 0x24(SP)
  jal   func_800B7890
   mov.s F12, F22
  mul.s F0, F0, F20
  lwc1  F8, 0x18(SP)
  add.s F0, F0, F8
  swc1  F0, 0x28(SP)
  lwc1  F2, 0x10(SP)
  lwc1  F4, 0x20(SP)
  sub.s F2, F2, F4
  li    AT, 0x41400000 ;12.000000
  mtc1  AT, F6
  nop
  div.s F2, F2, F6
  swc1  F2, 0x10(SP)
  lwc1  F2, 0x14(SP)
  lwc1  F4, 0x24(SP)
  sub.s F2, F2, F4
  div.s F2, F2, F6
  swc1  F2, 0x14(SP)
  sub.s F8, F8, F0
  div.s F8, F8, F6
  swc1  F8, 0x18(SP)
  move  S1, R0
  lui   S3, hi(D_80113790)
  addiu S3, S3, lo(D_80113790)
  lui   S2, hi(D_80113820)
  addiu S2, S2, lo(D_80113820)
  sll   S0, S1, 1
L80106828:
  addu  S0, S0, S1
  sll   S0, S0, 2
  mtc1  S1, F4
  nop
  cvt.s.w F4, F4
  lwc1  F6, 0x10(SP)
  mul.s F6, F4, F6
  lwc1  F10, 0x20(SP)
  lwc1  F2, 0x14(SP)
  mul.s F2, F4, F2
  lwc1  F8, 0x24(SP)
  lwc1  F0, 0x18(SP)
  mul.s F4, F4, F0
  lwc1  F0, 0x28(SP)
  add.s F10, F6, F10
  mfc1  A1, F10
  add.s F8, F2, F8
  mfc1  A2, F8
  add.s F0, F4, F0
  mfc1  A3, F0
  nop
  jal   func_800B3160
   addu  A0, S0, S3
  lui   A1, hi(D_80113784)
  lw    A1, lo(D_80113784)(A1)
  addu  A0, S0, S2
  jal   func_800B3170
   addiu A1, A1, 0x18
  addiu S1, S1, 1
  slti  V0, S1, 0xc
  bnel  V0, R0, L80106828
   sll   S0, S1, 1
  lui   AT, hi(D_801138B0)
  sw    R0, lo(D_801138B0)(AT)
  lui   A0, hi(D_80113788)
  lw    A0, lo(D_80113788)(A0)
  lui   A1, hi(D_80113790)
  lw    A1, lo(D_80113790)(A1)
  lui   A2, hi(D_80113794)
  lw    A2, lo(D_80113794)(A2)
  lui   A3, hi(D_80113798)
  lw    A3, lo(D_80113798)(A3)
  jal   func_800B3160
   addiu A0, A0, 0xc
  lui   A0, hi(D_80113788)
  lw    A0, lo(D_80113788)(A0)
  lui   V1, hi(D_801138B0)
  lw    V1, lo(D_801138B0)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(D_80113820)
  addu  A1, A1, V0
  lw    A1, lo(D_80113820)(A1)
  lui   A2, hi(D_80113824)
  addu  A2, A2, V0
  lw    A2, lo(D_80113824)(A2)
  lui   A3, hi(D_80113828)
  addu  A3, A3, V0
  lw    A3, lo(D_80113828)(A3)
  jal   func_800B3160
   addiu A0, A0, 0x18
  lw    RA, 0x40(SP)
  lw    S3, 0x3c(SP)
  lw    S2, 0x38(SP)
  lw    S1, 0x34(SP)
  lw    S0, 0x30(SP)
  ldc1  F22, 0x50(SP)
  ldc1  F20, 0x48(SP)
  jr    RA
   addiu SP, SP, 0x58

func_80106944:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  jal   func_8005DC3C
   li    A0, -1
  move  S0, V0
  lui   V0, hi(D_8011378C)
  lw    V0, lo(D_8011378C)(V0)
  beqz  V0, L801069B8
   nop
  lw    A0, 0x24(S0)
  lui   A1, hi(D_80113788)
  lw    A1, lo(D_80113788)(A1)
  addiu A0, A0, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lw    V0, 0x24(S0)
  lwc1  F0, 0x10(V0)
  li    AT, 0x40E00000 ;7.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x10(V0)
  lw    A0, 0x24(S0)
  lui   A1, hi(D_80113788)
  lw    A1, lo(D_80113788)(A1)
  addiu A0, A0, 0x18
  jal   func_800B3170
   addiu A1, A1, 0x18
L801069B8:
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_801069C8:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   V1, hi(D_801138B0)
  lw    V1, lo(D_801138B0)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(D_80113784)
  lw    A0, lo(D_80113784)(A0)
  lwc1  F0, 0xc(A0)
  lui   AT, hi(D_80113790)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113790)(AT)
  lwc1  F0, 0x10(A0)
  lui   AT, hi(D_80113794)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113794)(AT)
  lwc1  F0, 0x14(A0)
  lui   AT, hi(D_80113798)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113798)(AT)
  lwc1  F0, 0x18(A0)
  lui   AT, hi(D_80113820)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113820)(AT)
  lwc1  F0, 0x1c(A0)
  lui   AT, hi(D_80113824)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113824)(AT)
  lwc1  F0, 0x20(A0)
  lui   AT, hi(D_80113828)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113828)(AT)
  addiu V1, V1, 1
  lui   AT, hi(D_801138B0)
  sw    V1, lo(D_801138B0)(AT)
  slti  V1, V1, 0xc
  bnez  V1, L80106A6C
   nop
  lui   AT, hi(D_801138B0)
  sw    R0, lo(D_801138B0)(AT)
L80106A6C:
  lui   A0, hi(D_80113788)
  lw    A0, lo(D_80113788)(A0)
  lui   V1, hi(D_801138B0)
  lw    V1, lo(D_801138B0)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(D_80113790)
  addu  A1, A1, V0
  lw    A1, lo(D_80113790)(A1)
  lui   A2, hi(D_80113794)
  addu  A2, A2, V0
  lw    A2, lo(D_80113794)(A2)
  lui   A3, hi(D_80113798)
  addu  A3, A3, V0
  lw    A3, lo(D_80113798)(A3)
  jal   func_800B3160
   addiu A0, A0, 0xc
  lui   A0, hi(D_80113788)
  lw    A0, lo(D_80113788)(A0)
  lui   V1, hi(D_801138B0)
  lw    V1, lo(D_801138B0)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(D_80113820)
  addu  A1, A1, V0
  lw    A1, lo(D_80113820)(A1)
  lui   A2, hi(D_80113824)
  addu  A2, A2, V0
  lw    A2, lo(D_80113824)(A2)
  lui   A3, hi(D_80113828)
  addu  A3, A3, V0
  lw    A3, lo(D_80113828)(A3)
  jal   func_800B3160
   addiu A0, A0, 0x18
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80106B08:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   A0, hi(D_801138B0)
  lw    A0, lo(D_801138B0)(A0)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   V1, hi(D_80113788)
  lw    V1, lo(D_80113788)(V1)
  lwc1  F0, 0xc(V1)
  lui   AT, hi(D_80113790)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113790)(AT)
  lwc1  F0, 0x10(V1)
  lui   AT, hi(D_80113794)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113794)(AT)
  lwc1  F0, 0x14(V1)
  lui   AT, hi(D_80113798)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113798)(AT)
  lwc1  F0, 0x18(V1)
  lui   AT, hi(D_80113820)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113820)(AT)
  lwc1  F0, 0x1c(V1)
  lui   AT, hi(D_80113824)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113824)(AT)
  lwc1  F0, 0x20(V1)
  lui   AT, hi(D_80113828)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113828)(AT)
  addiu A0, A0, -1
  lui   AT, hi(D_801138B0)
  sw    A0, lo(D_801138B0)(AT)
  bgez  A0, L80106BA8
   li    V0, 11
  lui   AT, hi(D_801138B0)
  sw    V0, lo(D_801138B0)(AT)
L80106BA8:
  lui   A0, hi(D_80113784)
  lw    A0, lo(D_80113784)(A0)
  lui   V1, hi(D_801138B0)
  lw    V1, lo(D_801138B0)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(D_80113790)
  addu  A1, A1, V0
  lw    A1, lo(D_80113790)(A1)
  lui   A2, hi(D_80113794)
  addu  A2, A2, V0
  lw    A2, lo(D_80113794)(A2)
  lui   A3, hi(D_80113798)
  addu  A3, A3, V0
  lw    A3, lo(D_80113798)(A3)
  jal   func_800B3160
   addiu A0, A0, 0xc
  lui   A0, hi(D_80113784)
  lw    A0, lo(D_80113784)(A0)
  lui   V1, hi(D_801138B0)
  lw    V1, lo(D_801138B0)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(D_80113820)
  addu  A1, A1, V0
  lw    A1, lo(D_80113820)(A1)
  lui   A2, hi(D_80113824)
  addu  A2, A2, V0
  lw    A2, lo(D_80113824)(A2)
  lui   A3, hi(D_80113828)
  addu  A3, A3, V0
  lw    A3, lo(D_80113828)(A3)
  jal   func_800B3160
   addiu A0, A0, 0x18
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80106C44:
  addiu SP, SP, -0x28
  sw    RA, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  li    A0, 116
  jal   func_80043510
   move  A1, R0
  move  S2, V0
  jal   func_80043DAC
   move  A0, S2
  lui   AT, hi(D_80113784)
  sw    S2, lo(D_80113784)(AT)
  lhu   V0, 0xa(S2)
  ori   V0, V0, 2
  sh    V0, 0xa(S2)
  lui   S1, hi(D_800F8CE4)
  addiu S1, S1, lo(D_800F8CE4)
  lh    V0, 0(S1)
  sll   V0, V0, 1
  lui   A0, hi(D_80111B90)
  addu  A0, A0, V0
  lhu   A0, lo(D_80111B90)(A0)
  jal   func_80054BB0
   move  A1, R0
  sll   V0, V0, 0x10
  jal   func_80054B8C
   sra   A0, V0, 0x10
  move  S0, V0
  lh    V0, 0(S1)
  sll   V0, V0, 1
  lui   A0, hi(D_80111B90)
  addu  A0, A0, V0
  lhu   A0, lo(D_80111B90)(A0)
  jal   func_80054BB0
   li    A1, 1
  sll   V0, V0, 0x10
  jal   func_80054B8C
   sra   A0, V0, 0x10
  lwc1  F10, 8(V0)
  lwc1  F6, 8(S0)
  lwc1  F8, 0xc(V0)
  lwc1  F2, 0xc(S0)
  lwc1  F4, 0x10(V0)
  lwc1  F0, 0x10(S0)
  sub.s F6, F10, F6
  mfc1  A1, F6
  sub.s F2, F8, F2
  mfc1  A2, F2
  sub.s F0, F4, F0
  mfc1  A3, F0
  nop
  jal   func_800B3160
   addiu A0, S2, 0x18
  addiu A0, S2, 0xc
  jal   func_800B3170
   addiu A1, S0, 8
  li    A0, 117
  jal   func_80043510
   move  A1, R0
  move  S2, V0
  jal   func_80043DAC
   move  A0, S2
  lui   AT, hi(D_80113788)
  sw    S2, lo(D_80113788)(AT)
  lhu   V0, 0xa(S2)
  ori   V0, V0, 2
  jal   func_80106738
   sh    V0, 0xa(S2)
  lui   AT, hi(D_8011378C)
  sw    R0, lo(D_8011378C)(AT)
  lw    RA, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

func_80106D78:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S0, A0
  jal   func_8005DC3C
   lbu   A0, 0x4c(S0)
  move  V1, V0
  lbu   V0, 0x4d(S0)
  bnez  V0, L80106DB0
   nop
  jal   func_800442DC
   lw    A0, 0x24(V1)
  jal   func_8007695C
   move  A0, S0
L80106DB0:
  lbu   V0, 0x4d(S0)
  addiu V0, V0, -1
  sb    V0, 0x4d(S0)
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80106DCC:
  addiu SP, SP, -0x50
  sw    RA, 0x48(SP)
  sw    S3, 0x44(SP)
  sw    S2, 0x40(SP)
  sw    S1, 0x3c(SP)
  sw    S0, 0x38(SP)
  move  S1, A0
  jal   func_8005DC3C
   move  S2, A1
  move  S3, V0
  sll   S0, S1, 0x10
  sra   S0, S0, 0x10
  li    A0, 936
  jal   func_80079798
   move  A1, S0
  li    A0, 166
  jal   func_80079798
   move  A1, S0
  li    A0, 273
  jal   func_800797DC
   move  A1, S0
  move  A0, S0
  jal   func_80067170
   li    A1, 3
  lui   V0, hi(func_80106D78)
  addiu V0, V0, lo(func_80106D78)
  sw    V0, 0x10(SP)
  li    A0, 4096
  move  A1, R0
  move  A2, R0
  jal   func_80076598
   li    A3, -1
  move  S0, V0
  move  A0, S0
  jal   func_80076AFC
   li    A1, 160
  sb    S1, 0x4c(S0)
  li    V0, 30
  bnez  S2, L80106E78
   sb    V0, 0x4d(S0)
  lui   A0, hi(D_80113784)
  j     L80106E80
   lw    A0, lo(D_80113784)(A0)
L80106E78:
  lui   A0, hi(D_80113788)
  lw    A0, lo(D_80113788)(A0)
L80106E80:
  lw    A1, 0x24(S3)
  addiu A0, A0, 0xc
  addiu A1, A1, 0xc
  jal   func_80056658
   addiu A2, SP, 0x18
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0x1c(SP)
  addiu A0, SP, 0x18
  lui   A1, 0x42c8
  jal   func_800B3240
   move  A2, A0
  lw    A1, 0x24(S3)
  addiu A0, SP, 0x18
  addiu A1, A1, 0xc
  jal   func_800B31C0
   move  A2, A0
  lw    A0, 0x24(S3)
  addiu S0, SP, 0x28
  addiu A0, A0, 0xc
  addiu A1, SP, 0x18
  jal   func_80056658
   move  A2, S0
  jal   func_80042BE0
   move  A0, S0
  li    AT, 0x43960000 ;300.000000
  mtc1  AT, F2
  nop
  c.le.s F2, F0
  nop
  bc1t  L80106F28
   nop
  jal   func_80042BE0
   move  A0, S0
  li    AT, 0x42700000 ;60.000000
  mtc1  AT, F2
  nop
  c.le.s F0, F2
  nop
  bc1f  L80106F50
   nop
L80106F28:
  lw    V0, 0x24(S3)
  lwc1  F0, 0xc(V0)
  li    AT, 0x42480000 ;50.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x18(SP)
  lw    V0, 0x24(S3)
  lwc1  F0, 0x14(V0)
  swc1  F0, 0x20(SP)
L80106F50:
  lw    A2, 0x24(S3)
  addiu A2, A2, 0xc
  move  A0, A2
  addiu A1, SP, 0x18
  jal   func_80056D80
   li    A3, 30
  sh    R0, 0x10(S3)
  sh    R0, 0x12(S3)
  sh    R0, 0x14(S3)
  li    V0, 1
  sh    V0, 0x16(S3)
  lw    V1, 0x24(S3)
  lhu   V0, 0xa(V1)
  ori   V0, V0, 1
  sh    V0, 0xa(V1)
  lw    A0, 0x24(S3)
  li    A1, 4
  jal   func_80044494
   li    A2, 2
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
  li    V0, -1
  beq   A0, V0, L80106FC4
   li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  li    A0, -1
  jal   func_80067170
   move  A1, R0
L80106FC4:
  lw    RA, 0x48(SP)
  lw    S3, 0x44(SP)
  lw    S2, 0x40(SP)
  lw    S1, 0x3c(SP)
  lw    S0, 0x38(SP)
  jr    RA
   addiu SP, SP, 0x50

func_80108C0C:
  addiu SP, SP, -0x40
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F28, 0x38(SP)
  sdc1  F26, 0x30(SP)
  sdc1  F24, 0x28(SP)
  sdc1  F22, 0x20(SP)
  sdc1  F20, 0x18(SP)
  jal   func_8007959C
   li    A0, 876
  li    A0, 111
  jal   func_80043510
   move  A1, R0
  move  S0, V0
  lui   A1, hi(D_800F64C8)
  lw    A1, lo(D_800F64C8)(A1)
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lwc1  F0, 0x14(S0)
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x14(S0)
  lwc1  F0, 0x10(S0)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x10(S0)
  mtc1  R0, F22
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F20
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_801135B8)
  ldc1  F24, lo(D_801135B8)(AT)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F26
L80108CAC:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  add.d F0, F0, F24
  cvt.s.d F20, F0
  c.lt.s F20, F26
  nop
  bc1t  L80108CAC
   nop
  jal   func_80105EC4
   nop
  lui   AT, hi(D_800F8D12) ;AT, 0x8010
  sh    R0, lo(D_800F8D12)(AT)
  jal   func_800542B8
   move  A0, R0
  jal   func_80105DDC
   nop
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F0
  nop
  c.le.s F0, F20
  nop
  bc1f  L80108DE0
   nop
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_801135C0)
  ldc1  F24, lo(D_801135C0)(AT)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F26
L80108D70:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  sub.d F0, F0, F24
  cvt.s.d F20, F0
  c.le.s F26, F20
  nop
  bc1t  L80108D70
   nop
L80108DE0:
  jal   func_8004430C
   move  A0, S0
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F28, 0x38(SP)
  ldc1  F26, 0x30(SP)
  ldc1  F24, 0x28(SP)
  ldc1  F22, 0x20(SP)
  ldc1  F20, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x40

; Star space event
__PP64_INTERNAL_STAR_SPACE_EVENT:
func_80108E0C:
  addiu SP, SP, -0x40
  sw    RA, 0x3c(SP)
  sw    S2, 0x38(SP)
  sw    S1, 0x34(SP)
  jal   func_800558F4
   sw    S0, 0x30(SP)
  move  S0, V0
  lui   S1, hi(D_800F93A8)
  addiu S1, S1, lo(D_800F93A8)
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  li    V0, 4
  beq   V1, V0, L80109634
   move  S2, R0
  sll   A0, S0, 0x10
  jal   func_80102C3C
   sra   A0, A0, 0x10
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  li    V1, 1
  bne   V0, V1, L801091AC
   sll   A0, S0, 0x10
  lui   A0, hi(D_800F93C6)
  jal   func_80046D2C
   lh    A0, lo(D_800F93C6)(A0)
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  jal   func_80102830
   nop
  sll   V0, V0, 0x10
  li    A0, -1
  li    A1, 8
  jal   func_80056C30
   sra   A2, V0, 0x10
  jal   func_8007D838
   nop
  li    AT, 0x3FCC0000 ;1.593750
  ori AT, AT, 0xcccd
  mtc1  AT, F12
  nop
  jal   func_80052F70
   move  S0, V0
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V1, V0, 2
  lui   V0, hi(p1_turn_status)
  addu  V0, V0, V1
  lb    V0, lo(p1_turn_status)(V0)
  beqz  V0, L80108F58
   li    V0, 24
  sb    V0, 0x20(SP)
  lui   V0, hi(p1_char)
  addu  V0, V0, V1
  lbu   V0, lo(p1_char)(V0)
  sb    V0, 0x21(SP)
  sb    R0, 0x22(SP)
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 3
  li    A1, 561
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  jal   func_80056458
   nop
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  j     L80108F70
   nop
L80108F58:
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
L80108F60:
  beqz  V0, L80108F70
   li    A0, 3
  jal   func_8005600C
   li    A1, 556
L80108F70:
  lh    V0, 0x1e(S1)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  slti  V0, V0, 0x63
  bnez  V0, L80108FB4
   nop
  jal   func_8007959C
   li    A0, 288
  li    A0, 3
  j     L80109174
   li    A1, 555
L80108FB4:
  lh    V0, 0x1e(S1)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0x14
  bnez  V0, L80109164
   nop
  jal   func_8007959C
   li    A0, 286
  li    A0, 3
L80108FF0:
  jal   func_800560A4
   li    A1, 551
  jal   func_801041D4
   nop
  jal   func_80056144
   move  S0, V0
  jal   func_80056168
   sll   S0, S0, 0x10
  sra   S0, S0, 0x10
  li    V0, 1
  beq   S0, V0, L80109114
   slti  V0, S0, 2
  beql  V0, R0, L80109038
   li    V0, 2
  beqz  S0, L80109048
   nop
  j     L80109634
   nop
L80109038:
  beq   S0, V0, L80109154
   nop
  j     L80109634
   nop
L80109048:
  lh    A0, 0x1e(S1)
  jal   func_8004CA34
   li    A1, -20
  lh    A0, 0x1e(S1)
  jal   func_800614B4
   li    A1, -20
  jal   func_8007D9E0
   li    A0, 30
  bnez  S2, L801090DC
   li    A0, 3
  jal   func_8005600C
   li    A1, 553
  lui   V0, hi(D_800CCC16)
  lb    V0, lo(D_800CCC16)(V0)
  beqz  V0, L801090B0
   nop
  jal   func_80079464
   nop
  lui   A0, hi(D_800F64B0)
  lh    A0, lo(D_800F64B0)(A0)
  jal   func_800114E8
   li    A1, 60
  li    V0, -1
  lui   AT, hi(D_800F64B0)
  j     L801090B8
   sh    V0, lo(D_800F64B0)(AT)
L801090B0:
  jal   func_800794A8
   li    A0, 90
L801090B8:
  lui   A0, hi(D_8011371C)
  jal   func_80103968
   lw    A0, lo(D_8011371C)(A0)
  jal   func_800573AC
   nop
  jal   func_8006706C
   li    A0, 2
  j     L80109634
   nop
L801090DC:
  jal   func_8005600C
   li    A1, 557
  jal   func_80108C0C
   nop
  jal   func_8007D9E0
   li    A0, 30
  lui   A0, hi(D_800F64C8)
  jal   func_801039E4
   lw    A0, lo(D_800F64C8)(A0)
  li    A0, 5
  jal   func_8005600C
   li    A1, 558
  j     L801095F8
   nop
L80109114:
  lui   V0, hi(D_800CCC16)
  lb    V0, lo(D_800CCC16)(V0)
  beqz  V0, L80109144
   li    A0, 3
  lui   A0, hi(D_800F64B0)
  lh    A0, lo(D_800F64B0)(A0)
  jal   func_800114E8
   li    A1, 60
  li    V0, -1
  lui   AT, hi(D_800F64B0)
  sh    V0, lo(D_800F64B0)(AT)
  li    A0, 3
L80109144:
  jal   func_8005600C
   li    A1, 554
  j     L801095F8
   nop
L80109154:
  jal   __PP64_INTERNAL_VIEW_MAP
   nop
  j     L80108FF0
   li    A0, 3
L80109164:
  jal   func_8007959C
   li    A0, 288
  li    A0, 3
  li    A1, 552
L80109174:
  jal   func_8005600C
   nop
  lui   V0, hi(D_800CCC16)
  lb    V0, lo(D_800CCC16)(V0)
  beqz  V0, L801095F8
   nop
  lui   A0, hi(D_800F64B0)
  lh    A0, lo(D_800F64B0)(A0)
  jal   func_800114E8
   li    A1, 60
  li    V0, -1
  lui   AT, hi(D_800F64B0)
  j     L801095F8
   sh    V0, lo(D_800F64B0)(AT)
L801091AC:
  jal   func_80102C3C
   sra   A0, A0, 0x10
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  li    V1, 2
  bne   V0, V1, L80109634
   nop
  jal   func_80046D2C
   lh    A0, 0x1e(S1)
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  lh    V0, 0x1c(S1)
  sll   V0, V0, 1
  li    A0, -1
  lui   A2, hi(D_80111994)
  addu  A2, A2, V0
  lh    A2, lo(D_80111994)(A2)
  jal   func_80056C30
   li    A1, 8
  jal   func_8007D838
   nop
  li    AT, 0x3FCC0000 ;1.593750
  ori AT, AT, 0xcccd
  mtc1  AT, F12
  nop
  jal   func_80052F70
   move  S0, V0
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  bnez  V0, L8010924C
   nop
  jal   func_8007959C
   li    A0, 867
L8010924C:
  lh    V0, 0x1e(S1)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_turn_status)
  addu  V0, V0, V1
  lb    V0, lo(p1_turn_status)(V0)
  beqz  V0, L80109368
   nop
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beqz  V0, L801092C4
   li    A0, 3
  jal   func_8005600C
   li    A1, 559
  jal   func_80108C0C
   nop
  jal   func_8007D9E0
   li    A0, 30
  li    A0, 5
  jal   func_8005600C
   li    A1, 560
  lh    A0, 0x1e(S1)
  jal   func_8004CA34
   li    A1, 20
  lh    A0, 0x1e(S1)
  j     L8010957C
   li    A1, 20
L801092C4:
  lui   V0, hi(D_800F8D18)
  lh    V0, lo(D_800F8D18)(V0)
  bnez  V0, L801092F4
   li    A0, 5
  jal   func_8005600C
   li    A1, 1063
  lh    A0, 0x1e(S1)
  jal   func_8004CA34
   li    A1, 20
  lh    A0, 0x1e(S1)
  j     L8010957C
   li    A1, 20
L801092F4:
  lui   S0, hi(D_800F8D18)
  addiu S0, S0, lo(D_800F8D18)
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  lh    A2, 0(S0)
  jal   func_800A5660
   addiu A0, SP, 0x20
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 5
  li    A1, 1062
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  jal   func_80056458
   nop
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  lh    A0, 0x1e(S1)
  jal   func_8004CA34
   lh    A1, 0(S0)
  lh    A0, 0x1e(S1)
  jal   func_800614B4
   lh    A1, 0(S0)
  j     L80109584
   sh    R0, 0(S0)
L80109368:
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  bnez  V0, L80108F60
   li    S2, 1
  lh    V0, 0x1e(S1)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  bnez  V0, L801093B4
   li    A0, 5
  jal   func_8005600C
   li    A1, 1058
  j     L801095F8
   nop
L801093B4:
  jal   func_8005600C
   li    A1, 1057
  lui   A0, hi(D_800F64C8)
  lw    A0, lo(D_800F64C8)(A0)
  lui   A1, 0x4000
  jal   func_80059120
   lui   A2, 0xbf00
  lui   A0, hi(D_800F64C8)
  jal   func_80059158
   lw    A0, lo(D_800F64C8)(A0)
  lui   A0, hi(D_800F64C8)
  lw    A0, lo(D_800F64C8)(A0)
  lui   A1, 0x4000
  jal   func_80059120
   lui   A2, 0xbf00
  lui   A0, hi(D_800F64C8)
  jal   func_80059158
   lw    A0, lo(D_800F64C8)(A0)
  jal   func_80103B70
   nop
  lh    A0, 0x1e(S1)
  jal   func_80059FD0
   move  S0, V0
  lui   AT, hi(D_801122A4)
  addu  AT, AT, V0
  lbu   V0, lo(D_801122A4)(AT)
  slt   S0, S0, V0
  bnel  S0, R0, L80109594
   sw    R0, 0x10(SP)
  lh    V0, 0x1e(S1)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 5
  bnez  V0, L8010948C
   li    A0, 5
  jal   func_8005600C
   li    A1, 1059
  lui   V1, hi(D_800F8D18)
  addiu V1, V1, lo(D_800F8D18)
  lhu   V0, 0(V1)
  addiu V0, V0, 5
  sh    V0, 0(V1)
  lh    A0, 0x1e(S1)
  jal   func_8004CA34
   li    A1, -5
  lh    A0, 0x1e(S1)
  j     L8010957C
   li    A1, -5
L8010948C:
  lh    V1, 0x1e(S1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  lui   A2, hi(p1_coins)
  addu  A2, A2, V0
  lh    A2, lo(p1_coins)(A2)
  jal   func_800A5660
   addiu A0, SP, 0x20
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 5
  li    A1, 1061
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  lui   A0, hi(D_800F8D18)
  addiu A0, A0, lo(D_800F8D18)
  lh    V1, 0x1e(S1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lhu   V1, 0(A0)
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lhu   V0, lo(p1_coins)(AT)
  addu  V1, V1, V0
  sh    V1, 0(A0)
  lh    A0, 0x1e(S1)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   A1, hi(p1_coins)
  addu  A1, A1, V0
  lh    A1, lo(p1_coins)(A1)
  jal   func_8004CA34
   SUBU A1 R0 A1
  lh    A0, 0x1e(S1)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   A1, hi(p1_coins)
  addu  A1, A1, V0
  lh    A1, lo(p1_coins)(A1)
  SUBU  A1 R0 A1
L8010957C:
  jal   func_800614B4
   nop
L80109584:
  jal   func_8007D9E0
   li    A0, 30
  j     L801095F8
   nop
L80109594:
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 5
  li    A1, 1060
  move  A2, R0
  jal   func_80056368
   move  A3, R0
  jal   func_80056144
   nop
  lh    A0, 0x1e(S1)
  jal   func_8004CA34
   li    A1, 5
  lh    A0, 0x1e(S1)
  jal   func_800614B4
   li    A1, 5
  jal   func_8007D9E0
   li    A0, 30
  jal   func_80056124
   nop
  jal   func_80056458
   nop
  jal   func_80056144
   nop
  jal   func_80056168
   nop
L801095F8:
  jal   func_8004655C
   lh    A0, 0x1e(S1)
  jal   func_8007D838
   nop
  li    AT, 0x3FA60000 ;1.296875
  ori AT, AT, 0x6666
  mtc1  AT, F12
  nop
  jal   func_80052F70
   move  S0, V0
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
L80109634:
  lw    RA, 0x3c(SP)
  lw    S2, 0x38(SP)
  lw    S1, 0x34(SP)
  lw    S0, 0x30(SP)
  jr    RA
   addiu SP, SP, 0x40

; Bank event
__PP64_INTERNAL_BANK_SPACE_EVENT:
func_8010964C:
  addiu SP, SP, -0x50
  sw    RA, 0x4c(SP)
  sw    S2, 0x48(SP)
  sw    S1, 0x44(SP)
  jal   func_800558F4
   sw    S0, 0x40(SP)
  move  S0, V0
  lui   S2, hi(D_800F93A8)
  addiu S2, S2, lo(D_800F93A8)
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
  li    V0, 4
  beq   A0, V0, L80109A60
   nop
  jal   func_80047DE8
   nop
  bgtz  V0, L801096A0
   li    A0, -1
  jal   func_80067170
   li    A1, 3
  li    A0, -1
L801096A0:
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  sll   V0, S0, 0x10
  sra   V1, V0, 0x10
  li    V0, ${f[0]}
  beq   V1, V0, L801096D4
   li    V0, ${f[1]}
  bne   V1, V0, L801096E8
   li    A0, -1
  li    A1, 8
  j     L801096E0
   li    A2, ${m[1]}
L801096D4:
  li    A0, -1
  li    A1, 8
  li    A2, ${m[0]}
L801096E0:
  jal   func_80056C30
   nop
L801096E8:
  jal   func_8007D9E0
   li    A0, 8
  jal   func_8007959C
   li    A0, 230
  lh    A0, 0x1e(S2)
  jal   func_80047DE8
   nop
  blez  V0, L8010996C
   nop
  jal   func_80046D2C
   lh    A0, 0x1e(S2)
  lh    V1, 0x1e(S2)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A2, hi(p1_coins)
  addu  A2, A2, V0
  lh    A2, lo(p1_coins)(A2)
  sltu  V0, R0, A2
  slti  V1, A2, 5
  and   V0, V0, V1
  beqz  V0, L80109858
   nop
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  jal   func_800A5660
   addiu A0, SP, 0x20
  addiu S1, SP, 0x30
  lui   S0, hi(D_800F8D1E)
  addiu S0, S0, lo(D_800F8D1E)
  lh    A3, 0(S0)
  lh    V1, 0x1e(S2)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A2, hi(p1_coins)
  addu  A2, A2, V0
  lh    A2, lo(p1_coins)(A2)
  move  A0, S1
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  jal   func_800A5660
   addu  A2, A3, A2
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 2
  li    A1, 23
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, S1
  jal   func_80056144
   nop
  lh    V1, 0x1e(S2)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lhu   V1, 0(S0)
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lhu   V0, lo(p1_coins)(AT)
  addu  V1, V1, V0
  jal   func_8010608C
   sh    V1, 0(S0)
  lh    A0, 0x1e(S2)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   A1, hi(p1_coins)
  addu  A1, A1, V0
  lh    A1, lo(p1_coins)(A1)
  jal   func_8004CA34
   SUBU A1 R0 A1
  lh    A0, 0x1e(S2)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   A1, hi(p1_coins)
  addu  A1, A1, V0
  lh    A1, lo(p1_coins)(A1)
  j     L8010992C
   SUBU A1 R0 A1
L80109858:
  lh    V0, 0x1e(S2)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  bnez  V0, L801098C4
   addiu A0, SP, 0x20
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  lui   A2, hi(D_800F8D1E)
  lh    A2, lo(D_800F8D1E)(A2)
  jal   func_800A5660
   addiu A0, SP, 0x20
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 2
  li    A1, 24
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  j     L80109944
   nop
L801098C4:
  lui   S0, hi(D_800F8D1E)
  addiu S0, S0, lo(D_800F8D1E)
  lh    A2, 0(S0)
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  jal   func_800A5660
   addiu A2, A2, 5
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 2
  li    A1, 22
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  jal   func_80056144
   nop
  lhu   V0, 0(S0)
  addiu V0, V0, 5
  jal   func_8010608C
   sh    V0, 0(S0)
  lh    A0, 0x1e(S2)
  jal   func_8004CA34
   li    A1, -5
  lh    A0, 0x1e(S2)
  li    A1, -5
L8010992C:
  jal   func_800614B4
   nop
  jal   func_8007D9E0
   li    A0, 30
  jal   func_80056124
   nop
L80109944:
  jal   func_80056458
   nop
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  jal   func_8004655C
   lh    A0, 0x1e(S2)
  j     L80109A60
   nop
L8010996C:
  lui   S0, hi(D_800F8D1E)
  addiu S0, S0, lo(D_800F8D1E)
  lh    A2, 0(S0)
  beqz  A2, L80109A58
   li    A0, 2
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  jal   func_800A5660
   addiu A0, SP, 0x20
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 2
  li    A1, 25
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  jal   func_80056144
   nop
  lh    A0, 0x1e(S2)
  jal   func_8004CA34
   lh    A1, 0(S0)
  lh    A0, 0x1e(S2)
  jal   func_800614B4
   lh    A1, 0(S0)
  jal   func_8010608C
   sh    R0, 0(S0)
  jal   func_8005DC3C
   li    A0, -1
  lw    A0, 0x24(V0)
  jal   func_8005670C
   addiu A0, A0, 0x18
  li    A0, -1
  li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  lh    V1, 0x1e(S2)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 259
  jal   func_8007D9E0
   li    A0, 30
  jal   func_80056124
   nop
  jal   func_80056458
   nop
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  j     L80109A60
   nop
L80109A58:
  jal   func_8005600C
   li    A1, 26
L80109A60:
  lw    RA, 0x4c(SP)
  lw    S2, 0x48(SP)
  lw    S1, 0x44(SP)
  lw    S0, 0x40(SP)
  jr    RA
   addiu SP, SP, 0x50

func_80109A78:
  move  A3, A0
  move  A1, R0
  lui   A2, hi(D_801138B8)
  lw    A2, lo(D_801138B8)(A2)
  lui   V0, hi(D_801138B4)
  lw    V0, lo(D_801138B4)(V0)
  lui   A0, hi(D_801122E0)
  addiu A0, A0, lo(D_801122E0)
  sll   V1, V0, 2
  addu  V1, V1, V0
  addu  V1, V1, A0
  addu  V0, A2, A1
L80109AA8:
  lbu   V0, 0(V0)
  beqz  V0, L80109AC8
   addu  V0, V1, A1
  lb    V0, 0(V0)
  bnel  V0, A3, L80109ACC
   addiu A1, A1, 1
  j     L80109ADC
   move  V0, A1
L80109AC8:
  addiu A1, A1, 1
L80109ACC:
  slti  V0, A1, 5
  bnez  V0, L80109AA8
   addu  V0, A2, A1
  li    V0, -1
L80109ADC:
  jr    RA
   nop

func_80109AE4:
  move  A1, R0
  lui   V0, hi(D_801138B4)
  lw    V0, lo(D_801138B4)(V0)
  lui   A0, hi(D_801122E0)
  addiu A0, A0, lo(D_801122E0)
  sll   V1, V0, 2
  addu  V1, V1, V0
  addu  V1, V1, A0
  li    A0, -1
  addu  V0, V1, A1
L80109B0C:
  lb    V0, 0(V0)
  beq   V0, A0, L80109B28
   nop
  addiu A1, A1, 1
  slti  V0, A1, 5
  bnel  V0, R0, L80109B0C
   addu  V0, V1, A1
L80109B28:
  jr    RA
   move  V0, A1

; Item shop
__PP64_INTERNAL_ITEM_SHOP_EVENT:
func_80109B30:
  addiu SP, SP, -0x70
  sw    RA, 0x68(SP)
  sw    S5, 0x64(SP)
  sw    S4, 0x60(SP)
  sw    S3, 0x5c(SP)
  sw    S2, 0x58(SP)
  sw    S1, 0x54(SP)
  sw    S0, 0x50(SP)
  lui   S4, hi(D_800F93A8)
  addiu S4, S4, lo(D_800F93A8)
  jal   func_8005DC3C
   li    A0, -1
  move  S5, V0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  li    V0, 4
  beq   V1, V0, L8010A118
   li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  li    A0, -1
  li    A1, 8
  jal   func_80056C30
   li    A2, ${E[0]}
  jal   func_8007D9E0
   li    A0, 8
  lui   A0, hi(D_800F93C6)
  jal   func_80046D2C
   lh    A0, lo(D_800F93C6)(A0)
  jal   func_8007959C
   li    A0, 230
  lui   V1, hi(D_800F93B0)
  lh    V1, lo(D_800F93B0)(V1)
  lui   V0, hi(D_800F93AE)
  lh    V0, lo(D_800F93AE)(V0)
  bne   V1, V0, L80109BD8
   li    A0, 1
  jal   func_8005600C
   li    A1, 505
  j     L8010A10C
   nop
L80109BD8:
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   V1, hi(p1_item)
  addu  V1, V1, V0
  lb    V1, lo(p1_item)(V1)
  li    V0, -1
  beq   V1, V0, L80109C18
   nop
  jal   func_8005600C
   li    A1, 496
  j     L8010A10C
   nop
L80109C18:
  lh    V0, 0x1e(S4)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0xa
  beqz  V0, L80109C58
   li    A0, 1
  jal   func_8005600C
   li    A1, 495
  j     L8010A10C
   nop
L80109C58:
  jal   func_800560A4
   li    A1, 494
  jal   func_80103FB0
   nop
  jal   func_80056144
   move  S0, V0
  jal   func_80056168
   nop
  li    V0, 1
  beq   S0, V0, L8010A0E8
   slti  V0, S0, 2
  beql  V0, R0, L80109C9C
   li    V0, 2
  beqz  S0, L80109CAC
   move  S0, R0
  j     L8010A10C
   nop
L80109C9C:
  beq   S0, V0, L8010A0FC
   nop
  j     L8010A10C
   nop
L80109CAC:
  lh    A1, 8(S4)
  lh    V0, 4(S4)
  lui   A0, hi(D_801122D4)
  addiu A0, A0, lo(D_801122D4)
  sll   V1, V0, 1
  addu  V1, V1, V0
  addu  V1, V1, A0
  addu  A0, V1, S0
L80109CCC:
  lbu   V0, 0(A0)
  slt   V0, A1, V0
  bnel  V0, R0, L80109CF0
   addiu S0, S0, 1
  lbu   V0, 1(A0)
  slt   V0, A1, V0
  bnez  V0, L80109CFC
   nop
  addiu S0, S0, 1
L80109CF0:
  slti  V0, S0, 2
  bnez  V0, L80109CCC
   addu  A0, V1, S0
L80109CFC:
  lh    A0, 0x1e(S4)
  jal   func_80059FD0
   move  S2, R0
  lui   A0, hi(D_801122C8)
  addiu A0, A0, lo(D_801122C8)
  sll   V1, S0, 2
  addu  V1, V1, A0
  addu  V1, V1, V0
  lbu   S3, 0(V1)
  move  S0, R0
  addiu T2, SP, 0x20
  li    T0, 1
  addiu A3, SP, 0x28
  lui   V1, hi(D_801122E0)
  addiu V1, V1, lo(D_801122E0)
  sll   V0, S3, 2
  addu  V0, V0, S3
  addu  T1, V0, V1
  li    T3, -1
  addu  A2, T2, S0
L80109D4C:
  sb    T0, 0(A2)
  sll   V0, S0, 2
  addu  A1, A3, V0
  sb    R0, 0(A1)
  addu  V0, T1, S0
  lb    V0, 0(V0)
  beql  V0, T3, L80109DC0
   addiu S0, S0, 1
  lui   A0, hi(D_800CC000)
  addu  A0, A0, V0
  lbu   A0, lo(D_800CC000)(A0)
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V0, V0, A0
  beqz  V0, L80109DB0
   sll   V0, S0, 2
  sb    R0, 0(A2)
  sb    T0, 0(A1)
L80109DB0:
  addu  V0, A3, V0
  sb    R0, 1(V0)
  addiu S2, S2, 1
  addiu S0, S0, 1
L80109DC0:
  slti  V0, S0, 5
  bnez  V0, L80109D4C
   addu  A2, T2, S0
  slti  V0, S0, 8
  beqz  V0, L80109DF4
   addiu V1, SP, 0x20
  li    A0, 1
  addu  V0, V1, S0
L80109DE0:
  sb    A0, 0(V0)
  addiu S0, S0, 1
  slti  V0, S0, 8
  bnez  V0, L80109DE0
   addu  V0, V1, S0
L80109DF4:
  jal   func_8008DAC0
   li    A0, 40
  jal   func_80056524
   li    A0, 40
  sll   V1, S3, 2
  addiu V0, SP, 0x30
  sw    V0, 0x10(SP)
  addiu V0, SP, 0x34
  sw    V0, 0x14(SP)
  addiu V0, SP, 0x38
  sw    V0, 0x18(SP)
  li    A0, 1
  lui   A1, hi(D_80112304)
  addu  A1, A1, V1
  lw    A1, lo(D_80112304)(A1)
  addiu A2, SP, 0x28
  jal   func_80056368
   addiu A3, SP, 0x2c
  jal   func_80056524
   move  A0, R0
  lui   AT, hi(D_801138B4)
  sw    S3, lo(D_801138B4)(AT)
  addiu A0, SP, 0x20
  lui   AT, hi(D_801138B8)
  jal   func_80103CF4
   sw    A0, lo(D_801138B8)(AT)
  jal   func_80056144
   move  S1, V0
  jal   func_80056168
   nop
  bne   S1, S2, L80109E98
   addiu V0, S2, 1
  lui   AT, hi(D_800FC734)
  sh    R0, lo(D_800FC734)(AT)
  lh    A0, 0x1e(S4)
  jal   func_8004E484
   move  S0, R0
  li    V0, 1
  lui   AT, hi(D_800FC734)
  j     L80109CAC
   sh    V0, lo(D_800FC734)(AT)
L80109E98:
  xor   V0, S1, V0
  sltiu V0, V0, 1
  nor   V1, R0, S1
  sltiu V1, V1, 1
  or    V0, V0, V1
  bnel  V0, R0, L80109C58
   li    A0, 1
  lui   V0, hi(D_801122E0)
  addiu V0, V0, lo(D_801122E0)
  sll   S0, S3, 2
  addu  S0, S0, S3
  addu  S0, S0, V0
  addu  S0, S0, S1
  lb    V0, 0(S0)
  lui   A1, hi(D_800CC000)
  addu  A1, A1, V0
  lbu   A1, lo(D_800CC000)(A1)
  lh    A0, 0x1e(S4)
  jal   func_8004CA34
   SUBU A1 R0 A1
  lb    V0, 0(S0)
  lui   A1, hi(D_800CC000)
  addu  A1, A1, V0
  lbu   A1, lo(D_800CC000)(A1)
  lh    A0, 0x1e(S4)
  jal   func_800614B4
   SUBU A1 R0 A1
  jal   func_8007D9E0
   li    A0, 30
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lbu   V1, 0(S0)
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  sb    V1, lo(p1_item)(AT)
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  move  S2, V0
  lb    V0, 0(S0)
  sll   V0, V0, 2
  lui   A0, hi(D_800CCBDC)
  addu  A0, A0, V0
  lw    A0, lo(D_800CCBDC)(A0)
  jal   func_80017680
   sll   S1, S2, 0x10
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S3, V0
  jal   func_80017800
   move  A0, S0
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  sll   A2, S3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   move  A2, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082418
   li    A2, 4096
  move  A0, S0
  move  A1, R0
  li    A2, 160
  jal   func_80081AD0
   li    A3, 90
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  addiu S0, SP, 0x40
  jal   func_8005670C
   move  A0, S0
  lw    A2, 0x24(S5)
  addiu A2, A2, 0x18
  move  A0, A2
  move  A1, S0
  jal   func_80056B78
   li    A3, 10
  jal   func_8007959C
   li    A0, 25
  move  S0, R0
  sll   A2, S0, 1
L8010A020:
  addu  A2, A2, S0
  sll   A2, A2, 3
  addu  A2, A2, S0
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010A020
   sll   A2, S0, 1
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   li    A2, 256
  li    A0, -1
  li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 5
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 259
  jal   func_8007D9E0
   li    A0, 45
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  jal   func_8007D9E0
   li    A0, 10
  sll   A0, S3, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  jal   func_8007F8B0
   move  A0, S0
  j     L8010A10C
   nop
L8010A0E8:
  li    A0, 1
  jal   func_8005600C
   li    A1, 497
  j     L8010A10C
   nop
L8010A0FC:
  jal   __PP64_INTERNAL_VIEW_MAP
   nop
  j     L80109C58
   li    A0, 1
L8010A10C:
  lh    A0, 0x1e(S4)
  jal   func_8004655C
   nop
L8010A118:
  lw    RA, 0x68(SP)
  lw    S5, 0x64(SP)
  lw    S4, 0x60(SP)
  lw    S3, 0x5c(SP)
  lw    S2, 0x58(SP)
  lw    S1, 0x54(SP)
  lw    S0, 0x50(SP)
  jr    RA
   addiu SP, SP, 0x70

func_8010A13C:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  jal   func_80044258
   move  S2, A0
  move  S1, R0
L8010A15C:
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  andi  S0, S1, 0xff
  lh    A0, 0(V0)
  jal   func_8002D0A0
   move  A1, S0
  lw    V0, 0x40(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   move  A1, S0
  jal   func_8007DA44
   addiu S1, S1, 0xc
  slti  V0, S1, 0x100
  bnez  V0, L8010A15C
   nop
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   li    A1, 255
  lw    V0, 0x40(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   li    A1, 255
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_8010A1DC:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S2, A0
  li    S1, 255
L8010A1F8:
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  andi  S0, S1, 0xff
  lh    A0, 0(V0)
  jal   func_8002D0A0
   move  A1, S0
  lw    V0, 0x40(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   move  A1, S0
  jal   func_8007DA44
   addiu S1, S1, -0xc
  bgez  S1, L8010A1F8
   nop
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   move  A1, R0
  lw    V0, 0x40(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   move  A1, R0
  jal   func_800442DC
   move  A0, S2
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_8010A27C:
  addiu SP, SP, -0x58
  sw    RA, 0x3c(SP)
  sw    FP, 0x38(SP)
  sw    S7, 0x34(SP)
  sw    S6, 0x30(SP)
  sw    S5, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  sdc1  F24, 0x50(SP)
  sdc1  F22, 0x48(SP)
  sdc1  F20, 0x40(SP)
  move  S3, A0
  li    V0, -1
  bnel  S3, V0, L8010A784
   li    A0, 1
  lui A0, 0xa
  jal   func_80017680
   ori A0, A0, 0xb
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  FP, V0
  jal   func_80017800
   move  A0, S0
  move  S1, R0
  addiu S2, SP, 0x10
L8010A2F0:
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  beq   S1, V0, L8010A324
   sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  bnez  V0, L8010A338
   li    A0, 1
L8010A324:
  sll   V0, S1, 1
  addu  V0, V0, S2
  li    V1, -1
  j     L8010A3F8
   sh    V1, 0(V0)
L8010A338:
  jal   func_8007FA6C
   li    A1, 5
  sll   S0, S1, 1
  addu  S0, S0, S2
  sh    V0, 0(S0)
  sll   V0, V0, 0x10
  sll   A2, FP, 0x10
  sra   A0, V0, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  lh    A0, 0(S0)
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  lh    A0, 0(S0)
  move  A1, R0
  jal   func_8008225C
   move  A2, R0
  lh    A0, 0(S0)
  move  A1, R0
  jal   func_80082418
   li    A2, 4096
  sll   V0, S1, 3
  lui   AT, hi(D_8011233C)
  addu  AT, AT, V0
  lwc1  F0, lo(D_8011233C)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112340)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112340)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lh    A0, 0(S0)
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  lh    A0, 0(S0)
  move  A1, R0
  jal   func_80082488
   move  A2, R0
L8010A3F8:
  addiu S1, S1, 1
  slti  V0, S1, 4
  bnez  V0, L8010A2F0
   nop
  jal   func_8007959C
   li    A0, 887
  move  S2, R0
  addiu S4, SP, 0x10
  li    S5, -1
  move  S1, R0
L8010A420:
  sll   S3, S2, 4
  sll   V0, S1, 1
L8010A428:
  addu  S0, V0, S4
  lh    A0, 0(S0)
  beq   A0, S5, L8010A4C4
   sll   V0, S1, 3
  mtc1  S2, F4
  nop
  cvt.s.w F4, F4
  lui   AT, hi(D_8011235C)
  addu  AT, AT, V0
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F4, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, V0
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F4, F4, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112340)(AT)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  lh    A0, 0(S0)
  move  A1, R0
  jal   func_80082488
   andi  A2, S3, 0xffff
L8010A4C4:
  addiu S1, S1, 1
  slti  V0, S1, 4
  bnez  V0, L8010A428
   sll   V0, S1, 1
  jal   func_8007DA44
   addiu S2, S2, 1
  slti  V0, S2, 0x11
  bnez  V0, L8010A420
   move  S1, R0
  move  S6, R0
  addiu S2, SP, 0x10
  li    S4, -1
  lui   S3, hi(D_800FD2C0)
  addiu S3, S3, lo(D_800FD2C0)
  sll   S0, S1, 1
L8010A500:
  addu  V0, S0, S2
  lh    A0, 0(V0)
  beql  A0, S4, L8010A55C
   addiu S1, S1, 1
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  addu  V0, S0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V1, V0, S3
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lhu   V0, lo(p1_stars)(AT)
  addiu V0, V0, -1
  sh    V0, 0xe(V1)
  addiu S6, S6, 1
  sll   A0, S1, 0x10
  sra   A0, A0, 0x10
  jal   func_80067170
   li    A1, 5
  addiu S1, S1, 1
L8010A55C:
  slti  V0, S1, 4
  bnez  V0, L8010A500
   sll   S0, S1, 1
  jal   func_8007959C
   li    A0, 228
  move  S2, R0
  addiu S5, SP, 0x10
  li    S7, -1
  li    AT, 0x41800000 ;16.000000
  mtc1  AT, F22
  move  S1, R0
L8010A588:
  sll   V1, S2, 1
  addu  V1, V1, S2
  sll   V0, V1, 4
  subu  V0, V0, V1
  sll   S4, V0, 1
  sll   V0, S1, 1
L8010A5A0:
  addu  S3, V0, S5
  lh    V0, 0(S3)
  beq   V0, S7, L8010A64C
   sll   S0, S1, 3
  lui   AT,hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F20, lo(D_80112360)(AT)
  mul.s F20, F20, F22
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112340)(AT)
  add.s F20, F20, F0
  mtc1  S4, F12
  nop
  cvt.d.w F12, F12
  lui   AT, hi(D_801135D0)
  ldc1  F0, lo(D_801135D0)(AT)
  mul.d F12, F12, F0
  jal   func_800A4FA0
   cvt.s.d F12, F12
  add.s F0, F0, F0
  add.s F20, F20, F0
  trunc.w.s F0, F20
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S0
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F0, F22
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lh    A0, 0(S3)
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
L8010A64C:
  addiu S1, S1, 1
  slti  V0, S1, 4
  bnez  V0, L8010A5A0
   sll   V0, S1, 1
  jal   func_8007DA44
   addiu S2, S2, 1
  slti  V0, S2, 0x1e
  bnez  V0, L8010A588
   move  S1, R0
  li    S2, 16
  addiu S4, SP, 0x10
  li    S5, -1
L8010A67C:
  sll   S3, S2, 4
  sll   V0, S1, 1
L8010A684:
  addu  S0, V0, S4
  lh    A0, 0(S0)
  beq   A0, S5, L8010A720
   sll   V0, S1, 3
  mtc1  S2, F4
  nop
  cvt.s.w F4, F4
  lui   AT, hi(D_8011235C)
  addu  AT, AT, V0
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F4, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, V0
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F4, F4, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112340)(AT)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  lh    A0, 0(S0)
  move  A1, R0
  jal   func_80082488
   andi  A2, S3, 0xffff
L8010A720:
  addiu S1, S1, 1
  slti  V0, S1, 4
  bnez  V0, L8010A684
   sll   V0, S1, 1
  jal   func_8007DA44
   addiu S2, S2, -1
  bgez  S2, L8010A67C
   move  S1, R0
  addiu S0, SP, 0x10
  li    S2, -1
  sll   V0, S1, 1
L8010A74C:
  addu  V0, V0, S0
  lh    A0, 0(V0)
  beq   A0, S2, L8010A764
   addiu S1, S1, 1
  jal   func_8007F8B0
   nop
L8010A764:
  slti  V0, S1, 4
  bnez  V0, L8010A74C
   sll   V0, S1, 1
  sll   A0, FP, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  j     L8010AB1C
   move  V0, S6
L8010A784:
  jal   func_8007FA6C
   li    A1, 5
  move  S4, V0
  lui A0, 0xa
  jal   func_80017680
   ori A0, A0, 0xb
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S5, V0
  jal   func_80017800
   move  A0, S0
  sll   S0, S4, 0x10
  sra   S0, S0, 0x10
  sll   A2, S5, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   move  A2, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082418
   li    A2, 4096
  sll   V0, S3, 3
  lui   AT, hi(D_8011233C)
  addu  AT, AT, V0
  lwc1  F0, lo(D_8011233C)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112340)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112340)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  jal   func_8007959C
   li    A0, 887
  move  S0, R0
  sll   V0, S4, 0x10
  sra   S2, V0, 0x10
  sll   S1, S3, 3
L8010A87C:
  mtc1  S0, F4
  nop
  cvt.s.w F4, F4
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S1
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F4, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S1
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S1
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F4, F4, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, S1
  lwc1  F0, lo(D_80112340)(AT)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  move  A0, S2
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  sll   A2, S0, 4
  move  A0, S2
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0x11
  bnez  V0, L8010A87C
   sll   A0, S4, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  sll   V0, S3, 1
  addu  V0, V0, S3
  sll   V0, V0, 2
  addu  V0, V0, S3
  sll   V0, V0, 2
  lui   V1, hi(p1_stars)
  addu  V1, V1, V0
  lhu   V1, lo(p1_stars)(V1)
  addiu V1, V1, -1
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  sh    V1, lo(p1_stars)(AT)
  sll   A0, S3, 0x10
  sra   A0, A0, 0x10
  jal   func_80067170
   li    A1, 5
  jal   func_8007959C
   li    A0, 228
  move  S0, R0
  sll   S1, S3, 3
  li    AT, 0x41800000 ;16.000000
  mtc1  AT, F22
  lui   AT, hi(D_801135D8)
  ldc1  F24, lo(D_801135D8)(AT)
  sll   S2, S4, 0x10
L8010A998:
  lui   AT, hi(D_80112360)
  addu  AT, AT, S1
  lwc1  F20, lo(D_80112360)(AT)
  mul.s F20, F20, F22
  lui   AT, hi(D_80112340)
  addu  AT, AT, S1
  lwc1  F0, lo(D_80112340)(AT)
  add.s F20, F20, F0
  sll   V1, S0, 1
  addu  V1, V1, S0
  sll   V0, V1, 4
  subu  V0, V0, V1
  sll   V0, V0, 1
  mtc1  V0, F12
  nop
  cvt.d.w F12, F12
  mul.d F12, F12, F24
  jal   func_800A4FA0
   cvt.s.d F12, F12
  add.s F0, F0, F0
  add.s F20, F20, F0
  trunc.w.s F0, F20
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S1
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F0, F22
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S1
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  sra   A0, S2, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0x1e
  bnez  V0, L8010A998
   sll   V0, S4, 0x10
  li    S0, 16
  sra   S2, V0, 0x10
  sll   S1, S3, 3
L8010AA60:
  mtc1  S0, F4
  nop
  cvt.s.w F4, F4
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S1
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F4, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S1
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S1
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F4, F4, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, S1
  lwc1  F0, lo(D_80112340)(AT)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  move  A0, S2
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  sll   A2, S0, 4
  move  A0, S2
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, -1
  bgez  S0, L8010AA60
   sll   A0, S4, 0x10
  jal   func_8007F8B0
   sra   A0, A0, 0x10
  sll   A0, S5, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  li    V0, 1
L8010AB1C:
  lw    RA, 0x3c(SP)
  lw    FP, 0x38(SP)
  lw    S7, 0x34(SP)
  lw    S6, 0x30(SP)
  lw    S5, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  ldc1  F24, 0x50(SP)
  ldc1  F22, 0x48(SP)
  ldc1  F20, 0x40(SP)
  jr    RA
   addiu SP, SP, 0x58

func_8010AB58:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   func_80055E60
   nop
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_8010AB7C:
  addiu SP, SP, -0xb8
  sw    RA, 0x94(SP)
  sw    FP, 0x90(SP)
  sw    S7, 0x8c(SP)
  sw    S6, 0x88(SP)
  sw    S5, 0x84(SP)
  sw    S4, 0x80(SP)
  sw    S3, 0x7c(SP)
  sw    S2, 0x78(SP)
  sw    S1, 0x74(SP)
  sw    S0, 0x70(SP)
  sdc1  F26, 0xb0(SP)
  sdc1  F24, 0xa8(SP)
  sdc1  F22, 0xa0(SP)
  sdc1  F20, 0x98(SP)
  move  S4, A0
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  sh    V0, 0x2e(SP)
  lui A0, 0xa
  jal   func_80017680
   ori A0, A0, 0xb
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  sh    V0, 0x36(SP)
  jal   func_80017800
   move  A0, S0
  lhu   T0, 0x2e(SP)
  sll   S0, T0, 0x10
  sra   S0, S0, 0x10
  lhu   T0, 0x36(SP)
  sll   A2, T0, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   move  A2, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082418
   li    A2, 4096
  sll   V0, S4, 3
  lui   AT, hi(D_8011233C)
  addu  AT, AT, V0
  lwc1  F0, lo(D_8011233C)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112340)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112340)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  sh    V0, 0x3e(SP)
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  addu  V0, V0, S4
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sll   V0, V0, 2
  lui   A0, hi(D_8011237C)
  addu  A0, A0, V0
  lw    A0, lo(D_8011237C)(A0)
  jal   func_80017680
   move  S7, R0
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  sh    V0, 0x46(SP)
  jal   func_80017800
   move  A0, S0
  lhu   T0, 0x3e(SP)
  sll   V0, T0, 0x10
  sra   S0, V0, 0x10
  lhu   T0, 0x46(SP)
  sll   A2, T0, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  andi  V0, S4, 1
  beqz  V0, L8010AD68
   move  A0, S0
  move  A1, R0
  j     L8010AD7C
   li    A2, 4097
L8010AD68:
  lhu   T0, 0x3e(SP)
  sll   A0, T0, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  li    A2, 4096
L8010AD7C:
  jal   func_80082418
   move  S1, R0
  lhu   T0, 0x3e(SP)
  sll   S0, T0, 0x10
  sra   S0, S0, 0x10
  sll   V0, S4, 3
  lui   AT, hi(D_8011235C)
  addu  AT, AT, V0
  lwc1  F2, lo(D_8011235C)(AT)
  li    AT, 0x41800000 ;16.000000
  mtc1  AT, F4
  nop
  mul.s F2, F2, F4
  lui   AT, hi(D_8011233C)
  addu  AT, AT, V0
  lwc1  F0, lo(D_8011233C)(AT)
  sub.s F0, F0, F2
  li    AT, 0x41000000 ;8.000000
  mtc1  AT, F2
  nop
  sub.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F0, F0, F4
  lui   AT, hi(D_80112340)
  addu  AT, AT, V0
  lwc1  F2, lo(D_80112340)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  lhu   T0, 0x2e(SP)
  sll   V0, T0, 0x10
  sra   S3, V0, 0x10
  sll   S2, S4, 3
  lhu   T0, 0x3e(SP)
  sll   S5, T0, 0x10
L8010AE4C:
  mtc1  S1, F4
  nop
  cvt.s.w F4, F4
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S2
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F4, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S2
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S2
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F4, F4, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, S2
  lwc1  F0, lo(D_80112340)(AT)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  move  A0, S3
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  sll   S0, S1, 4
  andi  S0, S0, 0xffff
  move  A0, S3
  move  A1, R0
  jal   func_80082488
   move  A2, S0
  sra   A0, S5, 0x10
  move  A1, R0
  jal   func_80082488
   move  A2, S0
  jal   func_8007DA44
   addiu S1, S1, 1
  slti  V0, S1, 0x11
  bnez  V0, L8010AE4C
   move  A1, R0
  lhu   T0, 0x2e(SP)
  sll   A0, T0, 0x10
  sra   A0, A0, 0x10
  jal   func_80082488
   li    A2, 255
  lhu   T0, 0x3e(SP)
  sll   A0, T0, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  li    V0, 24
  sb    V0, 0x18(SP)
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  addu  V0, V0, S4
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sb    V0, 0x19(SP)
  sb    R0, 0x1a(SP)
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  li    A0, 1722
  addiu A1, SP, 0x18
  move  A2, R0
  jal   func_80055C88
   move  A3, R0
  sll   S0, S4, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  jal   func_80067170
   li    A1, 2
  jal   func_80055E3C
   move  A0, S4
  move  FP, R0
  move  S2, R0
  jal   func_8007959C
   li    A0, 886
  move  A0, S0
  li    A1, 3
  jal   func_800672BC
   li    A2, 5
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F12
  nop
  jal   func_8005A358
   sw    V0, 0x4c(SP)
  addiu S5, V0, 1
  move  S1, R0
  move  S6, R0
  sll   S0, S4, 3
  li    AT, 0x41800000 ;16.000000
  mtc1  AT, F24
  li    AT, 0x41000000 ;8.000000
  mtc1  AT, F26
  lhu   T0, 0x3e(SP)
  sll   T0, T0, 0x10
  sw    T0, 0x54(SP)
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  addu  V0, V0, S4
  sll   V0, V0, 2
  sw    V0, 0x5c(SP)
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  sw    V0, 0x64(SP)
  move  T0, V0
  addu  T0, T0, S4
  sw    T0, 0x64(SP)
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  sw    V0, 0x6c(SP)
  move  T0, V0
  addu  T0, T0, S4
  sw    T0, 0x6c(SP)
  lw    T0, 0x54(SP)
  sra   S3, T0, 0x10
L8010B054:
  sll   V0, S5, 0x10
  bnez  V0, L8010B080
   slti  V0, S2, 2
  jal   func_8007959C
   li    A0, 228
  li    AT, 0x41700000 ;15.000000
  mtc1  AT, F12
  jal   func_8005A358
   nop
  addiu S5, V0, 0x1e
  slti  V0, S2, 2
L8010B080:
  xori  V0, V0, 1
  subu  S2, S2, V0
  bnez  S2, L8010B150
   li    V0, 9
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F20, lo(D_80112360)(AT)
  mul.s F20, F20, F24
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112340)(AT)
  add.s F20, F20, F0
  sll   V1, S1, 1
  addu  V1, V1, S1
  sll   V0, V1, 4
  subu  V0, V0, V1
  sll   V0, V0, 1
  mtc1  V0, F12
  nop
  cvt.d.w F12, F12
  lui   AT, hi(D_801135E0)
  ldc1  F0, lo(D_801135E0)(AT)
  mul.d F12, F12, F0
  jal   func_800A4FA0
   cvt.s.d F12, F12
  add.s F0, F0, F0
  add.s F20, F20, F0
  trunc.w.s F0, F20
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  lhu   T0, 0x2e(SP)
  sll   A0, T0, 0x10
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S0
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F0, F24
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
/*  */  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  j     L8010B28C
   nop
L8010B150:
  bne   S2, V0, L8010B28C
   sll   V1, S6, 1
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S0
  lwc1  F20, lo(D_8011235C)(AT)
  mul.s F20, F20, F24
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F0, lo(D_8011233C)(AT)
  add.s F20, F20, F0
  addu  V1, V1, S6
  sll   V0, V1, 4
  subu  V0, V0, V1
  sll   V0, V0, 1
  mtc1  V0, F22
  nop
  cvt.d.w F22, F22
  lui   AT, hi(D_801135E8)
  ldc1  F0, lo(D_801135E8)(AT)
  mul.d F22, F22, F0
  cvt.s.d F22, F22
  jal   func_800A4FA0
   mov.s F12, F22
  add.s F0, F0, F0
  add.s F20, F20, F0
  trunc.w.s F0, F20
  mfc1  A2, F0
  nop
  sll   A2, A2, 0x10
  lhu   T0, 0x2e(SP)
  sll   A0, T0, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F0, F0, F24
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F2, lo(D_80112340)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F20, lo(D_8011233C)(AT)
  sub.s F20, F20, F26
  jal   func_800A4FA0
   mov.s F12, F22
  add.s F0, F0, F0
  add.s F20, F20, F0
  trunc.w.s F0, F20
  mfc1  A2, F0
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F0, F0, F24
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F2, lo(D_80112340)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lw    T0, 0x54(SP)
  sra   A0, T0, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  addiu S6, S6, 1
L8010B28C:
  lw    T0, 0x5c(SP)
  lui   V0, hi(D_800FD2C6)
  addu  V0, V0, T0
  lhu   V0, lo(D_800FD2C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L8010B318
   nop
  beql  S2, R0, L8010B34C
   addiu FP, FP, 1
  lui   V0, hi(D_800FD2C2)
  addu  V0, V0, T0
  lbu   V0, lo(D_800FD2C2)(V0)
  bnez  V0, L8010B2D4
   slti  V0, S2, 7
  bnel  V0, R0, L8010B34C
   addiu FP, FP, 1
  j     L8010B3E4
   sltiu V1, S2, 1
L8010B2D4:
  lw    T0, 0x64(SP)
  sll   V0, T0, 2
  lui   V1, hi(D_800FD2C2)
  addu  V1, V1, V0
  lbu   V1, lo(D_800FD2C2)(V1)
  li    V0, 1
  bne   V1, V0, L8010B308
   slti  V0, S2, 0xa
  slti  V0, S2, 8
  bnel  V0, R0, L8010B34C
   addiu FP, FP, 1
  j     L8010B3E4
   sltiu V1, S2, 1
L8010B308:
  bnel  V0, R0, L8010B34C
   addiu FP, FP, 1
  j     L8010B3E4
   sltiu V1, S2, 1
L8010B318:
  lw    T0, 0x6c(SP)
  sll   V0, T0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  lui   AT, hi(D_800F6098)
  addu  AT, AT, V0
  lhu   V0, lo(D_800F6098)(AT)
  andi  V0, V0, 0x8000
  beqz  V0, L8010B3E4
   sltiu V1, S2, 1
  addiu FP, FP, 1
L8010B34C:
  bnez  S7, L8010B3E0
   li    S2, 10
  move  A0, S3
  move  A1, R0
  li    A2, 1
  jal   func_800822A8
   move  A3, R0
  move  A0, S3
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  li    S7, 1
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F0, lo(D_8011233C)(AT)
  sub.s F0, F0, F26
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F0, F0, F24
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F2, lo(D_80112340)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S3
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
L8010B3E0:
  sltiu V1, S2, 1
L8010B3E4:
  xori  V0, S7, 1
  sltiu V0, V0, 1
  and   V1, V1, V0
  beqz  V1, L8010B494
   move  A0, S3
  move  A1, R0
  move  A2, R0
  jal   func_800822A8
   move  A3, R0
  move  A0, S3
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  move  S7, R0
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S0
  lwc1  F2, lo(D_8011235C)(AT)
  mul.s F2, F2, F24
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F0, lo(D_8011233C)(AT)
  sub.s F0, F0, F2
  sub.s F0, F0, F26
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F0, F0, F24
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F2, lo(D_80112340)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S3
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
L8010B494:
  jal   func_8007DA44
   addiu S1, S1, 1
  slti  V0, S1, 0x96
  bnez  V0, L8010B054
   addiu S5, S5, -1
  lw    A0, 0x4c(SP)
  jal   func_8006735C
   nop
  lui   A0, hi(func_8010AB58)
  addiu A0, A0, lo(func_8010AB58)
  li    A1, 4096
  move  A2, R0
  jal   InitProcess
   move  A3, R0
  bnez  FP, L8010B5AC
   li    S1, 16
  lhu   T0, 0x2e(SP)
  sll   V0, T0, 0x10
  sra   S3, V0, 0x10
  sll   S2, S4, 3
  lhu   T0, 0x3e(SP)
  sll   S5, T0, 0x10
L8010B4EC:
  mtc1  S1, F4
  nop
  cvt.s.w F4, F4
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S2
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F4, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S2
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S2
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F4, F4, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, S2
  lwc1  F0, lo(D_80112340)(AT)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  move  A0, S3
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  sll   S0, S1, 4
  andi  S0, S0, 0xffff
  move  A0, S3
  move  A1, R0
  jal   func_80082488
   move  A2, S0
  sra   A0, S5, 0x10
  move  A1, R0
  jal   func_80082488
   move  A2, S0
  jal   func_8007DA44
   addiu S1, S1, -2
  bltz  S1, L8010B744
   nop
  j     L8010B4EC
   nop
L8010B5AC:
  lhu   T0, 0x2e(SP)
  sll   S2, T0, 0x10
  sll   S0, S4, 3
L8010B5B8:
  mtc1  S1, F20
  nop
  cvt.s.w F20, F20
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S0
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F20, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F0, F20, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F2, lo(D_80112340)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  sra   A0, S2, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  lhu   T0, 0x3e(SP)
  sll   A0, T0, 0x10
  addiu V0, S1, -0x10
  mtc1  V0, F0
  nop
  cvt.s.w F0, F0
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S0
  lwc1  F2, lo(D_8011235C)(AT)
  mul.s F0, F0, F2
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  li    AT, 0x41000000 ;8.000000
  mtc1  AT, F2
  nop
  sub.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F20, F20, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112340)(AT)
  add.s F20, F20, F0
  trunc.w.s F0, F20
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  jal   func_8007DA44
   addiu S1, S1, -2
  slti  V0, S1, -0x10
  beqz  V0, L8010B5B8
   move  A1, R0
  lhu   T0, 0x3e(SP)
  sll   S0, T0, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A2, R0
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  li    S1, 16
  lhu   T0, 0x2e(SP)
  sll   S0, T0, 0x10
  sll   A2, S1, 4
L8010B724:
  sra   A0, S0, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S1, S1, -2
  bgez  S1, L8010B724
   sll   A2, S1, 4
L8010B744:
  lhu   T0, 0x2e(SP)
  sll   A0, T0, 0x10
  jal   func_8007F8B0
   sra   A0, A0, 0x10
  lhu   T0, 0x36(SP)
  sll   A0, T0, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  lhu   T0, 0x3e(SP)
  sll   A0, T0, 0x10
  jal   func_8007F8B0
   sra   A0, A0, 0x10
  lhu   T0, 0x46(SP)
  sll   A0, T0, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  move  S1, R0
  lui   A0, hi(D_800F93B0)
  lh    A0, lo(D_800F93B0)(A0)
  sll   V0, S1, 1
L8010B794:
  addu  V1, V0, S1
  lui   V0, hi(D_80112394)
  addu  V0, V0, V1
  lbu   V0, lo(D_80112394)(V0)
  slt   V0, A0, V0
  bnel  V0, R0, L8010B7CC
   addiu S1, S1, 1
  lui   V0, hi(D_80112395)
  addu  V0, V0, V1
  lbu   V0, lo(D_80112395)(V0)
  slt   V0, V0, A0
  beqz  V0, L8010B7D8
   sll   V0, S1, 1
  addiu S1, S1, 1
L8010B7CC:
  sltiu V0, S1, 6
  bnez  V0, L8010B794
   sll   V0, S1, 1
L8010B7D8:
  addu  V0, V0, S1
  lui   S7, hi(D_80112396)
  addu  S7, S7, V0
  lbu   S7, lo(D_80112396)(S7)
  move  S1, R0
  sll   V0, S1, 1
L8010B7F0:
  addu  V1, V0, S1
  lui   V0, hi(D_801123A8)
  addu  V0, V0, V1
  lbu   V0, lo(D_801123A8)(V0)
  slt   V0, FP, V0
  bnel  V0, R0, L8010B828
   addiu S1, S1, 1
  lui   V0, hi(D_801123A9)
  addu  V0, V0, V1
  lbu   V0, lo(D_801123A9)(V0)
  slt   V0, V0, FP
  beqz  V0, L8010B834
   sll   V0, S1, 1
  addiu S1, S1, 1
L8010B828:
  sltiu V0, S1, 0xe
  bnez  V0, L8010B7F0
   sll   V0, S1, 1
L8010B834:
  addu  V0, V0, S1
  lui   AT, hi(D_801123AA)
  addu  AT, AT, V0
  lbu   V0, lo(D_801123AA)(AT)
  subu  S7, S7, V0
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  addu  V0, V0, S4
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V0, S7, V0
  beql  V0, R0, L8010B874
   li    S7, -1
L8010B874:
  move  V0, S7
  lw    RA, 0x94(SP)
  lw    FP, 0x90(SP)
  lw    S7, 0x8c(SP)
  lw    S6, 0x88(SP)
  lw    S5, 0x84(SP)
  lw    S4, 0x80(SP)
  lw    S3, 0x7c(SP)
  lw    S2, 0x78(SP)
  lw    S1, 0x74(SP)
  lw    S0, 0x70(SP)
  ldc1  F26, 0xb0(SP)
  ldc1  F24, 0xa8(SP)
  ldc1  F22, 0xa0(SP)
  ldc1  F20, 0x98(SP)
  jr    RA
   addiu SP, SP, 0xb8

func_8010B8B8:
  addiu SP, SP, -0x40
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F26, 0x38(SP)
  sdc1  F24, 0x30(SP)
  sdc1  F22, 0x28(SP)
  jal   func_8007D838
   sdc1  F20, 0x20(SP)
  lw    S1, 0x8c(V0)
  lui   A0, hi(D_801138BC)
  jal   func_80043F7C
   lw    A0, lo(D_801138BC)(A0)
  move  S0, V0
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, S1, 0xc
  addiu A0, S0, 0x24
  lui   A1, 0x4000
  move  A2, A1
  jal   func_800B3160
   move  A3, A1
  lwc1  F0, 0x30(S1)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x30(S0)
  jal   func_80044258
   move  A0, S0
  li    AT, 0x43B40000 ;360.000000
  mtc1  AT, F12
  jal   func_8005A358
   nop
  mtc1  V0, F20
  nop
  cvt.s.w F20, F20
  lui   AT, hi(D_801135F0)
  ldc1  F22, lo(D_801135F0)(AT)
  li    AT, 0x420C0000 ;35.000000
  mtc1  AT, F26
  li    AT, 0x42200000 ;40.000000
  mtc1  AT, F24
L8010B964:
  jal   func_8007DA44
   nop
  lwc1  F0, 0x30(S0)
  cvt.d.s F0, F0
  add.d F0, F0, F22
  cvt.s.d F0, F0
  swc1  F0, 0x30(S0)
  lwc1  F2, 0x30(S1)
  add.s F2, F2, F26
  c.le.s F2, F0
  nop
  bc1t  L8010B9D8
   nop
  add.s F20, F20, F24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F20
  nop
  jal   func_800B39F0
   addiu A0, A0, 0x74
  j     L8010B964
   nop
L8010B9D8:
  jal   func_8004430C
   move  A0, S0
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F26, 0x38(SP)
  ldc1  F24, 0x30(SP)
  ldc1  F22, 0x28(SP)
  ldc1  F20, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x40

func_8010BA0C:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S0, A0
  lui   A0, hi(func_8010B8B8)
  addiu A0, A0, lo(func_8010B8B8)
  li    A1, 4096
  move  A2, R0
  jal   InitProcess
   move  A3, R0
  sw    S0, 0x8c(V0)
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

; Boo event
__PP64_INTERNAL_BOO_SPACE_EVENT:
func_8010BA48:
  addiu SP, SP, -0xb0
  sw    RA, 0x94(SP)
  sw    FP, 0x90(SP)
  sw    S7, 0x8c(SP)
  sw    S6, 0x88(SP)
  sw    S5, 0x84(SP)
  sw    S4, 0x80(SP)
  sw    S3, 0x7c(SP)
  sw    S2, 0x78(SP)
  sw    S1, 0x74(SP)
  sw    S0, 0x70(SP)
  sdc1  F24, 0xa8(SP)
  sdc1  F22, 0xa0(SP)
  jal   func_800558F4
   sdc1  F20, 0x98(SP)
  move  S1, V0
  lui   S3, hi(D_800F93A8)
  addiu S3, S3, lo(D_800F93A8)
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
  li    V0, 4
  beq   A0, V0, L8010C410
   nop
  jal   func_80046D2C
   move  FP, R0
  sw    V0, 0x6c(SP)
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  sll   V0, S1, 0x10
  sra   V1, V0, 0x10
  li    V0, ${v[0]}
  beq   V1, V0, L8010BAE4
   li    V0, ${v[0]}
  beq   V1, V0, L8010BAF0
   li    S7, 1
  j     L8010BAF8
   li    S7, -1
L8010BAE4:
  move  S7, R0
  j     L8010BB58
   li    S0, ${C[0]}
L8010BAF0:
  j     L8010BB58
   li    S0, ${C[1]}
L8010BAF8:
  lui   A0, hi(D_8011373C)
  lw    A0, lo(D_8011373C)(A0)
  jal   func_80043F7C
   li    S0, -1
  move  S2, V0
  jal   func_800442DC
   move  A0, S2
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F20
  nop
  swc1  F20, 0x30(S2)
  sll   A0, S1, 0x10
  jal   func_80054B8C
   sra   A0, A0, 0x10
  move  V1, V0
  lwc1  F0, 0xc(V1)
  lw    A1, 8(V1)
  add.s F20, F0, F20
  mfc1  A2, F20
  lw    A3, 0x10(V1)
  jal   func_800B3160
   addiu A0, S2, 0xc
  j     L8010BB68
   nop
L8010BB58:
  sll   V0, S7, 2
  lui   S2, hi(D_80113740)
  addu  S2, S2, V0
  lw    S2, lo(D_80113740)(S2)
L8010BB68:
  jal   func_8007959C
   li    A0, 235
  jal   func_8010A13C
   move  A0, S2
  sll   A0, S1, 0x10
  jal   func_80054B8C
   sra   A0, A0, 0x10
  move  V1, V0
  sll   V0, S0, 0x10
  sra   S0, V0, 0x10
  li    V0, -1
  beq   S0, V0, L8010BBF4
   move  A0, S2
  addiu A1, V1, 8
  jal   func_800446B4
   li    A2, 10
  li    A0, -1
  li    A1, 8
  jal   func_80056C30
   move  A2, S0
  jal   func_8007D9E0
   li    A0, 10
  jal   func_8007D838
   nop
  li    AT, 0x3FCC0000 ;1.593750
  ori AT, AT, 0xcccd
  mtc1  AT, F12
  nop
  jal   func_80052F70
   move  S0, V0
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
L8010BBF4:
  lh    V0, 0x1e(S3)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 5
  beqz  V0, L8010BC34
   li    A0, 7
  jal   func_8005600C
   li    A1, 1718
  j     L8010C384
   sll   V0, FP, 0x10
L8010BC34:
  move  S0, R0
L8010BC38:
  lh    V1, 0x1e(S3)
L8010BC3C:
  beq   S0, V1, L8010BC68
   sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  bnez  V0, L8010BC78
   li    V0, 4
L8010BC68:
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L8010BC3C
   li    V0, 4
L8010BC78:
  bne   S0, V0, L8010BC90
   li    V0, 8
  li    V0, 1
  sb    V0, 0x20(SP)
  j     L8010BC9C
   sb    R0, 0x60(SP)
L8010BC90:
  sb    V0, 0x20(SP)
  li    V0, 1
  sb    V0, 0x60(SP)
L8010BC9C:
  sb    R0, 0x21(SP)
  move  S0, R0
  lh    V1, 0x1e(S3)
L8010BCA8:
  beq   S0, V1, L8010BCD4
   sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  bnez  V0, L8010BCE4
   li    V0, 4
L8010BCD4:
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L8010BCA8
   li    V0, 4
L8010BCE4:
  beq   S0, V0, L8010BD38
   li    V0, 1
  lh    V0, 0x1e(S3)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0x32
  bnez  V0, L8010BD38
   li    V0, 1
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  slti  V0, V0, 0x63
  bnez  V0, L8010BD44
   li    V0, 8
  li    V0, 1
L8010BD38:
  sb    V0, 0x30(SP)
  j     L8010BD50
   sb    R0, 0x61(SP)
L8010BD44:
  sb    V0, 0x30(SP)
  li    V0, 1
  sb    V0, 0x61(SP)
L8010BD50:
  sb    R0, 0x31(SP)
  li    V0, 1
  sb    V0, 0x63(SP)
  sb    V0, 0x62(SP)
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 7
  li    A1, 1717
  addiu A2, SP, 0x20
  jal   func_80056368
   addiu A3, SP, 0x30
  jal   func_8010537C
   addiu A0, SP, 0x60
  move  S0, V0
  jal   func_80056144
   move  FP, S0
  jal   func_80056168
   sll   S0, S0, 0x10
  sra   S0, S0, 0x10
  li    V0, 2
  beq   S0, V0, L8010C32C
   slti  V0, S0, 3
  bnez  V0, L8010BDC4
   li    V0, 3
  beq   S0, V0, L8010C348
   li    V0, -1
  j     L8010C384
   sll   V0, FP, 0x10
L8010BDC4:
  bltz  S0, L8010C380
   move  S0, R0
  move  A0, R0
L8010BDD0:
  sll   V0, FP, 0x10
  sra   T1, V0, 0x10
  addiu A2, SP, 0x60
  addiu A1, SP, 0x20
  li    A3, 1
  li    T0, 8
  li    T2, 24
L8010BDEC:
  lh    V0, 0x1e(S3)
  beql  S0, V0, L8010BEB0
   addiu S0, S0, 1
  bnez  T1, L8010BE2C
   sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  beqz  V0, L8010BE50
   addu  V0, A2, A0
  j     L8010BE68
   sb    A3, 0(V0)
L8010BE2C:
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  bnez  V0, L8010BE64
   addu  V0, A2, A0
L8010BE50:
  sb    R0, 0(V0)
  sll   V0, A0, 4
  addu  V0, A1, V0
  j     L8010BE74
   sb    A3, 0(V0)
L8010BE64:
  sb    A3, 0(V0)
L8010BE68:
  sll   V0, A0, 4
  addu  V0, A1, V0
  sb    T0, 0(V0)
L8010BE74:
  sll   V0, A0, 4
  addu  V0, A1, V0
  sb    T2, 1(V0)
  sll   V1, S0, 1
  addu  V1, V1, S0
  sll   V1, V1, 2
  addu  V1, V1, S0
  sll   V1, V1, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V1
  lbu   V1, lo(p1_char)(AT)
  sb    V1, 2(V0)
  sb    R0, 3(V0)
  addiu A0, A0, 1
  addiu S0, S0, 1
L8010BEB0:
  slti  V0, S0, 4
  bnez  V0, L8010BDEC
   li    S1, 1
  sb    S1, 0x63(SP)
  addiu V0, SP, 0x40
  sw    V0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 7
  li    A1, 1720
  addiu A2, SP, 0x20
  jal   func_80056368
   addiu A3, SP, 0x30
  sll   A0, FP, 0x10
  sra   A0, A0, 0x10
  jal   func_80105630
   addiu A1, SP, 0x60
  move  S0, V0
  jal   func_80056144
   move  S5, S0
  jal   func_80056168
   sll   S0, S0, 0x10
  sra   S0, S0, 0x10
  li    V1, -1
  beq   S0, V1, L8010BC34
   li    V0, 3
  bnel  S0, V0, L8010BF54
   sll   V0, FP, 0x10
  bne   S7, V1, L8010BF44
   nop
  jal   func_80103AF4
   move  S0, R0
  lui   AT, hi(D_800F851A)
  jal   func_80078EC8
   sb    S1, lo(D_800F851A)(AT)
  j     L8010BDD0
   move  A0, R0
L8010BF44:
  jal   __PP64_INTERNAL_VIEW_MAP
   move  S0, R0
  j     L8010BDD0
   move  A0, R0
L8010BF54:
  bnez  V0, L8010BF74
   nop
  lh    A0, 0x1e(S3)
  jal   func_8004CA34
   li    A1, -5
  lh    A0, 0x1e(S3)
  j     L8010BF88
   li    A1, -5
L8010BF74:
  lh    A0, 0x1e(S3)
  jal   func_8004CA34
   li    A1, -50
  lh    A0, 0x1e(S3)
  li    A1, -50
L8010BF88:
  jal   func_800614B4
   nop
  jal   func_8007D9E0
   li    A0, 30
  jal   func_8010A1DC
   move  A0, S2
  sll   V0, FP, 0x10
  bnez  V0, L8010C2B8
   nop
  lh    V1, 0x1e(S3)
  lui   S4, hi(D_80112330)
  addiu S4, S4, lo(D_80112330)
  sll   V0, V1, 1
  addu  V0, V0, V1
  addu  V0, V0, S4
  sll   V1, S5, 0x10
  sra   S0, V1, 0x10
  addu  V0, V0, S0
  jal   func_8010AB7C
   lbu   A0, 0(V0)
  move  S1, V0
  jal   func_8010A13C
   move  A0, S2
  li    V0, -1
  bnel  S1, V0, L8010C054
   move  S0, R0
  lh    V1, 0x1e(S3)
  sll   V0, V1, 1
  addu  V0, V0, V1
  addu  V0, V0, S4
  addu  V0, V0, S0
  lbu   V1, 0(V0)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   S1, hi(p1_coins)
  addu  S1, S1, V0
  lh    S1, lo(p1_coins)(S1)
  addiu A0, SP, 0x20
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  jal   func_800A5660
   move  A2, S1
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 7
  j     L8010C118
   li    A1, 1727
L8010C054:
  lh    A0, 8(S3)
  sll   V0, S0, 2
L8010C05C:
  addu  V1, V0, S0
  lui   V0, hi(D_801123D4)
  addu  V0, V0, V1
  lbu   V0, lo(D_801123D4)(V0)
  slt   V0, A0, V0
  bnel  V0, R0, L8010C0C4
   addiu S0, S0, 1
  lui   V0, hi(D_801123D5)
  addu  V0, V0, V1
  lbu   V0, lo(D_801123D5)(V0)
  slt   V0, V0, A0
  bnel  V0, R0, L8010C0C4
   addiu S0, S0, 1
  lui   V0, hi(D_801123D6)
  addu  V0, V0, V1
  lbu   V0, lo(D_801123D6)(V0)
  slt   V0, S1, V0
  bnel  V0, R0, L8010C0C4
   addiu S0, S0, 1
  lui   V0, hi(D_801123D7)
  addu  V0, V0, V1
  lbu   V0, lo(D_801123D7)(V0)
  slt   V0, V0, S1
  beql  V0, R0, L8010C0D4
   addiu A0, SP, 0x20
  addiu S0, S0, 1
L8010C0C4:
  sltiu V0, S0, 0x18
  bnez  V0, L8010C05C
   sll   V0, S0, 2
  addiu A0, SP, 0x20
L8010C0D4:
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  jal   func_800A5660
   move  A2, S1
  sll   V0, S0, 2
  addu  V0, V0, S0
  lui   AT, hi(D_801123D8)
  addu  AT, AT, V0
  lbu   V0, lo(D_801123D8)(AT)
  sll   V0, V0, 1
  lui   A1, hi(D_8011243E)
  addu  A1, A1, V0
  lh    A1, lo(D_8011243E)(A1)
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 7
L8010C118:
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  mtc1  S1, F24
  nop
  cvt.s.w F24, F24
  li    AT, 0x42B40000 ;90.000000
  mtc1  AT, F0
  nop
  div.s F24, F24, F0
  mtc1  R0, F20
  li    A0, 24
  jal   func_80043510
   move  A1, R0
  lui   AT, hi(D_801138BC)
  sw    V0, lo(D_801138BC)(AT)
  jal   func_80043DAC
   move  A0, V0
  lui   A0, hi(D_801138BC)
  jal   func_800442DC
   lw    A0, lo(D_801138BC)(A0)
  lh    V1, 0x1e(S3)
  lui   A0, hi(D_80112330)
  addiu A0, A0, lo(D_80112330)
  sll   V0, V1, 1
  addu  V0, V0, V1
  addu  V0, V0, A0
  sll   V1, S5, 0x10
  sra   V1, V1, 0x10
  addu  V0, V0, V1
  lbu   A0, 0(V0)
  li    A1, 3
  jal   func_800672BC
   li    A2, 5
  beqz  S1, L8010C234
   move  S4, V0
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F22
  lui   S6, hi(D_80112330)
  addiu S6, S6, lo(D_80112330)
  sll   V0, S5, 0x10
  sra   S0, V0, 0x10
  add.s F20, F20, F24
L8010C1D4:
  c.le.s F22, F20
  nop
  bc1f  L8010C224
   nop
  sub.s F20, F20, F22
  jal   func_8010BA0C
   move  A0, S2
  lh    A0, 0x1e(S3)
  jal   func_800614B4
   li    A1, 1
  lh    V1, 0x1e(S3)
  sll   V0, V1, 1
  addu  V0, V0, V1
  addu  V0, V0, S6
  addu  V0, V0, S0
  lbu   A0, 0(V0)
  li    A1, -1
  jal   func_8006135C
   move  A2, R0
  addiu S1, S1, -1
L8010C224:
  jal   func_8007DA44
   nop
  bnel  S1, R0, L8010C1D4
   add.s F20, F20, F24
L8010C234:
  jal   func_8006735C
   move  A0, S4
  jal   func_8007D9E0
   li    A0, 20
  lui   A0, hi(D_801138BC)
  jal   func_8004430C
   lw    A0, lo(D_801138BC)(A0)
  jal   func_8005DC3C
   li    A0, -1
  lw    A0, 0x24(V0)
  jal   func_8005670C
   addiu A0, A0, 0x18
  li    A0, -1
  li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 5
  lh    V1, 0x1e(S3)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 259
  jal   func_8007D9E0
   li    A0, 45
  j     L8010C30C
   li    V0, -1
L8010C2B8:
  lh    V1, 0x1e(S3)
  lui   A0, hi(D_80112330)
  addiu A0, A0, lo(D_80112330)
  sll   V0, V1, 1
  addu  V0, V0, V1
  addu  V0, V0, A0
  sll   V1, S5, 0x10
  sra   V1, V1, 0x10
  addu  V0, V0, V1
  jal   func_8010A27C
   lbu   A0, 0(V0)
  jal   func_8010A13C
   move  A0, S2
  li    V0, 1
  lui   AT, hi(D_801119D0)
  sw    V0, lo(D_801119D0)(AT)
  jal   func_80103968
   move  A0, S2
  lui   AT, hi(D_801119D0)
  sw    R0, lo(D_801119D0)(AT)
  li    V0, -1
L8010C30C:
  bne   S7, V0, L8010C384
   sll   V0, FP, 0x10
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  j     L8010C384
   sll   V0, FP, 0x10
L8010C32C:
  jal   func_8010A1DC
   move  A0, S2
  li    A0, 7
  jal   func_8005600C
   li    A1, 1719
  j     L8010C384
   sll   V0, FP, 0x10
L8010C348:
  bne   S7, V0, L8010C370
   nop
  jal   func_80103AF4
   move  S0, R0
  li    V0, 1
  lui   AT, hi(D_800F851A)
  jal   func_80078EC8
   sb    V0, lo(D_800F851A)(AT)
  j     L8010BC38
   nop
L8010C370:
  jal   __PP64_INTERNAL_VIEW_MAP
   move  S0, R0
  j     L8010BC38
   nop
L8010C380:
  sll   V0, FP, 0x10
L8010C384:
  sra   V0, V0, 0x10
  li    V1, 2
  beq   V0, V1, L8010C39C
   nop
  jal   func_8010A1DC
   move  A0, S2
L8010C39C:
  jal   func_8005670C
   addiu A0, S2, 0x18
  li    V0, -1
  bne   S7, V0, L8010C3B8
   nop
  jal   func_8004430C
   move  A0, S2
L8010C3B8:
  lw    T3, 0x6c(SP)
  beqz  T3, L8010C3D4
   li    V0, -1
  lh    A0, 0x1e(S3)
  jal   func_8004655C
   nop
  li    V0, -1
L8010C3D4:
  beq   S7, V0, L8010C410
   nop
  jal   func_8007D838
   nop
  li    AT, 0x3FA60000 ;1.296875
  ori AT, AT, 0x6666
  mtc1  AT, F12
  nop
  jal   func_80052F70
   move  S0, V0
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
L8010C410:
  lw    RA, 0x94(SP)
  lw    FP, 0x90(SP)
  lw    S7, 0x8c(SP)
  lw    S6, 0x88(SP)
  lw    S5, 0x84(SP)
  lw    S4, 0x80(SP)
  lw    S3, 0x7c(SP)
  lw    S2, 0x78(SP)
  lw    S1, 0x74(SP)
  lw    S0, 0x70(SP)
  ldc1  F24, 0xa8(SP)
  ldc1  F22, 0xa0(SP)
  ldc1  F20, 0x98(SP)
  jr    RA
   addiu SP, SP, 0xb0

; Gate event
func_8010C44C:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   func_80106618
   move  A0, R0
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

; Gate event
func_8010C468:
/*  */  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   func_80106618
   li    A0, 1
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_8010C484:
  addiu SP, SP, -0x40
  sw    RA, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  sdc1  F22, 0x38(SP)
  sdc1  F20, 0x30(SP)
  move  S2, A0
  mtc1  A1, F20
  mtc1  A2, F22
  lw    S0, 0x50(SP)
  move  S4, A3
  lui   V0, hi(func_8010C5C4)
  addiu V0, V0, lo(func_8010C5C4)
  sw    V0, 0x10(SP)
  li    A0, 500
  move  A1, R0
  move  A2, R0
  jal   func_80076598
   li    A3, -1
  move  S3, V0
  li    A0, 32
  jal   func_80027154
   li    A1, 31000
  move  S1, V0
  sw    S1, 0x50(S3)
  li    AT, 0x437F0000 ;255.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0xc(S1)
  swc1  F20, 0x10(S1)
  swc1  F22, 0x14(S1)
  move  A0, S1
  jal   func_800B3170
   move  A1, S0
  sw    R0, 0x10(SP)
  lui A0, 0xa
  ori A0, A0, 0x15c
  move  A1, R0
  lui   A2, 0x3f80
  jal   func_800437F8
   move  A3, R0
  move  S0, V0
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  move  A1, R0
  move  A2, A1
  jal   func_800297E8
   move  A3, A1
  lwc1  F0, 0(S2)
  swc1  F0, 0xc(S0)
  lwc1  F0, 4(S2)
  swc1  F0, 0x10(S0)
  lwc1  F0, 8(S2)
  swc1  F0, 0x14(S0)
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  jal   func_8002D124
   lh    A0, 0(V0)
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   li    A1, 255
  sw    S0, 0x18(S1)
  sh    S4, 0x1c(S1)
  move  V0, S3
  lw    RA, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  ldc1  F22, 0x38(SP)
  ldc1  F20, 0x30(SP)
  jr    RA
   addiu SP, SP, 0x40

func_8010C5C4:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S2, A0
  lw    S0, 0x50(S2)
  lw    S1, 0x18(S0)
  addiu A1, S1, 0xc
  move  A0, A1
  jal   func_800B31C0
   move  A2, S0
  lwc1  F0, 0x2c(S1)
  lwc1  F2, 0x10(S0)
  add.s F0, F0, F2
  swc1  F0, 0x2c(S1)
  swc1  F0, 0x28(S1)
  swc1  F0, 0x24(S1)
  lwc1  F0, 0xc(S0)
  lwc1  F2, 0x14(S0)
  sub.s F0, F0, F2
  mtc1  R0, F2
  nop
  c.lt.s F0, F2
  nop
  nop
  bc1f  L8010C668
   swc1  F0, 0xc(S0)
  swc1  F2, 0xc(S0)
  lhu   V0, 0x1c(S0)
  beqz  V0, L8010C660
   move  A0, S2
  lw    A0, 0x18(S0)
  jal   func_8004430C
   nop
  jal   func_8007695C
   move  A0, S2
  j     L8010C6C4
   nop
L8010C660:
  jal   func_80076AFC
   li    A1, 8
L8010C668:
  lw    V0, 0x3c(S1)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  lwc1  F2, 0xc(S0)
  li    AT, 0x4F000000 ;2147483648.000000
  mtc1  AT, F0
  nop
  c.le.s F0, F2
  nop
  nop
  bc1tl L8010C6A8
   sub.s F0, F2, F0
  trunc.w.s F0, F2
  mfc1  A1, F0
  j     L8010C6BC
   nop
L8010C6A8:
  lui   V0, 0x8000
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  or    A1, A1, V0
L8010C6BC:
  jal   func_8002D0A0
   andi  A1, A1, 0xff
L8010C6C4:
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_8010C6DC:
  addiu SP, SP, -0x128
  sw    RA, 0x110(SP)
  sw    S7, 0x10c(SP)
  sw    S6, 0x108(SP)
  sw    S5, 0x104(SP)
  sw    S4, 0x100(SP)
  sw    S3, 0xfc(SP)
  sw    S2, 0xf8(SP)
  sw    S1, 0xf4(SP)
  sw    S0, 0xf0(SP)
  sdc1  F22, 0x120(SP)
  sdc1  F20, 0x118(SP)
  lui   S7, hi(D_800F93A8)
  addiu S7, S7, lo(D_800F93A8)
  jal   func_8005DC3C
   li    A0, -1
  jal   func_8010D37C
   move  S3, V0
  li    A0, 113
  jal   func_80043510
   move  A1, R0
  move  S1, V0
  lw    V0, 0x3c(S1)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  move  A1, R0
  move  A2, A1
  jal   func_800297E8
   move  A3, A1
  lw    A1, 0x24(S3)
  addiu A0, S1, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  li    AT, 0x42C80000 ;100.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0x10(S1)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F22
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F20
  lwc1  F0, 0x10(S1)
  sub.s F0, F0, F22
L8010C788:
  jal   func_8007DA44
   swc1  F0, 0x10(S1)
  lwc1  F0, 0x10(S1)
  c.lt.s F20, F0
  nop
  nop
  bc1tl L8010C788
   sub.s F0, F0, F22
  jal   func_8007959C
   li    A0, 870
  lui   A0, hi(D_800FA188)
  lh    A0, lo(D_800FA188)(A0)
  jal   func_800114E8
   li    A1, 180
  li    A0, -1
  li    A1, 3
  jal   func_800672BC
   li    A2, 5
  move  S5, V0
  li    S2, 180
  move  S0, R0
  lui   S6, hi(D_80113658)
  addiu S6, S6, lo(D_80113658)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F22
  li    AT, 0x41700000 ;15.000000
  mtc1  AT, F20
  addiu S4, SP, 0x28
L8010C7F8:
  addiu A3, SP, 0x28
  lui   A2, hi(D_801135F8)
  addiu A2, A2, lo(D_801135F8)
L8010C804:
  lw    V0, 0(A2)
  lw    V1, 4(A2)
  lw    A0, 8(A2)
  lw    A1, 0xc(A2)
  sw    V0, 0(A3)
  sw    V1, 4(A3)
  sw    A0, 8(A3)
  sw    A1, 0xc(A3)
  addiu A2, A2, 0x10
  bne   A2, S6, L8010C804
   addiu A3, A3, 0x10
  mtc1  S2, F12
  nop
  jal   func_800B83C0
   cvt.s.w F12, F12
  add.s F0, F0, F0
  add.s F0, F0, F22
  andi  V0, S0, 1
  beqz  V0, L8010C8BC
   swc1  F0, 0x10(S1)
  lw    A1, 0xc(S1)
  mfc1  A2, F0
  lw    A3, 0x14(S1)
  jal   func_800B3160
   addiu A0, SP, 0x18
  lwc1  F0, 0x18(SP)
  sub.s F0, F0, F20
  swc1  F0, 0x18(SP)
  lwc1  F0, 0x1c(SP)
  add.s F0, F0, F20
  swc1  F0, 0x1c(SP)
  srl   V1, S0, 0x1f
  addu  V1, S0, V1
  sra   V1, V1, 1
  andi  V1, V1, 7
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, S4, V0
  sw    V0, 0x10(SP)
  addiu A0, SP, 0x18
  lui A1, 0x3dcc
  ori A1, A1, 0xcccd
  lui   A2, 0x4000
  jal   func_8010C484
   li    A3, 1
L8010C8BC:
  jal   func_8007DA44
   addiu S2, S2, 0x14
  slti  V0, S2, 0x438
  bnez  V0, L8010C7F8
   addiu S0, S0, 1
  jal   func_8006735C
   move  A0, S5
  li    A0, 255
  li    A1, 255
  jal   func_8008F624
   li    A2, 255
  lh    V0, 0xa(S7)
  sll   V0, V0, 1
  addu  V0, V0, S7
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  lui   A0, hi(D_80111984)
  addu  A0, A0, V0
  lh    A0, lo(D_80111984)(A0)
  addiu A1, SP, 0x88
  jal   func_80054C78
   addiu A2, SP, 0x8a
  lhu   V1, 0x88(SP)
  sh    V1, 0x10(S3)
  lhu   V0, 0x8a(SP)
  sh    V0, 0x12(S3)
  sh    V1, 0x14(S3)
  addiu V0, V0, 1
  jal   func_800650BC
   sh    V0, 0x16(S3)
  jal   func_80078FF8
   nop
  lui   S4, hi(D_80113658)
  addiu S4, S4, lo(D_80113658)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F22
  li    AT, 0x41700000 ;15.000000
  mtc1  AT, F20
  addiu S3, SP, 0x90
  addiu A3, SP, 0x90
L8010C95C:
  lui   A2, hi(D_801135F8)
  addiu A2, A2, lo(D_801135F8)
L8010C964:
  lw    V0, 0(A2)
  lw    V1, 4(A2)
  lw    A0, 8(A2)
  lw    A1, 0xc(A2)
  sw    V0, 0(A3)
  sw    V1, 4(A3)
  sw    A0, 8(A3)
  sw    A1, 0xc(A3)
  addiu A2, A2, 0x10
  bne   A2, S4, L8010C964
   addiu A3, A3, 0x10
  mtc1  S2, F12
  nop
  jal   func_800B83C0
   cvt.s.w F12, F12
  add.s F0, F0, F0
  add.s F0, F0, F22
  andi  V0, S0, 1
  beqz  V0, L8010CA1C
   swc1  F0, 0x10(S1)
  lw    A1, 0xc(S1)
  mfc1  A2, F0
  lw    A3, 0x14(S1)
  jal   func_800B3160
   addiu A0, SP, 0x18
  lwc1  F0, 0x18(SP)
  sub.s F0, F0, F20
  swc1  F0, 0x18(SP)
  lwc1  F0, 0x1c(SP)
  add.s F0, F0, F20
  swc1  F0, 0x1c(SP)
  srl   V1, S0, 0x1f
  addu  V1, S0, V1
  sra   V1, V1, 1
  andi  V1, V1, 7
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, S3, V0
  sw    V0, 0x10(SP)
  addiu A0, SP, 0x18
  lui   A1, 0x3dcc
  ori   A1, A1, 0xcccd
  lui   A2, 0x4000
  jal   func_8010C484
   li    A3, 1
L8010CA1C:
  jal   func_8007DA44
   addiu S0, S0, 1
  addiu S2, S2, 0x14
  li    V0, 1280
  bnel  S2, V0, L8010C95C
   addiu A3, SP, 0x90
  jal   func_800115B4
   move  A0, R0
  j     L8010C95C
   addiu A3, SP, 0x90
  lw    RA, 0x110(SP)
  lw    S7, 0x10c(SP)
  lw    S6, 0x108(SP)
  lw    S5, 0x104(SP)
  lw    S4, 0x100(SP)
  lw    S3, 0xfc(SP)
  lw    S2, 0xf8(SP)
  lw    S1, 0xf4(SP)
  lw    S0, 0xf0(SP)
  ldc1  F22, 0x120(SP)
  ldc1  F20, 0x118(SP)
  jr    RA
   addiu SP, SP, 0x128

func_8010CA78:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  li    V0, 1
  lui   AT, hi(D_800CCC16)
  sb    V0, lo(D_800CCC16)(AT)
  lui   V0, hi(D_800F93B2)
  lh    V0, lo(D_800F93B2)(V0)
  sll   V0, V0, 1
  lui   AT, hi(D_800F93B4)
  addu  AT, AT, V0
  lh    V0, lo(D_800F93B4)(AT)
  sll   V0, V0, 1
  lui   A0, hi(D_80111984)
  addu  A0, A0, V0
  lh    A0, lo(D_80111984)(A0)
  jal   func_800556F4
   li    A1, 1
  lui   AT, hi(D_800CCC16)
  jal   func_800670B0
   sb    R0, lo(D_800CCC16)(AT)
  sll   V0, V0, 0x10
  bltz  V0, L8010CADC
   nop
  jal   func_8007D9E0
   li    A0, -1
L8010CADC:
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_8010CAE8:
  addiu SP, SP, -0x28
  sw    RA, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S1, hi(D_800F93C6)
  lh    S1, lo(D_800F93C6)(S1)
  jal   func_8005DC3C
   li    A0, -1
  jal   func_8010D37C
   move  S0, V0
  jal   func_80047A50
   move  A0, S1
  jal   func_8006836C
   li    A0, 4
  jal   func_80046F98
   move  A0, S1
  jal   func_80078FF8
   nop
  jal   func_80064FF8
   nop
  jal   func_8007D9E0
   li    A0, 5
  li    A0, -1
  jal   func_80067170
   li    A1, 3
  jal   func_8007D9E0
   li    A0, 25
  move  A0, S1
  li    A1, 2
  jal   func_8005DD68
   move  A2, R0
  sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   A0, hi(D_800FD2E4)
  addu  A0, A0, V0
  lw    A0, lo(D_800FD2E4)(A0)
  lui   A1, 0x4000
  lui A2, 0xbe99
  jal   func_80059120
   ori A2, A2, 0x999a
  jal   func_8007D9E0
   li    A0, 5
  jal   func_80047BB8
   move  A0, S1
  li    V0, 2
  sw    V0, 0x10(SP)
  move  A0, S1
  li    A1, -1
  move  A2, R0
  jal   func_8005DDEC
   li    A3, 10
  jal   func_8007D9E0
   li    A0, 20
  jal   func_80053F7C
   nop
  jal   func_8004CDE0
   nop
  jal   func_8004CE80
   nop
  jal   func_8004D5B0
   nop
  jal   func_80053F54
   nop
  jal   func_800683BC
   li    A0, 4
  jal   func_80046F98
   move  A0, S1
  sll   V0, V0, 0x10
  jal   func_80079848
   sra   A0, V0, 0x10
  jal   func_80046EDC
   move  A0, S1
  jal   func_80060210
   li    A0, 25
L8010CC1C:
  jal   func_800609D8
   nop
  beqz  V0, L8010CC3C
   nop
  jal   func_8007DA44
   nop
  j     L8010CC1C
   nop
L8010CC3C:
  jal   func_80062824
   move  A0, R0
  jal   func_80060210
   li    A0, 26
L8010CC4C:
  jal   func_800609D8
   nop
  beqz  V0, L8010CC6C
   move  A0, S1
  jal   func_8007DA44
   nop
  j     L8010CC4C
   nop
L8010CC6C:
  jal   func_80047D78
   li    A1, -1
  lhu   A0, 0x10(S0)
  jal   func_80054BB0
   lhu   A1, 0x12(S0)
  sll   S0, V0, 0x10
  sra   S0, S0, 0x10
  jal   func_800558E8
   move  A0, S0
  move  A0, S0
  jal   func_800556F4
   li    A1, 1
  jal   func_800670B0
   nop
  sll   V0, V0, 0x10
  bltz  V0, L8010CCB8
   nop
  jal   func_8007D9E0
   li    A0, -1
L8010CCB8:
  jal   func_80045650
   move  A0, S1
  lw    RA, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

func_8010CCD4:
  addiu SP, SP, -0x38
  sw    RA, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  sdc1  F22, 0x30(SP)
  sdc1  F20, 0x28(SP)
  jal   func_8007D838
   li    S1, 1
  lw    S0, 0x8c(V0)
  lh    V0, 4(S0)
  lh    V1, 0(S0)
  subu  V0, V0, V1
  mtc1  V0, F22
  nop
  cvt.s.w F22, F22
  lh    V0, 8(S0)
  mtc1  V0, F0
  nop
  cvt.s.w F0, F0
  div.s F22, F22, F0
  lh    V0, 6(S0)
  lh    V1, 2(S0)
  subu  V0, V0, V1
  mtc1  V0, F20
  nop
  cvt.s.w F20, F20
  div.s F20, F20, F0
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
  addiu A1, SP, 0x10
  jal   func_8006296C
   addiu A2, SP, 0x14
  lh    V0, 8(S0)
  blez  V0, L8010CE4C
   nop
  li    S2, -1
L8010CD68:
  lh    A0, 0xa(S0)
  beq   A0, S2, L8010CDDC
   move  A1, R0
  lh    V0, 0(S0)
  mtc1  V0, F2
  nop
  cvt.s.w F2, F2
  mtc1  S1, F4
  nop
  cvt.s.w F4, F4
  mul.s F0, F22, F4
  add.s F2, F2, F0
  trunc.w.s F0, F2
  mfc1  A2, F0
  nop
  sll   A2, A2, 0x10
  lh    V0, 2(S0)
  mtc1  V0, F0
  nop
  cvt.s.w F0, F0
  mul.s F4, F20, F4
  add.s F0, F0, F4
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
L8010CDDC:
  mtc1  S1, F4
  nop
  cvt.s.w F4, F4
  mul.s F0, F22, F4
  lwc1  F2, 0x10(SP)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  mul.s F4, F20, F4
  lwc1  F0, 0x14(SP)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A2, F0
  nop
  sll   A2, A2, 0x10
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
  sra   A1, A1, 0x10
  jal   func_800629AC
   sra   A2, A2, 0x10
  jal   func_8007DA44
   addiu S1, S1, 1
  lh    V0, 8(S0)
  slt   V0, V0, S1
  beqz  V0, L8010CD68
   nop
L8010CE4C:
  lh    A0, 0xa(S0)
  li    V0, -1
  beq   A0, V0, L8010CE6C
   nop
  lh    A2, 4(S0)
  lh    A3, 6(S0)
  jal   func_80081AD0
   move  A1, R0
L8010CE6C:
  lh    V0, 4(S0)
  mtc1  V0, F0
  nop
  cvt.s.w F0, F0
  lwc1  F2, 0x10(SP)
  add.s F0, F0, F2
  lh    V0, 0(S0)
  mtc1  V0, F2
  nop
  cvt.s.w F2, F2
  sub.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lh    V0, 6(S0)
  mtc1  V0, F0
  nop
  cvt.s.w F0, F0
  lwc1  F2, 0x14(SP)
  add.s F0, F0, F2
  lh    V0, 2(S0)
  mtc1  V0, F2
  nop
  cvt.s.w F2, F2
  sub.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
  sra   A1, A1, 0x10
  jal   func_800629AC
   sra   A2, A2, 0x10
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  ldc1  F22, 0x30(SP)
  ldc1  F20, 0x28(SP)
  jr    RA
   addiu SP, SP, 0x38

func_8010CF20:
  addiu SP, SP, -0x30
  sw    RA, 0x2c(SP)
  sw    S6, 0x28(SP)
  sw    S5, 0x24(SP)
  sw    S4, 0x20(SP)
  sw    S3, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S6, A0
  move  S1, A1
  move  S2, A2
  move  S3, A3
  lhu   S4, 0x42(SP)
  lhu   S5, 0x46(SP)
  lui   A0, hi(func_8010CCD4)
  addiu A0, A0, lo(func_8010CCD4)
  li    A1, 16385
  move  A2, R0
  jal   InitProcess
   li    A3, 64
  move  S0, V0
  lw    A0, 0x18(S0)
  jal   func_80068480
   li    A1, 16
  sw    V0, 0x8c(S0)
  sh    S1, 0(V0)
  sh    S2, 2(V0)
  sh    S3, 4(V0)
  sh    S4, 6(V0)
  sh    S5, 8(V0)
  sh    S6, 0xa(V0)
  move  V0, S0
  lw    RA, 0x2c(SP)
  lw    S6, 0x28(SP)
  lw    S5, 0x24(SP)
  lw    S4, 0x20(SP)
  lw    S3, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x30

func_8010CFCC:
  addiu SP, SP, -0x30
  sw    RA, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S2, hi(D_800F93A8)
  addiu S2, S2, lo(D_800F93A8)
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  move  S3, V0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sll   V0, V0, 2
  lui   A0, hi(D_8011237C)
  addu  A0, A0, V0
  jal   func_80017680
   lw    A0, lo(D_8011237C)(A0)
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S4, V0
  jal   func_80017800
   move  A0, S0
  sll   V0, S3, 0x10
  sra   S0, V0, 0x10
  sll   A2, S4, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  lui   V0, hi(D_800F93C6)
  lhu   V0, lo(D_800F93C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L8010D0B4
   move  A0, S0
  move  A1, R0
  j     L8010D0C4
   li    A2, 4097
L8010D0B4:
  sll   A0, S3, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  li    A2, 4096
L8010D0C4:
  jal   func_80082418
   sll   S0, S3, 0x10
  sra   S0, S0, 0x10
  lh    V0, 0x1e(S2)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  move  S0, R0
  sll   S1, S3, 0x10
  sll   A2, S0, 4
L8010D140:
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0x11
  bnel  V0, R0, L8010D140
   sll   A2, S0, 4
  sll   S0, S3, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  move  A0, S0
  move  A1, R0
  li    A2, 1
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  jal   func_8007D9E0
   li    A0, 20
  jal   func_8007959C
   li    A0, 885
  jal   func_8007D838
   nop
  move  S1, V0
  lh    V0, 0x1e(S2)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 30
  sw    V0, 0x14(SP)
  move  A0, S0
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S1
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   li    S1, 255
  jal   func_8007D9E0
   li    A0, 10
  move  A0, S0
  move  A1, R0
  move  A2, R0
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  li    S0, 1
  sll   A1, S0, 1
L8010D2A0:
  addu  A1, A1, S0
  sll   A1, A1, 3
  addu  A1, A1, S0
  subu  A1, S1, A1
  sll   A1, A1, 0x10
  lh    A0, 0x1e(S2)
  jal   func_800629F0
   sra   A1, A1, 0x10
  lh    A0, 0x1e(S2)
  lui   A2, 0x4000
  jal   func_800628C0
   move  A1, R0
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010D2A0
   sll   A1, S0, 1
  lh    A0, 0x1e(S2)
  jal   func_800629F0
   move  A1, R0
  li    A0, -1
  li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  lh    V1, 0x1e(S2)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 259
  jal   func_8007D9E0
   li    A0, 50
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  sll   A0, S3, 0x10
  jal   func_8007F8B0
   sra   A0, A0, 0x10
  sll   A0, S4, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  lw    RA, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x30

func_8010D37C:
  addiu SP, SP, -0x38
  sw    RA, 0x34(SP)
  sw    S6, 0x30(SP)
  sw    S5, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S5, hi(D_800F93A8)
  addiu S5, S5, lo(D_800F93A8)
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  move  S2, V0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sll   V0, V0, 2
  lui   A0, hi(D_8011237C)
  addu  A0, A0, V0
  jal   func_80017680
   lw    A0, lo(D_8011237C)(A0)
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S6, V0
  jal   func_80017800
   move  A0, S0
  sll   V0, S2, 0x10
  sra   S0, V0, 0x10
  sll   A2, S6, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  lui   V0, hi(D_800F93C6)
  lhu   V0, lo(D_800F93C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L8010D46C
   move  A0, S0
  move  A1, R0
  j     L8010D47C
   li    A2, 4097
L8010D46C:
  sll   A0, S2, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  li    A2, 4096
L8010D47C:
  jal   func_80082418
   sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  lh    V0, 0x1e(S5)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  move  S1, R0
  sll   S0, S2, 0x10
  sll   A2, S1, 4
L8010D4F8:
  sra   A0, S0, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S1, S1, 1
  slti  V0, S1, 0x11
  bnel  V0, R0, L8010D4F8
   sll   A2, S1, 4
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  move  A0, S0
  move  A1, R0
  li    A2, 1
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  jal   func_8007D9E0
   li    A0, 20
  jal   func_8007959C
   li    A0, 885
  lh    V0, 0x1e(S5)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112544)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112544)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112548)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112548)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 30
  sw    V0, 0x14(SP)
  move  A0, S0
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  jal   func_8007D9E0
   li    A0, 20
  li    S1, 1
  li    S4, 255
  sll   S3, S2, 0x10
  sll   S0, S1, 1
L8010D61C:
  addu  S0, S0, S1
  sll   S0, S0, 3
  addu  S0, S0, S1
  subu  S0, S4, S0
  sll   A1, S0, 0x10
  lh    A0, 0x1e(S5)
  jal   func_800629F0
   sra   A1, A1, 0x10
  sra   A0, S3, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, S0, 0xffff
  jal   func_8007DA44
   addiu S1, S1, 1
  slti  V0, S1, 0xa
  bnez  V0, L8010D61C
   sll   S0, S1, 1
  lh    A0, 0x1e(S5)
  jal   func_800629F0
   move  A1, R0
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 2
  jal   func_8007F8B0
   move  A0, S0
  sll   A0, S6, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  lw    RA, 0x34(SP)
  lw    S6, 0x30(SP)
  lw    S5, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x38

func_8010D6C8:
  addiu SP, SP, -0x30
/*  */  sw    RA, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S3, hi(D_800F93A8)
  addiu S3, S3, lo(D_800F93A8)
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  move  S2, V0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sll   V0, V0, 2
  lui   A0, hi(D_8011237C)
  addu  A0, A0, V0
  jal   func_80017680
   lw    A0, lo(D_8011237C)(A0)
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S4, V0
  jal   func_80017800
   move  A0, S0
  sll   V0, S2, 0x10
  sra   S0, V0, 0x10
  sll   A2, S4, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  lui   V0, hi(D_800F93C6)
  lhu   V0, lo(D_800F93C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L8010D7B0
   move  A0, S0
  move  A1, R0
  j     L8010D7C0
   li    A2, 4097
L8010D7B0:
  sll   A0, S2, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  li    A2, 4096
L8010D7C0:
  jal   func_80082418
   sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  lh    V0, 0x1e(S3)
  sll   V0, V0, 3
  lui   AT, hi(D_80112564)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112564)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112568)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112568)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  move  S0, R0
  sll   S1, S2, 0x10
  sll   A2, S0, 4
L8010D83C:
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0x11
  bnel  V0, R0, L8010D83C
   sll   A2, S0, 4
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  move  A0, S0
  move  A1, R0
  li    A2, 1
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  jal   func_8007D9E0
   li    A0, 20
  jal   func_8007959C
   li    A0, 885
  jal   func_8007D838
   nop
  move  S1, V0
  lh    V0, 0x1e(S3)
  sll   V0, V0, 3
  lui   AT, hi(D_80112564)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112564)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112568)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112568)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 30
  sw    V0, 0x14(SP)
  move  A0, S0
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S1
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   li    S0, 1
  sll   S1, S2, 0x10
  li    S3, 255
  sll   A2, S0, 1
L8010D974:
  addu  A2, A2, S0
  sll   A2, A2, 3
  addu  A2, A2, S0
  subu  A2, S3, A2
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010D974
   sll   A2, S0, 1
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  jal   func_8007F8B0
   move  A0, S0
  sll   A0, S4, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  lw    RA, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x30

func_8010D9F4:
  addiu SP, SP, -0x40
  sw    RA, 0x30(SP)
  sw    S5, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  sdc1  F20, 0x38(SP)
  lui   S4, hi(D_800F93A8)
  addiu S4, S4, lo(D_800F93A8)
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  move  S2, V0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sll   V0, V0, 2
  lui   A0, hi(D_8011237C)
  addu  A0, A0, V0
  jal   func_80017680
   lw    A0, lo(D_8011237C)(A0)
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S5, V0
  jal   func_80017800
   move  A0, S0
  sll   V0, S2, 0x10
  sra   S0, V0, 0x10
  sll   A2, S5, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  lui   V0, hi(D_800F93C6)
  lhu   V0, lo(D_800F93C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L8010DAE4
   move  A0, S0
  move  A1, R0
  j     L8010DAF4
   li    A2, 4097
L8010DAE4:
  sll   A0, S2, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  li    A2, 4096
L8010DAF4:
  jal   func_80082418
   sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  lh    V0, 0x1e(S4)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  move  S0, R0
  sll   S1, S2, 0x10
  sll   A2, S0, 4
L8010DB70:
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0x11
  bnel  V0, R0, L8010DB70
   sll   A2, S0, 4
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  move  A0, S0
  move  A1, R0
  li    A2, 1
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  jal   func_8007D9E0
   li    A0, 20
  jal   func_8007959C
   li    A0, 885
  jal   func_8007D838
   li    S3, 255
  move  S1, V0
  lh    V0, 0x1e(S4)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 30
  sw    V0, 0x14(SP)
  move  A0, S0
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S1
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   sll   S1, S2, 0x10
  jal   func_8007D9E0
   li    A0, 10
  move  A0, S0
  move  A1, R0
  move  A2, R0
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  li    S0, 1
  sll   A2, S0, 1
L8010DCD0:
  addu  A2, A2, S0
  sll   A2, A2, 3
  addu  A2, A2, S0
  subu  A2, S3, A2
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010DCD0
   sll   A2, S0, 1
  sll   A0, S2, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   V1, hi(p1_item)
  addu  V1, V1, V0
  lb    V1, lo(p1_item)(V1)
  li    V0, 7
  bne   V1, V0, L8010DD54
   move  S0, R0
  jal   func_8007959C
   li    A0, 873
  move  S0, R0
L8010DD54:
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F20
L8010DD5C:
  mtc1  S0, F12
  nop
  cvt.s.w F12, F12
  jal   func_800B83C0
   addiu S0, S0, 0x1e
  lh    A0, 0x1e(S4)
  mul.s F0, F0, F20
  mfc1  A1, F0
  jal   func_80062A28
   nop
  jal   func_8007DA44
   nop
  slti  V0, S0, 0x439
  bnez  V0, L8010DD5C
   nop
  li    S1, 1
  li    S3, 255
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F20
  sll   A1, S1, 1
L8010DDAC:
  addu  A1, A1, S1
  sll   A1, A1, 3
  addu  A1, A1, S1
  subu  A1, S3, A1
  sll   A1, A1, 0x10
  lh    A0, 0x1e(S4)
  jal   func_800629F0
   sra   A1, A1, 0x10
  mtc1  S0, F12
  nop
  cvt.s.w F12, F12
  jal   func_800B83C0
   addiu S0, S0, 0x1e
  lh    A0, 0x1e(S4)
  mul.s F0, F0, F20
  mfc1  A1, F0
  nop
  jal   func_80062A28
   addiu S1, S1, 1
  jal   func_8007DA44
   nop
  slti  V0, S1, 0xa
  bnez  V0, L8010DDAC
   sll   A1, S1, 1
  lh    A0, 0x1e(S4)
  jal   func_800629F0
   move  A1, R0
  sll   A0, S2, 0x10
  jal   func_8007F8B0
   sra   A0, A0, 0x10
  sll   A0, S5, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  lw    RA, 0x30(SP)
  lw    S5, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  ldc1  F20, 0x38(SP)
  jr    RA
   addiu SP, SP, 0x40

func_8010DE58:
  addiu SP, SP, -0x88
  sw    RA, 0x58(SP)
  sw    S3, 0x54(SP)
  sw    S2, 0x50(SP)
  sw    S1, 0x4c(SP)
  sw    S0, 0x48(SP)
  sdc1  F28, 0x80(SP)
  sdc1  F26, 0x78(SP)
  sdc1  F24, 0x70(SP)
  sdc1  F22, 0x68(SP)
  sdc1  F20, 0x60(SP)
  lui   S3, hi(D_800F93A8)
  addiu S3, S3, lo(D_800F93A8)
  jal   func_8010D37C
   move  S1, R0
  jal   func_8007D838
   nop
  move  S0, V0
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  sll   V0, V0, 3
  lui   AT, hi(D_80112544)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112544)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112548)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112548)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 1
  sw    V0, 0x14(SP)
  li    A0, -1
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   move  S0, R0
  li    A0, -1
  addiu V1, SP, 0x20
L8010DF5C:
  lh    V0, 0x1e(S3)
  beq   S0, V0, L8010DF94
   sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  lb    V0, lo(p1_item)(AT)
  beq   V0, A0, L8010DF94
   addu  V0, V1, S1
  sb    S0, 0(V0)
  addiu S1, S1, 1
L8010DF94:
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L8010DF5C
   nop
  li    A0, 110
  jal   func_80043510
   move  A1, R0
  move  S2, V0
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  move  A1, R0
  move  A2, A1
  jal   func_800297E8
   move  A3, A1
  jal   func_8005DC3C
   li    A0, -1
  lw    A1, 0x24(V0)
  addiu A0, S2, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  li    A1, 2
  jal   func_80029E80
   li    A2, 1
  li    AT, 0x42C80000 ;100.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0x30(S2)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F22
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F20
  lwc1  F0, 0x30(S2)
  sub.s F0, F0, F22
L8010E028:
  jal   func_8007DA44
   swc1  F0, 0x30(S2)
  lwc1  F0, 0x30(S2)
  c.lt.s F20, F0
  nop
  nop
  bc1tl L8010E028
   sub.s F0, F0, F22
  beqz  S1, L8010E0D4
   nop
  jal   func_8007959C
   li    A0, 875
  move  S0, R0
  li    AT, 0x40000000 ;2.000000
  mtc1  AT, F28
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F26
L8010E06C:
  mtc1  S0, F22
  nop
  cvt.s.w F22, F22
  jal   func_800B83C0
   mov.s F12, F22
  div.s F24, F0, F28
  add.s F24, F24, F26
  jal   func_800B83C0
   mov.s F12, F22
  div.s F20, F0, F28
  add.s F20, F20, F26
  jal   func_800B83C0
   mov.s F12, F22
  div.s F0, F0, F28
  mfc1  A1, F24
  mfc1  A2, F20
  add.s F0, F0, F26
  mfc1  A3, F0
  nop
  jal   func_800B3160
   addiu A0, S2, 0x24
  jal   func_8007DA44
   addiu S0, S0, 0x1e
  slti  V0, S0, 0x439
  bnez  V0, L8010E06C
   nop
L8010E0D4:
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  li    A1, 1
  jal   func_80029E80
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 20
  bnez  S1, L8010E160
   nop
  li    A0, -1
  li    A1, 3
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 20
  jal   func_80055E90
   li    A0, 483
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  jal   func_8004430C
   move  A0, S2
  lh    V0, 0x1e(S3)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  li    V0, -1
  lui   AT, hi(p1_item)
  addu  AT, AT, V1
  j     L8010E3A0
   sb    V0, lo(p1_item)(AT)
L8010E160:
  mtc1  S1, F12
  nop
  jal   func_8005A358
   cvt.s.w F12, F12
  addu  V0, SP, V0
  lb    S1, 0x20(V0)
  lh    V1, 0x1e(S3)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  sll   S0, S1, 1
  addu  S0, S0, S1
  sll   S0, S0, 2
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   V1, hi(p1_item)
  addu  V1, V1, S0
  lbu   V1, lo(p1_item)(V1)
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  sb    V1, lo(p1_item)(AT)
  li    V0, -1
  lui   AT, hi(p1_item)
  addu  AT, AT, S0
  sb    V0, lo(p1_item)(AT)
  move  A0, S1
  jal   func_80067170
   li    A1, 3
  move  A0, S1
  jal   func_800629F0
   move  A1, R0
  lh    A0, 0x1e(S3)
  jal   func_80062588
   nop
  lh    A0, 0x1e(S3)
  jal   func_800629F0
   li    A1, 256
  jal   func_8007959C
   li    A0, 25
  jal   func_8007D838
   nop
  move  S1, V0
  lh    V0, 0x1e(S3)
  sll   V0, V0, 3
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112564)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112564)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112568)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112568)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 5
  sw    V0, 0x14(SP)
  li    A0, -1
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S1
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
  lh    V1, 0x1e(S3)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 245
  li    A0, -1
  li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 50
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  jal   func_8004430C
   move  A0, S2
  li    V1, 24
  sb    V1, 0x28(SP)
  lui   V0, hi(p1_char)
  addu  V0, V0, S0
  lbu   V0, lo(p1_char)(V0)
  sb    V0, 0x29(SP)
  sb    R0, 0x2a(SP)
  sb    V1, 0x38(SP)
  lh    V1, 0x1e(S3)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sb    V0, 0x39(SP)
  sb    R0, 0x3a(SP)
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, -1
  li    A1, 482
  addiu A2, SP, 0x28
  jal   func_80056368
   addiu A3, SP, 0x38
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  jal   func_8010D6C8
   nop
L8010E3A0:
  lw    RA, 0x58(SP)
  lw    S3, 0x54(SP)
  lw    S2, 0x50(SP)
  lw    S1, 0x4c(SP)
  lw    S0, 0x48(SP)
  ldc1  F28, 0x80(SP)
  ldc1  F26, 0x78(SP)
  ldc1  F24, 0x70(SP)
  ldc1  F22, 0x68(SP)
  ldc1  F20, 0x60(SP)
  jr    RA
   addiu SP, SP, 0x88

func_8010E3D0:
  addiu SP, SP, -0x48
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F28, 0x40(SP)
  sdc1  F26, 0x38(SP)
  sdc1  F24, 0x30(SP)
  sdc1  F22, 0x28(SP)
  sdc1  F20, 0x20(SP)
  jal   func_8005DC3C
   li    A0, -1
  jal   func_8005070C
   move  S1, V0
  lui   A0, hi(D_800CC1F0)
  jal   func_800442DC
   lw    A0, lo(D_800CC1F0)(A0)
  lui   V1, hi(D_800CC1F0)
  lw    V1, lo(D_800CC1F0)(V1)
  lw    V0, 0x3c(V1)
  sw    R0, 0x30(V0)
  lw    V0, 0x3c(V1)
  sw    R0, 0x34(V0)
  lw    V0, 0x3c(V1)
  sw    R0, 0x38(V0)
  li    A0, -1
  jal   func_80067170
   li    A1, 3
  jal   func_8007959C
   li    A0, 876
  li    A0, 111
  jal   func_80043510
   move  A1, R0
  move  S0, V0
  lw    A1, 0x24(S1)
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lwc1  F0, 0x14(S0)
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x14(S0)
  lwc1  F0, 0x10(S0)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x10(S0)
  mtc1  R0, F22
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F20
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113658)
  ldc1  F24, lo(D_80113658)(AT)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F26
L8010E4B8:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  add.d F0, F0, F24
  cvt.s.d F20, F0
  c.lt.s F20, F26
  nop
  bc1t  L8010E4B8
   nop
  jal   func_800442DC
   lw    A0, 0x24(S1)
  lui   A0, hi(D_800CC1F0)
  jal   func_80044258
   lw    A0, lo(D_800CC1F0)(A0)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F0
  nop
  c.le.s F0, F20
  nop
  bc1f  L8010E5E0
   nop
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113660)
  ldc1  F24, lo(D_80113660)(AT)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F26
L8010E570:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  sub.d F0, F0, F24
  cvt.s.d F20, F0
  c.le.s F26, F20
  nop
  bc1t  L8010E570
   nop
L8010E5E0:
  jal   func_8004430C
   move  A0, S0
  jal   func_8007D9E0
   li    A0, 20
  li    A0, 5
  jal   func_800508E4
   li    A1, 2
  jal   func_8007D9E0
   li    A0, 40
  li    A0, -1
  jal   func_800508E4
   li    A1, 2
  jal   func_80055E90
   li    A0, 486
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F28, 0x40(SP)
  ldc1  F26, 0x38(SP)
  ldc1  F24, 0x30(SP)
  ldc1  F22, 0x28(SP)
  ldc1  F20, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x48

func_8010E640:
/*  */  addiu SP, SP, -0x58
  sw    RA, 0x28(SP)
  sw    S1, 0x24(SP)
  sw    S0, 0x20(SP)
  sdc1  F28, 0x50(SP)
  sdc1  F26, 0x48(SP)
  sdc1  F24, 0x40(SP)
  sdc1  F22, 0x38(SP)
  sdc1  F20, 0x30(SP)
  jal   func_8005DC3C
   li    A0, -1
  move  S1, V0
  li    A0, -1
  jal   func_800508E4
   li    A1, 2
  jal   func_8005670C
   addiu A0, SP, 0x10
  lw    A2, 0x24(S1)
  addiu A2, A2, 0x18
  move  A0, A2
  addiu A1, SP, 0x10
  jal   func_80056B78
   li    A3, 8
  jal   func_8007D9E0
   li    A0, 8
  jal   func_8007959C
   li    A0, 876
  li    A0, 111
  jal   func_80043510
   move  A1, R0
  move  S0, V0
  lw    A1, 0x24(S1)
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lwc1  F0, 0x14(S0)
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x14(S0)
  lwc1  F0, 0x10(S0)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x10(S0)
  mtc1  R0, F22
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F20
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113668)
  ldc1  F24, lo(D_80113668)(AT)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F26
L8010E720:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  add.d F0, F0, F24
  cvt.s.d F20, F0
  c.lt.s F20, F26
  nop
  bc1t  L8010E720
   nop
  jal   func_80044258
   lw    A0, 0x24(S1)
  jal   func_80050860
   nop
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F0
  nop
  c.le.s F0, F20
  nop
  bc1f  L8010E844
   nop
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113670)
  ldc1  F24, lo(D_80113670)(AT)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F26
L8010E7D4:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  sub.d F0, F0, F24
  cvt.s.d F20, F0
  c.le.s F26, F20
  nop
  bc1t  L8010E7D4
   nop
L8010E844:
  jal   func_8004430C
   move  A0, S0
  lw    RA, 0x28(SP)
  lw    S1, 0x24(SP)
  lw    S0, 0x20(SP)
  ldc1  F28, 0x50(SP)
  ldc1  F26, 0x48(SP)
  ldc1  F24, 0x40(SP)
  ldc1  F22, 0x38(SP)
  ldc1  F20, 0x30(SP)
  jr    RA
   addiu SP, SP, 0x58

func_8010E874:
  addiu SP, SP, -0x28
  sw    RA, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S1, hi(D_800F93A8)
  addiu S1, S1, lo(D_800F93A8)
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  li    V0, 3
  lui   AT, hi(p1_item)
  addu  AT, AT, V1
  sb    V0, lo(p1_item)(AT)
  jal   func_80060210
   li    A0, 25
L8010E8C0:
  jal   func_800609D8
   nop
  beqz  V0, L8010E8E0
   nop
  jal   func_8007DA44
   nop
  j     L8010E8C0
   nop
L8010E8E0:
  jal   func_80062824
   li    A0, 1
  lh    A0, 0x1e(S1)
  jal   func_800629F0
   move  A1, R0
  jal   func_80060210
   li    A0, 26
L8010E8FC:
  jal   func_800609D8
   nop
  beqz  V0, L8010E91C
   nop
  jal   func_8007DA44
   nop
  j     L8010E8FC
   nop
L8010E91C:
  jal   func_8007D838
   nop
  move  S0, V0
  lh    V0, 0x1e(S1)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 1
  sw    V0, 0x14(SP)
  li    A0, -1
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   li    S0, 1
  jal   func_8007959C
   li    A0, 25
  sll   A1, S0, 1
L8010E9E4:
  addu  A1, A1, S0
  sll   A1, A1, 3
  addu  A1, A1, S0
  sll   A1, A1, 0x10
  lh    A0, 0x1e(S1)
  jal   func_800629F0
   sra   A1, A1, 0x10
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnel  V0, R0, L8010E9E4
   sll   A1, S0, 1
  lh    A0, 0x1e(S1)
  jal   func_800629F0
   li    A1, 256
  li    A0, -1
  li    A1, 3
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 30
  lh    V0, 2(S1)
  sll   V0, V0, 2
  lui   A0, hi(D_80112584)
  addu  A0, A0, V0
  jal   func_80055E90
   lw    A0, lo(D_80112584)(A0)
  jal   func_8007959C
   li    A0, 885
  jal   func_8007D838
   nop
  move  S0, V0
  lh    V0, 0x1e(S1)
  sll   V0, V0, 3
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 30
  sw    V0, 0x14(SP)
  li    A0, -1
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
  jal   func_8007D9E0
   li    A0, 10
  jal   func_80060210
   li    A0, 25
L8010EB24:
  jal   func_800609D8
   nop
  beqz  V0, L8010EB44
   nop
  jal   func_8007DA44
   nop
  j     L8010EB24
   nop
L8010EB44:
  jal   func_80062824
   move  A0, R0
  jal   func_80060210
   li    A0, 26
L8010EB54:
  jal   func_800609D8
   nop
  beqz  V0, L8010EB74
   nop
  jal   func_8007DA44
   nop
  j     L8010EB54
   nop
L8010EB74:
  lw    RA, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

func_8010EB88:
  addiu SP, SP, -0x78
  sw    RA, 0x48(SP)
  sw    S5, 0x44(SP)
  sw    S4, 0x40(SP)
  sw    S3, 0x3c(SP)
  sw    S2, 0x38(SP)
  sw    S1, 0x34(SP)
  sw    S0, 0x30(SP)
  sdc1  F28, 0x70(SP)
  sdc1  F26, 0x68(SP)
  sdc1  F24, 0x60(SP)
  sdc1  F22, 0x58(SP)
  sdc1  F20, 0x50(SP)
  jal   func_8005DC3C
   li    A0, -1
  lui   S4, hi(D_800F93A8)
  addiu S4, S4, lo(D_800F93A8)
  jal   func_8007D838
   move  S3, V0
  li    AT, 0x3FA60000 ;1.296875
  ori AT, AT, 0x6666
  mtc1  AT, F12
  nop
  jal   func_80052F70
   move  S0, V0
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   move  S1, R0
  li    S5, 255
  sll   V0, S1, 1
L8010EC08:
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   V1, hi(p1_item)
  addu  V1, V1, V0
  lb    V1, lo(p1_item)(V1)
  li    V0, 3
  bnel  V1, V0, L8010EE04
   addiu S1, S1, 1
  jal   func_80060210
   li    A0, 25
L8010EC38:
  jal   func_800609D8
   nop
  beqz  V0, L8010EC58
   nop
  jal   func_8007DA44
   nop
  j     L8010EC38
   nop
L8010EC58:
  jal   func_80062824
   li    A0, 1
  move  A0, S1
  jal   func_800629F0
   li    A1, 256
  jal   func_80060210
   li    A0, 26
L8010EC74:
  jal   func_800609D8
   nop
  beqz  V0, L8010EC94
   nop
  jal   func_8007DA44
   nop
  j     L8010EC74
   nop
L8010EC94:
  jal   func_8007D9E0
   li    A0, 20
  jal   func_800636F8
   li    A0, 3
  lh    S2, 0x1e(S4)
  sh    S1, 0x1e(S4)
  jal   func_8007959C
   li    A0, 885
  jal   func_8007D838
   nop
  move  S0, V0
  lh    V0, 0x1e(S4)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 30
  sw    V0, 0x14(SP)
  li    A0, -1
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   li    S0, 1
  jal   func_8007D9E0
   li    A0, 20
  sll   A1, S0, 1
L8010ED7C:
  addu  A1, A1, S0
  sll   A1, A1, 3
  addu  A1, A1, S0
  subu  A1, S5, A1
  sll   A1, A1, 0x10
  move  A0, S1
  jal   func_800629F0
   sra   A1, A1, 0x10
  move  A0, S1
  lui   A2, 0x4000
  jal   func_800628C0
   move  A1, R0
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010ED7C
   sll   A1, S0, 1
  move  A0, S1
  jal   func_800629F0
   move  A1, R0
  sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  li    V1, -1
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  sb    V1, lo(p1_item)(AT)
  sh    S2, 0x1e(S4)
  jal   func_800636F8
   li    A0, 1
  j     L8010EE10
   nop
L8010EE04:
  slti  V0, S1, 4
  bnez  V0, L8010EC08
   sll   V0, S1, 1
L8010EE10:
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beql  V0, R0, L8010EE34
   move  A0, R0
  jal   func_80108C0C
   nop
  jal   func_8007D9E0
   li    A0, 30
  move  A0, R0
L8010EE34:
  jal   func_80067170
   li    A1, 4
  li    A0, 1
  jal   func_80067170
   li    A1, 4
  li    A0, 2
  jal   func_80067170
   li    A1, 4
  li    A0, 3
  jal   func_80067170
   li    A1, 4
  jal   func_8007959C
   li    A0, 876
  li    A0, 111
  jal   func_80043510
   move  A1, R0
  move  S0, V0
  lui   A1, hi(D_800F64C8)
  lw    A1, lo(D_800F64C8)(A1)
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lwc1  F0, 0x14(S0)
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x14(S0)
  lwc1  F0, 0x10(S0)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x10(S0)
  mtc1  R0, F22
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F20
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113678)
  ldc1  F24, lo(D_80113678)(AT)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F26
L8010EEE0:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  add.d F0, F0, F24
  cvt.s.d F20, F0
  c.lt.s F20, F26
  nop
  bc1t  L8010EEE0
   nop
  jal   func_800509FC
   nop
  lui   A0, hi(D_800F64C8)
  jal   func_800442DC
   lw    A0, lo(D_800F64C8)(A0)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F0
  nop
  c.le.s F0, F20
  nop
  bc1f  L8010F008
   nop
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113680)
  ldc1  F24, lo(D_80113680)(AT)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F26
L8010EF98:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  sub.d F0, F0, F24
  cvt.s.d F20, F0
  c.le.s F26, F20
  nop
  bc1t  L8010EF98
   nop
L8010F008:
  jal   func_8004430C
   move  A0, S0
  lh    V0, 0x1c(S4)
  sll   V0, V0, 1
  lui   A0, hi(D_80111984)
  addu  A0, A0, V0
  lh    A0, lo(D_80111984)(A0)
  addiu A1, S3, 0x10
  jal   func_80054C78
   addiu A2, S3, 0x12
  lhu   V0, 0x10(S3)
  sh    V0, 0x14(S3)
  lhu   V0, 0x12(S3)
  addiu V0, V0, 1
  sh    V0, 0x16(S3)
  lh    V0, 0x1c(S4)
  sll   V0, V0, 1
  lui   A0, hi(D_80111984)
  addu  A0, A0, V0
  jal   func_80054B8C
   lh    A0, lo(D_80111984)(A0)
  lw    A0, 0x24(S3)
  addiu S0, V0, 8
  addiu A0, A0, 0xc
  move  A1, S0
  jal   func_80056658
   addiu A2, SP, 0x18
  lw    A2, 0x24(S3)
  addiu A2, A2, 0x18
  move  A0, A2
  addiu A1, SP, 0x18
  jal   func_80056B78
   li    A3, 8
  jal   func_8007D9E0
   li    A0, 8
  move  A0, R0
  jal   func_800508E4
   li    A1, 2
  lw    A2, 0x24(S3)
  addiu A2, A2, 0xc
  move  A0, A2
  move  A1, S0
  jal   func_80056D80
   li    A3, 10
  jal   func_8007D9E0
   li    A0, 10
  li    A0, -1
  jal   func_800508E4
   li    A1, 2
  jal   func_8006286C
   move  A0, R0
  beqz  V0, L8010F134
   nop
  jal   func_80060210
   li    A0, 25
L8010F0E4:
  jal   func_800609D8
   nop
  beqz  V0, L8010F104
   nop
  jal   func_8007DA44
   nop
  j     L8010F0E4
   nop
L8010F104:
  jal   func_80062824
   move  A0, R0
  jal   func_80060210
   li    A0, 26
L8010F114:
  jal   func_800609D8
   nop
  beqz  V0, L8010F134
   nop
  jal   func_8007DA44
   nop
  j     L8010F114
   nop
L8010F134:
  jal   func_8005670C
   addiu A0, SP, 0x18
  lw    A2, 0x24(S3)
  addiu A2, A2, 0x18
  move  A0, A2
  addiu A1, SP, 0x18
  jal   func_80056B78
   li    A3, 8
  jal   func_8007D9E0
   li    A0, 8
  li    A0, 5
  jal   func_800508E4
   li    A1, 2
  jal   func_8007D9E0
   li    A0, 30
  jal   func_8007959C
   li    A0, 291
  lh    V0, 2(S4)
  sll   V1, V0, 1
  sll   V0, V0, 2
  lui   A1, hi(D_80112584)
  addu  A1, A1, V0
  lw    A1, lo(D_80112584)(A1)
  lui   A0, hi(D_8011259C)
  addu  A0, A0, V1
  lh    A0, lo(D_8011259C)(A0)
  jal   func_8005600C
   addiu A1, A1, 1
  li    A0, -1
  jal   func_800508E4
   li    A1, 2
  jal   func_8007DA44
   nop
  lh    A0, 0x1e(S4)
  jal   func_800495D8
   li    A1, 3
  lw    RA, 0x48(SP)
  lw    S5, 0x44(SP)
  lw    S4, 0x40(SP)
  lw    S3, 0x3c(SP)
  lw    S2, 0x38(SP)
  lw    S1, 0x34(SP)
  lw    S0, 0x30(SP)
  ldc1  F28, 0x70(SP)
  ldc1  F26, 0x68(SP)
  ldc1  F24, 0x60(SP)
  ldc1  F22, 0x58(SP)
  ldc1  F20, 0x50(SP)
  jr    RA
   addiu SP, SP, 0x78

func_8010F1FC:
  addiu SP, SP, -0x40
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F28, 0x38(SP)
  sdc1  F26, 0x30(SP)
  sdc1  F24, 0x28(SP)
  sdc1  F22, 0x20(SP)
  sdc1  F20, 0x18(SP)
  jal   func_800794A8
   li    A0, 60
  jal   func_8007959C
   li    A0, 876
  li    A0, 111
  jal   func_80043510
   move  A1, R0
  move  S0, V0
  lui   A1, hi(D_800CC1F0)
  lw    A1, lo(D_800CC1F0)(A1)
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lwc1  F0, 0x14(S0)
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x14(S0)
  lwc1  F0, 0x10(S0)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x10(S0)
  mtc1  R0, F22
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F20
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113688)
  ldc1  F24, lo(D_80113688)(AT)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F26
L8010F2A4:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  add.d F0, F0, F24
  cvt.s.d F20, F0
  c.lt.s F20, F26
  nop
  bc1t  L8010F2A4
   nop
  jal   func_800636F8
   li    A0, 3
  jal   func_80050860
   nop
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F0
  nop
  c.le.s F0, F20
  nop
  bc1f  L8010F3C8
   nop
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113690)
  ldc1  F24, lo(D_80113690)(AT)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F26
L8010F358:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  sub.d F0, F0, F24
  cvt.s.d F20, F0
  c.le.s F26, F20
  nop
  bc1t  L8010F358
   nop
L8010F3C8:
  jal   func_8004430C
   move  A0, S0
  jal   func_800632FC
   nop
  sll   V0, V0, 0x10
  jal   func_80079390
   sra   A0, V0, 0x10
  lui   V0, hi(D_800F93AA)
  lh    V0, lo(D_800F93AA)(V0)
  sll   V0, V0, 2
  lui   A0, hi(D_80112584)
  addu  A0, A0, V0
  lw    A0, lo(D_80112584)(A0)
  jal   func_80055E90
   addiu A0, A0, 8
  lui   AT, hi(D_800F8D16)
  sh    R0, lo(D_800F8D16)(AT)
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F28, 0x38(SP)
  ldc1  F26, 0x30(SP)
  ldc1  F24, 0x28(SP)
  ldc1  F22, 0x20(SP)
  ldc1  F20, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x40

func_8010F430:
  addiu SP, SP, -0x90
  sw    RA, 0x8c(SP)
  sw    FP, 0x88(SP)
  sw    S7, 0x84(SP)
  sw    S6, 0x80(SP)
  sw    S5, 0x7c(SP)
  sw    S4, 0x78(SP)
  sw    S3, 0x74(SP)
  sw    S2, 0x70(SP)
  sw    S1, 0x6c(SP)
  sw    S0, 0x68(SP)
  lui   S0, hi(D_800F93C6)
  addiu S0, S0, lo(D_800F93C6)
  lh    S4, 0(S0)
  jal   func_8005DC3C
   li    A0, -1
  move  S6, V0
  addiu S7, S0, -0x1e
  move  S2, R0
  move  S1, R0
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  addu  V0, V0, S4
  sll   S3, V0, 2
  addiu S5, SP, 0x20
L8010F498:
  lui   A0, hi(D_800FD2D0)
  addu  A0, A0, S3
  lhu   A0, lo(D_800FD2D0)(A0)
  lui   A1, hi(D_800FD2D2)
  addu  A1, A1, S3
  jal   func_80054BB0
   lhu   A1, lo(D_800FD2D2)(A1)
  move  S0, V0
  sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   A0, hi(D_800FD2D0)
  addu  A0, A0, V0
  lhu   A0, lo(D_800FD2D0)(A0)
  lui   A1, hi(D_800FD2D2)
  addu  A1, A1, V0
  lhu   A1, lo(D_800FD2D2)(A1)
  jal   func_80054BB0
   sll   S0, S0, 0x10
  sra   S0, S0, 0x10
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  bnel  S0, V0, L8010F520
   addiu S1, S1, 1
  addu  V0, S5, S2
  sb    S1, 0(V0)
  addiu S2, S2, 1
  sll   A0, S1, 0x10
  sra   A0, A0, 0x10
  jal   func_80067170
   li    A1, 4
  addiu S1, S1, 1
L8010F520:
  slti  V0, S1, 4
  bnez  V0, L8010F498
   nop
  beqz  S2, L8010F910
   nop
  jal   func_80046D2C
   move  A0, S4
  move  FP, V0
  li    A0, -1
  jal   func_800508E4
   li    A1, 2
  addiu S0, SP, 0x28
  jal   func_8005670C
   move  A0, S0
  lw    A2, 0x24(S6)
  addiu A2, A2, 0x18
  move  A0, A2
  move  A1, S0
  jal   func_80056B78
   li    A3, 8
  jal   func_8007D9E0
   li    A0, 8
  jal   func_8007959C
   li    A0, 291
  move  A0, R0
  blez  S2, L8010F5CC
   move  S1, R0
  addiu A1, SP, 0x20
  addu  V0, A1, S1
L8010F594:
  lb    V1, 0(V0)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  addu  A0, A0, V0
  addiu S1, S1, 1
  slt   V0, S1, S2
  bnez  V0, L8010F594
   addu  V0, A1, S1
L8010F5CC:
  bnel  A0, R0, L8010F6A4
   sb    R0, 0x44(SP)
  li    V0, 1
  bne   S2, V0, L8010F670
   li    V0, 24
  sb    V0, 0x38(SP)
  lb    V1, 0x20(SP)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sb    V0, 0x39(SP)
  sb    R0, 0x3a(SP)
  lh    V0, 2(S7)
  sll   V1, V0, 1
  lui   A0, hi(D_8011259C)
  addu  A0, A0, V1
  lh    A0, lo(D_8011259C)(A0)
  sll   V0, V0, 2
  lui   A1, hi(D_80112584)
  addu  A1, A1, V0
  lw    A1, lo(D_80112584)(A1)
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  addiu A1, A1, 6
  addiu A2, SP, 0x38
  jal   func_80056368
   move  A3, R0
  jal   func_80056458
   nop
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  j     L8010F8F0
   nop
L8010F670:
  lh    V0, 2(S7)
  sll   V1, V0, 1
  sll   V0, V0, 2
  lui   A1, hi(D_80112584)
  addu  A1, A1, V0
  lw    A1, lo(D_80112584)(A1)
  lui   A0, hi(D_8011259C)
  addu  A0, A0, V1
  lh    A0, lo(D_8011259C)(A0)
  jal   func_8005600C
   addiu A1, A1, 7
  j     L8010F8F0
   nop
L8010F6A4:
  sb    R0, 0x40(SP)
  sb    R0, 0x3c(SP)
  sb    R0, 0x38(SP)
  blez  S2, L8010F70C
   move  S1, R0
  addiu A2, SP, 0x38
  li    A3, 24
  addiu A1, SP, 0x20
L8010F6C4:
  sll   A0, S1, 2
  addu  A0, A2, A0
  sb    A3, 0(A0)
  addu  V0, A1, S1
  lb    V1, 0(V0)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sb    V0, 1(A0)
  addiu S1, S1, 1
  slt   V0, S1, S2
  bnez  V0, L8010F6C4
   sb    R0, 2(A0)
L8010F70C:
  lh    V0, 2(S7)
  sll   V1, V0, 1
  lui   A0, hi(D_8011259C)
  addu  A0, A0, V1
  lh    A0, lo(D_8011259C)(A0)
  sll   V0, V0, 2
  addiu V1, S2, 1
  lui   A1, hi(D_80112584)
  addu  A1, A1, V0
  lw    A1, lo(D_80112584)(A1)
  addiu V0, SP, 0x40
  sw    V0, 0x10(SP)
  addiu V0, SP, 0x44
  sw    V0, 0x14(SP)
  sw    R0, 0x18(SP)
  addu  A1, V1, A1
  addiu A2, SP, 0x38
  jal   func_80056368
   addiu A3, SP, 0x3c
  jal   func_80056458
   nop
  lh    V1, 2(S7)
  li    V0, 4
  bne   V1, V0, L8010F778
   nop
  jal   func_80056458
   nop
L8010F778:
  jal   func_80056144
   li    S3, -1
  jal   func_80056168
   move  S1, R0
  blez  S2, L8010F7DC
   move  A1, R0
  addiu A2, SP, 0x20
  addu  V0, A2, S1
L8010F798:
  lb    V1, 0(V0)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_coins)
  addu  A0, A0, V0
  lh    A0, lo(p1_coins)(A0)
  slt   V0, A1, A0
  beqz  V0, L8010F7D0
   addiu S1, S1, 1
  move  S3, V1
  move  A1, A0
L8010F7D0:
  slt   V0, S1, S2
  bnez  V0, L8010F798
   addu  V0, A2, S1
L8010F7DC:
  blez  S2, L8010F8DC
   move  S1, R0
  addiu S4, SP, 0x20
  sll   V0, S3, 1
  addu  V0, V0, S3
  sll   V0, V0, 2
  addu  V0, V0, S3
  sll   S5, V0, 2
  addu  V0, S4, S1
L8010F800:
  lb    A1, 0(V0)
  sll   V0, A1, 1
  addu  V0, V0, A1
  sll   V0, V0, 2
  addu  V0, V0, A1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slti  V0, V0, 5
  bnez  V0, L8010F83C
   addu  S0, S4, S1
  jal   func_800797DC
   li    A0, 252
  addu  S0, S4, S1
L8010F83C:
  lb    A0, 0(S0)
  jal   func_80067170
   li    A1, 3
  lb    A0, 0(S0)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   A1, hi(p1_coins)
  addu  A1, A1, V0
  lh    A1, lo(p1_coins)(A1)
  jal   func_8004CA14
   SUBU A1 R0 A1
  lb    V0, 0(S0)
  bne   S3, V0, L8010F89C
   addu  V0, S4, S1
  lui   A1, hi(p1_coins)
  addu  A1, A1, S5
  lh    A1, lo(p1_coins)(A1)
  move  A0, S3
  SUBU  A1 R0 A1
  j     L8010F8C8
   li    A2, 1
L8010F89C:
  lb    A0, 0(V0)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   A1, hi(p1_coins)
  addu  A1, A1, V0
  lh    A1, lo(p1_coins)(A1)
  SUBU  A1 R0 A1
  move  A2, R0
L8010F8C8:
  jal   func_8006135C
   addiu S1, S1, 1
  slt   V0, S1, S2
  bnez  V0, L8010F800
   addu  V0, S4, S1
L8010F8DC:
  li    A0, 5
  jal   func_800508E4
   li    A1, 2
  jal   func_8007D9E0
   li    A0, 30
L8010F8F0:
  beqz  FP, L8010F908
   move  A0, R0
  lui   A0, hi(D_800F93C6)
  jal   func_8004655C
   lh    A0, lo(D_800F93C6)(A0)
  move  A0, R0
L8010F908:
  jal   func_800508E4
   li    A1, 2
L8010F910:
  lw    RA, 0x8c(SP)
  lw    FP, 0x88(SP)
  lw    S7, 0x84(SP)
  lw    S6, 0x80(SP)
  lw    S5, 0x7c(SP)
  lw    S4, 0x78(SP)
  lw    S3, 0x74(SP)
  lw    S2, 0x70(SP)
  lw    S1, 0x6c(SP)
  lw    S0, 0x68(SP)
  jr    RA
   addiu SP, SP, 0x90

func_8010F940:
  addiu SP, SP, -0x28
  sw    RA, 0x24(SP)
/*  */  sw    S4, 0x20(SP)
  sw    S3, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  li    AT, 0x40C00000 ;6.000000
  mtc1  AT, F12
  nop
  jal   func_8005A358
   sw    S0, 0x10(SP)
  move  S3, V0
  slti  V0, S3, 5
  beql  V0, R0, L8010F97C
   li    S3, -1
L8010F97C:
  li    V0, -1
  beql  S3, V0, L8010FB1C
   li    A0, -1
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  move  S2, V0
  sll   V0, S3, 1
  lui   AT, hi(D_800CAFD8)
  addu  AT, AT, V0
  lhu   V0, lo(D_800CAFD8)(AT)
  sll   V0, V0, 2
  lui   A0, hi(D_800CCBDC)
  addu  A0, A0, V0
  lw    A0, lo(D_800CCBDC)(A0)
  jal   func_80017680
   sll   S1, S2, 0x10
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S4, V0
  jal   func_80017800
   move  A0, S0
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  sll   A2, S4, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   move  A2, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082418
   li    A2, 4096
  move  A0, S0
  move  A1, R0
  li    A2, 160
  jal   func_80081AD0
   li    A3, 90
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  move  S0, R0
  sll   A2, S0, 1
L8010FA54:
  addu  A2, A2, S0
  sll   A2, A2, 3
  addu  A2, A2, S0
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010FA54
   sll   A2, S0, 1
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   li    A2, 256
  li    A0, -1
  li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 50
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  jal   func_8007D9E0
   li    A0, 10
  sll   A0, S4, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  jal   func_8007F8B0
   move  A0, S0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  sll   V1, S3, 1
  lui   AT, hi(D_800CAFD9)
  addu  AT, AT, V1
  lbu   V1, lo(D_800CAFD9)(AT)
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  j     L8010FB30
   sb    V1, lo(p1_item)(AT)
L8010FB1C:
  li    A1, 3
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 50
L8010FB30:
  lw    RA, 0x24(SP)
  lw    S4, 0x20(SP)
  lw    S3, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x28

overlaycall4:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   func_80020070
   li    A0, 2
  lui   A1, hi(D_80112914)
  addiu A1, A1, lo(D_80112914)
  jal   func_80020324
   li    A0, 1
  jal   setup_routine
   nop
  jal   func_80066C34
   li    A0, 2
  lui   A0, hi(func_80102FFC)
  addiu A0, A0, lo(func_80102FFC)
  li    A1, 4101
  li    A2, 4096
  jal   InitProcess
   move  A3, R0
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80111338:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  jal   func_8005DC30
   sw    S0, 0x10(SP)
  sll   V0, V0, 0x10
  sra   S0, V0, 0x10
  lui   A0, hi(D_800F93A8)
  addiu A0, A0, lo(D_800F93A8)
  sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  lbu   V0, lo(p1_item)(AT)
  addiu V0, V0, 1
  sll   V0, V0, 0x18
  sra   V1, V0, 0x18
  sltiu V0, V1, 0xb
  beqz  V0, L80111548
   sll   V0, V1, 2
  lui   AT, hi(D_80113698)
  addu  AT, AT, V0
  lw    V0, lo(D_80113698)(AT)
  jr    V0
   nop
D_801113A4:
  lh    V1, 6(A0)
  lh    V0, 8(A0)
  beq   V1, V0, L8011154C
   li    V0, 1
  jal   func_8005694C
   li    A0, 80
  sll   V0, V0, 0x10
  bnez  V0, L8011154C
   li    V0, 1
D_801113C8:
  j     L8011154C
   move  V0, R0
D_801113D0:
  lh    V1, 6(A0)
  lh    V0, 8(A0)
  beql  V1, V0, L8011154C
   li    V0, 1
  lui   A0, hi(D_80112F24)
  jal   func_80044800
   addiu A0, A0, lo(D_80112F24)
  j     func_801114F4
   sll   V0, V0, 0x10
D_801113F4:
  lh    V1, 6(A0)
  lh    V0, 8(A0)
  beql  V1, V0, L8011154C
   li    V0, 1
  lui   A0, hi(D_80112F84)
  jal   func_80044800
   addiu A0, A0, lo(D_80112F84)
  j     func_801114F4
   sll   V0, V0, 0x10
D_80111418:
  lui   A0, hi(D_80113248)
  jal   func_80044800
   addiu A0, A0, lo(D_80113248)
  j     func_801114F4
   sll   V0, V0, 0x10
D_8011142C:
  move  A0, R0
L80111430:
  beq   A0, S0, L80111470
   sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  lb    V0, lo(p1_item)(AT)
  nor   V1, R0, V0
  sltu  V1, R0, V1
  xori  V0, V0, 3
  sltu  V0, R0, V0
  and   V1, V1, V0
  bnez  V1, L80111480
   li    V0, 4
L80111470:
  addiu A0, A0, 1
  slti  V0, A0, 4
  bnez  V0, L80111430
   li    V0, 4
L80111480:
  bne   A0, V0, L8011154C
   li    V0, 1
  j     L8011154C
   move  V0, R0
D_80111490:
  sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  j     func_801114F4
   slti  V0, V0, 5
D_801114B8:
  lui   A0, hi(D_801133BC)
  jal   func_80044800
   addiu A0, A0, lo(D_801133BC)
  sll   V0, V0, 0x10
  bnez  V0, L8011154C
   move  V0, R0
  sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slti  V0, V0, 0x14
func_801114F4:
  beqz  V0, L8011154C
   li    V0, 1
  j     L8011154C
   move  V0, R0
D_80111504:
  sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slti  V0, V0, 0xa
  beqz  V0, L8011154C
   li    V0, 1
  lui   V0, hi(D_800F93AE)
  addiu V0, V0, lo(D_800F93AE)
  lh    V1, 0(V0)
  lh    V0, 2(V0)
  bne   V1, V0, L8011154C
   move  V0, R0
L80111548:
  li    V0, 1
L8011154C:
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_8011155C:
  addiu SP, SP, -0x40
  sw    RA, 0x38(SP)
  sw    S7, 0x34(SP)
  sw    S6, 0x30(SP)
  sw    S5, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S4, hi(D_800F93A8)
  addiu S4, S4, lo(D_800F93A8)
  jal   func_8005DC3C
   li    A0, -1
  move  S3, V0
  li    S2, -1
  lbu   V0, 4(S3)
  move  V1, V0
  lui   AT, hi(D_80113588)
  addu  AT, AT, V0
  lbu   V0, lo(D_80113588)(AT)
  blez  V0, L8011167C
   move  S1, R0
  lui   S7, hi(D_80113510)
  addiu S7, S7, lo(D_80113510)
  li    S6, -1
  lui   S5, hi(D_80113570)
  addiu S5, S5, lo(D_80113570)
  sll   V0, V1, 2
L801115D0:
  addu  V0, V0, S7
  lw    V0, 0(V0)
  addu  V0, V0, S1
  lbu   S0, 0(V0)
  jal   func_80109A78
   move  A0, S0
  move  S2, V0
  beql  S2, S6, L80111660
   addiu S1, S1, 1
  lui   A0, hi(D_800CC000)
  addu  A0, A0, S0
  lbu   A0, lo(D_800CC000)(A0)
  addiu A0, A0, 0x14
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V0, V0, A0
  bnel  V0, R0, L80111660
   addiu S1, S1, 1
  lbu   V0, 4(S3)
  sll   V0, V0, 2
  addu  V0, V0, S5
  lw    V0, 0(V0)
  addu  V0, V0, S1
  jal   func_8005694C
   lb    A0, 0(V0)
  sll   V0, V0, 0x10
  bnez  V0, L8011167C
   nop
  addiu S1, S1, 1
L80111660:
  lbu   V1, 4(S3)
  lui   V0, hi(D_80113588)
  addu  V0, V0, V1
  lbu   V0, lo(D_80113588)(V0)
  slt   V0, S1, V0
  bnez  V0, L801115D0
   sll   V0, V1, 2
L8011167C:
  lbu   V0, 4(S3)
  lui   AT, hi(D_80113588)
  addu  AT, AT, V0
  lbu   V0, lo(D_80113588)(AT)
  beql  S1, V0, L80111694
   li    S2, -1
L80111694:
  li    V0, -1
  beq   S2, V0, L801116FC
   nop
  jal   func_80109A78
   li    A0, 9
  beq   V0, S2, L801118AC
   addiu V0, S2, 1
  jal   func_80109A78
   li    A0, 7
  bne   V0, S2, L801116FC
   nop
  lui   A0, hi(D_800CC007)
  lbu   A0, lo(D_800CC007)(A0)
  addiu A0, A0, 0x32
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V0, V0, A0
  beqz  V0, L801118AC
   addiu V0, S2, 1
L801116FC:
  lui   A0, hi(D_8011341C)
  jal   func_80044800
   addiu A0, A0, lo(D_8011341C)
  sll   V0, V0, 0x10
  bnez  V0, L80111768
   li    V0, -1
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  lui   V1, hi(D_800CC001)
  lbu   V1, lo(D_800CC001)(V1)
  slt   V0, V0, V1
  bnez  V0, L80111768
   li    V0, -1
  jal   func_80109A78
   li    A0, 1
  move  V1, V0
  li    V0, -1
  bne   V1, V0, L801118AC
   addiu V0, V1, 1
  li    V0, -1
L80111768:
  bne   S2, V0, L801118AC
   addiu V0, S2, 1
  lui   A0, hi(D_80113434)
  jal   func_80044800
   addiu A0, A0, lo(D_80113434)
  sll   V0, V0, 0x10
  sra   S1, V0, 0x10
  bnez  S1, L80111864
   nop
  lbu   V0, 4(S3)
  move  V1, V0
  lui   AT, hi(D_80113588)
  addu  AT, AT, V0
  lbu   V0, lo(D_80113588)(AT)
  slt   V0, S1, V0
  beqz  V0, L80111864
   sll   V0, V1, 2
  lui   S7, hi(D_80113510)
  addiu S7, S7, lo(D_80113510)
  li    S6, -1
  lui   S5, hi(D_80113570)
  addiu S5, S5, lo(D_80113570)
L801117C0:
  addu  V0, V0, S7
  lw    V0, 0(V0)
  addu  V0, V0, S1
  lbu   S0, 0(V0)
  jal   func_80109A78
   move  A0, S0
  move  S2, V0
  beql  S2, S6, L80111848
   addiu S1, S1, 1
  lui   A0, hi(D_800CC000)
  addu  A0, A0, S0
  lbu   A0, lo(D_800CC000)(A0)
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V0, V0, A0
  bnel  V0, R0, L80111848
   addiu S1, S1, 1
  lbu   V0, 4(S3)
  sll   V0, V0, 2
  addu  V0, V0, S5
  lw    V0, 0(V0)
  addu  V0, V0, S1
  jal   func_8005694C
   lb    A0, 0(V0)
  sll   V0, V0, 0x10
  bnez  V0, L801118A8
   addiu S1, S1, 1
L80111848:
  lbu   V1, 4(S3)
  lui   V0, hi(D_80113588)
  addu  V0, V0, V1
  lbu   V0, lo(D_80113588)(V0)
  slt   V0, S1, V0
  bnez  V0, L801117C0
   sll   V0, V1, 2
L80111864:
  lh    V1, 2(S4)
  li    V0, 4
  bne   V1, V0, L80111888
   li    V0, 1
  lui   AT, hi(D_801134C4)
  jal   func_80109AE4
   sw    V0, lo(D_801134C4)(AT)
  j     L801118AC
   addiu V0, V0, 2
L80111888:
  jal   func_80109A78
   move  A0, R0
  move  S2, V0
  li    V0, -1
  bne   S2, V0, L801118AC
   addiu V0, S2, 1
  j     L801118AC
   li    V0, 1
L801118A8:
  addiu V0, S2, 1
L801118AC:
  lw    RA, 0x38(SP)
  lw    S7, 0x34(SP)
  lw    S6, 0x30(SP)
  lw    S5, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x40

func_801118D8:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   V0, hi(D_801134C4)
  lw    V0, lo(D_801134C4)(V0)
  bnel  V0, R0, L8011190C
   li    V0, 2
  lui   A0, hi(D_801134A0)
  jal   func_80044800
   addiu A0, A0, lo(D_801134A0)
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  j     L80111914
   addiu V0, V0, 1
L8011190C:
  lui   AT, hi(D_801134C4)
  sw    R0, lo(D_801134C4)(AT)
L80111914:
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

.align 16

; data

D_80111920:
.halfword 0, 0
.word overlaycall0
.halfword 1, 0
.word overlaycall1
.halfword 2, 0
.word overlaycall2
.halfword 3, 0
.word overlaycall3
.halfword 4, 0
.word overlaycall4
.halfword -1, 0

.align 16

; probably relates to star selection order.
shuffle_order:
.halfword ${s.order.join(",")}
.align 4

shuffle_bias:
.halfword ${s.bias.join(",")}
.align 4

D_80111970:
.halfword 0x0006 0xFFFF
.align 4

D_80111974:
.halfword 0x0046 0x0047 0x0048 0x0049 0x004A 0x004B 0x004C 0x0000
.align 4

D_80111984:
.halfword ${o.join(",")||0}
.align 4

; Toads stand on these spaces
D_80111994:
.halfword ${u.join(",")||0}
.align 4

; Toad faces
D_801119A4: .halfword 0x0008 0x0039

D_801119A8: .halfword 0x0008 0x003A

;toad animation speed "By the way, Baby Bowser is over here..."
D_801119AC:
.word 0x40A00000
.word 0x40A00000
.word 0x40000000
.word 0x40000000
.word 0x40400000
.word 0x40A00000
.word 0x40A00000
.word 0x40A00000
.word 0x40A00000

D_801119D0: .word 0x00000000

D_801119D4:
.word 0x3C465055
.word 0x46505A5F
.word 0x505A5F5F

D_801119E0: .word 0x00000000

; hidden blocks cant spawn on these blue spaces
D_801119E4: .halfword -1
.align 4

; star spaces that you walk over
D_801119F4:
.halfword ${o.join(",")||0} 0xFFFF
.align 4

D_80111A04: .halfword 0x0003
D_80111A06: .halfword 0xFFFC
D_80111A08: .halfword 0xFFFE
D_80111A0A: .halfword 0xFFFE
D_80111A0C: .halfword 0x0002
D_80111A0E: .halfword 0xFFFA
D_80111A10: .halfword 0x0000
D_80111A12: .halfword 0x0000
D_80111A14: .halfword 0x0000
D_80111A16: .halfword 0xFFFC
D_80111A18: .halfword 0x0004
D_80111A1A: .halfword 0x0000
D_80111A1C: .halfword 0x0001
D_80111A1E: .halfword 0xFFFA

D_80111A20: .halfword 0xFFFE
D_80111A22: .halfword 0x0000
D_80111A24: .halfword 0x0002
D_80111A26: .halfword 0x0000

D_80111A28: .halfword 0x0000
D_80111A2A: .halfword 0xFFFE
D_80111A2C: .halfword 0x0004
D_80111A2E: .halfword 0x0000

D_80111A30: .halfword 0x0000
D_80111A32: .halfword 0xFFFC

D_80111A34: .halfword 0x0000
D_80111A36: .halfword 0x0000
D_80111A38: .halfword 0x0000
D_80111A3A: .halfword 0xFFFD

; gate related
D_80111A3C: .halfword 0x00A9

D_80111A3E: .halfword 0x0031
D_80111A40: .halfword 0x00AA
D_80111A42: .halfword 0x0029

D_80111A44:
.halfword ${u.join(",")||0}
.align 4

D_80111A54:
.halfword 0x0046 0x0047 0x0048 0x0049 0x004A 0x004B 0x004C 0x0000

D_80111A64: .word 0xFFFFFFFF

D_80111A68:
.halfword ${x.join(",")}
.align 4

D_80111A6C:
.halfword ${d.join(",")}
.align 4

; bank coin coordinates?
D_80111A70:
.word 0x00000000 0x00000000 0x00000000 0xC0400000
.word 0x40000000 0xC0000000 0x3F800000 0x40B00000
.word 0xC0400000 0x40600000 0x41000000 0x40800000
.word 0xBF800000 0x41400000 0x41300000

D_80111AAC: .word 0x00000000 0x00000000

D_80111AB4:
.word 0x00000000 0x00000000 0x00000000 0x00000000
.word 0xC1700000 0x00000000 0x00000000 0x41A00000
.word 0x00000000 0xC1F00000 0x42340000 0x00000000 0x42340000

; gate spaces
D_80111AE8:
.halfword 0x0094 0x0095

D_80111AEC: .byte 0x00
D_80111AED: .byte 0x73
D_80111AEE: .halfword 0x007C
D_80111AF0: .halfword 0x0080
D_80111AF2: .halfword 0x0081
D_80111AF4: .halfword 0x0082
D_80111AF6: .halfword 0x0083

D_80111AF8: .word 0x0000039B
D_80111AFC: .word 0x000003B0
D_80111B00: .word 0x000003CF
D_80111B04: .word 0x000003CA
D_80111B08: .word 0x000003F0
D_80111B0C: .word 0x00000405
D_80111B10: .word 0xFFFFFFFF
D_80111B14: .word 0xFFFFFFFF
D_80111B18: .word 0xFFFFFFFF

D_80111B1C: .halfword 0xFFFF

D_80111B1E: .halfword 0xFFFF

D_80111B20: .word 0xFFFFFFFF
D_80111B24: .word 0xFFFFFFFF
D_80111B28: .word 0xFFFFFFFF
D_80111B2C: .word 0x000003F1
D_80111B30: .word 0xFFFFFFFF
D_80111B34: .word 0xFFFFFFFF
D_80111B38: .word 0xFFFFFFFF
D_80111B3C: .word 0xFFFFFFFF

D_80111B40: .word 0xFFFFFFFF
D_80111B44: .word 0xFFFFFFFF
D_80111B48: .word 0xFFFFFFFF
D_80111B4C: .word 0xFFFFFFFF
D_80111B50: .word 0x00000028
D_80111B54: .word 0xFFFFFFFF
D_80111B58: .word 0xFFFFFFFF
D_80111B5C: .word 0xFFFFFFFF
D_80111B60: .word 0xFFFFFFFF

D_80111B64: .word 0x0000039C
D_80111B68: .word 0xFFFFFFFF
D_80111B6C: .word 0x000003D0
D_80111B70: .word 0xFFFFFFFF
D_80111B74: .word 0xFFFFFFFF
D_80111B78: .word 0xFFFFFFFF
D_80111B7C: .word 0xFFFFFFFF
D_80111B80: .word 0xFFFFFFFF
D_80111B84: .word 0xFFFFFFFF

; bank model spaces
D_80111B88:
.halfword ${h.join(",")}
.align 4

; shop model spaces
D_80111B8C:
.halfword ${g.join(",")}
.align 4

; train related somehow
D_80111B90:
.halfword 0x0013, 0x0014, 0x0015, 0
.align 4

D_80111B98: .word 0x002D0034 0x00350036 0x00370038 0x0039003A 0x003B003D 0x003E003F 0x00400041
.align 4

D_80111BB4: .word 0x00440045 0x00460048 0x0049004A 0x004B004C 0x004D004E 0x004F0050 0x00520000
.align 4

D_80111BD0: .word 0x00550056 0x00570058 0x0059005A 0x005B005D 0x005E005F 0x00600061 0x0065005C 0x00670072 0x007D0000
.align 4

D_80111BF4:
.word D_80111B98
.word D_80111BB4
.word D_80111BD0

D_80111C00: .word 0x41A00000

D_80111C04: .word 0x00000000

D_80111C08: .word 0x00000000
D_80111C0C: .word 0x00000000
D_80111C10: .word 0x00000000
D_80111C14: .word 0x41A00000
D_80111C18: .word 0xC1A00000
D_80111C1C: .word 0x00000000
D_80111C20: .word 0x00000000

; AI table(s)
D_80111C24: .word 0x04000000 0x00000000 0x00006446
D_80111C30: .word 0x00000000 0x00000000 0x00003232
D_80111C3C: .word 0x02000000 0x00000001 0x00006446
D_80111C48: .word 0x02000000 0x00000054 0x00016446
D_80111C54: .word 0x02000000 0x0000000A D_80111C24
D_80111C60: .word 0x00000000 0x00000000 0x00003232
D_80111C6C: .word 0x02000000 0x00000008 0x00016446
D_80111C78: .word 0x09000000 0x00000008 0x00006446
D_80111C84: .word 0x00000000 0x00000000 0x00003232

; an AI decision tree
D_80111F60:
.word 0x00000000 0x00000000 0x00003232

; an AI decision tree
D_80111F6C:
.word 0x0E000000 0x00080007 0x00003232
.word 0x00000000 0x00000000 0x00004646
D_80111F84:
.word 0x0E000000 0x00020012 D_80111F6C
.word 0x00000000 0x00000000 0x00014646

D_80112160: .word 0x02000000 0x0000000E 0x00016464
D_8011216C: .word 0x00000000 0x00000000 0x00006464
D_80112178: .word 0x02000000 0x00000040 0x00016464
D_80112184: .word 0x10000000 0x00000001 D_80112160
D_80112190: .word 0x00000000 0x00000000 0x00006464

D_801122A4: .byte 0x02 0x05 0x0F 0x14

D_801122A8:
.word 0x00010001 func_80108E0C
.word 0 0

D_801122B8:
.word 0x00010001 func_8010964C
.word 0 0

D_801122C8: .word 0x00000101
D_801122CC: .word 0x01020303
D_801122D0: .word 0x04050606

D_801122D4: .word 0x01061001
D_801122D8: .word 0x0B150110
D_801122DC: .word 0x24000000

D_801122E0: .word 0x0001FFFF
D_801122E4: .word 0xFF000106
D_801122E8: .word 0xFFFF0001
D_801122EC: .word 0x0206FF00
D_801122F0: .word 0x010406FF
D_801122F4: .word 0x00010204
D_801122F8: .word 0x06000104
D_801122FC: .word 0x05060001
D_80112300: .word 0x05060900

D_80112304: .word 0x000001F2
D_80112308: .word 0x000001F3
D_8011230C: .word 0x000001F4
D_80112310: .word 0x000001F5
D_80112314: .word 0x000001F6
D_80112318: .word 0x000001F7
D_8011231C: .word 0x000001F8

D_80112320: .word 0x00010001 func_80109B30
D_80112328: .word 0x00000000 0x00000000

D_80112330: .word 0x01020300
D_80112334: .word 0x02030001
D_80112338: .word 0x03000102

D_8011233C: .word 0x42980000

D_80112340: .word 0x42500000
D_80112344: .word 0x43740000
D_80112348: .word 0x42500000
D_8011234C: .word 0x42980000
D_80112350: .word 0x43400000
D_80112354: .word 0x43740000
D_80112358: .word 0x43400000

D_8011235C: .word 0xBF800000
D_80112360: .word 0xBF800000
D_80112364: .word 0x3F800000
D_80112368: .word 0xBF800000
D_8011236C: .word 0xBF800000
D_80112370: .word 0x3F800000
D_80112374: .word 0x3F800000
D_80112378: .word 0x3F800000

D_8011237C: .word 0x00000086
D_80112380: .word 0x00000087
D_80112384: .word 0x00000088
D_80112388: .word 0x00000089
D_8011238C: .word 0x0000008A
D_80112390: .word 0x0000008B

D_80112394: .byte 0x01
D_80112395: .byte 0x05
D_80112396: .byte 0x0F
D_80112397: .byte 0x06
D_80112398: .word 0x0F191019
D_8011239C: .word 0x1B1A231E
D_801123A0: .word 0x242D202E
D_801123A4: .word 0x32230000

D_801123A8: .byte 0
D_801123A9: .byte 0
D_801123AA: .byte 0
D_801123AB: .byte 1
D_801123AC: .word 0x0A010B0B
D_801123B0: .word 0x040C1402
D_801123B4: .word 0x15150416
D_801123B8: .word 0x1E031F28
D_801123BC: .word 0x04292C05
D_801123C0: .word 0x2D2E0233
D_801123C4: .word 0x3806393D
D_801123C8: .word 0x053E4607
D_801123CC: .word 0x47470848
D_801123D0: .word 0xFF090000

D_801123D4: .byte 0x01
D_801123D5: .byte 0x05
D_801123D6: .byte 0x06
D_801123D7: .byte 0x09

D_801123D8: .word 0x0701050A
D_801123DC: .word 0x0C080105
D_801123E0: .word 0x0D0E0901
D_801123E4: .word 0x050F0F0A
D_801123E8: .word 0x060F1013
D_801123EC: .word 0x07060F14
D_801123F0: .word 0x1608060F
D_801123F4: .word 0x17180906
D_801123F8: .word 0x0F19190A
D_801123FC: .word 0x10191215
D_80112400: .word 0x07101916
D_80112404: .word 0x18081019
D_80112408: .word 0x191A0910
D_8011240C: .word 0x191B1B0A
D_80112410: .word 0x1A231518
D_80112414: .word 0x071A2319
D_80112418: .word 0x1B081A23
D_8011241C: .word 0x1C1D091A
D_80112420: .word 0x231E1E0A
D_80112424: .word 0x242D171A
D_80112428: .word 0x07242D1B
D_8011242C: .word 0x1D08242D
D_80112430: .word 0x1E1F0924
D_80112434: .word 0x2D20200A
D_80112438: .word 0x2E321A1D

D_8011243C: .byte 0x07
D_8011243D: .byte 0x2E

D_8011243E: .byte 0x32
D_8011243F: .byte 0x1E
D_80112440: .word 0x20082E32
D_80112444: .word 0x2122092E
D_80112448: .word 0x3223230A
D_8011244C: .word 0x06BB06BC
D_80112450: .word 0x06BD06BE

;D_80112454:
;.word 0x00010001 func_8010BA48
;.word 0 0

;D_80112464:
;.word 0x00010001 func_8010C44C
;.word 0 0

;D_80112474:
;.word 0x00010001 func_8010C468
;.word 0 0

; An event table
; D_80112484:
; .word 0x00370000 D_801122A8 ; star spaces
; .word 0x00480000 D_801122A8
; .word 0x00870000 D_801122A8
; .word 0x008E0000 D_801122A8
; .word 0x007E0000 D_801122A8
; .word 0x005A0000 D_801122A8
; .word 0x002F0000 D_801122A8
; .word 0x008A0000 D_801122B8 ; bank spaces
; .word 0x005E0000 D_801122B8
; .word 0x00A70000 D_80112320 ; item space
; .word 0x00940000 D_80112464 ; gate
; .word 0x00950000 D_80112474 ; gate
; .word 0xFFFF0000 0

; An event table
; D_801124EC:
; .word 0x00AF0000 D_80112454 ; boos
; .word 0x00B40000 D_80112454
; .word 0xFFFF0000 0

.align 8
D_80112504: .word 0x42D80000
D_80112508: .word 0x42240000
.word 0x43740000
.word 0x42240000
.word 0x42D80000
.word 0x43510000
.word 0x43740000
.word 0x43510000

D_80112524: .word 0x43240000
D_80112528: .word 0x42980000
.word 0x430C0000
.word 0x42980000
.word 0x43240000
.word 0x42980000
.word 0x430C0000
.word 0x42980000

D_80112544: .word 0x43040000
D_80112548: .word 0x42780000
.word 0x435C0000
.word 0x42780000
.word 0x43040000
.word 0x43340000
.word 0x435C0000
.word 0x43340000

D_80112564: .word 0x43240000
D_80112568: .word 0x42840000
.word 0x430C0000
.word 0x42840000
.word 0x43240000
.word 0x42840000
.word 0x430C0000
.word 0x42840000

D_80112584:
.word 0x000002C5
.word 0x000002DC
.word 0x000002FA
.word 0x00000317
.word 0x00000337
.word 0x00000357

D_8011259C:
.word 0x001A001B
.word 0x0024001E
.word 0x00230025

D_801125A8: .word 0x0F000000 0x00000028 0x00003214
D_801125B4: .word 0x00000000 0x00000000 0x00003C1E
D_801125C0: .word 0x0E000000 0x0002000A D_801125A8
D_801125CC: .word 0x00000000 0x00000000 0x00000514
D_801125D8: .word 0x0E000000 0x00040002 D_801125A8
D_801125E4: .word 0x0E000000 0x00030005 D_801125A8
D_801125F0: .word 0x0E000000 0x000E0006 D_801125A8
D_801125FC: .word 0x00000000 0x00000000 0x00000514
D_80112608: .word 0x0E000000 0x000E0002 D_801125A8
D_80112614: .word 0x0E000000 0x000C0002 D_801125A8
D_80112620: .word 0x0E000000 0x000B0007 D_801125A8
D_8011262C: .word 0x0E000000 0x00090004 D_801125A8
D_80112638: .word 0x00000000 0x00000000 0x00000514
D_80112644: .word 0x00000000 0x00000000 0x0000000A
D_80112650: .word 0x0E000000 0x000B0004 D_801125A8
D_8011265C: .word 0x0E000000 0x00080007 D_801125A8
D_80112668: .word 0x00000000 0x00000000 0x00000514
D_80112674: .word 0x0E000000 0x00160304 D_801125A8
D_80112680: .word 0x0E000000 0x00110001 D_801125A8
D_8011268C: .word 0x0E000000 0x00100004 D_801125A8
D_80112698: .word 0x00000000 0x00000000 0x00000514
D_801126A4: .word 0x0E000000 0x00120005 D_801125A8
D_801126B0: .word 0x00000000 0x00000000 0x00000514
D_801126BC: .word 0x02000000 0x00000001 D_801125C0
D_801126C8: .word 0x02000000 0x00000002 D_801125D8
D_801126D4: .word 0x02000000 0x00000004 D_80112608
D_801126E0: .word 0x02000000 0x00000008 D_80112644
D_801126EC: .word 0x02000000 0x00000010 D_80112650
D_801126F8: .word 0x02000000 0x00000020 D_80112674
D_80112704: .word 0x02000000 0x00000040 D_801126A4
D_80112710: .word 0x00000000 0x00000000 0x00003232

D_80112760: .word 0x41A00000
D_80112764: .word 0xC0A00000
.word 0x41F00000
.word 0xC0A00000
.word 0x41A00000
.word 0x40A00000
.word 0x41F00000
.word 0x40A00000

D_80112780: .word 0x02000000 0x0000006A 0x00006446
D_8011278C: .word 0x02000000 0x00000001 0x0001645A
D_80112798: .word 0x00000000 0x00000000 0x00003232
D_801127A4: .word 0x02000000 0x00000075 0x00006446
D_801127B0: .word 0x02000000 0x00000008 0x0001645A
D_801127BC: .word 0x00000000 0x00000000 0x00003232
D_801127C8: .word 0x02000000 0x00000001 0x00006446
D_801127D4: .word 0x02000000 0x00000060 0x0001645A
D_801127E0: .word 0x00000000 0x00000000 0x00003232

D_80112914: .word 0x00000000
.word 0x00000000
.word 0x43A00000
.word 0x43700000

D_80112924: .word 0x0F000000 0x00000019 0x0000001E
D_80112930: .word 0x04000000 0x00000002 0x00005A3C
D_8011293C: .word 0x00000000 0x00000000 0x00000A1E
D_80112948: .word 0x0D000000 0x00170206 D_80112924
D_80112954: .word 0x0D000000 0x00050004 D_80112924
D_80112960: .word 0x0D000000 0x00060002 D_80112924
D_8011296C: .word 0x0F000000 0x00000014 0x0000001E
D_80112978: .word 0x0D000000 0x00020004 0x00005A3C
D_80112984: .word 0x0D000000 0x00010003 0x00005A3C
D_80112990: .word 0x0D000000 0x00070005 0x00005A3C
D_8011299C: .word 0x0D000000 0x00000001 0x00005A3C
D_801129A8: .word 0x00000000 0x00000000 0x00000A1E
D_801129B4: .word 0x0F000000 0x00000019 0x0000001E
D_801129C0: .word 0x04000000 0x00000000 0x00005A3C
D_801129CC: .word 0x00000000 0x00000000 0x00000A1E
D_801129D8: .word 0x0F000000 0x0000001E 0x0000001E
D_801129E4: .word 0x0D000000 0x000E0002 0x00005A3C
D_801129F0: .word 0x0D000000 0x000C0002 0x00005A3C
D_801129FC: .word 0x0D000000 0x000B0007 0x00005A3C
D_80112A08: .word 0x00000000 0x00000000 0x00000A1E
D_80112A14: .word 0x0F000000 0x0000001E 0x0000001E
D_80112A20: .word 0x0D000000 0x000B0004 0x00005A3C
D_80112A2C: .word 0x00000000 0x00000000 0x00000A1E
D_80112A38: .word 0x0D000000 0x00020004 D_801129B4
D_80112A44: .word 0x0D000000 0x00010004 D_801129B4
D_80112A50: .word 0x0D000000 0x00000001 D_801129B4
D_80112A5C: .word 0x0D000000 0x00070205 D_801129B4
D_80112A68: .word 0x0F000000 0x00000005 0x00000000
D_80112A74: .word 0x0D000000 0x00020610 0x00005A3C
D_80112A80: .word 0x0F000000 0x00000014 0x0000001E
D_80112A8C: .word 0x0D000000 0x00030003 0x00005A3C
D_80112A98: .word 0x0D000000 0x00021112 0x00005A3C
D_80112AA4: .word 0x0D000000 0x000A0005 0x00005A3C
D_80112AB0: .word 0x0F000000 0x00000019 0x0000001E
D_80112ABC: .word 0x0D000000 0x000E0304 0x00005A3C
D_80112AC8: .word 0x0D000000 0x00090004 0x00005A3C
D_80112AD4: .word 0x09000000 0x00000004 D_801129D8
D_80112AE0: .word 0x0D000000 0x000E0002 0x00005A3C
D_80112AEC: .word 0x0D000000 0x000C0002 0x00005A3C
D_80112AF8: .word 0x0D000000 0x000B0507 0x00005A3C
D_80112B04: .word 0x09000000 0x00000010 D_80112A14
D_80112B10: .word 0x0D000000 0x000B0004 0x00005A3C
D_80112B1C: .word 0x00000000 0x00000000 0x00000A1E
D_80112B28: .word 0x0F000000 0x00000019 0x0000001E
D_80112B34: .word 0x0D000000 0x000B0004 0x00005A3C
D_80112B40: .word 0x00000000 0x00000000 0x00000A1E
D_80112B4C: .word 0x0F000000 0x00000014 0x0000001E
D_80112B58: .word 0x0D000000 0x00090004 0x00005A3C
D_80112B64: .word 0x0D000000 0x00080007 0x00005A3C
D_80112B70: .word 0x09000000 0x00000010 D_80112B28
D_80112B7C: .word 0x0D000000 0x000B0004 0x00005A3C
D_80112B88: .word 0x00000000 0x00000000 0x00000A1E
D_80112B94: .word 0x0F000000 0x0000001E 0x0000001E
D_80112BA0: .word 0x04000000 0x00000000 0x00005A3C
D_80112BAC: .word 0x00000000 0x00000000 0x00000A1E
D_80112BB8: .word 0x09000000 0x00000002 D_80112B94
D_80112BC4: .word 0x0F000000 0x00000019 0x0000001E
D_80112BD0: .word 0x04000000 0x00000000 0x00005A3C
D_80112BDC: .word 0x00000000 0x00000000 0x00000A1E
D_80112BE8: .word 0x0F000000 0x00000023 0x0000001E
D_80112BF4: .word 0x0D000000 0x000E0002 0x00005A3C
D_80112C00: .word 0x0D000000 0x000C0002 0x00005A3C
D_80112C0C: .word 0x0D000000 0x000B0507 0x00005A3C
D_80112C18: .word 0x00000000 0x00000000 0x00000A1E
D_80112C24: .word 0x0F000000 0x0000001E 0x0000001E
D_80112C30: .word 0x0D000000 0x000E0002 0x00005A3C
D_80112C3C: .word 0x0D000000 0x000C0002 0x00005A3C
D_80112C48: .word 0x0D000000 0x000B0507 0x00005A3C
D_80112C54: .word 0x00000000 0x00000000 0x00000A1E
D_80112C60: .word 0x0F000000 0x00000019 0x0000001E
D_80112C6C: .word 0x0D000000 0x00030005 0x00005A3C
D_80112C78: .word 0x0D000000 0x00040002 0x00005A3C
D_80112C84: .word 0x0D000000 0x000A0005 0x00005A3C
D_80112C90: .word 0x0D000000 0x00021112 0x00005A3C
D_80112C9C: .word 0x0D000000 0x000E0506 0x00005A3C
D_80112CA8: .word 0x0F000000 0x0000001E 0x0000001E
D_80112CB4: .word 0x0D000000 0x000E0304 0x00005A3C
D_80112CC0: .word 0x09000000 0x00000004 D_80112BE8
D_80112CCC: .word 0x0D000000 0x000E0002 0x00005A3C
D_80112CD8: .word 0x0D000000 0x000C0002 0x00005A3C
D_80112CE4: .word 0x0D000000 0x000B0507 0x00005A3C
D_80112CF0: .word 0x00000000 0x00000000 0x00000A1E
D_80112CFC: .word 0x0D000000 0x00020004 D_80112BB8
D_80112D08: .word 0x0D000000 0x00010004 D_80112BB8
D_80112D14: .word 0x0F000000 0x00000005 0x00000000
D_80112D20: .word 0x0D000000 0x00020C10 0x00005A3C
D_80112D2C: .word 0x0F000000 0x00000014 0x0000001E
D_80112D38: .word 0x09000000 0x00000002 D_80112C60
D_80112D44: .word 0x0D000000 0x00030005 0x00005A3C
D_80112D50: .word 0x0D000000 0x00040002 0x00005A3C
D_80112D5C: .word 0x0D000000 0x000A0005 0x00005A3C
D_80112D68: .word 0x0D000000 0x00021112 0x00005A3C
D_80112D74: .word 0x0D000000 0x000E0506 0x00005A3C
D_80112D80: .word 0x0F000000 0x00000019 0x0000001E
D_80112D8C: .word 0x0D000000 0x000E0304 0x00005A3C
D_80112D98: .word 0x09000000 0x00000004 D_80112C24
D_80112DA4: .word 0x0D000000 0x000E0002 0x00005A3C
D_80112DB0: .word 0x0D000000 0x000C0002 0x00005A3C
D_80112DBC: .word 0x0D000000 0x000B0507 0x00005A3C
D_80112DC8: .word 0x00000000 0x00000000 0x00000A1E
D_80112DD4: .word 0x0F000000 0x00000014 0x0000001E
D_80112DE0: .word 0x0D000000 0x00080007 0x00005A3C
D_80112DEC: .word 0x0D000000 0x00010003 0x00005A3C
D_80112DF8: .word 0x0D000000 0x00000001 0x00005A3C
D_80112E04: .word 0x0D000000 0x00070005 0x00005A3C
D_80112E10: .word 0x00000000 0x00000000 0x00000A1E
D_80112E1C: .word 0x0F000000 0x00000019 0x0000001E
D_80112E28: .word 0x04000000 0x00000001 0x00005A3C
D_80112E34: .word 0x00000000 0x00000000 0x00000A1E
D_80112E40: .word 0x0F000000 0x0000000A 0x00000000
D_80112E4C: .word 0x0D000000 0x00170001 0x00005A3C
D_80112E58: .word 0x00000000 0x00000000 0x00000A1E
D_80112E64: .word 0x0D000000 0x00030003 D_80112E1C
D_80112E70: .word 0x0D000000 0x000A0005 D_80112E1C
D_80112E7C: .word 0x0D000000 0x00020B12 D_80112E1C
D_80112E88: .word 0x0F000000 0x00000005 0x00000000
D_80112E94: .word 0x0D000000 0x00060006 0x00005A3C
D_80112EA0: .word 0x0D000000 0x00050004 0x00005A3C
D_80112EAC: .word 0x0D000000 0x00040307 0x00005A3C
D_80112EB8: .word 0x0D000000 0x00170206 0x00005A3C
D_80112EC4: .word 0x09000000 0x00000008 D_80112E40
D_80112ED0: .word 0x0D000000 0x00170001 0x00005A3C
D_80112EDC: .word 0x0F000000 0x00000014 0x0000001E
D_80112EE8: .word 0x0D000000 0x00100003 0x00005A3C
D_80112EF4: .word 0x00000000 0x00000000 0x00000A1E
D_80112F00: .word 0x0D000000 0x00090001 0x00005A3C
D_80112F0C: .word 0x0D000000 0x00080007 0x00005A3C
D_80112F18: .word 0x00000000 0x00000000 0x00000A1E
D_80112F24: .word 0x02000000 0x00000001 D_80112948
D_80112F30: .word 0x02000000 0x00000002 D_80112A38
D_80112F3C: .word 0x02000000 0x00000004 D_80112B4C
D_80112F48: .word 0x02000000 0x00000008 D_80112CFC
D_80112F54: .word 0x02000000 0x00000010 D_80112DD4
D_80112F60: .word 0x02000000 0x00000020 D_80112E64
D_80112F6C: .word 0x02000000 0x00000040 D_80112F00
D_80112F78: .word 0x00000000 0x00000000 0x00000000

D_80112F84: .word 0x00000000 0x00000000 0x00005032
D_80112F90: .word 0x0E000000 0x0002000A 0x00005A3C
D_80112F9C: .word 0x00000000 0x00000000 0x0000001E

D_80112FA8: .word 0x0E000000 0x0002000A 0x00005A3C
D_80112FB4: .word 0x0E000000 0x00010004 0x00005A3C
D_80112FC0: .word 0x00000000 0x00000000 0x0000001E
D_80112FCC: .word 0x0D000000 0x0002000A 0x0000000A
D_80112FD8: .word 0x0D000000 0x00010004 D_80112F90
D_80112FE4: .word 0x0D000000 0x00070005 D_80112FA8
D_80112FF0: .word 0x0D000000 0x00000001 D_80112FA8
D_80112FFC: .word 0x0E000000 0x0002000A 0x00005A3C
D_80113008: .word 0x0E000000 0x00010004 0x00005A3C
D_80113014: .word 0x0E000000 0x00070005 0x00005A3C
D_80113020: .word 0x00000000 0x00000000 0x00001E1E
D_8011302C: .word 0x0D000000 0x00040002 0x0000000A
D_80113038: .word 0x0D000000 0x00030005 0x0000000A
D_80113044: .word 0x0D000000 0x000E0006 0x0000000A
D_80113050: .word 0x0E000000 0x00040002 0x00005A3C
D_8011305C: .word 0x0E000000 0x00030005 0x00005A3C
D_80113068: .word 0x0E000000 0x000E0006 0x00005A3C
D_80113074: .word 0x00000000 0x00000000 0x00001E1E
D_80113080: .word 0x0D000000 0x000E0002 0x0000000A
D_8011308C: .word 0x0D000000 0x000C0002 0x0000000A
D_80113098: .word 0x0D000000 0x000B0107 0x0000000A
D_801130A4: .word 0x0D000000 0x00090004 0x0000000A
D_801130B0: .word 0x0E000000 0x000E0002 0x00005A3C
D_801130BC: .word 0x0E000000 0x000C0002 0x00005A3C
D_801130C8: .word 0x0E000000 0x000B0107 0x00005A3C
D_801130D4: .word 0x0E000000 0x00090004 0x00005A3C
D_801130E0: .word 0x00000000 0x00000000 0x00001E1E
D_801130EC: .word 0x0E000000 0x00170001 0x00005A3C
D_801130F8: .word 0x0E000000 0x00040007 0x00005A3C
D_80113104: .word 0x00000000 0x00000000 0x00001E1E
D_80113110: .word 0x0D000000 0x00170001 0x0000000A
D_8011311C: .word 0x0D000000 0x00040007 0x0000000A
D_80113128: .word 0x0D000000 0x00030005 D_801130EC
D_80113134: .word 0x0D000000 0x000E0006 D_801130EC
D_80113140: .word 0x0E000000 0x00170001 0x00005A3C
D_8011314C: .word 0x0E000000 0x00040007 0x00005A3C
D_80113158: .word 0x0E000000 0x00030005 0x00005A3C
D_80113164: .word 0x0E000000 0x000E0006 0x00005A3C
D_80113170: .word 0x00000000 0x00000000 0x00001E1E
D_8011317C: .word 0x0E000000 0x000B0004 0x00005A3C
D_80113188: .word 0x00000000 0x00000000 0x00001E1E
D_80113194: .word 0x0D000000 0x000B0004 0x0000000A
D_801131A0: .word 0x0D000000 0x00080007 D_8011317C
D_801131AC: .word 0x00000000 0x00000000 0x00001E1E
D_801131B8: .word 0x0D000000 0x00160004 0x0000000A
D_801131C4: .word 0x0D000000 0x00110001 0x0000000A
D_801131D0: .word 0x0D000000 0x00100004 0x0000000A
D_801131DC: .word 0x0D000000 0x00060006 0x0000000A
D_801131E8: .word 0x0E000000 0x00160004 0x00005A3C
D_801131F4: .word 0x0E000000 0x00110001 0x00005A3C
D_80113200: .word 0x0E000000 0x00100004 0x00005A3C
D_8011320C: .word 0x0E000000 0x00060006 0x00005A3C
D_80113218: .word 0x00000000 0x00000000 0x00001E1E
D_80113224: .word 0x0D000000 0x00120005 0x0000000A
D_80113230: .word 0x0E000000 0x00120005 0x00005A3C
D_8011323C: .word 0x00000000 0x00000000 0x00003C1E
D_80113248: .word 0x02000000 0x00000001 D_80112FCC
D_80113254: .word 0x02000000 0x00000002 D_8011302C
D_80113260: .word 0x02000000 0x00000004 D_80113080
D_8011326C: .word 0x02000000 0x00000008 D_80113110
D_80113278: .word 0x02000000 0x00000010 D_80113194
D_80113284: .word 0x02000000 0x00000020 D_801131B8
D_80113290: .word 0x02000000 0x00000040 D_80113224
D_8011329C: .word 0x00000000 0x00000000 0x00000000
D_801132A8: .word 0x0D000000 0x0002040A 0x00000000
D_801132B4: .word 0x00000000 0x00000000 0x00006464
D_801132C0: .word 0x0D000000 0x00040002 0x00000000
D_801132CC: .word 0x0D000000 0x00030205 0x00000000
D_801132D8: .word 0x0D000000 0x000E0406 0x00000000
D_801132E4: .word 0x00000000 0x00000000 0x00006464
D_801132F0: .word 0x0D000000 0x000E0002 0x00000000
D_801132FC: .word 0x0D000000 0x000C0002 0x00000000
D_80113308: .word 0x0D000000 0x000B0507 0x00000000
D_80113314: .word 0x00000000 0x00000000 0x00006464
D_80113320: .word 0x0D000000 0x00170001 0x00000000
D_8011332C: .word 0x0D000000 0x00040207 0x00000000
D_80113338: .word 0x00000000 0x00000000 0x00006464
D_80113344: .word 0x0D000000 0x000B0004 0x00000000
D_80113350: .word 0x0D000000 0x00080607 0x00000000
D_8011335C: .word 0x00000000 0x00000000 0x00006464
D_80113368: .word 0x0D000000 0x00160004 0x00000000
D_80113374: .word 0x0D000000 0x00060406 0x00000000
D_80113380: .word 0x0D000000 0x00110001 0x00000000
D_8011338C: .word 0x0D000000 0x00100204 0x00000000
D_80113398: .word 0x00000000 0x00000000 0x00006464
D_801133A4: .word 0x0D000000 0x00120005 0x00000000
D_801133B0: .word 0x00000000 0x00000000 0x00006464
D_801133BC: .word 0x02000000 0x00000001 D_801132A8
D_801133C8: .word 0x02000000 0x00000002 D_801132C0
D_801133D4: .word 0x02000000 0x00000004 D_801132F0
D_801133E0: .word 0x02000000 0x00000008 D_80113320
D_801133EC: .word 0x02000000 0x00000010 D_80113344
D_801133F8: .word 0x02000000 0x00000020 D_80113368
D_80113404: .word 0x02000000 0x00000040 D_801133A4
D_80113410: .word 0x00000000 0x00000000 0x00000000
D_8011341C: .word 0x02000000 0x00000040 0x00005A3C
D_80113428: .word 0x00000000 0x00000000 0x00000000
D_80113434: .word 0x02000000 0x00000071 0x00005A3C
D_80113440: .word 0x00000000 0x00000000 0x00000000
D_8011344C: .word 0x01000000 0x0000001E 0x00006446
D_80113458: .word 0x00000000 0x00000000 0x0000001E
D_80113464: .word 0x0A000000 0x00000009 D_8011344C
D_80113470: .word 0x01000000 0x00000032 0x00006446
D_8011347C: .word 0x01000000 0x00000028 0x0000503C
D_80113488: .word 0x01000000 0x0000001E 0x00003232
D_80113494: .word 0x00000000 0x00000000 0x00001432
D_801134A0: .word 0x02000000 0x00000004 D_80113464
D_801134AC: .word 0x01000000 0x0000001E 0x00006446
D_801134B8: .word 0x00000000 0x00000000 0x00005A3C

D_801134C4: .word 0x00000000

D_801134C8: .word 0x09060007 0x04080205 0x01000000
D_801134D4: .word 0x09010607 0x04080002 0x05000000
D_801134E0: .word 0x09070206 0x04080005 0x01000000
D_801134EC: .word 0x09050706 0x04080002 0x01000000
D_801134F8: .word 0x09040807 0x06000205 0x01000000
D_80113504: .word 0x09070604 0x08000205 0x01000000
D_80113510: .word D_801134C8
D_80113514: .word D_801134D4
D_80113518: .word D_801134E0
D_8011351C: .word D_801134EC
D_80113520: .word D_801134F8
D_80113524: .word D_80113504

D_80113528: .word 0x64463C00 0x32001E1E 0x0A000000
D_80113534: .word 0x64463C00 0x3200141E 0x1E000000
D_80113540: .word 0x64463C3C 0x3200141E 0x0A000000
D_8011354C: .word 0x64463C3C 0x3200141E 0x0A000000
D_80113558: .word 0x64463C00 0x3C141E1E 0x0A000000
D_80113564: .word 0x64463C32 0x00141E1E 0x0A000000
D_80113570: .word D_80113528
D_80113574: .word D_80113534
D_80113578: .word D_80113540
D_8011357C: .word D_8011354C
D_80113580: .word D_80113558
D_80113584: .word D_80113564

D_80113588: .word 0x09090909 0x09090000

D_80113590: .word 0x01020408

D_80113594: .word 0x00000000

D_80113598: .word 0x00000000
D_8011359C: .word 0x00000000
D_801135A0: .word 0x00000000

D_801135A4: .word 0x000E000D 0x00110000

D_801135AC: .word 0x00000000
D_801135B0: .word 0x00000000
D_801135B4: .word 0x00000000

.align 8
; Doubles
D_801135B8: .word 0x3FF00000
D_801135BC: .word 0x00000000

D_801135C0: .word 0x3FF00000
D_801135C4: .word 0x00000000

D_801135C8: .word 0x25640000
D_801135CC: .word 0x00000000

D_801135D0: .word 0x3F91DF46
D_801135D4: .word 0xA2529D39

D_801135D8: .word 0x3F91DF46
D_801135DC: .word 0xA2529D39

D_801135E0: .word 0x3F91DF46
D_801135E4: .word 0xA2529D39

D_801135E8: .word 0x3F91DF46
D_801135EC: .word 0xA2529D39

D_801135F0: .word 0x3FF80000
D_801135F4: .word 0x00000000

D_801135F8:
.word 0x3F800000
.word 0x3F800000
.word 0x3F800000
.word 0x3F800000
.word 0x40000000
.word 0x3F800000
.word 0x00000000
.word 0x40000000
.word 0x3F800000
.word 0xBF800000
.word 0x3F800000
.word 0x3F800000
.word 0xBF800000
.word 0xBF800000
.word 0x3F800000
.word 0x00000000
.word 0xBF800000
.word 0x3F800000
.word 0xBF800000
.word 0x40000000
.word 0x3F800000
.word 0x3F800000
.word 0xBF800000
.word 0x3F800000

.align 8
D_80113658: .word 0x3FE00000
D_8011365C: .word 0x00000000

D_80113660: .word 0x3FE00000
D_80113664: .word 0x00000000

D_80113668: .word 0x3FE00000
D_8011366C: .word 0x00000000

D_80113670: .word 0x3FE00000
D_80113674: .word 0x00000000

D_80113678: .word 0x3FF00000
D_8011367C: .word 0x00000000

D_80113680: .word 0x3FF00000
D_80113684: .word 0x00000000

D_80113688: .word 0x3FF00000
D_8011368C: .word 0x00000000

D_80113690: .word 0x3FF00000
D_80113694: .word 0x00000000

DuelMinigamesArray:
.byte 0x3F ; Western Land minigame index
.byte 0x42 ; Pirate Land minigame index
.byte 0x44 ; Horror Land minigame index
.byte 0x46 ; Space Land minigame index
.byte 0x48 ; Mystery Land minigame index
.byte 0x4A ; Bowser Land minigame index
.align 4

; jump table
D_80113698:
.word D_801113C8
.word D_801113A4
.word D_801113C8
.word D_8011142C
.word D_801113C8
.word D_80111504
.word D_80111418
.word D_801113D0
.word D_80111490
.word D_801113F4
.word D_801114B8

.align 16

; bss
D_801136D0: .word 0
D_801136D4: .word 0
D_801136D8: .word 0
D_801136DC: .word 0
D_801136E0: .word 0
D_801136E4: .word 0
D_801136E8: .word 0
D_801136EC: .word 0
D_801136F0: .word 0
D_801136F4: .word 0
D_801136F8: .word 0
D_801136FC: .word 0
D_80113700: .word 0
D_80113704: .word 0
D_80113708: .word 0
D_8011370C: .word 0
D_80113710: .word 0
D_80113714: .word 0
D_80113718: .word 0
D_8011371C: .word 0
D_80113720: .word 0
D_80113724: .word 0
D_80113728: .word 0
D_8011372C: .word 0
D_80113730: .word 0
D_80113734: .word 0
D_80113738: .word 0
D_8011373C: .word 0
D_80113740: .word 0
D_80113744: .word 0
D_80113748: .word 0
D_8011374C: .word 0
D_80113750: .word 0
D_80113754: .word 0
D_80113758: .word 0
D_8011375C: .word 0
D_80113760: .word 0
D_80113764: .word 0
D_80113768: .word 0
D_8011376C: .word 0
D_80113770: .word 0
D_80113774: .word 0
D_80113778: .word 0
D_8011377C: .word 0
D_80113780: .word 0
D_80113784: .word 0
D_80113788: .word 0
D_8011378C: .word 0
D_80113790: .word 0
D_80113794: .word 0
D_80113798: .word 0
D_8011379C: .word 0
D_801137A0: .word 0
D_801137A4: .word 0
D_801137A8: .word 0
D_801137AC: .word 0
D_801137B0: .word 0
D_801137B4: .word 0
D_801137B8: .word 0
D_801137BC: .word 0
D_801137C0: .word 0
D_801137C4: .word 0
D_801137C8: .word 0
D_801137CC: .word 0
D_801137D0: .word 0
D_801137D4: .word 0
D_801137D8: .word 0
D_801137DC: .word 0
D_801137E0: .word 0
D_801137E4: .word 0
D_801137E8: .word 0
D_801137EC: .word 0
D_801137F0: .word 0
D_801137F4: .word 0
D_801137F8: .word 0
D_801137FC: .word 0
D_80113800: .word 0
D_80113804: .word 0
D_80113808: .word 0
D_8011380C: .word 0
D_80113810: .word 0
D_80113814: .word 0
D_80113818: .word 0
D_8011381C: .word 0
D_80113820: .word 0
D_80113824: .word 0
D_80113828: .word 0
D_8011382C: .word 0
D_80113830: .word 0
D_80113834: .word 0
D_80113838: .word 0
D_8011383C: .word 0
D_80113840: .word 0
D_80113844: .word 0
D_80113848: .word 0
D_8011384C: .word 0
D_80113850: .word 0
D_80113854: .word 0
D_80113858: .word 0
D_8011385C: .word 0
D_80113860: .word 0
D_80113864: .word 0
D_80113868: .word 0
D_8011386C: .word 0
D_80113870: .word 0
D_80113874: .word 0
D_80113878: .word 0
D_8011387C: .word 0
D_80113880: .word 0
D_80113884: .word 0
D_80113888: .word 0
D_8011388C: .word 0
D_80113890: .word 0
D_80113894: .word 0
D_80113898: .word 0
D_8011389C: .word 0
D_801138A0: .word 0
D_801138A4: .word 0
D_801138A8: .word 0
D_801138AC: .word 0
D_801138B0: .word 0
D_801138B4: .word 0
D_801138B8: .word 0
D_801138BC: .word 0
`}const d$="data:image/png;base64,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";class A$ extends OE{constructor(){super(...arguments),this.gameVersion=2,this.nintendoLogoFSEntry=[9,1],this.hudsonLogoFSEntry=[9,2],this.boardDefDirectory=10,this.MAINFS_READ_ADDR=95872,this.HEAP_FREE_ADDR=96256,this.TABLE_HYDRATE_ADDR=349836}onLoad(e,t,r){r||(this._extractCostumeType(e,t),this._extractBanks(e,t),this._extractItemShops(e,t)),this._parseBoardSelectIcon(e,t),this._readAnimationBackgrounds(e,t)}onCreateBoardOverlay(e,t,r,i){return u$(e,t,r,i)}onAfterOverwrite(e,t,r,i){e.setUint16(267778,32832),e.setUint16(267786,4194304-this.EVENT_MEM_SIZE>>>16),e.setUint16(267798,26),e.setUint16(493214,26),this._writeCostumeType(e,t,i),typeof r.animBgSet=="number"&&Kn.setSetEntryCount(r.animBgSet,0)}onOverwritePromises(e,t,r){const i=t.bgDir,a=[this._writeBackground(i,e.bg.src,e.bg.width,e.bg.height),this._writeAnimationBackgrounds(t.animBgSet,e.bg.width,e.bg.height,e.bg.src,e.animbg),this._writeBackground(i+2,e.otherbg.largescene,320,240),this._writeOverviewBackground(i+6,e.bg.src),this.onWriteBoardSelectImg(e,t),this._writeBoardSelectIcon(e,t),this.onWriteBoardLogoImg(e,t),this._brandBootSplashscreen()];return Promise.all(a)}onWriteEvents(e){}hydrateSpace(e,t,r){e.type===de.BANK&&Lo(t,e,ri(NA),!1,r)}onParseStrings(e,t){const r=t.str||{};if(r.boardSelect){const i=r.boardSelect,a=Bt.read(i),o=a.split(`
`),s=o[0].indexOf(">")+1,l=o[0].indexOf("",s);e.name=o[0].substring(s,l),e.description=[o[1],o[2]].join(`
`);let u=0,d=a.indexOf(this.getCharacterMap()[59],0);for(;d!==-1;)u++,d=a.indexOf(this.getCharacterMap()[59],d+1);e.difficulty=u}}onWriteStrings(e,t){const r=t.str||{};if(r.boardSelect){let i=[];i.push(11),i.push(6),i=i.concat(Bt._strToBytes(e.name||"")),i.push(25),i.push(4),i=i.concat([14,14]),i=i.concat(Bt._strToBytes("Difficulty")),i.push(25),i=i.concat(Bt._strToBytes(" : "));const a=59;if(e.difficulty>5||e.difficulty<1)i.push(a),i=i.concat(Bt._strToBytes(" ")),i.push(62),i=i.concat(Bt._strToBytes(" "+e.difficulty.toString()));else for(let l=0;l<e.difficulty;l++)i.push(a);i.push(10),i=i.concat(Bt._strToBytes(e.description||"")),i.push(0);const o=hi(i),s=r.boardSelect;Bt.write(s,o)}if(r.boardNames&&r.boardNames.length){let i=[];i.push(11),i.push(6),i=i.concat(Bt._strToBytes(e.name||"")),i.push(25),i.push(0);const a=hi(i);for(let o=0;o<r.boardNames.length;o++){const s=r.boardNames[o];Bt.write(s,a)}}if(r.boardGreeting&&r.boardGreeting.length){let i=[];i.push(11),i=i.concat(Bt._strToBytes("We're here, everyone!")),i.push(10),i=i.concat(Bt._strToBytes("This is ")),i.push(6),i.push(15),i=i.concat(Bt._strToBytes((e.name||"")+"!!!")),i.push(22),i.push(25),i.push(255),i.push(0);let a=hi(i);Bt.write(r.boardGreeting[0],a),i=[],i.push(11),i=i.concat(Bt._strToBytes("Now, before this adventure begins,")),i.push(10),i=i.concat(Bt._strToBytes("we must decide turn order.")),i.push(255),i.push(0),a=hi(i),Bt.write(r.boardGreeting[1],a)}if(r.boardWinner){let i=[];i.push(11),i=i.concat(Bt._strToBytes("Well done, ")),i.push(17),i=i.concat(Bt._strToBytes("!")),i.push(10),i=i.concat(Bt._strToBytes("You are the ")),i.push(7),i.push(15),i=i.concat(Bt._strToBytes("Super Star")),i.push(22),i.push(25),i.push(10),i=i.concat(Bt._strToBytes("of ")),i.push(6),i.push(15),i=i.concat(Bt._strToBytes((e.name||"")+"!!!")),i.push(22),i.push(25),i.push(0);const a=hi(i);Bt.write(r.boardWinner,a)}if(r.boardPlayCount){let i=[];i.push(11),i=i.concat(Bt._strToBytes(e.name||"")),i=i.concat([14,14,14,14,14,14]),i.push(17),i=i.concat(Bt._strToBytes(" Time(s)")),i.push(0);const a=hi(i);Bt.write(r.boardPlayCount,a)}}onChangeBoardSpaceTypesFromGameSpaceTypes(e,t){const r={0:de.OTHER,3:de.OTHER,5:de.CHANCE,6:de.ITEM,7:de.BANK,8:de.OTHER,9:de.BATTLE,12:de.BOWSER,14:de.STAR,15:de.BLACKSTAR,16:de.OTHER,17:de.OTHER};if(e.spaces.forEach(i=>{const a=i.type,o=r[a];o!==void 0&&(i.type=o)}),t.length){const i=t[0][0];isNaN(i)||(e.spaces[i].type=de.START)}}onChangeGameSpaceTypesFromBoardSpaceTypes(e){const t={[de.OTHER]:0,[de.BLUE]:1,[de.RED]:2,[de.MINIGAME]:0,[de.HAPPENING]:4,[de.STAR]:14,[de.CHANCE]:5,[de.START]:0,[de.SHROOM]:0,[de.BOWSER]:12,[de.ITEM]:6,[de.BATTLE]:9,[de.BANK]:7,[de.ARROW]:13,[de.BLACKSTAR]:15,[de.GAMEGUY]:0,[de.DUEL_BASIC]:0,[de.DUEL_START_BLUE]:0,[de.DUEL_START_RED]:0,[de.DUEL_POWERUP]:0,[de.DUEL_REVERSE]:0};e.spaces.forEach(r=>{const i=t[r.type];i!==void 0&&(r.type=i)})}_extractCostumeType(e,t){e.costumeTypeIndex=t.costumeType}_writeCostumeType(e,t,r){var l;const a={[d0.NORMAL]:{small:211,big:209,toad:524288,player2d:[656002,656003,656005,656006,656004,656007],bowser2d:[656026,656027,656029,656030,656028,656031]},[d0.WESTERN]:{small:212,big:213,toad:524302,player2d:[655972,655973,655975,655976,655974,655977],bowser2d:[656008,656009,656011,656012,656010,656013]},[d0.PIRATE]:{small:214,big:215,toad:524310,player2d:[655978,655979,655981,655982,655980,655983],bowser2d:[656014,656015,656017,656018,656016,656019]},[d0.HORROR]:{small:216,big:217,toad:524328,player2d:[655984,655985,655987,655988,655986,655989],bowser2d:[656020,656021,656023,656024,656022,656025]},[d0.SPACE]:{small:218,big:219,toad:524316,player2d:[655990,655991,655993,655994,655992,655995],bowser2d:[656026,656027,656029,656030,656028,656031]},[d0.MYSTERY]:{small:220,big:221,toad:524323,player2d:[655996,655997,655999,656e3,655998,656001],bowser2d:[656032,656033,656035,656036,656034,656037]}}[(l=t.costumeTypeIndex)!=null?l:d0.NORMAL],o=835392+r*(16*12),s=6;for(let u=0;u<s;u++)e.setUint16(o+u*16+2,a.small),e.setUint16(o+96+u*16+2,a.big),e.setUint32(842280+r*6*4+u*4,a.player2d[u]),e.setUint32(842472+r*6*4+u*4,a.bowser2d[u])}_readAnimationBackgrounds(e,t){if(typeof t.animBgSet!="number"||!t.bgDir)return;const r=$n.readBackgroundImgData(t.bgDir),i=Kn.readAnimationBackgrounds(t.animBgSet,r,e.bg.width,e.bg.height);i&&i.length&&(e.animbg=i)}async _writeAnimationBackgrounds(e,t,r,i,a){if(isNaN(e)||!a||!a.length)return;const o=setTimeout(()=>{throw new Error("Failed to write animations")},45e3);let s;const l=new Array(a.length),d=[new Promise(h=>{Va(i,t,r).then(f=>{s=f,h()})})];for(let h=0;h<a.length;h++){const f=new Promise(m=>{const g=h;Va(a[h],t,r).then(_=>{l[g]=_,m()})});d.push(f)}await Promise.all(d);for(let h=0;h<l.length;h++)Kn.writeAnimationBackground(e,h,s,l[h],t,r);wt("Wrote animations"),clearTimeout(o)}onParseBoardSelectImg(e,t){!t.img.boardSelectImg||(e.otherbg.boardselect=this._readImgFromMainFS(9,t.img.boardSelectImg,0))}onWriteBoardSelectImg(e,t){return new Promise((r,i)=>{const a=t.img.boardSelectImg;if(!a){r();return}const o=Xs(),s=setTimeout(()=>i(`Failed to write board select for ${t.name}`),45e3);o.onload=()=>{const l=Pu(o,64,48),u=dt.get(9,a),h=Pr([{src:l,width:64,height:48,bpp:32}],16,0,u);dt.write(9,a,h),clearTimeout(s),r()},o.src=e.otherbg.boardselect})}_parseBoardSelectIcon(e,t){if(!t.img.boardSelectIconCoords)return;const r=this._readImgInfoFromMainFS(9,15,0),[i,a]=t.img.boardSelectIconCoords,o=_W(r.src,r.width,r.height,32,i,a,32,32),s=Ea(o,32,32);e.otherbg.boardselecticon=s}_writeBoardSelectIcon(e,t){return new Promise((r,i)=>{if(!t.img.boardSelectIconCoords){r();return}const a=e.otherbg.boardselecticon;if(!a){r();return}const o=setTimeout(()=>i(`Failed to write board select icon for ${t.name}`),45e3);let s,l;const u=new Promise(function(f){s=Xs(),s.onload=function(){f()},s.src=d$}),d=new Promise(function(f){l=Xs(),l.onload=function(){f()},l.src=a}),h=[u,d];Promise.all(h).then(()=>{const f=this._readImgInfoFromMainFS(9,15,0),m=No(f.width,f.height),g=lM(f.src,f.width,f.height);m.putImageData(g,0,0);const[_,E]=t.img.boardSelectIconCoords;m.drawImage(s,_,E,32,32),m.drawImage(l,_,E,32,32);const x=m.getImageData(0,0,f.width,f.height).data.buffer,v=dt.get(9,15),C=[{src:x,width:f.width,height:f.height,bpp:32}],V=Pr(C,16,0,v);if(dt.write(9,15,V),t.img.boardSelectIconMask){const D=this._createBoardSelectIconHoverMask(l),H=dt.get(9,t.img.boardSelectIconMask),j=Pr([{src:D,width:32,height:32,bpp:32}],16,0,H);dt.write(9,t.img.boardSelectIconMask,j)}wt("Wrote board select icon"),clearTimeout(o),r()},f=>{wt(`Error writing board select icon: ${f}`),i()})})}_createBoardSelectIconHoverMask(e){const t=Pu(e,32,32),r=new ArrayBuffer(t.byteLength),i=new DataView(t),a=new DataView(r);let o=!1;for(let s=0;s<r.byteLength;s+=4)i.getUint32(s)===0?(a.setUint32(s,0),o=!0):a.setUint32(s,3149642751);return o?r:new ArrayBuffer(t.byteLength)}onParseBoardLogoImg(e,t){!t.img.introLogoImg||(e.otherbg.boardlogo=this._readImgFromMainFS(10,t.img.introLogoImg,0))}onWriteBoardLogoImg(e,t){return new Promise((r,i)=>{const a=t.img.introLogoImg;if(!a){r();return}const o=Xs(),s=setTimeout(()=>i(`Failed to write logos for ${t.name}`),45e3);o.onload=()=>{const u=Pu(o,260,120),d=dt.get(10,a),f=Pr([{src:u,width:260,height:120,bpp:32}],16,0,d);dt.write(10,a,f),clearTimeout(s),r()},o.src=e.otherbg.boardlogo;const l=t.img.pauseLogoImg;if(l){const u=dt.get(10,l),d=[{src:new ArrayBuffer(130*60*4),width:130,height:60,bpp:32}],h=Pr(d,16,0,u);dt.write(10,l,h)}})}async _writeOverviewBackground(e,t){const r=await Va(t,320,240),i=setTimeout(()=>{throw new Error(`Failed to write bg ${e}`)},45e3),a=No(320,240);a.putImageData(r,0,-10);const o=a.getImageData(0,0,320,240);$n.writeBackground(e,o,320,240),clearTimeout(i)}getAudioMap(e){return["","Story One","Go Lucky","Welcome to Mario Land","Laboratory","Rules Land","Credits","In the Pipe","Western Land","Pirate Land","Space Land","Horror Land","Mystery Land","Bowser Land","Adventure Begins","The Adventure Ends","Ending","Star Spot","Bowser's Theme","A Ways to Go","How Many","Take the Coin","Let the Game Begin","","","","","Going for the Coins","Not Gonna Lose","Keepin' on the Path","Couldn't be Better","Know What I Mean?","That's All of It","Let's Have Some Fun","The Blue Skies Yonder","Chance Time","Going Somewhere","Duel!","No Fright, No Fear","Don't Look Back","Got an Item","This Way That","Walking Underwater","Spinning Polka","Spinning Polka 2","Spinning Polka 3","","","","","Mini-Game Land","Woody","Mini-Game Park","Battle Start","Mini-Game Stadium","","Coaster","","The Way to Play","The Star Appears","Bowser Appears","I Can Do It!","Bowser's Parade","Ending","Story Intro 2","Story Intro 3","Mini-Game Coaster Results","Drum Roll","Win (One Winner)","Lose","","Know What I Mean","Instant Replay","Coaster (Double Mix)","Coaster (Single Mix)","Coaster (Hip Hip Mix)","Coaster (Duo Mix)","Coaster (Hermit Mix)","Coaster (Speed Mix)","Coaster (Survival Mix)"]}getCharacterMap(){return{0:"",1:"<BLACK>",2:"<DEFAULT>",3:"<RED>",4:"<PURPLE>",5:"<GREEN>",6:"<BLUE>",7:"<YELLOW>",8:"<WHITE>",9:"<SEIZURE>",10:`
`,11:"\u3014",12:"\u25CB",13:"	",14:"	",16:" ",17:"{0}",18:"{1}",19:"{2}",20:"{3}",21:"{4}",22:"{5}",33:"\u3000",34:"\u3001",35:"\u3002",36:"\u3003",37:"\u3004",38:"\u3005",39:"\u3006",40:"\u3007",41:"\u3008",42:"\u3009",43:"\u3010",44:"\u3011",58:"\u3012",59:"\u3013",60:"+",61:"-",62:"x",63:"->",91:'"',92:"'",93:"(",94:")",95:"/",123:":",128:'"',129:"\xB0",130:",",131:"\xB0",133:".",192:"\u201C",193:"\u201D",194:"!",195:"?",255:"\u3015"}}}const h8={};h8[Qe.MP3_USA]={jp:[{upper:61762,lower:61770},{upper:373706,lower:373714}],en:[{upper:373778,lower:373786}],de:[{upper:373802,lower:373810}],es:[{upper:373814,lower:373822}],it:[{upper:373826,lower:373830}],fr:[{upper:373790,lower:373798}]};h8[Qe.MP3_JPN]={jp:[{upper:61762,lower:61770},{upper:373346,lower:373354}]};let Co;class f${constructor(e){this.dirs=this._extract(e)}_extract(e){const t=this._getDirectoryCountFromView(e),r=new Array(t);for(let i=0;i<t;i++)r[i]=this._readDirFromView(e,i);return r}_getDirectoryCountFromView(e){return e.getUint32(0)}_readDirFromView(e,t){const r=this._getDirOffsetFromView(e,t),i=new DataView(e.buffer,e.byteOffset+r),a=this._decompressDir(i);return new Bt.StringTable(new DataView(a))}_decompressDir(e){const t=e.getUint32(0),r=e.getUint32(4),i=new DataView(e.buffer,e.byteOffset+8);return u_(r,i,t)}_getDirOffsetFromView(e,t){return e.getUint32(4*(1+t))}read(e,t,r=!1){if(e<0||e>=this.getDirectoryCount())throw new Error("Requesting non-existent string directory");return this.dirs[e].read(t,r)}write(e,t,r){this.dirs[e].write(t,r)}getDirectoryCount(){return this.dirs.length}getStringCount(e){return this.dirs[e].getStringCount()}getByteLength(){let e=0;const t=this.dirs.length;e+=4,e+=4*t;for(let r=0;r<t;r++)e+=4,e+=4,e+=this.dirs[r].getByteLength(),e=xn(e,2);return e}pack(e,t=0){const r=new DataView(e,t),i=this.getDirectoryCount();r.setUint32(0,i);let a=4,o=4+i*4;for(let s=0;s<i;s++)r.setUint32(a,o),a+=4,r.setUint32(o,this.dirs[s].getByteLength()),o+=4,r.setUint32(o,0),o+=4,o=this._packDir(s,r,o),o=xn(o,2);return o}_packDir(e,t,r){const i=this.dirs[e].getByteLength(),a=new ArrayBuffer(i);return this.dirs[e].pack(a,0),fr(t,a,r,0,i),r+i}}const L0={getROMOffset(n="en"){const e=Tt.getDataView(),t=L0.getPatchOffsets(n);if(!t)return null;const r=t[0];if(!r)return null;const i=e.getUint16(r.upper)<<16,a=e.getUint16(r.lower);let o=i|a;return a&32768&&(o=o-65536),wt(`Strings3.getROMOffset[${n}] -> ${At(o)}`),o},setROMOffset(n,e){const t=new DataView(e);let r=n;const i=L0.getLocales(Tt.getROMGame());for(let a=0;a<i.length;a++){const o=i[a],s=L0.getPatchOffsets(o);let l=(r&4294901760)>>>16;const u=r&65535;u&32768&&(l+=1);for(let d=0;d<s.length;d++)t.setUint16(s[d].upper,l),t.setUint16(s[d].lower,u);wt(`Strings3.setROMOffset[${o}] -> ${At(l<<16|u)}`),r+=xn(Co[o].getByteLength(),16)}},getPatchOffsets(n="en"){return h8[Tt.getROMGame()][n]},clear(){Co=null},extract(){Co={};const n=L0.getLocales(Tt.getROMGame());for(let e=0;e<n.length;e++){const t=n[e],r=Tt.getDataView(L0.getROMOffset(t));Co[t]=new f$(r)}return Co},extractAsync(){return new Promise(n=>{L0.extract(),n()})},pack(n,e=0){let t=e;const r=L0.getLocales(Tt.getROMGame());for(let i=0;i<r.length;i++){const a=r[i],o=Co[a];t=t+o.pack(n,t),t=xn(t,16)}return t},read(n,e,t,r=!1){return Co[n].read(e,t,r)},write(n,e,t,r){Co[n].write(e,t,r)},getLocales(n){return Object.keys(h8[n])},getDirectoryCount(n){return Co[n].getDirectoryCount()},getStringCount(n,e){return Co[n].getStringCount(e)},getByteLength(){let n=0;const e=L0.getLocales(Tt.getROMGame());for(let t=0;t<e.length;t++){const r=e[t];n+=xn(Co[r].getByteLength(),16)}return n}},Mg={id:"CHAINSPLIT3",name:"",activationType:Wt.WALKOVER,executionType:s0.PROCESS,parameters:[{name:"spaceIndexArgs",type:an.NumberArray},{name:"chainArgs",type:an.NumberArray},{name:"reverse",type:an.Boolean},{name:"hasgate",type:an.Boolean},{name:"prevSpace",type:an.Number},{name:"altChain",type:an.NumberArray}],fakeEvent:!0,supportedGames:[Qe.MP3_USA],parse(n,e){const t={METHOD_START:"16092DD153432852C141C78807ECCBF0",METHOD_END:"6FF6DF70CDC85862F8F129303009A544"};if(Wn([n.buffer,e.offset,8],t.METHOD_START)&&Wn([n.buffer,e.offset+36,20],t.METHOD_END)){const r=n.getUint16(e.offset+10)<<16,i=n.getUint16(e.offset+14);let a=(r|i)&2147483647;a&32768&&(a=a-65536);let o=e.offset-(e.addr-a),s=n.getUint16(o);for(;s!==65535;)Go(e.curSpace,s,e.board),o+=2,s=n.getUint16(o);return!0}return!1},write(n,e,t,r){const i=e.parameterValues.spaceIndexArgs,a=e.parameterValues.chainArgs,o=e.parameterValues.altChain||[];return`
        addiu SP, SP, -0x18
        sw    RA, 0x14(SP)
        sw    S0, 0x10(SP)

    .if reverse
        jal   GetPlayerStruct
        li    A0, -1
        lbu   V0, 0x17(V0)
        andi  V0, V0, 0x80
        beq   V0, R0, exit_chain_split
        NOP
        lui   V0, hi(cur_player_spaces_remaining)
        lw    V0, lo(cur_player_spaces_remaining)(V0)
        beq   V0, R0, exit_chain_split
        NOP
        j   do_chain_split
        NOP
    .endif

    .if hasgate
      jal   GetPlayerStruct
      li    A0, -1
      move  S0, V0
      lbu   A0, 0x15(S0)
      lbu   A1, 0x16(S0)
      jal   GetAbsSpaceIndexFromChainSpaceIndex
      NOP
      sll   V0, V0, 0x10
      sra   V0, V0, 0x10
      ; Check for the previous space being the gate chain's first space.
      li    V1, ${e.parameterValues.prevSpace||0}
      bne   V0, V1, do_chain_split
      NOP
      lbu   V0, 0x17(S0)
      andi  V0, V0, 0x80
      bnez  V0, do_chain_split
      ; Send player to other chain if coming from gate.
      li    A1, ${o[0]||0} ; Chain index
      li    A0, -1
      jal   SetNextChainAndSpace
      li   A2, ${o[1]||0} ; Index in chain
      lbu   V0, 0x17(S0)
      andi  V0, V0, 0xFE
      j     exit_chain_split
      sb    V0, 0x17(S0)
    .endif

    do_chain_split:
      lui   A0, hi(space_index_args)
      addiu A0, A0, lo(space_index_args)
      lui   A1, hi(chain_args)
      addiu A1, A1, lo(chain_args)
      lui   A2, hi(ai_logic)
      jal   chain_split_3_helper
       addiu A2, A2, lo(ai_logic)
    .if reverse
    exit_chain_split:
    .else
    exit_chain_split:
      jal   EndProcess
       move  A0, R0
    .endif

      lw    RA, 0x14(SP)
      lw    S0, 0x10(SP)
      jr    RA
       addiu SP, SP, 0x18

    space_index_args:
      .halfword ${i.join(", ")}

    chain_args:
      .halfword ${a.join(", ")}

    ; Choose randomly
    ai_logic:
      .word ai_random_choice, ai_random_choice, ai_random_choice
    ai_random_choice:
      .word 0x00000000, 0x00000000, 0x064C9932

  .beginstatic
    chain_split_3_helper:
      addiu SP, SP, -0x38
      sw    RA, 0x30(SP)
      sw    S5, 0x2c(SP)
      sw    S4, 0x28(SP)
      sw    S3, 0x24(SP)
      sw    S2, 0x20(SP)
      sw    S1, 0x1c(SP)
      sw    S0, 0x18(SP)
      move  S2, A0
      move  S3, A1
      move  S5, A2
      li    A0, -1
      li    A1, -1
      jal   0x800F2304
       li    A2, 2
      jal   SleepVProcess
       move  S1, R0
      jal   chainsplit_setup_arrows
       NOP
      lui   A0, hi(current_player_index)
      jal   GetPlayerStruct
       lb    A0, lo(current_player_index)(A0)
      move  S4, V0
      lbu   A0, 0x15(S4)
      lbu   A1, 0x16(S4)
      jal   GetAbsSpaceIndexFromChainSpaceIndex
       NOP
      sll   V0, V0, 0x10
      sra   A1, V0, 0x10
      li    A2, 2
      move  V1, R0
    L80116514:
      sll   V0, S1, 1
      addu  V0, V0, S1
      sll   V0, V0, 1
      addu  A0, V0, S2
      sll   V0, V1, 1
    L80116528:
      addu  V0, V0, A0
      lh    V0, 0(V0)
      beq   V0, A1, L80116548
       NOP
      addiu V1, V1, 1
      slti  V0, V1, 2
      bnez  V0, L80116528
       sll   V0, V1, 1
    L80116548:
      beq   V1, A2, L80116564
       sll   V0, S1, 1
      addiu S1, S1, 1
      slti  V0, S1, 3
      bnez  V0, L80116514
       move  V1, R0
      sll   V0, S1, 1
    L80116564:
      addu  V0, V0, S1
      sll   A1, V0, 1
      sll   V0, V0, 2
      addu  S3, S3, V0
      lui   S0, hi(current_player_index)
      addiu S0, S0, lo(current_player_index)
      lb    A0, 0(S0)
      jal   0x800D76A0
       addu  A1, S2, A1
      move  S2, V0
      move  A0, S2
      lb    A1, 0(S0)
      jal   0x800D742C
       move  A2, R0
      jal   PlayerIsCPU
       li    A0, -1
      beq  V0, R0, L801165EC
       sll   V0, S1, 2
      addu  V0, V0, S5
      lw    A0, 0(V0)
      jal   0x800DA190
        move  S0, R0
      sll   V0, V0, 0x10
      sra   S1, V0, 0x10
      blez  S1, L801165E4
       move  A0, S2
    L801165CC:
      jal   0x800D7250
       li    A1, -2
      addiu S0, S0, 1
      slt   V0, S0, S1
      bnez  V0, L801165CC
        move  A0, S2
    L801165E4:
      jal   0x800D7250
        li    A1, -4
    L801165EC:
      jal   0x800D7518
       move  A0, S2
      move  S0, V0
      jal   0x800D6CA0
       move  A0, S2
      jal   chainsplit_hide_arrows
       NOP
      bnezl S0, L80116610
       addiu S3, S3, 6
    L80116610:
      lh    A1, 0(S3)
      lh    A2, 2(S3)
      jal   SetNextChainAndSpace
       li    A0, -1
      lh    A1, 4(S3)
      beq  A1, R0, L80116640
       NOP
      li    V0, 1
      beq   A1, V0, L8011664C
       NOP
      j     L80116658
       NOP
    L80116640:
      lbu   V0, 0x17(S4)
      j     L80116654
       andi  V0, V0, 0xfe
    L8011664C:
      lbu   V0, 0x17(S4)
      ori   V0, V0, 1
    L80116654:
      sb    V0, 0x17(S4)
    L80116658:
      lw    RA, 0x30(SP)
      lw    S5, 0x2c(SP)
      lw    S4, 0x28(SP)
      lw    S3, 0x24(SP)
      lw    S2, 0x20(SP)
      lw    S1, 0x1c(SP)
      lw    S0, 0x18(SP)
      jr    RA
       addiu SP, SP, 0x38

    .definelabel CORE_800CDD58,0x800CDD58
    .definelabel CORE_800D51F8,0x800D51F8

    chainsplit_setup_arrows:
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)
    L8010704C:
      jal   0x800E9AE0
       NOP
      beq  V0, R0, L8010706C
       NOP
      jal   SleepVProcess
       NOP
      j     L8010704C
       NOP
    L8010706C:
      jal   SleepVProcess
       NOP
      move  A0, R0
      li    A1, 146
      jal   0x800E210C
       li    A2, 1
      lui   AT, hi(chainsplit_arrow_memval1)
      sw    V0, lo(chainsplit_arrow_memval1)(AT)
      li    A0, 1
      li    A1, 160
      jal   0x800E210C
       li    A2, 1
      lui   AT, hi(chainsplit_arrow_memval2)
      sw    V0, lo(chainsplit_arrow_memval2)(AT)
      li    A0, 13
      li    A1, 174
      jal   0x800E210C
       li    A2, 1
      lui   AT, hi(chainsplit_arrow_memval3)
      sw    V0, lo(chainsplit_arrow_memval3)(AT)
      li    A0, 3
      li    A1, 188
      jal   0x800E210C
       li    A2, 1
      lui   AT, hi(chainsplit_arrow_memval4)
      sw    V0, lo(chainsplit_arrow_memval4)(AT)
      li    A0, 11
      li    A1, 202
      jal   0x800E210C
       li    A2, 1
      lui   AT, hi(chainsplit_arrow_memval5)
      sw    V0, lo(chainsplit_arrow_memval5)(AT)
      jal   SleepProcess
       li    A0, 3
      li    V0, 1
      lui   AT, hi(CORE_800CDD58)
      sh    V0, lo(CORE_800CDD58)(AT)
      lui   AT, hi(CORE_800D51F8)
      sh    V0, lo(CORE_800D51F8)(AT)
      lw    RA, 0x10(SP)
      jr    RA
       addiu SP, SP, 0x18

    chainsplit_hide_arrows:
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)
      lui   AT, hi(CORE_800CDD58)
      sh    R0, lo(CORE_800CDD58)(AT)
      lui   AT, hi(CORE_800D51F8)
      sh    R0, lo(CORE_800D51F8)(AT)
      lui   A0, hi(chainsplit_arrow_memval1)
      jal   0x800E21F4
       lw    A0, lo(chainsplit_arrow_memval1)(A0)
      lui   A0, hi(chainsplit_arrow_memval2)
      jal   0x800E21F4
       lw    A0, lo(chainsplit_arrow_memval2)(A0)
      lui   A0, hi(chainsplit_arrow_memval3)
      jal   0x800E21F4
       lw    A0, lo(chainsplit_arrow_memval3)(A0)
      lui   A0, hi(chainsplit_arrow_memval4)
      jal   0x800E21F4
       lw    A0, lo(chainsplit_arrow_memval4)(A0)
      lui   A0, hi(chainsplit_arrow_memval5)
      jal   0x800E21F4
       lw    A0, lo(chainsplit_arrow_memval5)(A0)
      lw    RA, 0x10(SP)
      jr    RA
       addiu SP, SP, 0x18

      .align 4
      chainsplit_arrow_memval1:
        .word 0
      chainsplit_arrow_memval2:
        .word 0
      chainsplit_arrow_memval3:
        .word 0
      chainsplit_arrow_memval4:
        .word 0
      chainsplit_arrow_memval5:
        .word 0
  .endstatic
    `}};hr(Mg);const py={id:"CHAINMERGE3",name:"",activationType:Wt.WALKOVER,executionType:s0.DIRECT,parameters:[{name:"prevSpace",type:an.Number},{name:"chain",type:an.Number},{name:"spaceIndex",type:an.Number}],fakeEvent:!0,supportedGames:[Qe.MP3_USA],parse(n,e){const t={START:"16092DD153432852C141C78807ECCBF0",END:"0855E7309F121915D7A762AB85A7FDB6"},r=[201569894,201597703];let i,a;if(Wn([n.buffer,e.offset,8],t.START)&&r.indexOf(n.getUint32(e.offset+16))>=0&&Wn([n.buffer,e.offset+24,8],t.END)){if(i=n.getUint16(e.offset+14),i=i>1e3?0:i,n.getUint16(e.offset+20)===0?a=e.chains[i][0]:a=e.chains[i][n.getUint16(e.offset+22)],!isNaN(a)){if(e.board.links.hasOwnProperty(e.curSpace))return!1;Go(e.curSpace,a,e.board)}return!0}return!1},write(n,e,t,r){return`
      ADDIU SP, SP, -0x18
      SW    RA, 0x10(SP)
      ADDIU A0, R0, ${e.parameterValues.prevSpace||0}
      ADDIU A1, R0, ${e.parameterValues.chain||0}
      JAL   chainmerge_3_helper
      ADDIU A2, R0, ${e.parameterValues.spaceIndex||0}
      LW    RA, 0x10(SP)
      JR    RA
      ADDIU SP, SP, 0x18

  .beginstatic
    chainmerge_3_helper:
      addiu SP, SP, -0x20
      sw    RA, 0x1c(SP)
      sw    S2, 0x18(SP)
      sw    S1, 0x14(SP)
      sw    S0, 0x10(SP)
      move  S0, A0
      move  S1, A1
      move  S2, A2
      jal   GetPlayerStruct
        li    A0, -1
      lbu   A0, 0x15(V0)
      sll   A0, A0, 0x18
      sra   A0, A0, 0x18
      lbu   A1, 0x16(V0)
      sll   A1, A1, 0x18
      sra   A1, A1, 0x18
      andi  A0, A0, 0xffff
      jal   GetAbsSpaceIndexFromChainSpaceIndex
        andi  A1, A1, 0xffff
      sll   V0, V0, 0x10
      sra   V0, V0, 0x10
      bne   V0, S0, chainmerge_3_helper_exit
        sll   A1, S1, 0x10
      sll   A2, S2, 0x10
      li    A0, -1
      sra   A1, A1, 0x10
      jal   SetNextChainAndSpace
        sra   A2, A2, 0x10
      chainmerge_3_helper_exit:
      lw    RA, 0x1c(SP)
      lw    S2, 0x18(SP)
      lw    S1, 0x14(SP)
      lw    S0, 0x10(SP)
      jr    RA
        addiu SP, SP, 0x20
  .endstatic
    `}};hr(py);function II(n){"game"in n||(n.game=1),"type"in n||(n.type=zn.NORMAL),"events"in n||(n.events={});for(const e in n.events){const t=n.events[e];typeof t=="string"&&(n.events[e]={code:t,language:En.MIPS})}if(typeof n.audioType>"u"&&(n.audioType=Ca.InGame),n.audioData&&!Array.isArray(n.audioData)&&(n.audioData=[n.audioData]),n.game===2&&typeof n.costumeTypeIndex!="number"&&(n.costumeTypeIndex=d0.NORMAL),h$(n),!("fov"in n.bg))switch(n.game){case 3:n.type===zn.DUEL?Object.assign(n.bg,{fov:15,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:210,cameraEyePosZ:210,lookatPointX:0,lookatPointY:0,lookatPointZ:0}):Object.assign(n.bg,{fov:15,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:300,cameraEyePosZ:300,lookatPointX:0,lookatPointY:0,lookatPointZ:0});break;case 2:Object.assign(n.bg,{fov:3,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:1570,cameraEyePosZ:1577,lookatPointX:0,lookatPointY:0,lookatPointZ:0});break;case 1:Object.assign(n.bg,{fov:17,scaleFactor:1,cameraEyePosX:0,cameraEyePosY:1355,cameraEyePosZ:1780,lookatPointX:0,lookatPointY:0,lookatPointZ:0});break}return n}function h$(n){Gp(n,e=>{"parameters"in e&&delete e.parameters,"supportedGames"in e&&delete e.supportedGames,e.asm&&(e.id=e.name,n.events[e.id]&&n.events[e.id]!==e.asm&&console.warn(`When updating the format of ${n.name}, event ${e.id} had multiple versions. Only one will be kept.`),n.events[e.id]=e.asm,delete e.asm)})}function Gp(n,e){if(n.boardevents)for(let r=n.boardevents.length-1;r>=0;r--){const i=n.boardevents[r];e(i,r)}const t=n.spaces;if(t&&t.length)for(let r=0;r<t.length;r++){const i=t[r];if(i.events&&i.events.length)for(let a=i.events.length-1;a>=0;a--){const o=i.events[a];e(o,a,i,r)}}}function NE(n,e,t){Gp(n,(r,i,a,o)=>{const s=jo(r.id,n,e);if(Bn(!!s),s.parameters)for(let l=0;l<s.parameters.length;l++){const u=s.parameters[l];t(u,r,i,a,o)}})}async function p$(n,e,t,r){const[i,a]=e.mainfsEventFile,o=Br(yt.BOO,n),s=o.length?o[0]:Mn(n);let l=Eu(ME.id,n),u=-1;if(!l.length)l=[Mn(n)];else{let U=Number.MAX_VALUE;const O=n.spaces[s];if(O)for(const G of l){const ne=n.spaces[G],se=Ro(ne.x,ne.y,O.x,O.y);se<U&&(U=se,u=G)}}const d=[];for(let U=0;U<n.spaces.length;U++)n.spaces[U].star&&d.push(U);const h=d.length?"show_next_star_spot":"show_next_star_no_op",f=kE(d.length),m=Br(yt.TOAD,n),g=[];for(let U=0;U<d.length;U++){const O=n.spaces[d[U]];let G=Number.MAX_VALUE,ne=d[U];for(let se=0;se<m.length;se++){const ie=m[se],Re=n.spaces[ie],Be=Ro(O.x,O.y,Re.x,Re.y);Be<G&&(G=Be,ne=ie)}g.push(ne)}const _=Br(yt.BANKCOIN,n);for(let U=0;U<2;U++)_.length<2&&_.push(Mn(n));const E=Br(yt.BANK,n),x=Eu(NA.id,n),v=[];x.forEach(U=>{const O=n.spaces[U];let G=Number.MAX_VALUE,ne=Mn(n);for(let se=0;se<E.length;se++){const ie=E[se],Re=n.spaces[ie],Be=Ro(O.x,O.y,Re.x,Re.y);Be<G&&(G=Be,ne=ie)}v.push(ne)}),E.length||E.push(Mn(n));for(let U=0;U<2;U++)x.length<2&&x.push(Mn(n));for(let U=0;U<2;U++)v.length<2&&v.push(Mn(n));const C=Br(yt.ITEMSHOP,n),V=Eu(y_.id,n),D=[];V.forEach(U=>{const O=n.spaces[U];let G=Number.MAX_VALUE,ne=Mn(n);for(let se=0;se<C.length;se++){const ie=C[se],Re=n.spaces[ie],Be=Ro(O.x,O.y,Re.x,Re.y);Be<G&&(G=Be,ne=ie)}D.push(ne)}),C.length||C.push(Mn(n));for(let U=0;U<2;U++)V.length<2&&V.push(Mn(n));for(let U=0;U<2;U++)D.length<2&&D.push(Mn(n));const H=Eu(f8.id,n),R=[];function j(U){let O=!1;return R.forEach(G=>{G.gateSpaceIndex===U&&(O=!0)}),O}H.forEach(U=>{const O=n.spaces[U];Gp(n,(G,ne,se)=>{if(G.id!==f8.id||se!==O)return;const ie=G.parameterValues.gateSpaceIndex;if(!j(ie)){const{gateEntryIndex:Re,gateSpaceIndex:Be,gateExitIndex:Te,gatePrevChain:ye,gateNextChain:We}=G.parameterValues;R.push({gateEntryIndex:Re,gateSpaceIndex:Be,gateExitIndex:Te,gatePrevChain:ye,gateNextChain:We})}})});for(let U=0;U<2;U++)R.length<2&&R.push({gateEntryIndex:Mn(n),gateSpaceIndex:Mn(n),gateExitIndex:Mn(n),gatePrevChain:[0,0],gateNextChain:[0,0]});const te=[];for(let U=0;U<n.spaces.length;U++)n.spaces[U].type===de.ARROW&&te.push(n.spaces[U].rotation||0);const $=to(Qe.MP3_USA,"AddArrowAngle"),z=f_(),I=[],q=Math.min(z,te.length);for(let U=0;U<q;U++)I.push(`LUI A0 hi(${At(mM(te[U]))})`),I.push(`JAL ${$}`),I.push("MTC1 A0 F12");const P=PA(n),ee=await aE(n,e.bgDir,P),ue=await sE(n,r);return`
.org 0x801059A0

; Symbols that are used, but unknown
.definelabel CORE_800A0550,0x800A0550
.definelabel CORE_800A12D0,0x800A12D0
.definelabel CORE_800A12D4,0x800A12D4
.definelabel CORE_800A12D8,0x800A12D8
.definelabel CORE_800A1764,0x800A1764
.definelabel CORE_800C9520,0x800C9520
.definelabel CORE_800C9930,0x800C9930
.definelabel CORE_800CB99C,0x800CB99C
.definelabel CORE_800CCF58,0x800CCF58
.definelabel CORE_800CD058,0x800CD058
.definelabel CORE_800CD059,0x800CD059
.definelabel CORE_800CD05D,0x800CD05D
.definelabel CORE_800CD05E,0x800CD05E
.definelabel CORE_800CD065,0x800CD065
.definelabel CORE_800CD06D,0x800CD06D
.definelabel CORE_800CD096,0x800CD096
.definelabel CORE_800CD098,0x800CD098
.definelabel CORE_800CD0A8,0x800CD0A8
.definelabel CORE_800CD0AA,0x800CD0AA
.definelabel CORE_800CD0AC,0x800CD0AC
.definelabel CORE_800CD0AE,0x800CD0AE
.definelabel CORE_800CD0B2,0x800CD0B2
.definelabel CORE_800CDBC8,0x800CDBC8
.definelabel CORE_800CDD58,0x800CDD58
.definelabel CORE_800CE198,0x800CE198
.definelabel CORE_800D037C,0x800D037C
.definelabel CORE_800D03F8,0x800D03F8
.definelabel CORE_800D110C,0x800D110C ; v & 1 == player is CPU, holds other bits?
.definelabel CORE_800D110E,0x800D110E ; u16, holds coins temporarily
.definelabel CORE_800D1123,0x800D1123 ; bool bowser suit. set at 800E3234
.definelabel CORE_800D112C,0x800D112C ; points to player "object"
.definelabel CORE_800D51F8,0x800D51F8
.definelabel CORE_80100F94,0x80100F94
.definelabel CORE_80100F95,0x80100F95
.definelabel CORE_80100F9F,0x80100F9F
.definelabel CORE_80100FA8,0x80100FA8
.definelabel CORE_80100FF4,0x80100FF4
.definelabel CORE_80101040,0x80101040
.definelabel CORE_801011FC,0x801011FC
.definelabel CORE_801014A0,0x801014A0
.definelabel CORE_80101734,0x80101734
.definelabel CORE_8010197C,0x8010197C
.definelabel CORE_80101980,0x80101980
.definelabel CORE_801019C4,0x801019C4
.definelabel CORE_80105702_window_id,0x80105702
.definelabel CORE_8010570C,0x8010570C

; Item constants
.definelabel ITEM_SKELETON_KEY,0x1
.definelabel ITEM_CELLULAR_SHOPPER,0x4
.definelabel ITEM_LUCKY_LAMP,0x9
.definelabel ITEM_BOO_REPELLANT,0xC
.definelabel ITEM_KOOPA_CARD,0xF
.definelabel ITEM_LUCKY_CHARM,0x11

.definelabel MAX_PLAYER_STAR_COUNT,0x63

; CORE_800CD096
; CORE_800CD098 ; persistent storage area?

.definelabel BANK_COUNT,${E.length}
.definelabel SHOP_COUNT,${C.length}
.definelabel GATE_COUNT,${R.length}
.definelabel STAR_COUNT,${d.length}
.definelabel BOO_COUNT,${o.length}

main:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
lui   A0, hi(overlaycalls)
addiu A0, A0, lo(overlaycalls)
lui   A1, hi(CORE_800A1764)
jal   0x800359E0
 lh    A1, lo(CORE_800A1764)(A1)
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18
      NOP
      NOP

func_80105E80:
lui   V0, hi(CORE_800CD05D)
lb    V0, lo(CORE_800CD05D)(V0)
lui   AT, hi(CORE_800CD05E)
addu  AT, AT, V0
lb    V0, lo(CORE_800CD05E)(AT)
sll   V0, V0, 1
lui   AT, hi(D_8011D2C0)
addu  AT, AT, V0
jr    RA
 lh    V0, lo(D_8011D2C0)(AT)

func_80105EA8:
addiu SP, SP, -0x28
sw    RA, 0x24(SP)
sw    S4, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   S4, hi(CORE_800CD058)
addiu S4, S4, lo(CORE_800CD058)
move  S1, R0
lui   S3, hi(shuffle_bias)
addiu S3, S3, lo(shuffle_bias)
lui   S2, hi(shuffle_order)
addiu S2, S2, lo(shuffle_order)

L80105EE0:
; rand1 = GetRandomByte() % STAR_COUNT;
jal	GetRandomByte
nop
li   A0, STAR_COUNT
div  V0, A0
nop
mfhi S0
nop
andi  S0, S0, 0xff
nop

; rand2 = GetRandomByte() % STAR_COUNT;
jal	GetRandomByte
nop
li   A0, STAR_COUNT
div  V0, A0
nop
mfhi A0
nop
andi  A0, A0, 0xff
nop

beq   S0, A0, L80105F50
 sll   V1, A0, 1
addu  A3, V1, S3
lh    V0, 0(A3)
slt   V0, S0, V0
bnezl V0, L80105F54
 addiu S1, S1, 1
sll   A1, S0, 1
addu  A2, A1, S3
lh    V0, 0(A2)
slt   V0, A0, V0
bnezl V0, L80105F54
 addiu S1, S1, 1
addu  A0, A1, S2
lh    A1, 0(A0)
addu  V1, V1, S2
lhu   V0, 0(V1)
sh    V0, 0(A0)
sh    A1, 0(V1)
lh    A1, 0(A2)
lhu   V0, 0(A3)
sh    V0, 0(A2)
sh    A1, 0(A3)
L80105F50:
addiu S1, S1, 1
L80105F54:
slti  V0, S1, 0x3c
bnez  V0, L80105EE0
       NOP
move  S1, R0
lui   A0, hi(shuffle_order)
addiu A0, A0, lo(shuffle_order)
addu  V1, S4, S1
L80105F70:
sll   V0, S1, 1
addu  V0, V0, A0
lbu   V0, 1(V0)
sb    V0, 6(V1)
addiu S1, S1, 1
slti  V0, S1, STAR_COUNT
bnez  V0, L80105F70
 addu  V1, S4, S1
lw    RA, 0x24(SP)
lw    S4, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x28

func_80105FB0:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
lui   V0, hi(CORE_800CD05D)
lbu   V0, lo(CORE_800CD05D)(V0)
addiu V0, V0, 1
lui   AT, hi(CORE_800CD05D)
sb    V0, lo(CORE_800CD05D)(AT)
sll   V0, V0, 0x18
sra   V0, V0, 0x18
slti  V0, V0, STAR_COUNT
bnez  V0, L8010602C
       NOP
lui   S0, hi(CORE_800CD065)
lb    S0, lo(CORE_800CD065)(S0)
lui   AT, hi(CORE_800CD05D)
sb    R0, lo(CORE_800CD05D)(AT)
jal   0x80035FDC
 li    A0, 4
jal   func_80105EA8
       NOP
lui   V1, hi(CORE_800CD05E)
lb    V1, lo(CORE_800CD05E)(V1)
bne   S0, V1, L8010602C
       NOP
lui   V0, hi(CORE_800CD065)
lbu   V0, lo(CORE_800CD065)(V0)
lui   AT, hi(CORE_800CD05E)
sb    V0, lo(CORE_800CD05E)(AT)
lui   AT, hi(CORE_800CD065)
sb    V1, lo(CORE_800CD065)(AT)
L8010602C:
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

draw_star_space_state:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
move  S0, R0
lui   S2, hi(D_8011D2A0)
addiu S2, S2, lo(D_8011D2A0)
sll   V0, S0, 1
L80106068:
addu  V0, V0, S2
lh    A0, 0(V0)
jal   0x80035FDC
 addiu S0, S0, 1
slti  V0, S0, STAR_COUNT
bnez  V0, L80106068
 sll   V0, S0, 1
lb    V0, 5(S1)
addu  V0, S1, V0
lb    V0, 6(V0)
sll   V0, V0, 1
lui   A0, hi(star_space_indices)
addu  A0, A0, V0
lh    A0, lo(star_space_indices)(A0)
jal   SetSpaceType
 li    A1, 14 ; Star space type
lb    V0, 5(S1)
addu  V0, S1, V0
lb    V0, 6(V0)
sll   V0, V0, 1
lui   A0, hi(D_8011D2A0)
addu  A0, A0, V0
jal   0x8003602C ; board feature enabled?
 lh    A0, lo(D_8011D2A0)(A0)
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_801060E0:
lui   A2, hi(CORE_800CD058)
addiu A2, A2, lo(CORE_800CD058)
move  V1, R0
lui   A3, hi(star_space_indices)
addiu A3, A3, lo(star_space_indices)
sll   A0, A0, 0x10
sra   A0, A0, 0x10
lui   T0, hi(D_8011D2A0)
addiu T0, T0, lo(D_8011D2A0)
sll   A1, V1, 1
L80106108:
addu  V0, A1, A3
lh    V0, 0(V0)
bnel  A0, V0, L8010613C
 addiu V1, V1, 1
lb    V0, 5(A2)
addu  V0, A2, V0
lb    V0, 6(V0)
bne   V1, V0, L80106148
 addu  V0, A1, T0
lbu   V0, 1(V0)
sb    V0, 0xe(A2)
j     L8010614C
 li    V0, 1
L8010613C:
slti  V0, V1, STAR_COUNT
bnez  V0, L80106108
 sll   A1, V1, 1
L80106148:
move  V0, R0
L8010614C:
jr    RA
       NOP

func_80106154:
addiu SP, SP, -0x50
sw    RA, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F28, 0x48(SP)
sdc1  F26, 0x40(SP)
sdc1  F24, 0x38(SP)
sdc1  F22, 0x30(SP)
jal   0x8004EE68
 sdc1  F20, 0x28(SP)
lw    S0, 0x8c(V0)
jal   PlaySound
 li    A0, 283
li    A0, 58
jal   0x800D90C8
 move  A1, R0
lui   AT, hi(D_8011FABC)
sw    V0, lo(D_8011FABC)(AT)
move  S1, V0
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
jal   0x800461B4
 lh    A0, 0(V0)
lhu   V0, 0xa(S1)
ori   V0, V0, 4
sh    V0, 0xa(S1)
jal   0x800ECC54
 move  A0, S1
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, S0, 8
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S1)
lui A0, 0xB
ori A0, A0, 4
jal   0x8000CED8
 li    A1, 2729
sll   V0, V0, 0x10
sra   S3, V0, 0x10
move  S0, S3
lui   A1, 0x4000
lui   A2, 0x41a0
lui   A3, 0x3f80
jal   0x8000CD00
 move  A0, S0
lui   A1, 0x41f0
jal   0x8000D018
 move  A0, S0
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 move  A0, S0
move  A0, S0
jal   0x8001C8A8
 li    A1, 1
mtc1  R0, F20
move  S0, R0
li    AT, 0x3F000000 ; 0.500000
mtc1  AT, F24
sll   S2, S3, 0x10
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F22
L8010626C:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S1, 0x24
add.s F20, F20, F24
mul.s F4, F20, F22
mfc1  A1, F4
      NOP
jal   0x8000D018
 sra   A0, S2, 0x10
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 6
bnez  V0, L8010626C
       NOP
move  S0, R0
li    AT, 0x3ECC0000 ; 0.398438
ori   AT, AT, 0xcccd
mtc1  AT, F24
sll   S2, S3, 0x10
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F22
L801062CC:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S1, 0x24
sub.s F20, F20, F24
mul.s F4, F20, F22
mfc1  A1, F4
      NOP
jal   0x8000D018
 sra   A0, S2, 0x10
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 3
bnez  V0, L801062CC
       NOP
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F0
      NOP
mul.s F0, F20, F0
mfc1  A1, F0
      NOP
jal   0x8000D018
 move  A0, S3
jal   SleepProcess
 li    A0, 30
jal   PlaySound
 li    A0, 306
mtc1  R0, F22
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F28
li    AT, 0x3F190000 ; 0.597656
ori   AT, AT, 0x999a
mtc1  AT, F26
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F24
move  S0, S3
func_80106364:
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A2A0
 addiu A0, A0, 0x74
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F0
      NOP
add.s F22, F22, F0
c.le.s F28, F22
      NOP
      NOP
bc1tl L801063BC
 sub.s F22, F22, F28
L801063BC:
c.lt.s F26, F20
      NOP
bc1f  L801063E0
       NOP
li    AT, 0x3D230000 ; 0.039795
ori   AT, AT, 0xd70a
mtc1  AT, F0
      NOP
sub.s F20, F20, F0
L801063E0:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S1, 0x24
lwc1  F2, 0x30(S1)
c.lt.s F24, F2
      NOP
bc1f  L80106424
       NOP
li    AT, 0x3F990000 ; 1.195312
ori   AT, AT, 0x999a
mtc1  AT, F0
      NOP
sub.s F0, F2, F0
swc1  F0, 0x30(S1)
L80106424:
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F0
      NOP
mul.s F0, F20, F0
mfc1  A1, F0
      NOP
jal   0x8000D018
 move  A0, S0
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 move  A0, S0
lwc1  F0, 0x30(S1)
c.le.s F0, F24
      NOP
      NOP
bc1t  L80106480
 li    V0, 1
move  V0, R0
L80106480:
c.le.s F20, F26
      NOP
      NOP
bc1t  L80106498
 li    V1, 1
move  V1, R0
L80106498:
and   V0, V0, V1
beqz  V0, L801064BC
       NOP
mtc1  R0, F0
      NOP
c.eq.s F22, F0
      NOP
bc1t  L801064CC
       NOP
L801064BC:
jal   SleepVProcess
       NOP
j     func_80106364
       NOP
L801064CC:
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
addiu A0, A0, 0x74
jal   0x8008A2A0
 move  A1, R0
jal   0x8000D044
 move  A0, S3
lui   AT, hi(D_8011FAB8)
sw    R0, lo(D_8011FAB8)(AT)
jal   EndProcess
 move  A0, R0
lw    RA, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F28, 0x48(SP)
ldc1  F26, 0x40(SP)
ldc1  F24, 0x38(SP)
ldc1  F22, 0x30(SP)
ldc1  F20, 0x28(SP)
jr    RA
 addiu SP, SP, 0x50

func_80106544:
addiu SP, SP, -0x20
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F20, 0x18(SP)
lw    S0, 0(A0)
li    AT, 0x40800000 ; 4.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x34(S0)
li    AT, 0xBF190000 ; -0.597656
ori   AT, AT, 0x999a
mtc1  AT, F0
      NOP
swc1  F0, 0x38(S0)
jal   SleepProcess
 li    A0, 3
mtc1  R0, F2
lwc1  F0, 0x38(S0)
c.eq.s F0, F2
      NOP
bc1t  L801065BC
       NOP
mtc1  R0, F20
L801065A0:
jal   SleepVProcess
       NOP
lwc1  F0, 0x38(S0)
c.eq.s F0, F20
      NOP
bc1f  L801065A0
       NOP
L801065BC:
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F20, 0x18(SP)
jr    RA
 addiu SP, SP, 0x20

show_next_star_spot:
addiu SP, SP, -0x30
sw    RA, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
lui   S2, hi(CORE_800CD058)
addiu S2, S2, lo(CORE_800CD058)
lui   AT, hi(CORE_800A12D4)
sw    R0, lo(CORE_800A12D4)(AT)
move  A0, R0
jal   0x800E5DD4
 move  A1, R0
move  S1, V0
jal   0x8004A520
 li    A0, 18 ; Here's the Star audio track
lw    A0, 0(S1)
li    A1, 2
lui   A3, hi(tumble_face_tex_grin)
lw    A3, lo(tumble_face_tex_grin)(A3)
jal   0x800EEFEC
 li    A2, 15
jal   0x800FFF44
       NOP
lb    V0, 5(S2)
lui   AT, hi(CORE_800CD05E)
addu  AT, AT, V0
lb    V0, lo(CORE_800CD05E)(AT)
sll   V0, V0, 2
lui   A0, hi(D_8011FA78)
addu  A0, A0, V0
jal   0x800D9B24
 lw    A0, lo(D_8011FA78)(A0)
li    A0, 2
jal   InitFadeIn
 li    A1, 16
L80106660:
jal   GetFadeStatus
       NOP
beqz  V0, L80106680
       NOP
jal   SleepVProcess
       NOP
j     L80106660
       NOP
L80106680:
jal   0x800E6FCC
       NOP
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F12
jal   0x800E9730
       NOP
jal   func_80106544
 move  A0, S1
lb    V0, 5(S2)
bnez  V0, L801066D8
       NOP
jal   0x80035F98
 li    A0, 4
bnez  V0, L801066D8
       NOP
li    V0, ${0}
subu  V0, R0, V0
andi  V0, V0, 0x5e09
j     L801066F0
 ori   A1, V0, 0x5e00
L801066D8:
li    V0, ${0}
subu  V0, R0, V0
andi  V0, V0, 0x5e09 ; I'll show you where the first star your after is. Theres another star here! One is a mirage.
ori   A1, V0, 0x5e01 ; OK! The next star youre after is over this way!
L801066F0:
lh    A0, 8(S1)
li    A2, -1
jal   0x8005B43C
 li    A3, -1
lh    A0, 8(S1)
jal   0x80060C14
 li    A1, 1
jal   PlaySound
 li    A0, 679
lh    A0, 8(S1)
jal   0x800EE2C0
 li    S0, 2        ; TODO: Is this Spiny Desert's index, or just coincidence?
sw    S0, 0x10(SP)
lw    A0, 0(S1)
li    A1, -1
move  A2, R0
jal   0x800D9D84
 li    A3, 6
lh    A0, 8(S1)
jal   0x80060EA8
 li    A1, 1
lw    V0, 0(S1)
lw    V0, 0x3c(V0)
lw    V0, 0x40(V0)
jal   0x8001FDE8
 lh    A0, 0(V0)
li    V0, ${0}
beqz  V0, L80106778
       NOP
jal   GetRandomByte
       NOP
andi  V0, V0, 1
beqz  V0, L8010679C
       NOP
L80106778:
lb    V0, 5(S2)
addu  V0, S2, V0
lb    V0, 6(V0)
sll   V0, V0, 1
lui   A0, hi(D_8011D2C0)
addu  A0, A0, V0
jal   GetSpaceData
 lh    A0, lo(D_8011D2C0)(A0)
move  S3, V0
L8010679C:
jal   0x800E9748
 addiu A0, S3, 8
li    AT, 0x40A00000 ; 5.000000
mtc1  AT, F12
jal   0x800E9AC8
       NOP
jal   SleepProcess
 li    A0, 5
L801067BC:
jal   0x800E9AE0
       NOP
beqz  V0, L801067DC
       NOP
jal   SleepVProcess
       NOP
j     L801067BC
       NOP
L801067DC:
jal   SleepProcess
 li    A0, 5
li    AT, 0x40E00000 ; 7.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
move  S0, V0
sll   V0, S0, 2
lw    A0, 0(S1)
lui   A1, hi(D_8011D2D0)
addu  A1, A1, V0
jal   0x800EF070
 lw    A1, lo(D_8011D2D0)(A1)
lw    A0, 0(S1)
li    A1, -1
jal   0x800D9CE8
 li    A2, 2
li    V0, ${0}
bnez   V0, L80106860
 move  A2, R0
lui   A0, hi(func_80106154)
addiu A0, A0, lo(func_80106154)
li    A1, 18432
jal   InitProcess
 move  A3, R0
lui   AT, hi(D_8011FAB8)
sw    V0, lo(D_8011FAB8)(AT)
sw    S3, 0x8c(V0)
jal   SleepProcess
 li    A0, 30
j     L8010686C
 sll   V0, S0, 2
L80106860:
lui   AT, hi(D_8011FAB8)
sw    R0, lo(D_8011FAB8)(AT)
sll   V0, S0, 2
L8010686C:
lh    A0, 8(S1)
lui   A1, hi(D_8011D2EC)
addu  A1, A1, V0
lw    A1, lo(D_8011D2EC)(A1)
li    A2, -1
jal   0x8005B43C
 li    A3, -1
lh    A0, 8(S1)
jal   0x80060C14
 li    A1, 1
lh    A0, 8(S1)
jal   0x800EE2C0
       NOP
li    V0, 2
sw    V0, 0x10(SP)
lw    A0, 0(S1)
li    A1, -1
move  A2, R0
jal   0x800D9D84
 li    A3, 6
lh    A0, 8(S1)
jal   0x80060EA8
 li    A1, 1
jal   0x8004A994
 li    A0, 90
jal   SleepProcess
 li    A0, 30
li    A0, 2
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 17
li    V0, 1
lui   AT, hi(CORE_800A12D4)
jal   0x80100130
 sw    V0, lo(CORE_800A12D4)(AT)
lui   V0, hi(D_8011FABC)
lw    V0, lo(D_8011FABC)(V0)
lw    V0, 0x3c(V0)
lw    V0, 0x40(V0)
jal   0x80046558
 lh    A0, 0(V0)
lui   A0, hi(D_8011FABC)
jal   0x800D9B54
 lw    A0, lo(D_8011FABC)(A0)
lui   V0, hi(CORE_800CD05D)
lb    V0, lo(CORE_800CD05D)(V0)
lui   AT, hi(CORE_800CD05E)
addu  AT, AT, V0
lb    V0, lo(CORE_800CD05E)(AT)
sll   V0, V0, 2
lui   A0, hi(D_8011FA78)
addu  A0, A0, V0
jal   0x800D9AA4
 lw    A0, lo(D_8011FA78)(A0)
jal   0x800E60D8
 move  A0, S1
jal   0x800F8C74
       NOP
jal   0x8004819C
 li    A0, 1
jal   0x8004849C
       NOP
jal   SleepVProcess
       NOP
lw    RA, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x30

; This custom alternative is the minimum necessary to skip the star showing.
show_next_star_no_op:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)

; Causes fade back in (star shaped fade in)
li    A0, 2
jal   InitFadeIn
 li    A1, 16

; One or more of these may be unnecessary...
jal   0x800F8C74
 nop
jal   0x8004819C
 li    A0, 1
jal   0x8004849C
 nop

jal SleepVProcess
nop

lw    RA, 0x10(SP)
jr    RA
addiu SP, SP, 0x18

; separate process that does "star get" celebration.
func_8010698C:
addiu SP, SP, -0x60
sw    RA, 0x34(SP)
sw    S4, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F28, 0x58(SP)
sdc1  F26, 0x50(SP)
sdc1  F24, 0x48(SP)
sdc1  F22, 0x40(SP)
jal   0x8004EE68
 sdc1  F20, 0x38(SP)
lw    S2, 0x8c(V0)
jal   GetPlayerStruct
 li    A0, -1
move  S4, V0
jal   PlaySound
 li    A0, 283
li    A0, 26
jal   0x800D90C8
 move  A1, R0
move  S1, V0
lhu   V0, 0xa(S1)
ori   V0, V0, 4
sh    V0, 0xa(S1)
jal   0x800ECC54
 move  A0, S1
jal   GetPlayerStruct
 li    A0, -1
lbu   S0, 0xf(V0)
sll   S0, S0, 0x18
sra   S0, S0, 0x18
andi  S0, S0, 0xffff
jal   GetPlayerStruct
 li    A0, -1
lbu   A1, 0x10(V0)
sll   A1, A1, 0x18
sra   A1, A1, 0x18
move  A0, S0
jal   GetAbsSpaceIndexFromChainSpaceIndex
 andi  A1, A1, 0xffff
sll   V0, V0, 0x10
sra   V0, V0, 0x10
li    V1, 146
bne   V0, V1, L80106A9C
       NOP
lwc1  F2, 0x10(S2)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F0
lw    A1, 0xc(S2)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S2)
jal   0x80089A10
 addiu A0, S1, 0xc
lui   V0, hi(CORE_800A0550)
lw    V0, lo(CORE_800A0550)(V0)
lw    A1, 0x10(V0)
lw    A2, 0x14(V0)
lw    A3, 0x18(V0)
jal   0x80089A10
 addiu A0, SP, 0x10
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F0
      NOP
j     L80106B00
 swc1  F0, 0x30(S1)
L80106A9C:
lwc1  F6, 0x10(S2)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F2
lwc1  F4, 0x14(S2)
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F0
lw    A1, 0xc(S2)
add.s F2, F6, F2
mfc1  A2, F2
add.s F0, F4, F0
mfc1  A3, F0
      NOP
jal   0x80089A10
 addiu A0, S1, 0xc
lui   V0, hi(CORE_800A0550)
lw    V0, lo(CORE_800A0550)(V0)
lw    A1, 0x10(V0)
lw    A2, 0x14(V0)
lw    A3, 0x18(V0)
jal   0x80089A10
 addiu A0, SP, 0x10
li    AT, 0x420C0000 ; 35.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S1)
L80106B00:
lui A0, 0xb
ori A0, A0, 4
jal   0x8000CED8
 li    A1, 2729
sll   V0, V0, 0x10
sra   S3, V0, 0x10
move  S0, S3
move  A0, S0
lui   A1, 0x3f80
lui   A2, 0x41a0
jal   0x8000CD00
 move  A3, A1
lui   A1, 0x4170
jal   0x8000D018
 move  A0, S0
move  A0, S0
jal   0x8001C8A8
 li    A1, 1
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 move  A0, S0
mtc1  R0, F20
move  S0, R0
li    AT, 0x3F000000 ; 0.500000
mtc1  AT, F24
sll   S2, S3, 0x10
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F22
L80106B84:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S1, 0x24
add.s F20, F20, F24
mul.s F8, F20, F22
mfc1  A1, F8
      NOP
jal   0x8000D018
 sra   A0, S2, 0x10
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 6
bnez  V0, L80106B84
       NOP
move  S0, R0
li    AT, 0x3ECC0000 ; 0.398438
ori   AT, AT, 0xcccd
mtc1  AT, F24
sll   S2, S3, 0x10
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F22
L80106BE4:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S1, 0x24
sub.s F20, F20, F24
mul.s F8, F20, F22
mfc1  A1, F8
      NOP
jal   0x8000D018
 sra   A0, S2, 0x10
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 3
bnez  V0, L80106BE4
       NOP
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F0
      NOP
mul.s F0, F20, F0
mfc1  A1, F0
      NOP
jal   0x8000D018
 move  A0, S3
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 306
mtc1  R0, F22
lw    V0, 0x24(S4)
lwc1  F2, 0x10(V0)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F0
lw    A1, 0xc(V0)
sub.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(V0)
jal   0x80089A10
 addiu A0, SP, 0x10
addiu A2, S1, 0xc
move  A0, A2
addiu A1, SP, 0x10
jal   0x800ED35C
 li    A3, 40
move  S0, R0
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
li    AT, 0x3D4C0000 ; 0.049805
ori   AT, AT, 0xcccd
mtc1  AT, F26
mtc1  R0, F24
move  S2, S3
L80106CB8:
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A2A0
 addiu A0, A0, 0x74
sub.s F20, F20, F26
c.lt.s F20, F24
      NOP
      NOP
bc1f  L80106D08
 add.s F22, F22, F28
mov.s F20, F24
L80106D08:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S1, 0x24
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F0
      NOP
mul.s F0, F20, F0
mfc1  A1, F0
      NOP
jal   0x8000D018
 move  A0, S2
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 move  A0, S2
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0x28
bnez  V0, L80106CB8
       NOP
jal   0x800D9B54
 move  A0, S1
jal   0x8000D044
 move  A0, S3
lw    A0, 0x24(S4)
jal   0x800ECC0C
 addiu A0, A0, 0x18
li    A0, -1
jal   0x800FF900
 li    A1, 5
lui   V0, hi(D_8011D308)
lw    V0, lo(D_8011D308)(V0)
beqz  V0, L80106DBC
       NOP
jal   0x8004A670
 li    A0, 14
j     L80106DC4
       NOP
L80106DBC:
jal   0x8004A520
 li    A0, 111 ; Fanfare audio track
L80106DC4:
lui   A0, hi(current_player_index)
addiu A0, A0, lo(current_player_index)
lb    V0, 0(A0)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_stars)
addu  V0, V0, V1
lbu   V0, lo(p1_stars)(V0)
addiu V0, V0, 1 ; add 1 star
lui   AT, hi(p1_stars)
addu  AT, AT, V1
sb    V0, lo(p1_stars)(AT)
lb    V1, 0(A0)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V1, V0, 3
lui   V0, hi(p1_stars)
addu  V0, V0, V1
lb    V0, lo(p1_stars)(V0)
slti  V0, V0, 0x64
bnez  V0, L80106E30
 li    A0, -1
li    V0, 99
lui   AT, hi(p1_stars)
addu  AT, AT, V1
sb    V0, lo(p1_stars)(AT)
L80106E30:
li    A1, 6
jal   0x800F2304
 move  A2, R0
lui   A1, hi(current_player_index)
lb    A1, lo(current_player_index)(A1)
jal   0x8004ACE0
 li    A0, 610
lui   V0, hi(D_8011D308)
lw    V0, lo(D_8011D308)(V0)
beqz  V0, L80106EA8
       NOP
jal   SleepProcess
 li    A0, 16
lui   A0, hi(CORE_800CDBC8)
jal   0x80003A70
 lh    A0, lo(CORE_800CDBC8)(A0)
jal   0x8004A918
 li    A0, 111
jal   0x8004A880
 move  A0, R0
jal   SleepProcess
 li    A0, 110
lui   A0, hi(CORE_800CDBC8)
lh    A0, lo(CORE_800CDBC8)(A0)
jal   0x80003B70
 move  A1, R0
jal   0x8004A72C
 li    A0, 15
j     L80106EB0
       NOP
L80106EA8:
jal   SleepProcess
 li    A0, 60
L80106EB0:
jal   EndProcess
 move  A0, R0
lw    RA, 0x34(SP)
lw    S4, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F28, 0x58(SP)
ldc1  F26, 0x50(SP)
ldc1  F24, 0x48(SP)
ldc1  F22, 0x40(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x60

func_80106EEC:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S1, A0
lui   AT, hi(CORE_800D037C)
sh    R0, lo(CORE_800D037C)(AT)
lui   A0, hi(func_8010698C)
addiu A0, A0, lo(func_8010698C)
li    A1, 18432
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
jal   0x8004EE68
 sw    S1, 0x8c(S0)
move  A0, V0
jal   0x8004ED30
 move  A1, S0
jal   0x8004EE18
       NOP
li    V0, 1
lui   AT, hi(CORE_800D037C)
sh    V0, lo(CORE_800D037C)(AT)
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

; View map handling?
__PP64_INTERNAL_VIEW_MAP:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
li    S0, 1
lui   AT, hi(CORE_800CDD58)
sh    S0, lo(CORE_800CDD58)(AT) ; set 1 to indicate map is being viewed?
lui   AT, hi(CORE_800D037C)
jal   0x8004EE68
 sh    R0, lo(CORE_800D037C)(AT)
move  A0, V0
jal   0x80047B80
 li    A1, 128
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   A0, hi(p1_controller)
addu  A0, A0, V0
jal   0x8010067C
 lbu   A0, lo(p1_controller)(A0)
jal   0x8004EE68
       NOP
move  A0, V0
jal   0x80047BAC
 li    A1, 128
lui   AT, hi(CORE_800CDD58)
sh    R0, lo(CORE_800CDD58)(AT)
lui   AT, hi(CORE_800D037C)
sh    S0, lo(CORE_800D037C)(AT)
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

; Could this be executed when returning to the board, from "view map" or other modes?
func_80106FE8:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
lui   AT, hi(CORE_800D037C)
jal   0x8004EE68
 sh    R0, lo(CORE_800D037C)(AT)
move  A0, V0
jal   0x80047B80
 li    A1, 128
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   A0, hi(p1_controller)
addu  A0, A0, V1
jal   0x8010067C
 lbu   A0, lo(p1_controller)(A0)
li    V0, 1
lui   AT, hi(CORE_800D037C)
sh    V0, lo(CORE_800D037C)(AT)
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

; Helper for choosing an item from the item shop message box
func_80107174:
addiu SP, SP, -0x48
sw    RA, 0x40(SP)
sw    S5, 0x3c(SP)
sw    S4, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
move  S5, A0
move  S2, R0
lui   A1, hi(D_8011F8D0)
addiu A1, A1, lo(D_8011F8D0)
lwl   V0, 0(A1)
lwr   V0, 3(A1)
swl   V0, 0x20(SP)
swr   V0, 0x23(SP)
move  S1, R0
lui   S4, hi(current_player_index)
addiu S4, S4, lo(current_player_index)
addiu S3, SP, 0x18
L801071C4:
lb    V0, 0(S4)
bne   S1, V0, L80107278
 sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(CORE_800D110C)
addu  AT, AT, V0
lbu   V0, lo(CORE_800D110C)(AT)
andi  V0, V0, 1
beqz  V0, L8010722C
 sll   S0, S1, 3
jal   func_8011CE94
 addiu S1, S1, 1
move  S2, V0
lb    V1, 0(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, 1024
j     L8010729C
 sh    V1, 0(V0)
L8010722C:
subu  S0, S0, S1
sll   S0, S0, 3
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
addu  V0, SP, V0
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
lbu   A1, 0x20(V0)
jal   0x8005FE54
 addiu S1, S1, 1
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, -1
j     L8010729C
 sh    V1, 0(V0)
L80107278:
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
sh    R0, 0(V0)
addiu S1, S1, 1
L8010729C:
slti  V0, S1, 4
bnez  V0, L801071C4
       NOP
beqz  S2, L80107354
 li    A1, 2
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8005B63C
 li    A2, 2
move  S0, R0
addiu S1, SP, 0x18
L801072C8:
addiu S2, S2, -1
bnez  S2, L80107304
       NOP
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S1
li    V1, -32768
sh    V1, 0(V0)
L80107304:
bnez  S0, L8010732C
 li    V0, 5
jal   0x800EDC40
       NOP
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
j     L8010733C
 andi  V0, V0, 0xff
L8010732C:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
L8010733C:
jal   0x8005F698
 sw    V0, 0x10(SP)
bnez  S2, L801072C8
 addiu S0, S0, 1
j     L8010736C
 move  S1, R0
L80107354:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
jal   0x8005F744
 move  S1, R0
L8010736C:
addu  V0, S5, S1
L80107370:
lbu   V0, 0(V0)
bnezl V0, L80107394
 addiu S1, S1, 1
sll   A1, S1, 0x10
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8006010C
 sra   A1, A1, 0x10
addiu S1, S1, 1
L80107394:
slti  V0, S1, 9
bnez  V0, L80107370
 addu  V0, S5, S1
move  S1, R0
li    S0, -1
sll   A1, S1, 0x10
L801073AC:
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
sra   A1, A1, 0x10
jal   0x8005E1D8
 move  A2, R0
move  S1, V0
beq   S1, S0, L801073E0
 addu  V0, S5, S1
lbu   V0, 0(V0)
beqz  V0, L801073AC
 sll   A1, S1, 0x10
j     L801073E4
 move  V0, S1
L801073E0:
li    V0, -1
L801073E4:
lw    RA, 0x40(SP)
lw    S5, 0x3c(SP)
lw    S4, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
jr    RA
 addiu SP, SP, 0x48

; Helper for choosing an item from the item shop message box
func_80107408:
addiu SP, SP, -0x48
sw    RA, 0x40(SP)
sw    S5, 0x3c(SP)
sw    S4, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
move  S2, R0
lui   A1, hi(D_8011F8D0)
addiu A1, A1, lo(D_8011F8D0)
lwl   V0, 0(A1)
lwr   V0, 3(A1)
swl   V0, 0x20(SP)
swr   V0, 0x23(SP)
move  S1, R0
addiu S3, SP, 0x18
li    S5, 1024
addiu S4, SP, 0x20
L80107454:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
bne   S1, V0, L801074F8
 sll   V0, S1, 3
subu  V0, V0, S1
sll   S0, V0, 3
lui   V0, hi(CORE_800D110C)
addu  V0, V0, S0
lbu   V0, lo(CORE_800D110C)(V0)
andi  V0, V0, 1
beql  V0, R0, L801074AC
 sll   S0, S1, 3
jal   func_8011D1F8
 addiu S1, S1, 1
move  S2, V0
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
sll   V0, V0, 1
addu  V0, V0, S3
j     L8010751C
 sh    S5, 0(V0)
L801074AC:
subu  S0, S0, S1
sll   S0, S0, 3
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
addu  V0, S4, V0
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
lbu   A1, 0(V0)
jal   0x8005FE54
 addiu S1, S1, 1
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, -1
j     L8010751C
 sh    V1, 0(V0)
L801074F8:
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
sh    R0, 0(V0)
addiu S1, S1, 1
L8010751C:
slti  V0, S1, 4
bnez  V0, L80107454
       NOP
beqz  S2, L801075D4
 li    A1, 2
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8005B63C
 li    A2, 2
move  S0, R0
addiu S1, SP, 0x18
L80107548:
addiu S2, S2, -1
bnez  S2, L80107584
       NOP
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S1
li    V1, -32768
sh    V1, 0(V0)
L80107584:
bnez  S0, L801075AC
 li    V0, 5
jal   0x800EDC40
       NOP
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
j     L801075BC
 andi  V0, V0, 0xff
L801075AC:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
L801075BC:
jal   0x8005F698
 sw    V0, 0x10(SP)
bnez  S2, L80107548
 addiu S0, S0, 1
j     L801075E8
       NOP
L801075D4:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
jal   0x8005F744
 lh    A3, 0x1e(SP)
L801075E8:
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
move  A1, R0
jal   0x8005E1D8
 li    A2, 1
lw    RA, 0x40(SP)
lw    S5, 0x3c(SP)
lw    S4, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
jr    RA
 addiu SP, SP, 0x48

func_80107620:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   S1, hi(current_player_index)
lb    S1, lo(current_player_index)(S1)
move  V1, R0
L8010763C:
beq   V1, S1, L80107660
 sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_stars)
addu  AT, AT, V0
lb    V0, lo(p1_stars)(AT)
bnez  V0, L80107670
 li    V0, 4
L80107660:
addiu V1, V1, 1
slti  V0, V1, 4
bnez  V0, L8010763C
 li    V0, 4
L80107670:
beq   V1, V0, L801076E4
 sll   V0, S1, 3
subu  V0, V0, S1
sll   S0, V0, 3
lui   V0, hi(p1_coins)
addu  V0, V0, S0
lh    V0, lo(p1_coins)(V0)
slti  V0, V0, 0x32
bnez  V0, L801076E8
 move  V1, R0
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
lui   V1, hi(p1_coins)
addu  V1, V1, S0
lh    V1, lo(p1_coins)(V1)
addiu V1, V1, 0xa
slt   V0, V0, V1
beqz  V0, L801076E4
 li    V0, 1
lui   AT, hi(D_8011FAD4)
sw    V0, lo(D_8011FAD4)(AT)
lui   V0, hi(p1_stars)
addu  V0, V0, S0
lb    V0, lo(p1_stars)(V0)
slti  V0, V0, MAX_PLAYER_STAR_COUNT
bnez  V0, L8010773C
       NOP
L801076E4:
move  V1, R0
L801076E8:
beq   V1, S1, L80107710
 sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slti  V0, V0, 5
beqz  V0, L80107720
 li    V0, 4
L80107710:
addiu V1, V1, 1
slti  V0, V1, 4
bnez  V0, L801076E8
 li    V0, 4
L80107720:
beq   V1, V0, L80107734
 li    V0, 2
lui   AT, hi(D_8011FAD4)
j     L8010773C
 sw    R0, lo(D_8011FAD4)(AT)
L80107734:
lui   AT, hi(D_8011FAD4)
sw    V0, lo(D_8011FAD4)(AT)
L8010773C:
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_80107750:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
lui   S3, hi(current_player_index)
lb    S3, lo(current_player_index)(S3)
move  S0, R0
addiu V1, SP, 0x10
li    A0, -1
sll   V0, S0, 2
L80107780:
addu  V0, V0, V1
sw    A0, 0(V0)
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L80107780
 sll   V0, S0, 2
move  S0, R0
addiu S1, SP, 0x10
li    S2, -1
L801077A4:
jal   0x800EEA58
 move  A0, S0
move  V1, V0
L801077B0:
sll   V0, V1, 2
addu  V0, V0, S1
lw    V0, 0(V0)
beq   V0, S2, L801077CC
 sll   V0, V1, 2
j     L801077B0
 addiu V1, V1, 1
L801077CC:
addu  V0, V0, S1
sw    S0, 0(V0)
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L801077A4
       NOP
jal   func_80107620
       NOP
lui   V1, hi(D_8011FAD4)
lw    V1, lo(D_8011FAD4)(V1)
li    V0, 1
bne   V1, V0, L8010785C
 addiu A0, SP, 0x10
move  S0, R0
sll   V0, S0, 2
L80107808:
addu  V0, V0, A0
lw    V1, 0(V0)
beq   V1, S3, L80107834
 sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_stars)
addu  AT, AT, V0
lb    V0, lo(p1_stars)(AT)
bnez  V0, L8010784C
       NOP
L80107834:
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L80107808
 sll   V0, S0, 2
j     L801078BC
 li    V0, 4
L8010784C:
lui   AT, hi(D_8011FAD8)
sw    V1, lo(D_8011FAD8)(AT)
j     L801078BC
 li    V0, 4
L8010785C:
lui   V0, hi(D_8011FAD4)
lw    V0, lo(D_8011FAD4)(V0)
bnez  V0, L801078BC
 li    V0, 4
move  S0, R0
addiu A0, SP, 0x10
sll   V0, S0, 2
L80107878:
addu  V0, V0, A0
lw    V1, 0(V0)
beq   V1, S3, L801078A8
 sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slti  V0, V0, 5
beqz  V0, L8010784C
       NOP
L801078A8:
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L80107878
 sll   V0, S0, 2
li    V0, 4
L801078BC:
bne   S0, V0, L801078CC
 li    V0, 2
lui   AT, hi(D_8011FAD4)
sw    V0, lo(D_8011FAD4)(AT)
L801078CC:
lw    RA, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

func_801078E8:
addiu SP, SP, -0x48
sw    RA, 0x44(SP)
sw    S6, 0x40(SP)
sw    S5, 0x3c(SP)
sw    S4, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
move  S5, A0
move  S6, A1
move  S4, A2
move  S2, R0
lui   A1, hi(D_8011F8D0)
addiu A1, A1, lo(D_8011F8D0)
lwl   V0, 0(A1)
lwr   V0, 3(A1)
swl   V0, 0x20(SP)
swr   V0, 0x23(SP)
move  S1, R0
addiu S3, SP, 0x18
L8010793C:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
bne   S1, V0, L80107A18
 sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(CORE_800D110C)
addu  AT, AT, V0
lbu   V0, lo(CORE_800D110C)(AT)
andi  V0, V0, 1
beqz  V0, L801079CC
 sll   S0, S1, 3
bnez  S6, L8010798C
       NOP
jal   func_80107750
       NOP
lui   V0, hi(D_8011FAD4)
lw    V0, lo(D_8011FAD4)(V0)
j     L80107998
 addiu S2, V0, 1
L8010798C:
lui   V0, hi(D_8011FAD8)
lw    V0, lo(D_8011FAD8)(V0)
addiu S2, V0, 1
L80107998:
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, 1024
j     L80107A38
 sh    V1, 0(V0)
L801079CC:
subu  S0, S0, S1
sll   S0, S0, 3
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
addu  V0, SP, V0
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
lbu   A1, 0x20(V0)
jal   0x8005FE54
 addiu S1, S1, 1
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, -1
j     L80107A3C
 sh    V1, 0(V0)
L80107A18:
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
sh    R0, 0(V0)
L80107A38:
addiu S1, S1, 1
L80107A3C:
slti  V0, S1, 4
bnez  V0, L8010793C
       NOP
beqz  S2, L80107AF4
 li    A1, 2
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8005B63C
 li    A2, 2
move  S0, R0
addiu S1, SP, 0x18
L80107A68:
addiu S2, S2, -1
bnez  S2, L80107AA4
       NOP
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S1
li    V1, -32768
sh    V1, 0(V0)
L80107AA4:
bnez  S0, L80107ACC
 li    V0, 5
jal   0x800EDC40
       NOP
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
j     L80107ADC
 andi  V0, V0, 0xff
L80107ACC:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
L80107ADC:
jal   0x8005F698
 sw    V0, 0x10(SP)
bnez  S2, L80107A68
 addiu S0, S0, 1
j     L80107B0C
 move  S1, R0
L80107AF4:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
jal   0x8005F744
 move  S1, R0
L80107B0C:
addu  V0, S5, S1
L80107B10:
lbu   V0, 0(V0)
bnezl V0, L80107B34
 addiu S1, S1, 1
sll   A1, S1, 0x10
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8006010C
 sra   A1, A1, 0x10
addiu S1, S1, 1
L80107B34:
slti  V0, S1, 4
bnez  V0, L80107B10
 addu  V0, S5, S1
move  S1, R0
li    S0, -1
sll   A1, S1, 0x10
L80107B4C:
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
sra   A1, A1, 0x10
jal   0x8005E1D8
 move  A2, S4
bnez  S4, L80107B78
 move  S1, V0
bne   S1, S0, L80107B7C
 addu  V0, S5, S1
j     L80107B8C
 li    V0, -1
L80107B78:
addu  V0, S5, S1
L80107B7C:
lbu   V0, 0(V0)
beqz  V0, L80107B4C
 sll   A1, S1, 0x10
move  V0, S1
L80107B8C:
lw    RA, 0x44(SP)
lw    S6, 0x40(SP)
lw    S5, 0x3c(SP)
lw    S4, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
jr    RA
 addiu SP, SP, 0x48

func_80107BB4:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
move  A1, R0
jal   func_801078E8
 li    A2, 1
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

func_80107BD4:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
li    A1, 1
jal   func_801078E8
 move  A2, R0
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

overlaycall0:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
; Declare which board index this is.
li    V0, ${t}
lui   AT, hi(CORE_800CD059)
sb    V0, lo(CORE_800CD059)(AT)
li    A0, 10
jal   InitObjSys
 move  A1, R0
li    A0, 71
move  A1, R0
jal   0x80048228
 li    A2, 402
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

; does setup that only occurs once per board game
overlaycall1:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
li    A0, 10
jal   InitObjSys
 move  A1, R0
; set players onto the 0 chain
move  A0, R0
move  A1, R0
jal   SetPlayerOntoChain
 move  A2, R0
li    A0, 1
move  A1, R0
jal   SetPlayerOntoChain
 move  A2, R0
li    A0, 2
move  A1, R0
jal   SetPlayerOntoChain
 move  A2, R0
li    A0, 3
move  A1, R0
jal   SetPlayerOntoChain
 move  A2, R0
jal   0x80035FDC
 li    A0, 3
jal   func_80105EA8
       NOP
jal   0x8003602C
 li    A0, 18
lui   V0, hi(bank_coin_total)
addiu V0, V0, lo(bank_coin_total)
sh    R0, 0(V0) ; clear the bank coins
sh    R0, -6(V0)
sh    R0, -8(V0)
sh    R0, -0x1c(V0) ; 800CD098
jal   0x8004819C
 li    A0, 1
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

setup_routine:
addiu SP, SP, -0x38
sw    RA, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F20, 0x30(SP)
li    A0, 160
jal   InitObjSys
 li    A1, 40
li    A0, 1
li    A1, 255
li    A2, 255
jal   0x80019514
 li    A3, 255
li    A0, 2
li    A1, 200
li    A2, 200
jal   0x80019514
 li    A3, 200
JAL   __PP64_INTERNAL_ADDITIONAL_BG_CHOICE
 NOP
move  A0, V0 ; Determined by user-customizable hook
li    A1, ${e.boardDefFile}
li    A2, ${e.pauseBgDir}
jal   0x800F89D0 ; setup board?
 move  A3, R0
lui   A0, hi(D_8011D31C)
jal   0x800EBCFC
 addiu A0, A0, lo(D_8011D31C)
lui   A0, hi(D_8011D320)
jal   0x800EBD54
 addiu A0, A0, lo(D_8011D320)

; begin arrow rotation
${I.join(`
`)}
; end arrow rotation

lui   A1, hi(boo_event)
addiu A1, A1, lo(boo_event)
jal   0x800E2960
 move  A0, R0
lui   A1, hi(func_8010F2FC)
addiu A1, A1, lo(func_8010F2FC)
jal   0x800E2960
 li    A0, 1
lui   A1, hi(func_8010F6C4)
addiu A1, A1, lo(func_8010F6C4)
jal   0x800E2960
 li    A0, 9
lui   A1, hi(func_8010F730)
addiu A1, A1, lo(func_8010F730)
jal   0x800E2960
 li    A0, 2
lui   A1, hi(D_80117C60)
addiu A1, A1, lo(D_80117C60)
jal   0x800E2960
 li    A0, 3
lui   A1, hi(D_8011093C)
addiu A1, A1, lo(D_8011093C)
jal   0x800E2960
 li    A0, 4
lui   A1, hi(D_80110BC8)
addiu A1, A1, lo(D_80110BC8)
jal   0x800E2960
 li    A0, 5
lui   A1, hi(D_8010FC24)
addiu A1, A1, lo(D_8010FC24)
jal   0x800E2960
 li    A0, 6
lui   A1, hi(D_80110194)
addiu A1, A1, lo(D_80110194)
jal   0x800E2960
 li    A0, 7
lui   A1, hi(D_801104E0)
addiu A1, A1, lo(D_801104E0)
jal   0x800E2960
 li    A0, 8
lui   A1, hi(D_80116F5C)
addiu A1, A1, lo(D_80116F5C)
jal   0x800E2960
 li    A0, 10
lui   A1, hi(D_801177DC)
addiu A1, A1, lo(D_801177DC)
jal   0x800E2960
 li    A0, 11
lui   A1, hi(D_80111018)
addiu A1, A1, lo(D_80111018)
jal   0x800E2960
 li    A0, 14
lui   A1, hi(D_801112D8)
addiu A1, A1, lo(D_801112D8)
jal   0x800E2960
 li    A0, 15
lui   A1, hi(D_80111678)
addiu A1, A1, lo(D_80111678)
jal   0x800E2960
 li    A0, 16
lui   A1, hi(D_80112074)
addiu A1, A1, lo(D_80112074)
jal   0x800E2960
 li    A0, 17
lui   A1, hi(D_80112BCC)
addiu A1, A1, lo(D_80112BCC)
jal   0x800E2960
 li    A0, 18
lui   A1, hi(barter_box_item_code)
addiu A1, A1, lo(barter_box_item_code)
jal   0x800E2960
 li    A0, 19
lui   A1, hi(game_guy_lucky_charm)
addiu A1, A1, lo(game_guy_lucky_charm)
jal   0x800E2960
 li    A0, 20
lui   A1, hi(D_80115B80)
addiu A1, A1, lo(D_80115B80)
jal   0x800E2960
 li    A0, 21
lui   A1, hi(D_80116DAC)
addiu A1, A1, lo(D_80116DAC)
jal   0x800E2960
 li    A0, 12
lui   A1, hi(D_801176A4)
addiu A1, A1, lo(D_801176A4)
jal   0x800E2960
 li    A0, 13
lui   A0, hi(D_8011C88C)
addiu A0, A0, lo(D_8011C88C)
jal   0x800DA748
 move  S0, R0
lui   S1, hi(D_8011D2C0)
addiu S1, S1, lo(D_8011D2C0)
sll   V0, S0, 1
L80107F5C:
addu  V0, V0, S1
lh    A1, 0(V0)
jal   0x800EA6E0
 move  A0, S0
addiu S0, S0, 1
slti  V0, S0, STAR_COUNT
bnez  V0, L80107F5C
 sll   V0, S0, 1
jal   0x80035F98
 li    A0, 14
beqz  V0, L80107F9C
       NOP
jal   0x8003602C
 li    A0, 14
jal   func_80105FB0
       NOP
; drawing things
L80107F9C:
.if STAR_COUNT
jal   draw_star_space_state
       NOP
jal   draw_millenium_stars
       NOP
.endif
jal   draw_boo
       NOP
jal   draw_bank_coins
       NOP
jal   draw_gates_outer
       NOP
jal   func_80108B24 ; bank?
       NOP
jal   func_80108BA4
       NOP
jal   func_80116AA0
       NOP
jal   0x800EBDAC
       NOP
lw    RA, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F20, 0x30(SP)
jr    RA
 addiu SP, SP, 0x38

${ee}

; A function that returns the audio index, to let custom events call to get the value.
${ue}

overlaycall2:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)

jal __PP64_INTERNAL_GET_BOARD_AUDIO_INDEX
 nop

; Start playing board audio.
jal   0x8004A520
 move    A0, V0

; On the chance that there are side effects of reordering this code, just call again.
jal __PP64_INTERNAL_GET_BOARD_AUDIO_INDEX
nop

lui   AT, hi(CORE_800CE198)
sh    V0, lo(CORE_800CE198)(AT)
jal   0x800F8D6C
 move  A0, V0

jal   InitCameras
 li    A0, 2
jal   setup_routine
       NOP

JAL hydrate_events
 NOP

; Sets up shared happening space code.
lui   A0, hi(shared_happening_event)
jal   0x800F8D48
addiu A0, A0, lo(shared_happening_event)

jal   0x800FF41C
 move  A0, R0
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

hydrate_events:
ADDIU SP SP 0xFFE8
SW RA, 0x0010(SP)

// Call for the MainFS to read in the ASM blob.
LUI A0 ${i}
JAL ${to(Qe.MP3_USA,"ReadMainFS")}
ADDIU A0 A0 ${a}

// Now, V0 has the location that the MainFSRead put the blob... it isn't
// where we want it, it is in the heap somewhere, so we will move it.

// This is a pretty simple copy loop
// T4 = Copy of V0, Current source RAM location
// T0 = Current dest RAM location
// T1 = Size of buffer remaining to copy
// T2 = Temp word register to do the copy
ADDU T4 V0 R0 // Copy V0 -> T4
LW T0 0x4(T4) // LW T0, 0x4(T4) [RAM dest]
LW T1 0x8(T4) // LW T1, 0x8(T4) [Buffer size]
hydrate_events_loop_start:
LW T2 0(T4)
SW T2 0(T0)
ADDIU T4 T4 4
ADDIU T0 T0 4
ADDIU T1 T1 -4
BGTZ T1 hydrate_events_loop_start
NOP

// Now we can hydrate the table.
// T9 = V0 copy
// T4 = Dest buffer addr + 0x10, where the table really starts
ADDU T9 V0 R0 // Copy V0 -> T9
LW T4 4(T9) // LW T4, 0x4(T9) [RAM dest]
JAL ${to(Qe.MP3_USA,"EventTableHydrate")}
ADDIU A0 T4 16 // ADDIU A0, T4, 16

// Well, we copied the buffer... now we should "free" it with this magic JAL...
// Free our T9 reference, which theoretically could be corrupted, but in practice not.
JAL ${to(Qe.MP3_USA,"FreeMainFS")}
ADDU A0 T9 R0

LW RA 0x10(SP)
JR RA
ADDIU SP SP 0x18

overlaycall3:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
jal   InitCameras
 li    A0, 1
jal   setup_routine
       NOP
jal   0x800FF41C
 li    A0, 1
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

draw_millenium_star_inner:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
sll   A0, A0, 0x10
sra   A0, A0, 0xe
lui   V0, hi(D_8011FA78)
addu  V0, V0, A0
lw    V0, lo(D_8011FA78)(V0)
bnez  V0, L801081D4
 li    A0, 58
jal   0x800D90C8
 move  A1, R0
move  S2, V0
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
jal   0x800461B4
 lh    A0, 0(V0)
lui   V0, hi(D_8011FA70)
lw    V0, lo(D_8011FA70)(V0)
bnez  V0, L8010812C
 sll   S0, S0, 0x10
lui   AT, hi(D_8011FA70)
sw    S2, lo(D_8011FA70)(AT)
L8010812C:
sra   S0, S0, 0x10
sll   S1, S0, 2
lui   AT, hi(D_8011FA78)
addu  AT, AT, S1
sw    S2, lo(D_8011FA78)(AT)
lhu   V0, 0xa(S2)
ori   V0, V0, 2
sh    V0, 0xa(S2)
addiu A0, S2, 0x24
lui   A1, 0x3f19
ori   A1, A1, 0x999a
move  A2, A1
jal   0x80089A10
 move  A3, A1
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S2)
lui   A1, 0x40c0
lui   A2, 0x4000
jal   0x800EDB98
 move  A0, S2
lui   AT, hi(D_8011FA98)
addu  AT, AT, S1
sw    V0, lo(D_8011FA98)(AT)
sll   S0, S0, 1
lui   A0, hi(D_8011D37C)
addu  A0, A0, S0
jal   GetSpaceData
 lh    A0, lo(D_8011D37C)(A0)
addiu A0, S2, 0xc
jal   0x80089A20
 addiu A1, V0, 8
li    A0, 11
lui   A2, hi(D_8011D334)
addu  A2, A2, S1
lh    A2, lo(D_8011D334)(A2)
lui   A3, hi(D_8011D336)
addu  A3, A3, S1
lh    A3, lo(D_8011D336)(A3)
jal   0x800D771C
 move  A1, S2
L801081D4:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_801081EC:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, R0
lui   S2, hi(D_8011FA98)
addiu S2, S2, lo(D_8011FA98)
sll   V0, S0, 2
L80108210:
addu  S1, V0, S2
lw    A0, 0(S1)
beqz  A0, L8010822C
 addiu S0, S0, 1
jal   EndProcess
       NOP
sw    R0, 0(S1)
L8010822C:
slti  V0, S0, STAR_COUNT
bnez  V0, L80108210
 sll   V0, S0, 2
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

draw_millenium_stars:
addiu SP, SP, -0x28
sw    RA, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   AT, hi(D_8011FA70)
sw    R0, lo(D_8011FA70)(AT)
move  S0, R0
lui   S3, hi(D_8011FA78)
addiu S3, S3, lo(D_8011FA78)
lui   S2, hi(D_8011FA98)
addiu S2, S2, lo(D_8011FA98)
lui   S1, hi(D_8011D38C)
addiu S1, S1, lo(D_8011D38C)
sll   V1, S0, 2
L80108290:
addu  V0, V1, S3
sw    R0, 0(V0)
addu  V1, V1, S2
lui   A0, hi(func_801081EC)
addiu A0, A0, lo(func_801081EC)
jal   0x800F8D60
 sw    R0, 0(V1)
sll   V0, S0, 1
addu  V0, V0, S1
jal   0x80035F98
 lh    A0, 0(V0)
bnezl V0, L801082D4
 addiu S0, S0, 1
sll   A0, S0, 0x10
jal   draw_millenium_star_inner
 sra   A0, A0, 0x10
addiu S0, S0, 1
L801082D4:
slti  V0, S0, STAR_COUNT ; or M-star count?
bnez  V0, L80108290
 sll   V1, S0, 2
lw    RA, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x28

draw_boo_inner:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
sll   A0, A0, 0x10
sra   A0, A0, 0xe
lui   V0, hi(D_8011FB0C)
addu  V0, V0, A0
lw    V0, lo(D_8011FB0C)(V0)
bnez  V0, L80108408
       NOP
lui   V0, hi(D_8011FB08)
lw    V0, lo(D_8011FB08)(V0)
bnez  V0, L80108378
       NOP
li    A0, 10
jal   0x800D90C8
 move  A1, R0
move  S1, V0
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
jal   0x8001FA68
 lh    A0, 0(V0)
lw    V0, 0x40(S1)
lw    V0, 0x40(V0)
jal   0x8001FA68
 lh    A0, 0(V0)
lui   AT, hi(D_8011FB08)
j     L80108388
 sw    S1, lo(D_8011FB08)(AT)
L80108378:
lui   A0, hi(D_8011FB08)
jal   0x800D975C
 lw    A0, lo(D_8011FB08)(A0)
move  S1, V0
L80108388:
jal   0x800D9B24
 move  A0, S1
sll   V1, S0, 0x10
sra   V1, V1, 0x10
sll   S0, V1, 2
lui   AT, hi(D_8011FB0C)
addu  AT, AT, S0
sw    S1, lo(D_8011FB0C)(AT)
lhu   V0, 0xa(S1)
ori   V0, V0, 2
sh    V0, 0xa(S1)
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S1)
sll   V1, V1, 1
lui   A0, hi(boo_space_indices)
addu  A0, A0, V1
jal   GetSpaceData
 lh    A0, lo(boo_space_indices)(A0)
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, V0, 8
li    A0, 10
lui   A2, hi(D_8011D354)
addu  A2, A2, S0
lh    A2, lo(D_8011D354)(A2)
lui   A3, hi(D_8011D356)
addu  A3, A3, S0
lh    A3, lo(D_8011D356)(A3)
jal   0x800D771C
 move  A1, S1
L80108408:
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

draw_boo:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   AT, hi(D_8011FB08)
sw    R0, lo(D_8011FB08)(AT)
move  S0, R0
lui   S1, hi(D_8011FB0C)
addiu S1, S1, lo(D_8011FB0C)
sll   V0, S0, 2
L80108444:
addu  V0, V0, S1
sw    R0, 0(V0)
sll   A0, S0, 0x10
jal   draw_boo_inner
 sra   A0, A0, 0x10
addiu S0, S0, 1
blez  S0, L80108444 ; TODO: Consider BOO_COUNT here
 sll   V0, S0, 2
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_80108478:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
move  S3, R0
lui S5, 0x6666
ori S5, S5, 0x6667
lui   S4, hi(D_8011FB18)
addiu S4, S4, lo(D_8011FB18)
L801084AC:
lui   V0, hi(bank_coin_total)
lh    V0, lo(bank_coin_total)(V0)
addiu V0, V0, 9
mult  V0, S5
mfhi  A1
sra   V1, A1, 2
sra   V0, V0, 0x1f
subu  S1, V1, V0
slti  V0, S1, 6
beql  V0, R0, L801084D8
 li    S1, 5
L801084D8:
blez  S1, L8010850C
 move  S0, R0
sll   V0, S3, 2
addu  S2, V0, S3
addu  V0, S2, S0
L801084EC:
sll   V0, V0, 2
addu  V0, V0, S4
lw    A0, 0(V0)
jal   0x800D9AA4
 addiu S0, S0, 1
slt   V0, S0, S1
bnez  V0, L801084EC
 addu  V0, S2, S0
L8010850C:
slti  V0, S0, 5
beqz  V0, L80108540
 sll   V0, S3, 2
addu  S1, V0, S3
addu  V0, S1, S0
L80108520:
sll   V0, V0, 2
addu  V0, V0, S4
lw    A0, 0(V0)
jal   0x800D9B24
 addiu S0, S0, 1
slti  V0, S0, 5
bnez  V0, L80108520
 addu  V0, S1, S0
L80108540:
addiu S3, S3, 1
slti  V0, S3, 2
bnez  V0, L801084AC
       NOP
lw    RA, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x38

draw_bank_coins_inner:
addiu SP, SP, -0x28
sw    RA, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
sll   A0, A0, 0x10
sra   A0, A0, 0xe
lui   V0, hi(D_8011FB18)
addu  V0, V0, A0
lw    V0, lo(D_8011FB18)(V0)
bnez  V0, L801086C4
       NOP
lui   V0, hi(D_8011FB10)
lw    V0, lo(D_8011FB10)(V0)
bnez  V0, L801085E4
       NOP
li    A0, 30
jal   0x800D90C8
 move  A1, R0
move  S3, V0
jal   0x800D9714
 move  A0, S3
lui   AT, hi(D_8011FB10)
sw    S3, lo(D_8011FB10)(AT)
j     L801085F8
 sll   V1, S0, 0x10
L801085E4:
lui   A0, hi(D_8011FB10)
jal   0x800D975C
 lw    A0, lo(D_8011FB10)(A0)
move  S3, V0
sll   V1, S0, 0x10
L801085F8:
sra   S1, V1, 0x10
sll   V0, S1, 2
lui   AT, hi(D_8011FB18)
addu  AT, AT, V0
sw    S3, lo(D_8011FB18)(AT)
lhu   V0, 0xa(S3)
ori   V0, V0, 2
sh    V0, 0xa(S3)
lui V0, 0x6666
ori V0, V0, 0x6667
mult  S1, V0
mfhi  A3
sra   S0, A3, 1
sra   V1, V1, 0x1f
subu  S0, S0, V1
sll   V0, S0, 0x10
sra   V0, V0, 0xf
lui   A0, hi(bank_coin_space_indices)
addu  A0, A0, V0
lh    A0, lo(bank_coin_space_indices)(A0)
jal   GetSpaceData
 addiu S2, S3, 0xc
move  A0, S2
jal   0x80089A20
 addiu A1, V0, 8
sll   V0, S0, 2
addu  V0, V0, S0
subu  S1, S1, V0
sll   S1, S1, 0x10
sra   S1, S1, 0x10
sll   S0, S1, 1
addu  S0, S0, S1
sll   S0, S0, 2
lui   A1, hi(D_8011D3A4)
addiu A1, A1, lo(D_8011D3A4)
move  A0, S2
addu  A1, S0, A1
jal   0x80089A70
 move  A2, S2
lw    V0, 0x3c(S3)
lui   AT, hi(D_8011D3E0)
addu  AT, AT, S0
lwc1  F0, lo(D_8011D3E0)(AT)
swc1  F0, 0x24(V0)
lw    V0, 0x3c(S3)
lui   AT, hi(D_8011D3E8)
addu  AT, AT, S0
lwc1  F0, lo(D_8011D3E8)(AT)
swc1  F0, 0x2c(V0)
jal   0x800D9B24
 move  A0, S3
L801086C4:
lw    RA, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x28

draw_bank_coins:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   AT, hi(D_8011FB10)
sw    R0, lo(D_8011FB10)(AT)
move  S0, R0
lui   S1, hi(D_8011FB18)
addiu S1, S1, lo(D_8011FB18)
sll   V0, S0, 2
L80108708:
addu  V0, V0, S1
sw    R0, 0(V0)
sll   A0, S0, 0x10
jal   draw_bank_coins_inner
 sra   A0, A0, 0x10
addiu S0, S0, 1
slti  V0, S0, 0xa
bnez  V0, L80108708
 sll   V0, S0, 2
jal   func_80108478
       NOP
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

;draw gates inner
func_80108748:
addiu SP, SP, -0x28
sw    RA, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
move  S0, A0
sll   A0, A0, 0x10
sra   A0, A0, 0xe
lui   V0, hi(D_8011FB44)
addu  V0, V0, A0
lw    V0, lo(D_8011FB44)(V0)
bnez  V0, L8010889C
       NOP
lui   V0, hi(D_8011FB40)
lw    V0, lo(D_8011FB40)(V0)
bnez  V0, L801087D8
       NOP
lui   V0, hi(CORE_800CD059)
lb    V0, lo(CORE_800CD059)(V0) ; getting board index?
sll   V1, V0, 1
sll   V0, V0, 2
;li    V0, 0 ; TODO: Hard code board index to 0, so we always use the same gate animation/sound/file.
lui   A0, hi(D_8011D421)
addu  A0, A0, V1
lbu   A0, lo(D_8011D421)(A0)
lui   A1, hi(D_8011D45C)
addu  A1, A1, V0
lw    A1, lo(D_8011D45C)(A1)
jal   0x800D90C8
 sll   S0, S0, 0x10
move  S2, V0
jal   0x800D9714
 move  A0, S2
lui   AT, hi(D_8011FB40)
sw    S2, lo(D_8011FB40)(AT)
j     L801087F0
 sra   S0, S0, 0x10
L801087D8:
lui   A0, hi(D_8011FB40)
lw    A0, lo(D_8011FB40)(A0)
jal   0x800D975C
 sll   S0, S0, 0x10
move  S2, V0
sra   S0, S0, 0x10
L801087F0:
sll   S1, S0, 2
lui   AT, hi(D_8011FB44)
addu  AT, AT, S1
sw    S2, lo(D_8011FB44)(AT)
lhu   V0, 0xa(S2)
ori   V0, V0, 2
sh    V0, 0xa(S2)
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 2
jal   0x8001C814
 li    A2, 1
sll   S0, S0, 1
lui   A0, hi(gate_spaces)
addu  A0, A0, S0
jal   GetSpaceData
 lh    A0, lo(gate_spaces)(A0)
addiu A0, S2, 0xc
jal   0x80089A20
 addiu A1, V0, 8
lui   A0, hi(gate_entrance_spaces)
addu  A0, A0, S1
jal   GetSpaceData
 lh    A0, lo(gate_entrance_spaces)(A0)
lui   A0, hi(gate_exit_spaces)
addu  A0, A0, S1
lh    A0, lo(gate_exit_spaces)(A0)
jal   GetSpaceData
 move  S0, V0
addiu A0, V0, 8
addiu A1, S0, 8
jal   GetAngleBetweenSpaces
 addiu A2, S2, 0x18
li    A0, 12
lui   A2, hi(D_8011D36C)
addu  A2, A2, S1
lh    A2, lo(D_8011D36C)(A2)
lui   A3, hi(D_8011D36E)
addu  A3, A3, S1
lh    A3, lo(D_8011D36E)(A3)
jal   0x800D771C
 move  A1, S2
L8010889C:
lw    RA, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x28

draw_gates_outer:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   AT, hi(D_8011FB40)
sw    R0, lo(D_8011FB40)(AT)
move  S0, R0
lui   S1, hi(D_8011FB44)
addiu S1, S1, lo(D_8011FB44)
sll   V0, S0, 2
__draw_gates_outer_loop:
addu  V0, V0, S1
sw    R0, 0(V0)
sll   A0, S0, 0x10
jal   func_80108748
 sra   A0, A0, 0x10
addiu S0, S0, 1
slti  V0, S0, GATE_COUNT
bnez  V0, __draw_gates_outer_loop
 sll   V0, S0, 2
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

D_80108914:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
lui   S0, hi(CORE_800CD059)
addiu S0, S0, lo(CORE_800CD059)
lb    V0, 0(S0)
sll   V0, V0, 2
lui   A0, hi(D_8011D4BC)
addu  A0, A0, V0
jal   SleepProcess
 lw    A0, lo(D_8011D4BC)(A0)
lb    V0, 0(S0)
sll   V0, V0, 2
lui   A0, hi(D_8011D49A)
addu  A0, A0, V0
jal   PlaySound
 lh    A0, lo(D_8011D49A)(A0)
jal   EndProcess
 move  A0, R0
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

func_gate_80108970:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
lui   V0, hi(D_8011FB44)
addiu V0, V0, lo(D_8011FB44)
sll   S0, A0, 2
addu  S0, S0, V0
addiu A1, A1, -1
sll   A1, A1, 0x10
lw    A0, 0(S0)
sra   A1, A1, 0x10
jal   0x800D9CE8
 move  A2, R0
lw    V0, 0(S0)
lw    V0, 0x3c(V0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 5
jal   0x8001C814
 move  A2, R0
lui   V0, hi(CORE_800CD059)
lb    V0, lo(CORE_800CD059)(V0)
lui   V1, hi(D_8011D474)
addiu V1, V1, lo(D_8011D474)
sll   V0, V0, 2
addu  A0, V0, V1
lw    V1, 0(A0)
li    V0, -1
beq   V1, V0, L801089F0
       NOP
jal   PlaySound
 lh    A0, 2(A0)
L801089F0:
lui   V0, hi(CORE_800CD059)
lb    V0, lo(CORE_800CD059)(V0)
sll   V0, V0, 2
lui   V1, hi(D_8011D498)
addu  V1, V1, V0
lw    V1, lo(D_8011D498)(V1)
li    V0, -1
beq   V1, V0, L80108A28
 li    A1, 4096
lui   A0, hi(D_80108914)
addiu A0, A0, lo(D_80108914)
move  A2, R0
jal   InitProcess
 move  A3, R0
L80108A28:
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

gate_spaces_event_process:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
jal   0x8004EE68
 sw    S0, 0x10(SP)
lw    S0, 0x8c(V0)
lui   V1, hi(CORE_800CD06D)
lb    V1, lo(CORE_800CD06D)(V1)
beqz  V1, L80108A6C
 li    V0, 1
beq   V1, V0, L80108A70
 li    A0, 10
j     L80108A70
 li    A0, 15
L80108A6C:
li    A0, 5
L80108A70:
jal   SleepProcess
       NOP
sll   V0, S0, 2
lui   AT, hi(D_8011FB44)
addu  AT, AT, V0
lw    V0, lo(D_8011FB44)(AT)
lw    V0, 0x3c(V0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 1
jal   0x8001C814
 li    A2, 4
lui   V0, hi(CORE_800CD059)
lb    V0, lo(CORE_800CD059)(V0)
lui   V1, hi(D_8011D4E0)
addiu V1, V1, lo(D_8011D4E0)
sll   V0, V0, 2
addu  A0, V0, V1
lw    V1, 0(A0)
li    V0, -1
beq   V1, V0, L80108AD0
       NOP
jal   PlaySound
 lh    A0, 2(A0)
L80108AD0:
jal   EndProcess
 move  A0, R0
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

__PP64_INTERNAL_GATE_CLOSE_EVENT:
gate_spaces_event:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
lui   A0, hi(gate_spaces_event_process)
addiu A0, A0, lo(gate_spaces_event_process)
li    A1, 4096
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S0, 0x8c(V0)
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

; draw bank outer?
func_80108B24:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   AT, hi(D_8011FB40)
sw    R0, lo(D_8011FB40)(AT)
move  S0, R0
lui   S1, hi(bank_model_space_indices)
addiu S1, S1, lo(bank_model_space_indices)
sll   V0, S0, 1
L80108B4C:
addu  V0, V0, S1
jal   GetSpaceData
 lh    A0, 0(V0)
sll   V1, S0, 2
li    A0, 8
lui   A2, hi(D_8011D35C)
addu  A2, A2, V1
lh    A2, lo(D_8011D35C)(A2)
lui   A3, hi(D_8011D35E)
addu  A3, A3, V1
lh    A3, lo(D_8011D35E)(A3)
jal   0x800D7790
 addiu A1, V0, 8
addiu S0, S0, 1
slti  V0, S0, BANK_COUNT
bnez  V0, L80108B4C
 sll   V0, S0, 1
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_80108BA4:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, R0
lui   S1, hi(item_shop_model_space_indices)
addiu S1, S1, lo(item_shop_model_space_indices)
sll   V0, S0, 1
L80108BC4:
addu  V0, V0, S1
jal   GetSpaceData
 lh    A0, 0(V0)
sll   V1, S0, 2
li    A0, 9
lui   A2, hi(D_8011D364)
addu  A2, A2, V1
lh    A2, lo(D_8011D364)(A2)
lui   A3, hi(D_8011D366)
addu  A3, A3, V1
lh    A3, lo(D_8011D366)(A3)
jal   0x800D7790
 addiu A1, V0, 8
addiu S0, S0, 1
slti  V0, S0, SHOP_COUNT
bnez  V0, L80108BC4
 sll   V0, S0, 1
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

__PP64_INTERNAL_GATE_EVENT:
gate_event:
addiu SP, SP, -0x28
sw    RA, 0x24(SP)
sw    S4, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
li    S4, 1
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S2, V0
lbu   A0, 0xf(S2)
sll   A0, A0, 0x18
sra   A0, A0, 0x18
lbu   A1, 0x10(S2)
sll   A1, A1, 0x18
sra   A1, A1, 0x18
andi  A0, A0, 0xffff
jal   GetAbsSpaceIndexFromChainSpaceIndex
 andi  A1, A1, 0xffff
sll   V0, V0, 0x10
sra   S1, V0, 0x10
xori  V1, S1, ${R[0].gateEntryIndex}
sltiu V1, V1, 1
xori  V0, S1, ${R[1].gateEntryIndex}
sltiu V0, V0, 1
or    V1, V1, V0
beqz  V1, L80109B64
 xori  V1, S1, ${R[0].gateExitIndex}
lbu   V0, 0x17(S2)
andi  V0, V0, 1
bnez  V0, L80109E5C
       NOP
L80109B64:
sltiu V1, V1, 1
xori  V0, S1, ${R[1].gateExitIndex}
sltiu V0, V0, 1
or    V1, V1, V0
beqz  V1, L80109B8C
 li    A0, -1
lbu   V0, 0x17(S2) ; testing player flag bit
andi  V0, V0, 1
beqz  V0, L80109E5C
       NOP
L80109B8C:
li    A1, -1
jal   0x800F2304
 li    A2, 2
lb    A0, 0xf(S3)
jal   PlayerHasItem
 li    A1, ITEM_SKELETON_KEY
li    V1, -1
beq   V0, V1, L80109DC8
 li    A0, -1
lb    A0, 0xf(S3)
jal   0x800DBEC0
       NOP
li    V0, ${R[0].gateExitIndex}
beq   S1, V0, L80109BD0
 li    V0, ${R[0].gateEntryIndex}
bne   S1, V0, L80109BE0
 li    A0, -1
L80109BD0:
li    A0, -1
li    A1, 8
j     L80109BE8
 li    A2, ${R[0].gateSpaceIndex}
L80109BE0:
li    A1, 8
li    A2, ${R[1].gateSpaceIndex}
L80109BE8:
jal   0x800ED20C
       NOP
jal   0x8004EE68
       NOP
li    AT, 0x3FCC0000
ori   AT, AT, 0xcccd
mtc1  AT, F12
      NOP
jal   0x800E8EDC
 move  S0, V0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
       NOP
li    A0, -1
jal   0x800FF900
 li    A1, 1
li    A0, 56
L80109C34:
jal   0x800EC628
 li    A1, 0x4103 ; "Hi I'm the Skeleton Key! Shall I use my skills..."
li    A0, 2
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 move  A1, R0
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
li    V0, 1
beq   S0, V0, L80109D5C
 slti  V0, S0, 2
beql  V0, R0, L80109C7C
 li    V0, 2
beqz  S0, L80109C8C
 li    A0, 56
j     L80109D80
       NOP
L80109C7C:
beq   S0, V0, L80109D70
       NOP
j     L80109D80
       NOP
L80109C8C:
jal   0x800EC590
 li    A1, 16644
lb    A0, 0xf(S3)
jal   PlayerHasItem
 li    A1, ITEM_SKELETON_KEY
lb    A0, 0xf(S3)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1) ; p1_item1, reaching into items...
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1) ; clearing item?
lui   A0, hi(current_player_index)
jal   FixUpPlayerItemSlots
 lb    A0, lo(current_player_index)(A0)
jal   0x800F63F0
 li    A0, -1
li    V0, ${R[1].gateEntryIndex}
beq   S1, V0, L80109D18
 ADDIU V0 R0 ${R[0].gateEntryIndex} ; slti  V0, S1, gateEntryIndex
beq   S1, V0, L80109D00 ; was beqz
 li    V0, ${R[0].gateExitIndex}
beq   S1, V0, L80109D24
 move  A0, R0
j     L80109D24
 li    A0, 1
L80109D00:
li    V0, ${R[0].gateEntryIndex}
bnel  S1, V0, L80109D24
 li    A0, 1
move  A0, R0
j     L80109D28
 move  A1, R0
L80109D18:
li    A0, 1
j     L80109D28
 move  A1, R0
L80109D24:
li    A1, 1
L80109D28:
jal   func_gate_80108970
 move  S4, R0
li    A0, -1
li    A1, 2
jal   0x800FFA4C
 li    A2, 5
move  S0, V0
jal   SleepProcess
 li    A0, 20
jal   0x800FFAEC
 move  A0, S0
j     L80109D80
       NOP
L80109D5C:
li    A0, 56
jal   0x800EC590
 li    A1, 16645
j     L80109D80
       NOP
L80109D70:
jal   __PP64_INTERNAL_VIEW_MAP
       NOP
j     L80109C34
 li    A0, 56
L80109D80:
lb    A0, 0xf(S3)
jal   0x800DB884
       NOP
jal   0x8004EE68
       NOP
li    AT, 0x3FA60000 ; 1.296875
ori   AT, AT, 0x6666
mtc1  AT, F12
      NOP
jal   0x800E8EDC
 move  S0, V0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
       NOP
j     L80109DD0
       NOP
L80109DC8:
jal   0x800EC590
 li    A1, 0x4106 ; "You don't have a Skeleton Key, ..."
L80109DD0:
beqz  S4, L80109E5C
 li    V0, ${R[1].gateEntryIndex}
beq   S1, V0, L80109E28
 li    A0, -1
ADDIU V0 R0 ${R[0].gateEntryIndex} ; slti  V0, S1, 0x7a
beq   S1, V0, L80109DFC
 li    V0, ${R[0].gateExitIndex}
beq   S1, V0, L80109E20
 li    A1, ${R[0].gateNextChain[0]}
j     L80109E44
 li    A1, ${R[1].gateNextChain[0]}
L80109DFC:
li    V0, ${R[0].gateEntryIndex}
bne   S1, V0, L80109E40
 li    A0, -1
li    A1, ${R[0].gatePrevChain[0]}
jal   SetNextChainAndSpace
 li  A2, ${R[0].gatePrevChain[1]}
lbu   V0, 0x17(S2)
j     L80109E58
 ori   V0, V0, 1
L80109E20:
j     L80109E48
 li    A2, ${R[0].gateNextChain[1]}
L80109E28:
li    A1, ${R[1].gatePrevChain[0]}
jal   SetNextChainAndSpace
 li    A2, ${R[1].gatePrevChain[1]}
lbu   V0, 0x17(S2)
j     L80109E58
 ori   V0, V0, 1
L80109E40:
li    A1, ${R[1].gateNextChain[0]}
L80109E44:
li    A2, ${R[1].gateNextChain[1]}
L80109E48:
jal   SetNextChainAndSpace
       NOP
lbu   V0, 0x17(S2)
andi  V0, V0, 0xfe
L80109E58:
sb    V0, 0x17(S2)
L80109E5C:
jal   EndProcess
 move  A0, R0
lw    RA, 0x24(SP)
lw    S4, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x28

; Helper used when prompted between textbox options.
; If A0 is a pointer to AI data, the AI logic is ran to pick for CPUs.
; If A0 is 0 or 1, the 0th or 1st option is chosen by CPUs.
; If A0 is 2, then the value of A1 is the CPUs option index choice.
__PP64_INTERNAL_BASIC_MESSAGE_CHOICE:
addiu SP, SP, -0x48
sw    RA, 0x40(SP)
sw    S5, 0x3c(SP)
sw    S4, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
move  S3, A0
move  S5, A1
move  S2, R0
lui   A1, hi(D_8011F8D0)
addiu A1, A1, lo(D_8011F8D0)
lwl   V0, 0(A1)
lwr   V0, 3(A1)
swl   V0, 0x20(SP)
swr   V0, 0x23(SP)
move  S1, R0
addiu S4, SP, 0x18
; begin looping over each player
L8010A180:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
bne   S1, V0, L8010A290 ; if S1 != current player index
 sll   V0, S1, 3
; procesing when S1 == current player
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(CORE_800D110C)
addu  AT, AT, V0
lbu   V0, lo(CORE_800D110C)(AT)
andi  V0, V0, 1
beqz  V0, L8010A240 ; if (value at 800D110C & 0x01) == 0
 li    V0, 1
beq   S3, V0, L8010A1F0 ; Is A0 == 1?
 slti  V0, S3, 2
beql  V0, R0, L8010A1D0 ; Is A0 >= 2?
 li    V0, 2
beqz  S3, L8010A1E0 ; Is A0 == 0?
       NOP
j     L8010A200
       NOP
L8010A1D0:
beq   S3, V0, L8010A214 ; Is A0 == 2?
 addiu S2, S5, 1
j     L8010A200
       NOP
L8010A1E0:
jal   0x800EF0D8
 move  A0, R0
j     L8010A214
 addiu S2, V0, 1
L8010A1F0:
jal   0x800EF0D8
 li    A0, 1
j     L8010A214
 addiu S2, V0, 1
L8010A200:
jal   0x800DA190
 move  A0, S3
sll   V0, V0, 0x10
sra   V0, V0, 0x10
addiu S2, V0, 1
L8010A214:
sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S4
li    V1, 1024
j     L8010A2B0
 sh    V1, 0(V0)
L8010A240:
sll   S0, S1, 3
subu  S0, S0, S1
sll   S0, S0, 3
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
addu  V0, SP, V0
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
lbu   A1, 0x20(V0)
jal   0x8005FE54
 addiu S1, S1, 1
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
sll   V0, V0, 1
addu  V0, V0, S4
li    V1, -1
j     L8010A2B4
 sh    V1, 0(V0)
L8010A290:
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S4
sh    R0, 0(V0) ; mutate a player's controller index?
L8010A2B0:
addiu S1, S1, 1
L8010A2B4:
slti  V0, S1, 4
bnez  V0, L8010A180
       NOP
beqz  S2, L8010A36C
 li    A1, 2
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8005B63C
 li    A2, 2
move  S0, R0
addiu S1, SP, 0x18
L8010A2E0:
addiu S2, S2, -1
bnez  S2, L8010A31C
       NOP
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S1
li    V1, -32768
sh    V1, 0(V0)
L8010A31C:
bnez  S0, L8010A344
 li    V0, 5
jal   0x800EDC40
       NOP
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
j     L8010A354
 andi  V0, V0, 0xff
L8010A344:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
L8010A354:
jal   0x8005F698
 sw    V0, 0x10(SP)
bnez  S2, L8010A2E0
 addiu S0, S0, 1
j     L8010A380
       NOP
L8010A36C:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
jal   0x8005F744
 lh    A3, 0x1e(SP)
L8010A380:
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
move  A1, R0
jal   0x8005E1D8
 li    A2, 1
lw    RA, 0x40(SP)
lw    S5, 0x3c(SP)
lw    S4, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
jr    RA
 addiu SP, SP, 0x48

func_8010A3B8:
addiu SP, SP, -0x30
sw    RA, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
move  S0, A0
move  S2, A1
move  S1, A2
move  S3, A3
li    A0, 1
addiu A1, SP, 0x10
jal   0x80060394
 move  A2, S2
sll   S0, S0, 0x10
sll   S1, S1, 0x10
sra   A0, S0, 0x10
addiu A1, SP, 0x10
jal   0x800EBFE8
 sra   A2, S1, 0x10
move  S0, V0
lui   AT, hi(CORE_80105702_window_id)
sh    S0, lo(CORE_80105702_window_id)(AT)
sll   S0, S0, 0x10
sra   S0, S0, 0x10
move  A0, S0
move  A1, S2
li    A2, -1
jal   0x8005B43C
 li    A3, -1
jal   0x80061388
 move  A0, S0
move  A0, S0
jal   0x800EBF98
 move  A1, S3
move  A0, S0
jal   0x80061A5C
 move  A1, R0
jal   0x8005F364
 move  A0, S0
lw    RA, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x30

func_8010A474:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
L8010A47C:
jal   0x800E4A7C
       NOP
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
jal   0x800F69F8
 li    A2, 32768
jal   SleepVProcess
       NOP
j     L8010A47C
       NOP
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

__PP64_INTERNAL_STAR_SPACE_EVENT:
star_space_event:
addiu SP, SP, -0x30
sw    RA, 0x28(SP)
sw    S1, 0x24(SP)
jal   GetCurrentSpaceIndex
 sw    S0, 0x20(SP)
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
sll   V0, V0, 0x10
jal   func_801060E0
 sra   A0, V0, 0x10
sll   V0, V0, 0x10
sra   V0, V0, 0x10
li    V1, 1
bne   V0, V1, L8010A844
       NOP
lui   A0, hi(current_player_index)
jal   0x800DBEC0
 lb    A0, lo(current_player_index)(A0)
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
jal   func_80105E80
       NOP
sll   V0, V0, 0x10
li    A0, -1
li    A1, 8
jal   0x800ED20C
 sra   A2, V0, 0x10
jal   0x8004EE68
       NOP
li    AT, 0x3FCC0000 ; 1.593750
ori   AT, AT, 0xcccd
mtc1  AT, F12
      NOP
jal   0x800E8EDC
 move  S0, V0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
       NOP
jal   PlaySound
 li    A0, 345
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V1, V0, 3
lui   V0, hi(CORE_800D1123)
addu  V0, V0, V1
lb    V0, lo(CORE_800D1123)(V0)
beqz  V0, L8010A5CC
 li    A0, 22
lui   A2, hi(p1_char)
addu  A2, A2, V1
lbu   A2, lo(p1_char)(A2)
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A1, 0x4805
addiu A2, A2, 0x1c00
jal   0x800EC8EC ; ShowMessage: "WAHH! Buh-Bowser! Oh, pardon me. Please, take this! ..."
 move  A3, R0
jal   0x800EC9DC
       NOP
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
L8010A5CC:
lb    V0, 0xf(S1)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_stars)
addu  V0, V0, V1
lb    V0, lo(p1_stars)(V0)
slti  V0, V0, MAX_PLAYER_STAR_COUNT
bnez  V0, L8010A5FC
 li    A0, 22
j     L8010A7B8
 li    A1, 0x4804 ; "You can't carry any more stars"
L8010A5FC:
lb    V0, 0xf(S1)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
slti  V0, V0, 0x14
bnezl V0, L8010A7B8
 li    A1, 0x4801 ; "Oh dear, you don't have 20 coins"
L8010A624:
lb    V1, 0xf(S1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   A2, hi(p1_char)
addu  A2, A2, V0
lbu   A2, lo(p1_char)(A2)
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 22
li    A1, 0x4800
addiu A2, A2, 0x1c00
jal   0x800EC8EC ; ShowMessage: "You made it! So you want to trade coins for a star?"
 move  A3, R0
li    A0, 2
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 move  A1, R0
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
 sll   S0, S0, 0x10
sra   S0, S0, 0x10
li    V0, 1
beq   S0, V0, L8010A74C ; Did they choose No?
 slti  V0, S0, 2
beql  V0, R0, L8010A6A4 ; is choice >= 2?
 li    V0, 2
beqz  S0, L8010A6B4 ; Did they choose yes?
       NOP
j     L8010A844
       NOP
L8010A6A4:
beq   S0, V0, L8010A7A8 ; Did they choose View Map?
       NOP
j     L8010A844
       NOP
L8010A6B4:
lb    A0, 0xf(S1)
jal   ShowPlayerCoinChange
 li    A1, -20
lb    A0, 0xf(S1)
jal   AdjustPlayerCoinsGradual
 li    A1, -20
jal   SleepProcess
 li    A0, 30
li    A0, 22
jal   0x800EC590 ; update existing window with new message?
 li    A1, 0x4802  ; "Then take this star"
lui   V0, hi(CORE_800A12D0)
lb    V0, lo(CORE_800A12D0)(V0)
beqz  V0, L8010A718
       NOP
jal   0x8004A950
       NOP
lui   A0, hi(CORE_800C9930)
lh    A0, lo(CORE_800C9930)(A0)
jal   0x800039A4
 li    A1, 60
li    V0, -1
lui   AT, hi(CORE_800C9930)
j     L8010A720
 sh    V0, lo(CORE_800C9930)(AT)
L8010A718:
jal   0x8004A994
 li    A0, 90
L8010A720:
lui   A0, hi(D_8011FA70)
jal   func_80106EEC
 lw    A0, lo(D_8011FA70)(A0)
jal   SleepProcess
 li    A0, 30
jal   0x800EDA58
       NOP
jal   0x800FF7F0
 li    A0, 2
j     L8010A844
       NOP
L8010A74C:
lui   V0, hi(CORE_800A12D0)
lb    V0, lo(CORE_800A12D0)(V0)
beqz  V0, L8010A798
 li    A0, 22
lui   A0, hi(CORE_800C9930)
lh    A0, lo(CORE_800C9930)(A0)
jal   0x800039A4
 li    A1, 60
lui   A0, hi(CORE_800CE198)
jal   0x80003310
 lh    A0, lo(CORE_800CE198)(A0)
jal   0x8004A670
 move  A0, R0
jal   0x8004A72C
 li    A0, 90
li    V0, -1
lui   AT, hi(CORE_800C9930)
sh    V0, lo(CORE_800C9930)(AT)
li    A0, 22
L8010A798:
jal   0x800EC590
 li    A1, 0x4803 ; "What?!? You don't need a star? ..."
j     L8010A808
       NOP
L8010A7A8:
jal   __PP64_INTERNAL_VIEW_MAP
       NOP
j     L8010A624
       NOP
L8010A7B8:
jal   0x800EC590
       NOP
lui   V0, hi(CORE_800A12D0)
lb    V0, lo(CORE_800A12D0)(V0)
beqz  V0, L8010A808
       NOP
lui   A0, hi(CORE_800C9930)
lh    A0, lo(CORE_800C9930)(A0)
jal   0x800039A4
 li    A1, 60
lui   A0, hi(CORE_800CE198)
jal   0x80003310
 lh    A0, lo(CORE_800CE198)(A0)
jal   0x8004A670
 move  A0, R0
jal   0x8004A72C
 li    A0, 90
li    V0, -1
lui   AT, hi(CORE_800C9930)
sh    V0, lo(CORE_800C9930)(AT)
L8010A808:
jal   0x800DB884
 lb    A0, 0xf(S1)
jal   0x8004EE68
       NOP
li    AT, 0x3FA60000 ; 1.296875
ori   AT, AT, 0x6666
mtc1  AT, F12
      NOP
jal   0x800E8EDC
 move  S0, V0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
       NOP
L8010A844:
lw    RA, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x30

__PP64_INTERNAL_BANK_SPACE_EVENT:
bank_space_event:
addiu SP, SP, -0xa0
sw    RA, 0x68(SP)
sw    S5, 0x64(SP)
sw    S4, 0x60(SP)
sw    S3, 0x5c(SP)
sw    S2, 0x58(SP)
sw    S1, 0x54(SP)
sw    S0, 0x50(SP)
sdc1  F30, 0x98(SP)
sdc1  F28, 0x90(SP)
sdc1  F26, 0x88(SP)
sdc1  F24, 0x80(SP)
sdc1  F22, 0x78(SP)
sdc1  F20, 0x70(SP)
jal   GetCurrentSpaceIndex
 move  S5, R0
move  S0, V0
lui   S4, hi(CORE_800CD058)
addiu S4, S4, lo(CORE_800CD058)
move  S1, R0
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   0x800DCD9C
 move  S3, R0
bgtz  V0, L8010A8D4
 li    A0, -1
jal   0x800FF900
 li    A1, 3
li    A0, -1
L8010A8D4:
li    A1, -1
jal   0x800F2304
 li    A2, 2
sll   V0, S0, 0x10
sra   V1, V0, 0x10
li    V0, ${x[0]}
beq   V1, V0, L8010A91C
 li    V0, ${x[1]}
bne   V1, V0, L8010A948
 li    A0, -1
li    A1, 8
jal   0x800ED20C
 li    A2, ${v[1]}
jal   GetSpaceData
 li    A0, ${v[1]}
move  S1, V0
j     L8010A93C
 li    A0, ${x[1]}
L8010A91C:
li    A0, -1
li    A1, 8
jal   0x800ED20C
 li    A2, ${v[0]}
jal   GetSpaceData
 li    A0, ${v[0]}
move  S1, V0
li    A0, ${x[0]}
L8010A93C:
jal   GetSpaceData
       NOP
move  S3, V0
L8010A948:
jal   SleepProcess
 li    A0, 8
lb    A0, 0xf(S4)
jal   0x800DCD9C
       NOP
blez  V0, L8010A96C
       NOP
jal   0x800DBEC0
 lb    A0, 0xf(S4)
L8010A96C:
jal   PlaySound
 li    A0, 276
li    A0, 50
jal   0x800D90C8
 move  A1, R0
move  S2, V0
jal   0x800D9714
 move  A0, S2
addiu S0, SP, 0x40
addiu S1, S1, 8
move  A0, S0
addiu A1, S3, 8
jal   midpoint
 move  A2, S1
jal   0x800D88E8
 move  A0, S0
addiu A0, S2, 0x18
jal   0x80089A20
 move  A1, S0
sw    R0, 0x28(S2)
addiu A0, S2, 0xc
jal   0x80089A20
 move  A1, S1
move  A0, S2
li    A1, -1
jal   0x800D9CE8
 li    A2, 1
jal   0x800D9A40
 move  A0, S2
lui   A1, hi(D_8011E070)
addiu A1, A1, lo(D_8011E070)
jal   0x800D90C8
 li    A0, 53
move  S3, V0
jal   0x800D9714
 move  A0, S3
addiu A0, S3, 0x18
jal   0x80089A20
 move  A1, S0
addiu A0, S3, 0xc
jal   0x80089A20
 move  A1, S1
li    AT, 0x3F990000 ; 1.195312
ori   AT, AT, 0x999a
mtc1  AT, F0
      NOP
swc1  F0, 0x2c(S3)
swc1  F0, 0x24(S3)
swc1  F0, 0x28(S3)
jal   0x800D9B24
 move  A0, S3
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F12
jal   0x8008EF20
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
div.s F22, F2, F0
mtc1  R0, F20
li    AT, 0x3E4C0000 ; 0.199219
ori   AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori   AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F28
      NOP
L8010AA88:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S2)
add.s F20, F20, F30
c.lt.s F20, F28
      NOP
bc1t  L8010AA88
       NOP
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F0
      NOP
c.lt.s F0, F20
      NOP
bc1f  L8010AB90
       NOP
li    AT, 0x3E4C0000 ; 0.199219
ori   AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori   AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F28
      NOP
L8010AB30:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S2)
sub.s F20, F20, F30
c.lt.s F28, F20
      NOP
bc1t  L8010AB30
       NOP
L8010AB90:
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x28(S2)
swc1  F0, 0x24(S2)
swc1  F0, 0x2c(S2)
jal   0x800D9A40
 move  A0, S3
li    A0, -1
jal   PlayerHasItem
 li    A1, ITEM_KOOPA_CARD
li    V1, -1
beq   V0, V1, L8010AC3C
 move  A0, S2
sw    R0, 0x10(SP)
L8010ABCC:
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x3A1D ; "Would you like to use your Koopa Kard at this bank?"
move  A2, R0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
lui   A0, hi(D_8011E058)
addiu A0, A0, lo(D_8011E058)
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 move  A1, R0
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
beqz  S0, L8010AC20
 li    V0, 2
beq   S0, V0, L8010AC28
 move  A0, S2
j     L8010AC3C
       NOP
L8010AC20:
j     L8010AC38
 li    S5, 1
L8010AC28:
jal   __PP64_INTERNAL_VIEW_MAP
       NOP
j     L8010ABCC
 sw    R0, 0x10(SP)
L8010AC38:
move  A0, S2
L8010AC3C:
li    A1, -1
jal   0x800D9CE8
 move  A2, R0
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui A1, 0x3f99
jal   0x8001C92C
 ori A1, A1, 0x999a
L8010AC60:
jal   0x800D9E0C
 move  A0, S2
andi  V0, V0, 0xffff
bnez  V0, L8010AC84
       NOP
jal   SleepVProcess
       NOP
j     L8010AC60
       NOP
L8010AC84:
jal   PlaySound
 li    A0, 601
move  A0, S3
move  A1, R0
jal   0x800D9CE8
 move  A2, R0
L8010AC9C:
jal   0x800D9E0C
 move  A0, S3
andi  V0, V0, 0xffff
bnez  V0, L8010ACC0
 move  A0, S3
jal   SleepVProcess
       NOP
j     L8010AC9C
       NOP
L8010ACC0:
li    A1, -1
jal   0x800D9CE8
 li    A2, 2
beqz  S5, L8010AE0C
       NOP
lui   S0, hi(bank_coin_total)
addiu S0, S0, lo(bank_coin_total)
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
lh    A2, 0(S0)
jal   sprintf
 addiu A0, SP, 0x20
lh    V0, 0(S0)
beqz  V0, L8010AD14
 li    A0, 2
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A1, 14878
j     L8010AD28
 addiu A2, SP, 0x20
L8010AD14:
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A1, 0x3A1F ; "So you'd like to use your card today?"
move  A2, R0
L8010AD28:
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
jal   0x800EC9DC
       NOP
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
lui   V0, hi(bank_coin_total)
lh    V0, lo(bank_coin_total)(V0)
beql  V0, R0, L8010AD74
 sw    R0, 0x10(SP)
lui   AT, hi(CORE_800D037C)
jal   func_80112FA8
 sh    R0, lo(CORE_800D037C)(AT)
li    V0, 1
lui   AT, hi(CORE_800D037C)
j     func_8010ADEC
 sh    V0, lo(CORE_800D037C)(AT)
L8010AD74:
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 2
li    A1, 14881
move  A2, R0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
jal   0x800EC9DC
       NOP
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
li    A0, -1
jal   PlayerHasItem
 li    A1, ITEM_KOOPA_CARD
lb    A0, 0xf(S4)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S4)
jal   0x800F63F0
 lb    A0, 0xf(S4)
func_8010ADEC:
jal   0x800DCD9C
 lb    A0, 0xf(S4)
blez  V0, L8010B138
       NOP
jal   0x800DB884
 lb    A0, 0xf(S4)
j     L8010B138
       NOP
L8010AE0C:
jal   0x800DCD9C
 lb    A0, 0xf(S4)
blez  V0, L8010B04C
       NOP
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   A2, hi(p1_coins)
addu  A2, A2, V0
lh    A2, lo(p1_coins)(A2)
sltu  V0, R0, A2
slti  V1, A2, 5
and   V0, V0, V1
beqz  V0, L8010AF38
       NOP
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 addiu A0, SP, 0x20
addiu S1, SP, 0x30
lui   S0, hi(bank_coin_total)
addiu S0, S0, lo(bank_coin_total)
lh    A3, 0(S0)
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   A2, hi(p1_coins)
addu  A2, A2, V0
lh    A2, lo(p1_coins)(A2)
move  A0, S1
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 addu  A2, A3, A2
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 2
li    A1, 0x1201
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage: "Welcome to the Koopa Bank."
 move  A3, S1
jal   0x800EC6C8
       NOP
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lhu   V1, 0(S0)
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lhu   V0, lo(p1_coins)(AT)
addu  V1, V1, V0
jal   func_80108478
 sh    V1, 0(S0)
lb    A0, 0xf(S4)
sll   V0, A0, 3
subu  V0, V0, A0
sll   V0, V0, 3
lui   A1, hi(p1_coins)
addu  A1, A1, V0
lh    A1, lo(p1_coins)(A1)
jal   ShowPlayerCoinChange
 subu  A1, R0, A1
lb    A0, 0xf(S4)
sll   V0, A0, 3
subu  V0, V0, A0
sll   V0, V0, 3
lui   A1, hi(p1_coins)
addu  A1, A1, V0
lh    A1, lo(p1_coins)(A1)
j     func_8010B004
 subu  A1, R0, A1
L8010AF38:
lb    V0, 0xf(S4)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
bnezl V0, L8010AF9C
 addiu A0, SP, 0x20
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
lui   A2, hi(bank_coin_total)
lh    A2, lo(bank_coin_total)(A2)
jal   sprintf
 addiu A0, SP, 0x20
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 2
li    A1, 4610
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
j     func_8010B01C
       NOP
L8010AF9C:
lui   S0, hi(bank_coin_total)
addiu S0, S0, lo(bank_coin_total)
lh    A2, 0(S0)
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 addiu A2, A2, 5
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 2
li    A1, 0x1200
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage "I must ask for a deposit..."
 move  A3, R0
jal   0x800EC6C8
       NOP
lhu   V0, 0(S0)
addiu V0, V0, 5
jal   func_80108478
 sh    V0, 0(S0)
lb    A0, 0xf(S4)
jal   ShowPlayerCoinChange
 li    A1, -5
lb    A0, 0xf(S4)
li    A1, -5
func_8010B004:
jal   AdjustPlayerCoinsGradual
       NOP
jal   SleepProcess
 li    A0, 30
jal   0x800EC6A8
       NOP
func_8010B01C:
jal   0x800EC9DC
       NOP
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
jal   0x800DB884
 lb    A0, 0xf(S4)
jal   SleepProcess
 li    A0, 10
j     L8010B138
       NOP
L8010B04C:
lui   S0, hi(bank_coin_total)
addiu S0, S0, lo(bank_coin_total)
lh    A2, 0(S0)
beql  A2, R0, L8010B130
 li    A0, 2
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 addiu A0, SP, 0x20
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 2
li    A1, 0x1203
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage "Hooray! ... you get all the coins we've collected! ..."
 move  A3, R0
jal   0x800EC9DC
       NOP
jal   0x800EC6C8
       NOP
lb    A0, 0xf(S4)
jal   ShowPlayerCoinChange
 lh    A1, 0(S0)
lb    A0, 0xf(S4)
jal   AdjustPlayerCoinsGradual
 lh    A1, 0(S0)
jal   func_80108478
 sh    R0, 0(S0)
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800ECC0C
 addiu A0, A0, 0x18
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
lb    A1, 0xf(S4)
jal   0x8004ACE0
 li    A0, 628
jal   SleepProcess
 li    A0, 30
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
jal   0x800EC6A8
       NOP
jal   0x800EC9DC
       NOP
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
j     L8010B138
       NOP
L8010B130:
jal   0x800EC590
 li    A1, 0x1204 ; "You won ... we don't have even 1 coin"
L8010B138:
jal   PlaySound
 li    A0, 277
move  A0, S2
li    A1, -1
jal   0x800D9CE8
 li    A2, 4
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui A1, 0x3f99
jal   0x8001C92C
 ori A1, A1, 0x999a
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   V1, hi(CORE_800D03F8)
lw    V1, lo(CORE_800D03F8)(V1)
sll   V0, A0, 1
addu  V0, V0, A0
sll   V0, V0, 6
addu  V0, V0, V1
lbu   V1, 2(V0)
lui   A1, hi(CORE_800CCF58)
lw    A1, lo(CORE_800CCF58)(A1)
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 3
addu  V0, V0, A1
lh    V0, 2(V0)
mtc1  V0, F4
      NOP
cvt.s.w F4, F4
mfc1  A1, F4
jal   0x8001C6A8
       NOP
L8010B1C4:
jal   0x800D9E80
 move  A0, S2
andi  V0, V0, 0xffff
bnez  V0, L8010B1E8
       NOP
jal   SleepVProcess
       NOP
j     L8010B1C4
       NOP
L8010B1E8:
jal   0x800D9B24
 move  A0, S3
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F12
jal   0x8008EF20
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
div.s F22, F2, F0
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F20
li    AT, 0x3E4C0000 ; 0.199219
ori AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F28
      NOP
L8010B244:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S2)
add.s F20, F20, F30
c.lt.s F20, F28
      NOP
bc1t  L8010B244
       NOP
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F20
li    AT, 0x3E4C0000 ; 0.199219
ori AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
mtc1  R0, F28
      NOP
L8010B2D4:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S2)
sub.s F20, F20, F30
c.lt.s F28, F20
      NOP
bc1t  L8010B2D4
       NOP
sw    R0, 0x28(S2)
sw    R0, 0x24(S2)
sw    R0, 0x2c(S2)
jal   0x800D9B54
 move  A0, S2
jal   0x800D9B54
 move  A0, S3
lw    RA, 0x68(SP)
lw    S5, 0x64(SP)
lw    S4, 0x60(SP)
lw    S3, 0x5c(SP)
lw    S2, 0x58(SP)
lw    S1, 0x54(SP)
lw    S0, 0x50(SP)
ldc1  F30, 0x98(SP)
ldc1  F28, 0x90(SP)
ldc1  F26, 0x88(SP)
ldc1  F24, 0x80(SP)
ldc1  F22, 0x78(SP)
ldc1  F20, 0x70(SP)
jr    RA
 addiu SP, SP, 0xa0

func_8010B394:
move  A3, A0
move  A1, R0
lui   A2, hi(D_8011FB54)
lw    A2, lo(D_8011FB54)(A2)
lui   V0, hi(D_8011FB4C)
lw    V0, lo(D_8011FB4C)(V0)
lui   A0, hi(D_8011E0A0)
addiu A0, A0, lo(D_8011E0A0)
sll   V1, V0, 3
addu  V1, V1, V0
sll   V1, V1, 2
subu  V1, V1, V0
addu  V1, V1, A0
lui   A0, hi(D_8011FB50)
lw    A0, lo(D_8011FB50)(A0)
sll   V0, A0, 3
subu  V0, V0, A0
addu  V1, V0, V1
addu  V0, A2, A1
L8010B3E0:
lbu   V0, 0(V0)
beqz  V0, L8010B400
 addu  V0, V1, A1
lb    V0, 0(V0)
bnel  V0, A3, L8010B404
 addiu A1, A1, 1
j     L8010B414
 move  V0, A1
L8010B400:
addiu A1, A1, 1
L8010B404:
slti  V0, A1, 7
bnez  V0, L8010B3E0
 addu  V0, A2, A1
li    V0, -1
L8010B414:
jr    RA
       NOP

func_8010B41C:
move  A1, R0
lui   V0, hi(D_8011FB4C)
lw    V0, lo(D_8011FB4C)(V0)
lui   A0, hi(D_8011E0A0)
addiu A0, A0, lo(D_8011E0A0)
sll   V1, V0, 3
addu  V1, V1, V0
sll   V1, V1, 2
subu  V1, V1, V0
addu  V1, V1, A0
lui   A0, hi(D_8011FB50)
lw    A0, lo(D_8011FB50)(A0)
sll   V0, A0, 3
subu  V0, V0, A0
addu  V1, V0, V1
li    A0, -1
addu  V0, V1, A1
L8010B460:
lb    V0, 0(V0)
beq   V0, A0, L8010B47C
       NOP
addiu A1, A1, 1
slti  V0, A1, 7
bnezl V0, L8010B460
 addu  V0, V1, A1
L8010B47C:
jr    RA
 move  V0, A1

D_8010B484:
addiu SP, SP, -0x50
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F30, 0x48(SP)
sdc1  F28, 0x40(SP)
sdc1  F26, 0x38(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
jal   0x8004EE68
 sdc1  F20, 0x20(SP)
lw    S1, 0x8c(V0)
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   GetPlayerStruct
 sll   S0, S1, 0x10
li    A0, -1
jal   0x800FF900
 li    A1, 2
jal   PlaySound
 li    A0, 346
mtc1  R0, F20
li    S2, 0x3FC00000 ; 1.500000
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F24
li    AT, 0x3F000000 ; 0.500000
mtc1  AT, F30
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
li    AT, 0x43340000 ; 180.000000
mtc1  AT, F26
      NOP
L8010B508:
jal   0x8008EF20
 mov.s F12, F20
mtc1  S2, F2
      NOP
mul.s F0, F0, F2
add.s F22, F0, F24
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F30
sra   A0, S0, 0x10
mfc1  A2, F22
sub.s F0, F24, F0
mfc1  A3, F0
      NOP
jal   0x800551D8
 move  A1, R0
jal   SleepVProcess
       NOP
add.s F20, F20, F28
c.lt.s F20, F26
      NOP
bc1t  L8010B508
       NOP
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F0
      NOP
c.lt.s F20, F0
      NOP
      NOP
bc1f  L8010B610
 sll   A0, S1, 0x10
li    S2, 0x3F000000 ; 0.500000
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F24
li    AT, 0x3E800000 ; 0.250000
mtc1  AT, F30
sll   S0, S1, 0x10
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F26
      NOP
L8010B5B0:
jal   0x8008EF20
 mov.s F12, F20
mtc1  S2, F2
      NOP
mul.s F0, F0, F2
add.s F22, F0, F24
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F30
sra   A0, S0, 0x10
mfc1  A2, F22
sub.s F0, F24, F0
mfc1  A3, F0
      NOP
jal   0x800551D8
 move  A1, R0
jal   SleepVProcess
       NOP
add.s F20, F20, F28
c.lt.s F20, F26
      NOP
      NOP
bc1t  L8010B5B0
 sll   A0, S1, 0x10
L8010B610:
sra   A0, A0, 0x10
move  A1, R0
lui   A2, 0x3f80
jal   0x800551D8
 move  A3, A2
jal   EndProcess
 move  A0, R0
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F30, 0x48(SP)
ldc1  F28, 0x40(SP)
ldc1  F26, 0x38(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x50

__PP64_INTERNAL_ITEM_SHOP_EVENT:
item_shop_event:
addiu SP, SP, -0xe8
sw    RA, 0xb4(SP)
sw    FP, 0xb0(SP)
sw    S7, 0xac(SP)
sw    S6, 0xa8(SP)
sw    S5, 0xa4(SP)
sw    S4, 0xa0(SP)
sw    S3, 0x9c(SP)
sw    S2, 0x98(SP)
sw    S1, 0x94(SP)
sw    S0, 0x90(SP)
sdc1  F30, 0xe0(SP)
sdc1  F28, 0xd8(SP)
sdc1  F26, 0xd0(SP)
sdc1  F24, 0xc8(SP)
sdc1  F22, 0xc0(SP)
sdc1  F20, 0xb8(SP)
jal   GetPlayerStruct
 li    A0, -1
sw    V0, 0x74(SP)
move  S5, R0
move  S3, R0
move  S4, R0
sw    R0, 0x7c(SP)
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
lw    T5, 0x74(SP)
lbu   A0, 0xf(T5)
sll   A0, A0, 0x18
sra   A0, A0, 0x18
lbu   A1, 0x10(T5)
sll   A1, A1, 0x18
sra   A1, A1, 0x18
andi  A0, A0, 0xffff
jal   GetAbsSpaceIndexFromChainSpaceIndex
 andi  A1, A1, 0xffff
sll   V0, V0, 0x10
sra   V1, V0, 0x10
li    V0, ${V[0]}
beq   V1, V0, L8010B718
 li    V0, ${V[1]}
beq   V1, V0, L8010B744
 li    T5, ${D[1]}
j     L8010B770
 li    T5, -1
L8010B718:
li    T5, ${D[0]}
sh    T5, 0x6e(SP)
jal   GetSpaceData
 li    A0, ${D[0]}
move  S5, V0
jal   GetSpaceData
 li    A0, ${V[0]}
lui   AT, hi(D_8011E1D8)
sw    R0, lo(D_8011E1D8)(AT)
j     L8010B774
 move  S3, V0
L8010B744:
sh    T5, 0x6e(SP)
jal   GetSpaceData
 li    A0, ${D[1]}
move  S5, V0
jal   GetSpaceData
 li    A0, ${V[1]}
move  S3, V0
li    V0, 1
lui   AT, hi(D_8011E1D8)
j     L8010B774
 sw    V0, lo(D_8011E1D8)(AT)
L8010B770:
sh    T5, 0x6e(SP)
L8010B774:
lhu   T5, 0x6e(SP)
sll   V0, T5, 0x10
sra   A2, V0, 0x10
li    V0, -1
beq   A2, V0, L8010B79C
 li    A0, -1
jal   0x800ED20C
 li    A1, 8
jal   SleepProcess
 li    A0, 8
L8010B79C:
lui   A0, hi(current_player_index)
jal   0x800DBEC0
 lb    A0, lo(current_player_index)(A0)
lui   V1, hi(CORE_800CD0AC)
lh    V1, lo(CORE_800CD0AC)(V1)
beqz  V1, L8010B7C8
 li    V0, 1
beq   V1, V0, L8010B7DC
 move  S6, R0
j     L8010B7DC
 li    S6, 1
L8010B7C8:
jal   RNGPercentChance
 li    A0, 66
sll   V0, V0, 0x10
sltiu V0, V0, 1
move  S6, V0
L8010B7DC:
move  V0, S6
beqz  V0, L8010B7EC
 li    FP, 3
li    FP, 5
L8010B7EC:
lhu   T5, 0x6e(SP)
sll   V0, T5, 0x10
sra   V0, V0, 0x10
li    V1, -1
beq   V0, V1, L8010BB6C
 move  S2, S6
subu  S0, R0, S6
andi  S0, S0, 0x31
ori   S0, S0, 0x30
jal   PlaySound
 li    A0, 276 ; raw 0x50, shop appearing noise
andi  A0, S0, 0xff
jal   0x800D90C8
 move  A1, R0
move  S4, V0
jal   0x800D9714
 move  A0, S4
addiu S0, SP, 0x48
addiu S1, S5, 8
move  A0, S0
addiu A1, S3, 8
jal   midpoint
 move  A2, S1
jal   0x800D88E8
 move  A0, S0
addiu A0, S4, 0x18
jal   0x80089A20
 move  A1, S0
sw    R0, 0x28(S4)
move  A0, S4
li    A1, -1
jal   0x800D9CE8
 li    A2, 1
jal   0x800D9A40
 move  A0, S4
addiu A0, S4, 0xc
jal   0x80089A20
 move  A1, S1
beqz  S2, L8010B898
 li    A0, 57
lui   A1, hi(D_8011E1D0)
j     L8010B8A4
 addiu A1, A1, lo(D_8011E1D0)
L8010B898:
li    A0, 27
lui   A1, hi(D_8011E1C8)
addiu A1, A1, lo(D_8011E1C8)
L8010B8A4:
jal   0x800D90C8
       NOP
sw    V0, 0x7c(SP)
jal   0x800D9714
 lw    A0, 0x7c(SP)
lw    T5, 0x7c(SP)
addiu A0, T5, 0x18
jal   0x80089A20
 addiu A1, SP, 0x48
lw    T5, 0x7c(SP)
addiu A0, T5, 0xc
jal   0x80089A20
 addiu A1, S5, 8
li    AT, 0x3F990000 ; 1.195312
ori   AT, AT, 0x999a
mtc1  AT, F0
lw    T5, 0x7c(SP)
swc1  F0, 0x2c(T5)
swc1  F0, 0x24(T5)
swc1  F0, 0x28(T5)
jal   0x800D9B24
 lw    A0, 0x7c(SP)
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F12
jal   0x8008EF20
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
div.s F22, F2, F0
mtc1  R0, F20
li    AT, 0x3E4C0000 ; 0.199219
ori   AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori   AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F28
      NOP
L8010B94C:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S4)
add.s F20, F20, F30
c.lt.s F20, F28
      NOP
bc1t  L8010B94C
       NOP
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F0
      NOP
c.lt.s F0, F20
      NOP
bc1f  L8010BA54
       NOP
li    AT, 0x3E4C0000 ; 0.199219
ori   AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori   AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F28
      NOP
L8010B9F4:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S4)
sub.s F20, F20, F30
c.lt.s F28, F20
      NOP
bc1t  L8010B9F4
       NOP
L8010BA54:
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x2c(S4)
swc1  F0, 0x24(S4)
swc1  F0, 0x28(S4)
jal   0x800D9A40
 lw    A0, 0x7c(SP)
move  A0, S4
li    A1, -1
jal   0x800D9CE8
 move  A2, R0
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   A1, 0x3f99
jal   0x8001C92C
 ori   A1, A1, 0x999a
L8010BA9C:
jal   0x800D9E0C
 move  A0, S4
andi  V0, V0, 0xffff
bnez  V0, L8010BAC0
 move  A1, R0
jal   SleepVProcess
       NOP
j     L8010BA9C
       NOP
L8010BAC0:
lw    A0, 0x7c(SP)
jal   0x800D9CE8
 move  A2, R0
move  V0, S6
bnez  V0, L8010BB34
 li    A0, 672
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
sll   V0, A0, 3
subu  V0, V0, A0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slti  V0, V0, 5
bnezl V0, L8010BB34
 li    A0, 666
jal   PlayerHasEmptyItemSlot
       NOP
li    V1, -1
beq   V0, V1, L8010BB34
 li    A0, 666
lui   V1, hi(current_turn)
lb    V1, lo(current_turn)(V1)
lui   V0, hi(total_turns)
lb    V0, lo(total_turns)(V0)
bne   V1, V0, L8010BB34
 li    A0, 664
li    A0, 666
L8010BB34:
jal   PlaySound
       NOP
L8010BB3C:
jal   0x800D9E0C
 lw    A0, 0x7c(SP)
andi  V0, V0, 0xffff
bnez  V0, L8010BB60
 li    A1, -1
jal   SleepVProcess
       NOP
j     L8010BB3C
       NOP
L8010BB60:
lw    A0, 0x7c(SP)
jal   0x800D9CE8
 li    A2, 2
L8010BB6C:
lui   V1, hi(current_turn)
lb    V1, lo(current_turn)(V1)
lui   V0, hi(total_turns)
lb    V0, lo(total_turns)(V0)
bne   V1, V0, L8010BBA0
 sll   V0, S6, 2
lui   A1, hi(item_shop_closed_messages)
addu  A1, A1, V0
lw    A1, lo(item_shop_closed_messages)(A1)
jal   0x800EC590
 move  A0, FP
j     L8010C684
       NOP
L8010BBA0:
lui   A0, hi(current_player_index)
jal   PlayerHasEmptyItemSlot
 lb    A0, lo(current_player_index)(A0)
li    V1, -1
bne   V0, V1, L8010BBD4
 sll   V0, S6, 2
lui   A1, hi(item_shop_already_have_three_items_messages)
addu  A1, A1, V0
lw    A1, lo(item_shop_already_have_three_items_messages)(A1)
jal   0x800EC590
 move  A0, FP
j     L8010C684
       NOP
L8010BBD4:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
slti  V0, V0, 5
beqz  V0, L8010BC1C
 sll   V0, S6, 2
lui   A1, hi(item_shop_not_enough_coins_messages)
addu  A1, A1, V0
lw    A1, lo(item_shop_not_enough_coins_messages)(A1)
jal   0x800EC590
 move  A0, FP
j     L8010C684
       NOP
L8010BC1C:
lui   A1, hi(item_shop_prompt_to_buy_messages)
addu  A1, A1, V0
lw    A1, lo(item_shop_prompt_to_buy_messages)(A1)
jal   0x800EC628
 move  A0, FP
jal   func_80107408
       NOP
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
li    V0, 1
beq   S0, V0, L8010C620
 slti  V0, S0, 2
beql  V0, R0, L8010BC6C
 li    V0, 2
beqz  S0, L8010BC7C
       NOP
j     L8010C684
       NOP
L8010BC6C:
beq   S0, V0, L8010C640
 li    V1, -1
j     L8010C684
       NOP
L8010BC7C:
jal   0x800FB578
 li    A0, -1
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   0x800EE9C0
 move  S1, V0
move  A0, S6
lui   A1, hi(D_8011E088)
addiu A1, A1, lo(D_8011E088)
sll   V1, A0, 1
addu  V1, V1, A0
sll   V1, V1, 2
addu  V1, V1, A1
sll   A0, S1, 2
addu  A0, A0, V1
addu  A0, A0, V0
lbu   S3, 0(A0)
move  S2, R0
move  A1, R0
move  V1, S6
lui   A0, hi(D_8011E0A0)
addiu A0, A0, lo(D_8011E0A0)
sll   V0, V1, 3
addu  V0, V0, V1
sll   V0, V0, 2
subu  V0, V0, V1
addu  V0, V0, A0
sll   V1, S3, 3
subu  V1, V1, S3
addu  V1, V1, V0
li    A3, -1
addiu A0, SP, 0x20
li    A2, 1
addu  V0, V1, A1
L8010BD04:
lb    V0, 0(V0)
beq   V0, A3, L8010BD20
 slti  V0, V0, 6
beqz  V0, L8010BD30
 addu  V0, A0, A1
sb    A2, 0(V0)
addiu S2, S2, 1
L8010BD20:
addiu A1, A1, 1
slti  V0, A1, 7
bnez  V0, L8010BD04
 addu  V0, V1, A1
L8010BD30:
slti  V0, A1, 7
beqz  V0, L8010BDF8
 move  S1, R0
addiu T3, SP, 0x20
li    T1, 1
addiu T0, SP, 0x30
move  V1, S6
lui   A0, hi(D_8011E0A0)
addiu A0, A0, lo(D_8011E0A0)
sll   V0, V1, 3
addu  V0, V0, V1
sll   V0, V0, 2
subu  V0, V0, V1
addu  V0, V0, A0
sll   V1, S3, 3
subu  V1, V1, S3
addu  T2, V1, V0
li    T4, -1
L8010BD78:
addu  A3, T3, A1
sb    T1, 0(A3)
sll   V0, S1, 2
addu  A2, T0, V0
sb    R0, 0(A2)
addu  V0, T2, A1
lb    V0, 0(V0)
beql  V0, T4, L8010BDEC
 addiu A1, A1, 1
lui   A0, hi(CORE_80100F94)
addu  A0, A0, V0
lbu   A0, lo(CORE_80100F94)(A0)
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slt   V0, V0, A0
beqz  V0, L8010BDDC
 sll   V0, S1, 2
sb    R0, 0(A3)
sb    T1, 0(A2)
L8010BDDC:
addu  V0, T0, V0
sb    R0, 1(V0)
addiu S2, S2, 1
addiu A1, A1, 1
L8010BDEC:
slti  V0, A1, 7
bnez  V0, L8010BD78
 addiu S1, S1, 1
L8010BDF8:
slti  V0, A1, 9
beqz  V0, L8010BE20
 addiu V1, SP, 0x20
li    A0, 1
addu  V0, V1, A1
L8010BE0C:
sb    A0, 0(V0)
addiu A1, A1, 1
slti  V0, A1, 9
bnez  V0, L8010BE0C
 addu  V0, V1, A1
L8010BE20:
lui   V1, hi(item_shop_purchase_selection_messages)
addiu V1, V1, lo(item_shop_purchase_selection_messages)
sll   V0, S3, 3
addu  V0, V0, V1
move  S0, S6
sll   V1, S0, 2
addu  V1, V1, V0
addiu V0, SP, 0x38
sw    V0, 0x10(SP)
addiu V0, SP, 0x3c
sw    V0, 0x14(SP)
addiu V0, SP, 0x40
sw    V0, 0x18(SP)
move  A0, FP
lw    A1, 0(V1)
addiu A2, SP, 0x30
jal   0x800EC8EC ; ShowMessage to select item to buy
 addiu A3, SP, 0x34
jal   0x800ECAA8
 move  A0, R0
lui   AT, hi(D_8011FB4C)
sw    S0, lo(D_8011FB4C)(AT)
lui   AT, hi(D_8011FB50)
sw    S3, lo(D_8011FB50)(AT)
addiu A0, SP, 0x20
lui   AT, hi(D_8011FB54)
jal   func_80107174
 sw    A0, lo(D_8011FB54)(AT)
jal   0x800EC6C8
 move  S7, V0
jal   0x800EC6EC
       NOP
bne   S7, S2, L8010BED0
 addiu V0, S2, 1
lui   AT, hi(CORE_800D037C)
jal   0x800E4A6C
 sh    R0, lo(CORE_800D037C)(AT)
lui   A0, hi(current_player_index)
jal   0x800E44E4
 lb    A0, lo(current_player_index)(A0)
li    V0, 1
lui   AT, hi(CORE_800D037C)
j     L8010BC7C
 sh    V0, lo(CORE_800D037C)(AT)
L8010BED0:
xor   V0, S7, V0
sltiu V0, V0, 1
nor   V1, R0, S7
sltiu V1, V1, 1
or    V0, V0, V1
bnez  V0, L8010BC1C
 sll   V0, S6, 2
lw    T5, 0x74(SP)
lw    FP, 0x24(T5)
move  S1, S6
lui   V1, hi(D_8011E0A0)
addiu V1, V1, lo(D_8011E0A0)
sll   V0, S1, 3
addu  V0, V0, S1
sll   V0, V0, 2
subu  V0, V0, S1
addu  V0, V0, V1
sll   S0, S3, 3
subu  S0, S0, S3
addu  S0, S0, V0
addu  S0, S0, S7
lb    V0, 0(S0)
lui   A1, hi(CORE_80100F94)
addu  A1, A1, V0
lbu   A1, lo(CORE_80100F94)(A1)
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   ShowPlayerCoinChange
 subu  A1, R0, A1
lb    V0, 0(S0)
lui   A1, hi(CORE_80100F94)
addu  A1, A1, V0
lbu   A1, lo(CORE_80100F94)(A1)
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   AdjustPlayerCoinsGradual
 subu  A1, R0, A1
jal   SleepProcess
 li    A0, 30
lb    V1, 0(S0)
li    V0, 19
beq   V1, V0, L8010BFE8
 addiu S5, S1, 0x13
lui   A0, hi(current_player_index)
jal   PlayerHasEmptyItemSlot
 lb    A0, lo(current_player_index)(A0)
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   A0, V1, 3
subu  A0, A0, V1
sll   A0, A0, 3
lui   V1, hi(p1_item1)
addiu V1, V1, lo(p1_item1)
addu  A0, A0, V1
addu  A0, A0, V0
move  V0, S6
lui   A1, hi(D_8011E0A0)
addiu A1, A1, lo(D_8011E0A0)
sll   V1, V0, 3
addu  V1, V1, V0
sll   V1, V1, 2
subu  V1, V1, V0
addu  V1, V1, A1
sll   V0, S3, 3
subu  V0, V0, S3
addu  V0, V0, V1
addu  V0, V0, S7
lbu   V1, 0(V0)
sb    V1, 0(A0)
lb    S5, 0(V0)
L8010BFE8:
li    A0, 1
jal   0x8005279C
 li    A1, 5
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x5c(SP)
sll   V0, S5, 2
lui   A0, hi(CORE_8010197C)
addu  A0, A0, V0
lw    A0, lo(CORE_8010197C)(A0)
jal   ReadMainFS
 move  S1, R0
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sh    V0, 0x66(SP)
jal   FreeMainFS
 move  A0, S0
lw    S0, 0x5c(SP)
lhu   T5, 0x66(SP)
sll   A2, T5, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 10
move  A0, S0
move  A1, R0
jal   0x800550F4
 move  A2, R0
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 6156
move  A0, S0
move  A1, R0
li    A2, 160
jal   0x80054904
 li    A3, 90
move  A0, S0
move  A1, R0
jal   0x80055458
 move  A2, R0
addiu S0, SP, 0x48
jal   0x800ECC0C
 move  A0, S0
lw    T5, 0x74(SP)
lw    A2, 0x24(T5)
addiu A2, A2, 0x18
move  A0, A2
move  A1, S0
jal   0x800ED128
 li    A3, 10
jal   PlaySound
 li    A0, 25
lw    T5, 0x5c(SP)
sll   S0, T5, 0x10
sll   A2, S1, 1
L8010C0E0:
addu  A2, A2, S1
sll   A2, A2, 3
addu  A2, A2, S1
sra   A0, S0, 0x10
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S1, S1, 1
slti  V0, S1, 0xa
bnez  V0, L8010C0E0
 sll   A2, S1, 1
lw    A0, 0x5c(SP)
move  A1, R0
jal   0x80055458
 li    A2, 256
move  V0, S6
lui   A0, hi(D_8011E0A0)
addiu A0, A0, lo(D_8011E0A0)
sll   V1, V0, 3
addu  V1, V1, V0
sll   V1, V1, 2
subu  V1, V1, V0
addu  V1, V1, A0
sll   V0, S3, 3
subu  V0, V0, S3
addu  V0, V0, V1
addu  V0, V0, S7
lb    V1, 0(V0)
li    V0, 19
bne   V1, V0, L8010C598
 move  S7, S6
lui   V0, hi(D_8011E0E8)
addiu V0, V0, lo(D_8011E0E8)
sll   V1, S7, 1
addu  V1, V1, S7
sw    V1, 0x84(SP)
sll   V1, V1, 2
addu  V1, V1, V0
sw    V1, 0x8c(SP)
L8010C180:
lui   A0, hi(current_player_index)
jal   PlayerHasEmptyItemSlot
 lb    A0, lo(current_player_index)(A0)
li    T5, -1
beq   V0, T5, L8010C578
 li    V1, -1
jal   0x800FB578
 li    A0, -1
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   0x800EE9C0
 move  S0, V0
sll   S0, S0, 2
lw    T5, 0x8c(SP)
addu  S0, S0, T5
addu  S0, S0, V0
lbu   S0, 0(S0)
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F12
      NOP
jal   0x800EEF80
 move  S1, R0
move  A0, V0
lw    T5, 0x84(SP)
sll   V1, T5, 3
addu  V1, V1, S7
sll   V1, V1, 1
lui   T5, hi(D_8011E100)
addiu T5, T5, lo(D_8011E100)
addu  V1, V1, T5
sll   V0, S0, 2
addu  V0, V0, S0
sll   V0, V0, 1
addu  V1, V0, V1
addu  V0, V1, S1
L8010C20C:
lb    V0, 0(V0)
slt   V0, A0, V0
bnez  V0, L8010C22C
       NOP
addiu S1, S1, 1
slti  V0, S1, 0xa
bnez  V0, L8010C20C
 addu  V0, V1, S1
L8010C22C:
lui   V0, hi(D_8011E164)
addiu V0, V0, lo(D_8011E164)
sll   V1, S7, 2
addu  V1, V1, S7
sll   V1, V1, 1
addu  V1, V1, V0
addu  V1, V1, S1
lbu   S5, 0(V1)
lhu   T5, 0x6e(SP)
sll   V0, T5, 0x10
sra   V0, V0, 0x10
li    T5, -1
beq   V0, T5, L8010C270
 li    A0, 21
li    A1, 160
j     L8010C284
 li    A2, 1
L8010C270:
lhu   V0, 0xa(FP)
ori   V0, V0, 0x10
sh    V0, 0xa(FP)
li    A1, 160
move  A2, R0
L8010C284:
jal   0x800E210C
 li    S0, 30
move  S1, V0
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
lui   AT, hi(CORE_800C9520)
addu  AT, AT, V0
lhu   V0, lo(CORE_800C9520)(AT)
andi  V0, V0, 0x8000
bnez  V0, L8010C330
       NOP
lui   S3, hi(CORE_800C9520)
addiu S3, S3, lo(CORE_800C9520)
L8010C2D4:
jal   PlayerIsCPU
 li    A0, -1
beqz  V0, L8010C2F0
 li    T5, -1
addiu S0, S0, -1
beq   S0, T5, L8010C330
       NOP
L8010C2F0:
jal   SleepVProcess
       NOP
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
lhu   V0, 0(V0)
andi  V0, V0, 0x8000
beqz  V0, L8010C2D4
       NOP
L8010C330:
jal   0x800E21F4
 move  A0, S1
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
li    A1, 2
jal   0x800F2304
 move  A2, R0
lui   A1, 0x4000
lui   A2, 0xbe99
ori   A2, A2, 0x999a
jal   0x800EE688
 move  A0, FP
jal   SleepProcess
 li    A0, 5
lui   A0, hi(D_8010B484)
addiu A0, A0, lo(D_8010B484)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
lw    T5, 0x5c(SP)
sw    T5, 0x8c(V0)
jal   0x800EE6C0
 move  A0, FP
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
li    A0, 1
jal   0x8005279C
 li    A1, 5
sll   V0, V0, 0x10
sra   S3, V0, 0x10
sll   V0, S5, 2
lui   A0, hi(CORE_8010197C)
addu  A0, A0, V0
lw    A0, lo(CORE_8010197C)(A0)
jal   ReadMainFS
 move  S1, R0
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   S6, V0, 0x10
jal   FreeMainFS
 move  A0, S0
move  S0, S3
move  A0, S0
move  A1, R0
move  A2, S6
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 11
move  A0, S0
move  A1, R0
jal   0x800550F4
 move  A2, R0
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 4096
move  A0, S0
move  A1, R0
li    A2, 160
jal   0x80054904
 li    A3, 90
move  A0, S0
move  A1, R0
jal   0x80055458
 move  A2, R0
addiu S0, SP, 0x48
jal   0x800ECC0C
 move  A0, S0
lw    T5, 0x74(SP)
lw    A2, 0x24(T5)
addiu A2, A2, 0x18
move  A0, A2
move  A1, S0
jal   0x800ED128
 li    A3, 10
li    S2, 90
mtc1  R0, F20
move  S0, S3
li    AT, 0x3DCC0000 ; 0.099609
ori   AT, AT, 0xcccd
mtc1  AT, F22
L8010C494:
sll   A3, S2, 0x10
move  A0, S0
move  A1, R0
li    A2, 160
jal   0x80054904
 sra   A3, A3, 0x10
sll   A2, S1, 1
addu  A2, A2, S1
sll   A2, A2, 3
addu  A2, A2, S1
move  A0, S0
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
move  A0, S0
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x800551D8
 move  A1, R0
jal   SleepVProcess
 addiu S1, S1, 1
addiu S2, S2, -3
slti  V0, S1, 0xa
bnez  V0, L8010C494
 add.s F20, F20, F22
move  S0, S3
move  A0, S0
move  A1, R0
lui   A2, 0x3f80
jal   0x800551D8
 move  A3, A2
move  A0, S0
move  A1, R0
jal   0x80055458
 li    A2, 256
jal   SleepProcess
 li    A0, 10
lui   A0, hi(current_player_index)
jal   PlayerHasEmptyItemSlot
 lb    A0, lo(current_player_index)(A0)
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
sb    S5, 0(V1)
jal   0x800525C8
 move  A0, S0
jal   FreeGraphics
 move  A0, S6
j     L8010C180
       NOP
L8010C578:
lhu   T5, 0x6e(SP)
sll   V0, T5, 0x10
sra   V0, V0, 0x10
bne   V0, V1, L8010C598
       NOP
lhu   V0, 0xa(FP)
andi  V0, V0, 0xffef
sh    V0, 0xa(FP)
L8010C598:
jal   SleepProcess
 li    A0, 5
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
jal   SleepProcess
 li    A0, 5
lui   A1, hi(current_player_index)
lb    A1, lo(current_player_index)(A1)
jal   0x8004ACE0
 li    A0, 628
jal   SleepProcess
 li    A0, 20
jal   SleepVProcess
       NOP
li    V0, 2
sw    V0, 0x10(SP)
li    A0, -1
li    A1, -1
move  A2, R0
jal   0x800F2388
 li    A3, 5
jal   SleepProcess
 li    A0, 10
lw    A0, 0x5c(SP)
jal   0x800525C8
       NOP
lhu   T5, 0x66(SP)
sll   A0, T5, 0x10
jal   FreeGraphics
 sra   A0, A0, 0x10
j     L8010C684
       NOP
L8010C620:
sll   V0, S6, 2
lui   A1, hi(item_shop_cancelled_purchase_messages)
addu  A1, A1, V0
lw    A1, lo(item_shop_cancelled_purchase_messages)(A1)
jal   0x800EC590
 move  A0, FP
j     L8010C684
       NOP
L8010C640:
lhu   T5, 0x6e(SP)
sll   V0, T5, 0x10
sra   V0, V0, 0x10
bne   V0, V1, L8010C674
       NOP
jal   func_80106FE8
       NOP
li    V0, 1
lui   AT, hi(CORE_800CB99C)
jal   0x80049FB8
 sb    V0, lo(CORE_800CB99C)(AT)
j     L8010BC1C
 sll   V0, S6, 2
L8010C674:
jal   __PP64_INTERNAL_VIEW_MAP
       NOP
j     L8010BC1C
 sll   V0, S6, 2
L8010C684:
lhu   T5, 0x6e(SP)
sll   V0, T5, 0x10
sra   V0, V0, 0x10
li    V1, -1
beq   V0, V1, L8010C8B8
       NOP
jal   PlaySound
 li    A0, 277
move  A0, S4
li    A1, -1
jal   0x800D9CE8
 li    A2, 4
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   A1, 0x3f99
jal   0x8001C92C
 ori  A1, A1, 0x999a
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   V1, hi(CORE_800D03F8)
lw    V1, lo(CORE_800D03F8)(V1)
sll   V0, A0, 1
addu  V0, V0, A0
sll   V0, V0, 6
addu  V0, V0, V1
lbu   V1, 2(V0)
lui   A1, hi(CORE_800CCF58)
lw    A1, lo(CORE_800CCF58)(A1)
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 3
addu  V0, V0, A1
lh    V0, 2(V0)
mtc1  V0, F4
      NOP
cvt.s.w F4, F4
mfc1  A1, F4
jal   0x8001C6A8
       NOP
L8010C728:
jal   0x800D9E80
 move  A0, S4
andi  V0, V0, 0xffff
bnez  V0, L8010C74C
       NOP
jal   SleepVProcess
       NOP
j     L8010C728
       NOP
L8010C74C:
jal   0x800D9B24
 lw    A0, 0x7c(SP)
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F12
jal   0x8008EF20
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
div.s F22, F2, F0
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F20
li    AT, 0x3E4C0000 ; 0.199219
ori AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F28
      NOP
L8010C7A8:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S4)
add.s F20, F20, F30
c.lt.s F20, F28
      NOP
bc1t  L8010C7A8
       NOP
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F20
li    AT, 0x3E4C0000 ; 0.199219
ori AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
mtc1  R0, F28
      NOP
L8010C838:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S4)
sub.s F20, F20, F30
c.lt.s F28, F20
      NOP
bc1t  L8010C838
       NOP
sw    R0, 0x28(S4)
sw    R0, 0x24(S4)
sw    R0, 0x2c(S4)
jal   0x800D9B54
 move  A0, S4
lw    A0, 0x7c(SP)
jal   0x800D9B54
       NOP
L8010C8B8:
lui   A0, hi(current_player_index)
jal   0x800DB884
 lb    A0, lo(current_player_index)(A0)
jal   SleepProcess
 li    A0, 10
lw    RA, 0xb4(SP)
lw    FP, 0xb0(SP)
lw    S7, 0xac(SP)
lw    S6, 0xa8(SP)
lw    S5, 0xa4(SP)
lw    S4, 0xa0(SP)
lw    S3, 0x9c(SP)
lw    S2, 0x98(SP)
lw    S1, 0x94(SP)
lw    S0, 0x90(SP)
ldc1  F30, 0xe0(SP)
ldc1  F28, 0xd8(SP)
ldc1  F26, 0xd0(SP)
ldc1  F24, 0xc8(SP)
ldc1  F22, 0xc0(SP)
ldc1  F20, 0xb8(SP)
jr    RA
 addiu SP, SP, 0xe8

func_8010C914:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
jal   0x800D9AA4
 move  S2, A0
move  S1, R0
L8010C934:
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
andi  S0, S1, 0xff
lh    A0, 0(V0)
jal   0x8001F9E4
 move  A1, S0
lw    V0, 0x40(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 move  A1, S0
jal   SleepVProcess
 addiu S1, S1, 0xc
slti  V0, S1, 0x100
bnez  V0, L8010C934
       NOP
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 li    A1, 255
lw    V0, 0x40(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 li    A1, 255
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_8010C9B4:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S2, A0
li    S1, 255
L8010C9D0:
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
andi  S0, S1, 0xff
lh    A0, 0(V0)
jal   0x8001F9E4
 move  A1, S0
lw    V0, 0x40(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 move  A1, S0
jal   SleepVProcess
 addiu S1, S1, -0xc
bgez  S1, L8010C9D0
       NOP
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 move  A1, R0
lw    V0, 0x40(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 move  A1, R0
jal   0x800D9B24
 move  A0, S2
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_8010CA54:
addiu SP, SP, -0x50
sw    RA, 0x38(SP)
sw    S7, 0x34(SP)
sw    S6, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
sdc1  F22, 0x48(SP)
sdc1  F20, 0x40(SP)
move  S3, A0
move  S6, R0
li    A0, 1
jal   0x8005279C
 li    A1, 5
move  S5, V0
lui A0, 0x13
jal   ReadMainFS
 ori A0, A0, 0x20e
move  S0, V0
jal   ImgPackParse
 move  A0, S0
move  S7, V0
jal   FreeMainFS
 move  A0, S0
sll   S0, S5, 0x10
sra   S0, S0, 0x10
sll   A2, S7, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 10
move  A0, S0
move  A1, R0
jal   0x800550F4
 move  A2, R0
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 4096
sll   V0, S3, 3
lui   AT, hi(D_8011E1EC)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E1EC)(AT)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E1F0)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E1F0)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
move  A0, S0
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   PlaySound
 li    A0, 308
move  S0, R0
sll   V0, S5, 0x10
sra   S2, V0, 0x10
sll   S1, S3, 3
L8010CB88:
mtc1  S0, F4
      NOP
cvt.s.w F4, F4
lui   AT, hi(D_8011E20C)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F4, F0
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S1
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E210)(AT)
mul.s F4, F4, F0
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E1F0)(AT)
add.s F4, F4, F0
trunc.w.s F0, F4
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S2
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
sll   A2, S0, 4
move  A0, S2
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0x11
bnez  V0, L8010CB88
 sll   A0, S5, 0x10
sra   A0, A0, 0x10
move  A1, R0
jal   0x80055458
 li    A2, 255
move  A0, S3
jal   PlayerHasItem
 li    A1, ITEM_BOO_REPELLANT
li    V1, -1
beq   V0, V1, L8010CC74
 li    A1, 16386
li    S6, 1
lui   A0, hi(D_801127D8)
addiu A0, A0, lo(D_801127D8)
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S3, 0x8c(V0)
L8010CC74:
bnez  S6, L8010CCA4
 sll   A0, S3, 0x10
sll   V1, S3, 3
subu  V1, V1, S3
sll   V1, V1, 3
lui   V0, hi(p1_stars)
addu  V0, V0, V1
lbu   V0, lo(p1_stars)(V0)
addiu V0, V0, -1
lui   AT, hi(p1_stars)
addu  AT, AT, V1
sb    V0, lo(p1_stars)(AT)
L8010CCA4:
sra   A0, A0, 0x10
jal   0x800FF900
 li    A1, 5
jal   PlaySound
 li    A0, 599
beqz  S6, L8010CCC4
 li    S2, 30
li    S2, 120
L8010CCC4:
beqz  S2, L8010CD9C
 move  S0, R0
sll   S1, S3, 3
li    AT, 0x41800000 ; 16.000000
mtc1  AT, F20
li    AT, 0x40800000 ; 4.000000
mtc1  AT, F22
sll   S4, S5, 0x10
sll   V1, S0, 1
L8010CCE8:
addu  V1, V1, S0
sll   V0, V1, 4
subu  V0, V0, V1
sll   V0, V0, 1
mtc1  V0, F12
      NOP
cvt.s.w F12, F12
jal   0x8008EF20
 addiu S0, S0, 1
lui   AT, hi(D_8011E210)
addu  AT, AT, S1
lwc1  F2, lo(D_8011E210)(AT)
mul.s F2, F2, F20
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S1
lwc1  F4, lo(D_8011E1F0)(AT)
add.s F2, F2, F4
mul.s F0, F0, F22
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E20C)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F0, F20
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S1
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
sra   A0, S4, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
jal   SleepVProcess
       NOP
slt   V0, S0, S2
bnez  V0, L8010CCE8
 sll   V1, S0, 1
L8010CD9C:
li    S0, 16
sll   V0, S5, 0x10
sra   S2, V0, 0x10
sll   S1, S3, 3
L8010CDAC:
mtc1  S0, F4
      NOP
cvt.s.w F4, F4
lui   AT, hi(D_8011E20C)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F4, F0
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S1
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E210)(AT)
mul.s F4, F4, F0
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E1F0)(AT)
add.s F4, F4, F0
trunc.w.s F0, F4
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S2
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
sll   A2, S0, 4
move  A0, S2
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S0, S0, -1
bgez  S0, L8010CDAC
 sll   A0, S5, 0x10
jal   0x800525C8
 sra   A0, A0, 0x10
sll   A0, S7, 0x10
jal   FreeGraphics
 sra   A0, A0, 0x10
sltiu V0, S6, 1
lw    RA, 0x38(SP)
lw    S7, 0x34(SP)
lw    S6, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
ldc1  F22, 0x48(SP)
ldc1  F20, 0x40(SP)
jr    RA
 addiu SP, SP, 0x50

D_8010CE9C:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
jal   0x800EC3E4
       NOP
jal   EndProcess
 move  A0, R0
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

func_8010CEC0:
addiu SP, SP, -0xb0
sw    RA, 0x94(SP)
sw    FP, 0x90(SP)
sw    S7, 0x8c(SP)
sw    S6, 0x88(SP)
sw    S5, 0x84(SP)
sw    S4, 0x80(SP)
sw    S3, 0x7c(SP)
sw    S2, 0x78(SP)
sw    S1, 0x74(SP)
sw    S0, 0x70(SP)
sdc1  F24, 0xa8(SP)
sdc1  F22, 0xa0(SP)
sdc1  F20, 0x98(SP)
move  S4, A0
sw    R0, 0x1c(SP)
li    A0, 1
jal   0x8005279C
 li    A1, 5
sh    V0, 0x26(SP)
lui A0, 0x13
jal   ReadMainFS
 ori A0, A0, 0x20e
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sh    V0, 0x2e(SP)
jal   FreeMainFS
 move  A0, S0
lhu   T0, 0x26(SP)
sll   S1, T0, 0x10
sra   S1, S1, 0x10
lhu   T0, 0x2e(SP)
sll   A2, T0, 0x10
move  A0, S1
move  A1, R0
sra   A2, A2, 0x10
jal   0x80055024
 move  A3, R0
move  A0, S1
move  A1, R0
jal   0x80055294
 li    A2, 10
move  A0, S1
move  A1, R0
jal   0x800550F4
 move  A2, R0
move  A0, S1
move  A1, R0
jal   0x800553A8
 li    A2, 4096
sll   S0, S4, 3
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E1EC)(AT)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E1F0)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S1
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
move  A0, S1
move  A1, R0
jal   0x80055458
 move  A2, R0
li    A0, 1
jal   0x8005279C
 li    A1, 5
sh    V0, 0x36(SP)
subu  S0, S0, S4
sll   S0, S0, 3
lui   V0, hi(p1_char)
addu  V0, V0, S0
lbu   V0, lo(p1_char)(V0)
sll   V0, V0, 2
lui   A0, hi(CORE_80101040)
addu  A0, A0, V0
lw    A0, lo(CORE_80101040)(A0)
jal   ReadMainFS
 move  S5, R0
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sh    V0, 0x3e(SP)
jal   FreeMainFS
 move  A0, S0
lhu   T0, 0x36(SP)
sll   V0, T0, 0x10
sra   S0, V0, 0x10
lhu   T0, 0x3e(SP)
sll   A2, T0, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 10
move  A0, S0
move  A1, R0
jal   0x800550F4
 li    A2, 1
andi  V0, S4, 1
beqz  V0, L8010D0A0
 move  A0, S0
move  A1, R0
j     L8010D0B4
 li    A2, 4097
L8010D0A0:
lhu   T0, 0x36(SP)
sll   A0, T0, 0x10
sra   A0, A0, 0x10
move  A1, R0
li    A2, 4096
L8010D0B4:
jal   0x800553A8
       NOP
move  A0, S4
jal   PlayerHasItem
 li    A1, ITEM_BOO_REPELLANT
li    V1, -1
beq   V0, V1, L8010D0E8
 move  A1, R0
lhu   T0, 0x36(SP)
sll   A0, T0, 0x10
sra   A0, A0, 0x10
jal   0x800553A8
 li    A2, 32768
L8010D0E8:
lhu   T0, 0x36(SP)
sll   S0, T0, 0x10
sra   S0, S0, 0x10
sll   V0, S4, 3
lui   AT, hi(D_8011E20C)
addu  AT, AT, V0
lwc1  F2, lo(D_8011E20C)(AT)
li    AT, 0x41800000 ; 16.000000
mtc1  AT, F4
      NOP
mul.s F2, F2, F4
lui   AT, hi(D_8011E1EC)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E1EC)(AT)
sub.s F0, F0, F2
li    AT, 0x41000000 ; 8.000000
mtc1  AT, F2
      NOP
sub.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F0, F4
lui   AT, hi(D_8011E1F0)
addu  AT, AT, V0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
move  A0, S0
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   PlaySound
 li    A0, 307
move  S1, R0
lhu   T0, 0x26(SP)
sll   V0, T0, 0x10
sra   S3, V0, 0x10
sll   S2, S4, 3
lhu   T0, 0x36(SP)
sll   S6, T0, 0x10
L8010D1BC:
mtc1  S1, F4
      NOP
cvt.s.w F4, F4
lui   AT, hi(D_8011E20C)
addu  AT, AT, S2
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F4, F0
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S2
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S2
lwc1  F0, lo(D_8011E210)(AT)
mul.s F4, F4, F0
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S2
lwc1  F0, lo(D_8011E1F0)(AT)
add.s F4, F4, F0
trunc.w.s F0, F4
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S3
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
sll   S0, S1, 4
andi  S0, S0, 0xffff
move  A0, S3
move  A1, R0
jal   0x80055458
 move  A2, S0
sra   A0, S6, 0x10
move  A1, R0
jal   0x80055458
 move  A2, S0
jal   SleepVProcess
 addiu S1, S1, 1
slti  V0, S1, 0x11
bnez  V0, L8010D1BC
 move  A1, R0
lhu   T0, 0x26(SP)
sll   A0, T0, 0x10
sra   A0, A0, 0x10
jal   0x80055458
 li    A2, 255
lhu   T0, 0x36(SP)
sll   A0, T0, 0x10
sra   A0, A0, 0x10
move  A1, R0
jal   0x80055458
 li    A2, 255
move  A0, S4
jal   PlayerHasItem
 li    A1, ITEM_BOO_REPELLANT
li    S0, -1
nor   V0, R0, V0
sltu  V0, R0, V0
subu  V0, R0, V0
andi  V0, V0, 0x620f
sll   V1, S4, 3
subu  V1, V1, S4
sll   V1, V1, 3
lui   AT, hi(p1_char)
addu  AT, AT, V1
lbu   V1, lo(p1_char)(AT)
sll   V1, V1, 2
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
ori   A0, V0, 0x620e
lui   A1, hi(CORE_801014A0)
addu  A1, A1, V1
lw    A1, lo(CORE_801014A0)(A1)
move  A2, R0
jal   0x800EC1E8
 move  A3, R0
sll   A0, S4, 0x10
sra   A0, A0, 0x10
jal   0x800FF900
 li    A1, 2
jal   0x800EC3C0
 move  A0, S4
move  A0, S4
jal   PlayerHasItem
 li    A1, ITEM_BOO_REPELLANT
beq   V0, S0, L8010D34C
 li    A1, 4096
lui   A0, hi(D_8010CE9C)
addiu A0, A0, lo(D_8010CE9C)
move  A2, R0
jal   InitProcess
 move  A3, R0
jal   SleepProcess
 li    A0, 20
L8010D34C:
move  FP, R0
move  S2, R0
move  A0, S4
jal   PlayerHasItem
 li    A1, ITEM_BOO_REPELLANT
li    V1, -1
beq   V0, V1, L8010D390
 li    T0, 1
li    FP, 1
sw    T0, 0x1c(SP)
lui   A0, hi(D_801127D8)
addiu A0, A0, lo(D_801127D8)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S4, 0x8c(V0)
L8010D390:
jal   PlaySound
 li    A0, 307
sll   A0, S4, 0x10
sra   A0, A0, 0x10
li    A1, 3
jal   0x800FFA4C
 li    A2, 5
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F12
      NOP
jal   0x800EEF80
 sw    V0, 0x44(SP)
addiu S6, V0, 1
move  S1, R0
move  S7, R0
sll   S0, S4, 3
li    AT, 0x41800000 ; 16.000000
mtc1  AT, F22
li    AT, 0x41000000 ; 8.000000
mtc1  AT, F24
lhu   T0, 0x36(SP)
sll   T0, T0, 0x10
sw    T0, 0x4c(SP)
sll   V0, S4, 3
subu  V0, V0, S4
sll   V0, V0, 3
sw    V0, 0x54(SP)
sll   T0, S4, 3
subu  T0, T0, S4
sw    T0, 0x5c(SP)
sll   T0, S4, 3
subu  T0, T0, S4
sw    T0, 0x64(SP)
sll   T0, S4, 3
subu  T0, T0, S4
sw    T0, 0x6c(SP)
lw    T0, 0x4c(SP)
sra   S3, T0, 0x10
L8010D428:
sll   V0, S6, 0x10
bnez  V0, L8010D454
 slti  V0, S2, 2
jal   PlaySound
 li    A0, 599
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
addiu S6, V0, 0x1e
slti  V0, S2, 2
L8010D454:
xori  V0, V0, 1
subu  S2, S2, V0
bnez  S2, L8010D514
 li    V0, 9
sll   V1, S1, 1
addu  V1, V1, S1
sll   V0, V1, 4
subu  V0, V0, V1
sll   V0, V0, 1
mtc1  V0, F12
      NOP
jal   0x8008EF20
 cvt.s.w F12, F12
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E210)(AT)
mul.s F2, F2, F22
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F4, lo(D_8011E1F0)(AT)
add.s F2, F2, F4
add.s F0, F0, F0
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
lhu   T0, 0x26(SP)
sll   A0, T0, 0x10
lui   AT, hi(D_8011E20C)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F0, F22
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
sra   A0, A0, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
j     L8010D640
       NOP
L8010D514:
bne   S2, V0, L8010D640
 sll   V1, S7, 1
addu  V1, V1, S7
sll   V0, V1, 4
subu  V0, V0, V1
sll   V0, V0, 1
mtc1  V0, F20
      NOP
cvt.s.w F20, F20
jal   0x8008EF20
 mov.s F12, F20
lui   AT, hi(D_8011E20C)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E20C)(AT)
mul.s F2, F2, F22
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F4, lo(D_8011E1EC)(AT)
add.s F2, F2, F4
add.s F0, F0, F0
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A2, F0
      NOP
sll   A2, A2, 0x10
lhu   T0, 0x26(SP)
sll   A0, T0, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F0, F22
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
sra   A0, A0, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
jal   0x8008EF20
 mov.s F12, F20
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1EC)(AT)
sub.s F2, F2, F24
add.s F0, F0, F0
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A2, F0
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F0, F22
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lw    T0, 0x4c(SP)
sra   A0, T0, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
addiu S7, S7, 1
L8010D640:
lw    T0, 0x54(SP)
lui   V0, hi(CORE_800D110C)
addu  V0, V0, T0
lbu   V0, lo(CORE_800D110C)(V0)
andi  V0, V0, 1
beqz  V0, L8010D72C
       NOP
beqz  S2, L8010D75C
       NOP
lui   V0, hi(p1_cpu_difficulty)
addu  V0, V0, T0
lbu   V0, lo(p1_cpu_difficulty)(V0)
bnez  V0, L8010D690
       NOP
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
j     L8010D714
 li    V1, 6
L8010D690:
lw    T0, 0x5c(SP)
sll   V0, T0, 3
lui   V1, hi(p1_cpu_difficulty)
addu  V1, V1, V0
lbu   V1, lo(p1_cpu_difficulty)(V1)
li    V0, 1
bne   V1, V0, L8010D6C8
       NOP
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
j     L8010D714
 li    V1, 7
L8010D6C8:
lw    T0, 0x64(SP)
sll   V0, T0, 3
lui   V1, hi(p1_cpu_difficulty)
addu  V1, V1, V0
lbu   V1, lo(p1_cpu_difficulty)(V1)
li    V0, 2
bne   V1, V0, L8010D700
       NOP
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
j     L8010D714
 li    V1, 8
L8010D700:
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
li    V1, 9
L8010D714:
subu  V1, V1, V0
slt   V1, V1, S2
beqz  V1, L8010D75C
 sltiu V1, S2, 1
j     L8010D804
       NOP
L8010D72C:
lw    T0, 0x6c(SP)
sll   V0, T0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
lui   AT, hi(CORE_800C9520)
addu  AT, AT, V0
lhu   V0, lo(CORE_800C9520)(AT)
andi  V0, V0, 0x8000
beqz  V0, L8010D804
 sltiu V1, S2, 1
L8010D75C:
lw    T0, 0x1c(SP)
bnez  T0, L8010D804
 sltiu V1, S2, 1
addiu FP, FP, 1
bnez  S5, L8010D800
 li    S2, 10
move  A0, S3
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
move  A0, S3
move  A1, R0
jal   0x800550F4
 li    A2, 1
li    S5, 1
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E1EC)(AT)
sub.s F0, F0, F24
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F0, F22
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S3
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
L8010D800:
sltiu V1, S2, 1
L8010D804:
xori  V0, S5, 1
sltiu V0, V0, 1
and   V1, V1, V0
beqz  V1, L8010D8B4
 move  A0, S3
move  A1, R0
move  A2, R0
jal   0x80055140
 move  A3, R0
move  A0, S3
move  A1, R0
jal   0x800550F4
 li    A2, 1
move  S5, R0
lui   AT, hi(D_8011E20C)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E20C)(AT)
mul.s F2, F2, F22
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E1EC)(AT)
sub.s F0, F0, F2
sub.s F0, F0, F24
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F0, F22
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S3
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
L8010D8B4:
jal   SleepVProcess
 addiu S1, S1, 1
slti  V0, S1, 0x78
bnez  V0, L8010D428
 addiu S6, S6, -1
lw    A0, 0x44(SP)
jal   0x800FFAEC
       NOP
lw    T0, 0x1c(SP)
bnez  T0, L8010D8F4
 li    A1, 4096
lui   A0, hi(D_8010CE9C)
addiu A0, A0, lo(D_8010CE9C)
move  A2, R0
jal   InitProcess
 move  A3, R0
L8010D8F4:
bnez  FP, L8010D9D4
 li    S1, 16
lhu   T0, 0x26(SP)
sll   V0, T0, 0x10
sra   S3, V0, 0x10
sll   S2, S4, 3
lhu   T0, 0x36(SP)
sll   S5, T0, 0x10
L8010D914:
mtc1  S1, F4
      NOP
cvt.s.w F4, F4
lui   AT, hi(D_8011E20C)
addu  AT, AT, S2
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F4, F0
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S2
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S2
lwc1  F0, lo(D_8011E210)(AT)
mul.s F4, F4, F0
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S2
lwc1  F0, lo(D_8011E1F0)(AT)
add.s F4, F4, F0
trunc.w.s F0, F4
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S3
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
sll   S0, S1, 4
andi  S0, S0, 0xffff
move  A0, S3
move  A1, R0
jal   0x80055458
 move  A2, S0
sra   A0, S5, 0x10
move  A1, R0
jal   0x80055458
 move  A2, S0
jal   SleepVProcess
 addiu S1, S1, -2
bltz  S1, L8010DB78
       NOP
j     L8010D914
       NOP
L8010D9D4:
lhu   T0, 0x26(SP)
sll   S2, T0, 0x10
sll   S0, S4, 3
L8010D9E0:
mtc1  S1, F20
      NOP
cvt.s.w F20, F20
lui   AT, hi(D_8011E20C)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F20, F0
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F20, F0
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
sra   A0, S2, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
lhu   T0, 0x36(SP)
sll   A0, T0, 0x10
addiu V0, S1, -0x10
mtc1  V0, F0
      NOP
cvt.s.w F0, F0
lui   AT, hi(D_8011E20C)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E20C)(AT)
mul.s F0, F0, F2
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
li    AT, 0x41000000 ; 8.000000
mtc1  AT, F2
      NOP
sub.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F20, F20, F0
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E1F0)(AT)
add.s F20, F20, F0
trunc.w.s F0, F20
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
sra   A0, A0, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
lw    T0, 0x1c(SP)
bnezl T0, L8010DB08
 addiu S1, S1, -2
L8010DB08:
jal   SleepVProcess
 addiu S1, S1, -2
slti  V0, S1, -0x10
beqz  V0, L8010D9E0
 move  A1, R0
lhu   T0, 0x36(SP)
sll   S0, T0, 0x10
sra   S0, S0, 0x10
move  A0, S0
move  A2, R0
jal   0x80055140
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x800550F4
 li    A2, 1
li    S1, 16
lhu   T0, 0x26(SP)
sll   S0, T0, 0x10
sll   A2, S1, 4
L8010DB58:
sra   A0, S0, 0x10
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S1, S1, -2
bgez  S1, L8010DB58
 sll   A2, S1, 4
L8010DB78:
lhu   T0, 0x26(SP)
sll   A0, T0, 0x10
jal   0x800525C8
 sra   A0, A0, 0x10
lhu   T0, 0x2e(SP)
sll   A0, T0, 0x10
jal   FreeGraphics
 sra   A0, A0, 0x10
lhu   T0, 0x36(SP)
sll   A0, T0, 0x10
jal   0x800525C8
 sra   A0, A0, 0x10
lhu   T0, 0x3e(SP)
sll   A0, T0, 0x10
jal   FreeGraphics
 sra   A0, A0, 0x10
lw    T0, 0x1c(SP)
bnez  T0, L8010DCAC
 li    S5, -2
move  S1, R0
lui   A0, hi(current_turn)
lb    A0, lo(current_turn)(A0)
sll   V0, S1, 1
L8010DBD4:
addu  V1, V0, S1
lui   V0, hi(D_8011E22C)
addu  V0, V0, V1
lbu   V0, lo(D_8011E22C)(V0)
slt   V0, A0, V0
bnezl V0, L8010DC0C
 addiu S1, S1, 1
lui   V0, hi(D_8011E22D)
addu  V0, V0, V1
lbu   V0, lo(D_8011E22D)(V0)
slt   V0, V0, A0
beqz  V0, L8010DC18
 sll   V0, S1, 1
addiu S1, S1, 1
L8010DC0C:
sltiu V0, S1, 6
bnez  V0, L8010DBD4
 sll   V0, S1, 1
L8010DC18:
addu  V0, V0, S1
lui   S5, hi(D_8011E22E)
addu  S5, S5, V0
lbu   S5, lo(D_8011E22E)(S5)
move  S1, R0
sll   V0, S1, 1
L8010DC30:
addu  V1, V0, S1
lui   V0, hi(D_8011E240)
addu  V0, V0, V1
lbu   V0, lo(D_8011E240)(V0)
slt   V0, FP, V0
bnezl V0, L8010DC68
 addiu S1, S1, 1
lui   V0, hi(D_8011E241)
addu  V0, V0, V1
lbu   V0, lo(D_8011E241)(V0)
slt   V0, V0, FP
beqz  V0, L8010DC74
 sll   V0, S1, 1
addiu S1, S1, 1
L8010DC68:
sltiu V0, S1, 0xe
bnez  V0, L8010DC30
 sll   V0, S1, 1
L8010DC74:
addu  V0, V0, S1
lui   AT, hi(D_8011E242)
addu  AT, AT, V0
lbu   V0, lo(D_8011E242)(AT)
subu  S5, S5, V0
sll   V0, S4, 3
subu  V0, V0, S4
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slt   V0, S5, V0
beql  V0, R0, L8010DCAC
 li    S5, -1
L8010DCAC:
move  V0, S5
lw    RA, 0x94(SP)
lw    FP, 0x90(SP)
lw    S7, 0x8c(SP)
lw    S6, 0x88(SP)
lw    S5, 0x84(SP)
lw    S4, 0x80(SP)
lw    S3, 0x7c(SP)
lw    S2, 0x78(SP)
lw    S1, 0x74(SP)
lw    S0, 0x70(SP)
ldc1  F24, 0xa8(SP)
ldc1  F22, 0xa0(SP)
ldc1  F20, 0x98(SP)
jr    RA
 addiu SP, SP, 0xb0

boo_event_helper_process:
addiu SP, SP, -0x40
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F26, 0x38(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
jal   0x8004EE68
 sdc1  F20, 0x20(SP)
lw    S1, 0x8c(V0)
lui   A0, hi(D_8011FB58)
jal   0x800D975C
 lw    A0, lo(D_8011FB58)(A0)
move  S0, V0
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, S1, 0xc
addiu A0, S0, 0x24
lui   A1, 0x4000
move  A2, A1
jal   0x80089A10
 move  A3, A1
lwc1  F0, 0x30(S1)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F2
      NOP
add.s F0, F0, F2
swc1  F0, 0x30(S0)
jal   0x800D9AA4
 move  A0, S0
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
mtc1  V0, F20
      NOP
cvt.s.w F20, F20
lui   AT, hi(D_8011F8D8)
ldc1  F22, lo(D_8011F8D8)(AT)
li    AT, 0x420C0000 ; 35.000000
mtc1  AT, F26
li    AT, 0x42200000 ; 40.000000
mtc1  AT, F24
L8010DD98:
jal   SleepVProcess
       NOP
lwc1  F0, 0x30(S0)
cvt.d.s F0, F0
add.d F0, F0, F22
cvt.s.d F0, F0
swc1  F0, 0x30(S0)
lwc1  F2, 0x30(S1)
add.s F2, F2, F26
c.le.s F2, F0
      NOP
bc1t  L8010DE0C
       NOP
add.s F20, F20, F24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F20
      NOP
jal   0x8008A2A0
 addiu A0, A0, 0x74
j     L8010DD98
       NOP
L8010DE0C:
jal   0x800D9B54
 move  A0, S0
jal   EndProcess
 move  A0, R0
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F26, 0x38(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x40

boo_event_helper:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
lui   A0, hi(boo_event_helper_process)
addiu A0, A0, lo(boo_event_helper_process)
li    A1, 4096
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S0, 0x8c(V0)
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

__PP64_INTERNAL_BOO_SPACE_EVENT:
boo_event:
addiu SP, SP, -0x118
sw    RA, 0xe4(SP)
sw    FP, 0xe0(SP)
sw    S7, 0xdc(SP)
sw    S6, 0xd8(SP)
sw    S5, 0xd4(SP)
sw    S4, 0xd0(SP)
sw    S3, 0xcc(SP)
sw    S2, 0xc8(SP)
sw    S1, 0xc4(SP)
sw    S0, 0xc0(SP)
sdc1  F30, 0x110(SP)
sdc1  F28, 0x108(SP)
sdc1  F26, 0x100(SP)
sdc1  F24, 0xf8(SP)
sdc1  F22, 0xf0(SP)
sdc1  F20, 0xe8(SP)
move  S4, R0
move  S6, R0
jal   GetCurrentSpaceIndex
 sw    R0, 0x9c(SP)
lui   S7, hi(CORE_800CD058)
addiu S7, S7, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   0x800DBEC0
 move  S0, V0
sw    V0, 0xb4(SP)
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
sh    R0, 0xae(SP)
lbu   A0, 0xf(S0)
sll   A0, A0, 0x18
sra   A0, A0, 0x18
lbu   A1, 0x10(S0)
sll   A1, A1, 0x18
sra   A1, A1, 0x18
andi  A0, A0, 0xffff
jal   GetAbsSpaceIndexFromChainSpaceIndex
 andi  A1, A1, 0xffff
move  S2, V0
sll   V0, S2, 0x10
sra   S0, V0, 0x10
li    V0, ${u}
beq   S0, V0, L8010DFB4
 li    T0, -1
sw    T0, 0x94(SP)
li    T0, -1
sh    T0, 0xa6(SP)
lui   A0, hi(D_8011FB08)
jal   0x800D975C
 lw    A0, lo(D_8011FB08)(A0)
sw    V0, 0x8c(SP)
jal   0x800D9B24
 lw    A0, 0x8c(SP)
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F0
lw    T0, 0x8c(SP)
swc1  F0, 0x30(T0)
jal   GetSpaceData
 move  A0, S0
move  S1, V0
lwc1  F2, 0xc(S1)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F0
lw    T0, 0x8c(SP)
lw    A1, 8(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x10(S1)
jal   0x80089A10
 addiu A0, T0, 0xc
j     L8010E2D8
       NOP
L8010DFB4:
sw    R0, 0x94(SP)
li    T0, ${s}
sh    T0, 0xa6(SP)
jal   GetSpaceData
 li    A0, ${s}
move  S1, V0
lui   T0, hi(D_8011FB0C)
lw    T0, lo(D_8011FB0C)(T0)
sw    T0, 0x8c(SP)
jal   PlaySound
 li    A0, 293
li    A0, 51
jal   0x800D90C8
 move  A1, R0
move  S4, V0
lb    V0, 1(S7)
sll   V0, V0, 2
lui   AT, hi(D_8011E280)
addu  AT, AT, V0
lw    V0, lo(D_8011E280)(AT)
beqz  V0, L8010E01C
       NOP
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
jal   0x8001ED54
 lh    A0, 0(V0)
L8010E01C:
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001C448
 addiu S1, S1, 8
jal   0x800D9714
 move  A0, S4
sll   A0, S2, 0x10
jal   GetSpaceData
 sra   A0, A0, 0x10
addiu S0, SP, 0x68
move  A0, S0
addiu A1, V0, 8
jal   midpoint
 move  A2, S1
jal   0x800D88E8
 move  A0, S0
addiu A0, S4, 0x18
jal   0x80089A20
 move  A1, S0
sw    R0, 0x28(S4)
addiu A0, S4, 0xc
jal   0x80089A20
 move  A1, S1
move  A0, S4
li    A1, -1
jal   0x800D9CE8
 li    A2, 1
jal   0x800D9AA4
 move  A0, S4
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F12
jal   0x8008EF20
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
div.s F22, F2, F0
mtc1  R0, F20
li    AT, 0x3F7D0000 ; 0.988281
ori AT, AT, 0x70a4
mtc1  AT, F26
li    AT, 0x3C230000 ; 0.009949
ori AT, AT, 0xd70a
mtc1  AT, F24
lui   S0, hi(D_8011E280)
addiu S0, S0, lo(D_8011E280)
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F28
      NOP
L8010E0EC:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x2c(S4)
lb    V0, 1(S7)
sll   V0, V0, 2
addu  V0, V0, S0
lw    V0, 0(V0)
beqz  V0, L8010E158
       NOP
lwc1  F0, 0x24(S4)
neg.s F0, F0
swc1  F0, 0x24(S4)
L8010E158:
jal   SleepVProcess
       NOP
add.s F20, F20, F30
c.lt.s F20, F28
      NOP
bc1t  L8010E0EC
       NOP
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F0
      NOP
c.lt.s F0, F20
      NOP
bc1f  L8010E24C
       NOP
li    AT, 0x3F7D0000 ; 0.988281
ori AT, AT, 0x70a4
mtc1  AT, F26
li    AT, 0x3C230000 ; 0.009949
ori AT, AT, 0xd70a
mtc1  AT, F24
lui   S0, hi(D_8011E280)
addiu S0, S0, lo(D_8011E280)
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F28
      NOP
L8010E1C4:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x2c(S4)
lb    V0, 1(S7)
sll   V0, V0, 2
addu  V0, V0, S0
lw    V0, 0(V0)
beqz  V0, L8010E230
       NOP
lwc1  F0, 0x24(S4)
neg.s F0, F0
swc1  F0, 0x24(S4)
L8010E230:
jal   SleepVProcess
       NOP
sub.s F20, F20, F30
c.lt.s F28, F20
      NOP
bc1t  L8010E1C4
       NOP
L8010E24C:
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x28(S4)
swc1  F0, 0x24(S4)
swc1  F0, 0x2c(S4)
lb    V0, 1(S7)
sll   V0, V0, 2
lui   AT, hi(D_8011E280)
addu  AT, AT, V0
lw    V0, lo(D_8011E280)(AT)
beqz  V0, L8010E290
 move  A0, S4
li    AT, 0xBF800000 ; -1.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x24(S4)
L8010E290:
li    A1, -1
jal   0x800D9CE8
 move  A2, R0
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui A1, 0x3f99
jal   0x8001C92C
 ori A1, A1, 0x999a
L8010E2B4:
jal   0x800D9E0C
 move  A0, S4
andi  V0, V0, 0xffff
bnez  V0, L8010E2D8
       NOP
jal   SleepVProcess
       NOP
j     L8010E2B4
       NOP
L8010E2D8:
jal   PlaySound
 li    A0, 599
lw    A0, 0x8c(SP)
jal   func_8010C914
       NOP
sll   A0, S2, 0x10
jal   GetSpaceData
 sra   A0, A0, 0x10
move  S1, V0
lhu   T0, 0xa6(SP)
sll   V0, T0, 0x10
sra   S0, V0, 0x10
li    V0, -1
beq   S0, V0, L8010E36C
 addiu A1, S1, 8
lw    A0, 0x8c(SP)
jal   0x800D9F5C
 li    A2, 5
li    A0, -1
li    A1, 5
jal   0x800ED20C
 move  A2, S0
jal   SleepProcess
 li    A0, 5
jal   0x8004EE68
       NOP
li    AT, 0x3FCC0000 ; 1.593750
ori AT, AT, 0xcccd
mtc1  AT, F12
      NOP
jal   0x800E8EDC
 move  S0, V0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
       NOP
L8010E36C:
lb    V0, 0xf(S7)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
slti  V0, V0, 5
beqz  V0, L8010E3A4
 li    A0, 7
jal   0x800EC590
 li    A1, 0x6201 ; "Don't trouble me if you have no coins! Shoo! Shoo!"
j     L8010ECE0
       NOP
L8010E3A4:
move  S0, R0
L8010E3A8:
lb    A0, 0xf(S7)
L8010E3AC:
beq   S0, A0, L8010E3E4
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V1, V0, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
bnez  V0, L8010E3F4
 slti  V0, S0, 4
lui   V0, hi(p1_stars)
addu  V0, V0, V1
lb    V0, lo(p1_stars)(V0)
bnez  V0, L8010E3F4
 slti  V0, S0, 4 ; total players
L8010E3E4:
addiu S0, S0, 1
slti  V0, S0, 4 ; total players
bnez  V0, L8010E3AC
       NOP
L8010E3F4:
bnez  V0, L8010E410
 move  S0, R0
li    A0, 7
jal   0x800EC590
 li    A1, 0x6202 ; "There isn't a soul with coins or stars ..."
j     L8010ECE0
       NOP
L8010E410:
lb    V1, 0xf(S7)
L8010E414:
beq   S0, V1, L8010E438
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
bnez  V0, L8010E448
 li    V0, 4
L8010E438:
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L8010E414
 li    V0, 4
L8010E448:
bne   S0, V0, L8010E460
 li    V0, 8
li    V0, 1
sb    V0, 0x20(SP)
j     L8010E46C
 sb    R0, 0x60(SP)
L8010E460:
sb    V0, 0x20(SP)
li    V0, 1
sb    V0, 0x60(SP)
L8010E46C:
sb    R0, 0x21(SP)
move  S0, R0
lb    V1, 0xf(S7)
L8010E478:
beq   S0, V1, L8010E49C
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_stars)
addu  AT, AT, V0
lb    V0, lo(p1_stars)(AT)
bnez  V0, L8010E4AC
 li    V0, 4
L8010E49C:
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L8010E478
 li    V0, 4
L8010E4AC:
beq   S0, V0, L8010E4F8
 li    V0, 1
lb    V0, 0xf(S7)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
slti  V0, V0, 0x32
bnez  V0, L8010E4F8
 li    V0, 1
lui   V0, hi(p1_stars)
addu  V0, V0, V1
lb    V0, lo(p1_stars)(V0)
slti  V0, V0, MAX_PLAYER_STAR_COUNT
bnez  V0, L8010E504
 li    V0, 8
li    V0, 1
L8010E4F8:
sb    V0, 0x30(SP)
j     L8010E510
 sb    R0, 0x61(SP)
L8010E504:
sb    V0, 0x30(SP)
li    V0, 1
sb    V0, 0x61(SP)
L8010E510:
sb    R0, 0x31(SP)
li    V0, 1
sb    V0, 0x63(SP)
sb    V0, 0x62(SP)
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 7
li    A1, 0x6200 ; "Ooo, hoo, hoo! Which shall I steal? ..."
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage
 addiu A3, SP, 0x30
jal   func_80107BB4
 addiu A0, SP, 0x60
move  S0, V0
jal   0x800EC6C8
 sh    S0, 0xae(SP)
jal   0x800EC6EC
 sll   S0, S0, 0x10
sra   S0, S0, 0x10
li    V0, 2
beq   S0, V0, L8010EC88
 slti  V0, S0, 3
bnez  V0, L8010E584
 li    V0, 3
beq   S0, V0, L8010ECA4
 li    V0, -1
j     L8010ECE0
       NOP
L8010E584:
bltz  S0, L8010ECE0
 move  S0, R0
move  S1, R0
L8010E590:
addiu S3, SP, 0x60
L8010E594:
addiu S2, SP, 0x20
li    S5, 1
lhu   T0, 0xae(SP)
sll   V0, T0, 0x10
sra   V0, V0, 0x10
sw    V0, 0xbc(SP)
li    FP, 8
L8010E5B0:
lb    V0, 0xf(S7)
beql  S0, V0, L8010E608
 addu  V0, S3, S1
lw    T0, 0xbc(SP)
bnez  T0, L8010E5EC
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
beqz  V0, L8010E608
 addu  V0, S3, S1
j     L8010E620
 sb    S5, 0(V0)
L8010E5EC:
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_stars)
addu  AT, AT, V0
lb    V0, lo(p1_stars)(AT)
bnez  V0, L8010E61C
 addu  V0, S3, S1
L8010E608:
sb    R0, 0(V0)
sll   V0, S1, 4
addu  V0, S2, V0
j     L8010E62C
 sb    S5, 0(V0)
L8010E61C:
sb    S5, 0(V0)
L8010E620:
sll   V0, S1, 4
addu  V0, S2, V0
sb    FP, 0(V0)
L8010E62C:
sll   A1, S1, 4
addu  A1, S2, A1
move  A0, S0
jal   0x800E2260
 addiu A1, A1, 1
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L8010E5B0
 addiu S1, S1, 1
li    V0, 1
sb    V0, 0x64(SP)
sb    V0, 0x65(SP)
addiu V0, SP, 0x40
sw    V0, 0x10(SP)
addiu V0, SP, 0x50
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 7
li    A1, 0x5C02
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage "Who's your opponent?"
 addiu A3, SP, 0x30
jal   func_80107BD4
 addiu A0, SP, 0x60
move  S0, V0
jal   0x800EC6C8
 move  S2, S0
jal   0x800EC6EC
 move  S1, R0
sll   S0, S0, 0x10
sra   S0, S0, 0x10
li    V0, 4
beq   S0, V0, L8010E718 ; Your Choice
 slti  V0, S0, 5
beqz  V0, L8010E6CC
 li    V0, -1
beq   S0, V0, L8010E3A8
 move  S0, R0
j     L8010E8A4
       NOP
L8010E6CC:
li    V0, 5
bne   S0, V0, L8010E8A4
 li    V0, -1
lw    T0, 0x94(SP)
bne   T0, V0, L8010E708
       NOP
jal   func_80106FE8
 move  S0, R0
li    V0, 1
lui   AT, hi(CORE_800CB99C)
sb    V0, lo(CORE_800CB99C)(AT)
jal   0x80049FB8
 move  S1, R0
j     L8010E594
 addiu S3, SP, 0x60
L8010E708:
jal   __PP64_INTERNAL_VIEW_MAP
 move  S0, R0
j     L8010E590
 move  S1, R0
L8010E718:
move  S0, R0
move  S2, R0
addiu S3, SP, 0x20
move  S1, R0
L8010E728:
jal   0x800EE9C0
 move  A0, S1
bnel  S0, V0, L8010E754
 addiu S1, S1, 1
lb    V0, 0xf(S7)
beq   V0, S1, L8010E750
 sll   V0, S2, 2
addu  V0, V0, S3
sw    S1, 0x58(V0)
addiu S2, S2, 1
L8010E750:
addiu S1, S1, 1
L8010E754:
slti  V0, S1, 4
bnez  V0, L8010E728
       NOP
addiu S0, S0, 1
slti  V0, S0, 4
bnezl V0, L8010E728
 move  S1, R0
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F12
      NOP
jal   0x800EEF80
 move  S0, R0
move  V1, V0
lui   A0, hi(D_8011E274)
addiu A0, A0, lo(D_8011E274)
sll   V0, S0, 2
L8010E794:
addu  V0, V0, A0
lw    V0, 0(V0)
slt   V0, V1, V0
bnez  V0, L8010E7B8
       NOP
addiu S0, S0, 1
slti  V0, S0, 3
bnez  V0, L8010E794
 sll   V0, S0, 2
L8010E7B8:
lhu   T0, 0xae(SP)
sll   V0, T0, 0x10
beqz  V0, L8010E808
 addiu A0, SP, 0x20
L8010E7C8:
sll   V0, S0, 2
addu  V0, V0, A0
lw    V1, 0x58(V0)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_stars)
addu  AT, AT, V0
lb    V0, lo(p1_stars)(AT)
beql  V0, R0, L8010E7C8
 addiu S0, S0, -1
lb    V0, 0xf(S7)
beql  V1, V0, L8010E7C8
 addiu S0, S0, -1
j     L8010E898
 sll   V0, S0, 2
L8010E808:
bltz  S0, L8010E84C
 sll   V0, S0, 2
L8010E810:
addu  V0, V0, A0
lw    V1, 0x58(V0)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
beqz  V0, L8010E844
 addiu S0, S0, -1
lb    V0, 0xf(S7)
bnel  V1, V0, L8010E850
 li    S0, 2
L8010E844:
bgez  S0, L8010E810
 sll   V0, S0, 2
L8010E84C:
li    S0, 2
L8010E850:
addiu A0, SP, 0x20
sll   V0, S0, 2
L8010E858:
addu  V0, V0, A0
lw    V1, 0x58(V0)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
beql  V0, R0, L8010E890
 addiu S0, S0, -1
lb    V0, 0xf(S7)
bne   V1, V0, L8010E898
 sll   V0, S0, 2
addiu S0, S0, -1
L8010E890:
bgez  S0, L8010E858
 sll   V0, S0, 2
L8010E898:
addu  V0, SP, V0
lhu   S2, 0x7a(V0)
li    S1, 1
L8010E8A4:
lhu   T0, 0xae(SP)
sll   V0, T0, 0x10
bnez  V0, L8010E8CC
       NOP
; paying to steal coins
lb    A0, 0xf(S7)
jal   ShowPlayerCoinChange
 li    A1, -5
lb    A0, 0xf(S7)
j     L8010E8E0
 li    A1, -5
L8010E8CC: ; paying to steal a star
lb    A0, 0xf(S7)
jal   ShowPlayerCoinChange
 li    A1, -50
lb    A0, 0xf(S7)
li    A1, -50
L8010E8E0:
jal   AdjustPlayerCoinsGradual
       NOP
jal   SleepProcess
 li    A0, 30
lhu   T0, 0xae(SP)
sll   V0, T0, 0x10
sra   V0, V0, 0x10
li    V1, 1
bne   V0, V1, L8010E918
 move  S0, R0
beqz  S1, L8010E9AC
 li    A0, 7
j     L8010E9A4
 li    A1, 25094
L8010E918:
lui   A0, hi(current_turn)
lb    A0, lo(current_turn)(A0)
sll   V0, S0, 1
L8010E924:
addu  V1, V0, S0
lui   V0, hi(D_8011E22C)
addu  V0, V0, V1
lbu   V0, lo(D_8011E22C)(V0)
slt   V0, A0, V0
bnezl V0, L8010E95C
 addiu S0, S0, 1
lui   V0, hi(D_8011E22D)
addu  V0, V0, V1
lbu   V0, lo(D_8011E22D)(V0)
slt   V0, V0, A0
beqz  V0, L8010E968
 sll   V0, S0, 1
addiu S0, S0, 1
L8010E95C:
sltiu V0, S0, 6
bnez  V0, L8010E924
 sll   V0, S0, 1
L8010E968:
addu  V0, V0, S0
lui   AT, hi(D_8011E22E)
addu  AT, AT, V0
lbu   V0, lo(D_8011E22E)(AT)
bnez  S1, L8010E99C
 sw    V0, 0x9c(SP)
li    AT, 0x40C00000 ; 6.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
li    A0, 7
j     L8010E9A4
 addiu A1, V0, 0x6207 ; "Good! Here I go... I feel great! Great! Leave it to me!"
L8010E99C:
li    A0, 7
li    A1, 0x620D ; "Good, good... I'll steal coins from that no-good fool..."
L8010E9A4:
jal   0x800EC590
       NOP
L8010E9AC:
jal   func_8010C9B4
 lw    A0, 0x8c(SP)
lhu   T0, 0xae(SP)
sll   V0, T0, 0x10
bnez  V0, L8010EBEC
 sll   A0, S2, 0x10
sll   V0, S2, 0x10
sra   S0, V0, 0x10
jal   func_8010CEC0
 move  A0, S0
lw    A0, 0x8c(SP)
jal   func_8010C914
 move  S6, V0
li    V0, -2
beq   S6, V0, L8010EC38
 li    V0, -1
bne   S6, V0, L8010EA34
 addiu A0, SP, 0x20
sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   S6, hi(p1_coins)
addu  S6, S6, V0
lh    S6, lo(p1_coins)(S6)
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 move  A2, S6
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 7
j     L8010EA8C
 li    A1, 25108
L8010EA34:
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 move  A2, S6
lw    T0, 0x9c(SP)
subu  V1, T0, S6
move  S0, R0
L8010EA50:
lui   V0, hi(D_8011E26C)
addu  V0, V0, S0
lbu   V0, lo(D_8011E26C)(V0)
slt   V0, V1, V0
beql  V0, R0, L8010EA7C
 sw    R0, 0x10(SP)
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L8010EA50
       NOP
sw    R0, 0x10(SP)
L8010EA7C:
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 7
addiu A1, S0, 0x6210
L8010EA8C:
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage: "That's rediculous! I only got _ coins!"
 move  A3, R0
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
li    V0, -2
beq   S6, V0, L8010EC38
 li    A0, 25
lui   AT, hi(CORE_800D037C)
sh    R0, lo(CORE_800D037C)(AT)
mtc1  S6, F24
      NOP
cvt.s.w F24, F24
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F0
      NOP
div.s F24, F24, F0
mtc1  R0, F20
      NOP
jal   0x800D90C8
 move  A1, R0
lui   AT, hi(D_8011FB58)
sw    V0, lo(D_8011FB58)(AT)
jal   0x800D9714
 move  A0, V0
lui   A0, hi(D_8011FB58)
jal   0x800D9B24
 lw    A0, lo(D_8011FB58)(A0)
sll   A0, S2, 0x10
sra   A0, A0, 0x10
li    A1, 3
jal   0x800FFA4C
 li    A2, 5
beqz  S6, L8010EB7C
 move  S1, V0
li    AT, 0x3F800000
mtc1  AT, F22
sll   S0, S2, 0x10
add.s F20, F20, F24
L8010EB30:
c.le.s F22, F20
      NOP
bc1f  L8010EB6C
       NOP
lw    A0, 0x8c(SP)
jal   boo_event_helper
 sub.s F20, F20, F22
lb    A0, 0xf(S7)
jal   AdjustPlayerCoinsGradual
 li    A1, 1
sra   A0, S0, 0x10
li    A1, -1
jal   0x800F5BF4
 move  A2, R0
addiu S6, S6, -1
L8010EB6C:
jal   SleepVProcess
       NOP
bnezl S6, L8010EB30
 add.s F20, F20, F24
L8010EB7C:
jal   0x800FFAEC
 move  A0, S1
jal   SleepProcess
 li    A0, 20
lui   A0, hi(D_8011FB58)
jal   0x800D9B54
 lw    A0, lo(D_8011FB58)(A0)
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800ECC0C
 addiu A0, A0, 0x18
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
jal   SleepProcess
 li    A0, 5
lb    A1, 0xf(S7)
jal   0x8004ACE0
 li    A0, 628
jal   SleepProcess
 li    A0, 45
li    V0, 1
lui   AT, hi(CORE_800D037C)
sh    V0, lo(CORE_800D037C)(AT)
j     L8010EC3C
 li    V0, -1
L8010EBEC:
jal   func_8010CA54
 sra   A0, A0, 0x10
lw    A0, 0x8c(SP)
jal   func_8010C914
 move  S0, V0
beqz  S0, L8010EC34
 li    A0, 7
jal   0x800EC590
 li    A1, 0x6205 ; "I got a star! ..."
li    V0, 1
lui   AT, hi(D_8011D308)
sw    V0, lo(D_8011D308)(AT)
jal   func_80106EEC
 lw    A0, 0x8c(SP)
lui   AT, hi(D_8011D308)
sw    R0, lo(D_8011D308)(AT)
j     L8010EC3C
 li    V0, -1
L8010EC34:
li    S6, -2
L8010EC38:
li    V0, -1
L8010EC3C:
lw    T0, 0x94(SP)
bne   T0, V0, L8010EC64
 li    V0, -2
jal   SleepProcess
 li    A0, 20
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
li    V0, -2
L8010EC64:
bne   S6, V0, L8010ECE0
       NOP
jal   SleepProcess
 li    A0, 30
li    A0, 7
jal   0x800EC590
 li    A1, 0x6215 ; "There was weird gas all over the place! I feel awful!"
j     L8010ECE0
       NOP
L8010EC88:
jal   func_8010C9B4
 lw    A0, 0x8c(SP)
li    A0, 7
jal   0x800EC590
 li    A1, 0x6203 ; "What are you thinking? I can't believe it! Ooo, hoo, hoo!"
j     L8010ECE0
       NOP
L8010ECA4:
lw    T0, 0x94(SP)
bne   T0, V0, L8010ECD0
       NOP
jal   func_80106FE8
 move  S0, R0
li    V0, 1
lui   AT, hi(CORE_800CB99C)
jal   0x80049FB8
 sb    V0, lo(CORE_800CB99C)(AT)
j     L8010E3A8
       NOP
L8010ECD0:
jal   __PP64_INTERNAL_VIEW_MAP
 move  S0, R0
j     L8010E3A8
       NOP
L8010ECE0:
lhu   T0, 0xae(SP)
sll   V0, T0, 0x10
sra   V0, V0, 0x10
li    V1, 2
beq   V0, V1, L8010ED00
       NOP
jal   func_8010C9B4
 lw    A0, 0x8c(SP)
L8010ED00:
lw    T0, 0x8c(SP)
jal   0x800ECC0C
 addiu A0, T0, 0x18
li    V0, -1
lw    T0, 0x94(SP)
bne   T0, V0, L8010ED24
       NOP
jal   0x800D9B54
 lw    A0, 0x8c(SP)
L8010ED24:
lhu   T0, 0xa6(SP)
sll   V0, T0, 0x10
sra   V0, V0, 0x10
li    V1, -1
beq   V0, V1, L8010EFA4
       NOP
jal   PlaySound
 li    A0, 294
move  A0, S4
li    A1, -1
jal   0x800D9CE8
 li    A2, 4
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   A1, 0x3f99
jal   0x8001C92C
 ori A1, A1, 0x999a
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   V1, hi(CORE_800D03F8)
lw    V1, lo(CORE_800D03F8)(V1)
sll   V0, A0, 1
addu  V0, V0, A0
sll   V0, V0, 6
addu  V0, V0, V1
lbu   V1, 2(V0)
lui   A1, hi(CORE_800CCF58)
lw    A1, lo(CORE_800CCF58)(A1)
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 3
addu  V0, V0, A1
lh    V0, 2(V0)
mtc1  V0, F4
      NOP
cvt.s.w F4, F4
mfc1  A1, F4
jal   0x8001C6A8
       NOP
L8010EDC8:
jal   0x800D9E80
 move  A0, S4
andi  V0, V0, 0xffff
bnez  V0, L8010EDEC
       NOP
jal   SleepVProcess
       NOP
j     L8010EDC8
       NOP
L8010EDEC:
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F12
jal   0x8008EF20
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
div.s F22, F2, F0
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F20
li    AT, 0x3E4C0000 ; 0.199219
ori   AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori   AT, AT, 0xcccd
mtc1  AT, F24
lui   S0, hi(D_8011E280)
addiu S0, S0, lo(D_8011E280)
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F28
      NOP
L8010EE48:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x2c(S4)
lb    V0, 1(S7)
sll   V0, V0, 2
addu  V0, V0, S0
lw    V0, 0(V0)
beqz  V0, L8010EEB4
       NOP
lwc1  F0, 0x24(S4)
neg.s F0, F0
swc1  F0, 0x24(S4)
L8010EEB4:
jal   SleepVProcess
       NOP
add.s F20, F20, F30
c.lt.s F20, F28
      NOP
bc1t  L8010EE48
       NOP
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F20
li    AT, 0x3E4C0000 ; 0.199219
ori   AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori   AT, AT, 0xcccd
mtc1  AT, F24
lui   S0, hi(D_8011E280)
addiu S0, S0, lo(D_8011E280)
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
mtc1  R0, F28
      NOP
L8010EF08:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x2c(S4)
lb    V0, 1(S7)
sll   V0, V0, 2
addu  V0, V0, S0
lw    V0, 0(V0)
beqz  V0, L8010EF74
       NOP
lwc1  F0, 0x24(S4)
neg.s F0, F0
swc1  F0, 0x24(S4)
L8010EF74:
jal   SleepVProcess
       NOP
sub.s F20, F20, F30
c.lt.s F28, F20
      NOP
bc1t  L8010EF08
       NOP
sw    R0, 0x28(S4)
sw    R0, 0x24(S4)
sw    R0, 0x2c(S4)
jal   0x800D9B54
 move  A0, S4
L8010EFA4:
lw    T0, 0xb4(SP)
beqz  T0, L8010EFC0
 li    V0, -1
lb    A0, 0xf(S7)
jal   0x800DB884
       NOP
li    V0, -1
L8010EFC0:
lw    T0, 0x94(SP)
beq   T0, V0, L8010F000
       NOP
jal   0x8004EE68
       NOP
li    AT, 0x3FA60000 ; 1.296875
ori   AT, AT, 0x6666
mtc1  AT, F12
      NOP
jal   0x800E8EDC
 move  S0, V0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
       NOP
L8010F000:
lw    RA, 0xe4(SP)
lw    FP, 0xe0(SP)
lw    S7, 0xdc(SP)
lw    S6, 0xd8(SP)
lw    S5, 0xd4(SP)
lw    S4, 0xd0(SP)
lw    S3, 0xcc(SP)
lw    S2, 0xc8(SP)
lw    S1, 0xc4(SP)
lw    S0, 0xc0(SP)
ldc1  F30, 0x110(SP)
ldc1  F28, 0x108(SP)
ldc1  F26, 0x100(SP)
ldc1  F24, 0xf8(SP)
ldc1  F22, 0xf0(SP)
ldc1  F20, 0xe8(SP)
jr    RA
 addiu SP, SP, 0x118

func_8010F088:
addiu SP, SP, -0x48
sw    RA, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
sdc1  F22, 0x40(SP)
sdc1  F20, 0x38(SP)
move  S3, A0
mtc1  A1, F20
mtc1  A2, F22
lw    S0, 0x58(SP)
lw    S1, 0x5c(SP)
move  S5, A3
lui   V0, hi(D_8010F1E4)
addiu V0, V0, lo(D_8010F1E4)
sw    V0, 0x10(SP)
li    A0, 500
move  A1, R0
move  A2, R0
jal   0x80047620
 li    A3, -1
move  S4, V0
li    A0, 32
jal   0x80019A14
 li    A1, 31000
sw    V0, 0x5c(S4)
move  S2, V0
li    AT, 0x437F0000 ; 255.000000
mtc1  AT, F0
      NOP
swc1  F0, 0xc(S2)
swc1  F20, 0x10(S2)
swc1  F22, 0x14(S2)
move  A0, S2
jal   0x80089A20
 move  A1, S0
beqz  S1, L8010F138
 lui A0, 0x13
sw    R0, 0x10(SP)
j     L8010F140
 ori A0, A0, 0x1f8
L8010F138:
sw    R0, 0x10(SP)
ori   A0, A0, 0x1f7
L8010F140:
move  A1, R0
lui   A2, 0x3f80
jal   0x800D912C
 move  A3, R0
move  S0, V0
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
lwc1  F0, 0(S3)
swc1  F0, 0xc(S0)
lwc1  F0, 4(S3)
swc1  F0, 0x10(S0)
lwc1  F0, 8(S3)
swc1  F0, 0x14(S0)
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
jal   0x8001FA68
 lh    A0, 0(V0)
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 li    A1, 255
sw    S0, 0x18(S2)
sh    S5, 0x1c(S2)
move  V0, S4
lw    RA, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
ldc1  F22, 0x40(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x48

D_8010F1E4:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S2, A0
lw    S0, 0x5c(S2)
lw    S1, 0x18(S0)
addiu A1, S1, 0xc
move  A0, A1
jal   0x80089A70
 move  A2, S0
lwc1  F0, 0x2c(S1)
lwc1  F2, 0x10(S0)
add.s F0, F0, F2
swc1  F0, 0x2c(S1)
swc1  F0, 0x28(S1)
swc1  F0, 0x24(S1)
lwc1  F0, 0xc(S0)
lwc1  F2, 0x14(S0)
sub.s F0, F0, F2
mtc1  R0, F2
      NOP
c.lt.s F0, F2
      NOP
      NOP
bc1f  L8010F288
 swc1  F0, 0xc(S0)
swc1  F2, 0xc(S0)
lhu   V0, 0x1c(S0)
beqz  V0, L8010F280
 move  A0, S2
lw    A0, 0x18(S0)
jal   0x800D9B54
       NOP
jal   0x800479AC
 move  A0, S2
j     L8010F2E4
       NOP
L8010F280:
jal   0x80047B38
 li    A1, 8
L8010F288:
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lwc1  F2, 0xc(S0)
li    AT, 0x4F000000 ; 2147483648.000000
mtc1  AT, F0
      NOP
c.le.s F0, F2
      NOP
      NOP
bc1tl L8010F2C8
 sub.s F0, F2, F0
trunc.w.s F0, F2
mfc1  A1, F0
j     L8010F2DC
       NOP
L8010F2C8:
lui   V0, 0x8000
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
or    A1, A1, V0
L8010F2DC:
jal   0x8001F9E4
 andi  A1, A1, 0xff
L8010F2E4:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_8010F2FC:
addiu SP, SP, -0x128
sw    RA, 0x110(SP)
sw    S7, 0x10c(SP)
sw    S6, 0x108(SP)
sw    S5, 0x104(SP)
sw    S4, 0x100(SP)
sw    S3, 0xfc(SP)
sw    S2, 0xf8(SP)
sw    S1, 0xf4(SP)
sw    S0, 0xf0(SP)
sdc1  F22, 0x120(SP)
sdc1  F20, 0x118(SP)
lui   S7, hi(CORE_800CD058)
addiu S7, S7, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
jal   func_8010FE54
 move  S3, V0
li    A0, 36
jal   0x800D90C8
 move  A1, R0
move  S1, V0
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
lw    A1, 0x24(S3)
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x10(S1)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
lwc1  F0, 0x10(S1)
sub.s F0, F0, F22
L8010F3A8:
jal   SleepVProcess
 swc1  F0, 0x10(S1)
lwc1  F0, 0x10(S1)
c.lt.s F20, F0
      NOP
      NOP
bc1tl L8010F3A8
 sub.s F0, F0, F22
jal   PlaySound
 li    A0, 295
jal   0x8004A7C4
 li    A0, 180
li    A0, -1
li    A1, 4
jal   0x800FFA4C
 li    A2, 5
move  S5, V0
li    S2, 180
move  S0, R0
lui   S6, hi(D_8011F940)
addiu S6, S6, lo(D_8011F940)
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F22
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F20
addiu S4, SP, 0x28
L8010F410:
addiu A3, SP, 0x28
lui   A2, hi(D_8011F8E0)
addiu A2, A2, lo(D_8011F8E0)
L8010F41C:
lw    V0, 0(A2)
lw    V1, 4(A2)
lw    A0, 8(A2)
lw    A1, 0xc(A2)
sw    V0, 0(A3)
sw    V1, 4(A3)
sw    A0, 8(A3)
sw    A1, 0xc(A3)
addiu A2, A2, 0x10
bne   A2, S6, L8010F41C
 addiu A3, A3, 0x10
mtc1  S2, F12
      NOP
jal   0x8008EF20
 cvt.s.w F12, F12
add.s F0, F0, F0
add.s F0, F0, F22
andi  V0, S0, 1
beqz  V0, L8010F4D8
 swc1  F0, 0x10(S1)
lw    A1, 0xc(S1)
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x80089A10
 addiu A0, SP, 0x18
lwc1  F0, 0x18(SP)
sub.s F0, F0, F20
swc1  F0, 0x18(SP)
lwc1  F0, 0x1c(SP)
add.s F0, F0, F20
swc1  F0, 0x1c(SP)
srl   V1, S0, 0x1f
addu  V1, S0, V1
sra   V1, V1, 1
andi  V1, V1, 7
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 2
addu  V0, S4, V0
sw    V0, 0x10(SP)
sw    R0, 0x14(SP)
addiu A0, SP, 0x18
lui A1, 0x3dcc
ori A1, A1, 0xcccd
lui   A2, 0x4000
jal   func_8010F088
 li    A3, 1
L8010F4D8:
jal   SleepVProcess
 addiu S2, S2, 0x14
slti  V0, S2, 0x438
bnez  V0, L8010F410
 addiu S0, S0, 1
jal   0x800FFAEC
 move  A0, S5
li    A0, 255
li    A1, 255
jal   0x800620C8
 li    A2, 255
lb    V0, 5(S7)
addu  V0, S7, V0
lb    V0, 6(V0)
sll   V0, V0, 1
lui   A0, hi(star_space_indices)
addu  A0, A0, V0
lh    A0, lo(star_space_indices)(A0)
addiu A1, SP, 0x88
jal   0x800EB24C
 addiu A2, SP, 0x89
lbu   V0, 0x88(SP)
sb    V0, 0xf(S3)
lbu   V0, 0x89(SP)
sb    V0, 0x10(S3)
lbu   V0, 0x88(SP)
sb    V0, 0x11(S3)
lbu   V0, 0x89(SP)
addiu V0, V0, 1
sb    V0, 0x12(S3)
lbu   V0, 0x88(SP)
sb    V0, 0x15(S3)
lbu   V0, 0x89(SP)
addiu V0, V0, -1
sb    V0, 0x16(S3)
lbu   V0, 0x17(S3)
andi  V0, V0, 0xfe
jal   0x800FC9E0
 sb    V0, 0x17(S3)
jal   PlaySound
 li    A0, 296
jal   0x8004A0E0
       NOP
lui   S4, hi(D_8011F940)
addiu S4, S4, lo(D_8011F940)
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F22
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F20
addiu S3, SP, 0x90
addiu A3, SP, 0x90
L8010F5A4:
lui   A2, hi(D_8011F8E0)
addiu A2, A2, lo(D_8011F8E0)
L8010F5AC:
lw    V0, 0(A2)
lw    V1, 4(A2)
lw    A0, 8(A2)
lw    A1, 0xc(A2)
sw    V0, 0(A3)
sw    V1, 4(A3)
sw    A0, 8(A3)
sw    A1, 0xc(A3)
addiu A2, A2, 0x10
bne   A2, S4, L8010F5AC
 addiu A3, A3, 0x10
mtc1  S2, F12
      NOP
jal   0x8008EF20
 cvt.s.w F12, F12
add.s F0, F0, F0
add.s F0, F0, F22
andi  V0, S0, 1
beqz  V0, L8010F668
 swc1  F0, 0x10(S1)
lw    A1, 0xc(S1)
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x80089A10
 addiu A0, SP, 0x18
lwc1  F0, 0x18(SP)
sub.s F0, F0, F20
swc1  F0, 0x18(SP)
lwc1  F0, 0x1c(SP)
add.s F0, F0, F20
swc1  F0, 0x1c(SP)
srl   V1, S0, 0x1f
addu  V1, S0, V1
sra   V1, V1, 1
andi  V1, V1, 7
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 2
addu  V0, S3, V0
sw    V0, 0x10(SP)
sw    R0, 0x14(SP)
addiu A0, SP, 0x18
lui   A1, 0x3dcc
ori   A1, A1, 0xcccd
lui   A2, 0x4000
jal   func_8010F088
 li    A3, 1
L8010F668:
jal   SleepVProcess
 addiu S0, S0, 1
addiu S2, S2, 0x14
li    V0, 1280
bnel  S2, V0, L8010F5A4
 addiu A3, SP, 0x90
jal   0x80003A70
 move  A0, R0
j     L8010F5A4
 addiu A3, SP, 0x90
lw    RA, 0x110(SP)
lw    S7, 0x10c(SP)
lw    S6, 0x108(SP)
lw    S5, 0x104(SP)
lw    S4, 0x100(SP)
lw    S3, 0xfc(SP)
lw    S2, 0xf8(SP)
lw    S1, 0xf4(SP)
lw    S0, 0xf0(SP)
ldc1  F22, 0x120(SP)
ldc1  F20, 0x118(SP)
jr    RA
 addiu SP, SP, 0x128

func_8010F6C4:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
li    V0, 1
lui   AT, hi(CORE_800A12D0)
sb    V0, lo(CORE_800A12D0)(AT)
lui   V0, hi(CORE_800CD05D)
lb    V0, lo(CORE_800CD05D)(V0)
lui   AT, hi(CORE_800CD05E)
addu  AT, AT, V0
lb    V0, lo(CORE_800CD05E)(AT)
sll   V0, V0, 1
lui   A0, hi(star_space_indices)
addu  A0, A0, V0
lh    A0, lo(star_space_indices)(A0)
jal   0x800EBAC8
 li    A1, 1
lui   AT, hi(CORE_800A12D0)
jal   0x800FF834
 sb    R0, lo(CORE_800A12D0)(AT)
sll   V0, V0, 0x10
bltz  V0, L8010F724
       NOP
jal   SleepProcess
 li    A0, -1
L8010F724:
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

func_8010F730:
addiu SP, SP, -0x28
sw    RA, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
lui   S2, hi(current_player_index)
lb    S2, lo(current_player_index)(S2)
jal   GetPlayerStruct
 li    A0, -1
jal   func_8010FE54
 move  S1, V0
jal   0x800DCA64
 move  A0, S2
li    A0, -1
jal   0x800FF900
 li    A1, 3
jal   0x80035FDC
 li    A0, 17
jal   0x800DC128
 move  A0, S2
jal   0x800EF0D8
 li    A0, 1
jal   0x8004A0E0
 move  S0, V0
jal   0x800FC8A4
 sll   S0, S0, 0x10
jal   SleepProcess
 li    A0, 5
jal   SleepProcess
 li    A0, 25
move  A0, S2
li    A1, 2
jal   0x800F2304
 move  A2, R0
sll   V0, S2, 3
subu  V0, V0, S2
sll   V0, V0, 3
lui   A0, hi(CORE_800D112C)
addu  A0, A0, V0
lw    A0, lo(CORE_800D112C)(A0)
lui   A1, 0x4000
lui   A2, 0xbe99
jal   0x800EE688
 ori A2, A2, 0x999a
jal   SleepProcess
 li    A0, 5
jal   0x800DCBCC
 move  A0, S2
li    V0, 2
sw    V0, 0x10(SP)
move  A0, S2
li    A1, -1
move  A2, R0
jal   0x800F2388
 li    A3, 10
jal   SleepProcess
 li    A0, 20
jal   0x800E22B4
       NOP
jal   0x800E2354
 sra   A0, S0, 0x10
jal   0x800E2904
       NOP
jal   0x8003602C
 li    A0, 17
jal   0x800DC128
 move  A0, S2
sll   V0, V0, 0x10
jal   0x8004AD50
 sra   A0, V0, 0x10
jal   0x800DC06C
 move  A0, S2
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
move  A0, S2
jal   0x800DCD2C
 li    A1, -1
lbu   A0, 0xf(S1)
sll   A0, A0, 0x18
sra   A0, A0, 0x18
lbu   A1, 0x10(S1)
sll   A1, A1, 0x18
sra   A1, A1, 0x18
andi  A0, A0, 0xffff
jal   GetAbsSpaceIndexFromChainSpaceIndex
 andi  A1, A1, 0xffff
sll   S0, V0, 0x10
sra   S0, S0, 0x10
jal   0x800EBCBC
 move  A0, S0
move  A0, S0
jal   0x800EBAC8
 li    A1, 1
jal   0x800FF834
       NOP
sll   V0, V0, 0x10
bltz  V0, L8010F8D0
       NOP
jal   SleepProcess
 li    A0, -1
L8010F8D0:
jal   0x800DAA40
 move  A0, S2
lw    RA, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x28

func_8010F8F0:
addiu SP, SP, -0x38
sw    RA, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
sdc1  F22, 0x30(SP)
sdc1  F20, 0x28(SP)
jal   0x8004EE68
 li    S1, 1
lw    S0, 0x8c(V0)
lh    V0, 4(S0)
lh    V1, 0(S0)
subu  V0, V0, V1
mtc1  V0, F22
      NOP
cvt.s.w F22, F22
lh    V0, 8(S0)
mtc1  V0, F0
      NOP
cvt.s.w F0, F0
div.s F22, F22, F0
lh    V0, 6(S0)
lh    V1, 2(S0)
subu  V0, V0, V1
mtc1  V0, F20
      NOP
cvt.s.w F20, F20
jal   0x800E4A7C
 div.s F20, F20, F0
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
addiu A2, SP, 0x10
jal   0x800F6848
 addiu A3, SP, 0x14
lh    V0, 8(S0)
blez  V0, L8010FA78
       NOP
L8010F984:
lh    A0, 0xa(S0)
li    V0, -1
beq   A0, V0, L8010F9FC
 move  A1, R0
lh    V0, 0(S0)
mtc1  V0, F2
      NOP
cvt.s.w F2, F2
mtc1  S1, F4
      NOP
cvt.s.w F4, F4
mul.s F0, F22, F4
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A2, F0
      NOP
sll   A2, A2, 0x10
lh    V0, 2(S0)
mtc1  V0, F0
      NOP
cvt.s.w F0, F0
mul.s F4, F20, F4
add.s F0, F0, F4
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
L8010F9FC:
jal   0x800E4A7C
       NOP
mtc1  S1, F4
      NOP
cvt.s.w F4, F4
mul.s F0, F22, F4
lwc1  F2, 0x10(SP)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
mul.s F4, F20, F4
lwc1  F0, 0x14(SP)
add.s F4, F4, F0
trunc.w.s F0, F4
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
sra   A2, A2, 0x10
jal   0x800F688C
 sra   A3, A3, 0x10
jal   SleepVProcess
 addiu S1, S1, 1
lh    V0, 8(S0)
slt   V0, V0, S1
beqz  V0, L8010F984
       NOP
L8010FA78:
lh    A0, 0xa(S0)
li    V0, -1
beq   A0, V0, L8010FA98
       NOP
lh    A2, 4(S0)
lh    A3, 6(S0)
jal   0x80054904
 move  A1, R0
L8010FA98:
jal   0x800E4A7C
       NOP
lh    V1, 4(S0)
mtc1  V1, F0
      NOP
cvt.s.w F0, F0
lwc1  F2, 0x10(SP)
add.s F0, F0, F2
lh    V1, 0(S0)
mtc1  V1, F2
      NOP
cvt.s.w F2, F2
sub.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lh    V1, 6(S0)
mtc1  V1, F0
      NOP
cvt.s.w F0, F0
lwc1  F2, 0x14(SP)
add.s F0, F0, F2
lh    V1, 2(S0)
mtc1  V1, F2
      NOP
cvt.s.w F2, F2
sub.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
sra   A2, A2, 0x10
jal   0x800F688C
 sra   A3, A3, 0x10
jal   EndProcess
 move  A0, R0
lw    RA, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
ldc1  F22, 0x30(SP)
ldc1  F20, 0x28(SP)
jr    RA
 addiu SP, SP, 0x38

func_8010FB54:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S7, 0x2c(SP)
sw    S6, 0x28(SP)
sw    S5, 0x24(SP)
sw    S4, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S7, A0
lw    S0, 0x4c(SP)
move  S1, A1
move  S2, A2
move  S3, A3
lhu   S4, 0x4a(SP)
move  S6, S0
lui   A0, hi(func_8010F8F0)
addiu A0, A0, lo(func_8010F8F0)
li    A1, 16386
move  A2, R0
jal   InitProcess
 li    A3, 64
move  S5, V0
lw    A0, 0x18(S5)
jal   0x800360F0
 li    A1, 16
move  V1, V0
sw    V1, 0x8c(S5)
sh    S1, 0(V1)
sh    S2, 2(V1)
sh    S3, 4(V1)
sll   S0, S0, 0x10
sra   S0, S0, 0x10
li    V0, -1
bne   S0, V0, L8010FBEC
 sh    S4, 6(V1)
li    S6, 25
L8010FBEC:
sh    S6, 8(V1)
sh    S7, 0xa(V1)
move  V0, S5
lw    RA, 0x30(SP)
lw    S7, 0x2c(SP)
lw    S6, 0x28(SP)
lw    S5, 0x24(SP)
lw    S4, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x38

D_8010FC24:
addiu SP, SP, -0x30
sw    RA, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 325
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
addiu A2, SP, 0x18
jal   0x800F6748
 addiu A3, SP, 0x1c
jal   0x8004EE68
 li    S2, 255
move  S0, V0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lwc1  F0, 0x18(SP)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lwc1  F0, 0x1c(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V0, V0, 3
lui   AT, hi(D_8011E354)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E354)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E358)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E358)(AT)
trunc.w.s F2, F0
mfc1  V0, F2
      NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x10(SP)
li    V0, -1
sw    V0, 0x14(SP)
sra   A1, A1, 0x10
sra   A2, A2, 0x10
jal   func_8010FB54
 sra   A3, A3, 0x10
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 li    S0, 1
jal   SleepProcess
 li    A0, 10
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
move  A2, R0
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
L8010FD7C:
jal   0x800E4A7C
       NOP
sll   A2, S0, 1
addu  A2, A2, S0
sll   A2, A2, 3
addu  A2, A2, S0
subu  A2, S2, A2
sll   A2, A2, 0x10
lb    A0, 0xf(S1)
move  A1, V0
jal   0x800F68E0
 sra   A2, A2, 0x10
jal   0x800E4A7C
 addiu S0, S0, 1
lb    A0, 0xf(S1)
move  A1, V0
lui   A3, 0x4000
jal   0x800F6780
 move  A2, R0
jal   SleepVProcess
       NOP
slti  V0, S0, 0xa
bnez  V0, L8010FD7C
       NOP
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S1)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
lb    A1, 0xf(S1)
jal   0x8004ACE0
 li    A0, 628
jal   SleepProcess
 li    A0, 50
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
lw    RA, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x30

func_8010FE54:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 325
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
addiu A2, SP, 0x18
jal   0x800F6748
 addiu A3, SP, 0x1c
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lwc1  F0, 0x18(SP)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lwc1  F0, 0x1c(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V0, V0, 3
lui   AT, hi(D_8011E374)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E374)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E378)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E378)(AT)
trunc.w.s F2, F0
mfc1  V0, F2
      NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x10(SP)
li    V0, -1
sw    V0, 0x14(SP)
sra   A1, A1, 0x10
sra   A2, A2, 0x10
jal   func_8010FB54
 sra   A3, A3, 0x10
jal   SleepProcess
 li    A0, 20
li    S1, 1
li    S2, 255
L8010FF6C:
jal   0x800E4A7C
 sll   S0, S1, 1
addu  S0, S0, S1
sll   S0, S0, 3
addu  S0, S0, S1
subu  S0, S2, S0
sll   A2, S0, 0x10
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 sra   A2, A2, 0x10
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 andi  A2, S0, 0xffff
jal   SleepVProcess
 addiu S1, S1, 1
slti  V0, S1, 0xa
bnez  V0, L8010FF6C
       NOP
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   SleepProcess
 li    A0, 2
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
lw    RA, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

func_80110024:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 325
jal   0x800E4A7C
 li    S1, 255
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
addiu A2, SP, 0x18
jal   0x800F6848
 addiu A3, SP, 0x1c
jal   0x800E4A7C
       NOP
li    A0, -1
move  A1, V0
addiu A2, SP, 0x20
jal   0x800F6E4C
 addiu A3, SP, 0x24
jal   0x8004EE68
       NOP
move  S0, V0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lwc1  F0, 0x18(SP)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lwc1  F0, 0x1c(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lh    A3, 0x22(SP)
lh    V0, 0x26(SP)
sw    V0, 0x10(SP)
li    V0, -1
sw    V0, 0x14(SP)
sra   A1, A1, 0x10
jal   func_8010FB54
 sra   A2, A2, 0x10
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 li    S0, 1
sll   A2, S0, 1
L80110120:
addu  A2, A2, S0
sll   A2, A2, 3
addu  A2, A2, S0
subu  A2, S1, A2
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0xa
bnez  V0, L80110120
 sll   A2, S0, 1
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 move  A2, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
lw    RA, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
jr    RA
 addiu SP, SP, 0x38

D_80110194:
addiu SP, SP, -0x40
sw    RA, 0x34(SP)
sw    S4, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F20, 0x38(SP)
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 325
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
addiu A2, SP, 0x18
jal   0x800F6748
 addiu A3, SP, 0x1c
jal   0x8004EE68
 li    S1, 1
move  S0, V0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lwc1  F0, 0x18(SP)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lwc1  F0, 0x1c(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V0, V0, 3
lui   AT, hi(D_8011E354)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E354)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E358)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E358)(AT)
trunc.w.s F2, F0
mfc1  V0, F2
      NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x10(SP)
li    V0, -1
sw    V0, 0x14(SP)
sra   A1, A1, 0x10
sra   A2, A2, 0x10
jal   func_8010FB54
 sra   A3, A3, 0x10
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 li    S0, 255
jal   SleepProcess
 li    A0, 10
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
move  A2, R0
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
sll   A2, S1, 1
L801102FC:
addu  A2, A2, S1
sll   A2, A2, 3
addu  A2, A2, S1
subu  A2, S0, A2
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S1, S1, 1
slti  V0, S1, 0xa
bnez  V0, L801102FC
 sll   A2, S1, 1
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   S0, hi(p1_item1)
addiu S0, S0, lo(p1_item1)
addu  V1, V1, S0
addu  V1, V1, V0
lb    V1, 0(V1)
li    V0, 11
beq   V1, V0, L801103B0
       NOP
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
addu  V1, V1, S0
addu  V1, V1, V0
lb    V1, 0(V1)
li    V0, 8
bne   V1, V0, L801103BC
 move  S1, R0
L801103B0:
jal   PlaySound
 li    A0, 321
move  S1, R0
L801103BC:
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
L801103C4:
jal   0x800E4A7C
       NOP
mtc1  S1, F12
      NOP
cvt.s.w F12, F12
jal   0x8008EF20
 move  S0, V0
lb    A0, 0xf(S3)
mul.s F0, F0, F20
mfc1  A2, F0
      NOP
jal   0x800F6928
 move  A1, S0
jal   SleepVProcess
 addiu S1, S1, 0x1e
slti  V0, S1, 0x439
bnez  V0, L801103C4
 li    S2, 1
li    S4, 255
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
L80110418:
jal   0x800E4A7C
       NOP
sll   A2, S2, 1
addu  A2, A2, S2
sll   A2, A2, 3
addu  A2, A2, S2
subu  A2, S4, A2
sll   A2, A2, 0x10
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 sra   A2, A2, 0x10
jal   0x800E4A7C
 addiu S2, S2, 1
mtc1  S1, F12
      NOP
cvt.s.w F12, F12
jal   0x8008EF20
 move  S0, V0
lb    A0, 0xf(S3)
mul.s F0, F0, F20
mfc1  A2, F0
      NOP
jal   0x800F6928
 move  A1, S0
jal   SleepVProcess
 addiu S1, S1, 0x1e
slti  V0, S2, 0xa
bnez  V0, L80110418
       NOP
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
lw    RA, 0x34(SP)
lw    S4, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x40

D_801104E0:
addiu SP, SP, -0x30
sw    RA, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 325
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
addiu A2, SP, 0x18
jal   0x800F6748
 addiu A3, SP, 0x1c
jal   0x8004EE68
 li    S1, 255
move  S0, V0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lwc1  F0, 0x18(SP)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lwc1  F0, 0x1c(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V0, V0, 3
lui   AT, hi(D_8011E354)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E354)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E358)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E358)(AT)
trunc.w.s F2, F0
mfc1  V0, F2
      NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x10(SP)
li    V0, -1
sw    V0, 0x14(SP)
sra   A1, A1, 0x10
sra   A2, A2, 0x10
jal   func_8010FB54
 sra   A3, A3, 0x10
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 li    S0, 1
jal   SleepProcess
 li    A0, 10
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
move  A2, R0
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
sll   A2, S0, 1
L80110630:
addu  A2, A2, S0
sll   A2, A2, 3
addu  A2, A2, S0
subu  A2, S1, A2
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0xa
bnez  V0, L80110630
 sll   A2, S0, 1
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 move  A2, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
lw    RA, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x30

func_801106A4:
addiu SP, SP, -0x58
sw    RA, 0x34(SP)
sw    S6, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
sdc1  F26, 0x50(SP)
sdc1  F24, 0x48(SP)
sdc1  F22, 0x40(SP)
sdc1  F20, 0x38(SP)
move  S2, A0
move  S3, A1
move  S1, A2
lw    S6, 0x68(SP)
li    V0, 2
bne   S6, V0, L801106FC
 move  S4, A3
jal   PlaySound
 li    A0, 325
L801106FC:
move  A0, S2
move  A1, S3
addiu A2, SP, 0x10
jal   0x800F6848
 addiu A3, SP, 0x14
lwc1  F2, 0(S4)
lwc1  F0, 0x10(SP)
sub.s F22, F2, F0
mtc1  S1, F4
      NOP
cvt.s.w F4, F4
div.s F22, F22, F4
lwc1  F2, 4(S4)
lwc1  F0, 0x14(SP)
sub.s F20, F2, F0
div.s F20, F20, F4
beqz  S1, L80110830
 li    S0, 2
xori  V0, S6, 1
sltiu S5, V0, 1
li    AT, 0x3D8F0000 ; 0.069824
ori AT, AT, 0x5c29
mtc1  AT, F26
li    AT, 0x3E990000 ; 0.298828
ori AT, AT, 0x999a
mtc1  AT, F24
L80110764:
lwc1  F2, 0x10(SP)
add.s F2, F22, F2
swc1  F2, 0x10(SP)
lwc1  F0, 0x14(SP)
add.s F0, F20, F0
swc1  F0, 0x14(SP)
trunc.w.s F4, F2
mfc1  A2, F4
      NOP
sll   A2, A2, 0x10
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S2
move  A1, S3
sra   A2, A2, 0x10
jal   0x800F688C
 sra   A3, A3, 0x10
slti  V0, S0, 0xb
and   V0, S5, V0
beqz  V0, L80110820
 sll   A2, S0, 1
addu  A2, A2, S0
sll   A2, A2, 3
addu  A2, A2, S0
sll   A2, A2, 0x10
move  A0, S2
move  A1, S3
jal   0x800F68E0
 sra   A2, A2, 0x10
mtc1  S0, F4
      NOP
cvt.s.w F4, F4
mul.s F4, F4, F26
cvt.d.s F2, F4
lui   AT, hi(D_8011F940)
ldc1  F0, lo(D_8011F940)(AT)
add.d F2, F2, F0
move  A0, S2
add.s F4, F4, F24
mfc1  A2, F4
cvt.s.d F2, F2
mfc1  A3, F2
      NOP
jal   0x800F696C
 move  A1, S3
L80110820:
jal   SleepVProcess
 addiu S1, S1, -1
bnez  S1, L80110764
 addiu S0, S0, 1
L80110830:
lwc1  F0, 0(S4)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lwc1  F0, 4(S4)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S2
move  A1, S3
sra   A2, A2, 0x10
jal   0x800F688C
 sra   A3, A3, 0x10
bnez  S6, L80110904
 li    S0, 1
li    S1, 255
li    AT, 0x3DCC0000 ; 0.099609
ori   AT, AT, 0xcccd
mtc1  AT, F22
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
sll   A2, S0, 1
L80110890:
addu  A2, A2, S0
sll   A2, A2, 3
addu  A2, A2, S0
subu  A2, S1, A2
sll   A2, A2, 0x10
move  A0, S2
move  A1, S3
jal   0x800F68E0
 sra   A2, A2, 0x10
mtc1  S0, F0
      NOP
cvt.s.w F0, F0
mul.s F0, F0, F22
sub.s F0, F20, F0
move  A0, S2
mfc1  A2, F0
mfc1  A3, F0
      NOP
jal   0x800F696C
 move  A1, S3
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0xa
bnez  V0, L80110890
 sll   A2, S0, 1
move  A0, S2
move  A1, S3
jal   0x800F68E0
 move  A2, R0
L80110904:
lw    RA, 0x34(SP)
lw    S6, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
ldc1  F26, 0x50(SP)
ldc1  F24, 0x48(SP)
ldc1  F22, 0x40(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x58

D_8011093C:
addiu SP, SP, -0x48
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F28, 0x40(SP)
sdc1  F26, 0x38(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
sdc1  F20, 0x20(SP)
jal   GetPlayerStruct
 li    A0, -1
jal   0x800E6264
 move  S1, V0
lui   A0, hi(CORE_801011FC)
jal   0x800D9B24
 lw    A0, lo(CORE_801011FC)(A0)
lui   V1, hi(CORE_801011FC)
lw    V1, lo(CORE_801011FC)(V1)
lw    V0, 0x3c(V1)
sw    R0, 0x30(V0)
lw    V0, 0x3c(V1)
sw    R0, 0x34(V0)
lw    V0, 0x3c(V1)
sw    R0, 0x38(V0)
li    A0, -1
jal   0x800FF900
 li    A1, 3
jal   PlaySound
 li    A0, 323
li    A0, 34
jal   0x800D90C8
 move  A1, R0
move  S0, V0
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 384
jal   0x8001C258
 move  A2, R0
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001C8E4
 li    A1, 6144
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
jal   0x8001C448
 lh    A0, 0(V0)
lw    A1, 0x24(S1)
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
mtc1  R0, F22
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
lui   AT, hi(D_8011F948)
ldc1  F24, lo(D_8011F948)(AT)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F26
L80110A30:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S0, 0x24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F28
cvt.d.s F0, F20
add.d F0, F0, F24
cvt.s.d F20, F0
c.lt.s F20, F26
      NOP
bc1t  L80110A30
       NOP
jal   0x800D9B24
 lw    A0, 0x24(S1)
lui   A0, hi(CORE_801011FC)
jal   0x800D9AA4
 lw    A0, lo(CORE_801011FC)(A0)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
c.le.s F0, F20
      NOP
bc1f  L80110B58
       NOP
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
lui   AT, hi(D_8011F950)
ldc1  F24, lo(D_8011F950)(AT)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F26
L80110AE8:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S0, 0x24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F28
cvt.d.s F0, F20
sub.d F0, F0, F24
cvt.s.d F20, F0
c.le.s F26, F20
      NOP
bc1t  L80110AE8
       NOP
L80110B58:
jal   0x800D9B54
 move  A0, S0
jal   SleepProcess
 li    A0, 20
lui   A1, hi(current_player_index)
lb    A1, lo(current_player_index)(A1)
jal   0x8004ACE0
 li    A0, 628
li    A0, 5
jal   0x800E6420
 li    A1, 2
jal   SleepProcess
 li    A0, 40
li    A0, -1
jal   0x800E6420
 li    A1, 2
jal   0x800EC414
 li    A0, 14868
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F28, 0x40(SP)
ldc1  F26, 0x38(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x48

D_80110BC8:
addiu SP, SP, -0x58
sw    RA, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F28, 0x50(SP)
sdc1  F26, 0x48(SP)
sdc1  F24, 0x40(SP)
sdc1  F22, 0x38(SP)
sdc1  F20, 0x30(SP)
jal   GetPlayerStruct
 li    A0, -1
move  S1, V0
li    A0, -1
jal   0x800E6420
 li    A1, 2
jal   0x800ECC0C
 addiu A0, SP, 0x10
lw    A2, 0x24(S1)
addiu A2, A2, 0x18
move  A0, A2
addiu A1, SP, 0x10
jal   0x800ED128
 li    A3, 8
jal   SleepProcess
 li    A0, 8
jal   PlaySound
 li    A0, 323
li    A0, 34
jal   0x800D90C8
 move  A1, R0
move  S0, V0
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 384
jal   0x8001C258
 move  A2, R0
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001C8E4
 li    A1, 6144
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
jal   0x8001C448
 lh    A0, 0(V0)
lw    A1, 0x24(S1)
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
mtc1  R0, F22
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
lui   AT, hi(D_8011F958)
ldc1  F24, lo(D_8011F958)(AT)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F26
L80110CB4:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S0, 0x24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F28
cvt.d.s F0, F20
add.d F0, F0, F24
cvt.s.d F20, F0
c.lt.s F20, F26
      NOP
bc1t  L80110CB4
       NOP
jal   0x800D9AA4
 lw    A0, 0x24(S1)
jal   0x800E639C
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
c.le.s F0, F20
      NOP
bc1f  L80110DD8
       NOP
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
lui   AT, hi(D_8011F960)
ldc1  F24, lo(D_8011F960)(AT)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F26
L80110D68:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S0, 0x24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F28
cvt.d.s F0, F20
sub.d F0, F0, F24
cvt.s.d F20, F0
c.le.s F26, F20
      NOP
bc1t  L80110D68
       NOP
L80110DD8:
jal   0x800D9B54
 move  A0, S0
lw    RA, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F28, 0x50(SP)
ldc1  F26, 0x48(SP)
ldc1  F24, 0x40(SP)
ldc1  F22, 0x38(SP)
ldc1  F20, 0x30(SP)
jr    RA
 addiu SP, SP, 0x58

D_80110E08:
addiu SP, SP, -0x48
sw    RA, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F22, 0x40(SP)
jal   0x8004EE68
 sdc1  F20, 0x38(SP)
lw    S1, 0x8c(V0)
li    A0, -1
li    A1, 1
jal   0x800FFA4C
 li    A2, 5
move  S3, V0
li    A0, 1
jal   0x8005279C
 move  A1, R0
sll   V0, V0, 0x10
sra   S2, V0, 0x10
move  S0, S2
move  A0, S0
move  A1, R0
lui   A2, hi(D_8011FB5E)
lh    A2, lo(D_8011FB5E)(A2)
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 18304
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 4096
jal   0x800E4A7C
 sll   S1, S1, 2
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
addiu A2, SP, 0x18
jal   0x800F6848
 addiu A3, SP, 0x1c
lwc1  F2, 0x18(SP)
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F4
      NOP
add.s F2, F2, F4
swc1  F2, 0x18(SP)
lwc1  F0, 0x1c(SP)
sub.s F0, F0, F4
swc1  F0, 0x1c(SP)
trunc.w.s F4, F2
mfc1  A2, F4
      NOP
sll   A2, A2, 0x10
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
sw    R0, 0x10(SP)
move  A0, S0
move  A1, R0
li    A2, 255
jal   0x80055420
 li    A3, 255
li    S0, 255
lui   AT, hi(D_8011E440)
addu  AT, AT, S1
lwc1  F20, lo(D_8011E440)(AT)
cvt.s.w F20, F20
li    AT, 0x40A00000 ; 5.000000
mtc1  AT, F22
move  S1, S2
L80110F44:
jal   0x8008E3F0
 mov.s F12, F20
mul.s F0, F0, F22
lwc1  F2, 0x18(SP)
add.s F0, F0, F2
swc1  F0, 0x18(SP)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
lwc1  F2, 0x1c(SP)
sub.s F2, F2, F0
swc1  F2, 0x1c(SP)
lwc1  F0, 0x18(SP)
trunc.w.s F4, F0
mfc1  A2, F4
      NOP
sll   A2, A2, 0x10
trunc.w.s F0, F2
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S1
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
move  A0, S1
move  A1, R0
jal   0x80055458
 andi  A2, S0, 0xffff
jal   SleepVProcess
 addiu S0, S0, -0x14
bgez  S0, L80110F44
 move  A0, S2
move  S0, S2
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   0x800FFAEC
 move  A0, S3
jal   0x800525C8
 move  A0, S0
jal   EndProcess
 move  A0, R0
lw    RA, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F22, 0x40(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x48

D_80111018:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
lui A0, 0x13
jal   ReadMainFS
 ori A0, A0, 0x1b8
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   V0, V0, 0x10
lui   AT, hi(D_8011FB5C)
sw    V0, lo(D_8011FB5C)(AT)
jal   FreeMainFS
 move  A0, S0
jal   D_801104E0
       NOP
sw    R0, 0x10(SP)
func_80111074:
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x3A01 ; "Which shop will you call?"
move  A2, R0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
lui   A0, hi(D_8011E3D4)
addiu A0, A0, lo(D_8011E3D4)
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 move  A1, R0
jal   0x800EC6C8
 move  S2, V0
jal   0x800EC6EC
       NOP
slti  V0, S2, 2
beqz  V0, L801110D0
       NOP
bltz  S2, L801110D0
 addiu V0, S2, 1
lui   AT, hi(CORE_800CD0AC)
j     L80111128
 sh    V0, lo(CORE_800CD0AC)(AT)
L801110D0:
lui   A0, hi(func_8010A474)
addiu A0, A0, lo(func_8010A474)
move  A1, R0
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
move  A0, S0
jal   0x80047B80
 li    A1, 128
jal   func_80106FE8
       NOP
li    V0, 1
lui   AT, hi(CORE_800CB99C)
jal   0x80049FB8
 sb    V0, lo(CORE_800CB99C)(AT)
jal   EndProcess
 move  A0, S0
jal   0x800FC8A4
       NOP
j     func_80111074
 sw    R0, 0x10(SP)
L80111128:
jal   SleepProcess
 li    A0, 30
jal   PlaySound
 li    A0, 327
move  S1, R0
L8011113C:
lui   A0, hi(D_80110E08)
addiu A0, A0, lo(D_80110E08)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
jal   0x8004EE68
 sw    S1, 0x8c(S0)
move  A0, V0
jal   0x8004ED30
 move  A1, S0
jal   SleepProcess
 li    A0, 3
addiu S1, S1, 1
slti  V0, S1, 5
bnez  V0, L8011113C
       NOP
jal   0x8004EE18
 move  S1, R0
jal   SleepProcess
 li    A0, 20
L80111194:
lui   A0, hi(D_80110E08)
addiu A0, A0, lo(D_80110E08)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
jal   0x8004EE68
 sw    S1, 0x8c(S0)
move  A0, V0
jal   0x8004ED30
 move  A1, S0
jal   SleepProcess
 li    A0, 3
addiu S1, S1, 1
slti  V0, S1, 5
bnez  V0, L80111194
       NOP
jal   0x8004EE18
       NOP
jal   SleepProcess
 li    A0, 20
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S3)
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
lui   A0, hi(D_8011FB5E)
jal   FreeGraphics
 lh    A0, lo(D_8011FB5E)(A0)
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
bnez  S2, L801112A4
 li    A0, 672
lb    V0, 0xf(S3)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
slti  V0, V0, 5
bnez  V0, L801112A4
 li    A0, 666
lb    V1, 3(S3)
lb    V0, 2(S3)
bne   V1, V0, L801112A4
 li    A0, 664
li    A0, 666
L801112A4:
jal   PlaySound
       NOP
jal   item_shop_event
       NOP
lui   AT, hi(CORE_800CD0AC)
sh    R0, lo(CORE_800CD0AC)(AT)
lw    RA, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

; Item that calls bowser
D_801112D8:
addiu SP, SP, -0x30
sw    RA, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
lui   S2, hi(CORE_800CD058)
addiu S2, S2, lo(CORE_800CD058)
lui A0, 0x13
jal   ReadMainFS
 ori A0, A0, 0x1b8
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   V0, V0, 0x10
lui   AT, hi(D_8011FB5C)
sw    V0, lo(D_8011FB5C)(AT)
jal   FreeMainFS
 move  A0, S0
jal   D_801104E0
 move  S1, R0
jal   SleepProcess
 li    A0, 30
jal   PlaySound
 li    A0, 327
L8011133C:
lui   A0, hi(D_80110E08)
addiu A0, A0, lo(D_80110E08)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
jal   0x8004EE68
 sw    S1, 0x8c(S0)
move  A0, V0
jal   0x8004ED30
 move  A1, S0
jal   SleepProcess
 li    A0, 3
addiu S1, S1, 1
slti  V0, S1, 5
bnez  V0, L8011133C
       NOP
jal   0x8004EE18
 move  S1, R0
jal   SleepProcess
 li    A0, 20
L80111394:
lui   A0, hi(D_80110E08)
addiu A0, A0, lo(D_80110E08)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
jal   0x8004EE68
 sw    S1, 0x8c(S0)
move  A0, V0
jal   0x8004ED30
 move  A1, S0
jal   SleepProcess
 li    A0, 3
addiu S1, S1, 1
slti  V0, S1, 5
bnez  V0, L80111394
       NOP
jal   0x8004EE18
       NOP
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 671
func_801113F4:
lui   V1, hi(p1_char)
addiu V1, V1, lo(p1_char)
lbu   A2, 0(V1)
lui   A0, hi(CORE_801014A0)
addiu A0, A0, lo(CORE_801014A0)
sll   A2, A2, 2
addu  A2, A2, A0
lbu   A3, 0x38(V1)
sll   A3, A3, 2
addu  A3, A3, A0
lbu   V0, 0x70(V1)
sll   V0, V0, 2
addu  V0, V0, A0
lw    V0, 0(V0)
sw    V0, 0x10(SP)
lbu   V0, 0xa8(V1)
sll   V0, V0, 2
addu  V0, V0, A0
lw    V0, 0(V0)
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 4
lw    A2, 0(A2)
lw    A3, 0(A3)
jal   0x800EC8EC ; ShowMessage
 li    A1, 0x3A0A ; "Hello? Yeah, this is Bowser. Who are you???"
lb    V1, 0xf(S2)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
beqz  V0, L80111488
 li    A0, 1
j     L80111490
 move  A1, R0
L80111488:
li    A0, 2
lb    A1, 0xf(S2)
L80111490:
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
       NOP
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
li    V0, 4
beq   S0, V0, L801114C4
 li    V0, 5
beq   S0, V0, L801114EC
 move  A1, R0
j     L80111540
 sll   V0, S0, 3

L801114C4:
jal   0x800EF0D8
 move  A0, R0
move  S0, V0
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 4
li    A1, 14860
j     func_80111578
 move  A2, R0

L801114EC:
lui   A0, hi(func_8010A474)
addiu A0, A0, lo(func_8010A474)
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
move  A0, S0
jal   0x80047B80
 li    A1, 128
jal   func_80106FE8
       NOP
li    V0, 1
lui   AT, hi(CORE_800CB99C)
jal   0x80049FB8
 sb    V0, lo(CORE_800CB99C)(AT)
jal   EndProcess
 move  A0, S0
jal   0x800FC8A4
       NOP
j     func_801113F4
       NOP
L80111540:
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_char)
addu  AT, AT, V0
lbu   V0, lo(p1_char)(AT)
sll   V0, V0, 2
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 4
li    A1, 14859
lui   A2, hi(CORE_801014A0)
addu  A2, A2, V0
lw    A2, lo(CORE_801014A0)(A2)
func_80111578:
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
jal   PlaySound
 li    A0, 668
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S2)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S2)
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S2)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
lui   A0, hi(D_8011FB5E)
jal   FreeGraphics
 lh    A0, lo(D_8011FB5E)(A0)
jal   0x800DEB2C
 lb    A0, 0xf(S2)
li    V1, 3
bne   V0, V1, L80111618
       NOP
jal   0x80035FDC
 li    A0, 23
j     L80111620
       NOP
L80111618:
jal   0x8003602C
 li    A0, 23
L80111620:
lui   AT, hi(CORE_800CD0B2)
jal   0x800FCA4C
 sh    S0, lo(CORE_800CD0B2)(AT)
li    A0, 80
move  A1, R0
li    A2, 3
jal   0x800FF794
 li    A3, 1
jal   0x800FC8A4
       NOP
jal   0x800FF7F0
 li    A0, 2
jal   0x8004A0E0
       NOP
jal   SleepProcess
 li    A0, -1
lw    RA, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x30

 ; Jeanie?
D_80111678:
addiu SP, SP, -0x160
sw    RA, 0x134(SP)
sw    FP, 0x130(SP)
sw    S7, 0x12c(SP)
sw    S6, 0x128(SP)
sw    S5, 0x124(SP)
sw    S4, 0x120(SP)
sw    S3, 0x11c(SP)
sw    S2, 0x118(SP)
sw    S1, 0x114(SP)
sw    S0, 0x110(SP)
sdc1  F28, 0x158(SP)
sdc1  F26, 0x150(SP)
sdc1  F24, 0x148(SP)
sdc1  F22, 0x140(SP)
sdc1  F20, 0x138(SP)
lui   S7, hi(CORE_800CD058)
addiu S7, S7, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S0, V0
li    A0, 60
jal   0x800D90C8
 move  A1, R0
move  S3, V0
move  A0, S3
li    A1, -1
jal   0x800D9CE8
 li    A2, 1
lw    V0, 0x3c(S3)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
lw    A1, 0x24(S0)
addiu A0, S3, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S3)
lhu   V0, 0xa(S3)
ori   V0, V0, 1
sh    V0, 0xa(S3)
addiu A0, S3, 0x24
move  A1, R0
move  A2, A1
jal   0x80089A10
 move  A3, A1
jal   0x800D9B24
 move  A0, S3
jal   func_8010FE54
       NOP
li    A0, -1
jal   PlayerHasItem
 li    A1, ITEM_LUCKY_LAMP
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
lui   A0, hi(current_player_index)
jal   FixUpPlayerItemSlots
 lb    A0, lo(current_player_index)(A0)
li    A0, 61
jal   0x800D90C8
 move  A1, R0
move  S1, V0
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
jal   0x8001FA68
 lh    A0, 0(V0)
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 li    A1, 255
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
lw    A1, 0x24(S0)
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x10(S1)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
lwc1  F0, 0x10(S1)
sub.s F0, F0, F22
L80111824:
jal   SleepVProcess
 swc1  F0, 0x10(S1)
lwc1  F0, 0x10(S1)
c.lt.s F20, F0
      NOP
      NOP
bc1tl L80111824
 sub.s F0, F0, F22
jal   PlaySound
 li    A0, 295
lui   A0, hi(CORE_800CDBC8)
lh    A0, lo(CORE_800CDBC8)(A0)
jal   0x800039A4
 li    A1, 180
li    A0, -1
li    A1, 3
jal   0x800FFA4C
 li    A2, 5
sw    V0, 0x10c(SP)
li    S4, 180
move  S0, R0
lui   S6, hi(D_8011F940)
addiu S6, S6, lo(D_8011F940)
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F22
addiu S2, SP, 0x28
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F20
addiu S5, SP, 0x48
L80111898:
addiu A3, SP, 0x48
lui   A2, hi(D_8011F8E0)
addiu A2, A2, lo(D_8011F8E0)
L801118A4:
lw    V0, 0(A2)
lw    V1, 4(A2)
lw    A0, 8(A2)
lw    A1, 0xc(A2)
sw    V0, 0(A3)
sw    V1, 4(A3)
sw    A0, 8(A3)
sw    A1, 0xc(A3)
addiu A2, A2, 0x10
bne   A2, S6, L801118A4
 addiu A3, A3, 0x10
mtc1  S4, F12
      NOP
jal   0x8008EF20
 cvt.s.w F12, F12
add.s F0, F0, F0
add.s F0, F0, F22
andi  V0, S0, 1
beqz  V0, L80111964
 swc1  F0, 0x10(S1)
lw    A1, 0xc(S1)
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x80089A10
 move  A0, S2
lwc1  F0, 0x28(SP)
sub.s F0, F0, F20
swc1  F0, 0x28(SP)
lwc1  F0, 0x2c(SP)
add.s F0, F0, F20
swc1  F0, 0x2c(SP)
srl   V1, S0, 0x1f
addu  V1, S0, V1
sra   V1, V1, 1
andi  V1, V1, 7
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 2
addu  V0, S5, V0
sw    V0, 0x10(SP)
li    V0, 1
sw    V0, 0x14(SP)
move  A0, S2
lui A1, 0x3dcc
ori A1, A1, 0xcccd
lui   A2, 0x4000
jal   func_8010F088
 li    A3, 1
L80111964:
jal   SleepVProcess
 addiu S4, S4, 0x14
slti  V0, S4, 0x438
bnez  V0, L80111898
 addiu S0, S0, 1
li    S2, 255
mtc1  R0, F20
lui   FP, hi(D_8011F940)
addiu FP, FP, lo(D_8011F940)
addiu S5, SP, 0x28
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F22
addiu S6, SP, 0xa8
addiu A3, SP, 0xa8
func_8011199C:
lui   A2, hi(D_8011F8E0)
addiu A2, A2, lo(D_8011F8E0)
L801119A4:
lw    V0, 0(A2)
lw    V1, 4(A2)
lw    A0, 8(A2)
lw    A1, 0xc(A2)
sw    V0, 0(A3)
sw    V1, 4(A3)
sw    A0, 8(A3)
sw    A1, 0xc(A3)
addiu A2, A2, 0x10
bne   A2, FP, L801119A4
 addiu A3, A3, 0x10
mtc1  S4, F12
      NOP
jal   0x8008EF20
 cvt.s.w F12, F12
add.s F0, F0, F0
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F2
      NOP
add.s F0, F0, F2
andi  V0, S0, 1
beqz  V0, L80111A70
 swc1  F0, 0x10(S1)
lw    A1, 0xc(S1)
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x80089A10
 move  A0, S5
lwc1  F0, 0x28(SP)
sub.s F0, F0, F22
swc1  F0, 0x28(SP)
lwc1  F0, 0x2c(SP)
add.s F0, F0, F22
swc1  F0, 0x2c(SP)
srl   V1, S0, 0x1f
addu  V1, S0, V1
sra   V1, V1, 1
andi  V1, V1, 7
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 2
addu  V0, S6, V0
sw    V0, 0x10(SP)
li    V0, 1
sw    V0, 0x14(SP)
move  A0, S5
lui A1, 0x3dcc
ori A1, A1, 0xcccd
lui   A2, 0x4000
jal   func_8010F088
 li    A3, 1
L80111A70:
bgtz  S2, L80111AD4
       NOP
jal   0x800D9B24
 move  A0, S1
jal   0x800D9A40
 move  A0, S3
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F0
      NOP
add.s F20, F20, F0
swc1  F20, 0x2c(S3)
swc1  F20, 0x28(S3)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
c.lt.s F0, F20
      NOP
      NOP
bc1f  L80111AEC
 swc1  F20, 0x24(S3)
jal   0x8004A520
 li    A0, 61 ; Jeanie's Theme
j     func_80111AFC
       NOP
L80111AD4:
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 andi  A1, S2, 0xff
addiu S2, S2, -0xc
L80111AEC:
jal   SleepVProcess
 addiu S0, S0, 1
j     func_8011199C
 addiu A3, SP, 0xa8
func_80111AFC:
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x2c(S3)
swc1  F0, 0x28(S3)
swc1  F0, 0x24(S3)
lui   A1, 0x4040
lui   A2, 0x4000
jal   0x800EDB98
 move  A0, S3
lw    A0, 0x10c(SP)
jal   0x800FFAEC
 move  S4, V0
jal   SleepProcess
 li    A0, 30
li    A0, 60
jal   0x800EC590
 li    A1, 0x3A2F ; "What do you want? I'm the Mushroom Jeanie who lives in the Lucky Lamp..."
jal   EndProcess
 move  A0, S4
li    S0, 1
lwc1  F0, 0x10(S3)
lwc1  F2, 0x30(S3)
sub.s F0, F0, F2
swc1  F0, 0x10(S3)
lui   A1, hi(CORE_800A0550)
lw    A1, lo(CORE_800A0550)(A1)
addiu A0, SP, 0x18
addiu A1, A1, 0x10
jal   midpoint
 addiu A2, S3, 0xc
jal   0x800D88E8
 addiu A0, SP, 0x18
lwc1  F0, 0x10(S3)
lwc1  F2, 0x30(S3)
add.s F0, F0, F2
swc1  F0, 0x10(S3)
li    AT, 0x44E10000 ; 1800.000000
mtc1  AT, F2
lwc1  F0, 0x30(S3)
c.lt.s F0, F2
      NOP
bc1f  L80111C78
       NOP
li    AT, 0x42200000 ; 40.000000
ori AT, AT, 0xcccd
mtc1  AT, F20
li    AT, 0x42200000 ; 40.000000
mtc1  AT, F26
li    AT, 0x43960000 ; 300.000000
mtc1  AT, F24
li    AT, 0x44E10000 ; 1800.000000
mtc1  AT, F22
L80111BD0:
lwc1  F0, 0x18(SP)
mul.s F0, F0, F20
lwc1  F2, 0xc(S3)
add.s F0, F0, F2
swc1  F0, 0xc(S3)
lwc1  F0, 0x1c(SP)
mul.s F0, F0, F26
lwc1  F2, 0x30(S3)
add.s F0, F0, F2
swc1  F0, 0x30(S3)
lwc1  F0, 0x20(SP)
mul.s F0, F0, F20
lwc1  F2, 0x14(S3)
add.s F0, F0, F2
swc1  F0, 0x14(S3)
lwc1  F0, 0x30(S3)
c.lt.s F24, F0
      NOP
      NOP
bc1t  L80111C28
 li    V1, 1
move  V1, R0
L80111C28:
sltu  V0, R0, S0
and   V0, V1, V0
beqz  V0, L80111C5C
 li    A0, 255
move  S0, R0
li    A1, 255
jal   0x800620C8
 li    A2, 255
li    A0, 11
jal   InitFadeOut
 li    A1, 50
jal   PlaySound
 li    A0, 296
L80111C5C:
jal   SleepVProcess
       NOP
lwc1  F0, 0x30(S3)
c.lt.s F0, F22
      NOP
bc1t  L80111BD0
       NOP
L80111C78:
jal   GetFadeStatus
       NOP
beqz  V0, L80111C98
       NOP
jal   SleepVProcess
       NOP
j     L80111C78
       NOP
L80111C98:
lb    V0, 5(S7)
addu  V0, S7, V0
lb    V0, 6(V0)
sll   V0, V0, 1
lui   A0, hi(star_space_indices)
addu  A0, A0, V0
jal   GetSpaceData
 lh    A0, lo(star_space_indices)(A0)
move  S1, V0
lb    V0, 5(S7)
addu  V0, S7, V0
lb    V0, 6(V0)
sll   V0, V0, 1
lui   A0, hi(D_8011D2C0)
addu  A0, A0, V0
lh    A0, lo(D_8011D2C0)(A0)
jal   GetSpaceData
 addiu S1, S1, 8
move  S2, V0
addiu S0, SP, 0x38
move  A0, S0
jal   0x80089A20
 move  A1, S1
jal   0x800E9748
 move  A0, S0
jal   0x800F915C
 li    A0, 4
jal   0x800F9198
 move  A0, S0
lhu   V0, 0xa(S3)
andi  V0, V0, 0xfffe
sh    V0, 0xa(S3)
addiu A0, S3, 0xc
jal   0x80089A20
 move  A1, S1
addiu A0, SP, 0x18
addiu A1, S2, 8
jal   midpoint
 move  A2, S1
jal   0x800D88E8
 addiu A0, SP, 0x18
lwc1  F2, 0x18(SP)
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F4
      NOP
mul.s F2, F2, F4
lwc1  F0, 0xc(S3)
sub.s F0, F0, F2
swc1  F0, 0xc(S3)
lwc1  F2, 0x20(SP)
mul.s F2, F2, F4
lwc1  F0, 0x14(S3)
sub.s F0, F0, F2
swc1  F0, 0x14(S3)
jal   PlaySound
 li    A0, 297
li    A0, 11
jal   InitFadeIn
 li    A1, 50
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S3)
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F22
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
L80111DA4:
jal   SleepVProcess
       NOP
lwc1  F0, 0x30(S3)
sub.s F0, F0, F22
c.lt.s F20, F0
      NOP
      NOP
bc1t  L80111DA4
 swc1  F0, 0x30(S3)
L80111DC8:
jal   GetFadeStatus
       NOP
beqz  V0, L80111DE8
       NOP
jal   SleepVProcess
       NOP
j     L80111DC8
       NOP
L80111DE8:
jal   0x8004EE68
       NOP
move  S0, V0
addiu A2, S3, 0x18
move  A0, A2
addiu A1, SP, 0x18
jal   0x800ED128
 li    A3, 16
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 move  S0, R0
lui   A1, 0x4040
lui   A2, 0x4000
jal   0x800EDB98
 move  A0, S3
move  S4, V0
li    A0, 60
jal   0x800EC590
 li    A1, 14896
jal   PlaySound
 li    A0, 300
move  A0, S3
li    A1, -1
jal   0x800D9CE8
 move  A2, R0
jal   SleepProcess
 li    A0, 20
li    S3, 1
lui   S2, hi(D_8011FA98)
addiu S2, S2, lo(D_8011FA98)
sll   V0, S0, 2
L80111E6C:
addu  S1, V0, S2
lw    A0, 0(S1)
beqz  A0, L80111E88
 addiu S0, S0, 1
jal   EndProcess
       NOP
sw    R0, 0(S1)
L80111E88:
slti  V0, S0, STAR_COUNT
bnez  V0, L80111E6C
 sll   V0, S0, 2
lb    V0, 5(S7)
addu  V0, S7, V0
lb    V0, 6(V0)
sll   V0, V0, 2
lui   S0, hi(D_8011FA78)
addu  S0, S0, V0
lw    S0, lo(D_8011FA78)(S0)
jal   0x8004A994
 li    A0, 90
mtc1  R0, F20
li    AT, 0x43C80000 ; 400.000000
mtc1  AT, F2
lwc1  F0, 0x30(S0)
c.lt.s F0, F2
      NOP
      NOP
bc1f  L80112028
 mov.s F4, F0
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F22
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F24
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F28
li    AT, 0x43C80000 ; 400.000000
mtc1  AT, F26
add.s F0, F4, F22
L80111F00:
swc1  F0, 0x30(S0)
lwc1  F0, 0x18(SP)
mul.s F0, F0, F22
lwc1  F2, 0xc(S0)
add.s F0, F0, F2
swc1  F0, 0xc(S0)
lwc1  F0, 0x20(SP)
mul.s F0, F0, F22
lwc1  F2, 0x14(S0)
add.s F0, F0, F2
swc1  F0, 0x14(S0)
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S0)
jal   0x8008E3F0
 mov.s F12, F20
swc1  F0, 0x20(S0)
li    AT, 0x42340000 ; 45.000000
mtc1  AT, F0
      NOP
add.s F20, F20, F0
c.lt.s F24, F20
      NOP
      NOP
bc1tl L80111F6C
 sub.s F20, F20, F24
L80111F6C:
lwc1  F0, 0x30(S0)
c.lt.s F28, F0
      NOP
      NOP
bc1t  L80111F88
 li    V1, 1
move  V1, R0
L80111F88:
sltu  V0, R0, S3
and   V0, V1, V0
beqz  V0, L80112008
       NOP
jal   0x800DEB2C
 lb    A0, 0xf(S7)
li    V1, 3
bne   V0, V1, L80111FBC
       NOP
jal   0x80035FDC
 li    A0, 23
j     L80111FC8
 move  S3, R0
L80111FBC:
jal   0x8003602C
 li    A0, 23
move  S3, R0
L80111FC8:
move  A0, R0
move  A1, R0
jal   0x800620C8
 move  A2, R0
jal   EndProcess
 move  A0, S4
jal   0x800EDA58
       NOP
jal   0x800FC8A4
       NOP
jal   0x800FF7F0
 li    A0, 2
jal   0x800FCA14
       NOP
jal   0x8004A0E0
       NOP
L80112008:
jal   SleepVProcess
       NOP
lwc1  F4, 0x30(S0)
c.lt.s F4, F26
      NOP
      NOP
bc1tl L80111F00
 add.s F0, F4, F22
L80112028:
jal   SleepProcess
 li    A0, -1
lw    RA, 0x134(SP)
lw    FP, 0x130(SP)
lw    S7, 0x12c(SP)
lw    S6, 0x128(SP)
lw    S5, 0x124(SP)
lw    S4, 0x120(SP)
lw    S3, 0x11c(SP)
lw    S2, 0x118(SP)
lw    S1, 0x114(SP)
lw    S0, 0x110(SP)
ldc1  F28, 0x158(SP)
ldc1  F26, 0x150(SP)
ldc1  F24, 0x148(SP)
ldc1  F22, 0x140(SP)
ldc1  F20, 0x138(SP)
jr    RA
 addiu SP, SP, 0x160

; item 17?
D_80112074:
addiu SP, SP, -0x58
sw    RA, 0x3c(SP)
sw    S4, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
sdc1  F24, 0x50(SP)
sdc1  F22, 0x48(SP)
sdc1  F20, 0x40(SP)
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
lb    S2, 0xf(S1)
li    A0, 1
jal   0x8005279C
 move  A1, R0
sll   V0, V0, 0x10
lui   A0, hi(CORE_80101980)
lw    A0, lo(CORE_80101980)(A0)
jal   ReadMainFS
 sra   S3, V0, 0x10
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   S4, V0, 0x10
jal   FreeMainFS
 move  A0, S0
move  S0, S3
move  A0, S0
move  A1, R0
move  A2, S4
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 18304
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 36864
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 325
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
addiu A2, SP, 0x20
jal   0x800F6748
 addiu A3, SP, 0x24
jal   0x8004EE68
       NOP
move  S0, V0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lwc1  F0, 0x20(SP)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lwc1  F0, 0x24(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lb    V0, 0xf(S1)
sll   V0, V0, 3
lui   AT, hi(D_8011E354)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E354)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E358)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E358)(AT)
trunc.w.s F2, F0
mfc1  V0, F2
      NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x10(SP)
li    V0, -1
sw    V0, 0x14(SP)
sra   A1, A1, 0x10
sra   A2, A2, 0x10
jal   func_8010FB54
 sra   A3, A3, 0x10
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 li    S0, 1
jal   SleepProcess
 li    A0, 10
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
move  A2, R0
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
li    S1, 255
sll   A2, S0, 1
L8011225C:
addu  A2, A2, S0
sll   A2, A2, 3
addu  A2, A2, S0
subu  A2, S1, A2
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0xa
bnezl V0, L8011225C
 sll   A2, S0, 1
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 move  A2, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
jal   0x800E4A7C
 move  S0, S3
sll   V1, S2, 3
subu  V1, V1, S2
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
jal   0x800E4A7C
 sb    V0, 0(V1)
move  A0, S2
move  A1, V0
jal   0x800F68E0
 move  A2, R0
jal   0x800E4A7C
       NOP
move  A0, S2
move  A1, V0
addiu A2, SP, 0x20
jal   0x800F6848
 addiu A3, SP, 0x24
lwc1  F0, 0x20(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lwc1  F0, 0x24(SP)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
move  A0, S0
move  A1, R0
jal   0x8005532C
 li    A2, 32768
jal   FixUpPlayerItemSlots
 move  A0, S2
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
sw    R0, 0x10(SP)
func_80112388:
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 56
li    A1, 0x4100 ; "Hey Im the skeleton key. Youre not throwing me away right?"
move  A2, R0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
lui   A0, hi(D_8011E454)
addiu A0, A0, lo(D_8011E454)
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 move  A1, R0
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
beqz  S0, L801123DC
 li    V0, 1
beql  S0, V0, L80112404
 sw    R0, 0x10(SP)
j     L8011247C
 move  S0, S3
L801123DC:
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 56
li    A1, 16641
move  A2, R0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
j     L801124BC
       NOP
L80112404:
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 56
li    A1, 16642
move  A2, R0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
move  A0, S3
move  A1, R0
jal   0x800553A8
 li    A2, 32768
jal   PlayerHasEmptyItemSlot
 move  A0, S2
sll   V1, S2, 3
subu  V1, V1, S2
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, 1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 move  A0, S2
lui   V1, hi(CORE_800CD0A8)
addiu V1, V1, lo(CORE_800CD0A8)
lhu   V0, 0(V1)
andi  V0, V0, 0xfffe
j     L801124BC
 sh    V0, 0(V1)
L8011247C:
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 32768
jal   func_80106FE8
       NOP
li    V0, 1
lui   AT, hi(CORE_800CB99C)
jal   0x80049FB8
 sb    V0, lo(CORE_800CB99C)(AT)
move  A0, S0
move  A1, R0
jal   0x8005532C
 li    A2, 32768
j     func_80112388
 sw    R0, 0x10(SP)
L801124BC:
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
bnez  S0, L80112580
       NOP
jal   SleepProcess
 li    A0, 10
li    S0, 1
move  S1, S3
li    AT, 0x407E0000 ; 3.968750
ori AT, AT, 0xf9db
mtc1  AT, F24
li    AT, 0x437F0000 ; 255.000000
mtc1  AT, F22
li    AT, 0x4F000000 ; 2147483648.000000
mtc1  AT, F20
lui   S2, 0x8000
L80112504:
mtc1  S0, F0
      NOP
cvt.s.w F0, F0
mul.s F0, F0, F24
sub.s F2, F22, F0
c.le.s F20, F2
      NOP
      NOP
bc1tl L80112540
 sub.s F0, F2, F20
trunc.w.s F0, F2
mfc1  A2, F0
      NOP
j     L80112554
 move  A0, S1
L80112540:
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
or    A2, A2, S2
move  A0, S1
L80112554:
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0x40
bnez  V0, L80112504
 move  A1, R0
move  A0, S3
jal   0x80055458
 move  A2, R0
L80112580:
jal   0x800525C8
 move  A0, S3
jal   FreeGraphics
 move  A0, S4
lw    RA, 0x3c(SP)
lw    S4, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
ldc1  F24, 0x50(SP)
ldc1  F22, 0x48(SP)
ldc1  F20, 0x40(SP)
jr    RA
 addiu SP, SP, 0x58

D_801125BC:
addiu SP, SP, -0x40
sw    RA, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F22, 0x38(SP)
jal   0x8004EE68
 sdc1  F20, 0x30(SP)
lw    S1, 0x8c(V0)
li    A0, 1
jal   0x8005279C
 move  A1, R0
sll   V0, V0, 0x10
sra   S2, V0, 0x10
move  S0, S2
move  A0, S0
move  A1, R0
lui   A2, hi(D_8011FB66)
lh    A2, lo(D_8011FB66)(A2)
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 9
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 4096
lui   A0, hi(D_8011FB60)
lw    A0, lo(D_8011FB60)(A0)
move  A1, R0
addiu A2, SP, 0x18
jal   0x800F6E4C
 addiu A3, SP, 0x1c
lui   V0, hi(D_8011FB60)
lw    V0, lo(D_8011FB60)(V0)
sll   V0, V0, 3
lui   AT, hi(D_8011E20C)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E20C)(AT)
li    AT, 0x41800000 ; 16.000000
mtc1  AT, F4
      NOP
mul.s F0, F0, F4
lui   AT, hi(D_8011E1EC)
addu  AT, AT, V0
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
swc1  F2, 0x18(SP)
lui   AT, hi(D_8011E210)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F0, F4
lui   AT, hi(D_8011E1F0)
addu  AT, AT, V0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
swc1  F2, 0x1c(SP)
lwc1  F0, 0x18(SP)
cvt.s.w F0, F0
sll   S1, S1, 3
lui   AT, hi(D_8011E460)
addu  AT, AT, S1
lwc1  F2, lo(D_8011E460)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lwc1  F0, 0x1c(SP)
cvt.s.w F0, F0
lui   AT, hi(D_8011E464)
addu  AT, AT, S1
lwc1  F2, lo(D_8011E464)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
li    V0, 255
sw    V0, 0x10(SP)
move  A0, S0
move  A1, R0
li    A2, 255
jal   0x80055420
 li    A3, 255
move  A0, S0
move  A1, R0
jal   0x80055458
 li    A2, 255
mtc1  R0, F20
li    S0, 255
move  S1, S2
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F22
L8011275C:
move  A0, S1
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x800551D8
 move  A1, R0
move  A0, S1
move  A1, R0
jal   0x80055458
 andi  A2, S0, 0xffff
jal   SleepVProcess
 addiu S0, S0, -0xa
bgez  S0, L8011275C
 add.s F20, F20, F22
move  S0, S2
move  A0, S0
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   0x800525C8
 move  A0, S0
jal   EndProcess
 move  A0, R0
lw    RA, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F22, 0x38(SP)
ldc1  F20, 0x30(SP)
jr    RA
 addiu SP, SP, 0x40

D_801127D8:
addiu SP, SP, -0x38
sw    RA, 0x34(SP)
sw    S6, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
jal   0x8004EE68
 sw    S0, 0x18(SP)
lw    S1, 0x8c(V0)
lui A0, 0x21
jal   ReadMainFS
 ori A0, A0, 0x2c
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   S6, V0, 0x10
jal   FreeMainFS
 move  A0, S0
lui A0, 0x13
jal   ReadMainFS
 ori A0, A0, 0x1ba
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   S5, V0, 0x10
jal   FreeMainFS
 move  A0, S0
lui A0, 0x13
jal   ReadMainFS
 ori A0, A0, 0x1b9
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   V0, V0, 0x10
lui   AT, hi(D_8011FB64)
sw    V0, lo(D_8011FB64)(AT)
jal   FreeMainFS
 move  A0, S0
li    A0, 2
jal   0x8005279C
 li    A1, 2
sll   V0, V0, 0x10
sra   S3, V0, 0x10
move  S0, S3
move  A0, S0
move  A1, R0
jal   0x800550F4
 li    A2, 1
move  A0, S0
move  A1, R0
move  A2, S6
jal   0x80055024
 li    A3, 12
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 9
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 4096
move  A0, S0
move  A1, R0
jal   0x800554C4
 li    A2, -1
move  A0, S0
li    A1, 1
move  A2, S5
jal   0x80055024
 move  A3, R0
move  A0, S0
li    A1, 1
jal   0x80055294
 li    A2, 9
move  A0, S0
li    A1, 1
jal   0x800553A8
 li    A2, 36864
li    V0, 255
sw    V0, 0x10(SP)
move  A0, S0
li    A1, 1
li    A2, 255
jal   0x80055420
 li    A3, 255
move  A0, S0
li    A1, 1
jal   0x80055458
 li    A2, 255
move  A0, S0
li    A1, 1
lui   A2, 0x4000
jal   0x800551D8
 move  A3, A2
move  A0, S0
li    A1, 1
jal   0x800554C4
 move  A2, R0
andi  V0, S1, 1
beqz  V0, L801129B0
 li    S2, 200
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 1
move  A0, S0
li    A1, 1
jal   0x800553A8
 li    A2, 1
move  A0, S0
li    A1, 1
j     L801129C0
 li    A2, 20
L801129B0:
li    S2, 120
move  A0, S3
li    A1, 1
li    A2, -20
L801129C0:
jal   0x80054904
 li    A3, -5
slti  V0, S1, 2
beqz  V0, L801129D8
 li    S0, 272
li    S0, -32
L801129D8:
jal   SleepProcess
 li    A0, 20
move  A0, S1
jal   PlayerHasItem
 li    A1, ITEM_BOO_REPELLANT
sll   V1, S1, 3
subu  V1, V1, S1
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 move  A0, S1
jal   0x800F63F0
 move  A0, S1
slti  V0, S1, 2
beql  V0, R0, L80112A44
 addiu S0, S0, -5
addiu S0, S0, 5
slti  V0, S0, 0x33
beqz  V0, L80112A88
 sll   A3, S0, 0x10
j     L80112A50
       NOP
L80112A44:
slti  V0, S0, 0xd2
bnez  V0, L80112A88
 sll   A3, S0, 0x10
L80112A50:
move  A0, S3
move  A1, R0
move  A2, S2
jal   0x80054904
 sra   A3, A3, 0x10
jal   SleepVProcess
       NOP
slti  V0, S1, 2
beql  V0, R0, L80112A44
 addiu S0, S0, -5
addiu S0, S0, 5
slti  V0, S0, 0x33
bnez  V0, L80112A50
 sll   A3, S0, 0x10
L80112A88:
jal   SleepProcess
 li    A0, 10
move  A0, S3
li    A1, 1
jal   0x8005532C
 li    A2, 32768
jal   PlaySound
 li    A0, 332
sll   V0, V0, 0x10
sra   S4, V0, 0x10
lui   AT, hi(D_8011FB60)
sw    S1, lo(D_8011FB60)(AT)
move  S2, R0
move  S0, R0
L80112AC0:
lui   A0, hi(D_801125BC)
addiu A0, A0, lo(D_801125BC)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S1, V0
sw    S0, 0x8c(S1)
jal   SleepProcess
 li    A0, 2
addiu S0, S0, 1
slti  V0, S0, 6
bnez  V0, L80112AC0
       NOP
jal   SleepProcess
 li    A0, 5
addiu S2, S2, 1
slti  V0, S2, 4
bnez  V0, L80112AC0
 move  S0, R0
jal   0x8004EE68
 li    S0, 255
move  A0, V0
jal   0x8004ED30
 move  A1, S1
jal   0x8004EE18
 sll   S1, S3, 0x10
jal   0x8004AD50
 move  A0, S4
move  A0, S3
li    A1, 1
jal   0x80055458
 move  A2, R0
sra   A0, S1, 0x10
L80112B48:
move  A1, R0
jal   0x80055458
 andi  A2, S0, 0xffff
jal   SleepVProcess
 addiu S0, S0, -0x1e
bgezl S0, L80112B48
 sra   A0, S1, 0x10
move  S0, S3
move  A0, S0
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   0x800525C8
 move  A0, S0
lui   A0, hi(D_8011FB66)
jal   FreeGraphics
 lh    A0, lo(D_8011FB66)(A0)
jal   FreeGraphics
 move  A0, S5
jal   FreeGraphics
 move  A0, S6
jal   EndProcess
 move  A0, R0
lw    RA, 0x34(SP)
lw    S6, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x38

D_80112BCC:
addiu SP, SP, -0x28
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F22, 0x20(SP)
sdc1  F20, 0x18(SP)
jal   SleepProcess
 li    A0, 10
li    S0, 1
li    AT, 0x407E0000 ; 3.968750
ori   AT, AT, 0xf9db
mtc1  AT, F22
li    AT, 0x437F0000 ; 255.000000
mtc1  AT, F20
L80112C00:
jal   0x800E4A7C
       NOP
mtc1  S0, F0
      NOP
cvt.s.w F0, F0
mul.s F0, F0, F22
sub.s F0, F20, F0
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
jal   0x800F68E0
 sra   A2, A2, 0x10
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0x40
bnez  V0, L80112C00
       NOP
jal   0x800E4A7C
       NOP
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F22, 0x20(SP)
ldc1  F20, 0x18(SP)
jr    RA
 addiu SP, SP, 0x28

D_80112C88:
addiu SP, SP, -0x40
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F26, 0x38(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
jal   0x8004EE68
 sdc1  F20, 0x20(SP)
lw    S1, 0x8c(V0)
lui   A0, hi(D_8011FB68)
jal   0x800D975C
 lw    A0, lo(D_8011FB68)(A0)
move  S0, V0
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, S1, 0xc
addiu A0, S0, 0x24
lui   A1, 0x4000
move  A2, A1
jal   0x80089A10
 move  A3, A1
lwc1  F0, 0x30(S1)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F2
      NOP
add.s F0, F0, F2
swc1  F0, 0x30(S0)
jal   0x800D9AA4
 move  A0, S0
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
mtc1  V0, F20
      NOP
cvt.s.w F20, F20
lui   AT, hi(D_8011F968)
ldc1  F22, lo(D_8011F968)(AT)
li    AT, 0x420C0000 ; 35.000000
mtc1  AT, F26
li    AT, 0x42200000 ; 40.000000
mtc1  AT, F24
func_80112D34:
jal   SleepVProcess
       NOP
lwc1  F0, 0x30(S0)
cvt.d.s F0, F0
add.d F0, F0, F22
cvt.s.d F0, F0
swc1  F0, 0x30(S0)
lwc1  F2, 0x30(S1)
add.s F2, F2, F26
c.le.s F2, F0
      NOP
bc1t  L80112DA8
       NOP
add.s F20, F20, F24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F20
      NOP
jal   0x8008A2A0
 addiu A0, A0, 0x74
j     func_80112D34
       NOP
L80112DA8:
jal   0x800D9B54
 move  A0, S0
jal   EndProcess
 move  A0, R0
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F26, 0x38(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x40

func_80112DDC:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
lui   A0, hi(D_80112C88)
addiu A0, A0, lo(D_80112C88)
li    A1, 4096
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S0, 0x8c(V0)
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

D_80112E18:
addiu SP, SP, -0x50
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F30, 0x48(SP)
sdc1  F28, 0x40(SP)
sdc1  F26, 0x38(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
jal   0x8004EE68
 sdc1  F20, 0x20(SP)
lw    S0, 0x8c(V0)
mtc1  R0, F20
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F30
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F24
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F28
mtc1  R0, F26
      NOP
func_80112E80:
jal   0x8008EF20
 mov.s F12, F20
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
neg.s F0, F0
swc1  F0, 0x18(V0)
jal   0x8008E3F0
 mov.s F12, F20
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
add.s F20, F20, F30
c.lt.s F24, F20
      NOP
      NOP
bc1f  L80112EC4
 swc1  F0, 0x20(V0)
sub.s F20, F20, F24
L80112EC4:
lw    V0, 0(S0)
beqz  V0, L80112EFC
       NOP
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
swc1  F22, 0x2c(V0)
swc1  F22, 0x28(V0)
swc1  F22, 0x24(V0)
sub.s F22, F22, F28
c.le.s F22, F26
      NOP
      NOP
bc1t  L80112F0C
 li    A0, -1
L80112EFC:
jal   SleepVProcess
       NOP
j     func_80112E80
       NOP
L80112F0C:
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
mtc1  R0, F0
      NOP
swc1  F0, 0x2c(V0)
swc1  F0, 0x28(V0)
swc1  F0, 0x24(V0)
jal   PlayerHasItem
 li    A1, ITEM_KOOPA_CARD
lb    A0, 0xf(S1)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S1)
jal   0x800F63F0
 lb    A0, 0xf(S1)
lui   A0, hi(D_8011FB6C)
jal   0x800D9B54
 lw    A0, lo(D_8011FB6C)(A0)
jal   EndProcess
 move  A0, R0
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F30, 0x48(SP)
ldc1  F28, 0x40(SP)
ldc1  F26, 0x38(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x50

func_80112FA8:
addiu SP, SP, -0x50
sw    RA, 0x34(SP)
sw    S4, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F24, 0x48(SP)
sdc1  F22, 0x40(SP)
sdc1  F20, 0x38(SP)
sw    R0, 0x18(SP)
lui   S4, hi(CORE_800CD058)
addiu S4, S4, lo(CORE_800CD058)
li    A0, 1
jal   0x8005279C
 li    A1, 5
lui   AT, hi(CORE_8010570C)
sh    V0, lo(CORE_8010570C)(AT)
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_char)
addu  AT, AT, V0
lbu   V0, lo(p1_char)(AT)
sll   V0, V0, 2
lui   A0, hi(CORE_80101040)
addu  A0, A0, V0
jal   ReadMainFS
 lw    A0, lo(CORE_80101040)(A0)
move  S1, V0
jal   ImgPackParse
 move  A0, S1
sll   S0, V0, 0x10
sra   S0, S0, 0x10
jal   FreeMainFS
 move  A0, S1
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
move  A2, S0
jal   0x80055024
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055294
 li    A2, 10
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
li    A0, -1
move  A1, R0
addiu A2, SP, 0x10
jal   0x800F6E4C
 addiu A3, SP, 0x14
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lh    A2, 0x12(SP)
lh    A3, 0x16(SP)
jal   0x80054904
 move  A1, R0
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 li    A0, 1
jal   0x800F6ECC
 li    A0, -1
li    A0, -1
jal   PlayerHasItem
 li    A1, ITEM_KOOPA_CARD
jal   0x800E4A88
 move  A0, V0
jal   func_8010FE54
       NOP
li    A0, 68
jal   0x800D90C8
 move  A1, R0
lui   AT, hi(D_8011FB6C)
sw    V0, lo(D_8011FB6C)(AT)
jal   GetPlayerStruct
 li    A0, -1
lw    A1, 0x24(V0)
lui   A0, hi(D_8011FB6C)
lw    A0, lo(D_8011FB6C)(A0)
addiu A0, A0, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(V0)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
lwc1  F0, 0x30(V0)
sub.s F0, F0, F22
L80113160:
jal   SleepVProcess
 swc1  F0, 0x30(V0)
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
lwc1  F0, 0x30(V0)
c.lt.s F20, F0
      NOP
      NOP
bc1tl L80113160
 sub.s F0, F0, F22
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
lui   A0, hi(D_80112E18)
addiu A0, A0, lo(D_80112E18)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
addiu V1, SP, 0x18
sw    V1, 0x8c(V0)
li    A0, -1
li    A1, 4
jal   0x800FFA4C
 li    A2, 5
move  S3, V0
lui   S1, hi(bank_coin_total)
lh    S1, lo(bank_coin_total)(S1)
mtc1  S1, F24
      NOP
cvt.s.w F24, F24
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F0
      NOP
div.s F24, F24, F0
mtc1  R0, F20
li    A0, 25
jal   0x800D90C8
 move  A1, R0
lui   AT, hi(D_8011FB68)
sw    V0, lo(D_8011FB68)(AT)
jal   0x800D9714
 move  A0, V0
lui   A0, hi(D_8011FB68)
jal   0x800D9B24
 lw    A0, lo(D_8011FB68)(A0)
beqz  S1, L801132C4
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
lui   S2, hi(bank_coin_total)
addiu S2, S2, lo(bank_coin_total)
add.s F20, F20, F24
L80113240:
c.le.s F22, F20
      NOP
      NOP
bc1f  L8011326C
 move  S0, R0
L80113254:
sub.s F20, F20, F22
c.le.s F22, F20
      NOP
      NOP
bc1t  L80113254
 addiu S0, S0, 1
L8011326C:
beqz  S0, L801132BC
       NOP
lui   A0, hi(D_8011FB6C)
jal   func_80112DDC
 lw    A0, lo(D_8011FB6C)(A0)
subu  V0, S1, S0
bltzl V0, L8011328C
 move  S0, S1
L8011328C:
subu  S1, S1, S0
lb    A0, 0xf(S4)
jal   AdjustPlayerCoins
 move  A1, S0
jal   PlaySound
 li    A0, 262
lhu   V0, 0(S2)
subu  V0, V0, S0
jal   func_80108478
 sh    V0, 0(S2)
jal   SleepProcess
 li    A0, 5
L801132BC:
bnezl S1, L80113240
 add.s F20, F20, F24
L801132C4:
jal   0x800FFAEC
 move  A0, S3
li    V0, 1
sw    V0, 0x18(SP)
jal   SleepProcess
 li    A0, 20
lui   A0, hi(D_8011FB68)
jal   0x800D9B54
 lw    A0, lo(D_8011FB68)(A0)
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800ECC0C
 addiu A0, A0, 0x18
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
jal   SleepProcess
 li    A0, 5
lb    A1, 0xf(S4)
jal   0x8004ACE0
 li    A0, 628
jal   SleepProcess
 li    A0, 45
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
lw    RA, 0x34(SP)
lw    S4, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F24, 0x48(SP)
ldc1  F22, 0x40(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x50

; Called after "Who's your opponent" textbox
func_80113364:
addiu SP, SP, -0x48
sw    RA, 0x40(SP)
sw    S5, 0x3c(SP)
sw    S4, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
move  S4, A0
move  S5, A1
move  S2, R0
lui   A1, hi(D_8011F8D0)
addiu A1, A1, lo(D_8011F8D0)
lwl   V0, 0(A1)
lwr   V0, 3(A1)
swl   V0, 0x20(SP)
swr   V0, 0x23(SP)
move  S1, R0
addiu S3, SP, 0x18
L801133B0:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
bne   S1, V0, L8011347C
 sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(CORE_800D110C)
addu  AT, AT, V0
lbu   V0, lo(CORE_800D110C)(AT)
andi  V0, V0, 1
beqz  V0, L80113430
 sll   S0, S1, 3
beqz  S5, L801133F8
       NOP
lui   V0, hi(D_8011FB70)
lw    V0, lo(D_8011FB70)(V0)
j     L80113404
 addiu S2, V0, 1
L801133F8:
lui   V0, hi(D_8011FB74)
lw    V0, lo(D_8011FB74)(V0)
addiu S2, V0, 1
L80113404:
sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, 1024
j     L8011349C
 sh    V1, 0(V0)
L80113430:
subu  S0, S0, S1
sll   S0, S0, 3
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
addu  V0, SP, V0
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
lbu   A1, 0x20(V0)
jal   0x8005FE54
 addiu S1, S1, 1
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, -1
j     L801134A0
 sh    V1, 0(V0)
L8011347C:
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
sh    R0, 0(V0)
L8011349C:
addiu S1, S1, 1
L801134A0:
slti  V0, S1, 4
bnez  V0, L801133B0
       NOP
beqz  S2, L80113558
 li    A1, 2
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8005B63C
 li    A2, 2
move  S0, R0
addiu S1, SP, 0x18
L801134CC:
addiu S2, S2, -1
bnez  S2, L80113508
       NOP
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S1
li    V1, -32768
sh    V1, 0(V0)
L80113508:
bnez  S0, L80113530
 li    V0, 5
jal   0x800EDC40
       NOP
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
j     func_80113540
 andi  V0, V0, 0xff
L80113530:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
func_80113540:
jal   0x8005F698
 sw    V0, 0x10(SP)
bnez  S2, L801134CC
 addiu S0, S0, 1
j     func_80113570
 move  S1, R0
L80113558:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
jal   0x8005F744
 move  S1, R0
func_80113570:
addu  V0, S4, S1
L80113574:
lbu   V0, 0(V0)
bnezl V0, L80113598
 addiu S1, S1, 1
sll   A1, S1, 0x10
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8006010C
 sra   A1, A1, 0x10
addiu S1, S1, 1
L80113598:
slti  V0, S1, 4
bnez  V0, L80113574
 addu  V0, S4, S1
move  S1, R0
sll   A1, S1, 0x10
L801135AC:
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
sra   A1, A1, 0x10
jal   0x8005E1D8
 li    A2, 1
move  S1, V0
addu  V0, S4, S1
lbu   V0, 0(V0)
beqz  V0, L801135AC
 sll   A1, S1, 0x10
move  V0, S1
lw    RA, 0x40(SP)
lw    S5, 0x3c(SP)
lw    S4, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
jr    RA
 addiu SP, SP, 0x48

func_801135FC:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
jal   0x8004EE68
 sw    S0, 0x18(SP)
lw    S3, 0x8c(V0)
lh    A0, 0x8e(V0)
jal   0x800FF900
 li    A1, 4
li    S1, 128
sll   V0, S3, 3
subu  V0, V0, S3
sll   V0, V0, 3
lui   V1, hi(p1_item1)
addiu V1, V1, lo(p1_item1)
addu  S4, V0, V1
move  S0, R0
L80113650:
li    S5, -1
sll   S2, S1, 0x10
addu  V0, S4, S0
L8011365C:
lb    V0, 0(V0)
beq   V0, S5, L80113674
 move  A0, S3
move  A1, S0
jal   0x800F68E0
 sra   A2, S2, 0x10
L80113674:
addiu S0, S0, 1
slti  V0, S0, 3
bnez  V0, L8011365C
 addu  V0, S4, S0
jal   SleepVProcess
 addiu S1, S1, -0xa
bgtz  S1, L80113650
 move  S0, R0
sll   V0, S3, 3
subu  V0, V0, S3
sll   V0, V0, 3
lui   V1, hi(p1_item1)
addiu V1, V1, lo(p1_item1)
addu  S1, V0, V1
li    S2, -1
addu  V0, S1, S0
L801136B4:
lb    V0, 0(V0)
beq   V0, S2, L801136CC
 move  A0, S3
move  A1, S0
jal   0x800F68E0
 move  A2, R0
L801136CC:
addiu S0, S0, 1
slti  V0, S0, 3
bnez  V0, L801136B4
 addu  V0, S1, S0
jal   EndProcess
 move  A0, R0
lw    RA, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x38

func_80113708:
addiu SP, SP, -0x40
sw    RA, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
sdc1  F20, 0x38(SP)
jal   0x8004EE68
 move  S0, R0
lw    S2, 0x8c(V0)
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
move  S1, R0
lui   S5, hi(p1_item1)
addiu S5, S5, lo(p1_item1)
li    S4, -1
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
L80113758:
lb    A0, 0xf(S3)
sll   V0, A0, 3
subu  V0, V0, A0
sll   V0, V0, 3
addu  V0, V0, S5
addu  V0, V0, S0
lb    V0, 0(V0)
beql  V0, S4, L801137D0
 addiu S0, S0, 1
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x800F696C
 move  A1, S0
move  A0, S2
move  A1, S1
addiu A2, SP, 0x10
jal   0x800F6E4C
 addiu A3, SP, 0x14
lb    A0, 0xf(S3)
lh    A2, 0x12(SP)
lh    A3, 0x16(SP)
jal   0x800F688C
 move  A1, S0
jal   0x800E4A7C
       NOP
xor   V0, S0, V0
sltu  V0, R0, V0
addu  S1, S1, V0
addiu S0, S0, 1
L801137D0:
slti  V0, S0, 3
bnez  V0, L80113758
       NOP
move  S1, R0
lui   S5, hi(p1_item1)
addiu S5, S5, lo(p1_item1)
li    S4, -1
move  S0, R0
L801137F0:
sll   S2, S1, 0x10
L801137F4:
lb    V0, 0xf(S3)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
addu  V1, V1, S5
addu  V1, V1, S0
lb    V0, 0(V1)
beql  V0, S4, L80113838
 addiu S0, S0, 1
jal   0x800E4A7C
       NOP
beq   S0, V0, L80113834
 move  A1, S0
lb    A0, 0xf(S3)
jal   0x800F68E0
 sra   A2, S2, 0x10
L80113834:
addiu S0, S0, 1
L80113838:
slti  V0, S0, 3
bnez  V0, L801137F4
       NOP
jal   SleepVProcess
 addiu S1, S1, 0x14
slti  V0, S1, 0x80
bnez  V0, L801137F0
 move  S0, R0
lui   S2, hi(p1_item1)
addiu S2, S2, lo(p1_item1)
li    S1, -1
L80113864:
lb    V0, 0xf(S3)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
addu  V1, V1, S2
addu  V1, V1, S0
lb    V0, 0(V1)
beql  V0, S1, L801138A8
 addiu S0, S0, 1
jal   0x800E4A7C
       NOP
beq   S0, V0, L801138A4
 move  A1, S0
lb    A0, 0xf(S3)
jal   0x800F68E0
 li    A2, 128
L801138A4:
addiu S0, S0, 1
L801138A8:
slti  V0, S0, 3
bnez  V0, L80113864
       NOP
jal   EndProcess
 move  A0, R0
lw    RA, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x40

; Trade items
barter_box_item_code:
func_801138E4:
addiu SP, SP, -0xd8
sw    RA, 0xa8(SP)
sw    S7, 0xa4(SP)
sw    S6, 0xa0(SP)
sw    S5, 0x9c(SP)
sw    S4, 0x98(SP)
sw    S3, 0x94(SP)
sw    S2, 0x90(SP)
sw    S1, 0x8c(SP)
sw    S0, 0x88(SP)
sdc1  F28, 0xd0(SP)
sdc1  F26, 0xc8(SP)
sdc1  F24, 0xc0(SP)
sdc1  F22, 0xb8(SP)
sdc1  F20, 0xb0(SP)
lui   S6, hi(CORE_800CD058)
addiu S6, S6, lo(CORE_800CD058)
jal   func_8010FE54
 move  S7, R0
li    A0, 32
jal   0x800D90C8
 move  A1, R0
move  S5, V0
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   A1, 2
jal   0x8001C2FC
 lui   A2, 2
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
jal   0x8001C448
 lh    A0, 0(V0)
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
jal   0x8001C954
 lh    A0, 0(V0)
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
jal   0x8001C514
 lh    A0, 0(V0)
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
jal   GetPlayerStruct
 li    A0, -1
lw    A1, 0x24(V0)
addiu A0, S5, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 2
jal   0x8001C814
 li    A2, 1
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S5)
jal   PlaySound
 li    A0, 322
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F2
lwc1  F0, 0x30(S5)
c.lt.s F2, F0
      NOP
      NOP
bc1f  L80113A40
 mov.s F4, F0
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
sub.s F0, F4, F22
L80113A20:
jal   SleepVProcess
 swc1  F0, 0x30(S5)
lwc1  F4, 0x30(S5)
c.lt.s F20, F4
      NOP
      NOP
bc1tl L80113A20
 sub.s F0, F4, F22
L80113A40:
move  S1, R0
addiu S0, SP, 0x20
li    S3, 1
addiu S2, SP, 0x60
li    S4, 8
L80113A54:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
bne   V0, S1, L80113A78
 sll   V0, S1, 4
addu  V0, S0, V0
sb    S3, 0(V0)
addu  V0, S2, S1
j     L80113A88
 sb    R0, 0(V0)
L80113A78:
addu  V0, S0, V0
sb    S4, 0(V0)
addu  V0, S2, S1
sb    S3, 0(V0)
L80113A88:
sll   A1, S1, 4
addu  A1, S0, A1
move  A0, S1
jal   0x800E2260
 addiu A1, A1, 1
addiu S1, S1, 1
slti  V0, S1, 4
bnez  V0, L80113A54
 li    V0, 1
sb    V0, 0x64(SP)
sb    V0, 0x65(SP)
addiu V0, SP, 0x40
sw    V0, 0x10(SP)
addiu V0, SP, 0x50
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x5C01 ; "Who's your opponent?"
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage
 addiu A3, SP, 0x30
addiu A0, SP, 0x60
jal   func_80113364
 li    A1, 1
jal   0x800EC6C8
 move  S4, V0
jal   0x800EC6EC
       NOP
li    V0, 4
bne   S4, V0, L80113B10
       NOP
jal   0x800EF0D8
 li    A0, 1
move  S4, V0
L80113B10:
jal   0x800E4A7C
       NOP
lui   A1, hi(current_player_index)
lb    A1, lo(current_player_index)(A1)
sll   V1, A1, 3
subu  V1, V1, A1
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
lb    V1, 0(V1)
li    V0, 16
bne   V1, V0, L80113B70
       NOP
jal   PlayerHasEmptyItemSlot
 move  A0, A1
li    V1, 1
bne   V0, V1, L80113B70
       NOP
jal   PlayerHasEmptyItemSlot
 move  A0, S4
beql  V0, R0, L80113B70
 li    S7, 1
L80113B70:
bnez  S7, L80114328
       NOP
jal   PlaySound
 li    A0, 329
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 1
jal   0x8001C814
 move  A2, R0
jal   SleepProcess
 li    A0, 20
li    AT, 0x43200000 ; 160.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x70(SP)
li    AT, 0x42A80000 ; 84.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x74(SP)
move  S1, R0
lui   S3, hi(p1_item1)
addiu S3, S3, lo(p1_item1)
li    S2, -1
move  S0, R0
L80113BD4:
bne   S0, S1, L80113BE0
 li    A2, 18320
li    A2, 18310
L80113BE0:
lb    A0, 0xf(S6)
move  A1, S0
jal   0x800F69B0
 andi  A2, A2, 0xffff
addiu S0, S0, 1
slti  V0, S0, 3
bnez  V0, L80113BD4
       NOP
lb    V0, 0xf(S6)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
addu  V1, V1, S3
addu  V1, V1, S1
lb    V0, 0(V1)
beql  V0, S2, L80113C54
 addiu S1, S1, 1
jal   0x800E4A7C
       NOP
beq   S1, V0, L80113C50
 move  A1, S1
lb    A0, 0xf(S6)
sw    R0, 0x10(SP)
li    A2, 10
jal   func_801106A4
 addiu A3, SP, 0x70
jal   SleepProcess
 li    A0, 2
L80113C50:
addiu S1, S1, 1
L80113C54:
slti  V0, S1, 3
bnezl V0, L80113BD4
 move  S0, R0
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 4
jal   0x8001C814
 li    A2, 4
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    V1, 0(V0)
lui   A0, hi(CORE_800D03F8)
lw    A0, lo(CORE_800D03F8)(A0)
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 6
addu  V0, V0, A0
mtc1  R0, F2
lwc1  F0, 0x40(V0)
c.eq.s F0, F2
      NOP
bc1t  L80113CF8
       NOP
mtc1  R0, F20
L80113CB8:
jal   SleepVProcess
       NOP
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    V1, 0(V0)
lui   A0, hi(CORE_800D03F8)
lw    A0, lo(CORE_800D03F8)(A0)
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 6
addu  V0, V0, A0
lwc1  F0, 0x40(V0)
c.eq.s F0, F20
      NOP
bc1f  L80113CB8
       NOP
L80113CF8:
jal   PlaySound
 li    A0, 336
jal   SleepProcess
 li    A0, 20
lui   A0, hi(func_801135FC)
addiu A0, A0, lo(func_801135FC)
li    A1, 18432
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S4, 0x8c(V0)
jal   PlaySound
 li    A0, 337
mtc1  R0, F20
li    AT, 0x40A00000 ; 5.000000
mtc1  AT, F22
move  S0, R0
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F26
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F28
li    AT, 0x42340000 ; 45.000000
mtc1  AT, F24
      NOP
L80113D58:
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S5)
jal   0x8008E3F0
 mov.s F12, F20
add.s F20, F20, F22
c.lt.s F26, F20
      NOP
      NOP
bc1f  L80113D8C
 swc1  F0, 0x20(S5)
sub.s F20, F20, F26
L80113D8C:
add.s F22, F22, F28
c.lt.s F24, F22
      NOP
      NOP
bc1f  L80113DB4
 move  V0, S0
mov.s F22, F24
slti  V0, V0, 0x1f
beqz  V0, L80113DC4
 addiu S0, S0, 1
L80113DB4:
jal   SleepVProcess
       NOP
j     L80113D58
       NOP
L80113DC4:
move  S0, R0
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F26
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F28
li    AT, 0x40A00000 ; 5.000000
mtc1  AT, F24
      NOP
L80113DE4:
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S5)
jal   0x8008E3F0
 mov.s F12, F20
add.s F20, F20, F22
c.lt.s F26, F20
      NOP
      NOP
bc1f  L80113E24
 swc1  F0, 0x20(S5)
addiu S0, S0, 1
slti  V0, S0, 2
beqz  V0, L80113E4C
 sub.s F20, F20, F26
L80113E24:
sub.s F22, F22, F28
c.lt.s F22, F24
      NOP
      NOP
bc1tl L80113E3C
 mov.s F22, F24
L80113E3C:
jal   SleepVProcess
       NOP
j     L80113DE4
       NOP
L80113E4C:
sw    R0, 0x18(S5)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x20(S5)
jal   PlaySound
 li    A0, 338
move  S1, R0
li    AT, 0x3FC00000 ; 1.500000
mtc1  AT, F28
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F26
L80113E7C:
mtc1  S1, F22
      NOP
cvt.s.w F22, F22
jal   0x8008EF20
 mov.s F12, F22
div.s F24, F0, F28
add.s F24, F24, F26
jal   0x8008EF20
 mov.s F12, F22
div.s F20, F0, F28
add.s F20, F20, F26
jal   0x8008EF20
 mov.s F12, F22
div.s F0, F0, F28
mfc1  A1, F24
mfc1  A2, F20
add.s F0, F0, F26
mfc1  A3, F0
      NOP
jal   0x80089A10
 addiu A0, S5, 0x24
jal   SleepVProcess
 addiu S1, S1, 0x28
slti  V0, S1, 0x5a1
bnez  V0, L80113E7C
       NOP
jal   PlaySound
 li    A0, 329
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 4
jal   0x8001C814
 move  A2, R0
jal   SleepProcess
 li    A0, 20
lui   A0, hi(func_80113708)
addiu A0, A0, lo(func_80113708)
li    A1, 18432
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S4, 0x8c(V0)
jal   PlayerHasEmptyItemSlot
 move  A0, S4
move  V1, V0
li    AT, 0x428C0000 ; 70.000000
mtc1  AT, F0
li    V0, 1
beq   V1, V0, L80113F74
 swc1  F0, 0x7c(SP)
slti  V0, V1, 2
beql  V0, R0, L80113F64
 li    V0, 2
beqz  V1, L80114320
       NOP
j     L80114150
       NOP
L80113F64:
beql  V1, V0, L80114018
 move  A0, S4
j     L80114150
       NOP
L80113F74:
li    AT, 0x43200000 ; 160.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x78(SP)
move  A0, S4
move  A1, R0
li    A2, 160
jal   0x800F688C
 li    A3, 84
addiu S0, SP, 0x78
li    V0, 1
sw    V0, 0x10(SP)
move  A0, S4
move  A1, R0
li    A2, 10
jal   func_801106A4
 move  A3, S0
jal   SleepProcess
 li    A0, 20
lb    A0, 0xf(S6)
move  A1, R0
addiu A2, SP, 0x80
jal   0x800F6E4C
 addiu A3, SP, 0x84
lwc1  F0, 0x80(SP)
cvt.s.w F0, F0
swc1  F0, 0x78(SP)
lwc1  F0, 0x84(SP)
cvt.s.w F0, F0
swc1  F0, 0x7c(SP)
move  A0, S4
move  A1, R0
jal   0x800F69B0
 li    A2, 18320
li    V0, 2
sw    V0, 0x10(SP)
move  A0, S4
move  A1, R0
li    A2, 7
j     L80114318
 move  A3, S0
L80114018:
li    AT, 0x43020000 ; 130.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x78(SP)
move  A1, R0
li    A2, 160
jal   0x800F688C
 li    A3, 84
addiu S1, SP, 0x78
li    S0, 1
sw    S0, 0x10(SP)
move  A0, S4
move  A1, R0
li    A2, 10
jal   func_801106A4
 move  A3, S1
li    AT, 0x433E0000 ; 190.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x78(SP)
move  A0, S4
li    A1, 1
li    A2, 160
jal   0x800F688C
 li    A3, 84
sw    S0, 0x10(SP)
move  A0, S4
li    A1, 1
li    A2, 10
jal   func_801106A4
 move  A3, S1
jal   SleepProcess
 li    A0, 20
addiu S2, SP, 0x80
addiu S3, SP, 0x84
lb    A0, 0xf(S6)
move  A1, R0
move  A2, S2
jal   0x800F6E4C
 move  A3, S3
lwc1  F0, 0x80(SP)
cvt.s.w F0, F0
swc1  F0, 0x78(SP)
lwc1  F0, 0x84(SP)
cvt.s.w F0, F0
swc1  F0, 0x7c(SP)
move  A0, S4
move  A1, R0
jal   0x800F69B0
 li    A2, 18320
li    S0, 2
sw    S0, 0x10(SP)
move  A0, S4
move  A1, R0
li    A2, 7
jal   func_801106A4
 move  A3, S1
lb    A0, 0xf(S6)
li    A1, 1
move  A2, S2
jal   0x800F6E4C
 move  A3, S3
lwc1  F0, 0x80(SP)
cvt.s.w F0, F0
swc1  F0, 0x78(SP)
lwc1  F0, 0x84(SP)
cvt.s.w F0, F0
swc1  F0, 0x7c(SP)
move  A0, S4
li    A1, 1
jal   0x800F69B0
 li    A2, 18319
sw    S0, 0x10(SP)
move  A0, S4
li    A1, 1
li    A2, 7
j     L80114318
 move  A3, S1
L80114150:
li    AT, 0x42DC0000 ; 110.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x78(SP)
move  A0, S4
move  A1, R0
li    A2, 160
jal   0x800F688C
 li    A3, 84
addiu S3, SP, 0x78
li    S0, 1
sw    S0, 0x10(SP)
move  A0, S4
move  A1, R0
li    A2, 10
jal   func_801106A4
 move  A3, S3
li    AT, 0x43520000 ; 210.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x78(SP)
move  A0, S4
li    A1, 1
li    A2, 160
jal   0x800F688C
 li    A3, 84
sw    S0, 0x10(SP)
move  A0, S4
li    A1, 1
li    A2, 10
jal   func_801106A4
 move  A3, S3
li    AT, 0x43200000 ; 160.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x78(SP)
move  A0, S4
li    A1, 2
li    A2, 160
jal   0x800F688C
 li    A3, 84
sw    S0, 0x10(SP)
move  A0, S4
li    A1, 2
li    A2, 10
jal   func_801106A4
 move  A3, S3
jal   SleepProcess
 li    A0, 20
addiu S1, SP, 0x80
addiu S2, SP, 0x84
lb    A0, 0xf(S6)
move  A1, R0
move  A2, S1
jal   0x800F6E4C
 move  A3, S2
lwc1  F0, 0x80(SP)
cvt.s.w F0, F0
swc1  F0, 0x78(SP)
lwc1  F0, 0x84(SP)
cvt.s.w F0, F0
swc1  F0, 0x7c(SP)
move  A0, S4
move  A1, R0
jal   0x800F69B0
 li    A2, 18320
li    S0, 2
sw    S0, 0x10(SP)
move  A0, S4
move  A1, R0
li    A2, 7
jal   func_801106A4
 move  A3, S3
lb    A0, 0xf(S6)
li    A1, 1
move  A2, S1
jal   0x800F6E4C
 move  A3, S2
lwc1  F0, 0x80(SP)
cvt.s.w F0, F0
swc1  F0, 0x78(SP)
lwc1  F0, 0x84(SP)
cvt.s.w F0, F0
swc1  F0, 0x7c(SP)
move  A0, S4
li    A1, 1
jal   0x800F69B0
 li    A2, 18319
sw    S0, 0x10(SP)
move  A0, S4
li    A1, 1
li    A2, 7
jal   func_801106A4
 move  A3, S3
lb    A0, 0xf(S6)
li    A1, 2
move  A2, S1
jal   0x800F6E4C
 move  A3, S2
lwc1  F0, 0x80(SP)
cvt.s.w F0, F0
swc1  F0, 0x78(SP)
lwc1  F0, 0x84(SP)
cvt.s.w F0, F0
swc1  F0, 0x7c(SP)
move  A0, S4
li    A1, 2
jal   0x800F69B0
 li    A2, 18318
sw    S0, 0x10(SP)
move  A0, S4
li    A1, 2
li    A2, 7
move  A3, S3
L80114318:
jal   func_801106A4
       NOP
L80114320:
jal   SleepProcess
 li    A0, 2
L80114328:
jal   0x800E4A7C
 move  S1, R0
lb    A0, 0xf(S6)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S6)
sll   V0, S4, 3
subu  V0, V0, S4
sll   V0, V0, 3
lui   A2, hi(p1_item1)
addiu A2, A2, lo(p1_item1)
addu  A3, V0, A2
addu  A0, A3, S1
L8011437C:
lb    A1, 0(A0)
lb    V1, 0xf(S6)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
addu  V0, V0, A2
addu  V0, V0, S1
lbu   V0, 0(V0)
sb    V0, 0(A0)
lb    V1, 0xf(S6)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
addu  V0, V0, A2
addu  V0, V0, S1
sb    A1, 0(V0)
addiu S1, S1, 1
slti  V0, S1, 3
bnezl V0, L8011437C
 addu  A0, A3, S1
bnezl S7, L801143E8
 li    A0, 20
jal   0x800F641C
 li    A0, -1
jal   0x800F641C
 move  A0, S4
li    A0, 10
L801143E8:
jal   SleepProcess
 move  S0, R0
jal   PlaySound
 li    A0, 347
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F20
li    AT, 0x3D380000 ; 0.044922
ori AT, AT, 0x51eb
mtc1  AT, F24
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F22
add.s F20, F20, F24
L8011441C:
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
mfc1  A1, F20
mul.s F6, F20, F22
mfc1  A2, F6
      NOP
jal   0x8001D558
 li    A3, 1
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0x14
bnezl V0, L8011441C
 add.s F20, F20, F24
jal   0x800D9B54
 move  A0, S5
beqz  S7, L80114488
       NOP
lb    A1, 0xf(S6)
jal   0x8004ACE0
 li    A0, 646
li    A0, -1
li    A1, 3
jal   0x800F2304
 move  A2, R0
j     L801144A8
 li    A0, 70
L80114488:
lb    A1, 0xf(S6)
jal   0x8004ACE0
 li    A0, 628
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
li    A0, 50
L801144A8:
jal   SleepProcess
       NOP
li    V0, 2
sw    V0, 0x10(SP)
li    A0, -1
li    A1, -1
move  A2, R0
jal   0x800F2388
 li    A3, 10
beqz  S7, L801144D8
 li    A1, 0x3a2d ; "{0} and {1} traded items!"
li    A1, 0x3a2e ; "Neither {0} nor {1} have any items to trade!"
L801144D8:
lb    V1, 0xf(S6)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   V1, hi(p1_char)
addu  V1, V1, V0
lbu   V1, lo(p1_char)(V1)
lui   A0, hi(CORE_801014A0)
addiu A0, A0, lo(CORE_801014A0)
sll   V1, V1, 2
addu  V1, V1, A0
sll   V0, S4, 3
subu  V0, V0, S4
sll   V0, V0, 3
lui   AT, hi(p1_char)
addu  AT, AT, V0
lbu   V0, lo(p1_char)(AT)
sll   V0, V0, 2
addu  V0, V0, A0
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
lw    A2, 0(V1)
lw    A3, 0(V0)
jal   0x800EC8EC ; ShowMessage
 li    A0, -1
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
lw    RA, 0xa8(SP)
lw    S7, 0xa4(SP)
lw    S6, 0xa0(SP)
lw    S5, 0x9c(SP)
lw    S4, 0x98(SP)
lw    S3, 0x94(SP)
lw    S2, 0x90(SP)
lw    S1, 0x8c(SP)
lw    S0, 0x88(SP)
ldc1  F28, 0xd0(SP)
ldc1  F26, 0xc8(SP)
ldc1  F24, 0xc0(SP)
ldc1  F22, 0xb8(SP)
ldc1  F20, 0xb0(SP)
jr    RA
 addiu SP, SP, 0xd8

D_80114590:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
jal   0x8004EE68
 sw    S0, 0x10(SP)
lw    S2, 0x8c(V0)
lw    S1, 0(S2)
lw    S0, 4(S2)
move  A0, S1
lhu   A2, 0xa(S2)
jal   0x800D9CE8
 li    A1, -1
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, S0, 0xc
lwc1  F0, 0x30(S0)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F2
      NOP
sub.s F0, F0, F2
lwc1  F2, 0x10(S1)
add.s F0, F0, F2
swc1  F0, 0x10(S1)
jal   0x800D9A40
 move  A0, S1
func_801145F8:
jal   0x800D9E0C
 move  A0, S1
andi  V0, V0, 0xffff
bnez  V0, L80114628
       NOP
lw    V0, 0xc(S2)
bnez  V0, L80114628
       NOP
jal   SleepVProcess
       NOP
j     func_801145F8
       NOP
L80114628:
jal   0x800D9B54
 move  A0, S1
jal   EndProcess
 move  A0, R0
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

D_80114650:
addiu SP, SP, -0x60
sw    RA, 0x28(SP)
sw    S5, 0x24(SP)
sw    S4, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F30, 0x58(SP)
sdc1  F28, 0x50(SP)
sdc1  F26, 0x48(SP)
sdc1  F24, 0x40(SP)
sdc1  F22, 0x38(SP)
jal   0x8004EE68
 sdc1  F20, 0x30(SP)
lw    S4, 0x8c(V0)
lui   S1, hi(D_8011FB78)
lw    S1, lo(D_8011FB78)(S1)
li    A0, 69
jal   0x800D90C8
 move  A1, R0
move  S5, V0
jal   0x800D9B24
 move  A0, S5
lui A0, 0xb
ori A0, A0, 4
jal   0x8000CED8
 li    A1, 2729
sll   V0, V0, 0x10
sra   S2, V0, 0x10
move  S0, S2
move  A0, S0
lui   A1, 0x3f80
lui   A2, 0x41a0
jal   0x8000CD00
 move  A3, A1
lui   A1, 0x4120
jal   0x8000D018
 move  A0, S0
move  A0, S0
jal   0x8001C8A8
 li    A1, 1
jal   PlaySound
 li    A0, 588
mtc1  R0, F20
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F22
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F26
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F28
li    AT, 0x42A00000 ; 80.000000
mtc1  AT, F24
sll   S0, S2, 0x10
L80114728:
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S1)
jal   0x8008E3F0
 mov.s F12, F20
add.s F20, F20, F22
c.lt.s F26, F20
      NOP
      NOP
bc1f  L8011475C
 swc1  F0, 0x20(S1)
sub.s F20, F20, F26
L8011475C:
add.s F22, F22, F28
c.lt.s F24, F22
      NOP
      NOP
bc1tl L80114774
 mov.s F22, F24
L80114774:
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 sra   A0, S0, 0x10
jal   SleepVProcess
       NOP
c.lt.s F22, F24
      NOP
bc1t  L80114728
       NOP
jal   PlaySound
 li    A0, 330
li    AT, 0x42DC0000 ; 110.000000
mtc1  AT, F2
lwc1  F0, 0x30(S1)
c.lt.s F0, F2
      NOP
      NOP
bc1f  L8011486C
 mov.s F4, F0
li    AT, 0x40E00000 ; 7.000000
mtc1  AT, F28
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F24
sll   S0, S2, 0x10
li    AT, 0x42DC0000 ; 110.000000
mtc1  AT, F26
add.s F0, F4, F28
L801147F4:
swc1  F0, 0x30(S1)
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S1)
jal   0x8008E3F0
 mov.s F12, F20
add.s F20, F20, F22
c.lt.s F24, F20
      NOP
      NOP
bc1f  L8011482C
 swc1  F0, 0x20(S1)
sub.s F20, F20, F24
L8011482C:
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 sra   A0, S0, 0x10
jal   SleepVProcess
       NOP
lwc1  F4, 0x30(S1)
c.lt.s F4, F26
      NOP
      NOP
bc1tl L801147F4
 add.s F0, F4, F28
L8011486C:
sw    R0, 0(S4)
li    S3, -1
sll   S0, S2, 0x10
L80114878:
lui   A0, hi(D_8011E490)
lw    A0, lo(D_8011E490)(A0)
beq   A0, S3, L801148C0
       NOP
jal   GetPlayerStruct
       NOP
lw    A1, 0x24(V0)
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 sra   A0, S0, 0x10
L801148C0:
jal   SleepVProcess
       NOP
lw    V0, 0(S4)
beqz  V0, L80114878
       NOP
jal   PlaySound
 li    A0, 331
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F24
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F2
lwc1  F0, 0x30(S1)
c.lt.s F2, F0
      NOP
      NOP
bc1f  L801149C0
 mov.s F4, F0
li    S3, 0x3F800000 ; 1.000000
li    AT, 0x3E4C0000 ; 0.199219
ori AT, AT, 0xcccd
mtc1  AT, F30
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F26
sll   S0, S2, 0x10
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F28
sub.s F0, F4, F24
L8011492C:
mtc1  S3, F6
      NOP
c.lt.s F6, F24
      NOP
      NOP
bc1f  L8011494C
 swc1  F0, 0x30(S1)
sub.s F24, F24, F30
L8011494C:
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S1)
jal   0x8008E3F0
 mov.s F12, F20
add.s F20, F20, F22
c.lt.s F26, F20
      NOP
      NOP
bc1f  L80114980
 swc1  F0, 0x20(S1)
sub.s F20, F20, F26
L80114980:
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 sra   A0, S0, 0x10
jal   SleepVProcess
       NOP
lwc1  F4, 0x30(S1)
c.lt.s F28, F4
      NOP
      NOP
bc1tl L8011492C
 sub.s F0, F4, F24
L801149C0:
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F24
li    S3, 0x41700000 ; 15.000000
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F30
li    AT, 0x3F000000 ; 0.500000
mtc1  AT, F28
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F26
sll   S0, S2, 0x10
func_801149E8:
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S1)
jal   0x8008E3F0
 mov.s F12, F20
add.s F20, F20, F22
c.lt.s F24, F20
      NOP
      NOP
bc1f  L80114A1C
 swc1  F0, 0x20(S1)
sub.s F20, F20, F24
L80114A1C:
mtc1  S3, F6
      NOP
c.lt.s F6, F22
      NOP
      NOP
bc1fl L80114A3C
 sub.s F22, F22, F28
sub.s F22, F22, F30
L80114A3C:
c.lt.s F22, F26
      NOP
bc1t  L80114A7C
       NOP
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 sra   A0, S0, 0x10
jal   SleepVProcess
       NOP
j     func_801149E8
       NOP
L80114A7C:
jal   0x8000D044
 move  A0, S2
lui   A0, hi(D_80114590)
addiu A0, A0, lo(D_80114590)
li    A1, 18432
move  A2, R0
jal   InitProcess
 li    A3, 64
move  S0, V0
lw    A0, 0x18(S0)
jal   0x800360F0
 li    A1, 32
sw    V0, 0x8c(S0)
sw    S5, 0(V0)
sw    S1, 4(V0)
sw    R0, 8(V0)
sw    R0, 0xc(V0)
jal   SleepProcess
 li    A0, 3
sw    R0, 0(S4)
jal   PlaySound
 li    A0, 589
move  S0, R0
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F20
li    AT, 0x3D380000 ; 0.044922
ori AT, AT, 0x51eb
mtc1  AT, F24
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F22
add.s F20, F20, F24
L80114AFC:
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
mfc1  A1, F20
mul.s F6, F20, F22
mfc1  A2, F6
      NOP
jal   0x8001D558
 li    A3, 1
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0x14
bnezl V0, L80114AFC
 add.s F20, F20, F24
jal   0x800D9B54
 move  A0, S1
jal   EndProcess
 move  A0, R0
lw    RA, 0x28(SP)
lw    S5, 0x24(SP)
lw    S4, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F30, 0x58(SP)
ldc1  F28, 0x50(SP)
ldc1  F26, 0x48(SP)
ldc1  F24, 0x40(SP)
ldc1  F22, 0x38(SP)
ldc1  F20, 0x30(SP)
jr    RA
 addiu SP, SP, 0x60

game_guy_lucky_charm:
addiu SP, SP, -0x68
sw    RA, 0x50(SP)
sw    S5, 0x4c(SP)
sw    S4, 0x48(SP)
sw    S3, 0x44(SP)
sw    S2, 0x40(SP)
sw    S1, 0x3c(SP)
sw    S0, 0x38(SP)
sdc1  F22, 0x60(SP)
sdc1  F20, 0x58(SP)
lui   S5, hi(CORE_800CD058)
jal   func_8010FE54
 addiu S5, S5, lo(CORE_800CD058)
li    A0, -1
jal   PlayerHasItem
 li    A1, ITEM_LUCKY_CHARM
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1) ; Clear the lucky charm item slot
lui   A0, hi(current_player_index)
jal   FixUpPlayerItemSlots
 lb    A0, lo(current_player_index)(A0)
lui   A0, hi(current_player_index)
jal   0x800F63F0
 lb    A0, lo(current_player_index)(A0)
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
li    A0, 62
jal   0x800D90C8
 move  A1, R0
move  S1, V0
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
jal   0x800D9714
 move  A0, S1
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
      NOP
swc1  F20, 0x30(S1)
jal   0x800D9B24
 move  A0, S1
li    A0, 67
jal   0x800D90C8
 move  A1, R0
move  S0, V0
lui   AT, hi(D_8011FB78)
sw    S0, lo(D_8011FB78)(AT)
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   A1, 2
jal   0x8001C2FC
 lui   A2, 2
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
jal   0x8001C448
 lh    A0, 0(V0)
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
jal   0x8001C954
 lh    A0, 0(V0)
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
jal   0x8001C514
 lh    A0, 0(V0)
jal   GetPlayerStruct
 li    A0, -1
lw    A1, 0x24(V0)
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 2
jal   0x8001C814
 li    A2, 1
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S0)
jal   PlaySound
 li    A0, 331
lwc1  F0, 0x30(S0)
c.lt.s F20, F0
      NOP
      NOP
bc1f  L80114D58
 mov.s F2, F0
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
      NOP
sub.s F0, F2, F22
L80114D38:
jal   SleepVProcess
 swc1  F0, 0x30(S0)
lwc1  F2, 0x30(S0)
c.lt.s F20, F2
      NOP
      NOP
bc1tl L80114D38
 sub.s F0, F2, F22
L80114D58:
lui   V1, hi(p1_char)
addiu V1, V1, lo(p1_char)
lbu   A2, 0(V1)
lbu   A3, 0x38(V1)
lbu   V0, 0x70(V1)
addiu V0, V0, 0x1c00
sw    V0, 0x10(SP)
lbu   V0, 0xa8(V1)
addiu V0, V0, 0x1c00
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x5C00 ; "Who's your opponent?"
addiu A2, A2, 0x1c00
jal   0x800EC8EC ; ShowMessage
 addiu A3, A3, 0x1c00
move  A0, R0
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 move  A1, R0
jal   0x800EC6C8
 move  S2, V0
jal   0x800EC6EC
       NOP
bltz  S2, L80114DE0
 slti  V0, S2, 4
bnez  V0, L80114E04
 li    V0, 1
li    V0, 4
bne   S2, V0, L80114DE0
       NOP
jal   0x800EF0D8
 move  A0, R0
j     L80114E00
 move  S2, V0
L80114DE0:
jal   func_80106FE8
       NOP
li    V0, 1
lui   AT, hi(CORE_800CB99C)
jal   0x80049FB8
 sb    V0, lo(CORE_800CB99C)(AT)
j     L80114D58
       NOP
L80114E00:
li    V0, 1
L80114E04:
sw    V0, 0x20(SP)
lui   A0, hi(D_80114650)
addiu A0, A0, lo(D_80114650)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
addiu V1, SP, 0x20
sw    V1, 0x8c(V0)
lw    V0, 0x20(SP)
beqz  V0, L80114E48
       NOP
L80114E34:
jal   SleepVProcess
       NOP
lw    V0, 0x20(SP)
bnez  V0, L80114E34
       NOP
L80114E48:
lb    V0, 0xf(S5)
beq   S2, V0, L80114EC8
 move  A0, R0
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 16
lui   AT, hi(D_8011E490)
sw    S2, lo(D_8011E490)(AT)
jal   0x800F915C
 li    A0, 2
jal   GetPlayerStruct
 move  A0, S2
lw    A0, 0x24(V0)
jal   0x800F9174
 addiu A0, A0, 0xc
jal   GetPlayerStruct
 move  A0, S2
lw    A0, 0x24(V0)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepVProcess
       NOP
jal   SleepProcess
 li    A0, 10
move  A0, R0
jal   InitFadeIn
 li    A1, 16
jal   SleepProcess
 li    A0, 16
j     L80114EDC
 li    V0, 1
L80114EC8:
jal   SleepProcess
 li    A0, 30
lui   AT, hi(D_8011E490)
sw    S2, lo(D_8011E490)(AT)
li    V0, 1
L80114EDC:
sw    V0, 0x20(SP)
L80114EE0:
jal   SleepVProcess
       NOP
lw    V0, 0x20(SP)
bnez  V0, L80114EE0
       NOP
jal   GetPlayerStruct
 move  A0, S2
lw    S3, 0x24(V0)
lui   A1, 0x40a0
lui   A2, 0x4000
jal   0x800EDB98
 move  A0, S1
move  S4, V0
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, S3, 0xc
jal   0x800D9A40
 move  A0, S1
mtc1  R0, F0
      NOP
swc1  F0, 0x2c(S1)
swc1  F0, 0x28(S1)
swc1  F0, 0x24(S1)
li    AT, 0x3E4C0000 ; 0.199219
ori AT, AT, 0xcccd
mtc1  AT, F22
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
L80114F50:
lwc1  F0, 0x2c(S1)
add.s F0, F0, F22
swc1  F0, 0x2c(S1)
swc1  F0, 0x28(S1)
jal   SleepVProcess
 swc1  F0, 0x24(S1)
lwc1  F0, 0x24(S1)
c.lt.s F0, F20
      NOP
      NOP
bc1t  L80114F50
 sll   A0, S2, 0x10
sra   A0, A0, 0x10
jal   0x800FF900
 li    A1, 4
jal   PlaySound
 li    A0, 673
sll   V0, S2, 3
subu  V0, V0, S2
sll   S0, V0, 3
lui   V0, hi(p1_coins)
addu  V0, V0, S0
lh    V0, lo(p1_coins)(V0)
beqz  V0, L801150F4
 li    A1, 0x2F00 ; "It's time for a Game Guy Mini-Game! First I'll take all your coins"
li    A0, 10
li    A2, -1
jal   func_8010A3B8
 move  A3, S2
lui   V0, hi(p1_coins)
addu  V0, V0, S0
lhu   V0, lo(p1_coins)(V0)
lui   AT, hi(CORE_800D110E)
addu  AT, AT, S0
sh    V0, lo(CORE_800D110E)(AT)
lui   A1, hi(p1_coins)
addu  A1, A1, S0
lh    A1, lo(p1_coins)(A1)
move  A0, S2
jal   ShowPlayerCoinChange
 subu  A1, R0, A1
lui   A1, hi(p1_coins)
addu  A1, A1, S0
lh    A1, lo(p1_coins)(A1)
move  A0, S2
jal   AdjustPlayerCoinsGradual
 subu  A1, R0, A1
jal   SleepProcess
 li    A0, 30
li    A0, 10
li    A1, 0x2F02 ; "We're off to Game Guy's Game Room"
li    A2, -1
jal   func_8010A3B8
 move  A3, S2
jal   EndProcess
 move  A0, S4
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F2
lwc1  F0, 0x30(S1)
c.le.s F2, F0
      NOP
      NOP
bc1f  L80115084
 mov.s F4, F0
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F22
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F20
sub.s F0, F4, F22
L80115064:
jal   SleepVProcess
 swc1  F0, 0x30(S1)
lwc1  F4, 0x30(S1)
c.le.s F20, F4
      NOP
      NOP
bc1tl L80115064
 sub.s F0, F4, F22
L80115084:
jal   SleepProcess
 li    A0, 30
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F2
lwc1  F0, 0x30(S1)
c.lt.s F0, F2
      NOP
      NOP
bc1f  L801151B8
 mov.s F4, F0
li    AT, 0x40800000 ; 4.000000
mtc1  AT, F20
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F22
add.s F0, F4, F20
L801150C0:
swc1  F0, 0x30(S1)
lwc1  F0, 0x30(S3)
add.s F0, F0, F20
jal   SleepVProcess
 swc1  F0, 0x30(S3)
lwc1  F4, 0x30(S1)
c.lt.s F4, F22
      NOP
      NOP
bc1tl L801150C0
 add.s F0, F4, F20
j     L801151BC
 sll   A0, S2, 0x10
L801150F4:
li    A0, 10
li    A1, 12033
li    A2, -1
jal   func_8010A3B8
 move  A3, S2
jal   EndProcess
 move  A0, S4
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F2
lwc1  F0, 0x30(S1)
c.le.s F0, F2
      NOP
      NOP
bc1f  L80115164
 mov.s F4, F0
li    AT, 0x40800000 ; 4.000000
mtc1  AT, F22
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F20
add.s F0, F4, F22
L80115144:
jal   SleepVProcess
 swc1  F0, 0x30(S1)
lwc1  F4, 0x30(S1)
c.le.s F4, F20
      NOP
      NOP
bc1tl L80115144
 add.s F0, F4, F22
L80115164:
jal   0x800D9B54
 move  A0, S1
li    A0, 9
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 17
jal   0x800F915C
 li    A0, 1
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepProcess
 li    A0, 5
li    A0, 9
jal   InitFadeIn
 li    A1, 16
j     L80115458
 li    A0, 17
L801151B8:
sll   A0, S2, 0x10
L801151BC:
jal   PlayerIsCPU
 sra   A0, A0, 0x10
beqz  V0, L80115374
       NOP
lb    V0, 0x16(S5)
beqz  V0, L80115374
 li    A0, 9
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 17
jal   0x800D9B54
 move  A0, S1
move  A0, S3
move  A1, R0
jal   0x800EE688
 move  A2, A1
sw    R0, 0x30(S3)
jal   SleepProcess
 li    A0, 5
li    A0, 9
jal   InitFadeIn
 li    A1, 16
jal   SleepProcess
 li    A0, 17
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
addiu A0, V0, 1
move  V1, R0
sll   V0, V1, 2
L8011523C:
lui   AT, hi(D_8011E49E)
addu  AT, AT, V0
lhu   V0, lo(D_8011E49E)(AT)
slt   V0, V0, A0
beqz  V0, L80115264
 sll   V0, V1, 2
addiu V1, V1, 1
slti  V0, V1, 7
bnez  V0, L8011523C
 sll   V0, V1, 2
L80115264:
lui   V1, hi(D_8011E49C)
addu  V1, V1, V0
lhu   V1, lo(D_8011E49C)(V1)
beqz  V1, L80115314
 sll   V0, S2, 3
subu  V0, V0, S2
sll   V0, V0, 3
lui   S1, hi(CORE_800D110E)
addu  S1, S1, V0
lh    S1, lo(CORE_800D110E)(S1)
mult  S1, V1
mflo  S1
slti  V0, S1, 0x3e8
      NOP
beql  V0, R0, L801152A4
 li    S1, 999
L801152A4:
addiu S0, SP, 0x28
move  A0, S0
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 move  A2, S1
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x2F03 ; "Wow you earned X coins playing my Mini-Game!"
move  A2, S0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
move  A0, S2
jal   ShowPlayerCoinChange
 move  A1, S1
move  A0, S2
jal   AdjustPlayerCoinsGradual
 move  A1, S1
jal   SleepProcess
 li    A0, 20
j     L80115320
       NOP
L80115314:
li    A0, -1
jal   0x800EC590
 li    A1, 12036
L80115320:
jal   SleepProcess
 li    A0, 10
li    A0, 9
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 17
jal   0x800F915C
 li    A0, 1
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepProcess
 li    A0, 5
li    A0, 9
jal   InitFadeIn
 li    A1, 16
j     L80115458
 li    A0, 17
L80115374:
lb    A0, 0xf(S5)
jal   0x800DEB2C
       NOP
li    V1, 3
bne   V0, V1, L8011539C
       NOP
jal   0x80035FDC
 li    A0, 23
j     L801153A8
 move  V1, R0
L8011539C:
jal   0x8003602C
 li    A0, 23
move  V1, R0
L801153A8:
li    A0, 1
sll   V0, V1, 3
L801153B0:
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(player_structs)
addu  AT, AT, V0
sb    A0, lo(player_structs)(AT)
addiu V1, V1, 1
slti  V0, V1, 4
bnez  V0, L801153B0
 sll   V0, V1, 3
jal   GetPlayerStruct
 move  A0, S2
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F12
      NOP
jal   0x800EEF80
 sb    R0, 0(V0)
move  A0, V0
move  V1, R0
L801153F8:
lui   V0, hi(D_8011E498)
addu  V0, V0, V1
lbu   V0, lo(D_8011E498)(V0)
slt   V0, A0, V0
bnez  V0, L80115420
 li    V0, 3
addiu V1, V1, 1
sltiu V0, V1, 3
bnez  V0, L801153F8
 li    V0, 3
L80115420:
beql  V1, V0, L80115428
 li    V1, 2
L80115428:
lui   V0, hi(D_8011E494)
addu  V0, V0, V1
lbu   V0, lo(D_8011E494)(V0)
sb    V0, 0x10(S5)
lui   AT, hi(CORE_800CD0B2)
jal   0x800FC998
 sh    S2, lo(CORE_800CD0B2)(AT)
jal   0x8004A0E0
       NOP
jal   0x800FF7F0
 li    A0, 2
li    A0, -1
L80115458:
jal   SleepProcess
       NOP
lw    RA, 0x50(SP)
lw    S5, 0x4c(SP)
lw    S4, 0x48(SP)
lw    S3, 0x44(SP)
lw    S2, 0x40(SP)
lw    S1, 0x3c(SP)
lw    S0, 0x38(SP)
ldc1  F22, 0x60(SP)
ldc1  F20, 0x58(SP)
jr    RA
 addiu SP, SP, 0x68

func_8011548C:
addiu SP, SP, -0x40
sw    RA, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
sdc1  F22, 0x38(SP)
sdc1  F20, 0x30(SP)
move  S2, A0
move  S0, A1
move  S1, A2
sll   A0, S2, 0x10
sra   A0, A0, 0x10
move  A1, R0
addiu A2, SP, 0x10
jal   0x800F6748
 addiu A3, SP, 0x14
lwc1  F2, 0(S1)
lwc1  F0, 0x10(SP)
sub.s F22, F2, F0
mtc1  S0, F4
      NOP
cvt.s.w F4, F4
div.s F22, F22, F4
lwc1  F2, 4(S1)
lwc1  F0, 0x14(SP)
sub.s F20, F2, F0
beqz  S0, L80115560
 div.s F20, F20, F4
sll   S3, S2, 0x10
L80115504:
lwc1  F2, 0x10(SP)
add.s F2, F22, F2
swc1  F2, 0x10(SP)
lwc1  F0, 0x14(SP)
add.s F0, F20, F0
swc1  F0, 0x14(SP)
trunc.w.s F4, F2
mfc1  A2, F4
      NOP
sll   A2, A2, 0x10
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
sra   A0, S3, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
jal   SleepVProcess
 addiu S0, S0, -1
bnez  S0, L80115504
       NOP
L80115560:
sll   A0, S2, 0x10
lwc1  F0, 0(S1)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lwc1  F0, 4(S1)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
sra   A0, A0, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
lw    RA, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
ldc1  F22, 0x38(SP)
ldc1  F20, 0x30(SP)
jr    RA
 addiu SP, SP, 0x40

func_801155C4:
addiu SP, SP, -0x28
sw    RA, 0x24(SP)
sw    S4, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
jal   0x8004EE68
 sw    S0, 0x10(SP)
lw    S1, 0x8c(V0)
beqz  S1, L80115604
 li    S3, 10
li    V0, 1
beq   S1, V0, L8011562C
 sll   V0, S1, 2
j     L80115650
 move  A1, R0
L80115604:
sll   V0, S1, 2
lui   A0, hi(D_8011FB82)
addu  A0, A0, V0
lh    A0, lo(D_8011FB82)(A0)
move  A1, R0
li    A2, 177
jal   0x80054904
 li    A3, 44
j     L80115670
 sll   V0, S1, 2
L8011562C:
lui   A0, hi(D_8011FB82)
addu  A0, A0, V0
lh    A0, lo(D_8011FB82)(A0)
move  A1, R0
li    A2, 122
jal   0x80054904
 li    A3, 57
j     L80115670
 sll   V0, S1, 2
L80115650:
lui   A0, hi(D_8011FB82)
addu  A0, A0, V0
lh    A0, lo(D_8011FB82)(A0)
li    A2, 160
jal   0x80054904
 li    A3, 152
li    S3, 30
sll   V0, S1, 2
L80115670:
lui   A0, hi(D_8011FB82)
addu  A0, A0, V0
lh    A0, lo(D_8011FB82)(A0)
move  A1, R0
jal   0x8005532C
 li    A2, 32768
move  S0, R0
lui   V1, hi(D_8011FB80)
addiu V1, V1, lo(D_8011FB80)
sll   V0, S1, 2
addu  S4, V0, V1
li    S2, 255
L801156A0:
lh    A0, 2(S4)
move  A1, R0
jal   0x80055458
 andi  A2, S0, 0xffff
jal   SleepVProcess
       NOP
div   S2, S3
bnez  S3, L801156C8
       NOP
.word 0x0007000D ; break 7
L801156C8:
li    AT, -1
bne   S3, AT, L801156E0
 lui   AT, 0x8000
bne   S2, AT, L801156E0
       NOP
.word 0x0006000D; break 6
L801156E0:
mflo  V0
addu  S0, S0, V0
slti  V0, S0, 0xff
bnez  V0, L801156A0
 sll   V0, S1, 2
lui   A0, hi(D_8011FB82)
addu  A0, A0, V0
lh    A0, lo(D_8011FB82)(A0)
move  A1, R0
jal   0x80055458
 li    A2, 255
jal   EndProcess
 move  A0, R0
lw    RA, 0x24(SP)
lw    S4, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x28

func_80115734:
addiu SP, SP, -0x48
sw    RA, 0x44(SP)
sw    S2, 0x40(SP)
sw    S1, 0x3c(SP)
sw    S0, 0x38(SP)
move  S1, R0
lui S2, 0x8888
ori S2, S2, 0x8889
sll   V0, S1, 1
L80115758:
addu  V0, V0, S1
lui   V1, hi(D_8011E4B8)
addu  V1, V1, V0
lbu   V1, lo(D_8011E4B8)(V1)
sw    V1, 0x18(SP)
lui   A1, hi(D_8011E4B9)
addu  A1, A1, V0
lbu   A1, lo(D_8011E4B9)(A1)
sw    A1, 0x1c(SP)
lui   A2, hi(D_8011E4BA)
addu  A2, A2, V0
lbu   A2, lo(D_8011E4BA)(A2)
sw    A2, 0x20(SP)
addiu V0, S1, 1
sll   A0, V0, 1
addu  A0, A0, V0
lui   V0, hi(D_8011E4B8)
addu  V0, V0, A0
lbu   V0, lo(D_8011E4B8)(V0)
subu  V0, V0, V1
mult  V0, S2
mfhi  T0
addu  V1, T0, V0
sra   V1, V1, 4
sra   V0, V0, 0x1f
subu  V1, V1, V0
sw    V1, 0x28(SP)
lui   V0, hi(D_8011E4B9)
addu  V0, V0, A0
lbu   V0, lo(D_8011E4B9)(V0)
subu  V0, V0, A1
mult  V0, S2
mfhi  T0
addu  V1, T0, V0
sra   V1, V1, 4
sra   V0, V0, 0x1f
subu  V1, V1, V0
sw    V1, 0x2c(SP)
lui   V0, hi(D_8011E4BA)
addu  V0, V0, A0
lbu   V0, lo(D_8011E4BA)(V0)
subu  V0, V0, A2
mult  V0, S2
mfhi  T0
addu  V1, T0, V0
sra   V1, V1, 4
sra   V0, V0, 0x1f
subu  V1, V1, V0
sw    V1, 0x30(SP)
move  S0, R0
L80115820:
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
lbu   A2, 0x1b(SP)
lbu   A3, 0x1f(SP)
lbu   V0, 0x23(SP)
sw    V0, 0x10(SP)
jal   0x80055420
 move  A1, R0
lw    V0, 0x18(SP)
lw    V1, 0x28(SP)
addu  V0, V0, V1
sw    V0, 0x18(SP)
lw    V0, 0x1c(SP)
lw    V1, 0x2c(SP)
addu  V0, V0, V1
sw    V0, 0x1c(SP)
lw    V0, 0x20(SP)
lw    V1, 0x30(SP)
addu  V0, V0, V1
jal   SleepVProcess
 sw    V0, 0x20(SP)
addiu S0, S0, 1
slti  V0, S0, 0x1e
bnez  V0, L80115820
       NOP
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
addiu S0, S1, 1
sll   V0, S0, 1
addu  V0, V0, S0
lui   A2, hi(D_8011E4B8)
addu  A2, A2, V0
lbu   A2, lo(D_8011E4B8)(A2)
lui   A3, hi(D_8011E4B9)
addu  A3, A3, V0
lbu   A3, lo(D_8011E4B9)(A3)
lui   AT, hi(D_8011E4BA)
addu  AT, AT, V0
lbu   V0, lo(D_8011E4BA)(AT)
sw    V0, 0x10(SP)
jal   0x80055420
 move  A1, R0
jal   SleepProcess
 li    A0, 10
move  S1, S0
blez  S1, L80115758
 sll   V0, S1, 1
jal   EndProcess
 move  A0, R0
lw    RA, 0x44(SP)
lw    S2, 0x40(SP)
lw    S1, 0x3c(SP)
lw    S0, 0x38(SP)
jr    RA
 addiu SP, SP, 0x48

D_801158FC:
addiu SP, SP, -0x48
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F28, 0x40(SP)
sdc1  F26, 0x38(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
jal   0x8004EE68
 sdc1  F20, 0x20(SP)
lw    S1, 0x8c(V0)
jal   PlaySound
 li    A0, 323
lui   S0, hi(D_8011FB90)
lw    S0, lo(D_8011FB90)(S0)
jal   0x800D9A40
 move  A0, S0
mtc1  R0, F22
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
lui   AT, hi(D_8011F970)
ldc1  F24, lo(D_8011F970)(AT)
li    AT, 0x41900000 ; 18.000000
mtc1  AT, F26
L80115968:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S0, 0x24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F28
cvt.d.s F0, F20
add.d F0, F0, F24
cvt.s.d F20, F0
c.lt.s F20, F26
      NOP
      NOP
bc1t  L80115968
 li    V0, 1
lw    V1, 0(S1)
beq   V1, V0, L80115A3C
       NOP
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F24
li    S2, 1
L801159F4:
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F24
lw    V0, 0(S1)
bne   V0, S2, L801159F4
       NOP
L80115A3C:
li    AT, 0x42200000 ; 40.000000
mtc1  AT, F0
      NOP
c.lt.s F20, F0
      NOP
bc1f  L80115AE0
       NOP
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
lui   AT, hi(D_8011F978)
ldc1  F24, lo(D_8011F978)(AT)
li    AT, 0x42200000 ; 40.000000
mtc1  AT, F26
L80115A70:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S0, 0x24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F28
cvt.d.s F0, F20
add.d F0, F0, F24
cvt.s.d F20, F0
c.lt.s F20, F26
      NOP
bc1t  L80115A70
       NOP
L80115AE0:
lw    V1, 0(S1)
li    V0, 2
beq   V1, V0, L80115B44
       NOP
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F20
li    S2, 2
L80115AFC:
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F20
lw    V0, 0(S1)
bne   V0, S2, L80115AFC
       NOP
L80115B44:
jal   0x800D9B54
 move  A0, S0
jal   EndProcess
 move  A0, R0
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F28, 0x40(SP)
ldc1  F26, 0x38(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x48

D_80115B80:
addiu SP, SP, -0x98
sw    RA, 0x68(SP)
sw    S7, 0x64(SP)
sw    S6, 0x60(SP)
sw    S5, 0x5c(SP)
sw    S4, 0x58(SP)
sw    S3, 0x54(SP)
sw    S2, 0x50(SP)
sw    S1, 0x4c(SP)
sw    S0, 0x48(SP)
sdc1  F28, 0x90(SP)
sdc1  F26, 0x88(SP)
sdc1  F24, 0x80(SP)
sdc1  F22, 0x78(SP)
sdc1  F20, 0x70(SP)
lui   S5, hi(CORE_800CD058)
addiu S5, S5, lo(CORE_800CD058)
li    A0, 1
jal   0x8005279C
 move  A1, R0
sll   V0, V0, 0x10
lui   A0, hi(CORE_801019C4)
lw    A0, lo(CORE_801019C4)(A0)
jal   ReadMainFS
 sra   S4, V0, 0x10
move  S2, V0
jal   ImgPackParse
 move  A0, S2
sll   V0, V0, 0x10
sra   S7, V0, 0x10
jal   FreeMainFS
 move  A0, S2
move  S0, S4
move  A0, S0
move  A1, R0
move  A2, S7
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 18294
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 4096
move  S3, R0
lui   S6, hi(D_8011FB80)
addiu S6, S6, lo(D_8011FB80)
li    A0, 1
L80115C48:
jal   0x8005279C
 move  A1, R0
sll   S0, S3, 2
addu  S1, S0, S6
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0(S1)
addiu V0, S3, 0x1bb
lui   A0, 0x13
jal   ReadMainFS
 or    A0, V0, A0
move  S2, V0
jal   ImgPackParse
 move  A0, S2
addiu V1, SP, 0x18
addu  S0, S0, V1
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0(S0)
jal   FreeMainFS
 move  A0, S2
lh    A0, 2(S1)
move  A1, R0
lh    A2, 2(S0)
jal   0x80055024
 move  A3, R0
lh    A0, 2(S1)
move  A1, R0
jal   0x80055294
 li    A2, 18304
lh    A0, 2(S1)
move  A1, R0
jal   0x800553A8
 li    A2, 38924
lh    A0, 2(S1)
move  A1, R0
jal   0x80055458
 move  A2, R0
lh    A0, 2(S1)
sw    R0, 0x10(SP)
move  A1, R0
li    A2, 255
jal   0x80055420
 li    A3, 255
addiu S3, S3, 1
slti  V0, S3, 4
bnezl V0, L80115C48
 li    A0, 1
li    A0, 70
jal   0x800D90C8
 move  A1, R0
move  S0, V0
lui   AT, hi(D_8011FB90)
sw    S0, lo(D_8011FB90)(AT)
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 384
jal   0x8001C258
 move  A2, R0
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001C8E4
 li    A1, 0x1800
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001C448
 move  S1, S4
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
jal   GetPlayerStruct
 li    A0, -1
lw    A1, 0x24(V0)
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
jal   0x800D9714
 move  A0, S0
jal   0x800D9B24
 move  A0, S0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 0x8000
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S5)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S5)
move  A1, V0
addiu A2, SP, 0x30
jal   0x800F6E4C
 addiu A3, SP, 0x34
move  A0, S1
lh    A2, 0x32(SP)
lh    A3, 0x36(SP)
jal   0x80054904
 move  A1, R0
li    AT, 0x43200000 ; 160.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x28(SP)
li    AT, 0x42980000 ; 76.000000
mtc1  AT, F20
      NOP
swc1  F20, 0x2c(SP)
jal   PlaySound
 li    A0, 325
addiu S0, SP, 0x28
move  A0, S4
li    A1, 30
jal   func_8011548C
 move  A2, S0
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S5)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S5)
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
jal   SleepProcess
 li    A0, 30
li    AT, 0x434B0000 ; 203.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x28(SP)
li    AT, 0x42300000 ; 44.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x2c(SP)
move  A0, S4
li    A1, 10
jal   func_8011548C
 move  A2, S0
lui   A0, hi(func_801155C4)
addiu A0, A0, lo(func_801155C4)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S2, V0
jal   0x8004EE68
 sw    R0, 0x8c(S2)
move  A0, V0
jal   0x8004ED30
 move  A1, S2
lwc1  F0, 0x28(SP)
sub.s F0, F0, F20
swc1  F0, 0x28(SP)
jal   PlaySound
 li    A0, 333
move  A0, S4
li    A1, 10
jal   func_8011548C
 move  A2, S0
jal   0x8004EE18
       NOP
jal   SleepProcess
 li    A0, 10
lui   A0, hi(func_801155C4)
addiu A0, A0, lo(func_801155C4)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S2, V0
li    V0, 1
jal   0x8004EE68
 sw    V0, 0x8c(S2)
move  A0, V0
jal   0x8004ED30
 move  A1, S2
lwc1  F0, 0x2c(SP)
li    AT, 0x42800000 ; 64.000000
mtc1  AT, F2
      NOP
add.s F0, F0, F2
swc1  F0, 0x2c(SP)
jal   PlaySound
 li    A0, 333
move  A0, S4
li    A1, 10
jal   func_8011548C
 move  A2, S0
jal   0x8004EE18
       NOP
jal   SleepProcess
 li    A0, 10
jal   PlaySound
 li    A0, 334
move  A0, S1
move  A1, R0
addiu A2, SP, 0x38
jal   0x800F6748
 addiu A3, SP, 0x3c
mtc1  R0, F20
move  S1, R0
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F22
add.s F0, F20, F20
L80115FCC:
li    AT, 0x43870000 ; 270.000000
mtc1  AT, F12
      NOP
jal   0x8008E3F0
 add.s F12, F0, F12
li    AT, 0x42A00000 ; 80.000000
mtc1  AT, F2
      NOP
mul.s F0, F0, F2
lwc1  F2, 0x38(SP)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  S0, F2
      NOP
sll   S0, S0, 0x10
sra   S0, S0, 0x10
jal   0x8008E3F0
 mov.s F12, F20
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
sub.s F2, F2, F0
mul.s F2, F2, F22
lwc1  F0, 0x3c(SP)
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S4
move  A1, R0
move  A2, S0
jal   0x80054904
 sra   A3, A3, 0x10
li    AT, 0x42580000 ; 54.000000
mtc1  AT, F0
      NOP
c.lt.s F0, F20
      NOP
      NOP
bc1t  L80116078
 li    V1, 1
move  V1, R0
L80116078:
sltiu V0, S1, 1
and   V0, V1, V0
beqz  V0, L801160BC
 li    A1, 16386
li    S1, 1
lui   A0, hi(func_801155C4)
addiu A0, A0, lo(func_801155C4)
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S2, V0
li    V0, 2
jal   0x8004EE68
 sw    V0, 0x8c(S2)
move  A0, V0
jal   0x8004ED30
 move  A1, S2
L801160BC:
jal   SleepVProcess
       NOP
li   AT, 0x40660000 ; 3.593750
ori  AT, AT, 0x6666
mtc1 AT, F0
      NOP
add.s F20, F20, F0
c.lt.s F20, F22
      NOP
      NOP
bc1tl L80115FCC
 add.s F0, F20, F20
li    AT, 0x43E10000 ; 450.000000
mtc1  AT, F12
      NOP
jal   0x8008E3F0
 sll   S1, S4, 0x10
li    AT, 0x42A00000 ; 80.000000
mtc1  AT, F2
      NOP
mul.s F0, F0, F2
lwc1  F2, 0x38(SP)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  S0, F2
      NOP
sll   S0, S0, 0x10
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F12
      NOP
jal   0x8008E3F0
 sra   S0, S0, 0x10
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
sub.s F2, F2, F0
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F0
      NOP
mul.s F2, F2, F0
lwc1  F0, 0x3c(SP)
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S4
move  A1, R0
move  A2, S0
jal   0x80054904
 sra   A3, A3, 0x10
li    S0, 255
sra   A0, S1, 0x10
L80116190:
move  A1, R0
jal   0x80055458
 andi  A2, S0, 0xffff
jal   SleepVProcess
 addiu S0, S0, -0x19
bgtz  S0, L80116190
 sra   A0, S1, 0x10
jal   0x800525C8
 move  A0, S4
jal   FreeGraphics
 move  A0, S7
jal   0x8004EE18
 move  S3, R0
lui   S0, hi(D_8011FB80)
addiu S0, S0, lo(D_8011FB80)
sll   V0, S3, 2
L801161D0:
addu  V0, V0, S0
lh    A0, 2(V0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
addiu S3, S3, 1
slti  V0, S3, 3
bnez  V0, L801161D0
 sll   V0, S3, 2
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
move  A1, R0
jal   0x8005532C
 li    A2, 32768
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
move  A1, R0
jal   0x80055458
 li    A2, 255
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
move  A1, R0
li    A2, 160
jal   0x80054904
 li    A3, 120
jal   0x8004EE68
 move  S3, R0
move  S0, V0
lui   A0, hi(func_80115734)
addiu A0, A0, lo(func_80115734)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
sw    R0, 0x40(SP)
lui   A0, hi(D_801158FC)
addiu A0, A0, lo(D_801158FC)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
addiu V1, SP, 0x40
jal   0x8004EE18
 sw    V1, 0x8c(V0)
jal   PlaySound
 li    A0, 335
li    A0, -1
li    A1, 4
jal   0x800FFA4C
 li    A2, 5
move  S1, V0
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F28
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F24
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F26
li    S0, 1
L801162C4:
mtc1  S3, F22
      NOP
cvt.s.w F22, F22
jal   0x8008EF20
 mov.s F12, F22
div.s F20, F0, F28
add.s F20, F20, F24
jal   0x8008EF20
 mov.s F12, F22
div.s F0, F0, F26
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
mfc1  A2, F20
add.s F0, F0, F24
mfc1  A3, F0
      NOP
jal   0x800551D8
 move  A1, R0
slti  V0, S3, 0x5a1
beql  V0, R0, L80116318
 sw    S0, 0x40(SP)
L80116318:
jal   SleepVProcess
 addiu S3, S3, 0x32
slti  V0, S3, 0xb41
bnez  V0, L801162C4
       NOP
jal   PlaySound
 li    A0, 297
li    A0, 255
li    A1, 255
jal   0x800620C8
 li    A2, 255
li    A0, 11
jal   InitFadeOut
 li    A1, 50
jal   0x800FFAEC
 move  A0, S1
mtc1  R0, F20
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F22
func_80116368:
jal   GetFadeStatus
       NOP
beqz  V0, L801163A4
       NOP
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x800551D8
 move  A1, R0
jal   SleepVProcess
       NOP
j     func_80116368
 add.s F20, F20, F22
L801163A4:
jal   GetFadeStatus
       NOP
beqz  V0, L801163C4
 li    V0, 2
jal   SleepVProcess
       NOP
j     L801163A4
       NOP
L801163C4:
sw    V0, 0x40(SP)
move  S3, R0
lui   S2, hi(D_8011FB80)
addiu S2, S2, lo(D_8011FB80)
addiu S1, SP, 0x18
sll   S0, S3, 2
L801163DC:
addu  V0, S0, S2
lh    A0, 2(V0)
jal   0x800525C8
 addu  S0, S0, S1
lh    A0, 2(S0)
jal   FreeGraphics
 addiu S3, S3, 1
slti  V0, S3, 4
bnez  V0, L801163DC
 sll   S0, S3, 2
li    A0, 11
jal   InitFadeIn
 li    A1, 90
L80116410:
jal   GetFadeStatus
       NOP
beqz  V0, L80116430
       NOP
jal   SleepVProcess
       NOP
j     L80116410
       NOP
L80116430:
jal   0x800EC414
 li    A0, 14883
li    V0, 2
lui   AT, hi(CORE_800CD0AA)
sh    V0, lo(CORE_800CD0AA)(AT)
lw    RA, 0x68(SP)
lw    S7, 0x64(SP)
lw    S6, 0x60(SP)
lw    S5, 0x5c(SP)
lw    S4, 0x58(SP)
lw    S3, 0x54(SP)
lw    S2, 0x50(SP)
lw    S1, 0x4c(SP)
lw    S0, 0x48(SP)
ldc1  F28, 0x90(SP)
ldc1  F26, 0x88(SP)
ldc1  F24, 0x80(SP)
ldc1  F22, 0x78(SP)
ldc1  F20, 0x70(SP)
jr    RA
 addiu SP, SP, 0x98

func_8011667C:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S1, A0
lui   V1, hi(D_8011FBA8)
addiu V1, V1, lo(D_8011FBA8)
sll   V0, S1, 2
addu  S0, V0, V1
lw    A0, 0(S0)
beqz  A0, L801166B8
       NOP
jal   0x800479AC
       NOP
sw    R0, 0(S0)
L801166B8:
lui   V1, hi(D_8011FB98)
addiu V1, V1, lo(D_8011FB98)
sll   V0, S1, 2
addu  S0, V0, V1
lw    A0, 0(S0)
beqz  A0, L801166E0
       NOP
jal   0x800D9B54
       NOP
sw    R0, 0(S0)
L801166E0:
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

D_801166F4:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, R0
lui   S2, hi(D_8011FBA8)
addiu S2, S2, lo(D_8011FBA8)
sll   V0, S0, 2
L80116718:
addu  S1, V0, S2
lw    A0, 0(S1)
beqz  A0, L80116734
 addiu S0, S0, 1
jal   0x800479AC
       NOP
sw    R0, 0(S1)
L80116734:
slti  V0, S0, 4
bnez  V0, L80116718
 sll   V0, S0, 2
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

D_80116758:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
lw    S1, 0x4c(S0)
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
li    V0, 4
bne   V1, V0, L801167BC
       NOP
lw    V0, 0x54(S0)
bnez  V0, L801167BC
       NOP
lw    V0, 0x50(S0)
bnez  V0, L801167AC
 addiu V0, V0, -1
li    V0, 40
j     L801168EC
 sw    V0, 0x50(S0)
L801167AC:
bnez  V0, L801168EC
 sw    V0, 0x50(S0)
li    V0, 1
sw    V0, 0x54(S0)
L801167BC:
jal   GetPlayerStruct
 move  A0, S1
move  S2, V0
sll   V0, S1, 2
lui   S1, hi(D_8011FB98)
addu  S1, S1, V0
lw    S1, lo(D_8011FB98)(S1)
lw    A1, 0x24(S2)
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
lw    V0, 0x24(S2)
lwc1  F0, 0x30(V0)
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F2
      NOP
add.s F0, F0, F2
swc1  F0, 0x30(S1)
lw    A1, 0x24(S2)
addiu A0, S1, 0x18
jal   0x80089A20
 addiu A1, A1, 0x18
lwc1  F12, 0x24(S0)
jal   0x8008EF20
       NOP
lwc1  F2, 0x18(S0)
mul.s F0, F0, F2
lwc1  F2, 0xc(S1)
add.s F0, F0, F2
swc1  F0, 0xc(S1)
jal   0x8008E3F0
 lwc1  F12, 0x24(S0)
lwc1  F2, 0x18(S0)
mul.s F0, F0, F2
lwc1  F2, 0x14(S1)
add.s F0, F0, F2
swc1  F0, 0x14(S1)
lwc1  F2, 0x24(S0)
li    AT, 0x40A00000 ; 5.000000
mtc1  AT, F0
      NOP
add.s F0, F2, F0
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F2
      NOP
c.le.s F2, F0
      NOP
      NOP
bc1f  L8011688C
 swc1  F0, 0x24(S0)
sub.s F0, F0, F2
swc1  F0, 0x24(S0)
L8011688C:
lwc1  F2, 0x18(S0)
li    AT, 0x40A00000 ; 5.000000
mtc1  AT, F0
      NOP
c.le.s F2, F0
      NOP
bc1f  L801168C0
       NOP
li    AT, 0x3E800000 ; 0.250000
mtc1  AT, F0
      NOP
add.s F0, F2, F0
swc1  F0, 0x18(S0)
L801168C0:
lw    V0, 0x24(S2)
lhu   V0, 0xa(V0)
andi  V0, V0, 8
beqz  V0, L801168E4
       NOP
jal   0x800D9A40
 move  A0, S1
j     L801168EC
       NOP
L801168E4:
jal   0x800D9B24
 move  A0, S1
L801168EC:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_80116904:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S1, A0
jal   GetPlayerStruct
 move  S0, A1
move  S2, V0
sll   V0, S1, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
bnez  V0, L801169DC
 sll   V0, S1, 2
li    V0, 1
beq   S0, V0, L80116974
 slti  V0, S0, 2
beql  V0, R0, L80116964
 li    V0, 2
beqz  S0, L80116978
 li    A0, 63
j     L80116978
 li    A0, 66
L80116964:
beq   S0, V0, L80116978
 li    A0, 65
j     L80116978
 li    A0, 66
L80116974:
li    A0, 64
L80116978:
andi  A0, A0, 0xff
jal   0x800D90C8
 move  A1, R0
move  S0, V0
jal   0x800D9714
 move  A0, S0
sll   V0, S1, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
sw    S0, lo(D_8011FB98)(AT)
lhu   V0, 0xa(S0)
ori   V0, V0, 2
sh    V0, 0xa(S0)
lw    A1, 0x24(S2)
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S0)
jal   0x800ECC0C
 addiu A0, S0, 0x18
j     L801169EC
       NOP
L801169DC:
lui   A0, hi(D_8011FB98)
addu  A0, A0, V0
jal   0x800D9A40
 lw    A0, lo(D_8011FB98)(A0)
L801169EC:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_80116A04:
addiu SP, SP, -0x28
sw    RA, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
move  S1, A0
lui   V0, hi(D_80116758)
addiu V0, V0, lo(D_80116758)
sw    V0, 0x10(SP)
li    A0, 16383
move  A1, R0
move  A2, R0
jal   0x80047620
 li    A3, -1
lui   V1, hi(D_8011FBA8)
addiu V1, V1, lo(D_8011FBA8)
sll   S0, S1, 2
addu  S0, S0, V1
sw    V0, 0(S0)
sw    S1, 0x4c(V0)
lw    V0, 0(S0)
sw    R0, 0x50(V0)
lw    V0, 0(S0)
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F12
      NOP
jal   0x800EEF80
 sw    R0, 0x54(V0)
lw    V1, 0(S0)
mtc1  V0, F0
      NOP
cvt.s.w F0, F0
swc1  F0, 0x24(V1)
lw    V0, 0(S0)
sw    R0, 0x18(V0)
lw    RA, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x28

func_80116AA0:
addiu SP, SP, -0x28
sw    RA, 0x24(SP)
sw    S4, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, R0
lui   S4, hi(D_8011FBA8)
addiu S4, S4, lo(D_8011FBA8)
lui   S3, hi(D_8011FB98)
addiu S3, S3, lo(D_8011FB98)
li    S2, -1
sll   V1, S0, 2
L80116AD8:
addu  V0, V1, S4
sw    R0, 0(V0)
addu  V1, V1, S3
sw    R0, 0(V1)
jal   GetPlayerStruct
 move  A0, S0
lbu   V0, 0x17(V0)
andi  V0, V0, 2
sltiu V0, V0, 1
subu  S1, R0, V0
jal   GetPlayerStruct
 move  A0, S0
lbu   V0, 0x17(V0)
andi  V0, V0, 4
bnezl V0, L80116B18
 li    S1, 1
L80116B18:
jal   GetPlayerStruct
 move  A0, S0
lbu   V0, 0x17(V0)
andi  V0, V0, 0x20
bnezl V0, L80116B30
 li    S1, 2
L80116B30:
jal   GetPlayerStruct
 move  A0, S0
lbu   V0, 0x17(V0)
andi  V0, V0, 0x40
bnezl V0, L80116B48
 li    S1, 3
L80116B48:
beql  S1, S2, L80116B68
 addiu S0, S0, 1
move  A0, S0
jal   func_80116904
 move  A1, S1
jal   func_80116A04
 move  A0, S0
addiu S0, S0, 1
L80116B68:
slti  V0, S0, 4
bnez  V0, L80116AD8
 sll   V1, S0, 2
lui   A0, hi(D_801166F4)
jal   0x800F8D54
 addiu A0, A0, lo(D_801166F4)
lw    RA, 0x24(SP)
lw    S4, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x28

; runs from 0xFFFB event table entry
; Poison / Bowser Curse, reduce movement to 3 spaces.
__PP64_INTERNAL_CURSE_POISON_DICEROLL_EVENT:
addiu SP, SP, -0x38
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
sdc1  F20, 0x20(SP)
lui   S0, hi(CORE_800CD058)
addiu S0, S0, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S1, V0
lh    V0, 0x56(S0)
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
srav  V0, V0, V1
andi  V0, V0, 1
beqz  V0, L80116D88
       NOP
jal   0x80035FDC
 li    A0, 16
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
li    V1, 1
sllv  V1, V1, V0
nor   V1, R0, V1
lhu   V0, 0x56(S0)
and   V0, V0, V1
sh    V0, 0x56(S0)
lbu   V0, 0x17(S1)
andi  V0, V0, 0x20
bnez  V0, L80116C40
 li    A0, -1
lw    V0, 0x14(S1)
andi  V0, V0, 0xa
li    V1, 8
bne   V0, V1, L80116C44
 li    A1, 0x3A07 ; "A poison mushroom is limiting your move to three spaces or less"
li    A0, -1
L80116C40:
li    A1, 0x4219 ; "Because of Bowser's Curse, you can move up to only three spaces."
L80116C44:
jal   0x800EC590
       NOP
lbu   V0, 0x17(S1)
andi  V0, V0, 2
beqz  V0, L80116CE4
       NOP
lb    V0, 0xf(S0)
sll   V0, V0, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
beqz  V0, L80116CDC
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
lui   S2, hi(D_8011FB98)
addiu S2, S2, lo(D_8011FB98)
li    AT, 0x3DA30000 ; 0.079590
ori AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L80116C98:
lb    V0, 0xf(S0)
sll   V0, V0, 2
addu  V0, V0, S2
lw    A0, 0(V0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
bc1t  L80116C98
       NOP
L80116CDC:
jal   func_8011667C
 lb    A0, 0xf(S0)
L80116CE4:
lbu   V0, 0x17(S1)
andi  V0, V0, 8
beqz  V0, L80116D7C
       NOP
lb    V0, 0xf(S0)
sll   V0, V0, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
beqz  V0, L80116D74
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
lui   S2, hi(D_8011FB98)
addiu S2, S2, lo(D_8011FB98)
li    AT, 0x3DA30000 ; 0.079590
ori AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L80116D30:
lb    V0, 0xf(S0)
sll   V0, V0, 2
addu  V0, V0, S2
lw    A0, 0(V0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
bc1t  L80116D30
       NOP
L80116D74:
jal   func_8011667C
 lb    A0, 0xf(S0)
L80116D7C:
lbu   V0, 0x17(S1)
andi  V0, V0, 0xd5
sb    V0, 0x17(S1)
L80116D88:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

D_80116DAC:
addiu SP, SP, -0x38
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
sdc1  F20, 0x20(SP)
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S0, V0
lbu   V0, 0x17(S0)
andi  V0, V0, 8
beqz  V0, L80116EE8
       NOP
lui   A0, hi(current_player_index)
jal   0x800DCA64
 lb    A0, lo(current_player_index)(A0)
jal   0x80035FDC
 li    A0, 16
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
li    V1, 1
sllv  V1, V1, V0
nor   V1, R0, V1
lhu   V0, 0x56(S1)
and   V0, V0, V1
sh    V0, 0x56(S1)
li    A0, -1
jal   0x800EC590
 li    A1, 16921
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V0, V0, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
beqz  V0, L80116EB4
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
lui   S2, hi(D_8011FB98)
addiu S2, S2, lo(D_8011FB98)
li    AT, 0x3DA30000 ; 0.079590
ori AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L80116E70:
lb    V0, 0xf(S1)
sll   V0, V0, 2
addu  V0, V0, S2
lw    A0, 0(V0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
bc1t  L80116E70
       NOP
L80116EB4:
jal   func_8011667C
 lb    A0, 0xf(S1)
lbu   V0, 0x17(S0)
andi  V0, V0, 0xd7
sb    V0, 0x17(S0)
li    A0, -1
jal   0x800FF900
 li    A1, 2
lb    A0, 0xf(S1)
jal   0x800DC128
       NOP
jal   SleepProcess
 li    A0, 15
L80116EE8:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

D_80116F0C:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
jal   0x8004EE68
 li    S0, 60
lw    S1, 0x8c(V0)
L80116F28:
jal   SleepVProcess
 addiu S0, S0, -1
bnez  S0, L80116F28
       NOP
jal   0x800FFAEC
 move  A0, S1
jal   EndProcess
 move  A0, R0
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

D_80116F5C:
addiu SP, SP, -0x60
sw    RA, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F28, 0x58(SP)
sdc1  F26, 0x50(SP)
sdc1  F24, 0x48(SP)
sdc1  F22, 0x40(SP)
sdc1  F20, 0x38(SP)
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
lui   V1, hi(p1_char)
addiu V1, V1, lo(p1_char)
lbu   A2, 0(V1)
lbu   A3, 0x38(V1)
lbu   V0, 0x70(V1)
addiu V0, V0, 0x1c00
sw    V0, 0x10(SP)
lbu   V0, 0xa8(V1)
addiu V0, V0, 0x1c00
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x5C01
addiu A2, A2, 0x1c00
jal   0x800EC8EC ; ShowMessage ; "Who's your opponent?"
 addiu A3, A3, 0x1c00
lui   A1, hi(D_8011FBBC)
lw    A1, lo(D_8011FBBC)(A1)
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 li    A0, 2
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
slti  V0, S0, 4
beqz  V0, L80117004
       NOP
bgez  S0, L80117010
 move  S1, S0
L80117004:
jal   0x800EF0D8
 move  A0, R0
move  S1, V0
L80117010:
lui   A1, hi(CORE_800CD0AE)
addiu A1, A1, lo(CORE_800CD0AE)
sll   A0, S1, 0x10
sra   A0, A0, 0x10
li    V1, 1
sllv  V1, V1, A0
lhu   V0, 0(A1)
or    V0, V0, V1
jal   GetPlayerStruct
 sh    V0, 0(A1)
move  S2, V0
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
      NOP
mov.s F22, F20
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F28
li    AT, 0x3D8F0000 ; 0.069824
ori AT, AT, 0x5c29
mtc1  AT, F26
mtc1  R0, F24
sub.s F20, F20, F28
L8011706C:
jal   0x800E4A7C
 add.s F22, F22, F26
lb    A0, 0xf(S3)
mfc1  A2, F20
mfc1  A3, F22
      NOP
jal   0x800F696C
 move  A1, V0
jal   SleepVProcess
       NOP
c.lt.s F24, F20
      NOP
      NOP
bc1tl L8011706C
 sub.s F20, F20, F28
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
sll   V0, S1, 0x10
sra   V0, V0, 0x10
lb    V1, 0xf(S3)
beq   V0, V1, L80117148
 sll   S0, S1, 0x10
move  A0, R0
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 16
jal   0x800F915C
 li    A0, 2
lw    A0, 0x24(S2)
jal   0x800F9174
 addiu A0, A0, 0xc
lw    A0, 0x24(S2)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepVProcess
 sll   S0, S1, 0x10
move  A0, R0
jal   InitFadeIn
 li    A1, 16
li    V0, 1
lui   AT, hi(CORE_800A12D8)
sw    V0, lo(CORE_800A12D8)(AT)
jal   SleepProcess
 li    A0, 16
L80117148:
sra   S0, S0, 0x10
jal   func_8011667C
 move  A0, S0
lbu   V0, 0x17(S2)
andi  V0, V0, 0x99
ori   V0, V0, 2
sb    V0, 0x17(S2)
move  A0, S0
jal   func_80116904
 move  A1, R0
mtc1  R0, F20
sll   V0, S1, 0x10
lui   V1, hi(D_8011FB98)
addiu V1, V1, lo(D_8011FB98)
sra   V0, V0, 0xe
addu  S0, V0, V1
li    AT, 0x3DA30000 ; 0.079590
ori   AT, AT, 0xd70a
mtc1  AT, F24
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
L8011719C:
lw    A0, 0(S0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
add.s F20, F20, F24
c.le.s F20, F22
      NOP
      NOP
bc1t  L8011719C
 sll   V0, S1, 0x10
sra   S0, V0, 0x10
sll   V0, S0, 2
lui   A0, hi(D_8011FB98)
addu  A0, A0, V0
lw    A0, lo(D_8011FB98)(A0)
addiu A0, A0, 0x24
lui   A1, 0x3f80
move  A2, A1
jal   0x80089A10
 move  A3, A1
lb    V0, 0xf(S3)
bnel  S0, V0, L80117224
 sll   A0, S1, 0x10
move  A0, S0
li    A1, 4
jal   0x800F2304
 li    A2, 2
j     L80117240
 sll   S0, S1, 0x10
L80117224:
jal   GetPlayerStruct
 sra   A0, A0, 0x10
lw    A0, 0x24(V0)
li    A1, 4
jal   0x800D9CE8
 li    A2, 2
sll   S0, S1, 0x10
L80117240:
sra   S0, S0, 0x10
sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   A1, hi(p1_char)
addu  A1, A1, V0
lbu   A1, lo(p1_char)(A1)
jal   0x8004AC10
 li    A0, 646
jal   func_80116A04
 move  A0, S0
move  A0, S0
li    A1, 1
jal   0x800FFA4C
 li    A2, 5
move  S0, V0
lui   A0, hi(D_80116F0C)
addiu A0, A0, lo(D_80116F0C)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S0, 0x8c(V0)
jal   SleepProcess
 li    A0, 20
lbu   V0, 0xf(S3)
sll   V0, V0, 0x18
sra   S0, V0, 0x18
sb    S1, 0xf(S3)
lbu   V0, 0x17(S2)
andi  V0, V0, 0x80
beqz  V0, L801172CC
 li    A0, -1
jal   0x800EC590
 li    A1, 14857
L801172CC:
li    A0, -1
jal   0x800EC590
 li    A1, 14854
sll   V1, S0, 0x18
sll   V0, S1, 0x10
sra   V0, V0, 0x10
sra   V1, V1, 0x18
bne   V0, V1, L80117308
 sb    S0, 0xf(S3)
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
j     L80117330
 sll   V0, S1, 0x10
L80117308:
sll   A0, S1, 0x10
jal   GetPlayerStruct
 sra   A0, A0, 0x10
lw    A0, 0x24(V0)
li    A1, -1
jal   0x800D9CE8
 li    A2, 2
lui   AT, hi(CORE_800A12D8)
sw    R0, lo(CORE_800A12D8)(AT)
sll   V0, S1, 0x10
L80117330:
sra   V0, V0, 0x10
lb    V1, 0xf(S3)
beq   V0, V1, L80117390
 sll   V0, S1, 0x10
move  A0, R0
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 16
jal   0x800F915C
 li    A0, 1
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepVProcess
       NOP
move  A0, R0
jal   InitFadeIn
 li    A1, 16
jal   SleepProcess
 li    A0, 16
sll   V0, S1, 0x10
L80117390:
sra   V0, V0, 0x10
lb    V1, 0xf(S3)
bne   V0, V1, L801174A4
       NOP
jal   0x80035FDC
 li    A0, 16
li    A0, -1
jal   0x800EC590
 li    A1, 14855
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
sll   V0, S1, 0x10
lui   V1, hi(D_8011FB98)
addiu V1, V1, lo(D_8011FB98)
sra   V0, V0, 0xe
addu  S0, V0, V1
li    AT, 0x3DA30000 ; 0.079590
ori   AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L801173E0:
lw    A0, 0(S0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
      NOP
bc1t  L801173E0
 sll   V0, S1, 0x10
sra   V0, V0, 0xe
lui   A0, hi(D_8011FB98)
addu  A0, A0, V0
lw    A0, lo(D_8011FB98)(A0)
addiu A0, A0, 0x24
move  A1, R0
move  A2, A1
jal   0x80089A10
 move  A3, A1
lb    A0, 0xf(S3)
jal   func_8011667C
       NOP
lui   S0, hi(current_player_index)
addiu S0, S0, lo(current_player_index)
jal   0x800DCA64
 lb    A0, 0(S0)
li    A0, -1
jal   0x800FF900
 li    A1, 2
lb    A0, 0(S0)
jal   0x800DC128
       NOP
jal   SleepProcess
 li    A0, 15
lb    V0, 0(S0)
li    V1, 1
sllv  V1, V1, V0
nor   V1, R0, V1
lhu   V0, 0x47(S0)
and   V0, V0, V1
sh    V0, 0x47(S0)
lbu   V0, 0x17(S2)
andi  V0, V0, 0xfd
sb    V0, 0x17(S2)
L801174A4:
lw    RA, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F28, 0x58(SP)
ldc1  F26, 0x50(SP)
ldc1  F24, 0x48(SP)
ldc1  F22, 0x40(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x60

; Runs from 0xFFFB event table entry
; Reversal (mushroom, curse)
__PP64_INTERNAL_REVERSAL_DICEROLL_EVENT:
addiu SP, SP, -0x38
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
sdc1  F20, 0x20(SP)
lui   S0, hi(CORE_800CD058)
addiu S0, S0, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S1, V0
lbu   V1, 0x17(S1)
andi  V0, V1, 0x80
beqz  V0, L80117680
 andi  V0, V1, 0x40
bnez  V0, L80117538
 li    A0, -1
lw    V0, 0x14(S1)
andi  V0, V0, 0x14
li    V1, 16
bne   V0, V1, L8011753C
 li    A1, 0x3A03 ; "A Reverse Mushroom is forcing you to move in the opposite direction"
li    A0, -1
L80117538:
li    A1, 0x421C ; "Because of the "Reverse Curse", you'll now move in the opposite direction."
L8011753C:
jal   0x800EC590
       NOP
lbu   V0, 0x17(S1)
andi  V0, V0, 4
beqz  V0, L801175DC
       NOP
lb    V0, 0xf(S0)
sll   V0, V0, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
beqz  V0, L801175D4
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
lui   S2, hi(D_8011FB98)
addiu S2, S2, lo(D_8011FB98)
li    AT, 0x3DA30000 ; 0.079590
ori   AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L80117590:
lb    V0, 0xf(S0)
sll   V0, V0, 2
addu  V0, V0, S2
lw    A0, 0(V0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
bc1t  L80117590
       NOP
L801175D4:
jal   func_8011667C
 lb    A0, 0xf(S0)
L801175DC:
lbu   V0, 0x17(S1)
andi  V0, V0, 0x10
beqz  V0, L80117674
       NOP
lb    V0, 0xf(S0)
sll   V0, V0, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
beqz  V0, L8011766C
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
lui   S2, hi(D_8011FB98)
addiu S2, S2, lo(D_8011FB98)
li    AT, 0x3DA30000 ; 0.079590
ori   AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L80117628:
lb    V0, 0xf(S0)
sll   V0, V0, 2
addu  V0, V0, S2
lw    A0, 0(V0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
bc1t  L80117628
       NOP
L8011766C:
jal   func_8011667C
 lb    A0, 0xf(S0)
L80117674:
lbu   V0, 0x17(S1)
andi  V0, V0, 0xab
sb    V0, 0x17(S1)
L80117680:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

D_801176A4:
addiu SP, SP, -0x38
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
sdc1  F20, 0x20(SP)
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S0, V0
lbu   V0, 0x17(S0)
andi  V0, V0, 0x10
beqz  V0, L801177B8
       NOP
lui   A0, hi(current_player_index)
jal   0x800DCA64
 lb    A0, lo(current_player_index)(A0)
li    A0, -1
jal   0x800EC590
 li    A1, 16924
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V0, V0, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
beqz  V0, L80117784
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
lui   S2, hi(D_8011FB98)
addiu S2, S2, lo(D_8011FB98)
li    AT, 0x3DA30000 ; 0.079590
ori   AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L80117740:
lb    V0, 0xf(S1)
sll   V0, V0, 2
addu  V0, V0, S2
lw    A0, 0(V0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
bc1t  L80117740
       NOP
L80117784:
jal   func_8011667C
 lb    A0, 0xf(S1)
lbu   V0, 0x17(S0)
andi  V0, V0, 0xaf
sb    V0, 0x17(S0)
li    A0, -1
jal   0x800FF900
 li    A1, 2
lb    A0, 0xf(S1)
jal   0x800DC128
       NOP
jal   SleepProcess
 li    A0, 15
L801177B8:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

D_801177DC:
addiu SP, SP, -0x68
sw    RA, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
sdc1  F28, 0x60(SP)
sdc1  F26, 0x58(SP)
sdc1  F24, 0x50(SP)
sdc1  F22, 0x48(SP)
sdc1  F20, 0x40(SP)
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
lui   V1, hi(p1_char)
addiu V1, V1, lo(p1_char)
lbu   A2, 0(V1)
lbu   A3, 0x38(V1)
lbu   V0, 0x70(V1)
addiu V0, V0, 0x1c00
sw    V0, 0x10(SP)
lbu   V0, 0xa8(V1)
addiu V0, V0, 0x1c00
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x5C01
addiu A2, A2, 0x1c00
jal   0x800EC8EC ; ShowMessage: "Who's your opponent?"
 addiu A3, A3, 0x1c00
lui   A1, hi(D_8011FBB8)
lw    A1, lo(D_8011FBB8)(A1)
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 li    A0, 2
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
slti  V0, S0, 4
beqz  V0, L80117884
       NOP
bgez  S0, L80117890
 move  S2, S0
L80117884:
jal   0x800EF0D8
 move  A0, R0
move  S2, V0
L80117890:
sll   A0, S2, 0x10
jal   GetPlayerStruct
 sra   A0, A0, 0x10
move  S1, V0
lbu   V0, 0x17(S1)
ori   V0, V0, 0x80
sb    V0, 0x17(S1)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
      NOP
mov.s F22, F20
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F28
li    AT, 0x3D8F0000 ; 0.069824
ori AT, AT, 0x5c29
mtc1  AT, F26
mtc1  R0, F24
sub.s F20, F20, F28
L801178DC:
jal   0x800E4A7C
 add.s F22, F22, F26
lb    A0, 0xf(S3)
mfc1  A2, F20
mfc1  A3, F22
      NOP
jal   0x800F696C
 move  A1, V0
jal   SleepVProcess
       NOP
c.lt.s F24, F20
      NOP
      NOP
bc1tl L801178DC
 sub.s F20, F20, F28
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
sll   V0, S2, 0x10
sra   V0, V0, 0x10
lb    V1, 0xf(S3)
beq   V0, V1, L801179A0
 sll   S0, S2, 0x10
move  A0, R0
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 16
jal   0x800F915C
 li    A0, 2
lw    A0, 0x24(S1)
jal   0x800F9174
 addiu A0, A0, 0xc
lw    A0, 0x24(S1)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepVProcess
 sll   S0, S2, 0x10
move  A0, R0
jal   InitFadeIn
 li    A1, 16
li    V0, 1
lui   AT, hi(CORE_800A12D8)
sw    V0, lo(CORE_800A12D8)(AT)
jal   SleepProcess
 li    A0, 16
L801179A0:
sra   S0, S0, 0x10
jal   func_8011667C
 move  A0, S0
lbu   V0, 0x17(S1)
andi  V0, V0, 0x99
ori   V0, V0, 4
sb    V0, 0x17(S1)
move  A0, S0
jal   0x800FF900
 li    A1, 3
move  A0, S0
jal   func_80116904
 li    A1, 1
mtc1  R0, F20
sll   V0, S2, 0x10
lui   V1, hi(D_8011FB98)
addiu V1, V1, lo(D_8011FB98)
sra   V0, V0, 0xe
addu  S0, V0, V1
li    AT, 0x3DA30000 ; 0.079590
ori   AT, AT, 0xd70a
mtc1  AT, F24
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
L80117A00:
lw    A0, 0(S0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
add.s F20, F20, F24
c.le.s F20, F22
      NOP
      NOP
bc1t  L80117A00
 sll   V0, S2, 0x10
sra   S0, V0, 0x10
sll   V0, S0, 2
lui   A0, hi(D_8011FB98)
addu  A0, A0, V0
lw    A0, lo(D_8011FB98)(A0)
addiu A0, A0, 0x24
lui   A1, 0x3f80
move  A2, A1
jal   0x80089A10
 move  A3, A1
lb    V0, 0xf(S3)
bnel  S0, V0, L80117A88
 sll   A0, S2, 0x10
move  A0, S0
li    A1, 4
jal   0x800F2304
 li    A2, 2
j     L80117AA4
 sll   S0, S2, 0x10
L80117A88:
jal   GetPlayerStruct
 sra   A0, A0, 0x10
lw    A0, 0x24(V0)
li    A1, 4
jal   0x800D9CE8
 li    A2, 2
sll   S0, S2, 0x10
L80117AA4:
sra   S0, S0, 0x10
sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   A1, hi(p1_char)
addu  A1, A1, V0
lbu   A1, lo(p1_char)(A1)
jal   0x8004AC10
 li    A0, 646
move  A0, S0
li    A1, 1
jal   0x800FFA4C
 li    A2, 5
move  S1, V0
jal   func_80116A04
 move  A0, S0
lui   A0, hi(D_80116F0C)
addiu A0, A0, lo(D_80116F0C)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S1, 0x8c(V0)
jal   SleepProcess
 li    A0, 20
lbu   V0, 0xf(S3)
sll   V0, V0, 0x18
sb    S2, 0xf(S3)
sra   A0, V0, 0x18
bne   A0, S0, L80117B34
 sra   S1, V0, 0x18
jal   0x800DEB2C
       NOP
li    V1, 3
beq   V0, V1, L80117B4C
 li    A0, -1
L80117B34:
lui   V0, hi(CORE_800CD0AE)
lh    V0, lo(CORE_800CD0AE)(V0)
srav  V0, V0, S2
andi  V0, V0, 1
beqz  V0, L80117B54
 li    A0, -1
L80117B4C:
jal   0x800EC590
 li    A1, 14853
L80117B54:
li    A0, -1
jal   0x800EC590
 li    A1, 14850
sll   V1, S1, 0x18
sll   V0, S2, 0x10
sra   V0, V0, 0x10
sra   V1, V1, 0x18
bne   V0, V1, L80117B90
 sb    S1, 0xf(S3)
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
j     L80117BB8
 sll   V0, S2, 0x10
L80117B90:
sll   A0, S2, 0x10
jal   GetPlayerStruct
 sra   A0, A0, 0x10
lw    A0, 0x24(V0)
li    A1, -1
jal   0x800D9CE8
 li    A2, 2
lui   AT, hi(CORE_800A12D8)
sw    R0, lo(CORE_800A12D8)(AT)
sll   V0, S2, 0x10
L80117BB8:
sra   V0, V0, 0x10
lb    V1, 0xf(S3)
beq   V0, V1, L80117C18
 sll   V0, S2, 0x10
move  A0, R0
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 16
jal   0x800F915C
 li    A0, 1
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepVProcess
       NOP
move  A0, R0
jal   InitFadeIn
 li    A1, 16
jal   SleepProcess
 li    A0, 16
sll   V0, S2, 0x10
L80117C18:
sra   V0, V0, 0x10
lb    V1, 0xf(S3)
bne   V0, V1, L80117C30
       NOP
jal   __PP64_INTERNAL_REVERSAL_DICEROLL_EVENT
       NOP
L80117C30:
lw    RA, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
ldc1  F28, 0x60(SP)
ldc1  F26, 0x58(SP)
ldc1  F24, 0x50(SP)
ldc1  F22, 0x48(SP)
ldc1  F20, 0x40(SP)
jr    RA
 addiu SP, SP, 0x68

; Plunder chest?
D_80117C60:
addiu SP, SP, -0xb8
sw    RA, 0x8c(SP)
sw    S6, 0x88(SP)
sw    S5, 0x84(SP)
sw    S4, 0x80(SP)
sw    S3, 0x7c(SP)
sw    S2, 0x78(SP)
sw    S1, 0x74(SP)
sw    S0, 0x70(SP)
sdc1  F28, 0xb0(SP)
sdc1  F26, 0xa8(SP)
sdc1  F24, 0xa0(SP)
sdc1  F22, 0x98(SP)
sdc1  F20, 0x90(SP)
lui   S6, hi(CORE_800CD058)
addiu S6, S6, lo(CORE_800CD058)
jal   func_8010FE54
 move  S1, R0
li    A0, 33
jal   0x800D90C8
 move  A1, R0
move  S4, V0
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
jal   GetPlayerStruct
 li    A0, -1
lw    A1, 0x24(V0)
addiu A0, S4, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 2
jal   0x8001C814
 li    A2, 1
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S4)
jal   PlaySound
 li    A0, 322
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F2
lwc1  F0, 0x30(S4)
c.lt.s F2, F0
      NOP
      NOP
bc1f  L80117D70
 mov.s F4, F0
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
sub.s F0, F4, F22
L80117D50:
jal   SleepVProcess
 swc1  F0, 0x30(S4)
lwc1  F4, 0x30(S4)
c.lt.s F20, F4
      NOP
      NOP
bc1tl L80117D50
 sub.s F0, F4, F22
L80117D70:
beqz  S1, L80117DF0
 move  S0, R0
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F28
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F26
L80117D88:
mtc1  S0, F22
      NOP
cvt.s.w F22, F22
jal   0x8008EF20
 mov.s F12, F22
div.s F24, F0, F28
add.s F24, F24, F26
jal   0x8008EF20
 mov.s F12, F22
div.s F20, F0, F28
add.s F20, F20, F26
jal   0x8008EF20
 mov.s F12, F22
div.s F0, F0, F28
mfc1  A1, F24
mfc1  A2, F20
add.s F0, F0, F26
mfc1  A3, F0
      NOP
jal   0x80089A10
 addiu A0, S4, 0x24
jal   SleepVProcess
 addiu S0, S0, 0x1e
slti  V0, S0, 0x439
bnez  V0, L80117D88
       NOP
L80117DF0:
jal   PlaySound
 li    A0, 329
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 1
jal   0x8001C814
 move  A2, R0
jal   SleepProcess
 li    A0, 20
move  S0, R0
addiu S1, SP, 0x20
li    S3, 1
addiu S2, SP, 0x60
li    S5, 8
L80117E2C:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
bne   V0, S0, L80117E50
 sll   V0, S0, 4
addu  V0, S1, V0
sb    S3, 0(V0)
addu  V0, S2, S0
j     L80117E60
 sb    R0, 0(V0)
L80117E50:
addu  V0, S1, V0
sb    S5, 0(V0)
addu  V0, S2, S0
sb    S3, 0(V0)
L80117E60:
sll   A1, S0, 4
addu  A1, S1, A1
move  A0, S0
jal   0x800E2260
 addiu A1, A1, 1
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L80117E2C
 li    V0, 1
sb    V0, 0x64(SP)
sb    V0, 0x65(SP)
addiu V0, SP, 0x40
sw    V0, 0x10(SP)
addiu V0, SP, 0x50
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x5C01
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage: "Who's your opponent?"
 addiu A3, SP, 0x30
addiu A0, SP, 0x60
jal   func_80113364
 move  A1, R0
jal   0x800EC6C8
 move  S1, V0
jal   0x800EC6EC
       NOP
li    V0, 4
bne   S1, V0, L80117EEC
 sll   V0, S1, 3
jal   0x800EF0D8
 li    A0, 1
move  S1, V0
sll   V0, S1, 3
L80117EEC:
subu  V0, V0, S1
sll   V0, V0, 3
lui   V1, hi(p1_item1)
addu  V1, V1, V0
lb    V1, lo(p1_item1)(V1)
li    V0, -1
bne   V1, V0, L80117FCC
 li    A0, -1
li    A1, 3
jal   0x800F2304
 move  A2, R0
lb    A1, 0xf(S6)
jal   0x8004ACE0
 li    A0, 646
jal   SleepProcess
 li    A0, 60
move  A0, S1
jal   0x800E2260
 addiu A1, SP, 0x20
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
li    A0, 14863
addiu A1, SP, 0x20
move  A2, R0
jal   0x800EC1E8
 move  A3, R0
lb    A0, 0xf(S6)
jal   0x800EC3C0
       NOP
jal   0x800EC3E4
       NOP
li    V0, 2
sw    V0, 0x10(SP)
li    A0, -1
li    A1, -1
move  A2, R0
jal   0x800F2388
 li    A3, 10
jal   0x800D9B54
 move  A0, S4
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S6)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S6)
j     L801182CC
       NOP
L80117FCC:
jal   PlayerHasEmptyItemSlot
 move  A0, S1
move  S0, V0
li    V0, -1
beql  S0, V0, L80117FE4
 li    S0, 3
L80117FE4:
mtc1  S0, F12
      NOP
jal   0x800EEF80
 cvt.s.w F12, F12
jal   0x800E4A7C
 move  S0, V0
lb    A0, 0xf(S6)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
addu  V0, V0, A0
addu  V0, V0, S0
lbu   A0, 0(V0)
sb    A0, 0(V1)
li    V1, -1
sb    V1, 0(V0)
jal   FixUpPlayerItemSlots
 move  A0, S1
sll   A0, S1, 0x10
sra   A0, A0, 0x10
jal   0x800FF900
 li    A1, 3
jal   0x800E4A7C
       NOP
bne   V0, S0, L80118080
       NOP
jal   0x800E4A7C
       NOP
move  A0, S1
move  A1, V0
jal   0x800F68E0
 move  A2, R0
L80118080:
jal   0x800F641C
 li    A0, -1
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S6)
sll   V1, A0, 3
lui   AT, hi(D_8011E3B4)
addu  AT, AT, V1
lwc1  F0, lo(D_8011E3B4)(AT)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E3B8)
addu  AT, AT, V1
lwc1  F0, lo(D_8011E3B8)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A1, V0
sra   A2, A2, 0x10
jal   0x800F688C
 sra   A3, A3, 0x10
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S6)
move  A1, V0
jal   0x800F68E0
 li    A2, 256
move  A0, S1
move  A1, S0
jal   0x800F68E0
 move  A2, R0
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S6)
move  A1, V0
jal   0x800F69B0
 li    A2, 18310
jal   0x8004EE68
       NOP
move  S0, V0
lb    V0, 0xf(S6)
sll   V0, V0, 3
lui   AT, hi(D_8011E3B4)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E3B4)(AT)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lui   AT, hi(D_8011E3B8)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E3B8)(AT)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E394)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E394)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E398)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E398)(AT)
trunc.w.s F2, F0
mfc1  V0, F2
      NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x10(SP)
li    V0, 5
sw    V0, 0x14(SP)
li    A0, -1
sra   A1, A1, 0x10
sra   A2, A2, 0x10
jal   func_8010FB54
 sra   A3, A3, 0x10
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 li    S0, 6
lb    A1, 0xf(S6)
jal   0x8004ACE0
 li    A0, 628
lb    A0, 0xf(S6)
li    A1, 5
jal   0x800DA09C
 li    A2, 49
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
jal   SleepProcess
 li    A0, 50
lb    A0, 0xf(S6)
li    V0, 2
sw    V0, 0x10(SP)
li    A1, -1
move  A2, R0
jal   0x800F2388
 li    A3, 10
jal   SleepProcess
 li    A0, 11
lui   V0, hi(CORE_80101734)
lw    V0, lo(CORE_80101734)(V0)
L8011823C:
addiu S0, S0, -1
bnez  S0, L8011823C
 addiu V0, V0, 4
lb    A0, 0xf(S6)
lhu   A2, 2(V0)
jal   0x800DA09C
 li    A1, 5
jal   0x800D9B54
 move  A0, S4
sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
lui   A2, hi(p1_char)
addu  A2, A2, V0
lbu   A2, lo(p1_char)(A2)
lb    V1, 0xf(S6)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   A3, hi(p1_char)
addu  A3, A3, V0
lbu   A3, lo(p1_char)(A3)
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x3A0D
addiu A2, A2, 0x1c00
jal   0x800EC8EC ; ShowMessage: "_s item now belongs to _"
 addiu A3, A3, 0x1c00
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
jal   func_80110024
       NOP
L801182CC:
lw    RA, 0x8c(SP)
lw    S6, 0x88(SP)
lw    S5, 0x84(SP)
lw    S4, 0x80(SP)
lw    S3, 0x7c(SP)
lw    S2, 0x78(SP)
lw    S1, 0x74(SP)
lw    S0, 0x70(SP)
ldc1  F28, 0xb0(SP)
ldc1  F26, 0xa8(SP)
ldc1  F24, 0xa0(SP)
ldc1  F22, 0x98(SP)
ldc1  F20, 0x90(SP)
jr    RA
 addiu SP, SP, 0xb8

; Shared happening space event.
; Needs to exist and end the process, so that duels on happenings work.
shared_happening_event:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
jal   EndProcess
move  A0, R0
jr    RA
addiu SP, SP, 0x18

overlaycall4:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
jal   InitCameras
 li    A0, 2
lui   A1, hi(data_screen_dimensions)
addiu A1, A1, lo(data_screen_dimensions)
jal   0x800124BC
 li    A0, 1
jal   setup_routine
       NOP
jal   0x800FF41C
 li    A0, 2
lui   A0, hi(${h})
addiu A0, A0, lo(${h})
li    A1, 4101
li    A2, 4096
jal   InitProcess
 move  A3, R0
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

func_8011C5E0:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, R0
jal   GetCurrentPlayerIndex
 li    S1, 99
sll   V0, V0, 0x10
sra   S2, V0, 0x10
L8011C608:
jal   GetCurrentPlayerIndex
       NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
beql  S0, V0, L8011C668
 addiu S0, S0, 1
jal   0x800DA778
 move  A0, S0
lui   A0, hi(D_8011F0E4)
jal   0x800DA190
 addiu A0, A0, lo(D_8011F0E4)
sll   V0, V0, 0x10
bnezl V0, L8011C668
 addiu S0, S0, 1
jal   0x800EE9C0
 move  A0, S0
slt   V0, V0, S1
beql  V0, R0, L8011C668
 addiu S0, S0, 1
jal   0x800EE9C0
 move  A0, S0
move  S1, V0
move  S2, S0
addiu S0, S0, 1
L8011C668:
slti  V0, S0, 4
bnez  V0, L8011C608
 move  V0, S2
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_8011C68C:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
jal   GetCurrentPlayerIndex
 sw    S0, 0x10(SP)
sll   V0, V0, 0x10
lui   A0, hi(D_8011F2F4)
addiu A0, A0, lo(D_8011F2F4)
jal   0x800DA190
 sra   S2, V0, 0x10
sll   V0, V0, 0x10
beqz  V0, L8011C738
 move  V0, S2
move  S0, R0
li    S1, 99
L8011C6CC:
jal   GetCurrentPlayerIndex
       NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
beql  S0, V0, L8011C72C
 addiu S0, S0, 1
jal   0x800DA778
 move  A0, S0
lui   A0, hi(D_8011F600)
jal   0x800DA190
 addiu A0, A0, lo(D_8011F600)
sll   V0, V0, 0x10
bnezl V0, L8011C72C
 addiu S0, S0, 1
jal   0x800EE9C0
 move  A0, S0
slt   V0, V0, S1
beql  V0, R0, L8011C72C
 addiu S0, S0, 1
jal   0x800EE9C0
 move  A0, S0
move  S1, V0
move  S2, S0
addiu S0, S0, 1
L8011C72C:
slti  V0, S0, 4
bnez  V0, L8011C6CC
 move  V0, S2
L8011C738:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_8011C750:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
lui   S0, hi(total_turns)
lb    S0, lo(total_turns)(S0)
lui   V0, hi(current_turn)
lb    V0, lo(current_turn)(V0)
subu  S0, S0, V0
addiu S0, S0, 1
jal   PlayerHasEmptyItemSlot
 li    A0, -1
move  V1, V0
li    V0, -1
beql  V1, V0, L8011C78C
 li    V1, 3
L8011C78C:
slt   V0, V1, S0
xori  V0, V0, 1
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

func_8011C7A4:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
move  T2, A0
li    S0, 1
move  A2, R0
lui   T0, hi(current_player_index)
lb    T0, lo(current_player_index)(T0)
lui   T1, hi(p1_item1)
addiu T1, T1, lo(p1_item1)
L8011C7CC:
beq   A2, T0, L8011C824
 move  A0, R0
sll   V0, A2, 3
subu  V0, V0, A2
sll   V0, V0, 3
addu  A3, V0, T1
addu  V0, A3, A0
L8011C7E8:
lb    V0, 0(V0)
xori  V1, V0, 6
sltiu V1, V1, 1
xori  V0, V0, 0x10
sltiu V0, V0, 1
or    V1, V1, V0
bnez  V1, L8011C81C
 slti  V0, A0, 3
addiu A0, A0, 1
slti  V0, A0, 3
bnez  V0, L8011C7E8
 addu  V0, A3, A0
slti  V0, A0, 3
L8011C81C:
bnez  V0, L8011C834
 slti  V0, A2, 4
L8011C824:
addiu A2, A2, 1
slti  V0, A2, 4
bnez  V0, L8011C7CC
       NOP
L8011C834:
beqz  V0, L8011C878
 sll   V0, A2, 3
subu  V0, V0, A2
sll   V0, V0, 3
lui   A0, hi(p1_cpu_difficulty)
addu  A0, A0, V0
lbu   A0, lo(p1_cpu_difficulty)(A0)
mult  A1, A0
mflo  A0
addu  A0, T2, A0
sll   A0, A0, 0x18
jal   RNGPercentChance
 sra   A0, A0, 0x18
sll   V0, V0, 0x10
sltiu V0, V0, 1
subu  V0, R0, V0
and   S0, V0, S0
L8011C878:
move  V0, S0
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

D_8011C88C:
addiu SP, SP, -0x48
sw    RA, 0x40(SP)
sw    S7, 0x3c(SP)
sw    S6, 0x38(SP)
sw    S5, 0x34(SP)
sw    S4, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
jal   GetCurrentPlayerIndex
 sw    S0, 0x20(SP)
sll   V0, V0, 0x10
sra   S0, V0, 0x10
lui   S2, hi(CORE_800CD058)
addiu S2, S2, lo(CORE_800CD058)
lhu   V0, 0x50(S2)
andi  V0, V0, 1
bnez  V0, L8011CE68
 li    V0, -1
move  S1, R0
li    S3, -1
sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   S4, hi(p1_item1)
addiu S4, S4, lo(p1_item1)
addu  S6, V0, S4
sll   S7, S0, 3
subu  S7, S7, S0
lui   S5, hi(CORE_80100FA8)
addiu S5, S5, lo(CORE_80100FA8)
sll   V0, S1, 2
L8011C90C:
addiu V1, SP, 0x10
addu  V0, V0, V1
sw    S3, 0(V0)
addu  V0, S6, S1
lb    A2, 0(V0)
addiu V1, A2, 1
sltiu V0, V1, 0x14
beqz  V0, L8011CDA0
 sll   V0, V1, 2
lui   AT, hi(D_8011FA20_jump_table)
addu  AT, AT, V0
lw    V0, lo(D_8011FA20_jump_table)(AT)
jr    V0
       NOP
L8011C944:
move  A0, R0
move  V1, R0
addu  V0, S6, A0
L8011C950:
lb    V0, 0(V0)
xor   V0, V0, A2
sltiu V0, V0, 1
addu  V1, V1, V0
addiu A0, A0, 1
slti  V0, A0, 3
bnez  V0, L8011C950
 addu  V0, S6, A0
j     L8011CD98
 slti  V0, V1, 2
L8011C978:
lb    V1, 2(S2)
lb    V0, 3(S2)
bne   V1, V0, L8011C998
       NOP
jal   0x800EEA58
 lb    A0, 0xf(S2)
bnez  V0, L8011CDA4
 sll   V1, S1, 2
L8011C998:
lb    V0, 2(S2)
lb    V1, 3(S2)
subu  V0, V0, V1
slti  V0, V0, 6
bnezl V0, L8011CDCC
 addiu S1, S1, 1
lb    A0, 0xf(S2)
jal   0x800EEA58
       NOP
beqz  V0, L8011CDA4
 sll   V1, S1, 2
j     L8011CDCC
 addiu S1, S1, 1
L8011C9CC:
jal   func_8011C750
       NOP
bnez  V0, L8011CDA4
 sll   V1, S1, 2
j     L8011CBAC
 li    A0, 80
L8011C9E4:
sll   V0, S7, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
beqz  V0, L8011CDA0
 move  A0, R0
L8011C9FC:
beq   A0, S0, L8011CA20
 sll   V0, A0, 3
subu  V0, V0, A0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
beqz  V0, L8011CA30
 slti  V0, A0, 4
L8011CA20:
addiu A0, A0, 1
slti  V0, A0, 4
bnez  V0, L8011C9FC
       NOP
L8011CA30:
beqz  V0, L8011CDA4
 sll   V1, S1, 2
jal   RNGPercentChance
 li    A0, 70
j     L8011CD64
 sll   V0, V0, 0x10
L8011CA48:
jal   func_8011C750
       NOP
bnez  V0, L8011CDA4
 sll   V1, S1, 2
lui   A0, hi(D_8011EB98)
j     L8011CD8C
 addiu A0, A0, lo(D_8011EB98)
L8011CA64:
jal   func_8011C750
       NOP
bnez  V0, L8011CDA4
 sll   V1, S1, 2
lui   A0, hi(D_8011EBEC)
j     L8011CD8C
 addiu A0, A0, lo(D_8011EBEC)
L8011CA80:
lui   A0, hi(D_8011EE38)
j     L8011CD8C
 addiu A0, A0, lo(D_8011EE38)
L8011CA8C:
lui   A0, hi(D_8011F18C)
jal   0x800DA190
 addiu A0, A0, lo(D_8011F18C)
sll   V0, V0, 0x10
bnezl V0, L8011CDCC
 addiu S1, S1, 1
jal   func_8011C5E0
       NOP
lui   AT, hi(D_8011FBBC)
sw    V0, lo(D_8011FBBC)(AT)
lui   V1, hi(CORE_800CD0AE)
lh    V1, lo(CORE_800CD0AE)(V1)
srav  V1, V1, V0
andi  V1, V1, 1
bnezl V1, L8011CDCC
 addiu S1, S1, 1
j     L8011CDA4
 sll   V1, S1, 2
L8011CAD4:
lui   A0, hi(D_8011F4EC)
jal   0x800DA190
 addiu A0, A0, lo(D_8011F4EC)
sll   V0, V0, 0x10
bnezl V0, L8011CDCC
 addiu S1, S1, 1
jal   func_8011C68C
       NOP
lui   AT, hi(D_8011FBB8)
sw    V0, lo(D_8011FBB8)(AT)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_status_flags)
addu  V0, V0, V1
lbu   V0, lo(p1_status_flags)(V0)
j     L8011CD98
 andi  V0, V0, 0x80
L8011CB1C:
move  A0, R0
move  A2, R0
lui   AT, hi(D_8011FB74)
sw    S3, lo(D_8011FB74)(AT)
L8011CB2C:
beq   A0, S0, L8011CB84
 sll   V0, A0, 3
move  A1, R0
subu  V0, V0, A0
sll   V0, V0, 3
addu  A3, V0, S4
addu  V0, A3, A1
L8011CB48:
lb    V0, 0(V0)
beq   V0, S3, L8011CB74
 sll   V0, V0, 2
addu  V0, V0, S5
lw    V1, 0(V0)
slt   V0, A2, V1
beql  V0, R0, L8011CB78
 addiu A1, A1, 1
move  A2, V1
lui   AT, hi(D_8011FB74)
sw    A0, lo(D_8011FB74)(AT)
L8011CB74:
addiu A1, A1, 1
L8011CB78:
slti  V0, A1, 3
bnez  V0, L8011CB48
 addu  V0, A3, A1
L8011CB84:
addiu A0, A0, 1
slti  V0, A0, 4
bnez  V0, L8011CB2C
       NOP
lui   V0, hi(D_8011FB74)
lw    V0, lo(D_8011FB74)(V0)
beq   V0, S3, L8011CDC8
 slti  V0, A2, 4
beqz  V0, L8011CDA0
 li    A0, 5
L8011CBAC:
jal   RNGPercentChance
       NOP
sll   V0, V0, 0x10
beql  V0, R0, L8011CDCC
 addiu S1, S1, 1
j     L8011CDA4
 sll   V1, S1, 2
L8011CBC8:
move  A0, R0
move  A2, R0
L8011CBD0:
beql  A0, S1, L8011CC0C
 addiu A0, A0, 1
lb    V1, 0xf(S2)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
addu  V0, V0, S4
addu  V0, V0, A0
lb    V0, 0(V0)
beq   V0, S3, L8011CC08
 sll   V0, V0, 2
addu  V0, V0, S5
lw    V0, 0(V0)
addu  A2, A2, V0
L8011CC08:
addiu A0, A0, 1
L8011CC0C:
slti  V0, A0, 3
bnez  V0, L8011CBD0
       NOP
move  A0, R0
lui   AT, hi(D_8011FB70)
sw    S3, lo(D_8011FB70)(AT)
L8011CC24:
beq   A0, S0, L8011CC84
 move  V1, R0
move  A1, R0
sll   V0, A0, 3
subu  V0, V0, A0
sll   V0, V0, 3
addu  A3, V0, S4
addu  V0, A3, A1
L8011CC44:
lb    V0, 0(V0)
beq   V0, S3, L8011CC5C
 sll   V0, V0, 2
addu  V0, V0, S5
lw    V0, 0(V0)
addu  V1, V1, V0
L8011CC5C:
addiu A1, A1, 1
slti  V0, A1, 3
bnez  V0, L8011CC44
 addu  V0, A3, A1
slt   V0, A2, V1
beql  V0, R0, L8011CC88
 addiu A0, A0, 1
lui   AT, hi(D_8011FB70)
sw    A0, lo(D_8011FB70)(AT)
move  A2, V1
L8011CC84:
addiu A0, A0, 1
L8011CC88:
slti  V0, A0, 4
bnez  V0, L8011CC24
       NOP
lui   V0, hi(D_8011FB70)
lw    V0, lo(D_8011FB70)(V0)
beql  V0, S3, L8011CDCC
 addiu S1, S1, 1
j     L8011CDA4
 sll   V1, S1, 2
L8011CCAC:
li    A0, 50
jal   func_8011C7A4
 li    A1, 10
beqz  V0, L8011CDA0
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
j     L8011CD98
 slti  V0, V0, 5
L8011CCDC:
lb    V1, 2(S2)
lb    V0, 3(S2)
beq   V1, V0, L8011CDC8
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
j     L8011CD98
 slti  V0, V0, 5
L8011CD08:
li    A0, 60
jal   func_8011C7A4
 li    A1, 10
beqz  V0, L8011CDA0
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slti  V0, V0, 0x14
bnezl V0, L8011CDCC
 addiu S1, S1, 1
lui   A0, hi(D_8011EFA0)
j     L8011CD8C
 addiu A0, A0, lo(D_8011EFA0)
L8011CD48:
sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slti  V0, V0, 0xa
L8011CD64:
beqz  V0, L8011CDA4
 sll   V1, S1, 2
jal   func_8011C750
       NOP
beql  V0, R0, L8011CDCC
 addiu S1, S1, 1
j     L8011CDA4
 sll   V1, S1, 2
L8011CD84:
lui   A0, hi(D_8011F66C)
addiu A0, A0, lo(D_8011F66C)
L8011CD8C:
jal   0x800DA190
       NOP
sll   V0, V0, 0x10
L8011CD98:
bnezl V0, L8011CDCC
 addiu S1, S1, 1
L8011CDA0:
sll   V1, S1, 2
L8011CDA4:
addiu V0, SP, 0x10
addu  V1, V1, V0
sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
addu  V0, V0, S4
addu  V0, V0, S1
lb    V0, 0(V0)
sw    V0, 0(V1)
L8011CDC8:
addiu S1, S1, 1
L8011CDCC:
slti  V0, S1, 3
bnez  V0, L8011C90C
 sll   V0, S1, 2
move  S1, R0
move  A0, R0
move  A1, R0
addiu A3, SP, 0x10
li    T2, -1
li    T1, 18
lui   T0, hi(CORE_80100FF4)
addiu T0, T0, lo(CORE_80100FF4)
sll   V0, A1, 2
L8011CDFC:
addu  V0, V0, A3
lw    A2, 0(V0)
beql  A2, T2, L8011CE50
 addiu A1, A1, 1
lb    V1, 2(S2)
lb    V0, 3(S2)
bne   V1, V0, L8011CE24
 sll   V0, A1, 2
beql  A2, T1, L8011CE68
 move  V0, A1
L8011CE24:
addu  V0, V0, A3
lw    V0, 0(V0)
sll   V0, V0, 2
addu  V0, V0, T0
lw    V1, 0(V0)
slt   V0, S1, V1
beql  V0, R0, L8011CE50
 addiu A1, A1, 1
move  A0, A1
move  S1, V1
addiu A1, A1, 1
L8011CE50:
slti  V0, A1, 3
bnezl V0, L8011CDFC
 sll   V0, A1, 2
beqz  S1, L8011CE68
 li    V0, -1
move  V0, A0
L8011CE68:
lw    RA, 0x40(SP)
lw    S7, 0x3c(SP)
lw    S6, 0x38(SP)
lw    S5, 0x34(SP)
lw    S4, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x48

func_8011CE94:
addiu SP, SP, -0x40
sw    RA, 0x3c(SP)
sw    FP, 0x38(SP)
sw    S7, 0x34(SP)
sw    S6, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
lui   S4, hi(CORE_800CD058)
addiu S4, S4, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S3, V0
li    A2, 1
sw    A2, 0x14(SP)
move  S1, R0
lui   S7, hi(D_8011F7E0)
addiu S7, S7, lo(D_8011F7E0)
li    S6, -1
lui   S5, hi(D_8011F880)
addiu S5, S5, lo(D_8011F880)
L8011CEF4:
lbu   V0, 3(S3)
sll   V0, V0, 2
addu  V0, V0, S7
lw    V0, 0(V0)
addu  V0, V0, S1
lbu   S0, 0(V0)
jal   func_8010B394
 move  A0, S0
move  S2, V0
beql  S2, S6, L8011CF84
 addiu S1, S1, 1
lui   A0, hi(CORE_80100F94)
addu  A0, A0, S0
lbu   A0, lo(CORE_80100F94)(A0)
addiu A0, A0, 0x14
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slt   V0, V0, A0
bnezl V0, L8011CF84
 addiu S1, S1, 1
lbu   V0, 3(S3)
sll   V0, V0, 2
addu  V0, V0, S5
lw    V0, 0(V0)
addu  V0, V0, S1
jal   RNGPercentChance
 lb    A0, 0(V0)
sll   V0, V0, 0x10
bnez  V0, L8011CF90
 li    V0, 16
addiu S1, S1, 1
L8011CF84:
slti  V0, S1, 0x10
bnez  V0, L8011CEF4
 li    V0, 16
L8011CF90:
beql  S1, V0, L8011CF98
 li    S2, -1
L8011CF98:
li    V0, -1
beq   S2, V0, L8011D028
       NOP
jal   func_8010B394
 li    A0, 14
beq   V0, S2, L8011D1C8
 addiu V0, S2, 1
jal   func_8010B394
 li    A0, 11
bne   V0, S2, L8011CFF8
       NOP
lui   A0, hi(CORE_80100F9F)
lbu   A0, lo(CORE_80100F9F)(A0)
addiu A0, A0, 0x32
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slt   V0, V0, A0
beqz  V0, L8011D1C8
 addiu V0, S2, 1
L8011CFF8:
jal   func_8010B394
 li    A0, 4
bne   V0, S2, L8011D028
       NOP
lb    A0, 0xf(S4)
jal   PlayerHasItem
 li    A1, ITEM_CELLULAR_SHOPPER
li    V1, -1
beq   V0, V1, L8011D028
       NOP
li    S2, -1
sw    R0, 0x14(SP)
L8011D028:
lui   V0, hi(D_8011E1D8)
lw    V0, lo(D_8011E1D8)(V0)
sll   V0, V0, 2
lui   A0, hi(D_8011F8A0)
addu  A0, A0, V0
jal   0x800DA190
 lw    A0, lo(D_8011F8A0)(A0)
sll   V0, V0, 0x10
bnez  V0, L8011D09C
 li    V0, -1
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
lui   V1, hi(CORE_80100F95)
lbu   V1, lo(CORE_80100F95)(V1)
slt   V0, V0, V1
bnez  V0, L8011D09C
 li    V0, -1
jal   func_8010B394
 li    A0, 1
move  V1, V0
li    V0, -1
bne   V1, V0, L8011D1C8
 addiu V0, V1, 1
li    V0, -1
L8011D09C:
bne   S2, V0, L8011D1C8
 addiu V0, S2, 1
lui   V0, hi(D_8011E1D8)
lw    V0, lo(D_8011E1D8)(V0)
sll   V0, V0, 2
lui   A0, hi(D_8011F8A8)
addu  A0, A0, V0
jal   0x800DA190
 lw    A0, lo(D_8011F8A8)(A0)
sll   V0, V0, 0x10
sra   S1, V0, 0x10
bnez  S1, L8011D194
       NOP
lui   FP, hi(D_8011F7E0)
addiu FP, FP, lo(D_8011F7E0)
lw    A2, 0x14(SP)
sltiu S5, A2, 1
li    S7, -1
lui   S6, hi(D_8011F880)
addiu S6, S6, lo(D_8011F880)
L8011D0EC:
lbu   V0, 3(S3)
sll   V0, V0, 2
addu  V0, V0, FP
lw    V0, 0(V0)
addu  V0, V0, S1
lbu   S0, 0(V0)
xori  V0, S0, 4
sltiu V0, V0, 1
and   V0, V0, S5
bnezl V0, L8011D188
 addiu S1, S1, 1
jal   func_8010B394
 move  A0, S0
move  S2, V0
beql  S2, S7, L8011D188
 addiu S1, S1, 1
lui   A0, hi(CORE_80100F94)
addu  A0, A0, S0
lbu   A0, lo(CORE_80100F94)(A0)
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slt   V0, V0, A0
bnezl V0, L8011D188
 addiu S1, S1, 1
lbu   V0, 3(S3)
sll   V0, V0, 2
addu  V0, V0, S6
lw    V0, 0(V0)
addu  V0, V0, S1
jal   RNGPercentChance
 lb    A0, 0(V0)
sll   V0, V0, 0x10
bnez  V0, L8011D1C4
 addiu S1, S1, 1
L8011D188:
slti  V0, S1, 0x10
bnez  V0, L8011D0EC
       NOP
L8011D194:
jal   func_8010B394
 move  A0, R0
move  S2, V0
li    V0, -1
bnel  S2, V0, L8011D1C8
 addiu V0, S2, 1
li    V0, 1
lui   AT, hi(D_8011F75C)
jal   func_8010B41C
 sw    V0, lo(D_8011F75C)(AT)
j     L8011D1C8
 addiu V0, V0, 2
L8011D1C4:
addiu V0, S2, 1
L8011D1C8:
lw    RA, 0x3c(SP)
lw    FP, 0x38(SP)
lw    S7, 0x34(SP)
lw    S6, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x40

func_8011D1F8:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
lui   V0, hi(D_8011F75C)
lw    V0, lo(D_8011F75C)(V0)
bnezl V0, L8011D23C
 li    V0, 2
lui   V0, hi(D_8011E1D8)
lw    V0, lo(D_8011E1D8)(V0)
sll   V0, V0, 2
lui   A0, hi(D_8011F8B0)
addu  A0, A0, V0
jal   0x800DA190
 lw    A0, lo(D_8011F8B0)(A0)
sll   V0, V0, 0x10
sra   V0, V0, 0x10
j     L8011D244
 addiu V0, V0, 1
L8011D23C:
lui   AT, hi(D_8011F75C)
sw    R0, lo(D_8011F75C)(AT)
L8011D244:
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

.align 16

; 8011D250
rodata:
overlaycalls:
.word 0x00000000, overlaycall0
.word 0x00010000, overlaycall1
.word 0x00020000, overlaycall2
.word 0x00030000, overlaycall3
.word 0x00040000, overlaycall4
.word 0xFFFF0000, 0x00000000

.align 4
shuffle_order:
.halfword ${f.order.join(",")}

.align 4
shuffle_bias:
.halfword ${f.bias.join(",")}

.align 4
D_8011D2A0:
.halfword 0x6 0x7 0x8 0x9 0xA 0xB 0xC 0xD

.align 4
star_space_indices:
.halfword ${d.join(",")||0}

.align 4
; toad spaces
D_8011D2C0:
.halfword ${g.join(",")||0}

.align 4
; dir/file of various tumble face textures
D_8011D2D0:
tumble_face_tex_grin:
.halfword 0xA 0x7E
tumble_face_tex_frown:
.halfword 0xA 0x7F
tumble_face_tex_sad:
.halfword 0xA 0x80
tumble_face_tex_smile:
.halfword 0xA 0x81
tumble_face_tex_despair:
.halfword 0xA 0x82
tumble_face_tex_gasp:
.halfword 0xA 0x83
tumble_face_tex_beaming:
.halfword 0xA 0x84

D_8011D2EC:
.word 0x00005E02
.word 0x00005E03
.word 0x00005E04
.word 0x00005E05
.word 0x00005E06
.word 0x00005E07
.word 0x00005E08

; used in star celebration?
D_8011D308:
.word 0x00000000

D_8011D30C:
.word 0x00000000

D_8011D310:
.word 0xBF800000

D_8011D314:
.word 0x00000000

D_8011D318:
.word 0x00000000

; passed as addr, may be u16
; is this the array of hidden block banned spaces?
D_8011D31C:
.word 0xFFFF0000

.align 4
; star spaces 2
D_8011D320:
.halfword ${d.join(",")} 0xFFFF

.align 4
; interleaving array?
D_8011D334: .halfword 0x7
D_8011D336: .halfword 0xFFFF
.halfword 0x0001 0xFFFA
.halfword 0x0001 0xFFF9
.halfword 0x0001 0xFFF9
.halfword 0xFFFB 0xFFFB
.halfword 0x0002 0xFFF9
.halfword 0x0001 0xFFF9
.halfword 0xFFFC 0xFFF7

; boo
D_8011D354: .halfword 2
D_8011D356: .halfword 0
D_8011D358: .halfword 2
.align 4

; used with bank, interleaving arrays?
D_8011D35C: .halfword 0x0001
D_8011D35E: .halfword 0xFFFE
.halfword 0x0000 0xFFFC

D_8011D364: .halfword 0x0001
D_8011D366: .halfword 0xFFFC
.halfword 0x0005 0x0000

D_8011D36C: .halfword 0x0000
D_8011D36E: .halfword 0x0000
.halfword 0x00000 0xFFFD

; gate neighbors
gate_entrance_spaces:
.halfword ${R[0].gateEntryIndex}
gate_exit_spaces:
.halfword ${R[0].gateExitIndex}
.halfword ${R[1].gateEntryIndex}
.halfword ${R[1].gateExitIndex}

.align 4
; toad spaces 2
D_8011D37C:
.halfword ${g.join(",")||0}

.align 4
D_8011D38C:
.halfword 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D

.align 4
boo_space_indices:
.halfword ${s}

.align 4
bank_coin_space_indices:
.halfword ${_.join(",")}

.align 4
; bank coin coordinates?
D_8011D3A4: .word 0xC0400000
D_8011D3A8: .word 0x00000000
D_8011D3AC: .word 0xC0000000
D_8011D3B0: .word 0x00000000
D_8011D3B4: .word 0x40000000
D_8011D3B8: .word 0x40000000
D_8011D3BC: .word 0x3F800000
D_8011D3C0: .word 0x40B00000
D_8011D3C4: .word 0xC0400000
D_8011D3C8: .word 0x40600000
D_8011D3CC: .word 0x41000000
D_8011D3D0: .word 0x40800000
D_8011D3D4: .word 0xBF800000
D_8011D3D8: .word 0x41400000
D_8011D3DC: .word 0x41300000

D_8011D3E0: .word 0x00000000
D_8011D3E4: .word 0x00000000

D_8011D3E8: .word 0x00000000
D_8011D3EC: .word 0x00000000
D_8011D3F0: .word 0x00000000
D_8011D3F4: .word 0x00000000
D_8011D3F8: .word 0xC1700000
D_8011D3FC: .word 0x00000000
D_8011D400: .word 0x00000000
D_8011D404: .word 0x41A00000
D_8011D408: .word 0x00000000
D_8011D40C: .word 0xC1F00000
D_8011D410: .word 0x42340000
D_8011D414: .word 0x00000000
D_8011D418: .word 0x42340000

.align 4
gate_spaces:
.halfword ${R.map(U=>U.gateSpaceIndex).join(",")}

.align 16
; indices into a list of main fs models
; for the gate graphics. Don't change.
D_8011D420: .byte 0x00
D_8011D421: .byte 0x26
.halfword 0x27
D_8011D424: .halfword 0x28 0x29
D_8011D428: .halfword 0x2A 0x2B

; MTNX files for each gate type.
D_8011D42C:
.word 0x00000001 0x00130163
D_8011D434:
.word 0x00000001 0x00130168
D_8011D43C:
.word 0x00000001 0x0013016F
D_8011D444:
.word 0x00000001 0x00130176
D_8011D44C:
.word 0x00000001 0x00130180
D_8011D454:
.word 0x00000001 0x00130184

D_8011D45C:
.word D_8011D42C
.word D_8011D434
.word D_8011D43C
.word D_8011D444
.word D_8011D44C
.word D_8011D454

; sound that plays when the gate opens. 0x148 is raw sound 0x7E.
D_8011D474:
.word 0x00000148
.word 0x00000148
.word 0x00000148
.word 0x00000148
.word 0x00000148
.word 0x00000148

D_8011D48C: .word 0xFFFFFFFF
D_8011D490: .word 0xFFFFFFFF
D_8011D494: .word 0xFFFFFFFF
D_8011D498: .halfword 0xFFFF
D_8011D49A: .halfword 0xFFFF
D_8011D49C: .word 0xFFFFFFFF
D_8011D4A0: .word 0xFFFFFFFF
D_8011D4A4: .word 0xFFFFFFFF
D_8011D4A8: .word 0xFFFFFFFF
D_8011D4AC: .word 0xFFFFFFFF
D_8011D4B0: .word 0xFFFFFFFF
D_8011D4B4: .word 0xFFFFFFFF
D_8011D4B8: .word 0xFFFFFFFF

D_8011D4BC: .word 0xFFFFFFFF
D_8011D4C0: .word 0xFFFFFFFF
D_8011D4C4: .word 0xFFFFFFFF
D_8011D4C8: .word 0xFFFFFFFF
D_8011D4CC: .word 0xFFFFFFFF
D_8011D4D0: .word 0xFFFFFFFF
D_8011D4D4: .word 0xFFFFFFFF
D_8011D4D8: .word 0xFFFFFFFF
D_8011D4DC: .word 0xFFFFFFFF

D_8011D4E0: .word 0xFFFFFFFF
D_8011D4E4: .word 0xFFFFFFFF
D_8011D4E8: .word 0xFFFFFFFF
D_8011D4EC: .word 0xFFFFFFFF
D_8011D4F0: .word 0xFFFFFFFF
D_8011D4F4: .word 0xFFFFFFFF
D_8011D4F8: .word 0xFFFFFFFF
D_8011D4FC: .word 0xFFFFFFFF
D_8011D500: .word 0xFFFFFFFF

.align 4
bank_model_space_indices:
.halfword ${E.join(",")}

.align 4
item_shop_model_space_indices:
.halfword ${C.join(",")}

.align 4
; Koopa Kard usage AI
D_8011E058:
.word 0x04000000 0x00F50014 0x0B541E1E
.word 0x00000000 0x00000000 0x1B541E1E

; bank main fs something
D_8011E070:
.word 0x00000001 0x000A009D

D_8011E088: .word 0x00000000
D_8011E08C: .word 0x01000000
D_8011E090: .word 0x02030404
D_8011E094: .word 0x00000000
D_8011E098: .word 0x01000000
D_8011E09C: .word 0x02030404

D_8011E0A0:
.byte 0x00 0x01 0x04 0x05 0x0A 0x0E 0x13
.byte 0x00 0x01 0x04 0x05 0x0A 0x0C 0x13
.byte 0x00 0x01 0x04 0x05 0x0A 0x13 0xFF
.byte 0x00 0x01 0x04 0x08 0x0A 0x0C 0x13
.byte 0x00 0x01 0x08 0x0A 0x0C 0x0E 0x13
.byte 0x01 0x02 0x03 0x06 0x0D 0x0B 0x13
.byte 0x01 0x02 0x03 0x06 0x09 0x0D 0x13
.byte 0x01 0x02 0x03 0x07 0x0D 0x13 0xFF
.byte 0x01 0x03 0x06 0x07 0x09 0x0D 0x13
.byte 0x01 0x03 0x06 0x07 0x09 0x0B 0x13
.byte 0x00 0x00 ; align 4

D_8011E0E8: .word 0x00000101
D_8011E0EC: .word 0x01020203
D_8011E0F0: .word 0x02030304
D_8011E0F4: .word 0x00000101
D_8011E0F8: .word 0x01020203
D_8011E0FC: .word 0x02030304

D_8011E100: .word 0x1937414C
D_8011E104: .word 0x51565B60
D_8011E108: .word 0x62641E32
D_8011E10C: .word 0x3C464B55
D_8011E110: .word 0x5A5F6164
D_8011E114: .word 0x192D343E
D_8011E118: .word 0x4352585F
D_8011E11C: .word 0x61641423
D_8011E120: .word 0x282D374B
D_8011E124: .word 0x555F6164
D_8011E128: .word 0x0F191E28
D_8011E12C: .word 0x2D46505C
D_8011E130: .word 0x5F642135
D_8011E134: .word 0x44494E53
D_8011E138: .word 0x5D626400
D_8011E13C: .word 0x1928373F
D_8011E140: .word 0x49515B62
D_8011E144: .word 0x64001426
D_8011E148: .word 0x3A444B52
D_8011E14C: .word 0x5A626400
D_8011E150: .word 0x0F233741
D_8011E154: .word 0x484F5561
D_8011E158: .word 0x64000F19
D_8011E15C: .word 0x2D37414B
D_8011E160: .word 0x505F6400

D_8011E164: .word 0x00010405
D_8011E168: .word 0x080A0C0E
D_8011E16C: .word 0x0F100102
D_8011E170: .word 0x03060709
D_8011E174: .word 0x0D0B1101

; 3B is toad, 3D is baby bowser
item_shop_purchase_selection_messages:
.word 0x00003B05
.word 0x00003D05
.word 0x00003B06
.word 0x00003D06
.word 0x00003B07
.word 0x00003D07
.word 0x00003B08
.word 0x00003D08
.word 0x00003B09
.word 0x00003D09

D_8011E1A0:
item_shop_prompt_to_buy_messages:
.word 0x00003B00
.word 0x00003D00

D_8011E1A8:
item_shop_not_enough_coins_messages:
.word 0x00003B01
.word 0x00003D01

D_8011E1B0:
item_shop_already_have_three_items_messages:
.word 0x00003B02
.word 0x00003D02

D_8011E1B8:
item_shop_closed_messages:
.word 0x00003B03
.word 0x00003D03

D_8011E1C0:
item_shop_cancelled_purchase_messages:
.word 0x00003B04
.word 0x00003D04

D_8011E1C8:
.word 0x00000001 0x000A0017

D_8011E1D0:
.word 0x00000001 0x000A00F0

D_8011E1D8:
.word 0

D_8011E1EC: .word 0x42980000
D_8011E1F0: .word 0x42500000
D_8011E1F4: .word 0x43740000
D_8011E1F8: .word 0x42500000
D_8011E1FC: .word 0x42980000
D_8011E200: .word 0x43400000
D_8011E204: .word 0x43740000
D_8011E208: .word 0x43400000
D_8011E20C: .word 0xBF800000

D_8011E210: .word 0xBF800000
D_8011E214: .word 0x3F800000
D_8011E218: .word 0xBF800000
D_8011E21C: .word 0xBF800000
D_8011E220: .word 0x3F800000
D_8011E224: .word 0x3F800000
D_8011E228: .word 0x3F800000

D_8011E22C: .byte 0x01
D_8011E22D: .byte 0x05
D_8011E22E: .byte 0x0F 0x06
D_8011E230: .word 0x0F191019
D_8011E234: .word 0x1B1A231E
D_8011E238: .word 0x242D202E
D_8011E23C: .word 0x32230000

D_8011E240: .byte 0x00
D_8011E241: .byte 0x00
D_8011E242: .byte 0x00 0x01
D_8011E244: .word 0x0A010B0B
D_8011E248: .word 0x040C0E02
D_8011E24C: .word 0x0F0F0410
D_8011E250: .word 0x17031821
D_8011E254: .word 0x04222505
D_8011E258: .word 0x26270228
D_8011E25C: .word 0x31063236
D_8011E260: .word 0x05373F07
D_8011E264: .word 0x40400841
D_8011E268: .word 0xFF090000
D_8011E26C: .word 0x09070401
D_8011E270: .word 0x00000000

D_8011E274: .word 0x00000032
D_8011E278: .word 0x00000050
D_8011E27C: .word 0x00000064

D_8011E280: .word 0x00000001
D_8011E284: .word 0x00000000
D_8011E288: .word 0x00000001
D_8011E28C: .word 0x00000000
D_8011E290: .word 0x00000000
D_8011E294: .word 0x00000001
D_8011E298: .word 0x00000000

D_8011E354: .word 0x43240000
D_8011E358: .word 0x42980000
D_8011E35C: .word 0x430C0000
D_8011E360: .word 0x42980000
D_8011E364: .word 0x43240000
D_8011E368: .word 0x42980000
D_8011E36C: .word 0x430C0000
D_8011E370: .word 0x42980000
D_8011E374: .word 0x43040000
D_8011E378: .word 0x42780000
D_8011E37C: .word 0x435C0000
D_8011E380: .word 0x42780000
D_8011E384: .word 0x43040000
D_8011E388: .word 0x43340000
D_8011E38C: .word 0x435C0000
D_8011E390: .word 0x43340000

D_8011E394: .word 0x43240000
D_8011E398: .word 0x42840000
D_8011E39C: .word 0x43240000
D_8011E3A0: .word 0x42840000
D_8011E3A4: .word 0x43240000
D_8011E3A8: .word 0x42840000
D_8011E3AC: .word 0x43240000
D_8011E3B0: .word 0x42840000

D_8011E3B4: .word 0x43240000

D_8011E3B8: .word 0x42980000
D_8011E3BC: .word 0x43240000
D_8011E3C0: .word 0x42980000
D_8011E3C4: .word 0x43240000
D_8011E3C8: .word 0x42980000
D_8011E3CC: .word 0x43240000
D_8011E3D0: .word 0x42980000

; Message box AI - which shop will you choose?
D_8011E3D4:
.word 0x0D000000 0x00000000 0x0A142850
.word 0x0D000000 0x00000001 0x064C9932
.word 0x0D000000 0x00000002 0x03C78F1E
.word 0x0D000000 0x00000003 0x08D1A346
.word 0x0D000000 0x00000004 0x078F1E3C
.word 0x0D000000 0x00000005 0x064C9932
.word 0x0D000000 0x00000006 0x03C78F1E
.word 0x0D000000 0x00000007 0x078F1E3C
.word 0x00000000 0x00000000 0x064C9932

D_8011E440: .word 0x00000014
D_8011E444: .word 0x0000003C
D_8011E448: .word 0x0000001E
D_8011E44C: .word 0x00000032
D_8011E450: .word 0x00000046

; ai tree for throwing away skeleton key
D_8011E454:
.word 0x00000000 00000000 0x0C993264

D_8011E460: .word 0xC1200000
D_8011E464: .word 0x00000000
D_8011E468: .word 0x41200000
D_8011E46C: .word 0xC0A00000
D_8011E470: .word 0x41200000
D_8011E474: .word 0x40A00000
D_8011E478: .word 0xC0A00000
D_8011E47C: .word 0xC0A00000
D_8011E480: .word 0x41200000
D_8011E484: .word 0x00000000
D_8011E488: .word 0xC0A00000
D_8011E48C: .word 0x40A00000

D_8011E490: .word 0xFFFFFFFF

D_8011E494: .byte 0x43 0x44 0x45 0x00

D_8011E498: .byte 0x14 0x3C 0x64 0x00

D_8011E49C: .halfword 0
D_8011E49E: .halfword 0x32
D_8011E4A0: .word 0x00020050
D_8011E4A4: .word 0x0004005A
D_8011E4A8: .word 0x0008005E
D_8011E4AC: .word 0x00100061
D_8011E4B0: .word 0x00200063
D_8011E4B4: .word 0x00400064

D_8011E4B8: .byte 0xF0
D_8011E4B9: .byte 0xDE
D_8011E4BA: .byte 0x35 0xF7
D_8011E4BC: .byte 0x1A 0x42 0x00 0x00

.align 16
data_screen_dimensions:
.word 00000000
.word 00000000
.word 0x43A00000 ; 320
.word 0x43700000 ; 240

D_8011E8C8:
.word 0x0A000000 0x000C0004 0x0C96A846
.word 0x0A000000 0x000D0002 0x0C96A846
.word 0x0A000000 0x000E0003 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011E8F8:
.word 0x0C000000 0x0000000A 0x0000001E
.word 0x10000000 0x0000000A D_8011E8C8
.word 0x0C000000 0x00000019 0x0000001E
.word 0x0A000000 0x00010008 0x0C96A846
.word 0x0A000000 0x00100004 0x0C96A846
.word 0x0C000000 0x0000001E 0x0000001E
.word 0x0A000000 0x000A0204 0x0C96A846
.word 0x0C000000 0x00000023 0x0000001E
.word 0x0A000000 0x0005080A 0x0C96A846
.word 0x0A000000 0x00080006 0x0C96A846
.word 0x0A000000 0x000A0001 0x0C96A846
.word 0x0A000000 0x00060000 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011E994:
.word 0x0C000000 0x00000014 0x0000001E
.word 0x0A000000 0x00010B0C 0x0C96A846
.word 0x0A000000 0x000F0006 0x0C96A846
.word 0x0A000000 0x00030305 0x0C96A846
.word 0x0A000000 0x00040001 0x0C96A846
.word 0x0C000000 0x00000019 0x0000001E
.word 0x0A000000 0x0001040A 0x0C96A846
.word 0x0A000000 0x00100104 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011EA00:
.word 0x0C000000 0x00000014 0x0000001E
.word 0x0A000000 0x00010B0C 0x0C96A846
.word 0x0A000000 0x000F0609 0x0C96A846
.word 0x0A000000 0x00020006 0x0C96A846
.word 0x0A000000 0x00030005 0x0C96A846
.word 0x0C000000 0x00000019 0x0000001E
.word 0x0A000000 0x0001060A 0x0C96A846
.word 0x0A000000 0x00100304 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011EA6C:
.word 0x0C000000 0x00000014 0x0000001E
.word 0x0A000000 0x000F0009 0x0C96A846
.word 0x0A000000 0x00020006 0x0C96A846
.word 0x0A000000 0x00030305 0x0C96A846
.word 0x0A000000 0x00040001 0x0C96A846
.word 0x0A000000 0x00050003 0x0C96A846
.word 0x0A000000 0x00070007 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011EACC:
.word 0x0C000000 0x00000014 0x0000001E
.word 0x0A000000 0x000A0208 0x0C96A846
.word 0x0C000000 0x00000019 0x0000001E
.word 0x0A000000 0x00020206 0x0C96A846
.word 0x0A000000 0x0005030A 0x0C96A846
.word 0x0A000000 0x00080006 0x0C96A846
.word 0x0A000000 0x000A0001 0x0C96A846
.word 0x0A000000 0x000B0307 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011EB38:
.word 0x0C000000 0x00000005 0x0000001E
.word 0x0A000000 0x000A020A 0x0C96A846
.word 0x0A000000 0x000C0003 0x0C96A846
.word 0x0A000000 0x000E0001 0x0C96A846
.word 0x0C000000 0x0000000A 0x0000001E
.word 0x0A000000 0x00080406 0x0C96A846
.word 0x0A000000 0x000A0001 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011EB98:
.word 0x02000000 0x00000041 D_8011E8F8
.word 0x02000000 0x00000002 D_8011E994
.word 0x02000000 0x00000004 D_8011EA00
.word 0x02000000 0x00000008 D_8011EA6C
.word 0x02000000 0x00000030 D_8011EACC
.word 0x02000000 0x00000080 D_8011EB38
.word 0x00000000 0x00000000 0x00000000

D_8011EBEC:
.word 0x00000000 0x00000000 0x0A119E32

D_8011EBF8:
.word 0x0A000000 0x0001090C 0x0000028A
.word 0x0A000000 0x00020000 0x0000028A
.word 0x0B000000 0x0001090C 0x0B54233C
.word 0x0B000000 0x00020000 0x0B54233C
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000E0002 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011EC4C:
.word 0x0A000000 0x000F0709 0x0000028A
.word 0x0A000000 0x00030001 0x0000028A
.word 0x0B000000 0x000F0709 0x0B54233C
.word 0x0B000000 0x00030001 0x0B54233C
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000E0002 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011ECA0:
.word 0x0A000000 0x00070106 0x0000028A
.word 0x0B000000 0x00070106 0x0B54233C
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000E0002 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011ECDC:
.word 0x0A000000 0x00050408 0x0000028A
.word 0x0B000000 0x00050408 0x0B54233C
.word 0x0A000000 0x000A0004 0x0000028A
.word 0x0B000000 0x000A0004 0x0B54233C
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000E0002 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011ED30:
.word 0x0A000000 0x000A080A 0x0000028A
.word 0x0A000000 0x000B0001 0x0000028A
.word 0x0B000000 0x000A080A 0x0B54233C
.word 0x0B000000 0x000B0001 0x0B54233C
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000E0002 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011ED84:
.word 0x0A000000 0x000C0103 0x0000028A
.word 0x0A000000 0x000D0000 0x0000028A
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000D0000 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011EDC0:
.word 0x0A000000 0x0001080C 0x0000028A
.word 0x0B000000 0x0001080C 0x0B54233C
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000E0002 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011EDFC:
.word 0x0A000000 0x00010002 0x0000028A
.word 0x0A000000 0x000E0102 0x0000028A
.word 0x0B000000 0x0001080C 0x0B54233C
.word 0x0B000000 0x000E0102 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011EE38:
.word 0x02000000 0x00000001 D_8011EBF8
.word 0x02000000 0x00000002 D_8011EC4C
.word 0x02000000 0x00000004 D_8011ECA0
.word 0x02000000 0x00000008 D_8011ECDC
.word 0x02000000 0x00000010 D_8011ED30
.word 0x02000000 0x00000020 D_8011ED84
.word 0x02000000 0x00000040 D_8011EDC0
.word 0x02000000 0x00000080 D_8011EDFC
.word 0x00000000 0x00000000 0x00000000

D_8011EEA4:
.word 0x0A000000 0x0001090C 0x0000028A
.word 0x0A000000 0x00020000 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EEC8:
.word 0x0A000000 0x000F0709 0x0000028A
.word 0x0A000000 0x00030001 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EEEC:
.word 0x0A000000 0x00070106 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EF04:
.word 0x0A000000 0x00050408 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EF1C:
.word 0x0A000000 0x000A080A 0x0000028A
.word 0x0A000000 0x000B0001 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EF40:
.word 0x0A000000 0x000C0103 0x0000028A
.word 0x0A000000 0x000D0000 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EF64:
.word 0x0A000000 0x0001080C 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EF7C:
.word 0x0A000000 0x00010002 0x0000028A
.word 0x0A000000 0x000E0102 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EFA0:
.word 0x02000000 0x00000001 D_8011EEA4
.word 0x02000000 0x00000002 D_8011EEC8
.word 0x02000000 0x00000004 D_8011EEEC
.word 0x02000000 0x00000008 D_8011EF04
.word 0x02000000 0x00000010 D_8011EF1C
.word 0x02000000 0x00000020 D_8011EF40
.word 0x02000000 0x00000040 D_8011EF64
.word 0x02000000 0x00000080 D_8011EF7C
.word 0x00000000 0x00000000 0x00000000

D_8011F00C:
.word 0x0B000000 0x0001090B 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F024:
.word 0x0B000000 0x000F0709 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F03C:
.word 0x0B000000 0x00070104 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F054:
.word 0x0B000000 0x00050406 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F06C:
.word 0x0B000000 0x000A080A 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F084:
.word 0x0B000000 0x000C0102 0x0B54233C
.word 0x0B000000 0x000A0A0A 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F0A8:
.word 0x0B000000 0x0001080A 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F0C0:
.word 0x0B000000 0x00010000 0x0B54233C
.word 0x0B000000 0x000E0102 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F0E4:
.word 0x02000000 0x00000001 D_8011F00C
.word 0x02000000 0x00000002 D_8011F024
.word 0x02000000 0x00000004 D_8011F03C
.word 0x02000000 0x00000008 D_8011F054
.word 0x02000000 0x00000010 D_8011F06C
.word 0x02000000 0x00000020 D_8011F084
.word 0x02000000 0x00000040 D_8011F0A8
.word 0x02000000 0x00000080 D_8011F0C0
.word 0x00000000 0x00000000 0x00000000

D_8011F150:
.word 0x0A000000 0x0001080A 0x0B54233C
.word 0x0A000000 0x000A0001 0x0B54233C
.word 0x0A000000 0x00050A0A 0x0B54233C
.word 0x0A000000 0x00040000 0x0B54233C
.word 0x00000000 0x00000000 0x00000000

D_8011F18C:
.word 0x00000000 0x00000000 D_8011F0E4

D_8011F198:
.word 0x00000000 0x00000000 D_8011F150

D_8011F1A4: .word 0x00000000 ; align 16?
D_8011F1A8: .word 0x00000000
D_8011F1AC: .word 0x00000000

D_8011F1B0:
.word 0x0A000000 0x00020206 0x0B54233C
.word 0x0A000000 0x000F0003 0x0B54233C
.word 0x0A000000 0x00030305 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F1E0:
.word 0x0A000000 0x00020404 0x0B54233C
.word 0x0A000000 0x00030305 0x0B54233C
.word 0x0A000000 0x00040001 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F210:
.word 0x0A000000 0x00050407 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F228:
.word 0x0A000000 0x00050A0A 0x0B54233C
.word 0x0A000000 0x00060000 0x0B54233C
.word 0x0A000000 0x000A0001 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F258:
.word 0x0A000000 0x000D0000 0x0B54233C
.word 0x0A000000 0x000C0103 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F27C:
.word 0x0A000000 0x000B0001 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F294:
.word 0x0A000000 0x000F0106 0x0B54233C
.word 0x0A000000 0x00020006 0x0B54233C
.word 0x0A000000 0x00040001 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F2C4:
.word 0x0A000000 0x00010405 0x0B54233C
.word 0x0C000000 0x0000000A 0x00028A1E
.word 0x0A000000 0x00010607 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F2F4:
.word 0x02000000 0x00000080 D_8011F2C4
.word 0x0C000000 0x00000005 0x00000A1E
.word 0x0A000000 0x00010004 0x0BF6A33C
.word 0x0C000000 0x00000014 0x00028A1E
.word 0x02000000 0x00000001 D_8011F1B0
.word 0x02000000 0x00000002 D_8011F1E0
.word 0x02000000 0x00000004 D_8011F210
.word 0x02000000 0x00000008 D_8011F228
.word 0x02000000 0x00000010 D_8011F258
.word 0x02000000 0x00000020 D_8011F27C
.word 0x02000000 0x00000040 D_8011F294
.word 0x00000000 0x00000000 0x00000000

D_8011F384:
.word 0x0B000000 0x0001090C 0x0B54233C
.word 0x0B000000 0x00020000 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F3A8:
.word 0x0B000000 0x000F0709 0x0B54233C
.word 0x0B000000 0x00030001 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F3CC:
.word 0x0B000000 0x00070106 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F3E4:
.word 0x0B000000 0x00050408 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F3FC:
.word 0x0B000000 0x000A080A 0x0B54233C
.word 0x0B000000 0x000B0001 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F420:
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000D0000 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F444:
.word 0x0B000000 0x0001080C 0x0C94233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F45C:
.word 0x0B000000 0x00010002 0x0B54233C
.word 0x0B000000 0x000E0102 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F480:
.word 0x02000000 0x00000001 D_8011F384
.word 0x02000000 0x00000002 D_8011F3A8
.word 0x02000000 0x00000004 D_8011F3CC
.word 0x02000000 0x00000008 D_8011F3E4
.word 0x02000000 0x00000010 D_8011F3FC
.word 0x02000000 0x00000020 D_8011F420
.word 0x02000000 0x00000040 D_8011F444
.word 0x02000000 0x00000080 D_8011F45C
.word 0x00000000 0x00000000 0x00000000

D_8011F4EC:
.word 0x00000000 0x00000000 D_8011F2F4
.word 0x00000000 0x00000000 0x00000000

D_8011F504:
.word 0x0F000000 0x0001090C 0x0B54233C
.word 0x0F000000 0x00020000 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F528:
.word 0x0F000000 0x000F0709 0x0B54233C
.word 0x0F000000 0x00030001 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F54C:
.word 0x0F000000 0x00070106 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F564:
.word 0x0F000000 0x00050408 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F57C:
.word 0x0F000000 0x000A080A 0x0B54233C
.word 0x0F000000 0x000B0001 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F5A0:
.word 0x0F000000 0x000C0103 0x0B54233C
.word 0x0F000000 0x000D0000 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F5C4:
.word 0x0F000000 0x0001080C 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F5DC:
.word 0x0F000000 0x00010002 0x0B54233C
.word 0x0F000000 0x000E0102 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F600:
.word 0x02000000 0x00000001 D_8011F504
.word 0x02000000 0x00000002 D_8011F528
.word 0x02000000 0x00000004 D_8011F54C
.word 0x02000000 0x00000008 D_8011F564
.word 0x02000000 0x00000010 D_8011F57C
.word 0x02000000 0x00000020 D_8011F5A0
.word 0x02000000 0x00000040 D_8011F5C4
.word 0x02000000 0x00000080 D_8011F5DC
.word 0x00000000 0x00000000 0x00000000

D_8011F66C: .word 0x00000000 ; nullptr
D_8011F670: .word 0x00000000 ; nullptr
D_8011F674: .word D_8011F480
D_8011F678: .word 0x00000000
D_8011F67C: .word 0x00000000
D_8011F680: .word 0x00000000

D_8011F684:
.word 0x08000000 0x00000001 0x00000514
.word 0x02000000 0x00000004 0x0B54233C
.word 0x00000000 0x00000000 0x00000000

D_8011F6A8:
.word 0x00000000 0x00000000 0x00000000

D_8011F6B4:
.word 0x02000000 0x000000B0 0x08CF1932
.word 0x00000000 0x00000000 0x00000000

D_8011F6CC:
.word 0x02000000 0x00000041 0x08CF1932
.word 0x00000000 0x00000000 0x00000000

D_8011F6E4:
.word 0x01000000 0x00000019 0x0C96A846
.word 0x00000000 0x00000000 0x0000051E
D_8011F6FC:
.word 0x02000000 0x00000002 D_8011F6E4
.word 0x01000000 0x00000019 0x0C96A846
.word 0x00000000 0x00000000 0x0B54233C
D_8011F720:
.word 0x01000000 0x0000001E 0x0C96A846
.word 0x00000000 0x00000000 0x0000051E
D_8011F738:
.word 0x02000000 0x00000030 D_8011F720
.word 0x01000000 0x00000019 0x0C96A846
.word 0x00000000 0x00000000 0x0B54233C

D_8011F75C:
.word 0x00000000

D_8011F760:
.word 0x0E0A0003
.word 0x0204130B
.word 0x05060C0D
.word 0x09070801

D_8011F770:
.word 0x0E010B0A
.word 0x130C0006
.word 0x09030D04
.word 0x08070205

D_8011F780:
.word 0x0E0B0609
.word 0x0C07030D
.word 0x02040A13
.word 0x00080501

D_8011F790:
.word 0x0E05090A
.word 0x0B07130C
.word 0x0006030D
.word 0x04080201

D_8011F7A0:
.word 0x0E080D0B
.word 0x0A130607
.word 0x0C000903
.word 0x04020501

D_8011F7B0:
.word 0x0E030B0A
.word 0x130C0006
.word 0x090D0408
.word 0x07020501

D_8011F7C0:
.word 0x0E020903
.word 0x06070805
.word 0x04130B0D
.word 0x0A0C0001

D_8011F7D0:
.word 0x0E041309
.word 0x0B0A030C
.word 0x07000106
.word 0x0D080205

D_8011F7E0:
.word D_8011F760
.word D_8011F770
.word D_8011F780
.word D_8011F790
.word D_8011F7A0
.word D_8011F7B0
.word D_8011F7C0
.word D_8011F7D0

D_8011F800:
.word 0x5A463C1E
.word 0x14141414
.word 0x0A0A0A0A
.word 0x0A0A0A0A

D_8011F810:
.word 0x50321414
.word 0x140A140A
.word 0x0A0A140A
.word 0x0A0A0A00

D_8011F820:
.word 0x501E321E
.word 0x1E141414
.word 0x14141E14
.word 0x1E0A0A0A

D_8011F830:
.word 0x5A32141E
.word 0x140A140A
.word 0x1E0A0A0A
.word 0x0A0A0A0A

D_8011F840:
.word 0x5A321E1E
.word 0x1E141414
.word 0x0A1E0A0A
.word 0x0A0A0A0A

D_8011F850:
.word 0x5A321E3C
.word 0x14141E14
.word 0x0A0A0A0A
.word 0x0A0A0A0A

D_8011F860:
.word 0x46282828
.word 0x1E141E1E
.word 0x1428281E
.word 0x280A280A

D_8011F870:
.word 0x50323C14
.word 0x141E141E
.word 0x0A1E140A
.word 0x0A0A0A0A

D_8011F880:
.word D_8011F800
.word D_8011F810
.word D_8011F820
.word D_8011F830
.word D_8011F840
.word D_8011F850
.word D_8011F860
.word D_8011F870

D_8011F8A0: .word D_8011F684
D_8011F8A4: .word D_8011F6A8

D_8011F8A8: .word D_8011F6B4
D_8011F8AC: .word D_8011F6CC

D_8011F8B0: .word D_8011F6FC
D_8011F8B4: .word D_8011F738

D_8011F8B8: .word 0x00000000 ; align 16?
D_8011F8BC: .word 0x00000000

D_8011F8C0: .word 0x02021006
D_8011F8C4: .word 0x08061404
D_8011F8C8: .word 0x00000000
D_8011F8CC: .word 0x00000000
D_8011F8D0: .word 0x01020408

percent_d_str_format:
.asciiz "%d" ; 0x25640000
.align 4

.align 8
D_8011F8D8: .word 0x3FF80000
D_8011F8DC: .word 0x00000000

D_8011F8E0: .word 0x3F800000
D_8011F8E4: .word 0x3F800000
D_8011F8E8: .word 0x3F800000
D_8011F8EC: .word 0x3F800000
D_8011F8F0: .word 0x40000000
D_8011F8F4: .word 0x3F800000
D_8011F8F8: .word 0x00000000
D_8011F8FC: .word 0x40000000
D_8011F900: .word 0x3F800000
D_8011F904: .word 0xBF800000
D_8011F908: .word 0x3F800000
D_8011F90C: .word 0x3F800000
D_8011F910: .word 0xBF800000
D_8011F914: .word 0xBF800000
D_8011F918: .word 0x3F800000
D_8011F91C: .word 0x00000000
D_8011F920: .word 0xBF800000
D_8011F924: .word 0x3F800000
D_8011F928: .word 0xBF800000
D_8011F92C: .word 0x40000000
D_8011F930: .word 0x3F800000
D_8011F934: .word 0x3F800000
D_8011F938: .word 0xBF800000
D_8011F93C: .word 0x3F800000

.align 8
D_8011F940: .word 0x3FD33333
D_8011F944: .word 0x33333333

.align 8
D_8011F948: .word 0x3FE00000
D_8011F94C: .word 0x00000000

.align 8
D_8011F950: .word 0x3FE00000
D_8011F954: .word 0x00000000

.align 8
D_8011F958: .word 0x3FE00000
D_8011F95C: .word 0x00000000

.align 8
D_8011F960: .word 0x3FE00000
D_8011F964: .word 0x00000000

.align 8
D_8011F968: .word 0x3FF80000
D_8011F96C: .word 0x00000000

.align 8
D_8011F970: .word 0x3FE99999
D_8011F974: .word 0x9999999A

.align 8
D_8011F978: .word 0x3FE99999
D_8011F97C: .word 0x9999999A

.align 8

D_8011FA20_jump_table:
.word L8011CDC8
.word L8011C9CC
.word L8011C944
.word L8011CA8C
.word L8011CAD4
.word L8011CCDC
.word L8011CA80
.word L8011CB1C
.word L8011C9E4
.word L8011CD48
.word L8011CD84
.word L8011CA48
.word L8011CCAC
.word L8011C944
.word L8011CA64
.word L8011CD08
.word L8011C944
.word L8011CBC8
.word L8011C9CC
.word L8011C978

.align 16

bss:
D_8011FA70:
.word 0
.word 0

D_8011FA78:
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0

; holds millenium star object pointers?
D_8011FA98:
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0

.align 8
D_8011FAB8: .word 0

D_8011FABC: .word 0

D_8011FAC0: .word 0

D_8011FAC4: .word 0

D_8011FAD4: .word 0

D_8011FAD8: .word 0

D_8011FAF0:
.word 0
.word 0

D_8011FAF8:
.word 0
.word 0
.word 0
.word 0

; boo
D_8011FB08: .word 0
; boo
D_8011FB0C: .word 0

D_8011FB10:
.word 0
.word 0

D_8011FB18:
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0

bank_model_bss:
D_8011FB40: .word 0

; gates bss entries (probably 2 words for 2 gates)
D_8011FB44:
.word 0
.word 0

D_8011FB4C: .word 0

D_8011FB50: .word 0

D_8011FB54: .word 0

D_8011FB58: .word 0

D_8011FB5C: .halfword 0

D_8011FB5E: .halfword 0

D_8011FB60: .word 0

D_8011FB64: .halfword 0

D_8011FB66: .halfword 0

D_8011FB68: .word 0

D_8011FB6C: .word 0

D_8011FB70: .word 0

D_8011FB74: .word 0

D_8011FB78:
.word 0
.word 0

D_8011FB80:
.halfword 0
D_8011FB82:
.halfword 0
.word 0
.word 0

D_8011FB8C: .halfword 0
D_8011FB8E: .halfword 0

D_8011FB90:
.word 0
.word 0

D_8011FB98:
.word 0
.word 0
.word 0
.word 0

D_8011FBA8:
.word 0
.word 0
.word 0
.word 0

; Player index of player that is in the lead (or something)?
D_8011FBB8: .word 0

; Player index of player that is in the lead (or something)?
D_8011FBBC: .word 0

.align 16
  `}const m$=["","","","","","","","","","","Mushroom Growth (Toadstool Titan)","","Cursed Shroom block (Mario Party 1)","","","","","","","","","Train Whistle (End of the Line)","Train Whistle (End of the Line)","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Dizzy sound (Birds)","","Dice Roll shuffling","","Dice Roll hit","Mini-Game hand moving through selection","Mini-Game selected on the roulette","Warp Block warp sound","","","","Turn Start sound","","Hidden Block appears","","","","Entering Mini-Game","","","Item Shop opening","Item Shop closing","","","","","","","","Landed on Blue Space","Landed on Red Space","Stepped on Star Space","","","","","","","","","","","","","","","","","","","","","","","","","Bowser Fleeing Sound","","","Item Obtained on Shop?","Rare Item obtained from Toad?","","","Cellular Shopper Ringtone","Cellphone ring","","","","","","","","Ho ho ho! (Millennium Star)","","","","","","Cannon explosion (Award Ceremony)","","Firework launch","Firework explosion","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Warp Pipe sound","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Mario Party 3 (laughter)","Mario Party 3 (laughter)","Game Over","Start!","New Record!","Finish!","MISS!","DRAW!","Bob-omb voice","Boo laugh","Thwomp cry","Metal! (Koopa Troopa)","Koopa cry","Goomba cry","Metal! (Koopa Troopa)","Whomp cry","Boo cry","Got Item!","Chance Time!","Mario: Hoo hoo! I got it!","Mario: Oh, I lost!","Mario: I'm the best!","Mario: Yahoo! Mario's the superstar!","Mario cry","Mario: Yahoo! Mario's the winner!","Luigi cry","Luigi: Ahaha! I'm-a got it!","Luigi: Oh, I lost!","Luigi: I'm the best!","Luigi: Yes! Luigi's the superstar!","Luigi cry","Luigi: Yes! Luigi's the winner!","Luigi: Ohhh...","Peach: Yeah! I got it!","Peach: Oh, I lost!","Peach: I'm the best!","Peach: Yeah! Peach is the superstar!","Peach cry","Peach: Yeah! Peach is the winner!","Peach cry","Yoshi cry","Yoshi cry","Yoshi cry","DK cry","DK cry","DK cry","DK cry","DK cry","Wario: Hehehehe! I got it!","Wario: Oh, I lost!","Wario: I'm-a the best!","Wario: Yeah, Wario is the superstar!","Wario cry","Wario: Oh yeah! Wario is the winner!","Wario cry","Waluigi: Heheh! I got it!","Waluigi: Oh, I lost!","Waluigi: I'm the best!","Waluigi: Yeah! Waluigi's the superstar!","Waluigi cry","Waluigi: Yeah! Waluigi's the winner!","Waluigi cry","Daisy: Yay! I got it!","Daisy: Oh, I lost!","Daisy: I'm the best!","Daisy: Yeah! Daisy's the superstar!","Daisy cry","Daisy: Yeah! Daisy's the winner!","Toad: Yooo!","Toad: Yahoo!","Toad: Ohhh...","Toad: OK!","Bowser laughs","Bowser roars","Bowser growls","Bowser barks","Baby Bowser barks","","Chain Chomp cry","Tumble: OK!","Tumble: Yay!","Tumble: Hi!","Tumble: Ohhh (Sad)","Tumble: Owowowow","Mario: Good choice!","Luigi: Good choice!","Peach: Good choice!","Wario: Good choice!","Waluigi: Good choice!","Daisy: Good choice!","Mario's taunt","Luigi's taunt","Peach's taunt","Wario's Taunt","Waluigi's Taunt","Daisy's Taunt","","","","","","","","","","","","","","","","","","","","","","","","Crowd noises","Crowd noises","Crowd noises","Crowds cheering","Crowds clapping","","Bird chirping","","Bird chirping","Cow mooing","","","","Waterdrop","Waterdrop","","","","","","","","","","","","","","","","","","","","","","","","","Thwomp cry (Thwomp Pull)","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Warp Pipe sound","Block break (Toadstool Titan)","Blasting off (Toadstool Titan)","","","","","","","","","","","","","","","","Door Opening (Locked Out)","Door Closing (Locked Out)","","","","","","","","","","","Drumroll","Drumroll end","","","","","","","","","Drum hit (The Beat Goes On)","Drum hit (The Beat Goes On)","Drum hit (The Beat Goes On)","Spear Guy cries (The Beat Goes On)","Wrong Answer (M.P.I.Q)","Hit by block (M.P.I.Q)","","","Fanfare (Curtain Call)","Stoplight (when starting racing Mini-Games)","","","","","","","","","","","","Horse cry (Rocking Raceway?)","Horse Steps (Rocking Raceway)","Horse Steps (Rocking Raceway)","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Screw Spinning (Silly Screws)","","Chicken flapping wings (Fowl Play)","Chicken Noises (Fowl Play)","Chicken Noises (Fowl Play)","Chicken Noises (Fowl Play)","Chicken Noises (Fowl Play)","Chicken Noises (Fowl Play)","","","","","","","Arrow bounce off tower (Bobbing Bow-loons)","","Balloon Pop (Bobbing Bow-loons)","Arrow bounce off tower (Bobbinb Bow-loons)","","Dorrie's cry (Dorrie Dip)","","","","","","","","","","","","","","","","","","","","","","","","","","Crowd sounds","",""];function S$(n){return m$}const g$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AsPASwNs2HtQQAAA0RJREFUeNrtm8tPE1EUh7/CxEIopOAjI2o0RoMkxoXEhSaGxJWPf4A/wEWXuDAmxsSVC3csuzMxManRGGNUwEbiK7owSHwgIUIBLUjQUCw19CXj4jKAoaWVzm3nznBWbTOZued3v3vmnHN7PSxZDRhIsCR4ZN6/VNPMwQW75Dwg0IlhimBH86x2viMwbenNQ0HdFMG2VmV+sNp50OkIYHvT8g1eNdvoEtZUd77U5auhoK2e7VKXrua82dadJUDxs607iwAZs217AWTPtm0FKNds206ASjoOkEhUQIDiMNelOfx1AkZHIPoNfv4oswDBrsrMdiIBA/3wrA8GP8LMDMRikFwoswCiKNJziCAP88gIPLgPT3pgLALxX5DJQDYLhlHRGCA/5e5/C48fwtMwjEcgHofFxQoHwRUK5D4nMgIvnwvnvwzD798FymEnWSIB7/qh+9H6zldMgEAnhILy7j88BG9ew8Q4LCwU2RBxkk1NwacPEJtdu+ZtI4AsChIJ8Y6PzYpIX8gcR8DMNHyfzB3xbSeA7FhQjDkyBiglgNUU7NBh5y5oaICqKhcS4PPB7j3Q2ASapogAVlPQ3AyHjwgRClHgyBjQ0grHT8DefVBb60IBfD442gZnzsHBFqiry3+tbXqC5v6hVUXS/gNwsh3m58V321SD5bS2Y9DYCPX1a/sBmYwNBbCaApOE8wEhhtkRevUC0mkXJUI+n1gOFy5C01ZRL9g2CMpMjyejcO+Oi1PhoUFIJhUQQBYFuapDVxEQuqWQAFZT0BeGcK+LCYhGxT6AUgJYRcHYKFy/5uKGSCotMkAlBSiVglQK3g/kb487ngCPR+wO5esQKyHARikwDOjthru3XdYPMC2bFanveu1xZQTYCAWfByHcs/41jiUgHoerl/+t/JQX4H8omBgXBAB4vS4jYG4Obt4Q/wGCle5PLlOuJVZs10irhupq2LZdvArTaUinxG9bvJBJKypAMeb3w6Ur0H4KDrWKJMgwBAleL9R44c+iwgIUQ4HfD6fPFr7X5uaoqgO3qlLcJEDlwVtBwSYBqjtQKgWuJ8ARiVApJ1OXBQgFdQlHZ+0vwvLJbomHp0kunVG2Iz3Lp7rdenz+L41GNnhWZNGsAAAAAElFTkSuQmCC";class _$ extends OE{constructor(){super(...arguments),this.gameVersion=3,this.nintendoLogoFSEntry=[17,1],this.hudsonLogoFSEntry=[17,2],this.boardDefDirectory=19,this.MAINFS_READ_ADDR=39952,this.HEAP_FREE_ADDR=40556,this.TABLE_HYDRATE_ADDR=965216}onLoad(e,t,r){r||(this._extractBanks(e,t),this._extractItemShops(e,t))}onCreateBoardOverlay(e,t,r,i){return p$(e,t,r,i)}onAfterOverwrite(e,t,r,i){e.setUint16(221422,32832),e.setUint16(221430,4194304-this.EVENT_MEM_SIZE>>>16),e.setUint16(221442,26),e.setUint16(300502,26);const a=cn.getDataView(120);a.setUint32(48736,604110849),a.setUint32(48768,604110849);const o=cn.getDataView(128);let s=0,l=0;for(let u=0;u<t.spaces.length;u++){const d=t.spaces[u];d.type===de.BLUE&&s++,d.type===de.RED&&l++}(s<14||l<1)&&(o.setUint32(154164,268435589),wt("Patching for low space count."))}onOverwritePromises(e,t,r){const i=t.bgDir,a=[this._writeBackground(i,e.bg.src,e.bg.width,e.bg.height),this._writeBackground(i+1,e.otherbg.largescene,320,240),this._writeBackground(i+2,e.bg.src,320,240),this._writeAdditionalBackgrounds(e),this.onWriteBoardSelectImg(e,t),this.onWriteBoardLogoImg(e,t),this._onWriteGateImg(e,t),this._brandBootSplashscreen()];return Promise.all(a)}onAfterSave(e){e.setUint32(52928,0),e.setUint32(523352,0),e.setUint32(523360,0)}onWriteEvents(e){}onAddDefaultBoardEvents(e,t){if(e===Wt.BEFORE_DICE_ROLL){const r=zw(e);t.add(r,s0.DIRECT,"__PP64_INTERNAL_CURSE_POISON_DICEROLL_EVENT"),t.add(r,s0.DIRECT,"__PP64_INTERNAL_REVERSAL_DICEROLL_EVENT")}}hydrateSpace(e,t,r){e.type===de.BANK&&Lo(t,e,ri(NA),!1,r)}onChangeBoardSpaceTypesFromGameSpaceTypes(e,t){let r;const i=!e.type||e.type===zn.NORMAL;if(i)r={0:de.OTHER,3:de.OTHER,5:de.CHANCE,6:de.ITEM,7:de.BANK,8:de.OTHER,9:de.BATTLE,12:de.BOWSER,14:de.STAR,15:de.GAMEGUY,16:de.OTHER,17:de.OTHER};else if(e.type===zn.DUEL)r={1:de.OTHER,2:de.HAPPENING,3:de.GAMEGUY,4:de.OTHER,5:de.DUEL_REVERSE,6:de.DUEL_BASIC,7:de.DUEL_START_RED,8:de.MINIGAME,9:de.DUEL_START_BLUE,10:de.DUEL_POWERUP};else throw new Error(`Unrecongized board type: ${e.type}`);if(e.spaces.forEach(a=>{const o=r[a.type];o!==void 0&&(a.type=o)}),i&&t.length){const a=t[0][0];isNaN(a)||(e.spaces[a].type=de.START)}}onChangeGameSpaceTypesFromBoardSpaceTypes(e){const t={[de.OTHER]:0,[de.BLUE]:1,[de.RED]:2,[de.MINIGAME]:0,[de.HAPPENING]:4,[de.STAR]:14,[de.CHANCE]:5,[de.START]:0,[de.SHROOM]:0,[de.BOWSER]:12,[de.ITEM]:6,[de.BATTLE]:9,[de.BANK]:7,[de.ARROW]:13,[de.GAMEGUY]:15,[de.BLACKSTAR]:0,[de.DUEL_BASIC]:0,[de.DUEL_START_BLUE]:0,[de.DUEL_START_RED]:0,[de.DUEL_POWERUP]:0,[de.DUEL_REVERSE]:0};e.spaces.forEach(r=>{const i=t[r.type];i!==void 0&&(r.type=i)})}onCreateChainEvents(e,t){for(let s=0;s<t.length;s++){const l=t[s],u=l[0],d=l[1],h=l[l.length-1],f=l[l.length-2],m=Pa(h,e);let g;if(m.length>1){if(m.length>2)throw new Error("MP3 cannot support more than 2 split directions");const E=[];m.forEach(V=>{E.push(r(V))});const x=[];x.push(m[0]),x.push(m[1]),x.push(65535),x.push(f),x.push(m[1]),x.push(65535),x.push(f),x.push(m[0]),x.push(65535),x.push(0);const v=[];v.push(E[0]),v.push(0),v.push(0),v.push(E[1]),v.push(0),v.push(0),v.push(s),v.push(l.length-2),v.push(1),v.push(E[1]),v.push(0),v.push(0),v.push(s),v.push(l.length-2),v.push(1),v.push(E[0]),v.push(0),v.push(0);const C=o(E);C!=null?g=ri(Mg,{parameterValues:{spaceIndexArgs:x,chainArgs:v,hasgate:!0,prevSpace:t[C][0],altChain:[E.find(V=>V!==C),0]}}):g=ri(Mg,{parameterValues:{spaceIndexArgs:x,chainArgs:v}}),_u(e,h,g,!0,j0())}else m.length>0&&(g=ri(py,{parameterValues:{chain:r(m[0]),prevSpace:f}}),_u(e,h,g,!0,j0()));const _=i(u);if(_.length){const E=[];_.forEach(v=>{E.push(r(v))});const x=[];if(E.forEach(v=>{x.push(t[v])}),_.length>=2){const v=[];v.push(d),v.push(_[0]),v.push(65535),v.push(_[1]),v.push(_[0]),v.push(65535),v.push(_[1]),v.push(d),v.push(65535),v.push(0);const C=[];C.push(s),C.push(1),C.push(0),C.push(E[0]),C.push(x[0].length-1),C.push(1),C.push(E[1]),C.push(x[1].length-1),C.push(1),C.push(E[0]),C.push(x[0].length-1),C.push(1),C.push(E[1]),C.push(x[1].length-1),C.push(1),C.push(s),C.push(1),C.push(0),g=ri(Mg,{parameterValues:{spaceIndexArgs:v,chainArgs:C,reverse:!0},executionType:s0.DIRECT}),_u(e,u,g,!0,j0())}else _.length===1&&(g=ri(py,{parameterValues:{chain:E[0],spaceIndex:x[0].length-1,prevSpace:d}}),_u(e,u,g,!0,j0()))}else{const E=Pa(u,e);E.length>1?wt("FIXME: branching isolated chain?"):E.length>0&&(g=ri(BE,{parameterValues:{chain:s,spaceIndex:1}}),g.activationType=Wt.BEGINORWALKOVER,_u(e,u,g,!0,j0()))}}function r(s){for(let l=0;l<t.length;l++)if(t[l].indexOf(s)>=0)return l}function i(s){const l=[];for(let u=0;u<e.spaces.length;u++)Pa(u,e).indexOf(s)>=0&&l.push(u);return l}function a(s){return s.find(l=>e.spaces[l].subtype===yt.GATE)}function o(s){let l=null;return s.forEach(u=>{typeof a(t[u])=="number"&&(l=u)}),l}}onParseStrings(e,t){const r=t.str||{};if(r.boardSelect){if(!Array.isArray(r.boardSelect))throw new Error("Expected number[][]");const i=r.boardSelect[0],a=L0.read("en",i[0],i[1]),o=a.split(`
`),s=o[0].indexOf(">")+2,l=o[0].indexOf("{",s);e.name=o[0].substring(s,l),e.description=[o[1],o[2]].join(`
`);let u=0,d=a.indexOf(this.getCharacterMap()[59],0);for(;d!==-1;)u++,d=a.indexOf(this.getCharacterMap()[59],d+1);e.difficulty=u}}onWriteStrings(e,t){const r=t.str||{},i=r.boardSelect;if(i&&i.length){let a=[];a.push(11),a.push(5),a.push(15),a=a.concat(Bt._strToBytes(e.name||"")),a.push(22),a.push(25),a.push(15),a=a.concat([32,32,32,32]),a.push(22),a.push(3),a.push(15),a=a.concat(Bt._strToBytes("Difficulty: "));const o=59;if(e.difficulty>5||e.difficulty<1)a.push(o),a=a.concat(Bt._strToBytes(" ")),a.push(62),a=a.concat(Bt._strToBytes(" "+e.difficulty.toString()));else for(let u=0;u<e.difficulty;u++)a.push(o);a.push(22),a.push(25),a.push(10),a=a.concat(Bt._strToBytes(e.description||"")),a.push(0);let s=hi(a),l=i[0];L0.write("en",l[0],l[1],s),a.pop(),a.push(25),a.push(255),a.push(0),s=hi(a),l=i[1],L0.write("en",l[0],l[1],s)}if(r.boardGreeting){let a=[];a.push(11),a=a.concat(Bt._strToBytes("You're all here!")),a.push(10),a=a.concat(this._createBoardGreetingBase(e.name)),a.push(11),a=a.concat(Bt._strToBytes(`Now, before we begin, we need
to determine the turn order.`)),a.push(25),a.push(255),a.push(0);const o=hi(a);L0.write("en",r.boardGreeting[0],r.boardGreeting[1],o)}if(r.boardGreetingDuel){let a=[];a.push(11),a=a.concat(Bt._strToBytes("I've been waiting for you, ")),a.push(17),a.push(194),a.push(10),a=a.concat(this._createBoardGreetingBase(e.name)),a.push(11),a=a.concat(Bt._strToBytes("And just as promised, if you win here...")),a.push(25),a.push(255),a.push(0);const o=hi(a);L0.write("en",r.boardGreetingDuel[0],r.boardGreetingDuel[1],o)}if(r.boardNames&&r.boardNames.length){let a=[];a.push(11),a=a.concat(Bt._strToBytes(e.name)),a.push(0);const o=hi(a);for(let s=0;s<r.boardNames.length;s++){const l=r.boardNames[s];L0.write("en",l[0],l[1],o)}}}_createBoardGreetingBase(e){let t=Bt._strToBytes("Welcome to the legendary ");return t.push(5),t.push(15),t=t.concat(Bt._strToBytes(e)),t.push(22),t.push(25),t.push(194),t.push(25),t.push(255),t.push(11),t=t.concat(Bt._strToBytes(`Here, you'll battle to become
the Superstar.`)),t.push(25),t.push(255),t}onParseBoardSelectImg(e,t){!t.img||!t.img.boardSelectImg||(e.otherbg.boardselect=this._readImgFromMainFS(20,t.img.boardSelectImg,0))}onWriteBoardSelectImg(e,t){return new Promise((r,i)=>{const a=t.img&&t.img.boardSelectImg;if(!a){r();return}const o=Xs(),s=setTimeout(()=>i(`Failed to write board select for ${t.name}`),45e3);o.onload=()=>{const l=Pu(o,64,64),u=dt.get(20,a),h=Pr([{src:l,width:64,height:64,bpp:32}],16,0,u);dt.write(20,a,h),clearTimeout(s),r()},o.src=e.otherbg.boardselect})}onParseBoardLogoImg(e,t){!t.img||!t.img.splashLogoImg||(e.otherbg.boardlogo=this._readImgFromMainFS(19,t.img.splashLogoImg,0),e.otherbg.boardlogotext=this._readImgFromMainFS(19,t.img.splashLogoTextImg,0))}async onWriteBoardLogoImg(e,t){await Promise.all([this._writeBoardLogoLarge(e,t),this._writeBoardLogoTextImg(e,t),this._writeBoardLogoMedium(e,t),this._writeBoardLogoSmall(e,t)])}async _writeBoardLogoLarge(e,t){const r=t.img&&t.img.splashLogoImg;if(!r)return;const i=e.otherbg.boardlogo,[a,o]=[226,110],s=i?(await Va(i,a,o)).data:new ArrayBuffer(a*o*4),l=dt.get(19,r),d=Pr([{src:s,width:a,height:o,bpp:32}],16,0,l);dt.write(19,r,d)}async _writeBoardLogoTextImg(e,t){const r=t.img&&t.img.splashLogoTextImg;if(!r)return;const[i,a]=[226,36],o=e.otherbg.boardlogotext,s=o?(await Va(o,i,a)).data:new ArrayBuffer(i*a*4),l=dt.get(19,r),d=Pr([{src:s,width:i,height:a,bpp:32}],16,0,l);dt.write(19,r,d)}async _writeBoardLogoMedium(e,t){const r=t.img.pauseLogoImg;if(!r)return;const[i,a]=[150,50],o=e.otherbg.boardlogomedium,s=o?(await Va(o,i,a)).data:new ArrayBuffer(i*a*4),l=dt.get(19,r),d=Pr([{src:s,width:i,height:a,bpp:32}],16,0,l);dt.write(19,r,d)}async _writeBoardLogoSmall(e,t){const r=t.img.statsLogoImg;if(!r)return;const[i,a]=[100,46],o=e.otherbg.boardlogosmall,s=o?(await Va(o,i,a)).data:new ArrayBuffer(i*a*4),l=dt.get(r[0],r[1]),d=Pr([{src:s,width:i,height:a,bpp:32}],16,0,l);dt.write(r[0],r[1],d)}async _onWriteGateImg(e,t){const r=t.img&&t.img.gateImg;if(!r)return;const[i,a]=[64,64],o=setTimeout(()=>{throw new Error(`Failed to write gate image for ${t.name}`)},45e3),s=await Va(g$,i,a),l=q4(s.data.buffer,32,8),u=dt.get(19,366),d=Or.unpack(u);Or.replaceBMP(d,0,l[0],l[1]);const h=Or.pack(d);dt.write(19,r,h),clearTimeout(o)}getAudioMap(e){return["Opening","Opening Demo","Title Screen","Select File","Castle Grounds","","Staff Roll","Inside the Castle","Free-Play Room","Star Lift","Preparations","Rules Map","","The Adventure Begins","","The Adventure Ends","Begin Mini-Game","","Here's the Star","Still Going","Mini-Game End 1","Mini-Game End 2","Mini-Game End 3","Commence Attack!","Chilly Waters","Deep Bloober Sea","Spiny Desert","Woody Woods","Creepy Cavern","Waluigi","Good Luck!","The Winner is... Me!","A Winner is ME!","Foolish Bowser","","","Bowser Event","","Bring it On!","","Waluigi Appears!","VS Millennium Star!","Peaceful song, bells","","Defeat...","Aim","Don't Hurry","Panic!","Fighting Spirit","Got It?","Let's Get a Move On","Looking Ahead","Big Trouble!","What To Do!?!","Mustn't Panic","Nice and Easy","On Your Toes","Prologue 1","Prologue 2","Prologue 3","Genie's Theme","Jeanie's Theme","Start Battle","Bang Out a Drum Intro","Bang Out a Drum Fill","Stardust Battle","Chance Time","Game Guy Mini-Game","Item Mini-Game","Mushroom Power-Up!","Game Guy Winner!","Game Guy Loser!","Game Guy Dance","Drum Roll","Sound Config","","Battle Room","Gamble Room","Murmur","Tension Drums","","","","","",""]}getSoundEffectMap(e){return S$()}getCharacterMap(){return{0:"",1:"<BLACK>",2:"<DEFAULT>",3:"<RED>",4:"<PURPLE>",5:"<GREEN>",6:"<BLUE>",7:"<YELLOW>",8:"<WHITE>",9:"<SEIZURE>",10:`
`,11:"\u3014",12:"\u25CB",13:"	",14:"	",17:"{0}",18:"{1}",19:"{2}",20:"{3}",21:"{4}",22:"{5}",32:" ",33:"\u3000",34:"\u3001",35:"\u3002",36:"\u3003",37:"\u3004",38:"\u3005",39:"\u3006",40:"\u3007",41:"\u3008",42:"\u3009",43:"\u3010",44:"\u3011",58:"\u3012",59:"\u3013",60:"+",61:"-",62:"x",63:"->",91:'"',92:"'",93:"(",94:")",95:"/",123:":",126:"&",128:'"',129:"\xB0",130:",",131:"\xB0",133:".",192:"\u201C",193:"\u201D",194:"!",195:"?",255:"\u3015"}}}function UA(n){const e=Tt.getGameVersion();return e?E_(e,n):null}function E_(n,e){switch(n){case 1:return new c$(e);case 2:return new A$(e);case 3:return new _$(e)}return null}let ou;const Hp={};Hp[Qe.MP1_USA]=[{upper:110190,lower:110198}];Hp[Qe.MP1_JPN]=[{upper:109982,lower:109990}];Hp[Qe.MP1_PAL]=[{upper:113202,lower:113206}];Hp[Qe.MP2_USA]=[{upper:119338,lower:119346},{upper:562006,lower:562014},{upper:562026,lower:562034}];class x${constructor(e){this.strs=this._extract(e)}_extract(e){const t=this._getStringCountFromView(e),r=new Array(t);for(let i=0;i<t;i++)r[i]=this._readFromView(e,i);return r}_getStringCountFromView(e){return e.getUint32(0)}_readFromView(e,t){const r=this._getStringOffsetFromView(e,t),a=new DataView(e.buffer,e.byteOffset+r).getUint16(0);return e.buffer.slice(e.byteOffset+r+2,e.byteOffset+r+2+a)}_getStringOffsetFromView(e,t){return e.getUint32(4*(1+t))}read(e,t=!1){if(e>=this.getStringCount())throw new Error("Requesting non-existent string entry");const r=this.strs[e];if(t)return r;const i=new DataView(r);let a="";for(let o=0;o<r.byteLength;o++)a+=this._byteToStr(i.getUint8(o));return a}_byteToStr(e){const t=UA({}).getCharacterMap();return t.hasOwnProperty(e)?t[e]:String.fromCharCode(e)}write(e,t){this.strs[e]=t.slice(0)}getStringCount(){return this.strs.length}getByteLength(e=!1){let t=0;const r=this.strs.length;t+=4,t+=4*r;for(let i=0;i<r;i++)t+=2,t+=this.strs[i].byteLength,t=xn(t,2);return e&&(t+=t/8+16),t}pack(e,t=0){const r=new DataView(e,t),i=this.getStringCount();r.setUint32(0,i);let a=4,o=4+i*4;for(let s=0;s<i;s++)r.setUint32(a,o),a+=4,o=this._packStr(s,r,o),o=xn(o,2);return o}_packStr(e,t,r){const i=this.strs[e];return t.setUint16(r,i.byteLength),fr(t,i,r+2,0,i.byteLength),r+2+i.byteLength}}const Bt={getROMOffset(){const n=Tt.getDataView(),e=Bt.getPatchOffsets();if(!e)return null;const t=e[0];if(!t)return null;const r=n.getUint16(t.upper)<<16,i=n.getUint16(t.lower);let a=r|i;if(i&32768&&(a=a-65536),wt(`Strings.getROMOffset -> ${At(a)}`),G0())for(let o=1;o<e.length;o++){const s=n.getUint16(e[o].upper)<<16,l=n.getUint16(e[o].lower);if(s!==r||l!==i)throw new Error(`Strings.getROMOffset patch offset ${o} seems wrong`)}return a},setROMOffset(n,e){const t=new DataView(e),r=Bt.getPatchOffsets();let i=(n&4294901760)>>>16;const a=n&65535;a&32768&&(i+=1);for(let o=0;o<r.length;o++)t.setUint16(r[o].upper,i),t.setUint16(r[o].lower,a);wt(`Strings.setROMOffset -> ${At(i<<16|a)}`)},getPatchOffsets(){return Hp[Tt.getROMGame()]},StringTable:x$,_strToBytes(n){const e=UA({}).getCharacterMap(),t=[];let r=0;const i=n.length;for(;r<i;){let a=0,o;for(const s in e){if(!e.hasOwnProperty(s))continue;const l=e[s];n.substr(r,l.length)===l&&l.length>a&&(a=l.length,o=s)}a===0&&(a=1,o=n.charCodeAt(r)),typeof o=="string"&&(o=parseInt(o)),t.push(o),r+=a}return t},extract(){const n=Bt.getROMOffset();if(n===null)return;const e=Tt.getDataView(n);return ou=new Bt.StringTable(e)},extractAsync(){return new Promise((n,e)=>{Bt.extract(),n()})},pack(n,e=0){return ou.pack(n,e)},read(n,e=!1){return ou.read(n,e)},write(n,e){ou.write(n,e)},clear(){ou=null},getStringCount(){return ou.getStringCount()},getByteLength(){return ou.getByteLength()}};class UE{apply(e){throw new Error("apply not implemented, is that OK?")}writeHookCode(e){const t=UA({}),r=t&&t.MAINFS_READ_ADDR;if(!r)throw new Error("Cheats were being applied, but the ROM adapter had no MAINFS_READ_ADDR");let i=this.HOOK_ROM_START_OFFSET+4;const a=A_(this.HOOK_RAM_START_OFFSET);e.setUint32(i,t0(`LUI A1 ${32768|a[0]}`)),e.setUint32(i+=4,t0(`ADDIU A1 A1 ${a[1]}`)),e.setUint32(i+=4,t0("LW A1 0(A1)")),e.setUint32(i+=4,t0(`LUI A2 ${this.HOOK_CACHE_DEFAULT_VALUE>>>16}`)),e.setUint32(i+=4,t0(`ADDIU A2 A2 ${this.HOOK_CACHE_DEFAULT_VALUE&65535}`)),e.setUint32(i+=4,t0("BNE A1 A2 11")),e.setUint32(i+=4,t0("ADDU T9 V0 R0")),e.setUint32(i+=4,t0("ADDU S7 RA R0")),e.setUint32(i+=4,t0(`LUI A0 ${this.MAINFS_CHEAT_FILE[0]}`)),e.setUint32(i+=4,t0(`JAL ${r}`)),e.setUint32(i+=4,t0(`ADDIU A0 A0 ${this.MAINFS_CHEAT_FILE[1]}`)),e.setUint32(i+=4,t0(`LUI A1 ${32768|a[0]}`)),e.setUint32(i+=4,t0(`ADDIU A1 A1 ${a[1]}`)),e.setUint32(i+=4,t0("SW V0 0(A1)")),e.setUint32(i+=4,t0("ADDU A1 V0 R0")),e.setUint32(i+=4,t0("ADDU V0 T9 R0")),e.setUint32(i+=4,t0("ADDU RA S7 R0")),e.setUint32(i+=4,t0("JR A1")),e.setUint32(i+=4,0)}}let C_=[];function v$(){C_=[]}function w$(){return C_.reduce(sG)}function jE(n){n=n||{};const e=n.endInsts,t=w$(),r=t.byteLength+(e?e.length*4:0),i=new ArrayBuffer(r),a=new DataView(i);let o=0;if(fr(i,t,o,0,t.byteLength),o+=t.byteLength,e)for(let s=0;s<e.length;s++)a.setUint32(o,e[s]),o+=4;return i}const y$=new class extends UE{constructor(){super(...arguments),this.MAINFS_CHEAT_FILE=[0,137],this.HOOK_ROM_START_OFFSET=832768,this.HOOK_RAM_START_OFFSET=829696,this.HOOK_JUMP_ROM_OFFSET=84596,this.HOOK_CACHE_DEFAULT_VALUE=1986359841}apply(e){const t=new DataView(e);this.applyHook(t),this.writeHookCode(t)}applyHook(e){const t=t0(`J ${this.HOOK_RAM_START_OFFSET+4}`),r=[e.getUint32(this.HOOK_JUMP_ROM_OFFSET),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+4),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+8),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+12)];e.setUint32(this.HOOK_JUMP_ROM_OFFSET,t),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+4,0),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+8,0),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+12,0);const i=jE({endInsts:r});dt.write(this.MAINFS_CHEAT_FILE[0],this.MAINFS_CHEAT_FILE[1],i)}},E$=new class extends UE{constructor(){super(...arguments),this.MAINFS_CHEAT_FILE=[0,140],this.HOOK_ROM_START_OFFSET=863168,this.HOOK_RAM_START_OFFSET=860096,this.HOOK_JUMP_ROM_OFFSET=666680,this.HOOK_CACHE_DEFAULT_VALUE=1180792172}apply(e){const t=new DataView(e);this.applyHook(t),this.writeHookCode(t)}applyHook(e){const t=t0(`J ${this.HOOK_RAM_START_OFFSET+4}`),r=[e.getUint32(this.HOOK_JUMP_ROM_OFFSET),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+4),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+8)];e.setUint32(this.HOOK_JUMP_ROM_OFFSET,t),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+4,0),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+8,0);const i=jE({endInsts:r});dt.write(this.MAINFS_CHEAT_FILE[0],this.MAINFS_CHEAT_FILE[1],i)}},C$=new class extends UE{constructor(){super(...arguments),this.MAINFS_CHEAT_FILE=[0,149],this.HOOK_ROM_START_OFFSET=686128,this.HOOK_RAM_START_OFFSET=683056,this.HOOK_JUMP_ROM_OFFSET=498328,this.HOOK_CACHE_DEFAULT_VALUE=1986359841}apply(e){const t=new DataView(e);this.applyHook(t),this.writeHookCode(t)}applyHook(e){const t=t0(`J ${this.HOOK_RAM_START_OFFSET+4}`),r=[e.getUint32(this.HOOK_JUMP_ROM_OFFSET),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+4),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+8)];e.setUint32(this.HOOK_JUMP_ROM_OFFSET,t),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+4,0),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+8,0);const i=jE({endInsts:r});dt.write(this.MAINFS_CHEAT_FILE[0],this.MAINFS_CHEAT_FILE[1],i)}};function V$(n){const e=C_.length;if(!e)return;switch(Tt.getROMGame()){case Qe.MP1_USA:y$.apply(n);break;case Qe.MP2_USA:E$.apply(n);break;case Qe.MP3_USA:C$.apply(n);break;case Qe.MP1_JPN:default:console.warn("Cannot write cheats for this game");return}wt(`Applied ${e} Gameshark cheats`)}function D$(){switch(Tt.getROMGame()){case Qe.MP1_USA:case Qe.MP2_USA:case Qe.MP3_USA:return!0;case Qe.MP1_JPN:default:return!1}}const A1={6101:6101,6102:6102,6103:6103,6105:6105,6106:6106},OI=new Array(256);(function(){const n=OI,e=3988292384;for(let t=0;t<256;t++){let r=t;for(let i=8;i>0;i--)r&1?r=(r>>>1^e)>>>0:r>>>=1;n[t]=r>>>0}})();function F$(n){function e(x,v){return x<<v|x>>>32-v}const t=b$(n),r=T$(t);let[i,a,o,s,l,u]=[r,r,r,r,r,r];wt(`CIC.fixChecksum -> Bootcode: ${t}, seed: ${At(r)}`);const d=new DataView(n),h=64,f=4096,m=1048576;let g=f;for(;g<f+m;){const x=d.getUint32(g);u+x>>>0<u&&s++,s>>>=0,u+=x,u>>>=0,o^=x,o>>>=0;const v=e(x,x&31)>>>0;l+=v,l>>>=0,a>x?a^=v:a^=(u^x)>>>0,a>>>=0,t===6105?i+=d.getUint32(h+1808+(g&255))^x:i+=(l^x)>>>0,i>>>=0,g+=4}let _,E;t===6103?(_=u^s,_>>>=0,_+=o,_>>>=0,E=l^a,E>>>=0,E+=i,E>>>=0):t===6106?(_=u*s,_>>>=0,_+=o,_>>>=0,E=l*a,E>>>=0,E+=i,E>>>=0):(_=u^s,_>>>=0,_^=o,_>>>=0,E=l^a,E>>>=0,E^=i,E>>>=0),d.setUint32(16,_),d.setUint32(20,E),wt(`CIC.fixChecksum -> CRC1: ${At(_)}, CRC2: ${At(E)}`)}function T$(n){switch(n){case 6101:case 6102:return 4174007772;case 6103:return 2743625561;case 6105:return 3743872054;case 6106:return 535454074}throw new Error(`CIC._getChecksumSeed: Bad bootcode ${n}`)}function b$(n){const r=new Uint8Array(n,64,4032);switch(P$(r)){case 1634772129:return A1[6101];case 2428202165:return A1[6102];case 184880864:return A1[6103];case 2562468998:return A1[6105];case 2898810890:return A1[6106]}return A1[6105]}function P$(n){const e=n.byteLength;let t=4294967295;const r=OI;for(let i=0;i<e;i++)t=(t>>>8^r[(t^n[i])>>>0&255])>>>0;return~t>>>0}const Tt=new class{constructor(){this._rom=null,this._u8array=null,this._gameId=null,this._gameVersion=null}getROMGame(){return this._rom?this._gameId?this._gameId:this._rom.byteLength<64?null:(this._gameId=String.fromCharCode(this._u8array[59],this._u8array[60],this._u8array[61],this._u8array[62]),this._gameId):null}getROMBuffer(){return this._rom}clear(){this._rom=null,this._u8array=null,this._gameId=null,this._gameVersion=null,cn.clearCache(),dt.clearCache(),Bt.clear(),L0.clear(),$n.clearCache(),Rr.clearCache(),Kn.clearCache()}setROMBuffer(e,t,r){if(!e)return this.clear(),Promise.resolve(!1);if(this._rom=e,this._u8array=new Uint8Array(this._rom),this.byteSwapIfNeeded(),!t&&!this.romRecognized())return r("File is not recognized as any valid ROM."),this.clear(),Promise.resolve(!1);if(!this.romSupported())return r("This ROM is not supported right now."),this.clear(),Promise.resolve(!1);v$();const i=this.getGameVersion(),a=[];return a.push(cn.extractAsync()),a.push(dt.extractAsync()),i===3?a.push(L0.extractAsync()):a.push(Bt.extractAsync()),a.push($n.extractAsync()),a.push(Rr.extractAsync()),i===2&&a.push(Kn.extractAsync()),Promise.all(a).then(()=>{const o=cn.getInfo(0);return this._rom=this._rom.slice(0,o.rom_start),!0})}saveROM(e){if(!this._rom)throw new Error("Cannot save ROM, buffer was not present");const t=this.getGameVersion(),r=this._rom.byteLength,i=xn(cn.getByteLength(),16),a=xn(dt.getByteLength(e),16);let o;t===3?o=xn(L0.getByteLength(),16):o=xn(Bt.getByteLength(),16);const s=xn($n.getByteLength(),16),l=xn(Rr.getByteLength(),16);let u=0;for(t===2&&(u=xn(Kn.getByteLength(),16));r+i+a+o&32768;)o+=4096;const d=new ArrayBuffer(r+i+a+o+s+u+l);fr(d,this._rom,0,0,r),V$(d),dt.pack(d,e,r+i),dt.setROMOffset(r+i,d),t===3?(L0.pack(d,r+i+a),L0.setROMOffset(r+i+a,d)):(Bt.pack(d,r+i+a),Bt.setROMOffset(r+i+a,d)),$n.pack(d,r+i+a+o),$n.setROMOffset(r+a+i+o,d),t===2&&(Kn.pack(d,r+i+a+o+s),Kn.setROMOffset(r+i+a+o+s,d)),Rr.pack(d,r+i+a+o+s+u),Rr.setROMOffset(r+i+a+o+s+u,d),cn.pack(d,r);const h=UA({});return h.onAfterSave&&h.onAfterSave(new DataView(d)),F$(d),this._rom=d.slice(0,r),this._u8array=new Uint8Array(this._rom),d}romIsLoaded(){return!!this._rom}getDataView(e=0,t=0){if(!this._rom)throw new Error("ROM not loaded, cannot get DataView.");return t?new DataView(this._rom,e,t-e):new DataView(this._rom,e)}getGameVersion(){if(this._gameVersion!==null)return this._gameVersion;const e=this.getROMGame();if(!e)return null;switch(e){case Qe.MP1_USA:case Qe.MP1_JPN:case Qe.MP1_PAL:return this._gameVersion=1,1;case Qe.MP2_USA:case Qe.MP2_JPN:return this._gameVersion=2,2;case Qe.MP3_USA:case Qe.MP3_JPN:return this._gameVersion=3,3}return null}romRecognized(){return this.getGameVersion()!==null}romSupported(){let e=!1;switch(this.getROMGame()){case Qe.MP1_USA:case Qe.MP2_USA:case Qe.MP3_USA:e=!0}return e}byteSwapIfNeeded(){if(!this._rom||this._rom.byteLength<4||!this._u8array)return;const e=this.getDataView(),t=e.getUint32(0);if(t===2151092800)return;wt("Byteswapping ROM...");const r=this._rom.byteLength-this._rom.byteLength%2,i=this._rom.byteLength-this._rom.byteLength%4;if(t===931151890)for(let a=0;a<r;a+=2)[this._u8array[a],this._u8array[a+1]]=[this._u8array[a+1],this._u8array[a]];else if(t===1074935680)for(let a=0;a<i;a+=4)[this._u8array[a],this._u8array[a+1],this._u8array[a+2],this._u8array[a+3]]=[this._u8array[a+3],this._u8array[a+2],this._u8array[a+1],this._u8array[a]];else if(t===306217015)for(let a=0;a<i;a+=4){const o=e.getUint16(a+2);e.setUint16(a+2,e.getUint16(a)),e.setUint16(a,o)}}},a0={readDiscreteProperty:function(n,e){const r=new RegExp("^\\s*[;\\/]+\\s*"+e+":(.+)$","gim").exec(n);return r?r[1]:null},readDiscretePropertySet:function(n,e){const t=new RegExp("^\\s*[;\\/]+\\s*"+e+":(.+)$","gim");let r=null;const i=[];do r=t.exec(n),r&&i.push(r[1].trim());while(r);return i},clearDiscreteProperties(n,e){return e.forEach(t=>{const r=new RegExp("^\\s*[;\\/]+\\s*"+t+`:.*[\r
]*`,"gim");n=n.replace(r,"")}),n},writeDiscreteProperty(n,e,t,r){return`${r} ${e}: ${t}
`+n},writeDiscretePropertyArray(n,e,t,r){for(let i=t.length-1;i>=0;i--)n=`${r} ${e}: ${t[i]}
`+n;return n},readSupportedGames:function(n){const e=a0.readDiscreteProperty(n,"GAMES");if(e!==null){const t=e.trim().split(","),r=[];for(let i=0;i<t.length;i++){const a=t[i];Qe[a]&&r.push(Qe[a])}return r}return null},readExecutionType:function(n){const e=a0.readDiscreteProperty(n,"EXECUTION");if(e)return Kj(e.trim())},readParameters:function(n){const e=a0.readDiscretePropertySet(n,"PARAM"),t=[];return e.forEach(r=>{const i=r.split("|");if(i.length!==2)return;const a={name:i[1],type:i[0]};try{a0.validateParameters([a]),t.push(a)}catch{}}),t},validParameterNameRegex:/^[\w?!]*$/,validateParameters:function(n){!n||n.forEach(e=>{if(!e.name)throw new Error("An event parameter didn't have a name");if(!e.type)throw new Error("An event parameter didn't have a type");if(!e.name.match(a0.validParameterNameRegex))throw new Error(`Event parameter name '${e.name}' is not valid`);if(Yj.indexOf(e.type)===-1)throw new Error(`Event parameter type ${e.type} is not recognized`)})},testCustomEvent:async function(n,e,t,r={}){switch(n){case En.MIPS:return a0.testAssemble(e,t,r);case En.C:return a0.testCompile(e,t,r);default:throw new Error(`Unrecognized event code language: ${n}`)}},testAssemble:function(n,e,t={}){const r=xb(e),i=oo(En.MIPS,n),a=y3(n,i,{parameterValues:r},Object.assign({addr:0,audioIndices:Gd(1,50),boardInfo:Tg,board:{additionalbg:Gd("",50)},testCompile:!0},t));return rl(a)},testCompile:async function(n,e,t={}){const r=xb(e),i=oo(En.C,n),a=p6(n,i,{parameterValues:r},{testCompile:!0,audioIndices:Gd(1,50),boardInfo:Tg,board:{additionalbg:Gd("",50)},...t});wt(a);const o=await bA(a);wt(o);const s=y3(o,i,{},Object.assign({addr:0,audioIndices:Gd(1,50),boardInfo:Tg,board:{additionalbg:Gd("",50)}},t));return rl(s),o}};function xb(n){const e={};return n&&n.length&&n.forEach(t=>{e[t.name]=0}),e}function oo(n,e){let t=a0.readDiscreteProperty(e,"NAME");if(!t||!t.trim())throw new Error("Custom event must have a name");t=t.trim();const r=t,i=a0.readExecutionType(e);if(!i)throw new Error("Custom event must have execution type");const a=a0.readSupportedGames(e);if(!a)throw new Error("Custom event must have supported games list");const o=a0.readParameters(e);return{id:r,name:t,custom:!0,language:n,asm:e,activationType:Wt.LANDON,executionType:i,supportedGames:a,parameters:o}}async function GE(n){const{language:e,parameters:t,supportedGames:r}=n;t&&a0.validateParameters(t);const i=n.asm;for(let a=0;a<r.length;a++){const o=r[a];try{await a0.testCustomEvent(e,i,t,{game:o})}catch(s){const l="Failed a test compile/assembly for "+ku(o)+`. The event code may need adjustments before it can be used.

`+s;throw console.error(l+`

`+i),console.error(s),new Error(l)}}return!0}async function R$(n,e,t,r,i,a){wt("Writing custom event",e,t);const o=oo(r,i);if(r===En.C){const s=p6(i,o,e,t);i=await bA(s)}return i}function L$(n,e){for(let t=0;t<n.length;t++)switch(n[t]){case Qe.MP1_USA:case Qe.MP1_JPN:case Qe.MP1_PAL:if(e===1)return!0;break;case Qe.MP2_USA:case Qe.MP2_JPN:case Qe.MP2_PAL:if(e===2)return!0;break;case Qe.MP3_USA:case Qe.MP3_JPN:case Qe.MP3_PAL:if(e===3)return!0;break}return!1}function jo(n,e,t){if(e&&e.events&&!!gs(e,n)){const r=gs(e,n);return oo(r.language,r.code)}return t[n]}function ri(n,e){const t=Object.assign({id:n.id,activationType:n.activationType,executionType:n.executionType},e);return n.custom&&(t.custom=!0),t}function B$(n,e){const t=Tt.getROMGame(),r=j0();for(const i in r){const a=r[i];if(!a.parse||a.supportedGames.indexOf(t)===-1)continue;const o=a.parse(n,e);if(o){if(a.fakeEvent)return!0;const s={id:i};return o!==!0&&(s.args=o),s}}return!1}function M$(){const n=[],e=j0(),t=Vn().game||1;for(const r in e){const i=e[r];L$(i.supportedGames,t)&&!i.fakeEvent&&n.push(i)}return n}function I$(){const n=[],e=j0();for(const t in e){const r=e[t];r.custom&&n.push(Sc(r))}return n}async function vb(n,e,t,r){const i=new DataView(n,t.offset);let a;if(e.custom){const o=gs(t.board,e.id);if(!o)throw new Error(`A space had the ${e.id} custom event, but its code wasn't in the board file`);a=await R$(i,e,t,o.language,o.code)}else{const o=jp(e.id);if(!o)throw new Error(`Could not find/write ${e.id} for game ${t.gameVersion}`);a=o.write(i,e,t,r)}if(a===!1)throw new Error(`Could not write ${e.id} for game ${t.gameVersion}`);return a}function O$(n,e){return n.supportedGames.indexOf(e)===-1}function Po(n){for(var e=arguments.length,t=Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+n+(t.length?" "+t.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function vc(n){return!!n&&!!n[$0]}function il(n){return!!n&&(function(e){if(!e||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===X$}(n)||Array.isArray(n)||!!n[Fb]||!!n.constructor[Fb]||HE(n)||zE(n))}function Gu(n,e,t){t===void 0&&(t=!1),jA(n)===0?(t?Object.keys:q1)(n).forEach(function(r){t&&typeof r=="symbol"||e(r,n[r],n)}):n.forEach(function(r,i){return e(i,r,n)})}function jA(n){var e=n[$0];return e?e.i>3?e.i-4:e.i:Array.isArray(n)?1:HE(n)?2:zE(n)?3:0}function Y1(n,e){return jA(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function k$(n,e){return jA(n)===2?n.get(e):n[e]}function kI(n,e,t){var r=jA(n);r===2?n.set(e,t):r===3?(n.delete(e),n.add(t)):n[e]=t}function NI(n,e){return n===e?n!==0||1/n==1/e:n!=n&&e!=e}function HE(n){return z$&&n instanceof Map}function zE(n){return W$&&n instanceof Set}function hu(n){return n.o||n.t}function WE(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var e=jI(n);delete e[$0];for(var t=q1(e),r=0;r<t.length;r++){var i=t[r],a=e[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(e[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),e)}function XE(n,e){return e===void 0&&(e=!1),KE(n)||vc(n)||!il(n)||(jA(n)>1&&(n.set=n.add=n.clear=n.delete=N$),Object.freeze(n),e&&Gu(n,function(t,r){return XE(r,!0)},!0)),n}function N$(){Po(2)}function KE(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function fs(n){var e=_y[n];return e||Po(18,n),e}function U$(n,e){_y[n]||(_y[n]=e)}function my(){return ep}function _v(n,e){e&&(fs("Patches"),n.u=[],n.s=[],n.v=e)}function p8(n){Sy(n),n.p.forEach(j$),n.p=null}function Sy(n){n===ep&&(ep=n.l)}function wb(n){return ep={p:[],l:ep,h:n,m:!0,_:0}}function j$(n){var e=n[$0];e.i===0||e.i===1?e.j():e.O=!0}function xv(n,e){e._=e.p.length;var t=e.p[0],r=n!==void 0&&n!==t;return e.h.g||fs("ES5").S(e,n,r),r?(t[$0].P&&(p8(e),Po(4)),il(n)&&(n=m8(e,n),e.l||S8(e,n)),e.u&&fs("Patches").M(t[$0].t,n,e.u,e.s)):n=m8(e,t,[]),p8(e),e.u&&e.v(e.u,e.s),n!==UI?n:void 0}function m8(n,e,t){if(KE(e))return e;var r=e[$0];if(!r)return Gu(e,function(a,o){return yb(n,r,e,a,o,t)},!0),e;if(r.A!==n)return e;if(!r.P)return S8(n,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=WE(r.k):r.o;Gu(r.i===3?new Set(i):i,function(a,o){return yb(n,r,i,a,o,t)}),S8(n,i,!1),t&&n.u&&fs("Patches").R(r,t,n.u,n.s)}return r.o}function yb(n,e,t,r,i,a){if(vc(i)){var o=m8(n,i,a&&e&&e.i!==3&&!Y1(e.D,r)?a.concat(r):void 0);if(kI(t,r,o),!vc(o))return;n.m=!1}if(il(i)&&!KE(i)){if(!n.h.F&&n._<1)return;m8(n,i),e&&e.A.l||S8(n,i)}}function S8(n,e,t){t===void 0&&(t=!1),n.h.F&&n.m&&XE(e,t)}function vv(n,e){var t=n[$0];return(t?hu(t):n)[e]}function Eb(n,e){if(e in n)for(var t=Object.getPrototypeOf(n);t;){var r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Object.getPrototypeOf(t)}}function Yl(n){n.P||(n.P=!0,n.l&&Yl(n.l))}function wv(n){n.o||(n.o=WE(n.t))}function gy(n,e,t){var r=HE(e)?fs("MapSet").N(e,t):zE(e)?fs("MapSet").T(e,t):n.g?function(i,a){var o=Array.isArray(i),s={i:o?1:0,A:a?a.A:my(),P:!1,I:!1,D:{},l:a,t:i,k:null,o:null,j:null,C:!1},l=s,u=tp;o&&(l=[s],u=ch);var d=Proxy.revocable(l,u),h=d.revoke,f=d.proxy;return s.k=f,s.j=h,f}(e,t):fs("ES5").J(e,t);return(t?t.A:my()).p.push(r),r}function G$(n){return vc(n)||Po(22,n),function e(t){if(!il(t))return t;var r,i=t[$0],a=jA(t);if(i){if(!i.P&&(i.i<4||!fs("ES5").K(i)))return i.t;i.I=!0,r=Cb(t,a),i.I=!1}else r=Cb(t,a);return Gu(r,function(o,s){i&&k$(i.t,o)===s||kI(r,o,e(s))}),a===3?new Set(r):r}(n)}function Cb(n,e){switch(e){case 2:return new Map(n);case 3:return Array.from(n)}return WE(n)}function H$(){function n(a,o){var s=i[a];return s?s.enumerable=o:i[a]=s={configurable:!0,enumerable:o,get:function(){var l=this[$0];return tp.get(l,a)},set:function(l){var u=this[$0];tp.set(u,a,l)}},s}function e(a){for(var o=a.length-1;o>=0;o--){var s=a[o][$0];if(!s.P)switch(s.i){case 5:r(s)&&Yl(s);break;case 4:t(s)&&Yl(s)}}}function t(a){for(var o=a.t,s=a.k,l=q1(s),u=l.length-1;u>=0;u--){var d=l[u];if(d!==$0){var h=o[d];if(h===void 0&&!Y1(o,d))return!0;var f=s[d],m=f&&f[$0];if(m?m.t!==h:!NI(f,h))return!0}}var g=!!o[$0];return l.length!==q1(o).length+(g?0:1)}function r(a){var o=a.k;if(o.length!==a.t.length)return!0;var s=Object.getOwnPropertyDescriptor(o,o.length-1);if(s&&!s.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};U$("ES5",{J:function(a,o){var s=Array.isArray(a),l=function(d,h){if(d){for(var f=Array(h.length),m=0;m<h.length;m++)Object.defineProperty(f,""+m,n(m,!0));return f}var g=jI(h);delete g[$0];for(var _=q1(g),E=0;E<_.length;E++){var x=_[E];g[x]=n(x,d||!!g[x].enumerable)}return Object.create(Object.getPrototypeOf(h),g)}(s,a),u={i:s?5:4,A:o?o.A:my(),P:!1,I:!1,D:{},l:o,t:a,k:l,o:null,O:!1,C:!1};return Object.defineProperty(l,$0,{value:u,writable:!0}),l},S:function(a,o,s){s?vc(o)&&o[$0].A===a&&e(a.p):(a.u&&function l(u){if(u&&typeof u=="object"){var d=u[$0];if(d){var h=d.t,f=d.k,m=d.D,g=d.i;if(g===4)Gu(f,function(C){C!==$0&&(h[C]!==void 0||Y1(h,C)?m[C]||l(f[C]):(m[C]=!0,Yl(d)))}),Gu(h,function(C){f[C]!==void 0||Y1(f,C)||(m[C]=!1,Yl(d))});else if(g===5){if(r(d)&&(Yl(d),m.length=!0),f.length<h.length)for(var _=f.length;_<h.length;_++)m[_]=!1;else for(var E=h.length;E<f.length;E++)m[E]=!0;for(var x=Math.min(f.length,h.length),v=0;v<x;v++)f.hasOwnProperty(v)||(m[v]=!0),m[v]===void 0&&l(f[v])}}}}(a.p[0]),e(a.p))},K:function(a){return a.i===4?t(a):r(a)}})}var Vb,ep,YE=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",z$=typeof Map<"u",W$=typeof Set<"u",Db=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",UI=YE?Symbol.for("immer-nothing"):((Vb={})["immer-nothing"]=!0,Vb),Fb=YE?Symbol.for("immer-draftable"):"__$immer_draftable",$0=YE?Symbol.for("immer-state"):"__$immer_state",X$=""+Object.prototype.constructor,q1=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,jI=Object.getOwnPropertyDescriptors||function(n){var e={};return q1(n).forEach(function(t){e[t]=Object.getOwnPropertyDescriptor(n,t)}),e},_y={},tp={get:function(n,e){if(e===$0)return n;var t=hu(n);if(!Y1(t,e))return function(i,a,o){var s,l=Eb(a,o);return l?"value"in l?l.value:(s=l.get)===null||s===void 0?void 0:s.call(i.k):void 0}(n,t,e);var r=t[e];return n.I||!il(r)?r:r===vv(n.t,e)?(wv(n),n.o[e]=gy(n.A.h,r,n)):r},has:function(n,e){return e in hu(n)},ownKeys:function(n){return Reflect.ownKeys(hu(n))},set:function(n,e,t){var r=Eb(hu(n),e);if(r!=null&&r.set)return r.set.call(n.k,t),!0;if(!n.P){var i=vv(hu(n),e),a=i==null?void 0:i[$0];if(a&&a.t===t)return n.o[e]=t,n.D[e]=!1,!0;if(NI(t,i)&&(t!==void 0||Y1(n.t,e)))return!0;wv(n),Yl(n)}return n.o[e]===t&&typeof t!="number"&&(t!==void 0||e in n.o)||(n.o[e]=t,n.D[e]=!0,!0)},deleteProperty:function(n,e){return vv(n.t,e)!==void 0||e in n.t?(n.D[e]=!1,wv(n),Yl(n)):delete n.D[e],n.o&&delete n.o[e],!0},getOwnPropertyDescriptor:function(n,e){var t=hu(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.i!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty:function(){Po(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){Po(12)}},ch={};Gu(tp,function(n,e){ch[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),ch.deleteProperty=function(n,e){return ch.set.call(this,n,e,void 0)},ch.set=function(n,e,t){return tp.set.call(this,n[0],e,t,n[0])};var K$=function(){function n(t){var r=this;this.g=Db,this.F=!0,this.produce=function(i,a,o){if(typeof i=="function"&&typeof a!="function"){var s=a;a=i;var l=r;return function(_){var E=this;_===void 0&&(_=s);for(var x=arguments.length,v=Array(x>1?x-1:0),C=1;C<x;C++)v[C-1]=arguments[C];return l.produce(_,function(V){var D;return(D=a).call.apply(D,[E,V].concat(v))})}}var u;if(typeof a!="function"&&Po(6),o!==void 0&&typeof o!="function"&&Po(7),il(i)){var d=wb(r),h=gy(r,i,void 0),f=!0;try{u=a(h),f=!1}finally{f?p8(d):Sy(d)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(_){return _v(d,o),xv(_,d)},function(_){throw p8(d),_}):(_v(d,o),xv(u,d))}if(!i||typeof i!="object"){if((u=a(i))===void 0&&(u=i),u===UI&&(u=void 0),r.F&&XE(u,!0),o){var m=[],g=[];fs("Patches").M(i,u,m,g),o(m,g)}return u}Po(21,i)},this.produceWithPatches=function(i,a){if(typeof i=="function")return function(u){for(var d=arguments.length,h=Array(d>1?d-1:0),f=1;f<d;f++)h[f-1]=arguments[f];return r.produceWithPatches(u,function(m){return i.apply(void 0,[m].concat(h))})};var o,s,l=r.produce(i,a,function(u,d){o=u,s=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,s]}):[l,o,s]},typeof(t==null?void 0:t.useProxies)=="boolean"&&this.setUseProxies(t.useProxies),typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=n.prototype;return e.createDraft=function(t){il(t)||Po(8),vc(t)&&(t=G$(t));var r=wb(this),i=gy(this,t,void 0);return i[$0].C=!0,Sy(r),i},e.finishDraft=function(t,r){var i=t&&t[$0],a=i.A;return _v(a,r),xv(void 0,a)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!Db&&Po(20),this.g=t},e.applyPatches=function(t,r){var i;for(i=r.length-1;i>=0;i--){var a=r[i];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}i>-1&&(r=r.slice(i+1));var o=fs("Patches").$;return vc(t)?o(t,r):this.produce(t,function(s){return o(s,r)})},n}(),Ba=new K$,GI=Ba.produce;Ba.produceWithPatches.bind(Ba);Ba.setAutoFreeze.bind(Ba);Ba.setUseProxies.bind(Ba);Ba.applyPatches.bind(Ba);Ba.createDraft.bind(Ba);Ba.finishDraft.bind(Ba);function Y$(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Tb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tb(Object(t),!0).forEach(function(r){Y$(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Tb(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Li(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var Pb=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),yv=function(){return Math.random().toString(36).substring(7).split("").join(".")},g8={INIT:"@@redux/INIT"+yv(),REPLACE:"@@redux/REPLACE"+yv(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+yv()}};function q$(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function HI(n,e,t){var r;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Li(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Li(1));return t(HI)(n,e)}if(typeof n!="function")throw new Error(Li(2));var i=n,a=e,o=[],s=o,l=!1;function u(){s===o&&(s=o.slice())}function d(){if(l)throw new Error(Li(3));return a}function h(_){if(typeof _!="function")throw new Error(Li(4));if(l)throw new Error(Li(5));var E=!0;return u(),s.push(_),function(){if(!!E){if(l)throw new Error(Li(6));E=!1,u();var v=s.indexOf(_);s.splice(v,1),o=null}}}function f(_){if(!q$(_))throw new Error(Li(7));if(typeof _.type>"u")throw new Error(Li(8));if(l)throw new Error(Li(9));try{l=!0,a=i(a,_)}finally{l=!1}for(var E=o=s,x=0;x<E.length;x++){var v=E[x];v()}return _}function m(_){if(typeof _!="function")throw new Error(Li(10));i=_,f({type:g8.REPLACE})}function g(){var _,E=h;return _={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Li(11));function C(){v.next&&v.next(d())}C();var V=E(C);return{unsubscribe:V}}},_[Pb]=function(){return this},_}return f({type:g8.INIT}),r={dispatch:f,subscribe:h,getState:d,replaceReducer:m},r[Pb]=g,r}function Q$(n){Object.keys(n).forEach(function(e){var t=n[e],r=t(void 0,{type:g8.INIT});if(typeof r>"u")throw new Error(Li(12));if(typeof t(void 0,{type:g8.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Li(13))})}function J$(n){for(var e=Object.keys(n),t={},r=0;r<e.length;r++){var i=e[r];typeof n[i]=="function"&&(t[i]=n[i])}var a=Object.keys(t),o;try{Q$(t)}catch(s){o=s}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},f=0;f<a.length;f++){var m=a[f],g=t[m],_=l[m],E=g(_,u);if(typeof E>"u")throw u&&u.type,new Error(Li(14));h[m]=E,d=d||E!==_}return d=d||a.length!==Object.keys(l).length,d?h:l}}function _8(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Z$(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){return function(){var i=r.apply(void 0,arguments),a=function(){throw new Error(Li(15))},o={getState:i.getState,dispatch:function(){return a.apply(void 0,arguments)}},s=e.map(function(l){return l(o)});return a=_8.apply(void 0,s)(i.dispatch),bb(bb({},i),{},{dispatch:a})}}}function zI(n){var e=function(r){var i=r.dispatch,a=r.getState;return function(o){return function(s){return typeof s=="function"?s(i,a,n):o(s)}}};return e}var WI=zI();WI.withExtraArgument=zI;const Rb=WI;var $$=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();globalThis&&globalThis.__generator;var x8=globalThis&&globalThis.__spreadArray||function(n,e){for(var t=0,r=e.length,i=n.length;t<r;t++,i++)n[i]=e[t];return n},eee=Object.defineProperty,Lb=Object.getOwnPropertySymbols,tee=Object.prototype.hasOwnProperty,nee=Object.prototype.propertyIsEnumerable,Bb=function(n,e,t){return e in n?eee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t},np=function(n,e){for(var t in e||(e={}))tee.call(e,t)&&Bb(n,t,e[t]);if(Lb)for(var r=0,i=Lb(e);r<i.length;r++){var t=i[r];nee.call(e,t)&&Bb(n,t,e[t])}return n},ree=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_8:_8.apply(null,arguments)};function iee(n){if(typeof n!="object"||n===null)return!1;var e=Object.getPrototypeOf(n);if(e===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return e===t}var aee=function(n){$$(e,n);function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=n.apply(this,t)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n.prototype.concat.apply(this,t)},e.prototype.prepend=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.length===1&&Array.isArray(t[0])?new(e.bind.apply(e,x8([void 0],t[0].concat(this)))):new(e.bind.apply(e,x8([void 0],t.concat(this))))},e}(Array);function xy(n){return il(n)?GI(n,function(){}):n}function oee(n){return typeof n=="boolean"}function see(){return function(e){return lee(e)}}function lee(n){n===void 0&&(n={});var e=n.thunk,t=e===void 0?!0:e;n.immutableCheck,n.serializableCheck;var r=new aee;return t&&(oee(t)?r.push(Rb):r.push(Rb.withExtraArgument(t.extraArgument))),r}var cee=!0;function uee(n){var e=see(),t=n||{},r=t.reducer,i=r===void 0?void 0:r,a=t.middleware,o=a===void 0?e():a,s=t.devTools,l=s===void 0?!0:s,u=t.preloadedState,d=u===void 0?void 0:u,h=t.enhancers,f=h===void 0?void 0:h,m;if(typeof i=="function")m=i;else if(iee(i))m=J$(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=o;typeof g=="function"&&(g=g(e));var _=Z$.apply(void 0,g),E=_8;l&&(E=ree(np({trace:!cee},typeof l=="object"&&l)));var x=[_];Array.isArray(f)?x=x8([_],f):typeof f=="function"&&(x=f(x));var v=E.apply(void 0,x);return HI(m,d,v)}function rp(n,e){function t(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var a=e.apply(void 0,r);if(!a)throw new Error("prepareAction did not return an object");return np(np({type:n,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:n,payload:r[0]}}return t.toString=function(){return""+n},t.type=n,t.match=function(r){return r.type===n},t}function XI(n){var e={},t=[],r,i={addCase:function(a,o){var s=typeof a=="string"?a:a.type;if(s in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[s]=o,i},addMatcher:function(a,o){return t.push({matcher:a,reducer:o}),i},addDefaultCase:function(a){return r=a,i}};return n(i),[e,t,r]}function dee(n){return typeof n=="function"}function Aee(n,e,t,r){t===void 0&&(t=[]);var i=typeof e=="function"?XI(e):[e,t,r],a=i[0],o=i[1],s=i[2],l;if(dee(n))l=function(){return xy(n())};else{var u=xy(n);l=function(){return u}}function d(h,f){h===void 0&&(h=l());var m=x8([a[f.type]],o.filter(function(g){var _=g.matcher;return _(f)}).map(function(g){var _=g.reducer;return _}));return m.filter(function(g){return!!g}).length===0&&(m=[s]),m.reduce(function(g,_){if(_)if(vc(g)){var E=g,x=_(E,f);return typeof x>"u"?g:x}else{if(il(g))return GI(g,function(v){return _(v,f)});var x=_(g,f);if(typeof x>"u"){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return g},h)}return d.getInitialState=l,d}function fee(n,e){return n+"/"+e}function qE(n){var e=n.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var t=typeof n.initialState=="function"?n.initialState:xy(n.initialState),r=n.reducers||{},i=Object.keys(r),a={},o={},s={};i.forEach(function(d){var h=r[d],f=fee(e,d),m,g;"reducer"in h?(m=h.reducer,g=h.prepare):m=h,a[d]=m,o[f]=m,s[d]=g?rp(f,g):rp(f)});function l(){var d=typeof n.extraReducers=="function"?XI(n.extraReducers):[n.extraReducers],h=d[0],f=h===void 0?{}:h,m=d[1],g=m===void 0?[]:m,_=d[2],E=_===void 0?void 0:_,x=np(np({},f),o);return Aee(t,x,g,E)}var u;return{name:e,reducer:function(d,h){return u||(u=l()),u(d,h)},actions:s,caseReducers:a,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var QE="listenerMiddleware";rp(QE+"/add");rp(QE+"/removeAll");rp(QE+"/remove");H$();var Hu={},zu={};Object.defineProperty(zu,"__esModule",{value:!0});zu.ActionCreators=zu.ActionTypes=void 0;var pu={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};zu.ActionTypes=pu;var hee={undo:function(){return{type:pu.UNDO}},redo:function(){return{type:pu.REDO}},jumpToFuture:function(e){return{type:pu.JUMP_TO_FUTURE,index:e}},jumpToPast:function(e){return{type:pu.JUMP_TO_PAST,index:e}},jump:function(e){return{type:pu.JUMP,index:e}},clearHistory:function(){return{type:pu.CLEAR_HISTORY}}};zu.ActionCreators=hee;var vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.parseActions=V_;vs.isHistory=pee;vs.includeAction=mee;vs.excludeAction=See;vs.combineFilters=gee;vs.groupByActionTypes=_ee;vs.newHistory=xee;function V_(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Array.isArray(n)?n:typeof n=="string"?[n]:e}function pee(n){return typeof n.present<"u"&&typeof n.future<"u"&&typeof n.past<"u"&&Array.isArray(n.future)&&Array.isArray(n.past)}function mee(n){var e=V_(n);return function(t){return e.indexOf(t.type)>=0}}function See(n){var e=V_(n);return function(t){return e.indexOf(t.type)<0}}function gee(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.reduce(function(r,i){return function(a,o,s){return r(a,o,s)&&i(a,o,s)}},function(){return!0})}function _ee(n){var e=V_(n);return function(t){return e.indexOf(t.type)>=0?t.type:null}}function xee(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{past:n,present:e,future:t,group:r,_latestUnfiltered:e,index:n.length,limit:n.length+t.length+1}}var KI={},GA={};Object.defineProperty(GA,"__esModule",{value:!0});GA.set=Tee;GA.start=Vee;GA.end=Dee;GA.log=Fee;function Jo(n){return yee(n)||wee(n)||vee()}function vee(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function wee(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}function yee(n){if(Array.isArray(n)){for(var e=0,t=new Array(n.length);e<n.length;e++)t[e]=n[e];return t}}var D_,Ja,vy={prevState:"#9E9E9E",action:"#03A9F4",nextState:"#4CAF50"};function Eee(){Ja={header:[],prev:[],action:[],next:[],msgs:[]}}function Cee(){var n=Ja,e=n.header,t=n.prev,r=n.next,i=n.action,a=n.msgs;if(console.group){var o,s,l,u,d;(o=console).groupCollapsed.apply(o,Jo(e)),(s=console).log.apply(s,Jo(t)),(l=console).log.apply(l,Jo(i)),(u=console).log.apply(u,Jo(r)),(d=console).log.apply(d,Jo(a)),console.groupEnd()}else{var h,f,m,g,_;(h=console).log.apply(h,Jo(e)),(f=console).log.apply(f,Jo(t)),(m=console).log.apply(m,Jo(i)),(g=console).log.apply(g,Jo(r)),(_=console).log.apply(_,Jo(a))}}function wy(n,e,t){return["%c".concat(n),"color: ".concat(e,"; font-weight: bold"),t]}function Vee(n,e){Eee(),D_&&(console.group?(Ja.header=["%credux-undo","font-style: italic","action",n.type],Ja.action=wy("action",vy.action,n),Ja.prev=wy("prev history",vy.prevState,e)):(Ja.header=["redux-undo action",n.type],Ja.action=["action",n],Ja.prev=["prev history",e]))}function Dee(n){D_&&(console.group?Ja.next=wy("next history",vy.nextState,n):Ja.next=["next history",n],Cee())}function Fee(){if(D_){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];Ja.msgs=Ja.msgs.concat([].concat(e,[`
`]))}}function Tee(n){D_=n}(function(n){function e(D){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(R){return typeof R}:e=function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},e(D)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=V;var t=o(GA),r=zu,i=vs;function a(){if(typeof WeakMap!="function")return null;var D=new WeakMap;return a=function(){return D},D}function o(D){if(D&&D.__esModule)return D;if(D===null||e(D)!=="object"&&typeof D!="function")return{default:D};var H=a();if(H&&H.has(D))return H.get(D);var R={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in D)if(Object.prototype.hasOwnProperty.call(D,te)){var $=j?Object.getOwnPropertyDescriptor(D,te):null;$&&($.get||$.set)?Object.defineProperty(R,te,$):R[te]=D[te]}return R.default=D,H&&H.set(D,R),R}function s(D,H){var R=Object.keys(D);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(D);H&&(j=j.filter(function(te){return Object.getOwnPropertyDescriptor(D,te).enumerable})),R.push.apply(R,j)}return R}function l(D){for(var H=1;H<arguments.length;H++){var R=arguments[H]!=null?arguments[H]:{};H%2?s(Object(R),!0).forEach(function(j){u(D,j,R[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(R)):s(Object(R)).forEach(function(j){Object.defineProperty(D,j,Object.getOwnPropertyDescriptor(R,j))})}return D}function u(D,H,R){return H in D?Object.defineProperty(D,H,{value:R,enumerable:!0,configurable:!0,writable:!0}):D[H]=R,D}function d(D){return m(D)||f(D)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(D){if(Symbol.iterator in Object(D)||Object.prototype.toString.call(D)==="[object Arguments]")return Array.from(D)}function m(D){if(Array.isArray(D)){for(var H=0,R=new Array(D.length);H<D.length;H++)R[H]=D[H];return R}}function g(D,H){var R=(0,i.newHistory)([],D,[]);return H&&(R._latestUnfiltered=null),R}function _(D,H,R,j){var te=D.past.length+1;t.log("inserting",H),t.log("new free: ",R-te);var $=D.past,z=D._latestUnfiltered,I=R&&R<=te,q=$.slice(I?1:0),P=z!=null?[].concat(d(q),[z]):q;return(0,i.newHistory)(P,H,[],j)}function E(D,H){if(H<0||H>=D.future.length)return D;var R=D.past,j=D.future,te=D._latestUnfiltered,$=[].concat(d(R),[te],d(j.slice(0,H))),z=j[H],I=j.slice(H+1);return(0,i.newHistory)($,z,I)}function x(D,H){if(H<0||H>=D.past.length)return D;var R=D.past,j=D.future,te=D._latestUnfiltered,$=R.slice(0,H),z=[].concat(d(R.slice(H+1)),[te],d(j)),I=R[H];return(0,i.newHistory)($,I,z)}function v(D,H){return H>0?E(D,H-1):H<0?x(D,D.past.length+H):D}function C(D,H){return H.indexOf(D)>-1?D:!D}function V(D){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.set(H.debug);var R=l({limit:void 0,filter:function(){return!0},groupBy:function(){return null},undoType:r.ActionTypes.UNDO,redoType:r.ActionTypes.REDO,jumpToPastType:r.ActionTypes.JUMP_TO_PAST,jumpToFutureType:r.ActionTypes.JUMP_TO_FUTURE,jumpType:r.ActionTypes.JUMP,neverSkipReducer:!1,ignoreInitialState:!1,syncFilter:!1},H,{initTypes:(0,i.parseActions)(H.initTypes,["@@redux-undo/INIT"]),clearHistoryType:(0,i.parseActions)(H.clearHistoryType,[r.ActionTypes.CLEAR_HISTORY])}),j=R.neverSkipReducer?function($,z){for(var I=arguments.length,q=new Array(I>2?I-2:0),P=2;P<I;P++)q[P-2]=arguments[P];return l({},$,{present:D.apply(void 0,[$.present,z].concat(q))})}:function($){return $},te;return function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.start(z,$);for(var I=$,q=arguments.length,P=new Array(q>2?q-2:0),ee=2;ee<q;ee++)P[ee-2]=arguments[ee];if(!te)if(t.log("history is uninitialized"),$===void 0){var ue={type:"@@redux-undo/CREATE_HISTORY"},U=D.apply(void 0,[$,ue].concat(P));return I=g(U,R.ignoreInitialState),t.log("do not set initialState on probe actions"),t.end(I),I}else(0,i.isHistory)($)?(I=te=R.ignoreInitialState?$:(0,i.newHistory)($.past,$.present,$.future),t.log("initialHistory initialized: initialState is a history",te)):(I=te=g($,R.ignoreInitialState),t.log("initialHistory initialized: initialState is not a history",te));var O;switch(z.type){case void 0:return I;case R.undoType:return O=v(I,-1),t.log("perform undo"),t.end(O),j.apply(void 0,[O,z].concat(P));case R.redoType:return O=v(I,1),t.log("perform redo"),t.end(O),j.apply(void 0,[O,z].concat(P));case R.jumpToPastType:return O=x(I,z.index),t.log("perform jumpToPast to ".concat(z.index)),t.end(O),j.apply(void 0,[O,z].concat(P));case R.jumpToFutureType:return O=E(I,z.index),t.log("perform jumpToFuture to ".concat(z.index)),t.end(O),j.apply(void 0,[O,z].concat(P));case R.jumpType:return O=v(I,z.index),t.log("perform jump to ".concat(z.index)),t.end(O),j.apply(void 0,[O,z].concat(P));case C(z.type,R.clearHistoryType):return O=g(I.present,R.ignoreInitialState),t.log("perform clearHistory"),t.end(O),j.apply(void 0,[O,z].concat(P));default:if(O=D.apply(void 0,[I.present,z].concat(P)),R.initTypes.some(function(Re){return Re===z.type}))return t.log("reset history due to init action"),t.end(te),te;if(I._latestUnfiltered===O)return I;var G=typeof R.filter=="function"&&!R.filter(z,O,I);if(G){var ne=(0,i.newHistory)(I.past,O,I.future,I.group);return R.syncFilter||(ne._latestUnfiltered=I._latestUnfiltered),t.log("filter ignored action, not storing it in past"),t.end(ne),ne}var se=R.groupBy(z,O,I);if(se!=null&&se===I.group){var ie=(0,i.newHistory)(I.past,O,I.future,I.group);return t.log("groupBy grouped the action with the previous action"),t.end(ie),ie}return I=_(I,O,R.limit,se),t.log("inserted new state into history"),t.end(I),I}}}})(KI);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ActionTypes",{enumerable:!0,get:function(){return e.ActionTypes}}),Object.defineProperty(n,"ActionCreators",{enumerable:!0,get:function(){return e.ActionCreators}}),Object.defineProperty(n,"parseActions",{enumerable:!0,get:function(){return t.parseActions}}),Object.defineProperty(n,"isHistory",{enumerable:!0,get:function(){return t.isHistory}}),Object.defineProperty(n,"includeAction",{enumerable:!0,get:function(){return t.includeAction}}),Object.defineProperty(n,"excludeAction",{enumerable:!0,get:function(){return t.excludeAction}}),Object.defineProperty(n,"combineFilters",{enumerable:!0,get:function(){return t.combineFilters}}),Object.defineProperty(n,"groupByActionTypes",{enumerable:!0,get:function(){return t.groupByActionTypes}}),Object.defineProperty(n,"newHistory",{enumerable:!0,get:function(){return t.newHistory}}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var e=zu,t=vs,r=i(KI);function i(a){return a&&a.__esModule?a:{default:a}}})(Hu);const bee=E6(Hu),Pee={currentView:fn.EDITOR,currentAction:ce.MOVE,updateHideNotification:!1,notifications:[],overrideBg:null,romLoaded:!1,updateExists:!1,imagesLoaded:!1},YI=qE({name:"appState",initialState:Pee,reducers:{changeViewAction:(n,e)=>{n.currentView=e.payload},changeCurrentActionAction:(n,e)=>{n.currentAction=e.payload},setHideUpdateNotification:(n,e)=>{n.updateHideNotification=e.payload},addNotificationAction:(n,e)=>{const{notification:t}=e.payload;n.notifications.find(r=>r.key===t.key)||n.notifications.push(t)},removeNotificationAction:(n,e)=>{const{notificationKey:t}=e.payload;n.notifications=n.notifications.filter(r=>r.key!==t)},setOverrideBgAction:(n,e)=>{n.overrideBg=e.payload},setRomLoadedAction:(n,e)=>{n.romLoaded=e.payload},setUpdateExistsAction:(n,e)=>{n.updateExists=e.payload},setImagesLoadedAction:(n,e)=>{n.imagesLoaded=e.payload}}}),{changeViewAction:Ree,changeCurrentActionAction:Lee,setHideUpdateNotification:Mb,addNotificationAction:Bee,removeNotificationAction:Mee,setOverrideBgAction:Iee,setRomLoadedAction:Oee,setUpdateExistsAction:kee,setImagesLoadedAction:Nee}=YI.actions,qI=n=>n.app.currentView,Uee=n=>n.app.currentAction,jee=n=>n.app.romLoaded,Gee=n=>n.app.updateExists,Hee=n=>n.app.notifications,zee=YI.reducer;var xh=(n=>(n[n.None=0]="None",n[n.Library=1]="Library",n[n.Board=2]="Board",n))(xh||{});const Wee={boards:[],romBoards:[],currentBoardIndex:0,currentBoardIsROM:!1,selectedSpaceIndices:{},selectionBoxCoords:null,highlightedSpaceIndices:null,temporaryConnections:null,eventLibrary:{},currentEventId:null,currentEventType:0,hoveredBoardEventIndex:-1},QI=qE({name:"boardState",initialState:Wee,reducers:{setBoardsAction:(n,e)=>{const{boards:t}=e.payload;n.boards=t},addBoardAction:(n,e)=>{const{board:t,rom:r}=e.payload;(r?n.romBoards:n.boards).push(t)},deleteBoardAction:(n,e)=>{const{boardIndex:t}=e.payload;if(isNaN(t)||t<0||t>=n.boards.length)return;n.boards.length===1&&n.boards.push(E8()),n.boards.splice(t,1);let r=-1;n.currentBoardIndex>t?r=n.currentBoardIndex-1:n.boards.length===1?r=0:n.currentBoardIndex===t&&n.currentBoardIndex===n.boards.length&&(r=n.currentBoardIndex-1),r>=0&&(n.currentBoardIndex=r,n.currentBoardIsROM=!1)},setCurrentBoardAction:(n,e)=>{const{index:t,rom:r}=e.payload,i=n.currentBoardIndex!==t||n.currentBoardIsROM!==r;n.currentBoardIndex=t,n.currentBoardIsROM=r,i&&(n.selectedSpaceIndices={},n.selectionBoxCoords=null,n.hoveredBoardEventIndex=-1,n.temporaryConnections=null,n.highlightedSpaceIndices=null)},clearBoardsFromROMAction:n=>{n.romBoards=[],n.boards.length||n.boards.push(E8())},copyCurrentBoardAction:(n,e)=>{const t=kn(n),r=Sc(t);delete r._rom,r.name="Copy of "+r.name;let i;n.currentBoardIsROM?(i=n.boards.length,n.boards.push(r)):(i=n.currentBoardIndex+1,n.boards.splice(i,0,r)),e.payload.makeCurrent&&(n.currentBoardIndex=i,n.currentBoardIsROM=!1)},setBoardNameAction:(n,e)=>{const t=kn(n);t.name=e.payload.name},setBoardDescriptionAction:(n,e)=>{const t=kn(n);t.description=e.payload.description},setBoardDifficultyAction:(n,e)=>{const t=kn(n);t.difficulty=e.payload.difficulty},setBoardCostumeTypeIndexAction:(n,e)=>{const t=kn(n);t.costumeTypeIndex=e.payload.costumeType},setBackgroundAction:(n,e)=>{const{bg:t}=e.payload,r=kn(n);r.bg.src=t},setBoardOtherBgAction:(n,e)=>{const{name:t,value:r}=e.payload,i=kn(n);i.otherbg[t]=r},addAnimationBackgroundAction:(n,e)=>{const{bg:t}=e.payload,r=kn(n);r.animbg=r.animbg||[],r.animbg.push(t)},removeAnimationBackgroundAction:(n,e)=>{const{index:t}=e.payload,r=kn(n);!r.animbg||r.animbg.length<=t||t<0||r.animbg.splice(t,1)},addAdditionalBackgroundAction:(n,e)=>{const{bg:t}=e.payload,r=kn(n);r.additionalbg=r.additionalbg||[],r.additionalbg.push(t)},removeAdditionalBackgroundAction:(n,e)=>{const{index:t}=e.payload,r=kn(n);!r.additionalbg||r.additionalbg.length<=t||t<0||r.additionalbg.splice(t,1)},setAdditionalBackgroundCodeAction:(n,e)=>{const{code:t,language:r}=e.payload,i=kn(n);t?i.additionalbgcode={code:t,language:r}:delete i.additionalbgcode},setAudioSelectCodeAction:(n,e)=>{const{code:t,language:r}=e.payload,i=kn(n);t?i.audioSelectCode={code:t,language:r}:delete i.audioSelectCode},setBoardAudioAction:(n,e)=>{const{audioChanges:t}=e.payload,r=kn(n);if("audioType"in t)switch(r.audioType=t.audioType,t.audioType){case Ca.Custom:r.audioData||(r.audioData=[]);break}typeof t.gameAudioIndex=="number"&&(r.audioIndex=t.gameAudioIndex);const i=t.customAudioIndex;typeof i=="number"&&(Bn(Array.isArray(r.audioData)),Bn(i<=r.audioData.length),i===r.audioData.length&&r.audioData.push({name:"(select a midi file)",data:"",soundbankIndex:0}),t.delete?(Bn(i<r.audioData.length),r.audioData.splice(i,1)):(t.midiName&&(r.audioData[i].name=t.midiName),t.midiData&&(r.audioData[i].data=t.midiData),typeof t.soundbankIndex=="number"&&(r.audioData[i].soundbankIndex=t.soundbankIndex)))},addSpaceAction:(n,e)=>{const{x:t,y:r,type:i,subtype:a}=e.payload,o=kn(n);_5(t,r,i,a,o,n.eventLibrary)},removeSpaceAction:(n,e)=>{const{index:t}=e.payload,r=kn(n);Ib(n,r,t)},removeSpacesAction:(n,e)=>{const{spaceIndices:t}=e.payload,r=kn(n);for(let i=0;i<t.length;i++){const a=t[i];if(Ib(n,r,a))for(let o=i+1;o<t.length;o++)t[o]>a&&t[o]--}},addConnectionAction:(n,e)=>{const{startSpaceIndex:t,endSpaceIndex:r}=e.payload,i=kn(n);v5(t,r,i),n.temporaryConnections=null},eraseConnectionsAction:(n,e)=>{const{x:t,y:r}=e.payload,i=kn(n);Gte(i,t,r)},setTemporaryUIConnections:(n,e)=>{const{connections:t}=e.payload;n.temporaryConnections=t},setSpacePositionsAction:(n,e)=>{const{spaceIndices:t,coords:r}=e.payload,i=kn(n);for(let a=0;a<t.length;a++){const o=i.spaces[t[a]],s=r[a];typeof s.x=="number"&&(o.x=s.x),typeof s.y=="number"&&(o.y=s.y),typeof s.z=="number"&&(o.z=s.z)}},setSpaceTypeAction:(n,e)=>{const{spaceIndices:t,type:r,subtype:i}=e.payload,a=kn(n);for(let o=0;o<t.length;o++){const s=a.spaces[t[o]];r!==void 0&&(s.type=r,s.rotation&&delete s.rotation),i!==void 0?s.subtype=i:delete s.subtype}},setSpaceSubtypeAction:(n,e)=>{const{spaceIndices:t,subtype:r}=e.payload,i=kn(n);for(let a=0;a<t.length;a++){const o=i.spaces[t[a]];typeof r>"u"?delete o.subtype:o.subtype=r}},setSpaceHostsStarAction:(n,e)=>{const{spaceIndices:t,hostsStar:r}=e.payload,i=kn(n);for(let a=0;a<t.length;a++){const o=i.spaces[t[a]];r?o.star=!0:delete o.star}},setSpaceRotationAction:(n,e)=>{const{spaceIndex:t,angleYAxisDeg:r}=e.payload;Xte(n);const a=kn(n).spaces[t];if(!a)throw new Error("setSpaceRotation: Invalid space index "+t);a.rotation=Math.round(r)},addSelectedSpaceAction:(n,e)=>{const t=e.payload;n.selectedSpaceIndices[t]=!0},setSelectedSpaceAction:(n,e)=>{const t=e.payload;n.selectedSpaceIndices={[t]:!0}},setSelectedSpacesAction:(n,e)=>{const t=e.payload,r={};for(const i of t)r[i]=!0;n.selectedSpaceIndices=r},clearSelectedSpacesAction:(n,e)=>{n.selectedSpaceIndices={}},setHighlightedSpacesAction:(n,e)=>{const{spaceIndices:t}=e.payload;n.highlightedSpaceIndices=t},setSelectionBoxCoordsAction:(n,e)=>{const{selectionCoords:t}=e.payload;n.selectionBoxCoords=t},changeCurrentEventAction:(n,e)=>{const{id:t,type:r}=e.payload;n.currentEventId=t,n.currentEventType=r},addEventToLibraryAction:(n,e)=>{const{event:t}=e.payload;n.eventLibrary[t.id]=t},removeEventFromLibraryAction:(n,e)=>{const{eventId:t}=e.payload;if(!n.eventLibrary[t])throw new Error(`Cannot remove event ${t}, as it isn't in the event library`);if(!n.eventLibrary[t].custom)throw new Error(`Cannot remove event ${t}, as it is a built-in event`);delete n.eventLibrary[t]},addEventToBoardAction:(n,e)=>{const{event:t}=e.payload,r=kn(n);if(r.boardevents||(r.boardevents=[]),r.boardevents.push(t),t.custom){const i=Wte(n,t.id,r);Dy(r,i)}},removeEventFromBoardAction:(n,e)=>{const{eventIndex:t}=e.payload,r=kn(n);a5(r,t)},includeEventInBoardAction:(n,e)=>{const{event:t}=e.payload,r=kn(n);Dy(r,t)},excludeEventFromBoardAction:(n,e)=>{const{eventId:t}=e.payload,r=kn(n);zte(r,t)},setHoveredBoardEventIndexAction:(n,e)=>{const{eventIndex:t}=e.payload;n.hoveredBoardEventIndex=t},setBoardEventActivationTypeAction:(n,e)=>{const{eventIndex:t,activationType:r}=e.payload,a=kn(n).boardevents[t];a.activationType=r},setBoardEventEventParameterAction:(n,e)=>{const{eventIndex:t,name:r,value:i}=e.payload,o=kn(n).boardevents[t];o.parameterValues||(o.parameterValues={}),o.parameterValues[r]=i},addEventToSpaceAction:(n,e)=>{const{event:t,toStart:r}=e.payload,i=kn(n),a=kS(n);Lo(i,a,t,r||!1,n.eventLibrary)},addEventToSpacesAction:(n,e)=>{const{event:t,spaceIndices:r}=e.payload,i=kn(n);for(const a of r){const o=i.spaces[a];Lo(i,o,t,!1,n.eventLibrary)}},removeEventFromSpaceAction:(n,e)=>{const{eventIndex:t}=e.payload,r=kS(n);Ey(r,t)},removeEventsFromSpacesAction:(n,e)=>{const{eventIndices:t,spaceIndices:r}=e.payload;Bn(t.length===r.length);const i=kn(n);for(let a=0;a<t.length;a++){const o=t[a],s=r[a],l=i.spaces[s];Ey(l,o)}},setSpaceEventActivationTypeAction:(n,e)=>{const{eventIndex:t,activationType:r}=e.payload,a=kS(n).events[t];a.activationType=r},setSpaceEventsActivationTypeAction:(n,e)=>{const{spaceIndices:t,eventIndices:r,activationType:i}=e.payload,a=kn(n);for(let o=0;o<r.length;o++){const s=r[o],l=t[o],d=a.spaces[l].events[s];d.activationType=i}},setSpaceEventEventParameterAction:(n,e)=>{const{eventIndex:t,name:r,value:i}=e.payload,o=kS(n).events[t];o.parameterValues||(o.parameterValues={}),o.parameterValues[r]=i},setSpaceEventsEventParameterAction:(n,e)=>{const{spaceIndices:t,eventIndices:r,name:i,value:a}=e.payload,o=kn(n);for(let s=0;s<r.length;s++){const l=r[s],u=t[s],h=o.spaces[u].events[l];h.parameterValues||(h.parameterValues={}),h.parameterValues[i]=a}}}}),{setBoardsAction:Xee,addBoardAction:JI,deleteBoardAction:Kee,setCurrentBoardAction:Yee,clearBoardsFromROMAction:qee,copyCurrentBoardAction:Qee,setBoardNameAction:Jee,setBoardDescriptionAction:Zee,setBoardDifficultyAction:$ee,setBoardCostumeTypeIndexAction:ete,setBackgroundAction:tte,setBoardOtherBgAction:nte,addAnimationBackgroundAction:rte,removeAnimationBackgroundAction:ite,addAdditionalBackgroundAction:ate,removeAdditionalBackgroundAction:ote,setAdditionalBackgroundCodeAction:ste,setAudioSelectCodeAction:lte,setBoardAudioAction:cte,addConnectionAction:ute,eraseConnectionsAction:dte,setTemporaryUIConnections:JE,addSpaceAction:Ate,removeSpaceAction:fte,removeSpacesAction:hte,setSpacePositionsAction:Js,setSpaceTypeAction:ZI,setSpaceSubtypeAction:yy,setSpaceHostsStarAction:pte,setSpaceRotationAction:$I,addSelectedSpaceAction:mte,setSelectedSpaceAction:e5,setSelectedSpacesAction:t5,clearSelectedSpacesAction:n5,setHighlightedSpacesAction:v8,setSelectionBoxCoordsAction:ZE,changeCurrentEventAction:Ste,addEventToLibraryAction:$E,removeEventFromLibraryAction:gte,addEventToBoardAction:_te,removeEventFromBoardAction:xte,includeEventInBoardAction:vte,excludeEventFromBoardAction:wte,setHoveredBoardEventIndexAction:r5,setBoardEventActivationTypeAction:yte,setBoardEventEventParameterAction:Ete,addEventToSpaceAction:Cte,addEventToSpacesAction:Vte,removeEventFromSpaceAction:Dte,removeEventsFromSpacesAction:Fte,setSpaceEventActivationTypeAction:Tte,setSpaceEventsActivationTypeAction:bte,setSpaceEventEventParameterAction:Pte,setSpaceEventsEventParameterAction:Rte}=QI.actions,Lte=n=>n.data.present,eC=n=>n.data.present.boards,Bte=n=>n.data.present.romBoards,Mte=n=>n.data.present.currentBoardIsROM,al=n=>n.data.present.currentBoardIsROM?n.data.present.romBoards[n.data.present.currentBoardIndex]:n.data.present.boards[n.data.present.currentBoardIndex],Ite=n=>n.data.present.selectionBoxCoords,Ote=n=>n.data.present.hoveredBoardEventIndex,i5=n=>{var e,t;return(t=(e=n.data)==null?void 0:e.present)==null?void 0:t.highlightedSpaceIndices},kte=n=>n.data.present.temporaryConnections,zp=n=>n.data.present.selectedSpaceIndices,Nte=n=>{switch(n.data.present.currentEventType){case 2:{Bn(!!n.data.present.currentEventId);const e=al(n).events[n.data.present.currentEventId];return Bn(typeof e!="string"),oo(e.language,e.code)}case 1:return Bn(!!n.data.present.currentEventId),n.data.present.eventLibrary[n.data.present.currentEventId];case 0:default:return null}},Ute=n=>n.data.present.currentEventType,w8=n=>n.data.present.eventLibrary;function Ib(n,e,t){if(t<0||t>=e.spaces.length)return!1;jte(t,e),Hte(t,e,n.eventLibrary);const r=e.spaces.length;e.spaces.splice(t,1);function i(s){return parseInt(s)>parseInt(t)?s-1:s}let a,o;for(let s=0;s<r;s++)!e.links.hasOwnProperty(s)||(a=i(s),o=e.links[s],a!==s&&delete e.links[s],Array.isArray(o)?e.links[a]=o.map(i):e.links[a]=i(o));return NE(e,n.eventLibrary,(s,l)=>{var u;switch(s.type){case an.Space:l.parameterValues&&l.parameterValues.hasOwnProperty(s.name)&&(l.parameterValues[s.name]=i(l.parameterValues[s.name]));break;case an.SpaceArray:{const d=(u=l.parameterValues)==null?void 0:u[s.name];l.parameterValues&&Array.isArray(d)&&(l.parameterValues[s.name]=d.map(i))}break}}),!0}function jte(n,e){if(!!e.links){delete e.links[n];for(const t in e.links){const r=e.links[t];if(Array.isArray(r)){const i=r.indexOf(n);i!==-1&&r.splice(i,1),r.length===1?e.links[t]=r[0]:r.length||delete e.links[t]}else r===n&&delete e.links[t]}}}function Gte(n,e,t){const r=n.spaces,i=n.links;let a=!1;for(const o in i){const s=r[o];let l,u=i[o];if(Array.isArray(u)){let d=0;for(;d<u.length;)l=r[u[d]],Ob(s,l,e,t)?(u.splice(d,1),a=!0):d++;u.length===1?i[o]=u=u[0]:u.length||delete i[o]}else l=r[u],Ob(s,l,e,t)&&(delete i[o],a=!0)}return a}function Ob(n,e,t,r){return t>n.x&&t>e.x||t<n.x&&t<e.x||r>n.y&&r>e.y||r<n.y&&r<e.y?!1:EG(t,r,n.x,n.y,e.x,e.y)<=4}function Hte(n,e,t){NE(e,t,(r,i)=>{var a;switch(r.type){case an.Space:i.parameterValues&&i.parameterValues.hasOwnProperty(r.name)&&i.parameterValues[r.name]===n&&delete i.parameterValues[r.name];break;case an.SpaceArray:{const o=(a=i.parameterValues)==null?void 0:a[r.name];i.parameterValues&&Array.isArray(o)&&(i.parameterValues[r.name]=o.filter(s=>s!==n))}break}})}function kn(n){return n.currentBoardIsROM?n.romBoards[n.currentBoardIndex]:n.boards[n.currentBoardIndex]}function kS(n){const e=Object.keys(n.selectedSpaceIndices).map(r=>parseInt(r,10));Bn(e.length===1);const t=kn(n).spaces[e[0]];return Bn(!!t),t}function a5(n,e){var t;(t=n.boardevents)!=null&&t.length&&e>=0&&n.boardevents.splice(e,1)}function zte(n,e){n.events&&delete n.events[e],Gp(n,(t,r,i)=>{t.id===e&&(i?Ey(i,r):a5(n,r))})}function Ey(n,e){!n||!n.events||e>=0&&n.events.splice(e,1)}function Wte(n,e,t){if(t&&t.events&&!!gs(t,e)){const r=gs(t,e);return oo(r.language,r.code)}return n.eventLibrary[e]}function Xte(n){if(n.currentBoardIsROM)throw new Error("Current board must not be a ROM board.")}const Kte=QI.reducer,Yte={blocked:!1,prompt:!1,confirm:!1,message:"",messageHTML:"",onBlockerFinished:void 0},o5=qE({name:"blocker",initialState:Yte,reducers:{blockUIAction:(n,e)=>{n.blocked=e.payload},showMessageAction:(n,e)=>{const t=e.payload;n.blocked=!!t,n.prompt=!1,n.confirm=!1,n.message=t||"",n.messageHTML="",n.onBlockerFinished=void 0},showMessageHTMLAction:(n,e)=>{const t=e.payload;n.blocked=!!t,n.prompt=!1,n.confirm=!1,n.message="",n.messageHTML=t||"",n.onBlockerFinished=void 0},confirmFromUserAction:(n,e)=>{const{message:t,onConfirmed:r}=e.payload;n.blocked=!0,n.prompt=!1,n.confirm=!0,n.message=t||"",n.messageHTML="",n.onBlockerFinished=r},promptUserAction:(n,e)=>{const{message:t,onSubmit:r}=e.payload;n.blocked=!0,n.prompt=!0,n.confirm=!1,n.message=t||"",n.messageHTML="",n.onBlockerFinished=r}}}),{blockUIAction:qte,showMessageAction:Qte,showMessageHTMLAction:GEe,confirmFromUserAction:Jte,promptUserAction:Zte}=o5.actions,tC=n=>n.blocker.blocked,$te=n=>n.blocker.message,ene=n=>n.blocker.messageHTML,tne=n=>n.blocker.prompt,nne=n=>n.blocker.confirm,rne=n=>n.blocker.onBlockerFinished,ine=o5.reducer,ane=n=>e=>t=>{const r=e(t);return t.type!==v8.type&&i5(n.getState())&&n.dispatch(v8({spaceIndices:null})),r},one=bee(Kte,{ignoreInitialState:!1,debug:!1,groupBy:Hu.groupByActionTypes([Js.type,$I.type]),filter:Hu.excludeAction([$E.type,n5.type,e5.type,t5.type,ZE.type,v8.type,r5.type,JE.type])}),St=uee({reducer:{app:zee,blocker:ine,data:one},middleware:n=>n({serializableCheck:{ignoredActionPaths:["payload.event.parse","payload.event.write","payload.onConfirmed","payload.onSubmit","payload.notification"],ignoredPaths:["app.notifications","blocker.onBlockerFinished","data.present.eventLibrary","data.past","data.future","data._latestUnfiltered"]}}).concat(ane)});typeof window<"u"&&(window._pp64Store=St);function Wp(){return window._PP64instance}function vr(n){St.dispatch(Ree(n)),Yp()}function s5(){nC(ce.MOVE),fA(null),Wp().setState({aiTree:null}),Yp()}function Xp(){Wp().setState({aiTree:null})}function l5(){St.dispatch(Oee(Tt.romIsLoaded())),Yp()}function nC(n){St.dispatch(Lee(n))}function Kp(){return St.getState().app.currentAction}function Za(){St.dispatch(n5())}function Cy(n){St.dispatch(t5(n))}function c5(){return zp(St.getState())}function Ss(){const n=St.getState(),e=al(n),t=c5(),r=[];for(const i in t)e.spaces[i]&&r.push(parseInt(i,10));return r}function rC(){const n=St.getState(),e=al(n),t=Ss(),r=[];for(const i of t){const a=e.spaces[i];r.push(a)}return r}function u5(n){St.dispatch(v8({spaceIndices:n}))}function y8(n,e,t,r){St.dispatch(JE({connections:[[n,e,t,r]]}))}function Vy(n,e){let t=xh.None;n&&(t=e?xh.Board:xh.Library),St.dispatch(Ste({id:n,type:t}))}function d5(){return Nte(St.getState())}function sne(){return Ute(St.getState())===xh.Board}function kb(n){St.dispatch(r5({eventIndex:n}))}function fA(n){St.dispatch(Iee(n))}function ro(n){St.dispatch(qte(n))}function o0(n){St.dispatch(Qte(n))}function Zl(n){let e;const t=new Promise(r=>{e=r});return St.dispatch(Jte({message:n,onConfirmed:r=>{e(r!==void 0)}})),t}function F_(n){let e;const t=new Promise(r=>{e=r});return St.dispatch(Zte({message:n,onSubmit:e})),t}function Nb(){Wp().forceUpdate()}function lne(n){St.dispatch(Bee({notification:n}))}function cne(n){St.dispatch(Mee({notificationKey:n}))}function A5(n){Wp().setState({aiTree:n})}function une(){St.dispatch(Hu.ActionCreators.undo())}function dne(){St.dispatch(Hu.ActionCreators.redo())}function Yp(){St.dispatch(Hu.ActionCreators.clearHistory())}const Ane="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAABACAMAAADlCI9NAAAC+lBMVEUAewAAfQAHgAIAggMAgwAAhAAAhAcAhQAAhQgAhgAAhwAAhgoCiAAAiA4FiQAAjAEJigAAjQMAjgAAjgUAjwAAjwcAkAAOjAMAkQApeIYAkQoDkgAoeJlmZaRhZqpuZJlXaLdyZJQjfI8seokAlQAHkwAme5UgfosbgIaYXmiBYoVeaLIAlgAzeJOOYHdsZqB6ZItLbb8qfYRTa75iaacxeo8weKYAlwELlAAnf4AufIp9ZYYse5xNbcYmfpGIY3w7dqUAmAN4ZpEpfZemX1cve6E6eKBwaZcsf4ZHcM4AmgA2e5Y4eps/ctaXY2u5XjpPcMONZXo6e52RZnCQZnWjY11BdNi0YUZScculZFmsY1VDddnDYDOYaGiuZFDFYS5EdtqqZlBQdtZGede0Z0m8ZkBIeti+ZzpJe9m6a0GFdIhLfdvGbTNXftiycU2vdE7QbiqtdFnFcTVRg9tagdrbcBXOcyvRdCXXcx9chdi1eVOAhJNfiNvQeSfSeiDXeSFiit7pewfcfRymhmJrjNpkjtvffxPtfQChim/bgR5nkd5wk9vriAB0lt7liR70iQB2meHwjADkjhTxjQt+mt3hkRTkkwPxkgB6n+HklCTtlQ+Cod2FpOH1mwflnxOHpuPsnwPaojKOqN/mpQT3ogCRquLsqQDxqACTreT4qAHqrQDprROcsOKVsuOYteWfs+X0sQmft+L5tACguOTrugyiuuXuvAD5ugCkvOj2uCSrvuStwefwxAb2wwuvwui1xOX3yQC3x+e5yerAy+bBzejDzun60iHz1wzEz+rF0ez72BXL0uj52Cb62TTN1evP1+3K2u763zjR2e/V2enX2+vS3uzZ3e3a3u746TTV4vDc4PDa4uvg4ev560Hb5Ozi4u386lzj4+7d5e7k5e/e5/D87G3771f671/m5/Hg6fHk6ez68Gj58G/l6u3r6e3m7O7+8X/t6+/n7e/p7vD+84/q7/L69Yjw7vLr8PP99Zfs8fTv8e7t8vXw8u/sQzplAAAAAXRSTlMAQObYZgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+AGBwI1KFwHwhkAAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAAAB5JREFUaN7twQEBAAAAgiD/r25IQAEAAAAAAAAA7wYgQAABv4PgLgAAAABJRU5ErkJggg==",fne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AYHAwgS8SE5IgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABBElEQVRYw+2XvQ3CMBCFv0SIghWoIJQUTAEtNCmAASgZhRn4K9KQFqZIQQmiYgUKCqAxKLLsBBNwpJAnWbqcnqMn3/meDP8O5xnM+h0HGAF1iXMDNtMwOsSTGfgAq2kY3QEqMc4YmGuETgBPymXhO8ACwLV42p4qjp/AErgDbWnjBVgrfmjKV+IlQNRk+e5GU74Obt63wKaAqyq2KSAATmIFqjnQAnbisyvfYxsl8IGGWH4ePVDVxIVpwuQ58Gu84wW/RqoXHDWxdS8AWFnvgW/N9tILSi8ovaC4XiB6ZKAQfY7PdlO+iRdsgWbCA2fxCd+mF6SWIM0LesAQqEn5/Zf4f4oHrZpgBbrOefMAAAAASUVORK5CYII=",hne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAABkCAYAAACvgC0OAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIVESUAMoBcTwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAd0lEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM8GhxMAAVx5XvcAAAAASUVORK5CYII=",pne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOIAAAAkCAYAAACUoeZ+AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoIFwUvmlv9hQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAANklEQVR42u3BMQEAAADCoPVPbQlPoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgY39EAAEijVlTAAAAAElFTkSuQmCC",mne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAyCAQAAAAUheqRAAAAWklEQVR42u3QgQAAAAACoPeXXmGAQqjhVgWyZMmSJUuWAlmyZMmSJUuBLFmyZMmSpUCWLFmyZMlSIEuWLFmyZCmQJUuWLFmyFMiSJUuWLFkKZMmSJUuWLAW/ARZDADMgQmY+AAAAAElFTkSuQmCC",Sne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAuCAQAAAB0KHTVAAAAPklEQVR42u3PQREAAAwCoNm/9N5W8KABuREREREREREREREREREREREREREREREREREREREREREREREREWkPdQwALzYIU8AAAAAASUVORK5CYII=",gne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAADwCAYAAABxLb1rAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AYHAjYGq/ycFQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACdUlEQVR42u3UQREAAAjDsIF/z6CDI5HQRyvJBOChlgAwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBAxQAsAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBAwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQMEAJAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEDBDBAAAMEMEAAAwQwQAADBDBAAAMEuGMBVV0C3yrcQ0UAAAAASUVORK5CYII=",_ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAADwCAYAAABxLb1rAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AYHAjUz1mIL9QAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACdUlEQVR42u3UQREAAAjDsIF/z6CDI5HQRyvJBOChlgAwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBAxQAsAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBAwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQMEAJAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEDBDBAAAMEMEAAAwQwQAADBDBAAAMEuGMBVV0C3yrcQ0UAAAAASUVORK5CYII=",xne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAADwCAYAAABxLb1rAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AYHAjYUWEXtXQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACdUlEQVR42u3UQREAAAjDsIF/z6CDI5HQRyvJBOChlgAwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBAxQAsAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBAwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQMEAJAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEDBDBAAAMEMEAAAwQwQAADBDBAAAMEuGMBVV0C3yrcQ0UAAAAASUVORK5CYII=",vne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA8AAAALQCAYAAABfdxm0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woNAgQc5I+JAwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAOdUlEQVR42u3XMREAAAjEsAf/nkEDK5dI6NZKMgEAAIDnWgIAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAAAZYAgAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAABlgCAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAgJsFIskGn8IwzvgAAAAASUVORK5CYII=",wne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABIAAAANgCAIAAADbKYQBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AYHARAotrKspwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAALZElEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8GZYDAAHxit3TAAAAAElFTkSuQmCC",yne={default:{boardselect:Ane,boardselecticon:fne,boardlogo:hne,boardlogotext:pne,boardlogomedium:mne,boardlogosmall:Sne,largescene:gne,conversation:_ne,splashscreen:xne,bg:vne,bg2:wne}};var Ca=(n=>(n[n.InGame=0]="InGame",n[n.Custom=1]="Custom",n))(Ca||{});function E8(n=1,e=zn.NORMAL){const t={name:"Untitled",description:`Use your Star Power to finish
this board.`,game:n,type:e,difficulty:3,spaces:[],links:{},events:{},audioType:0};switch(n){case 1:t.bg={width:960,height:720,src:!0,fov:17,scaleFactor:1,cameraEyePosX:0,cameraEyePosY:1355,cameraEyePosZ:1780,lookatPointX:0,lookatPointY:0,lookatPointZ:0},t.otherbg={boardselect:!0,boardlogo:!0,largescene:!0,conversation:!0,splashscreen:!0},t.audioIndex=24;break;case 2:t.bg={width:1152,height:864,src:!0,fov:3,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:1570,cameraEyePosZ:1577,lookatPointX:0,lookatPointY:0,lookatPointZ:0},t.animbg=[],t.otherbg={boardselect:!0,boardselecticon:!0,boardlogo:!0,largescene:!0},t.audioIndex=54,t.costumeTypeIndex=d0.NORMAL;break;case 3:switch(e){case zn.NORMAL:t.bg={width:1152,height:864,src:!0,fov:15,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:300,cameraEyePosZ:300,lookatPointX:0,lookatPointY:0,lookatPointZ:0},t.audioIndex=41;break;case zn.DUEL:t.bg={width:896,height:672,src:!0,fov:15,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:210,cameraEyePosZ:210,lookatPointX:0,lookatPointY:0,lookatPointZ:0},t.audioIndex=0;break}t.otherbg={boardselect:!0,boardlogo:!0,boardlogotext:!0,boardlogomedium:!0,boardlogosmall:!0,largescene:!0};break}return e===zn.DUEL?(t.spaces.push({x:200,y:200,type:de.DUEL_START_BLUE}),t.spaces.push({x:t.bg.width-200,y:t.bg.height-200,type:de.DUEL_START_RED})):t.spaces.push({x:t.bg.width-200,y:t.bg.height-200,type:de.START}),Ene(t),t}function Ene(n,e="default"){const t=yne[e];switch(n.otherbg.boardselect&&(n.otherbg.boardselect=t.boardselect),n.otherbg.boardselecticon&&(n.otherbg.boardselecticon=t.boardselecticon),n.otherbg.boardlogo&&(n.otherbg.boardlogo=t.boardlogo),n.otherbg.boardlogotext&&(n.otherbg.boardlogotext=t.boardlogotext),n.otherbg.boardlogomedium&&(n.otherbg.boardlogomedium=t.boardlogomedium),n.otherbg.boardlogosmall&&(n.otherbg.boardlogosmall=t.boardlogosmall),n.otherbg.largescene&&(n.otherbg.largescene=t.largescene),n.otherbg.conversation&&(n.otherbg.conversation=t.conversation),n.otherbg.splashscreen&&(n.otherbg.splashscreen=t.splashscreen),n.game){case 1:n.bg.src=t.bg;break;case 2:case 3:n.bg.src=t.bg2;break}}function f5(n,e={}){n||(n=E8(e.game||1,e.type||zn.NORMAL)),e.rom&&(n._rom=!0),II(n),St.dispatch(JI({board:n,rom:e.rom})),Wp()&&Xp();const r=Lte(St.getState());return(e.rom?r.romBoards:r.boards).length-1}function Vn(){return al(St.getState())}function Cne(n){return eC(St.getState()).indexOf(n)}function qp(n,e){St.dispatch(Yee({index:n,rom:!!e})),s5()}function Ys(n){return!!n._rom}function iC(n,e,t=Vn()){return Array.isArray(t.links[n])?e==="*"||e===void 0?!0:t.links[n].indexOf(e)>=0:t.links[n]!==void 0&&t.links[n]!==null?e==="*"||e===void 0?!0:t.links[n]===e:!1}function Vne(n){St.dispatch(_te({event:n}))}function Dne(n){St.dispatch(xte({eventIndex:n}))}function Fne(n,e){St.dispatch(Cte({event:n,toStart:e}))}function Tne(n,e){St.dispatch(Vte({event:n,spaceIndices:e}))}function Lo(n,e,t,r,i){if(e.events=e.events||[],t&&(r?e.events.unshift(t):e.events.push(t),t.custom)){const a=jo(t.id,n,i);Dy(n,a)}}function bne(n){St.dispatch(Dte({eventIndex:n}))}function Pne(n,e){St.dispatch(Fte({eventIndices:n,spaceIndices:e}))}function gs(n,e){if(n.events){const t=n.events[e];return typeof t=="string"?{language:En.MIPS,code:t}:t||null}return null}function h5(n){St.dispatch(vte({event:n}))}function Dy(n,e){if(!e.asm)throw new Error(`Attempting to add event ${e.name} but it doesn't have code`);n.events[e.name]={language:e.language,code:e.asm}}function Rne(n){St.dispatch(wte({eventId:n}))}function aC(n){if(n.additionalbgcode){const e=n.additionalbgcode;return typeof e=="string"?{language:En.MIPS,code:e}:e||null}return null}function Lne(n,e){St.dispatch(ste({code:n,language:e}))}function oC(n){return n.audioSelectCode||null}function Bne(n,e){St.dispatch(lte({code:n,language:e}))}function p5(n){const e=[],t=r(n);function r(l){return Sc(l.spaces)}function i(l){if(t[l]._seen)return!1;if(!n.links.hasOwnProperty(l))return e.push(l),!0;t[l]._seen=!0;const u=n.links[l];let d;if(Array.isArray(u)){for(let h=0;h<u.length;h++)if(d=i(u[h]),d)return d}else if(d=i(u),d)return d}const a={};for(let l=0;l<t.length;l++)t[l]&&(a[l]=[]);for(const l in n.links)Pa(parseInt(l),n).forEach(d=>{a[d].push(Number(l))});function o(l,u){return u===void 0?!!a[l].length:a[l].length?a[l].indexOf(Number(u))===-1||a[l].length>1:!1}const s=T_(n);s>=0&&i(s);for(let l=0;l<t.length;l++)!t[l]||t[l]._seen||!o(l)&&iC(l,null,n)&&i(l);return e}function Bc(){return Mte(St.getState())}function Mne(){return eC(St.getState())}function m5(){return Bte(St.getState())}function S5(n){St.dispatch(tte({bg:n}))}function Ine(n){St.dispatch(rte({bg:n}))}function One(n){St.dispatch(ite({index:n}))}function kne(n){return n.game===2}function Nne(n){St.dispatch(ate({bg:n}))}function Une(n){St.dispatch(ote({index:n}))}function jne(n){return n.game!==2}function Ub(n){St.dispatch(Kee({boardIndex:n})),Xp(),s5()}function sC(n){St.dispatch(Qee({makeCurrent:n})),Xp()}function Gne(n){St.dispatch(Jee({name:n}))}function Hne(n){St.dispatch(Zee({description:n}))}function zne(n){St.dispatch($ee({difficulty:n}))}function Wne(n){St.dispatch(ete({costumeType:n}))}function ks(n,e){St.dispatch(nte({name:n,value:e}))}function g5(n,e){St.dispatch(pte({spaceIndices:n,hostsStar:e}))}function Xne(n){St.dispatch(cte({audioChanges:n}))}function lC(n,e,t,r,i){if(i)return _5(n,e,t,r,i,j0());{const a=Vn().spaces.length;return St.dispatch(Ate({x:n,y:e,type:t,subtype:r})),a}}function _5(n,e,t,r,i,a){const o={x:n,y:e,z:0,type:t};r!==void 0&&(o.subtype=r);const s=E_(i.game||1,{});return s&&s.hydrateSpace(o,i,a),i.spaces.push(o),i.spaces.length-1}function x5(n){St.dispatch(fte({index:n}))}function Fy(n,e=Vn()){return e.spaces.indexOf(n)}function T_(n){const e=n.spaces;for(let t=0;t<e.length;t++)if(!!e[t]&&e[t].type===de.START)return t;return-1}function Kne(n,e=Vn()){const t=e.spaces,r=[];for(let i=0;i<t.length;i++)!t[i]||t[i].type===n&&r.push(i);return r}function Br(n,e=Vn()){const t=e.spaces,r=[];for(let i=0;i<t.length;i++)!t[i]||t[i].subtype===n&&r.push(i);return r}function Eu(n,e=Vn()){const t=[];return Gp(e,(r,i,a,o)=>{a&&r.id===n&&t.push(o)}),t}function Mn(n){if(typeof n._deadSpace=="number")return n._deadSpace;const e=lC(n.bg.width+150,n.bg.height+100,de.OTHER,void 0,n);return n._deadSpace=e,e}function Yne(n){return n.spaces[Mn(n)]}function Pa(n,e=Vn()){return n<0?null:e.links?Array.isArray(e.links[n])?e.links[n].slice(0):typeof e.links[n]=="number"?[e.links[n]]:[]:[]}function v5(n,e,t){n===e||iC(n,e,t)||(t.links=t.links||{},Array.isArray(t.links[n])?t.links[n].push(e):typeof t.links[n]=="number"?t.links[n]=[t.links[n],e]:e>=0&&(t.links[n]=e))}function Go(n,e,t){t?v5(n,e,t):St.dispatch(ute({startSpaceIndex:n,endSpaceIndex:e}))}function qne(n,e){St.dispatch($I({spaceIndex:n,angleYAxisDeg:e}))}function _u(n,e,t,r,i){const a=n.spaces[e];Lo(n,a,t,r,i)}function w5(){const n=UA({});if(!n)return;const e=n.loadBoards();for(const t of e)t._rom=!0,St.dispatch(JI({board:t,rom:!0}));Xp(),Yp()}function y5(){St.dispatch(qee())}var Ne={exports:{}},Un={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp=Symbol.for("react.element"),Qne=Symbol.for("react.portal"),Jne=Symbol.for("react.fragment"),Zne=Symbol.for("react.strict_mode"),$ne=Symbol.for("react.profiler"),e0e=Symbol.for("react.provider"),t0e=Symbol.for("react.context"),n0e=Symbol.for("react.forward_ref"),r0e=Symbol.for("react.suspense"),i0e=Symbol.for("react.memo"),a0e=Symbol.for("react.lazy"),jb=Symbol.iterator;function o0e(n){return n===null||typeof n!="object"?null:(n=jb&&n[jb]||n["@@iterator"],typeof n=="function"?n:null)}var E5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C5=Object.assign,V5={};function HA(n,e,t){this.props=n,this.context=e,this.refs=V5,this.updater=t||E5}HA.prototype.isReactComponent={};HA.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};HA.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function D5(){}D5.prototype=HA.prototype;function cC(n,e,t){this.props=n,this.context=e,this.refs=V5,this.updater=t||E5}var uC=cC.prototype=new D5;uC.constructor=cC;C5(uC,HA.prototype);uC.isPureReactComponent=!0;var Gb=Array.isArray,F5=Object.prototype.hasOwnProperty,dC={current:null},T5={key:!0,ref:!0,__self:!0,__source:!0};function b5(n,e,t){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)F5.call(e,r)&&!T5.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=t;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in s=n.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Qp,type:n,key:a,ref:o,props:i,_owner:dC.current}}function s0e(n,e){return{$$typeof:Qp,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function AC(n){return typeof n=="object"&&n!==null&&n.$$typeof===Qp}function l0e(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Hb=/\/+/g;function Ev(n,e){return typeof n=="object"&&n!==null&&n.key!=null?l0e(""+n.key):e.toString(36)}function Ig(n,e,t,r,i){var a=typeof n;(a==="undefined"||a==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Qp:case Qne:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Ev(o,0):r,Gb(i)?(t="",n!=null&&(t=n.replace(Hb,"$&/")+"/"),Ig(i,e,t,"",function(u){return u})):i!=null&&(AC(i)&&(i=s0e(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Hb,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Gb(n))for(var s=0;s<n.length;s++){a=n[s];var l=r+Ev(a,s);o+=Ig(a,e,t,l,i)}else if(l=o0e(n),typeof l=="function")for(n=l.call(n),s=0;!(a=n.next()).done;)a=a.value,l=r+Ev(a,s++),o+=Ig(a,e,t,l,i);else if(a==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function NS(n,e,t){if(n==null)return n;var r=[],i=0;return Ig(n,r,"","",function(a){return e.call(t,a,i++)}),r}function c0e(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var $i={current:null},Og={transition:null},u0e={ReactCurrentDispatcher:$i,ReactCurrentBatchConfig:Og,ReactCurrentOwner:dC};Un.Children={map:NS,forEach:function(n,e,t){NS(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return NS(n,function(){e++}),e},toArray:function(n){return NS(n,function(e){return e})||[]},only:function(n){if(!AC(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Un.Component=HA;Un.Fragment=Jne;Un.Profiler=$ne;Un.PureComponent=cC;Un.StrictMode=Zne;Un.Suspense=r0e;Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u0e;Un.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=C5({},n.props),i=n.key,a=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=dC.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var s=n.type.defaultProps;for(l in e)F5.call(e,l)&&!T5.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Qp,type:n.type,key:i,ref:a,props:r,_owner:o}};Un.createContext=function(n){return n={$$typeof:t0e,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:e0e,_context:n},n.Consumer=n};Un.createElement=b5;Un.createFactory=function(n){var e=b5.bind(null,n);return e.type=n,e};Un.createRef=function(){return{current:null}};Un.forwardRef=function(n){return{$$typeof:n0e,render:n}};Un.isValidElement=AC;Un.lazy=function(n){return{$$typeof:a0e,_payload:{_status:-1,_result:n},_init:c0e}};Un.memo=function(n,e){return{$$typeof:i0e,type:n,compare:e===void 0?null:e}};Un.startTransition=function(n){var e=Og.transition;Og.transition={};try{n()}finally{Og.transition=e}};Un.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Un.useCallback=function(n,e){return $i.current.useCallback(n,e)};Un.useContext=function(n){return $i.current.useContext(n)};Un.useDebugValue=function(){};Un.useDeferredValue=function(n){return $i.current.useDeferredValue(n)};Un.useEffect=function(n,e){return $i.current.useEffect(n,e)};Un.useId=function(){return $i.current.useId()};Un.useImperativeHandle=function(n,e,t){return $i.current.useImperativeHandle(n,e,t)};Un.useInsertionEffect=function(n,e){return $i.current.useInsertionEffect(n,e)};Un.useLayoutEffect=function(n,e){return $i.current.useLayoutEffect(n,e)};Un.useMemo=function(n,e){return $i.current.useMemo(n,e)};Un.useReducer=function(n,e,t){return $i.current.useReducer(n,e,t)};Un.useRef=function(n){return $i.current.useRef(n)};Un.useState=function(n){return $i.current.useState(n)};Un.useSyncExternalStore=function(n,e,t){return $i.current.useSyncExternalStore(n,e,t)};Un.useTransition=function(){return $i.current.useTransition()};Un.version="18.2.0";(function(n){n.exports=Un})(Ne);const C8=E6(Ne.exports);var cs={exports:{}},Ia={},P5={exports:{}},R5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,G){var ne=O.length;O.push(G);e:for(;0<ne;){var se=ne-1>>>1,ie=O[se];if(0<i(ie,G))O[se]=G,O[ne]=ie,ne=se;else break e}}function t(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var G=O[0],ne=O.pop();if(ne!==G){O[0]=ne;e:for(var se=0,ie=O.length,Re=ie>>>1;se<Re;){var Be=2*(se+1)-1,Te=O[Be],ye=Be+1,We=O[ye];if(0>i(Te,ne))ye<ie&&0>i(We,Te)?(O[se]=We,O[ye]=ne,se=ye):(O[se]=Te,O[Be]=ne,se=Be);else if(ye<ie&&0>i(We,ne))O[se]=We,O[ye]=ne,se=ye;else break e}}return G}function i(O,G){var ne=O.sortIndex-G.sortIndex;return ne!==0?ne:O.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var l=[],u=[],d=1,h=null,f=3,m=!1,g=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(O){for(var G=t(u);G!==null;){if(G.callback===null)r(u);else if(G.startTime<=O)r(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(u)}}function V(O){if(_=!1,C(O),!g)if(t(l)!==null)g=!0,ue(D);else{var G=t(u);G!==null&&U(V,G.startTime-O)}}function D(O,G){g=!1,_&&(_=!1,x(j),j=-1),m=!0;var ne=f;try{for(C(G),h=t(l);h!==null&&(!(h.expirationTime>G)||O&&!z());){var se=h.callback;if(typeof se=="function"){h.callback=null,f=h.priorityLevel;var ie=se(h.expirationTime<=G);G=n.unstable_now(),typeof ie=="function"?h.callback=ie:h===t(l)&&r(l),C(G)}else r(l);h=t(l)}if(h!==null)var Re=!0;else{var Be=t(u);Be!==null&&U(V,Be.startTime-G),Re=!1}return Re}finally{h=null,f=ne,m=!1}}var H=!1,R=null,j=-1,te=5,$=-1;function z(){return!(n.unstable_now()-$<te)}function I(){if(R!==null){var O=n.unstable_now();$=O;var G=!0;try{G=R(!0,O)}finally{G?q():(H=!1,R=null)}}else H=!1}var q;if(typeof v=="function")q=function(){v(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ee=P.port2;P.port1.onmessage=I,q=function(){ee.postMessage(null)}}else q=function(){E(I,0)};function ue(O){R=O,H||(H=!0,q())}function U(O,G){j=E(function(){O(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,ue(D))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var ne=f;f=G;try{return O()}finally{f=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var ne=f;f=O;try{return G()}finally{f=ne}},n.unstable_scheduleCallback=function(O,G,ne){var se=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?se+ne:se):ne=se,O){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=ne+ie,O={id:d++,callback:G,priorityLevel:O,startTime:ne,expirationTime:ie,sortIndex:-1},ne>se?(O.sortIndex=ne,e(u,O),t(l)===null&&O===t(u)&&(_?(x(j),j=-1):_=!0,U(V,ne-se))):(O.sortIndex=ie,e(l,O),g||m||(g=!0,ue(D))),O},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(O){var G=f;return function(){var ne=f;f=G;try{return O.apply(this,arguments)}finally{f=ne}}}})(R5);(function(n){n.exports=R5})(P5);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L5=Ne.exports,Ma=P5.exports;function Et(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var B5=new Set,ip={};function td(n,e){hA(n,e),hA(n+"Capture",e)}function hA(n,e){for(ip[n]=e,n=0;n<e.length;n++)B5.add(e[n])}var ol=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ty=Object.prototype.hasOwnProperty,d0e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zb={},Wb={};function A0e(n){return Ty.call(Wb,n)?!0:Ty.call(zb,n)?!1:d0e.test(n)?Wb[n]=!0:(zb[n]=!0,!1)}function f0e(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function h0e(n,e,t,r){if(e===null||typeof e>"u"||f0e(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ea(n,e,t,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var _i={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){_i[n]=new ea(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];_i[e]=new ea(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){_i[n]=new ea(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){_i[n]=new ea(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){_i[n]=new ea(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){_i[n]=new ea(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){_i[n]=new ea(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){_i[n]=new ea(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){_i[n]=new ea(n,5,!1,n.toLowerCase(),null,!1,!1)});var fC=/[\-:]([a-z])/g;function hC(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(fC,hC);_i[e]=new ea(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(fC,hC);_i[e]=new ea(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(fC,hC);_i[e]=new ea(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){_i[n]=new ea(n,1,!1,n.toLowerCase(),null,!1,!1)});_i.xlinkHref=new ea("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){_i[n]=new ea(n,1,!1,n.toLowerCase(),null,!0,!0)});function pC(n,e,t,r){var i=_i.hasOwnProperty(e)?_i[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(h0e(e,t,i,r)&&(t=null),r||i===null?A0e(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Al=L5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,US=Symbol.for("react.element"),T1=Symbol.for("react.portal"),b1=Symbol.for("react.fragment"),mC=Symbol.for("react.strict_mode"),by=Symbol.for("react.profiler"),M5=Symbol.for("react.provider"),I5=Symbol.for("react.context"),SC=Symbol.for("react.forward_ref"),Py=Symbol.for("react.suspense"),Ry=Symbol.for("react.suspense_list"),gC=Symbol.for("react.memo"),zl=Symbol.for("react.lazy"),O5=Symbol.for("react.offscreen"),Xb=Symbol.iterator;function kf(n){return n===null||typeof n!="object"?null:(n=Xb&&n[Xb]||n["@@iterator"],typeof n=="function"?n:null)}var sr=Object.assign,Cv;function uh(n){if(Cv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Cv=e&&e[1]||""}return`
`+Cv+n}var Vv=!1;function Dv(n,e){if(!n||Vv)return"";Vv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=s);break}}}finally{Vv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?uh(n):""}function p0e(n){switch(n.tag){case 5:return uh(n.type);case 16:return uh("Lazy");case 13:return uh("Suspense");case 19:return uh("SuspenseList");case 0:case 2:case 15:return n=Dv(n.type,!1),n;case 11:return n=Dv(n.type.render,!1),n;case 1:return n=Dv(n.type,!0),n;default:return""}}function Ly(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b1:return"Fragment";case T1:return"Portal";case by:return"Profiler";case mC:return"StrictMode";case Py:return"Suspense";case Ry:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case I5:return(n.displayName||"Context")+".Consumer";case M5:return(n._context.displayName||"Context")+".Provider";case SC:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case gC:return e=n.displayName||null,e!==null?e:Ly(n.type)||"Memo";case zl:e=n._payload,n=n._init;try{return Ly(n(e))}catch{}}return null}function m0e(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ly(e);case 8:return e===mC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function k5(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function S0e(n){var e=k5(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,a=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function jS(n){n._valueTracker||(n._valueTracker=S0e(n))}function N5(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=k5(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function V8(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function By(n,e){var t=e.checked;return sr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:n._wrapperState.initialChecked})}function Kb(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=wc(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function U5(n,e){e=e.checked,e!=null&&pC(n,"checked",e,!1)}function My(n,e){U5(n,e);var t=wc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Iy(n,e.type,t):e.hasOwnProperty("defaultValue")&&Iy(n,e.type,wc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Yb(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Iy(n,e,t){(e!=="number"||V8(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var dh=Array.isArray;function Q1(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+wc(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Oy(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Et(91));return sr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function qb(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Et(92));if(dh(t)){if(1<t.length)throw Error(Et(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:wc(t)}}function j5(n,e){var t=wc(e.value),r=wc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Qb(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function G5(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ky(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?G5(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var GS,H5=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(GS=GS||document.createElement("div"),GS.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=GS.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function ap(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var vh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g0e=["Webkit","ms","Moz","O"];Object.keys(vh).forEach(function(n){g0e.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),vh[e]=vh[n]})});function z5(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||vh.hasOwnProperty(n)&&vh[n]?(""+e).trim():e+"px"}function W5(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=z5(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var _0e=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ny(n,e){if(e){if(_0e[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Et(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Et(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Et(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Et(62))}}function Uy(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jy=null;function _C(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Gy=null,J1=null,Z1=null;function Jb(n){if(n=$p(n)){if(typeof Gy!="function")throw Error(Et(280));var e=n.stateNode;e&&(e=B_(e),Gy(n.stateNode,n.type,e))}}function X5(n){J1?Z1?Z1.push(n):Z1=[n]:J1=n}function K5(){if(J1){var n=J1,e=Z1;if(Z1=J1=null,Jb(n),e)for(n=0;n<e.length;n++)Jb(e[n])}}function Y5(n,e){return n(e)}function q5(){}var Fv=!1;function Q5(n,e,t){if(Fv)return n(e,t);Fv=!0;try{return Y5(n,e,t)}finally{Fv=!1,(J1!==null||Z1!==null)&&(q5(),K5())}}function op(n,e){var t=n.stateNode;if(t===null)return null;var r=B_(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Et(231,e,typeof t));return t}var Hy=!1;if(ol)try{var Nf={};Object.defineProperty(Nf,"passive",{get:function(){Hy=!0}}),window.addEventListener("test",Nf,Nf),window.removeEventListener("test",Nf,Nf)}catch{Hy=!1}function x0e(n,e,t,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var wh=!1,D8=null,F8=!1,zy=null,v0e={onError:function(n){wh=!0,D8=n}};function w0e(n,e,t,r,i,a,o,s,l){wh=!1,D8=null,x0e.apply(v0e,arguments)}function y0e(n,e,t,r,i,a,o,s,l){if(w0e.apply(this,arguments),wh){if(wh){var u=D8;wh=!1,D8=null}else throw Error(Et(198));F8||(F8=!0,zy=u)}}function nd(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,(e.flags&4098)!==0&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function J5(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Zb(n){if(nd(n)!==n)throw Error(Et(188))}function E0e(n){var e=n.alternate;if(!e){if(e=nd(n),e===null)throw Error(Et(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===t)return Zb(i),n;if(a===r)return Zb(i),e;a=a.sibling}throw Error(Et(188))}if(t.return!==r.return)t=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===t){o=!0,t=i,r=a;break}if(s===r){o=!0,r=i,t=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===t){o=!0,t=a,r=i;break}if(s===r){o=!0,r=a,t=i;break}s=s.sibling}if(!o)throw Error(Et(189))}}if(t.alternate!==r)throw Error(Et(190))}if(t.tag!==3)throw Error(Et(188));return t.stateNode.current===t?n:e}function Z5(n){return n=E0e(n),n!==null?$5(n):null}function $5(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=$5(n);if(e!==null)return e;n=n.sibling}return null}var eO=Ma.unstable_scheduleCallback,$b=Ma.unstable_cancelCallback,C0e=Ma.unstable_shouldYield,V0e=Ma.unstable_requestPaint,Er=Ma.unstable_now,D0e=Ma.unstable_getCurrentPriorityLevel,xC=Ma.unstable_ImmediatePriority,tO=Ma.unstable_UserBlockingPriority,T8=Ma.unstable_NormalPriority,F0e=Ma.unstable_LowPriority,nO=Ma.unstable_IdlePriority,b_=null,hs=null;function T0e(n){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(b_,n,void 0,(n.current.flags&128)===128)}catch{}}var Io=Math.clz32?Math.clz32:R0e,b0e=Math.log,P0e=Math.LN2;function R0e(n){return n>>>=0,n===0?32:31-(b0e(n)/P0e|0)|0}var HS=64,zS=4194304;function Ah(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function b8(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,a=n.pingedLanes,o=t&268435455;if(o!==0){var s=o&~i;s!==0?r=Ah(s):(a&=o,a!==0&&(r=Ah(a)))}else o=t&~i,o!==0?r=Ah(o):a!==0&&(r=Ah(a));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if((r&4)!==0&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Io(e),i=1<<t,r|=n[t],e&=~i;return r}function L0e(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B0e(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,a=n.pendingLanes;0<a;){var o=31-Io(a),s=1<<o,l=i[o];l===-1?((s&t)===0||(s&r)!==0)&&(i[o]=L0e(s,e)):l<=e&&(n.expiredLanes|=s),a&=~s}}function Wy(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function rO(){var n=HS;return HS<<=1,(HS&4194240)===0&&(HS=64),n}function Tv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Jp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Io(e),n[e]=t}function M0e(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Io(t),a=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~a}}function vC(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Io(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var A0=0;function iO(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var aO,wC,oO,sO,lO,Xy=!1,WS=[],sc=null,lc=null,cc=null,sp=new Map,lp=new Map,ql=[],I0e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eP(n,e){switch(n){case"focusin":case"focusout":sc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":cc=null;break;case"pointerover":case"pointerout":sp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lp.delete(e.pointerId)}}function Uf(n,e,t,r,i,a){return n===null||n.nativeEvent!==a?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=$p(e),e!==null&&wC(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function O0e(n,e,t,r,i){switch(e){case"focusin":return sc=Uf(sc,n,e,t,r,i),!0;case"dragenter":return lc=Uf(lc,n,e,t,r,i),!0;case"mouseover":return cc=Uf(cc,n,e,t,r,i),!0;case"pointerover":var a=i.pointerId;return sp.set(a,Uf(sp.get(a)||null,n,e,t,r,i)),!0;case"gotpointercapture":return a=i.pointerId,lp.set(a,Uf(lp.get(a)||null,n,e,t,r,i)),!0}return!1}function cO(n){var e=Cu(n.target);if(e!==null){var t=nd(e);if(t!==null){if(e=t.tag,e===13){if(e=J5(t),e!==null){n.blockedOn=e,lO(n.priority,function(){oO(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function kg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Ky(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);jy=r,t.target.dispatchEvent(r),jy=null}else return e=$p(t),e!==null&&wC(e),n.blockedOn=t,!1;e.shift()}return!0}function tP(n,e,t){kg(n)&&t.delete(e)}function k0e(){Xy=!1,sc!==null&&kg(sc)&&(sc=null),lc!==null&&kg(lc)&&(lc=null),cc!==null&&kg(cc)&&(cc=null),sp.forEach(tP),lp.forEach(tP)}function jf(n,e){n.blockedOn===e&&(n.blockedOn=null,Xy||(Xy=!0,Ma.unstable_scheduleCallback(Ma.unstable_NormalPriority,k0e)))}function cp(n){function e(i){return jf(i,n)}if(0<WS.length){jf(WS[0],n);for(var t=1;t<WS.length;t++){var r=WS[t];r.blockedOn===n&&(r.blockedOn=null)}}for(sc!==null&&jf(sc,n),lc!==null&&jf(lc,n),cc!==null&&jf(cc,n),sp.forEach(e),lp.forEach(e),t=0;t<ql.length;t++)r=ql[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<ql.length&&(t=ql[0],t.blockedOn===null);)cO(t),t.blockedOn===null&&ql.shift()}var $1=Al.ReactCurrentBatchConfig,P8=!0;function N0e(n,e,t,r){var i=A0,a=$1.transition;$1.transition=null;try{A0=1,yC(n,e,t,r)}finally{A0=i,$1.transition=a}}function U0e(n,e,t,r){var i=A0,a=$1.transition;$1.transition=null;try{A0=4,yC(n,e,t,r)}finally{A0=i,$1.transition=a}}function yC(n,e,t,r){if(P8){var i=Ky(n,e,t,r);if(i===null)Nv(n,e,r,R8,t),eP(n,r);else if(O0e(i,n,e,t,r))r.stopPropagation();else if(eP(n,r),e&4&&-1<I0e.indexOf(n)){for(;i!==null;){var a=$p(i);if(a!==null&&aO(a),a=Ky(n,e,t,r),a===null&&Nv(n,e,r,R8,t),a===i)break;i=a}i!==null&&r.stopPropagation()}else Nv(n,e,r,null,t)}}var R8=null;function Ky(n,e,t,r){if(R8=null,n=_C(r),n=Cu(n),n!==null)if(e=nd(n),e===null)n=null;else if(t=e.tag,t===13){if(n=J5(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return R8=n,null}function uO(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D0e()){case xC:return 1;case tO:return 4;case T8:case F0e:return 16;case nO:return 536870912;default:return 16}default:return 16}}var $l=null,EC=null,Ng=null;function dO(){if(Ng)return Ng;var n,e=EC,t=e.length,r,i="value"in $l?$l.value:$l.textContent,a=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[a-r];r++);return Ng=i.slice(n,1<r?1-r:void 0)}function Ug(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function XS(){return!0}function nP(){return!1}function Oa(n){function e(t,r,i,a,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in n)n.hasOwnProperty(s)&&(t=n[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?XS:nP,this.isPropagationStopped=nP,this}return sr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=XS)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=XS)},persist:function(){},isPersistent:XS}),e}var zA={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},CC=Oa(zA),Zp=sr({},zA,{view:0,detail:0}),j0e=Oa(Zp),bv,Pv,Gf,P_=sr({},Zp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:VC,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Gf&&(Gf&&n.type==="mousemove"?(bv=n.screenX-Gf.screenX,Pv=n.screenY-Gf.screenY):Pv=bv=0,Gf=n),bv)},movementY:function(n){return"movementY"in n?n.movementY:Pv}}),rP=Oa(P_),G0e=sr({},P_,{dataTransfer:0}),H0e=Oa(G0e),z0e=sr({},Zp,{relatedTarget:0}),Rv=Oa(z0e),W0e=sr({},zA,{animationName:0,elapsedTime:0,pseudoElement:0}),X0e=Oa(W0e),K0e=sr({},zA,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Y0e=Oa(K0e),q0e=sr({},zA,{data:0}),iP=Oa(q0e),Q0e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J0e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z0e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $0e(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Z0e[n])?!!e[n]:!1}function VC(){return $0e}var ere=sr({},Zp,{key:function(n){if(n.key){var e=Q0e[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Ug(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?J0e[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:VC,charCode:function(n){return n.type==="keypress"?Ug(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ug(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),tre=Oa(ere),nre=sr({},P_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aP=Oa(nre),rre=sr({},Zp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:VC}),ire=Oa(rre),are=sr({},zA,{propertyName:0,elapsedTime:0,pseudoElement:0}),ore=Oa(are),sre=sr({},P_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),lre=Oa(sre),cre=[9,13,27,32],DC=ol&&"CompositionEvent"in window,yh=null;ol&&"documentMode"in document&&(yh=document.documentMode);var ure=ol&&"TextEvent"in window&&!yh,AO=ol&&(!DC||yh&&8<yh&&11>=yh),oP=String.fromCharCode(32),sP=!1;function fO(n,e){switch(n){case"keyup":return cre.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hO(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var P1=!1;function dre(n,e){switch(n){case"compositionend":return hO(e);case"keypress":return e.which!==32?null:(sP=!0,oP);case"textInput":return n=e.data,n===oP&&sP?null:n;default:return null}}function Are(n,e){if(P1)return n==="compositionend"||!DC&&fO(n,e)?(n=dO(),Ng=EC=$l=null,P1=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AO&&e.locale!=="ko"?null:e.data;default:return null}}var fre={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lP(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!fre[n.type]:e==="textarea"}function pO(n,e,t,r){X5(r),e=L8(e,"onChange"),0<e.length&&(t=new CC("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Eh=null,up=null;function hre(n){VO(n,0)}function R_(n){var e=B1(n);if(N5(e))return n}function pre(n,e){if(n==="change")return e}var mO=!1;if(ol){var Lv;if(ol){var Bv="oninput"in document;if(!Bv){var cP=document.createElement("div");cP.setAttribute("oninput","return;"),Bv=typeof cP.oninput=="function"}Lv=Bv}else Lv=!1;mO=Lv&&(!document.documentMode||9<document.documentMode)}function uP(){Eh&&(Eh.detachEvent("onpropertychange",SO),up=Eh=null)}function SO(n){if(n.propertyName==="value"&&R_(up)){var e=[];pO(e,up,n,_C(n)),Q5(hre,e)}}function mre(n,e,t){n==="focusin"?(uP(),Eh=e,up=t,Eh.attachEvent("onpropertychange",SO)):n==="focusout"&&uP()}function Sre(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return R_(up)}function gre(n,e){if(n==="click")return R_(e)}function _re(n,e){if(n==="input"||n==="change")return R_(e)}function xre(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ho=typeof Object.is=="function"?Object.is:xre;function dp(n,e){if(Ho(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Ty.call(e,i)||!Ho(n[i],e[i]))return!1}return!0}function dP(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function AP(n,e){var t=dP(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=dP(t)}}function gO(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?gO(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function _O(){for(var n=window,e=V8();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=V8(n.document)}return e}function FC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function vre(n){var e=_O(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&gO(t.ownerDocument.documentElement,t)){if(r!==null&&FC(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!n.extend&&a>r&&(i=r,r=a,a=i),i=AP(t,a);var o=AP(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),a>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var wre=ol&&"documentMode"in document&&11>=document.documentMode,R1=null,Yy=null,Ch=null,qy=!1;function fP(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;qy||R1==null||R1!==V8(r)||(r=R1,"selectionStart"in r&&FC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ch&&dp(Ch,r)||(Ch=r,r=L8(Yy,"onSelect"),0<r.length&&(e=new CC("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=R1)))}function KS(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var L1={animationend:KS("Animation","AnimationEnd"),animationiteration:KS("Animation","AnimationIteration"),animationstart:KS("Animation","AnimationStart"),transitionend:KS("Transition","TransitionEnd")},Mv={},xO={};ol&&(xO=document.createElement("div").style,"AnimationEvent"in window||(delete L1.animationend.animation,delete L1.animationiteration.animation,delete L1.animationstart.animation),"TransitionEvent"in window||delete L1.transitionend.transition);function L_(n){if(Mv[n])return Mv[n];if(!L1[n])return n;var e=L1[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in xO)return Mv[n]=e[t];return n}var vO=L_("animationend"),wO=L_("animationiteration"),yO=L_("animationstart"),EO=L_("transitionend"),CO=new Map,hP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mc(n,e){CO.set(n,e),td(e,[n])}for(var Iv=0;Iv<hP.length;Iv++){var Ov=hP[Iv],yre=Ov.toLowerCase(),Ere=Ov[0].toUpperCase()+Ov.slice(1);Mc(yre,"on"+Ere)}Mc(vO,"onAnimationEnd");Mc(wO,"onAnimationIteration");Mc(yO,"onAnimationStart");Mc("dblclick","onDoubleClick");Mc("focusin","onFocus");Mc("focusout","onBlur");Mc(EO,"onTransitionEnd");hA("onMouseEnter",["mouseout","mouseover"]);hA("onMouseLeave",["mouseout","mouseover"]);hA("onPointerEnter",["pointerout","pointerover"]);hA("onPointerLeave",["pointerout","pointerover"]);td("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));td("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));td("onBeforeInput",["compositionend","keypress","textInput","paste"]);td("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));td("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));td("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cre=new Set("cancel close invalid load scroll toggle".split(" ").concat(fh));function pP(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,y0e(r,e,void 0,n),n.currentTarget=null}function VO(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;pP(i,s,u),a=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;pP(i,s,u),a=l}}}if(F8)throw n=zy,F8=!1,zy=null,n}function U0(n,e){var t=e[e4];t===void 0&&(t=e[e4]=new Set);var r=n+"__bubble";t.has(r)||(DO(e,n,2,!1),t.add(r))}function kv(n,e,t){var r=0;e&&(r|=4),DO(t,n,r,e)}var YS="_reactListening"+Math.random().toString(36).slice(2);function Ap(n){if(!n[YS]){n[YS]=!0,B5.forEach(function(t){t!=="selectionchange"&&(Cre.has(t)||kv(t,!1,n),kv(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[YS]||(e[YS]=!0,kv("selectionchange",!1,e))}}function DO(n,e,t,r){switch(uO(e)){case 1:var i=N0e;break;case 4:i=U0e;break;default:i=yC}t=i.bind(null,e,t,n),i=void 0,!Hy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Nv(n,e,t,r,i){var a=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=Cu(s),o===null)return;if(l=o.tag,l===5||l===6){r=a=o;continue e}s=s.parentNode}}r=r.return}Q5(function(){var u=a,d=_C(t),h=[];e:{var f=CO.get(n);if(f!==void 0){var m=CC,g=n;switch(n){case"keypress":if(Ug(t)===0)break e;case"keydown":case"keyup":m=tre;break;case"focusin":g="focus",m=Rv;break;case"focusout":g="blur",m=Rv;break;case"beforeblur":case"afterblur":m=Rv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=rP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=H0e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=ire;break;case vO:case wO:case yO:m=X0e;break;case EO:m=ore;break;case"scroll":m=j0e;break;case"wheel":m=lre;break;case"copy":case"cut":case"paste":m=Y0e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=aP}var _=(e&4)!==0,E=!_&&n==="scroll",x=_?f!==null?f+"Capture":null:f;_=[];for(var v=u,C;v!==null;){C=v;var V=C.stateNode;if(C.tag===5&&V!==null&&(C=V,x!==null&&(V=op(v,x),V!=null&&_.push(fp(v,V,C)))),E)break;v=v.return}0<_.length&&(f=new m(f,g,null,t,d),h.push({event:f,listeners:_}))}}if((e&7)===0){e:{if(f=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",f&&t!==jy&&(g=t.relatedTarget||t.fromElement)&&(Cu(g)||g[sl]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=u,g=g?Cu(g):null,g!==null&&(E=nd(g),g!==E||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(_=rP,V="onMouseLeave",x="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(_=aP,V="onPointerLeave",x="onPointerEnter",v="pointer"),E=m==null?f:B1(m),C=g==null?f:B1(g),f=new _(V,v+"leave",m,t,d),f.target=E,f.relatedTarget=C,V=null,Cu(d)===u&&(_=new _(x,v+"enter",g,t,d),_.target=C,_.relatedTarget=E,V=_),E=V,m&&g)t:{for(_=m,x=g,v=0,C=_;C;C=f1(C))v++;for(C=0,V=x;V;V=f1(V))C++;for(;0<v-C;)_=f1(_),v--;for(;0<C-v;)x=f1(x),C--;for(;v--;){if(_===x||x!==null&&_===x.alternate)break t;_=f1(_),x=f1(x)}_=null}else _=null;m!==null&&mP(h,f,m,_,!1),g!==null&&E!==null&&mP(h,E,g,_,!0)}}e:{if(f=u?B1(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var D=pre;else if(lP(f))if(mO)D=_re;else{D=Sre;var H=mre}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=gre);if(D&&(D=D(n,u))){pO(h,D,t,d);break e}H&&H(n,f,u),n==="focusout"&&(H=f._wrapperState)&&H.controlled&&f.type==="number"&&Iy(f,"number",f.value)}switch(H=u?B1(u):window,n){case"focusin":(lP(H)||H.contentEditable==="true")&&(R1=H,Yy=u,Ch=null);break;case"focusout":Ch=Yy=R1=null;break;case"mousedown":qy=!0;break;case"contextmenu":case"mouseup":case"dragend":qy=!1,fP(h,t,d);break;case"selectionchange":if(wre)break;case"keydown":case"keyup":fP(h,t,d)}var R;if(DC)e:{switch(n){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else P1?fO(n,t)&&(j="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(j="onCompositionStart");j&&(AO&&t.locale!=="ko"&&(P1||j!=="onCompositionStart"?j==="onCompositionEnd"&&P1&&(R=dO()):($l=d,EC="value"in $l?$l.value:$l.textContent,P1=!0)),H=L8(u,j),0<H.length&&(j=new iP(j,n,null,t,d),h.push({event:j,listeners:H}),R?j.data=R:(R=hO(t),R!==null&&(j.data=R)))),(R=ure?dre(n,t):Are(n,t))&&(u=L8(u,"onBeforeInput"),0<u.length&&(d=new iP("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:u}),d.data=R))}VO(h,e)})}function fp(n,e,t){return{instance:n,listener:e,currentTarget:t}}function L8(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=op(n,t),a!=null&&r.unshift(fp(n,a,i)),a=op(n,e),a!=null&&r.push(fp(n,a,i))),n=n.return}return r}function f1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function mP(n,e,t,r,i){for(var a=e._reactName,o=[];t!==null&&t!==r;){var s=t,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,i?(l=op(t,a),l!=null&&o.unshift(fp(t,l,s))):i||(l=op(t,a),l!=null&&o.push(fp(t,l,s)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Vre=/\r\n?/g,Dre=/\u0000|\uFFFD/g;function SP(n){return(typeof n=="string"?n:""+n).replace(Vre,`
`).replace(Dre,"")}function qS(n,e,t){if(e=SP(e),SP(n)!==e&&t)throw Error(Et(425))}function B8(){}var Qy=null,Jy=null;function Zy(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $y=typeof setTimeout=="function"?setTimeout:void 0,Fre=typeof clearTimeout=="function"?clearTimeout:void 0,gP=typeof Promise=="function"?Promise:void 0,Tre=typeof queueMicrotask=="function"?queueMicrotask:typeof gP<"u"?function(n){return gP.resolve(null).then(n).catch(bre)}:$y;function bre(n){setTimeout(function(){throw n})}function Uv(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),cp(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);cp(e)}function uc(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function _P(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var WA=Math.random().toString(36).slice(2),us="__reactFiber$"+WA,hp="__reactProps$"+WA,sl="__reactContainer$"+WA,e4="__reactEvents$"+WA,Pre="__reactListeners$"+WA,Rre="__reactHandles$"+WA;function Cu(n){var e=n[us];if(e)return e;for(var t=n.parentNode;t;){if(e=t[sl]||t[us]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=_P(n);n!==null;){if(t=n[us])return t;n=_P(n)}return e}n=t,t=n.parentNode}return null}function $p(n){return n=n[us]||n[sl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function B1(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Et(33))}function B_(n){return n[hp]||null}var t4=[],M1=-1;function Ic(n){return{current:n}}function H0(n){0>M1||(n.current=t4[M1],t4[M1]=null,M1--)}function M0(n,e){M1++,t4[M1]=n.current,n.current=e}var yc={},Oi=Ic(yc),ua=Ic(!1),Wu=yc;function pA(n,e){var t=n.type.contextTypes;if(!t)return yc;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in t)i[a]=e[a];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function da(n){return n=n.childContextTypes,n!=null}function M8(){H0(ua),H0(Oi)}function xP(n,e,t){if(Oi.current!==yc)throw Error(Et(168));M0(Oi,e),M0(ua,t)}function FO(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Et(108,m0e(n)||"Unknown",i));return sr({},t,r)}function I8(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||yc,Wu=Oi.current,M0(Oi,n),M0(ua,ua.current),!0}function vP(n,e,t){var r=n.stateNode;if(!r)throw Error(Et(169));t?(n=FO(n,e,Wu),r.__reactInternalMemoizedMergedChildContext=n,H0(ua),H0(Oi),M0(Oi,n)):H0(ua),M0(ua,t)}var Ws=null,M_=!1,jv=!1;function TO(n){Ws===null?Ws=[n]:Ws.push(n)}function Lre(n){M_=!0,TO(n)}function Oc(){if(!jv&&Ws!==null){jv=!0;var n=0,e=A0;try{var t=Ws;for(A0=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Ws=null,M_=!1}catch(i){throw Ws!==null&&(Ws=Ws.slice(n+1)),eO(xC,Oc),i}finally{A0=e,jv=!1}}return null}var I1=[],O1=0,O8=null,k8=0,$a=[],eo=0,Xu=null,qs=1,Qs="";function mu(n,e){I1[O1++]=k8,I1[O1++]=O8,O8=n,k8=e}function bO(n,e,t){$a[eo++]=qs,$a[eo++]=Qs,$a[eo++]=Xu,Xu=n;var r=qs;n=Qs;var i=32-Io(r)-1;r&=~(1<<i),t+=1;var a=32-Io(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qs=1<<32-Io(e)+i|t<<i|r,Qs=a+n}else qs=1<<a|t<<i|r,Qs=n}function TC(n){n.return!==null&&(mu(n,1),bO(n,1,0))}function bC(n){for(;n===O8;)O8=I1[--O1],I1[O1]=null,k8=I1[--O1],I1[O1]=null;for(;n===Xu;)Xu=$a[--eo],$a[eo]=null,Qs=$a[--eo],$a[eo]=null,qs=$a[--eo],$a[eo]=null}var Ra=null,Da=null,er=!1,To=null;function PO(n,e){var t=no(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function wP(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ra=n,Da=uc(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ra=n,Da=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Xu!==null?{id:qs,overflow:Qs}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=no(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ra=n,Da=null,!0):!1;default:return!1}}function n4(n){return(n.mode&1)!==0&&(n.flags&128)===0}function r4(n){if(er){var e=Da;if(e){var t=e;if(!wP(n,e)){if(n4(n))throw Error(Et(418));e=uc(t.nextSibling);var r=Ra;e&&wP(n,e)?PO(r,t):(n.flags=n.flags&-4097|2,er=!1,Ra=n)}}else{if(n4(n))throw Error(Et(418));n.flags=n.flags&-4097|2,er=!1,Ra=n}}}function yP(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ra=n}function QS(n){if(n!==Ra)return!1;if(!er)return yP(n),er=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Zy(n.type,n.memoizedProps)),e&&(e=Da)){if(n4(n))throw RO(),Error(Et(418));for(;e;)PO(n,e),e=uc(e.nextSibling)}if(yP(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Et(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Da=uc(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Da=null}}else Da=Ra?uc(n.stateNode.nextSibling):null;return!0}function RO(){for(var n=Da;n;)n=uc(n.nextSibling)}function mA(){Da=Ra=null,er=!1}function PC(n){To===null?To=[n]:To.push(n)}var Bre=Al.ReactCurrentBatchConfig;function Do(n,e){if(n&&n.defaultProps){e=sr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var N8=Ic(null),U8=null,k1=null,RC=null;function LC(){RC=k1=U8=null}function BC(n){var e=N8.current;H0(N8),n._currentValue=e}function i4(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function eA(n,e){U8=n,RC=k1=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&e)!==0&&(ca=!0),n.firstContext=null)}function so(n){var e=n._currentValue;if(RC!==n)if(n={context:n,memoizedValue:e,next:null},k1===null){if(U8===null)throw Error(Et(308));k1=n,U8.dependencies={lanes:0,firstContext:n}}else k1=k1.next=n;return e}var Vu=null;function MC(n){Vu===null?Vu=[n]:Vu.push(n)}function LO(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,MC(e)):(t.next=i.next,i.next=t),e.interleaved=t,ll(n,r)}function ll(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Wl=!1;function IC(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BO(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Zs(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function dc(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,(qn&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ll(n,t)}return i=r.interleaved,i===null?(e.next=e,MC(r)):(e.next=i.next,i.next=e),r.interleaved=e,ll(n,t)}function jg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,vC(n,t)}}function EP(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,a=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};a===null?i=a=o:a=a.next=o,t=t.next}while(t!==null);a===null?i=a=e:a=a.next=e}else i=a=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function j8(n,e,t,r){var i=n.updateQueue;Wl=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==o&&(s===null?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=l))}if(a!==null){var h=i.baseState;o=0,d=u=l=null,s=a;do{var f=s.lane,m=s.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=n,_=s;switch(f=e,m=t,_.tag){case 1:if(g=_.payload,typeof g=="function"){h=g.call(m,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=_.payload,f=typeof g=="function"?g.call(m,h,f):g,f==null)break e;h=sr({},h,f);break e;case 2:Wl=!0}}s.callback!==null&&s.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else m={eventTime:m,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(u=d=m,l=h):d=d.next=m,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Yu|=o,n.lanes=o,n.memoizedState=h}}function CP(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Et(191,i));i.call(r)}}}var MO=new L5.Component().refs;function a4(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:sr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var I_={isMounted:function(n){return(n=n._reactInternals)?nd(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Ji(),i=fc(n),a=Zs(r,i);a.payload=e,t!=null&&(a.callback=t),e=dc(n,a,i),e!==null&&(Oo(e,n,i,r),jg(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Ji(),i=fc(n),a=Zs(r,i);a.tag=1,a.payload=e,t!=null&&(a.callback=t),e=dc(n,a,i),e!==null&&(Oo(e,n,i,r),jg(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ji(),r=fc(n),i=Zs(t,r);i.tag=2,e!=null&&(i.callback=e),e=dc(n,i,r),e!==null&&(Oo(e,n,r,t),jg(e,n,r))}};function VP(n,e,t,r,i,a,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!dp(t,r)||!dp(i,a):!0}function IO(n,e,t){var r=!1,i=yc,a=e.contextType;return typeof a=="object"&&a!==null?a=so(a):(i=da(e)?Wu:Oi.current,r=e.contextTypes,a=(r=r!=null)?pA(n,i):yc),e=new e(t,a),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=I_,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=a),e}function DP(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&I_.enqueueReplaceState(e,e.state,null)}function o4(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=MO,IC(n);var a=e.contextType;typeof a=="object"&&a!==null?i.context=so(a):(a=da(e)?Wu:Oi.current,i.context=pA(n,a)),i.state=n.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(a4(n,e,a,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&I_.enqueueReplaceState(i,i.state,null),j8(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Hf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Et(309));var r=t.stateNode}if(!r)throw Error(Et(147,n));var i=r,a=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;s===MO&&(s=i.refs={}),o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof n!="string")throw Error(Et(284));if(!t._owner)throw Error(Et(290,n))}return n}function JS(n,e){throw n=Object.prototype.toString.call(e),Error(Et(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function FP(n){var e=n._init;return e(n._payload)}function OO(n){function e(x,v){if(n){var C=x.deletions;C===null?(x.deletions=[v],x.flags|=16):C.push(v)}}function t(x,v){if(!n)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function i(x,v){return x=hc(x,v),x.index=0,x.sibling=null,x}function a(x,v,C){return x.index=C,n?(C=x.alternate,C!==null?(C=C.index,C<v?(x.flags|=2,v):C):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return n&&x.alternate===null&&(x.flags|=2),x}function s(x,v,C,V){return v===null||v.tag!==6?(v=Yv(C,x.mode,V),v.return=x,v):(v=i(v,C),v.return=x,v)}function l(x,v,C,V){var D=C.type;return D===b1?d(x,v,C.props.children,V,C.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===zl&&FP(D)===v.type)?(V=i(v,C.props),V.ref=Hf(x,v,C),V.return=x,V):(V=Kg(C.type,C.key,C.props,null,x.mode,V),V.ref=Hf(x,v,C),V.return=x,V)}function u(x,v,C,V){return v===null||v.tag!==4||v.stateNode.containerInfo!==C.containerInfo||v.stateNode.implementation!==C.implementation?(v=qv(C,x.mode,V),v.return=x,v):(v=i(v,C.children||[]),v.return=x,v)}function d(x,v,C,V,D){return v===null||v.tag!==7?(v=Iu(C,x.mode,V,D),v.return=x,v):(v=i(v,C),v.return=x,v)}function h(x,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Yv(""+v,x.mode,C),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case US:return C=Kg(v.type,v.key,v.props,null,x.mode,C),C.ref=Hf(x,null,v),C.return=x,C;case T1:return v=qv(v,x.mode,C),v.return=x,v;case zl:var V=v._init;return h(x,V(v._payload),C)}if(dh(v)||kf(v))return v=Iu(v,x.mode,C,null),v.return=x,v;JS(x,v)}return null}function f(x,v,C,V){var D=v!==null?v.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return D!==null?null:s(x,v,""+C,V);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case US:return C.key===D?l(x,v,C,V):null;case T1:return C.key===D?u(x,v,C,V):null;case zl:return D=C._init,f(x,v,D(C._payload),V)}if(dh(C)||kf(C))return D!==null?null:d(x,v,C,V,null);JS(x,C)}return null}function m(x,v,C,V,D){if(typeof V=="string"&&V!==""||typeof V=="number")return x=x.get(C)||null,s(v,x,""+V,D);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case US:return x=x.get(V.key===null?C:V.key)||null,l(v,x,V,D);case T1:return x=x.get(V.key===null?C:V.key)||null,u(v,x,V,D);case zl:var H=V._init;return m(x,v,C,H(V._payload),D)}if(dh(V)||kf(V))return x=x.get(C)||null,d(v,x,V,D,null);JS(v,V)}return null}function g(x,v,C,V){for(var D=null,H=null,R=v,j=v=0,te=null;R!==null&&j<C.length;j++){R.index>j?(te=R,R=null):te=R.sibling;var $=f(x,R,C[j],V);if($===null){R===null&&(R=te);break}n&&R&&$.alternate===null&&e(x,R),v=a($,v,j),H===null?D=$:H.sibling=$,H=$,R=te}if(j===C.length)return t(x,R),er&&mu(x,j),D;if(R===null){for(;j<C.length;j++)R=h(x,C[j],V),R!==null&&(v=a(R,v,j),H===null?D=R:H.sibling=R,H=R);return er&&mu(x,j),D}for(R=r(x,R);j<C.length;j++)te=m(R,x,j,C[j],V),te!==null&&(n&&te.alternate!==null&&R.delete(te.key===null?j:te.key),v=a(te,v,j),H===null?D=te:H.sibling=te,H=te);return n&&R.forEach(function(z){return e(x,z)}),er&&mu(x,j),D}function _(x,v,C,V){var D=kf(C);if(typeof D!="function")throw Error(Et(150));if(C=D.call(C),C==null)throw Error(Et(151));for(var H=D=null,R=v,j=v=0,te=null,$=C.next();R!==null&&!$.done;j++,$=C.next()){R.index>j?(te=R,R=null):te=R.sibling;var z=f(x,R,$.value,V);if(z===null){R===null&&(R=te);break}n&&R&&z.alternate===null&&e(x,R),v=a(z,v,j),H===null?D=z:H.sibling=z,H=z,R=te}if($.done)return t(x,R),er&&mu(x,j),D;if(R===null){for(;!$.done;j++,$=C.next())$=h(x,$.value,V),$!==null&&(v=a($,v,j),H===null?D=$:H.sibling=$,H=$);return er&&mu(x,j),D}for(R=r(x,R);!$.done;j++,$=C.next())$=m(R,x,j,$.value,V),$!==null&&(n&&$.alternate!==null&&R.delete($.key===null?j:$.key),v=a($,v,j),H===null?D=$:H.sibling=$,H=$);return n&&R.forEach(function(I){return e(x,I)}),er&&mu(x,j),D}function E(x,v,C,V){if(typeof C=="object"&&C!==null&&C.type===b1&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case US:e:{for(var D=C.key,H=v;H!==null;){if(H.key===D){if(D=C.type,D===b1){if(H.tag===7){t(x,H.sibling),v=i(H,C.props.children),v.return=x,x=v;break e}}else if(H.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===zl&&FP(D)===H.type){t(x,H.sibling),v=i(H,C.props),v.ref=Hf(x,H,C),v.return=x,x=v;break e}t(x,H);break}else e(x,H);H=H.sibling}C.type===b1?(v=Iu(C.props.children,x.mode,V,C.key),v.return=x,x=v):(V=Kg(C.type,C.key,C.props,null,x.mode,V),V.ref=Hf(x,v,C),V.return=x,x=V)}return o(x);case T1:e:{for(H=C.key;v!==null;){if(v.key===H)if(v.tag===4&&v.stateNode.containerInfo===C.containerInfo&&v.stateNode.implementation===C.implementation){t(x,v.sibling),v=i(v,C.children||[]),v.return=x,x=v;break e}else{t(x,v);break}else e(x,v);v=v.sibling}v=qv(C,x.mode,V),v.return=x,x=v}return o(x);case zl:return H=C._init,E(x,v,H(C._payload),V)}if(dh(C))return g(x,v,C,V);if(kf(C))return _(x,v,C,V);JS(x,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,v!==null&&v.tag===6?(t(x,v.sibling),v=i(v,C),v.return=x,x=v):(t(x,v),v=Yv(C,x.mode,V),v.return=x,x=v),o(x)):t(x,v)}return E}var SA=OO(!0),kO=OO(!1),em={},ps=Ic(em),pp=Ic(em),mp=Ic(em);function Du(n){if(n===em)throw Error(Et(174));return n}function OC(n,e){switch(M0(mp,e),M0(pp,n),M0(ps,em),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ky(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ky(e,n)}H0(ps),M0(ps,e)}function gA(){H0(ps),H0(pp),H0(mp)}function NO(n){Du(mp.current);var e=Du(ps.current),t=ky(e,n.type);e!==t&&(M0(pp,n),M0(ps,t))}function kC(n){pp.current===n&&(H0(ps),H0(pp))}var ir=Ic(0);function G8(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gv=[];function NC(){for(var n=0;n<Gv.length;n++)Gv[n]._workInProgressVersionPrimary=null;Gv.length=0}var Gg=Al.ReactCurrentDispatcher,Hv=Al.ReactCurrentBatchConfig,Ku=0,or=null,Xr=null,ni=null,H8=!1,Vh=!1,Sp=0,Mre=0;function bi(){throw Error(Et(321))}function UC(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ho(n[t],e[t]))return!1;return!0}function jC(n,e,t,r,i,a){if(Ku=a,or=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gg.current=n===null||n.memoizedState===null?Nre:Ure,n=t(r,i),Vh){a=0;do{if(Vh=!1,Sp=0,25<=a)throw Error(Et(301));a+=1,ni=Xr=null,e.updateQueue=null,Gg.current=jre,n=t(r,i)}while(Vh)}if(Gg.current=z8,e=Xr!==null&&Xr.next!==null,Ku=0,ni=Xr=or=null,H8=!1,e)throw Error(Et(300));return n}function GC(){var n=Sp!==0;return Sp=0,n}function os(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ni===null?or.memoizedState=ni=n:ni=ni.next=n,ni}function lo(){if(Xr===null){var n=or.alternate;n=n!==null?n.memoizedState:null}else n=Xr.next;var e=ni===null?or.memoizedState:ni.next;if(e!==null)ni=e,Xr=n;else{if(n===null)throw Error(Et(310));Xr=n,n={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},ni===null?or.memoizedState=ni=n:ni=ni.next=n}return ni}function gp(n,e){return typeof e=="function"?e(n):e}function zv(n){var e=lo(),t=e.queue;if(t===null)throw Error(Et(311));t.lastRenderedReducer=n;var r=Xr,i=r.baseQueue,a=t.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,t.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,l=null,u=a;do{var d=u.lane;if((Ku&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=h,o=r):l=l.next=h,or.lanes|=d,Yu|=d}u=u.next}while(u!==null&&u!==a);l===null?o=r:l.next=s,Ho(r,e.memoizedState)||(ca=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do a=i.lane,or.lanes|=a,Yu|=a,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Wv(n){var e=lo(),t=e.queue;if(t===null)throw Error(Et(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,a=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do a=n(a,o.action),o=o.next;while(o!==i);Ho(a,e.memoizedState)||(ca=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),t.lastRenderedState=a}return[a,r]}function UO(){}function jO(n,e){var t=or,r=lo(),i=e(),a=!Ho(r.memoizedState,i);if(a&&(r.memoizedState=i,ca=!0),r=r.queue,HC(zO.bind(null,t,r,n),[n]),r.getSnapshot!==e||a||ni!==null&&ni.memoizedState.tag&1){if(t.flags|=2048,_p(9,HO.bind(null,t,r,i,e),void 0,null),ii===null)throw Error(Et(349));(Ku&30)!==0||GO(t,e,i)}return i}function GO(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function HO(n,e,t,r){e.value=t,e.getSnapshot=r,WO(e)&&XO(n)}function zO(n,e,t){return t(function(){WO(e)&&XO(n)})}function WO(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ho(n,t)}catch{return!0}}function XO(n){var e=ll(n,1);e!==null&&Oo(e,n,1,-1)}function TP(n){var e=os();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gp,lastRenderedState:n},e.queue=n,n=n.dispatch=kre.bind(null,or,n),[e.memoizedState,n]}function _p(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function KO(){return lo().memoizedState}function Hg(n,e,t,r){var i=os();or.flags|=n,i.memoizedState=_p(1|e,t,void 0,r===void 0?null:r)}function O_(n,e,t,r){var i=lo();r=r===void 0?null:r;var a=void 0;if(Xr!==null){var o=Xr.memoizedState;if(a=o.destroy,r!==null&&UC(r,o.deps)){i.memoizedState=_p(e,t,a,r);return}}or.flags|=n,i.memoizedState=_p(1|e,t,a,r)}function bP(n,e){return Hg(8390656,8,n,e)}function HC(n,e){return O_(2048,8,n,e)}function YO(n,e){return O_(4,2,n,e)}function qO(n,e){return O_(4,4,n,e)}function QO(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function JO(n,e,t){return t=t!=null?t.concat([n]):null,O_(4,4,QO.bind(null,e,n),t)}function zC(){}function ZO(n,e){var t=lo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&UC(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function $O(n,e){var t=lo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&UC(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function ek(n,e,t){return(Ku&21)===0?(n.baseState&&(n.baseState=!1,ca=!0),n.memoizedState=t):(Ho(t,e)||(t=rO(),or.lanes|=t,Yu|=t,n.baseState=!0),e)}function Ire(n,e){var t=A0;A0=t!==0&&4>t?t:4,n(!0);var r=Hv.transition;Hv.transition={};try{n(!1),e()}finally{A0=t,Hv.transition=r}}function tk(){return lo().memoizedState}function Ore(n,e,t){var r=fc(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},nk(n))rk(e,t);else if(t=LO(n,e,t,r),t!==null){var i=Ji();Oo(t,n,r,i),ik(t,e,r)}}function kre(n,e,t){var r=fc(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(nk(n))rk(e,i);else{var a=n.alternate;if(n.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,t);if(i.hasEagerState=!0,i.eagerState=s,Ho(s,o)){var l=e.interleaved;l===null?(i.next=i,MC(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=LO(n,e,i,r),t!==null&&(i=Ji(),Oo(t,n,r,i),ik(t,e,r))}}function nk(n){var e=n.alternate;return n===or||e!==null&&e===or}function rk(n,e){Vh=H8=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function ik(n,e,t){if((t&4194240)!==0){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,vC(n,t)}}var z8={readContext:so,useCallback:bi,useContext:bi,useEffect:bi,useImperativeHandle:bi,useInsertionEffect:bi,useLayoutEffect:bi,useMemo:bi,useReducer:bi,useRef:bi,useState:bi,useDebugValue:bi,useDeferredValue:bi,useTransition:bi,useMutableSource:bi,useSyncExternalStore:bi,useId:bi,unstable_isNewReconciler:!1},Nre={readContext:so,useCallback:function(n,e){return os().memoizedState=[n,e===void 0?null:e],n},useContext:so,useEffect:bP,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Hg(4194308,4,QO.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Hg(4194308,4,n,e)},useInsertionEffect:function(n,e){return Hg(4,2,n,e)},useMemo:function(n,e){var t=os();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=os();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Ore.bind(null,or,n),[r.memoizedState,n]},useRef:function(n){var e=os();return n={current:n},e.memoizedState=n},useState:TP,useDebugValue:zC,useDeferredValue:function(n){return os().memoizedState=n},useTransition:function(){var n=TP(!1),e=n[0];return n=Ire.bind(null,n[1]),os().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=or,i=os();if(er){if(t===void 0)throw Error(Et(407));t=t()}else{if(t=e(),ii===null)throw Error(Et(349));(Ku&30)!==0||GO(r,e,t)}i.memoizedState=t;var a={value:t,getSnapshot:e};return i.queue=a,bP(zO.bind(null,r,a,n),[n]),r.flags|=2048,_p(9,HO.bind(null,r,a,t,e),void 0,null),t},useId:function(){var n=os(),e=ii.identifierPrefix;if(er){var t=Qs,r=qs;t=(r&~(1<<32-Io(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Sp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Mre++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Ure={readContext:so,useCallback:ZO,useContext:so,useEffect:HC,useImperativeHandle:JO,useInsertionEffect:YO,useLayoutEffect:qO,useMemo:$O,useReducer:zv,useRef:KO,useState:function(){return zv(gp)},useDebugValue:zC,useDeferredValue:function(n){var e=lo();return ek(e,Xr.memoizedState,n)},useTransition:function(){var n=zv(gp)[0],e=lo().memoizedState;return[n,e]},useMutableSource:UO,useSyncExternalStore:jO,useId:tk,unstable_isNewReconciler:!1},jre={readContext:so,useCallback:ZO,useContext:so,useEffect:HC,useImperativeHandle:JO,useInsertionEffect:YO,useLayoutEffect:qO,useMemo:$O,useReducer:Wv,useRef:KO,useState:function(){return Wv(gp)},useDebugValue:zC,useDeferredValue:function(n){var e=lo();return Xr===null?e.memoizedState=n:ek(e,Xr.memoizedState,n)},useTransition:function(){var n=Wv(gp)[0],e=lo().memoizedState;return[n,e]},useMutableSource:UO,useSyncExternalStore:jO,useId:tk,unstable_isNewReconciler:!1};function _A(n,e){try{var t="",r=e;do t+=p0e(r),r=r.return;while(r);var i=t}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:n,source:e,stack:i,digest:null}}function Xv(n,e,t){return{value:n,source:null,stack:t!=null?t:null,digest:e!=null?e:null}}function s4(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Gre=typeof WeakMap=="function"?WeakMap:Map;function ak(n,e,t){t=Zs(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){X8||(X8=!0,S4=r),s4(n,e)},t}function ok(n,e,t){t=Zs(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){s4(n,e)}}var a=n.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){s4(n,e),typeof r!="function"&&(Ac===null?Ac=new Set([this]):Ac.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function PP(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Gre;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=nie.bind(null,n,e,t),e.then(n,n))}function RP(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function LP(n,e,t,r,i){return(n.mode&1)===0?(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Zs(-1,1),e.tag=2,dc(t,e,1))),t.lanes|=1),n):(n.flags|=65536,n.lanes=i,n)}var Hre=Al.ReactCurrentOwner,ca=!1;function Yi(n,e,t,r){e.child=n===null?kO(e,null,t,r):SA(e,n.child,t,r)}function BP(n,e,t,r,i){t=t.render;var a=e.ref;return eA(e,i),r=jC(n,e,t,r,a,i),t=GC(),n!==null&&!ca?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,cl(n,e,i)):(er&&t&&TC(e),e.flags|=1,Yi(n,e,r,i),e.child)}function MP(n,e,t,r,i){if(n===null){var a=t.type;return typeof a=="function"&&!ZC(a)&&a.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=a,sk(n,e,a,r,i)):(n=Kg(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(a=n.child,(n.lanes&i)===0){var o=a.memoizedProps;if(t=t.compare,t=t!==null?t:dp,t(o,r)&&n.ref===e.ref)return cl(n,e,i)}return e.flags|=1,n=hc(a,r),n.ref=e.ref,n.return=e,e.child=n}function sk(n,e,t,r,i){if(n!==null){var a=n.memoizedProps;if(dp(a,r)&&n.ref===e.ref)if(ca=!1,e.pendingProps=r=a,(n.lanes&i)!==0)(n.flags&131072)!==0&&(ca=!0);else return e.lanes=n.lanes,cl(n,e,i)}return l4(n,e,t,r,i)}function lk(n,e,t){var r=e.pendingProps,i=r.children,a=n!==null?n.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},M0(U1,ya),ya|=t;else{if((t&1073741824)===0)return n=a!==null?a.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,M0(U1,ya),ya|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:t,M0(U1,ya),ya|=r}else a!==null?(r=a.baseLanes|t,e.memoizedState=null):r=t,M0(U1,ya),ya|=r;return Yi(n,e,i,t),e.child}function ck(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function l4(n,e,t,r,i){var a=da(t)?Wu:Oi.current;return a=pA(e,a),eA(e,i),t=jC(n,e,t,r,a,i),r=GC(),n!==null&&!ca?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,cl(n,e,i)):(er&&r&&TC(e),e.flags|=1,Yi(n,e,t,i),e.child)}function IP(n,e,t,r,i){if(da(t)){var a=!0;I8(e)}else a=!1;if(eA(e,i),e.stateNode===null)zg(n,e),IO(e,t,r),o4(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=so(u):(u=da(t)?Wu:Oi.current,u=pA(e,u));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&DP(e,o,r,u),Wl=!1;var f=e.memoizedState;o.state=f,j8(e,r,o,i),l=e.memoizedState,s!==r||f!==l||ua.current||Wl?(typeof d=="function"&&(a4(e,t,d,r),l=e.memoizedState),(s=Wl||VP(e,t,s,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,BO(n,e),s=e.memoizedProps,u=e.type===e.elementType?s:Do(e.type,s),o.props=u,h=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=so(l):(l=da(t)?Wu:Oi.current,l=pA(e,l));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==h||f!==l)&&DP(e,o,r,l),Wl=!1,f=e.memoizedState,o.state=f,j8(e,r,o,i);var g=e.memoizedState;s!==h||f!==g||ua.current||Wl?(typeof m=="function"&&(a4(e,t,m,r),g=e.memoizedState),(u=Wl||VP(e,t,u,r,f,g,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return c4(n,e,t,r,a,i)}function c4(n,e,t,r,i,a){ck(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&vP(e,t,!1),cl(n,e,a);r=e.stateNode,Hre.current=e;var s=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=SA(e,n.child,null,a),e.child=SA(e,null,s,a)):Yi(n,e,s,a),e.memoizedState=r.state,i&&vP(e,t,!0),e.child}function uk(n){var e=n.stateNode;e.pendingContext?xP(n,e.pendingContext,e.pendingContext!==e.context):e.context&&xP(n,e.context,!1),OC(n,e.containerInfo)}function OP(n,e,t,r,i){return mA(),PC(i),e.flags|=256,Yi(n,e,t,r),e.child}var u4={dehydrated:null,treeContext:null,retryLane:0};function d4(n){return{baseLanes:n,cachePool:null,transitions:null}}function dk(n,e,t){var r=e.pendingProps,i=ir.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=n!==null&&n.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),M0(ir,i&1),n===null)return r4(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((e.mode&1)===0?e.lanes=1:n.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,n=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},(r&1)===0&&a!==null?(a.childLanes=0,a.pendingProps=o):a=U_(o,r,0,null),n=Iu(n,r,t,null),a.return=e,n.return=e,a.sibling=n,e.child=a,e.child.memoizedState=d4(t),e.memoizedState=u4,n):WC(e,o));if(i=n.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return zre(n,e,o,r,s,i,t);if(a){a=r.fallback,o=e.mode,i=n.child,s=i.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=hc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=hc(s,a):(a=Iu(a,o,t,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=n.child.memoizedState,o=o===null?d4(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=n.childLanes&~t,e.memoizedState=u4,r}return a=n.child,n=a.sibling,r=hc(a,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function WC(n,e){return e=U_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ZS(n,e,t,r){return r!==null&&PC(r),SA(e,n.child,null,t),n=WC(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function zre(n,e,t,r,i,a,o){if(t)return e.flags&256?(e.flags&=-257,r=Xv(Error(Et(422))),ZS(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=U_({mode:"visible",children:r.children},i,0,null),a=Iu(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,(e.mode&1)!==0&&SA(e,n.child,null,o),e.child.memoizedState=d4(o),e.memoizedState=u4,a);if((e.mode&1)===0)return ZS(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(Et(419)),r=Xv(a,r,void 0),ZS(n,e,o,r)}if(s=(o&n.childLanes)!==0,ca||s){if(r=ii,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ll(n,i),Oo(r,n,i,-1))}return JC(),r=Xv(Error(Et(421))),ZS(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=rie.bind(null,n),i._reactRetry=e,null):(n=a.treeContext,Da=uc(i.nextSibling),Ra=e,er=!0,To=null,n!==null&&($a[eo++]=qs,$a[eo++]=Qs,$a[eo++]=Xu,qs=n.id,Qs=n.overflow,Xu=e),e=WC(e,r.children),e.flags|=4096,e)}function kP(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),i4(n.return,e,t)}function Kv(n,e,t,r,i){var a=n.memoizedState;a===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=i)}function Ak(n,e,t){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Yi(n,e,r.children,t),r=ir.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&kP(n,t,e);else if(n.tag===19)kP(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(M0(ir,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&G8(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Kv(e,!1,i,t,a);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&G8(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Kv(e,!0,t,null,a);break;case"together":Kv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zg(n,e){(e.mode&1)===0&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function cl(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Yu|=e.lanes,(t&e.childLanes)===0)return null;if(n!==null&&e.child!==n.child)throw Error(Et(153));if(e.child!==null){for(n=e.child,t=hc(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=hc(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Wre(n,e,t){switch(e.tag){case 3:uk(e),mA();break;case 5:NO(e);break;case 1:da(e.type)&&I8(e);break;case 4:OC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;M0(N8,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(M0(ir,ir.current&1),e.flags|=128,null):(t&e.child.childLanes)!==0?dk(n,e,t):(M0(ir,ir.current&1),n=cl(n,e,t),n!==null?n.sibling:null);M0(ir,ir.current&1);break;case 19:if(r=(t&e.childLanes)!==0,(n.flags&128)!==0){if(r)return Ak(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),M0(ir,ir.current),r)break;return null;case 22:case 23:return e.lanes=0,lk(n,e,t)}return cl(n,e,t)}var fk,A4,hk,pk;fk=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};A4=function(){};hk=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Du(ps.current);var a=null;switch(t){case"input":i=By(n,i),r=By(n,r),a=[];break;case"select":i=sr({},i,{value:void 0}),r=sr({},r,{value:void 0}),a=[];break;case"textarea":i=Oy(n,i),r=Oy(n,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=B8)}Ny(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ip.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(a||(a=[]),a.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ip.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&U0("scroll",n),a||s===l||(a=[])):(a=a||[]).push(u,l))}t&&(a=a||[]).push("style",t);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};pk=function(n,e,t,r){t!==r&&(e.flags|=4)};function zf(n,e){if(!er)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Pi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Xre(n,e,t){var r=e.pendingProps;switch(bC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(e),null;case 1:return da(e.type)&&M8(),Pi(e),null;case 3:return r=e.stateNode,gA(),H0(ua),H0(Oi),NC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(QS(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,To!==null&&(x4(To),To=null))),A4(n,e),Pi(e),null;case 5:kC(e);var i=Du(mp.current);if(t=e.type,n!==null&&e.stateNode!=null)hk(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Et(166));return Pi(e),null}if(n=Du(ps.current),QS(e)){r=e.stateNode,t=e.type;var a=e.memoizedProps;switch(r[us]=e,r[hp]=a,n=(e.mode&1)!==0,t){case"dialog":U0("cancel",r),U0("close",r);break;case"iframe":case"object":case"embed":U0("load",r);break;case"video":case"audio":for(i=0;i<fh.length;i++)U0(fh[i],r);break;case"source":U0("error",r);break;case"img":case"image":case"link":U0("error",r),U0("load",r);break;case"details":U0("toggle",r);break;case"input":Kb(r,a),U0("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},U0("invalid",r);break;case"textarea":qb(r,a),U0("invalid",r)}Ny(t,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&qS(r.textContent,s,n),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&qS(r.textContent,s,n),i=["children",""+s]):ip.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&U0("scroll",r)}switch(t){case"input":jS(r),Yb(r,a,!0);break;case"textarea":jS(r),Qb(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=B8)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=G5(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[us]=e,n[hp]=r,fk(n,e,!1,!1),e.stateNode=n;e:{switch(o=Uy(t,r),t){case"dialog":U0("cancel",n),U0("close",n),i=r;break;case"iframe":case"object":case"embed":U0("load",n),i=r;break;case"video":case"audio":for(i=0;i<fh.length;i++)U0(fh[i],n);i=r;break;case"source":U0("error",n),i=r;break;case"img":case"image":case"link":U0("error",n),U0("load",n),i=r;break;case"details":U0("toggle",n),i=r;break;case"input":Kb(n,r),i=By(n,r),U0("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=sr({},r,{value:void 0}),U0("invalid",n);break;case"textarea":qb(n,r),i=Oy(n,r),U0("invalid",n);break;default:i=r}Ny(t,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?W5(n,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&H5(n,l)):a==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&ap(n,l):typeof l=="number"&&ap(n,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ip.hasOwnProperty(a)?l!=null&&a==="onScroll"&&U0("scroll",n):l!=null&&pC(n,a,l,o))}switch(t){case"input":jS(n),Yb(n,r,!1);break;case"textarea":jS(n),Qb(n);break;case"option":r.value!=null&&n.setAttribute("value",""+wc(r.value));break;case"select":n.multiple=!!r.multiple,a=r.value,a!=null?Q1(n,!!r.multiple,a,!1):r.defaultValue!=null&&Q1(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=B8)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pi(e),null;case 6:if(n&&e.stateNode!=null)pk(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Et(166));if(t=Du(mp.current),Du(ps.current),QS(e)){if(r=e.stateNode,t=e.memoizedProps,r[us]=e,(a=r.nodeValue!==t)&&(n=Ra,n!==null))switch(n.tag){case 3:qS(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&qS(r.nodeValue,t,(n.mode&1)!==0)}a&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[us]=e,e.stateNode=r}return Pi(e),null;case 13:if(H0(ir),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(er&&Da!==null&&(e.mode&1)!==0&&(e.flags&128)===0)RO(),mA(),e.flags|=98560,a=!1;else if(a=QS(e),r!==null&&r.dehydrated!==null){if(n===null){if(!a)throw Error(Et(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Et(317));a[us]=e}else mA(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Pi(e),a=!1}else To!==null&&(x4(To),To=null),a=!0;if(!a)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(n===null||(ir.current&1)!==0?Yr===0&&(Yr=3):JC())),e.updateQueue!==null&&(e.flags|=4),Pi(e),null);case 4:return gA(),A4(n,e),n===null&&Ap(e.stateNode.containerInfo),Pi(e),null;case 10:return BC(e.type._context),Pi(e),null;case 17:return da(e.type)&&M8(),Pi(e),null;case 19:if(H0(ir),a=e.memoizedState,a===null)return Pi(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)zf(a,!1);else{if(Yr!==0||n!==null&&(n.flags&128)!==0)for(n=e.child;n!==null;){if(o=G8(n),o!==null){for(e.flags|=128,zf(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)a=t,n=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=n,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,n=o.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return M0(ir,ir.current&1|2),e.child}n=n.sibling}a.tail!==null&&Er()>xA&&(e.flags|=128,r=!0,zf(a,!1),e.lanes=4194304)}else{if(!r)if(n=G8(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),zf(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!er)return Pi(e),null}else 2*Er()-a.renderingStartTime>xA&&t!==1073741824&&(e.flags|=128,r=!0,zf(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(t=a.last,t!==null?t.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Er(),e.sibling=null,t=ir.current,M0(ir,r?t&1|2:t&1),e):(Pi(e),null);case 22:case 23:return QC(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(ya&1073741824)!==0&&(Pi(e),e.subtreeFlags&6&&(e.flags|=8192)):Pi(e),null;case 24:return null;case 25:return null}throw Error(Et(156,e.tag))}function Kre(n,e){switch(bC(e),e.tag){case 1:return da(e.type)&&M8(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return gA(),H0(ua),H0(Oi),NC(),n=e.flags,(n&65536)!==0&&(n&128)===0?(e.flags=n&-65537|128,e):null;case 5:return kC(e),null;case 13:if(H0(ir),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Et(340));mA()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return H0(ir),null;case 4:return gA(),null;case 10:return BC(e.type._context),null;case 22:case 23:return QC(),null;case 24:return null;default:return null}}var $S=!1,Bi=!1,Yre=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function N1(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ar(n,e,r)}else t.current=null}function f4(n,e,t){try{t()}catch(r){Ar(n,e,r)}}var NP=!1;function qre(n,e){if(Qy=P8,n=_O(),FC(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{t.nodeType,a.nodeType}catch{t=null;break e}var o=0,s=-1,l=-1,u=0,d=0,h=n,f=null;t:for(;;){for(var m;h!==t||i!==0&&h.nodeType!==3||(s=o+i),h!==a||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===n)break t;if(f===t&&++u===i&&(s=o),f===a&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}t=s===-1||l===-1?null:{start:s,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Jy={focusedElem:n,selectionRange:t},P8=!1,Kt=e;Kt!==null;)if(e=Kt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Kt=n;else for(;Kt!==null;){e=Kt;try{var g=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var _=g.memoizedProps,E=g.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?_:Do(e.type,_),E);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Et(163))}}catch(V){Ar(e,e.return,V)}if(n=e.sibling,n!==null){n.return=e.return,Kt=n;break}Kt=e.return}return g=NP,NP=!1,g}function Dh(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var a=i.destroy;i.destroy=void 0,a!==void 0&&f4(e,t,a)}i=i.next}while(i!==r)}}function k_(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function h4(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function mk(n){var e=n.alternate;e!==null&&(n.alternate=null,mk(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[us],delete e[hp],delete e[e4],delete e[Pre],delete e[Rre])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Sk(n){return n.tag===5||n.tag===3||n.tag===4}function UP(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Sk(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function p4(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=B8));else if(r!==4&&(n=n.child,n!==null))for(p4(n,e,t),n=n.sibling;n!==null;)p4(n,e,t),n=n.sibling}function m4(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(m4(n,e,t),n=n.sibling;n!==null;)m4(n,e,t),n=n.sibling}var di=null,Fo=!1;function Ul(n,e,t){for(t=t.child;t!==null;)gk(n,e,t),t=t.sibling}function gk(n,e,t){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(b_,t)}catch{}switch(t.tag){case 5:Bi||N1(t,e);case 6:var r=di,i=Fo;di=null,Ul(n,e,t),di=r,Fo=i,di!==null&&(Fo?(n=di,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):di.removeChild(t.stateNode));break;case 18:di!==null&&(Fo?(n=di,t=t.stateNode,n.nodeType===8?Uv(n.parentNode,t):n.nodeType===1&&Uv(n,t),cp(n)):Uv(di,t.stateNode));break;case 4:r=di,i=Fo,di=t.stateNode.containerInfo,Fo=!0,Ul(n,e,t),di=r,Fo=i;break;case 0:case 11:case 14:case 15:if(!Bi&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&((a&2)!==0||(a&4)!==0)&&f4(t,e,o),i=i.next}while(i!==r)}Ul(n,e,t);break;case 1:if(!Bi&&(N1(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(s){Ar(t,e,s)}Ul(n,e,t);break;case 21:Ul(n,e,t);break;case 22:t.mode&1?(Bi=(r=Bi)||t.memoizedState!==null,Ul(n,e,t),Bi=r):Ul(n,e,t);break;default:Ul(n,e,t)}}function jP(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Yre),e.forEach(function(r){var i=iie.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Vo(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var a=n,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:di=s.stateNode,Fo=!1;break e;case 3:di=s.stateNode.containerInfo,Fo=!0;break e;case 4:di=s.stateNode.containerInfo,Fo=!0;break e}s=s.return}if(di===null)throw Error(Et(160));gk(a,o,i),di=null,Fo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ar(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_k(e,n),e=e.sibling}function _k(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Vo(e,n),Zo(n),r&4){try{Dh(3,n,n.return),k_(3,n)}catch(_){Ar(n,n.return,_)}try{Dh(5,n,n.return)}catch(_){Ar(n,n.return,_)}}break;case 1:Vo(e,n),Zo(n),r&512&&t!==null&&N1(t,t.return);break;case 5:if(Vo(e,n),Zo(n),r&512&&t!==null&&N1(t,t.return),n.flags&32){var i=n.stateNode;try{ap(i,"")}catch(_){Ar(n,n.return,_)}}if(r&4&&(i=n.stateNode,i!=null)){var a=n.memoizedProps,o=t!==null?t.memoizedProps:a,s=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&U5(i,a),Uy(s,o);var u=Uy(s,a);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?W5(i,h):d==="dangerouslySetInnerHTML"?H5(i,h):d==="children"?ap(i,h):pC(i,d,h,u)}switch(s){case"input":My(i,a);break;case"textarea":j5(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Q1(i,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?Q1(i,!!a.multiple,a.defaultValue,!0):Q1(i,!!a.multiple,a.multiple?[]:"",!1))}i[hp]=a}catch(_){Ar(n,n.return,_)}}break;case 6:if(Vo(e,n),Zo(n),r&4){if(n.stateNode===null)throw Error(Et(162));i=n.stateNode,a=n.memoizedProps;try{i.nodeValue=a}catch(_){Ar(n,n.return,_)}}break;case 3:if(Vo(e,n),Zo(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{cp(e.containerInfo)}catch(_){Ar(n,n.return,_)}break;case 4:Vo(e,n),Zo(n);break;case 13:Vo(e,n),Zo(n),i=n.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(YC=Er())),r&4&&jP(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Bi=(u=Bi)||d,Vo(e,n),Bi=u):Vo(e,n),Zo(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&(n.mode&1)!==0)for(Kt=n,d=n.child;d!==null;){for(h=Kt=d;Kt!==null;){switch(f=Kt,m=f.child,f.tag){case 0:case 11:case 14:case 15:Dh(4,f,f.return);break;case 1:N1(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(_){Ar(r,t,_)}}break;case 5:N1(f,f.return);break;case 22:if(f.memoizedState!==null){HP(h);continue}}m!==null?(m.return=f,Kt=m):HP(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=z5("display",o))}catch(_){Ar(n,n.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(_){Ar(n,n.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Vo(e,n),Zo(n),r&4&&jP(n);break;case 21:break;default:Vo(e,n),Zo(n)}}function Zo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Sk(t)){var r=t;break e}t=t.return}throw Error(Et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ap(i,""),r.flags&=-33);var a=UP(n);m4(n,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=UP(n);p4(n,s,o);break;default:throw Error(Et(161))}}catch(l){Ar(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Qre(n,e,t){Kt=n,xk(n)}function xk(n,e,t){for(var r=(n.mode&1)!==0;Kt!==null;){var i=Kt,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||$S;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||Bi;s=$S;var u=Bi;if($S=o,(Bi=l)&&!u)for(Kt=i;Kt!==null;)o=Kt,l=o.child,o.tag===22&&o.memoizedState!==null?zP(i):l!==null?(l.return=o,Kt=l):zP(i);for(;a!==null;)Kt=a,xk(a),a=a.sibling;Kt=i,$S=s,Bi=u}GP(n)}else(i.subtreeFlags&8772)!==0&&a!==null?(a.return=i,Kt=a):GP(n)}}function GP(n){for(;Kt!==null;){var e=Kt;if((e.flags&8772)!==0){var t=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Bi||k_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Bi)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Do(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&CP(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}CP(e,o,t)}break;case 5:var s=e.stateNode;if(t===null&&e.flags&4){t=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&cp(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Et(163))}Bi||e.flags&512&&h4(e)}catch(f){Ar(e,e.return,f)}}if(e===n){Kt=null;break}if(t=e.sibling,t!==null){t.return=e.return,Kt=t;break}Kt=e.return}}function HP(n){for(;Kt!==null;){var e=Kt;if(e===n){Kt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Kt=t;break}Kt=e.return}}function zP(n){for(;Kt!==null;){var e=Kt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{k_(4,e)}catch(l){Ar(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ar(e,i,l)}}var a=e.return;try{h4(e)}catch(l){Ar(e,a,l)}break;case 5:var o=e.return;try{h4(e)}catch(l){Ar(e,o,l)}}}catch(l){Ar(e,e.return,l)}if(e===n){Kt=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Kt=s;break}Kt=e.return}}var Jre=Math.ceil,W8=Al.ReactCurrentDispatcher,XC=Al.ReactCurrentOwner,io=Al.ReactCurrentBatchConfig,qn=0,ii=null,Mr=null,gi=0,ya=0,U1=Ic(0),Yr=0,xp=null,Yu=0,N_=0,KC=0,Fh=null,sa=null,YC=0,xA=1/0,Hs=null,X8=!1,S4=null,Ac=null,eg=!1,ec=null,K8=0,Th=0,g4=null,Wg=-1,Xg=0;function Ji(){return(qn&6)!==0?Er():Wg!==-1?Wg:Wg=Er()}function fc(n){return(n.mode&1)===0?1:(qn&2)!==0&&gi!==0?gi&-gi:Bre.transition!==null?(Xg===0&&(Xg=rO()),Xg):(n=A0,n!==0||(n=window.event,n=n===void 0?16:uO(n.type)),n)}function Oo(n,e,t,r){if(50<Th)throw Th=0,g4=null,Error(Et(185));Jp(n,t,r),((qn&2)===0||n!==ii)&&(n===ii&&((qn&2)===0&&(N_|=t),Yr===4&&Ql(n,gi)),Aa(n,r),t===1&&qn===0&&(e.mode&1)===0&&(xA=Er()+500,M_&&Oc()))}function Aa(n,e){var t=n.callbackNode;B0e(n,e);var r=b8(n,n===ii?gi:0);if(r===0)t!==null&&$b(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&$b(t),e===1)n.tag===0?Lre(WP.bind(null,n)):TO(WP.bind(null,n)),Tre(function(){(qn&6)===0&&Oc()}),t=null;else{switch(iO(r)){case 1:t=xC;break;case 4:t=tO;break;case 16:t=T8;break;case 536870912:t=nO;break;default:t=T8}t=Fk(t,vk.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function vk(n,e){if(Wg=-1,Xg=0,(qn&6)!==0)throw Error(Et(327));var t=n.callbackNode;if(tA()&&n.callbackNode!==t)return null;var r=b8(n,n===ii?gi:0);if(r===0)return null;if((r&30)!==0||(r&n.expiredLanes)!==0||e)e=Y8(n,r);else{e=r;var i=qn;qn|=2;var a=yk();(ii!==n||gi!==e)&&(Hs=null,xA=Er()+500,Mu(n,e));do try{eie();break}catch(s){wk(n,s)}while(1);LC(),W8.current=a,qn=i,Mr!==null?e=0:(ii=null,gi=0,e=Yr)}if(e!==0){if(e===2&&(i=Wy(n),i!==0&&(r=i,e=_4(n,i))),e===1)throw t=xp,Mu(n,0),Ql(n,r),Aa(n,Er()),t;if(e===6)Ql(n,r);else{if(i=n.current.alternate,(r&30)===0&&!Zre(i)&&(e=Y8(n,r),e===2&&(a=Wy(n),a!==0&&(r=a,e=_4(n,a))),e===1))throw t=xp,Mu(n,0),Ql(n,r),Aa(n,Er()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Et(345));case 2:Su(n,sa,Hs);break;case 3:if(Ql(n,r),(r&130023424)===r&&(e=YC+500-Er(),10<e)){if(b8(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Ji(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=$y(Su.bind(null,n,sa,Hs),e);break}Su(n,sa,Hs);break;case 4:if(Ql(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Io(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=Er()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Jre(r/1960))-r,10<r){n.timeoutHandle=$y(Su.bind(null,n,sa,Hs),r);break}Su(n,sa,Hs);break;case 5:Su(n,sa,Hs);break;default:throw Error(Et(329))}}}return Aa(n,Er()),n.callbackNode===t?vk.bind(null,n):null}function _4(n,e){var t=Fh;return n.current.memoizedState.isDehydrated&&(Mu(n,e).flags|=256),n=Y8(n,e),n!==2&&(e=sa,sa=t,e!==null&&x4(e)),n}function x4(n){sa===null?sa=n:sa.push.apply(sa,n)}function Zre(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],a=i.getSnapshot;i=i.value;try{if(!Ho(a(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ql(n,e){for(e&=~KC,e&=~N_,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Io(e),r=1<<t;n[t]=-1,e&=~r}}function WP(n){if((qn&6)!==0)throw Error(Et(327));tA();var e=b8(n,0);if((e&1)===0)return Aa(n,Er()),null;var t=Y8(n,e);if(n.tag!==0&&t===2){var r=Wy(n);r!==0&&(e=r,t=_4(n,r))}if(t===1)throw t=xp,Mu(n,0),Ql(n,e),Aa(n,Er()),t;if(t===6)throw Error(Et(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Su(n,sa,Hs),Aa(n,Er()),null}function qC(n,e){var t=qn;qn|=1;try{return n(e)}finally{qn=t,qn===0&&(xA=Er()+500,M_&&Oc())}}function qu(n){ec!==null&&ec.tag===0&&(qn&6)===0&&tA();var e=qn;qn|=1;var t=io.transition,r=A0;try{if(io.transition=null,A0=1,n)return n()}finally{A0=r,io.transition=t,qn=e,(qn&6)===0&&Oc()}}function QC(){ya=U1.current,H0(U1)}function Mu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Fre(t)),Mr!==null)for(t=Mr.return;t!==null;){var r=t;switch(bC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&M8();break;case 3:gA(),H0(ua),H0(Oi),NC();break;case 5:kC(r);break;case 4:gA();break;case 13:H0(ir);break;case 19:H0(ir);break;case 10:BC(r.type._context);break;case 22:case 23:QC()}t=t.return}if(ii=n,Mr=n=hc(n.current,null),gi=ya=e,Yr=0,xp=null,KC=N_=Yu=0,sa=Fh=null,Vu!==null){for(e=0;e<Vu.length;e++)if(t=Vu[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,a=t.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}t.pending=r}Vu=null}return n}function wk(n,e){do{var t=Mr;try{if(LC(),Gg.current=z8,H8){for(var r=or.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}H8=!1}if(Ku=0,ni=Xr=or=null,Vh=!1,Sp=0,XC.current=null,t===null||t.return===null){Yr=1,xp=e,Mr=null;break}e:{var a=n,o=t.return,s=t,l=e;if(e=gi,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=s,h=d.tag;if((d.mode&1)===0&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=RP(o);if(m!==null){m.flags&=-257,LP(m,o,s,a,e),m.mode&1&&PP(a,u,e),e=m,l=u;var g=e.updateQueue;if(g===null){var _=new Set;_.add(l),e.updateQueue=_}else g.add(l);break e}else{if((e&1)===0){PP(a,u,e),JC();break e}l=Error(Et(426))}}else if(er&&s.mode&1){var E=RP(o);if(E!==null){(E.flags&65536)===0&&(E.flags|=256),LP(E,o,s,a,e),PC(_A(l,s));break e}}a=l=_A(l,s),Yr!==4&&(Yr=2),Fh===null?Fh=[a]:Fh.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=ak(a,l,e);EP(a,x);break e;case 1:s=l;var v=a.type,C=a.stateNode;if((a.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ac===null||!Ac.has(C)))){a.flags|=65536,e&=-e,a.lanes|=e;var V=ok(a,s,e);EP(a,V);break e}}a=a.return}while(a!==null)}Ck(t)}catch(D){e=D,Mr===t&&t!==null&&(Mr=t=t.return);continue}break}while(1)}function yk(){var n=W8.current;return W8.current=z8,n===null?z8:n}function JC(){(Yr===0||Yr===3||Yr===2)&&(Yr=4),ii===null||(Yu&268435455)===0&&(N_&268435455)===0||Ql(ii,gi)}function Y8(n,e){var t=qn;qn|=2;var r=yk();(ii!==n||gi!==e)&&(Hs=null,Mu(n,e));do try{$re();break}catch(i){wk(n,i)}while(1);if(LC(),qn=t,W8.current=r,Mr!==null)throw Error(Et(261));return ii=null,gi=0,Yr}function $re(){for(;Mr!==null;)Ek(Mr)}function eie(){for(;Mr!==null&&!C0e();)Ek(Mr)}function Ek(n){var e=Dk(n.alternate,n,ya);n.memoizedProps=n.pendingProps,e===null?Ck(n):Mr=e,XC.current=null}function Ck(n){var e=n;do{var t=e.alternate;if(n=e.return,(e.flags&32768)===0){if(t=Xre(t,e,ya),t!==null){Mr=t;return}}else{if(t=Kre(t,e),t!==null){t.flags&=32767,Mr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Yr=6,Mr=null;return}}if(e=e.sibling,e!==null){Mr=e;return}Mr=e=n}while(e!==null);Yr===0&&(Yr=5)}function Su(n,e,t){var r=A0,i=io.transition;try{io.transition=null,A0=1,tie(n,e,t,r)}finally{io.transition=i,A0=r}return null}function tie(n,e,t,r){do tA();while(ec!==null);if((qn&6)!==0)throw Error(Et(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Et(177));n.callbackNode=null,n.callbackPriority=0;var a=t.lanes|t.childLanes;if(M0e(n,a),n===ii&&(Mr=ii=null,gi=0),(t.subtreeFlags&2064)===0&&(t.flags&2064)===0||eg||(eg=!0,Fk(T8,function(){return tA(),null})),a=(t.flags&15990)!==0,(t.subtreeFlags&15990)!==0||a){a=io.transition,io.transition=null;var o=A0;A0=1;var s=qn;qn|=4,XC.current=null,qre(n,t),_k(t,n),vre(Jy),P8=!!Qy,Jy=Qy=null,n.current=t,Qre(t),V0e(),qn=s,A0=o,io.transition=a}else n.current=t;if(eg&&(eg=!1,ec=n,K8=i),a=n.pendingLanes,a===0&&(Ac=null),T0e(t.stateNode),Aa(n,Er()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(X8)throw X8=!1,n=S4,S4=null,n;return(K8&1)!==0&&n.tag!==0&&tA(),a=n.pendingLanes,(a&1)!==0?n===g4?Th++:(Th=0,g4=n):Th=0,Oc(),null}function tA(){if(ec!==null){var n=iO(K8),e=io.transition,t=A0;try{if(io.transition=null,A0=16>n?16:n,ec===null)var r=!1;else{if(n=ec,ec=null,K8=0,(qn&6)!==0)throw Error(Et(331));var i=qn;for(qn|=4,Kt=n.current;Kt!==null;){var a=Kt,o=a.child;if((Kt.flags&16)!==0){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Kt=u;Kt!==null;){var d=Kt;switch(d.tag){case 0:case 11:case 15:Dh(8,d,a)}var h=d.child;if(h!==null)h.return=d,Kt=h;else for(;Kt!==null;){d=Kt;var f=d.sibling,m=d.return;if(mk(d),d===u){Kt=null;break}if(f!==null){f.return=m,Kt=f;break}Kt=m}}}var g=a.alternate;if(g!==null){var _=g.child;if(_!==null){g.child=null;do{var E=_.sibling;_.sibling=null,_=E}while(_!==null)}}Kt=a}}if((a.subtreeFlags&2064)!==0&&o!==null)o.return=a,Kt=o;else e:for(;Kt!==null;){if(a=Kt,(a.flags&2048)!==0)switch(a.tag){case 0:case 11:case 15:Dh(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,Kt=x;break e}Kt=a.return}}var v=n.current;for(Kt=v;Kt!==null;){o=Kt;var C=o.child;if((o.subtreeFlags&2064)!==0&&C!==null)C.return=o,Kt=C;else e:for(o=v;Kt!==null;){if(s=Kt,(s.flags&2048)!==0)try{switch(s.tag){case 0:case 11:case 15:k_(9,s)}}catch(D){Ar(s,s.return,D)}if(s===o){Kt=null;break e}var V=s.sibling;if(V!==null){V.return=s.return,Kt=V;break e}Kt=s.return}}if(qn=i,Oc(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot(b_,n)}catch{}r=!0}return r}finally{A0=t,io.transition=e}}return!1}function XP(n,e,t){e=_A(t,e),e=ak(n,e,1),n=dc(n,e,1),e=Ji(),n!==null&&(Jp(n,1,e),Aa(n,e))}function Ar(n,e,t){if(n.tag===3)XP(n,n,t);else for(;e!==null;){if(e.tag===3){XP(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ac===null||!Ac.has(r))){n=_A(t,n),n=ok(e,n,1),e=dc(e,n,1),n=Ji(),e!==null&&(Jp(e,1,n),Aa(e,n));break}}e=e.return}}function nie(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Ji(),n.pingedLanes|=n.suspendedLanes&t,ii===n&&(gi&t)===t&&(Yr===4||Yr===3&&(gi&130023424)===gi&&500>Er()-YC?Mu(n,0):KC|=t),Aa(n,e)}function Vk(n,e){e===0&&((n.mode&1)===0?e=1:(e=zS,zS<<=1,(zS&130023424)===0&&(zS=4194304)));var t=Ji();n=ll(n,e),n!==null&&(Jp(n,e,t),Aa(n,t))}function rie(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Vk(n,t)}function iie(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Et(314))}r!==null&&r.delete(e),Vk(n,t)}var Dk;Dk=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ua.current)ca=!0;else{if((n.lanes&t)===0&&(e.flags&128)===0)return ca=!1,Wre(n,e,t);ca=(n.flags&131072)!==0}else ca=!1,er&&(e.flags&1048576)!==0&&bO(e,k8,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zg(n,e),n=e.pendingProps;var i=pA(e,Oi.current);eA(e,t),i=jC(null,e,r,n,i,t);var a=GC();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,da(r)?(a=!0,I8(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,IC(e),i.updater=I_,e.stateNode=i,i._reactInternals=e,o4(e,r,n,t),e=c4(null,e,r,!0,a,t)):(e.tag=0,er&&a&&TC(e),Yi(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(zg(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=oie(r),n=Do(r,n),i){case 0:e=l4(null,e,r,n,t);break e;case 1:e=IP(null,e,r,n,t);break e;case 11:e=BP(null,e,r,n,t);break e;case 14:e=MP(null,e,r,Do(r.type,n),t);break e}throw Error(Et(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Do(r,i),l4(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Do(r,i),IP(n,e,r,i,t);case 3:e:{if(uk(e),n===null)throw Error(Et(387));r=e.pendingProps,a=e.memoizedState,i=a.element,BO(n,e),j8(e,r,null,t);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=_A(Error(Et(423)),e),e=OP(n,e,r,t,i);break e}else if(r!==i){i=_A(Error(Et(424)),e),e=OP(n,e,r,t,i);break e}else for(Da=uc(e.stateNode.containerInfo.firstChild),Ra=e,er=!0,To=null,t=kO(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(mA(),r===i){e=cl(n,e,t);break e}Yi(n,e,r,t)}e=e.child}return e;case 5:return NO(e),n===null&&r4(e),r=e.type,i=e.pendingProps,a=n!==null?n.memoizedProps:null,o=i.children,Zy(r,i)?o=null:a!==null&&Zy(r,a)&&(e.flags|=32),ck(n,e),Yi(n,e,o,t),e.child;case 6:return n===null&&r4(e),null;case 13:return dk(n,e,t);case 4:return OC(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=SA(e,null,r,t):Yi(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Do(r,i),BP(n,e,r,i,t);case 7:return Yi(n,e,e.pendingProps,t),e.child;case 8:return Yi(n,e,e.pendingProps.children,t),e.child;case 12:return Yi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,M0(N8,r._currentValue),r._currentValue=o,a!==null)if(Ho(a.value,o)){if(a.children===i.children&&!ua.current){e=cl(n,e,t);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=Zs(-1,t&-t),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=t,l=a.alternate,l!==null&&(l.lanes|=t),i4(a.return,t,e),s.lanes|=t;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Et(341));o.lanes|=t,s=o.alternate,s!==null&&(s.lanes|=t),i4(o,t,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Yi(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,eA(e,t),i=so(i),r=r(i),e.flags|=1,Yi(n,e,r,t),e.child;case 14:return r=e.type,i=Do(r,e.pendingProps),i=Do(r.type,i),MP(n,e,r,i,t);case 15:return sk(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Do(r,i),zg(n,e),e.tag=1,da(r)?(n=!0,I8(e)):n=!1,eA(e,t),IO(e,r,i),o4(e,r,i,t),c4(null,e,r,!0,n,t);case 19:return Ak(n,e,t);case 22:return lk(n,e,t)}throw Error(Et(156,e.tag))};function Fk(n,e){return eO(n,e)}function aie(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function no(n,e,t,r){return new aie(n,e,t,r)}function ZC(n){return n=n.prototype,!(!n||!n.isReactComponent)}function oie(n){if(typeof n=="function")return ZC(n)?1:0;if(n!=null){if(n=n.$$typeof,n===SC)return 11;if(n===gC)return 14}return 2}function hc(n,e){var t=n.alternate;return t===null?(t=no(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Kg(n,e,t,r,i,a){var o=2;if(r=n,typeof n=="function")ZC(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case b1:return Iu(t.children,i,a,e);case mC:o=8,i|=8;break;case by:return n=no(12,t,e,i|2),n.elementType=by,n.lanes=a,n;case Py:return n=no(13,t,e,i),n.elementType=Py,n.lanes=a,n;case Ry:return n=no(19,t,e,i),n.elementType=Ry,n.lanes=a,n;case O5:return U_(t,i,a,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case M5:o=10;break e;case I5:o=9;break e;case SC:o=11;break e;case gC:o=14;break e;case zl:o=16,r=null;break e}throw Error(Et(130,n==null?n:typeof n,""))}return e=no(o,t,e,i),e.elementType=n,e.type=r,e.lanes=a,e}function Iu(n,e,t,r){return n=no(7,n,r,e),n.lanes=t,n}function U_(n,e,t,r){return n=no(22,n,r,e),n.elementType=O5,n.lanes=t,n.stateNode={isHidden:!1},n}function Yv(n,e,t){return n=no(6,n,null,e),n.lanes=t,n}function qv(n,e,t){return e=no(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function sie(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tv(0),this.expirationTimes=Tv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $C(n,e,t,r,i,a,o,s,l){return n=new sie(n,e,t,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=no(3,null,null,e),n.current=a,a.stateNode=n,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},IC(a),n}function lie(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T1,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Tk(n){if(!n)return yc;n=n._reactInternals;e:{if(nd(n)!==n||n.tag!==1)throw Error(Et(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(da(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Et(171))}if(n.tag===1){var t=n.type;if(da(t))return FO(n,t,e)}return e}function bk(n,e,t,r,i,a,o,s,l){return n=$C(t,r,!0,n,i,a,o,s,l),n.context=Tk(null),t=n.current,r=Ji(),i=fc(t),a=Zs(r,i),a.callback=e!=null?e:null,dc(t,a,i),n.current.lanes=i,Jp(n,i,r),Aa(n,r),n}function j_(n,e,t,r){var i=e.current,a=Ji(),o=fc(i);return t=Tk(t),e.context===null?e.context=t:e.pendingContext=t,e=Zs(a,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=dc(i,e,o),n!==null&&(Oo(n,i,o,a),jg(n,i,o)),o}function q8(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function KP(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function eV(n,e){KP(n,e),(n=n.alternate)&&KP(n,e)}function cie(){return null}var Pk=typeof reportError=="function"?reportError:function(n){console.error(n)};function tV(n){this._internalRoot=n}G_.prototype.render=tV.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Et(409));j_(n,e,null,null)};G_.prototype.unmount=tV.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;qu(function(){j_(null,n,null,null)}),e[sl]=null}};function G_(n){this._internalRoot=n}G_.prototype.unstable_scheduleHydration=function(n){if(n){var e=sO();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ql.length&&e!==0&&e<ql[t].priority;t++);ql.splice(t,0,n),t===0&&cO(n)}};function nV(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function H_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function YP(){}function uie(n,e,t,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=q8(o);a.call(u)}}var o=bk(e,r,n,0,null,!1,!1,"",YP);return n._reactRootContainer=o,n[sl]=o.current,Ap(n.nodeType===8?n.parentNode:n),qu(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=q8(l);s.call(u)}}var l=$C(n,0,!1,null,null,!1,!1,"",YP);return n._reactRootContainer=l,n[sl]=l.current,Ap(n.nodeType===8?n.parentNode:n),qu(function(){j_(e,l,t,r)}),l}function z_(n,e,t,r,i){var a=t._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=q8(o);s.call(l)}}j_(e,o,n,i)}else o=uie(t,e,n,i,r);return q8(o)}aO=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Ah(e.pendingLanes);t!==0&&(vC(e,t|1),Aa(e,Er()),(qn&6)===0&&(xA=Er()+500,Oc()))}break;case 13:qu(function(){var r=ll(n,1);if(r!==null){var i=Ji();Oo(r,n,1,i)}}),eV(n,1)}};wC=function(n){if(n.tag===13){var e=ll(n,134217728);if(e!==null){var t=Ji();Oo(e,n,134217728,t)}eV(n,134217728)}};oO=function(n){if(n.tag===13){var e=fc(n),t=ll(n,e);if(t!==null){var r=Ji();Oo(t,n,e,r)}eV(n,e)}};sO=function(){return A0};lO=function(n,e){var t=A0;try{return A0=n,e()}finally{A0=t}};Gy=function(n,e,t){switch(e){case"input":if(My(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=B_(r);if(!i)throw Error(Et(90));N5(r),My(r,i)}}}break;case"textarea":j5(n,t);break;case"select":e=t.value,e!=null&&Q1(n,!!t.multiple,e,!1)}};Y5=qC;q5=qu;var die={usingClientEntryPoint:!1,Events:[$p,B1,B_,X5,K5,qC]},Wf={findFiberByHostInstance:Cu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Aie={bundleType:Wf.bundleType,version:Wf.version,rendererPackageName:Wf.rendererPackageName,rendererConfig:Wf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Al.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Z5(n),n===null?null:n.stateNode},findFiberByHostInstance:Wf.findFiberByHostInstance||cie,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tg.isDisabled&&tg.supportsFiber)try{b_=tg.inject(Aie),hs=tg}catch{}}Ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=die;Ia.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nV(e))throw Error(Et(200));return lie(n,e,null,t)};Ia.createRoot=function(n,e){if(!nV(n))throw Error(Et(299));var t=!1,r="",i=Pk;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$C(n,1,!1,null,null,t,!1,r,i),n[sl]=e.current,Ap(n.nodeType===8?n.parentNode:n),new tV(e)};Ia.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Et(188)):(n=Object.keys(n).join(","),Error(Et(268,n)));return n=Z5(e),n=n===null?null:n.stateNode,n};Ia.flushSync=function(n){return qu(n)};Ia.hydrate=function(n,e,t){if(!H_(e))throw Error(Et(200));return z_(null,n,e,!0,t)};Ia.hydrateRoot=function(n,e,t){if(!nV(n))throw Error(Et(405));var r=t!=null&&t.hydratedSources||null,i=!1,a="",o=Pk;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=bk(e,null,n,1,t!=null?t:null,i,!1,a,o),n[sl]=e.current,Ap(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new G_(e)};Ia.render=function(n,e,t){if(!H_(e))throw Error(Et(200));return z_(null,n,e,!1,t)};Ia.unmountComponentAtNode=function(n){if(!H_(n))throw Error(Et(40));return n._reactRootContainer?(qu(function(){z_(null,null,n,!1,function(){n._reactRootContainer=null,n[sl]=null})}),!0):!1};Ia.unstable_batchedUpdates=qC;Ia.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!H_(t))throw Error(Et(200));if(n==null||n._reactInternals===void 0)throw Error(Et(38));return z_(n,e,t,!1,r)};Ia.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=Ia})(cs);var Rk,qP=cs.exports;Rk=qP.createRoot,qP.hydrateRoot;var Lk={exports:{}},Bk={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vA=Ne.exports;function fie(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var hie=typeof Object.is=="function"?Object.is:fie,pie=vA.useState,mie=vA.useEffect,Sie=vA.useLayoutEffect,gie=vA.useDebugValue;function _ie(n,e){var t=e(),r=pie({inst:{value:t,getSnapshot:e}}),i=r[0].inst,a=r[1];return Sie(function(){i.value=t,i.getSnapshot=e,Qv(i)&&a({inst:i})},[n,t,e]),mie(function(){return Qv(i)&&a({inst:i}),n(function(){Qv(i)&&a({inst:i})})},[n]),gie(t),t}function Qv(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!hie(n,t)}catch{return!0}}function xie(n,e){return e()}var vie=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?xie:_ie;Bk.useSyncExternalStore=vA.useSyncExternalStore!==void 0?vA.useSyncExternalStore:vie;(function(n){n.exports=Bk})(Lk);var Mk={exports:{}},Ik={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_=Ne.exports,wie=Lk.exports;function yie(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Eie=typeof Object.is=="function"?Object.is:yie,Cie=wie.useSyncExternalStore,Vie=W_.useRef,Die=W_.useEffect,Fie=W_.useMemo,Tie=W_.useDebugValue;Ik.useSyncExternalStoreWithSelector=function(n,e,t,r,i){var a=Vie(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Fie(function(){function l(m){if(!u){if(u=!0,d=m,m=r(m),i!==void 0&&o.hasValue){var g=o.value;if(i(g,m))return h=g}return h=m}if(g=h,Eie(d,m))return g;var _=r(m);return i!==void 0&&i(g,_)?g:(d=m,h=_)}var u=!1,d,h,f=t===void 0?null:t;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,t,r,i]);var s=Cie(n,a[0],a[1]);return Die(function(){o.hasValue=!0,o.value=s},[s]),Tie(s),s};(function(n){n.exports=Ik})(Mk);function bie(n){n()}let Ok=bie;const Pie=n=>Ok=n,Rie=()=>Ok,Ec=C8.createContext(null);function kk(){return Ne.exports.useContext(Ec)}const Lie=()=>{throw new Error("uSES not initialized!")};let Nk=Lie;const Bie=n=>{Nk=n},Mie=(n,e)=>n===e;function Iie(n=Ec){const e=n===Ec?kk:()=>Ne.exports.useContext(n);return function(r,i=Mie){const{store:a,subscription:o,getServerState:s}=e(),l=Nk(o.addNestedSub,a.getState,s||a.getState,r,i);return Ne.exports.useDebugValue(l),l}}const Oie=Iie();var Uk={exports:{}},h0={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ai=typeof Symbol=="function"&&Symbol.for,rV=ai?Symbol.for("react.element"):60103,iV=ai?Symbol.for("react.portal"):60106,X_=ai?Symbol.for("react.fragment"):60107,K_=ai?Symbol.for("react.strict_mode"):60108,Y_=ai?Symbol.for("react.profiler"):60114,q_=ai?Symbol.for("react.provider"):60109,Q_=ai?Symbol.for("react.context"):60110,aV=ai?Symbol.for("react.async_mode"):60111,J_=ai?Symbol.for("react.concurrent_mode"):60111,Z_=ai?Symbol.for("react.forward_ref"):60112,$_=ai?Symbol.for("react.suspense"):60113,kie=ai?Symbol.for("react.suspense_list"):60120,e2=ai?Symbol.for("react.memo"):60115,t2=ai?Symbol.for("react.lazy"):60116,Nie=ai?Symbol.for("react.block"):60121,Uie=ai?Symbol.for("react.fundamental"):60117,jie=ai?Symbol.for("react.responder"):60118,Gie=ai?Symbol.for("react.scope"):60119;function ka(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case rV:switch(n=n.type,n){case aV:case J_:case X_:case Y_:case K_:case $_:return n;default:switch(n=n&&n.$$typeof,n){case Q_:case Z_:case t2:case e2:case q_:return n;default:return e}}case iV:return e}}}function jk(n){return ka(n)===J_}h0.AsyncMode=aV;h0.ConcurrentMode=J_;h0.ContextConsumer=Q_;h0.ContextProvider=q_;h0.Element=rV;h0.ForwardRef=Z_;h0.Fragment=X_;h0.Lazy=t2;h0.Memo=e2;h0.Portal=iV;h0.Profiler=Y_;h0.StrictMode=K_;h0.Suspense=$_;h0.isAsyncMode=function(n){return jk(n)||ka(n)===aV};h0.isConcurrentMode=jk;h0.isContextConsumer=function(n){return ka(n)===Q_};h0.isContextProvider=function(n){return ka(n)===q_};h0.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===rV};h0.isForwardRef=function(n){return ka(n)===Z_};h0.isFragment=function(n){return ka(n)===X_};h0.isLazy=function(n){return ka(n)===t2};h0.isMemo=function(n){return ka(n)===e2};h0.isPortal=function(n){return ka(n)===iV};h0.isProfiler=function(n){return ka(n)===Y_};h0.isStrictMode=function(n){return ka(n)===K_};h0.isSuspense=function(n){return ka(n)===$_};h0.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===X_||n===J_||n===Y_||n===K_||n===$_||n===kie||typeof n=="object"&&n!==null&&(n.$$typeof===t2||n.$$typeof===e2||n.$$typeof===q_||n.$$typeof===Q_||n.$$typeof===Z_||n.$$typeof===Uie||n.$$typeof===jie||n.$$typeof===Gie||n.$$typeof===Nie)};h0.typeOf=ka;(function(n){n.exports=h0})(Uk);var Gk=Uk.exports,Hie={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},zie={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Hk={};Hk[Gk.ForwardRef]=Hie;Hk[Gk.Memo]=zie;var Wie={exports:{}},p0={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oV=Symbol.for("react.element"),sV=Symbol.for("react.portal"),n2=Symbol.for("react.fragment"),r2=Symbol.for("react.strict_mode"),i2=Symbol.for("react.profiler"),a2=Symbol.for("react.provider"),o2=Symbol.for("react.context"),Xie=Symbol.for("react.server_context"),s2=Symbol.for("react.forward_ref"),l2=Symbol.for("react.suspense"),c2=Symbol.for("react.suspense_list"),u2=Symbol.for("react.memo"),d2=Symbol.for("react.lazy"),Kie=Symbol.for("react.offscreen"),zk;zk=Symbol.for("react.module.reference");function po(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case oV:switch(n=n.type,n){case n2:case i2:case r2:case l2:case c2:return n;default:switch(n=n&&n.$$typeof,n){case Xie:case o2:case s2:case d2:case u2:case a2:return n;default:return e}}case sV:return e}}}p0.ContextConsumer=o2;p0.ContextProvider=a2;p0.Element=oV;p0.ForwardRef=s2;p0.Fragment=n2;p0.Lazy=d2;p0.Memo=u2;p0.Portal=sV;p0.Profiler=i2;p0.StrictMode=r2;p0.Suspense=l2;p0.SuspenseList=c2;p0.isAsyncMode=function(){return!1};p0.isConcurrentMode=function(){return!1};p0.isContextConsumer=function(n){return po(n)===o2};p0.isContextProvider=function(n){return po(n)===a2};p0.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===oV};p0.isForwardRef=function(n){return po(n)===s2};p0.isFragment=function(n){return po(n)===n2};p0.isLazy=function(n){return po(n)===d2};p0.isMemo=function(n){return po(n)===u2};p0.isPortal=function(n){return po(n)===sV};p0.isProfiler=function(n){return po(n)===i2};p0.isStrictMode=function(n){return po(n)===r2};p0.isSuspense=function(n){return po(n)===l2};p0.isSuspenseList=function(n){return po(n)===c2};p0.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===n2||n===i2||n===r2||n===l2||n===c2||n===Kie||typeof n=="object"&&n!==null&&(n.$$typeof===d2||n.$$typeof===u2||n.$$typeof===a2||n.$$typeof===o2||n.$$typeof===s2||n.$$typeof===zk||n.getModuleId!==void 0)};p0.typeOf=po;(function(n){n.exports=p0})(Wie);function Yie(){const n=Rie();let e=null,t=null;return{clear(){e=null,t=null},notify(){n(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!i||e===null||(i=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}const QP={notify(){},get:()=>[]};function qie(n,e){let t,r=QP;function i(h){return l(),r.subscribe(h)}function a(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function s(){return Boolean(t)}function l(){t||(t=e?e.addNestedSub(o):n.subscribe(o),r=Yie())}function u(){t&&(t(),t=void 0,r.clear(),r=QP)}const d={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:s,trySubscribe:l,tryUnsubscribe:u,getListeners:()=>r};return d}const Qie=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jie=Qie?Ne.exports.useLayoutEffect:Ne.exports.useEffect;var A2={exports:{}},f2={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zie=Ne.exports,$ie=Symbol.for("react.element"),eae=Symbol.for("react.fragment"),tae=Object.prototype.hasOwnProperty,nae=Zie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rae={key:!0,ref:!0,__self:!0,__source:!0};function Wk(n,e,t){var r,i={},a=null,o=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tae.call(e,r)&&!rae.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$ie,type:n,key:a,ref:o,props:i,_owner:nae.current}}f2.Fragment=eae;f2.jsx=Wk;f2.jsxs=Wk;(function(n){n.exports=f2})(A2);const ta=A2.exports.Fragment,L=A2.exports.jsx,Xe=A2.exports.jsxs,iae=Object.freeze(Object.defineProperty({__proto__:null,Fragment:ta,jsx:L,jsxs:Xe},Symbol.toStringTag,{value:"Module"}));function aae({store:n,context:e,children:t,serverState:r}){const i=Ne.exports.useMemo(()=>{const s=qie(n);return{store:n,subscription:s,getServerState:r?()=>r:void 0}},[n,r]),a=Ne.exports.useMemo(()=>n.getState(),[n]);return Jie(()=>{const{subscription:s}=i;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),a!==n.getState()&&s.notifyNestedSubs(),()=>{s.tryUnsubscribe(),s.onStateChange=void 0}},[i,a]),L((e||Ec).Provider,{value:i,children:t})}function Xk(n=Ec){const e=n===Ec?kk:()=>Ne.exports.useContext(n);return function(){const{store:r}=e();return r}}const oae=Xk();function sae(n=Ec){const e=n===Ec?oae:Xk(n);return function(){return e().dispatch}}const lae=sae();Bie(Mk.exports.useSyncExternalStoreWithSelector);Pie(cs.exports.unstable_batchedUpdates);const cae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAaCAYAAAC6nQw6AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AUIFDcJJTAFgQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAC8ElEQVQ4y62UW0hUURSGvz1Ok8ZUo441GUZQWjN4IbU6RRBhZUEQQRcxkh5SJKWCLnSB6CFpAnuREUQosGiK6IIEZZiUgXIKogulRoFJqGOZjhcmnbLdyzlDes4EQgsOLPb+17/3+ve/DvynEGaLUkp3q9fbBtBXUQnA/DPHAFh78qRHCNH+TyIp5QLgGpAHcG+2cxJ4x0i/njYB+4QQvaa3kCbRUFYmG8rKZJRwT7qRlHImMADMmqY0ISBBCDFu0RZKW73e6ZKg1ZRGFu7aE+Vde+K/WjBtWa8DsEY77cfAAK9qa2m/7gfAvbeQFSUlxCUkmOJNiUYDARpT0wHQy/oqKmmoqGTTx3fYXS5DjUV71iMA+T4fAC3nz0fVRd/TsXqtLnaNbjiA0as3oxL9vafV1ERaE0KMSyk9QBuAvaiAUJ05mb2oIJJrLh+P6uzRQCBP12hqaBoZnG06a28b/e1zHMnLvzxs5sOt2wAs272TlK3rGQ72dGRuKnSbvlo4qF4BFgF7bQ6lLzTUPxYa6meGJ570c8URcKDrLcCYVpMPVAN+m0M5q4u9QhvUwGBPa0GVP+FJNLE7Om2nwkF1G9AALNF1FRq7FTgMVLaoYXbtHyQn00qNdxbfuz8BkLhwKQdP/+D1+18/O98kzbBYBMANrQs56bRwUJ174vgz1emql5nZjwxjsXFLs3S66uWD+y+bwkF1tcGQetgcytDNO8M5AKtyjaOQt2EeABcuDWXbHMrzqEROV/2SUGjCCpCRMddAlJ0dD0B7x4jD6apPikoEHNCTtNTZBqK0VLsp1owoTk9SUuIMRPPnxUZyh7UvxaeY+xCAo1np/nU5dfLrtzHT/9DmNZdlRW6i9ClIn8ILn0KMwdk+hWSgGyB+sYesPYekZ3vxgBAWCdwBqqrXiPdTznaXq3RMbW2xngx+buPpxdJTFkuMUwiRJIQoFUK0ARf/wvcCXWY3sgArgVjte1yuMjG1fZ9CuoarK1f5DfAHsaqBy6LXGC8AAAAASUVORK5CYII=",uae="data:image/png;base64,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",dae="data:image/png;base64,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",Aae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAbCAYAAACJISRoAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AUIFDUny9BqzAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFLklEQVRIx7WVWWxUVRjHf+cus3W2zjBYaOmCZcoi0JYpDIuOaKJCVAQToyiEEMUljhoxuL3JgxEyYkyUGME9RBLxQTT4YhQIWJiyCEKQta0tLS3ThWlnprPc44MttrVUIPFLbnK/c8/5/++3/Y/gJiwcDqvAdOC1R/Vox/x3a58bbb+4QfAiYLXP53tjxYqV5sLCIo69PhdgcSAS3XWtc9p1ANuAZXa7fcPy5U+MS6TmEKiOD9+2HXDeEEk4HNaAgNPp3LhkydIFVVVVKIpC3WEHAHWHHcOJHKP9qDYIWAATXS5XeMmSh16orKwSiqJcBR1uA2uBDXGOrJs9ajZEOBz2OByOxxctWvxOMDjXOgB8LdDBNhBNP8m3gUj04RFJksm+nMlkUq6n8IOJBqern0QGItERcRSr1ay2trZ4Ozpib6VSqRbDMORoBAPggwmrNhy84U6lufmiqbGx6YGOjs5oOp3N5HJSHojaZS4nrz7D/bq1NbJubc0dI0Yy0mJh4fh0cXHRTo8nv8Zk0nRVFUJhd0VLS8vn8Xi8U0o5JF09PVffv7mpORmwmppZp4FVA/7WrVtd8+YteNbnG7NGCKUI0AEf/6fVvjynqG5tjbxpWQkF/XnAS0AlkAUMENt21/7xw5Dm+Jvko0Ak+swNkYSC/ruBLZqqlUopDUDRdZ1UXypTUlr2lNfr277pg69S/SQGIAKRqLjumoSC/gpge3FhqdfmsdHm7lKshgVzQiPRkdAbG+o/TvT2znxy5YPrtnzxXRbYA4SuO12hoL9YUZQDtxZPKjg7tZmD5cf/+WhAyaUCJtcV09UQk3l59lfi8SubIvNdVqAXKAlEoo2jtnAo6LcDe8onVhRcmtjFr/aj5FpzyG4D2W2Qu5jlvGzi8NwzuAryRTrdt36Mb+wtgUg0MUiVrz0noaBfADvLSstLOsfH+WlaLQgDOgwApJSQlGAWtHs7uVDdjhTSlkmnv3nw3tm39Ecy57+GcbnZZL4z3+vhl8lREKDkqWATCJeCsCkIq0D1qiDgTFkDlmo3mXRmfjKZfD9ryMjwMgxxFs6bfJ8Q4vsZU2ep+Y+VcKjvCOl0H16zh6ZEE6pQMWsWLKoFv6uCC5fP4nC76bx8Gcd+labas4Yh5fMb59o/BFYHItFPh3TXsvsXOGOX276cMbVaXf3Mi0yZWYlhGBi5HJquk0olkRjomglN01EVFcPIoSgKmUyGA9697Or7Wtlft3d9X05iVsV7wFASq9U6C/CW+6cwrbKaU7//RjLRy7gJJWQzGZobGnDl5+P2eIi1tVFQNAEpJSaTjsPpZlYgyKF9exCKYjckMcD7r3Qtu3++80p317mp5dPHTJk+k8b680jDwCLiZLJgNWtYzDq6WaenJ0FvwsCkS1TrWAqLJ9Ld3cGf9Re40HzuxJtTsm8DXwF5gUg0MaQm9y2sXJjJZLYhZcGksgp8dgPZdYxsDkJzxuHI00BCbyLLT7WtaCrYfNNojZs5U38ak8XaXlRYFNz8yY7z/RKzKxCJLh7SXT/+fPRnd777NkVTPz117qTsSmoUFJdzV3AcHqeGroKmgtupsej2AuYFxmMoKqfOnQAhYl6vZ8bmT3ac74eTwL0jysqOnftioaD/aZPJpJ84e3K5rk1XssJGtkVgMWdIpzXs1gw9KZ1Yj87B4ydRNL1N1bRln23b1ToIqh4oG1VW1qxaauvu7nwk1t6+3uVwFg5cyqL/iAR6eq9kEWIv8Go63Xd4d+1pY5Ai3wHsBu75C02TFjHiU24WAAAAAElFTkSuQmCC",fae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAATCAYAAACORR0GAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AUIFCUsFsChFQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABoUlEQVQ4y83VP2tTcRTG8c+91/wpCcEK9Q4GUy5cO2WQ4iauCi73TTi4C06+A8F3Ir/JRQRXoZk6KBZDA0VwcUgjIkkTlzvEGpvEBvFZfst5zpfnHDi/yBKFECKkeITHaKGHV3iD90VRfFvWJ7qgeQP38AR30IRmswk/RqPRpCz/jgO8wDucFkUxXQoqIU9xH7fRaLVaye7ubtTpdMRxDKbTqcFg4Pj42HA4HOMUH/AWz87DFoHq+FqpVGp5nsdZlkmS5MKxnJ2d6ff7jo6OpuPx+AtuFkUxma+JF/iq2ErTNM7zfCkEkiSR57k0TWPs4DfTItBVqFQq1lXpuYLaKqAmVKvVtUFznuq/SAT1VUDbUKvV1gbNeVZKdG0Do1tpRzsbSFT/r0DXNwDaWhkURdHaoDlP40JQCKGNhy6v5yGE2kJQCGEbHxHt7e39NaH03sJBCKH6y1EtD+lnbHe7XVmWXSpOv993eHio/DbuFkUxiUIICQa4sb+/r91u24ROTk70ej14jQdRCOETsnPLnGFSvlF5KKPZbPan5S/UXP3Ln1wicL3HHXm6AAAAAElFTkSuQmCC",hae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wgIFDAK/sSzNQAAAOlJREFUOMulUisOwkAQfUMQKOzWowhqb9EL9BAkHAHJETbhEAhQhFtUkSp8a1G4QTTTnf0BCS/ZZH7vze5rCQXs12CdHzpQbo5K5GoR1vpXXoR+IX8Syd2AAcDZsLhr8xzKkQUiosgJj7Rh1QJobgMA4FSbiehsWO9f3th56c3NbQBq42MFmd+vwbNDBxJF2QAAxpipJrH0tKH0zfkSki+yXYGdBZ8vVyaACWPuLKb8fLmys+DtKjQ7EJDh0okFKBaReLMMF9yfPj4+PG+uhzRJE3KCyQ2cTd+1a8f+p94Mf4KiX5fjDd96bzdmbCX2Hz2VAAAAAElFTkSuQmCC",pae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wcbAS4QDfZ7qwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAUklEQVQY02NkYGBgOO8p/Z8BBzDc/pSR5byn9H/p6jm41DCcZ0j5z4IsUBLuC2f3rNwMZ7MgK0CWQObjNAkZoChCNgmrop6Vmwm7CZ9JjMSEEwDdJSCFKylBwAAAAABJRU5ErkJggg==",mae=""+new URL("eventerrors.dd87e65b.png",import.meta.url).href,Sae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wkKACgsIpREBgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAXElEQVQY02NkYGBgsLVS+M+AAxw+9oCR0dZK4f+lSw9xqWHQ05NnYEIX/HDPHEMhEwMRgAWbCTC2gNJJVJNgAtj4GNahK8ZQBFOArpDx/1M2BrtQKZzhdGj1M0YAeUwag5E1WdYAAAAASUVORK5CYII=",gae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAPCAYAAADphp8SAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoJEC0vevUizwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADM0lEQVQ4y3XTzU9cZRTH8e/z3HvnzgwzzFyGlylDhwHpQCFtJxR1xAUSFzYxMdFFk3ZlTNq4MLGJC/8AdiZqXLgxjTFqGt361o0kbbEV24LWmlYKlqFQQoEpHRnm5d65z+NCmxK1Z/s7+eQszk/wmBnLZ5uAU0AOaAAKxJnz03Pf7t67+taTAIjHIM8Dp03DzGitFSAty6JWr3ndmZ4TiUTbl+9/+HltN2T8D9IPnE2nMp0d6SR+1hROVytO3MG2Q8bqneUXG54XHc3nJmevzamToykAzH8haSnluSfS+xILg3e53Hf9Uaig+16SAZm2ikubp2q12spYPvvew1juQiLAhb7e/uS93gf8GPkFf81HlxS6pPBXG9zWK8w+M08s6QjXrU+0trUz8u6VR9BYPiuAr3syfd1bndtMDk2DUHBfAaC1hqoGW7CR2GJxeAMtdNhz3R9eeuGpFqDp4UXH7YD9nJNo4dzAFRAgmwwIC0RMIsISERIYCQMEzPcsERyO47nes9Vq9URD6YoYHx04IoT45uDgYcM51s1M/Wdct07CbmGlsoIhDGwzSNAIko31s7i5QDQeZ2tzk+glg5XpBaW0fsNUSn12cHDYeO31N9l/KIdSCuX7mJZFrVZFo7DMAKZpYUgDpXyklHiex0+JKc7Wv5CXrk5NmECiL7ufodwwv/92jWplhz17u2l4HneXlog5DvGWForr6yS79qK1JhCwiDbHOTySZ+biBYSUEdOyrOIfczdbP/rgHe4UbqOVIii28RoQsk2CtoVlW5TLFXYqioClMULtpNK9lEr3WS4s4sSdBXFkPDfued4ZtE7u6+mnLaLQD36l4cPY03uINpmgYafSYHJ6DdOAcNsQa9s284VbBIKhja5UV95YKKwVhg9lP3E9r219cy0XiyVFJtXEyICN02xiSJACQkFJpjNMsqOZ1e0IMzduIg2z2N7RfuD0p18ti10PaQUCgY993z+eGzgg0611Gr4gaHu4rkkk5FGuWRTLFpev30AY5rppWq989/3Mxf+U9uSrL4dLpa2jxY2NiVi0OaU0/zT77zUNlHf+bCDEFPC269Znz0/fUgB/AcTfQEpIAfiTAAAAAElFTkSuQmCC",_ae="data:image/png;base64,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",xae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AYOAhMCOWrHYQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABeklEQVQ4y9WSu0qcURSFv/3/DjI4hkS8DaPGJggGLG2sLJ3Cx9AH8B1EQbAVtBTMExhtU4RIsAjqKGI7OoroiOJlZs5ZFnPxGvP7d1mwyv2ddfbaxhuSCIAk0CmQQR6omCGiSsIkMhIjTkx5kXNCTsiLdYlxiV6JMAqsSWLCiY065Ll91ZtOTDvR8S9gujYgF8G+wpxE6nWYJ/TXfHNRYTVLDL0K9CITNdkTcJk9f0dbnRM0iLcsEkdNDCjBWO0iMAAV+OS7OCOmzIGFpM0oVBMuE5iIrxD0iy8PhYC57ffvr+GfSLP0NHZoIMuxETvhb5Y45+RJKXbMQizYHwjambUZStWO6t8usm6noATQXLO9ASqDCfSDVe1W0/F4RJOEKrJGL0kG6dEAfaQwUsBHwAEXwA1YCXRI0fa5sDxZmyf3AtgAj5KilSEChtVCN/18VpqvOEqWZ4cjClxxaZ49X2Er+MCBreD+CnzxQJZWEnQDjhIF+841/7XuAeg3RZ8rEsomAAAAAElFTkSuQmCC",vae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAPCAYAAADphp8SAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoJEC83W6/YGwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADGklEQVQ4y3WTTUxcZRSGn+9+9373XuYfLlBmEFqFYawzLUUbibXBJqSpmmqqSReuutLElYsmxrgxcenCha6NLmziyoURN7gotKYxysL/ghRaYkIZJpTL/N1/F0RipJ7tec6TnOR9Bf8zs5XRAeFHn4soqSCIgTg25GfzK/feexgvHyoZf+SqbAVzdsiYiJKsHiW5NFo+7AbPna+Vh184VV28vnyn++8bcUhSHrmgN/25Sioj+kyTHikRgBfHbHkev7suRwYKS4X+3jMffnvzQKb/RzKtmsHX1UxOlGybglIHuzhJyOj7+O2tnalWFH4BvHxINDsxMiibweKpbE7rtyy8OGaz28XUNACaYYgUgvFUCi+KuO92Xjr02mxlVNPaQeOknckPWRaOaXK/26Xh+wxZFgANzyOvFI5psu15fNdooHpMN0ibU2+MZfY0ABHGH6cjkR+yLHKGAUBKSmwpKShFSkpMKXFMEwDHNHmqUCBoe9luq/NRGCfb8nxl9Kry4ndOF4vi2WdOkxExvUKnVCxSAvKmiZPNctRxKFUqpDyPwWNH6ZUxmpLcdffGbzTaRT2w5LvV2glx6c23eOzEJFG3Q7i3h6ZJAteFJEEohW6aCMOAJEbaPcQCsjcWaH/1JQu//HBZi02ZG516ksrZGe5srPPH2iotpdjxOqytLFPfrtMJfDb+XKEd+LSEoCsFZp9D9fkXyU+USSzDErNnn6gfH6s5j9dOcm9tlSSOscQeQQi2IbGVjqEMmq02zW6CUiDtAUojj7Lr7rCxvsbaX6u/igvnJs8FQXCNJDkyfmyC/nRM8uAnwghmnh4i3aNDAu12yPytTXQJqf7jbDYtVtaXUZZdHy4NTwuAVy+e6XNd94PA96/UylUxMehSHmyRy+zHLElACGh3Qlq+xtKGw8LSbaSuGkPFYvXTa99sHlRkZrpsKKU+iaLotclKTRtxPMJIYJkBvq+TtgOaXYNG0+D7n39DSH1L141X5uZ/vHmoa69fudSzu7tzuVGvv5/LZEtx8k9q97EEaLbcECEWgbd931u6fms5Bvgbl1M4Ei1dt9kAAAAASUVORK5CYII=",wae="data:image/png;base64,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",yae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AsMFC0SLyofgAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAByUlEQVQoz52SzU4TARSFv5lph6mN0hCs02orf1pr1ESDqYWUSAxEaToxbprIY7BgbXwAw0ZfQxsJLjQxaaz1D5OWatRICwJaoMNoQ610nLohE0vZ6F3e3O+em3uOABAb6mnyD5XOlAQhNtTTTGdKdrOrUyKeuIDn8FnGRnRkYZ2HsyVm59YprpjsCiHu3ZZMBpmaOkW9tkH2pUnwxDkmrkeJXuojeMRhz7WA/X0Kk5Nn+FYWebfwHlVtMvdok5mZFUxcRM67EIU9oCDAzWQvkWg/uv6D0dGjJLQQC/lVIhc7uH0rQO9xBWv3G7a2X3Wixf04nE60xACaJlOp1DjUaTI27sejbPHiVbX9VMNo8DH3Fau2htv9G7cbAgEn09ODDMeC5Od1ch/qNmgrbv+Eu/c+47AaxG+c5oBXRRAlfD4Ja8cg+7yCsU07CPAs/wtvqkw43M3B4io4nHi8CkufDJ483eRvs1tASYThET/h6DH0RZ10xiCVKvC2UCNfNFtsa7EjNCBz9ZqKZegsLe8weNlP06W0QW2K41e6ORnqoLr4newbg8d3cryer+4bOxt0SODrkigXytx/UKEhyyx/qbNWsfYFhf8N+R87/Z8lqf2EpQAAAABJRU5ErkJggg==",Eae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AodFw0F7v4Z9gAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADzElEQVQ4y2WTb2hVZRzHP89zzrn3nHvPNu/dPW3TYWttK1uhzHBIGpF/kGAGBvoiqRyEEYkSIRQU6pvAVlEhCGUziNELmUJ/DCzfFEb0oiY0dc7NFkq3cx3bvXf3nnv+Pb2Yuwz7vXp4eL6f7+/fIwBecJyEDpsF+BFcOu260YuOo9XiWAckIBTEhhDxl4WCvzeXE0khnlLQHME3X7iuJzY2NvJIMjno6PqpCNxbQbAxJcRMAAfu07QnNCG6BWQUTBTj2J2LorcCpe50JBJnJGy9E4avF+P4I70nmezJatrQy9ksF8pl54rnWaGUb/anUke32TaNUmJKSTGK2qeDgNH5+bW3g+A1R9PMLbbN96XSB1O+P6YnhXipP53OdFoWKyoVLCmPrjPNZ/dns6Q1DQCUosUw6DZNUkI8PFosnsrpenqtaVKJY2aCYL8u4bGHkkmIY7baNr2mueuBRGIRohT1uHvetPjmfgloUtIgJQJ0GcL4b5UKAM2GwUytxqVSiWoU8b8Qguuex9dzc9hSAvBdqYSv1FlZieO3Ly0sXDw3Pw/AyUKB7VNTbLh2jX/DEISoc47cvk3P+Djv5vPc9H3OF4vcDIKznlJfyZFCwc+H4aFp3w/COGZo1SoeNU2ueB4js7OLICG4XK1yPJ8no2kcdBwetCymfZ98GL43UiiE2vO5XEOzrp/YnE6v6UkmaTYMOhMJHF3nndZWhBCLzU4kSEvJk7bNgZYWAIpRxN9B0N5tWaNav22/st6yDu5ZsYKlIrpMkw7D4BPXZVM6jSYlJ/J5tjU0MJDN1pvfmUjwVxB0zUbRdanBwMZUatEZmIsiVBzjGAYK6hn9Xq0iAC8MmQ2CesmPWxYabJe+UufOzs9Tvjul3VNT9F29Sk0pjqxciX7X4OTq1WQNg97xcXZPT9fX4Q/PI1QqL4dd98SE77963HXJhyEZXScfBDw9MVGHKyACBm7coKYUa0yTSCk+LhT4pVIZqSl1uD7bXdnsnu5k8sPnGhvbGqRkx+Qkm2ybnU1NRMBkrcaPpRLH2tqoKsWY55V/rVSGgGOjs7OKfY5T35NnMpnBzzs6iqqvT/3Q1aV2NjWpdZal+ixL9Zqm+qm7W6m+PnWms3NhRyZzeEm3z3HQh12XfY7DsOtiCfHzn55XueX7DVuamlifSjHueUjAlJJ1qRTlKGLM8xbSQlxcggy7LuLeX7A3lxts1fVPN6RSst0w6vcSmPJ9Lnse+TB8f9h131iu05enN+y6JIQ4/U8YfnuhXD6k3WMSQaUax5/pQrjLNQD/AToWsEsMdZoIAAAAAElFTkSuQmCC",Cae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AkWAwEWTXvhWQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADWElEQVQ4y62UT2hcVRTGf+e9+96beTOTzCRlGko6pRSrUk3QRJmoJGo3FcUuug4FsSRQ8A+0axWsy26CtINUitkpFhSkLgRtV6N0ipmFYii0nRY60YmZZCbz570777qYJDZ26wcHDpx7vns4fN8RgLH5HOWLFbZyhSGHMIeQNzABIFDCUMRQQKiUL1b0w72yi2Qud1AMH2nXzGq3R9fXdJIagFhT4bUUKrBRgSwa4YNyoXJ7m0zYwvhcbtrAZ+2B8HB9pEM9s0loacRsPRGQHqTXEgyvJIhvOMsCp5YKletb5f4kwPeNPd3DtQMtGtLgmT3PMuqPEhFt/4UgLNWX+HOtyr57GVI1bxk4Vi5UbsvYfE5JxOetwXC2+liTRq/BwvQCV+9d5cujX7EZNvmXSVhpVTn+w3Gq9Sqjt9L4686isXhLYchp18zWRzo0rAbnp85z+snT1IN1EsonoXweRtpNMzPyMpebl6mPdHDbatYO5UMLYU67PZrDXehBPptHRLDFBkBHmqAXEET96BndrxloDnfRbg+EOYWQ7/qayDIo5XDm5zMUXirgWA4AF36/wO3GHWIqTiPY4LX9x/BsDwxElqHra7y2yisDE52kRgxoHXJu8hMu/XGJO8276Cjkxwc/8cb+1zmSeYrFW1+w8NundHQbZSnEQCepSa0yYe1agIEhL8O5yY8JoxADZGNZThw8wav7XmEq+wK2WBgM/4UlUIo1Fdty8WwPXyWYGZnh3SPvUOvWeO6b53n6yhhnfzlLPptnfGgcHWmM9IUqUFIYil5LTVuRoByHk9dOUnyziDYaX/lcOfo1oQmRLe0KwnvF90HAigSvpcBQtDAUVGCTXPVQyuFG7SZT307tjBxXcQacAVJOipSTwrM9eqYHQr8nsMFQUAgVFchiuhqbbadCxHUo1W7y699LPDH4OIcGDqEjvUPcibpcr14jrmOkq7G+7ywqj1jkrwObfW0Y6ARtHtmrBb6Js7cysMsiNsBKab0+MjlYdlvqxdimGjY2hH4P21U4ykE5Drbr4NoumXqSbCVJYs1dFjhVLlSWAOyx+RwrN9ZZKa3f3Ts5+J3bsYfiDXc8VfOIbziowCbWdMg8iDN83ye1GsNr2YsIb2+T7JyR/+Ow/QPGU3wz8jXdngAAAABJRU5ErkJggg==",Vae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoEAgYVJ0Gp1wAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADk0lEQVRIx72WbUxTVxzGn/+9tw4UzAKlty19iYwCmihYdGXLtkiWmOyLiZ9M3IQaY6LBqoUggq+ED1P34oBF3VxYeTG4L9tXF9wys8wsUzTWd8WE0pbeFgtG5E3oPX4AbJFKi7L+P957zvmd5//cc89DiFFksDLMo1iPg6C3Am5H1PdC1KfTEzJLzxi06eNfH9oUItDkgozR0tRkRfI7iwgI7+X5eAibbWcQYNYjcDtqXwel125VvcWel5v57d2/voTOYof3oRQhgwFMnjFcl6tD9+UTMBZVwusJboXU6ogGpajKtCWOlSsMpc6OOoiFNgT8gwBHc/dSlqFRv4veq/UwWMrh9g0ch9ux/1Xo7FU0W44UrFp29PqFWqjMu/A4OAzG4rORiCBmpMJ3tR7Gogr0uALbIbX9FDmGe6lsso2/WNaYjl6/cAii2Ya+wLO4YVP+QpKeQLNmD1z/foOsLPVZ6Eq/i2SEFWpLTnz4fk7lP78dQIa5DMHgyLxgrypVKVMgdTYg++N9eNQllUFqPQUAlJS9nR99Ovzrp8X5Gy6eL4PKXIm+wFBsz2KVzCCKSyF1NsD0URW6XP5T8DSXERmsrPiD5fjjfAWUq23o7x99Y2VzKTUWVUy4ff0CBwC15RuZsnAXgn3DCwab9tTvfwqdxY6G2i/k8EcDhuCj4Nu3MVpxBO8DH3iBKAL4fxeDwPOJBAICz3GJAzJAEHgktKU8R1xiW5pQhQzgeS6BwMExKBQRCokIokkEZLbwsOcT+Pv2QTjveMLAHdXNJF1phEqVAqKFPfymPA0e3BhlVvuP/Swkp3Gsx0G37rpbC9Yfhv/a98hIX7wwSmUZy4zpuHiuCjtqmkcEhVAAb8vApIe9LSU3bnVX509B31YpgZD1nhLtDTtZ9idVw+MjY5aJ7iY39Nap+zAcLX5eucJgdXbUQV1ogz+eaBFFWWZmGrouHYdq9e7Q0Mj4Z7KrqWPmjT+dOXpbtt687dq3vLgGUmcjRDF1XkqJCHpDGpy/10E07wkNDgytl11NHS8TxaxjobcCvtav7j3s/SFvXTWkzkaolEvi81SWoRZT0XP5JPLW1WBwaGwv/G1/xg5R4TC1O8ekrb9/6VhcMVGbo4H3v3ro1trh9TzeDKmtPXZMnB2ETxv1ym2zgnBKsiI5aWYQZgwosZ8llyd4Eh5H+fyD8HSpPs+lJMW9uP5goxP5CLQ55xrzAsn3fS8FSjOcAAAAAElFTkSuQmCC",Dae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoEAgktiNsNhgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACgklEQVRIx+2WS2gTURSG/zt5tdPUltKOpDVzp7gQsmuzqhQECQhuxG2hWBEqCOLCBwgiuFDRhdAuG5UQsUJRV4III4IKbpy4suvOTNNKktIHbdpMzBwXbdLQpNM0KQWhB+5mLtz/fPfcOedn2CM0LhP2EWHdYASA7bLvrvo1OAKYMXwWW+MAEFJVkO2sywSG35EIvjeLL9h69krxjJpjytN6R5NPEBGRpnD6BjguTeFERPRTDtJHl+86AFRLUaggA/BJPPb6ZKDtSb9uQuMycslZuH1ex5VLzkLjMsK6ga4eafyr2PKSlZ1ZuomdGUR9nQ/6jzfdL4rlUymAaiwjY/BIEsK6AY0HkUqmb5wv5MYrCbey+NDSPlUuZs3P1S4GAESw5ue2SE1IPV1jX0R/rFyjRDjWFHg6KLlu10XmQJrgQRhzizcv/l17tik4Sq73k53vlI7mC31lZExwoZEguwBvoLskupxZip/Nrl5ixf+sf0ZvnMyJVOHbNQypKhK9yv5rVmNNE70KQqq6LUg2ITujN3yN1RuCC9kZvdQ4BBxyHAkeCf4ngkxgEBUOsgsHLkB2AaLCwYTNtn1orU1TOBgAIawbLJNeepPgQYR1Ax5JOhBSsgtls1FGPpWKhnWDCQBwLrsyNP1n7V5R1BvoBhhriKw4KTQuwzLN0YH1jdEfPu/2AB62Fh8uZFYmGyWtIEuno6cJUQAYyFmVFmPS03b3VKD1UeMWQ8aGaV4dJEz88gros+zqJmoov/x4KbP8ar+kO8msdOb5IGECwZGSmGO8dftv1WsTVcF9DQCoyjNgzkbYH2/v6hiu1QhPRyJYTS/EzmTXLu9mhPd8ivVYfaf9fxQPf4DeQh5lAAAAAElFTkSuQmCC",Fae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoEAg0CR2b12wAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEhklEQVRIx6WWXWxURRTHfzO33Y92u8jWbWl1qSCIJIrEEhMDsWKNITYpwQcTMMUuBHgg2EaFBGtMjBIUX7ryIAqyhFbjRzQBAyaGNOILUVkx8UUpATal290uXWBrlbZ7Z3y43Xa33NuWOMnkJnPn3t/8zzlzzhHMMmrq2zR3MQZiEUGoFfqO2b4vsV2d+EDWhY9r4OyXe1F6gjsdr60lKQRPb9yPrAt/quLRrU5Q4XjUBS17qmvnv5+MRVi07jWuXu631ueNF0OlxlVm8ujDNZw/dIgF9W2kEplXSHYftIMKB2WfBSsrNiVjEWqf2s1AIguGsFc4qVSxskFy4YgFTQ8NR1U8umU6VNgoe7u6NvBWMtZJ6JnX6e8fQTNHN44ZPNE8xs+Rw3mlbSS7PyzcIieVAbIu/FUetqS5jWt92bnDAFwmv3wvaHxnM8lYhOraQETWhY8VMgwAsr9DTcuBqqp7tiVjnSx/cRe9f+Tyx3EwoYONhODKuTJ+ld1ciB7ho66elSN66TCJ4+es7aFWQ0rxTbDSvz4Z66R+xw5+69EgbWi3DShVGB4TT8U4pV6T4ZQHM2d3MpMNe27y7dav8z49ruLRl0X+niXOd9LwZis/dfnAk7tDjduXo/HVi5RXjk2qG7paTs8Hy8Cl7K0wUkL44zhHm76jdlX7lA/PdHWw5XQz5csv4bt/BJQoNp3UrG3vxV1uMv6vQW7UYPCSj57IUmeYKXhsU5zM6HW2nF7Pma6OKaAyNX3ZK7i9moadlyirHLVAGkrLTNbt/ROPL4fWIATcHHBz9sAyZ/+agsVr0jy4egiBpC97GWXqgigtDDSvYu2uXtwV1gVvbL+I15/LxwO3Btz8eHAplJuOsBUvXGPlhgTKFLOnNq2h1KtobO9FKfBUmJPKsoMuet5bDl5n2KLVaZasHrKFOedSwOUzi8JfSE3si4UzwlZsuMaSNc6wGYG29104++yBJ6/PCpsZONehBI80J3ioIT0rzDZoZhzC3hKBhSNzgt01UBrKoVCIuf/D+pEg5F+M0moWoLaSQn5q66lnyO9KK0L+xciJ8lYC8GzLPhLnTxA+1cyt0YxthdBaEHr8Br7gKEJY12f8HwNlSlxlpoMHBAFPkKPPn6BmVTsi7xVZF/48WFmxMRmLED7VTOZ2GimkrUIhCv2pQYAal3eoVFoR8ASJNp3MJ+/DKh7dLgoKb0d17fx381A7pYbLBG2ZUJnCChQF0igOKIFgnjswCUv1Z7aT6j5MqHVim01rMV2pNDQ/HFjG331lxVK8Js/t/ouywNiMyoqjdKLnUPHoS6nEjTcW1LcRbTpJwBNEFBy9xK2sTFMwS70mQuoinxUo26Hi0e35an/ntQi1QrJrf3pouCsPnecOTEWvdpjCUlZoxvTQ8BFS3Z9Mb6KKgVNKN6cSmd15aKW3iuHRLEYwheu+AZg/CP40+NNof5oR8xaV3qopZYnMThWPbpu9TbRphKvv9bec6epA5TSyVCOktj4SU9XFHJNIQ9DYso/B69ljKh4N330j/H9a/RnGf2IjJKXG/KwbAAAAAElFTkSuQmCC",Tae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoEAhEmnRJMVwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADb0lEQVRIx72WP2xbRRzHP3fv+W9jN7XjOCGyIoWhM3LFCBIIFot0QCwQpDiSLTZ3QCzpCkMHiFdb4EoJAwtDpAYJKTMD8VrBUohMlbgmluJQsF3fHYP/JMb3nBYiTrrB7+m+3/v8/H13P4HXSK1D7T6L6YLhBcZRtSiGa21DTFssl7Ol+blobn97EyE1iElvMVAwWvLGB5/x5PdWWR9W8l6arhcZybVcIh7JHR1ssfHdO3zzBaiewBgx2qrqSlRbQk+QWQ9wdPA1C+lCrt5e+5H6TtlGKrzIEvFI7rhaJLu3Sksf8+1Hr0K4Z992x+G1jx/S/WWFHz7/koV0gcbJmZVUjpHBiOy4WiT7YJXTdhPHkeBX/e3ZJjBzQ7H89kNev5vluFokEY/kSK7lxrTHDGv3kcvZUnIpVhqaNdsNDAajBZGlv8ArPgZ8IUXnT8nsKz+R2Xqf42qR5FKsJJezpYtllZ5knSZSyEEgYPalNhjvjLl+1RcUkvDLv/LuV+9ZSeU0shGAFlxLtL3jbEA65z97zwRq9jeyD1YnSN3FdMEY4Ohga4JspGcgPPvMu6RBNRE/geS00xyY7rJ4605OzBVyEmB/e5ONvdsTZOeGguBMz5MustDGaGF5ZWi2G2zs3WZ/e/M8NFoZaq1HE2QXRd2A9qxoJNHBeLyWQlJrPUIr84+UXjKk61FPIwjHu+cHwmU6z2vo+jXSgzIUnfL//mvDgMINKGu5AzO9qyd0/BrXZyf0h9XVEzquQfrsqo5PY67aULoG6dhVvZ7/J0MhDUJahB3jnWAvQ+kIUtEVtPH+1oQYkIjBpasEKIF0DK7fe502mlR0Ben0QyVsR5vttEHA0xM/qitBgO4NBIQhkuxYyyoQXA/EqGR2Wbx15/w2G7twB4e356nznEMbTSyYoJLZHbuQJal19GElX3/czC+kC1Qyu8SCCYSlGXCDCn9ofPpCatTXXCS7aFZ/3Mzrw0qe1Pq46jRS6Ri+v3eTP2rhiZvirU9+5lqsO5XM2mJcRuoGNITU2PSFFXKQ3mlk1hYDgPpOuXFyVh6aXg/ExtNrLFP0yYYBGZJR3ymPaVu/QwtpPDTPWbeFM1fHv3QEN55AtAHRBiba4Kk6JR6an0r2wo2w6hkcX//jFxdWGtPvT6UjePPDTy9thMX/3er/DTkg465PytpyAAAAAElFTkSuQmCC",bae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoEAh8w90XUiAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAE60lEQVRIx72WW4hWVRTHf2vv851p1NHxm8v5yi5CUBFes6JGIiwsiiToRhEGPcxQYERE9dBTEAjSg1FEjU8VQtkVCrO8DAmpQRYkMXZ5qaxmPnXUnLzMePa/h29/35yZ0VF7aMPm7LMva+3/Xmv91zLO3sT5NZtqMZlq0TnX29nRyuaNrxDC1HqdM5bf+QTV/Yd7Qwg9/IfW3dlZltSvOVlZEekZ+8VZWSH/QZ2dZQHd56XJOddbU7ZX76WpVpqbpOBas3H/l4DeSVNJe9XZWZZzrve8kb2fptrmE60wpysxrTSnC0CPmNMWn6gNlIAcqB30sU/0USmV1H9GpMlEZO3trd2Dgzv4KF1Am8QI8LUCTzvP9c4xJxhLzHDAQ84xF2OnxCYFRoF2iQ+bFjJ48nuyrKv3wIHD1xVtahOQ9Q78uZ21Ldcyb+QUJast/y6RAm1AEueChIvjnyVOIuaZA2BE4qdSwqrj35FlS6lWh3qAdQ2FRWSvTFvE3JFTtJhxRGKWjd3puESzGdKYx44CHvCFfaMSx4HtzSkvHf2WLOviwIHD60IIPQaokpX5a+ArLsu6ePLg3yzGCMCakHOpGVdgLDZroJOEmZFLeDNGJYaBbySGEXeao8mMExJPlGfwc3UnF1aWMjA4VDu/Z/d6VSptAnSfOfUlJW3yieZR80QHeiDOb/OJtvpE23zS2LfMTLOjt3aAPo1rfUlJt5ipUmnTnt3r67IgBDEwcJBLgEddzQ5NZix1hgEB2KDAZyFgVptTtOP6EOiTOFTwwtH4rACPO8/RgYMN4mh4aSvwok9IC170oPMkwMYQmInRVve0aMe/4jNeDuTAEnPc5IwWwMW9ZeAx5yeHxd3mmDPB+EHiXnMs964mxIxDEiVghhmpxFpfExaACwoebHHszLirILN+EbyNV1bfDDCjMNenwB+IIxLrQk4JSM1oOs2507JYfXAkerokRiU+CDm/xJuqIOQe57kcoxlY5XwDSf17TOLLEBiJNiyG0DiFuxQYjgp2SLwaAhtCXnt3M0YkTsbDiRkJMDOGBMCp+H0p5LwRcobPhvAo8E8c3+wcZWCzxCch1IIeWBty9kkMShwDNoXAXkSQ2Ae8nuf0SYToHHVbbo0yJnFpEfwd5livwGshZ54ZFwHfS2zPT5ECTcAg8LA55nvH7pDzrmqCl5ljphlBIpfYqMD9RYTOGdMqbbwdnxDgdueYBZwAXg45v8XbHQMOR2UAvyL2KPB+RNEM3Bpj2ZnxB/B3x2ycG3MkVbJaOsqysla4GqNs9Yne9IkWmSkFXTMh/xX7QjM1x/GzzjdY5gufaH57q6R+VcaS+PiEm2VlPeXGaOwtn2i189riE13BZKXLzNSXlNTtnHriuS98oo0+0WMt06dMyI3Em2VlPVO46eeRGz/1ia6OSueCVpjTZz7RFp/okwK/Pue8rupoPW3JYWdKwFd23sALQ8NUChmizihHgPKE4K5nkCGJ52fPoH//rnFpaVJY1Eg89FSrQz1Z1sWP1Z183dzUoKoAHIrUV1QmaVxwr2mdTv/+nWRZF9XqUM/ECs7OVETVkX7QtIC2IPZLOGAI+FUiM+jA6Cjw7+dNJVYPf3taZOdVTG1IU232iW400zSQgUqgFtDy6DTvpek5lYl2DoVw97kUwuaM22qF8JTI7P8u9f8Feq7PzQpE8XMAAAAASUVORK5CYII=",Pae="data:image/png;base64,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",Rae="data:image/png;base64,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",Lae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoEAg8xyoD2TwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFDUlEQVRIx72WX0zTVxTHP/f2R/nbSoG2ICkk4DYSNTPCls1kcdMZ55wozmRmgQm4sjcxy7YsmmxLFvaiS+TBh4ECC2QzezFiMBrjxl7MnGK2RRceBoqdo7RQhU7+/vq7e/hBKdCCvOwmN01+ved+z/ecc8/5ChItTzX42sgrrVesYg32NIo523hLLGcsC2uaXDl2b/e5Y4CR+LQApUtee/crAsNjzcZAa93Tu+ipNn/dlV735iNKKaVeOnJIsXafIm92uysUOfvnd8YBtevkQaWUUu7NRxTuSu+Cu1ZiKAtrmpzZNq+/p5HaS3sIjI7Q9WEJpEXiOzkhefvMn9iUm9bdneSW1hMcCcdlKuMxmwOr6Srn8eQj0tYokl1TEC+bhqB45whKtzA6FaKmqxx/TyPObJs3HlORiFlNVzmhySBSSISAf+6kceNsPlgWoUYEW48+wFEwZeIrg6wUZ0KmMhGz0akQUpgBUAoynDoiyVhCMMUxQ3q2Pu+0kMsylfjakIU1Te78rKZYZmpR/GzOaWyumSWAybYIKXZ9wTeFIjQZjIK687OaZGFNE742RF5pvVLA4K1TUWYqTrKkRdF9OpdnMjYRMYzZ8FgYst2g9EAIIyLiVKRgTXIWrbs7ySs7igA0gGvtx6m9tDeas3hr6l8Lod/C/BL4bOGlzh1s2GUhKWVpuOeY1l7ay7X2M7xe1WACGhGFb6yfDKs9fgPQFH/fSeZ8+wlu/nEPMUtGKTjfcYLPf/qIdVvGMfSlLKWQ+Mb6MSJm1LSV+oCQip7vXfhu26n47qSJsuCAQKasZXRgjM3vBFDGss1reUAhFb+fdzJwPRM0BZol7jlDh4HrmVisiucrgsuCyoR/WBQ959z0dztMsIXJgenFriv6ux30nHMjLWr1gOOPNPx30+OCbVynOPWxiuYyFtR/N53xR9rqAIWEYF8q0+H4hl8chspd8FzBUibTYY1gXyoJij0+oNQUvls2kAoUSGGmLyMNXlwPL280zx17DywyZlsAadpKTT190UiLItCbDobigwPwyibwD4N/BLz7IEkDw4CKV+HuPYU/ZAI6bPD1t4JAbzrSoojEGUaaCSDw2IsYmQgsfPia4JsfwOVQ1LwFrkwYn5p/GRNTcOwQWJNgKAT7PwWSWDBVDGXgsRchLWI+pNurGmh58wJZKU4EAiMicJU8MQ2t8GWzYItXcPUmyEVJmNbhk9PwQq3gdq95qavkCUZEIBBkpThpefMC26saTMDBnkYRGB5rzi2tp3V3J2uSs9BnFJ6yMMy9Jw38ARgcWTqxH/ih5aIg+HjWfUPgKQujz6hoH80trScwPNY82NMoJJ5qjIHWuqGHobo5UIfViat4EqstZuxYYWMxCGGG0J5uFlNeDuS75h2w2nRcxZM4rPMzcehhqM4YaK2LjicAhjqagyPhKNO8XDvu9WGY7Y/PeiA1GVouQuY2yNgGV341iyfbPps0XeBeHyYv175gADPU0QyAry0mQnPSzl3pnZuNhy/v4edzFvp+zKSo0EBKwV/3Y2pbh6ICQCj670uKtz1m68EIZ9+4GGXGUEdzrGxcUUQdvryHq22SwTs29LBmSgwR0+IMgZahk7chzI5qIwqWSESJRAI4lun7V8rpHfAx3JfCg1s2JnrTAUgteUJBWZic4klKCj2c2dmZkNmqhPC19uMYEbN3Sk1Fu4ihCwxdoJT5lrdXNawohMX/LfX/A/xwVlxY0R9hAAAAAElFTkSuQmCC",Bae="data:image/png;base64,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",Mae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gYKESkYPWvLFwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAI6SURBVEjHvZY7ktswEERfg9wqX0GBy7XHcKoL+JNu6HBTH8OpQ4cK/TmBruKqTfYQK047AECCWv1VFhKAIMGe6emZgXj/aG44egCvH24CpuUqAwJ8/f78X8G+PS4mD+tYLhd7D/xY/T34wy8P93vfrdfPc0pPGV0SAiSNe3YO/2CfF8ODvANI9EkkiQYPWxiTLCSNBlwMWL0R0He7AMFkoGoYNr4EUMoUQgbpu0TSnFIMxgxR9g0W6ABov5fGBkyILomueFgx7UyrZIRAGdEqL0/2UEINmAR3XY5T3csOGhsUxQhX0PyPXTHtt6XfJXHXib5L47pL4vPHd0WlLQcucTQ/fz+xCTOE2QzBy5DnMNwv3uz3UBSvgCSKUKaU0PbXyrFMSXQGy0iiE4REbHnZ7xRLiVNdt6A0oCYLhPH7fCbJxCiwOWCaPYiixHpwiiENmFoDqrjGmB8eaXvj2tbhcwDDVeq5bIUnJY55UEraXIHekVInejirIp5U6JLM49yuDWETkefW6KN5GMWzVGwNG0VTrEv5agv4BJ7PRln7WOLXFqM28cv6158nlOYiqp7Z5tOHtw0bEytntCdDKcwINhGlK/hVpYmG+rp/VmlrqattZwgTQEqTSMbYtWBVWOd2i3m8xMtgkow8b8A2o3Aq7KG+eLAfjqDkupgrjreUXKgtNPrajl+t3QwuZW6iqzoSr/LyCsA6NpGzL2mSlC8oS/2+29X2aFvMsZvZSYD13niTm7eWq5td9f8BgQVfnR04AMwAAAAASUVORK5CYII=",Iae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA7wDOADmX89gzAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4gYKEiMvfX84ywAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAL9SURBVEjHvZZBixxVEMd/9brHD+BNg8JmhWTwIE7PHrwJfgA9b7wYPQgGjSisupPbRCOIhwSiJ3PKfgOPglfN9C6iMFHcVRCCJ89ud78qD/V61mxmZnsWsgXNTL9+1f/6V/2r+slTxXvGGVoO8GDyxZmAPT380AEBvvv+j8cK9srLa0cMW/vmn7eXOu2M+nPXN8fTpX6Xn/z64ZR2sZ1Rn98/KpHQrghgmMJzo+JE0NZCV7CDj0tCDiEIIYOQWfqFg0/KhezniqZL+iQHEQ9REAwDAxHBoj3is4hxvgjs16slWQ9CJpy/MUASszYngoABBia+tr9VYhFiAxcWpDnMA7v/bomIR4949JKBtGnspSv3dbIURCaYeHXvX5nMTfNchqKeQsRmIgkZSP4/lomdNr4fQIIRBJQUbFfRmCQRAmvXCwCe2R4gectMyHoegGTw7DXfszYuTpTifNGYo65/PuDPayXhCSH04NwHA/6+tUfoGQZIbZy7OuCvz3bRCrQy1q4X/PZ+iemqbWGwv7WLtcIAHny56zUNggRX7WxNDETY39p1d1uFoXIEZIIZBANTv7Tyl2tjWART8WcRNO3BOjLcHE+5eLvAzNzZQCNoY2gDWkGsBP033UewBogpyOjTp//V/LbIF83GC6Nidn+wXRIRj06ZtUrLODYGCus3itM1/nGH86OC/e1Um2hpijojTymsf9ptnnYe3rEyLKQBgKQS2Qywq4Uug3t6pcRqb3I9dHA9tFRP0Bqm73Qb4OEksJ/fKtHaiJURKwdrKoi1/7bPtIZf3pycCBqWge1dmmC1v0xriIdGU0P/ZsHFm0O0MmKdWDYe0N7ry0GX1lCb9CmIhmTe7C/cGc7E8fxoyE9vTLyGqR1UT5HSnVGfH1+7hzYuee8/84Z/REye1qb2z5LW8MOr9xayXJjSWHOUrvT/xbsbD0l/czxlcHeIVmA1xEPfp/EUbfHStxudDkub4ynD0cZq59Ljp6vLt1c7Aq6yPz9+bnzcJmd91P8PUtKe+tH5VcoAAAAASUVORK5CYII=",Oae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4gYKEykwC1q3gwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAKXSURBVEjHvVbPT9RAFP5mpp22CxHjj0V2o8RgTNxlT8BBSdDoxcTEg/wHnLgYL/4NnvgDPPknePaykRN6UEk4QAJkIYKisqsCu90f03Y8NLjtTku7CfCSOcz05X3zvfe9ziMjEy8kztE0APj+aeFcwHKTL31AACgvbp0p2KMHN7sMj+3N7/mQ05/dG9j4cB37exwdQSADyScE0JgE5xJWxsPY5D7y42uRYHOXXodTGmVfl8exunQFdpOGzgkBpPSXcAiEQ9CwKarvRmAtXsPE4x1kb23GMqVRh6vlKSy/z/4HI6T7TUZITGP+YbNF8GPjMjr2hfSAuysF7KwPwPX8PaPdgMf7XnO97o1q30zsrY2erNKgNQ8N2DYNBANyo21MzS5FBthdKeBLeRiO64P+PWA4rFrpGXLLUZxEi8YGaB4ZoT2jEuag6KOGpL//ALcEaCAKpQA3nfSAoqUrwiDxBFGvWeiIbg2FQ9Cq8/SAuuGEVOmfebEBXKHepnHA04vG6TDFSTfd0P7twsPYgFIC2+sWtgM+c68S+rA3pe1G+F5Pn39ExvKSf9RM4sn855NTqnFXSSll4Rtoho07d2uJgKXpGozBgwTRtDWFIaWqcnOFCkwjXtEGl8iXttKolCkMXYdE1LWB4r1qPLuZX+DWUTIg0zyFoTkY3Ve5YjTLgQEPuUIlXVu4DlUYturRj0ocy9LMT2i8mQ6Q6ekZRrEcGnIxfLuSvvFJj0AIAZgeLw7dbKAQYFm8vwemt9MDGhmh9KQryInyzxe2YHCJq1mB7FgleYjqbYt+GAKAbtUxPbsJzeiAMqc/wI6tKQw9lyQ2+cX8TqrXJbKGwVedEEB6ODXTlOnqGfylzl6nC3g8N561kfMe9f8BZozikr7J5GUAAAAASUVORK5CYII=",kae=""+new URL("gameguyduel.4a69a0f2.png",import.meta.url).href,Nae="data:image/png;base64,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",Uae=""+new URL("happeningduel3.def78fe2.png",import.meta.url).href,Kk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAADC3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZZRcuQoDIbfOcUcAUkIieNgMFVzgz3+/GDc6SSz2UztPDZUA5ZlSehDdofzn58j/ECjXHJIao45R7RUUuGKhcer1TVSTGvcF/FevJOHeOwbDJFgluvS85afkDP0ecvbtlMh1ydD5dw3jvc36jbEvh3coWxHQpeDuA2Hug0Jb8/puj6ubcVc3J630Lb+2PdXGnxuDUMS46yZLGFMHM1ywdo5JkPe+gxUbPl/OPp4HW5VRkx8CknEmGeEgvDFpWIua0TQkMy1rjGJX5GCFodoWJc7r1+3ryIPd+gb+Tukj9UH1DfoZ9JhJfRWkQ+E8mP+rZz0TR6ekS5uT55z3it+LxdZB+Wt3dTmb4zuY5zX7mrK2HLem7q3uFbQO2a21lMZ3fDT6DPZsxd0R0k04Ow4ZAd6o0IMjIMSdao06Fxzo4YQE59smJkbC7UAoQNG4bZwp9lpsAFwB3yWhuMgkPIjFlpuy3LXyOG4kwecHoIxwiP/q4fvKI0xC4po5vK4coW4eJ5sRDHJEYVIUAMRGjupuhJ8949tchUQ1JVmxwZrPKYF4D+U3g6XLNATr2K+6oisbwNIESJQBEMCAjGTKGWKxhyMCIl0AKoInSXxASykyh1BchLJgIMqgG88Y7RUWfkS40UIECo5iIENShCwUlKcH0uOM1RVNKlqVlPXojVLnhWWs+X5Rq0mlkwtm5lbsRpcPLl6dnP34rVwEbxxtaAei5dSaoXTCssVT1co1HrwIUc69MiHHX6UozYOTVpq2nKz5q202rlLRx333K17L72edOIonenUM592+lnOOnDUhow0dORhw0cJoz6obayf+h9Qo02NF6mpaA9qkJrdJmi+TnQyAzFOBOA2CZAE5sksOqXEk9xkFgujKpQRpE44nSYxEEwnsQ56sHsjp0Hy3+EWAIL/Brkw0X2D3Gduv6PW6/rQySI0y3AmNQqqb5RxemWv80v55Rz+S+G788vQy9DL0MvQy9C/Gxp4Z+MPe/gFUIoYlgj0gc0AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfiCQQAOzAPQTqbAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAADZJREFUKM9jYCAM/uOTZCRBMyMDieA/DpokzfjY5PkZXZ6RgGZGIuXIdwFNwoCkWKBpOiDK2QBwAxXyAqQmnwAAAABJRU5ErkJggg==",tm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wUCFgYtRntnkAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAC5klEQVRYw9WZMUhbURSGv9wgGtFKbG0kFDN0aCmVFErRwcWtnSrFtau7e8NDLLSbu6trEduljg4OSihUFKngEimitebRRo0iSod7zXvn5VmNMcnNP4X7kryPc+497/znRahG3RN3gTQwBAwA/UDCXN0FVoFlYBFYIe/s3/RWkRvAdQIjwCSQqvDXOSADzJF3CrUB1YDjwAS3IweYui5w5JqQr4G58gsKWnsg1gftKWjthZYufen0D5zswFEOiltwsgech/37CHnnc3Wg3RNtwDTwVqy3xCE+CPEXlcXQzYK7BKdu8MoMMEbeOa4cVB+Ub2IfRjsg8RI6n1SX9MI67M7D2UFw/z6/7MBF/gP5E2grrXU+heQbblXbs1BY868cAw/CYCOXpPuHiOT9V5WnuZLt8OtrMLKPg9tAhfx0WkAmR2sHCfq/k6P+lZRhEIqGnO4PIpJdz6i5Wnsg2g6HmxcraWLD3ykubJSnXtfJvzXdk5Xv2TsXddaf+nFxuusNCfqe0Q7CmCKh0UyOVl+Cqild25/KoqpKTwd/MW8UJOh7t8Tlk8uX+knvFA7ScEmGSZ16Xdx/l6rVo3dYoY33/t7gnjL9pFcmbJFkSSvT9GrF+uwBlSxDynTmWu0pe0Aly4Ay9sGEu9ei1AuWfuXzOF7Ta4MkS0LRJFLGLXr2wRZJll1lLK3WyY49oJJlVRnfrXWUswdUsiwrMxzQKm7ZAypZFhWw4oV7z6LUC5YVZYyUifO59jCNlpv1P+dz5J39i/KU8b60ZAGoYMj42zxvCnLq6ua1USqsBwcUcx6o9iWOV7XmGwcq7+2Eeaap0qezA2206q3t2eD0ZKrc12tyz5IU1up7sNxs0IGO+Cd90tcXFzaIDT8sNdOHm7qBrXVDXViHnS/+lRnyzserJiVjXrlCO8JaRtbNBl1nzjBcMXvS9rkJhmQS1vKxowfbBINcCWz5aFzCNsHLhnJgi1/fXH7g6vJC7B/OGhhMMLwmAgAAAABJRU5ErkJggg==",lV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAowBLAGWP06nPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AcBATg5mVRUkwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEa0lEQVRYw93ZW0xTdxzA8W9PD73RllJKucyD0VEgMnQZmTGR4B7YfNjDEt0eTPZwXmSXRKMuG33YnIshFMhilpkQJ2znwUSTJexhmTFZ2ARdnInsZsroKYhwhOkYqEztJUD3AAyItsAol+73ek5PP/2d/y/9/35/SJHQLeluSc4GzgJinDvyE1ybGwPAbjQlknyoJLuBQLbT5jh78k1EUXiyNMeBqNfHFw6NsPv1j4lEx7uAcjQlnDyoJOcAqjvLZg9c9KEzRXB4jiT4QCzu10X7ThHsHab85WOEI+N9QBma8nD5UEmWgO4cl92itvuYTAuTWXR4yatm7o+I9J1icHCMshff52Eo2g+ULoQVFkAWAKqU57Tc+KGBybTQMpFTuTFueoO8fCv+tlrSzYaNgB9Jtv43qCQXAb0F+U6T2u7jUewemUVHlomcxZo3v0VObjr+tlqsFuNGoCsRVoiDLAH8RZtyxN7LDfw9OUJ2SU2SkPOx7lwLXd/VYrUYJaAXSXYsDirJWwB/ydO5or+tljuhQdwl3iQjZ7GWzW/jcpvpvdyAw252AwEkOTMxVJLLgetbPPmCv62W26FbbCg9ukLI+dh0u47ARR+ZGRY3oCLJzidDJXk7cK28bKNw/dvjDD7oRyr9cIWRs1hr4QEsdlDbfTgz0l3TmXXOh0pyBXB1+7ZNXPvmGH33VQqe+WiVkLNYW+FBjNYYgfa6GWwQSc6am9EzFc97uPr1UdTRLgq31a8ychZrn8YGL/nIcqQ7gdZ5r/7MJ9V0/fUrxc82rvn2w154ENE8QevpAwCGx4qp9LkT62avlOE5hCFNBNAv/M+0xqHX65jZja1r6PQubL1nNIZeL6RKRlMFKupTpJgE4V/juoYKQqpUvZgyxZQqazR1qj61Xv36hv7+8zvxM3qn25dgeLB64XSaKMkqo2pf4+PQXa/5cIgu/lxjrMmsZ+SXJvZWn+TKT70AFXOhu/oHR6KeyhpsQtaaYQ1GgVCgmf3vfUHrhU6AvWjKlVmopvQDnoGh0XDxC15sQhbD3fWrijUYBSLBFrx1X9J8rgNgP5rS+ngXqikDQPHA0Gi4aJcXq+BkuLthVbAmi46w2kxD03nqm84DeNGU5sRDsqmhmLohN9MUaK8jxBiu4ndXrNnT6WDi5ue0nOugukYhBg1oSs3CkxJN0QDPrdt3HxVVejFj5656YkUya7TA+M0WvrrQOYNsBrxP7qLiD8meYmomagl21BMzhHF4Dicts6IBwuppOn4MUrWvkclYrBV4FU2JLQ06hXUDwWynzd5zKXlYQR8j3PMZv/mH2PHKccYnJr8HqtCUyfh96UIxNbfvyXba7Gq7D8EUJcNziOUMckM3mhgYuM/Wlz4gEh3vBHagKeOJG+jFxBRWdWVaHcGO+mWMxuFBz6eM3Z3AU1nDw1BUBbYu5tBhKYcNrullkPCwIc/tIE2Mf9gQCkfZuaeWe2OhPwDPYub3kPzjmzwgbRFPCgE70ZR7/N/iHz3TcliI4oAIAAAAAElFTkSuQmCC",nm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wUCFggUh/3CFgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADMElEQVRYw9WZv0tbURTHP7nRqPlRHkmDoIJDEbsUkSJ2cBNcm7UtHRwa7OgfIFIc2s2xYocMQl3tKrg5KKGg2KHBKSCCvCY+msczJkQ7eF94uYk/Yoy5PVPeeSTvk3PvOfd8z/PRgs3G4zFgDJgCJoEXQL+8fQIcALvANrCfMs3cfZ/luwdcBEgAS8Bwk1/PAgvARso0C20BlYDzwCcexhaB5bsC++4I+RrYUP1+YKC7m5FAgNGeHoYDAaJ+PwD5SoVsqUTm/JzDUonjcplK459PpEzzR0ugs/F4L7AKvPf6434/M5EI0+FwUyHcsm02CwXMSh3yGpBMmWaxaVCZKD+9+9AQgjeGwUQw2NKapx2HdcvCurhQ9+/L6xLOdwPkEdDr+l719ZGMxXhIW83l2Dk787qKwFAjWN81y/3bjaQPeGsYTS9zM9vhu2VxWRvZ5+o2EI3+qBdyLhptGyTAdDjMXDTqjdiwZKhLXDW7P7vX7wyDqVCIdttgdzdhITgoVoM4Nh4K7e05TqZu6WWd/NvOPXmPPfvErbPepZ/3ZvdjQwIkYzEMUbMb52siqkbzYzTacglqpXR9zefrouriJ7zFvFOQABPBIHF/TeokvEu/5HpnIhE6bQrDEoBPFvc/bgn4NjSEDvbh6MjbGzwVsp8E2WDoYgrLmJBNLwAjgYA2oArLlJCdOQCjPT3agCosk0LKh6uzS6OIKiwvhEfjVJteHUxh6Rf8JyakWqzKB11MYTkRUtJeNYKlkjagCsuBkLobgMz5uTagCsuukMMBAA41iqjCsi2AfffquFzWBlRh2RdSSGUBKlLDdNq2bNt7zmdTpplzy9OC690sFDoOqjAseNu86hTErFRIO07HINOOow4oNqqgUpcsunfWLatjoMqzFxtppmX3g3VxwWou9+iQq7mcOj1ZrtP1krwqSXbOzh41sbZsW1WgCe+kr+bk33OczHgo9Mxtpn8Viwx0dTHY5oY67TikTk+9rrWUaX65bVKSdMvVJbCSz7c1slu2zUo+r450krfOnqR81n9IpsDqPXb0wOo/yFWA9R6NK7D6v2xoAKzv65sbEu5RXoj9A2ffecywqU5qAAAAAElFTkSuQmCC",cV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AcBAhIifhzvDgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABq0lEQVRYw+3ZT0vDMBQA8LeKa2E7OP/EgzzxJOJVEAt+kp7y0XLKV3kKXkU8ajxoxD+gghOxHupG3dK0W9N1075rm+SXkCbpC8CCRGuit5FvkJbaRcMhiwJQou++S8gZ+e2Y/HZcNgb1APLA7Ygi3yQtbwEAjt6TQTgJ/Kn6O1o+ZFEXlHjLK+cVQKIrZLrsoC7S8hWQd8pBkW+TlteukDnY7nRQ5Luk5ZVrpAX7YsN6Gcg90vKyKmQOdqUYFPk+aXlRNdKCfQLkPTsU+QFpeT4rpAX7CMhXzVDkh6Tl2ayRFuxDGuv9II9Jy9O6kDnYteGCT347rhtp3RT6Hy0v62GdMTqyYx/TPCCzLB4sSDTQBtpAG2gDbaAN9B9B08equmPU4tnOgPNycB5CQxbtzAvWdLof/oqksiKVJRzKIH9Da8bakOPQBItV5JvKIM3LkxIqZBHOas4a0pDGJTM7P4p8i7S8qXJkjUgl4smgCZaRlndVYA3IJVDia7qdSQkdsoi5ngYG5LINWWwLVeLeJdaADECJT3cTCvl6BZcNnaLN13l90wMlnuGvxTcwSZ5+GLmLYwAAAABJRU5ErkJggg==",rm="data:image/png;base64,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",uV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AcBAhco477yVQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEEElEQVRYw93Zz2/bZBjA8e9rJ87SlHUd/TGxuBOgtR0/VLShbaIMGKRMQkKiMCZAFMwkVgmxy1Z24MQfMMG4wQV8ggMwfkhISLRIY+IC7AASmvoD1Nad6IrCQkpZSmObQ9rKcRzHTtxN4z1Zid/XH9l+n+fRY7hBhgh1tqq1AwsRXXsThr4cPVTVOoDLAPbs+43dna6X1g6TGHohOqiqdQLzTmRq/9GyU5ItKyBsz+lK0kRWLBIpk6n3PnZjmzH0pcahqqYCs06k6B0GW9R1N7ftyvP7Zx+Exko1kF1upHznsbqRAPMXN7PjuSO4XqG/UbXm+qCq1g3MOBdU+l7GKkoN76LZC1vpPvaUG7voh5WqIHuBcedCTfuOslKQIws3k+fa6XvtcS/slmBQVbsDuOhcoOXBF7maUyKPjT9/sZ29bzzmxl5B1Vr9oaq2B/jFObHt0BD5+eSGBfIfPuzigbcG3Ng/UbWt3lBV2wv86Jyw/fCzZKdTG551zr97G5l3HnZjs06sWEXeD5x3nnjr0NNMf39z4IvJcYtEc7GUcjavICSbeMIiO50K9G4L2eLRU+N8pZ1zh642DD27BrWdyN5XBhkf6wwEbFX/4cDwr0gelsWFBGNndgYOZ7JicujUOF8OfVuONXSx/ujXkE980k8hHw+08JZ0dEiAmGIhZJvBs/3u16B8Mw2e7UcIuGfwEuruK76L3tRZ4MDwb57IpazCN2+HQypNRR45MUl8k7VuqRlHhYDdh+dI9+W8kR0FHnp1CjlWmduv/hVj7MxObCscMjMygZI0w2cmIWDPEYNtu/Jlvze3+yDzMb4+3RMqewVB1sz1QoJ9z8/Q2VPCptqWOXh8CjleiSzkY4xuELJ2UbKK3f/CDOm+HAePT3oil5dkRt/sxlwJjowni2ROBkMCxAIVrRLc+4xR9f/R0z0Ul+VQyIGRCZQmM/Cchksh2yZUsVIPMhKoCFGaxhImmRPhkZFAA6dYxWRgZJxEs1nX/GsGzZycqBt5TaGJVLGh+ZFAhWQH2HTi+kMl2Q4QHrgxoHaU0E+f/K6+RWJW5I/ebfEsnN0lVq0x91MLhcXyJGf+K5Vlq97MZc/064d0Fs5r0B3AdCPYqIYXsrylU+qKzFxPbDVkZe+pTqxlgm2J0oaxBZZZWtYsCrBLm61WsPdDejfJPJpifljbhs9fv9sXke7L+VZftZDe4cnQDUB1TvSNBgH2h/AJXxXIKiHTO44a+hyQDoytFb6qZC5PpKHb4QK+oV8COqPAeqVYD6RcDVk7Mxn6AtDRKFZINZFxDN03awRtja9/ZHBvMNuCCx+lV49FReAHuOWuPLffl62GDPTRIczHhjbgD3cHo65XIWT/PhzUdWcjGK0Yeo7/2/gPg765gTtV6VkAAAAASUVORK5CYII=",dV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoGAyE4E5DlewAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADj0lEQVRYw92ZQUwTURBA335aoZUKLUFMQ2iMBw3RcFCDiVz0pMZEo1y9Ge5cTcim4eINz1418UJI9SLxojGYiMQDwRBNTEzREBBpQwoiKbQe/tL9fylIf1tanFN3tv37On9m/sysRTkSibcBPUAf0AucAzqcu4vADDAJTADTpOxl00dZBnAh4DYwDMRK/HUSGAISpOxMdUAl4CAQpzJiAyP7Bbb2CXkLSOy8IaCxHQJdEIxB4wnwt8hb2RXYWIDfSVifg40lIFds9duk7OflgUbiTcBj4J6m94chfAnCF0uzYXoK0u8hm/beeQIMkLL/lA4qA+Wj5ocNzdBxDULd5W16ZhYWx2Fr1eu/53cLOGsPyB9AU0EXOgvRO1RU5scg80nV/AE6i8Fau2z3Z82Sx6+Xvs2luMPPl17LnvG6gSjy08caZLS/epAg1472q5qYw7CHRb3RXYIlL2Sf8nprhICia0UQPvKU7+K0iWW1bCA8eTKh+WQ1LVnMsqGzqibhMO3Y+kEtuisdOPuR6B357CJMQrGme+J0XKNmoj87vm1VUfAHNZmXmyfLkVC3ZFB9VQEddn3lEjUXnWFYgsrkHit4wkEG0F6B5YZPjEi8TTj1pJTGdupGdJYe4RS9UgJd9QOqs/QJpzKXEowZr7vGMTY9Ol9esMBRswV1ll7htA+OuU8Ygy6JTtbz+kF31AqyZYUMt15jOSeUHscteg1knQi/aNR0LVYrOY9u36KzdIhKudSG1cJPS4XK00IYTEF39hIsFq6yK8YLbdLMPEENtNmKgmWZLaizLAqnpXXMsmD+ly0f32jXQIOis4wt0lhmfE7ffQOQjZjx8ZnnXcNlxvOyqLiZz+G3LpiD/k6qV5M+ZzjgRMRcGRYVvPLf55W6e+U4pc4y4QOmXXMvGa97cvMtj3LPlCYL7uIn4H/AkmWQ9nSWaR8pe5lIPCnP+5ystA3O+7b8HFdzH7QKHwRN+RUoFTQ9pc4AkqTs5e30NOR+6X3tj0+dYUgt89wWJJuWfXetJDPrHVAkXFA5/7HdrDVeO1D92fb2bEo9mUYKn7ZW5XDgoGV+zDs9Gal4u1yFQYTWLjfouevNFwJXThWK6bWvsoCtdkGdmYWFF/rQLGU//NekZMAZqzjbMeqkiypacn7UO9IZ+I+GZDpsnY8dXdhDMMjdKxuoLl4Xo3Ed9hC8bNgJXMevb3YPuAN5IfYX3AU4elYvVkwAAAAASUVORK5CYII=",AV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AYFACcbMq7POQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFGElEQVRYw9WZTWwUVRzAf2/2o7N0ty1Z2l3LxxKsgpEChgioBD1I1MSExosXuZKeTDAxXiQEazyYGK6NV4yJB5OScDEmhGg11tAoxWCUQmhB2W6z/drZ7uzs7I4H3izT6Wy7M10MvNPuezv/99v3/t8j2MDYN7gjCewHjgKHgX4gJZdngOvAGDAKXJsYns4H3UsEgEsAA8AQkPH5+BRwBhiZGJ4uPBJQCXgaOEdrxlngfLPAoknIE8CIe94SFkasSilRoZSoUG43qURrAEQMhbZimFghQqwQIVoKISzP7QYmhqcvbgh03+AOFfgSOOmcN9qqLKRLLKZ1X0fYmVXpysaIlkPupQvAqYnhad03qDSUcacempEqs5kiWtLY0J3H81G6p9oJV0Ju/T3YyODEGpD3ANWeW0rqzPRptHKkJuN05FXnlA5s84JVGlz3uA1pYZHLaOtDKgpvHHiayycEd9/9m+ibX/FCby9YVsNHZvo0chkNi/pvVGBcMqwNKnUyY0Nm+wrr6qIlwrx3bA9f7x3nYGKejkgPs1ve5pfXvuP1XdvXfHYxrZPtKzhhM5KhMai07rrhNNJHh1AAtu08zsdbrxJ2/U5XtvN7//vEI9aasFrSYDZTdE6dlCyrQaWfHHHqZKOTFC7V3rs1R0p4G1hu0yHUhLquvi6mdZaSK/YbkUyrTvS007qbNRwLQTxieOoQgKF0oUeiTcma6dMwI1W8mBTHaZ5zXnnzoc1i0VCpNVgPWTrhWrVpea69z9mnah/EgNOZ+/WT2aUOGpmbWs0SX24+MGhJA6NtxR8bcIIO2bML6ZJvf3hv7grzlvf19hTHyelVX/JcDEMAinTuGTt2+w2LANpSitvmJo+VKtsXxiib/uQtpnUs8dBd7RvckVRkPvng2mNVgoxKaYYb+mavv0Aq9xdC+M4m3Sz7FZn0AlBKVILFQrPGeKEXt7dUxGZ+nM8FEuliOarIzHxDoAKLm/PdqwyqZ/lb9EKpFaCHFVk+AFBuNwk6pvNdaK4jfUq7imFYgeS5WPoVR41TT3qDjEJhlKlqxwpD6lm6Qc0SwfR+JUtKaVXKphd1bhsJx8wym+fvtiwlVGS1WC8fAg/T4Jbe5YitRb4vzAYW52KZUWRJC0BbMRwctGZyp9zpSE97SZTLgcW5WK4rsu4GIFaIBBYsqHF/OYHTBNrLlcDyXCxjimwObBgUIK/FcZ7hnFFtFehoGLhmf4uWQhsCvT+rMzo7RheCd/RLLJtWkB6HF8s1IdO8O3a8z2W0QPG+laMzq9IzFa9XpxPD0ztt0zpjz3ZlY4E3iKopju/qxjj0AVtSz6IQzNm7GM4A9TKnXoJEyyHi+ajvnDS97RjfvPwDB6ILDyae+Yj+3Odkr3yB4cOm4vmou0ExUs9HZf/nrL3SPdXuzxlvSvPZoasPIQFEG9dTH3Kk/0Vfslx7n7V7U06vet7+EK6ESE3Gmxfec4RXY/965ffc7H2LUKg5FUhNxt3dk/OrijtJXi9JOvIqnVm1qQ3CoRrhBsZdDnVgiuYMyNU1GXB2+lbEKdlVu+C8hnh+/QoyP/8Tt8xEgwz/Z4TZXC/K2TRzd/i8gvsp2bBCIEhPJtY92dLcHJ/cegXddcPd+mX++e3Smr60M6uSnkw4ewVTkuHRNMksEeKl3c/x6e4/2NP2J8/PXaTw6xC1pWJLmmRPdtvxiWrkejTPHt/WuAv28X/Z4AH8+L6+WcPg/pcXYv8BRb071XbQeyEAAAAASUVORK5CYII=",fV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AcBAhg74JivRAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAChUlEQVRYw9XZz2sTQRQH8O+83STbTVLTVitotWDBi9WCVNEq3gQRevAHoh5EL/0PeuhF/Q/8E/QketEehJ567KHgwatHG0QvFX+Axt3NxkObYDb7472ZTZcOBJJshv1k9r03s7PAPmlK3OPYw04uZ26+UMOD7iI7W8/NRuf4IzFW6SIXX13Gx/XD8FuEwKPYLv4fq+/YzMI2Nh+vaWGVDvLGm0sIPIV3T2ZFI3nu3haaHxr4svpSjCUdJABYtjxUy9UAFx58wvT9O+gLIUbckw4SABQBimTYstsGAJy9/Rknl26JsKSD7DZ33BNBbafde3/q2lfMLS+ysaSLBIDRyZYMWg77Pp+4+A3nn15nYUkXCQC1g7IRtUrhwHdHz/zAlWdXM7GkiwQAd0wGJSv+yk5M/+6dKwlLukgAcA74skKfUWPSsKSLBACnFoguu2JU7SRs7z9KkTt1sc3+raRCDGCjMSpBAkCpwodWhaUsaiEYNKsc8ke04ZmcygyalMXxiRcUB1UEkM0bVafuFwcFgPqhv6zfVapBsdAaE9pdkBQGrU7wkqTkFAzlTqO2ExYLHRnlJUncgmRPoRXmNKpzR5ArlJsk0ruB3KGs2FOdzJXT0KGc2HMbvulpzKGcaVS6IMmEvr25IZ9GFVCfbMEd83qvaDyOaCxIohZlsnAeVusi/9+gUCa3InuFHNzSKRibhIzfeyoIm4ZM3iQTYldXTqcen5r7jvm7TW1kcnnqxsVuR51q0DcaKSWMg0yvozliKWH65CKzC35O2Lh5XoLkzUw5YKPzvBSZnEzCBHv/empnwyBUaP2yB7oemf2JmYVtbaQMGoPVTq6hPmyIYI2b8PHNvmn/APiMNtZk8R+/AAAAAElFTkSuQmCC",im="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AodFwwZ4+R0+AAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAJ40lEQVRYw82ZfYwU5R3HP8/Mzsve7N4rc68C4gsoYssZq/ISa9VqYuMLiqT+0TRnauiLpVix9RVqmoIVrdoqVhu7CfUlbdNWG02bWElFLVqJHoqAQrkAB3e7c3vcLbezrzPTP25mb9nbhYNq21+yyezM8/ye7zzP7+X7+w38H0mPaaq1nokqg8PAV4BlwKnAPcBrMctyP0OA5wHPAPOBtcCamGUVawLtMU0BvAksrNC1MGZZW2osIoAI0AXMAy4CLgTe93+7gANAEsjGLMuromMT8KWyW68AV5ePDVXMWRqAPD8c5rDj8K98HuBzwJYK5YuBdcDiGhtV7b7dY5qnxSwrXnF/AcD19fX8MZXCP9H7gdXBAKls4SjwfADy2y0tnKIoweNFFSA7gdfLwehC0B4KcX44zLKGBhbX1XG6qtIkyygTU+uAHT2m2VBhlzrAldEo19XXB4/u6zHNq6vt6HNASBeC5c3NAJypqryeTgNcUaZYA7YCUqMk8c2WFmZr2nHtcMx1+eHAABnPawY+6jHN2THLsoFGABlQhOCa+nr68nm2ZbMAf+4xzbNjlrVL+ItfCfwVYEVLC/PDYQBGHYfbBgaCtRTAAV4FLgsBD3Z00CjLU3aaw47DXYOD5D0PYDtwHnAO8H5Ukniss7M09u7BQQaLRYAU0Cz1mKYMvAhwjqaVQAI0yPKEbUATsAa4DGDltGknBBKgSZa5t7UVf9Y8YBNwpQyTdN3X2hp4ej3QJgEdgC6AFdOmTVJuSFIA9gUfKNfW1zNX108qFJ2iKNxhmsjjx71Yhgc6FYV5FfrCkkSDVNqmuSE/dtEoyyhiUlhleXMzTw0PE+zkpZEI104Y/EnJbE3jDtMM7BCAGxsaJo3rVBRGcjmA7hBwFkBHKFRV6VxdLzlX8P/TkNmadlwnHHGc4LIvBPQCgeHWBPvflqzrkpjAtFMCPgk8cv94cK8qGcfh3XSaVLGI53n/EYiC67I1nWYgn8d1q2fmBy0LH+YYsEfuNowjwLVA+xvpNPN1nYYKD8y4Lk8NDXH7wYO8mU6TKBRIuS7TFQW5il3XkrzrsnlsjLfSaW7t72erbdMoy8zSNKQyPa+kUmzJZErJJmZZB0RZdngHmC8Da9rayrMSH2QyLOvrY3cuh+uns4gksaa9nVtNE1WSjgsy57o8lEiwPh7H8zwy/qnMVlWenTWL+XV1AAwUCtwbj+Of2bqYZd0dJAR6bdvpNowYsMSD1jfTaS4Ih4n4O5v3PN4ZG6Mvn8cBPKDgefwjnaYILDAMQjV21vM8hopFHkgkeCAex/Y8cv7LtoVC3N/RwaX19UhC4Hoeq+NxcuMvsQtY2mvb3lG5PmZZeeACYHcB+OfE1tOlKHyvrY2ZqlrK266fFtfH47w8TiSqyhHX5aF4nPXxOIUy2xbAueEwF0ejpZc84JuUr/6Scmp51JnFLCsD/LZyMUkIvhiJsGH6dC4wjCCzIJft7rHkYLFI0R+rCYEhBOfqOne2tdFVZmJlsq2SYUlVCOy91WaGhOBsXec0VWWGqtImy7SGQtzT3s51VYJ1IFFJ4jbTZJ6uowmBLgS6JHF3RweLI5GjnKhMuntM85ryG3IZSAP4CFBnKArLW1omzY5IEnPDYVxgWyZDkw+0S61ZQSCEoF6WUYXg41yOBlnmp11dLGlsnGTXjbLMvnw+iOk3dhvGz3ttO1di+D5L/ztwsSoEj3Z0oNfwZM/zGHEc3stkmCbLnBMO13Sk8jlHXJd9+TwCOEvXa85xPI8Vhw4FUWGzb6ueDNBtGHcBNwOsMk3aq9tNaYfCksRpmsY0IdibzyN5HrokIaosXiwW2VMo0CZJdGgarYpS67hL/nCGpvGWbQPMBLb32vYOyT/ytQBXRaPMmQIJLo+vN+3dyy39/QyURYlAXNflpdFRrtq9m3fGF56SzNE0zp+gm7/pMU0hBaxIFYKlx3CKavJSKsV7+Tx/Gh1l4+jopOd7sllWDQywt1jkZ4nECem+ZYII6UBzCLg4KDuOZ2cZzyMsROmIv2+a7M/necO2WVRGuAMZKBRwgTohuKGx8Zi6KkURAkOSSI/H1fkhv7S4/UChUBNk0fN4z7bZkc0yS1VZGImgCEGDqvLUzJlsz2YnEV+ABZEIz0yfju26XBGJlHjDs8PDJIpFljQ0cJau17RZpTw69phmGzAYcNLVra1oFR7/oW3z1b4+BvN5XODHXV0sN82qRPt41O3O/n4eTyYRwELDYOOppzKzymnuyGZ5eGgoyPldkp8BlgEMFIusGhxkqIKb2p5H0nEYBrLAqoMHWXXgAOkJYjslUrJ2cJAnk0k8oAhstW12VHHCl1MpHpoAOQDEJT91/h6YC9hp1+WuwUE+KisT2kIhztQ0JB9oHngimeQnFfn7WKbzdDLJI4kErh+8BXBdYyMXGcZRY381PBw0IQBeA2bFLMspJyU7gRnAPgd4eGiIv42NlQy7yTeHbkWhFQgDv7QsXhgepngMsK7n8WoqxSOJxDgR0TRafFa20DBK1aft1/1bJsLYWuDLMcvKHZVCfbqX6TaMDX7/6PQPs1lGHIdFhsG5dXU0yTJLmpuZo+tsTqeRhOCtdJoFhsF0VaXoefRmMhQ8j6ifAA4WCqwZHGR7JoOpKHzLNPk4lyMqSXzXNDlFVenL51kdj3Nkgu1/LWZZj/aWxd5JhbnPTZ8FmoEL9xUK7MzluL6hgS8YBmdqGh7w4sgIWc9j2HGokyQur69nWybDN/bv59VUijm6TqeisK9Q4HHL4rDj8B3TZGVrKwsMg6WNjZxXV8emdJoNySS+tY8A82KW9XolrqodhF7bpte2/9JtGAPA1cOOw85cjsujUTRJYrqi0KYovG3bjLkufbkckhAkHYeXR0fZkc2yJ5fjDE1jfSLB2+k088Jh1nV2YioKXapKl6qyKZ3m+ZGRYNl3gc9XaaBV749WaQkuBt4AeLKzsxS6Uo7DxmSSjcPD7M7lKPpcM+U4FIEWWaZdUdjlO+Xazk5ub209Kmbe3N8fXP4CWHmsHuyUAmGPaaaBukc6OkqFn+d5jLkuQ8UiG4aGeCyRQJckIpJEwWdYISFokmXm6Dq/njGDWRU8IgAas6zj4ghNMQweAeqOuG4JqBCCqCwTlWV+1N7OPF1nWihEkyzjAZ/kcjTKMh2KQqeiHFUsnoxMFagFtD2RTLKuvX1yf0qW+XoF0V7kp8xa8tzhwycEVJriuBsA4sUiKw8dYs94P+ikOyDPj4zw2njfFWDFVOZNOVn3mOZNQUc64IwrWloIS1N71758nt+NjvJJLkdZevgAmF+tr3/SQH2w7cAfqnyMOFEZ84vIp/3Kl08VaBngS4CX/Cbrici7wA+AzZ/l56D/qfwbutHtsvRZRoAAAAAASUVORK5CYII=",hV="data:image/png;base64,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",pV="data:image/png;base64,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",mV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wYNEwwrTP+CQgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFIklEQVRYw+2YW2wUVRiAv73Q7bQFtrOUFIHahUJpMIJQi6nloSmXJioiUaKJlPDSBCWEBxMiUYdNDERjeDM1RFNBHoyiAprQRDANYIXaKhKlQKD04kpL2WmhlynL0vVhTqdddpbOXlQS+V92/3PO/Oc7/7n9/4GH8j8VW8Jfyr4MoAB4AigBFgNzAY9oEQCuAGeBRuBX4DKqMvTPg8q+KUAl8AbwZIJD/Bn4AKhDVW6lFlT2zQTeBF5P8Yx+COxGVfzJgco+CXgL2GFa75wK6TNAmqX/TvKAM1OvCw3CnQAMXwPtT/03dDNWT7uAd1EVLX5Q2bcUaIoqT5sG7qWQvSwxH/aegb5mCN4wqy1GVZqtg8q+V4HPIsrSZ0LuGnDlpGbSb/dA1xEYjpr1DajKgXsLHSaQm4FPDN2eDjPWwvTVY9OaCnFmgnuJPvDBVgiHRmvWIZVfR6tviu1R2fcS8IWhu3Ihv9pSv3PzNCpKe1lcNADA2ZYsjjdkc6VDsgbethdud40vWY+qfBkNKvvmAxcNXXoU8jZa6qPqhS5WlPaZ1h1rcLP/m1xrsB37QGsfX1KIqlwCsAtIG1A3tmFyLEMuL+6LCQmworSP5cV91kDzNup9j0mdYBOg8Bzg1X3sAO9my0ttTUUgJW0M8W7WGYQm2AzQWqNh9lP//cUeyVCrg8q+AkDWvTkJcirisnnkuCclbSIkp0JnEbsH2VdgB1YaDTLy4x78ySY3xxrcMeuPNbg52eSO36uRLCsdSOXvAIUAeMogPTdum79dyOLcxUyczjCy+w7BOzYaz02m9qtc6s9kJzb94bswYBxCI04Ropl6tOTxW7xY2QPAwbocGs9NiWn3Sodk/cy0Yj+SpcSBVL7b2FQ5K8FmM4xs2fAXWZkjZGWOULKoH393Gv5uV0r2y4T27WkQOGFc4HYR4IqIZyw8HB3peDErS1QmtB+KCFUDdhF96zLU9uDkHpEsjXbgqKH2txh/D9ZFR0lmZYnKhPbHsQBHHUjlfcBW3d394FkOgL/bhb87jbxHhhkYcvDp17n33UzxyoT2u74DRka1bTZx1weMQ19+Ou5Df7onyNLH+lmycID5+XqQfqlN4pc/smj+fTLXA2nxjaLnOKg/jmoqquJxCmUTcFiPwE9bBp2WHaT65WssmBOdQRR6NQq9Gq8828OFVom9n8/gRq9F4N7T47VN4+/6b4GrxkF7tWZCWwvnDbJnR6sp5L2yYI7Gnh2tLJw3ODHk1RqdQWiCTYCqSlikwboEe/TYMFaAM0tje3Vn3Otye3Un3lna/ePRYMSxVSnYDI8iAtT1hq6161H3PWK3h9m5tT3hTbRzazt2e9g8wo8MmtePBs3ROZNWfx6p/DrwDAB3B/SsMS3bSOoWLRikdMmthEFtNmjtlOi6IdZr/3noqIVQRHD9GqqyL6ks9KP3VTLSw0kdTepNB9vedseVhdrNLSkHgOKIsmE/tNXgIJT0GZrpCkJbjRlksRlkbFAdthnIEK8YY+mUy540qImNXUBGrMcH87w+cs2G0Op/QCr/GHABJbPz3cycndwN1fSTn8ZTnaNvT+tQlUNo9fedKmvuURU/qrIFmBroGXovWY8KG1NRlS1WHsgSeh/df6rFCdy2PMhoGQFcVWVFcS32uDsTHSxLwqHL4oUkUa9UlRU1AasS+HSV+JZ/BVTAfi8eCE5YaH4C8IpvErsoUhFb7j/VUgCsBZ5Hf8sH/e3+MHCoqqzoMg/lAZO/ASb0veqrL/2hAAAAAElFTkSuQmCC",fl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wYOEywpJcBoIgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADu0lEQVRYw83Z24tVZRgG8N/aMzo5qGmjlaRpBJpJKBgVZkgH0BDKgs4FIRQUdFsWWTdBEOQf0Ak63VQXJkTQhQVZGSRkReZ0UtSsTDtMM03qOF30LFoN23HOez+wYa9vr7XXs97vfZ/3sAqjQw3zcRNW4SKcld9+wuf4GNuwE4dNIKZhDS7GZFyBj3AM/YN8/sJLmD2Sm7YMk+AGvIO1+A1f4tcQvhDTUdS59ig+w/P4FgtwGX7Ib6dEMUSS12Nz5bgvW/kgvsDZcYHWWK90izZ0YCa+wXYcx224H/NwA94cLdHT8AzuGrD+aizbNcwdPBDiT2JJHgxexr3oHQnRDuyIpUpswWvoGaWfT8EtuK6ythfLTxZwxSAk98eiJR7G7jEOzEWxbolezK1Htlbn4sl4P/4FB7F+HEjKf67Hjzluix+3DSXql+K8BMDPCZiecZS7XmyNBh9BJ34faJiiju+0xfxr83RnTJA+l8bYHwMdxol6Fm3HA8ko+/BdLDtRmJRMdiBclsUl+gYSfQj34dwI+WITjznR5DtxTxLIh9Wtn4Y/ItY9uH2YWWssMRnPxqotIdtVRv26is9ubiDJMt1uqXBYV7Xonoqwr08ebyRm4IVKIlhQi7iXJDubgKRw6Mz3+eioRTdLvKt5UOWytIaVlYVdTUS0ymVlKy6tLBxqIqKHokJ9WN6KWRHZlsHKrAagF1+H8J8Frop2TU1RWzQJ0f7k/h4cLWLJIkXs6pNUVI3ACbwVXkWRYKqhO43XlCYh+nf8czqOF3gxAfULnm4iH52ETdnxrbV0hQtDdm4TEZ2Dc1Kk7K5lOFD66JImIlqt3rbV0vaWuLKJiFa57Kylkt6bhYUpCBqNGeFSFiWHSynaWDnp6iYgWuWw8WSFczfurvYrE4x2vFI5/l/h3IXH01S9XnGFRuCaZEjh1DWwZ9qBC6Klu1JpnznBJL9Pmz49lr21HKIVdbSrP8XqGnw11GnbGGBfiuWpOD/dcOdgI51VeCRzoN50pz3jTLIlu7kDn6ZiOn6qScnBEJ2XLViBD8axBJyBp2KgZdnR7f4bXzblkKw7c4UjA09s1NixHTcbg7FjiXqD3G48EXeYNUyCp0d+7hiwPqpBbhXlaLzbv5PmTZGw2QmCmbnJ0UqiKHL+/mjhajwa36/ed50hjMaHg2mxxOWx9OJo7h7134gcwye4MQ+yCM+FdD8ey3+OG4qowYZoX5/BX9m8jUvSl63AtSMhONpGriMDjJUpvOu9EHsPbyRYRlw//ANBO/GuZrPHWgAAAABJRU5ErkJggg==",rd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wkQAjIkoEJVegAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAE/klEQVRYw82ZS0xUVxiAP+4Mj+mAw2uGAQmOIiWEEnkkpFarRO2DRaFxR6IrGzemi5JoStKERdOVGxckDalJk2ow1UV1hSskcQUxSm1qk5ZK1fJ+hOcwDHPndtFzzeHOfQkT8E9OMnPueXz3/8/5z/n/m8HOxAv4gVzgHSBH1AEkgBgQBVaBNVG3LcnYRh8PUAiEgUzjw5s3aT53jmGLvpvAFLAAqG866Zu0LQMqgYBV374+eouLGbl/n1mLMQLiJRWhbS2dGi0EIib1MWBZmDX24AGVLS38pqqMhkI0LSywKZaDH9gnfhvlH6HhHYEqAjDfUD8vyhZtRKN86/PxFcDoKKeqqlKWQAZQJIosiwI4uR1QL1BjWIeLwKR4gS3S3IxnaIhZIAtAVfm7tJT62VlT0yaBUoMCNoE/rDacYgNZZ4B8CUxb9blzh2YdEsDjofLRI47aWGpajKlLppjT61ajClArQW4CY06LPh7nl8xMPtqitiT/hsPUWGhVZjhomO934zIw007E0GnUCbKnhzwjJICiUP74MScc9oEm5tiUNBtxMn2hYd2M2SyP19LRwWdWz8rK+LG62nEMRcylS75gMQX1GN7kpVsfl5/PN5YECqGBAU65GEYzrNmI7Ktl0LBhd6+7gXz4kIiiUGHXJhzmBxdaRcy5aMakSNoskRpMuj2umpq44NRGUQgODvKpyyHluUt0rXoBDhwgGIv9/zsvj/naWrLdjHj8OFk+H1+6aRsK0fv0KR/PzrKSTJovqaUlNtbXUQcGUCcmKAAoKqK8r48XALS382E8zpKmob1NJRZjoqmJZtm5N7a0cDIeZ+5tgdzYYPzIEY4BjbrlA+JP4/nz1Kgq03sNqaq8aG3lXZ1LMLJfqijo7aVUVZncS8jubkJAgcS1H6BKqvAB/p4ewnsBK0H6BYvOVYW4COgVeaKRDju+R5B+waJz1QE0SBV+uVy7RsluwJpA6kXnarAFBfxdXQQTCZ7vAWQKqKnpdwPWATLF9Cmbyax0dlKcSDC6S5ApmylDbP0S6VoXtzoG790j1NbGc9IgT55Q39jIqE2TLHGhBphWRHJAF7/d4A0NVJMmiUT4wKGJzLKqiFBXl312PUtL6UoXaCDA1w5NZJY1RUR9ehiQYxWZXr9OwOt1DCtci6JQcft2Stgsx1E5UjiU0O+jU1Ij085nz/I5aZbTpy3vqDLDlHxxXjA02hIBBoNkBAJ0u5k8mWRNVW03iWz+KxYxvwy6IIOqIs5+vRzlnv39HFQUQo5xxDo9Fy9S4fVS/+oVrckkK7bJLA+Vt25tDeIMc0+bJdM8kt9qBIp1nxaN0mPnExMJRoaHec/oC9vbyV9Z4Tu7vvPzfCH1KTYweOySYXLD3DNnCGgamxYTrc/M0BEMkmvjuP03blAej9Nv8ZJ/STlWee5CJwseko+u8XE+MZsgGuX7S5cosgM0lmfPOGp2ybl7lzLDUX7IleeQOy0tMWTQwK9mZnZbqqvJm5vjgmylwUGuGM51xa3n8AINLS2clM7mmBszuy3d3YSWl/lJ09DW1hiTbkne7eTn6zQNbWyMnw8f5n1hEl8aQH36EuvspG11lT9bWzlmB+mYyL16lROXL7PsJpHrMsOdksjNzmZpZISZmhprd5bW1LjQSFJa64ndSo0b/WzYkPrZiUyL41F1a4q0fr5xkG1/vsnYoVZ27YPYf++gNbW1nipNAAAAAElFTkSuQmCC",SV="data:image/png;base64,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",am="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoPEDIgAntuHAAAAAxpVFh0Q29tbWVudAAAAAAAvK6ymQAABA1JREFUWMPVmN1PW2Ucxz/POac9fYFSyttGO2rmszmtMSpmbmNuDBmyNRsT8/wB3vIfeOmN8c548yTeGC+NTUxMrC5IdjcDcTqNWIOrxsjY3JxlYxTG6MCL9pBCmNDXwffqPD3n9Pc5z8vv+f4eQRWlpVLAZ0U/fQMMjqQTK5X+t1FFyLMbIAFOA59qqcSOANVSnQGSABFfO28fOEfvnm7ntgI+qjSGWQXIAeAiQNjXzkD4VQCa7UZ8lofp7C2A7ngo5k1mUmNPBFRL1Q+MAnT62ngjfGTd/VZPEFOY3Fy8A3A8HootJDOpb+sKqqXqA8YA9npbGYwc3fS5Dm+I3Mojbj+YBTgdD8Wmk5nU1bqAaql6gUt5yBYGI8f+9/mwv41sbpHM0hzAUDwUG09mUr+XElOUAXkYmADY423hzBaQxRqdGWdm4R+neXQknRivyarXUr3iQLbawZIgAQbCR2jzBJ3mZS3Vc1UH1VJ1A98BtNhNnOt6ray5HY8cp8nd4MT+SUvVVTVQLdVLwBUH8nzXibIzhRCCC10n8VteAAv4VUvVXjGolupF4AeAkB2oCHItqDAYjvbiMd0AvgJssGxQLdUh4HuAkDvAUNfJqvkCy7AYjp7CbVgAIWBSS+UrGVRL9QzwC2A0uRqq0pMbZZtuLkR7MYUJEAauaqnsbYNqqQ4Ck4ARcPl5M9qLEIJayG95Geo6gSEMgIOFbGBtCaqlOlDoSavWkI6a3A3EIz2IfFrvBi5qqYzHgmqpngZSxZCFL625Wj3BNUMDvA4kiu2hWQS5D5gCXI0uH8PRU3WDdNTo8tNsB/hz/gbAs0A4Hop9mcyk8qBaqghwDbD9lofhp/ow6wzpKOjO28PreXv4MtAeD8W+EoWdYQrw+CwPb0X7sAyTJ62b2TuM3ZggxwrAJQP4eadBAuz1t7I/EMFr2HgMd58B5ADORnp2DKSjY+0vsD8QptHlxwDuAfz47xQ7UcuPctx9eB8LeBf4JH3/Om7Thc/0rDMQXnP9RhGyAzTbgYqCzy7N8dvc9GN9gC1M7j3Msph7wOzyPMuruXyG1VK9A7y3nSD7/B10txwqG9aBTN39Y7uvrAKXna3qfWAB6NxQpnQUtXuA5unsrSBAf+fhskCns7cdyEng4628C/A1cM0CGEknVoEPt2H5zgNfVGn6JUfSiQ9qdQBRzU2/pBRTKqhRKW2RvxG1BDUr7ViBqEuPCidtVQHU2C1DX4cerc7Q12OO7pZVX8kcFWLXDb2xo4d+96QnsVvSU5mjY5UD+tf834zmJtYKwM0qA9twITYUiAbCOSYv+XtLBR0FlpZWlu2ZhduVTtfPa+qGtFQtQD/wPNBI4ThyY9ULuDZZiG2F68RIOnGllLj/AdIE9v4Gt7WiAAAAAElFTkSuQmCC",id="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoGAi4JxBSTuQAAAAxpVFh0Q29tbWVudAAAAAAAvK6ymQAABIFJREFUWMPtmF9MU1ccxz+313AZ4ECWiFgFMYY90GRlG3Gw+bBpMiFsvphQyFYzCYIhhAeeZli28eiWQIhLMEozN98MExJHE0I2E4HEBI1NChNnZOmYtaVhw4HFtvS3h92SWqCgInTTb/J7uPf8+9zfOed3zv3BCz2nUp6yfQpgAvYB7wCvAUa97A/AAQwAVwAn8GC9P7AIuAjIY9pFve0z1xvArScAjLVbel9rLg1oXQPAWGvV+14TZQETzwAyYhP6GE+l7c8QMNa2Pynky0BwHUGD+piPrUvrCBmxS48LeXgDICN2eLUB/6WNCMxLHCT+6BeGJSpVJsCJWbmSRxVgDkjaYNAAkKwvhSU9uisBINEZdsWb+n0JdGHaFw/0QAKBHogHujeBQPfG20x+fREngub0ULlseEpIxYK6EojNFQ/0agKBXo0H2p9AoHFZ8jbwMhJref+LI1SA4wkw7cejIf+T17wkoBn4BbgLzG4w6IOY9boAfcVsNg/b7fa/Jycnw36/P3z79u3w2bNnRdM0iadgMLjQ4YkTJ0RExGq1Ltocdrt9oc3s7KzcuHFDKioqVtu/P+JVuXPnjthsNjEajdOapv1VUFBwv7GxMQyIpmkL1tXVJTabbeE5KSlJAFEURcbHx8Xn88nAwMCSoG1tbaKqqmzevFmampokGAxKfn7+avr/F3Tr1q0iImI2mwX4BsgBXgfejx3wwoULcubMmUUgBw8elEAgIGVlZSIiUlBQsAi0tbV14VlRFAkGg1JRURH9u9zkcDgcg4ODVwHrojXq9XpxOp20t7djsVg+2bNnzwjwM/Al8K6e8IqrY8eOYbfb6e3txeFwUFtbG7e+xWJh06ZNjI2NAbyp740VdXHbtm0/dnR03BweHg75/X5xuVxSX18/r/9vGyMpnaU8mp2dLYFAQA4dOiSANDQ0yNTUlCQnJz/i0ZmZGXG73TI9PS1zc3NSU1MTKU/ROZb1aHSYeg/4FpjWNG26urp6PhQKSWlpaQh4W6/X2t3dPRcL2tzcLPfu3RNVVQWQLVu2iN/vlyNHjjwCevr0acnKyhKTyTTf398f6urqCgC/RWVJ4k69AfgASAN+ALY/fPiwuLOzM+xyuaSwsDA61k7k5eWN5ebmjgDXABRFobq6moyMDCYmJnC73YyOjqKq6lLT/6fH4/nM6XR+XVVV5d6/f79aWVmZAnSu6ppXWFiYfe7cubaioqLv09LSfk9PTx+oq6sjJydHGRoaCsc2Sk1NnQXagc9LS0tDO3fupKSkJGw2m0U3ysvLKS4uxmQyAdiMRuP4jh07ftUTup96vd75U6dO3W9packwGAy7gVdXBPX5fIGUlBT1/PnzqV6vN8PlcmUcPXpUtVqtocuXL4eBkWXaB2traw09PT3h69evhzweT6rH41E9Hs8rfX19DA0NRbx612AwRH9wGPj45MmTvszMTEN9fX36alLjCmABPgLeiiqbBX4CvtDXEUBTVPlkVBocIAR8FfXcEVM3omtAtz7uzaj3HwLlMW2+44Wed/0DIPwsE1bJN5kAAAAASUVORK5CYII=",gV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AkWAwU7bMh4KAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEPUlEQVRYw92ZPWhbVxSAv/esX0uyA8+uVCgWpip0iWNTtVlCvGTqUrdobZLJeE07GxO8dPMqMuVnNYkKGbsEMjStS1tlaanASBQqNX4QW5YlS1bUoe8qV1fvPf0btweM7fPe1f049/zcc6QxgixtLBjAFeAacBW4DEStxyXgJfACeA78mk0XzGH30oaAiwBrwDYQH3B5HtgEMtl0oTwRUAvwDnCX8cgWsNMvsNYn5GdARtW3tBb1YJNqpEE10uA0dEbD9wYAb13HX/EQLHsJlr34qlNoLdvt1rLpwrcjgS5tLASAe8CXsr7ub/I6VuUwVhvIhLPFAJeKQXynU+qjR8B6Nl2oDQxqBcpPsh+eeZu8ilc4NuojnXnY9DGfD+FpTKn++5FTwGkukH8CAaE7MmqUEseMU6K5MDNmQFbVgPfsYDWH4/5NWLJFi1fxysDHPIg7zOdDaG9R8sCHqhvoNmvvyZDFRHlikACHsRrFRJkWLaGKWwzOFlWj++/4sSvkye3KUHDXn66yd7DXZdl38mHHbKAreTIj+6QdpBEw2oDqZv3KkxuPMQJGl2WPjI79MhZT19HfkaPbLnCMgMEvaz8DkJxL8tX3Xw8FagQMntx43KUvJY458zaxY9Ikax4J5V+Jo64UJCCFJfYO9rj+dHXo4weYvh+yTV3v5mZk1Uw2XSgLi67JydwuT6rHlZxLTiS4jo06dX+HVdfko98W2texqu0HTArMThSGbQDdSu5xUbudonzYwBk2ZbW0t+lqaWPB0K375L/HHmw6Lv78uy8wa+a5wSosVzzWpReAaqThuNCsmSxnVjoCSpWbz26xu7/rCpBaTPFw9UFP0Gqkgf/EI/69pls3856gIrqXMyuOlu0F2e87NixXdat9AOA0dOa6WOTQ5cxK18YywMPVB5zcrnT8yFbc3d/tCaywXNaWNhZOAR/AHx8f2Fd/yaLCBdz81Sm32uVNR3kDH/w413ZZfZiq4uankxLd6hbb7cOgJVAccz8BIrtGr/cVlpJutbQA+CuevjcTBSC1mOr47RQwsi61mOp4304Ulpceq+/+FCBY9o7cZog0dfPZrZE+I1j2yv++0K3hgN3DgStTLyv1+44Ny3PNKqEHooTmPjH7DqLp+6Gx356EJH4w5PZ6TrcaqTyA1tKYLQZcK9N5lNHZYkCGzGfTBVOE1qbQXioGe5bRScMqDJvyNa/dgvhOpwibvp6wk5Kw6VMHFJk2qDX/2RJP5vPuFcSsmW3/Gvb657RO2XtLzKbkrLoj/vA0pojmwn1tOGzfZLcumgur05OdsbTL4w4gt3a5A7+0d/h7NDn7vrhMTx96qQeb1KebE4UMmz6i+2F5WvIomy5802tSst5OV2jEchHHlDUuS8ZyEXWks/7/GZL9p8aOymTvYg9y3bKBkAszGldgL/6XDTbAF/frG5eAO5cvxP4BRvwfIIZhm1cAAAAASUVORK5CYII=",_V="data:image/png;base64,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",xV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AkWAwYaC4w7tQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAD0UlEQVRYw9WZv28aZxjHP3f8OgLEkUgKQ20WOsYeailL1P4DlcLYpVKmyGv+AMuyPHT0ijpVylJ1olL/gUZZItlSTaZKXqAdIOlJIUCAw+Q65H3Jy+s7fHc+iPts9x7wfnh+3ft8z+Aatr23VQR2gIfAA+A+UBK3u8Ar4CXwAjhr1tt21L2MCHAFoAYcAZWQX28B+0CjWW/3VwIqAJ8Ch8RjB8BxUGAjIOQjoKGvu4aLk50xKkwZFaZMchdM0x8ASDkmmWGSbD9Ftp8iPUpguJ7b1Zr19m/XAt3e27KAn4Af1HUnM+NteUSvPA7lwo2OxZ1OlvQkod96Bjxp1tvj0KCiUE7VPLxIzXhTGTIoOteKed5Oc6+VIzlN6Pn7tV/BGUsg/wEsufauOKZbHUQCe/94CMCtn3ML66XzPLdtS10aA196wZo+4T6VkC4uryuDyJB/f9/2vdetDnhdGeDiyiULOBUMy0FFTlYkZKfaD52LKmTRKgJw8u+J52d65TGdal+FrQiGBUt4VPeP8vpNZUj/i8mlH3dxMa5oGCokQPXXr3w/69yaMUu65HppubRT2t34s3vS++uSR0WfbKg56efJsJBBrFce8664sF9DMF0K/VO1uq+Tk2Eh1Zy9SM3wYjIVbx6qIb/6UWFgfMqrpZB++ell2t6H0qvSozW1mQfqk+7HTA3iyW9+/zYw6KDo4GQWvFpTQY/k6tvyaK3h9jKN4QjAFM29Ip/dYVtR3JCysFzjU7va3tsqmuI8+THs2VnskGHyc6FlLbLsmOLQC8CoMI3dk2HyUzWN5aEpTuahQFcR7itAHyTF+ADAJHcRO6Q8kOimH1B001jum8qMMz/0rtKT9ti+EtKDpWSus7rtsc3mL1uRvpsU0+KmHB+m1ofA4VslZMpZ8GE3KUbaTYDMMMnUckLlU5A/EcWTmWFSvXxlirkbgGw/FXv1Rg23xvLSFOJAJNDn3/2xspzUWF6YwJm8So8SoX5s9+7uSiA9WM5MMUi1AAzXYKNjfbZwq2O1ogG0mvW2LUtrX67e6WQ/K6QHw756zJuPIOlJgrydjpSfcUDm7bQuUDTmoEL/OZB37rVyofMzDkiPvQ+kNqV21eP5U2CaoHSeX2u4pSChqSfHl4Y7QT4fSW7blm9hqWGPC3KjY+mqSU1V+haeU0JVe6aGwStfZdglpGskfOeqMFqUKprpCp/XoeTJvF1hUD4v+HpWetJwZ76TahBPls8LqlbQEgzrF8mW5WRQkez/LTtqyt7NFnI9xLObK41rsDf/ZYMH8M19fbOk4NbyQuw/OoL3NjoRsVMAAAAASUVORK5CYII=",vV="data:image/png;base64,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",wV="data:image/png;base64,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",yV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AcBAiIT8ITZxwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEXUlEQVRYw9WZXWgcVRTHfzOzH/loWtM024jZbtOSWGMhFAppbUtTVDCCwqZ+tdDYilSkhLz4JioEQaW+BM2DItSKUPpg4oPFioQGSot9sFjBoA3BNKtN3GRNk7XLdpOd68N+xNmd3b13diP0wMDM7N3//c09Z+459w7cJ6Yp/8N/XFSk59Dn2tqBpiHF9JnyRmfLCWVYzSlk8+Ee5ierMZetEskVDWFa72Wu27sj/PLxN45gdSeQweF91Pvj3Iu6WI4blsNc0RGmZjkyFuhcJDi8D4tXJENJdwIJsLVzScndLq+Jt9a0aKjA6k4gUx0LvOtWpEG37b9juVaF1Z1AZqz10II0aMvexbx7KrC6U0gV9+suk+oNSdvfZGF1p5Aq7i/1QDKwulNIFfdvz4lPJ7B6OZAyo6XpgtpNci9dMVi9HEgZ929+5K7SNFYI1pXNHg4gU1kHEjEDMXnW/kVq7UWYoOlqsCM9VxDTZ7IZTLd7GhUbv7gxL2Xmps/xixuVdXNZdMqw5LLGxKX6gqMJICbPMnGpnpWEVk5Xq65XNTMJP57bDGho218uWftcP+9j99G/0I3/ETQadjM26CeZkHfI7Z/ruPBrLV39Iep8y8p9Krs+MlXF6OmAEmQ2VBI6o6cDRKaq1hY0GnZzeai57OL+8lAz0bB7bUDNJIwN+iu2Bhob9GMm1wD01rX1Uu5+eIvg/dcFHpcoGQa3rq2vLKiZhBsjPinBN4/DK89Ab3fptjdGfNKjKgW6EJIL/kCT4OCu1PnASfC6RcW0pUBnx2ukxD7sg2pvet4z4NhTldOWmkfnblrFHmpcHalHW9Llnp/saGZs4CTMRAQ/TeRr/jmnrWo//XdlQKNhTyq/aIKXnoC+5yGegH9iMD2bOn/xSRtxA549ALvawEw/W20VLN2FD760alc0Mwmhce57GLsuGH4Pdm6DPTtLFBcHrdd3ovB4n/p0ZonRkZ4rto3qfAnL9UxE47HX4I2P1Dr77gfYcQRCYa2gdiEWPXebxQ62sS1mO7pffKvRfgR+my4OODMPna/CsQENM6cktNPOMGR3U7Kg6W2VQrBN7bGCEPOLGtFYcdC3P4Pfb9uXebnaeZBpNj13d80Ott4fLwjhdQt27ygOurdIHP9XuxBk/jxaAFY3oCMYtu2ovSVnhoiBaVrvde+xh+wIhrP1aTFI+wm/AGygcwnDY+Y1P3V4NQ5PvAutL0AgCG99utrmwU3gMqxZyvCYBNIr2FKQhTOTDaxuQFd/yBpfDYL9HXD0HejohQtXUy/LvWWNT77WaOmBoa9SbRs2WLvo6g+hG3KQpfdHbZbRkamqbE1q6ILnDsH50eIyD6wTeNwQXki1O3DqDxq2xqUh5TZybWCdLEUy7s4sRVQg5XecbWDNZKpGlS3/OoJhAp1LSu5WBy2ym2ImU6Xa7HgNczdrsrm7zpegsS1GU3uMen9c+u0uH9QG1qmt7ceGHNiyTfHzzX1j/wKxDhh8cgm7FgAAAABJRU5ErkJggg==",EV="data:image/png;base64,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",CV="data:image/png;base64,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",VV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoJEDU1BYxD7AAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEkUlEQVRYw+2Y3W9TZRzHP8956cte23VjhY2ug1EGCBsDceIFGi8wMQGVhChXxgTihYkkXvgHcEHihcYLQ2KIMWgI3hnfSIjEIYIV2MgYL25M2GDg2NbNua5re9rn8YIzqc2YW0cXov0mT85zzun5/T7n/J7v8zwpFFRQQf8viVwfVEoF7W4TUG33K7J+Nmof7wGdAEKIvryD2nBNQCvwNLDChnPNEFNlXIvb0DeAn4Ew0DkfaDEPwFeBl4AnbDCRQ0WU3eLAZeBL4FiuXzkbcqdSqk0pFVNKpZVScjphpjLPZ+pnHaUdK2bH3vkoIMNKqdQ05DToLBAq80VmAZ2GTdk5ZoXV/qXcu+xSZ5ZZ2Kbgft55GOLBM5mxhJ1jV4ZB5w5qqwQwHvIiCCH+ATHb/Ydds2XYucgVtBuYnOMwWcgom7Rz5T5XKqWOKKWi2WN0DoaZ6xiN2jmCCzVUUCl1UCl1QyllZQLbba6SWYCWHfPggiFnAN5nO3Q8YybIBp+ppTMcPm7H2DcfQJErdMYKtREI2YuAM8N8KSBhT+49wMVcVqSCCirocdk4Z2tba6gY2A80246XII6eCnd/+9iAbmsNPQ8cNnQjaK9cmmmaxBNxqy5Yv9fnq/rig48+jy8kh/4IIFcDxwM1wWXVAT/pkCG8tZV4PV6cTrd+99btF1OWVbq1tflkR2e3zDWPsUDIgKZpbSsDq3y9a+9wrqHrwU0Jdff8NGoBM9I/sj8ejw8A7y966be1hkqAy6GGNXWDgVFOVJ65vx1z3w8pJyRo4HdUsbFtJbFINHbiVFdxrvm0HCEF8HV9sKFubNkEJ9eFQUgYlQ+2fFMKnIJh3xg3W4ZRQhXt2L7lpx3bt1RceOfJ4kUBBfY4Hc5nvb4K2hrPgwCtWIcigSjXEEUawi3QfToIuF7fj6vFg5W0npmamtqbkiqW99I/t7XxBSHENxvWbtK9r9XRnrhIMpnA56xgIDaALnSchguX7iJUvpqbI72UejyMjYxQelZnINwrpVJv/XD22qG8mklK+dmGtS36G2++zZqmZqSUyHQawzSJx6dQSEzDgWGY6JqOlGk0TcOyLH7xneZ44ph29sLpA8ChfLve1xBaw7rmFn693MlUbJKly+tIWRZ3+vsp93rxVFQQGRrCX7scpRQOh0lpmYdNm1tpP/MjQtNK8j49maYZ+a37WuXHH77Hrb4bKClxiQmsFLidBi6niek0iUZjTMYkDlOhu5dQE1jB+Pgot/tu4vV4e/MOahjm7ivXu45e6bnkX1W/mqoSSeqPS6TTsOmppZQWG6BgMpbiZHgQdCiqWkfH+d+53teDw+Uerq2p3ZH3lam3b7CvpSn0adKyqoZGBpvLy/0iWFPM5kYn3jIDXQNNgNulEVxWhL+6jLsTJbRfvYamG5El1UvWHz7y1e3FnPBNh8PxSTqd3tPcuF4LVCZIpQUup0UyaVDitojGTSJRk3NdVxG6MWQY5ivffd9+ZtE3Jftef7lofHxsd2R4+EB5aVmNVNNBxd//iEUn/0whxGng3WQy0XEq3CMpqKD/oP4C3HApLBAJZbIAAAAASUVORK5CYII=",om="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoIFCAmCTIrnwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABoUlEQVRYw+2Wz0obURSHvzOTIGKUKvVPMGo3Iii47MaVy7rwMeoD9B2kgUK3BbsU2ieodeuiVMSFqFFKt6lRpEYqaRtz768L00JdlGQ0GSj3g99yZr575p7DgUAgEAgEAv8zdl8vkoiAXmBEIIMy0DBDqZ9SwiTGJRaceOZFyQk5IS82JZYlJiTiNCUzEk+d2P4tdzv+JrtOrDoxnJZoviki10J8gxcSue5KemJf461rVbIZifmuinox3mol/xK+5tj/ZCjJN6NEpj9YS/RchhlledKcEJ0dT6ow6Ef5mngeOrCYvBmVzlZ0ncjuMhlj0EemO99IYO6g/fv5Jx+QihQ6fkcNZCW2E590h9dccNaVZrJTXiWS3IPoIUV7Tr39Pkzy+6ts2jkoC/Q086+2vAYTaIt3Omq/momXEq0Qq8p7JuhlloJmmCSHkQMeAA64BL6D1UFfqNonLq3Mkr2k1PXtSYvk6GeeiMfqY4xHTCnPHI66lTnkhApXfDPPsW+wHw3w2d7gUl3zALREP1nGAEedim1QC5t0IBAIBAKBQBr8AnHFRZ9mvpokAAAAAElFTkSuQmCC",DV="data:image/png;base64,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",FV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoJEDQ6jChvPAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEkElEQVRYw+2YTWxUVRTHf3fe10w7nXbaaQstlvLR6YRM+ZSAosEFIagRRGJjWLHqwpULEmPcmLhgwcJE3ZkYNZHoSiMRNzXhMzYGa/hSaGkpdFMopXY6M52Z93Fc8MBhUpBOaTU6/+Tm3jfz3rm/ueece+4bqKiiiv5fUuU+KCLt/nAd0OyP60tuu+P3N4FzAEqpkQUH9eHWAVuBZ4CVPlxwFptS9FnOhx4GfgL6gHNzgVZzAHwDeBVI+mCqDI+I33LAReBb4KtyV7kUco+IHBeRrIi4IuIVtbmq+FnXt3lcRPY8Ccg+EXGKIYtWRkREHnZ9b1ws/7oY1vHneCRs4G/cvc93dbGb1d354GF96Vgp9UBfbMtvSWBfUYI+PqivMKCXlaV/QSEiKKUegC+R7s9FuaBXgMwsq/04YTOX35Xx5yp/rxSRL0Qk/agYLY3F2WIUEM/zZovRtD9H+3wTql1EDonIsIjY88j80oy3fZuH5g05C3CPn6FTRTtBKfhszS3K8CnfRs9cAFW50EUVagMQ94uAVZR8DpD3N/cB4NdyKlJFFVX0bzk4l2pHYnmTKrhfKlcSKDzA8wzt897BG+89CfvaE4HseOqglrGPhRxWK1ciuiu1YQJ1Ts5+YWdXfNlLG5KnTgwM5/7RFd0Rb9ulpwvHEtU1qsGyqNI0FJD3PG7l8/yeSrGkKdofbazf9sGPZ8qG1ecJudVM298na2pVayhE1DTvf+eJUKPfNX/l1uTGjOt8DexZdNAdnW3NWto+tSFSG2gMBsl7HmO5HFbg7oEs7ThoStFRXU3edbmZmtk9n0UJlJk4gcCMc3ltOKI3WBb1pokC7hQK9+/Juy5mIEDYMFgdDqME9sdXTb2+cc2q3u4tTYsCqhzv47Cr6pYGg9QaBgDVmkZI04iaJtWahqVpxCwLgJhl8XQ0ip3NR3KZmY8cT24veNbvTCw/aOa9dza3tKjnnt1MjfKoVzqtLS20AnWWRSwSoT0WozWRoDqfp3lFO/WaR8DUuJ6a7jg9kW0Zmpg6uqAxage1d5Nda9XeN99i1dr1uLkZnOlpAgENO5UCEZRpolsWyjBAPLRQFZ6CyOmTZI9+w8mLZ7uBngV1vWdptcs3biLx/HaGR0e4fG2IjGkymZ/h2uAA47fHmbELjF4dJGsXyChFTlNYDTGSL75MXWccCRrBBc96wzQnhgYuxz758DA3rg0hnkdQTWM7EDI0QqaOYRqkM1nS3wmmCVqoida2lUylJhm9PkI0Wn91wUF13ei+NHjhyKWB80s6VnTSGPZw/jiP68KmLUsJV+kgkM069PaNIRpUN66h/+wYgyMDmMHQ+LLWZbsXpTLte2VbQyqVOmwXCge64knV2Zwi3pyhtkb33wBAKcjOOGQKAfpHY5zsv4KmmxNLW1qSnx35YWzRSuj2rXHDNM1PXdfdvz7RFWiL5XFcRdCyKRR0wiGbdM5gIm3w84XfUJp+S9eN1471/nJm0Wt9z4G9VVNTk90T4+Pv19ZEWj25Z1Td/0csnUk5KHUKeLtQyPef6BvwKofWiv6L+hO3lkLSl9n4+gAAAABJRU5ErkJggg==",sm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AUIFBkAV+u0CQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADIklEQVRYw+2Ye0hTcRTHP7+1lsaqOWetwgjKasOMtMc1ggh7QhBFDymK/kiRkAp60AOiP4otsH9igQQFFq2IHkjQA4seoNyC6EGpUVAS5izTmbJ0PX79syvmZuEmd390v3DhwPmee773d86553LBgAEDBgz8FxCDcRMppavG660FaD5aBsCYg7sBmLdvn1sIUZdUoVLKscA5oADg2gjHH/5VHS2aeRfYJIRo0r0UUkqXjIFqj0dWezyyH7h0PVEp5TCgFRg+wNAQYBdCdA80pynOByyp8XoHKpJITIluZb9qTZdXrel/K3HMltDidCt972TawHxrbeXpqVPUnfcD4Nq4gZnFxaTa7fQdtNWdX0RShHYGAlRlZcfkLn7zEqvTmbDQuHp0VUfLzt6nWX3kSL9czadxtVi9hqlce6EDdJ692C+xty8SUx5PQnNcjS1Et5TSDdQCWDcXEqqILda6ubDHjmypbt2Gqe9m6gwECv7RowlvpkHZ9S+q/HUjbeOmfbj5gNeXLgMwdd0aMpcv4GvwY33O4g2uRHPEVfpwUD0DTAA2WmxKc6i9pSvU3sJQdxrZh4t6eIGGFwBdkZilwEnAb7Eph/QappmRD5FA28eawhN++73+iPXvLPvDQXUFcAuYpPW1LqUPB1UzsAMoq1bDrN3SRl6OmXLvcL40vgUgffxkth34xrNXP76/e54x1GQSABciVZDoiXBQHbV3z0PV4ayUObm3o9bmomUPpMNZKW9cf3I3HFTnJpLLlEiwxaa0X7zyNQ9gzix7lL9g4WgAPMfbcy025VHShDqclZNCoZ9mgOnTR0X5c3PTAKir77A5nJUZSRMKbNWMKVkjopxTsqwxuckQmqoZmZmpUc4xo1N6bJu5OdOnDM57Oy7smpHtn59XIT997or5Hbok/7Q8Oitd+hSkT+GxT2GI7pvJpzAOaARIm+hmxvrt0r2yqFUIkwSuACdO5otXfcJcpSr1epd+oma0va/l/rGS/SbTEIcQIkMIUSKEqAWO9eI3AQ3JOFETMBtIiVx3SlV+xuBlR3gVpSq/jN8pBgwYMKA/fgMMao6Gt7O38gAAAABJRU5ErkJggg==",TV="data:image/png;base64,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",ad="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AUIFCQxbN38jQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAB3ElEQVRYw+2WMavTUBiGn5Nzk/TSUKxwzWCxJRI7dZDiJq4KLmfwLzi4C07+A8F/ImdyEcFVuJ06KFZCC+WCi0NvRaRt4pIhyL02J6YR8TxLlu8758l3csILFovFYrFUQWvtHWJdUYOYAELgMfAE6AAT4DXwFviglPr2V0RzuTZwD3gK3AECgCAIAH6s1+ttXv4dOAVeAu+Bc6VUenDRXPIZcB+4DbQ7nY4cDAai3+/jOA4AaZqyWCyYz+esVqsNcA58BN4Bz01lq4i2gK+u6/pxHDtRFCGl/G3PbrcjSRJms1m62Wy+ADeUUluTfZ0KJ+8Bx2EYOnEc75UEkFISxzFhGDrACSBNN60iegXAdV3jxrznCPCbEA0APM/8L1To8f6FiQK0mhDtAvi+8ekVexqZ6NUajr6Rb/Skhom2rGiBazWIHjcmKoR5TCj0tA8qqrXuAQ9rSG0vtNb+QUS11l3gEyCGw2Flw7z3FnBqkl1FSckWcAZ0R6MRURT90TiTJGE6nZLHvrtlAoooISmBBXB9PB7T6/VqSezL5ZLJZALwBniwL/aJEtnzMxD9chkyYJs/RR40RJZll12eCynUvwIeKaWyy2qP9rx4Bty8YOFSmNZbLBaLxWL5f/kJlv9+JMvAZfsAAAAASUVORK5CYII=",bV="data:image/png;base64,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",PV="data:image/png;base64,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",Yk={blueImage:tm,blue3Image:lV,redImage:nm,red3Image:cV,happeningImage:rm,happening3Image:uV,chanceImage:dV,chance2Image:AV,chance3Image:fV,bowserImage:im,bowser3Image:hV,minigameImage:pV,shroomImage:mV,otherImage:fl,starImage:rd,blackstarImage:SV,arrowImage:am,startImage:id,itemImage:gV,item3Image:_V,battleImage:xV,battle3Image:vV,bankImage:wV,bank3Image:yV,gameguyImage:EV,banksubtypeImage:CV,banksubtype2Image:VV,bankcoinsubtypeImage:om,itemshopsubtypeImage:DV,itemshopsubtype2Image:FV,toadImage:sm,mstarImage:TV,booImage:ad,bowsercharacterImage:bV,koopaImage:PV},Q8={};let bh={},Ph=0;Qn("toadImg",cae);Qn("mstarImg",uae);Qn("bowserImg",dae);Qn("koopaImg",Aae);Qn("booImg",fae);Qn("goombaImg",hae);Qn("eventImg",pae);Qn("eventErrorImg",mae);Qn("starImg",Sae);Qn("bank2Img",gae);Qn("bank3Img",_ae);Qn("bankcoinImg",xae);Qn("itemShop2Img",vae);Qn("itemShop3Img",wae);Qn("gateImg",yae);Qn("spaceBowser",Eae);Qn("spaceItem2",Cae);Qn("spaceBlue3",Vae);Qn("spaceRed3",Dae);Qn("spaceHappening3",Fae);Qn("spaceChance3",Tae);Qn("spaceBowser3",bae);Qn("spaceItem3",Pae);Qn("spaceBattle3",Rae);Qn("spaceBank3",Lae);Qn("spaceGameGuy3",Bae);Qn("spaceDuelBasic3",Mae);Qn("spaceDuelPowerup3",Iae);Qn("spaceDuelReverse3",Oae);Qn("spaceGameGuyDuel3",kae);Qn("spaceMiniGameDuel3",Nae);Qn("spaceHappeningDuel3",Uae);Qn("targetImg",Kk);function Qn(n,e){bh[n]=e,Q8[n]=Xs(),Ph=Ph+1,Q8[n].onload=jae}function jae(){Ph=Ph-1,Ph||St.dispatch(Nee(!0))}for(const n in bh){if(!bh.hasOwnProperty(n))continue;const e=bh[n];Q8[n].src=e}bh=null;function Gn(n){return Q8[n]}class pn{static drawUnknown(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.fillStyle="orange",e.lineWidth=2,e.stroke(),e.fill(),e.restore()}static drawOther(e,t,r){pn._drawOther(e,t,r,8)}static drawOther3(e,t,r){pn._drawOther(e,t,r,12)}static _drawOther(e,t,r,i){e.save(),e.beginPath(),e.arc(t,r,i,0,2*Math.PI),e.lineWidth=i/6,e.strokeStyle="rgba(255, 255, 255, 0.4)",e.stroke(),e.lineWidth=i/4,e.fillStyle="rgba(255, 255, 255, 0.2)",e.strokeStyle="black",e.setLineDash([i/2,3]),e.stroke(),e.fill(),e.restore()}static drawBlue(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#0039ff",e.strokeStyle="#001281",e.stroke(),e.fill(),e.restore()}static drawBlue3(e,t,r){e.save(),e.drawImage(Gn("spaceBlue3"),t-14,r-14),e.restore()}static drawRed(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#ff3131",e.strokeStyle="#611515",e.stroke(),e.fill(),e.restore()}static drawRed3(e,t,r){e.save(),e.drawImage(Gn("spaceRed3"),t-14,r-14),e.restore()}static drawMiniGame(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#0039ff",e.strokeStyle="#001281",e.stroke(),e.fill(),e.fillStyle="#A4FFFF",pn._drawStar(e,t,r,8,5,.45),e.restore()}static drawMiniGameDuel3(e,t,r){e.save(),e.drawImage(Gn("spaceMiniGameDuel3"),t-14,r-14),e.restore()}static drawHappening(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#099f0a",e.strokeStyle="#2e681e",e.stroke(),e.fill(),e.fillStyle="white",e.font="bold 19px monospace",e.fillText("?",t-6,r+6),e.restore()}static drawHappening3(e,t,r){e.save(),e.drawImage(Gn("spaceHappening3"),t-14,r-14),e.restore()}static drawHappeningDuel3(e,t,r){e.save(),e.drawImage(Gn("spaceHappeningDuel3"),t-14,r-14),e.restore()}static drawStar(e,t,r){pn._drawStarSpace(e,t,r,8)}static drawStar3(e,t,r){pn._drawStarSpace(e,t,r,12)}static _drawStarSpace(e,t,r,i){e.save(),e.beginPath(),e.arc(t,r,i,0,2*Math.PI),e.lineWidth=i/8,e.fillStyle="rgba(0, 0, 0, 0.2)",e.strokeStyle="rgba(0, 0, 0, 0.3)",e.stroke(),e.fill(),e.fillStyle="yellow",pn._drawStar(e,t,r,i+1,5,.45),e.restore()}static drawChance(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#0039ff",e.strokeStyle="#001281",e.stroke(),e.fill(),e.fillStyle="#ff3131",e.font="bold 19px monospace",e.fillText("!",t-6,r+6),e.restore()}static drawChance2(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#099f0a",e.strokeStyle="#2e681e",e.stroke(),e.fill(),e.fillStyle="white",e.font="bold 19px monospace",e.fillText("!",t-6,r+6),e.restore()}static drawChance3(e,t,r){e.save(),e.drawImage(Gn("spaceChance3"),t-14,r-14),e.restore()}static drawStart(e,t,r){pn._drawStart(e,t,r,8,"black")}static drawStart3(e,t,r){pn._drawStart(e,t,r,12,"black")}static drawStartDuelRed(e,t,r){pn._drawStart(e,t,r,12,"red")}static drawStartDuelBlue(e,t,r){pn._drawStart(e,t,r,12,"blue")}static _drawStart(e,t,r,i,a){e.save(),e.beginPath(),e.arc(t,r,i,0,2*Math.PI),e.lineWidth=1,e.fillStyle=a,e.strokeStyle="rgba(255, 255, 255, 0.5)",e.stroke(),e.fill(),e.fillStyle="white",e.strokeStyle="black",e.lineWidth=2,e.font="bold 12px monospace",e.textAlign="center",e.strokeText("START",t,r+12),e.fillText("START",t,r+12),e.restore()}static drawShroom(e,t,r){e.save(),e.beginPath(),e.ellipse?e.ellipse(t,r,8,6,0,0,2*Math.PI):e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#0039ff",e.strokeStyle="#001281",e.stroke(),e.fill(),e.beginPath(),e.fillStyle="#D3FDFC",e.arc(t,r+5,4,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(t-5,r,2,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(t+5,r,2,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(t,r-2,3,0,2*Math.PI),e.fill(),e.restore()}static drawBowser(e,t,r){e.save(),e.drawImage(Gn("spaceBowser"),t-9,r-9),e.restore()}static drawBowser3(e,t,r){e.save(),e.drawImage(Gn("spaceBowser3"),t-14,r-14),e.restore()}static drawItem2(e,t,r){e.save(),e.drawImage(Gn("spaceItem2"),t-9,r-9),e.restore()}static drawItem3(e,t,r){e.save(),e.drawImage(Gn("spaceItem3"),t-14,r-14),e.restore()}static drawBattle2(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#099f0a",e.strokeStyle="#2e681e",e.stroke(),e.fill(),e.beginPath(),e.fillStyle="white",e.translate(t-10,r-10),e.moveTo(14,3),e.lineTo(4,11),e.lineTo(9,11),e.lineTo(7,18),e.lineTo(16,9),e.lineTo(12,9),e.lineTo(14,3),e.fill(),e.restore()}static drawBattle3(e,t,r){e.save(),e.drawImage(Gn("spaceBattle3"),t-14,r-14),e.restore()}static drawBank2(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#099f0a",e.strokeStyle="#2e681e",e.stroke(),e.fill(),e.fillStyle="#EEF700",e.translate(t-10,r-10),e.beginPath(),e.arc(10,12,5,0,2*Math.PI),e.fill(),e.beginPath(),e.moveTo(8,7),e.lineTo(7,5),e.lineTo(8,4),e.lineTo(12,4),e.lineTo(13,5),e.lineTo(12,7),e.fill(),e.fillStyle="#099f0a",pn._drawStar(e,10,12,4,5,.45),e.restore()}static drawBank3(e,t,r){e.save(),e.drawImage(Gn("spaceBank3"),t-14,r-14),e.restore()}static drawArrow(e,t,r,i){e.save(),e.beginPath(),e.fillStyle="#F647A0",e.strokeStyle="#94305B",i===3?(e.translate(t-12,r-12),e.scale(1.25,1.25)):e.translate(t-10,r-10),e.moveTo(10,1),e.lineTo(1,10),e.lineTo(5,10),e.lineTo(5,18),e.lineTo(15,18),e.lineTo(15,10),e.lineTo(19,10),e.lineTo(10,1),e.stroke(),e.fill(),e.restore()}static drawBlackStar2(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=1,e.fillStyle="rgba(0, 0, 0, 0.2)",e.strokeStyle="rgba(0, 0, 0, 0.3)",e.stroke(),e.fill(),e.fillStyle="black",pn._drawStar(e,t,r,9,5,.45),e.restore()}static drawGameGuy3(e,t,r){e.save(),e.drawImage(Gn("spaceGameGuy3"),t-14,r-14),e.restore()}static drawGameGuyDuel3(e,t,r){e.save(),e.drawImage(Gn("spaceGameGuyDuel3"),t-14,r-14),e.restore()}static drawDuelBasic(e,t,r){e.save(),e.drawImage(Gn("spaceDuelBasic3"),t-14,r-14),e.restore()}static drawDuelPowerup(e,t,r){e.save(),e.drawImage(Gn("spaceDuelPowerup3"),t-14,r-14),e.restore()}static drawDuelReverse(e,t,r){e.save(),e.drawImage(Gn("spaceDuelReverse3"),t-14,r-14),e.restore()}static _drawStar(e,t,r,i,a,o){e.save(),e.beginPath(),e.translate(t,r),e.moveTo(0,0-i);for(let s=0;s<a;s++)e.rotate(Math.PI/a),e.lineTo(0,0-i*o),e.rotate(Math.PI/a),e.lineTo(0,0-i);e.fill(),e.restore()}}var Xl={exports:{}};(function(n,e){(function(t,r){var i=function(o){if(typeof o.document!="object")throw new Error("Cookies.js requires a `window` with a `document` object");var s=function(l,u,d){return arguments.length===1?s.get(l):s.set(l,u,d)};return s._document=o.document,s._cacheKeyPrefix="cookey.",s._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),s.defaults={path:"/",secure:!1},s.get=function(l){s._cachedDocumentCookie!==s._document.cookie&&s._renewCache();var u=s._cache[s._cacheKeyPrefix+l];return u===r?r:decodeURIComponent(u)},s.set=function(l,u,d){return d=s._getExtendedOptions(d),d.expires=s._getExpiresDate(u===r?-1:d.expires),s._document.cookie=s._generateCookieString(l,u,d),s},s.expire=function(l,u){return s.set(l,r,u)},s._getExtendedOptions=function(l){return{path:l&&l.path||s.defaults.path,domain:l&&l.domain||s.defaults.domain,expires:l&&l.expires||s.defaults.expires,secure:l&&l.secure!==r?l.secure:s.defaults.secure}},s._isValidDate=function(l){return Object.prototype.toString.call(l)==="[object Date]"&&!isNaN(l.getTime())},s._getExpiresDate=function(l,u){if(u=u||new Date,typeof l=="number"?l=l===1/0?s._maxExpireDate:new Date(u.getTime()+l*1e3):typeof l=="string"&&(l=new Date(l)),l&&!s._isValidDate(l))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return l},s._generateCookieString=function(l,u,d){l=l.replace(/[^#$&+\^`|]/g,encodeURIComponent),l=l.replace(/\(/g,"%28").replace(/\)/g,"%29"),u=(u+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),d=d||{};var h=l+"="+u;return h+=d.path?";path="+d.path:"",h+=d.domain?";domain="+d.domain:"",h+=d.expires?";expires="+d.expires.toUTCString():"",h+=d.secure?";secure":"",h},s._getCacheFromString=function(l){for(var u={},d=l?l.split("; "):[],h=0;h<d.length;h++){var f=s._getKeyValuePairFromCookieString(d[h]);u[s._cacheKeyPrefix+f.key]===r&&(u[s._cacheKeyPrefix+f.key]=f.value)}return u},s._getKeyValuePairFromCookieString=function(l){var u=l.indexOf("=");u=u<0?l.length:u;var d=l.substr(0,u),h;try{h=decodeURIComponent(d)}catch(f){console&&typeof console.error=="function"&&console.error('Could not decode cookie with key "'+d+'"',f)}return{key:h,value:l.substr(u+1)}},s._renewCache=function(){s._cache=s._getCacheFromString(s._document.cookie),s._cachedDocumentCookie=s._document.cookie},s._areEnabled=function(){var l="cookies.js",u=s.set(l,1).get(l)==="1";return s.expire(l),u},s.enabled=s._areEnabled(),s},a=t&&typeof t.document=="object"?i(t):i;typeof r=="function"&&r.amd?r(function(){return a}):(e=n.exports=a,e.Cookies=a)})(typeof window>"u"?RA:window)})(Xl,Xl.exports);const Gae=13,Hae=32;function od(n,e){return t=>{function r(){n(t),t.stopPropagation(),t.preventDefault()}((!e||e.enter)&&t.keyCode===Gae||(!e||e.space)&&t.keyCode===Hae)&&r()}}function zae(n){n.stopPropagation(),n.preventDefault()}function h2(){const[,n]=Ne.exports.useState(0);return Ne.exports.useCallback(()=>n(e=>e+1),[])}const rr=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onClick=()=>{this.props.onClick(this.props.id)}}render(){let e="nbButton";return this.props.css&&(e+=" "+this.props.css),L("div",{className:e,title:this.props.title,tabIndex:0,onClick:this.onClick,onKeyDown:od(this.onClick),children:this.props.children})}},ko=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onClick=()=>{this.props.readonly||this.props.allowDeselect===!1&&this.props.pressed||this.props.onToggled(this.props.id,!this.props.pressed)}}render(){let e="toggleButton"+(this.props.pressed?" pressed":"");return this.props.css&&(e+=" "+this.props.css),L("div",{className:e,title:this.props.title,tabIndex:0,onClick:this.onClick,onKeyDown:od(this.onClick),children:this.props.children})}};function J8(n){const t=n.items.map(r=>L(ko,{id:r.id,pressed:r.selected,allowDeselect:n.allowDeselect,readonly:n.readonly,title:r.title,onToggled:n.onToggleClick,children:r.text},r.id));return L("div",{className:n.groupCssClass,children:t})}var z0=(n=>(n.uiTheme="ui.theme",n.uiAdvanced="ui.advanced",n.uiDebug="ui.debug",n.uiSkipValidation="ui.skipvalidation",n.uiAllowAllRoms="ui.allowallroms",n.uiShowRomBoards="ui.showromboards",n.writeBranding="write.branding",n.writeDecompressed="write.decompressed",n.limitModelFPS="models.limitfps",n.limitModelAnimations="models.limitAnimations",n.modelUseGLB="models.useGLB",n))(z0||{});const RV=[{name:"Theme",type:"section"},{id:"ui.theme",type:"theme",default:Jl.Classic,name:"Theme"},{name:"UI",type:"section"},{id:"ui.advanced",type:"checkbox",default:!1,name:"Advanced features",desc:"Enables infrequently used, potentially complicated, and developer features."},{id:"ui.debug",type:"checkbox",default:G0(),name:"Debug features",advanced:!0,desc:"Enables debug output and UI that may aid development."},{id:"ui.skipvalidation",type:"checkbox",default:!1,name:"Skip Overwrite Validation",advanced:!0,desc:"Allow boards to be written regardless of warnings."},{id:"ui.showromboards",type:"checkbox",default:!1,name:"Show ROM Boards",advanced:!0,desc:"Show boards parsed from the ROM in the editor."},{id:"ui.allowallroms",type:"checkbox",default:!1,name:"Allow All ROMs",advanced:!0,desc:"Allows more than just the officially supported ROMs to attempt to load."},{name:"ROM",type:"section"},{id:"write.branding",type:"checkbox",default:!0,name:"Include branding",desc:"Adds the PartyPlanner64 logo to the game boot splashscreens."},{id:"write.decompressed",type:"checkbox",default:!1,name:"Leave ROM decompressed",advanced:!0,desc:"Leaves all files decompressed when saving a ROM, resulting in larger file size."},{name:"Model Viewer",type:"section"},{id:"models.limitfps",type:"checkbox",default:!0,name:"Limit FPS",desc:"Reduce the refresh rate for better performance."},{id:"models.limitAnimations",type:"checkbox",default:!0,name:"Limit animations",desc:"Limit animations to those in the same directory as the model."},{id:"models.useGLB",type:"checkbox",default:!1,name:"Use GLB container for glTF",desc:"Create a GLB container when exporting models to glTF."}];function Wae(n){return RV.find(e=>e.type==="section"?!1:e.id===n)}function JP(n){const e=Wae(n);if(e&&e.type!=="section")return e.default}class Xae{constructor(){this.listeners=new Set,this._tempSettings={}}getSetting(e){if(this._tempSettings.hasOwnProperty(e))return this._tempSettings[e];let t;if(Xl.exports.enabled){const r=Xl.exports.get(e);r===void 0?t=JP(e):t=JSON.parse(r)}else t=JP(e);return this._tempSettings[e]=t,t}setSetting(e,t){this._tempSettings[e]=t,Xl.exports.enabled&&Xl.exports.set(e,JSON.stringify(t),{expires:1/0}),this.listeners.forEach(r=>{r(e)})}reset(){this._tempSettings={},Xl.exports.enabled&&RV.forEach(e=>{e.type!=="section"&&e.id&&Xl.exports.expire(e.id)})}}const sd=new Xae;e8(sd.getSetting("ui.debug"));function ZP(n){if(n)return sd.getSetting(n)}function Kae(n,e){sd.setSetting(n,e),n==="ui.debug"&&e8(e)}function Yae(){let n=RV;return sd.getSetting("ui.advanced")||(n=n.filter(e=>!e.advanced)),n}const qae=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onSettingChanged=(e,t)=>{Kae(e,t),this.forceUpdate()}}render(){const e=Yae().map(t=>{switch(t.type){case"checkbox":{const r=ZP(t.id);return L(Qae,{id:t.id,name:t.name,desc:t.desc,value:r,onCheckChanged:(i,a)=>this.onSettingChanged(i,a)},t.id)}case"section":return L("h3",{children:t.name},t.name);case"theme":{const r=ZP(t.id);return L(Jae,{id:t.id,name:t.name,value:r,onThemeChanged:this.onSettingChanged},t.id)}}throw new Error("Unrecognized setting type")});return Xe("div",{id:"settingsForm",children:[L("h2",{children:"Settings"}),e]})}},Qae=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onToggled=()=>{this.props.onCheckChanged(this.props.id,!this.props.value)}}render(){const e=this.props.id+"-main",t=this.props.id+"-desc";return Xe("div",{className:"checkboxSetting",onClick:this.onToggled,children:[L("input",{type:"checkbox",className:"checkboxSettingChk",checked:this.props.value,onChange:this.onToggled,"aria-labelledby":e,"aria-describedby":t}),Xe("div",{className:"checkboxSettingLines",children:[L("span",{id:e,className:"checkboxSettingMain",children:this.props.name}),L("br",{}),L("span",{id:t,className:"checkboxSettingDesc",children:this.props.desc})]})]})}};function Jae(n){return Xe("div",{className:"themeSetting",children:[L($P,{name:"Classic",theme:Jl.Classic,accentColorHexString:"#5A4540",selected:n.value===Jl.Classic||!n.value,onSelected:e=>n.onThemeChanged(n.id,e)}),L($P,{name:"Dark Gray",theme:Jl.DarkGray,accentColorHexString:"#4a4a4a",selected:n.value===Jl.DarkGray,onSelected:e=>n.onThemeChanged(n.id,e)})]})}function $P(n){return L(ko,{id:n.theme,allowDeselect:!1,onToggled:()=>n.onSelected(n.theme),pressed:n.selected,children:L("span",{className:"themeColorSwatch",title:n.name,style:{backgroundColor:n.accentColorHexString}})},n.theme)}function lr(n){return sd.getSetting(n)}function Zae(n){sd.listeners.add(n)}function $ae(n){sd.listeners.delete(n)}const LV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4gYKERoFqgbC/gAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAASNSURBVFjD7Zk9ciRFEIXfy6qR2BsgvD0GROCIY6yJuS7HwF0Tc6+h2MDhGHjLEUCaqUyMrKzK7hmknpGWEBG0YtSj7pnqr17+Vgn4jxwEAHz73l415W8fWOO93b17nUrefgQA1Hzxpw9/vCrIn9/fjPd1ffP29mbzQL98/P2sB//47u3mz97dLUWrL62CkCABM0Dt5Vz/2aC7QggJEXbQeU/Ngc3s2dD14lRB4s1VgRCoImAHlESq6nBmwEEVQsLg4F8clCTYz9dVICRqIch/UtTVLFYgFBjMYc8ErudDsvshcVUFRfy90NWMiQSIqg3gmAzBAbzVJep5QeKgDNCdoIhAiAF7BGrz7KZ3SJj7kGyErZuVZCg3Ya+q+2jpPhoRvza9GdCyjwLQLMIG2LoFUk5AColdcdO7yTMoexB186qhKIeP6oDrVdFj81GfrU9FN9c/CbwWohYBye6rGH44QA1oNDTqDLiu6OLcIe0i0LXJ05kkdrUMRU+DOqx0RfO9gOQQZVphE2iURSHx5kpwvSvYFcH1TlCL4Kr6uRbB7Q/fzMnE47gcz1V1F/h09xlNFfuD4tAM+6Z42Dfsm+F+37Bvij8fFGqGtzdfbVN0V4jaI7oWV2z9YsoE4skVmbMHNoz0XFoIQGAFMFOYEa0I1BS1EE19XG223fQRIFVmrsxmLuU4wHIgAQDNYD1X+YQFZgoxH0fMx2riFizifr9vG31UFgnc/a52wKjrRTiDjRM0a2ojJL3ox/fMCC2Ean8O09gEinAbaJEl7EjkXJk84OiKBXQ2u5oBBAzdrEJQwwqzkGBpjPPz6KkgZKpAWKWuWSYnLAwr9bGYfK5sIdAZpg8zYw4uOUXlpOJEObhsGN5zKccEcTJfkk+U8EvaPDu9RDy6aWbj79kxvWA/qr01015ZosKoGkxs/O0dEEELkO6PicYyu52e24u3ebMbmjA2jNyvJ/9ET/bxqWZzkrlXDRHUQqSNoE3nF2KApooiZVSapn5mEkrDJ8M7zQFHdYr+VJNVhvXmiuBM0x9DagcsaiBnp55+YWH07h4ak2s6JtjUX6FigB+aX38SNJa0swmRo4Ykrv366TNqkZ5rZ46dqIbWumJq+O77r7uCOuBmLCyvb14ux9LBUhk0RuB4T9mat8DFCBOBxnKjO2oOwkPThU/CZsOC5B7Y2j0tojWqinE+mPMDh6ZQ82ojYssqg+R/Gmun5KuLRR6GZ1/Uj+bIRlpCRPI9NEWB9J4zNyYzC2haiiwgM3R6f1F6suRrsGVXTgL7gwfHrP99XW8zKCOyPXB0WGoNaI+oubHWz0Fkpei+uX9GH0kSbLZsSICl2YEV4Exhz074aoYhlM18+XDQ0UQ3PW4mIssEqI68mpL9BsizKpP25C59A4xw0x9ip2S1nZO3dDwXr0H1rN2SC0po7HgQ93tFKURTHEX8chPCcGjT/CMdfcm9p3g4Afy1b6g6W8JTrZoZUlLXf2+TLKt7f1DsG+eKQLhotsl1s3H51mN9aqf3sWO9pD13F/li0Lxn/tqOuv7vw//HM4+/AUUPqKA+d1JYAAAAAElFTkSuQmCC",BV="data:image/png;base64,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",MV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4gYKFR4eQwZmygAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAO1SURBVFjD7ZnNb9tkHMc/j98SN42dpO36xro30MaUgYCtGmMSAokD2wCJEyp3LlyQ2F/AeUhc+AOQEBeEkBASLxIHLr0wCRAghiq0wRAdFW3TvDlxbD8corTJbCdpZ9YU8ZMiK/Zj55Pv7/n9nq9tsfTRsxyE0AA+uPawHGXIpas/C63zRS6/M5KQ4sIbO4p24urbn4wU5LU3X+xNfXesHns39sTl945x64YWe1xVQTcknifwfZBB73ErJyk+U+Xo4p2BkLM3Xw/P0UHx2/VpvvsiS60q+o4LJLRcQSDDkADlkuCPH03mzxjoprsrdZVBA258Nc/yx9ZASGjDdZQUCmh6e9sdv69ofPjWEVa+nksOtOUY/PVrKlKdu1Ouqr1QMgCvRey533ye4afPDu+uPcWFbro0ncFKxqW6X6TSEtUIkgFdWymwvtZ/dmg6aJpEKKCIXmgpwWu1C+vuaDYEbl1NBjSdbWHZkq3NaFVPnXU5c2k1tjB8T+WHT+f55XoqEtZzRTJz1Ckb1GvRF5tb8PtCAqiaz4kLGzz0eHhMYTLg0INOMqDSFwR+9LH8vDdUi0lnXcZsL5xKA1RNJgPqNRV0I3wxoYCq31970BdUqBI1Yr4rAoQyQqCqKiOLQDckmbw3OqC+J9CNKFDQ0/7ogI6ccU4ybn97iO+/tCiXxHbhdbbdq9fanwpr7+eA3Pa+zLjk0eei3VXiipp2C3vC7/EBMmh/oqZRTyszJfZM4/6kfvL4JunxnY7gtXZUbbnhNtcdJy/WyC+U9gbaiDAllS1BKhNfTOdeucVTL1fITwTbTiqqF3fvz9oSK0bNoUDTZrhfZm1JszbYULT6rOXdkEKBi0t/U4hR81+t+tnTm0w9EK96d9pVFVTD35/2ZGSazJ5ySKVl37QXJgOefnUDa6ayf3306OIdzl6qMp6VkWm3cpLHrpSYPrm+/w1/rODi1KPnqlMXWDP1e1+ZslMN9AiXVNkSmHZrqB+YOrHB+ZcqZMZ7r5MrBJy7XMG0nXsHDQJBeSs8ZGIqQMrh3Xn+cI1ms3f8QtEd6v5+KNDaegpzLKyo6woa5eFXX2umwvGi22MZi8/fTtDmGcl5zkeurHL6yXZDP/9CNVlTIoSkWhGRRbDbP2GMuRx5okRuzmSuuJ4sqFPW0bTwGm3ngj350UzBwZqugCBZ0KRDNfZ+V3BgjPN/A1TVgtD8BFB10FPe/4oOVUzdT3pnc7D4WpyjBm7uE2j3M/ORVbTz9mFUQxyUF2L/AI4MPBB5eCU4AAAAAElFTkSuQmCC",IV=""+new URL("happeningduel3.7fda1347.png",import.meta.url).href,OV=""+new URL("gameguyduel.6d7be631.png",import.meta.url).href,kV="data:image/png;base64,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",NV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gYKFQM5GWC/vQAABQtJREFUWMPtmX9IlHccx1+Pj3rmJjsMQnMai3BsCp1hbeEfEW1DW62YsDujuU1RA7FEiY3YxmqDQdEPzYZgCoX9IdFa5XowxmbLZJELpSsLItel6Z03y0zO7rz77A+fM3fVZb/stvrAG+75fp/P5/t6Pt/n+X6+fA9e2HNqyuO5yzzgHWA+8AaQAMTonUNAD9AJnAZ+AeXMFD6bRIGsBzkLIg+ps7pv1NOGLANxPgJgoJxjsZ484JsgzU8AMFDNY7GfDORykMGnAOnX4NgYjweZ/RQBA5X9qJAZIN4pBPWOjflwkJEgnVMI6Vfn2NiTB935DCD92jlZSNMzhPTLFEgVdg/StSFQMdc+oIRKDHDjPg8wleYDjKAM3S+jK0MA0s+1MtjULwqhDdOiYKCmEAI1BQOdFUKgs4J9TKOAGiKgXlDCgy1PIWmBoNdDiO16MNArIQR6JRhoewiBtgcDPR5CoMf/DyVUGQL2hEA290yE/E9t8/wWCXypHxZch1Q3IGP6Qe78vp8qdE1s+16gW8ArUBnEdzLxcflBT5hMpjZN04b6+/t9LpfLd+nSJdm9e7cYDAYJZh6PZzzghg0bREQkNzdXbzsh4BJANE0b9xkeHpb29nYxm82Tje/yv6dy+fJlqaurk4SEhEGDwXAjJWX+8Lp1pQKIwWAY14EDB6Surk6/fk8iIr4SKBFFUaSrq0ucTqe0tLTooA0CznHQHTt2iKqqEhMTI+Xl5eLxeCQ5OTlIfINERkbeAZ0xY4aIiJhMJgF2AUnAPGj8dmwK9wqUCCD79++XmpoaHeS4wEGBEsnMzBS32y1Lly4VEZGUlBSBMoE+gU9F0zTZvn37ePYVRRGPxyNms1lv6yoAyjs6OjpOnjx5Csi9ax11OBxYrVYqKyuxWCyfzZkz5xzwGyx7F9K/gL9H7/1q3wSOADspLCxE0zSOHj1KR0cHRUVFwFn9rCz2Lk+LxUJ4eDgXL14ETpTBazWTWQ4OxsXF/VxdXX2hra1t1OVyic1mk+LiYi/ggVOLof7q3Rk9IpAn8fHx4na7ZcWKFQJISUmJDAwMSFRUlJ7xT0TTNLl165b09vbK4OCgjIyMSEFBgT/D0TpH8IwCH/b19W1ds2bNH+np6cNGo/Hmxo0bfRUVFWFZWVkKvOWG1Ymw5XdVjZI77kagmfz8fAYGBmhsbASgvr6eadOmYTab9W3ldAD27duHyWQiI2MxLS0tvszMTI9e042T2T2FAcuBl4EfgZm3b99eWFtb67PZbJKWljaheq0/PHt2kjUuLtkO5S6oRVG6yM/Px2g00t3dTW9vL+fPn0dVVX365wHbABgdjfLa7d81Wa2ebatWrbq2ZMkSNScnJxqofRBoOEBaWlp8aWnp51VVVdM7Ozu9qqqSk5NDUlKS0tra6v1X7VKQ2NjwK7B1F5QtzMpaXpiYmBi2YEEGPT3X9LvczJ07l6amJlJTU7FaPzodF/fqTJ/P1wPvVwOHHQ6yq6qqbm7atMnY0NAw2+fzvf7A/ajT6XRHR0er9fX1LzkcDqPNZjPm5eWpubm5o83NzT7g3L3dt9mKivI5dOiQ78yZU267/Wq03X41zG63Tz927Bitra16Vr9uiohQRgJq+cebN292xsbGhhUXF78ymaNxBbAAq4G3J/QNA78C3wB/+V/2Cf39+lG430aBLROuqwPu9dufwE/6uBcmtH8ALAvw2fvi34vn3v4BZgGY1GBOBDsAAAAASUVORK5CYII=",UV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gYKFQUDiTbBiQAABTVJREFUWMPtmX9I1Gccx19fz/ymUzuUBWbpFuXWLzqjWtEgqCxtLlgMTsO5puRZLpIKBq1ByUbg2ErnfkB5jlC2Vm61wqOi4TBlrS0UL50VWpeid2fNM5zp5X32h3d2uLx+6436wJuH7/d5Ps/zuufz/Po+B8/tGTXlcZwF5gAJwGvADGAyEO7O7gZagUbgHHBagfpR/XUCmwTOC8hD6rzAptEAzBBoeQTA4WoRyHgagJECR54A4HAdEYh8UpDzBC49BUiPLgnMe1zIBQL2pwjpkV1gwaNCTha4OgqQHl2VwVXjoUFNowjpkelhIbeOAaRHWx9owReYAFxjMB0LcwCxymA6ZAH3KJg7hpC42859kB69CsSO8dZ+TYGXRuxRgWV+AAkQ62YZMfTL/ejAtNwX6AI/Al3gC3S6H4FOH3EyCfwDBPsJaK8CISOBuh73MP0kD22KV8SHh/62H4X+tq8xavUjUKsv0Mt+BHrZF+h5PwI97wv0jB+Bnvn/7/VuK/GD3hyRIQjYCTSGQdfiwfVUAPnKnfpSgVve7/aAtIIMgBT68H2Q+oFeD2iVTqf7w2Qy3bLb7a7e3l7XlStX5MCBA6Kqqvgyp9M5VOGOHTtERCQ9PV0AqQLpdeeZTKYhn56eHqmtrRW9Xv+g9fd6wi/Nzc1iNBolOjraoapq18qZM525W7YIIKqqDqm8vFyMRqOoqiorVVU+GjdONoMoiiItLS3S2dkpZ8+eFUAOgXR6ge7bt080Go2EhYXJtm3bxOl0Slxc3Ij1q6oqQUFBd0EnTpwoIiI6nU6AL4GYryGpCax7QA6CbHY3ePjwYdm/f78A8ivIT+68xMRE6e/vl9WrV4uIyKxZs2QrSAfIejfo3r17h3pfURRxOp2i1+sFkG64vh7y6urq6qqrq88B6f+ZTDabDbPZTGFhISkpKe9Nmzbt4kb4fiPY1oGja4SB3Q0cB74AsrKyMJlMVFRUUFdXh8FgoB64BUTcwzclJYXAwECamppog64wWPvtsO+k4aAu4GhCQkJFQ0ND0/bt24Pq6+tDLRZL+IycnJkzIPRdaFnhY4pGRUWRnJyM0WgEoLi4mLS0NKrGj8cM3HCX27BhA+3t7TgcDkpKSsjKyqK2tpYgeEO5z2bjWZ7WdnR0fJadnf3b/Pnze7Rabffu3btdBQUFAUuTksiH99dA+TFgvEYz5KwFKoHMzExu3rzJiRMnACgtLSU4OBi9Xk8sdy+XysrK0Ol0LFuyhOqqKpJWrXJNgusvDq7d3A80AHgTCAV+BCb19fUtLi4udlksFomPj1c+AYcCb3fAD3GRkf1ztFp2AsVAi6KQmZmJVqultbWV9vZ2Ghoa0Gg0GAwG5gGfuxsLcTr5zmplp9ns+Hjdur+XrVjB0tTU8e6qfFogQHx8fFRubu4HRUVFkY2NjQMajYbU1FRiYmKUmpqaAU9hA/xep9W+Guh0hieD9MDLjsREpkyZwusLF9LW1gZAPzB37lxOnjzJ7Nmz+dBsZmp4OOERET3dUPYWbMRuby4qKlLy8vK0hw4dmupyuV65b+g7Ozv7Q0JCNKWlpS/YbDatxWLRZmRkaNLT0+9UVla6gIveTn3BwbZFsOs4FK7Pzpafjx2TmxcuSLPV2mWxWgeuWq0Dp06doqamBoPBwA04fSc09HrXhAkXkwavbVzAO/n5+Z0REREBOTk5971HUNxKAdKARV55PcAvwC7ujqFtXvl2INrr+Q7wqdfzN8PKeuxP4Ki73b+83q8Bkof5HHz+78Uzb/8CsYX5GOjbIQ8AAAAASUVORK5CYII=",{blueImage:qk,blue3Image:eoe,redImage:Qk,red3Image:toe,happeningImage:Jk,happening3Image:noe,chanceImage:roe,chance2Image:ioe,chance3Image:aoe,bowserImage:Zk,bowser3Image:ooe,minigameImage:soe,shroomImage:loe,otherImage:p2,starImage:jV,blackstarImage:coe,arrowImage:$k,startImage:GV,itemImage:uoe,item3Image:doe,battleImage:Aoe,battle3Image:foe,bankImage:hoe,bank3Image:poe,gameguyImage:moe,banksubtypeImage:Soe,banksubtype2Image:goe,bankcoinsubtypeImage:eN,itemshopsubtypeImage:_oe,itemshopsubtype2Image:xoe,toadImage:tN,mstarImage:voe,booImage:HV,bowsercharacterImage:woe,koopaImage:yoe}=Yk;let ng;class Eoe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.globalClickHandler=e=>{this.elementIsWithin(e.target)||e.target.tagName.toUpperCase()==="CANVAS"||Qu(-1)},this.handleClick=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},this.onContextMenu=e=>{e.preventDefault()},this.onTypeChanged=(e,t)=>{const r=Ss();St.dispatch(ZI({spaceIndices:r,type:e,subtype:t})),this.forceUpdate()},this.onChangeX=e=>{const t=parseInt(e.target.value,10),r=e.target.value==="",i=Vn().bg.width;!r&&isNaN(t)||t<0||t>i||(this.state.oldX||this.setState({oldX:this.props.space.x}),St.dispatch(Js({spaceIndices:[this.props.spaceIndex],coords:[{x:r?0:t}]})),this.forceUpdate())},this.onChangeY=e=>{const t=parseInt(e.target.value,10),r=e.target.value==="",i=Vn().bg.height;!r&&isNaN(t)||t<0||t>i||(this.state.oldY||this.setState({oldY:this.props.space.y}),St.dispatch(Js({spaceIndices:[this.props.spaceIndex],coords:[{y:r?0:t}]})),this.forceUpdate())},this.onCoordSet=e=>{St.dispatch(Js({spaceIndices:[this.props.spaceIndex],coords:[{x:this.props.space.x||0,y:this.props.space.y||0}]})),this.setState({oldX:void 0,oldY:void 0}),this.forceUpdate()},this.onKeyUp=e=>{e.key==="Enter"&&this.onCoordSet()}}componentDidMount(){ng=this.globalClickHandler.bind(this),document.addEventListener("click",ng)}componentWillUnmount(){document.removeEventListener("click",ng),ng=null}getPlacement(e){const t=(isNaN(this.state.oldX)?e.x:this.state.oldX)-8,r=(isNaN(this.state.oldY)?e.y:this.state.oldY)+15;return"translateX("+t+"px) translateY("+r+"px)"}elementIsWithin(e){return!e||!this.refs||!this.rcMenu?!0:this.rcMenu.contains(e)}render(){const e=this.props.space;if(!e)return null;const t={transform:this.getPlacement(e)};return Xe("div",{ref:r=>this.rcMenu=r,className:"rcMenu",style:t,onClick:this.handleClick,onContextMenu:this.onContextMenu,children:["\xA0\xA0",L("span",{children:"X:"}),L("input",{type:"text",value:e.x,onChange:this.onChangeX,onBlur:this.onCoordSet,onKeyUp:this.onKeyUp}),L("span",{children:"Y:"}),L("input",{type:"text",value:e.y,onChange:this.onChangeY,onBlur:this.onCoordSet,onKeyUp:this.onKeyUp}),L(Boe,{type:e.type,subtype:e.subtype,typeChanged:this.onTypeChanged})]})}}const Coe=[{name:"Change to blue space",icon:qk,type:de.BLUE},{name:"Change to red space",icon:Qk,type:de.RED},{name:"Change to happening space",icon:Jk,type:de.HAPPENING},{name:"Change to chance time space",icon:roe,type:de.CHANCE},{name:"Change to minigame space",icon:soe,type:de.MINIGAME},{name:"Change to shroom space",icon:loe,type:de.SHROOM},{name:"Change to Bowser space",icon:Zk,type:de.BOWSER},{name:"Change to invisible space",icon:p2,type:de.OTHER},{name:"Change to star space",icon:jV,type:de.STAR,advanced:!0},{name:"Change to start space",icon:GV,type:de.START,advanced:!0}],Voe=[{name:"Show Toad",icon:tN,subtype:yt.TOAD},{name:"Show Boo",icon:HV,subtype:yt.BOO},{name:"Show Bowser",icon:woe,subtype:yt.BOWSER},{name:"Show Koopa Troopa",icon:yoe,subtype:yt.KOOPA}],Doe=[{name:"Change to blue space",icon:qk,type:de.BLUE},{name:"Change to red space",icon:Qk,type:de.RED},{name:"Change to happening space",icon:Jk,type:de.HAPPENING},{name:"Change to chance time space",icon:ioe,type:de.CHANCE},{name:"Change to Bowser space",icon:Zk,type:de.BOWSER},{name:"Change to item space",icon:uoe,type:de.ITEM},{name:"Change to battle space",icon:Aoe,type:de.BATTLE},{name:"Change to bank space",icon:hoe,type:de.BANK},{name:"Change to invisible space",icon:p2,type:de.OTHER},{name:"Change to star space",icon:jV,type:de.STAR,advanced:!0},{name:"Change to black star space",icon:coe,type:de.BLACKSTAR,advanced:!0},{name:"Change to start space",icon:GV,type:de.START,advanced:!0},{name:"Change to arrow space",icon:$k,type:de.ARROW}],Foe=[{name:"Show Toad",icon:tN,subtype:yt.TOAD},{name:"Show Boo",icon:HV,subtype:yt.BOO},{name:"Show bank",icon:goe,subtype:yt.BANK},{name:"Show bank coin stack",icon:eN,subtype:yt.BANKCOIN},{name:"Show item shop",icon:xoe,subtype:yt.ITEMSHOP}],Toe=[{name:"Change to blue space",icon:eoe,type:de.BLUE},{name:"Change to red space",icon:toe,type:de.RED},{name:"Change to happening space",icon:noe,type:de.HAPPENING},{name:"Change to chance time space",icon:aoe,type:de.CHANCE},{name:"Change to Bowser space",icon:ooe,type:de.BOWSER},{name:"Change to item space",icon:doe,type:de.ITEM},{name:"Change to battle space",icon:foe,type:de.BATTLE},{name:"Change to bank space",icon:poe,type:de.BANK},{name:"Change to Game Guy space",icon:moe,type:de.GAMEGUY},{name:"Change to invisible space",icon:p2,type:de.OTHER},{name:"Change to star space",icon:jV,type:de.STAR,advanced:!0},{name:"Change to start space",icon:GV,type:de.START,advanced:!0},{name:"Change to arrow space",icon:$k,type:de.ARROW}],boe=[{name:"Show Millenium Star",icon:voe,subtype:yt.TOAD},{name:"Show Boo",icon:HV,subtype:yt.BOO},{name:"Show bank",icon:Soe,subtype:yt.BANK},{name:"Show bank coin stack",icon:eN,subtype:yt.BANKCOIN},{name:"Show item shop",icon:_oe,subtype:yt.ITEMSHOP}],Poe=[{name:"Change to basic space",icon:LV,type:de.DUEL_BASIC},{name:"Change to Mini-Game space",icon:BV,type:de.MINIGAME},{name:"Change to reverse space",icon:MV,type:de.DUEL_REVERSE},{name:"Change to happening space",icon:IV,type:de.HAPPENING},{name:"Change to Game Guy space",icon:OV,type:de.GAMEGUY},{name:"Change to power-up space",icon:kV,type:de.DUEL_POWERUP},{name:"Change to invisible space",icon:p2,type:de.OTHER},{name:"Change to blue start space",icon:NV,type:de.DUEL_START_BLUE,advanced:!0},{name:"Change to red start space",icon:UV,type:de.DUEL_START_RED,advanced:!0}];function Roe(){const n=Vn();let e=[];switch(n.game){case 1:e=Coe;break;case 2:e=Doe;break;case 3:switch(n.type){case zn.DUEL:e=Poe;break;case zn.NORMAL:default:e=Toe;break}break}return lr(z0.uiAdvanced)||(e=e.filter(t=>!t.advanced)),e}function Loe(){const n=Vn();let e=[];switch(n.game){case 1:e=Voe;break;case 2:e=Foe;break;case 3:switch(n.type){case zn.DUEL:e=[];break;default:e=boe;break}break}return lr(z0.uiAdvanced)||(e=e.filter(t=>!t.advanced)),e}const Boe=class extends Ne.exports.Component{constructor(){super(...arguments),this.onTypeChanged=(e,t)=>{this.props.typeChanged(e,t)}}render(){const e=this.props.type;if(e===de.START&&!lr(z0.uiAdvanced))return null;const t=this.props.subtype,r=this.onTypeChanged,i=s=>{const l=s.type+"-"+s.subtype,u=e===s.type||e===de.OTHER&&t!==void 0&&t===s.subtype;return L(Moe,{type:s.type,subtype:s.subtype,icon:s.icon,title:s.name,selected:u,typeChanged:r},l)},a=Roe().map(i),o=Loe().map(i);return Xe("div",{className:"rcSpaceToggleContainer",children:[a,L("br",{}),o]})}},Moe=class extends Ne.exports.Component{constructor(){super(...arguments),this.onTypeChanged=()=>{this.props.subtype!==void 0&&this.props.selected?this.props.typeChanged(this.props.type,void 0):this.props.typeChanged(this.props.type,this.props.subtype)}}render(){let e="rcSpaceToggleButton";this.props.selected&&(e+=" selected");const t=this.props.subtype!==void 0?25:20;return L("div",{className:e,title:this.props.title,onClick:this.onTypeChanged,children:L("img",{src:this.props.icon,height:t,width:t,alt:""})})}};function Ioe(){const n=document.getElementById("dragZone");n.style.display="inline-block",n.ondragover||(n.ondragover=e=>{e.preventDefault()}),n.ondragenter||(n.ondragenter=e=>{n.className="hover"}),n.ondragleave||(n.ondragleave=e=>{n.className=""})}function eR(){const n=document.getElementById("dragZone");n.style.display="none",n.className="",koe()}function Ooe(n){document.getElementById("dragZone").ondrop=n}function koe(){document.getElementById("dragZone").ondrop=null}let nN;function tR(n){nN=n}function Noe(){return nN}let wA=!1,pc=-1,mc=-1,$s=-1,el=-1,tl=null;function rN(n){const e=n.currentTarget;aN(e,n.clientX,n.clientY,n.ctrlKey)}function iN(n){if(n.touches.length!==1)return;const e=n.touches[0],t=n.currentTarget;aN(t,e.clientX,e.clientY,n.ctrlKey)}function aN(n,e,t,r){tl=n.getBoundingClientRect();const[i,a]=W4(n,e,t);pc=$s=i,mc=el=a;const o=lm($s,el);wt(`Clicked space: ${At(o)} (${o})`,Vn().spaces[o]);const s=o!==-1;Bc()&&s&&(nC(ce.MOVE),Za(),sC(!0));const l=Kp();switch(l){case ce.MOVE:s?r?v4(o):nR(o)||Fu(o):Za();break;case ce.ADD_OTHER:case ce.ADD_BLUE:case ce.ADD_RED:case ce.ADD_MINIGAME:case ce.ADD_HAPPENING:case ce.ADD_STAR:case ce.ADD_BLACKSTAR:case ce.ADD_START:case ce.ADD_CHANCE:case ce.ADD_SHROOM:case ce.ADD_BOWSER:case ce.ADD_ITEM:case ce.ADD_BATTLE:case ce.ADD_BANK:case ce.ADD_GAMEGUY:case ce.ADD_ARROW:case ce.MARK_STAR:case ce.MARK_GATE:case ce.ADD_TOAD_CHARACTER:case ce.ADD_BOWSER_CHARACTER:case ce.ADD_KOOPA_CHARACTER:case ce.ADD_BOO_CHARACTER:case ce.ADD_BANK_SUBTYPE:case ce.ADD_BANKCOIN_SUBTYPE:case ce.ADD_ITEMSHOP_SUBTYPE:case ce.ADD_DUEL_BASIC:case ce.ADD_DUEL_REVERSE:case ce.ADD_DUEL_POWERUP:case ce.ADD_DUEL_START_BLUE:case ce.ADD_DUEL_START_RED:s?r?v4(o):nR(o)||Fu(o):r||Za();break;case ce.LINE:case ce.LINE_STICKY:case ce.ROTATE:s?Fu(o):Za();break;case ce.ERASE:Za();break}const u=rC(),d=Vn(),h=d.spaces[o];switch(l){case ce.LINE:if(u.length===1){const f=u[0];y8(f.x,f.y,i,a),wp()&&Qu(-1)}break;case ce.LINE_STICKY:if(u.length===1){const f=u[0];if(h&&h!==f){const m=Fy(f,d);Go(m,o),Fu(o)}else y8(f.x,f.y,i,a)}break;case ce.ROTATE:break;case ce.ERASE:o!==-1&&zV(d,o)?(x5(o),Za()):SN(i,a);break;case ce.ADD_OTHER:case ce.ADD_BLUE:case ce.ADD_RED:case ce.ADD_MINIGAME:case ce.ADD_HAPPENING:case ce.ADD_STAR:case ce.ADD_BLACKSTAR:case ce.ADD_START:case ce.ADD_CHANCE:case ce.ADD_SHROOM:case ce.ADD_BOWSER:case ce.ADD_ITEM:case ce.ADD_BATTLE:case ce.ADD_BANK:case ce.ADD_GAMEGUY:case ce.ADD_ARROW:case ce.ADD_DUEL_BASIC:case ce.ADD_DUEL_REVERSE:case ce.ADD_DUEL_POWERUP:case ce.ADD_DUEL_START_BLUE:case ce.ADD_DUEL_START_RED:Z8(l,i,a,o,!1,r);break;case ce.MARK_STAR:case ce.MARK_GATE:case ce.ADD_TOAD_CHARACTER:case ce.ADD_BOWSER_CHARACTER:case ce.ADD_KOOPA_CHARACTER:case ce.ADD_BOO_CHARACTER:case ce.ADD_BANK_SUBTYPE:case ce.ADD_BANKCOIN_SUBTYPE:case ce.ADD_ITEMSHOP_SUBTYPE:o===-1&&Z8(l,i,a,o,!1,r);break;case ce.MOVE:default:wp()&&Qu(Ss()[0]);break}wA=s}function oN(n){if(n.touches.length!==1||!Uoe())return;n.preventDefault();const e=n.touches[0],t=e.clientX-tl.left,r=e.clientY-tl.top;lN(t,r)}function sN(n){if(!tl||n.buttons!==1)return;const e=n.clientX-tl.left,t=n.clientY-tl.top;lN(e,t)}function lN(n,e){if(Bc())return;n=Math.round(n),e=Math.round(e);const t=Kp(),r=Ss(),i=rC(),a=Vn(),o=lm(n,e);switch(t){case ce.LINE:if(i.length===1){const s=i[0];y8(s.x,s.y,n,e),wp()&&Qu(-1)}break;case ce.LINE_STICKY:if(i.length===1){const s=i[0],l=a.spaces[o];if(l&&l!==s){const u=Fy(s,a);Go(u,o),Fu(o)}else y8(s.x,s.y,n,e)}break;case ce.ROTATE:if(i.length===1){const s=i[0];if(s.type===de.ARROW){const l=DG(s.x,s.y,n,e),u=(Math.PI*1.5+l)%(Math.PI*2),d=VG(u),h=Fy(s,a);qne(h,d)}}break;case ce.ERASE:o!==-1&&zV(a,o)?(x5(o),Za()):SN(n,e);break;case ce.MOVE:case ce.ADD_OTHER:case ce.ADD_BLUE:case ce.ADD_RED:case ce.ADD_MINIGAME:case ce.ADD_HAPPENING:case ce.ADD_STAR:case ce.ADD_BLACKSTAR:case ce.ADD_START:case ce.ADD_CHANCE:case ce.ADD_SHROOM:case ce.ADD_BOWSER:case ce.ADD_ITEM:case ce.ADD_BATTLE:case ce.ADD_BANK:case ce.ADD_GAMEGUY:case ce.ADD_ARROW:case ce.MARK_STAR:case ce.MARK_GATE:case ce.ADD_TOAD_CHARACTER:case ce.ADD_BOWSER_CHARACTER:case ce.ADD_KOOPA_CHARACTER:case ce.ADD_BOO_CHARACTER:case ce.ADD_BANK_SUBTYPE:case ce.ADD_BANKCOIN_SUBTYPE:case ce.ADD_ITEMSHOP_SUBTYPE:case ce.ADD_DUEL_BASIC:case ce.ADD_DUEL_REVERSE:case ce.ADD_DUEL_POWERUP:case ce.ADD_DUEL_START_BLUE:case ce.ADD_DUEL_START_RED:default:{const s=!wA&&t===ce.MOVE;if(!s&&i.length){const l=n-$s,u=e-el,d=[],h=[];for(const f of r){const m=a.spaces[f];if(m){d.push(f);const g=Math.round(m.x)+l,_=Math.round(m.y)+u;h.push({x:Math.max(0,Math.min(g,a.bg.width)),y:Math.max(0,Math.min(_,a.bg.height))})}}d.length&&St.dispatch(Js({spaceIndices:d,coords:h})),wp()&&Qu(r[0])}s&&Xoe(n,e)}break}$s=n,el=e}function cN(n){n.button===0&&dN()}function uN(n){n.touches.length===1&&dN()}function dN(){if(Bc())return;switch(Kp()){case ce.MOVE:wA||gN();break;case ce.LINE:{const e=Ss(),t=lm($s,el);if(t!==-1)for(const r of e)Go(r,t);w4()}break;case ce.LINE_STICKY:w4();break}}function AN(n){if(Bc())return;const e=Math.abs(pc-$s)>5||Math.abs(mc-el)>5,t=Math.abs(pc-$s)>0||Math.abs(mc-el)>0;pc=$s=-1,mc=el=-1;const r=n.ctrlKey,i=Math.round(n.clientX),a=Math.round(n.clientY),o=i-Math.round(tl.left),s=a-Math.round(tl.top),l=lm(o,s),u=Vn(),d=l===-1?null:u.spaces[l];if(n.button!==0)return;const h=Kp();switch(h){case ce.MOVE:case ce.ADD_OTHER:case ce.ADD_BLUE:case ce.ADD_RED:case ce.ADD_MINIGAME:case ce.ADD_HAPPENING:case ce.ADD_STAR:case ce.ADD_BLACKSTAR:case ce.ADD_START:case ce.ADD_CHANCE:case ce.ADD_SHROOM:case ce.ADD_BOWSER:case ce.ADD_ITEM:case ce.ADD_BATTLE:case ce.ADD_BANK:case ce.ADD_GAMEGUY:case ce.ADD_ARROW:case ce.ADD_DUEL_BASIC:case ce.ADD_DUEL_REVERSE:case ce.ADD_DUEL_POWERUP:case ce.ADD_DUEL_START_BLUE:case ce.ADD_DUEL_START_RED:!t&&!r&&(d?Fu(l):Za());break;case ce.MARK_GATE:case ce.ADD_TOAD_CHARACTER:case ce.ADD_BOWSER_CHARACTER:case ce.ADD_KOOPA_CHARACTER:case ce.ADD_BOO_CHARACTER:case ce.ADD_BANK_SUBTYPE:case ce.ADD_BANKCOIN_SUBTYPE:case ce.ADD_ITEMSHOP_SUBTYPE:wA&&Z8(h,o,s,l,e,r),!t&&!r&&(d?Fu(l):Za());break;case ce.MARK_STAR:e||Hoe(Ss());break;case ce.LINE:case ce.LINE_STICKY:w4();break;case ce.ERASE:case ce.ROTATE:break}wA=!1}function fN(n){n.preventDefault(),n.stopPropagation();const e=Ss(),t=e.length!==1?-1:e[0];Qu(t)}function hN(n){if(n.preventDefault(),Bc()||(wp()&&Qu(-1),!n.dataTransfer))return;let e;try{e=JSON.parse(n.dataTransfer.getData("text"))}catch{return}const t=n.currentTarget,[r,i]=W4(t,n.clientX,n.clientY);tl=t.getBoundingClientRect();const a=lm(r,i);if(typeof e=="object"){if(e.action)Za(),Z8(e.action.type,r,i,a,!1,!1);else if(e.isEventParamDrop){const o=Noe();o&&o(a)}}}function pN(n){const e=rC();if(!e||!e.length)return;const t=Ss(),r=Vn();switch(n.key){case"Up":case"ArrowUp":rg(t,r,i=>({y:Math.max(i.y-1,0)}));break;case"Down":case"ArrowDown":rg(t,r,i=>({y:Math.min(i.y+1,r.bg.height)}));break;case"Left":case"ArrowLeft":rg(t,r,i=>({x:Math.max(i.x-1,0)}));break;case"Right":case"ArrowRight":rg(t,r,i=>({x:Math.min(i.x+1,r.bg.width)}));break;case"Delete":{let i=!1;if(e.forEach(a=>{a.subtype!==void 0&&(i=!0)}),i)St.dispatch(yy({spaceIndices:t,subtype:void 0}));else{const a=[];t.forEach(o=>{zV(r,o)&&a.push(o)}),a.length>0&&St.dispatch(hte({spaceIndices:a})),Za()}}break}}function mN(n){if(n.button!==0||Bc())return;const e=Kp();!wA&&e===ce.MOVE&&(gN(),pc=$s=-1,mc=el=-1)}function Uoe(){return!nM(c5())}function nR(n){return!!zp(St.getState())[n]}function v4(n){St.dispatch(mte(n))}function Fu(n){St.dispatch(e5(n))}function joe(){return Vn().game===3?14:8}function lm(n,e){const t=Vn(),r=joe();let i=-1;for(let a=0;a<t.spaces.length;a++){const o=t.spaces[a];!o||Math.abs(o.x-n)<=r&&Math.abs(o.y-e)<=r&&(i=a)}return i}function zV(n,e){const t=n.spaces[e];return t?t.type===de.START?Kne(de.START,n).length>1:!0:!1}function Z8(n,e,t,r,i,a){const o=Vn().spaces[r],s=zoe(n),l=Woe(n);let u=!1;if(o)l!==void 0&&!i&&(o.subtype===l?St.dispatch(yy({spaceIndices:[r],subtype:void 0})):Goe(o.type,l)&&St.dispatch(yy({spaceIndices:[r],subtype:l})),Cy([r]),u=!0);else{const d=lC(e,t,s,l);a?v4(d):Cy([d]),u=!0}return u}function Goe(n,e){return!(n!==de.OTHER&&e===yt.GATE)}function rg(n,e,t){const r=[],i=[];for(const a of n){const o=e.spaces[a];o&&(r.push(a),i.push(t(o)))}r.length&&St.dispatch(Js({spaceIndices:r,coords:i}))}function Hoe(n){if(!n.length)return;let e=!1;const t=Vn();for(const r of n)if(!t.spaces[r].star){e=!0;break}g5(n,e)}function w4(){St.dispatch(JE({connections:null}))}function SN(n,e){St.dispatch(dte({x:n,y:e}))}function zoe(n){switch(n){case ce.ADD_BLUE:return de.BLUE;case ce.ADD_RED:return de.RED;case ce.ADD_HAPPENING:return de.HAPPENING;case ce.ADD_STAR:return de.STAR;case ce.ADD_BLACKSTAR:return de.BLACKSTAR;case ce.ADD_MINIGAME:return de.MINIGAME;case ce.ADD_CHANCE:return de.CHANCE;case ce.ADD_START:return de.START;case ce.ADD_SHROOM:return de.SHROOM;case ce.ADD_BOWSER:return de.BOWSER;case ce.ADD_ITEM:return de.ITEM;case ce.ADD_BATTLE:return de.BATTLE;case ce.ADD_BANK:return de.BANK;case ce.ADD_ARROW:return de.ARROW;case ce.ADD_GAMEGUY:return de.GAMEGUY;case ce.ADD_DUEL_BASIC:return de.DUEL_BASIC;case ce.ADD_DUEL_REVERSE:return de.DUEL_REVERSE;case ce.ADD_DUEL_POWERUP:return de.DUEL_POWERUP;case ce.ADD_DUEL_START_BLUE:return de.DUEL_START_BLUE;case ce.ADD_DUEL_START_RED:return de.DUEL_START_RED;default:return de.OTHER}}function Woe(n){switch(n){case ce.ADD_TOAD_CHARACTER:return yt.TOAD;case ce.ADD_BOWSER_CHARACTER:return yt.BOWSER;case ce.ADD_KOOPA_CHARACTER:return yt.KOOPA;case ce.ADD_BOO_CHARACTER:return yt.BOO;case ce.ADD_BANK_SUBTYPE:return yt.BANK;case ce.ADD_BANKCOIN_SUBTYPE:return yt.BANKCOIN;case ce.ADD_ITEMSHOP_SUBTYPE:return yt.ITEMSHOP;case ce.MARK_GATE:return yt.GATE;default:return}}function Xoe(n,e){if(pc===-1||mc===-1)return;Za();const r=Vn().spaces,i=[];for(let a=0;a<r.length;a++){const o=r[a];CG(o.x,o.y,pc,mc,n,e)&&i.push(a)}Cy(i),Koe(pc,mc,n,e)}function Koe(n,e,t,r){St.dispatch(ZE({selectionCoords:[n,e,t,r]}))}function gN(){St.dispatch(ZE({selectionCoords:null}))}function _N(n){n.preventDefault()}function xN(n){n.addEventListener("contextmenu",fN,!1),n.addEventListener("click",AN,!1),n.addEventListener("mousedown",rN,!1),n.addEventListener("mousemove",sN,!1),n.addEventListener("mouseup",cN,!1),n.addEventListener("mouseout",mN,!1),n.addEventListener("touchstart",iN,!1),n.addEventListener("touchmove",oN,!1),n.addEventListener("touchend",uN,!1),n.addEventListener("drop",hN,!1),n.addEventListener("dragover",_N,!1),n.addEventListener("keydown",pN,!1)}function vN(n){n.removeEventListener("contextmenu",fN),n.removeEventListener("click",AN),n.removeEventListener("mousedown",rN),n.removeEventListener("mousemove",sN),n.removeEventListener("mouseup",cN),n.removeEventListener("mouseout",mN),n.removeEventListener("touchstart",iN),n.removeEventListener("touchmove",oN),n.removeEventListener("touchend",uN),n.removeEventListener("drop",hN),n.removeEventListener("dragover",_N),n.removeEventListener("keydown",pN)}const rR=[[166,189,215],[128,62,117],[255,179,0],[0,83,138],[255,104,0],[129,112,102],[193,0,32],[206,162,98],[0,125,52],[246,118,142],[255,122,92],[83,55,122],[255,142,0],[179,40,81],[244,200,0],[127,24,13],[147,170,0],[89,51,21],[241,58,19],[35,44,22]];function WV(n){return rR[n%rR.length]}function Yoe(){let n=0;return{next(){return WV(n++)}}}async function wN(n={}){const e=Vn(),t=No(e.bg.width,e.bg.height);t.fillStyle="black",t.fillRect(0,0,e.bg.width,e.bg.height);const r=Qoe(),i=await Va(r,e.bg.width,e.bg.height);t.putImageData(i,0,0);const a=G0();return e8(!1),n.renderConnections&&iR.renderConnections(t.canvas,t,e,!1),iR.renderSpaces(t.canvas,t,e,!1,{skipCharacters:!n.renderCharacters,skipHiddenSpaces:!n.renderHiddenSpaces,skipBadges:!n.renderBadges}),e8(a),{canvas:t.canvas,dataUri:t.canvas.toDataURL(),blobPromise:new Promise(o=>{t.canvas.toBlob(o)})}}const qoe=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={renderConnections:!0,renderCharacters:!0,renderHiddenSpaces:!0,renderBadges:!0},this.takeScreenshot=async()=>{const{dataUri:e,blobPromise:t}=await wN({renderConnections:this.state.renderConnections,renderCharacters:this.state.renderCharacters,renderHiddenSpaces:this.state.renderHiddenSpaces,renderBadges:this.state.renderBadges});this.props.onAccept&&this.props.onAccept(e,t)},this.onCheckChanged=e=>{const t={};t[e]=!this.state[e],this.setState(t)}}render(){return Xe("div",{className:"screenshotContainer",children:[L("label",{className:"nbLabel",children:"Screenshot Options"}),L("br",{}),L(ig,{id:"renderConnections",text:"Render connections",checked:this.state.renderConnections,onChange:this.onCheckChanged}),L(ig,{id:"renderCharacters",text:"Render characters",checked:this.state.renderCharacters,onChange:this.onCheckChanged}),L(ig,{id:"renderHiddenSpaces",text:"Render hidden spaces",checked:this.state.renderHiddenSpaces,onChange:this.onCheckChanged}),L(ig,{id:"renderBadges",text:"Render badges",checked:this.state.renderBadges,onChange:this.onCheckChanged}),L("br",{}),L(rr,{onClick:this.takeScreenshot,css:"ssCreate",children:"Take Screenshot"})]})}},ig=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onChange=()=>{this.props.onChange(this.props.id)}}render(){let e="ssCheck";return this.props.css&&(e+=" "+this.props.css),Xe("label",{className:e,title:"",children:[L("input",{type:"checkbox",onChange:this.onChange,checked:this.props.checked}),this.props.text]})}};function Qoe(){return St.getState().app.overrideBg||Vn().bg.src}function Joe(n){n=n||Vn().name,n=hW(n),document.title=n?`PartyPlanner64 - ${n}`:"PartyPlanner64"}const Zoe=()=>lae(),Hn=Oie;function ws(){return Hn(al)}function XV(){return Hn(zp)}function $oe(){const n=XV();return Ne.exports.useMemo(()=>{const e=[];for(const t in n)e.push(parseInt(t,10));return e},[n])}function ese(){const n=ws(),e=XV();return Ne.exports.useMemo(()=>{const t=[];for(const r in e){const i=n.spaces[r];i&&t.push(i)}return t},[n,e])}function tse(){return Object.keys(XV()).length}function nse(n){Ne.exports.useEffect(()=>{Joe(n)},[n])}function rse(){const[n,e]=Ne.exports.useState(lr(z0.uiTheme)||Jl.Classic),t=Ne.exports.useCallback(r=>{r===z0.uiTheme&&e(lr(z0.uiTheme)||Jl.Classic)},[]);return Ne.exports.useEffect(()=>(Zae(t),()=>$ae(t)),[t]),n}function ise(){const n=rse();Ne.exports.useEffect(()=>{const e=document.documentElement,t=e.className.split(" ").filter(r=>r.startsWith("theme-"));e.classList.remove(...t),e.classList.add("theme-"+n)},[n])}function yN(n,e,t,r=!0){r&&e.clearRect(0,0,n.width,n.height);const i=t.links;if(i)for(const a in i){const o=t.spaces[a].x,s=t.spaces[a].y,l=Pa(parseInt(a),t);let u,d,h=!1;for(let f=0;f<l.length;f++)u=t.spaces[l[f]].x,d=t.spaces[l[f]].y,h=ose(i,l[f],a),!(h&&parseInt(a)>l[f])&&CN(e,o,s,u,d,h)}}function ase(n,e,t,r){if(e.clearRect(0,0,n.width,n.height),!r)return;const i=Object.keys(r).map(u=>parseInt(u,10));if(i.length!==1)return;const a=i[0],o=j0();let s,l=0;NE(t,o,(u,d,h,f,m)=>{if(a!==m)return;s!==d&&(l=0),s=d;let g;switch(u.type){case an.Space:{const _=d.parameterValues&&d.parameterValues[u.name];typeof _=="number"&&(g=[_])}break;case an.SpaceArray:g=d.parameterValues&&d.parameterValues[u.name];break}g&&g.forEach(_=>{const E=t.spaces[_];if(!E)return;const x=`rgba(${WV(l).join(", ")}, 0.9)`;use(e,f.x,f.y,E.x,E.y,x),l++})})}function ose(n,e,t){const r=n[e];return Array.isArray(r)?r.indexOf(parseInt(t))>=0:r==t}function EN(n,e,t,r=!0,i={}){r&&e.clearRect(0,0,n.width,n.height);for(let a=0;a<t.spaces.length;a++){const o=t.spaces[a];o!==null&&sse(e,t,o,a,i)}}function sse(n,e,t,r,i={}){const a=e.game||1,o=e.type||zn.NORMAL,s=t.x,l=t.y,u=t.rotation,d=t.type,h=t.subtype;if(typeof u=="number"){n.save(),n.translate(s,l);const f=-u;n.rotate(G1(f)),n.translate(-s,-l)}switch(d){case de.OTHER:if(i.skipHiddenSpaces)break;a===3?pn.drawOther3(n,s,l):pn.drawOther(n,s,l);break;case de.BLUE:a===3?pn.drawBlue3(n,s,l):pn.drawBlue(n,s,l);break;case de.RED:a===3?pn.drawRed3(n,s,l):pn.drawRed(n,s,l);break;case de.MINIGAME:o===zn.DUEL?pn.drawMiniGameDuel3(n,s,l):pn.drawMiniGame(n,s,l);break;case de.HAPPENING:a===3?o===zn.DUEL?pn.drawHappeningDuel3(n,s,l):pn.drawHappening3(n,s,l):pn.drawHappening(n,s,l);break;case de.STAR:a===3?pn.drawStar3(n,s,l):pn.drawStar(n,s,l);break;case de.CHANCE:a===3?pn.drawChance3(n,s,l):a===2?pn.drawChance2(n,s,l):pn.drawChance(n,s,l);break;case de.START:if(i.skipHiddenSpaces)break;a===3?pn.drawStart3(n,s,l):pn.drawStart(n,s,l);break;case de.SHROOM:pn.drawShroom(n,s,l);break;case de.BOWSER:a===3?pn.drawBowser3(n,s,l):pn.drawBowser(n,s,l);break;case de.ITEM:a===3?pn.drawItem3(n,s,l):pn.drawItem2(n,s,l);break;case de.BATTLE:a===3?pn.drawBattle3(n,s,l):pn.drawBattle2(n,s,l);break;case de.BANK:a===3?pn.drawBank3(n,s,l):pn.drawBank2(n,s,l);break;case de.ARROW:pn.drawArrow(n,s,l,a);break;case de.BLACKSTAR:pn.drawBlackStar2(n,s,l);break;case de.GAMEGUY:o===zn.DUEL?pn.drawGameGuyDuel3(n,s,l):pn.drawGameGuy3(n,s,l);break;case de.DUEL_BASIC:pn.drawDuelBasic(n,s,l);break;case de.DUEL_START_BLUE:if(i.skipHiddenSpaces)break;pn.drawStartDuelBlue(n,s,l);break;case de.DUEL_START_RED:if(i.skipHiddenSpaces)break;pn.drawStartDuelRed(n,s,l);break;case de.DUEL_POWERUP:pn.drawDuelPowerup(n,s,l);break;case de.DUEL_REVERSE:pn.drawDuelReverse(n,s,l);break;default:pn.drawUnknown(n,s,l);break}if(typeof u=="number"&&n.restore(),i.skipCharacters||lse(n,s,l,h,a),!i.skipBadges){const f=a===3?5:2,m=a===3?16:12;if(t.events&&t.events.length){let g=l+f;d===de.START&&(g-=m),n.drawImage(hse(t,e),s+f,g)}if(t.star){let g=l+f;d===de.START&&(g-=m),n.drawImage(Gn("starImg"),s-f-9,g)}if(t.subtype===yt.GATE){const g=s-f-9,_=l+f-5;n.drawImage(Gn("gateImg"),g,_)}}if(G0()){n.save(),n.fillStyle="white",n.strokeStyle="black",n.lineWidth=2,n.font="bold 6pt Courier New",n.textAlign="center";let f=r.toString();n.strokeText(f,s,l-2),n.fillText(f,s,l-2),f=At(r),n.strokeText(f,s,l+8),n.fillText(f,s,l+8),n.restore()}}function lse(n,e,t,r,i){r===yt.TOAD&&(i===3?n.drawImage(Gn("mstarImg"),e-15,t-22):n.drawImage(Gn("toadImg"),e-9,t-22)),r===yt.BOWSER&&n.drawImage(Gn("bowserImg"),e-27,t-45),r===yt.KOOPA&&n.drawImage(Gn("koopaImg"),e-12,t-22),r===yt.BOO&&n.drawImage(Gn("booImg"),e-13,t-17),r===yt.GOOMBA&&n.drawImage(Gn("goombaImg"),e-8,t-12),r===yt.BANK&&(i===2?n.drawImage(Gn("bank2Img"),e-9,t-10):n.drawImage(Gn("bank3Img"),e-17,t-20)),r===yt.BANKCOIN&&n.drawImage(Gn("bankcoinImg"),e-10,t-9),r===yt.ITEMSHOP&&(i===2?n.drawImage(Gn("itemShop2Img"),e-9,t-10):n.drawImage(Gn("itemShop3Img"),e-16,t-20))}const cse=Math.PI/1;function CN(n,e,t,r,i,a){n.save(),n.beginPath(),n.strokeStyle="rgba(255, 185, 105, 0.75)",n.lineCap="round",n.lineWidth=8,n.moveTo(e,t),n.lineTo(r,i),n.stroke();const o=(e+r)/2,s=(t+i)/2;n.translate(o,s),n.rotate(-Math.atan2(e-o,t-s)+cse),n.fillStyle="#A15000";const l=a?3:0;n.moveTo(-4,-2+l),n.lineTo(0,2+l),n.lineTo(4,-2+l),n.fill(),a&&(n.moveTo(-4,2-l),n.lineTo(0,-2-l),n.lineTo(4,2-l),n.fill()),n.restore()}function use(n,e,t,r,i,a){n.save(),n.beginPath(),n.strokeStyle="rgba(0, 0, 0, 0.5)",n.setLineDash([1,8]),n.lineCap="round",n.lineWidth=6,n.moveTo(e,t),n.lineTo(r,i),n.stroke(),n.restore(),n.save(),n.beginPath(),n.strokeStyle=a,n.setLineDash([1,8]),n.lineCap="round",n.lineWidth=4,n.moveTo(e,t),n.lineTo(r,i),n.stroke(),n.restore()}function dse(n,e,t,r){if(e.clearRect(0,0,n.width,n.height),!(!r||nM(r)))for(const i in r){const a=t.spaces[parseInt(i,10)];if(a){e.save(),e.beginPath();const o=Vn().game===3?18:12;e.arc(a.x,a.y,o,0,2*Math.PI),e.setLineDash([2,2]),e.lineWidth=2,e.fillStyle="rgba(47, 70, 95, 0.35)",e.strokeStyle="rgba(47, 70, 95, 1)",e.fill(),e.stroke(),e.restore()}}}function Ase(n,e,t){const r=Vn(),i=r.game===3?18:12;for(let a=0;a<t.length;a++){const o=r.spaces[t[a]];o&&(e.save(),e.beginPath(),e.arc(o.x,o.y,i,0,2*Math.PI),e.shadowColor="rgba(225, 225, 225, 1)",e.shadowBlur=2,e.fillStyle="rgba(255, 0, 0, 0.85)",e.fill(),e.restore())}}function fse(n,e,t){var s,l;const r=Vn(),i=j0(),a=r.game===3?18:12,o=jo(t.id,r,i);if(Bn(!!o),o.parameters){let u=0;for(const d of o.parameters){let h;switch(d.type){case an.Space:{const f=(s=t.parameterValues)==null?void 0:s[d.name];typeof f=="number"&&(h=[f])}break;case an.SpaceArray:{const f=(l=t.parameterValues)==null?void 0:l[d.name];Array.isArray(f)&&(h=f)}break}if(h)for(const f of h){const m=r.spaces[f];m&&(e.save(),e.beginPath(),e.arc(m.x,m.y,a,0,2*Math.PI),e.shadowColor="rgba(225, 225, 225, 1)",e.shadowBlur=2,e.fillStyle=`rgba(${WV(u).join(", ")}, 0.9)`,e.fill(),e.restore(),u++)}}}}function hse(n,e){if(n.events&&n.events.length)for(let t=0;t<n.events.length;t++){const r=n.events[t],i=jo(r.id,e,j0());if(!i)return Gn("eventErrorImg");if(i.parameters)for(let a=0;a<i.parameters.length;a++){const o=i.parameters[a];if(!tM(o.type)&&(!r.parameterValues||!r.parameterValues.hasOwnProperty(o.name)))return Gn("eventErrorImg")}}return Gn("eventImg")}const pse=()=>{const[n,e]=kc(),[t,r]=Ne.exports.useContext(m2),i=Hn(l=>al(l).bg.src),a=Hn(l=>l.app.overrideBg),o=Ne.exports.useRef(null);return Ne.exports.useEffect(()=>{const l=o.current,u=KV(n,e,t,r);l.style.transform=u,l.width=n,l.height=e},[n,e,t,r]),L("img",{ref:o,className:"editor_bg",alt:"Board Background",src:a||i})};let nA,Hl=-1;function mse(){nA||(nA=setInterval(Sse,800),fA(null))}function y4(){nA&&clearInterval(nA),nA=null,Hl=-1,fA(null)}function Sse(){const n=Vn(),e=n.animbg;if(!e||!e.length){y4();return}else Hl>=0&&Hl<e.length?(fA(e[Hl]),Hl++):Hl=-1;Hl===-1&&(fA(n.bg.src),Hl++)}const gse=()=>{const n=Ne.exports.useRef(null),e=ws(),[t,r]=kc(),i=Hn(kte);return XA(n,t,r),Ne.exports.useEffect(()=>{const a=n.current,o=a.getContext("2d");if(yN(a,o,e,!0),i)for(const s of i){const[l,u,d,h]=s;CN(o,l,u,d,h,!1)}},[e,i]),L("canvas",{ref:n,className:"editor_line_canvas"})},_se=()=>{const n=Ne.exports.useRef(null),e=ws(),[t,r]=kc(),i=Hn(zp);return XA(n,t,r),Ne.exports.useEffect(()=>{const a=n.current;ase(a,a.getContext("2d"),e,i)},[e,i]),L("canvas",{ref:n,className:"editor_association_canvas"})},xse=()=>{const n=Ne.exports.useRef(null),e=ws(),[t,r]=kc(),i=Hn(zp),a=Hn(i5),o=Hn(Ote);return XA(n,t,r),Ne.exports.useEffect(()=>{var u;const s=n.current,l=s.getContext("2d");if(dse(s,l,e,i),a&&Ase(s,l,a),o>=0){const d=(u=e.boardevents)==null?void 0:u[o];d&&fse(s,l,d)}},[e,i,a,o]),L("canvas",{ref:n,className:"editor_current_space_canvas"})},vse=()=>{const n=Ne.exports.useRef(null),e=ws(),[t,r]=kc(),i=Hn(a=>a.app.imagesLoaded);return XA(n,t,r),Ne.exports.useEffect(()=>{const a=n.current;i&&EN(a,a.getContext("2d"),e)},[e,i]),Ne.exports.useEffect(()=>{const a=n.current;if(a)return xN(a),()=>vN(a)},[]),L("canvas",{className:"editor_space_canvas",tabIndex:-1,ref:n,onDragOver:void 0})},wse=()=>{const n=Ne.exports.useRef(null),e=Ne.exports.useRef(!1),t=Hn(Ite);Ne.exports.useEffect(()=>{const a=n.current,o=a.getContext("2d");if((t||!t&&e.current)&&(o.clearRect(0,0,a.width,a.height),e.current=!1),t){const[s,l,u,d]=t;o.save(),o.beginPath(),o.fillStyle="rgba(47, 70, 95, 0.5)",o.strokeStyle="rgba(47, 70, 95, 1)",o.fillRect(Math.min(s,u),Math.min(l,d),Math.abs(s-u),Math.abs(l-d)),o.strokeRect(Math.min(s,u),Math.min(l,d),Math.abs(s-u),Math.abs(l-d)),o.restore(),e.current=!0}},[t]);const[r,i]=kc();return XA(n,r,i),Ne.exports.useEffect(()=>{const a=n.current;if(a)return xN(a),()=>vN(a)},[]),L("canvas",{className:"editor_space_canvas",tabIndex:-1,ref:n,onDragOver:void 0})},VN=Ne.exports.forwardRef((n,e)=>{const[t,r]=Ne.exports.useState(-1),i=Ne.exports.useRef(null),[a,o]=kc(),[s,l]=Ne.exports.useContext(m2),u=Ne.exports.useCallback(()=>{const g=i.current,_=KV(a,o,s,l);g.style.transform=_},[a,o,s,l]),d=Ne.exports.useCallback(g=>{r(g)},[]),h=Ne.exports.useCallback(()=>t>=0,[t]);Ne.exports.useImperativeHandle(e,()=>({renderContent:u,setRightClickMenu:d,rightClickOpen:h}),[u,d,h]),Ne.exports.useEffect(()=>{u()});const m=ws().spaces[t]||null;return L("div",{ref:i,className:"editor_menu_overlay",children:h()&&L(Eoe,{space:m,spaceIndex:t})})});VN.displayName="BoardOverlay";const DN=320,FN=240;function TN(n){let e=1,t=1;switch(n){case 1:case 2:break;case 3:e=.785,t=.805;break}const r=DN*e,i=FN*t;return{N64_WIDTH_ZOOMED:r,N64_HEIGHT_ZOOMED:i}}function Jv(n,e){const t=e.getContext("2d");t.lineWidth=1,t.strokeStyle="rgba(0, 0, 0, 0.5)";const{width:r,height:i}=n.bg,{N64_WIDTH_ZOOMED:a,N64_HEIGHT_ZOOMED:o}=TN(n.game);t.strokeRect(a/2,o/2,r-a,i-o)}const yse=()=>{const n=Ne.exports.useRef(null),e=Ne.exports.useRef(null),t=ws(),[r,i]=kc();XA(n,r,i),Ne.exports.useEffect(()=>{const s=n.current;Jv(t,s)},[t]),Ne.exports.useEffect(()=>{(async()=>{const s=await wN({renderCharacters:!0});e.current=s.canvas,Jv(t,e.current)})()},[t]);const a=Ne.exports.useCallback(s=>{const l=n.current,u=l.getContext("2d"),d=e.current;if(!d)return;const[h,f]=W4(l,s.clientX,s.clientY),{width:m,height:g}=t.bg,{N64_WIDTH_ZOOMED:_,N64_HEIGHT_ZOOMED:E}=TN(t.game);let x=Math.max(0,h-_/2),v=Math.max(0,f-E/2);const C=_,V=E;m-x<_&&(x=m-_),g-v<E&&(v=g-E),wt(`Viewing (${x}, ${v}) - (${x+C}, ${v+V})
Mouse: (${h}, ${f}`),u.drawImage(d,x,v,C,V,0,0,m,g);const D=m/DN,H=g/FN,R=12*H,j=16*D;u.fillStyle="black",u.fillRect(0,0,m,R),u.fillRect(m-j,0,j,g),u.fillRect(0,g-R,m,R),u.fillRect(0,0,j,g)},[t]),o=Ne.exports.useCallback(()=>{const s=n.current;s.getContext("2d").clearRect(0,0,s.width,s.height),Jv(t,s)},[t]);return L("canvas",{ref:n,className:"editor_telescope_viewer",onMouseMove:a,onMouseLeave:o})};let vp;const m2=Ne.exports.createContext([0,0]),Ese=()=>{const n=Ne.exports.useRef(null),[e,t]=Ne.exports.useState(0),[r,i]=Ne.exports.useState(0),a=Ne.exports.useMemo(()=>[e,r],[e,r]),o=Ne.exports.useCallback(()=>{const l=n.current;l&&(t(l.offsetWidth),i(l.offsetHeight))},[]);Ne.exports.useEffect(()=>(window.addEventListener("resize",o,!1),o(),()=>window.removeEventListener("resize",o)),[o]);const s=Hn(l=>l.app.currentAction===ce.TELESCOPE);return L("div",{ref:n,className:"editor",children:Xe(m2.Provider,{value:a,children:[L(pse,{}),L(gse,{}),L(_se,{}),L(xse,{}),L(vse,{}),L(wse,{}),L(VN,{ref:l=>vp=l}),s&&L(yse,{})]})})};function Qu(n){vp&&vp.setRightClickMenu(n)}function wp(){return vp?vp.rightClickOpen():!1}function bN(){return!!nA}const iR={renderConnections:yN,renderSpaces:EN};function KV(n,e,t,r){let i=Math.floor((t-n)/2);i=Math.max(0,i);let a=Math.floor((r-e)/2);return a=Math.max(0,a),`translateX(${i}px) translateY(${a}px)`}function XA(n,e,t){const[r,i]=Ne.exports.useContext(m2);Ne.exports.useLayoutEffect(()=>{const a=n.current,o=KV(e,t,r,i);a.style.transform=o,(a.width!==e||a.height!==t)&&(a.width=e,a.height=t)},[n,e,t,r,i])}function kc(){const n=Hn(t=>al(t).bg.width),e=Hn(t=>al(t).bg.height);return Ne.exports.useMemo(()=>[n,e],[n,e])}function Cse(n,e,t){for(let r=0;r<e*t;r++){let i=n[r];i=i&3233857728,i|=i>>>2,i|=i>>>2,i|=i>>>2,n[r]=i}}var Jn={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(RA,function(){var t=Array.prototype.slice;function r(y,T){T&&(y.prototype=Object.create(T.prototype)),y.prototype.constructor=y}function i(y){return l(y)?y:Ue(y)}r(a,i);function a(y){return u(y)?y:k(y)}r(o,i);function o(y){return d(y)?y:De(y)}r(s,i);function s(y){return l(y)&&!h(y)?y:we(y)}function l(y){return!!(y&&y[m])}function u(y){return!!(y&&y[g])}function d(y){return!!(y&&y[_])}function h(y){return u(y)||d(y)}function f(y){return!!(y&&y[E])}i.isIterable=l,i.isKeyed=u,i.isIndexed=d,i.isAssociative=h,i.isOrdered=f,i.Keyed=a,i.Indexed=o,i.Set=s;var m="@@__IMMUTABLE_ITERABLE__@@",g="@@__IMMUTABLE_KEYED__@@",_="@@__IMMUTABLE_INDEXED__@@",E="@@__IMMUTABLE_ORDERED__@@",x="delete",v=5,C=1<<v,V=C-1,D={},H={value:!1},R={value:!1};function j(y){return y.value=!1,y}function te(y){y&&(y.value=!0)}function $(){}function z(y,T){T=T||0;for(var W=Math.max(0,y.length-T),J=new Array(W),ae=0;ae<W;ae++)J[ae]=y[ae+T];return J}function I(y){return y.size===void 0&&(y.size=y.__iterate(P)),y.size}function q(y,T){if(typeof T!="number"){var W=T>>>0;if(""+W!==T||W===4294967295)return NaN;T=W}return T<0?I(y)+T:T}function P(){return!0}function ee(y,T,W){return(y===0||W!==void 0&&y<=-W)&&(T===void 0||W!==void 0&&T>=W)}function ue(y,T){return O(y,T,0)}function U(y,T){return O(y,T,T)}function O(y,T,W){return y===void 0?W:y<0?Math.max(0,T+y):T===void 0?y:Math.min(T,y)}var G=0,ne=1,se=2,ie=typeof Symbol=="function"&&Symbol.iterator,Re="@@iterator",Be=ie||Re;function Te(y){this.next=y}Te.prototype.toString=function(){return"[Iterator]"},Te.KEYS=G,Te.VALUES=ne,Te.ENTRIES=se,Te.prototype.inspect=Te.prototype.toSource=function(){return this.toString()},Te.prototype[Be]=function(){return this};function ye(y,T,W,J){var ae=y===0?T:y===1?W:[T,W];return J?J.value=ae:J={value:ae,done:!1},J}function We(){return{value:void 0,done:!0}}function at(y){return!!lt(y)}function Ke(y){return y&&typeof y.next=="function"}function tt(y){var T=lt(y);return T&&T.call(y)}function lt(y){var T=y&&(ie&&y[ie]||y[Re]);if(typeof T=="function")return T}function Ie(y){return y&&typeof y.length=="number"}r(Ue,i);function Ue(y){return y==null?Fe():l(y)?y.toSeq():rt(y)}Ue.of=function(){return Ue(arguments)},Ue.prototype.toSeq=function(){return this},Ue.prototype.toString=function(){return this.__toString("Seq {","}")},Ue.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Ue.prototype.__iterate=function(y,T){return ve(this,y,T,!0)},Ue.prototype.__iterator=function(y,T){return $e(this,y,T,!0)},r(k,Ue);function k(y){return y==null?Fe().toKeyedSeq():l(y)?u(y)?y.toSeq():y.fromEntrySeq():Le(y)}k.prototype.toKeyedSeq=function(){return this},r(De,Ue);function De(y){return y==null?Fe():l(y)?u(y)?y.entrySeq():y.toIndexedSeq():Pe(y)}De.of=function(){return De(arguments)},De.prototype.toIndexedSeq=function(){return this},De.prototype.toString=function(){return this.__toString("Seq [","]")},De.prototype.__iterate=function(y,T){return ve(this,y,T,!1)},De.prototype.__iterator=function(y,T){return $e(this,y,T,!1)},r(we,Ue);function we(y){return(y==null?Fe():l(y)?u(y)?y.entrySeq():y:Pe(y)).toSetSeq()}we.of=function(){return we(arguments)},we.prototype.toSetSeq=function(){return this},Ue.isSeq=Y,Ue.Keyed=k,Ue.Set=we,Ue.Indexed=De;var le="@@__IMMUTABLE_SEQ__@@";Ue.prototype[le]=!0,r(re,De);function re(y){this._array=y,this.size=y.length}re.prototype.get=function(y,T){return this.has(y)?this._array[q(this,y)]:T},re.prototype.__iterate=function(y,T){for(var W=this._array,J=W.length-1,ae=0;ae<=J;ae++)if(y(W[T?J-ae:ae],ae,this)===!1)return ae+1;return ae},re.prototype.__iterator=function(y,T){var W=this._array,J=W.length-1,ae=0;return new Te(function(){return ae>J?We():ye(y,ae,W[T?J-ae++:ae++])})},r(fe,k);function fe(y){var T=Object.keys(y);this._object=y,this._keys=T,this.size=T.length}fe.prototype.get=function(y,T){return T!==void 0&&!this.has(y)?T:this._object[y]},fe.prototype.has=function(y){return this._object.hasOwnProperty(y)},fe.prototype.__iterate=function(y,T){for(var W=this._object,J=this._keys,ae=J.length-1,me=0;me<=ae;me++){var Ve=J[T?ae-me:me];if(y(W[Ve],Ve,this)===!1)return me+1}return me},fe.prototype.__iterator=function(y,T){var W=this._object,J=this._keys,ae=J.length-1,me=0;return new Te(function(){var Ve=J[T?ae-me:me];return me++>ae?We():ye(y,Ve,W[Ve])})},fe.prototype[E]=!0,r(He,De);function He(y){this._iterable=y,this.size=y.length||y.size}He.prototype.__iterateUncached=function(y,T){if(T)return this.cacheResult().__iterate(y,T);var W=this._iterable,J=tt(W),ae=0;if(Ke(J))for(var me;!(me=J.next()).done&&y(me.value,ae++,this)!==!1;);return ae},He.prototype.__iteratorUncached=function(y,T){if(T)return this.cacheResult().__iterator(y,T);var W=this._iterable,J=tt(W);if(!Ke(J))return new Te(We);var ae=0;return new Te(function(){var me=J.next();return me.done?me:ye(y,ae++,me.value)})},r(oe,De);function oe(y){this._iterator=y,this._iteratorCache=[]}oe.prototype.__iterateUncached=function(y,T){if(T)return this.cacheResult().__iterate(y,T);for(var W=this._iterator,J=this._iteratorCache,ae=0;ae<J.length;)if(y(J[ae],ae++,this)===!1)return ae;for(var me;!(me=W.next()).done;){var Ve=me.value;if(J[ae]=Ve,y(Ve,ae++,this)===!1)break}return ae},oe.prototype.__iteratorUncached=function(y,T){if(T)return this.cacheResult().__iterator(y,T);var W=this._iterator,J=this._iteratorCache,ae=0;return new Te(function(){if(ae>=J.length){var me=W.next();if(me.done)return me;J[ae]=me.value}return ye(y,ae,J[ae++])})};function Y(y){return!!(y&&y[le])}var _e;function Fe(){return _e||(_e=new re([]))}function Le(y){var T=Array.isArray(y)?new re(y).fromEntrySeq():Ke(y)?new oe(y).fromEntrySeq():at(y)?new He(y).fromEntrySeq():typeof y=="object"?new fe(y):void 0;if(!T)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+y);return T}function Pe(y){var T=Ee(y);if(!T)throw new TypeError("Expected Array or iterable object of values: "+y);return T}function rt(y){var T=Ee(y)||typeof y=="object"&&new fe(y);if(!T)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+y);return T}function Ee(y){return Ie(y)?new re(y):Ke(y)?new oe(y):at(y)?new He(y):void 0}function ve(y,T,W,J){var ae=y._cache;if(ae){for(var me=ae.length-1,Ve=0;Ve<=me;Ve++){var je=ae[W?me-Ve:Ve];if(T(je[1],J?je[0]:Ve,y)===!1)return Ve+1}return Ve}return y.__iterateUncached(T,W)}function $e(y,T,W,J){var ae=y._cache;if(ae){var me=ae.length-1,Ve=0;return new Te(function(){var je=ae[W?me-Ve:Ve];return Ve++>me?We():ye(T,J?je[0]:Ve-1,je[1])})}return y.__iteratorUncached(T,W)}function _t(y,T){return T?gt(T,y,"",{"":y}):Ce(y)}function gt(y,T,W,J){return Array.isArray(T)?y.call(J,W,De(T).map(function(ae,me){return gt(y,ae,me,T)})):Ft(T)?y.call(J,W,k(T).map(function(ae,me){return gt(y,ae,me,T)})):T}function Ce(y){return Array.isArray(y)?De(y).map(Ce).toList():Ft(y)?k(y).map(Ce).toMap():y}function Ft(y){return y&&(y.constructor===Object||y.constructor===void 0)}function ht(y,T){if(y===T||y!==y&&T!==T)return!0;if(!y||!T)return!1;if(typeof y.valueOf=="function"&&typeof T.valueOf=="function"){if(y=y.valueOf(),T=T.valueOf(),y===T||y!==y&&T!==T)return!0;if(!y||!T)return!1}return!!(typeof y.equals=="function"&&typeof T.equals=="function"&&y.equals(T))}function Nt(y,T){if(y===T)return!0;if(!l(T)||y.size!==void 0&&T.size!==void 0&&y.size!==T.size||y.__hash!==void 0&&T.__hash!==void 0&&y.__hash!==T.__hash||u(y)!==u(T)||d(y)!==d(T)||f(y)!==f(T))return!1;if(y.size===0&&T.size===0)return!0;var W=!h(y);if(f(y)){var J=y.entries();return T.every(function(et,ot){var ct=J.next().value;return ct&&ht(ct[1],et)&&(W||ht(ct[0],ot))})&&J.next().done}var ae=!1;if(y.size===void 0)if(T.size===void 0)typeof y.cacheResult=="function"&&y.cacheResult();else{ae=!0;var me=y;y=T,T=me}var Ve=!0,je=T.__iterate(function(et,ot){if(W?!y.has(et):ae?!ht(et,y.get(ot,D)):!ht(y.get(ot,D),et))return Ve=!1,!1});return Ve&&y.size===je}r(Je,De);function Je(y,T){if(!(this instanceof Je))return new Je(y,T);if(this._value=y,this.size=T===void 0?1/0:Math.max(0,T),this.size===0){if(mt)return mt;mt=this}}Je.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Je.prototype.get=function(y,T){return this.has(y)?this._value:T},Je.prototype.includes=function(y){return ht(this._value,y)},Je.prototype.slice=function(y,T){var W=this.size;return ee(y,T,W)?this:new Je(this._value,U(T,W)-ue(y,W))},Je.prototype.reverse=function(){return this},Je.prototype.indexOf=function(y){return ht(this._value,y)?0:-1},Je.prototype.lastIndexOf=function(y){return ht(this._value,y)?this.size:-1},Je.prototype.__iterate=function(y,T){for(var W=0;W<this.size;W++)if(y(this._value,W,this)===!1)return W+1;return W},Je.prototype.__iterator=function(y,T){var W=this,J=0;return new Te(function(){return J<W.size?ye(y,J++,W._value):We()})},Je.prototype.equals=function(y){return y instanceof Je?ht(this._value,y._value):Nt(y)};var mt;function Xt(y,T){if(!y)throw new Error(T)}r(xt,De);function xt(y,T,W){if(!(this instanceof xt))return new xt(y,T,W);if(Xt(W!==0,"Cannot step a Range by 0"),y=y||0,T===void 0&&(T=1/0),W=W===void 0?1:Math.abs(W),T<y&&(W=-W),this._start=y,this._end=T,this._step=W,this.size=Math.max(0,Math.ceil((T-y)/W-1)+1),this.size===0){if(on)return on;on=this}}xt.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},xt.prototype.get=function(y,T){return this.has(y)?this._start+q(this,y)*this._step:T},xt.prototype.includes=function(y){var T=(y-this._start)/this._step;return T>=0&&T<this.size&&T===Math.floor(T)},xt.prototype.slice=function(y,T){return ee(y,T,this.size)?this:(y=ue(y,this.size),T=U(T,this.size),T<=y?new xt(0,0):new xt(this.get(y,this._end),this.get(T,this._end),this._step))},xt.prototype.indexOf=function(y){var T=y-this._start;if(T%this._step===0){var W=T/this._step;if(W>=0&&W<this.size)return W}return-1},xt.prototype.lastIndexOf=function(y){return this.indexOf(y)},xt.prototype.__iterate=function(y,T){for(var W=this.size-1,J=this._step,ae=T?this._start+W*J:this._start,me=0;me<=W;me++){if(y(ae,me,this)===!1)return me+1;ae+=T?-J:J}return me},xt.prototype.__iterator=function(y,T){var W=this.size-1,J=this._step,ae=T?this._start+W*J:this._start,me=0;return new Te(function(){var Ve=ae;return ae+=T?-J:J,me>W?We():ye(y,me++,Ve)})},xt.prototype.equals=function(y){return y instanceof xt?this._start===y._start&&this._end===y._end&&this._step===y._step:Nt(this,y)};var on;r(wn,i);function wn(){throw TypeError("Abstract")}r(On,wn);function On(){}r(V0,wn);function V0(){}r(X0,wn);function X0(){}wn.Keyed=On,wn.Indexed=V0,wn.Set=X0;var ki=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(T,W){T=T|0,W=W|0;var J=T&65535,ae=W&65535;return J*ae+((T>>>16)*ae+J*(W>>>16)<<16>>>0)|0};function na(y){return y>>>1&1073741824|y&3221225471}function $t(y){if(y===!1||y===null||y===void 0||typeof y.valueOf=="function"&&(y=y.valueOf(),y===!1||y===null||y===void 0))return 0;if(y===!0)return 1;var T=typeof y;if(T==="number"){var W=y|0;for(W!==y&&(W^=y*4294967295);y>4294967295;)y/=4294967295,W^=y;return na(W)}if(T==="string")return y.length>mn?Nr(y):xi(y);if(typeof y.hashCode=="function")return y.hashCode();if(T==="object")return gn(y);if(typeof y.toString=="function")return xi(y.toString());throw new Error("Value type "+T+" cannot be hashed.")}function Nr(y){var T=Tn[y];return T===void 0&&(T=xi(y),Sn===Cn&&(Sn=0,Tn={}),Sn++,Tn[y]=T),T}function xi(y){for(var T=0,W=0;W<y.length;W++)T=31*T+y.charCodeAt(W)|0;return na(T)}function gn(y){var T;if(st&&(T=Ze.get(y),T!==void 0)||(T=y[tn],T!==void 0)||!he&&(T=y.propertyIsEnumerable&&y.propertyIsEnumerable[tn],T!==void 0||(T=qe(y),T!==void 0)))return T;if(T=++ft,ft&1073741824&&(ft=0),st)Ze.set(y,T);else{if(Q!==void 0&&Q(y)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(he)Object.defineProperty(y,tn,{enumerable:!1,configurable:!1,writable:!1,value:T});else if(y.propertyIsEnumerable!==void 0&&y.propertyIsEnumerable===y.constructor.prototype.propertyIsEnumerable)y.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},y.propertyIsEnumerable[tn]=T;else if(y.nodeType!==void 0)y[tn]=T;else throw new Error("Unable to set a non-enumerable property on object.")}return T}var Q=Object.isExtensible,he=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function qe(y){if(y&&y.nodeType>0)switch(y.nodeType){case 1:return y.uniqueID;case 9:return y.documentElement&&y.documentElement.uniqueID}}var st=typeof WeakMap=="function",Ze;st&&(Ze=new WeakMap);var ft=0,tn="__immutablehash__";typeof Symbol=="function"&&(tn=Symbol(tn));var mn=16,Cn=255,Sn=0,Tn={};function hn(y){Xt(y!==1/0,"Cannot perform this action with an infinite size.")}r(jt,On);function jt(y){return y==null?E0():Xn(y)&&!f(y)?y:E0().withMutations(function(T){var W=a(y);hn(W.size),W.forEach(function(J,ae){return T.set(ae,J)})})}jt.prototype.toString=function(){return this.__toString("Map {","}")},jt.prototype.get=function(y,T){return this._root?this._root.get(0,void 0,y,T):T},jt.prototype.set=function(y,T){return Ni(this,y,T)},jt.prototype.setIn=function(y,T){return this.updateIn(y,D,function(){return T})},jt.prototype.remove=function(y){return Ni(this,y,D)},jt.prototype.deleteIn=function(y){return this.updateIn(y,function(){return D})},jt.prototype.update=function(y,T,W){return arguments.length===1?y(this):this.updateIn([y],T,W)},jt.prototype.updateIn=function(y,T,W){W||(W=T,T=void 0);var J=Zt(this,af(y),T,W);return J===D?void 0:J},jt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):E0()},jt.prototype.merge=function(){return ze(this,void 0,arguments)},jt.prototype.mergeWith=function(y){var T=t.call(arguments,1);return ze(this,y,T)},jt.prototype.mergeIn=function(y){var T=t.call(arguments,1);return this.updateIn(y,E0(),function(W){return typeof W.merge=="function"?W.merge.apply(W,T):T[T.length-1]})},jt.prototype.mergeDeep=function(){return ze(this,Ye,arguments)},jt.prototype.mergeDeepWith=function(y){var T=t.call(arguments,1);return ze(this,it(y),T)},jt.prototype.mergeDeepIn=function(y){var T=t.call(arguments,1);return this.updateIn(y,E0(),function(W){return typeof W.mergeDeep=="function"?W.mergeDeep.apply(W,T):T[T.length-1]})},jt.prototype.sort=function(y){return k0(ma(this,y))},jt.prototype.sortBy=function(y,T){return k0(ma(this,T,y))},jt.prototype.withMutations=function(y){var T=this.asMutable();return y(T),T.wasAltered()?T.__ensureOwner(this.__ownerID):this},jt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new $)},jt.prototype.asImmutable=function(){return this.__ensureOwner()},jt.prototype.wasAltered=function(){return this.__altered},jt.prototype.__iterator=function(y,T){return new Rt(this,y,T)},jt.prototype.__iterate=function(y,T){var W=this,J=0;return this._root&&this._root.iterate(function(ae){return J++,y(ae[1],ae[0],W)},T),J},jt.prototype.__ensureOwner=function(y){return y===this.__ownerID?this:y?Vr(this.size,this._root,y,this.__hash):(this.__ownerID=y,this.__altered=!1,this)};function Xn(y){return!!(y&&y[Jr])}jt.isMap=Xn;var Jr="@@__IMMUTABLE_MAP__@@",dn=jt.prototype;dn[Jr]=!0,dn[x]=dn.remove,dn.removeIn=dn.deleteIn;function oi(y,T){this.ownerID=y,this.entries=T}oi.prototype.get=function(y,T,W,J){for(var ae=this.entries,me=0,Ve=ae.length;me<Ve;me++)if(ht(W,ae[me][0]))return ae[me][1];return J},oi.prototype.update=function(y,T,W,J,ae,me,Ve){for(var je=ae===D,et=this.entries,ot=0,ct=et.length;ot<ct&&!ht(J,et[ot][0]);ot++);var Ot=ot<ct;if(Ot?et[ot][1]===ae:je)return this;if(te(Ve),(je||!Ot)&&te(me),!(je&&et.length===1)){if(!Ot&&!je&&et.length>=K0)return Ae(y,et,J,ae);var Ht=y&&y===this.ownerID,_n=Ht?et:z(et);return Ot?je?ot===ct-1?_n.pop():_n[ot]=_n.pop():_n[ot]=[J,ae]:_n.push([J,ae]),Ht?(this.entries=_n,this):new oi(y,_n)}};function m0(y,T,W){this.ownerID=y,this.bitmap=T,this.nodes=W}m0.prototype.get=function(y,T,W,J){T===void 0&&(T=$t(W));var ae=1<<((y===0?T:T>>>y)&V),me=this.bitmap;return(me&ae)===0?J:this.nodes[vn(me&ae-1)].get(y+v,T,W,J)},m0.prototype.update=function(y,T,W,J,ae,me,Ve){W===void 0&&(W=$t(J));var je=(T===0?W:W>>>T)&V,et=1<<je,ot=this.bitmap,ct=(ot&et)!==0;if(!ct&&ae===D)return this;var Ot=vn(ot&et-1),Ht=this.nodes,_n=ct?Ht[Ot]:void 0,Ln=b(_n,y,T+v,W,J,ae,me,Ve);if(Ln===_n)return this;if(!ct&&Ln&&Ht.length>=Na)return Me(y,Ht,ot,je,Ln);if(ct&&!Ln&&Ht.length===2&&M(Ht[Ot^1]))return Ht[Ot^1];if(ct&&Ln&&Ht.length===1&&M(Ln))return Ln;var C0=y&&y===this.ownerID,Gi=ct?Ln?ot:ot^et:ot|et,Wa=ct?Ln?zt(Ht,Ot,Ln,C0):yn(Ht,Ot,C0):qt(Ht,Ot,Ln,C0);return C0?(this.bitmap=Gi,this.nodes=Wa,this):new m0(y,Gi,Wa)};function Dn(y,T,W){this.ownerID=y,this.count=T,this.nodes=W}Dn.prototype.get=function(y,T,W,J){T===void 0&&(T=$t(W));var ae=(y===0?T:T>>>y)&V,me=this.nodes[ae];return me?me.get(y+v,T,W,J):J},Dn.prototype.update=function(y,T,W,J,ae,me,Ve){W===void 0&&(W=$t(J));var je=(T===0?W:W>>>T)&V,et=ae===D,ot=this.nodes,ct=ot[je];if(et&&!ct)return this;var Ot=b(ct,y,T+v,W,J,ae,me,Ve);if(Ot===ct)return this;var Ht=this.count;if(!ct)Ht++;else if(!Ot&&(Ht--,Ht<Zr))return xe(y,ot,Ht,je);var _n=y&&y===this.ownerID,Ln=zt(ot,je,Ot,_n);return _n?(this.count=Ht,this.nodes=Ln,this):new Dn(y,Ht,Ln)};function Ur(y,T,W){this.ownerID=y,this.keyHash=T,this.entries=W}Ur.prototype.get=function(y,T,W,J){for(var ae=this.entries,me=0,Ve=ae.length;me<Ve;me++)if(ht(W,ae[me][0]))return ae[me][1];return J},Ur.prototype.update=function(y,T,W,J,ae,me,Ve){W===void 0&&(W=$t(J));var je=ae===D;if(W!==this.keyHash)return je?this:(te(Ve),te(me),X(this,y,T,W,[J,ae]));for(var et=this.entries,ot=0,ct=et.length;ot<ct&&!ht(J,et[ot][0]);ot++);var Ot=ot<ct;if(Ot?et[ot][1]===ae:je)return this;if(te(Ve),(je||!Ot)&&te(me),je&&ct===2)return new en(y,this.keyHash,et[ot^1]);var Ht=y&&y===this.ownerID,_n=Ht?et:z(et);return Ot?je?ot===ct-1?_n.pop():_n[ot]=_n.pop():_n[ot]=[J,ae]:_n.push([J,ae]),Ht?(this.entries=_n,this):new Ur(y,this.keyHash,_n)};function en(y,T,W){this.ownerID=y,this.keyHash=T,this.entry=W}en.prototype.get=function(y,T,W,J){return ht(W,this.entry[0])?this.entry[1]:J},en.prototype.update=function(y,T,W,J,ae,me,Ve){var je=ae===D,et=ht(J,this.entry[0]);if(et?ae===this.entry[1]:je)return this;if(te(Ve),je){te(me);return}return et?y&&y===this.ownerID?(this.entry[1]=ae,this):new en(y,this.keyHash,[J,ae]):(te(me),X(this,y,T,$t(J),[J,ae]))},oi.prototype.iterate=Ur.prototype.iterate=function(y,T){for(var W=this.entries,J=0,ae=W.length-1;J<=ae;J++)if(y(W[T?ae-J:J])===!1)return!1},m0.prototype.iterate=Dn.prototype.iterate=function(y,T){for(var W=this.nodes,J=0,ae=W.length-1;J<=ae;J++){var me=W[T?ae-J:J];if(me&&me.iterate(y,T)===!1)return!1}},en.prototype.iterate=function(y,T){return y(this.entry)},r(Rt,Te);function Rt(y,T,W){this._type=T,this._reverse=W,this._stack=y._root&&vi(y._root)}Rt.prototype.next=function(){for(var y=this._type,T=this._stack;T;){var W=T.node,J=T.index++,ae;if(W.entry){if(J===0)return D0(y,W.entry)}else if(W.entries){if(ae=W.entries.length-1,J<=ae)return D0(y,W.entries[this._reverse?ae-J:J])}else if(ae=W.nodes.length-1,J<=ae){var me=W.nodes[this._reverse?ae-J:J];if(me){if(me.entry)return D0(y,me.entry);T=this._stack=vi(me,T)}continue}T=this._stack=this._stack.__prev}return We()};function D0(y,T){return ye(y,T[0],T[1])}function vi(y,T){return{node:y,index:0,__prev:T}}function Vr(y,T,W,J){var ae=Object.create(dn);return ae.size=y,ae._root=T,ae.__ownerID=W,ae.__hash=J,ae.__altered=!1,ae}var sn;function E0(){return sn||(sn=Vr(0))}function Ni(y,T,W){var J,ae;if(y._root){var me=j(H),Ve=j(R);if(J=b(y._root,y.__ownerID,0,void 0,T,W,me,Ve),!Ve.value)return y;ae=y.size+(me.value?W===D?-1:1:0)}else{if(W===D)return y;ae=1,J=new oi(y.__ownerID,[[T,W]])}return y.__ownerID?(y.size=ae,y._root=J,y.__hash=void 0,y.__altered=!0,y):J?Vr(ae,J):E0()}function b(y,T,W,J,ae,me,Ve,je){return y?y.update(T,W,J,ae,me,Ve,je):me===D?y:(te(je),te(Ve),new en(T,J,[ae,me]))}function M(y){return y.constructor===en||y.constructor===Ur}function X(y,T,W,J,ae){if(y.keyHash===J)return new Ur(T,J,[y.entry,ae]);var me=(W===0?y.keyHash:y.keyHash>>>W)&V,Ve=(W===0?J:J>>>W)&V,je,et=me===Ve?[X(y,T,W+v,J,ae)]:(je=new en(T,J,ae),me<Ve?[y,je]:[je,y]);return new m0(T,1<<me|1<<Ve,et)}function Ae(y,T,W,J){y||(y=new $);for(var ae=new en(y,$t(W),[W,J]),me=0;me<T.length;me++){var Ve=T[me];ae=ae.update(y,0,void 0,Ve[0],Ve[1])}return ae}function xe(y,T,W,J){for(var ae=0,me=0,Ve=new Array(W),je=0,et=1,ot=T.length;je<ot;je++,et<<=1){var ct=T[je];ct!==void 0&&je!==J&&(ae|=et,Ve[me++]=ct)}return new m0(y,ae,Ve)}function Me(y,T,W,J,ae){for(var me=0,Ve=new Array(C),je=0;W!==0;je++,W>>>=1)Ve[je]=W&1?T[me++]:void 0;return Ve[J]=ae,new Dn(y,me+1,Ve)}function ze(y,T,W){for(var J=[],ae=0;ae<W.length;ae++){var me=W[ae],Ve=a(me);l(me)||(Ve=Ve.map(function(je){return _t(je)})),J.push(Ve)}return Gt(y,T,J)}function Ye(y,T,W){return y&&y.mergeDeep&&l(T)?y.mergeDeep(T):ht(y,T)?y:T}function it(y){return function(T,W,J){if(T&&T.mergeDeepWith&&l(W))return T.mergeDeepWith(y,W);var ae=y(T,W,J);return ht(T,ae)?T:ae}}function Gt(y,T,W){return W=W.filter(function(J){return J.size!==0}),W.length===0?y:y.size===0&&!y.__ownerID&&W.length===1?y.constructor(W[0]):y.withMutations(function(J){for(var ae=T?function(Ve,je){J.update(je,D,function(et){return et===D?Ve:T(et,Ve,je)})}:function(Ve,je){J.set(je,Ve)},me=0;me<W.length;me++)W[me].forEach(ae)})}function Zt(y,T,W,J){var ae=y===D,me=T.next();if(me.done){var Ve=ae?W:y,je=J(Ve);return je===Ve?y:je}Xt(ae||y&&y.set,"invalid keyPath");var et=me.value,ot=ae?D:y.get(et,D),ct=Zt(ot,T,W,J);return ct===ot?y:ct===D?y.remove(et):(ae?E0():y).set(et,ct)}function vn(y){return y=y-(y>>1&1431655765),y=(y&858993459)+(y>>2&858993459),y=y+(y>>4)&252645135,y=y+(y>>8),y=y+(y>>16),y&127}function zt(y,T,W,J){var ae=J?y:z(y);return ae[T]=W,ae}function qt(y,T,W,J){var ae=y.length+1;if(J&&T+1===ae)return y[T]=W,y;for(var me=new Array(ae),Ve=0,je=0;je<ae;je++)je===T?(me[je]=W,Ve=-1):me[je]=y[je+Ve];return me}function yn(y,T,W){var J=y.length-1;if(W&&T===J)return y.pop(),y;for(var ae=new Array(J),me=0,Ve=0;Ve<J;Ve++)Ve===T&&(me=1),ae[Ve]=y[Ve+me];return ae}var K0=C/4,Na=C/2,Zr=C/4;r(jn,V0);function jn(y){var T=YA();if(y==null)return T;if(mr(y))return y;var W=o(y),J=W.size;return J===0?T:(hn(J),J>0&&J<C?pl(0,J,v,null,new c0(W.toArray())):T.withMutations(function(ae){ae.setSize(J),W.forEach(function(me,Ve){return ae.set(Ve,me)})}))}jn.of=function(){return this(arguments)},jn.prototype.toString=function(){return this.__toString("List [","]")},jn.prototype.get=function(y,T){if(y=q(this,y),y>=0&&y<this.size){y+=this._origin;var W=_m(this,y);return W&&W.array[y&V]}return T},jn.prototype.set=function(y,T){return N2(this,y,T)},jn.prototype.remove=function(y){return this.has(y)?y===0?this.shift():y===this.size-1?this.pop():this.splice(y,1):this},jn.prototype.insert=function(y,T){return this.splice(y,0,T)},jn.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=v,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):YA()},jn.prototype.push=function(){var y=arguments,T=this.size;return this.withMutations(function(W){Ko(W,0,T+y.length);for(var J=0;J<y.length;J++)W.set(T+J,y[J])})},jn.prototype.pop=function(){return Ko(this,0,-1)},jn.prototype.unshift=function(){var y=arguments;return this.withMutations(function(T){Ko(T,-y.length);for(var W=0;W<y.length;W++)T.set(W,y[W])})},jn.prototype.shift=function(){return Ko(this,1)},jn.prototype.merge=function(){return fd(this,void 0,arguments)},jn.prototype.mergeWith=function(y){var T=t.call(arguments,1);return fd(this,y,T)},jn.prototype.mergeDeep=function(){return fd(this,Ye,arguments)},jn.prototype.mergeDeepWith=function(y){var T=t.call(arguments,1);return fd(this,it(y),T)},jn.prototype.setSize=function(y){return Ko(this,0,y)},jn.prototype.slice=function(y,T){var W=this.size;return ee(y,T,W)?this:Ko(this,ue(y,W),U(T,W))},jn.prototype.__iterator=function(y,T){var W=0,J=gm(this,T);return new Te(function(){var ae=J();return ae===Uc?We():ye(y,W++,ae)})},jn.prototype.__iterate=function(y,T){for(var W=0,J=gm(this,T),ae;(ae=J())!==Uc&&y(ae,W++,this)!==!1;);return W},jn.prototype.__ensureOwner=function(y){return y===this.__ownerID?this:y?pl(this._origin,this._capacity,this._level,this._root,this._tail,y,this.__hash):(this.__ownerID=y,this)};function mr(y){return!!(y&&y[wi])}jn.isList=mr;var wi="@@__IMMUTABLE_LIST__@@",O0=jn.prototype;O0[wi]=!0,O0[x]=O0.remove,O0.setIn=dn.setIn,O0.deleteIn=O0.removeIn=dn.removeIn,O0.update=dn.update,O0.updateIn=dn.updateIn,O0.mergeIn=dn.mergeIn,O0.mergeDeepIn=dn.mergeDeepIn,O0.withMutations=dn.withMutations,O0.asMutable=dn.asMutable,O0.asImmutable=dn.asImmutable,O0.wasAltered=dn.wasAltered;function c0(y,T){this.array=y,this.ownerID=T}c0.prototype.removeBefore=function(y,T,W){if(W===T?1<<T:this.array.length===0)return this;var J=W>>>T&V;if(J>=this.array.length)return new c0([],y);var ae=J===0,me;if(T>0){var Ve=this.array[J];if(me=Ve&&Ve.removeBefore(y,T-v,W),me===Ve&&ae)return this}if(ae&&!me)return this;var je=ja(this,y);if(!ae)for(var et=0;et<J;et++)je.array[et]=void 0;return me&&(je.array[J]=me),je},c0.prototype.removeAfter=function(y,T,W){if(W===(T?1<<T:0)||this.array.length===0)return this;var J=W-1>>>T&V;if(J>=this.array.length)return this;var ae;if(T>0){var me=this.array[J];if(ae=me&&me.removeAfter(y,T-v,W),ae===me&&J===this.array.length-1)return this}var Ve=ja(this,y);return Ve.array.splice(J+1),ae&&(Ve.array[J]=ae),Ve};var Uc={};function gm(y,T){var W=y._origin,J=y._capacity,ae=jc(J),me=y._tail;return Ve(y._root,y._level,0);function Ve(ot,ct,Ot){return ct===0?je(ot,Ot):et(ot,ct,Ot)}function je(ot,ct){var Ot=ct===ae?me&&me.array:ot&&ot.array,Ht=ct>W?0:W-ct,_n=J-ct;return _n>C&&(_n=C),function(){if(Ht===_n)return Uc;var Ln=T?--_n:Ht++;return Ot&&Ot[Ln]}}function et(ot,ct,Ot){var Ht,_n=ot&&ot.array,Ln=Ot>W?0:W-Ot>>ct,C0=(J-Ot>>ct)+1;return C0>C&&(C0=C),function(){do{if(Ht){var Gi=Ht();if(Gi!==Uc)return Gi;Ht=null}if(Ln===C0)return Uc;var Wa=T?--C0:Ln++;Ht=Ve(_n&&_n[Wa],ct-v,Ot+(Wa<<ct))}while(!0)}}}function pl(y,T,W,J,ae,me,Ve){var je=Object.create(O0);return je.size=T-y,je._origin=y,je._capacity=T,je._level=W,je._root=J,je._tail=ae,je.__ownerID=me,je.__hash=Ve,je.__altered=!1,je}var Ua;function YA(){return Ua||(Ua=pl(0,0,v))}function N2(y,T,W){if(T=q(y,T),T!==T)return y;if(T>=y.size||T<0)return y.withMutations(function(Ve){T<0?Ko(Ve,T).set(0,W):Ko(Ve,0,T+1).set(T,W)});T+=y._origin;var J=y._tail,ae=y._root,me=j(R);return T>=jc(y._capacity)?J=ml(J,y.__ownerID,0,T,W,me):ae=ml(ae,y.__ownerID,y._level,T,W,me),me.value?y.__ownerID?(y._root=ae,y._tail=J,y.__hash=void 0,y.__altered=!0,y):pl(y._origin,y._capacity,y._level,ae,J):y}function ml(y,T,W,J,ae,me){var Ve=J>>>W&V,je=y&&Ve<y.array.length;if(!je&&ae===void 0)return y;var et;if(W>0){var ot=y&&y.array[Ve],ct=ml(ot,T,W-v,J,ae,me);return ct===ot?y:(et=ja(y,T),et.array[Ve]=ct,et)}return je&&y.array[Ve]===ae?y:(te(me),et=ja(y,T),ae===void 0&&Ve===et.array.length-1?et.array.pop():et.array[Ve]=ae,et)}function ja(y,T){return T&&y&&T===y.ownerID?y:new c0(y?y.array.slice():[],T)}function _m(y,T){if(T>=jc(y._capacity))return y._tail;if(T<1<<y._level+v){for(var W=y._root,J=y._level;W&&J>0;)W=W.array[T>>>J&V],J-=v;return W}}function Ko(y,T,W){T!==void 0&&(T=T|0),W!==void 0&&(W=W|0);var J=y.__ownerID||new $,ae=y._origin,me=y._capacity,Ve=ae+T,je=W===void 0?me:W<0?me+W:ae+W;if(Ve===ae&&je===me)return y;if(Ve>=je)return y.clear();for(var et=y._level,ot=y._root,ct=0;Ve+ct<0;)ot=new c0(ot&&ot.array.length?[void 0,ot]:[],J),et+=v,ct+=1<<et;ct&&(Ve+=ct,ae+=ct,je+=ct,me+=ct);for(var Ot=jc(me),Ht=jc(je);Ht>=1<<et+v;)ot=new c0(ot&&ot.array.length?[ot]:[],J),et+=v;var _n=y._tail,Ln=Ht<Ot?_m(y,je-1):Ht>Ot?new c0([],J):_n;if(_n&&Ht>Ot&&Ve<me&&_n.array.length){ot=ja(ot,J);for(var C0=ot,Gi=et;Gi>v;Gi-=v){var Wa=Ot>>>Gi&V;C0=C0.array[Wa]=ja(C0.array[Wa],J)}C0.array[Ot>>>v&V]=_n}if(je<me&&(Ln=Ln&&Ln.removeAfter(J,0,je)),Ve>=Ht)Ve-=Ht,je-=Ht,et=v,ot=null,Ln=Ln&&Ln.removeBefore(J,0,Ve);else if(Ve>ae||Ht<Ot){for(ct=0;ot;){var Cd=Ve>>>et&V;if(Cd!==Ht>>>et&V)break;Cd&&(ct+=(1<<et)*Cd),et-=v,ot=ot.array[Cd]}ot&&Ve>ae&&(ot=ot.removeBefore(J,et,Ve-ct)),ot&&Ht<Ot&&(ot=ot.removeAfter(J,et,Ht-ct)),ct&&(Ve-=ct,je-=ct)}return y.__ownerID?(y.size=je-Ve,y._origin=Ve,y._capacity=je,y._level=et,y._root=ot,y._tail=Ln,y.__hash=void 0,y.__altered=!0,y):pl(Ve,je,et,ot,Ln)}function fd(y,T,W){for(var J=[],ae=0,me=0;me<W.length;me++){var Ve=W[me],je=o(Ve);je.size>ae&&(ae=je.size),l(Ve)||(je=je.map(function(et){return _t(et)})),J.push(je)}return ae>y.size&&(y=y.setSize(ae)),Gt(y,T,J)}function jc(y){return y<C?0:y-1>>>v<<v}r(k0,jt);function k0(y){return y==null?Gc():qA(y)?y:Gc().withMutations(function(T){var W=a(y);hn(W.size),W.forEach(function(J,ae){return T.set(ae,J)})})}k0.of=function(){return this(arguments)},k0.prototype.toString=function(){return this.__toString("OrderedMap {","}")},k0.prototype.get=function(y,T){var W=this._map.get(y);return W!==void 0?this._list.get(W)[1]:T},k0.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Gc()},k0.prototype.set=function(y,T){return Hc(this,y,T)},k0.prototype.remove=function(y){return Hc(this,y,D)},k0.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},k0.prototype.__iterate=function(y,T){var W=this;return this._list.__iterate(function(J){return J&&y(J[1],J[0],W)},T)},k0.prototype.__iterator=function(y,T){return this._list.fromEntrySeq().__iterator(y,T)},k0.prototype.__ensureOwner=function(y){if(y===this.__ownerID)return this;var T=this._map.__ensureOwner(y),W=this._list.__ensureOwner(y);return y?QA(T,W,y,this.__hash):(this.__ownerID=y,this._map=T,this._list=W,this)};function qA(y){return Xn(y)&&f(y)}k0.isOrderedMap=qA,k0.prototype[E]=!0,k0.prototype[x]=k0.prototype.remove;function QA(y,T,W,J){var ae=Object.create(k0.prototype);return ae.size=y?y.size:0,ae._map=y,ae._list=T,ae.__ownerID=W,ae.__hash=J,ae}var JA;function Gc(){return JA||(JA=QA(E0(),YA()))}function Hc(y,T,W){var J=y._map,ae=y._list,me=J.get(T),Ve=me!==void 0,je,et;if(W===D){if(!Ve)return y;ae.size>=C&&ae.size>=J.size*2?(et=ae.filter(function(ot,ct){return ot!==void 0&&me!==ct}),je=et.toKeyedSeq().map(function(ot){return ot[0]}).flip().toMap(),y.__ownerID&&(je.__ownerID=et.__ownerID=y.__ownerID)):(je=J.remove(T),et=me===ae.size-1?ae.pop():ae.set(me,void 0))}else if(Ve){if(W===ae.get(me)[1])return y;je=J,et=ae.set(me,[T,W])}else je=J.set(T,ae.size),et=ae.set(ae.size,[T,W]);return y.__ownerID?(y.size=je.size,y._map=je,y._list=et,y.__hash=void 0,y):QA(je,et)}r(si,k);function si(y,T){this._iter=y,this._useKeys=T,this.size=y.size}si.prototype.get=function(y,T){return this._iter.get(y,T)},si.prototype.has=function(y){return this._iter.has(y)},si.prototype.valueSeq=function(){return this._iter.valueSeq()},si.prototype.reverse=function(){var y=this,T=hd(this,!0);return this._useKeys||(T.valueSeq=function(){return y._iter.toSeq().reverse()}),T},si.prototype.map=function(y,T){var W=this,J=xm(this,y,T);return this._useKeys||(J.valueSeq=function(){return W._iter.toSeq().map(y,T)}),J},si.prototype.__iterate=function(y,T){var W=this,J;return this._iter.__iterate(this._useKeys?function(ae,me){return y(ae,me,W)}:(J=T?nf(this):0,function(ae){return y(ae,T?--J:J++,W)}),T)},si.prototype.__iterator=function(y,T){if(this._useKeys)return this._iter.__iterator(y,T);var W=this._iter.__iterator(ne,T),J=T?nf(this):0;return new Te(function(){var ae=W.next();return ae.done?ae:ye(y,T?--J:J++,ae.value,ae)})},si.prototype[E]=!0,r(Yo,De);function Yo(y){this._iter=y,this.size=y.size}Yo.prototype.includes=function(y){return this._iter.includes(y)},Yo.prototype.__iterate=function(y,T){var W=this,J=0;return this._iter.__iterate(function(ae){return y(ae,J++,W)},T)},Yo.prototype.__iterator=function(y,T){var W=this._iter.__iterator(ne,T),J=0;return new Te(function(){var ae=W.next();return ae.done?ae:ye(y,J++,ae.value,ae)})},r(Es,we);function Es(y){this._iter=y,this.size=y.size}Es.prototype.has=function(y){return this._iter.includes(y)},Es.prototype.__iterate=function(y,T){var W=this;return this._iter.__iterate(function(J){return y(J,J,W)},T)},Es.prototype.__iterator=function(y,T){var W=this._iter.__iterator(ne,T);return new Te(function(){var J=W.next();return J.done?J:ye(y,J.value,J.value,J)})},r(Cs,k);function Cs(y){this._iter=y,this.size=y.size}Cs.prototype.entrySeq=function(){return this._iter.toSeq()},Cs.prototype.__iterate=function(y,T){var W=this;return this._iter.__iterate(function(J){if(J){tf(J);var ae=l(J);return y(ae?J.get(1):J[1],ae?J.get(0):J[0],W)}},T)},Cs.prototype.__iterator=function(y,T){var W=this._iter.__iterator(ne,T);return new Te(function(){for(;;){var J=W.next();if(J.done)return J;var ae=J.value;if(ae){tf(ae);var me=l(ae);return ye(y,me?ae.get(0):ae[0],me?ae.get(1):ae[1],J)}}})},Yo.prototype.cacheResult=si.prototype.cacheResult=Es.prototype.cacheResult=Cs.prototype.cacheResult=rf;function zc(y){var T=Ha(y);return T._iter=y,T.size=y.size,T.flip=function(){return y},T.reverse=function(){var W=y.reverse.apply(this);return W.flip=function(){return y.reverse()},W},T.has=function(W){return y.includes(W)},T.includes=function(W){return y.has(W)},T.cacheResult=rf,T.__iterateUncached=function(W,J){var ae=this;return y.__iterate(function(me,Ve){return W(Ve,me,ae)!==!1},J)},T.__iteratorUncached=function(W,J){if(W===se){var ae=y.__iterator(W,J);return new Te(function(){var me=ae.next();if(!me.done){var Ve=me.value[0];me.value[0]=me.value[1],me.value[1]=Ve}return me})}return y.__iterator(W===ne?G:ne,J)},T}function xm(y,T,W){var J=Ha(y);return J.size=y.size,J.has=function(ae){return y.has(ae)},J.get=function(ae,me){var Ve=y.get(ae,D);return Ve===D?me:T.call(W,Ve,ae,y)},J.__iterateUncached=function(ae,me){var Ve=this;return y.__iterate(function(je,et,ot){return ae(T.call(W,je,et,ot),et,Ve)!==!1},me)},J.__iteratorUncached=function(ae,me){var Ve=y.__iterator(se,me);return new Te(function(){var je=Ve.next();if(je.done)return je;var et=je.value,ot=et[0];return ye(ae,ot,T.call(W,et[1],ot,y),je)})},J}function hd(y,T){var W=Ha(y);return W._iter=y,W.size=y.size,W.reverse=function(){return y},y.flip&&(W.flip=function(){var J=zc(y);return J.reverse=function(){return y.flip()},J}),W.get=function(J,ae){return y.get(T?J:-1-J,ae)},W.has=function(J){return y.has(T?J:-1-J)},W.includes=function(J){return y.includes(J)},W.cacheResult=rf,W.__iterate=function(J,ae){var me=this;return y.__iterate(function(Ve,je){return J(Ve,je,me)},!ae)},W.__iterator=function(J,ae){return y.__iterator(J,!ae)},W}function ra(y,T,W,J){var ae=Ha(y);return J&&(ae.has=function(me){var Ve=y.get(me,D);return Ve!==D&&!!T.call(W,Ve,me,y)},ae.get=function(me,Ve){var je=y.get(me,D);return je!==D&&T.call(W,je,me,y)?je:Ve}),ae.__iterateUncached=function(me,Ve){var je=this,et=0;return y.__iterate(function(ot,ct,Ot){if(T.call(W,ot,ct,Ot))return et++,me(ot,J?ct:et-1,je)},Ve),et},ae.__iteratorUncached=function(me,Ve){var je=y.__iterator(se,Ve),et=0;return new Te(function(){for(;;){var ot=je.next();if(ot.done)return ot;var ct=ot.value,Ot=ct[0],Ht=ct[1];if(T.call(W,Ht,Ot,y))return ye(me,J?Ot:et++,Ht,ot)}})},ae}function U2(y,T,W){var J=jt().asMutable();return y.__iterate(function(ae,me){J.update(T.call(W,ae,me,y),0,function(Ve){return Ve+1})}),J.asImmutable()}function j2(y,T,W){var J=u(y),ae=(f(y)?k0():jt()).asMutable();y.__iterate(function(Ve,je){ae.update(T.call(W,Ve,je,y),function(et){return et=et||[],et.push(J?[je,Ve]:Ve),et})});var me=ym(y);return ae.map(function(Ve){return u0(y,me(Ve))})}function Wc(y,T,W,J){var ae=y.size;if(T!==void 0&&(T=T|0),W!==void 0&&(W=W|0),ee(T,W,ae))return y;var me=ue(T,ae),Ve=U(W,ae);if(me!==me||Ve!==Ve)return Wc(y.toSeq().cacheResult(),T,W,J);var je=Ve-me,et;je===je&&(et=je<0?0:je);var ot=Ha(y);return ot.size=et===0?et:y.size&&et||void 0,!J&&Y(y)&&et>=0&&(ot.get=function(ct,Ot){return ct=q(this,ct),ct>=0&&ct<et?y.get(ct+me,Ot):Ot}),ot.__iterateUncached=function(ct,Ot){var Ht=this;if(et===0)return 0;if(Ot)return this.cacheResult().__iterate(ct,Ot);var _n=0,Ln=!0,C0=0;return y.__iterate(function(Gi,Wa){if(!(Ln&&(Ln=_n++<me)))return C0++,ct(Gi,J?Wa:C0-1,Ht)!==!1&&C0!==et}),C0},ot.__iteratorUncached=function(ct,Ot){if(et!==0&&Ot)return this.cacheResult().__iterator(ct,Ot);var Ht=et!==0&&y.__iterator(ct,Ot),_n=0,Ln=0;return new Te(function(){for(;_n++<me;)Ht.next();if(++Ln>et)return We();var C0=Ht.next();return J||ct===ne?C0:ct===G?ye(ct,Ln-1,void 0,C0):ye(ct,Ln-1,C0.value[1],C0)})},ot}function vm(y,T,W){var J=Ha(y);return J.__iterateUncached=function(ae,me){var Ve=this;if(me)return this.cacheResult().__iterate(ae,me);var je=0;return y.__iterate(function(et,ot,ct){return T.call(W,et,ot,ct)&&++je&&ae(et,ot,Ve)}),je},J.__iteratorUncached=function(ae,me){var Ve=this;if(me)return this.cacheResult().__iterator(ae,me);var je=y.__iterator(se,me),et=!0;return new Te(function(){if(!et)return We();var ot=je.next();if(ot.done)return ot;var ct=ot.value,Ot=ct[0],Ht=ct[1];return T.call(W,Ht,Ot,Ve)?ae===se?ot:ye(ae,Ot,Ht,ot):(et=!1,We())})},J}function go(y,T,W,J){var ae=Ha(y);return ae.__iterateUncached=function(me,Ve){var je=this;if(Ve)return this.cacheResult().__iterate(me,Ve);var et=!0,ot=0;return y.__iterate(function(ct,Ot,Ht){if(!(et&&(et=T.call(W,ct,Ot,Ht))))return ot++,me(ct,J?Ot:ot-1,je)}),ot},ae.__iteratorUncached=function(me,Ve){var je=this;if(Ve)return this.cacheResult().__iterator(me,Ve);var et=y.__iterator(se,Ve),ot=!0,ct=0;return new Te(function(){var Ot,Ht,_n;do{if(Ot=et.next(),Ot.done)return J||me===ne?Ot:me===G?ye(me,ct++,void 0,Ot):ye(me,ct++,Ot.value[1],Ot);var Ln=Ot.value;Ht=Ln[0],_n=Ln[1],ot&&(ot=T.call(W,_n,Ht,je))}while(ot);return me===se?Ot:ye(me,Ht,_n,Ot)})},ae}function ZA(y,T){var W=u(y),J=[y].concat(T).map(function(Ve){return l(Ve)?W&&(Ve=a(Ve)):Ve=W?Le(Ve):Pe(Array.isArray(Ve)?Ve:[Ve]),Ve}).filter(function(Ve){return Ve.size!==0});if(J.length===0)return y;if(J.length===1){var ae=J[0];if(ae===y||W&&u(ae)||d(y)&&d(ae))return ae}var me=new re(J);return W?me=me.toKeyedSeq():d(y)||(me=me.toSetSeq()),me=me.flatten(!0),me.size=J.reduce(function(Ve,je){if(Ve!==void 0){var et=je.size;if(et!==void 0)return Ve+et}},0),me}function Ga(y,T,W){var J=Ha(y);return J.__iterateUncached=function(ae,me){var Ve=0,je=!1;function et(ot,ct){var Ot=this;ot.__iterate(function(Ht,_n){return(!T||ct<T)&&l(Ht)?et(Ht,ct+1):ae(Ht,W?_n:Ve++,Ot)===!1&&(je=!0),!je},me)}return et(y,0),Ve},J.__iteratorUncached=function(ae,me){var Ve=y.__iterator(ae,me),je=[],et=0;return new Te(function(){for(;Ve;){var ot=Ve.next();if(ot.done!==!1){Ve=je.pop();continue}var ct=ot.value;if(ae===se&&(ct=ct[1]),(!T||je.length<T)&&l(ct))je.push(Ve),Ve=ct.__iterator(ae,me);else return W?ot:ye(ae,et++,ct,ot)}return We()})},J}function pd(y,T,W){var J=ym(y);return y.toSeq().map(function(ae,me){return J(T.call(W,ae,me,y))}).flatten(!0)}function $A(y,T){var W=Ha(y);return W.size=y.size&&y.size*2-1,W.__iterateUncached=function(J,ae){var me=this,Ve=0;return y.__iterate(function(je,et){return(!Ve||J(T,Ve++,me)!==!1)&&J(je,Ve++,me)!==!1},ae),Ve},W.__iteratorUncached=function(J,ae){var me=y.__iterator(ne,ae),Ve=0,je;return new Te(function(){return(!je||Ve%2)&&(je=me.next(),je.done)?je:Ve%2?ye(J,Ve++,T):ye(J,Ve++,je.value,je)})},W}function ma(y,T,W){T||(T=Em);var J=u(y),ae=0,me=y.toSeq().map(function(Ve,je){return[je,Ve,ae++,W?W(Ve,je,y):Ve]}).toArray();return me.sort(function(Ve,je){return T(Ve[3],je[3])||Ve[2]-je[2]}).forEach(J?function(Ve,je){me[je].length=2}:function(Ve,je){me[je]=Ve[1]}),J?k(me):d(y)?De(me):we(me)}function md(y,T,W){if(T||(T=Em),W){var J=y.toSeq().map(function(ae,me){return[ae,W(ae,me,y)]}).reduce(function(ae,me){return wm(T,ae[1],me[1])?me:ae});return J&&J[0]}else return y.reduce(function(ae,me){return wm(T,ae,me)?me:ae})}function wm(y,T,W){var J=y(W,T);return J===0&&W!==T&&(W==null||W!==W)||J>0}function ef(y,T,W){var J=Ha(y);return J.size=new re(W).map(function(ae){return ae.size}).min(),J.__iterate=function(ae,me){for(var Ve=this.__iterator(ne,me),je,et=0;!(je=Ve.next()).done&&ae(je.value,et++,this)!==!1;);return et},J.__iteratorUncached=function(ae,me){var Ve=W.map(function(ot){return ot=i(ot),tt(me?ot.reverse():ot)}),je=0,et=!1;return new Te(function(){var ot;return et||(ot=Ve.map(function(ct){return ct.next()}),et=ot.some(function(ct){return ct.done})),et?We():ye(ae,je++,T.apply(null,ot.map(function(ct){return ct.value})))})},J}function u0(y,T){return Y(y)?T:y.constructor(T)}function tf(y){if(y!==Object(y))throw new TypeError("Expected [K, V] tuple: "+y)}function nf(y){return hn(y.size),I(y)}function ym(y){return u(y)?a:d(y)?o:s}function Ha(y){return Object.create((u(y)?k:d(y)?De:we).prototype)}function rf(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Ue.prototype.cacheResult.call(this)}function Em(y,T){return y>T?1:y<T?-1:0}function af(y){var T=tt(y);if(!T){if(!Ie(y))throw new TypeError("Expected iterable or array-like: "+y);T=tt(i(y))}return T}r(Ui,On);function Ui(y,T){var W,J=function(Ve){if(Ve instanceof J)return Ve;if(!(this instanceof J))return new J(Ve);if(!W){W=!0;var je=Object.keys(y);G2(ae,je),ae.size=je.length,ae._name=T,ae._keys=je,ae._defaultValues=y}this._map=jt(Ve)},ae=J.prototype=Object.create(Dr);return ae.constructor=J,J}Ui.prototype.toString=function(){return this.__toString(Ds(this)+" {","}")},Ui.prototype.has=function(y){return this._defaultValues.hasOwnProperty(y)},Ui.prototype.get=function(y,T){if(!this.has(y))return T;var W=this._defaultValues[y];return this._map?this._map.get(y,W):W},Ui.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var y=this.constructor;return y._empty||(y._empty=Vs(this,E0()))},Ui.prototype.set=function(y,T){if(!this.has(y))throw new Error('Cannot set unknown key "'+y+'" on '+Ds(this));var W=this._map&&this._map.set(y,T);return this.__ownerID||W===this._map?this:Vs(this,W)},Ui.prototype.remove=function(y){if(!this.has(y))return this;var T=this._map&&this._map.remove(y);return this.__ownerID||T===this._map?this:Vs(this,T)},Ui.prototype.wasAltered=function(){return this._map.wasAltered()},Ui.prototype.__iterator=function(y,T){var W=this;return a(this._defaultValues).map(function(J,ae){return W.get(ae)}).__iterator(y,T)},Ui.prototype.__iterate=function(y,T){var W=this;return a(this._defaultValues).map(function(J,ae){return W.get(ae)}).__iterate(y,T)},Ui.prototype.__ensureOwner=function(y){if(y===this.__ownerID)return this;var T=this._map&&this._map.__ensureOwner(y);return y?Vs(this,T,y):(this.__ownerID=y,this._map=T,this)};var Dr=Ui.prototype;Dr[x]=Dr.remove,Dr.deleteIn=Dr.removeIn=dn.removeIn,Dr.merge=dn.merge,Dr.mergeWith=dn.mergeWith,Dr.mergeIn=dn.mergeIn,Dr.mergeDeep=dn.mergeDeep,Dr.mergeDeepWith=dn.mergeDeepWith,Dr.mergeDeepIn=dn.mergeDeepIn,Dr.setIn=dn.setIn,Dr.update=dn.update,Dr.updateIn=dn.updateIn,Dr.withMutations=dn.withMutations,Dr.asMutable=dn.asMutable,Dr.asImmutable=dn.asImmutable;function Vs(y,T,W){var J=Object.create(Object.getPrototypeOf(y));return J._map=T,J.__ownerID=W,J}function Ds(y){return y._name||y.constructor.name||"Record"}function G2(y,T){try{T.forEach(H2.bind(void 0,y))}catch{}}function H2(y,T){Object.defineProperty(y,T,{get:function(){return this.get(T)},set:function(W){Xt(this.__ownerID,"Cannot set on an immutable record."),this.set(T,W)}})}r(F0,X0);function F0(y){return y==null?gd():Fs(y)&&!f(y)?y:gd().withMutations(function(T){var W=s(y);hn(W.size),W.forEach(function(J){return T.add(J)})})}F0.of=function(){return this(arguments)},F0.fromKeys=function(y){return this(a(y).keySeq())},F0.prototype.toString=function(){return this.__toString("Set {","}")},F0.prototype.has=function(y){return this._map.has(y)},F0.prototype.add=function(y){return Sd(this,this._map.set(y,!0))},F0.prototype.remove=function(y){return Sd(this,this._map.remove(y))},F0.prototype.clear=function(){return Sd(this,this._map.clear())},F0.prototype.union=function(){var y=t.call(arguments,0);return y=y.filter(function(T){return T.size!==0}),y.length===0?this:this.size===0&&!this.__ownerID&&y.length===1?this.constructor(y[0]):this.withMutations(function(T){for(var W=0;W<y.length;W++)s(y[W]).forEach(function(J){return T.add(J)})})},F0.prototype.intersect=function(){var y=t.call(arguments,0);if(y.length===0)return this;y=y.map(function(W){return s(W)});var T=this;return this.withMutations(function(W){T.forEach(function(J){y.every(function(ae){return ae.includes(J)})||W.remove(J)})})},F0.prototype.subtract=function(){var y=t.call(arguments,0);if(y.length===0)return this;y=y.map(function(W){return s(W)});var T=this;return this.withMutations(function(W){T.forEach(function(J){y.some(function(ae){return ae.includes(J)})&&W.remove(J)})})},F0.prototype.merge=function(){return this.union.apply(this,arguments)},F0.prototype.mergeWith=function(y){var T=t.call(arguments,1);return this.union.apply(this,T)},F0.prototype.sort=function(y){return za(ma(this,y))},F0.prototype.sortBy=function(y,T){return za(ma(this,T,y))},F0.prototype.wasAltered=function(){return this._map.wasAltered()},F0.prototype.__iterate=function(y,T){var W=this;return this._map.__iterate(function(J,ae){return y(ae,ae,W)},T)},F0.prototype.__iterator=function(y,T){return this._map.map(function(W,J){return J}).__iterator(y,T)},F0.prototype.__ensureOwner=function(y){if(y===this.__ownerID)return this;var T=this._map.__ensureOwner(y);return y?this.__make(T,y):(this.__ownerID=y,this._map=T,this)};function Fs(y){return!!(y&&y[cr])}F0.isSet=Fs;var cr="@@__IMMUTABLE_SET__@@",ji=F0.prototype;ji[cr]=!0,ji[x]=ji.remove,ji.mergeDeep=ji.merge,ji.mergeDeepWith=ji.mergeWith,ji.withMutations=dn.withMutations,ji.asMutable=dn.asMutable,ji.asImmutable=dn.asImmutable,ji.__empty=gd,ji.__make=Sl;function Sd(y,T){return y.__ownerID?(y.size=T.size,y._map=T,y):T===y._map?y:T.size===0?y.__empty():y.__make(T)}function Sl(y,T){var W=Object.create(ji);return W.size=y?y.size:0,W._map=y,W.__ownerID=T,W}var Cm;function gd(){return Cm||(Cm=Sl(E0()))}r(za,F0);function za(y){return y==null?xd():_d(y)?y:xd().withMutations(function(T){var W=s(y);hn(W.size),W.forEach(function(J){return T.add(J)})})}za.of=function(){return this(arguments)},za.fromKeys=function(y){return this(a(y).keySeq())},za.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function _d(y){return Fs(y)&&f(y)}za.isOrderedSet=_d;var Xc=za.prototype;Xc[E]=!0,Xc.__empty=xd,Xc.__make=Vm;function Vm(y,T){var W=Object.create(Xc);return W.size=y?y.size:0,W._map=y,W.__ownerID=T,W}var Dm;function xd(){return Dm||(Dm=Vm(Gc()))}r(tr,V0);function tr(y){return y==null?wd():Fm(y)?y:wd().unshiftAll(y)}tr.of=function(){return this(arguments)},tr.prototype.toString=function(){return this.__toString("Stack [","]")},tr.prototype.get=function(y,T){var W=this._head;for(y=q(this,y);W&&y--;)W=W.next;return W?W.value:T},tr.prototype.peek=function(){return this._head&&this._head.value},tr.prototype.push=function(){if(arguments.length===0)return this;for(var y=this.size+arguments.length,T=this._head,W=arguments.length-1;W>=0;W--)T={value:arguments[W],next:T};return this.__ownerID?(this.size=y,this._head=T,this.__hash=void 0,this.__altered=!0,this):qo(y,T)},tr.prototype.pushAll=function(y){if(y=o(y),y.size===0)return this;hn(y.size);var T=this.size,W=this._head;return y.reverse().forEach(function(J){T++,W={value:J,next:W}}),this.__ownerID?(this.size=T,this._head=W,this.__hash=void 0,this.__altered=!0,this):qo(T,W)},tr.prototype.pop=function(){return this.slice(1)},tr.prototype.unshift=function(){return this.push.apply(this,arguments)},tr.prototype.unshiftAll=function(y){return this.pushAll(y)},tr.prototype.shift=function(){return this.pop.apply(this,arguments)},tr.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):wd()},tr.prototype.slice=function(y,T){if(ee(y,T,this.size))return this;var W=ue(y,this.size),J=U(T,this.size);if(J!==this.size)return V0.prototype.slice.call(this,y,T);for(var ae=this.size-W,me=this._head;W--;)me=me.next;return this.__ownerID?(this.size=ae,this._head=me,this.__hash=void 0,this.__altered=!0,this):qo(ae,me)},tr.prototype.__ensureOwner=function(y){return y===this.__ownerID?this:y?qo(this.size,this._head,y,this.__hash):(this.__ownerID=y,this.__altered=!1,this)},tr.prototype.__iterate=function(y,T){if(T)return this.reverse().__iterate(y);for(var W=0,J=this._head;J&&y(J.value,W++,this)!==!1;)J=J.next;return W},tr.prototype.__iterator=function(y,T){if(T)return this.reverse().__iterator(y);var W=0,J=this._head;return new Te(function(){if(J){var ae=J.value;return J=J.next,ye(y,W++,ae)}return We()})};function Fm(y){return!!(y&&y[gl])}tr.isStack=Fm;var gl="@@__IMMUTABLE_STACK__@@",yi=tr.prototype;yi[gl]=!0,yi.withMutations=dn.withMutations,yi.asMutable=dn.asMutable,yi.asImmutable=dn.asImmutable,yi.wasAltered=dn.wasAltered;function qo(y,T,W,J){var ae=Object.create(yi);return ae.size=y,ae._head=T,ae.__ownerID=W,ae.__hash=J,ae.__altered=!1,ae}var vd;function wd(){return vd||(vd=qo(0))}function Sr(y,T){var W=function(J){y.prototype[J]=T[J]};return Object.keys(T).forEach(W),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(T).forEach(W),y}i.Iterator=Te,Sr(i,{toArray:function(){hn(this.size);var y=new Array(this.size||0);return this.valueSeq().__iterate(function(T,W){y[W]=T}),y},toIndexedSeq:function(){return new Yo(this)},toJS:function(){return this.toSeq().map(function(y){return y&&typeof y.toJS=="function"?y.toJS():y}).__toJS()},toJSON:function(){return this.toSeq().map(function(y){return y&&typeof y.toJSON=="function"?y.toJSON():y}).__toJS()},toKeyedSeq:function(){return new si(this,!0)},toMap:function(){return jt(this.toKeyedSeq())},toObject:function(){hn(this.size);var y={};return this.__iterate(function(T,W){y[W]=T}),y},toOrderedMap:function(){return k0(this.toKeyedSeq())},toOrderedSet:function(){return za(u(this)?this.valueSeq():this)},toSet:function(){return F0(u(this)?this.valueSeq():this)},toSetSeq:function(){return new Es(this)},toSeq:function(){return d(this)?this.toIndexedSeq():u(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return tr(u(this)?this.valueSeq():this)},toList:function(){return jn(u(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(y,T){return this.size===0?y+T:y+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+T},concat:function(){var y=t.call(arguments,0);return u0(this,ZA(this,y))},includes:function(y){return this.some(function(T){return ht(T,y)})},entries:function(){return this.__iterator(se)},every:function(y,T){hn(this.size);var W=!0;return this.__iterate(function(J,ae,me){if(!y.call(T,J,ae,me))return W=!1,!1}),W},filter:function(y,T){return u0(this,ra(this,y,T,!0))},find:function(y,T,W){var J=this.findEntry(y,T);return J?J[1]:W},findEntry:function(y,T){var W;return this.__iterate(function(J,ae,me){if(y.call(T,J,ae,me))return W=[ae,J],!1}),W},findLastEntry:function(y,T){return this.toSeq().reverse().findEntry(y,T)},forEach:function(y,T){return hn(this.size),this.__iterate(T?y.bind(T):y)},join:function(y){hn(this.size),y=y!==void 0?""+y:",";var T="",W=!0;return this.__iterate(function(J){W?W=!1:T+=y,T+=J!=null?J.toString():""}),T},keys:function(){return this.__iterator(G)},map:function(y,T){return u0(this,xm(this,y,T))},reduce:function(y,T,W){hn(this.size);var J,ae;return arguments.length<2?ae=!0:J=T,this.__iterate(function(me,Ve,je){ae?(ae=!1,J=me):J=y.call(W,J,me,Ve,je)}),J},reduceRight:function(y,T,W){var J=this.toKeyedSeq().reverse();return J.reduce.apply(J,arguments)},reverse:function(){return u0(this,hd(this,!0))},slice:function(y,T){return u0(this,Wc(this,y,T,!0))},some:function(y,T){return!this.every(yd(y),T)},sort:function(y){return u0(this,ma(this,y))},values:function(){return this.__iterator(ne)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(y,T){return I(y?this.toSeq().filter(y,T):this)},countBy:function(y,T){return U2(this,y,T)},equals:function(y){return Nt(this,y)},entrySeq:function(){var y=this;if(y._cache)return new re(y._cache);var T=y.toSeq().map(Tm).toIndexedSeq();return T.fromEntrySeq=function(){return y.toSeq()},T},filterNot:function(y,T){return this.filter(yd(y),T)},findLast:function(y,T,W){return this.toKeyedSeq().reverse().find(y,T,W)},first:function(){return this.find(P)},flatMap:function(y,T){return u0(this,pd(this,y,T))},flatten:function(y){return u0(this,Ga(this,y,!0))},fromEntrySeq:function(){return new Cs(this)},get:function(y,T){return this.find(function(W,J){return ht(J,y)},void 0,T)},getIn:function(y,T){for(var W=this,J=af(y),ae;!(ae=J.next()).done;){var me=ae.value;if(W=W&&W.get?W.get(me,D):D,W===D)return T}return W},groupBy:function(y,T){return j2(this,y,T)},has:function(y){return this.get(y,D)!==D},hasIn:function(y){return this.getIn(y,D)!==D},isSubset:function(y){return y=typeof y.includes=="function"?y:i(y),this.every(function(T){return y.includes(T)})},isSuperset:function(y){return y=typeof y.isSubset=="function"?y:i(y),y.isSubset(this)},keySeq:function(){return this.toSeq().map(z2).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(y){return md(this,y)},maxBy:function(y,T){return md(this,T,y)},min:function(y){return md(this,y?of(y):Sa)},minBy:function(y,T){return md(this,T?of(T):Sa,y)},rest:function(){return this.slice(1)},skip:function(y){return this.slice(Math.max(0,y))},skipLast:function(y){return u0(this,this.toSeq().reverse().skip(y).reverse())},skipWhile:function(y,T){return u0(this,go(this,y,T,!0))},skipUntil:function(y,T){return this.skipWhile(yd(y),T)},sortBy:function(y,T){return u0(this,ma(this,T,y))},take:function(y){return this.slice(0,Math.max(0,y))},takeLast:function(y){return u0(this,this.toSeq().reverse().take(y).reverse())},takeWhile:function(y,T){return u0(this,vm(this,y,T))},takeUntil:function(y,T){return this.takeWhile(yd(y),T)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=bm(this))}});var Y0=i.prototype;Y0[m]=!0,Y0[Be]=Y0.values,Y0.__toJS=Y0.toArray,Y0.__toStringMapper=Ed,Y0.inspect=Y0.toSource=function(){return this.toString()},Y0.chain=Y0.flatMap,Y0.contains=Y0.includes,function(){try{Object.defineProperty(Y0,"length",{get:function(){if(!i.noLengthWarning){var y;try{throw new Error}catch(T){y=T.stack}if(y.indexOf("_wrapObject")===-1)return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+y),this.size}}})}catch{}}(),Sr(a,{flip:function(){return u0(this,zc(this))},findKey:function(y,T){var W=this.findEntry(y,T);return W&&W[0]},findLastKey:function(y,T){return this.toSeq().reverse().findKey(y,T)},keyOf:function(y){return this.findKey(function(T){return ht(T,y)})},lastKeyOf:function(y){return this.findLastKey(function(T){return ht(T,y)})},mapEntries:function(y,T){var W=this,J=0;return u0(this,this.toSeq().map(function(ae,me){return y.call(T,[me,ae],J++,W)}).fromEntrySeq())},mapKeys:function(y,T){var W=this;return u0(this,this.toSeq().flip().map(function(J,ae){return y.call(T,J,ae,W)}).flip())}});var _l=a.prototype;_l[g]=!0,_l[Be]=Y0.entries,_l.__toJS=Y0.toObject,_l.__toStringMapper=function(y,T){return JSON.stringify(T)+": "+Ed(y)},Sr(o,{toKeyedSeq:function(){return new si(this,!1)},filter:function(y,T){return u0(this,ra(this,y,T,!1))},findIndex:function(y,T){var W=this.findEntry(y,T);return W?W[0]:-1},indexOf:function(y){var T=this.toKeyedSeq().keyOf(y);return T===void 0?-1:T},lastIndexOf:function(y){var T=this.toKeyedSeq().reverse().keyOf(y);return T===void 0?-1:T},reverse:function(){return u0(this,hd(this,!1))},slice:function(y,T){return u0(this,Wc(this,y,T,!1))},splice:function(y,T){var W=arguments.length;if(T=Math.max(T|0,0),W===0||W===2&&!T)return this;y=ue(y,y<0?this.count():this.size);var J=this.slice(0,y);return u0(this,W===1?J:J.concat(z(arguments,2),this.slice(y+T)))},findLastIndex:function(y,T){var W=this.toKeyedSeq().findLastKey(y,T);return W===void 0?-1:W},first:function(){return this.get(0)},flatten:function(y){return u0(this,Ga(this,y,!1))},get:function(y,T){return y=q(this,y),y<0||this.size===1/0||this.size!==void 0&&y>this.size?T:this.find(function(W,J){return J===y},void 0,T)},has:function(y){return y=q(this,y),y>=0&&(this.size!==void 0?this.size===1/0||y<this.size:this.indexOf(y)!==-1)},interpose:function(y){return u0(this,$A(this,y))},interleave:function(){var y=[this].concat(z(arguments)),T=ef(this.toSeq(),De.of,y),W=T.flatten(!0);return T.size&&(W.size=T.size*y.length),u0(this,W)},last:function(){return this.get(-1)},skipWhile:function(y,T){return u0(this,go(this,y,T,!1))},zip:function(){var y=[this].concat(z(arguments));return u0(this,ef(this,xl,y))},zipWith:function(y){var T=z(arguments);return T[0]=this,u0(this,ef(this,y,T))}}),o.prototype[_]=!0,o.prototype[E]=!0,Sr(s,{get:function(y,T){return this.has(y)?y:T},includes:function(y){return this.has(y)},keySeq:function(){return this.valueSeq()}}),s.prototype.has=Y0.includes,Sr(k,a.prototype),Sr(De,o.prototype),Sr(we,s.prototype),Sr(On,a.prototype),Sr(V0,o.prototype),Sr(X0,s.prototype);function z2(y,T){return T}function Tm(y,T){return[T,y]}function yd(y){return function(){return!y.apply(this,arguments)}}function of(y){return function(){return-y.apply(this,arguments)}}function Ed(y){return typeof y=="string"?JSON.stringify(y):y}function xl(){return z(arguments)}function Sa(y,T){return y<T?1:y>T?-1:0}function bm(y){if(y.size===1/0)return 0;var T=f(y),W=u(y),J=T?1:0,ae=y.__iterate(W?T?function(me,Ve){J=31*J+Rm($t(me),$t(Ve))|0}:function(me,Ve){J=J+Rm($t(me),$t(Ve))|0}:T?function(me){J=31*J+$t(me)|0}:function(me){J=J+$t(me)|0});return Pm(ae,J)}function Pm(y,T){return T=ki(T,3432918353),T=ki(T<<15|T>>>-15,461845907),T=ki(T<<13|T>>>-13,5),T=(T+3864292196|0)^y,T=ki(T^T>>>16,2246822507),T=ki(T^T>>>13,3266489909),T=na(T^T>>>16),T}function Rm(y,T){return y^T+2654435769+(y<<6)+(y>>2)|0}var W2={Iterable:i,Seq:Ue,Collection:wn,Map:jt,OrderedMap:k0,List:jn,Stack:tr,Set:F0,OrderedSet:za,Record:Ui,Range:xt,Repeat:Je,is:ht,fromJS:_t};return W2})})(Jn);var Vse=Jn.exports,Dse=Vse.OrderedMap,Fse={createFromArray:function(e){return Dse(e.map(function(t){return[t.getKey(),t]}))}},cm=Fse;function Tse(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var YV=Jn.exports,E4=YV.Map,C4=YV.OrderedSet,bse=YV.Record,PN=C4(),RN={style:PN,entity:null},Pse=bse(RN),qV=function(n){Tse(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.getStyle=function(){return this.get("style")},t.getEntity=function(){return this.get("entity")},t.hasStyle=function(i){return this.getStyle().includes(i)},e.applyStyle=function(i,a){var o=i.set("style",i.getStyle().add(a));return e.create(o)},e.removeStyle=function(i,a){var o=i.set("style",i.getStyle().remove(a));return e.create(o)},e.applyEntity=function(i,a){var o=i.getEntity()===a?i:i.set("entity",a);return e.create(o)},e.create=function(i){if(!i)return QV;var a={style:PN,entity:null},o=E4(a).merge(i),s=Zv.get(o);if(s)return s;var l=new e(o);return Zv=Zv.set(o,l),l},e.fromJS=function(i){var a=i.style,o=i.entity;return new e({style:Array.isArray(a)?C4(a):a,entity:Array.isArray(o)?C4(o):o})},e}(Pse),QV=new qV,Zv=E4([[E4(RN),QV]]);qV.EMPTY=QV;var mo=qV;function Rse(n,e,t,r){if(!!n.size){var i=0;n.reduce(function(a,o,s){return e(a,o)||(t(a)&&r(i,s),i=s),o}),t(n.last())&&r(i,n.count())}}var um=Rse;function Lse(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Bse=mo,aR=um,dm=Jn.exports,LN=dm.List,Mse=dm.Map,Ise=dm.OrderedSet,Ose=dm.Record,kse=dm.Repeat,Nse=Ise(),Use={key:"",type:"unstyled",text:"",characterList:LN(),depth:0,data:Mse()},jse=Ose(Use),Gse=function(e){if(!e)return e;var t=e.characterList,r=e.text;return r&&!t&&(e.characterList=LN(kse(Bse.EMPTY,r.length))),e},Hse=function(n){Lse(e,n);function e(r){return n.call(this,Gse(r))||this}var t=e.prototype;return t.getKey=function(){return this.get("key")},t.getType=function(){return this.get("type")},t.getText=function(){return this.get("text")},t.getCharacterList=function(){return this.get("characterList")},t.getLength=function(){return this.getText().length},t.getDepth=function(){return this.get("depth")},t.getData=function(){return this.get("data")},t.getInlineStyleAt=function(i){var a=this.getCharacterList().get(i);return a?a.getStyle():Nse},t.getEntityAt=function(i){var a=this.getCharacterList().get(i);return a?a.getEntity():null},t.findStyleRanges=function(i,a){aR(this.getCharacterList(),zse,i,a)},t.findEntityRanges=function(i,a){aR(this.getCharacterList(),Wse,i,a)},e}(jse);function zse(n,e){return n.getStyle()===e.getStyle()}function Wse(n,e){return n.getEntity()===e.getEntity()}var ld=Hse;function Xse(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Kse=mo,oR=um,Am=Jn.exports,V4=Am.List,Yse=Am.Map,qse=Am.OrderedSet,Qse=Am.Record,Jse=Am.Repeat,Zse=qse(),sR={parent:null,characterList:V4(),data:Yse(),depth:0,key:"",text:"",type:"unstyled",children:V4(),prevSibling:null,nextSibling:null},$se=function(e,t){return e.getStyle()===t.getStyle()},ele=function(e,t){return e.getEntity()===t.getEntity()},tle=function(e){if(!e)return e;var t=e.characterList,r=e.text;return r&&!t&&(e.characterList=V4(Jse(Kse.EMPTY,r.length))),e},nle=function(n){Xse(e,n);function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sR;return n.call(this,tle(r))||this}var t=e.prototype;return t.getKey=function(){return this.get("key")},t.getType=function(){return this.get("type")},t.getText=function(){return this.get("text")},t.getCharacterList=function(){return this.get("characterList")},t.getLength=function(){return this.getText().length},t.getDepth=function(){return this.get("depth")},t.getData=function(){return this.get("data")},t.getInlineStyleAt=function(i){var a=this.getCharacterList().get(i);return a?a.getStyle():Zse},t.getEntityAt=function(i){var a=this.getCharacterList().get(i);return a?a.getEntity():null},t.getChildKeys=function(){return this.get("children")},t.getParentKey=function(){return this.get("parent")},t.getPrevSiblingKey=function(){return this.get("prevSibling")},t.getNextSiblingKey=function(){return this.get("nextSibling")},t.findStyleRanges=function(i,a){oR(this.getCharacterList(),$se,i,a)},t.findEntityRanges=function(i,a){oR(this.getCharacterList(),ele,i,a)},e}(Qse(sR)),So=nle,lR=mo,rle=Jn.exports,ile=rle.Map,ale={add:function(e,t,r){return cR(e,t,r,!0)},remove:function(e,t,r){return cR(e,t,r,!1)}};function cR(n,e,t,r){var i=n.getBlockMap(),a=e.getStartKey(),o=e.getStartOffset(),s=e.getEndKey(),l=e.getEndOffset(),u=i.skipUntil(function(d,h){return h===a}).takeUntil(function(d,h){return h===s}).concat(ile([[s,i.get(s)]])).map(function(d,h){var f,m;a===s?(f=o,m=l):(f=h===a?o:0,m=h===s?l:d.getLength());for(var g=d.getCharacterList(),_;f<m;)_=g.get(f),g=g.set(f,r?lR.applyStyle(_,t):lR.removeStyle(_,t)),f++;return d.set("characterList",g)});return n.merge({blockMap:i.merge(u),selectionBefore:e,selectionAfter:e})}var ole=ale,sle=mo;function lle(n,e,t,r){for(var i=e,a=n.getCharacterList();i<t;)a=a.set(i,sle.applyEntity(a.get(i),r)),i++;return n.set("characterList",a)}var cle=lle,ule=cle,dle=Jn.exports;function Ale(n,e,t){var r=n.getBlockMap(),i=e.getStartKey(),a=e.getStartOffset(),o=e.getEndKey(),s=e.getEndOffset(),l=r.skipUntil(function(u,d){return d===i}).takeUntil(function(u,d){return d===o}).toOrderedMap().merge(dle.OrderedMap([[o,r.get(o)]])).map(function(u,d){var h=d===i?a:0,f=d===o?s:u.getLength();return ule(u,h,f,t)});return n.merge({blockMap:r.merge(l),selectionBefore:e,selectionAfter:e})}var fle=Ale,hle={getRemovalRange:function(e,t,r,i,a){var o=r.split(" ");o=o.map(function(E,x){if(a==="forward"){if(x>0)return" "+E}else if(x<o.length-1)return E+" ";return E});for(var s=i,l,u,d=null,h=null,f=0;f<o.length;f++){if(u=o[f],l=s+u.length,e<l&&s<t)d!==null||(d=s),h=l;else if(d!==null)break;s=l}var m=i+r.length,g=d===i,_=h===m;return(!g&&_||g&&!_)&&(a==="forward"?h!==m&&h++:d!==i&&d--),{start:d,end:h}}},ple=hle;function mle(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];if(!n){var a;if(e===void 0)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;a=new Error(e.replace(/%s/g,function(){return String(r[o++])})),a.name="Invariant Violation"}throw a.framesToPop=1,a}}var r0=mle,Sle=r0;function gle(n,e){var t=[];return n.findEntityRanges(function(r){return r.getEntity()===e},function(r,i){t.push({start:r,end:i})}),t.length||Sle(!1),t}var _le=gle,xle=ple,vle=_le,wle=r0;function yle(n,e,t,r,i){var a=r.getStartOffset(),o=r.getEndOffset(),s=e.getEntityAt(a),l=t.getEntityAt(o-1);if(!s&&!l)return r;var u=r;if(s&&s===l)u=Xf(n,e,u,i,s,!0,!0);else if(s&&l){var d=Xf(n,e,u,i,s,!1,!0),h=Xf(n,t,u,i,l,!1,!1);u=u.merge({anchorOffset:d.getAnchorOffset(),focusOffset:h.getFocusOffset(),isBackward:!1})}else if(s){var f=Xf(n,e,u,i,s,!1,!0);u=u.merge({anchorOffset:f.getStartOffset(),isBackward:!1})}else if(l){var m=Xf(n,t,u,i,l,!1,!1);u=u.merge({focusOffset:m.getEndOffset(),isBackward:!1})}return u}function Xf(n,e,t,r,i,a,o){var s=t.getStartOffset(),l=t.getEndOffset(),u=n.__get(i),d=u.getMutability(),h=o?s:l;if(d==="MUTABLE")return t;var f=vle(e,i).filter(function(_){return h<=_.end&&h>=_.start});f.length!=1&&wle(!1);var m=f[0];if(d==="IMMUTABLE")return t.merge({anchorOffset:m.start,focusOffset:m.end,isBackward:!1});a||(o?l=m.end:s=m.start);var g=xle.getRemovalRange(s,l,e.getText().slice(m.start,m.end),m.start,r);return t.merge({anchorOffset:g.start,focusOffset:g.end,isBackward:!1})}var Ele=yle,uR={},Cle=Math.pow(2,24);function Vle(){for(var n;n===void 0||uR.hasOwnProperty(n)||!isNaN(+n);)n=Math.floor(Math.random()*Cle).toString(32);return uR[n]=!0,n}var ys=Vle,Dle=So,BN=ys,Fle=Jn.exports,MN=Fle.OrderedMap,Tle=function(e){var t={},r;return MN(e.withMutations(function(i){i.forEach(function(a,o){var s=a.getKey(),l=a.getNextSiblingKey(),u=a.getPrevSiblingKey(),d=a.getChildKeys(),h=a.getParentKey(),f=BN();if(t[s]=f,l){var m=i.get(l);m?i.setIn([l,"prevSibling"],f):i.setIn([s,"nextSibling"],null)}if(u){var g=i.get(u);g?i.setIn([u,"nextSibling"],f):i.setIn([s,"prevSibling"],null)}if(h&&i.get(h)){var _=i.get(h),E=_.getChildKeys();i.setIn([h,"children"],E.set(E.indexOf(a.getKey()),f))}else i.setIn([s,"parent"],null),r&&(i.setIn([r.getKey(),"nextSibling"],f),i.setIn([s,"prevSibling"],t[r.getKey()])),r=i.get(s);d.forEach(function(x){var v=i.get(x);v?i.setIn([x,"parent"],f):i.setIn([s,"children"],a.getChildKeys().filter(function(C){return C!==x}))})})}).toArray().map(function(i){return[t[i.getKey()],i.set("key",t[i.getKey()])]}))},ble=function(e){return MN(e.toArray().map(function(t){var r=BN();return[r,t.set("key",r)]}))},Ple=function(e){var t=e.first()instanceof Dle;return t?Tle(e):ble(e)},IN=Ple,Rle=mo,Lle=um,Ble=r0;function Mle(n,e){var t=n.getBlockMap(),r=n.getEntityMap(),i={},a=e.getStartKey(),o=e.getStartOffset(),s=t.get(a),l=dR(r,s,o);l!==s&&(i[a]=l);var u=e.getEndKey(),d=e.getEndOffset(),h=t.get(u);a===u&&(h=l);var f=dR(r,h,d);return f!==h&&(i[u]=f),Object.keys(i).length?n.merge({blockMap:t.merge(i),selectionAfter:e}):n.set("selectionAfter",e)}function Ile(n,e,t){var r;return Lle(n,function(i,a){return i.getEntity()===a.getEntity()},function(i){return i.getEntity()===e},function(i,a){i<=t&&a>=t&&(r={start:i,end:a})}),typeof r!="object"&&Ble(!1),r}function dR(n,e,t){var r=e.getCharacterList(),i=t>0?r.get(t-1):void 0,a=t<r.count()?r.get(t):void 0,o=i?i.getEntity():void 0,s=a?a.getEntity():void 0;if(s&&s===o){var l=n.__get(s);if(l.getMutability()!=="MUTABLE"){for(var u=Ile(r,s,t),d=u.start,h=u.end,f;d<h;)f=r.get(d),r=r.set(d,Rle.applyEntity(f,null)),d++;return e.set("characterList",r)}}return e}var ON=Mle,Ole=IN,kle=ON,Nle=function(e,t){var r=t.getStartKey(),i=t.getStartOffset(),a=t.getEndKey(),o=t.getEndOffset(),s=kle(e,t),l=s.getBlockMap(),u=l.keySeq(),d=u.indexOf(r),h=u.indexOf(a)+1;return Ole(l.slice(d,h).map(function(f,m){var g=f.getText(),_=f.getCharacterList();return r===a?f.merge({text:g.slice(i,o),characterList:_.slice(i,o)}):m===r?f.merge({text:g.slice(i),characterList:_.slice(i)}):m===a?f.merge({text:g.slice(0,o),characterList:_.slice(0,o)}):f}))},S2=Nle;function Ule(n,e,t){var r=n;if(t===r.count())e.forEach(function(o){r=r.push(o)});else if(t===0)e.reverse().forEach(function(o){r=r.unshift(o)});else{var i=r.slice(0,t),a=r.slice(t);r=i.concat(e,a).toList()}return r}var kN=Ule,jle=cm,NN=So,Gle=Jn.exports,Hle=kN,AR=r0,zle=IN,Wle=Gle.List,Xle=function(e,t,r,i,a,o){var s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:"REPLACE_WITH_NEW_DATA",l=r.get(a),u=l.getText(),d=l.getCharacterList(),h=a,f=o+i.getText().length,m=null;switch(s){case"MERGE_OLD_DATA_TO_NEW_DATA":m=i.getData().merge(l.getData());break;case"REPLACE_WITH_NEW_DATA":m=i.getData();break}var g=l.getType();u&&g==="unstyled"&&(g=i.getType());var _=l.merge({text:u.slice(0,o)+i.getText()+u.slice(o),characterList:Hle(d,i.getCharacterList(),o),type:g,data:m});return e.merge({blockMap:r.set(a,_),selectionBefore:t,selectionAfter:t.merge({anchorKey:h,anchorOffset:f,focusKey:h,focusOffset:f,isBackward:!1})})},Kle=function(e,t,r){var i=e.getText(),a=e.getCharacterList(),o=i.slice(0,t),s=a.slice(0,t),l=r.first();return e.merge({text:o+l.getText(),characterList:s.concat(l.getCharacterList()),type:o?e.getType():l.getType(),data:l.getData()})},Yle=function(e,t,r){var i=e.getText(),a=e.getCharacterList(),o=i.length,s=i.slice(t,o),l=a.slice(t,o),u=r.last();return u.merge({text:u.getText()+s,characterList:u.getCharacterList().concat(l),data:u.getData()})},qle=function(e,t){var r=e.getKey(),i=e,a=[];for(t.get(r)&&a.push(r);i&&i.getNextSiblingKey();){var o=i.getNextSiblingKey();if(!o)break;a.push(o),i=t.get(o)}return a},Qle=function(e,t,r,i){return e.withMutations(function(a){var o=r.getKey(),s=i.getKey(),l=r.getNextSiblingKey(),u=r.getParentKey(),d=qle(i,e),h=d[d.length-1];if(a.get(s)?(a.setIn([o,"nextSibling"],s),a.setIn([s,"prevSibling"],o)):(a.setIn([o,"nextSibling"],i.getNextSiblingKey()),a.setIn([i.getNextSiblingKey(),"prevSibling"],o)),a.setIn([h,"nextSibling"],l),l&&a.setIn([l,"prevSibling"],h),d.forEach(function(x){return a.setIn([x,"parent"],u)}),u){var f=e.get(u),m=f.getChildKeys(),g=m.indexOf(o),_=g+1,E=m.toArray();E.splice.apply(E,[_,0].concat(d)),a.setIn([u,"children"],Wle(E))}})},Jle=function(e,t,r,i,a,o){var s=r.first()instanceof NN,l=[],u=i.size,d=r.get(a),h=i.first(),f=i.last(),m=f.getLength(),g=f.getKey(),_=s&&(!d.getChildKeys().isEmpty()||!h.getChildKeys().isEmpty());r.forEach(function(x,v){if(v!==a){l.push(x);return}_?l.push(x):l.push(Kle(x,o,i)),i.slice(_?0:1,u-1).forEach(function(C){return l.push(C)}),l.push(Yle(x,o,i))});var E=jle.createFromArray(l);return s&&(E=Qle(E,r,d,h)),e.merge({blockMap:E,selectionBefore:t,selectionAfter:t.merge({anchorKey:g,anchorOffset:m,focusKey:g,focusOffset:m,isBackward:!1})})},Zle=function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"REPLACE_WITH_NEW_DATA";t.isCollapsed()||AR(!1);var a=e.getBlockMap(),o=zle(r),s=t.getStartKey(),l=t.getStartOffset(),u=a.get(s);return u instanceof NN&&(u.getChildKeys().isEmpty()||AR(!1)),o.size===1?Xle(e,t,a,o.first(),s,l,i):Jle(e,t,a,o,s,l)},$le=Zle,ece=Jn.exports,tce=kN,nce=r0,rce=ece.Repeat;function ice(n,e,t,r){e.isCollapsed()||nce(!1);var i=null;if(t!=null&&(i=t.length),i==null||i===0)return n;var a=n.getBlockMap(),o=e.getStartKey(),s=e.getStartOffset(),l=a.get(o),u=l.getText(),d=l.merge({text:u.slice(0,s)+t+u.slice(s,l.getLength()),characterList:tce(l.getCharacterList(),rce(r,i).toList(),s)}),h=s+i;return n.merge({blockMap:a.set(o,d),selectionAfter:e.merge({anchorOffset:h,focusOffset:h})})}var ace=ice,oce=Jn.exports,sce=oce.Map;function lce(n,e,t){var r=e.getStartKey(),i=e.getEndKey(),a=n.getBlockMap(),o=a.toSeq().skipUntil(function(s,l){return l===r}).takeUntil(function(s,l){return l===i}).concat(sce([[i,a.get(i)]])).map(t);return n.merge({blockMap:a.merge(o),selectionBefore:e,selectionAfter:e})}var UN=lce,cce=So,uce=function(e,t){var r=e instanceof cce;if(!r)return null;var i=e.getNextSiblingKey();if(i)return i;var a=e.getParentKey();if(!a)return null;for(var o=t.get(a);o&&!o.getNextSiblingKey();){var s=o.getParentKey();o=s?t.get(s):null}return o?o.getNextSiblingKey():null},jN=uce,dce=So,D4=jN,GN=Jn.exports;GN.List;var fR=GN.Map,oa=function(e,t,r){if(!!e){var i=t.get(e);!i||t.set(e,r(i))}},$8=function(e,t){var r=[];if(!e)return r;for(var i=t.get(e);i&&i.getParentKey();){var a=i.getParentKey();a&&r.push(a),i=a?t.get(a):null}return r},Ace=function(e,t){var r=[];if(!e)return r;for(var i=D4(e,t);i&&t.get(i);){var a=t.get(i);r.push(i),i=a.getParentKey()?D4(a,t):null}return r},h1=function(e,t,r){if(!e)return null;for(var i=r.get(e.getKey()).getNextSiblingKey();i&&!t.get(i);)i=r.get(i).getNextSiblingKey()||null;return i},p1=function(e,t,r){if(!e)return null;for(var i=r.get(e.getKey()).getPrevSiblingKey();i&&!t.get(i);)i=r.get(i).getPrevSiblingKey()||null;return i},fce=function(e,t,r,i){return e.withMutations(function(a){if(oa(t.getKey(),a,function(d){return d.merge({nextSibling:h1(d,a,i),prevSibling:p1(d,a,i)})}),oa(r.getKey(),a,function(d){return d.merge({nextSibling:h1(d,a,i),prevSibling:p1(d,a,i)})}),$8(t.getKey(),i).forEach(function(d){return oa(d,a,function(h){return h.merge({children:h.getChildKeys().filter(function(f){return a.get(f)}),nextSibling:h1(h,a,i),prevSibling:p1(h,a,i)})})}),oa(t.getNextSiblingKey(),a,function(d){return d.merge({prevSibling:t.getPrevSiblingKey()})}),oa(t.getPrevSiblingKey(),a,function(d){return d.merge({nextSibling:h1(d,a,i)})}),oa(r.getNextSiblingKey(),a,function(d){return d.merge({prevSibling:p1(d,a,i)})}),oa(r.getPrevSiblingKey(),a,function(d){return d.merge({nextSibling:r.getNextSiblingKey()})}),$8(r.getKey(),i).forEach(function(d){oa(d,a,function(h){return h.merge({children:h.getChildKeys().filter(function(f){return a.get(f)}),nextSibling:h1(h,a,i),prevSibling:p1(h,a,i)})})}),Ace(r,i).forEach(function(d){return oa(d,a,function(h){return h.merge({nextSibling:h1(h,a,i),prevSibling:p1(h,a,i)})})}),e.get(t.getKey())==null&&e.get(r.getKey())!=null&&r.getParentKey()===t.getKey()&&r.getPrevSiblingKey()==null){var o=t.getPrevSiblingKey();oa(r.getKey(),a,function(d){return d.merge({prevSibling:o})}),oa(o,a,function(d){return d.merge({nextSibling:r.getKey()})});var s=o?e.get(o):null,l=s?s.getParentKey():null;if(t.getChildKeys().forEach(function(d){oa(d,a,function(h){return h.merge({parent:l})})}),l!=null){var u=e.get(l);oa(l,a,function(d){return d.merge({children:u.getChildKeys().concat(t.getChildKeys())})})}oa(t.getChildKeys().find(function(d){var h=e.get(d);return h.getNextSiblingKey()===null}),a,function(d){return d.merge({nextSibling:t.getNextSiblingKey()})})}})},hce=function(e,t){if(t.isCollapsed())return e;var r=e.getBlockMap(),i=t.getStartKey(),a=t.getStartOffset(),o=t.getEndKey(),s=t.getEndOffset(),l=r.get(i),u=r.get(o),d=l instanceof dce,h=[];if(d){var f=u.getChildKeys(),m=$8(o,r);u.getNextSiblingKey()&&(h=h.concat(m)),f.isEmpty()||(h=h.concat(m.concat([o]))),h=h.concat($8(D4(u,r),r))}var g;l===u?g=pce(l.getCharacterList(),a,s):g=l.getCharacterList().slice(0,a).concat(u.getCharacterList().slice(s));var _=l.merge({text:l.getText().slice(0,a)+u.getText().slice(s),characterList:g}),E=d&&a===0&&s===0&&u.getParentKey()===i&&u.getPrevSiblingKey()==null,x=E?fR([[i,null]]):r.toSeq().skipUntil(function(C,V){return V===i}).takeUntil(function(C,V){return V===o}).filter(function(C,V){return h.indexOf(V)===-1}).concat(fR([[o,null]])).map(function(C,V){return V===i?_:null}),v=r.merge(x).filter(function(C){return!!C});return d&&l!==u&&(v=fce(v,l,u,r)),e.merge({blockMap:v,selectionBefore:t,selectionAfter:t.merge({anchorKey:i,anchorOffset:a,focusKey:i,focusOffset:a,isBackward:!1})})},pce=function(e,t,r){if(t===0)for(;t<r;)e=e.shift(),t++;else if(r===e.count())for(;r>t;)e=e.pop(),r--;else{var i=e.slice(0,t),a=e.slice(r);e=i.concat(a).toList()}return e},mce=hce,Sce=So,gce=ys,HN=Jn.exports,hR=r0,_ce=UN,xce=HN.List,vce=HN.Map,ag=function(e,t,r){if(!!e){var i=t.get(e);!i||t.set(e,r(i))}},wce=function(e,t,r){return e.withMutations(function(i){var a=t.getKey(),o=r.getKey();ag(t.getParentKey(),i,function(s){var l=s.getChildKeys(),u=l.indexOf(a)+1,d=l.toArray();return d.splice(u,0,o),s.merge({children:xce(d)})}),ag(t.getNextSiblingKey(),i,function(s){return s.merge({prevSibling:o})}),ag(a,i,function(s){return s.merge({nextSibling:o})}),ag(o,i,function(s){return s.merge({prevSibling:a})})})},yce=function(e,t){t.isCollapsed()||hR(!1);var r=t.getAnchorKey(),i=e.getBlockMap(),a=i.get(r),o=a.getText();if(!o){var s=a.getType();if(s==="unordered-list-item"||s==="ordered-list-item")return _ce(e,t,function(x){return x.merge({type:"unstyled",depth:0})})}var l=t.getAnchorOffset(),u=a.getCharacterList(),d=gce(),h=a instanceof Sce,f=a.merge({text:o.slice(0,l),characterList:u.slice(0,l)}),m=f.merge({key:d,text:o.slice(l),characterList:u.slice(l),data:vce()}),g=i.toSeq().takeUntil(function(x){return x===a}),_=i.toSeq().skipUntil(function(x){return x===a}).rest(),E=g.concat([[r,f],[d,m]],_).toOrderedMap();return h&&(a.getChildKeys().isEmpty()||hR(!1),E=wce(E,f,m)),e.merge({blockMap:E,selectionBefore:t,selectionAfter:t.merge({anchorKey:d,anchorOffset:0,focusKey:d,focusOffset:0,isBackward:!1})})},Ece=yce,Cce=mo,pR=ole,Vce=fle,Dce=Ele,Fce=S2,Tce=Jn.exports,bce=$le,Pce=ace,Rce=r0,$v=UN,Kf=ON,Yf=mce,Lce=Ece,Bce=Tce.OrderedSet,Yg={replaceText:function(e,t,r,i,a){var o=Kf(e,t),s=Yf(o,t),l=Cce.create({style:i||Bce(),entity:a||null});return Pce(s,s.getSelectionAfter(),r,l)},insertText:function(e,t,r,i,a){return t.isCollapsed()||Rce(!1),Yg.replaceText(e,t,r,i,a)},moveText:function(e,t,r){var i=Fce(e,t),a=Yg.removeRange(e,t,"backward");return Yg.replaceWithFragment(a,r,i)},replaceWithFragment:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"REPLACE_WITH_NEW_DATA",a=Kf(e,t),o=Yf(a,t);return bce(o,o.getSelectionAfter(),r,i)},removeRange:function(e,t,r){var i,a,o,s;t.getIsBackward()&&(t=t.merge({anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset(),isBackward:!1})),i=t.getAnchorKey(),a=t.getFocusKey(),o=e.getBlockForKey(i),s=e.getBlockForKey(a);var l=t.getStartOffset(),u=t.getEndOffset(),d=o.getEntityAt(l),h=s.getEntityAt(u-1);if(i===a&&d&&d===h){var f=Dce(e.getEntityMap(),o,s,t,r);return Yf(e,f)}var m=Kf(e,t);return Yf(m,t)},splitBlock:function(e,t){var r=Kf(e,t),i=Yf(r,t);return Lce(i,i.getSelectionAfter())},applyInlineStyle:function(e,t,r){return pR.add(e,t,r)},removeInlineStyle:function(e,t,r){return pR.remove(e,t,r)},setBlockType:function(e,t,r){return $v(e,t,function(i){return i.merge({type:r,depth:0})})},setBlockData:function(e,t,r){return $v(e,t,function(i){return i.merge({data:r})})},mergeBlockData:function(e,t,r){return $v(e,t,function(i){return i.merge({data:i.getData().merge(r)})})},applyEntity:function(e,t,r){var i=Kf(e,t);return Vce(i,t,r)}},fa=Yg;function Mce(n){return Object.keys(n).map(function(e){return n[e]})}var zN=Mce;function Ice(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){Oce(n,i,t[i])})}return n}function Oce(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kce(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var WN=um,Nce=zN,JV=Jn.exports,y1=JV.List,Uce=JV.Repeat,XN=JV.Record,KN=function(){return!0},jce={start:null,end:null},F4=XN(jce),Gce={start:null,end:null,decoratorKey:null,leaves:null},ew=XN(Gce),Hce={generate:function(e,t,r){var i=t.getLength();if(!i)return y1.of(new ew({start:0,end:0,decoratorKey:null,leaves:y1.of(new F4({start:0,end:0}))}));var a=[],o=r?r.getDecorations(t,e):y1(Uce(null,i)),s=t.getCharacterList();return WN(o,YN,KN,function(l,u){a.push(new ew({start:l,end:u,decoratorKey:o.get(l),leaves:zce(s.slice(l,u).toList(),l)}))}),y1(a)},fromJS:function(e){var t=e.leaves,r=kce(e,["leaves"]);return new ew(Ice({},r,{leaves:t!=null?y1(Array.isArray(t)?t:Nce(t)).map(function(i){return F4(i)}):null}))}};function zce(n,e){var t=[],r=n.map(function(i){return i.getStyle()}).toList();return WN(r,YN,KN,function(i,a){t.push(new F4({start:i+e,end:a+e}))}),y1(t)}function YN(n,e){return n===e}var Wce=Hce;function Xce(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Kce=Jn.exports,Yce=Kce.Record,qce=Yce({type:"TOKEN",mutability:"IMMUTABLE",data:Object}),Qce=function(n){Xce(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.getType=function(){return this.get("type")},t.getMutability=function(){return this.get("mutability")},t.getData=function(){return this.get("data")},e}(qce),qN=Qce;function Jce(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=Math.random()*16|0,t=n=="x"?e:e&3|8;return t.toString(16)})}var Zce=Jce;function $ce(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){eue(n,i,t[i])})}return n}function eue(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var tue=qN,nue=Jn.exports,rue=r0,T4=Zce,iue=nue.Map,Ns=iue(),qf=T4();function m1(n,e){console.warn("WARNING: "+n+` will be deprecated soon!
Please use "`+e+'" instead.')}var rs={getLastCreatedEntityKey:function(){return m1("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey"),rs.__getLastCreatedEntityKey()},create:function(e,t,r){return m1("DraftEntity.create","contentState.createEntity"),rs.__create(e,t,r)},add:function(e){return m1("DraftEntity.add","contentState.addEntity"),rs.__add(e)},get:function(e){return m1("DraftEntity.get","contentState.getEntity"),rs.__get(e)},__getAll:function(){return Ns},__loadWithEntities:function(e){Ns=e,qf=T4()},mergeData:function(e,t){return m1("DraftEntity.mergeData","contentState.mergeEntityData"),rs.__mergeData(e,t)},replaceData:function(e,t){return m1("DraftEntity.replaceData","contentState.replaceEntityData"),rs.__replaceData(e,t)},__getLastCreatedEntityKey:function(){return qf},__create:function(e,t,r){return rs.__add(new tue({type:e,mutability:t,data:r||{}}))},__add:function(e){return qf=T4(),Ns=Ns.set(qf,e),qf},__get:function(e){var t=Ns.get(e);return t||rue(!1),t},__mergeData:function(e,t){var r=rs.__get(e),i=$ce({},r.getData(),t),a=r.set("data",i);return Ns=Ns.set(e,a),a},__replaceData:function(e,t){var r=rs.__get(e),i=r.set("data",t);return Ns=Ns.set(e,i),i}},g2=rs;function aue(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var oue=Jn.exports,sue=oue.Record,lue={anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1},cue=sue(lue),uue=function(n){aue(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},t.getAnchorKey=function(){return this.get("anchorKey")},t.getAnchorOffset=function(){return this.get("anchorOffset")},t.getFocusKey=function(){return this.get("focusKey")},t.getFocusOffset=function(){return this.get("focusOffset")},t.getIsBackward=function(){return this.get("isBackward")},t.getHasFocus=function(){return this.get("hasFocus")},t.hasEdgeWithin=function(i,a,o){var s=this.getAnchorKey(),l=this.getFocusKey();if(s===l&&s===i){var u=this.getStartOffset(),d=this.getEndOffset();return a<=u&&u<=o||a<=d&&d<=o}if(i!==s&&i!==l)return!1;var h=i===s?this.getAnchorOffset():this.getFocusOffset();return a<=h&&o>=h},t.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},t.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},t.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},t.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},t.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},e.createEmpty=function(i){return new e({anchorKey:i,anchorOffset:0,focusKey:i,focusOffset:0,isBackward:!1,hasFocus:!1})},e}(cue),_2=uue,Nc=function(n){return typeof window<"u"&&window.__DRAFT_GKX?!!window.__DRAFT_GKX[n]:!1},due=new RegExp("\r","g");function Aue(n){return n.replace(due,"")}var QN=Aue;function mR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){fue(n,i,t[i])})}return n}function fue(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hue(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var pue=cm,SR=mo,mue=ld,Sue=So,$o=g2,og=_2,gue=ys,_ue=zN,xue=Nc,fm=Jn.exports,vue=QN,gR=fm.List,wue=fm.Record,yue=fm.Repeat,Eue=fm.Map,Cue=fm.OrderedMap,Vue={entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null},Due=wue(Vue),_R=xue("draft_tree_data_support")?Sue:mue,Fue=function(n){hue(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.getEntityMap=function(){return $o},t.getBlockMap=function(){return this.get("blockMap")},t.getSelectionBefore=function(){return this.get("selectionBefore")},t.getSelectionAfter=function(){return this.get("selectionAfter")},t.getBlockForKey=function(i){var a=this.getBlockMap().get(i);return a},t.getKeyBefore=function(i){return this.getBlockMap().reverse().keySeq().skipUntil(function(a){return a===i}).skip(1).first()},t.getKeyAfter=function(i){return this.getBlockMap().keySeq().skipUntil(function(a){return a===i}).skip(1).first()},t.getBlockAfter=function(i){return this.getBlockMap().skipUntil(function(a,o){return o===i}).skip(1).first()},t.getBlockBefore=function(i){return this.getBlockMap().reverse().skipUntil(function(a,o){return o===i}).skip(1).first()},t.getBlocksAsArray=function(){return this.getBlockMap().toArray()},t.getFirstBlock=function(){return this.getBlockMap().first()},t.getLastBlock=function(){return this.getBlockMap().last()},t.getPlainText=function(i){return this.getBlockMap().map(function(a){return a?a.getText():""}).join(i||`
`)},t.getLastCreatedEntityKey=function(){return $o.__getLastCreatedEntityKey()},t.hasText=function(){var i=this.getBlockMap();return i.size>1||escape(i.first().getText()).replace(/%u200B/g,"").length>0},t.createEntity=function(i,a,o){return $o.__create(i,a,o),this},t.mergeEntityData=function(i,a){return $o.__mergeData(i,a),this},t.replaceEntityData=function(i,a){return $o.__replaceData(i,a),this},t.addEntity=function(i){return $o.__add(i),this},t.getEntity=function(i){return $o.__get(i)},t.getAllEntities=function(){return $o.__getAll()},t.loadWithEntities=function(i){return $o.__loadWithEntities(i)},e.createFromBlockArray=function(i,a){var o=Array.isArray(i)?i:i.contentBlocks,s=pue.createFromArray(o),l=s.isEmpty()?new og:og.createEmpty(s.first().getKey());return new e({blockMap:s,entityMap:a||$o,selectionBefore:l,selectionAfter:l})},e.createFromText=function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:/\r\n?|\n/g,o=i.split(a),s=o.map(function(l){return l=vue(l),new _R({key:gue(),text:l,type:"unstyled",characterList:gR(yue(SR.EMPTY,l.length))})});return e.createFromBlockArray(s)},e.fromJS=function(i){return new e(mR({},i,{blockMap:Cue(i.blockMap).map(e.createContentBlockFromJS),selectionBefore:new og(i.selectionBefore),selectionAfter:new og(i.selectionAfter)}))},e.createContentBlockFromJS=function(i){var a=i.characterList;return new _R(mR({},i,{data:Eue(i.data),characterList:a!=null?gR((Array.isArray(a)?a:_ue(a)).map(function(o){return SR.fromJS(o)})):void 0}))},e}(Due),ZV=Fue,e_=r0,Tue="NEUTRAL",x2="LTR",JN="RTL",qg=null;function t_(n){return n===x2||n===JN}function ZN(n){return t_(n)||e_(!1),n===x2?"ltr":"rtl"}function bue(n,e){return t_(n)||e_(!1),t_(e)||e_(!1),n===e?null:ZN(n)}function $N(n){qg=n}function Pue(){$N(x2)}function Rue(){return qg||this.initGlobalDir(),qg||e_(!1),qg}var Lue={NEUTRAL:Tue,LTR:x2,RTL:JN,isStrong:t_,getHTMLDir:ZN,getHTMLDirIfDifferent:bue,setGlobalDir:$N,initGlobalDir:Pue,getGlobalDir:Rue},v2=Lue,nl=v2,Bue=r0,Rh={L:"A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u01BA\u01BB\u01BC-\u01BF\u01C0-\u01C3\u01C4-\u0293\u0294\u0295-\u02AF\u02B0-\u02B8\u02BB-\u02C1\u02D0-\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376-\u0377\u037A\u037B-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0482\u048A-\u052F\u0531-\u0556\u0559\u055A-\u055F\u0561-\u0587\u0589\u0903\u0904-\u0939\u093B\u093D\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0950\u0958-\u0961\u0964-\u0965\u0966-\u096F\u0970\u0971\u0972-\u0980\u0982-\u0983\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09CE\u09D7\u09DC-\u09DD\u09DF-\u09E1\u09E6-\u09EF\u09F0-\u09F1\u09F4-\u09F9\u09FA\u0A03\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0AD0\u0AE0-\u0AE1\u0AE6-\u0AEF\u0AF0\u0B02-\u0B03\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0B5C-\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B70\u0B71\u0B72-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BEF\u0BF0-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C59\u0C60-\u0C61\u0C66-\u0C6F\u0C7F\u0C82-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CBE\u0CBF\u0CC0-\u0CC4\u0CC6\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0CDE\u0CE0-\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF2\u0D02-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D57\u0D60-\u0D61\u0D66-\u0D6F\u0D70-\u0D75\u0D79\u0D7A-\u0D7F\u0D82-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF3\u0DF4\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E46\u0E4F\u0E50-\u0E59\u0E5A-\u0E5B\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F01-\u0F03\u0F04-\u0F12\u0F13\u0F14\u0F15-\u0F17\u0F1A-\u0F1F\u0F20-\u0F29\u0F2A-\u0F33\u0F34\u0F36\u0F38\u0F3E-\u0F3F\u0F40-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FCF\u0FD0-\u0FD4\u0FD5-\u0FD8\u0FD9-\u0FDA\u1000-\u102A\u102B-\u102C\u1031\u1038\u103B-\u103C\u103F\u1040-\u1049\u104A-\u104F\u1050-\u1055\u1056-\u1057\u105A-\u105D\u1061\u1062-\u1064\u1065-\u1066\u1067-\u106D\u106E-\u1070\u1075-\u1081\u1083-\u1084\u1087-\u108C\u108E\u108F\u1090-\u1099\u109A-\u109C\u109E-\u109F\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FB\u10FC\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u1368\u1369-\u137C\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166D-\u166E\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EB-\u16ED\u16EE-\u16F0\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1735-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7-\u17C8\u17D4-\u17D6\u17D7\u17D8-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1842\u1843\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1946-\u194F\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C0\u19C1-\u19C7\u19C8-\u19C9\u19D0-\u19D9\u19DA\u1A00-\u1A16\u1A19-\u1A1A\u1A1E-\u1A1F\u1A20-\u1A54\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AA6\u1AA7\u1AA8-\u1AAD\u1B04\u1B05-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B45-\u1B4B\u1B50-\u1B59\u1B5A-\u1B60\u1B61-\u1B6A\u1B74-\u1B7C\u1B82\u1B83-\u1BA0\u1BA1\u1BA6-\u1BA7\u1BAA\u1BAE-\u1BAF\u1BB0-\u1BB9\u1BBA-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1BFC-\u1BFF\u1C00-\u1C23\u1C24-\u1C2B\u1C34-\u1C35\u1C3B-\u1C3F\u1C40-\u1C49\u1C4D-\u1C4F\u1C50-\u1C59\u1C5A-\u1C77\u1C78-\u1C7D\u1C7E-\u1C7F\u1CC0-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF2-\u1CF3\u1CF5-\u1CF6\u1D00-\u1D2B\u1D2C-\u1D6A\u1D6B-\u1D77\u1D78\u1D79-\u1D9A\u1D9B-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2134\u2135-\u2138\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2182\u2183-\u2184\u2185-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2C7B\u2C7C-\u2C7D\u2C7E-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005\u3006\u3007\u3021-\u3029\u302E-\u302F\u3031-\u3035\u3038-\u303A\u303B\u303C\u3041-\u3096\u309D-\u309E\u309F\u30A1-\u30FA\u30FC-\u30FE\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u3191\u3192-\u3195\u3196-\u319F\u31A0-\u31BA\u31F0-\u31FF\u3200-\u321C\u3220-\u3229\u322A-\u3247\u3248-\u324F\u3260-\u327B\u327F\u3280-\u3289\u328A-\u32B0\u32C0-\u32CB\u32D0-\u32FE\u3300-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA014\uA015\uA016-\uA48C\uA4D0-\uA4F7\uA4F8-\uA4FD\uA4FE-\uA4FF\uA500-\uA60B\uA60C\uA610-\uA61F\uA620-\uA629\uA62A-\uA62B\uA640-\uA66D\uA66E\uA680-\uA69B\uA69C-\uA69D\uA6A0-\uA6E5\uA6E6-\uA6EF\uA6F2-\uA6F7\uA722-\uA76F\uA770\uA771-\uA787\uA789-\uA78A\uA78B-\uA78E\uA790-\uA7AD\uA7B0-\uA7B1\uA7F7\uA7F8-\uA7F9\uA7FA\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA823-\uA824\uA827\uA830-\uA835\uA836-\uA837\uA840-\uA873\uA880-\uA881\uA882-\uA8B3\uA8B4-\uA8C3\uA8CE-\uA8CF\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8F8-\uA8FA\uA8FB\uA900-\uA909\uA90A-\uA925\uA92E-\uA92F\uA930-\uA946\uA952-\uA953\uA95F\uA960-\uA97C\uA983\uA984-\uA9B2\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uA9C1-\uA9CD\uA9CF\uA9D0-\uA9D9\uA9DE-\uA9DF\uA9E0-\uA9E4\uA9E6\uA9E7-\uA9EF\uA9F0-\uA9F9\uA9FA-\uA9FE\uAA00-\uAA28\uAA2F-\uAA30\uAA33-\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA5F\uAA60-\uAA6F\uAA70\uAA71-\uAA76\uAA77-\uAA79\uAA7A\uAA7B\uAA7D\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAADD\uAADE-\uAADF\uAAE0-\uAAEA\uAAEB\uAAEE-\uAAEF\uAAF0-\uAAF1\uAAF2\uAAF3-\uAAF4\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5B\uAB5C-\uAB5F\uAB64-\uAB65\uABC0-\uABE2\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEB\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uE000-\uF8FF\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFF6F\uFF70\uFF71-\uFF9D\uFF9E-\uFF9F\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",R:"\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F",AL:"\u0608\u060B\u060D\u061B\u061C\u061D\u061E-\u061F\u0620-\u063F\u0640\u0641-\u064A\u066D\u066E-\u066F\u0671-\u06D3\u06D4\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FD-\u06FE\u06FF\u0700-\u070D\u070E\u070F\u0710\u0712-\u072F\u074B-\u074C\u074D-\u07A5\u07B1\u07B2-\u07BF\u08A0-\u08B2\u08B3-\u08E3\uFB50-\uFBB1\uFBB2-\uFBC1\uFBC2-\uFBD2\uFBD3-\uFD3D\uFD40-\uFD4F\uFD50-\uFD8F\uFD90-\uFD91\uFD92-\uFDC7\uFDC8-\uFDCF\uFDF0-\uFDFB\uFDFC\uFDFE-\uFDFF\uFE70-\uFE74\uFE75\uFE76-\uFEFC\uFEFD-\uFEFE"},Mue=new RegExp("["+Rh.L+Rh.R+Rh.AL+"]"),Iue=new RegExp("["+Rh.R+Rh.AL+"]");function e7(n){var e=Mue.exec(n);return e==null?null:e[0]}function t7(n){var e=e7(n);return e==null?nl.NEUTRAL:Iue.exec(e)?nl.RTL:nl.LTR}function n7(n,e){if(e=e||nl.NEUTRAL,!n.length)return e;var t=t7(n);return t===nl.NEUTRAL?e:t}function $V(n,e){return e||(e=nl.getGlobalDir()),nl.isStrong(e)||Bue(!1),n7(n,e)}function Oue(n,e){return $V(n,e)===nl.LTR}function kue(n,e){return $V(n,e)===nl.RTL}var Nue={firstStrongChar:e7,firstStrongCharDir:t7,resolveBlockDir:n7,getDirection:$V,isDirectionLTR:Oue,isDirectionRTL:kue},eD=Nue;function xR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Uue=eD,vR=v2,jue=r0,Gue=function(){function n(t){xR(this,"_defaultDir",void 0),xR(this,"_lastDir",void 0),t?vR.isStrong(t)||jue(!1):t=vR.getGlobalDir(),this._defaultDir=t,this.reset()}var e=n.prototype;return e.reset=function(){this._lastDir=this._defaultDir},e.getDirection=function(r){return this._lastDir=Uue.getDirection(r,this._lastDir),this._lastDir},n}(),Hue=Gue,zue=function(e){if(e!=null)return e;throw new Error("Got unexpected null or undefined")},ha=zue,Wue=Hue,r7=Jn.exports,Xue=ha,Kue=r7.OrderedMap,sg,Yue={getDirectionMap:function(e,t){sg?sg.reset():sg=new Wue;var r=e.getBlockMap(),i=r.valueSeq().map(function(o){return Xue(sg).getDirection(o.getText())}),a=Kue(r.keySeq().zip(i));return t!=null&&r7.is(t,a)?t:a}},que=Yue;function wR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){i7(n,i,t[i])})}return n}function i7(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var w2=Wce,Qf=ZV,lg=que,tw=_2,hm=Jn.exports,a7=hm.OrderedSet,Que=hm.Record,xu=hm.Stack,yR=hm.OrderedMap,Jue=hm.List,Zue={allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:xu(),selection:null,treeMap:null,undoStack:xu()},ER=Que(Zue),o7=function(){e.createEmpty=function(r){return this.createWithText("",r)},e.createWithText=function(r,i){return e.createWithContent(Qf.createFromText(r),i)},e.createWithContent=function(r,i){if(r.getBlockMap().count()===0)return e.createEmpty(i);var a=r.getBlockMap().first().getKey();return e.create({currentContent:r,undoStack:xu(),redoStack:xu(),decorator:i||null,selection:tw.createEmpty(a)})},e.create=function(r){var i=r.currentContent,a=r.decorator,o=wR({},r,{treeMap:VR(i,a),directionMap:lg.getDirectionMap(i)});return new e(new ER(o))},e.fromJS=function(r){return new e(new ER(wR({},r,{directionMap:r.directionMap!=null?yR(r.directionMap):r.directionMap,inlineStyleOverride:r.inlineStyleOverride!=null?a7(r.inlineStyleOverride):r.inlineStyleOverride,nativelyRenderedContent:r.nativelyRenderedContent!=null?Qf.fromJS(r.nativelyRenderedContent):r.nativelyRenderedContent,redoStack:r.redoStack!=null?xu(r.redoStack.map(function(i){return Qf.fromJS(i)})):r.redoStack,selection:r.selection!=null?new tw(r.selection):r.selection,treeMap:r.treeMap!=null?yR(r.treeMap).map(function(i){return Jue(i).map(function(a){return w2.fromJS(a)})}):r.treeMap,undoStack:r.undoStack!=null?xu(r.undoStack.map(function(i){return Qf.fromJS(i)})):r.undoStack,currentContent:Qf.fromJS(r.currentContent)})))},e.set=function(r,i){var a=r.getImmutable().withMutations(function(o){var s=o.get("decorator"),l=s;i.decorator===null?l=null:i.decorator&&(l=i.decorator);var u=i.currentContent||r.getCurrentContent();if(l!==s){var d=o.get("treeMap"),h;l&&s?h=ede(u,u.getBlockMap(),d,l,s):h=VR(u,l),o.merge({decorator:l,treeMap:h,nativelyRenderedContent:null});return}var f=r.getCurrentContent();u!==f&&o.set("treeMap",$ue(r,u.getBlockMap(),u.getEntityMap(),l)),o.merge(i)});return new e(a)};var n=e.prototype;n.toJS=function(){return this.getImmutable().toJS()},n.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},n.getCurrentContent=function(){return this.getImmutable().get("currentContent")},n.getUndoStack=function(){return this.getImmutable().get("undoStack")},n.getRedoStack=function(){return this.getImmutable().get("redoStack")},n.getSelection=function(){return this.getImmutable().get("selection")},n.getDecorator=function(){return this.getImmutable().get("decorator")},n.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},n.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},n.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},n.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},n.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},e.setInlineStyleOverride=function(r,i){return e.set(r,{inlineStyleOverride:i})},n.getCurrentInlineStyle=function(){var r=this.getInlineStyleOverride();if(r!=null)return r;var i=this.getCurrentContent(),a=this.getSelection();return a.isCollapsed()?nde(i,a):rde(i,a)},n.getBlockTree=function(r){return this.getImmutable().getIn(["treeMap",r])},n.isSelectionAtStartOfContent=function(){var r=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(r,0,0)},n.isSelectionAtEndOfContent=function(){var r=this.getCurrentContent(),i=r.getBlockMap(),a=i.last(),o=a.getLength();return this.getSelection().hasEdgeWithin(a.getKey(),o,o)},n.getDirectionMap=function(){return this.getImmutable().get("directionMap")},e.acceptSelection=function(r,i){return CR(r,i,!1)},e.forceSelection=function(r,i){return i.getHasFocus()||(i=i.set("hasFocus",!0)),CR(r,i,!0)},e.moveSelectionToEnd=function(r){var i=r.getCurrentContent(),a=i.getLastBlock(),o=a.getKey(),s=a.getLength();return e.acceptSelection(r,new tw({anchorKey:o,anchorOffset:s,focusKey:o,focusOffset:s,isBackward:!1}))},e.moveFocusToEnd=function(r){var i=e.moveSelectionToEnd(r);return e.forceSelection(i,i.getSelection())},e.push=function(r,i,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(r.getCurrentContent()===i)return r;var s=lg.getDirectionMap(i,r.getDirectionMap());if(!r.getAllowUndo())return e.set(r,{currentContent:i,directionMap:s,lastChangeType:a,selection:i.getSelectionAfter(),forceSelection:o,inlineStyleOverride:null});var l=r.getSelection(),u=r.getCurrentContent(),d=r.getUndoStack(),h=i;l!==u.getSelectionAfter()||tde(r,a)?(d=d.push(u),h=h.set("selectionBefore",l)):(a==="insert-characters"||a==="backspace-character"||a==="delete-character")&&(h=h.set("selectionBefore",u.getSelectionBefore()));var f=r.getInlineStyleOverride(),m=["adjust-depth","change-block-type","split-block"];m.indexOf(a)===-1&&(f=null);var g={currentContent:h,directionMap:s,undoStack:d,redoStack:xu(),lastChangeType:a,selection:i.getSelectionAfter(),forceSelection:o,inlineStyleOverride:f};return e.set(r,g)},e.undo=function(r){if(!r.getAllowUndo())return r;var i=r.getUndoStack(),a=i.peek();if(!a)return r;var o=r.getCurrentContent(),s=lg.getDirectionMap(a,r.getDirectionMap());return e.set(r,{currentContent:a,directionMap:s,undoStack:i.shift(),redoStack:r.getRedoStack().push(o),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:o.getSelectionBefore()})},e.redo=function(r){if(!r.getAllowUndo())return r;var i=r.getRedoStack(),a=i.peek();if(!a)return r;var o=r.getCurrentContent(),s=lg.getDirectionMap(a,r.getDirectionMap());return e.set(r,{currentContent:a,directionMap:s,undoStack:r.getUndoStack().push(o),redoStack:i.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:a.getSelectionAfter()})};function e(t){i7(this,"_immutable",void 0),this._immutable=t}return n.getImmutable=function(){return this._immutable},e}();function CR(n,e,t){return o7.set(n,{selection:e,forceSelection:t,nativelyRenderedContent:null,inlineStyleOverride:null})}function VR(n,e){return n.getBlockMap().map(function(t){return w2.generate(n,t,e)}).toOrderedMap()}function $ue(n,e,t,r){var i=n.getCurrentContent().set("entityMap",t),a=i.getBlockMap(),o=n.getImmutable().get("treeMap");return o.merge(e.toSeq().filter(function(s,l){return s!==a.get(l)}).map(function(s){return w2.generate(i,s,r)}))}function ede(n,e,t,r,i){return t.merge(e.toSeq().filter(function(a){return r.getDecorations(a,n)!==i.getDecorations(a,n)}).map(function(a){return w2.generate(n,a,r)}))}function tde(n,e){var t=n.getLastChangeType();return e!==t||e!=="insert-characters"&&e!=="backspace-character"&&e!=="delete-character"}function nde(n,e){var t=e.getStartKey(),r=e.getStartOffset(),i=n.getBlockForKey(t);return r>0?i.getInlineStyleAt(r-1):i.getLength()?i.getInlineStyleAt(0):s7(n,t)}function rde(n,e){var t=e.getStartKey(),r=e.getStartOffset(),i=n.getBlockForKey(t);return r<i.getLength()?i.getInlineStyleAt(r):r>0?i.getInlineStyleAt(r-1):s7(n,t)}function s7(n,e){var t=n.getBlockMap().reverse().skipUntil(function(r,i){return i===e}).skip(1).skipUntil(function(r,i){return r.getLength()}).first();return t?t.getInlineStyleAt(t.getLength()-1):a7()}var I0=o7,ide=So,ade=jN,l7=Jn.exports,cg=r0,ode=l7.OrderedMap,sde=l7.List,su=function(e,t,r){if(!!e){var i=t.get(e);!i||t.set(e,r(i))}},lde=function(e,t,r,i,a){if(!a)return e;var o=i==="after",s=t.getKey(),l=r.getKey(),u=t.getParentKey(),d=t.getNextSiblingKey(),h=t.getPrevSiblingKey(),f=r.getParentKey(),m=o?r.getNextSiblingKey():l,g=o?l:r.getPrevSiblingKey();return e.withMutations(function(_){su(u,_,function(E){var x=E.getChildKeys();return E.merge({children:x.delete(x.indexOf(s))})}),su(h,_,function(E){return E.merge({nextSibling:d})}),su(d,_,function(E){return E.merge({prevSibling:h})}),su(m,_,function(E){return E.merge({prevSibling:s})}),su(g,_,function(E){return E.merge({nextSibling:s})}),su(f,_,function(E){var x=E.getChildKeys(),v=x.indexOf(l),C=o?v+1:v!==0?v-1:0,V=x.toArray();return V.splice(C,0,s),E.merge({children:sde(V)})}),su(s,_,function(E){return E.merge({nextSibling:m,prevSibling:g,parent:f})})})},cde=function(e,t,r,i){i==="replace"&&cg(!1);var a=r.getKey(),o=t.getKey();o===a&&cg(!1);var s=e.getBlockMap(),l=t instanceof ide,u=[t],d=s.delete(o);l&&(u=[],d=s.withMutations(function(x){var v=t.getNextSiblingKey(),C=ade(t,x);x.toSeq().skipUntil(function(V){return V.getKey()===o}).takeWhile(function(V){var D=V.getKey(),H=D===o,R=v&&D!==v,j=!v&&V.getParentKey()&&(!C||D!==C);return!!(H||R||j)}).forEach(function(V){u.push(V),x.delete(V.getKey())})}));var h=d.toSeq().takeUntil(function(x){return x===r}),f=d.toSeq().skipUntil(function(x){return x===r}).skip(1),m=u.map(function(x){return[x.getKey(),x]}),g=ode();if(i==="before"){var _=e.getBlockBefore(a);!_||_.getKey()!==t.getKey()||cg(!1),g=h.concat([].concat(m,[[a,r]]),f).toOrderedMap()}else if(i==="after"){var E=e.getBlockAfter(a);!E||E.getKey()!==o||cg(!1),g=h.concat([[a,r]].concat(m),f).toOrderedMap()}return e.merge({blockMap:lde(g,t,r,i,l),selectionBefore:e.getSelectionAfter(),selectionAfter:e.getSelectionAfter().merge({anchorKey:o,focusKey:o})})},ude=cde;function DR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){dde(n,i,t[i])})}return n}function dde(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Ade=cm,fde=mo,hde=ld,pde=So,S1=fa,FR=I0,TR=ys,mde=Nc,c7=Jn.exports,ug=ude,u7=mde("draft_tree_data_support"),bR=u7?pde:hde,Sde=c7.List,gde=c7.Repeat,_de={insertAtomicBlock:function(e,t,r){var i=e.getCurrentContent(),a=e.getSelection(),o=S1.removeRange(i,a,"backward"),s=o.getSelectionAfter(),l=S1.splitBlock(o,s),u=l.getSelectionAfter(),d=S1.setBlockType(l,u,"atomic"),h=fde.create({entity:t}),f={key:TR(),type:"atomic",text:r,characterList:Sde(gde(h,r.length))},m={key:TR(),type:"unstyled"};u7&&(f=DR({},f,{nextSibling:m.key}),m=DR({},m,{prevSibling:f.key}));var g=[new bR(f),new bR(m)],_=Ade.createFromArray(g),E=S1.replaceWithFragment(d,u,_),x=E.merge({selectionBefore:a,selectionAfter:E.getSelectionAfter().set("hasFocus",!0)});return FR.push(e,x,"insert-fragment")},moveAtomicBlock:function(e,t,r,i){var a=e.getCurrentContent(),o=e.getSelection(),s;if(i==="before"||i==="after"){var l=a.getBlockForKey(i==="before"?r.getStartKey():r.getEndKey());s=ug(a,t,l,i)}else{var u=S1.removeRange(a,r,"backward"),d=u.getSelectionAfter(),h=u.getBlockForKey(d.getFocusKey());if(d.getStartOffset()===0)s=ug(u,t,h,"before");else if(d.getEndOffset()===h.getLength())s=ug(u,t,h,"after");else{var f=S1.splitBlock(u,d),m=f.getSelectionAfter(),g=f.getBlockForKey(m.getFocusKey());s=ug(f,t,g,"before")}}var _=s.merge({selectionBefore:o,selectionAfter:s.getSelectionAfter().set("hasFocus",!0)});return FR.push(e,_,"move-block")}},xde=_de;function vde(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var wde=Jn.exports,yde=wde.List,nw=".",Ede=function(){function n(t){vde(this,"_decorators",void 0),this._decorators=t.slice()}var e=n.prototype;return e.getDecorations=function(r,i){var a=Array(r.getText().length).fill(null);return this._decorators.forEach(function(o,s){var l=0,u=o.strategy,d=function(f,m){Cde(a,f,m)&&(Vde(a,f,m,s+nw+l),l++)};u(r,d,i)}),yde(a)},e.getComponentForKey=function(r){var i=parseInt(r.split(nw)[0],10);return this._decorators[i].component},e.getPropsForKey=function(r){var i=parseInt(r.split(nw)[0],10);return this._decorators[i].props},n}();function Cde(n,e,t){for(var r=e;r<t;r++)if(n[r]!=null)return!1;return!0}function Vde(n,e,t,r){for(var i=e;i<t;i++)n[i]=r}var Dde=Ede;const Xo=pW(iae);function Fde(n){return typeof n=="object"?Object.keys(n).filter(function(e){return n[e]}).map(PR).join(" "):Array.prototype.map.call(arguments,PR).join(" ")}function PR(n){return n.replace(/\//g,"-")}var cd=Fde,tD=Xo.jsx,nD=cd,Tde=Jn.exports,bde=Tde.Map,Pde=tD("ul",{className:nD("public/DraftStyleDefault/ul")}),Rde=tD("ol",{className:nD("public/DraftStyleDefault/ol")}),Lde=tD("pre",{className:nD("public/DraftStyleDefault/pre")}),Bde=bde({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},section:{element:"section"},article:{element:"article"},"unordered-list-item":{element:"li",wrapper:Pde},"ordered-list-item":{element:"li",wrapper:Rde},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:Lde},unstyled:{element:"div",aliasedElements:["p"]}}),rD=Bde,d7={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var RR=Object.getOwnPropertySymbols,Mde=Object.prototype.hasOwnProperty,Ide=Object.prototype.propertyIsEnumerable;function Ode(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function kde(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(e).map(function(a){return e[a]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Nde=kde()?Object.assign:function(n,e){for(var t,r=Ode(n),i,a=1;a<arguments.length;a++){t=Object(arguments[a]);for(var o in t)Mde.call(t,o)&&(r[o]=t[o]);if(RR){i=RR(t);for(var s=0;s<i.length;s++)Ide.call(t,i[s])&&(r[i[s]]=t[i[s]])}}return r},b4={exports:{}};(function(n,e){(function(t,r){var i="0.7.31",a="",o="?",s="function",l="undefined",u="object",d="string",h="major",f="model",m="name",g="type",_="vendor",E="version",x="architecture",v="console",C="mobile",V="tablet",D="smarttv",H="wearable",R="embedded",j=255,te="Amazon",$="Apple",z="ASUS",I="BlackBerry",q="Browser",P="Chrome",ee="Edge",ue="Firefox",U="Google",O="Huawei",G="LG",ne="Microsoft",se="Motorola",ie="Opera",Re="Samsung",Be="Sony",Te="Xiaomi",ye="Zebra",We="Facebook",at=function(Y,_e){var Fe={};for(var Le in Y)_e[Le]&&_e[Le].length%2===0?Fe[Le]=_e[Le].concat(Y[Le]):Fe[Le]=Y[Le];return Fe},Ke=function(Y){for(var _e={},Fe=0;Fe<Y.length;Fe++)_e[Y[Fe].toUpperCase()]=Y[Fe];return _e},tt=function(Y,_e){return typeof Y===d?lt(_e).indexOf(lt(Y))!==-1:!1},lt=function(Y){return Y.toLowerCase()},Ie=function(Y){return typeof Y===d?Y.replace(/[^\d\.]/g,a).split(".")[0]:r},Ue=function(Y,_e){if(typeof Y===d)return Y=Y.replace(/^\s\s*/,a).replace(/\s\s*$/,a),typeof _e===l?Y:Y.substring(0,j)},k=function(Y,_e){for(var Fe=0,Le,Pe,rt,Ee,ve,$e;Fe<_e.length&&!ve;){var _t=_e[Fe],gt=_e[Fe+1];for(Le=Pe=0;Le<_t.length&&!ve;)if(ve=_t[Le++].exec(Y),ve)for(rt=0;rt<gt.length;rt++)$e=ve[++Pe],Ee=gt[rt],typeof Ee===u&&Ee.length>0?Ee.length===2?typeof Ee[1]==s?this[Ee[0]]=Ee[1].call(this,$e):this[Ee[0]]=Ee[1]:Ee.length===3?typeof Ee[1]===s&&!(Ee[1].exec&&Ee[1].test)?this[Ee[0]]=$e?Ee[1].call(this,$e,Ee[2]):r:this[Ee[0]]=$e?$e.replace(Ee[1],Ee[2]):r:Ee.length===4&&(this[Ee[0]]=$e?Ee[3].call(this,$e.replace(Ee[1],Ee[2])):r):this[Ee]=$e||r;Fe+=2}},De=function(Y,_e){for(var Fe in _e)if(typeof _e[Fe]===u&&_e[Fe].length>0){for(var Le=0;Le<_e[Fe].length;Le++)if(tt(_e[Fe][Le],Y))return Fe===o?r:Fe}else if(tt(_e[Fe],Y))return Fe===o?r:Fe;return Y},we={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},le={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},re={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[E,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[E,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,E],[/opios[\/ ]+([\w\.]+)/i],[E,[m,ie+" Mini"]],[/\bopr\/([\w\.]+)/i],[E,[m,ie]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[m,E],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[E,[m,"UC"+q]],[/\bqbcore\/([\w\.]+)/i],[E,[m,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[E,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[E,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[E,[m,"IE"]],[/yabrowser\/([\w\.]+)/i],[E,[m,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+q],E],[/\bfocus\/([\w\.]+)/i],[E,[m,ue+" Focus"]],[/\bopt\/([\w\.]+)/i],[E,[m,ie+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[E,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[E,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[E,[m,ie+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[E,[m,"MIUI "+q]],[/fxios\/([-\w\.]+)/i],[E,[m,ue]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+q]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+q],E],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],E],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[m,E],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,We],E],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[m,E],[/\bgsa\/([\w\.]+) .*safari\//i],[E,[m,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[E,[m,P+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,P+" WebView"],E],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[E,[m,"Android "+q]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,E],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[E,[m,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[E,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[E,De,we]],[/(webkit|khtml)\/([\w\.]+)/i],[m,E],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],E],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[E,[m,ue+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[m,E]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[x,"amd64"]],[/(ia32(?=;))/i],[[x,lt]],[/((?:i[346]|x)86)[;\)]/i],[[x,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[x,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[x,"armhf"]],[/windows (ce|mobile); ppc;/i],[[x,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[x,/ower/,a,lt]],[/(sun4\w)[;\)]/i],[[x,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[x,lt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[_,Re],[g,V]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[_,Re],[g,C]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[_,$],[g,C]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[_,$],[g,V]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[_,O],[g,V]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[f,[_,O],[g,C]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[_,Te],[g,C]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[_,Te],[g,V]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[_,"OPPO"],[g,C]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[_,"Vivo"],[g,C]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[_,"Realme"],[g,C]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[_,se],[g,C]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[_,se],[g,V]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[_,G],[g,V]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[_,G],[g,C]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[_,"Lenovo"],[g,V]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[_,"Nokia"],[g,C]],[/(pixel c)\b/i],[f,[_,U],[g,V]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[_,U],[g,C]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[_,Be],[g,C]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[_,Be],[g,V]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[_,"OnePlus"],[g,C]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[_,te],[g,V]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[_,te],[g,C]],[/(playbook);[-\w\),; ]+(rim)/i],[f,_,[g,V]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[_,I],[g,C]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[_,z],[g,V]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[_,z],[g,C]],[/(nexus 9)/i],[f,[_,"HTC"],[g,V]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[_,[f,/_/g," "],[g,C]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[_,"Acer"],[g,V]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[_,"Meizu"],[g,C]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[_,"Sharp"],[g,C]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[_,f,[g,C]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[_,f,[g,V]],[/(surface duo)/i],[f,[_,ne],[g,V]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[_,"Fairphone"],[g,C]],[/(u304aa)/i],[f,[_,"AT&T"],[g,C]],[/\bsie-(\w*)/i],[f,[_,"Siemens"],[g,C]],[/\b(rct\w+) b/i],[f,[_,"RCA"],[g,V]],[/\b(venue[\d ]{2,7}) b/i],[f,[_,"Dell"],[g,V]],[/\b(q(?:mv|ta)\w+) b/i],[f,[_,"Verizon"],[g,V]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[_,"Barnes & Noble"],[g,V]],[/\b(tm\d{3}\w+) b/i],[f,[_,"NuVision"],[g,V]],[/\b(k88) b/i],[f,[_,"ZTE"],[g,V]],[/\b(nx\d{3}j) b/i],[f,[_,"ZTE"],[g,C]],[/\b(gen\d{3}) b.+49h/i],[f,[_,"Swiss"],[g,C]],[/\b(zur\d{3}) b/i],[f,[_,"Swiss"],[g,V]],[/\b((zeki)?tb.*\b) b/i],[f,[_,"Zeki"],[g,V]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[_,"Dragon Touch"],f,[g,V]],[/\b(ns-?\w{0,9}) b/i],[f,[_,"Insignia"],[g,V]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[_,"NextBook"],[g,V]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[_,"Voice"],f,[g,C]],[/\b(lvtel\-)?(v1[12]) b/i],[[_,"LvTel"],f,[g,C]],[/\b(ph-1) /i],[f,[_,"Essential"],[g,C]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[_,"Envizen"],[g,V]],[/\b(trio[-\w\. ]+) b/i],[f,[_,"MachSpeed"],[g,V]],[/\btu_(1491) b/i],[f,[_,"Rotor"],[g,V]],[/(shield[\w ]+) b/i],[f,[_,"Nvidia"],[g,V]],[/(sprint) (\w+)/i],[_,f,[g,C]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[_,ne],[g,C]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[_,ye],[g,V]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[_,ye],[g,C]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[_,f,[g,v]],[/droid.+; (shield) bui/i],[f,[_,"Nvidia"],[g,v]],[/(playstation [345portablevi]+)/i],[f,[_,Be],[g,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[_,ne],[g,v]],[/smart-tv.+(samsung)/i],[_,[g,D]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[_,Re],[g,D]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[_,G],[g,D]],[/(apple) ?tv/i],[_,[f,$+" TV"],[g,D]],[/crkey/i],[[f,P+"cast"],[_,U],[g,D]],[/droid.+aft(\w)( bui|\))/i],[f,[_,te],[g,D]],[/\(dtv[\);].+(aquos)/i],[f,[_,"Sharp"],[g,D]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[_,Ue],[f,Ue],[g,D]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[g,D]],[/((pebble))app/i],[_,f,[g,H]],[/droid.+; (glass) \d/i],[f,[_,U],[g,H]],[/droid.+; (wt63?0{2,3})\)/i],[f,[_,ye],[g,H]],[/(quest( 2)?)/i],[f,[_,We],[g,H]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[_,[g,R]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[g,C]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[g,V]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[g,V]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[g,C]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[_,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[E,[m,ee+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[E,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[m,E],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[E,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,E],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[m,[E,De,le]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,"Windows"],[E,De,le]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[E,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,"Mac OS"],[E,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[E,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,E],[/\(bb(10);/i],[E,[m,I]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[E,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[E,[m,ue+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[E,[m,"webOS"]],[/crkey\/([\d\.]+)/i],[E,[m,P+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[m,"Chromium OS"],E],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,E],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],E],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[m,E]]},fe=function(Y,_e){if(typeof Y===u&&(_e=Y,Y=r),!(this instanceof fe))return new fe(Y,_e).getResult();var Fe=Y||(typeof t!==l&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:a),Le=_e?at(re,_e):re;return this.getBrowser=function(){var Pe={};return Pe[m]=r,Pe[E]=r,k.call(Pe,Fe,Le.browser),Pe.major=Ie(Pe.version),Pe},this.getCPU=function(){var Pe={};return Pe[x]=r,k.call(Pe,Fe,Le.cpu),Pe},this.getDevice=function(){var Pe={};return Pe[_]=r,Pe[f]=r,Pe[g]=r,k.call(Pe,Fe,Le.device),Pe},this.getEngine=function(){var Pe={};return Pe[m]=r,Pe[E]=r,k.call(Pe,Fe,Le.engine),Pe},this.getOS=function(){var Pe={};return Pe[m]=r,Pe[E]=r,k.call(Pe,Fe,Le.os),Pe},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Fe},this.setUA=function(Pe){return Fe=typeof Pe===d&&Pe.length>j?Ue(Pe,j):Pe,this},this.setUA(Fe),this};fe.VERSION=i,fe.BROWSER=Ke([m,E,h]),fe.CPU=Ke([x]),fe.DEVICE=Ke([f,_,g,v,C,D,V,H,R]),fe.ENGINE=fe.OS=Ke([m,E]),n.exports&&(e=n.exports=fe),e.UAParser=fe;var He=typeof t!==l&&(t.jQuery||t.Zepto);if(He&&!He.ua){var oe=new fe;He.ua=oe.getResult(),He.ua.get=function(){return oe.getUA()},He.ua.set=function(Y){oe.setUA(Y);var _e=oe.getResult();for(var Fe in _e)He.ua[Fe]=_e[Fe]}}})(typeof window=="object"?window:RA)})(b4,b4.exports);var Ude=b4.exports,Ka="Unknown",jde={"Mac OS":"Mac OS X"};function Gde(n){return jde[n]||n}function Hde(n){if(!n)return{major:"",minor:""};var e=n.split(".");return{major:e[0],minor:e[1]}}var zde=new Ude,Ya=zde.getResult(),Wde=Hde(Ya.browser.version),Xde={browserArchitecture:Ya.cpu.architecture||Ka,browserFullVersion:Ya.browser.version||Ka,browserMinorVersion:Wde.minor||Ka,browserName:Ya.browser.name||Ka,browserVersion:Ya.browser.major||Ka,deviceName:Ya.device.model||Ka,engineName:Ya.engine.name||Ka,engineVersion:Ya.engine.version||Ka,platformArchitecture:Ya.cpu.architecture||Ka,platformName:Gde(Ya.os.name)||Ka,platformVersion:Ya.os.version||Ka,platformFullVersion:Ya.os.version||Ka},Kde=Xde,n_=r0,A7=/\./,Yde=/\|\|/,qde=/\s+\-\s+/,Qde=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,LR=/^(\d*)(.*)/;function Jde(n,e){var t=n.split(Yde);return t.length>1?t.some(function(r){return m7.contains(r,e)}):(n=t[0].trim(),Zde(n,e))}function Zde(n,e){var t=n.split(qde);if(t.length>0&&t.length<=2||n_(!1),t.length===1)return rw(t[0],e);var r=t[0],i=t[1];return BR(r)&&BR(i)||n_(!1),rw(">="+r,e)&&rw("<="+i,e)}function rw(n,e){if(n=n.trim(),n==="")return!0;var t=e.split(A7),r=p7(n),i=r.modifier,a=r.rangeComponents;switch(i){case"<":return f7(t,a);case"<=":return $de(t,a);case">=":return h7(t,a);case">":return t1e(t,a);case"~":case"~>":return n1e(t,a);default:return e1e(t,a)}}function f7(n,e){return pm(n,e)===-1}function $de(n,e){var t=pm(n,e);return t===-1||t===0}function e1e(n,e){return pm(n,e)===0}function h7(n,e){var t=pm(n,e);return t===1||t===0}function t1e(n,e){return pm(n,e)===1}function n1e(n,e){var t=e.slice(),r=e.slice();r.length>1&&r.pop();var i=r.length-1,a=parseInt(r[i],10);return P4(a)&&(r[i]=a+1+""),h7(n,t)&&f7(n,r)}function p7(n){var e=n.split(A7),t=e[0].match(Qde);return t||n_(!1),{modifier:t[1],rangeComponents:[t[2]].concat(e.slice(1))}}function P4(n){return!isNaN(n)&&isFinite(n)}function BR(n){return!p7(n).modifier}function MR(n,e){for(var t=n.length;t<e;t++)n[t]="0"}function r1e(n,e){n=n.slice(),e=e.slice(),MR(n,e.length);for(var t=0;t<e.length;t++){var r=e[t].match(/^[x*]$/i);if(r&&(e[t]=n[t]="0",r[0]==="*"&&t===e.length-1))for(var i=t;i<n.length;i++)n[i]="0"}return MR(e,n.length),[n,e]}function i1e(n,e){var t=n.match(LR)[1],r=e.match(LR)[1],i=parseInt(t,10),a=parseInt(r,10);return P4(i)&&P4(a)&&i!==a?IR(i,a):IR(n,e)}function IR(n,e){return typeof n!=typeof e&&n_(!1),n>e?1:n<e?-1:0}function pm(n,e){for(var t=r1e(n,e),r=t[0],i=t[1],a=0;a<i.length;a++){var o=i1e(r[a],i[a]);if(o)return o}return 0}var m7={contains:function(e,t){return Jde(e.trim(),t.trim())}},a1e=m7,o1e=Object.prototype.hasOwnProperty;function s1e(n,e,t){if(!n)return null;var r={};for(var i in n)o1e.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}var l1e=s1e;function c1e(n){var e={};return function(t){return e.hasOwnProperty(t)||(e[t]=n.call(this,t)),e[t]}}var u1e=c1e,is=Kde,d1e=a1e,A1e=l1e,f1e=u1e;function g1(n,e,t,r){if(n===t)return!0;if(!t.startsWith(n))return!1;var i=t.slice(n.length);return e?(i=r?r(i):i,d1e.contains(i,e)):!1}function h1e(n){return is.platformName==="Windows"?n.replace(/^\s*NT/,""):n}var p1e={isBrowser:function(e){return g1(is.browserName,is.browserFullVersion,e)},isBrowserArchitecture:function(e){return g1(is.browserArchitecture,null,e)},isDevice:function(e){return g1(is.deviceName,null,e)},isEngine:function(e){return g1(is.engineName,is.engineVersion,e)},isPlatform:function(e){return g1(is.platformName,is.platformFullVersion,e,h1e)},isPlatformArchitecture:function(e){return g1(is.platformArchitecture,null,e)}},pa=A1e(p1e,f1e);function m1e(n){return!n||!n.ownerDocument?document:n.ownerDocument}var y2=m1e;function S1e(n){return!n||!n.ownerDocument?!1:n.nodeType===Node.ELEMENT_NODE}var ud=S1e,g1e=ud;function S7(n){if(g1e(n)){var e=n,t=e.getAttribute("data-offset-key");if(t)return t;for(var r=0;r<e.childNodes.length;r++){var i=S7(e.childNodes[r]);if(i)return i}}return null}var g7=S7,_1e=y2,x1e=g7;function v1e(n){for(var e=n;e&&e!==_1e(n).documentElement;){var t=x1e(e);if(t!=null)return t;e=e.parentNode}return null}var E2=v1e;function w1e(n){return!n||!n.ownerDocument||!n.ownerDocument.defaultView?window:n.ownerDocument.defaultView}var _7=w1e;function dg(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var y1e=pa,E1e=E2,C1e=_7,V1e=Jn.exports,D1e=r0,F1e=ha,OR=V1e.Map,T1e={subtree:!0,characterData:!0,childList:!0,characterDataOldValue:!1,attributes:!1},kR=y1e.isBrowser("IE <= 11"),b1e=function(){function n(t){var r=this;dg(this,"observer",void 0),dg(this,"container",void 0),dg(this,"mutations",void 0),dg(this,"onCharData",void 0),this.container=t,this.mutations=OR();var i=C1e(t);i.MutationObserver&&!kR?this.observer=new i.MutationObserver(function(a){return r.registerMutations(a)}):this.onCharData=function(a){a.target instanceof Node||D1e(!1),r.registerMutation({type:"characterData",target:a.target})}}var e=n.prototype;return e.start=function(){this.observer?this.observer.observe(this.container,T1e):this.container.addEventListener("DOMCharacterDataModified",this.onCharData)},e.stopAndFlushMutations=function(){var r=this.observer;r?(this.registerMutations(r.takeRecords()),r.disconnect()):this.container.removeEventListener("DOMCharacterDataModified",this.onCharData);var i=this.mutations;return this.mutations=OR(),i},e.registerMutations=function(r){for(var i=0;i<r.length;i++)this.registerMutation(r[i])},e.getMutationTextContent=function(r){var i=r.type,a=r.target,o=r.removedNodes;if(i==="characterData"){if(a.textContent!=="")return kR?a.textContent.replace(`
`,""):a.textContent}else if(i==="childList"){if(o&&o.length)return"";if(a.textContent!=="")return a.textContent}return null},e.registerMutation=function(r){var i=this.getMutationTextContent(r);if(i!=null){var a=F1e(E1e(r.target));this.mutations=this.mutations.set(a,i)}},n}(),P1e=b1e,Ag="-",R1e={encode:function(e,t,r){return e+Ag+t+Ag+r},decode:function(e){var t=e.split(Ag).reverse(),r=t[0],i=t[1],a=t.slice(2);return{blockKey:a.reverse().join(Ag),decoratorKey:parseInt(i,10),leafKey:parseInt(r,10)}}},hl=R1e,C2={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105},x7={logBlockedSelectionEvent:function(){return null},logSelectionStateFailure:function(){return null}};function L1e(n){return!n||!n.ownerDocument?!1:n.ownerDocument.defaultView?n instanceof n.ownerDocument.defaultView.HTMLElement:n instanceof HTMLElement}var mm=L1e,NR=r0,B1e=mm;function M1e(n){var e=n.editorContainer;e||NR(!1),B1e(e.firstChild)||NR(!1);var t=e.firstChild;return t}var v7=M1e,UR=hl,I1e=ha;function O1e(n,e,t,r,i){var a=I1e(n.getSelection());if(!e||!r)return a;var o=UR.decode(e),s=o.blockKey,l=n.getBlockTree(s),u=l&&l.getIn([o.decoratorKey,"leaves",o.leafKey]),d=UR.decode(r),h=d.blockKey,f=n.getBlockTree(h),m=f&&f.getIn([d.decoratorKey,"leaves",d.leafKey]);if(!u||!m)return a;var g=u.get("start"),_=m.get("start"),E=u?g+t:null,x=m?_+i:null,v=a.getAnchorKey()===s&&a.getAnchorOffset()===E&&a.getFocusKey()===h&&a.getFocusOffset()===x;if(v)return a;var C=!1;if(s===h){var V=u.get("end"),D=m.get("end");_===g&&D===V?C=i<t:C=_<g}else{var H=n.getCurrentContent().getBlockMap().keySeq().skipUntil(function(R){return R===s||R===h}).first();C=H===h}return a.merge({anchorKey:s,anchorOffset:E,focusKey:h,focusOffset:x,isBackward:C})}var w7=O1e,hh=E2,Lh=g7,jR=w7,iw=r0,iD=ud,Tu=ha;function k1e(n,e,t,r,i,a){var o=t.nodeType===Node.TEXT_NODE,s=i.nodeType===Node.TEXT_NODE;if(o&&s)return{selectionState:jR(n,Tu(hh(t)),r,Tu(hh(i)),a),needsRecovery:!1};var l=null,u=null,d=!0;return o?(l={key:Tu(hh(t)),offset:r},u=fg(e,i,a)):s?(u={key:Tu(hh(i)),offset:a},l=fg(e,t,r)):(l=fg(e,t,r),u=fg(e,i,a),t===i&&r===a&&(d=!!t.firstChild&&t.firstChild.nodeName!=="BR")),{selectionState:jR(n,l.key,l.offset,u.key,u.offset),needsRecovery:d}}function N1e(n){for(;n.firstChild&&(iD(n.firstChild)&&n.firstChild.getAttribute("data-blocks")==="true"||Lh(n.firstChild));)n=n.firstChild;return n}function U1e(n){for(;n.lastChild&&(iD(n.lastChild)&&n.lastChild.getAttribute("data-blocks")==="true"||Lh(n.lastChild));)n=n.lastChild;return n}function fg(n,e,t){var r=e,i=hh(r);if(i!=null||n&&(n===r||n.firstChild===r)||iw(!1),n===r){r=r.firstChild,iD(r)||iw(!1);var a=r;r=a,r.getAttribute("data-contents")!=="true"&&iw(!1),t>0&&(t=r.childNodes.length)}if(t===0){var o=null;if(i!=null)o=i;else{var s=N1e(r);o=Tu(Lh(s))}return{key:o,offset:0}}var l=r.childNodes[t-1],u=null,d=null;if(!Lh(l))u=Tu(i),d=GR(l);else{var h=U1e(l);u=Tu(Lh(h)),d=GR(h)}return{key:u,offset:d}}function GR(n){var e=n.textContent;return e===`
`?0:e.length}var y7=k1e,j1e=y7;function G1e(n,e){var t=e.ownerDocument.defaultView.getSelection(),r=t.anchorNode,i=t.anchorOffset,a=t.focusNode,o=t.focusOffset,s=t.rangeCount;return s===0||r==null||a==null?{selectionState:n.getSelection().set("hasFocus",!1),needsRecovery:!1}:j1e(n,e,r,i,a,o)}var E7=G1e,H1e=x7,HR=I0,z1e=v7,W1e=E7;function X1e(n){if(n._blockSelectEvents||n._latestEditorState!==n.props.editorState){if(n._blockSelectEvents){var e=n.props.editorState,t=e.getSelection();H1e.logBlockedSelectionEvent({anonymizedDom:"N/A",extraParams:JSON.stringify({stacktrace:new Error().stack}),selectionState:JSON.stringify(t.toJS())})}return}var r=n.props.editorState,i=W1e(r,z1e(n)),a=i.selectionState;a!==r.getSelection()&&(i.needsRecovery?r=HR.forceSelection(r,a):r=HR.acceptSelection(r,a),n.update(r))}var C7=X1e;function K1e(n){return n!=null&&n!=""}var V7={notEmptyKey:K1e},Y1e=V7,q1e=Y1e.notEmptyKey;function Q1e(n,e){var t;if(e.isCollapsed()){var r=e.getAnchorKey(),i=e.getAnchorOffset();return i>0?(t=n.getBlockForKey(r).getEntityAt(i-1),t!==n.getBlockForKey(r).getEntityAt(i)?null:zR(n.getEntityMap(),t)):null}var a=e.getStartKey(),o=e.getStartOffset(),s=n.getBlockForKey(a);return t=o===s.getLength()?null:s.getEntityAt(o),zR(n.getEntityMap(),t)}function zR(n,e){if(q1e(e)){var t=n.__get(e);return t.getMutability()==="MUTABLE"?e:null}return null}var aD=Q1e,J1e=P1e,Z1e=fa,$1e=hl,Jf=I0,aw=C2,eAe=pa,tAe=C7,D7=v7,nAe=E7,rAe=aD,iAe=ha,aAe=eAe.isBrowser("IE"),oAe=20,ow=!1,hg=!1,Bh=null;function sAe(n){Bh||(Bh=new J1e(D7(n)),Bh.start())}var R4={onCompositionStart:function(e){hg=!0,sAe(e)},onCompositionEnd:function(e){ow=!1,hg=!1,setTimeout(function(){ow||R4.resolveComposition(e)},oAe)},onSelect:tAe,onKeyDown:function(e,t){if(!hg){R4.resolveComposition(e),e._onKeyDown(t);return}(t.which===aw.RIGHT||t.which===aw.LEFT)&&t.preventDefault()},onKeyPress:function(e,t){t.which===aw.RETURN&&t.preventDefault()},resolveComposition:function(e){if(!hg){var t=iAe(Bh).stopAndFlushMutations();Bh=null,ow=!0;var r=Jf.set(e._latestEditorState,{inCompositionMode:!1});if(e.exitCurrentMode(),!t.size){e.update(r);return}var i=r.getCurrentContent();t.forEach(function(l,u){var d=$1e.decode(u),h=d.blockKey,f=d.decoratorKey,m=d.leafKey,g=r.getBlockTree(h).getIn([f,"leaves",m]),_=g.start,E=g.end,x=r.getSelection().merge({anchorKey:h,focusKey:h,anchorOffset:_,focusOffset:E,isBackward:!1}),v=rAe(i,x),C=i.getBlockForKey(h).getInlineStyleAt(_);i=Z1e.replaceText(i,x,l,C,v),r=Jf.set(r,{currentContent:i})});var a=nAe(r,D7(e)),o=a.selectionState;e.restoreEditorDOM();var s=aAe?Jf.forceSelection(r,o):Jf.acceptSelection(r,o);e.update(Jf.push(s,i,"insert-characters"))}}},lAe=R4,sw,WR;function cAe(){if(WR)return sw;WR=1;var n=Ne.exports.createElement;function e(s,l){s.prototype=Object.create(l.prototype),s.prototype.constructor=s,s.__proto__=l}var t=hl,r=Ne.exports,i=eD,a=v2,o=function(s){e(l,s);function l(){return s.apply(this,arguments)||this}var u=l.prototype;return u.render=function(){var h=this.props,f=h.block,m=h.children,g=h.contentState,_=h.decorator,E=h.decoratorKey,x=h.direction,v=h.leafSet,C=h.text,V=f.getKey(),D=v.get("leaves"),H=_.getComponentForKey(E),R=_.getPropsForKey(E),j=t.encode(V,parseInt(E,10),0),te=C.slice(D.first().get("start"),D.last().get("end")),$=a.getHTMLDirIfDifferent(i.getDirection(te),x);return n(H,{...R,contentState:g,decoratedText:te,dir:$,key:j,entityKey:f.getEntityAt(v.get("start")),offsetKey:j},m)},l}(r.Component);return sw=o,sw}var yp=Xo.jsx;function XR(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function uAe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function KR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var dAe=Ne.exports,AAe=pa,fAe=r0,hAe=ud,oD=AAe.isBrowser("IE <= 11");function pAe(n){return oD?n.textContent===`
`:n.tagName==="BR"}var mAe=function(e){return oD?yp("span",{"data-text":"true",ref:e},"A"):yp("br",{"data-text":"true",ref:e},"A")},SAe=function(e){return oD?yp("span",{"data-text":"true",ref:e},"B"):yp("br",{"data-text":"true",ref:e},"B")},gAe=function(n){uAe(e,n);function e(r){var i;return i=n.call(this,r)||this,KR(XR(i),"_forceFlag",void 0),KR(XR(i),"_node",void 0),i._forceFlag=!1,i}var t=e.prototype;return t.shouldComponentUpdate=function(i){var a=this._node,o=i.children==="";hAe(a)||fAe(!1);var s=a;return o?!pAe(s):s.textContent!==i.children},t.componentDidMount=function(){this._forceFlag=!this._forceFlag},t.componentDidUpdate=function(){this._forceFlag=!this._forceFlag},t.render=function(){var i=this;return this.props.children===""?this._forceFlag?mAe(function(a){return i._node=a}):SAe(function(a){return i._node=a}):yp("span",{"data-text":"true",ref:function(o){return i._node=o},children:this.props.children},this._forceFlag?"A":"B")},e}(dAe.Component),_Ae=gAe,xAe=ud;function vAe(n){return!n||!n.ownerDocument?!1:xAe(n)&&n.nodeName==="BR"}var F7=vAe;function wAe(n){var e=n?n.ownerDocument||n:document,t=e.defaultView||window;return!!(n&&(typeof t.Node=="function"?n instanceof t.Node:typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.nodeName=="string"))}var yAe=wAe,EAe=yAe;function CAe(n){return EAe(n)&&n.nodeType==3}var VAe=CAe,YR=VAe;function T7(n,e){return!n||!e?!1:n===e?!0:YR(n)?!1:YR(e)?T7(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1}var sD=T7;function DAe(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var b7=DAe,L4=x7,FAe=pa,P7=sD,TAe=b7,lD=y2,bAe=r0,R7=ud,PAe=FAe.isBrowser("IE");function RAe(n,e){if(!n)return"[empty]";var t=L7(n,e);if(t.nodeType===Node.TEXT_NODE)return t.textContent;R7(t)||bAe(!1);var r=t;return r.outerHTML}function L7(n,e){var t=e!==void 0?e(n):[];if(n.nodeType===Node.TEXT_NODE){var r=n.textContent.length;return lD(n).createTextNode("[text "+r+(t.length?" | "+t.join(", "):"")+"]")}var i=n.cloneNode();i.nodeType===1&&t.length&&i.setAttribute("data-labels",t.join(", "));for(var a=n.childNodes,o=0;o<a.length;o++)i.appendChild(L7(a[o],e));return i}function B4(n,e){for(var t=n,r=t;t;){if(R7(t)&&r.hasAttribute("contenteditable"))return RAe(t,e);t=t.parentNode,r=t}return"Could not find contentEditable parent of node"}function B7(n){return n.nodeValue===null?n.childNodes.length:n.nodeValue.length}function LAe(n,e,t,r,i){var a=lD(e);if(!!P7(a.documentElement,e)){var o=a.defaultView.getSelection(),s=n.getAnchorKey(),l=n.getAnchorOffset(),u=n.getFocusKey(),d=n.getFocusOffset(),h=n.getIsBackward();if(!o.extend&&h){var f=s,m=l;s=u,l=d,u=f,d=m,h=!1}var g=s===t&&r<=l&&i>=l,_=u===t&&r<=d&&i>=d;if(g&&_){o.removeAllRanges(),pg(o,e,l-r,n),Qg(o,e,d-r,n);return}if(!h)g&&(o.removeAllRanges(),pg(o,e,l-r,n)),_&&Qg(o,e,d-r,n);else if(_&&(o.removeAllRanges(),pg(o,e,d-r,n)),g){var E=o.focusNode,x=o.focusOffset;o.removeAllRanges(),pg(o,e,l-r,n),Qg(o,E,x,n)}}}function Qg(n,e,t,r){var i=TAe(),a=n.extend;if(a&&e!=null&&P7(i,e)){t>B7(e)&&L4.logSelectionStateFailure({anonymizedDom:B4(e),extraParams:JSON.stringify({offset:t}),selectionState:JSON.stringify(r.toJS())});var o=e===n.focusNode;try{n.rangeCount>0&&n.extend&&n.extend(e,t)}catch(l){throw L4.logSelectionStateFailure({anonymizedDom:B4(e,function(u){var d=[];return u===i&&d.push("active element"),u===n.anchorNode&&d.push("selection anchor node"),u===n.focusNode&&d.push("selection focus node"),d}),extraParams:JSON.stringify({activeElementName:i?i.nodeName:null,nodeIsFocus:e===n.focusNode,nodeWasFocus:o,selectionRangeCount:n.rangeCount,selectionAnchorNodeName:n.anchorNode?n.anchorNode.nodeName:null,selectionAnchorOffset:n.anchorOffset,selectionFocusNodeName:n.focusNode?n.focusNode.nodeName:null,selectionFocusOffset:n.focusOffset,message:l?""+l:null,offset:t},null,2),selectionState:JSON.stringify(r.toJS(),null,2)}),l}}else if(e&&n.rangeCount>0){var s=n.getRangeAt(0);s.setEnd(e,t),n.addRange(s.cloneRange())}}function pg(n,e,t,r){var i=lD(e).createRange();if(t>B7(e)&&L4.logSelectionStateFailure({anonymizedDom:B4(e),extraParams:JSON.stringify({offset:t}),selectionState:JSON.stringify(r.toJS())}),i.setStart(e,t),PAe)try{n.addRange(i)}catch{}else n.addRange(i)}var BAe={setDraftEditorSelection:LAe,addFocusToSelection:Qg},qR=Xo.jsx,QR=Nde;function MAe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function IAe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function OAe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var kAe=_Ae,NAe=Ne.exports,mg=r0,UAe=F7,jAe=BAe.setDraftEditorSelection,GAe=function(n){IAe(e,n);function e(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=n.call.apply(n,[this].concat(a))||this,OAe(MAe(r),"leaf",void 0),r}var t=e.prototype;return t._setSelection=function(){var i=this.props.selection;if(!(i==null||!i.getHasFocus())){var a=this.props,o=a.block,s=a.start,l=a.text,u=o.getKey(),d=s+l.length;if(!!i.hasEdgeWithin(u,s,d)){var h=this.leaf;h||mg(!1);var f=h.firstChild;f||mg(!1);var m;f.nodeType===Node.TEXT_NODE?m=f:UAe(f)?m=h:(m=f.firstChild,m||mg(!1)),jAe(i,m,u,s,d)}}},t.shouldComponentUpdate=function(i){var a=this.leaf;a||mg(!1);var o=a.textContent!==i.text||i.styleSet!==this.props.styleSet||i.forceSelection;return o},t.componentDidUpdate=function(){this._setSelection()},t.componentDidMount=function(){this._setSelection()},t.render=function(){var i=this,a=this.props.block,o=this.props.text;o.endsWith(`
`)&&this.props.isLast&&(o+=`
`);var s=this.props,l=s.customStyleMap,u=s.customStyleFn,d=s.offsetKey,h=s.styleSet,f=h.reduce(function(g,_){var E={},x=l[_];return x!==void 0&&g.textDecoration!==x.textDecoration&&(E.textDecoration=[g.textDecoration,x.textDecoration].join(" ").trim()),QR(g,x,E)},{});if(u){var m=u(h,a);f=QR(f,m)}return qR("span",{"data-offset-key":d,ref:function(_){return i.leaf=_},style:f,children:qR(kAe,{children:o})})},e}(NAe.Component),M7=GAe,lw,JR;function HAe(){if(JR)return lw;JR=1;var n=Xo.jsx;function e(u,d){u.prototype=Object.create(d.prototype),u.prototype.constructor=u,u.__proto__=d}var t=cAe(),r=M7,i=hl,a=Jn.exports,o=Ne.exports,s=cd;a.List;var l=function(u){e(d,u);function d(){return u.apply(this,arguments)||this}var h=d.prototype;return h.render=function(){var m=this.props,g=m.block,_=m.contentState,E=m.customStyleFn,x=m.customStyleMap,v=m.decorator,C=m.direction,V=m.forceSelection,D=m.hasSelection,H=m.selection,R=m.tree,j=g.getKey(),te=g.getText(),$=R.size-1,z=this.props.children||R.map(function(I,q){var P=I.get("decoratorKey"),ee=I.get("leaves"),ue=ee.size-1,U=ee.map(function(O,G){var ne=i.encode(j,q,G),se=O.get("start"),ie=O.get("end");return n(r,{offsetKey:ne,block:g,start:se,selection:D?H:null,forceSelection:V,text:te.slice(se,ie),styleSet:g.getInlineStyleAt(se),customStyleMap:x,customStyleFn:E,isLast:P===$&&G===ue},ne)}).toArray();return!P||!v?U:n(t,{block:g,children:U,contentState:_,decorator:v,decoratorKey:P,direction:C,leafSet:I,text:te},q)}).toArray();return n("div",{"data-offset-key":i.encode(j,0,0),className:s({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":C==="LTR","public/DraftStyleDefault/rtl":C==="RTL"}),children:z})},d}(o.Component);return lw=l,lw}function Sg(n,e){return!!e&&(n===e.documentElement||n===e.body)}var zAe={getTop:function(e){var t=e.ownerDocument;return Sg(e,t)?t.body.scrollTop||t.documentElement.scrollTop:e.scrollTop},setTop:function(e,t){var r=e.ownerDocument;Sg(e,r)?r.body.scrollTop=r.documentElement.scrollTop=t:e.scrollTop=t},getLeft:function(e){var t=e.ownerDocument;return Sg(e,t)?t.body.scrollLeft||t.documentElement.scrollLeft:e.scrollLeft},setLeft:function(e,t){var r=e.ownerDocument;Sg(e,r)?r.body.scrollLeft=r.documentElement.scrollLeft=t:e.scrollLeft=t}},cD=zAe,WAe=/-(.)/g;function XAe(n){return n.replace(WAe,function(e,t){return t.toUpperCase()})}var KAe=XAe,YAe=/([A-Z])/g;function qAe(n){return n.replace(YAe,"-$1").toLowerCase()}var QAe=qAe,ZR=KAe,$R=QAe;function Zf(n){return n==null?n:String(n)}function JAe(n,e){var t;if(window.getComputedStyle&&(t=window.getComputedStyle(n,null),t))return Zf(t.getPropertyValue($R(e)));if(document.defaultView&&document.defaultView.getComputedStyle){if(t=document.defaultView.getComputedStyle(n,null),t)return Zf(t.getPropertyValue($R(e)));if(e==="display")return"none"}return n.currentStyle?Zf(e==="float"?n.currentStyle.cssFloat||n.currentStyle.styleFloat:n.currentStyle[ZR(e)]):Zf(n.style&&n.style[ZR(e)])}var ZAe=JAe,$Ae=ZAe;function cw(n,e){var t=I7.get(n,e);return t==="auto"||t==="scroll"}var I7={get:$Ae,getScrollParent:function(e){if(!e)return null;for(var t=e.ownerDocument;e&&e!==t.body;){if(cw(e,"overflow")||cw(e,"overflowY")||cw(e,"overflowX"))return e;e=e.parentNode}return t.defaultView||t.parentWindow}},V2=I7,efe=sD;function tfe(n){var e=n.ownerDocument.documentElement;if(!("getBoundingClientRect"in n)||!efe(e,n))return{left:0,right:0,top:0,bottom:0};var t=n.getBoundingClientRect();return{left:Math.round(t.left)-e.clientLeft,right:Math.round(t.right)-e.clientLeft,top:Math.round(t.top)-e.clientTop,bottom:Math.round(t.bottom)-e.clientTop}}var nfe=tfe,rfe=nfe;function ife(n){var e=rfe(n);return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}var O7=ife,afe=typeof navigator<"u"&&navigator.userAgent.indexOf("AppleWebKit")>-1;function ofe(n){return n=n||document,n.scrollingElement?n.scrollingElement:!afe&&n.compatMode==="CSS1Compat"?n.documentElement:n.body}var sfe=ofe;function lfe(n){return n.Window&&n instanceof n.Window?{x:n.pageXOffset||n.document.documentElement.scrollLeft,y:n.pageYOffset||n.document.documentElement.scrollTop}:{x:n.scrollLeft,y:n.scrollTop}}var cfe=lfe,ufe=sfe,dfe=cfe;function Afe(n){var e=ufe(n.ownerDocument||n.document);n.Window&&n instanceof n.Window&&(n=e);var t=dfe(n),r=n===e?n.ownerDocument.documentElement:n,i=n.scrollWidth-r.clientWidth,a=n.scrollHeight-r.clientHeight;return t.x=Math.max(0,Math.min(t.x,i)),t.y=Math.max(0,Math.min(t.y,a)),t}var D2=Afe;function k7(){var n;return document.documentElement&&(n=document.documentElement.clientWidth),!n&&document.body&&(n=document.body.clientWidth),n||0}function N7(){var n;return document.documentElement&&(n=document.documentElement.clientHeight),!n&&document.body&&(n=document.body.clientHeight),n||0}function U7(){return{width:window.innerWidth||k7(),height:window.innerHeight||N7()}}U7.withoutScrollbars=function(){return{width:k7(),height:N7()}};var j7=U7,uw,eL;function ffe(){if(eL)return uw;eL=1;var n=Xo.jsx;function e(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function t(j,te){j.prototype=Object.create(te.prototype),j.prototype.constructor=j,j.__proto__=te}function r(j){for(var te=1;te<arguments.length;te++){var $=arguments[te]!=null?arguments[te]:{},z=Object.keys($);typeof Object.getOwnPropertySymbols=="function"&&(z=z.concat(Object.getOwnPropertySymbols($).filter(function(I){return Object.getOwnPropertyDescriptor($,I).enumerable}))),z.forEach(function(I){i(j,I,$[I])})}return j}function i(j,te,$){return te in j?Object.defineProperty(j,te,{value:$,enumerable:!0,configurable:!0,writable:!0}):j[te]=$,j}var a=HAe(),o=hl,s=Ne.exports,l=cD,u=V2,d=O7,h=D2,f=j7,m=Jn.exports,g=r0,_=mm,E=10;m.List;var x=function(te,$){return te.getAnchorKey()===$||te.getFocusKey()===$},v=function(te,$){var z=te.getNextSiblingKey();return z?$.getBlockForKey(z).getType()===te.getType():!1},C=function(te,$,z){var I=[],q=!0,P=!1,ee=void 0;try{for(var ue=z.reverse()[Symbol.iterator](),U;!(q=(U=ue.next()).done);q=!0){var O=U.value;if(O.type!==$)break;I.push(O)}}catch(se){P=!0,ee=se}finally{try{!q&&ue.return!=null&&ue.return()}finally{if(P)throw ee}}z.splice(z.indexOf(I[0]),I.length+1);var G=I.reverse(),ne=G[0].key;return z.push(s.cloneElement(te,{key:"".concat(ne,"-wrap"),"data-offset-key":o.encode(ne,0,0)},G)),z},V=function(te,$){var z=$.get(te.getType())||$.get("unstyled"),I=z.wrapper,q=z.element||$.get("unstyled").element;return{Element:q,wrapperTemplate:I}},D=function(te,$){var z=$(te);if(!z)return{};var I=z.component,q=z.props,P=z.editable;return{CustomComponent:I,customProps:q,customEditable:P}},H=function(te,$,z,I,q,P){var ee={"data-block":!0,"data-editor":$,"data-offset-key":z,key:te.getKey(),ref:P},ue=I(te);return ue&&(ee.className=ue),q.customEditable!==void 0&&(ee=r({},ee,{contentEditable:q.customEditable,suppressContentEditableWarning:!0})),ee},R=function(j){t(te,j);function te(){for(var z,I=arguments.length,q=new Array(I),P=0;P<I;P++)q[P]=arguments[P];return z=j.call.apply(j,[this].concat(q))||this,i(e(z),"wrapperRef",s.createRef()),z}var $=te.prototype;return $.shouldComponentUpdate=function(I){var q=this.props,P=q.block,ee=q.direction,ue=q.tree,U=!P.getChildKeys().isEmpty(),O=P!==I.block||ue!==I.tree||ee!==I.direction||x(I.selection,I.block.getKey())&&I.forceSelection;return U||O},$.componentDidMount=function(){var I=this.props.selection,q=I.getEndKey();if(!(!I.getHasFocus()||q!==this.props.block.getKey())){var P=this.wrapperRef.current;if(!!P){var ee=u.getScrollParent(P),ue=h(ee),U;if(ee===window){var O=d(P),G=O.y+O.height,ne=f().height;U=G-ne,U>0&&window.scrollTo(ue.x,ue.y+U+E)}else{_(P)||g(!1);var se=P,ie=se.offsetHeight+se.offsetTop,Re=ee.offsetHeight+ue.y;U=ie-Re,U>0&&l.setTop(ee,l.getTop(ee)+U+E)}}}},$.render=function(){var I=this,q=this.props,P=q.block,ee=q.blockRenderMap,ue=q.blockRendererFn,U=q.blockStyleFn,O=q.contentState,G=q.decorator,ne=q.editorKey,se=q.editorState,ie=q.customStyleFn,Re=q.customStyleMap,Be=q.direction,Te=q.forceSelection,ye=q.selection,We=q.tree,at=null;P.children.size&&(at=P.children.reduce(function(le,re){var fe=o.encode(re,0,0),He=O.getBlockForKey(re),oe=D(He,ue),Y=oe.CustomComponent||te,_e=V(He,ee),Fe=_e.Element,Le=_e.wrapperTemplate,Pe=H(He,ne,fe,U,oe,null),rt=r({},I.props,{tree:se.getBlockTree(re),blockProps:oe.customProps,offsetKey:fe,block:He});return le.push(n(Fe,{...Pe,children:n(Y,{...rt})})),!Le||v(He,O)||C(Le,Fe,le),le},[]));var Ke=P.getKey(),tt=o.encode(Ke,0,0),lt=D(P,ue),Ie=lt.CustomComponent,Ue=Ie!=null?n(Ie,{...this.props,tree:se.getBlockTree(Ke),blockProps:lt.customProps,offsetKey:tt,block:P}):n(a,{block:P,children:at,contentState:O,customStyleFn:ie,customStyleMap:Re,decorator:G,direction:Be,forceSelection:Te,hasSelection:x(ye,Ke),selection:ye,tree:We});if(P.getParentKey())return Ue;var k=V(P,ee),De=k.Element,we=H(P,ne,tt,U,lt,this.wrapperRef);return n(De,{...we,children:Ue})},te}(s.Component);return uw=R,uw}var dw,tL;function hfe(){if(tL)return dw;tL=1;var n=Xo.jsx;function e(s,l){s.prototype=Object.create(l.prototype),s.prototype.constructor=s,s.__proto__=l}var t=ffe(),r=hl,i=Ne.exports,a=ha,o=function(s){e(l,s);function l(){return s.apply(this,arguments)||this}var u=l.prototype;return u.shouldComponentUpdate=function(h){var f=this.props.editorState,m=h.editorState,g=f.getDirectionMap(),_=m.getDirectionMap();if(g!==_)return!0;var E=f.getSelection().getHasFocus(),x=m.getSelection().getHasFocus();if(E!==x)return!0;var v=m.getNativelyRenderedContent(),C=f.isInCompositionMode(),V=m.isInCompositionMode();if(f===m||v!==null&&m.getCurrentContent()===v||C&&V)return!1;var D=f.getCurrentContent(),H=m.getCurrentContent(),R=f.getDecorator(),j=m.getDecorator();return C!==V||D!==H||R!==j||m.mustForceSelection()},u.render=function(){for(var h=this.props,f=h.blockRenderMap,m=h.blockRendererFn,g=h.blockStyleFn,_=h.customStyleMap,E=h.customStyleFn,x=h.editorState,v=h.editorKey,C=h.textDirectionality,V=x.getCurrentContent(),D=x.getSelection(),H=x.mustForceSelection(),R=x.getDecorator(),j=a(x.getDirectionMap()),te=V.getBlocksAsArray(),$=te[0],z=[],I=$;I;){var q=I.getKey(),P={blockRenderMap:f,blockRendererFn:m,blockStyleFn:g,contentState:V,customStyleFn:E,customStyleMap:_,decorator:R,editorKey:v,editorState:x,forceSelection:H,selection:D,block:I,direction:C||j.get(q),tree:x.getBlockTree(q)},ee=f.get(I.getType())||f.get("unstyled"),ue=ee.wrapper;z.push({block:n(t,{...P},q),wrapperTemplate:ue,key:q,offsetKey:r.encode(q,0,0)});var U=I.getNextSiblingKey();I=U?V.getBlockForKey(U):null}for(var O=[],G=0;G<z.length;){var ne=z[G];if(ne.wrapperTemplate){var se=[];do se.push(z[G].block),G++;while(G<z.length&&z[G].wrapperTemplate===ne.wrapperTemplate);var ie=i.cloneElement(ne.wrapperTemplate,{key:ne.key+"-wrap","data-offset-key":ne.offsetKey},se);O.push(ie)}else O.push(ne.block),G++}return n("div",{"data-contents":"true",children:O})},l}(i.Component);return dw=o,dw}var nL=Xo.jsx,pfe=Ne.exports.createElement;function mfe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Sfe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function gfe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var _fe=M7,rL=hl,xfe=Ne.exports,iL=cD,vfe=V2,wfe=eD,yfe=v2,Efe=cd,Cfe=O7,Vfe=D2,Dfe=j7,Ffe=r0,Tfe=mm,bfe=ha,aL=10,oL=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},Pfe=function(n){Sfe(e,n);function e(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=n.call.apply(n,[this].concat(a))||this,gfe(mfe(r),"_node",void 0),r}var t=e.prototype;return t.shouldComponentUpdate=function(i){return this.props.block!==i.block||this.props.tree!==i.tree||this.props.direction!==i.direction||oL(i.selection,i.block.getKey())&&i.forceSelection},t.componentDidMount=function(){if(!this.props.preventScroll){var i=this.props.selection,a=i.getEndKey();if(!(!i.getHasFocus()||a!==this.props.block.getKey())){var o=this._node;if(o!=null){var s=vfe.getScrollParent(o),l=Vfe(s),u;if(s===window){var d=Cfe(o),h=d.y+d.height,f=Dfe().height;u=h-f,u>0&&window.scrollTo(l.x,l.y+u+aL)}else{Tfe(o)||Ffe(!1);var m=o.offsetHeight+o.offsetTop,g=s.offsetTop+s.offsetHeight,_=g+l.y;u=m-_,u>0&&iL.setTop(s,iL.getTop(s)+u+aL)}}}}},t._renderChildren=function(){var i=this,a=this.props.block,o=a.getKey(),s=a.getText(),l=this.props.tree.size-1,u=oL(this.props.selection,o);return this.props.tree.map(function(d,h){var f=d.get("leaves");if(f.size===0)return null;var m=f.size-1,g=f.map(function($,z){var I=rL.encode(o,h,z),q=$.get("start"),P=$.get("end");return nL(_fe,{offsetKey:I,block:a,start:q,selection:u?i.props.selection:null,forceSelection:i.props.forceSelection,text:s.slice(q,P),styleSet:a.getInlineStyleAt(q),customStyleMap:i.props.customStyleMap,customStyleFn:i.props.customStyleFn,isLast:h===l&&z===m},I)}).toArray(),_=d.get("decoratorKey");if(_==null||!i.props.decorator)return g;var E=bfe(i.props.decorator),x=E.getComponentForKey(_);if(!x)return g;var v=E.getPropsForKey(_),C=rL.encode(o,h,0),V=f.first().get("start"),D=f.last().get("end"),H=s.slice(V,D),R=a.getEntityAt(d.get("start")),j=yfe.getHTMLDirIfDifferent(wfe.getDirection(H),i.props.direction),te={contentState:i.props.contentState,decoratedText:H,dir:j,start:V,end:D,blockKey:o,entityKey:R,offsetKey:C};return pfe(x,{...v,...te,key:C},g)}).toArray()},t.render=function(){var i=this,a=this.props,o=a.direction,s=a.offsetKey,l=Efe({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":o==="LTR","public/DraftStyleDefault/rtl":o==="RTL"});return nL("div",{"data-offset-key":s,className:l,ref:function(d){return i._node=d},children:this._renderChildren()})},e}(xfe.Component),G7=Pfe,Aw,sL;function Rfe(){if(sL)return Aw;sL=1;function n(e){var t=e||"",r=arguments.length;if(r>1)for(var i=1;i<r;i++){var a=arguments[i];a&&(t=(t?t+" ":"")+a)}return t}return Aw=n,Aw}var fw,lL;function Lfe(){if(lL)return fw;lL=1;var n=Ne.exports.createElement,e=Xo.jsx;function t(m){for(var g=1;g<arguments.length;g++){var _=arguments[g]!=null?arguments[g]:{},E=Object.keys(_);typeof Object.getOwnPropertySymbols=="function"&&(E=E.concat(Object.getOwnPropertySymbols(_).filter(function(x){return Object.getOwnPropertyDescriptor(_,x).enumerable}))),E.forEach(function(x){r(m,x,_[x])})}return m}function r(m,g,_){return g in m?Object.defineProperty(m,g,{value:_,enumerable:!0,configurable:!0,writable:!0}):m[g]=_,m}function i(m,g){m.prototype=Object.create(g.prototype),m.prototype.constructor=m,m.__proto__=g}var a=G7,o=hl,s=Ne.exports,l=cd,u=Rfe(),d=ha,h=function(g,_,E,x){return l({"public/DraftStyleDefault/unorderedListItem":g==="unordered-list-item","public/DraftStyleDefault/orderedListItem":g==="ordered-list-item","public/DraftStyleDefault/reset":E,"public/DraftStyleDefault/depth0":_===0,"public/DraftStyleDefault/depth1":_===1,"public/DraftStyleDefault/depth2":_===2,"public/DraftStyleDefault/depth3":_===3,"public/DraftStyleDefault/depth4":_>=4,"public/DraftStyleDefault/listLTR":x==="LTR","public/DraftStyleDefault/listRTL":x==="RTL"})},f=function(m){i(g,m);function g(){return m.apply(this,arguments)||this}var _=g.prototype;return _.shouldComponentUpdate=function(x){var v=this.props.editorState,C=x.editorState,V=v.getDirectionMap(),D=C.getDirectionMap();if(V!==D)return!0;var H=v.getSelection().getHasFocus(),R=C.getSelection().getHasFocus();if(H!==R)return!0;var j=C.getNativelyRenderedContent(),te=v.isInCompositionMode(),$=C.isInCompositionMode();if(v===C||j!==null&&C.getCurrentContent()===j||te&&$)return!1;var z=v.getCurrentContent(),I=C.getCurrentContent(),q=v.getDecorator(),P=C.getDecorator();return te!==$||z!==I||q!==P||C.mustForceSelection()},_.render=function(){for(var x=this.props,v=x.blockRenderMap,C=x.blockRendererFn,V=x.blockStyleFn,D=x.customStyleMap,H=x.customStyleFn,R=x.editorState,j=x.editorKey,te=x.preventScroll,$=x.textDirectionality,z=R.getCurrentContent(),I=R.getSelection(),q=R.mustForceSelection(),P=R.getDecorator(),ee=d(R.getDirectionMap()),ue=z.getBlocksAsArray(),U=[],O=null,G=null,ne=0;ne<ue.length;ne++){var se=ue[ne],ie=se.getKey(),Re=se.getType(),Be=C(se),Te=void 0,ye=void 0,We=void 0;Be&&(Te=Be.component,ye=Be.props,We=Be.editable);var at=$||ee.get(ie),Ke=o.encode(ie,0,0),tt={contentState:z,block:se,blockProps:ye,blockStyleFn:V,customStyleMap:D,customStyleFn:H,decorator:P,direction:at,forceSelection:q,offsetKey:Ke,preventScroll:te,selection:I,tree:R.getBlockTree(ie)},lt=v.get(Re)||v.get("unstyled"),Ie=lt.wrapper,Ue=lt.element||v.get("unstyled").element,k=se.getDepth(),De="";if(V&&(De=V(se)),Ue==="li"){var we=G!==Ie||O===null||k>O;De=u(De,h(Re,k,we,at))}var le=Te||a,re={className:De,"data-block":!0,"data-editor":j,"data-offset-key":Ke,key:ie};We!==void 0&&(re=t({},re,{contentEditable:We,suppressContentEditableWarning:!0}));var fe=e(Ue,{...re,children:n(le,{...tt,key:ie})});U.push({block:fe,wrapperTemplate:Ie,key:ie,offsetKey:Ke}),Ie?O=se.getDepth():O=null,G=Ie}for(var He=[],oe=0;oe<U.length;){var Y=U[oe];if(Y.wrapperTemplate){var _e=[];do _e.push(U[oe].block),oe++;while(oe<U.length&&U[oe].wrapperTemplate===Y.wrapperTemplate);var Fe=s.cloneElement(Y.wrapperTemplate,{key:Y.key+"-wrap","data-offset-key":Y.offsetKey},_e);He.push(Fe)}else He.push(Y.block),oe++}return e("div",{"data-contents":"true",children:He})},g}(s.Component);return fw=f,fw}var Bfe=Nc,Mfe=Bfe("draft_tree_data_support"),Ife=Mfe?hfe():Lfe(),H7={isImage:function(e){return cL(e)[0]==="image"},isJpeg:function(e){var t=cL(e);return H7.isImage(e)&&(t[1]==="jpeg"||t[1]==="pjpeg")}};function cL(n){return n.split("/")}var Ofe=H7,gg=r0;function kfe(n){var e=n.length;if(!Array.isArray(n)&&(typeof n=="object"||typeof n=="function")||gg(!1),typeof e!="number"&&gg(!1),e===0||e-1 in n||gg(!1),typeof n.callee=="function"&&gg(!1),n.hasOwnProperty)try{return Array.prototype.slice.call(n)}catch{}for(var t=Array(e),r=0;r<e;r++)t[r]=n[r];return t}function Nfe(n){return!!n&&(typeof n=="object"||typeof n=="function")&&"length"in n&&!("setInterval"in n)&&typeof n.nodeType!="number"&&(Array.isArray(n)||"callee"in n||"item"in n)}function Ufe(n){return Nfe(n)?Array.isArray(n)?n.slice():kfe(n):[n]}var jfe=Ufe;function F2(n){return function(){return n}}var dd=function(){};dd.thatReturns=F2;dd.thatReturnsFalse=F2(!1);dd.thatReturnsTrue=F2(!0);dd.thatReturnsNull=F2(null);dd.thatReturnsThis=function(){return this};dd.thatReturnsArgument=function(n){return n};var Gfe=dd,Hfe=Ofe,zfe=jfe,Wfe=Gfe,Xfe=new RegExp(`\r
`,"g"),Kfe=`
`,Yfe={"text/rtf":1,"text/html":1};function qfe(n){if(n.kind=="file")return n.getAsFile()}var Qfe=function(){function n(t){this.data=t,this.types=t.types?zfe(t.types):[]}var e=n.prototype;return e.isRichText=function(){return this.getHTML()&&this.getText()?!0:this.isImage()?!1:this.types.some(function(r){return Yfe[r]})},e.getText=function(){var r;return this.data.getData&&(this.types.length?this.types.indexOf("text/plain")!=-1&&(r=this.data.getData("text/plain")):r=this.data.getData("Text")),r?r.replace(Xfe,Kfe):null},e.getHTML=function(){if(this.data.getData)if(this.types.length){if(this.types.indexOf("text/html")!=-1)return this.data.getData("text/html")}else return this.data.getData("Text")},e.isLink=function(){return this.types.some(function(r){return r.indexOf("Url")!=-1||r.indexOf("text/uri-list")!=-1||r.indexOf("text/x-moz-url")})},e.getLink=function(){if(this.data.getData){if(this.types.indexOf("text/x-moz-url")!=-1){var r=this.data.getData("text/x-moz-url").split(`
`);return r[0]}return this.types.indexOf("text/uri-list")!=-1?this.data.getData("text/uri-list"):this.data.getData("url")}return null},e.isImage=function(){var r=this.types.some(function(s){return s.indexOf("application/x-moz-file")!=-1});if(r)return!0;for(var i=this.getFiles(),a=0;a<i.length;a++){var o=i[a].type;if(!Hfe.isImage(o))return!1}return!0},e.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},e.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(qfe).filter(Wfe.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},e.hasFiles=function(){return this.getFiles().length>0},n}(),z7=Qfe,Jfe=r0,uL=/\.textClipping$/,Zfe={"text/plain":!0,"text/html":!0,"text/rtf":!0},$fe=5e3;function ehe(n,e){var t=0,r=[];n.forEach(function(i){the(i,function(a){t++,a&&r.push(a.slice(0,$fe)),t==n.length&&e(r.join("\r"))})})}function the(n,e){if(!window.FileReader||n.type&&!(n.type in Zfe)){e("");return}if(n.type===""){var t="";uL.test(n.name)&&(t=n.name.replace(uL,"")),e(t);return}var r=new FileReader;r.onload=function(){var i=r.result;typeof i!="string"&&Jfe(!1),e(i)},r.onerror=function(){e("")},r.readAsText(n)}var W7=ehe;function nhe(n){return n==="handled"||n===!0}var T2=nhe,rhe=z7,X7=fa,K7=I0,ihe=E2,ahe=y2,ohe=W7,she=w7,lhe=_7,dL=T2,hw=ha;function che(n,e){var t=null,r=null,i=ahe(n.currentTarget);if(typeof i.caretRangeFromPoint=="function"){var a=i.caretRangeFromPoint(n.x,n.y);t=a.startContainer,r=a.startOffset}else if(n.rangeParent)t=n.rangeParent,r=n.rangeOffset;else return null;t=hw(t),r=hw(r);var o=hw(ihe(t));return she(e,o,r,o,r)}var uhe={onDragEnd:function(e){e.exitCurrentMode(),AL(e)},onDrop:function(e,t){var r=new rhe(t.nativeEvent.dataTransfer),i=e._latestEditorState,a=che(t.nativeEvent,i);if(t.preventDefault(),e._dragCount=0,e.exitCurrentMode(),a!=null){var o=r.getFiles();if(o.length>0){if(e.props.handleDroppedFiles&&dL(e.props.handleDroppedFiles(a,o)))return;ohe(o,function(l){l&&e.update(fL(i,a,l))});return}var s=e._internalDrag?"internal":"external";e.props.handleDrop&&dL(e.props.handleDrop(a,r,s))||(e._internalDrag?e.update(dhe(i,a)):e.update(fL(i,a,r.getText()))),AL(e)}}};function AL(n){n._internalDrag=!1;var e=n.editorContainer;if(e){var t=new MouseEvent("mouseup",{view:lhe(e),bubbles:!0,cancelable:!0});e.dispatchEvent(t)}}function dhe(n,e){var t=X7.moveText(n.getCurrentContent(),n.getSelection(),e);return K7.push(n,t,"insert-fragment")}function fL(n,e,t){var r=X7.insertText(n.getCurrentContent(),e,t,n.getCurrentInlineStyle());return K7.push(n,r,"insert-fragment")}var Ahe=uhe;function fhe(n){var e=n.getSelection(),t=e.getAnchorKey(),r=n.getBlockTree(t),i=e.getStartOffset(),a=!1;return r.some(function(o){return i===o.get("start")?(a=!0,!0):i<o.get("end")?o.get("leaves").some(function(s){var l=s.get("start");return i===l?(a=!0,!0):!1}):!1}),a}var hhe=fhe;(function(n,e){if(n.setImmediate)return;var t=1,r={},i=!1,a=n.document,o;function s(v){typeof v!="function"&&(v=new Function(""+v));for(var C=new Array(arguments.length-1),V=0;V<C.length;V++)C[V]=arguments[V+1];var D={callback:v,args:C};return r[t]=D,o(t),t++}function l(v){delete r[v]}function u(v){var C=v.callback,V=v.args;switch(V.length){case 0:C();break;case 1:C(V[0]);break;case 2:C(V[0],V[1]);break;case 3:C(V[0],V[1],V[2]);break;default:C.apply(e,V);break}}function d(v){if(i)setTimeout(d,0,v);else{var C=r[v];if(C){i=!0;try{u(C)}finally{l(v),i=!1}}}}function h(){o=function(v){process.nextTick(function(){d(v)})}}function f(){if(n.postMessage&&!n.importScripts){var v=!0,C=n.onmessage;return n.onmessage=function(){v=!1},n.postMessage("","*"),n.onmessage=C,v}}function m(){var v="setImmediate$"+Math.random()+"$",C=function(V){V.source===n&&typeof V.data=="string"&&V.data.indexOf(v)===0&&d(+V.data.slice(v.length))};n.addEventListener?n.addEventListener("message",C,!1):n.attachEvent("onmessage",C),o=function(V){n.postMessage(v+V,"*")}}function g(){var v=new MessageChannel;v.port1.onmessage=function(C){var V=C.data;d(V)},o=function(C){v.port2.postMessage(C)}}function _(){var v=a.documentElement;o=function(C){var V=a.createElement("script");V.onreadystatechange=function(){d(C),V.onreadystatechange=null,v.removeChild(V),V=null},v.appendChild(V)}}function E(){o=function(v){setTimeout(d,0,v)}}var x=Object.getPrototypeOf&&Object.getPrototypeOf(n);x=x&&x.setTimeout?x:n,{}.toString.call(n.process)==="[object process]"?h():f()?m():n.MessageChannel?g():a&&"onreadystatechange"in a.createElement("script")?_():E(),x.setImmediate=s,x.clearImmediate=l})(typeof self>"u"?typeof window>"u"?RA:window:self);var phe=window.setImmediate,mhe=fa,M4=I0,She=pa,hL=aD,ghe=T2,_he=hhe,pL=ha,xhe=phe,vhe="'",whe="/",yhe=She.isBrowser("Firefox");function Ehe(n){return yhe&&(n==vhe||n==whe)}function mL(n,e,t,r,i){var a=mhe.replaceText(n.getCurrentContent(),n.getSelection(),e,t,r);return M4.push(n,a,"insert-characters",i)}function Che(n,e){n._pendingStateFromBeforeInput!==void 0&&(n.update(n._pendingStateFromBeforeInput),n._pendingStateFromBeforeInput=void 0);var t=n._latestEditorState,r=e.data;if(!!r){if(n.props.handleBeforeInput&&ghe(n.props.handleBeforeInput(r,t,e.timeStamp))){e.preventDefault();return}var i=t.getSelection(),a=i.getStartOffset(),o=i.getAnchorKey();if(!i.isCollapsed()){e.preventDefault(),n.update(mL(t,r,t.getCurrentInlineStyle(),hL(t.getCurrentContent(),t.getSelection()),!0));return}var s=mL(t,r,t.getCurrentInlineStyle(),hL(t.getCurrentContent(),t.getSelection()),!1),l=!1;if(l||(l=_he(n._latestCommittedEditorState)),!l){var u=t.getBlockTree(o),d=s.getBlockTree(o);l=u.size!==d.size||u.zip(d).some(function(h){var f=h[0],m=h[1],g=f.get("start"),_=g+(g>=a?r.length:0),E=f.get("end"),x=E+(E>=a?r.length:0),v=m.get("start"),C=m.get("end"),V=m.get("decoratorKey");return f.get("decoratorKey")!==V||f.get("leaves").size!==m.get("leaves").size||_!==v||x!==C||V!=null&&C-v!==E-g})}if(l||(l=Ehe(r)),l||(l=pL(s.getDirectionMap()).get(o)!==pL(t.getDirectionMap()).get(o)),l){e.preventDefault(),s=M4.set(s,{forceSelection:!0}),n.update(s);return}s=M4.set(s,{nativelyRenderedContent:s.getCurrentContent()}),n._pendingStateFromBeforeInput=s,xhe(function(){n._pendingStateFromBeforeInput!==void 0&&(n.update(n._pendingStateFromBeforeInput),n._pendingStateFromBeforeInput=void 0)})}}var Vhe=Che,Dhe=I0,SL=sD,Fhe=b7;function The(n,e){var t=e.currentTarget.ownerDocument;if(!Boolean(n.props.preserveSelectionOnBlur)&&Fhe(t)===t.body){var r=t.defaultView.getSelection(),i=n.editor;r.rangeCount===1&&SL(i,r.anchorNode)&&SL(i,r.focusNode)&&r.removeAllRanges()}var a=n._latestEditorState,o=a.getSelection();if(!!o.getHasFocus()){var s=o.set("hasFocus",!1);n.props.onBlur&&n.props.onBlur(e),n.update(Dhe.acceptSelection(a,s))}}var bhe=The,Phe=I0;function Rhe(n,e){n.setMode("composite"),n.update(Phe.set(n._latestEditorState,{inCompositionMode:!0})),n._onCompositionStart(e)}var Lhe=Rhe,Bhe=S2;function Mhe(n){var e=n.getSelection();return e.isCollapsed()?null:Bhe(n.getCurrentContent(),e)}var Y7=Mhe,Ihe=Y7;function Ohe(n,e){var t=n._latestEditorState,r=t.getSelection();if(r.isCollapsed()){e.preventDefault();return}n.setClipboard(Ihe(n._latestEditorState))}var khe=Ohe;function Nhe(n){if(!n||!("ownerDocument"in n))return!1;if("ownerDocument"in n){var e=n;if(!e.ownerDocument.defaultView)return e instanceof Node;if(e instanceof e.ownerDocument.defaultView.Node)return!0}return!1}var Uhe=Nhe,jhe=fa,Ghe=I0,Hhe=V2,zhe=Y7,Whe=D2,Xhe=Uhe;function Khe(n,e){var t=n._latestEditorState,r=t.getSelection(),i=e.target,a;if(r.isCollapsed()){e.preventDefault();return}if(Xhe(i)){var o=i;a=Whe(Hhe.getScrollParent(o))}var s=zhe(t);n.setClipboard(s),n.setMode("cut"),setTimeout(function(){n.restoreEditorDOM(a),n.exitCurrentMode(),n.update(Yhe(t))},0)}function Yhe(n){var e=jhe.removeRange(n.getCurrentContent(),n.getSelection(),"forward");return Ghe.push(n,e,"remove-range")}var qhe=Khe;function Qhe(n,e){n.setMode("drag"),e.preventDefault()}var Jhe=Qhe;function Zhe(n){n._internalDrag=!0,n.setMode("drag")}var $he=Zhe,gL=I0,epe=pa;function tpe(n,e){var t=n._latestEditorState,r=t.getSelection();if(!r.getHasFocus()){var i=r.set("hasFocus",!0);n.props.onFocus&&n.props.onFocus(e),epe.isBrowser("Chrome < 60.0.3081.0")?n.update(gL.forceSelection(t,i)):n.update(gL.acceptSelection(t,i))}}var npe=tpe,rpe=r0,q7=55296,ipe=56319,ape=56320,Q7=57343,ope=/[\uD800-\uDFFF]/;function J7(n){return q7<=n&&n<=Q7}function spe(n,e){if(0<=e&&e<n.length||rpe(!1),e+1===n.length)return!1;var t=n.charCodeAt(e),r=n.charCodeAt(e+1);return q7<=t&&t<=ipe&&ape<=r&&r<=Q7}function uD(n){return ope.test(n)}function rA(n,e){return 1+J7(n.charCodeAt(e))}function lpe(n){if(!uD(n))return n.length;for(var e=0,t=0;t<n.length;t+=rA(n,t))e++;return e}function Z7(n,e,t){if(e=e||0,t=t===void 0?1/0:t||0,!uD(n))return n.substr(e,t);var r=n.length;if(r<=0||e>r||t<=0)return"";var i=0;if(e>0){for(;e>0&&i<r;e--)i+=rA(n,i);if(i>=r)return""}else if(e<0){for(i=r;e<0&&0<i;e++)i-=rA(n,i-1);i<0&&(i=0)}var a=r;if(t<r)for(a=i;t>0&&a<r;t--)a+=rA(n,a);return n.substring(i,a)}function cpe(n,e,t){e=e||0,t=t===void 0?1/0:t||0,e<0&&(e=0),t<0&&(t=0);var r=Math.abs(t-e);return e=e<t?e:t,Z7(n,e,r)}function upe(n){for(var e=[],t=0;t<n.length;t+=rA(n,t))e.push(n.codePointAt(t));return e}var dpe={getCodePoints:upe,getUTF16Length:rA,hasSurrogateUnit:uD,isCodeUnitInSurrogateRange:J7,isSurrogatePair:spe,strlen:lpe,substring:cpe,substr:Z7},Ad=dpe;function Ape(n,e){var t=n.getSelection(),r=n.getCurrentContent(),i=t.getStartKey(),a=t.getStartOffset(),o=i,s=0;if(e>a){var l=r.getKeyBefore(i);if(l==null)o=i;else{o=l;var u=r.getBlockForKey(l);s=u.getText().length}}else s=a-e;return t.merge({focusKey:o,focusOffset:s,isBackward:!0})}var dD=Ape,fpe=fa,hpe=Nc,_L=hpe("draft_tree_data_support");function ppe(n,e,t){var r=n.getSelection(),i=n.getCurrentContent(),a=r,o=r.getAnchorKey(),s=r.getFocusKey(),l=i.getBlockForKey(o);if(_L&&t==="forward"&&o!==s)return i;if(r.isCollapsed()){if(t==="forward"){if(n.isSelectionAtEndOfContent())return i;if(_L){var u=r.getAnchorOffset()===i.getBlockForKey(o).getLength();if(u){var d=i.getBlockForKey(l.nextSibling);if(!d||d.getLength()===0)return i}}}else if(n.isSelectionAtStartOfContent())return i;if(a=e(n),a===r)return i}return fpe.removeRange(i,a,t)}var Sm=ppe,mpe=I0,Spe=Ad,gpe=dD,_pe=Sm;function xpe(n){var e=_pe(n,function(r){var i=r.getSelection(),a=r.getCurrentContent(),o=i.getAnchorKey(),s=i.getAnchorOffset(),l=a.getBlockForKey(o).getText()[s-1];return gpe(r,l?Spe.getUTF16Length(l,0):1)},"backward");if(e===n.getCurrentContent())return n;var t=n.getSelection();return mpe.push(n,e.set("selectionBefore",t),t.isCollapsed()?"backspace-character":"remove-range")}var $7=xpe,vpe=fa,wpe=hl,ype=I0,Epe=pa,Cpe=V7,Vpe=Cpe.notEmptyKey,Dpe=E2,Fpe=$7,Tpe=ha,bpe=Epe.isEngine("Gecko"),Ppe=`

`;function Rpe(n,e){switch(n){case"deleteContentBackward":return Fpe(e)}return e}function Lpe(n,e){n._pendingStateFromBeforeInput!==void 0&&(n.update(n._pendingStateFromBeforeInput),n._pendingStateFromBeforeInput=void 0);var t=n.editor,r=t.ownerDocument.defaultView.getSelection(),i=r.anchorNode,a=r.isCollapsed,o=(i==null?void 0:i.nodeType)!==Node.TEXT_NODE&&(i==null?void 0:i.nodeType)!==Node.ELEMENT_NODE;if(!(i==null||o)){if(i.nodeType===Node.TEXT_NODE&&(i.previousSibling!==null||i.nextSibling!==null)){var s=i.parentNode;if(s==null)return;i.nodeValue=s.textContent;for(var l=s.firstChild;l!=null;l=l.nextSibling)l!==i&&s.removeChild(l)}var u=i.textContent,d=n._latestEditorState,h=Tpe(Dpe(i)),f=wpe.decode(h),m=f.blockKey,g=f.decoratorKey,_=f.leafKey,E=d.getBlockTree(m).getIn([g,"leaves",_]),x=E.start,v=E.end,C=d.getCurrentContent(),V=C.getBlockForKey(m),D=V.getText().slice(x,v);if(u.endsWith(Ppe)&&(u=u.slice(0,-1)),u===D){var H=e.nativeEvent.inputType;if(H){var R=Rpe(H,d);if(R!==d){n.restoreEditorDOM(),n.update(R);return}}return}var j=d.getSelection(),te=j.merge({anchorOffset:x,focusOffset:v,isBackward:!1}),$=V.getEntityAt(x),z=Vpe($)?C.getEntity($):null,I=z!=null?z.getMutability():null,q=I==="MUTABLE",P=q?"spellcheck-change":"apply-entity",ee=vpe.replaceText(C,te,u,V.getInlineStyleAt(x),q?V.getEntityAt(x):null),ue,U,O,G;if(bpe)ue=r.anchorOffset,U=r.focusOffset,O=x+Math.min(ue,U),G=O+Math.abs(ue-U),ue=O,U=G;else{var ne=u.length-D.length;O=j.getStartOffset(),G=j.getEndOffset(),ue=a?G+ne:O,U=G+ne}var se=ee.merge({selectionBefore:C.getSelectionAfter(),selectionAfter:j.merge({anchorOffset:ue,focusOffset:U})});n.update(ype.push(d,se,P))}}var Bpe=Lpe,Mpe=C2;function Ipe(n){return n.which===Mpe.RETURN&&(n.getModifierState("Shift")||n.getModifierState("Alt")||n.getModifierState("Control"))}var Ope=Ipe,kpe=pa,Npe=Ope,pw=kpe.isPlatform("Mac OS X"),e9={isCtrlKeyCommand:function(e){return!!e.ctrlKey&&!e.altKey},isOptionKeyCommand:function(e){return pw&&e.altKey},usesMacOSHeuristics:function(){return pw},hasCommandModifier:function(e){return pw?!!e.metaKey&&!e.altKey:e9.isCtrlKeyCommand(e)},isSoftNewlineEvent:Npe},AD=e9,xL=fa,vL=I0,Upe=S2,jpe=ha,mw=null,Gpe={cut:function(e){var t=e.getCurrentContent(),r=e.getSelection(),i=null;if(r.isCollapsed()){var a=r.getAnchorKey(),o=t.getBlockForKey(a).getLength();if(o===r.getAnchorOffset()){var s=t.getKeyAfter(a);if(s==null)return e;i=r.set("focusKey",s).set("focusOffset",0)}else i=r.set("focusOffset",o)}else i=r;i=jpe(i),mw=Upe(t,i);var l=xL.removeRange(t,i,"forward");return l===t?e:vL.push(e,l,"remove-range")},paste:function(e){if(!mw)return e;var t=xL.replaceWithFragment(e.getCurrentContent(),e.getSelection(),mw);return vL.push(e,t,"insert-fragment")}},Hpe=Gpe,zpe=pa,Wpe=r0,Xpe=zpe.isBrowser("Chrome");function Kpe(n){for(var e=n.cloneRange(),t=[],r=n.endContainer;r!=null;r=r.parentNode){var i=r===n.commonAncestorContainer;i?e.setStart(n.startContainer,n.startOffset):e.setStart(e.endContainer,0);var a=Array.from(e.getClientRects());if(t.push(a),i){var o;return t.reverse(),(o=[]).concat.apply(o,t)}e.setEndBefore(r)}Wpe(!1)}var Ype=Xpe?Kpe:function(n){return Array.from(n.getClientRects())},t9=Ype,qpe=Ad,Qpe=y2,wL=t9,I4=r0;function Jpe(n){var e=getComputedStyle(n),t=Qpe(n),r=t.createElement("div");r.style.fontFamily=e.fontFamily,r.style.fontSize=e.fontSize,r.style.fontStyle=e.fontStyle,r.style.fontWeight=e.fontWeight,r.style.lineHeight=e.lineHeight,r.style.position="absolute",r.textContent="M";var i=t.body;i||I4(!1),i.appendChild(r);var a=r.getBoundingClientRect();return i.removeChild(r),a.height}function yL(n,e){for(var t=1/0,r=1/0,i=-1/0,a=-1/0,o=0;o<n.length;o++){var s=n[o];s.width===0||s.width===1||(t=Math.min(t,s.top),r=Math.min(r,s.bottom),i=Math.max(i,s.top),a=Math.max(a,s.bottom))}return i<=r&&i-t<e&&a-r<e}function Zpe(n){switch(n.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return n.length;default:return n.childNodes.length}}function $pe(n){n.collapsed||I4(!1),n=n.cloneRange();var e=n.startContainer;e.nodeType!==1&&(e=e.parentNode);var t=Jpe(e),r=n.endContainer,i=n.endOffset;for(n.setStart(n.startContainer,0);yL(wL(n),t)&&(r=n.startContainer,i=n.startOffset,r.parentNode||I4(!1),n.setStartBefore(r),!(r.nodeType===1&&getComputedStyle(r).display!=="inline")););var a=r,o=i-1;do{for(var s=a.nodeValue,l=o;l>=0;l--)if(!(s!=null&&l>0&&qpe.isSurrogatePair(s,l-1)))if(n.setStart(a,l),yL(wL(n),t))r=a,i=l;else break;if(l===-1||a.childNodes.length===0)break;a=a.childNodes[l],o=Zpe(a)}while(!0);return n.setStart(r,i),n}var eme=$pe,tme=I0,nme=eme,rme=y7,ime=dD,ame=Sm;function ome(n,e){var t=ame(n,function(r){var i=r.getSelection();if(i.isCollapsed()&&i.getAnchorOffset()===0)return ime(r,1);var a=e.currentTarget.ownerDocument,o=a.defaultView.getSelection(),s=o.getRangeAt(0);return s=nme(s),rme(r,null,s.endContainer,s.endOffset,s.startContainer,s.startOffset).selectionState},"backward");return t===n.getCurrentContent()?n:tme.push(n,t,"remove-range")}var sme=ome,lme=`[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%"~=<>_:;\u30FB\u3001\u3002\u3008-\u3011\u3014-\u301F\uFF1A-\uFF1F\uFF01-\uFF0F\uFF3B-\uFF40\uFF5B-\uFF65\u2E2E\u061F\u066A-\u066C\u061B\u060C\u060D\uFD3E\uFD3F\u1801\u0964\u104A\u104B\u2010-\u2027\u2030-\u205E\xA1-\xB1\xB4-\xB8\xBA\xBB\xBF]`,cme={getPunctuation:function(){return lme}},ume=cme,dme=ume.getPunctuation(),n9="['\u2018\u2019]",iA="\\s|(?![_])"+dme,Ame="^(?:"+iA+")*(?:"+n9+"|(?!"+iA+").)*(?:(?!"+iA+").)",fme=new RegExp(Ame),hme="(?:(?!"+iA+").)(?:"+n9+"|(?!"+iA+").)*(?:"+iA+")*$",pme=new RegExp(hme);function EL(n,e){var t=e?pme.exec(n):fme.exec(n);return t?t[0]:n}var mme={getBackward:function(e){return EL(e,!0)},getForward:function(e){return EL(e,!1)}},r9=mme,Sme=r9,gme=I0,CL=dD,_me=Sm;function xme(n){var e=_me(n,function(t){var r=t.getSelection(),i=r.getStartOffset();if(i===0)return CL(t,1);var a=r.getStartKey(),o=t.getCurrentContent(),s=o.getBlockForKey(a).getText().slice(0,i),l=Sme.getBackward(s);return CL(t,l.length||1)},"backward");return e===n.getCurrentContent()?n:gme.push(n,e,"remove-range")}var vme=xme;function wme(n,e){var t=n.getSelection(),r=t.getStartKey(),i=t.getStartOffset(),a=n.getCurrentContent(),o=r,s,l=a.getBlockForKey(r);return e>l.getText().length-i?(o=a.getKeyAfter(r),s=0):s=i+e,t.merge({focusKey:o,focusOffset:s})}var i9=wme,yme=r9,Eme=I0,Cme=i9,Vme=Sm;function Dme(n){var e=Vme(n,function(t){var r=t.getSelection(),i=r.getStartOffset(),a=r.getStartKey(),o=t.getCurrentContent(),s=o.getBlockForKey(a).getText().slice(i),l=yme.getForward(s);return Cme(t,l.length||1)},"forward");return e===n.getCurrentContent()?n:Eme.push(n,e,"remove-range")}var Fme=Dme,Tme=fa,bme=I0;function Pme(n){var e=Tme.splitBlock(n.getCurrentContent(),n.getSelection());return bme.push(n,e,"split-block")}var Rme=Pme,Lme=I0;function Bme(n){var e=n.getSelection(),t=e.getEndKey(),r=n.getCurrentContent(),i=r.getBlockForKey(t).getLength();return Lme.set(n,{selection:e.merge({anchorKey:t,anchorOffset:i,focusKey:t,focusOffset:i,isBackward:!1}),forceSelection:!0})}var Mme=Bme,Ime=I0;function Ome(n){var e=n.getSelection(),t=e.getStartKey();return Ime.set(n,{selection:e.merge({anchorKey:t,anchorOffset:0,focusKey:t,focusOffset:0,isBackward:!1}),forceSelection:!0})}var kme=Ome,Nme=I0,Ume=Ad,jme=i9,Gme=Sm;function Hme(n){var e=Gme(n,function(r){var i=r.getSelection(),a=r.getCurrentContent(),o=i.getAnchorKey(),s=i.getAnchorOffset(),l=a.getBlockForKey(o).getText()[s];return jme(r,l?Ume.getUTF16Length(l,0):1)},"forward");if(e===n.getCurrentContent())return n;var t=n.getSelection();return Nme.push(n,e.set("selectionBefore",t),t.isCollapsed()?"delete-character":"remove-range")}var zme=Hme,VL=fa,DL=I0,Wme=S2;function Xme(n){var e=n.getSelection();if(!e.isCollapsed())return n;var t=e.getAnchorOffset();if(t===0)return n;var r=e.getAnchorKey(),i=n.getCurrentContent(),a=i.getBlockForKey(r),o=a.getLength();if(o<=1)return n;var s,l;t===o?(s=e.set("anchorOffset",t-1),l=e):(s=e.set("focusOffset",t+1),l=s.set("anchorOffset",t+1));var u=Wme(i,s),d=VL.removeRange(i,s,"backward"),h=d.getSelectionAfter(),f=h.getAnchorOffset()-1,m=h.merge({anchorOffset:f,focusOffset:f}),g=VL.replaceWithFragment(d,m,u),_=DL.push(n,g,"insert-fragment");return DL.acceptSelection(_,l)}var Kme=Xme,Sw=I0;function Yme(n,e,t){var r=Sw.undo(e);if(e.getLastChangeType()==="spellcheck-change"){var i=r.getCurrentContent();t(Sw.set(r,{nativelyRenderedContent:i}));return}if(n.preventDefault(),!e.getNativelyRenderedContent()){t(r);return}t(Sw.set(e,{nativelyRenderedContent:null})),setTimeout(function(){t(r)},0)}var qme=Yme,Qme=fa,a9=I0,Jme=AD,Us=C2,FL=Hpe,Zme=pa,TL=T2,$me=sme,eSe=vme,tSe=Fme,nSe=Rme,rSe=Mme,iSe=kme,aSe=$7,oSe=zme,sSe=Kme,lSe=qme,bL=Jme.isOptionKeyCommand,PL=Zme.isBrowser("Chrome");function cSe(n,e,t){switch(n){case"redo":return a9.redo(e);case"delete":return oSe(e);case"delete-word":return tSe(e);case"backspace":return aSe(e);case"backspace-word":return eSe(e);case"backspace-to-start-of-line":return $me(e,t);case"split-block":return nSe(e);case"transpose-characters":return sSe(e);case"move-selection-to-start-of-block":return iSe(e);case"move-selection-to-end-of-block":return rSe(e);case"secondary-cut":return FL.cut(e);case"secondary-paste":return FL.paste(e);default:return e}}function uSe(n,e){var t=e.which,r=n._latestEditorState;function i(l){var u=n.props[l];return u?(u(e),!0):!1}switch(t){case Us.RETURN:if(e.preventDefault(),n.props.handleReturn&&TL(n.props.handleReturn(e,r)))return;break;case Us.ESC:if(e.preventDefault(),i("onEscape"))return;break;case Us.TAB:if(i("onTab"))return;break;case Us.UP:if(i("onUpArrow"))return;break;case Us.RIGHT:if(i("onRightArrow"))return;break;case Us.DOWN:if(i("onDownArrow"))return;break;case Us.LEFT:if(i("onLeftArrow"))return;break;case Us.SPACE:PL&&bL(e)&&e.preventDefault()}var a=n.props.keyBindingFn(e);if(a==null||a===""){if(t===Us.SPACE&&PL&&bL(e)){var o=Qme.replaceText(r.getCurrentContent(),r.getSelection(),"\xA0");n.update(a9.push(r,o,"insert-characters"))}return}if(a==="undo"){lSe(e,r,n.update);return}if(e.preventDefault(),!(n.props.handleKeyCommand&&TL(n.props.handleKeyCommand(a,r,e.timeStamp)))){var s=cSe(a,r,e);s!==r&&n.update(s)}}var dSe=uSe;function ASe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var fSe=function(){function n(t){ASe(this,"_uri",void 0),this._uri=t}var e=n.prototype;return e.toString=function(){return this._uri},n}(),hSe=fSe,pSe=pa,mSe=r0,SSe=pSe.isBrowser("IE <= 9");function gSe(n){var e,t=null;return!SSe&&document.implementation&&document.implementation.createHTMLDocument&&(e=document.implementation.createHTMLDocument("foo"),e.documentElement||mSe(!1),e.documentElement.innerHTML=n,t=e.getElementsByTagName("body")[0]),t}var o9=gSe,_Se=ud;function xSe(n){return!n||!n.ownerDocument?!1:_Se(n)&&n.nodeName==="A"}var vSe=xSe,wSe=ud;function ySe(n){return!n||!n.ownerDocument?!1:wSe(n)&&n.nodeName==="IMG"}var ESe=ySe,lu;function gw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){Ai(n,i,t[i])})}return n}function Ai(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var CSe=mo,VSe=ld,DSe=So,FSe=rD,RL=g2,s9=hSe,$f=cd,LL=ys,TSe=o9,l9=Nc,fD=Jn.exports,jl=fD.List,c9=fD.Map,bSe=fD.OrderedSet,u9=vSe,PSe=F7,hD=mm,d9=ESe,BL=l9("draft_tree_data_support"),RSe="&nbsp;",A9=" ",LSe=new RegExp("\r","g"),BSe=new RegExp(`
`,"g"),MSe=new RegExp(`^
`,"g"),ISe=new RegExp(RSe,"g"),OSe=new RegExp("&#13;?","g"),kSe=new RegExp("&#8203;?","g"),NSe=["bold","bolder","500","600","700","800","900"],USe=["light","lighter","normal","100","200","300","400"],jSe=["className","href","rel","target","title"],GSe=["alt","className","height","src","width"],ML=(lu={},Ai(lu,$f("public/DraftStyleDefault/depth0"),0),Ai(lu,$f("public/DraftStyleDefault/depth1"),1),Ai(lu,$f("public/DraftStyleDefault/depth2"),2),Ai(lu,$f("public/DraftStyleDefault/depth3"),3),Ai(lu,$f("public/DraftStyleDefault/depth4"),4),lu),IL=c9({b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE",mark:"HIGHLIGHT"}),HSe=function(e){var t={};return e.mapKeys(function(r,i){var a=[i.element];i.aliasedElements!==void 0&&a.push.apply(a,i.aliasedElements),a.forEach(function(o){t[o]===void 0?t[o]=r:typeof t[o]=="string"?t[o]=[t[o],r]:t[o].push(r)})}),c9(t)},zSe=function(e){if(hD(e)){var t=e;if(t.style.fontFamily.includes("monospace"))return"CODE"}return null},WSe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Object.keys(ML).some(function(r){e.classList.contains(r)&&(t=ML[r])}),t},XSe=function(e){if(!u9(e))return!1;var t=e;if(!t.href||t.protocol!=="http:"&&t.protocol!=="https:"&&t.protocol!=="mailto:"&&t.protocol!=="tel:")return!1;try{var r=new s9(t.href);return!0}catch{return!1}},KSe=function(e){if(!d9(e))return!1;var t=e;return!!(t.attributes.getNamedItem("src")&&t.attributes.getNamedItem("src").value)},YSe=function(e,t){if(!hD(e))return t;var r=e,i=r.style.fontWeight,a=r.style.fontStyle,o=r.style.textDecoration;return t.withMutations(function(s){NSe.indexOf(i)>=0?s.add("BOLD"):USe.indexOf(i)>=0&&s.remove("BOLD"),a==="italic"?s.add("ITALIC"):a==="normal"&&s.remove("ITALIC"),o==="underline"&&s.add("UNDERLINE"),o==="line-through"&&s.add("STRIKETHROUGH"),o==="none"&&(s.remove("UNDERLINE"),s.remove("STRIKETHROUGH"))})},_w=function(e){return e==="ul"||e==="ol"},qSe=function(){function n(t,r){Ai(this,"characterList",jl()),Ai(this,"currentBlockType","unstyled"),Ai(this,"currentDepth",0),Ai(this,"currentEntity",null),Ai(this,"currentText",""),Ai(this,"wrapper",null),Ai(this,"blockConfigs",[]),Ai(this,"contentBlocks",[]),Ai(this,"entityMap",RL),Ai(this,"blockTypeMap",void 0),Ai(this,"disambiguate",void 0),this.clear(),this.blockTypeMap=t,this.disambiguate=r}var e=n.prototype;return e.clear=function(){this.characterList=jl(),this.blockConfigs=[],this.currentBlockType="unstyled",this.currentDepth=0,this.currentEntity=null,this.currentText="",this.entityMap=RL,this.wrapper=null,this.contentBlocks=[]},e.addDOMNode=function(r){var i;return this.contentBlocks=[],this.currentDepth=0,(i=this.blockConfigs).push.apply(i,this._toBlockConfigs([r],bSe())),this._trimCurrentText(),this.currentText!==""&&this.blockConfigs.push(this._makeBlockConfig()),this},e.getContentBlocks=function(){return this.contentBlocks.length===0&&(BL?this._toContentBlocks(this.blockConfigs):this._toFlatContentBlocks(this.blockConfigs)),{contentBlocks:this.contentBlocks,entityMap:this.entityMap}},e._makeBlockConfig=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.key||LL(),a=gw({key:i,type:this.currentBlockType,text:this.currentText,characterList:this.characterList,depth:this.currentDepth,parent:null,children:jl(),prevSibling:null,nextSibling:null,childConfigs:[]},r);return this.characterList=jl(),this.currentBlockType="unstyled",this.currentText="",a},e._toBlockConfigs=function(r,i){for(var a=[],o=0;o<r.length;o++){var s=r[o],l=s.nodeName.toLowerCase();if(l==="body"||_w(l)){this._trimCurrentText(),this.currentText!==""&&a.push(this._makeBlockConfig());var u=this.currentDepth,d=this.wrapper;_w(l)&&(this.wrapper=l,_w(d)&&this.currentDepth++),a.push.apply(a,this._toBlockConfigs(Array.from(s.childNodes),i)),this.currentDepth=u,this.wrapper=d;continue}var h=this.blockTypeMap.get(l);if(h!==void 0){this._trimCurrentText(),this.currentText!==""&&a.push(this._makeBlockConfig());var f=this.currentDepth,m=this.wrapper;if(this.wrapper=l==="pre"?"pre":this.wrapper,typeof h!="string"&&(h=this.disambiguate(l,this.wrapper)||h[0]||"unstyled"),!BL&&hD(s)&&(h==="unordered-list-item"||h==="ordered-list-item")){var g=s;this.currentDepth=WSe(g,this.currentDepth)}var _=LL(),E=this._toBlockConfigs(Array.from(s.childNodes),i);this._trimCurrentText(),a.push(this._makeBlockConfig({key:_,childConfigs:E,type:h})),this.currentDepth=f,this.wrapper=m;continue}if(l==="#text"){this._addTextNode(s,i);continue}if(l==="br"){this._addBreakNode(s,i);continue}if(KSe(s)){this._addImgNode(s,i);continue}if(XSe(s)){this._addAnchorNode(s,a,i);continue}var x=i;IL.has(l)&&(x=x.add(IL.get(l))),x=YSe(s,x);var v=zSe(s);v!=null&&(x=x.add(v)),a.push.apply(a,this._toBlockConfigs(Array.from(s.childNodes),x))}return a},e._appendText=function(r,i){var a;this.currentText+=r;var o=CSe.create({style:i,entity:this.currentEntity});this.characterList=(a=this.characterList).push.apply(a,Array(r.length).fill(o))},e._trimCurrentText=function(){var r=this.currentText.length,i=r-this.currentText.trimLeft().length,a=this.currentText.trimRight().length,o=this.characterList.findEntry(function(s){return s.getEntity()!==null});i=o!==void 0?Math.min(i,o[0]):i,o=this.characterList.reverse().findEntry(function(s){return s.getEntity()!==null}),a=o!==void 0?Math.max(a,r-o[0]):a,i>a?(this.currentText="",this.characterList=jl()):(this.currentText=this.currentText.slice(i,a),this.characterList=this.characterList.slice(i,a))},e._addTextNode=function(r,i){var a=r.textContent,o=a.trim();o===""&&this.wrapper!=="pre"&&(a=" "),this.wrapper!=="pre"&&(a=a.replace(MSe,""),a=a.replace(BSe,A9)),this._appendText(a,i)},e._addBreakNode=function(r,i){!PSe(r)||this._appendText(`
`,i)},e._addImgNode=function(r,i){if(!!d9(r)){var a=r,o={};GSe.forEach(function(s){var l=a.getAttribute(s);l&&(o[s]=l)}),this.currentEntity=this.entityMap.__create("IMAGE","IMMUTABLE",o),l9("draftjs_fix_paste_for_img")?a.getAttribute("role")!=="presentation"&&this._appendText("\u{1F4F7}",i):this._appendText("\u{1F4F7}",i),this.currentEntity=null}},e._addAnchorNode=function(r,i,a){if(!!u9(r)){var o=r,s={};jSe.forEach(function(l){var u=o.getAttribute(l);u&&(s[l]=u)}),s.url=new s9(o.href).toString(),this.currentEntity=this.entityMap.__create("LINK","MUTABLE",s||{}),i.push.apply(i,this._toBlockConfigs(Array.from(r.childNodes),a)),this.currentEntity=null}},e._toContentBlocks=function(r){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=r.length-1,o=0;o<=a;o++){var s=r[o];s.parent=i,s.prevSibling=o>0?r[o-1].key:null,s.nextSibling=o<a?r[o+1].key:null,s.children=jl(s.childConfigs.map(function(l){return l.key})),this.contentBlocks.push(new DSe(gw({},s))),this._toContentBlocks(s.childConfigs,s.key)}},e._hoistContainersInBlockConfigs=function(r){var i=this,a=jl(r).flatMap(function(o){return o.type!=="unstyled"||o.text!==""?[o]:i._hoistContainersInBlockConfigs(o.childConfigs)});return a},e._toFlatContentBlocks=function(r){var i=this,a=this._hoistContainersInBlockConfigs(r);a.forEach(function(o){var s=i._extractTextFromBlockConfigs(o.childConfigs),l=s.text,u=s.characterList;i.contentBlocks.push(new VSe(gw({},o,{text:o.text+l,characterList:o.characterList.concat(u)})))})},e._extractTextFromBlockConfigs=function(r){for(var i=r.length-1,a="",o=jl(),s=0;s<=i;s++){var l=r[s];a+=l.text,o=o.concat(l.characterList),a!==""&&l.type!=="unstyled"&&(a+=`
`,o=o.push(o.last()));var u=this._extractTextFromBlockConfigs(l.childConfigs);a+=u.text,o=o.concat(u.characterList)}return{text:a,characterList:o}},n}(),QSe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:TSe,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:FSe;e=e.trim().replace(LSe,"").replace(ISe,A9).replace(OSe,"").replace(kSe,"");var i=t(e);if(!i)return null;var a=HSe(r),o=function(l,u){return l==="li"?u==="ol"?"ordered-list-item":"unordered-list-item":null};return new qSe(a,o).addDOMNode(i).getContentBlocks()},f9=QSe;function JSe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){ZSe(n,i,t[i])})}return n}function ZSe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var $Se=ld,ege=So,tge=f9,nge=ys,rge=o9,ige=Nc,h9=Jn.exports,age=QN,oge=h9.List,sge=h9.Repeat,p9=ige("draft_tree_data_support"),lge=p9?ege:$Se,cge={processHTML:function(e,t){return tge(e,rge,t)},processText:function(e,t,r){return e.reduce(function(i,a,o){a=age(a);var s=nge(),l={key:s,type:r,text:a,characterList:oge(sge(t,a.length))};if(p9&&o!==0){var u=o-1,d=i[u]=i[u].merge({nextSibling:s});l=JSe({},l,{prevSibling:d.getKey()})}return i.push(new lge(l)),i},[])}},uge=cge;function dge(n,e,t,r){var i=e.getStartKey(),a=e.getEndKey(),o=n.getBlockMap(),s=o.toSeq().skipUntil(function(l,u){return u===i}).takeUntil(function(l,u){return u===a}).concat([[a,o.get(a)]]).map(function(l){var u=l.getDepth()+t;return u=Math.max(0,Math.min(u,r)),l.set("depth",u)});return o=o.merge(s),n.merge({blockMap:o,selectionBefore:e,selectionAfter:e})}var Age=dge,cu=fa,es=I0,fge=Age,hge=ha,as={currentBlockContainsLink:function(e){var t=e.getSelection(),r=e.getCurrentContent(),i=r.getEntityMap();return r.getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some(function(a){var o=a.getEntity();return!!o&&i.__get(o).getType()==="LINK"})},getCurrentBlockType:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey()).getType()},getDataObjectForLinkURL:function(e){return{url:e.toString()}},handleKeyCommand:function(e,t,r){switch(t){case"bold":return as.toggleInlineStyle(e,"BOLD");case"italic":return as.toggleInlineStyle(e,"ITALIC");case"underline":return as.toggleInlineStyle(e,"UNDERLINE");case"code":return as.toggleCode(e);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return as.onBackspace(e);case"delete":case"delete-word":case"delete-to-end-of-block":return as.onDelete(e);default:return null}},insertSoftNewline:function(e){var t=cu.insertText(e.getCurrentContent(),e.getSelection(),`
`,e.getCurrentInlineStyle(),null),r=es.push(e,t,"insert-characters");return es.forceSelection(r,t.getSelectionAfter())},onBackspace:function(e){var t=e.getSelection();if(!t.isCollapsed()||t.getAnchorOffset()||t.getFocusOffset())return null;var r=e.getCurrentContent(),i=t.getStartKey(),a=r.getBlockBefore(i);if(a&&a.getType()==="atomic"){var o=r.getBlockMap().delete(a.getKey()),s=r.merge({blockMap:o,selectionAfter:t});if(s!==r)return es.push(e,s,"remove-range")}var l=as.tryToRemoveBlockStyle(e);return l?es.push(e,l,"change-block-type"):null},onDelete:function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var r=e.getCurrentContent(),i=t.getStartKey(),a=r.getBlockForKey(i),o=a.getLength();if(t.getStartOffset()<o)return null;var s=r.getBlockAfter(i);if(!s||s.getType()!=="atomic")return null;var l=t.merge({focusKey:s.getKey(),focusOffset:s.getLength()}),u=cu.removeRange(r,l,"forward");return u!==r?es.push(e,u,"remove-range"):null},onTab:function(e,t,r){var i=t.getSelection(),a=i.getAnchorKey();if(a!==i.getFocusKey())return t;var o=t.getCurrentContent(),s=o.getBlockForKey(a),l=s.getType();if(l!=="unordered-list-item"&&l!=="ordered-list-item")return t;e.preventDefault();var u=s.getDepth();if(!e.shiftKey&&u===r)return t;var d=fge(o,i,e.shiftKey?-1:1,r);return es.push(t,d,"adjust-depth")},toggleBlockType:function(e,t){var r=e.getSelection(),i=r.getStartKey(),a=r.getEndKey(),o=e.getCurrentContent(),s=r;if(i!==a&&r.getEndOffset()===0){var l=hge(o.getBlockBefore(a));a=l.getKey(),s=s.merge({anchorKey:i,anchorOffset:r.getStartOffset(),focusKey:a,focusOffset:l.getLength(),isBackward:!1})}var u=o.getBlockMap().skipWhile(function(h,f){return f!==i}).reverse().skipWhile(function(h,f){return f!==a}).some(function(h){return h.getType()==="atomic"});if(u)return e;var d=o.getBlockForKey(i).getType()===t?"unstyled":t;return es.push(e,cu.setBlockType(o,s,d),"change-block-type")},toggleCode:function(e){var t=e.getSelection(),r=t.getAnchorKey(),i=t.getFocusKey();return t.isCollapsed()||r!==i?as.toggleBlockType(e,"code-block"):as.toggleInlineStyle(e,"CODE")},toggleInlineStyle:function(e,t){var r=e.getSelection(),i=e.getCurrentInlineStyle();if(r.isCollapsed())return es.setInlineStyleOverride(e,i.has(t)?i.remove(t):i.add(t));var a=e.getCurrentContent(),o;return i.has(t)?o=cu.removeInlineStyle(a,r,t):o=cu.applyInlineStyle(a,r,t),es.push(e,o,"change-inline-style")},toggleLink:function(e,t,r){var i=cu.applyEntity(e.getCurrentContent(),t,r);return es.push(e,i,"apply-entity")},tryToRemoveBlockStyle:function(e){var t=e.getSelection(),r=t.getAnchorOffset();if(t.isCollapsed()&&r===0){var i=t.getAnchorKey(),a=e.getCurrentContent(),o=a.getBlockForKey(i),s=o.getType(),l=a.getBlockBefore(i);if(s==="code-block"&&l&&l.getType()==="code-block"&&l.getLength()!==0)return null;if(s!=="unstyled")return cu.setBlockType(a,t,"unstyled")}return null}},m9=as,pge=/\r\n?|\n/g;function mge(n){return n.split(pge)}var Sge=mge,xw=cm,OL=mo,gge=z7,S9=fa,vw=uge,g9=I0,kL=m9,NL=aD,_ge=W7,UL=T2,jL=Sge;function xge(n,e){e.preventDefault();var t=new gge(e.clipboardData);if(!t.isRichText()){var r=t.getFiles(),i=t.getText();if(r.length>0){if(n.props.handlePastedFiles&&UL(n.props.handlePastedFiles(r)))return;_ge(r,function(H){if(H=H||i,!!H){var R=n._latestEditorState,j=jL(H),te=OL.create({style:R.getCurrentInlineStyle(),entity:NL(R.getCurrentContent(),R.getSelection())}),$=kL.getCurrentBlockType(R),z=vw.processText(j,te,$),I=xw.createFromArray(z),q=S9.replaceWithFragment(R.getCurrentContent(),R.getSelection(),I);n.update(g9.push(R,q,"insert-fragment"))}});return}}var a=[],o=t.getText(),s=t.getHTML(),l=n._latestEditorState;if(n.props.formatPastedText){var u=n.props.formatPastedText(o,s),d=u.text,h=u.html;o=d,s=h}if(!(n.props.handlePastedText&&UL(n.props.handlePastedText(o,s,l)))){if(o&&(a=jL(o)),!n.props.stripPastedStyles){var f=n.getClipboard();if(!n.props.formatPastedText&&t.isRichText()&&f){var m;if(((m=s)===null||m===void 0?void 0:m.indexOf(n.getEditorKey()))!==-1||a.length===1&&f.size===1&&f.first().getText()===o){n.update(_g(n._latestEditorState,f));return}}else if(f&&t.types.includes("com.apple.webarchive")&&!t.types.includes("text/html")&&vge(a,f)){n.update(_g(n._latestEditorState,f));return}if(s){var g=vw.processHTML(s,n.props.blockRenderMap);if(g){var _=g.contentBlocks,E=g.entityMap;if(_){var x=xw.createFromArray(_);n.update(_g(n._latestEditorState,x,E));return}}}n.setClipboard(null)}if(a.length){var v=OL.create({style:l.getCurrentInlineStyle(),entity:NL(l.getCurrentContent(),l.getSelection())}),C=kL.getCurrentBlockType(l),V=vw.processText(a,v,C),D=xw.createFromArray(V);n.update(_g(n._latestEditorState,D))}}}function _g(n,e,t){var r=S9.replaceWithFragment(n.getCurrentContent(),n.getSelection(),e);return g9.push(n,r.set("entityMap",t),"insert-fragment")}function vge(n,e){return n.length===e.size&&e.valueSeq().every(function(t,r){return t.getText()===n[r]})}var wge=xge,_9=pa,yge=Vhe,Ege=bhe,Cge=Lhe,Vge=khe,Dge=qhe,Fge=Jhe,Tge=$he,bge=npe,Pge=Bpe,Rge=dSe,Lge=wge,x9=C7,Bge=_9.isBrowser("Chrome"),Mge=_9.isBrowser("Firefox"),GL=Bge||Mge?x9:function(n){},Ige={onBeforeInput:yge,onBlur:Ege,onCompositionStart:Cge,onCopy:Vge,onCut:Dge,onDragOver:Fge,onDragStart:Tge,onFocus:bge,onInput:Pge,onKeyDown:Rge,onPaste:Lge,onSelect:x9,onMouseUp:GL,onKeyUp:GL},Oge=Ige,kge=cs.exports,Nge=kge.unstable_flushControlled,Uge=Nge,HL=Xo.jsx;function jge(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Gge=Ne.exports,zL=cd,Hge=function(n){jge(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.shouldComponentUpdate=function(i){return this.props.text!==i.text||this.props.editorState.getSelection().getHasFocus()!==i.editorState.getSelection().getHasFocus()},t.render=function(){var i=this.props.editorState.getSelection().getHasFocus(),a=zL({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":i}),o={whiteSpace:"pre-wrap"};return HL("div",{className:a,children:HL("div",{className:zL("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID,style:o,children:this.props.text})})},e}(Gge.Component),zge=Hge,v9=AD,eh=C2,w9=pa,tc=w9.isPlatform("Mac OS X"),WL=tc&&w9.isBrowser("Firefox < 29"),Kl=v9.hasCommandModifier,js=v9.isCtrlKeyCommand;function y9(n){return tc&&n.altKey||js(n)}function Wge(n){return Kl(n)?n.shiftKey?"redo":"undo":null}function Xge(n){return!tc&&n.shiftKey?null:y9(n)?"delete-word":"delete"}function Kge(n){return Kl(n)&&tc?"backspace-to-start-of-line":y9(n)?"backspace-word":"backspace"}function Yge(n){switch(n.keyCode){case 66:return Kl(n)?"bold":null;case 68:return js(n)?"delete":null;case 72:return js(n)?"backspace":null;case 73:return Kl(n)?"italic":null;case 74:return Kl(n)?"code":null;case 75:return tc&&js(n)?"secondary-cut":null;case 77:return js(n)?"split-block":null;case 79:return js(n)?"split-block":null;case 84:return tc&&js(n)?"transpose-characters":null;case 85:return Kl(n)?"underline":null;case 87:return tc&&js(n)?"backspace-word":null;case 89:return js(n)?tc?"secondary-paste":"redo":null;case 90:return Wge(n)||null;case eh.RETURN:return"split-block";case eh.DELETE:return Xge(n);case eh.BACKSPACE:return Kge(n);case eh.LEFT:return WL&&Kl(n)?"move-selection-to-start-of-block":null;case eh.RIGHT:return WL&&Kl(n)?"move-selection-to-end-of-block":null;default:return null}}var E9=Yge,ww=Xo.jsx,qge=Ne.exports.createElement,XL=Xo.jsxs;function yw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){rn(n,i,t[i])})}return n}function ln(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function rn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function C9(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Qge=rD,Jge=d7,Zge=lAe,$ge=Ife,e8e=Ahe,t8e=Oge,KL=Uge,n8e=zge,r8e=I0,V9=Ne.exports,i8e=cD,a8e=V2,o8e=pa,Ew=cd,s8e=ys,l8e=E9,c8e=D2,u8e=Nc,YL=r0,qL=mm,d8e=ha,D9=o8e.isBrowser("IE"),A8e=!D9,QL={edit:t8e,composite:Zge,drag:e8e,cut:null,render:null},JL=!1,f8e=function(n){C9(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){return null},t.componentDidMount=function(){this._update()},t.componentDidUpdate=function(){this._update()},t._update=function(){var i=this.props.editor;i._latestEditorState=this.props.editorState,i._blockSelectEvents=!0},e}(V9.Component),F9=function(n){C9(e,n);function e(r){var i;return i=n.call(this,r)||this,rn(ln(i),"_blockSelectEvents",void 0),rn(ln(i),"_clipboard",void 0),rn(ln(i),"_handler",void 0),rn(ln(i),"_dragCount",void 0),rn(ln(i),"_internalDrag",void 0),rn(ln(i),"_editorKey",void 0),rn(ln(i),"_placeholderAccessibilityID",void 0),rn(ln(i),"_latestEditorState",void 0),rn(ln(i),"_latestCommittedEditorState",void 0),rn(ln(i),"_pendingStateFromBeforeInput",void 0),rn(ln(i),"_onBeforeInput",void 0),rn(ln(i),"_onBlur",void 0),rn(ln(i),"_onCharacterData",void 0),rn(ln(i),"_onCompositionEnd",void 0),rn(ln(i),"_onCompositionStart",void 0),rn(ln(i),"_onCopy",void 0),rn(ln(i),"_onCut",void 0),rn(ln(i),"_onDragEnd",void 0),rn(ln(i),"_onDragOver",void 0),rn(ln(i),"_onDragStart",void 0),rn(ln(i),"_onDrop",void 0),rn(ln(i),"_onInput",void 0),rn(ln(i),"_onFocus",void 0),rn(ln(i),"_onKeyDown",void 0),rn(ln(i),"_onKeyPress",void 0),rn(ln(i),"_onKeyUp",void 0),rn(ln(i),"_onMouseDown",void 0),rn(ln(i),"_onMouseUp",void 0),rn(ln(i),"_onPaste",void 0),rn(ln(i),"_onSelect",void 0),rn(ln(i),"editor",void 0),rn(ln(i),"editorContainer",void 0),rn(ln(i),"focus",void 0),rn(ln(i),"blur",void 0),rn(ln(i),"setMode",void 0),rn(ln(i),"exitCurrentMode",void 0),rn(ln(i),"restoreEditorDOM",void 0),rn(ln(i),"setClipboard",void 0),rn(ln(i),"getClipboard",void 0),rn(ln(i),"getEditorKey",void 0),rn(ln(i),"update",void 0),rn(ln(i),"onDragEnter",void 0),rn(ln(i),"onDragLeave",void 0),rn(ln(i),"_handleEditorContainerRef",function(a){i.editorContainer=a,i.editor=a!==null?a.firstChild:null}),rn(ln(i),"focus",function(a){var o=i.props.editorState,s=o.getSelection().getHasFocus(),l=i.editor;if(!!l){var u=a8e.getScrollParent(l),d=a||c8e(u),h=d.x,f=d.y;qL(l)||YL(!1),l.focus(),u===window?window.scrollTo(h,f):i8e.setTop(u,f),s||i.update(r8e.forceSelection(o,o.getSelection()))}}),rn(ln(i),"blur",function(){var a=i.editor;!a||(qL(a)||YL(!1),a.blur())}),rn(ln(i),"setMode",function(a){var o=i.props,s=o.onPaste,l=o.onCut,u=o.onCopy,d=yw({},QL.edit);s&&(d.onPaste=s),l&&(d.onCut=l),u&&(d.onCopy=u);var h=yw({},QL,{edit:d});i._handler=h[a]}),rn(ln(i),"exitCurrentMode",function(){i.setMode("edit")}),rn(ln(i),"restoreEditorDOM",function(a){i.setState({contentsKey:i.state.contentsKey+1},function(){i.focus(a)})}),rn(ln(i),"setClipboard",function(a){i._clipboard=a}),rn(ln(i),"getClipboard",function(){return i._clipboard}),rn(ln(i),"update",function(a){i._latestEditorState=a,i.props.onChange(a)}),rn(ln(i),"onDragEnter",function(){i._dragCount++}),rn(ln(i),"onDragLeave",function(){i._dragCount--,i._dragCount===0&&i.exitCurrentMode()}),i._blockSelectEvents=!1,i._clipboard=null,i._handler=null,i._dragCount=0,i._editorKey=r.editorKey||s8e(),i._placeholderAccessibilityID="placeholder-"+i._editorKey,i._latestEditorState=r.editorState,i._latestCommittedEditorState=r.editorState,i._onBeforeInput=i._buildHandler("onBeforeInput"),i._onBlur=i._buildHandler("onBlur"),i._onCharacterData=i._buildHandler("onCharacterData"),i._onCompositionEnd=i._buildHandler("onCompositionEnd"),i._onCompositionStart=i._buildHandler("onCompositionStart"),i._onCopy=i._buildHandler("onCopy"),i._onCut=i._buildHandler("onCut"),i._onDragEnd=i._buildHandler("onDragEnd"),i._onDragOver=i._buildHandler("onDragOver"),i._onDragStart=i._buildHandler("onDragStart"),i._onDrop=i._buildHandler("onDrop"),i._onInput=i._buildHandler("onInput"),i._onFocus=i._buildHandler("onFocus"),i._onKeyDown=i._buildHandler("onKeyDown"),i._onKeyPress=i._buildHandler("onKeyPress"),i._onKeyUp=i._buildHandler("onKeyUp"),i._onMouseDown=i._buildHandler("onMouseDown"),i._onMouseUp=i._buildHandler("onMouseUp"),i._onPaste=i._buildHandler("onPaste"),i._onSelect=i._buildHandler("onSelect"),i.getEditorKey=function(){return i._editorKey},i.state={contentsKey:0},i}var t=e.prototype;return t._buildHandler=function(i){var a=this;return function(o){if(!a.props.readOnly){var s=a._handler&&a._handler[i];s&&(KL?KL(function(){return s(a,o)}):s(a,o))}}},t._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},t._renderPlaceholder=function(){if(this._showPlaceholder()){var i={text:d8e(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return ww(n8e,{...i})}return null},t._renderARIADescribedBy=function(){var i=this.props.ariaDescribedBy||"",a=this._showPlaceholder()?this._placeholderAccessibilityID:"";return i.replace("{{editor_id_placeholder}}",a)||void 0},t.render=function(){var i=this.props,a=i.blockRenderMap,o=i.blockRendererFn,s=i.blockStyleFn,l=i.customStyleFn,u=i.customStyleMap,d=i.editorState,h=i.preventScroll,f=i.readOnly,m=i.textAlignment,g=i.textDirectionality,_=Ew({"DraftEditor/root":!0,"DraftEditor/alignLeft":m==="left","DraftEditor/alignRight":m==="right","DraftEditor/alignCenter":m==="center"}),E={outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},x=this.props.role||"textbox",v=x==="combobox"?!!this.props.ariaExpanded:null,C={blockRenderMap:a,blockRendererFn:o,blockStyleFn:s,customStyleMap:yw({},Jge,u),customStyleFn:l,editorKey:this._editorKey,editorState:d,preventScroll:h,textDirectionality:g};return XL("div",{className:_,children:[this._renderPlaceholder(),ww("div",{className:Ew("DraftEditor/editorContainer"),ref:this._handleEditorContainerRef,children:XL("div",{"aria-activedescendant":f?null:this.props.ariaActiveDescendantID,"aria-autocomplete":f?null:this.props.ariaAutoComplete,"aria-controls":f?null:this.props.ariaControls,"aria-describedby":this._renderARIADescribedBy(),"aria-expanded":f?null:v,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,"aria-owns":f?null:this.props.ariaOwneeID,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:Ew({notranslate:!f,"public/DraftEditor/content":!0}),contentEditable:!f,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:this.props.editorRef,role:f?null:x,spellCheck:A8e&&this.props.spellCheck,style:E,suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex,children:[ww(f8e,{editor:this,editorState:d}),qge($ge,{...C,key:"contents"+this.state.contentsKey})]})})]})},t.componentDidMount=function(){this._blockSelectEvents=!1,!JL&&u8e("draft_ods_enabled")&&(JL=!0),this.setMode("edit"),D9&&(this.editor?this.editor.ownerDocument.execCommand("AutoUrlDetect",!1,!1):window.execCommand("AutoUrlDetect",!1,!1))},t.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestEditorState=this.props.editorState,this._latestCommittedEditorState=this.props.editorState},e}(V9.Component);rn(F9,"defaultProps",{ariaDescribedBy:"{{editor_id_placeholder}}",blockRenderMap:Qge,blockRendererFn:function(){return null},blockStyleFn:function(){return""},keyBindingFn:l8e,readOnly:!1,spellCheck:!1,stripPastedStyles:!1});var h8e=F9,p8e={},m8e={stringify:function(e){return"_"+String(e)},unstringify:function(e){return e.slice(1)}},T9=m8e,S8e=T9,g8e=Ad,ZL=g8e.strlen;function _8e(n,e){var t=[];return n.findEntityRanges(function(r){return!!r.getEntity()},function(r,i){var a=n.getText(),o=n.getEntityAt(r);t.push({offset:ZL(a.slice(0,r)),length:ZL(a.slice(r,i)),key:Number(e[S8e.stringify(o)])})}),t}var x8e=_8e,$L=Ad,v8e=um,w8e=function(e,t){return e===t},y8e=function(e){return!!e},E8e=[];function C8e(n,e,t){var r=[],i=e.map(function(a){return a.has(t)}).toList();return v8e(i,w8e,y8e,function(a,o){var s=n.getText();r.push({offset:$L.strlen(s.slice(0,a)),length:$L.strlen(s.slice(a,o)),style:t})}),r}function V8e(n){var e=n.getCharacterList().map(function(r){return r.getStyle()}).toList(),t=e.flatten().toSet().map(function(r){return C8e(n,e,r)});return Array.prototype.concat.apply(E8e,t.toJS())}var D8e=V8e;function F8e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){T8e(n,i,t[i])})}return n}function T8e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var b8e=ld,P8e=So,b9=T9,R8e=x8e,L8e=D8e,B8e=r0,eB=function(e,t){return{key:e.getKey(),text:e.getText(),type:e.getType(),depth:e.getDepth(),inlineStyleRanges:L8e(e),entityRanges:R8e(e,t),data:e.getData().toObject()}},M8e=function(e,t,r,i){if(e instanceof b8e){r.push(eB(e,t));return}e instanceof P8e||B8e(!1);var a=e.getParentKey(),o=i[e.getKey()]=F8e({},eB(e,t),{children:[]});if(a){i[a].children.push(o);return}r.push(o)},I8e=function(e,t){var r=t.entityMap,i=[],a={},o={},s=0;return e.getBlockMap().forEach(function(l){l.findEntityRanges(function(u){return u.getEntity()!==null},function(u){var d=l.getEntityAt(u),h=b9.stringify(d);o[h]||(o[h]=d,r[h]="".concat(s),s++)}),M8e(l,r,i,a)}),{blocks:i,entityMap:r}},O8e=function(e,t){var r=t.blocks,i=t.entityMap,a={};return Object.keys(i).forEach(function(o,s){var l=e.getEntity(b9.unstringify(o));a[s]={type:l.getType(),mutability:l.getMutability(),data:l.getData()}}),{blocks:r,entityMap:a}},k8e=function(e){var t={entityMap:{},blocks:[]};return t=I8e(e,t),t=O8e(e,t),t},N8e=k8e;function ph(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){U8e(n,i,t[i])})}return n}function U8e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var j8e=ys,P9=r0,G8e=function(e,t){for(var r=[].concat(e).reverse();r.length;){var i=r.pop();t(i);var a=i.children;Array.isArray(a)||P9(!1),r=r.concat([].concat(a.reverse()))}},tB=function(e){if(!(e&&e.type))return!1;var t=e.type;return t==="unordered-list-item"||t==="ordered-list-item"},H8e=function(e){Array.isArray(e.children)&&(e.children=e.children.map(function(t){return t.type===e.type?ph({},t,{depth:(e.depth||0)+1}):t}))},z8e={fromRawTreeStateToRawState:function(e){var t=e.blocks,r=[];return Array.isArray(t)||P9(!1),!Array.isArray(t)||!t.length?e:(G8e(t,function(i){var a=ph({},i);tB(i)&&(a.depth=a.depth||0,H8e(i),i.children!=null&&i.children.length>0)||(delete a.children,r.push(a))}),e.blocks=r,ph({},e,{blocks:r}))},fromRawStateToRawTreeState:function(e){var t=[],r=[];return e.blocks.forEach(function(i){var a=tB(i),o=i.depth||0,s=ph({},i,{children:[]});if(!a){t.push(s);return}var l=r[0];if(l==null&&o===0)t.push(s);else if(l==null||l.depth<o-1){var u={key:j8e(),text:"",depth:o-1,type:i.type,children:[],entityRanges:[],inlineStyleRanges:[]};r.unshift(u),o===1?t.push(u):l!=null&&l.children.push(u),u.children.push(s)}else if(l.depth===o-1)l.children.push(s);else{for(;l!=null&&l.depth>=o;)r.shift(),l=r[0];o>0?l.children.push(s):t.push(s)}}),ph({},e,{blocks:t})}},W8e=z8e,X8e=mo,K8e=Jn.exports,Y8e=K8e.List;function q8e(n,e){var t=n.map(function(r,i){var a=e[i];return X8e.create({style:r,entity:a})});return Y8e(t)}var Q8e=q8e,J8e=Ad,nB=J8e.substr;function Z8e(n,e){var t=Array(n.length).fill(null);return e&&e.forEach(function(r){for(var i=nB(n,0,r.offset).length,a=i+nB(n,r.offset,r.length).length,o=i;o<a;o++)t[o]=r.key}),t}var $8e=Z8e,e_e=Ad,t_e=Jn.exports,n_e=t_e.OrderedSet,rB=e_e.substr,r_e=n_e();function i_e(n,e){var t=Array(n.length).fill(r_e);return e&&e.forEach(function(r){for(var i=rB(n,0,r.offset).length,a=i+rB(n,r.offset,r.length).length;i<a;)t[i]=t[i].add(r.style),i++}),t}var a_e=i_e;function Ep(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){o_e(n,i,t[i])})}return n}function o_e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var s_e=ld,iB=So,l_e=ZV,c_e=g2,aB=W8e,oB=_2,u_e=Q8e,d_e=$8e,A_e=a_e,R9=ys,f_e=Nc,pD=Jn.exports,O4=r0,sB=f_e("draft_tree_data_support"),lB=pD.List,h_e=pD.Map,L9=pD.OrderedMap,k4=function(e,t){var r=e.key,i=e.type,a=e.data,o=e.text,s=e.depth,l={text:o,depth:s||0,type:i||"unstyled",key:r||R9(),data:h_e(a),characterList:p_e(e,t)};return l},p_e=function(e,t){var r=e.text,i=e.entityRanges,a=e.inlineStyleRanges,o=i||[],s=a||[];return u_e(A_e(r,s),d_e(r,o.filter(function(l){return t.hasOwnProperty(l.key)}).map(function(l){return Ep({},l,{key:t[l.key]})})))},Cw=function(e){return Ep({},e,{key:e.key||R9()})},cB=function(e,t,r){var i=t.map(function(a){return Ep({},a,{parentRef:r})});return e.concat(i.reverse())},m_e=function(e,t){return e.map(Cw).reduce(function(r,i,a){Array.isArray(i.children)||O4(!1);var o=i.children.map(Cw),s=new iB(Ep({},k4(i,t),{prevSibling:a===0?null:e[a-1].key,nextSibling:a===e.length-1?null:e[a+1].key,children:lB(o.map(function(E){return E.key}))}));r=r.set(s.getKey(),s);for(var l=cB([],o,s);l.length>0;){var u=l.pop(),d=u.parentRef,h=d.getChildKeys(),f=h.indexOf(u.key),m=Array.isArray(u.children);if(!m){m||O4(!1);break}var g=u.children.map(Cw),_=new iB(Ep({},k4(u,t),{parent:d.getKey(),children:lB(g.map(function(E){return E.key})),prevSibling:f===0?null:h.get(f-1),nextSibling:f===h.size-1?null:h.get(f+1)}));r=r.set(_.getKey(),_),l=cB(l,g,_)}return r},L9())},S_e=function(e,t){return L9(e.map(function(r){var i=new s_e(k4(r,t));return[i.getKey(),i]}))},g_e=function(e,t){var r=e.blocks.find(function(o){return Array.isArray(o.children)&&o.children.length>0}),i=sB&&!r?aB.fromRawStateToRawTreeState(e).blocks:e.blocks;if(!sB)return S_e(r?aB.fromRawTreeStateToRawState(e).blocks:i,t);var a=m_e(i,t);return a},__e=function(e){var t=e.entityMap,r={};return Object.keys(t).forEach(function(i){var a=t[i],o=a.type,s=a.mutability,l=a.data;r[i]=c_e.__create(o,s,l||{})}),r},x_e=function(e){Array.isArray(e.blocks)||O4(!1);var t=__e(e),r=g_e(e,t),i=r.isEmpty()?new oB:oB.createEmpty(r.first().getKey());return new l_e({blockMap:r,entityMap:t,selectionBefore:i,selectionAfter:i})},v_e=x_e,w_e=t9;function y_e(n){var e=w_e(n),t=0,r=0,i=0,a=0;if(e.length){if(e.length>1&&e[0].width===0){var o=e[1];t=o.top,r=o.right,i=o.bottom,a=o.left}else{var s=e[0];t=s.top,r=s.right,i=s.bottom,a=s.left}for(var l=1;l<e.length;l++){var u=e[l];u.height!==0&&u.width!==0&&(t=Math.min(t,u.top),r=Math.max(r,u.right),i=Math.max(i,u.bottom),a=Math.min(a,u.left))}}return{top:t,right:r,bottom:i,left:a,width:r-a,height:i-t}}var E_e=y_e,C_e=E_e;function V_e(n){var e=n.getSelection();if(!e.rangeCount)return null;var t=e.getRangeAt(0),r=C_e(t),i=r.top,a=r.right,o=r.bottom,s=r.left;return i===0&&a===0&&o===0&&s===0?null:r}var D_e=V_e,F_e=xde,T_e=cm,b_e=mo,P_e=Dde,R_e=ld,L_e=ZV,B_e=rD,M_e=d7,I_e=h8e,O_e=G7,k_e=g2,N_e=fa,U_e=qN,j_e=I0,G_e=AD,H_e=p8e,z_e=m9,W_e=_2,X_e=N8e,K_e=v_e,Y_e=ys,q_e=E9,Q_e=D_e,J_e=f9,Z_e={Editor:I_e,EditorBlock:O_e,EditorState:j_e,CompositeDecorator:P_e,Entity:k_e,EntityInstance:U_e,BlockMapBuilder:T_e,CharacterMetadata:b_e,ContentBlock:R_e,ContentState:L_e,RawDraftContentState:H_e,SelectionState:W_e,AtomicBlockUtils:F_e,KeyBindingUtil:G_e,Modifier:N_e,RichUtils:z_e,DefaultDraftBlockRenderMap:B_e,DefaultDraftInlineStyle:M_e,convertFromHTML:J_e,convertFromRaw:K_e,convertToRaw:X_e,genKey:Y_e,getDefaultKeyBinding:q_e,getVisibleSelectionRect:Q_e},uB=Z_e;const $_e=Xj({__proto__:null,default:uB},[uB]),dB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIYAjI6HQXEnwAAABhJREFUKM9jVOAr/M9AAmBiIBGMahgpGgDPZgG2Ib/wLgAAAABJRU5ErkJggg==",e2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEVFxAF7j7NHwAAABhJREFUKM9jZGBg+M9AAmBiIBGMahgpGgBjsgEXVtmPGwAAAABJRU5ErkJggg==",t2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEgU6g5FoNQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAALUlEQVQoz2Pcs2fPfwYSAAsDAwODs7MzUYr37t3LwMRAIhjVMDg0sMBikFgAALmcCIbj7SdmAAAAAElFTkSuQmCC",n2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIYAjMliRb4KwAAABlJREFUKM9jfM4g8p+BBMDEQCIY1TBSNAAAozECElsuYrMAAAAASUVORK5CYII=",r2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbETkTsJY3/wAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAGUlEQVQoz2NkWK35n4EEwMRAIhjVMFI0AABI7wHr2oKergAAAABJRU5ErkJggg==",i2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbETo20L+wewAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAF0lEQVQY02NksPvJQAgwMRABRhXRWxEALqcBT2IuNqoAAAAASUVORK5CYII=",a2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4gEVFhwDqipNEQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAGUlEQVQoz2N84X72PwMJgImBRDCqYaRoAADu4QMTA4JViQAAAABJRU5ErkJggg==",o2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEgAVVTehKQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAFklEQVQY02P8/5+BIGBiYBhVNPgUAQCIRAIWwXFSYQAAAABJRU5ErkJggg==",AB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEg8rE86gTQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAjUlEQVQoz2NkgAI2kYb/DHjArzcNjAwMDAwsMMUBNcX41DNsaGH4/+tNAyMDm0jD/7AJn/8L6f7/L6T7HwPAxMMmfP7PJtLwn4WBgYFhz1weBgYGBoa3lxgYhPVQTYaJwdQwMZAISNbAgi7w9hKJGrD5gSInkayBERZxPJL1eBV+ed7I8OtNAyMjqUkDAL98Qt1lcctCAAAAAElFTkSuQmCC",s2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEhIhDHclTwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAcUlEQVQoz7WSQQqAMBADZ8UX9lBvfZNv8KbQPstvxENVqEqlgjku2WxC1jjgETUsGEB/kN0YqvzEpLzkkVuDiOgJRETcOR4ZHjFkFTlhyQrlYjZDRyP660CuzH69eFuoWuKDpf8z2Nny8CI957at9TU2C/U/c6pZEeMAAAAASUVORK5CYII=",l2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFExsG9NtIRgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAh0lEQVQoz5WSsQ2EMBAE5xBFEEABhKQUQCuU8foy3IoLICWkAC6gCwjgpP8T2GJCe7zeky1cjHW9kyCoCkBp8mcYSBLjHlRFTN6WBYBumv68ue8BqNqWb4znDb+yCYatmVOQwQeUfvOp0u2BO8HXzFbyFD4tx+sZxB5ubJpkclhXgqrI269xAE88PDD7ndcJAAAAAElFTkSuQmCC",c2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFEw8RWaYa1AAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAf0lEQVQoz2NgwALcRBj+u4kw/GcgBriJMPz/f63l//9rLYQ1wRX3KMIxuiZGZMU7D7UwMGybi2GQe8d9hl1vEGpRTLYUYEDBGDahK0Z2DrLY0SiB/24iDP+ZCAXCsRpFFD4TA4mAoAarlvsofBZ069EVoDuJhZCb0QEj0UkACgCWBVpECbXGpQAAAABJRU5ErkJggg==",u2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFEwosfLmigAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAkUlEQVQoz2N0E2H4z0ACYGFgYGDYeaiFoMJjq/YxNE7ZB9HAwMDAwLBtLgMDAwODVct9VIU1ihDGrfcIG2DAquU+QgEOMSaCTkEzgImBREBQA7qfGBkYGBjcRBj+76xQxOtp9477DLveMDAywiSQNaEDmGK4Dfg0ISvGCtxEGP7/71H8/79H8T/RqcBNhAGnYgBzBDZGRVNwNwAAAABJRU5ErkJggg==",d2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFEw4S2bR6LwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAnUlEQVQoz2P8//8/AzpwF2XEFIQCFmyKdx5qwVB4bNU+hsYp+1A1wBVvm4tp9K33qDYgK7ZquY9qeo0iqpPQFSMrYGBgYLBquc/Q4yXAwMDAwMCE1xlYbGBiIBEw7Xz9n9HdrgavImQ/McLiwV2U8f/OCkUMBTAnHTv3nqFx1wdEKO18/Z8Rpgnd0yhOQubsfP2f0b3jPl7nMZKaNAC6Skw3vnsvzwAAAABJRU5ErkJggg==",A2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFEw0C7y45iAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAk0lEQVQoz2N0E2H4z4AD7Hz9nxFdjIWBgYFh56EWDMXHVu1jcBdl/I+uiQXO2jYXRYMVDwNDvZsAhiYWFEUt91FtqVFkqGdgQNHEgqz4WI0iA7oB6JpYGPAAmAFWRoJwTUwMJAK8GpD91LjrAwOKk47VKGL1NAMDA4N7x30GDE8jK0AGyIoJOgldMQMDAwMjqUkDAB8tRZsJcTtlAAAAAElFTkSuQmCC",f2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFExEaGjX8gwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAc0lEQVQoz2NkYGBg0NSU+M9ABLh+/QUjC4wjo6iJV/GT+9cZGBgYGJgYSAQs6AK7tu5D4bt5O+HXgKwAXTNeJ+3aug/DdAYGBgZGGENTU+I/zOPoip/cv85w/foLRqw24DIZpx/Q3U6Sp7EByuIBFpv4AABbOSOQoUM90gAAAABJRU5ErkJggg==",h2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEhUYHDM7gAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAaElEQVQoz2MUkAj6z4ADfHixjhFdjIWBgYFBUDIYl57/6JpYYIx756IwVCsZYWpiQVWwDEXDvXNRGJqYGIgAgpLBDDC/sjAQCaD+/M+C7gR8TiTSD6hiTAwkAvI1YHMvNjFGfEkDGwAAawEiuWY5s24AAAAASUVORK5CYII=",p2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEhsTFWLPhgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAA6klEQVQoz5WQIW7DQBBF31YmkUKC4kohgXOEQZEWR/U1SiMZRDlAVVCpFwgI8QFW5qY+gmFIlG5OMSVey1Yd0I9mV+/t7IxjFFVvzKRtG5fqbAwfT4c5ns8PLEmZqgew4+nA234PwOPxA8B6/TqRAIeqt1DXlhLj3arqbFV1thjvw32oa1P1hqqfleZgVU/Wtg2A61s+meF7GNz9d0svqRDJbbkylisjhAshXEhnkdwmgkhum61Q+JLbdTG8fLsuKHzJZiuDlCV4nN3u/c+3esacSA4wSIUvJ2BovvpuHYBLAvB8S31c10V+ATYFjevs0HWqAAAAAElFTkSuQmCC",m2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFExQIlPt5jgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAbElEQVQoz2NkQANBugz/kfnrLjMwIvNZ0BUuDUc1IJoBIg7TyAhTDFPIEaTJgA0Eh19nWHeZgZEJWRCXYmTACDOdGMXB4dcZmBhIBHTQsO4yA2P0Sgai3I8RSsQARvSIW7tSE8NkjIgjJWkAAEVpIfbacIN+AAAAAElFTkSuQmCC",S2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEh4tqXQmaAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAiUlEQVQoz6WSMQ6DMBAEByq+ckj+jClc5Dt8JQVF+Ewk+ynQHQUiOhxDiNhydXs3XhkK8g71DuWKvEOnHtUoxVDNHdntGkWn/hutssYzQOMFJEJqAZjHxGPIAq9B9qdMwKoLiWpDObqwDQKM73X+8A2lpv5uqTbbgRWpC+mDcVppjlDyfn6H3F8AX71UuvRrK7wAAAAASUVORK5CYII=",fB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEjYGWJVxggAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAX0lEQVQoz2NgGPqAkYGBgaGqqvM/SRoU+AqJ1sBEqpOYGBgYGDoW6hCluGOhDsRJDAwMDCvWz/1fEX8Fr+KIwGRGRmRBXJpgirGatGL93P8KfIVwvGL9XMIBAtOETTEA6zknEbSumrwAAAAASUVORK5CYII=",g2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEic6JCMuFQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAcElEQVQoz2P8sSaP4fGeuf8ZqABkXZIZGW9ncP+XdUmmhnkMj/fMZWCBcRzKl8AlDnTGkMyHARZkG5AlSOE7lC+Bs5mQFTiUL0GxmRAfG6DIhdgAEwOVAQs+SZj3kMMKH5+BgYGB+slG1iWZkZoJGwCPf0Ey8swM6QAAAABJRU5ErkJggg==",_2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEVFyMekDBhwwAAAFVJREFUKM+V0jkOwCAMBdEJp00KSi4BXVJwXFMhJaw/liy5eNMZHzKAKetD5qiHMk+6cIhzxxNACyqWgjfeBi1eBiM8DWZ4GKxwF+zwJ1AwAH9ew8woChgtC51rKeAAAAAASUVORK5CYII=",x2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAMCAYAAACulacQAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA6cAAAOdQGIKBt4AAAAB3RJTUUH4gEVEjkhkLB0zgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAHklEQVQY02NgGGSAEUr/xybHiMT5j0UTCvg/0F4BAOhDAwINJrvnAAAAAElFTkSuQmCC";const{Editor:v2e,EditorState:Jg,ContentState:w2e,SelectionState:y2e,Modifier:Mh,RichUtils:hB,CompositeDecorator:E2e}=$_e;var Cp=(n=>(n[n.Edit=0]="Edit",n[n.Readonly=1]="Readonly",n[n.Display=2]="Display",n))(Cp||{}),B9=(n=>(n[n.Top=0]="Top",n[n.Bottom=1]="Bottom",n))(B9||{});const b2=Ne.exports.forwardRef((n,e)=>{const t=Ne.exports.useRef(null),r=Ne.exports.useCallback(()=>{var R;(R=t.current)==null||R.focus()},[]);Ne.exports.useImperativeHandle(e,()=>({focus:r}),[r]);const i=Ne.exports.useRef(n.value),a=Ne.exports.useCallback(()=>n.value?pB.stringToEditorState(n.value):Jg.createEmpty(),[n.value]),[o,s]=Ne.exports.useState(a);let l;"value"in n&&n.value!==i.current?l=a():l=o;const[u,d]=Ne.exports.useState(()=>{let R=n.theme;return typeof n.theme!="number"&&(n.value&&n.value.indexOf("WHITE")>=0?R=1:R=0),R}),h=R=>{const j=pB.editorStateToString(R,{theme:u});i.current=j,s(R),n.onValueChange&&n.onValueChange(n.id,j)},f=(R,j)=>n.maxlines&&j.getCurrentContent().getPlainText().split(`
`).length>=n.maxlines?"handled":"not-handled",m=R=>{n.onFocus&&n.onFocus(R)},g=R=>{n.onBlur&&n.onBlur(R)},_=R=>{switch(R.type){case"COLOR":E(R.key);break;case"IMAGE":x(R.char);break;case"ACTION":switch(R.key){case"DARKLIGHT":d(u===0?1:0);break}break}setTimeout(()=>{r()},0)},E=R=>{const j=l.getSelection(),te=l.getCurrentContent(),$=Object.keys(Vp).reduce((q,P)=>Mh.removeInlineStyle(q,j,P),te);let z=Jg.push(l,$,"change-inline-style");const I=l.getCurrentInlineStyle();j.isCollapsed()&&(z=I.reduce((q,P)=>hB.toggleInlineStyle(q,P),z)),I.has(R)||(z=hB.toggleInlineStyle(z,R)),h(z)},x=R=>{const j=l.getSelection(),te=Mh.replaceText(l.getCurrentContent(),j,R),$=Jg.push(l,te,"insert-characters");h($)},v=n.displayMode||0;let C;n.showToolbar&&v===0&&(C=L(T2e,{onItemClick:_,itemBlacklist:n.itemBlacklist}));const D=n.toolbarPlacement||0;let H="mpEditor";return v===2&&(H+=" mpDisplay"),u===0?H+=" mpEditorLight":u===1&&(H+=" mpEditorDark"),C&&(D===1?H+=" mpEditorShowToolbarBottom":H+=" mpEditorShowToolbarTop"),Xe("div",{className:H,children:[D===0&&C,L("div",{className:"mpEditorWrapper",children:L(v2e,{ref:R=>{t.current=R},editorState:l,stripPastedStyles:!0,readOnly:v!==0,customStyleMap:Vp,onChange:h,onFocus:m,onBlur:g,handleReturn:f})}),D===1&&C]})});b2.displayName="MPEditor";function C2e(n,e,t){const r=n.getText();for(let i=0;i<r.length;i++)mD[r.charAt(i)]&&e(i,i+1)}const V2e=n=>{const e=n.children[0].props.text;let t="mpImage";const r=mD[e];t+=" mpImageKey-"+r;const i={...n};return delete i.contentState,delete i.decoratedText,delete i.entityKey,delete i.offsetKey,delete i.blockKey,L("span",{...i,className:t,children:L("span",{className:"mpImageTextWrapper",children:n.children})})},D2e=new E2e([{strategy:C2e,component:V2e}]),Vp={DEFAULT:{color:"#200E71"},BLACK:{color:"#000000"},WHITE:{color:"#FFFFFF"},RED:{color:"#E70014"},GREEN:{color:"#00AB29"},BLUE:{color:"#003EF9"},PURPLE:{color:"#E847CD"},YELLOW:{color:"#FFEA38"}},M9=[{key:"COLOR",type:"SUBMENU",icon:dB,desc:"Font color",items:[{key:"DEFAULT",type:"COLOR",icon:dB,desc:"Default"},{key:"BLACK",type:"COLOR",icon:e2e,desc:"Black"},{key:"WHITE",type:"COLOR",icon:t2e,desc:"White"},{key:"RED",type:"COLOR",icon:n2e,desc:"Red"},{key:"GREEN",type:"COLOR",icon:r2e,desc:"Green"},{key:"BLUE",type:"COLOR",icon:i2e,desc:"Blue"},{key:"PURPLE",type:"COLOR",icon:a2e,desc:"Purple"},{key:"YELLOW",type:"COLOR",icon:o2e,desc:"Yellow"}]},{key:"IMAGE",type:"SUBMENU",icon:AB,desc:"Insert image",items:[{key:"A",type:"IMAGE",icon:AB,desc:"A button",char:"\u3000"},{key:"B",type:"IMAGE",icon:s2e,desc:"B button",char:"\u3001"},{key:"S",type:"IMAGE",icon:l2e,desc:"Start button",char:"\u3010"},{key:"CUP",type:"IMAGE",icon:c2e,desc:"C-up button",char:"\u3002"},{key:"CDOWN",type:"IMAGE",icon:u2e,desc:"C-down button",char:"\u3005"},{key:"CLEFT",type:"IMAGE",icon:d2e,desc:"C-left button",char:"\u3004"},{key:"CRIGHT",type:"IMAGE",icon:A2e,desc:"C-right button",char:"\u3003"},{key:"Z",type:"IMAGE",icon:f2e,desc:"Z button",char:"\u3006"},{key:"R",type:"IMAGE",icon:h2e,desc:"R button",char:"\u3011"},{key:"ANALOG",type:"IMAGE",icon:p2e,desc:"Analog stick",char:"\u3007"},{key:"COIN",type:"IMAGE",icon:m2e,desc:"Coin",char:"\u3008"},{key:"STAR",type:"IMAGE",icon:S2e,desc:"Star",char:"\u3009"}]},{key:"ADVANCED",type:"SUBMENU",icon:fB,desc:"Advanced text features",items:[{key:"PAUSE",type:"IMAGE",icon:fB,desc:"Pause to continue",char:"\u3015"},{key:"FEED",type:"IMAGE",icon:g2e,desc:"Feed new page",char:"\u3014"}]},{key:"DARKLIGHT",type:"ACTION",icon:_2e,desc:"Toggle background color (has no effect on actual game)"}],mD={},F2e={};M9.forEach(I9);function I9(n){n.items&&n.items.forEach(I9),n.char&&(mD[n.char]=n.key,F2e[n.key]=n.char)}function O9(n,e){switch(n.type){case"SUBMENU":return L(b2e,{item:n,onItemClick:e,items:n.items},n.key);default:return L(P2e,{item:n,onItemClick:e},n.key)}}class T2e extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onItemClick=e=>{this.props.onItemClick&&this.props.onItemClick(e)}}render(){const e=this.props.itemBlacklist,t=M9.map(r=>e&&e.indexOf(r.key)!==-1?null:O9(r,this.onItemClick));return L("div",{className:"mpEditorToolbar",children:t})}}class b2e extends Ne.exports.Component{constructor(){super(...arguments),this.expMenu=null,this.state={expanded:!1},this.onBlur=()=>{this.setState({expanded:!1})},this.onClick=()=>{this.setState({expanded:!this.state.expanded})},this.onItemClick=e=>{this.props.onItemClick&&this.props.onItemClick(e)}}render(){const e=this.props.item;let t;if(this.state.expanded){const r=this.props.items.map(i=>O9(i,this.onItemClick));t=L("div",{ref:i=>{this.expMenu=i},className:"mpEditorToolbarSubmenuExp",tabIndex:-1,onBlur:this.onBlur,children:r})}return Xe("div",{className:"mpEditorToolbarButton",title:e.desc,onClick:this.onClick,children:[L("img",{src:e.icon,alt:e.desc}),L("img",{src:x2e,alt:""}),t]})}componentDidMount(){this.state.expanded&&this.expMenu.focus()}componentDidUpdate(){this.state.expanded&&this.expMenu.focus()}}class P2e extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onClick=()=>{this.props.onItemClick(this.props.item)}}render(){const e=this.props.item;return L("div",{className:"mpEditorToolbarButton",role:"button",title:e.desc,onClick:this.onClick,children:L("img",{src:e.icon,alt:e.desc})})}}const pB=new class{editorStateToString(e,t){const r=e.getCurrentContent(),i=[],a=t.theme===0?"DEFAULT":"WHITE";let o=a,s=!1;return r.getBlockMap().forEach(u=>{let d=u.getText();const h={};u.findStyleRanges(m=>{let _=m.getStyle().find(E=>!!Vp[E]);return _||(_=a),_!==o&&(o=_,s=!0),!0},(m,g)=>{!s||(h[m]="<"+o+">")});let f=0;for(const m in h){const g=f+parseInt(m);d=fW(d,g,0,h[m]),f+=h[m].length}i.push(d)}),i.join(`
`)}stringToEditorState(e){let t=w2e.createFromText(e||""),r=t.getBlocksAsArray();for(let i=0;i<r.length;i++){let a=r[i],o=a.getText(),[s,l,u]=mB(o);for(;s;){const d=a.getKey();let h=y2e.createEmpty(a.getKey());h=h.merge({anchorOffset:l,focusKey:d,focusOffset:u}),t=Mh.replaceText(t,h,""),r=t.getBlocksAsArray(),a=r[i],o=a.getText();const f=r[r.length-1];h=h.merge({focusKey:f.getKey(),focusOffset:f.getText().length}),t=Object.keys(Vp).reduce((m,g)=>Mh.removeInlineStyle(m,h,g),t),t=Mh.applyInlineStyle(t,h,s),r=t.getBlocksAsArray(),a=r[i],o=a.getText(),[s,l,u]=mB(o)}}return Jg.createWithContent(t,D2e)}};function mB(n){let e=0;for(;e<n.length;){const t=n.indexOf("<",e)+1;if(!t)return[];const r=n.indexOf(">",t);if(r===-1)return[];const i=n.substring(t,r);if(!Vp[i]){e=t;continue}return[i,t-1,r+1]}return[]}let SB;const th={};function Bo(n="",e){let t=SB;t||(t=SB={});const r=n||"default";let i=t[r];i||(i=t[r]=document.createElement("input"),i.type="file"),i.accept=n,th[r]&&(i.removeEventListener("change",th[r]),delete th[r]);const a=o=>{delete th[r],i.removeEventListener("change",a),e(o),i.value=null};th[r]=a,i.addEventListener("change",a),i.click()}const{blueImage:k9,blue3Image:R2e,redImage:N9,red3Image:L2e,happeningImage:U9,happening3Image:B2e,chanceImage:M2e,chance2Image:I2e,chance3Image:O2e,bowserImage:j9,bowser3Image:k2e,minigameImage:N2e,shroomImage:U2e,otherImage:SD,starImage:gD,blackstarImage:j2e,arrowImage:G9,startImage:_D,itemImage:G2e,item3Image:H2e,battleImage:z2e,battle3Image:W2e,bankImage:X2e,bank3Image:K2e,gameguyImage:Y2e}=Yk,q2e=()=>{const n=ws(),e=Ne.exports.useMemo(()=>$2e(n),[n]);let t;switch(n.game){case 1:t=L(Q2e,{counts:e});break;case 2:t=L(J2e,{counts:e});break;case 3:t=L(Z2e,{counts:e});break}return L("div",{className:"boardStatsContainer",children:L("table",{children:t})})},Q2e=({counts:n})=>Xe("tbody",{children:[Xe("tr",{children:[L(Nn,{src:k9,alt:"Blue space"}),L(Nn,{src:N9,alt:"Red space"}),L(Nn,{src:U9,alt:"Happening space"}),L(Nn,{src:M2e,alt:"Chance space"}),L(Nn,{src:N2e,alt:"Mini-Game space"}),L(Nn,{src:U2e,alt:"Mushroom space"}),L(Nn,{src:j9,alt:"Bowser space"}),L(Nn,{src:gD,alt:"Star space"}),L(Nn,{src:_D,alt:"Start space"}),L(Nn,{src:SD,alt:"Invisible space"}),L(yA,{text:"Solid"}),L(yA,{text:"Total"})]}),Xe("tr",{children:[L(Pn,{count:Rn(n,de.BLUE)}),L(Pn,{count:Rn(n,de.RED)}),L(Pn,{count:Rn(n,de.HAPPENING)}),L(Pn,{count:Rn(n,de.CHANCE)}),L(Pn,{count:Rn(n,de.MINIGAME)}),L(Pn,{count:Rn(n,de.SHROOM)}),L(Pn,{count:Rn(n,de.BOWSER)}),L(Pn,{count:Rn(n,de.STAR)}),L(Pn,{count:Rn(n,de.START)}),L(Pn,{count:Rn(n,de.OTHER)}),L(Pn,{count:Rn(n,de.BLUE,de.RED,de.HAPPENING,de.CHANCE,de.MINIGAME,de.SHROOM,de.BOWSER)}),L(Pn,{count:Rn(n)})]})]}),J2e=({counts:n})=>Xe("tbody",{children:[Xe("tr",{children:[L(Nn,{src:k9,alt:"Blue space"}),L(Nn,{src:N9,alt:"Red space"}),L(Nn,{src:U9,alt:"Happening space"}),L(Nn,{src:I2e,alt:"Chance space"}),L(Nn,{src:G2e,alt:"Item space"}),L(Nn,{src:z2e,alt:"Battle space"}),L(Nn,{src:X2e,alt:"Bank space"}),L(Nn,{src:j9,alt:"Bowser space"}),L(Nn,{src:gD,alt:"Star space"}),L(Nn,{src:j2e,alt:"Black Star space"}),L(Nn,{src:G9,alt:"Arrow space"}),L(Nn,{src:_D,alt:"Start space"}),L(Nn,{src:SD,alt:"Invisible space"}),L(yA,{text:"Solid"}),L(yA,{text:"Total"})]}),Xe("tr",{children:[L(Pn,{count:Rn(n,de.BLUE)}),L(Pn,{count:Rn(n,de.RED)}),L(Pn,{count:Rn(n,de.HAPPENING)}),L(Pn,{count:Rn(n,de.CHANCE)}),L(Pn,{count:Rn(n,de.ITEM)}),L(Pn,{count:Rn(n,de.BATTLE)}),L(Pn,{count:Rn(n,de.BANK)}),L(Pn,{count:Rn(n,de.BOWSER)}),L(Pn,{count:Rn(n,de.STAR)}),L(Pn,{count:Rn(n,de.BLACKSTAR)}),L(Pn,{count:Rn(n,de.ARROW)}),L(Pn,{count:Rn(n,de.START)}),L(Pn,{count:Rn(n,de.OTHER)}),L(Pn,{count:Rn(n,de.BLUE,de.RED,de.HAPPENING,de.CHANCE,de.ITEM,de.BATTLE,de.BANK,de.BOWSER)}),L(Pn,{count:Rn(n)})]})]}),Z2e=({counts:n})=>Xe("tbody",{children:[Xe("tr",{children:[L(Nn,{src:R2e,alt:"Blue space"}),L(Nn,{src:L2e,alt:"Red space"}),L(Nn,{src:B2e,alt:"Happening space"}),L(Nn,{src:O2e,alt:"Chance space"}),L(Nn,{src:H2e,alt:"Item space"}),L(Nn,{src:W2e,alt:"Battle space"}),L(Nn,{src:K2e,alt:"Bank space"}),L(Nn,{src:Y2e,alt:"Game Guy space"}),L(Nn,{src:k2e,alt:"Bowser space"}),L(Nn,{src:gD,alt:"Star space"}),L(Nn,{src:G9,alt:"Arrow space"}),L(Nn,{src:_D,alt:"Start space"}),L(Nn,{src:SD,alt:"Invisible space"}),L(yA,{text:"Solid"}),L(yA,{text:"Total"})]}),Xe("tr",{children:[L(Pn,{count:Rn(n,de.BLUE)}),L(Pn,{count:Rn(n,de.RED)}),L(Pn,{count:Rn(n,de.HAPPENING)}),L(Pn,{count:Rn(n,de.CHANCE)}),L(Pn,{count:Rn(n,de.ITEM)}),L(Pn,{count:Rn(n,de.BATTLE)}),L(Pn,{count:Rn(n,de.BANK)}),L(Pn,{count:Rn(n,de.GAMEGUY)}),L(Pn,{count:Rn(n,de.BOWSER)}),L(Pn,{count:Rn(n,de.STAR)}),L(Pn,{count:Rn(n,de.ARROW)}),L(Pn,{count:Rn(n,de.START)}),L(Pn,{count:Rn(n,de.OTHER)}),L(Pn,{count:Rn(n,de.BLUE,de.RED,de.HAPPENING,de.CHANCE,de.ITEM,de.BATTLE,de.BANK,de.GAMEGUY,de.BOWSER)}),L(Pn,{count:Rn(n)})]})]}),Nn=({src:n,alt:e})=>L("td",{className:"boardStatsImageCell",children:L("img",{src:n,alt:e,className:"boardStatsSpaceImage"})}),Pn=({count:n})=>L("td",{className:"boardStatsCountCell",children:n||0}),yA=({text:n})=>L("td",{className:"boardStatsTextCell",children:n});function $2e(n){const e=new Map;for(const t of n.spaces)e.has(t.type)?e.set(t.type,e.get(t.type)+1):e.set(t.type,1);return e}function Rn(n,...e){let t=0;if(e.length===0)n.forEach(r=>{t+=r});else for(const r of e)t+=n.get(r)||0;return t}const N4=""+new URL("edit.04fb11d4.png",import.meta.url).href,exe=""+new URL("audio.7d30fd5a.png",import.meta.url).href,txe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiBQ0VISOZx0KOAAABA0lEQVQ4y52SMW7CMBiFPwMTbMnOATJ3bwcW5kpwic5sqFS9QsUtkHKEMrOzcAGD6M5g+hgSklh1nIq3/fL7/N4vGzxpqJ2a2mnoOwb+yJQnvvgpp5Q3pmxolxaSRtU0krQIGzPlcmqTU67MB3J1KS+cpgQcfeK6mgGP6J7Q55Us4tuzMdfmDrPOHWaFs1cS484uY//hLACf/ALvbPkGXnjmA+ixrBxVpYkkKQGQtALQSgJQIkma+JWOACTBMknDUQG2E7A+cMYBaRBIAcfZA4w4RRNORn5C0bEdON6HGrDRSjYMtCcEgIcq/SOhfut59OvN/yYcol8vdKq1LsHbL1rXrhtcbPgQjV6DLQAAAABJRU5ErkJggg==",nxe="data:image/png;base64,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",rxe=[{type:"header",desc:"Basic Info"},{type:"richtext",id:"detailBoardName",desc:"Board name",maxlines:1},{type:"richtext",id:"detailBoardDesc",desc:"Board description",maxlines:2},{type:"difficulty",id:"detailBoardDifficulty",desc:"Difficulty"},{type:"audioheader",desc:"Background Music"},{type:"audio",id:"detailBoardAudio",desc:"Background music"},{type:"header",desc:"Images"},{type:"image",id:"detailBoardSelectImg",desc:"Board select image",width:128,height:64},{type:"image",id:"detailBoardLogoImg",desc:"Board logo",width:250,height:100},{type:"br"},{type:"image",id:"detailBoardLargeSceneBg",desc:"Large scene background",width:320,height:240},{type:"image",id:"detailBoardConversationBg",desc:"Conversation background",width:320,height:240},{type:"image",id:"detailBoardSplashscreenBg",desc:"Splashscreen background",width:320,height:240},{type:"header",desc:"Stats"},{type:"stats"}],ixe=[{type:"header",desc:"Basic Info"},{type:"richtext",id:"detailBoardName",desc:"Board name",maxlines:1},{type:"richtext",id:"detailBoardDesc",desc:"Board description",maxlines:2},{type:"difficulty",id:"detailBoardDifficulty",desc:"Difficulty"},{type:"costume",id:"detailBoardCostume",desc:"Costume Theme"},{type:"audioheader",desc:"Background Music"},{type:"audio",id:"detailBoardAudio",desc:"Background music"},{type:"header",desc:"Images"},{type:"image",id:"detailBoardSelectImg",desc:"Board select image",width:64,height:48},{type:"image",id:"detailBoardSelectIcon",desc:"Board select icon",width:32,height:32},{type:"image",id:"detailBoardLogoImg",desc:"Board logo",width:260,height:120},{type:"br"},{type:"image",id:"detailBoardLargeSceneBg",desc:"Large scene background",width:320,height:240},{type:"header",desc:"Stats"},{type:"stats"}],axe=[{type:"header",desc:"Basic Info"},{type:"richtext",id:"detailBoardName",desc:"Board name",maxlines:1},{type:"richtext",id:"detailBoardDesc",desc:"Board description",maxlines:2},{type:"difficulty",id:"detailBoardDifficulty",desc:"Difficulty"},{type:"audioheader",desc:"Background Music"},{type:"audio",id:"detailBoardAudio",desc:"Background music"},{type:"header",desc:"Images"},{type:"image",id:"detailBoardSelectImg",desc:"Board select image",width:64,height:64},{type:"image",id:"detailBoardLogoImg",desc:"Board logo (large)",width:226,height:120},{type:"image",id:"detailBoardLogoTextImg",desc:"Board logo text",width:226,height:36},{type:"br"},{type:"image",id:"detailBoardLogoMediumImg",desc:"Board logo (medium)",width:150,height:50},{type:"image",id:"detailBoardLogoSmallImg",desc:"Board logo (small)",width:100,height:46},{type:"br"},{type:"image",id:"detailBoardLargeSceneBg",desc:"Large scene background",width:320,height:240},{type:"header",desc:"Stats"},{type:"stats"}],oxe=[{type:"header",desc:"Basic Info"},{type:"richtext",id:"detailBoardName",desc:"Board name",maxlines:1},{type:"richtext",id:"detailBoardDesc",desc:"Board description",maxlines:2},{type:"difficulty",id:"detailBoardDifficulty",desc:"Difficulty"},{type:"header",desc:"Background Music"},{type:"audio",id:"detailBoardAudio",desc:"Background music"},{type:"header",desc:"Images"},{type:"image",id:"detailBoardSelectImg",desc:"Board select image",width:64,height:64},{type:"image",id:"detailBoardLogoImg",desc:"Board logo",width:226,height:120},{type:"image",id:"detailBoardLogoTextImg",desc:"Board logo text",width:226,height:36}];function sxe(){const n=Vn(),e=n.game,t=n.type;switch(e){case 1:return rxe;case 2:return ixe;case 3:switch(t){case zn.DUEL:return oxe;default:return axe}}}function lxe(n,e){switch(n){case"detailBoardName":return e.board.name;case"detailBoardDesc":return e.board.description;case"detailBoardDifficulty":return e.board.difficulty;case"detailBoardCostume":return e.board.costumeTypeIndex;case"detailBoardSelectImg":return e.board.otherbg.boardselect;case"detailBoardSelectIcon":return e.board.otherbg.boardselecticon;case"detailBoardLogoImg":return e.board.otherbg.boardlogo;case"detailBoardLogoTextImg":return e.board.otherbg.boardlogotext;case"detailBoardLogoMediumImg":return e.board.otherbg.boardlogomedium;case"detailBoardLogoSmallImg":return e.board.otherbg.boardlogosmall;case"detailBoardAudio":return e.board.audioIndex;case"detailBoardLargeSceneBg":return e.board.otherbg.largescene;case"detailBoardConversationBg":return e.board.otherbg.conversation;case"detailBoardSplashscreenBg":return e.board.otherbg.splashscreen}return""}function Vw(n,e,t){switch(n){case"detailBoardName":Gne(e),Nb();break;case"detailBoardDesc":Hne(e);break;case"detailBoardDifficulty":zne(e);break;case"detailBoardCostume":Wne(e);break;case"detailBoardSelectImg":ks("boardselect",e);break;case"detailBoardSelectIcon":ks("boardselecticon",e);break;case"detailBoardLogoImg":ks("boardlogo",e);break;case"detailBoardLogoTextImg":ks("boardlogotext",e);break;case"detailBoardLogoMediumImg":ks("boardlogomedium",e);break;case"detailBoardLogoSmallImg":ks("boardlogosmall",e);break;case"detailBoardLargeSceneBg":ks("largescene",e);break;case"detailBoardConversationBg":ks("conversation",e);break;case"detailBoardSplashscreenBg":ks("splashscreen",e);break;case"detailBoardAudio":Xne(e),Nb();break}}function cxe(n,e){if(n==="detailBoardSelectImg"&&Vn().game===1){const t=new Uint32Array(e);for(let s=0;s<128;s++)t[s]=0,t[s+128]=0,t[s+128*62]=0,t[s+128*63]=0;for(let s=0;s<6;s++)t[s+128*2]=0,t[s+128*2+122]=0,t[s+128*61]=0,t[s+128*61+122]=0;for(let s=0;s<4;s++)t[s+128*3]=0,t[s+128*3+124]=0,t[s+128*60]=0,t[s+128*60+124]=0;for(let s=0;s<3;s++)t[s+128*4]=0,t[s+128*4+125]=0,t[s+128*59]=0,t[s+128*59+125]=0;for(let s=0;s<2;s++)t[s+128*5]=0,t[s+128*5+126]=0,t[s+128*58]=0,t[s+128*58+126]=0,t[s+128*6]=0,t[s+128*6+126]=0,t[s+128*57]=0,t[s+128*57+126]=0;t[128*7]=0,t[128*7+127]=0,t[128*56]=0,t[128*56+127]=0,t[128*8]=0,t[128*8+127]=0,t[128*55]=0,t[128*55+127]=0;const r={};for(let s=0;s<32;s++)for(let l=0;l<64;l++)r[t[s*128+l]]=!0;const i={};for(let s=0;s<32;s++)for(let l=64;l<128;l++)i[t[s*128+64+l]]=!0;const a={};for(let s=32;s<64;s++)for(let l=0;l<64;l++)a[t[s*128+l]]=!0;const o={};for(let s=32;s<64;s++)for(let l=64;l<128;l++)o[t[s*128+64+l]]=!0;(Object.keys(r).length>256||Object.keys(i).length>256||Object.keys(a).length>256||Object.keys(o).length>256)&&(o0("Sorry, but the palette limit for this image is 256 unique colors. For now, the image has been reduced to 8-bit, but most image editors should be able to reduce the palette for you with higher quality."),Cse(t,128,64))}return e}class uxe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onTextChange=(e,t)=>{Vw(e,t.target.value,this.props.board),this.forceUpdate()},this.onRichTextChange=(e,t)=>{Vw(e,t,this.props.board),this.forceUpdate()},this.onValueChange=(e,t)=>{Vw(e,t,this.props.board),this.forceUpdate()}}render(){if(!this.props.board)return null;let e=0;const t=Ys(this.props.board),r=sxe().map(i=>{const a=lxe(i.id,this.props);switch(i.type){case"richtext":{const o=t?Cp.Readonly:Cp.Edit;return Xe("div",{className:"detailRichTextContainer",children:[L("label",{htmlFor:i.id,children:i.desc}),L(b2,{id:i.id,value:a,showToolbar:!t,displayMode:o,maxlines:i.maxlines||0,itemBlacklist:["COLOR","ADVANCED","DARKLIGHT"],onValueChange:this.onRichTextChange})]},i.id)}case"image":return L(dxe,{id:i.id,desc:i.desc,readonly:t,value:a,onImageSelected:this.onValueChange,width:i.width,height:i.height},i.id);case"audio":return L(Axe,{id:i.id,desc:i.desc,readonly:t,value:a,onAudioSelected:this.onValueChange,onAudioDeleted:(o,s)=>this.onValueChange(o,{customAudioIndex:s,delete:!0})},i.id);case"difficulty":return L(hxe,{id:i.id,desc:i.desc,readonly:t,value:a,onDifficultySelected:this.onValueChange},i.id);case"costume":return L(gxe,{id:i.id,desc:i.desc,readonly:t,costumeType:a,onCostumeTypeSelected:o=>this.onValueChange(i.id,o)},i.id);case"stats":return L(q2e,{},"stats"+e++);case"header":return L("h2",{children:i.desc},"header"+e++);case"audioheader":return L("div",{className:"detailsAudioHeaderDiv",children:Xe("h2",{className:"detailsAudioHeader",children:[i.desc,L(fxe,{board:this.props.board})]})},"header"+e++);case"br":return L("br",{},"br"+e++)}return null});return L("div",{id:"detailsForm",children:r})}}class dxe extends Ne.exports.Component{constructor(){super(...arguments),this.handleClick=()=>{Bc()||Bo("image/*",this.imageSelected.bind(this))}}imageSelected(e){const t=e.target.files[0];if(!t)return;const r=new FileReader;r.onload=async i=>{const a=this.props.onImageSelected,o=this.props.id,s=this.props.width,l=this.props.height;let d=(await Va(r.result,s,l)).data.buffer;d=cxe(o,d);const h=Ea(d,s,l);a(o,h)},r.readAsDataURL(t)}render(){const e=this.props.id,t=this.props.desc,r=this.props.width,i=this.props.height;let a=null;if(!this.props.readonly){const s=`${r} \xD7 ${i}`;r>100&&i>50?a=Xe("div",{className:"detailImgHoverCover",children:[L("span",{children:"Choose a new image"}),L("br",{}),L("span",{className:"detailImgHoverCoverSize",children:s})]}):a=L("div",{className:"detailImgHoverCover",title:s})}const o={width:r,height:i,minWidth:r,minHeight:i};return Xe("div",{className:"detailImgContainer",children:[L("label",{children:t}),Xe("div",{className:"detailImgSelect",style:o,onClick:this.handleClick,children:[this.props.value?L("img",{id:e,className:"detailImg",height:i,width:r,style:o,src:this.props.value,alt:t}):L("div",{className:"detailImg",style:o}),a]})]})}}class Axe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onGameMusicIndexSelection=e=>{this.props.onAudioSelected(this.props.id,{gameAudioIndex:parseInt(e.target.value)})},this.onAudioTypeChanged=e=>{this.props.onAudioSelected(this.props.id,{audioType:e})},this.onMidiPrompt=async e=>{Bo("audio/midi",t=>{const r=t.target.files[0];if(!r)return;const i=new FileReader;i.onload=a=>{Bn(typeof i.result=="string"),this.props.onAudioSelected(this.props.id,{customAudioIndex:e,midiName:r.name,midiData:i.result})},i.readAsDataURL(r)})},this.onSoundbankIndexPrompt=async e=>{let t=0;return Tt.romIsLoaded()&&Tt.getGameVersion()===Vn().game&&(t=Rr.getSequenceTable(0).soundbanks.banks.length-1),await F_(`Enter new soundbank index${t?` (0 through ${t})`:""}:`).then(r=>{if(!r)return;const i=parseInt(r);if(isNaN(i)||t&&i>t){o0("Invalid soundbank index.");return}this.props.onAudioSelected(this.props.id,{customAudioIndex:e,soundbankIndex:i})})},this.onDeleteAudioEntry=e=>{this.props.onAudioDeleted(this.props.id,e)}}render(){const e=Vn();let t;switch(e.audioType){case Ca.InGame:{let r=0;const a=E_(e.game,{}).getAudioMap(0).map(o=>{const s=r++;return o?L("option",{value:s,children:o},s):null});t=L("select",{className:"audioSelect",value:this.props.value,disabled:this.props.readonly,onChange:this.onGameMusicIndexSelection,children:a})}break;case Ca.Custom:t=e.audioData.map((r,i)=>L(gB,{audioEntry:r,canDelete:!0,onDeleteAudioEntry:()=>this.onDeleteAudioEntry(i),onMidiPrompt:()=>this.onMidiPrompt(i),onSoundbankIndexPrompt:()=>this.onSoundbankIndexPrompt(i)},i+r.name)),t.push(L(gB,{audioEntry:{name:"",data:"",soundbankIndex:0},canDelete:!1,onMidiPrompt:()=>this.onMidiPrompt(e.audioData.length),onSoundbankIndexPrompt:()=>this.onSoundbankIndexPrompt(e.audioData.length)},"newentry"));break}return Xe("div",{className:"audioDetailsContainer",children:[Xe("div",{className:"audioDetailsRadioGroup",children:[L("input",{type:"radio",id:this.props.id+"-romaudio",value:"romaudio",checked:e.audioType===Ca.InGame,onChange:()=>this.onAudioTypeChanged(Ca.InGame)}),L("label",{htmlFor:this.props.id+"-romaudio",children:"In-Game Music Track"}),L("input",{type:"radio",id:this.props.id+"-custom",value:"custom",checked:e.audioType===Ca.Custom,onChange:()=>this.onAudioTypeChanged(Ca.Custom)}),L("label",{htmlFor:this.props.id+"-custom",children:"Custom Audio"})]}),t]})}}function gB(n){const e=n.audioEntry.name||"(select a midi file)",t=!!n.audioEntry.data;return Xe("div",{className:"audioCustomEntry",children:[L("img",{src:exe,className:"audioCustomIcon audioCustomIconAudio",title:"Custom audio track",alt:"Custom audio track"}),Xe("div",{className:"audioCustomTextSections",children:[Xe("div",{className:"audioCustomSection",children:[L("span",{className:"detailsSpan",children:e}),L("img",{src:N4,className:"audioDetailsSmallEditIcon",title:"Upload midi file",alt:"Upload midi file",onClick:n.onMidiPrompt,tabIndex:0})]}),t&&Xe("div",{className:"audioCustomSection",children:[L("label",{children:"Soundbank index: "}),L("span",{className:"detailsSpan",children:n.audioEntry.soundbankIndex||0}),L("img",{src:N4,className:"audioDetailsSmallEditIcon",title:"Change soundbank index",alt:"Change soundbank index",onClick:n.onSoundbankIndexPrompt,tabIndex:0})]})]}),n.canDelete&&L("img",{src:txe,onClick:n.onDeleteAudioEntry,className:"audioCustomIcon audioCustomIconDelete",title:"Remove audio track",alt:"Remove audio track",tabIndex:0})]})}function fxe(n){return Ys(n.board)||!lr(z0.uiAdvanced)?null:L("div",{className:"audioSelectConfigButton",title:"Add custom code for choosing the music to play each turn",tabIndex:0,onClick:()=>vr(fn.AUDIO_SELECTION_CODE),children:L("img",{src:nxe,alt:"Configure audio selection"})})}class hxe extends Ne.exports.Component{constructor(e){super(e),this.onSelection=t=>{this.props.readonly||this.props.onDifficultySelected(this.props.id,t)},this.onDifficultyFocused=t=>{this.props.readonly||this.setState({focusedLevel:t})},this.state={focusedLevel:0}}render(){const e=[];for(let t=1;t<=5;t++)e.push(L(pxe,{level:t,readonly:this.props.readonly,currentLevel:this.props.value,focusedLevel:this.state.focusedLevel,onDifficultyLevelSelected:this.onSelection,onDifficultyFocused:this.onDifficultyFocused},t.toString()));return Xe("div",{className:"difficultyDetailsContainer",children:[L("label",{children:this.props.desc}),L("div",{className:"difficultyDetailsLevels",children:e})]})}}class pxe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onClick=()=>{this.props.readonly||this.props.onDifficultyLevelSelected(this.props.level)},this.onMouseEnter=()=>{this.props.readonly||this.props.onDifficultyFocused(this.props.level)},this.onMouseLeave=()=>{this.props.readonly||this.props.onDifficultyFocused(0)}}render(){let e="difficultyDetailsLevel";return this.props.readonly||(this.props.level<=this.props.currentLevel&&(e+=" difficultyLevelCurrent"),this.props.focusedLevel>0&&this.props.level<=this.props.focusedLevel&&(e+=" difficultyLevelFocused")),L("div",{className:e,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave})}}const mxe=[d0.NORMAL,d0.WESTERN,d0.PIRATE,d0.HORROR,d0.SPACE,d0.MYSTERY],Sxe={[d0.NORMAL]:"Normal",[d0.WESTERN]:"Western",[d0.PIRATE]:"Pirate",[d0.HORROR]:"Horror",[d0.SPACE]:"Space",[d0.MYSTERY]:"Mystery"};function gxe(n){const e=[];for(const t of mxe)e.push({id:t,selected:n.costumeType===t||typeof n.costumeType>"u"&&t===d0.NORMAL,text:Sxe[t]});return Xe("div",{className:"difficultyDetailsContainer",children:[L("label",{children:n.desc}),L(J8,{items:e,allowDeselect:!1,readonly:n.readonly,onToggleClick:t=>n.onCostumeTypeSelected(t)})]})}const nc=function(){return navigator.userAgent.toLowerCase().indexOf(" electron/")>-1}(),H9=""+new URL("logoloading.83411697.png",import.meta.url).href,_xe=""+new URL("mpllogo.7ebbea6e.png",import.meta.url).href,xxe=""+new URL("shirt.f6c585e2.png",import.meta.url).href;const vxe=/^(.+)-(\d*)-g([a-z0-9]+)$/,wxe=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={updateCheckInProgress:!1,foundUpdate:null},this.onCheckForUpdatesClick=()=>{if(this.state.updateCheckInProgress)return;window.require("electron").ipcRenderer.send("update-check-start")},this.onStartUpdateClick=()=>{window.require("electron").ipcRenderer.send("update-check-doupdate")},this._onUpdateCheckStarted=()=>{this.setState({updateCheckInProgress:!0,foundUpdate:null})},this._onUpdateCheckNoUpdate=()=>{this.setState({updateCheckInProgress:!1,foundUpdate:!1})},this._onUpdateCheckHasUpdate=()=>{this.setState({updateCheckInProgress:!1,foundUpdate:!0})}}render(){let e="v0.8.2-20-gc1209f7";if(e){const i=vxe.exec(e);i&&i[0]&&(e=i[1]+" (+"+i[2]+" <a target='_blank' href='https://github.com/PartyPlanner64/PartyPlanner64/commit/"+i[3]+"'>"+i[3]+"</a>)")}else e="unknown";let t;document.location.href.indexOf("mariopartylegacy")>=0?t="Hosted by":t="Visit";let r=null;return nc&&(this.state.foundUpdate===!0?r=Xe("a",{className:"aboutVersion",onClick:this.onStartUpdateClick,href:"javascript:;",children:[" ","Update found! Click to install."]}):r=Xe("a",{className:"aboutVersion",onClick:this.onCheckForUpdatesClick,href:"javascript:;",children:[" ",this.state.updateCheckInProgress?"Checking...":"Check for Updates"]})),Xe("div",{id:"aboutForm",children:[Xe("div",{className:"aboutHeader",children:[L("img",{src:H9,alt:"PartyPlanner64"}),L("br",{}),Xe("span",{className:"aboutVersion selectable",children:["Version"," ",L("span",{dangerouslySetInnerHTML:{__html:e}})]}),nc&&L("br",{}),r]}),L("br",{}),Xe("div",{className:"aboutText",children:[L("span",{className:"aboutTextLabel",children:"Want more PartyPlanner64?"}),Xe("ul",{children:[Xe("li",{children:["Follow"," ",L("a",{href:"https://twitter.com/PartyPlanner64",target:"_blank",rel:"noopener noreferrer",children:"@PartyPlanner64"})," ","on Twitter."]}),Xe("li",{children:[L("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64",target:"_blank",rel:"noopener noreferrer",children:"Contribute"})," ","to development on Github."]}),Xe("li",{children:["Write or view"," ",L("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/issues",target:"_blank",rel:"noopener noreferrer",children:"bugs and enhancement requests"}),"."]}),Xe("li",{children:["Read the"," ",L("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/wiki/Creating-a-Board",target:"_blank",rel:"noopener noreferrer",children:"usage tutorial"})," ","or"," ",L("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/wiki",rel:"noopener noreferrer",children:"documentation"}),"."]})]})]}),L("br",{}),L("br",{}),Xe("div",{className:"aboutHeader",children:[L("span",{children:t}),L("br",{}),L("a",{href:"http://mariopartylegacy.com/",target:"_blank",rel:"noopener noreferrer",children:L("img",{src:_xe,alt:"Mario Party Legacy"})})]}),L("div",{className:"aboutText",children:Xe("ul",{children:[Xe("li",{children:["Check out discussion in the"," ",L("a",{href:"https://discord.gg/BQMuUpM",target:"_blank",rel:"noopener noreferrer",children:"discord chat"}),"."]}),Xe("li",{children:["Post your creations to the"," ",L("a",{href:"http://www.mariopartylegacy.com/forum/index.php?action=downloads",target:"_blank",rel:"noopener noreferrer",children:"downloads page"}),"."]})]})}),L("br",{}),L("br",{}),L("div",{className:"aboutHeader",children:L("a",{href:"https://teespring.com/stores/partyplanner64",target:"_blank",rel:"noopener",children:Xe("div",{className:"aboutShirt",children:[L("img",{src:xxe,alt:"PartyPlanner64 merchandise",className:"aboutShirtImg"}),L("span",{className:"aboutShirtText",children:"Official merchandise"})]})})}),L("br",{}),L("br",{}),L("span",{className:"aboutDisclaimer",children:"PartyPlanner64 is not affiliated with Nintendo or Hudson."}),L("br",{}),L("span",{className:"aboutDisclaimer",children:"Mario Party is a registered trademark of Nintendo."})]})}componentDidMount(){if(nc){const e=window.require("electron").ipcRenderer;e.on("update-check-checking",this._onUpdateCheckStarted),e.on("update-check-noupdate",this._onUpdateCheckNoUpdate),e.on("update-check-hasupdate",this._onUpdateCheckHasUpdate)}}componentWillUnmount(){if(nc){const e=window.require("electron").ipcRenderer;e.removeListener("update-check-checking",this._onUpdateCheckStarted),e.removeListener("update-check-noupdate",this._onUpdateCheckNoUpdate),e.removeListener("update-check-hasupdate",this._onUpdateCheckHasUpdate)}}},nh=new Se,rh=new Se,_B=new Ir;class yxe extends kp{constructor(e,t=1,r=16711680){const i=new y0,a=e.geometry.attributes.normal.count,o=new B0(a*2*3,3);i.setAttribute("position",o),super(i,new Rc({color:r,toneMapped:!1})),this.object=e,this.size=t,this.type="VertexNormalsHelper",this.matrixAutoUpdate=!1,this.update()}update(){this.object.updateMatrixWorld(!0),_B.getNormalMatrix(this.object.matrixWorld);const e=this.object.matrixWorld,t=this.geometry.attributes.position,r=this.object.geometry;if(r&&r.isGeometry){console.error("THREE.VertexNormalsHelper no longer supports Geometry. Use BufferGeometry instead.");return}else if(r&&r.isBufferGeometry){const i=r.attributes.position,a=r.attributes.normal;let o=0;for(let s=0,l=i.count;s<l;s++)nh.set(i.getX(s),i.getY(s),i.getZ(s)).applyMatrix4(e),rh.set(a.getX(s),a.getY(s),a.getZ(s)),rh.applyMatrix3(_B).normalize().multiplyScalar(this.size).add(nh),t.setXYZ(o,nh.x,nh.y,nh.z),o=o+1,t.setXYZ(o,rh.x,rh.y,rh.z),o=o+1}t.needsUpdate=!0}}const ts=new un,Dw=new n0,xg=new Se;class Dp extends dl{constructor(){super(),this.uuid=L6.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){const t=new Ir().getNormalMatrix(e);for(let r=0,i=this.vertices.length;r<i;r++)this.vertices[r].applyMatrix4(e);for(let r=0,i=this.faces.length;r<i;r++){const a=this.faces[r];a.normal.applyMatrix3(t).normalize();for(let o=0,s=a.vertexNormals.length;o<s;o++)a.vertexNormals[o].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return ts.makeRotationX(e),this.applyMatrix4(ts),this}rotateY(e){return ts.makeRotationY(e),this.applyMatrix4(ts),this}rotateZ(e){return ts.makeRotationZ(e),this.applyMatrix4(ts),this}translate(e,t,r){return ts.makeTranslation(e,t,r),this.applyMatrix4(ts),this}scale(e,t,r){return ts.makeScale(e,t,r),this.applyMatrix4(ts),this}lookAt(e){return Dw.lookAt(e),Dw.updateMatrix(),this.applyMatrix4(Dw.matrix),this}fromBufferGeometry(e){const t=this,r=e.index!==null?e.index:void 0,i=e.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const a=i.position,o=i.normal,s=i.color,l=i.uv,u=i.uv2;u!==void 0&&(this.faceVertexUvs[1]=[]);for(let f=0;f<a.count;f++)t.vertices.push(new Se().fromBufferAttribute(a,f)),s!==void 0&&t.colors.push(new Jt().fromBufferAttribute(s,f));function d(f,m,g,_){const E=s===void 0?[]:[t.colors[f].clone(),t.colors[m].clone(),t.colors[g].clone()],x=o===void 0?[]:[new Se().fromBufferAttribute(o,f),new Se().fromBufferAttribute(o,m),new Se().fromBufferAttribute(o,g)],v=new U4(f,m,g,x,E,_);t.faces.push(v),l!==void 0&&t.faceVertexUvs[0].push([new pt().fromBufferAttribute(l,f),new pt().fromBufferAttribute(l,m),new pt().fromBufferAttribute(l,g)]),u!==void 0&&t.faceVertexUvs[1].push([new pt().fromBufferAttribute(u,f),new pt().fromBufferAttribute(u,m),new pt().fromBufferAttribute(u,g)])}const h=e.groups;if(h.length>0)for(let f=0;f<h.length;f++){const m=h[f],g=m.start,_=m.count;for(let E=g,x=g+_;E<x;E+=3)r!==void 0?d(r.getX(E),r.getX(E+1),r.getX(E+2),m.materialIndex):d(E,E+1,E+2,m.materialIndex)}else if(r!==void 0)for(let f=0;f<r.count;f+=3)d(r.getX(f),r.getX(f+1),r.getX(f+2));else for(let f=0;f<a.count;f+=3)d(f,f+1,f+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(xg).negate(),this.translate(xg.x,xg.y,xg.z),this}normalize(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,i=new un;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){const e=new Se,t=new Se;for(let r=0,i=this.faces.length;r<i;r++){const a=this.faces[r],o=this.vertices[a.a],s=this.vertices[a.b],l=this.vertices[a.c];e.subVectors(l,s),t.subVectors(o,s),e.cross(t),e.normalize(),a.normal.copy(e)}}computeVertexNormals(e=!0){const t=new Array(this.vertices.length);for(let r=0,i=this.vertices.length;r<i;r++)t[r]=new Se;if(e){const r=new Se,i=new Se;for(let a=0,o=this.faces.length;a<o;a++){const s=this.faces[a],l=this.vertices[s.a],u=this.vertices[s.b],d=this.vertices[s.c];r.subVectors(d,u),i.subVectors(l,u),r.cross(i),t[s.a].add(r),t[s.b].add(r),t[s.c].add(r)}}else{this.computeFaceNormals();for(let r=0,i=this.faces.length;r<i;r++){const a=this.faces[r];t[a.a].add(a.normal),t[a.b].add(a.normal),t[a.c].add(a.normal)}}for(let r=0,i=this.vertices.length;r<i;r++)t[r].normalize();for(let r=0,i=this.faces.length;r<i;r++){const a=this.faces[r],o=a.vertexNormals;o.length===3?(o[0].copy(t[a.a]),o[1].copy(t[a.b]),o[2].copy(t[a.c])):(o[0]=t[a.a].clone(),o[1]=t[a.b].clone(),o[2]=t[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const r=this.faces[e],i=r.vertexNormals;i.length===3?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,r=this.faces.length;t<r;t++){const i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let a=0,o=i.vertexNormals.length;a<o;a++)i.__originalVertexNormals[a]?i.__originalVertexNormals[a].copy(i.vertexNormals[a]):i.__originalVertexNormals[a]=i.vertexNormals[a].clone()}const e=new Dp;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const a=this.morphNormals[t].faceNormals,o=this.morphNormals[t].vertexNormals;for(let s=0,l=this.faces.length;s<l;s++){const u=new Se,d={a:new Se,b:new Se,c:new Se};a.push(u),o.push(d)}}const i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let a=0,o=this.faces.length;a<o;a++){const s=this.faces[a],l=i.faceNormals[a],u=i.vertexNormals[a];l.copy(s.normal),u.a.copy(s.vertexNormals[0]),u.b.copy(s.vertexNormals[1]),u.c.copy(s.vertexNormals[2])}}for(let t=0,r=this.faces.length;t<r;t++){const i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ho),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $u),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let i;const a=this.vertices.length,o=this.vertices,s=e.vertices,l=this.faces,u=e.faces,d=this.colors,h=e.colors;t!==void 0&&(i=new Ir().getNormalMatrix(t));for(let f=0,m=s.length;f<m;f++){const _=s[f].clone();t!==void 0&&_.applyMatrix4(t),o.push(_)}for(let f=0,m=h.length;f<m;f++)d.push(h[f].clone());for(let f=0,m=u.length;f<m;f++){const g=u[f];let _,E;const x=g.vertexNormals,v=g.vertexColors,C=new U4(g.a+a,g.b+a,g.c+a);C.normal.copy(g.normal),i!==void 0&&C.normal.applyMatrix3(i).normalize();for(let V=0,D=x.length;V<D;V++)_=x[V].clone(),i!==void 0&&_.applyMatrix3(i).normalize(),C.vertexNormals.push(_);C.color.copy(g.color);for(let V=0,D=v.length;V<D;V++)E=v[V],C.vertexColors.push(E.clone());C.materialIndex=g.materialIndex+r,l.push(C)}for(let f=0,m=e.faceVertexUvs.length;f<m;f++){const g=e.faceVertexUvs[f];this.faceVertexUvs[f]===void 0&&(this.faceVertexUvs[f]=[]);for(let _=0,E=g.length;_<E;_++){const x=g[_],v=[];for(let C=0,V=x.length;C<V;C++)v.push(x[C].clone());this.faceVertexUvs[f].push(v)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){const t={},r=[],i=[],a=Math.pow(10,e);for(let l=0,u=this.vertices.length;l<u;l++){const d=this.vertices[l],h=Math.round(d.x*a)+"_"+Math.round(d.y*a)+"_"+Math.round(d.z*a);t[h]===void 0?(t[h]=l,r.push(this.vertices[l]),i[l]=r.length-1):i[l]=i[t[h]]}const o=[];for(let l=0,u=this.faces.length;l<u;l++){const d=this.faces[l];d.a=i[d.a],d.b=i[d.b],d.c=i[d.c];const h=[d.a,d.b,d.c];for(let f=0;f<3;f++)if(h[f]===h[(f+1)%3]){o.push(l);break}}for(let l=o.length-1;l>=0;l--){const u=o[l];this.faces.splice(u,1);for(let d=0,h=this.faceVertexUvs.length;d<h;d++)this.faceVertexUvs[d].splice(u,1)}const s=this.vertices.length-r.length;return this.vertices=r,s}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){const i=e[t];this.vertices.push(new Se(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){const e=this.faces,t=e.length;for(let l=0;l<t;l++)e[l]._id=l;function r(l,u){return l.materialIndex-u.materialIndex}e.sort(r);const i=this.faceVertexUvs[0],a=this.faceVertexUvs[1];let o,s;i&&i.length===t&&(o=[]),a&&a.length===t&&(s=[]);for(let l=0;l<t;l++){const u=e[l]._id;o&&o.push(i[u]),s&&s.push(a[u])}o&&(this.faceVertexUvs[0]=o),s&&(this.faceVertexUvs[1]=s)}toJSON(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){const g=this.parameters;for(const _ in g)g[_]!==void 0&&(e[_]=g[_]);return e}const t=[];for(let g=0;g<this.vertices.length;g++){const _=this.vertices[g];t.push(_.x,_.y,_.z)}const r=[],i=[],a={},o=[],s={},l=[],u={};for(let g=0;g<this.faces.length;g++){const _=this.faces[g],E=!0,x=!1,v=this.faceVertexUvs[0][g]!==void 0,C=_.normal.length()>0,V=_.vertexNormals.length>0,D=_.color.r!==1||_.color.g!==1||_.color.b!==1,H=_.vertexColors.length>0;let R=0;if(R=d(R,0,0),R=d(R,1,E),R=d(R,2,x),R=d(R,3,v),R=d(R,4,C),R=d(R,5,V),R=d(R,6,D),R=d(R,7,H),r.push(R),r.push(_.a,_.b,_.c),r.push(_.materialIndex),v){const j=this.faceVertexUvs[0][g];r.push(m(j[0]),m(j[1]),m(j[2]))}if(C&&r.push(h(_.normal)),V){const j=_.vertexNormals;r.push(h(j[0]),h(j[1]),h(j[2]))}if(D&&r.push(f(_.color)),H){const j=_.vertexColors;r.push(f(j[0]),f(j[1]),f(j[2]))}}function d(g,_,E){return E?g|1<<_:g&~(1<<_)}function h(g){const _=g.x.toString()+g.y.toString()+g.z.toString();return a[_]!==void 0||(a[_]=i.length/3,i.push(g.x,g.y,g.z)),a[_]}function f(g){const _=g.r.toString()+g.g.toString()+g.b.toString();return s[_]!==void 0||(s[_]=o.length,o.push(g.getHex())),s[_]}function m(g){const _=g.x.toString()+g.y.toString();return u[_]!==void 0||(u[_]=l.length/2,l.push(g.x,g.y)),u[_]}return e.data={},e.data.vertices=t,e.data.normals=i,o.length>0&&(e.data.colors=o),l.length>0&&(e.data.uvs=[l]),e.data.faces=r,e}clone(){return new Dp().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let f=0,m=t.length;f<m;f++)this.vertices.push(t[f].clone());const r=e.colors;for(let f=0,m=r.length;f<m;f++)this.colors.push(r[f].clone());const i=e.faces;for(let f=0,m=i.length;f<m;f++)this.faces.push(i[f].clone());for(let f=0,m=e.faceVertexUvs.length;f<m;f++){const g=e.faceVertexUvs[f];this.faceVertexUvs[f]===void 0&&(this.faceVertexUvs[f]=[]);for(let _=0,E=g.length;_<E;_++){const x=g[_],v=[];for(let C=0,V=x.length;C<V;C++){const D=x[C];v.push(D.clone())}this.faceVertexUvs[f].push(v)}}const a=e.morphTargets;for(let f=0,m=a.length;f<m;f++){const g={};if(g.name=a[f].name,a[f].vertices!==void 0){g.vertices=[];for(let _=0,E=a[f].vertices.length;_<E;_++)g.vertices.push(a[f].vertices[_].clone())}if(a[f].normals!==void 0){g.normals=[];for(let _=0,E=a[f].normals.length;_<E;_++)g.normals.push(a[f].normals[_].clone())}this.morphTargets.push(g)}const o=e.morphNormals;for(let f=0,m=o.length;f<m;f++){const g={};if(o[f].vertexNormals!==void 0){g.vertexNormals=[];for(let _=0,E=o[f].vertexNormals.length;_<E;_++){const x=o[f].vertexNormals[_],v={};v.a=x.a.clone(),v.b=x.b.clone(),v.c=x.c.clone(),g.vertexNormals.push(v)}}if(o[f].faceNormals!==void 0){g.faceNormals=[];for(let _=0,E=o[f].faceNormals.length;_<E;_++)g.faceNormals.push(o[f].faceNormals[_].clone())}this.morphNormals.push(g)}const s=e.skinWeights;for(let f=0,m=s.length;f<m;f++)this.skinWeights.push(s[f].clone());const l=e.skinIndices;for(let f=0,m=l.length;f<m;f++)this.skinIndices.push(l[f].clone());const u=e.lineDistances;for(let f=0,m=u.length;f<m;f++)this.lineDistances.push(u[f]);const d=e.boundingBox;d!==null&&(this.boundingBox=d.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){const e=new Exe().fromGeometry(this),t=new y0,r=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",new v0(r,3).copyVector3sArray(e.vertices)),e.normals.length>0){const i=new Float32Array(e.normals.length*3);t.setAttribute("normal",new v0(i,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const i=new Float32Array(e.colors.length*3);t.setAttribute("color",new v0(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const i=new Float32Array(e.uvs.length*2);t.setAttribute("uv",new v0(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const i=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",new v0(i,2).copyVector2sArray(e.uvs2))}t.groups=e.groups;for(const i in e.morphTargets){const a=[],o=e.morphTargets[i];for(let s=0,l=o.length;s<l;s++){const u=o[s],d=new B0(u.data.length*3,3);d.name=u.name,a.push(d.copyVector3sArray(u.data))}t.morphAttributes[i]=a}if(e.skinIndices.length>0){const i=new B0(e.skinIndices.length*4,4);t.setAttribute("skinIndex",i.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const i=new B0(e.skinWeights.length*4,4);t.setAttribute("skinWeight",i.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new y0;const r=e.geometry;if(e.isPoints||e.isLine){const i=new B0(r.vertices.length*3,3),a=new B0(r.colors.length*3,3);if(t.setAttribute("position",i.copyVector3sArray(r.vertices)),t.setAttribute("color",a.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){const o=new B0(r.lineDistances.length,1);t.setAttribute("lineDistance",o.copyArray(r.lineDistances))}r.boundingSphere!==null&&(t.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}}Dp.prototype.isGeometry=!0;class Exe{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){const t=[];let r,i,a;const o=e.faces;for(i=0;i<o.length;i++){const s=o[i];s.materialIndex!==a&&(a=s.materialIndex,r!==void 0&&(r.count=i*3-r.start,t.push(r)),r={start:i*3,materialIndex:a})}r!==void 0&&(r.count=i*3-r.start,t.push(r)),this.groups=t}fromGeometry(e){const t=e.faces,r=e.vertices,i=e.faceVertexUvs,a=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,s=e.morphTargets,l=s.length;let u;if(l>0){u=[];for(let x=0;x<l;x++)u[x]={name:s[x].name,data:[]};this.morphTargets.position=u}const d=e.morphNormals,h=d.length;let f;if(h>0){f=[];for(let x=0;x<h;x++)f[x]={name:d[x].name,data:[]};this.morphTargets.normal=f}const m=e.skinIndices,g=e.skinWeights,_=m.length===r.length,E=g.length===r.length;r.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let x=0;x<t.length;x++){const v=t[x];this.vertices.push(r[v.a],r[v.b],r[v.c]);const C=v.vertexNormals;if(C.length===3)this.normals.push(C[0],C[1],C[2]);else{const D=v.normal;this.normals.push(D,D,D)}const V=v.vertexColors;if(V.length===3)this.colors.push(V[0],V[1],V[2]);else{const D=v.color;this.colors.push(D,D,D)}if(a===!0){const D=i[0][x];D!==void 0?this.uvs.push(D[0],D[1],D[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",x),this.uvs.push(new pt,new pt,new pt))}if(o===!0){const D=i[1][x];D!==void 0?this.uvs2.push(D[0],D[1],D[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",x),this.uvs2.push(new pt,new pt,new pt))}for(let D=0;D<l;D++){const H=s[D].vertices;u[D].data.push(H[v.a],H[v.b],H[v.c])}for(let D=0;D<h;D++){const H=d[D].vertexNormals[x];f[D].data.push(H.a,H.b,H.c)}_&&this.skinIndices.push(m[v.a],m[v.b],m[v.c]),E&&this.skinWeights.push(g[v.a],g[v.b],g[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}}class U4{constructor(e,t,r,i,a,o=0){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new Se,this.vertexNormals=Array.isArray(i)?i:[],this.color=a&&a.isColor?a:new Jt,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=o}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}class z9{constructor(){this.bgColor=0,this.showTextures=!0,this.showWireframe=!1,this.showVertexNormals=!1,this.useFormCamera=!1,this.__promises=[]}createModel(e){const t=this._parseMaterials(e);return this.__threeResult=this._parseForm(e,t),new Promise(r=>{Promise.all(this.__promises).then(()=>{this.__promises=[],r(this.__threeResult)})})}_parseForm(e,t){const r=this._parseFormObj(e,t,0);return r.length!==1&&console.warn(`Expected 1 return object from _parseForm, got ${r.length}`),r[0]}_parseFormObj(e,t,r){let i=Or.getByGlobalIndex(e,"OBJ1",r);if(i===null&&(r===0&&(i=e.OBJ1[0].parsed.objects[0],console.warn("Using first object rather than window index 0 object")),!i))throw new Error(`Attempted to get unavailable OBJ ${r}`);Array.isArray(i)||(i=[i]);const a=[];for(let o=0;o<i.length;o++){const s=i[o];if(s.objType===61){const l=this._createObject3DFromOBJ1Entry(s);for(let u=0;u<s.children.length;u++){const d=this._parseFormObj(e,t,s.children[u]);d&&d.length&&d.forEach(h=>{l.add(h)})}a.push(l)}else if(s.objType===16){const l=this._createObject3DFromOBJ1Entry(s),u=s.skeletonGlobalIndex,d=this._parseFormSkl(e,t,u);l.add(d),a.push(l)}else if(s.objType===58){const l=this._createObject3DFromOBJ1Entry(s),u=new Dp;for(let h=s.faceIndex;h<s.faceIndex+s.faceCount;h++){const f=e.FAC1[0].parsed.faces[h];this._populateGeometryWithFace(e,u,f)}const d=u.toBufferGeometry();if(d.setIndex(u.vertices.map((h,f)=>f)),this.showTextures){const h=new Mi(d,t);l.add(h)}if(this.showWireframe){const h=new Rc({color:xW(this.bgColor),linewidth:this.showTextures?2:1}),f=new kp(new PJ(d),h);l.add(f)}if(this.showVertexNormals){const h=new yxe(new Mi(d,t),8,65280);l.add(h)}a.push(l)}}return a}_createObject3DFromOBJ1Entry(e){const t=new n0;return e.hasOwnProperty("globalIndex")&&(t.name=this._getObjNameFromId(e.globalIndex)),t.position.x=e.posX,t.position.y=e.posY,t.position.z=e.posZ,t.rotation.x=G1(e.rotX),t.rotation.y=G1(e.rotY),t.rotation.z=G1(e.rotZ),t.rotation.order="ZYX",t.scale.x=e.scaleX,t.scale.y=e.scaleY,t.scale.z=e.scaleZ,t}_getObjNameFromId(e){return At(e)}_parseFormSkl(e,t,r){const i=Or.getByGlobalIndex(e,"SKL1",r);if(i===null||Array.isArray(i))throw new Error("Unexpected SKL1 search result");return this._parseFormSklNode(e,t,i.skls,0)}_parseFormSklNode(e,t,r,i){const a=r[i],o=this._createObject3DFromOBJ1Entry(a),s=a.objGlobalIndex,l=this._parseFormObj(e,t,s);if(l&&l.length&&l.forEach(u=>{o.add(u)}),a.isParentNode){let u=i+1;for(;u;){const d=r[u],h=this._parseFormSklNode(e,t,r,u);if(o.add(h),d.nextSiblingRelativeIndex)u+=d.nextSiblingRelativeIndex;else break}}return o}_populateGeometryWithFace(e,t,r){if(!r.vtxEntries.length)return;const i=e.VTX1[0].parsed.scale,a=r.vtxEntries,o=[];for(let s=0;s<3;s++){const l=a[s],u=e.VTX1[0].parsed.vertices[l.vertexIndex];o.push(t.vertices.length),t.vertices.push(this._makeVertex(u,i))}if(a.length===4)for(let s=0;s<4;s++){if(s===1)continue;const l=a[s],u=e.VTX1[0].parsed.vertices[l.vertexIndex];o.push(t.vertices.length),t.vertices.push(this._makeVertex(u,i))}a.length===3?this._addFace(t,e,r,[o[0],o[1],o[2]],[a[0],a[1],a[2]]):a.length===4&&(this._addFace(t,e,r,[o[0],o[1],o[2]],[a[0],a[1],a[2]]),this._addFace(t,e,r,[o[3],o[4],o[5]],[a[0],a[2],a[3]]))}_addFace(e,t,r,i,a){const o=new U4(i[0],i[1],i[2]);o.vertexNormals=this._makeVertexNormals(t,a[0].vertexIndex,a[1].vertexIndex,a[2].vertexIndex),o.materialIndex=this._getMaterialIndex(r),o.color=new Jt(this._getColorBytes(t,r)),o.vertexColors=this._makeVertexColors(t,r,a[0],a[1],a[2]),e.faceVertexUvs[0].push(this._makeVertexUVs(a[0],a[1],a[2])),e.faces.push(o)}_parseMaterials(e){const t=[new Lu({vertexColors:!0}),new Lu({vertexColors:!0})];if(e.BMP1)if(e.ATR1&&e.ATR1[0]){const r=e.ATR1[0].parsed.atrs;for(let i=0;i<r.length;i++){const a=r[i],o=Or.getByGlobalIndex(e,"BMP1",a.bmpGlobalIndex);if(o===null||Array.isArray(o)){console.warn("Unexpected bitmap result from window index lookup");continue}const s=this._createTextureMaterial(a,o);t.push(s)}}else console.warn("BMPs, but no ATRs");return t}_createTextureMaterial(e,t){const r=Ea(t.src,t.width,t.height);wt("Texture",r);const i=new xI;i.crossOrigin="";let a;const o=new Promise(s=>{a=i.load(r,s),a.flipY=!1,a.wrapS=this._getWrappingBehavior(e.xBehavior),a.wrapT=this._getWrappingBehavior(e.yBehavior)});return this.__promises.push(o),new Lu({alphaTest:.5,map:a,vertexColors:!0})}_getWrappingBehavior(e){switch(e){case 44:return Gh;case 45:return jh;case 46:return la;default:return console.warn(`Unknown behavior ${At(e)}`),la}}_makeVertex(e,t){return new Se(e.x*t,e.y*t,e.z*t)}_makeVertexNormals(e,t,r,i){return[this._makeVertexNormal(e,t),this._makeVertexNormal(e,r),this._makeVertexNormal(e,i)]}_makeVertexNormal(e,t){const r=e.VTX1[0].parsed.vertices[t],i=new Se(r.normalX/(127+(r.normalX<0?1:0)),r.normalY/(127+(r.normalY<0?1:0)),r.normalZ/(127+(r.normalZ<0?1:0)));return i.normalize(),i}_makeVertexUVs(e,t,r){return[this._makeVertexUV(e),this._makeVertexUV(t),this._makeVertexUV(r)]}_makeVertexUV(e){return new pt(e.u,e.v)}_getMaterialIndex(e){if(e.atrIndex>=0||e.mystery3===54)return e.atrIndex+2;if(e.mystery3===55)return 0}_getColorBytes(e,t){if(t.mystery3===54){const r=t.materialIndex;return this._getColorFromMaterial(e,r)}else if(t.mystery3===55)return 16776192;console.warn("Could not determine color for face")}_getColorFromMaterial(e,t){let r;return e.MAT1&&e.MAT1[0]&&e.MAT1[0].parsed&&(r=e.MAT1[0].parsed.materials[t].colorIndex,e.COL1&&e.COL1[0]&&e.COL1[0].parsed&&e.COL1[0].parsed.hasOwnProperty(r))?e.COL1[0].parsed[r]>>>8:(console.warn(`Could not find color ${r} specified by material ${t}`),16776192)}_makeVertexColors(e,t,r,i,a){return t.mystery3!==55?[]:[this._makeVertexColor(e,r),this._makeVertexColor(e,i),this._makeVertexColor(e,a)]}_makeVertexColor(e,t){return t.materialIndex<0?null:new Jt(this._getColorFromMaterial(e,t.materialIndex))}createCamera(e,t,r){const i=new mi(75,t/r,1,999999);if(this.useFormCamera){const a=Or.getObjectsByType(e,97);if(a.length===3){const o=a[0],s=a[1];return i.position.set(o.posX,o.posY,o.posZ),i.lookAt(new Se(s.posX,s.posY,s.posZ)),i}else console.warn(`Unexpected camera object count: ${a.length}`)}return i.position.z=500,i}}class Ou{static isMtnx(e){return e?(e instanceof DataView||(e=new DataView(e)),e.getUint32(0)===1297370712):!1}static unpack(e){if(e instanceof DataView||(e=new DataView(e)),!Ou.isMtnx(e))return null;const t=Object.create(null);t.totalFrames=e.getUint16(10),t.tracks=[];const r=e.getUint16(8),i=e.getUint32(12),a=e.getUint32(16),o=e.getUint32(20),s=new DataView(e.buffer,e.byteOffset+i),l=new DataView(e.buffer,e.byteOffset+a),u=new DataView(e.buffer,e.byteOffset+o);for(let d=0;d<r;d++){const h=e.getUint32(24+d*4),f=new DataView(e.buffer,e.byteOffset+h);t.tracks.push(Ou.parseTrack(f,d,s,l,u))}return t}static parseTrack(e,t,r,i,a){const o=Object.create(null);o.type=e.getUint8(0),o.dimension=e.getUint8(1),o.mystery1=e.getUint8(2),o.mystery2=e.getUint8(3),o.mystery3=e.getUint16(4),o.totalFrames=e.getUint16(6),o.mystery4=e.getUint8(8),o.objIndex=e.getUint8(9),o.keyframeCount=e.getUint16(14),o.d=r.getUint8(t);const s=e.getUint16(10),l=e.getUint16(12);o.keyframes=Object.create(null);for(let u=0;u<o.keyframeCount;u++){const d=i.getUint16(s*2+u*2);o.keyframes[d]=Ou.parseData(a,l,u)}return o}static parseData(e,t,r){const a=Object.create(null);return a.value1=e.getFloat32(t*4+r*12),a.value2=e.getFloat32(t*4+r*12+4),a.value3=e.getFloat32(t*4+r*12+8),a}}var j4=(n=>(n[n.X=69]="X",n[n.Y=70]="Y",n[n.Z=71]="Z",n))(j4||{}),W9=(n=>(n[n.Transform=23]="Transform",n[n.Rotation=76]="Rotation",n[n.Scale=27]="Scale",n))(W9||{});const xB={type:"change"},Fw={type:"start"},vB={type:"end"};class Cxe extends dl{constructor(e,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Se,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Xd.ROTATE,MIDDLE:Xd.DOLLY,RIGHT:Xd.PAN},this.touches={ONE:Kd.ROTATE,TWO:Kd.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(ve){ve.addEventListener("keydown",oe),this._domElementKeyEvents=ve},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(xB),r.update(),a=i.NONE},this.update=function(){const ve=new Se,$e=new Si().setFromUnitVectors(e.up,new Se(0,1,0)),_t=$e.clone().invert(),gt=new Se,Ce=new Si,Ft=2*Math.PI;return function(){const Nt=r.object.position;ve.copy(Nt).sub(r.target),ve.applyQuaternion($e),s.setFromVector3(ve),r.autoRotate&&a===i.NONE&&te(R()),r.enableDamping?(s.theta+=l.theta*r.dampingFactor,s.phi+=l.phi*r.dampingFactor):(s.theta+=l.theta,s.phi+=l.phi);let Je=r.minAzimuthAngle,mt=r.maxAzimuthAngle;return isFinite(Je)&&isFinite(mt)&&(Je<-Math.PI?Je+=Ft:Je>Math.PI&&(Je-=Ft),mt<-Math.PI?mt+=Ft:mt>Math.PI&&(mt-=Ft),Je<=mt?s.theta=Math.max(Je,Math.min(mt,s.theta)):s.theta=s.theta>(Je+mt)/2?Math.max(Je,s.theta):Math.min(mt,s.theta)),s.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=u,s.radius=Math.max(r.minDistance,Math.min(r.maxDistance,s.radius)),r.enableDamping===!0?r.target.addScaledVector(d,r.dampingFactor):r.target.add(d),ve.setFromSpherical(s),ve.applyQuaternion(_t),Nt.copy(r.target).add(ve),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,d.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),d.set(0,0,0)),u=1,h||gt.distanceToSquared(r.object.position)>o||8*(1-Ce.dot(r.object.quaternion))>o?(r.dispatchEvent(xB),gt.copy(r.object.position),Ce.copy(r.object.quaternion),h=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",Fe),r.domElement.removeEventListener("pointerdown",k),r.domElement.removeEventListener("pointercancel",le),r.domElement.removeEventListener("wheel",He),r.domElement.removeEventListener("pointermove",De),r.domElement.removeEventListener("pointerup",we),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",oe)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=i.NONE;const o=1e-6,s=new sb,l=new sb;let u=1;const d=new Se;let h=!1;const f=new pt,m=new pt,g=new pt,_=new pt,E=new pt,x=new pt,v=new pt,C=new pt,V=new pt,D=[],H={};function R(){return 2*Math.PI/60/60*r.autoRotateSpeed}function j(){return Math.pow(.95,r.zoomSpeed)}function te(ve){l.theta-=ve}function $(ve){l.phi-=ve}const z=function(){const ve=new Se;return function(_t,gt){ve.setFromMatrixColumn(gt,0),ve.multiplyScalar(-_t),d.add(ve)}}(),I=function(){const ve=new Se;return function(_t,gt){r.screenSpacePanning===!0?ve.setFromMatrixColumn(gt,1):(ve.setFromMatrixColumn(gt,0),ve.crossVectors(r.object.up,ve)),ve.multiplyScalar(_t),d.add(ve)}}(),q=function(){const ve=new Se;return function(_t,gt){const Ce=r.domElement;if(r.object.isPerspectiveCamera){const Ft=r.object.position;ve.copy(Ft).sub(r.target);let ht=ve.length();ht*=Math.tan(r.object.fov/2*Math.PI/180),z(2*_t*ht/Ce.clientHeight,r.object.matrix),I(2*gt*ht/Ce.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(z(_t*(r.object.right-r.object.left)/r.object.zoom/Ce.clientWidth,r.object.matrix),I(gt*(r.object.top-r.object.bottom)/r.object.zoom/Ce.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function P(ve){r.object.isPerspectiveCamera?u/=ve:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*ve)),r.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ee(ve){r.object.isPerspectiveCamera?u*=ve:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/ve)),r.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ue(ve){f.set(ve.clientX,ve.clientY)}function U(ve){v.set(ve.clientX,ve.clientY)}function O(ve){_.set(ve.clientX,ve.clientY)}function G(ve){m.set(ve.clientX,ve.clientY),g.subVectors(m,f).multiplyScalar(r.rotateSpeed);const $e=r.domElement;te(2*Math.PI*g.x/$e.clientHeight),$(2*Math.PI*g.y/$e.clientHeight),f.copy(m),r.update()}function ne(ve){C.set(ve.clientX,ve.clientY),V.subVectors(C,v),V.y>0?P(j()):V.y<0&&ee(j()),v.copy(C),r.update()}function se(ve){E.set(ve.clientX,ve.clientY),x.subVectors(E,_).multiplyScalar(r.panSpeed),q(x.x,x.y),_.copy(E),r.update()}function ie(ve){ve.deltaY<0?ee(j()):ve.deltaY>0&&P(j()),r.update()}function Re(ve){let $e=!1;switch(ve.code){case r.keys.UP:q(0,r.keyPanSpeed),$e=!0;break;case r.keys.BOTTOM:q(0,-r.keyPanSpeed),$e=!0;break;case r.keys.LEFT:q(r.keyPanSpeed,0),$e=!0;break;case r.keys.RIGHT:q(-r.keyPanSpeed,0),$e=!0;break}$e&&(ve.preventDefault(),r.update())}function Be(){if(D.length===1)f.set(D[0].pageX,D[0].pageY);else{const ve=.5*(D[0].pageX+D[1].pageX),$e=.5*(D[0].pageY+D[1].pageY);f.set(ve,$e)}}function Te(){if(D.length===1)_.set(D[0].pageX,D[0].pageY);else{const ve=.5*(D[0].pageX+D[1].pageX),$e=.5*(D[0].pageY+D[1].pageY);_.set(ve,$e)}}function ye(){const ve=D[0].pageX-D[1].pageX,$e=D[0].pageY-D[1].pageY,_t=Math.sqrt(ve*ve+$e*$e);v.set(0,_t)}function We(){r.enableZoom&&ye(),r.enablePan&&Te()}function at(){r.enableZoom&&ye(),r.enableRotate&&Be()}function Ke(ve){if(D.length==1)m.set(ve.pageX,ve.pageY);else{const _t=Ee(ve),gt=.5*(ve.pageX+_t.x),Ce=.5*(ve.pageY+_t.y);m.set(gt,Ce)}g.subVectors(m,f).multiplyScalar(r.rotateSpeed);const $e=r.domElement;te(2*Math.PI*g.x/$e.clientHeight),$(2*Math.PI*g.y/$e.clientHeight),f.copy(m)}function tt(ve){if(D.length===1)E.set(ve.pageX,ve.pageY);else{const $e=Ee(ve),_t=.5*(ve.pageX+$e.x),gt=.5*(ve.pageY+$e.y);E.set(_t,gt)}x.subVectors(E,_).multiplyScalar(r.panSpeed),q(x.x,x.y),_.copy(E)}function lt(ve){const $e=Ee(ve),_t=ve.pageX-$e.x,gt=ve.pageY-$e.y,Ce=Math.sqrt(_t*_t+gt*gt);C.set(0,Ce),V.set(0,Math.pow(C.y/v.y,r.zoomSpeed)),P(V.y),v.copy(C)}function Ie(ve){r.enableZoom&&lt(ve),r.enablePan&&tt(ve)}function Ue(ve){r.enableZoom&&lt(ve),r.enableRotate&&Ke(ve)}function k(ve){r.enabled!==!1&&(D.length===0&&(r.domElement.setPointerCapture(ve.pointerId),r.domElement.addEventListener("pointermove",De),r.domElement.addEventListener("pointerup",we)),Le(ve),ve.pointerType==="touch"?Y(ve):re(ve))}function De(ve){r.enabled!==!1&&(ve.pointerType==="touch"?_e(ve):fe(ve))}function we(ve){Pe(ve),D.length===0&&(r.domElement.releasePointerCapture(ve.pointerId),r.domElement.removeEventListener("pointermove",De),r.domElement.removeEventListener("pointerup",we)),r.dispatchEvent(vB),a=i.NONE}function le(ve){Pe(ve)}function re(ve){let $e;switch(ve.button){case 0:$e=r.mouseButtons.LEFT;break;case 1:$e=r.mouseButtons.MIDDLE;break;case 2:$e=r.mouseButtons.RIGHT;break;default:$e=-1}switch($e){case Xd.DOLLY:if(r.enableZoom===!1)return;U(ve),a=i.DOLLY;break;case Xd.ROTATE:if(ve.ctrlKey||ve.metaKey||ve.shiftKey){if(r.enablePan===!1)return;O(ve),a=i.PAN}else{if(r.enableRotate===!1)return;ue(ve),a=i.ROTATE}break;case Xd.PAN:if(ve.ctrlKey||ve.metaKey||ve.shiftKey){if(r.enableRotate===!1)return;ue(ve),a=i.ROTATE}else{if(r.enablePan===!1)return;O(ve),a=i.PAN}break;default:a=i.NONE}a!==i.NONE&&r.dispatchEvent(Fw)}function fe(ve){if(r.enabled!==!1)switch(a){case i.ROTATE:if(r.enableRotate===!1)return;G(ve);break;case i.DOLLY:if(r.enableZoom===!1)return;ne(ve);break;case i.PAN:if(r.enablePan===!1)return;se(ve);break}}function He(ve){r.enabled===!1||r.enableZoom===!1||a!==i.NONE||(ve.preventDefault(),r.dispatchEvent(Fw),ie(ve),r.dispatchEvent(vB))}function oe(ve){r.enabled===!1||r.enablePan===!1||Re(ve)}function Y(ve){switch(rt(ve),D.length){case 1:switch(r.touches.ONE){case Kd.ROTATE:if(r.enableRotate===!1)return;Be(),a=i.TOUCH_ROTATE;break;case Kd.PAN:if(r.enablePan===!1)return;Te(),a=i.TOUCH_PAN;break;default:a=i.NONE}break;case 2:switch(r.touches.TWO){case Kd.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;We(),a=i.TOUCH_DOLLY_PAN;break;case Kd.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;at(),a=i.TOUCH_DOLLY_ROTATE;break;default:a=i.NONE}break;default:a=i.NONE}a!==i.NONE&&r.dispatchEvent(Fw)}function _e(ve){switch(rt(ve),a){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ke(ve),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;tt(ve),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ie(ve),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ue(ve),r.update();break;default:a=i.NONE}}function Fe(ve){r.enabled!==!1&&ve.preventDefault()}function Le(ve){D.push(ve)}function Pe(ve){delete H[ve.pointerId];for(let $e=0;$e<D.length;$e++)if(D[$e].pointerId==ve.pointerId){D.splice($e,1);return}}function rt(ve){let $e=H[ve.pointerId];$e===void 0&&($e=new pt,H[ve.pointerId]=$e),$e.set(ve.pageX,ve.pageY)}function Ee(ve){const $e=ve.pointerId===D[0].pointerId?D[1]:D[0];return H[$e.pointerId]}r.domElement.addEventListener("contextmenu",Fe),r.domElement.addEventListener("pointerdown",k),r.domElement.addEventListener("pointercancel",le),r.domElement.addEventListener("wheel",He,{passive:!1}),this.update()}}class xD{constructor(){this.pluginCallbacks=[],this.register(function(e){return new Bxe(e)}),this.register(function(e){return new Mxe(e)}),this.register(function(e){return new Ixe(e)}),this.register(function(e){return new kxe(e)}),this.register(function(e){return new Nxe(e)}),this.register(function(e){return new Oxe(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){typeof r=="object"&&(console.warn("THREE.GLTFExporter: parse() expects options as the fourth argument now."),i=r);const a=new Lxe,o=[];for(let s=0,l=this.pluginCallbacks.length;s<l;s++)o.push(this.pluginCallbacks[s](a));a.setPlugins(o),a.write(e,t,i).catch(r)}parseAsync(e,t){const r=this;return new Promise(function(i,a){r.parse(e,i,a,t)})}}const _0={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Fa={};Fa[Kr]=_0.NEAREST;Fa[ny]=_0.NEAREST_MIPMAP_NEAREST;Fa[ry]=_0.NEAREST_MIPMAP_LINEAR;Fa[pi]=_0.LINEAR;Fa[P6]=_0.LINEAR_MIPMAP_NEAREST;Fa[Mp]=_0.LINEAR_MIPMAP_LINEAR;Fa[la]=_0.CLAMP_TO_EDGE;Fa[jh]=_0.REPEAT;Fa[Gh]=_0.MIRRORED_REPEAT;const wB={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},yB=12,Vxe=1179937895,Dxe=2,EB=8,Fxe=1313821514,Txe=5130562;function mh(n,e){return n.length===e.length&&n.every(function(t,r){return t===e[r]})}function bxe(n){if(window.TextEncoder!==void 0)return new TextEncoder().encode(n).buffer;const e=new Uint8Array(new ArrayBuffer(n.length));for(let t=0,r=n.length;t<r;t++){const i=n.charCodeAt(t);e[t]=i>255?32:i}return e.buffer}function Pxe(n){return mh(n.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Rxe(n,e,t){const r={min:new Array(n.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(n.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+t;i++)for(let a=0;a<n.itemSize;a++){let o;n.itemSize>4?o=n.array[i*n.itemSize+a]:a===0?o=n.getX(i):a===1?o=n.getY(i):a===2?o=n.getZ(i):a===3&&(o=n.getW(i)),r.min[a]=Math.min(r.min[a],o),r.max[a]=Math.max(r.max[a],o)}return r}function X9(n){return Math.ceil(n/4)*4}function Tw(n,e=0){const t=X9(n.byteLength);if(t!==n.byteLength){const r=new Uint8Array(t);if(r.set(new Uint8Array(n)),e!==0)for(let i=n.byteLength;i<t;i++)r[i]=e;return r.buffer}return n}let CB=null;class Lxe{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,r){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const i=this,a=i.buffers,o=i.json;r=i.options;const s=i.extensionsUsed,l=new Blob(a,{type:"application/octet-stream"}),u=Object.keys(s);if(u.length>0&&(o.extensionsUsed=u),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=l.size),r.binary===!0){const d=new window.FileReader;d.readAsArrayBuffer(l),d.onloadend=function(){const h=Tw(d.result),f=new DataView(new ArrayBuffer(EB));f.setUint32(0,h.byteLength,!0),f.setUint32(4,Txe,!0);const m=Tw(bxe(JSON.stringify(o)),32),g=new DataView(new ArrayBuffer(EB));g.setUint32(0,m.byteLength,!0),g.setUint32(4,Fxe,!0);const _=new ArrayBuffer(yB),E=new DataView(_);E.setUint32(0,Vxe,!0),E.setUint32(4,Dxe,!0);const x=yB+g.byteLength+m.byteLength+f.byteLength+h.byteLength;E.setUint32(8,x,!0);const v=new Blob([_,g,m,f,h],{type:"application/octet-stream"}),C=new window.FileReader;C.readAsArrayBuffer(v),C.onloadend=function(){t(C.result)}}}else if(o.buffers&&o.buffers.length>0){const d=new window.FileReader;d.readAsDataURL(l),d.onloadend=function(){const h=d.result;o.buffers[0].uri=h,t(o)}}else t(o)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const r=this.options,i=this.extensionsUsed;try{const a=JSON.parse(JSON.stringify(e.userData));if(r.includeCustomExtensions&&a.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const o in a.gltfExtensions)t.extensions[o]=a.gltfExtensions[o],i[o]=!0;delete a.gltfExtensions}Object.keys(a).length>0&&(t.extras=a)}catch(a){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+a.message)}}getUID(e){return this.uids.has(e)||this.uids.set(e,this.uid++),this.uids.get(e)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const r=new Se;for(let i=0,a=e.count;i<a;i++)if(Math.abs(r.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const r=e.clone(),i=new Se;for(let a=0,o=r.count;a<o;a++)i.fromBufferAttribute(r,a),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),r.setXYZ(a,i.x,i.y,i.z);return t.attributesNormalized.set(e,r),r}applyTextureTransform(e,t){let r=!1;const i={};(t.offset.x!==0||t.offset.y!==0)&&(i.offset=t.offset.toArray(),r=!0),t.rotation!==0&&(i.rotation=t.rotation,r=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(i.scale=t.repeat.toArray(),r=!0),r&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const r=e==null?void 0:e.image,i=t==null?void 0:t.image,a=Math.max((r==null?void 0:r.width)||0,(i==null?void 0:i.width)||0),o=Math.max((r==null?void 0:r.height)||0,(i==null?void 0:i.height)||0),s=document.createElement("canvas");s.width=a,s.height=o;const l=s.getContext("2d");l.fillStyle="#00ffff",l.fillRect(0,0,a,o);const u=l.getImageData(0,0,a,o);if(r){l.drawImage(r,0,0,a,o);const f=l.getImageData(0,0,a,o).data;for(let m=2;m<f.length;m+=4)u.data[m]=f[m]}if(i){l.drawImage(i,0,0,a,o);const f=l.getImageData(0,0,a,o).data;for(let m=1;m<f.length;m+=4)u.data[m]=f[m]}l.putImageData(u,0,0);const h=(e||t).clone();return h.source=new qr(s).source,h}processBuffer(e){const t=this.json,r=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),r.push(e),0}processBufferView(e,t,r,i,a){const o=this.json;o.bufferViews||(o.bufferViews=[]);let s;t===_0.UNSIGNED_BYTE?s=1:t===_0.UNSIGNED_SHORT?s=2:s=4;const l=X9(i*e.itemSize*s),u=new DataView(new ArrayBuffer(l));let d=0;for(let m=r;m<r+i;m++)for(let g=0;g<e.itemSize;g++){let _;e.itemSize>4?_=e.array[m*e.itemSize+g]:g===0?_=e.getX(m):g===1?_=e.getY(m):g===2?_=e.getZ(m):g===3&&(_=e.getW(m)),t===_0.FLOAT?u.setFloat32(d,_,!0):t===_0.UNSIGNED_INT?u.setUint32(d,_,!0):t===_0.UNSIGNED_SHORT?u.setUint16(d,_,!0):t===_0.UNSIGNED_BYTE&&u.setUint8(d,_),d+=s}const h={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:l};return a!==void 0&&(h.target=a),a===_0.ARRAY_BUFFER&&(h.byteStride=e.itemSize*s),this.byteOffset+=l,o.bufferViews.push(h),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,r=t.json;return r.bufferViews||(r.bufferViews=[]),new Promise(function(i){const a=new window.FileReader;a.readAsArrayBuffer(e),a.onloadend=function(){const o=Tw(a.result),s={buffer:t.processBuffer(o),byteOffset:t.byteOffset,byteLength:o.byteLength};t.byteOffset+=o.byteLength,i(r.bufferViews.push(s)-1)}})}processAccessor(e,t,r,i){const a=this.options,o=this.json,s={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};let l;if(e.array.constructor===Float32Array)l=_0.FLOAT;else if(e.array.constructor===Uint32Array)l=_0.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)l=_0.UNSIGNED_SHORT;else if(e.array.constructor===Uint8Array)l=_0.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(r===void 0&&(r=0),i===void 0&&(i=e.count),a.truncateDrawRange&&t!==void 0&&t.index===null){const m=r+i,g=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;r=Math.max(r,t.drawRange.start),i=Math.min(m,g)-r,i<0&&(i=0)}if(i===0)return null;const u=Rxe(e,r,i);let d;t!==void 0&&(d=e===t.index?_0.ELEMENT_ARRAY_BUFFER:_0.ARRAY_BUFFER);const h=this.processBufferView(e,l,r,i,d),f={bufferView:h.id,byteOffset:h.byteOffset,componentType:l,count:i,max:u.max,min:u.min,type:s[e.itemSize]};return e.normalized===!0&&(f.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(f)-1}processImage(e,t,r,i="image/png"){const a=this,o=a.cache,s=a.json,l=a.options,u=a.pending;o.images.has(e)||o.images.set(e,{});const d=o.images.get(e),h=i+":flipY/"+r.toString();if(d[h]!==void 0)return d[h];s.images||(s.images=[]);const f={mimeType:i};if(l.embedImages){const g=CB=CB||document.createElement("canvas");g.width=Math.min(e.width,l.maxTextureSize),g.height=Math.min(e.height,l.maxTextureSize);const _=g.getContext("2d");if(r===!0&&(_.translate(0,g.height),_.scale(1,-1)),typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&e instanceof ImageBitmap)_.drawImage(e,0,0,g.width,g.height);else{t!==Qi&&console.error("GLTFExporter: Only RGBAFormat is supported."),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const E=new Uint8ClampedArray(e.height*e.width*4);for(let x=0;x<E.length;x+=4)E[x+0]=e.data[x+0],E[x+1]=e.data[x+1],E[x+2]=e.data[x+2],E[x+3]=e.data[x+3];_.putImageData(new ImageData(E,e.width,e.height),0,0)}l.binary===!0?u.push(new Promise(function(E){g.toBlob(function(x){a.processBufferViewImage(x).then(function(v){f.bufferView=v,E()})},i)})):f.uri=g.toDataURL(i)}else f.uri=e.src;const m=s.images.push(f)-1;return d[h]=m,m}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const r={magFilter:Fa[e.magFilter],minFilter:Fa[e.minFilter],wrapS:Fa[e.wrapS],wrapT:Fa[e.wrapT]};return t.samplers.push(r)-1}processTexture(e){const t=this.cache,r=this.json;if(t.textures.has(e))return t.textures.get(e);r.textures||(r.textures=[]);let i=e.userData.mimeType;i==="image/webp"&&(i="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,i)};e.name&&(a.name=e.name),this._invokeAll(function(s){s.writeTexture&&s.writeTexture(e,a)});const o=r.textures.push(a)-1;return t.textures.set(e,o),o}processMaterial(e){const t=this.cache,r=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;r.materials||(r.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const a=e.color.toArray().concat([e.opacity]);if(mh(a,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=a),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const s=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),l={index:this.processTexture(s)};this.applyTextureTransform(l,s),i.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const s={index:this.processTexture(e.map)};this.applyTextureTransform(s,e.map),i.pbrMetallicRoughness.baseColorTexture=s}if(e.emissive){const s=e.emissive.clone().multiplyScalar(e.emissiveIntensity),l=Math.max(s.r,s.g,s.b);if(l>1&&(s.multiplyScalar(1/l),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),l>0&&(i.emissiveFactor=s.toArray()),e.emissiveMap){const u={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(u,e.emissiveMap),i.emissiveTexture=u}}if(e.normalMap){const s={index:this.processTexture(e.normalMap)};e.normalScale&&e.normalScale.x!==1&&(s.scale=e.normalScale.x),this.applyTextureTransform(s,e.normalMap),i.normalTexture=s}if(e.aoMap){const s={index:this.processTexture(e.aoMap),texCoord:1};e.aoMapIntensity!==1&&(s.strength=e.aoMapIntensity),this.applyTextureTransform(s,e.aoMap),i.occlusionTexture=s}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===Uu&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(s){s.writeMaterial&&s.writeMaterial(e,i)});const o=r.materials.push(i)-1;return t.materials.set(e,o),o}processMesh(e){const t=this.cache,r=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let C=0,V=e.material.length;C<V;C++)i.push(e.material[C].uuid);else i.push(e.material.uuid);const a=i.join(":");if(t.meshes.has(a))return t.meshes.get(a);const o=e.geometry;let s;if(e.isLineSegments?s=_0.LINES:e.isLineLoop?s=_0.LINE_LOOP:e.isLine?s=_0.LINE_STRIP:e.isPoints?s=_0.POINTS:s=e.material.wireframe?_0.LINES:_0.TRIANGLES,o.isBufferGeometry!==!0)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");const l={},u={},d=[],h=[],f={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},m=o.getAttribute("normal");m!==void 0&&!this.isNormalizedNormalAttribute(m)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(m)));let g=null;for(let C in o.attributes){if(C.slice(0,5)==="morph")continue;const V=o.attributes[C];if(C=f[C]||C.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(C)||(C="_"+C),t.attributes.has(this.getUID(V))){u[C]=t.attributes.get(this.getUID(V));continue}g=null;const H=V.array;C==="JOINTS_0"&&!(H instanceof Uint16Array)&&!(H instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),g=new v0(new Uint16Array(H),V.itemSize,V.normalized));const R=this.processAccessor(g||V,o);R!==null&&(u[C]=R,t.attributes.set(this.getUID(V),R))}if(m!==void 0&&o.setAttribute("normal",m),Object.keys(u).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const C=[],V=[],D={};if(e.morphTargetDictionary!==void 0)for(const H in e.morphTargetDictionary)D[e.morphTargetDictionary[H]]=H;for(let H=0;H<e.morphTargetInfluences.length;++H){const R={};let j=!1;for(const te in o.morphAttributes){if(te!=="position"&&te!=="normal"){j||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),j=!0);continue}const $=o.morphAttributes[te][H],z=te.toUpperCase(),I=o.attributes[te];if(t.attributes.has(this.getUID($))){R[z]=t.attributes.get(this.getUID($));continue}const q=$.clone();if(!o.morphTargetsRelative)for(let P=0,ee=$.count;P<ee;P++)q.setXYZ(P,$.getX(P)-I.getX(P),$.getY(P)-I.getY(P),$.getZ(P)-I.getZ(P));R[z]=this.processAccessor(q,o),t.attributes.set(this.getUID(I),R[z])}h.push(R),C.push(e.morphTargetInfluences[H]),e.morphTargetDictionary!==void 0&&V.push(D[H])}l.weights=C,V.length>0&&(l.extras={},l.extras.targetNames=V)}const _=Array.isArray(e.material);if(_&&o.groups.length===0)return null;const E=_?e.material:[e.material],x=_?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let C=0,V=x.length;C<V;C++){const D={mode:s,attributes:u};if(this.serializeUserData(o,D),h.length>0&&(D.targets=h),o.index!==null){let R=this.getUID(o.index);(x[C].start!==void 0||x[C].count!==void 0)&&(R+=":"+x[C].start+":"+x[C].count),t.attributes.has(R)?D.indices=t.attributes.get(R):(D.indices=this.processAccessor(o.index,o,x[C].start,x[C].count),t.attributes.set(R,D.indices)),D.indices===null&&delete D.indices}const H=this.processMaterial(E[x[C].materialIndex]);H!==null&&(D.material=H),d.push(D)}l.primitives=d,r.meshes||(r.meshes=[]),this._invokeAll(function(C){C.writeMesh&&C.writeMesh(e,l)});const v=r.meshes.push(l)-1;return t.meshes.set(a,v),v}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const r=e.isOrthographicCamera,i={type:r?"orthographic":"perspective"};return r?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:L6.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){const r=this.json,i=this.nodeMap;r.animations||(r.animations=[]),e=xD.Utils.mergeMorphTargetTracks(e.clone(),t);const a=e.tracks,o=[],s=[];for(let l=0;l<a.length;++l){const u=a[l],d=Yn.parseTrackName(u.name);let h=Yn.findNode(t,d.nodeName);const f=wB[d.propertyName];if(d.objectName==="bones"&&(h.isSkinnedMesh===!0?h=h.skeleton.getBoneByName(d.objectIndex):h=void 0),!h||!f)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',u.name),null;const m=1;let g=u.values.length/u.times.length;f===wB.morphTargetInfluences&&(g/=h.morphTargetInfluences.length);let _;u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(_="CUBICSPLINE",g/=3):u.getInterpolation()===zh?_="STEP":_="LINEAR",s.push({input:this.processAccessor(new v0(u.times,m)),output:this.processAccessor(new v0(u.values,g)),interpolation:_}),o.push({sampler:s.length-1,target:{node:i.get(h),path:f}})}return r.animations.push({name:e.name||"clip_"+r.animations.length,samplers:s,channels:o}),r.animations.length-1}processSkin(e){const t=this.json,r=this.nodeMap,i=t.nodes[r.get(e)],a=e.skeleton;if(a===void 0)return null;const o=e.skeleton.bones[0];if(o===void 0)return null;const s=[],l=new Float32Array(a.bones.length*16),u=new un;for(let h=0;h<a.bones.length;++h)s.push(r.get(a.bones[h])),u.copy(a.boneInverses[h]),u.multiply(e.bindMatrix).toArray(l,h*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new v0(l,16)),joints:s,skeleton:r.get(o)}),i.skin=t.skins.length-1}processNode(e){const t=this.json,r=this.options,i=this.nodeMap;t.nodes||(t.nodes=[]);const a={};if(r.trs){const s=e.quaternion.toArray(),l=e.position.toArray(),u=e.scale.toArray();mh(s,[0,0,0,1])||(a.rotation=s),mh(l,[0,0,0])||(a.translation=l),mh(u,[1,1,1])||(a.scale=u)}else e.matrixAutoUpdate&&e.updateMatrix(),Pxe(e.matrix)===!1&&(a.matrix=e.matrix.elements);if(e.name!==""&&(a.name=String(e.name)),this.serializeUserData(e,a),e.isMesh||e.isLine||e.isPoints){const s=this.processMesh(e);s!==null&&(a.mesh=s)}else e.isCamera&&(a.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const s=[];for(let l=0,u=e.children.length;l<u;l++){const d=e.children[l];if(d.visible||r.onlyVisible===!1){const h=this.processNode(d);h!==null&&s.push(h)}}s.length>0&&(a.children=s)}this._invokeAll(function(s){s.writeNode&&s.writeNode(e,a)});const o=t.nodes.push(a)-1;return i.set(e,o),o}processScene(e){const t=this.json,r=this.options;t.scenes||(t.scenes=[],t.scene=0);const i={};e.name!==""&&(i.name=e.name),t.scenes.push(i);const a=[];for(let o=0,s=e.children.length;o<s;o++){const l=e.children[o];if(l.visible||r.onlyVisible===!1){const u=this.processNode(l);u!==null&&a.push(u)}}a.length>0&&(i.nodes=a),this.serializeUserData(e,i)}processObjects(e){const t=new qh;t.name="AuxScene";for(let r=0;r<e.length;r++)t.children.push(e[r]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});const r=[];for(let i=0;i<e.length;i++)e[i]instanceof qh?this.processScene(e[i]):r.push(e[i]);r.length>0&&this.processObjects(r);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let t=0,r=this.plugins.length;t<r;t++)e(this.plugins[t])}}class Bxe{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const r=this.writer,i=r.json,a=r.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,o.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),a[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},a[this.name]=!0);const s=i.extensions[this.name].lights;s.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:s.length-1}}}class Mxe{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class Ixe{constructor(e){this.writer=e,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(e,t){if(!e.isGLTFSpecularGlossinessMaterial)return;const r=this.writer,i=r.extensionsUsed,a={};t.pbrMetallicRoughness.baseColorFactor&&(a.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);const o=[1,1,1];if(e.specular.toArray(o,0),a.specularFactor=o,a.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(a.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){const s={index:r.processTexture(e.specularMap)};r.applyTextureTransform(s,e.specularMap),a.specularGlossinessTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=a,i[this.name]=!0}}class Oxe{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;const r=this.writer,i=r.extensionsUsed,a={};if(a.clearcoatFactor=e.clearcoat,e.clearcoatMap){const o={index:r.processTexture(e.clearcoatMap)};r.applyTextureTransform(o,e.clearcoatMap),a.clearcoatTexture=o}if(a.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const o={index:r.processTexture(e.clearcoatRoughnessMap)};r.applyTextureTransform(o,e.clearcoatRoughnessMap),a.clearcoatRoughnessTexture=o}if(e.clearcoatNormalMap){const o={index:r.processTexture(e.clearcoatNormalMap)};r.applyTextureTransform(o,e.clearcoatNormalMap),a.clearcoatNormalTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=a,i[this.name]=!0}}class kxe{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,a={};if(a.transmissionFactor=e.transmission,e.transmissionMap){const o={index:r.processTexture(e.transmissionMap)};r.applyTextureTransform(o,e.transmissionMap),a.transmissionTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=a,i[this.name]=!0}}class Nxe{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,a={};if(a.thicknessFactor=e.thickness,e.thicknessMap){const o={index:r.processTexture(e.thicknessMap)};r.applyTextureTransform(o,e.thicknessMap),a.thicknessTexture=o}a.attenuationDistance=e.attenuationDistance,a.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=a,i[this.name]=!0}}xD.Utils={insertKeyframe:function(n,e){const r=n.getValueSize(),i=new n.TimeBufferType(n.times.length+1),a=new n.ValueBufferType(n.values.length+r),o=n.createInterpolant(new n.ValueBufferType(r));let s;if(n.times.length===0){i[0]=e;for(let l=0;l<r;l++)a[l]=0;s=0}else if(e<n.times[0]){if(Math.abs(n.times[0]-e)<.001)return 0;i[0]=e,i.set(n.times,1),a.set(o.evaluate(e),0),a.set(n.values,r),s=0}else if(e>n.times[n.times.length-1]){if(Math.abs(n.times[n.times.length-1]-e)<.001)return n.times.length-1;i[i.length-1]=e,i.set(n.times,0),a.set(n.values,0),a.set(o.evaluate(e),n.values.length),s=i.length-1}else for(let l=0;l<n.times.length;l++){if(Math.abs(n.times[l]-e)<.001)return l;if(n.times[l]<e&&n.times[l+1]>e){i.set(n.times.slice(0,l+1),0),i[l+1]=e,i.set(n.times.slice(l+1),l+2),a.set(n.values.slice(0,(l+1)*r),0),a.set(o.evaluate(e),(l+1)*r),a.set(n.values.slice((l+1)*r),(l+2)*r),s=l+1;break}}return n.times=i,n.values=a,s},mergeMorphTargetTracks:function(n,e){const t=[],r={},i=n.tracks;for(let a=0;a<i.length;++a){let o=i[a];const s=Yn.parseTrackName(o.name),l=Yn.findNode(e,s.nodeName);if(s.propertyName!=="morphTargetInfluences"||s.propertyIndex===void 0){t.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(Wh)}const u=l.morphTargetInfluences.length,d=l.morphTargetDictionary[s.propertyIndex];if(d===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+s.propertyIndex);let h;if(r[l.uuid]===void 0){h=o.clone();const m=new h.ValueBufferType(u*h.times.length);for(let g=0;g<h.times.length;g++)m[g*u+d]=h.values[g];h.name=(s.nodeName||"")+".morphTargetInfluences",h.values=m,r[l.uuid]=h,t.push(h);continue}const f=o.createInterpolant(new o.ValueBufferType(1));h=r[l.uuid];for(let m=0;m<h.times.length;m++)h.values[m*u+d]=f.evaluate(h.times[m]);for(let m=0;m<o.times.length;m++){const g=this.insertKeyframe(h,o.times[m]);h.values[g*u+d]=o.values[m]}}return n.tracks=t,n}};class Uxe{createClip(e){const t=this._createTracks(e),r=this._framesToSeconds(e.totalFrames);return new Ay("MTNX",r,t)}_createTracks(e){const t=[];for(let r=0;r<e.tracks.length;r++){const i=this._createTrack(e.tracks[r]);i&&t.push(i)}return this._adjustTrackOrder(t),t}_createTrack(e){const t=W9;switch(e.type){case t.Transform:return this._createTransformTrack(e);case t.Rotation:return this._createRotationTrack(e);case t.Scale:return this._createScaleTrack(e)}console.warn(`Unsupported track type ${At(e.type)}`)}_createTransformTrack(e){const t=this._createTransformTrackName(e),r=this._createKeyframeSecsArr(e.keyframes),i=this._createTransformTrackData(e);return new Bu(t,r,i)}_createTransformTrackName(e){const t=this._getObjNameFromIndex(e.objIndex),r=this._getDimensionProperty(e.dimension);return`${t}.position[${r}]`}_createTransformTrackData(e){const t=[];for(const r in e.keyframes){const i=e.keyframes[r].value1;t.push(i)}return t}_createRotationTrack(e){const t=this._createRotationTrackName(e),r=this._createKeyframeSecsArr(e.keyframes),i=this._createRotationTrackData(e);return new Bu(t,r,i)}_createRotationTrackName(e){const t=this._getObjNameFromIndex(e.objIndex),r=this._getDimensionProperty(e.dimension);return`${t}.rotation[${r}]`}_createRotationTrackData(e){const t=[];for(const r in e.keyframes){const i=e.keyframes[r].value1,a=G1(i);t.push(a)}return t}_createQuaternion(e,t){const r=new Si,i=G1(t),a=j4;switch(e){case a.X:r.setFromAxisAngle(new Se(1,0,0),i);break;case a.Y:r.setFromAxisAngle(new Se(0,1,0),i);break;case a.Z:r.setFromAxisAngle(new Se(0,0,1),i);break;default:console.warn(`Didn't set quaternion value for ${At(e)}`)}return r}_createScaleTrack(e){const t=this._createScaleTrackName(e),r=this._createKeyframeSecsArr(e.keyframes),i=this._createScaleTrackData(e);return new Bu(t,r,i)}_createScaleTrackName(e){const t=this._getObjNameFromIndex(e.objIndex),r=this._getDimensionProperty(e.dimension);return`${t}.scale[${r}]`}_createScaleTrackData(e){const t=[];for(const r in e.keyframes){const i=e.keyframes[r].value1;t.push(i)}return t}_createKeyframeSecsArr(e){const t=[];for(const r in e)t.push(this._framesToSeconds(parseInt(r)));return t}_getDimensionProperty(e){const t=j4;switch(e){case t.X:return"x";case t.Y:return"y";case t.Z:return"z"}throw new Error(`Unknown dimension ${At(e)}`)}_getObjNameFromIndex(e){let t=-1;const r=this.form.OBJ1[0].parsed.objects;for(let i=0;i<r.length;i++)if(r[i].objType===61&&(t++,t===e))return At(r[i].globalIndex);return console.warn(`Couldn't find associated object ${e} for track`),At(e)}_framesToSeconds(e){return e/60}_adjustTrackOrder(e){}}var co={exports:{}};(function(n,e){(function(t,r){r()})(RA,function(){function t(u,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,d,h){var f=new XMLHttpRequest;f.open("GET",u),f.responseType="blob",f.onload=function(){l(f.response,d,h)},f.onerror=function(){console.error("could not download file")},f.send()}function i(u){var d=new XMLHttpRequest;d.open("HEAD",u,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function a(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(u,d,h){var f=o.URL||o.webkitURL,m=document.createElement("a");d=d||u.name||"download",m.download=d,m.rel="noopener",typeof u=="string"?(m.href=u,m.origin===location.origin?a(m):i(m.href)?r(u,d,h):a(m,m.target="_blank")):(m.href=f.createObjectURL(u),setTimeout(function(){f.revokeObjectURL(m.href)},4e4),setTimeout(function(){a(m)},0))}:"msSaveOrOpenBlob"in navigator?function(u,d,h){if(d=d||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(t(u,h),d);else if(i(u))r(u,d,h);else{var f=document.createElement("a");f.href=u,f.target="_blank",setTimeout(function(){a(f)})}}:function(u,d,h,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof u=="string")return r(u,d,h);var m=u.type==="application/octet-stream",g=/constructor/i.test(o.HTMLElement)||o.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||m&&g||s)&&typeof FileReader<"u"){var E=new FileReader;E.onloadend=function(){var C=E.result;C=_?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=C:location=C,f=null},E.readAsDataURL(u)}else{var x=o.URL||o.webkitURL,v=x.createObjectURL(u);f?f.location=v:location.href=v,f=null,setTimeout(function(){x.revokeObjectURL(v)},4e4)}});o.saveAs=l.saveAs=l,n.exports=l})})(co);const jxe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEDBCArhrzjSQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAA3klEQVQ4y9WSPWpCURSEv5GHpLFKaxPEUkhtmSaNYrAVwS1YuIS0LiHapBbFFbgBwUayg0C2kOfYXOF69T0kTfBUhzPDnJ858N+hIsD2EBgBObAHxpIOKS8rEW8ALyGvFTWrlAj8RvlBUn6NlCVjV4H30K0dQU+2p6G+kLShZPe+i2N+cUTbfeAR+Dop2+4Cq4S7ltQNeB3oADm2d0F9lkwyiDovbVci7PUEZMEmgDOLJH3afgDeJPXSTW9xAeAD6JURYhdatifX/LadlprxEbfA819fOQN+gO94r/uKI0KFfwl0bVcYAAAAAElFTkSuQmCC";class Gxe extends Ne.exports.Component{constructor(e){super(e),this.modelToolbar=null,this.onModelSelected=r=>{const i=r.match(/^(\d+)\/(\d+)/);if(!i)throw new Error(`Could not parse selected model string ${this.state.selectedModel}`);const[,a,o]=i;this.setState({selectedModel:r,selectedModelDir:a,selectedModelFile:o,selectedAnim:"",selectedAnimDir:null,selectedAnimFile:null})},this.onAnimSelected=r=>{if(!r){this.setState({selectedAnim:"",selectedAnimDir:null,selectedAnimFile:null});return}const i=r.match(/^(\d+)\/(\d+)/);if(!i)throw new Error(`Error parsing anim string ${r}`);const[,a,o]=i;this.setState({selectedAnim:r,selectedAnimDir:a,selectedAnimFile:o})},this.onBgColorChange=r=>{this.setState({bgColor:r})},this.onFeatureChange=r=>{this.setState(r)},this.onKeyDown=r=>{if(r.key&&this.modelToolbar){const i=r.key.toLowerCase();i==="m"?this.modelToolbar.focusModelSelect():i==="a"&&this.modelToolbar.focusAnimSelect()}},this.state={selectedModel:"",selectedModelDir:null,selectedModelFile:null,selectedAnim:"",selectedAnimDir:null,selectedAnimFile:null,bgColor:0,showTextures:!0,showWireframe:!1,showVertexNormals:!1,useCamera:!1};const t=dt.getDirectoryCount();for(let r=2;r<t;r++){const i=dt.getFileCount(r);for(let a=0;a<i;a++){const o=dt.get(r,a);if(Or.isForm(o)){const s=r+"/"+a;this.state.selectedModel=s,this.state.selectedModelDir=r,this.state.selectedModelFile=a;return}}}}render(){return Xe("div",{className:"modelViewerContainer",tabIndex:-1,onKeyDownCapture:this.onKeyDown,children:[L(zxe,{ref:e=>{this.modelToolbar=e},selectedModel:this.state.selectedModel,onModelSelected:this.onModelSelected,selectedModelDir:this.state.selectedModelDir,selectedModelFile:this.state.selectedModelFile,selectedAnim:this.state.selectedAnim,onAnimSelected:this.onAnimSelected,selectedAnimDir:this.state.selectedAnimDir,selectedAnimFile:this.state.selectedAnimFile,bgColor:this.state.bgColor,onBgColorChange:this.onBgColorChange,showTextures:this.state.showTextures,showWireframe:this.state.showWireframe,showVertexNormals:this.state.showVertexNormals,useCamera:this.state.useCamera,onFeatureChange:this.onFeatureChange}),L(Hxe,{selectedModelDir:this.state.selectedModelDir,selectedModelFile:this.state.selectedModelFile,selectedAnimDir:this.state.selectedAnimDir,selectedAnimFile:this.state.selectedAnimFile,bgColor:this.state.bgColor,showTextures:this.state.showTextures,showWireframe:this.state.showWireframe,showVertexNormals:this.state.showVertexNormals,useCamera:this.state.useCamera})]})}}let uu=null,vg=null,_1=null,Gl=null,wa=null,VB=null,x1=null,du=null;class Hxe extends Ne.exports.Component{constructor(){super(...arguments),this.__container=null,this.state={hasError:!1},this.onWindowResize=()=>{if(wa&&_1){const e=this.__container,t=e.offsetHeight,r=e.offsetWidth;_1.aspect=r/t,_1.updateProjectionMatrix(),wa.setSize(r,t)}}}render(){return this.state.hasError?L("p",{children:"An error occurred during rendering, see the browser console."}):L("div",{className:"modelRenderContainer",style:{backgroundColor:"#"+wu(At(this.props.bgColor,""),6,"0")},ref:e=>this.__container=e})}componentDidCatch(e,t){this.setState({hasError:!0}),console.error(e,t)}componentDidMount(){try{window.addEventListener("resize",this.onWindowResize),uu=this,this.initModel()}catch(e){console.error(e)}}componentWillUnmount(){try{window.removeEventListener("resize",this.onWindowResize),uu=null,this.clearViewer()}catch(e){console.error(e)}}componentDidUpdate(){try{this.clearViewer(),this.initModel()}catch(e){console.error(e)}}clearViewer(){this.disposeTHREERenderer(),this.disposeTHREEObj(Gl),Gl=null,du&&(du.stopAllAction(),du=null),x1&&(x1.stop(),x1=null),vg!==null&&(clearTimeout(vg),vg=null)}disposeTHREERenderer(){if(!wa)return;wa.dispose(),wa.forceContextLoss();const e=this.__container;e&&(e.innerHTML=""),wa.domElement=void 0,wa=null}disposeTHREEObj(e){if(!!e){for(let t=0;t<e.children.length;t++)this.disposeTHREEObj(e.children[t]);if(e.geometry&&(e.geometry.dispose(),e.geometry=void 0),e.material){let t;e.material instanceof Array&&(t=e.material),t?t.forEach(function(r){r.map&&r.map.dispose(),r.lightMap&&r.lightMap.dispose(),r.bumpMap&&r.bumpMap.dispose(),r.normalMap&&r.normalMap.dispose(),r.specularMap&&r.specularMap.dispose(),r.envMap&&r.envMap.dispose(),r.dispose()}):(e.material.map&&e.material.map.dispose(),e.material.lightMap&&e.material.lightMap.dispose(),e.material.bumpMap&&e.material.bumpMap.dispose(),e.material.normalMap&&e.material.normalMap.dispose(),e.material.specularMap&&e.material.specularMap.dispose(),e.material.envMap&&e.material.envMap.dispose(),e.material.dispose())}}}initModel(){if(this.props.selectedModelDir===null)return;const[e,t]=[this.props.selectedModelDir,this.props.selectedModelFile],r=this.__container,i=r.offsetHeight,a=r.offsetWidth;wt(`Rendering model ${e}/${t}`);const o=Or.unpack(dt.get(e,t));wt("form",o);const s=new z9;s.bgColor=this.props.bgColor,s.showTextures=this.props.showTextures,s.showWireframe=this.props.showWireframe,s.showVertexNormals=this.props.showVertexNormals,s.useFormCamera=this.props.useCamera,s.createModel(o).then(l=>{if(Gl=new qh,Gl.background=new Jt(this.props.bgColor),Gl.add(l),wt("Scene",Gl),this.props.selectedAnimDir!==null){const[u,d]=[this.props.selectedAnimDir,this.props.selectedAnimFile],h=Ou.unpack(dt.get(u,d));wt("mtnx",h);const f=new Uxe;f.form=o;const m=f.createClip(h);wt("mtnxClip",m),du=new CI(Gl),du.clipAction(m).play(),x1=new bZ}wa=new f0({antialias:!0}),wa.setSize(a,i),r.appendChild(wa.domElement),_1=s.createCamera(o,a,i),VB=new Cxe(_1,wa.domElement),this.animate()})}renderModel(){wa.render(Gl,_1)}animate(){if(!(!uu||!wa)){if(VB.update(),x1){const e=x1.getDelta();du&&du.update(e)}uu.renderModel(),lr(z0.limitModelFPS)?vg=setTimeout(function(){uu&&requestAnimationFrame(uu.animate)},1e3/30):requestAnimationFrame(uu.animate)}}}class zxe extends Ne.exports.Component{constructor(){super(...arguments),this.animSelect=null,this.modelSelect=null,this.state={},this.focusModelSelect=()=>{this.modelSelect&&this.modelSelect.focus()},this.focusAnimSelect=()=>{this.animSelect&&this.animSelect.focus()}}render(){return Xe("div",{className:"modelViewerToolbar",children:[L(Wxe,{ref:e=>{this.modelSelect=e},selectedModel:this.props.selectedModel,onModelSelected:this.props.onModelSelected}),L(Xxe,{ref:e=>{this.animSelect=e},selectedAnim:this.props.selectedAnim,selectedModelDir:this.props.selectedModelDir,onAnimSelected:this.props.onAnimSelected}),L(Kxe,{selectedColor:this.props.bgColor,onColorChange:this.props.onBgColorChange}),L(Yxe,{showTextures:this.props.showTextures,showWireframe:this.props.showWireframe,showVertexNormals:this.props.showVertexNormals,useCamera:this.props.useCamera,onFeatureChange:this.props.onFeatureChange}),L("div",{className:"modelViewerToolbarSpacer"}),L(qxe,{selectedModelDir:this.props.selectedModelDir,selectedModelFile:this.props.selectedModelFile,selectedAnimDir:this.props.selectedAnimDir,selectedAnimFile:this.props.selectedAnimFile})]})}}class Wxe extends Ne.exports.Component{constructor(){super(...arguments),this.selectEl=null,this.state={},this.focus=()=>{this.selectEl&&this.selectEl.focus()},this.modelSelected=e=>{this.props.onModelSelected&&this.props.onModelSelected(e.target.value)}}render(){const t=this.getModelEntries().map(r=>{const[i,a]=r,o=i+"/"+a,s="0x"+wu(At(i,""),4,"0")+"/"+wu(At(a,""),4,"0");return L("option",{value:o,title:s,children:o},o)});return Xe("div",{className:"modelSelectContainer",children:["Model:",L("select",{ref:r=>{this.selectEl=r},value:this.props.selectedModel,onChange:this.modelSelected,children:t})]})}getModelEntries(){const e=[],t=dt.getDirectoryCount();for(let r=0;r<t;r++){const i=dt.getFileCount(r);for(let a=0;a<i;a++){const o=dt.get(r,a);if(Or.isForm(o))try{e.push([r,a])}catch(s){console.error(`Could not parse FORM ${r}/${a}`,s)}}}return e}}class Xxe extends Ne.exports.Component{constructor(){super(...arguments),this.selectEl=null,this.state={},this.focus=()=>{this.selectEl&&this.selectEl.focus()},this.animSelected=e=>{this.props.onAnimSelected&&this.props.onAnimSelected(e.target.value)}}render(){const t=this.getAnimEntries().map(r=>L("option",{value:r,children:r},r));return t.unshift(L("option",{value:""},"")),Xe("div",{className:"modelSelectContainer",children:["Animation:",L("select",{ref:r=>{this.selectEl=r},value:this.props.selectedAnim,onChange:this.animSelected,children:t})]})}getAnimEntries(){let e=[];if(this.props.selectedModelDir===null)return e;if(lr(z0.limitModelAnimations))return this.getAnimationsInDir(this.props.selectedModelDir);{const t=dt.getDirectoryCount();for(let r=0;r<t;r++)e=e.concat(this.getAnimationsInDir(r));return e}}getAnimationsInDir(e){const t=[],r=dt.getFileCount(e);for(let i=0;i<r;i++){const a=dt.get(e,i);if(Ou.isMtnx(a)){const o=e+"/"+i;try{t.push(o)}catch(s){console.error(`Could not parse MTNX ${e}/${i}`,s)}}}return t}}class Kxe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onColorChange=(e,t)=>{this.setState({color:e}),this.props.onColorChange(e)}}render(){let e;return G0()&&(e=L(ko,{id:13035519,allowDeselect:!1,onToggled:this.onColorChange,pressed:this.props.selectedColor===13035519,children:L("span",{className:"colorSwatch",title:"Change background to MP3 motion test (0xC6E7FF)",style:{backgroundColor:"#C6E7FF"}})},2)),Xe("div",{className:"modelViewerColorPicker",children:[L(ko,{id:0,allowDeselect:!1,onToggled:this.onColorChange,pressed:this.props.selectedColor===0,children:L("span",{className:"colorSwatch",title:"Change background to black",style:{backgroundColor:"#000000"}})},0),L(ko,{id:16777215,allowDeselect:!1,onToggled:this.onColorChange,pressed:this.props.selectedColor===16777215,children:L("span",{className:"colorSwatch",title:"Change background to white",style:{backgroundColor:"#FFFFFF"}})},1),e]})}}class Yxe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onShowTextureChange=e=>{const t=e.target.checked;!t&&!this.props.showWireframe?this.props.onFeatureChange({showTextures:t,showWireframe:!0}):this.props.onFeatureChange({showTextures:t})},this.onShowWireframeChange=e=>{const t=e.target.checked;!t&&!this.props.showTextures?this.props.onFeatureChange({showTextures:!0,showWireframe:t}):this.props.onFeatureChange({showWireframe:t})},this.onShowNormalsChange=e=>{const t=e.target.checked;this.props.onFeatureChange({showVertexNormals:t})},this.onUseCameraChange=e=>{const t=e.target.checked;this.props.onFeatureChange({useCamera:t})}}render(){let e;return lr(z0.uiAdvanced)&&(e=[Xe("label",{children:[L("input",{type:"checkbox",checked:this.props.showVertexNormals,onChange:this.onShowNormalsChange}),"Vertex Normals"]},"modelFeatureSelectShowVertexNormals")]),Xe("div",{className:"modelFeatureSelectContainer",children:[Xe("label",{children:[L("input",{type:"checkbox",checked:this.props.showTextures,onChange:this.onShowTextureChange}),"Textures"]},"modelFeatureSelectShowTextures"),Xe("label",{children:[L("input",{type:"checkbox",checked:this.props.showWireframe,onChange:this.onShowWireframeChange}),"Wireframe"]},"modelFeatureSelectShowWireframe"),Xe("label",{title:"Use the camera defined by the model",children:[L("input",{type:"checkbox",checked:this.props.useCamera,onChange:this.onUseCameraChange}),"Camera"]},"modelFeatureSelectUseCamera"),e]})}}class qxe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.export=async()=>{const[e,t]=[this.props.selectedModelDir,this.props.selectedModelFile],r=Or.unpack(dt.get(e,t)),a=await new z9().createModel(r);wt("Exporting Three model object",a);const o=!!lr(z0.modelUseGLB),s={binary:o},u=await new xD().parseAsync(a,s);o?co.exports.saveAs(new Blob([u]),`model-${e}-${t}.glb`):co.exports.saveAs(new Blob([JSON.stringify(u)]),`model-${e}-${t}.gltf`)}}render(){let e;return this.props.selectedAnimDir!==null&&(e="Export current model and animation to a glTF model file"),e="Export current model to a glTF model file",Xe(rr,{onClick:this.export,css:"btnModelExport",title:e,children:[L("img",{src:jxe,height:"16",width:"16",alt:""}),"glTF"]})}}function Qxe(){return Hn(w8)}function Jxe(){const n=Qxe();return Ne.exports.useMemo(()=>{const e=[];for(const t in n){const r=n[t];r.custom&&e.push(Sc(r))}return e},[n])}const Zxe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAaCAYAAACtv5zzAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4wEeAhkYWkovsAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAFXSURBVEjH7ZY/isJAFIe/iUNs7GyHVBrIBfQAnsTKZg4gaC9eQLGzELYQKzvPYGtnp7UQkCCKeVtlN5GVTVa3yw+GyRsmv483f3gDD5L36CPxUyKS8QfYbrcMh0N2ux1FFQQBm80GQAHotPn5fGY6nRJFEYvFgnq9XhjgeV4mTmcg4/GYfr+PMQYA13UBuF6vuK771SdKx0EQsF6v8TyPw+HwlQEikjTxfV/u9/uPixrHsRhjMmPp2BjzOAcRwUmnE0URjuPwTr3XrQQAhGHIfD4nDMP/AVhr0Vpjrc01X+c1VkrR6XQYDAY0m03a7TaVSuX3H9P34PGcF1Gue1Ae0xJQAl7X6XTC9/3ngEajweVy+TNgMpkwGo2eA3q9HsvlsjAkjmOOxyPVapVWq/W86N9uN1arFbPZjP1+n7voa63pdrtYa6nVat8FP/2RPLpe3QelVMbzE+UdW2MGbKCcAAAAAElFTkSuQmCC",K9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiBQ0VISOZx0KOAAABA0lEQVQ4y52SMW7CMBiFPwMTbMnOATJ3bwcW5kpwic5sqFS9QsUtkHKEMrOzcAGD6M5g+hgSklh1nIq3/fL7/N4vGzxpqJ2a2mnoOwb+yJQnvvgpp5Q3pmxolxaSRtU0krQIGzPlcmqTU67MB3J1KS+cpgQcfeK6mgGP6J7Q55Us4tuzMdfmDrPOHWaFs1cS484uY//hLACf/ALvbPkGXnjmA+ixrBxVpYkkKQGQtALQSgJQIkma+JWOACTBMknDUQG2E7A+cMYBaRBIAcfZA4w4RRNORn5C0bEdON6HGrDRSjYMtCcEgIcq/SOhfut59OvN/yYcol8vdKq1LsHbL1rXrhtcbPgQjV6DLQAAAABJRU5ErkJggg==",$xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiBQ0VIylLJMkSAAAAvElEQVQ4y+2TsQ2CUBiEv2eIrkDJBDYMALVUlsZCSkdhDBpDaUfNDIYBmIHQmJCchYHkCSgUxsYr77/LveTuwQByVUmSKrnMgUJ1CIfXFQvxN3zF4FiV7dkCXk+cFAA3c53quNQYyulR+GoG8kb+ux1Fai15q+jT9M6W4TxnrUkvT4ZXI48YqEzaGwwXDkDG0ahnYzwg7dZfWBkb5cq1trji+UOcsUeZO7vfTyOQ5ibUiwJqQNlLu1NolcED/6PAXJfmH/wAAAAASUVORK5CYII=",eve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiBQ0WBh9uKzI1AAAAoklEQVQoz33NOw4BYRSG4RdDaFxWYBFaSp2E5diBxDok6ilUVBKJa2UTCgsQxKtxCfPPfN3J851zIBhrTj3aJYXLrlW92CsEuM6dJm0gohMluMGCM31gCMwS7EHVuRVHTiz8HXfvOwsr5iH/83tO6zOeuOYev9s7v0kcr7nN5k0WV7O5aMk4lcGBo08lyeBYX5UQgyt9VUJMBMQsWXLLGSo8AaQAqCS0C8xqAAAAAElFTkSuQmCC",tve="data:image/png;base64,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",nve="data:image/png;base64,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",rve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAIvXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7VhbluQqDvxnFbMEkBCC5YjXObODu/wJYWdWZnV13e65c+ar01VpJ2AMCikUclh//XuHf+HD1HLIorW0UiI+ueVGhosar891TjGf7+vHoy+9t4dnB6GJcebrZ1n3eEO7fNyg+W7v7+1Bxz1PvSe6Ox4Tsj+ZcHGPq/dETFd7un+Hdt9n+WU793+fd5tcp8+/s8IYUzAfU6DFiSO+qz+FsQJubOzX/s0+CG3Ggl/Gmelr24Xn5SfjPa8+2S7a3c7vpgix3APKJxvd7Um+tt2x0BtqH09+6xg19vj6ebHd3rPuva7dWS6wVAn3ph5bOVcYiEkyn9sKDsW/4FrP0XBUbHEAsQk0O44RUksEa++U00yWdlrnPNLAEjMtUpyJBizubZWVGo0DSvYjbVLAMwNXoDKAGjsiz7Wk89x2njfgtDPOhJGUMFnCHT8c4avG/+Z4TrS3u25KsT5thXWRew2W4cj5N0YBkLRvm8qx7znCi9/EF2AZCMoxc8UGLfZrii7pw7f44MwYJzGHeIVG0nlPABPh2YLFJAYCsSSWVFJUIk0JdqzAx7By4kwdCCQRmilsYMNcAE4lfzbu0XTGktDVDGoBEMKFFdAggABWzgL/0VzhQyYsOYhIEZUqTaxwyUVKKVqco0xZs4oWVa3a1CrXXKWWqrXWVq1RY1CYtNI0tNpaM8NDDVMb7jaMMOvUuecuvXTttbduA+4z8pBRho462rBJkyfCf5apYdbZpq204EorL1ll6aqrLdvwtc07b9ll6667bXuidqP6jlr6hNz3qKUbNUcsn3H6gRqaVR9TJKcTccyAGOUExNURgEOTYxZrypkcOccsNkJQCAG1JA7OTI4YEMwrkez0xO4DuW9xC5J/Czf6GXLBoftfIBccuhu5H3H7ArVpJ6PwAcij0G0aeYPYMGBVo2qek37tjBmvW3ZjXpZxFb4e2O7LbYOX1F94QPitlfxZ0Z8V/VnRnxX931fUbW7kMhD0lD6kG3Sibk9KRdLA30CmQgrTOHuNwrOFjITK0Va2PicEpuketXVte7sEAUnj7qnQgMuGNaFV6lqKpFUgQW2C5BsyAQVop4i0NDLudBLvJrrnno39d53TB8TnkPcB6NbeZ5IlAQuu6CGevK1Kgp7kvVI2rRi6dGs2n6rvTlhf6vZFNzqD93qtY1sVBtprRkACsSrRSGvGTlGN7YRxY6/VZCM1lQyZ7bnzozM8elFAnf4YMULW2lkSklgSmAwIe7o/SCxCzvwpajvWYxGhtgiztT0n9b32GrDLKAvdz84Y37uRL8vqYU641pqPLSnEJB7YVvobI38GKfyA0oEhPzCI3yBw2/9YmMP3CH2JwJh9oRHyxDrg6HnUtQM2umhYrpZbzS7D1pKuKQ7tViErIFlHE6wTturHQonLAGooVs62jODNEBEIKEHFA40kUDicu/IYA9q5TrI2epp3qC3j9vOoC98GRs3XUpIjiYXA5r4QX8fGQhgidgzeFVEWuCtU6ig86Q74mLf+NrFQ+BnjMKTVPJgQldm8aMzpIJvdZnAP99qdgM7KefaAvo66QsFUvVEfRH2uAav6ehk8cgH8sBOq8a/tFA77TIIXLB0ZG9RBYtgeyMclX6fcSSbnAcFX4VulCYrNWZU3NducDUrTesiQvYVHJwhJagJpS46dKq9Gh9yu2UFubbSCmsdnT0BzUClUNOfYe05B0mwVaDi5Qb3ChW8MlxwM4z4YtnRcXmuqiIVkgt7CPa2FmcF4FiYvCGq4t+BPOU26Lv2tx++cg78iGE2r8aK0GkP3gz65e5xon42kQQSfcpGSTMsdrj+47ZanSnf4DnSYCCEPc50Yi2oO3wB8Bm8/9oPaHr1w68krhGxtuwUPN6S476fTDBN1jL8B8MfDLiD29mJD6nWNAWM14NXsbL9vzJZB/beV0hTUCAH/L0ZCBVJ+1TYKf/X3YYdwV+g3HaMmuQgXifMiXLgvmuDjyGMK4phYPJbTd7WJXqzGSs0oupBA1wzRqvbGYyPn9aWEOCRUKvCIDMssFFgFJDClKQ04l033ZuoNxUo8lzWec3hcfH1G1OxaFTzWkXpbQdknHnVS9uXxNChnpE7kNWxJedaKkkgQiBd5RZDjxdVLLi62w9Xw0uw3C+ybPOcOZRGwFwdDEkbSXdqcqjHVzkUHcsaxaYy/eg7PBjVx0eA7gbmdimMDi4GvFxJeKxm2bYgQlGfIOmSVO3xTnYoBew5SVI4cgLcU6YgigkfYQyxMgu/qY/auwg07G+SzO3I1D1SUq9aQUL2iBu0MGkEAnpcBcI3Drk70ww6/JpCYE72/DPTUslE5IueARNzztXCYA9ODPMSQZmiOm8AKW/4prTqWSH0f9NWGhlf+ymDVWCLSPKID3POkrwfBMHzWCaboIZh8CIbE1VKgI5fkkksM5ztyio+F2GPyhdliTq/MBgFwGwj2CQjGD2o7xIlEoggOz2v12v8AlZ68Jy+7n3GMf65qMzI2nTxLHpPw2FB5Hjz89YQnGNk04Y77itTDcrl7okGkujcB7zsoEBNk2GRCnBoyLfQrbpz61D50aZ95CRbozD5w24llBMaYyOEwc+zVTJ3nwHuIsTBv5Y1E/I2e/g4zJ8tuYT+k0lt0QikhPuHVsDdiaF1ODfWCg6BlnEr9VWPCMyKYPPaAhJIdMhA4WAzKxrp762Gj0YZcbARvBdwA+2KjCak23lknfEtHv3Rm6Jm9EGuyaznkiqeKXIrtbDxuRNrq6hQAZkNYlNVglMNsml5KCZEY7loC8pM9ZoHZfEqiS509RdGlzhC0hICFDTw3Xdl9lhFQZBgSsGszclzrZYVhKAWei0+eAK5VgW8b8jdQgSclykJwLNg8RH9B2muF0hpPyXgSTN9xHk9ChrF+Zxi+Mwxi/11RhndJ+VCUvvA3SenRLO+acstABni4WvjbsIIED/8BPJCoer5Q/wEAAAAGYktHRAAAAAAAAPlDu38AAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjAgQDMivqLBTTAAAA20lEQVRIx+2WOwoCQQyGvwiCnefxVVko2JhCvIEInkErvUTAQrC3FKwsREvxCoJYCtqJoM1UsrrZ1XLTTZj//+aRDCM44rnobYDKW3ojarU4bQ5fVCJyVY/QC0gdGSADZIAM4AiJeDm3QCml307UynE7KPyw4ILniNrAKYX5OWi/A0TtCLSAawLzG9AK2vhLFrUD0AEeDvMH0BW1faIqErUV0HcABqK2TFWmojYFxl+mTETNfu2DETCLyM+BYeI++PCryANLoB5Sa6Ahave/AAKkCKzCsClqF4/uBQ7wLse0INT3AAAAAElFTkSuQmCC",ive="data:image/png;base64,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",ave="data:image/png;base64,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";function ove(){const n=ws();let e=Jxe();const t=d=>{Vy(d,!1);const h=jp(d);vr(DB(h.language))},r=d=>{Vy(d,!0);const h=gs(Vn(),d);vr(DB(h.language))},i=async d=>{await Zl(`Are you sure you want to delete ${d.name}?`)&&qZ(d.id)},a=async d=>{await Zl(`Are you sure you want to delete ${d.name} from the board?`)&&Rne(d.id)},o=async(d,h)=>{let f=!0;h&&(f=await Zl(`Are you sure you want to overwrite the board's copy of ${d.id}? The two copies are different.`)),f&&h5(d)},s=async(d,h)=>{let f=!0;h&&(f=await Zl(`Are you sure you want to overwrite the library's copy of ${d.id}? The two copies are different.`)),f&&hr(d)};let l=null;e.length?(e=e.sort((d,h)=>D3(d.name,h.name)),l=e.map(d=>{const h=sve(d,n),f=TB(d,n);return L(bB,{event:d,onEditEvent:t,onDeleteEvent:i,isDestructiveCopy:h,onCopyToBoard:f?void 0:o},d.id)})):l=L("tr",{children:L("td",{children:"No custom events present \u2014 load or create your own!"})});let u=[];for(const d in n.events){const h=gs(n,d),f=oo(h.language,h.code),m=lve(f),g=TB(f,n);u.push(L(bB,{event:f,onEditEvent:r,onDeleteEvent:a,isDestructiveCopy:m,onCopyToLibrary:g?void 0:s},d))}return u=u.sort((d,h)=>D3(d.key,h.key)),Xe("div",{className:"eventsViewContainer",children:[Xe("h3",{children:["Events for ",n.name]}),u.length?L(FB,{listing:u}):L("p",{children:"No events are associated with this board."}),Xe("h3",{children:[L("img",{src:Zxe,className:"eventsViewHeaderIcon",alt:""})," ","Event Library"]}),L(FB,{listing:l})]})}function DB(n){switch(n){case En.C:return fn.CREATEEVENT_C;default:return fn.CREATEEVENT_ASM}}function FB(n){return L("div",{className:"eventsViewTable",children:n.listing})}function sve(n,e){return!e.events||!(n.id in e.events)?!1:e.events[n.id]!==n.asm}function lve(n){const e=jp(n.id);return!!e&&e.asm!==n.asm}function TB(n,e){if(!e.events||!(n.id in e.events))return!1;const t=jp(n.id);return t?gs(e,n.id).code===t.asm:!1}class bB extends Ne.exports.Component{constructor(){super(...arguments),this.onExportEvent=()=>{const e=this.props.event,t=new Blob([e.asm]);co.exports.saveAs(t,cve(e))}}render(){let e;return this.props.onCopyToLibrary?e=L("div",{className:"eventTableIconCell",children:L("img",{src:this.props.isDestructiveCopy?rve:nve,alt:"Copy this event into the local library",title:"Copy this event into the local library",onClick:()=>this.props.onCopyToLibrary(this.props.event,this.props.isDestructiveCopy)})}):this.props.onCopyToBoard?e=L("div",{className:"eventTableIconCell",children:L("img",{src:this.props.isDestructiveCopy?ave:ive,alt:"Copy this event into the board file",title:"Copy this event into the board file",onClick:()=>this.props.onCopyToBoard(this.props.event,this.props.isDestructiveCopy)})}):e=L("div",{className:"eventTableIconCell",children:L("img",{src:tve,className:"eventRowIconNoAction",alt:"The event is the same in both the board and library",title:"The event is the same in both the board and library"})}),Xe("div",{className:"eventTableRow",children:[L("div",{className:"eventTableIconCell",children:L("img",{src:K9,alt:"Delete event",title:"Delete event",onClick:()=>{this.props.onDeleteEvent(this.props.event)}})}),L("div",{className:"eventTableIconCell",children:L("img",{src:$xe,alt:"Download event code",title:"Download event code",onClick:this.onExportEvent})}),e,Xe("div",{className:"eventNameTableCell",onClick:()=>this.props.onEditEvent(this.props.event.id),children:[Xe("span",{className:"eventNameText",children:[this.props.event.name,L("span",{className:"eventNameExtensionText",children:Y9(this.props.event)})]}),L("img",{src:eve,className:"eventEditCellIcon",alt:"Edit event",title:"Edit event"})]})]})}}function cve(n){return n.id+Y9(n)}function Y9(n){switch(n.language){case En.C:return".c";case En.MIPS:default:return".s"}}let bo=null;function r_(n){bo=n}async function uve(){const n=bo.getEventName(),e=bo.getSupportedGames(),t=bo.getEventCode();if(!n){o0("An event name must be specified.");return}const r=jp(n);if(r&&!r.custom){o0("The event name collides with a reserved event name from the original boards.");return}if(!e.length){o0("At least one game must be supported.");return}if(!t){o0("No assembly code was provided.");return}const i=bo.getLanguage(),a=oo(i,t);try{await GE(a)}catch(o){o0(o.toString())}sne()?h5(a):hr(a),bo&&bo.updateLastSavedCode(t)}function dve(){return bo?bo.promptExit():Promise.resolve(!0)}function Ave(){return bo?bo.getSupportedGames():[]}class q9 extends Ne.exports.Component{constructor(){super(...arguments),this.onEventNameChange=e=>{this.props.onEventNameChange(e.target.value)},this._gameSupported=e=>this.props.supportedGames.indexOf(e)>=0}render(){const e=[{id:Qe.MP1_USA,text:"MP1 USA",selected:this._gameSupported(Qe.MP1_USA)},{id:Qe.MP2_USA,text:"MP2 USA",selected:this._gameSupported(Qe.MP2_USA)},{id:Qe.MP3_USA,text:"MP3 USA",selected:this._gameSupported(Qe.MP3_USA)},{id:Qe.MP1_JPN,text:"MP1 JPN",selected:this._gameSupported(Qe.MP1_JPN)},{id:Qe.MP2_JPN,text:"MP2 JPN",selected:this._gameSupported(Qe.MP2_JPN)},{id:Qe.MP3_JPN,text:"MP3 JPN",selected:this._gameSupported(Qe.MP3_JPN)},{id:Qe.MP1_PAL,text:"MP1 PAL",selected:this._gameSupported(Qe.MP1_PAL)},{id:Qe.MP2_PAL,text:"MP2 PAL",selected:this._gameSupported(Qe.MP2_PAL)},{id:Qe.MP3_PAL,text:"MP3 PAL",selected:this._gameSupported(Qe.MP3_PAL)}],t=[{id:1,text:"Direct",title:"The game will execute the event function directly",selected:this.props.executionType===s0.DIRECT},{id:2,text:"Process",title:"The game will use its process system when executing the event function",selected:this.props.executionType===s0.PROCESS}];return Xe("div",{className:"createEventForm",children:[L("label",{children:"Name:"}),L("input",{value:this.props.name,onChange:this.onEventNameChange}),L("br",{}),L("br",{}),L("label",{children:"Supported Games:"}),L(J8,{items:e,groupCssClass:"createEventGameToggles",onToggleClick:this.props.onGameToggleClicked}),L("br",{}),L("label",{children:"Execution Type:"}),L(J8,{items:t,allowDeselect:!1,onToggleClick:this.props.onExecTypeToggleClicked}),L("br",{}),L("label",{children:"Parameters:"}),L(fve,{language:this.props.language,parameters:this.props.parameters,onAddEventParameter:this.props.onAddEventParameter,onRemoveEventParameter:this.props.onRemoveEventParameter})]})}}class fve extends Ne.exports.Component{render(){const e=this.props.parameters.map(t=>L(hve,{entry:t,onRemoveEntry:this.props.onRemoveEventParameter},t.name));return Xe("div",{className:"eventParametersList",children:[L("table",{children:L("tbody",{children:e})}),L(pve,{language:this.props.language,onAddEntry:this.props.onAddEventParameter})]})}}class hve extends Ne.exports.Component{constructor(){super(...arguments),this.onDeleteClick=()=>{this.props.onRemoveEntry(this.props.entry)}}render(){const{type:e,name:t}=this.props.entry;return Xe("tr",{className:"eventParameterEntry",children:[L("td",{className:"eventParameterEntryType",children:e}),L("td",{className:"eventParameterEntryName",title:t,children:t}),L("td",{className:"eventParameterEntryDelete",children:L("img",{src:K9,alt:"Delete",onClick:this.onDeleteClick})})]})}}class pve extends Ne.exports.Component{constructor(){super(...arguments),this.state={selectedType:"",name:""},this.onNameChange=e=>{const t=e.target.value;!t.match(a0.validParameterNameRegex)||this.setState({name:t})},this.onTypeChange=e=>{this.setState({selectedType:e.target.value})},this.onAddClick=()=>{!this.state.name||!this.state.selectedType||(this.props.onAddEntry({name:this.state.name,type:this.state.selectedType}),this.setState({name:"",selectedType:""}))}}render(){return Xe("div",{className:"eventParameterAddNewEntry",children:[Xe("select",{value:this.state.selectedType,onChange:this.onTypeChange,children:[L("option",{}),L("option",{value:an.Boolean,children:"Boolean"}),L("option",{value:an.Number,children:"Number"}),L("option",{value:an.PositiveNumber,children:"Positive Number"}),L("option",{value:an.Space,children:"Space"}),L("option",{value:an.SpaceArray,children:"Space Array"})]}),L("input",{type:"text",placeholder:"Name",value:this.state.name,onChange:this.onNameChange}),L(rr,{onClick:this.onAddClick,children:"Add"})]})}}class mve extends Ne.exports.Component{constructor(){super(...arguments),this.state={language:En.C},this.onLanguageChange=e=>{this.setState({language:e})},this.submit=()=>{let e=this.props.onAccept;e&&e(this.state.language)}}render(){return Xe("div",{className:"createEventDropdownContainer",children:[L(Sve,{language:this.state.language,onLanguageChange:this.onLanguageChange}),L(rr,{onClick:this.submit,css:"nbCreate",children:"Create"})]})}}class Sve extends Ne.exports.Component{constructor(){super(...arguments),this.onLanguageChange=e=>{this.props.onLanguageChange(e)}}render(){return Xe("div",{className:"newBoardVersionSelect",children:[L("label",{className:"nbLabel",children:"Code Language"}),L("br",{}),L(ko,{id:En.C,allowDeselect:!1,onToggled:this.onLanguageChange,pressed:this.props.language===En.C,children:L("span",{className:"newBoardVersion",title:"C programming language",children:"C"})}),L(ko,{id:En.MIPS,allowDeselect:!1,onToggled:this.onLanguageChange,pressed:this.props.language===En.MIPS,children:L("span",{className:"newBoardVersion",title:"MIPS assembly language",children:"MIPS"})})]})}}var ds={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(RA,function(){var t=navigator.userAgent,r=navigator.platform,i=/gecko\/\d/i.test(t),a=/MSIE \d/.test(t),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),s=/Edge\/(\d+)/.exec(t),l=a||o||s,u=l&&(a?document.documentMode||6:+(s||o)[1]),d=!s&&/WebKit\//.test(t),h=d&&/Qt\/\d+\.\d+/.test(t),f=!s&&/Chrome\/(\d+)/.exec(t),m=f&&+f[1],g=/Opera\//.test(t),_=/Apple Computer/.test(navigator.vendor),E=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),x=/PhantomJS/.test(t),v=_&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),C=/Android/.test(t),V=v||C||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),D=v||/Mac/.test(r),H=/\bCrOS\b/.test(t),R=/win/i.test(r),j=g&&t.match(/Version\/(\d*\.\d*)/);j&&(j=Number(j[1])),j&&j>=15&&(g=!1,d=!0);var te=D&&(h||g&&(j==null||j<12.11)),$=i||l&&u>=9;function z(c){return new RegExp("(^|\\s)"+c+"(?:$|\\s)\\s*")}var I=function(c,A){var S=c.className,p=z(A).exec(S);if(p){var w=S.slice(p.index+p[0].length);c.className=S.slice(0,p.index)+(w?p[1]+w:"")}};function q(c){for(var A=c.childNodes.length;A>0;--A)c.removeChild(c.firstChild);return c}function P(c,A){return q(c).appendChild(A)}function ee(c,A,S,p){var w=document.createElement(c);if(S&&(w.className=S),p&&(w.style.cssText=p),typeof A=="string")w.appendChild(document.createTextNode(A));else if(A)for(var F=0;F<A.length;++F)w.appendChild(A[F]);return w}function ue(c,A,S,p){var w=ee(c,A,S,p);return w.setAttribute("role","presentation"),w}var U;document.createRange?U=function(c,A,S,p){var w=document.createRange();return w.setEnd(p||c,S),w.setStart(c,A),w}:U=function(c,A,S){var p=document.body.createTextRange();try{p.moveToElementText(c.parentNode)}catch{return p}return p.collapse(!0),p.moveEnd("character",S),p.moveStart("character",A),p};function O(c,A){if(A.nodeType==3&&(A=A.parentNode),c.contains)return c.contains(A);do if(A.nodeType==11&&(A=A.host),A==c)return!0;while(A=A.parentNode)}function G(c){var A;try{A=c.activeElement}catch{A=c.body||null}for(;A&&A.shadowRoot&&A.shadowRoot.activeElement;)A=A.shadowRoot.activeElement;return A}function ne(c,A){var S=c.className;z(A).test(S)||(c.className+=(S?" ":"")+A)}function se(c,A){for(var S=c.split(" "),p=0;p<S.length;p++)S[p]&&!z(S[p]).test(A)&&(A+=" "+S[p]);return A}var ie=function(c){c.select()};v?ie=function(c){c.selectionStart=0,c.selectionEnd=c.value.length}:l&&(ie=function(c){try{c.select()}catch{}});function Re(c){return c.display.wrapper.ownerDocument}function Be(c){return Re(c).defaultView}function Te(c){var A=Array.prototype.slice.call(arguments,1);return function(){return c.apply(null,A)}}function ye(c,A,S){A||(A={});for(var p in c)c.hasOwnProperty(p)&&(S!==!1||!A.hasOwnProperty(p))&&(A[p]=c[p]);return A}function We(c,A,S,p,w){A==null&&(A=c.search(/[^\s\u00a0]/),A==-1&&(A=c.length));for(var F=p||0,B=w||0;;){var N=c.indexOf("	",F);if(N<0||N>=A)return B+(A-F);B+=N-F,B+=S-B%S,F=N+1}}var at=function(){this.id=null,this.f=null,this.time=0,this.handler=Te(this.onTimeout,this)};at.prototype.onTimeout=function(c){c.id=0,c.time<=+new Date?c.f():setTimeout(c.handler,c.time-+new Date)},at.prototype.set=function(c,A){this.f=A;var S=+new Date+c;(!this.id||S<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,c),this.time=S)};function Ke(c,A){for(var S=0;S<c.length;++S)if(c[S]==A)return S;return-1}var tt=50,lt={toString:function(){return"CodeMirror.Pass"}},Ie={scroll:!1},Ue={origin:"*mouse"},k={origin:"+move"};function De(c,A,S){for(var p=0,w=0;;){var F=c.indexOf("	",p);F==-1&&(F=c.length);var B=F-p;if(F==c.length||w+B>=A)return p+Math.min(B,A-w);if(w+=F-p,w+=S-w%S,p=F+1,w>=A)return p}}var we=[""];function le(c){for(;we.length<=c;)we.push(re(we)+" ");return we[c]}function re(c){return c[c.length-1]}function fe(c,A){for(var S=[],p=0;p<c.length;p++)S[p]=A(c[p],p);return S}function He(c,A,S){for(var p=0,w=S(A);p<c.length&&S(c[p])<=w;)p++;c.splice(p,0,A)}function oe(){}function Y(c,A){var S;return Object.create?S=Object.create(c):(oe.prototype=c,S=new oe),A&&ye(A,S),S}var _e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Fe(c){return/\w/.test(c)||c>"\x80"&&(c.toUpperCase()!=c.toLowerCase()||_e.test(c))}function Le(c,A){return A?A.source.indexOf("\\w")>-1&&Fe(c)?!0:A.test(c):Fe(c)}function Pe(c){for(var A in c)if(c.hasOwnProperty(A)&&c[A])return!1;return!0}var rt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ee(c){return c.charCodeAt(0)>=768&&rt.test(c)}function ve(c,A,S){for(;(S<0?A>0:A<c.length)&&Ee(c.charAt(A));)A+=S;return A}function $e(c,A,S){for(var p=A>S?-1:1;;){if(A==S)return A;var w=(A+S)/2,F=p<0?Math.ceil(w):Math.floor(w);if(F==A)return c(F)?A:S;c(F)?S=F:A=F+p}}function _t(c,A,S,p){if(!c)return p(A,S,"ltr",0);for(var w=!1,F=0;F<c.length;++F){var B=c[F];(B.from<S&&B.to>A||A==S&&B.to==A)&&(p(Math.max(B.from,A),Math.min(B.to,S),B.level==1?"rtl":"ltr",F),w=!0)}w||p(A,S,"ltr")}var gt=null;function Ce(c,A,S){var p;gt=null;for(var w=0;w<c.length;++w){var F=c[w];if(F.from<A&&F.to>A)return w;F.to==A&&(F.from!=F.to&&S=="before"?p=w:gt=w),F.from==A&&(F.from!=F.to&&S!="before"?p=w:gt=w)}return p!=null?p:gt}var Ft=function(){var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",A="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function S(Z){return Z<=247?c.charAt(Z):1424<=Z&&Z<=1524?"R":1536<=Z&&Z<=1785?A.charAt(Z-1536):1774<=Z&&Z<=2220?"r":8192<=Z&&Z<=8203?"w":Z==8204?"b":"L"}var p=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,w=/[stwN]/,F=/[LRr]/,B=/[Lb1n]/,N=/[1n]/;function K(Z,pe,ge){this.level=Z,this.from=pe,this.to=ge}return function(Z,pe){var ge=pe=="ltr"?"L":"R";if(Z.length==0||pe=="ltr"&&!p.test(Z))return!1;for(var Ge=Z.length,Oe=[],nt=0;nt<Ge;++nt)Oe.push(S(Z.charCodeAt(nt)));for(var ut=0,vt=ge;ut<Ge;++ut){var Vt=Oe[ut];Vt=="m"?Oe[ut]=vt:vt=Vt}for(var Lt=0,Dt=ge;Lt<Ge;++Lt){var kt=Oe[Lt];kt=="1"&&Dt=="r"?Oe[Lt]="n":F.test(kt)&&(Dt=kt,kt=="r"&&(Oe[Lt]="R"))}for(var nn=1,Qt=Oe[0];nn<Ge-1;++nn){var bn=Oe[nn];bn=="+"&&Qt=="1"&&Oe[nn+1]=="1"?Oe[nn]="1":bn==","&&Qt==Oe[nn+1]&&(Qt=="1"||Qt=="n")&&(Oe[nn]=Qt),Qt=bn}for(var S0=0;S0<Ge;++S0){var Hr=Oe[S0];if(Hr==",")Oe[S0]="N";else if(Hr=="%"){var q0=void 0;for(q0=S0+1;q0<Ge&&Oe[q0]=="%";++q0);for(var aa=S0&&Oe[S0-1]=="!"||q0<Ge&&Oe[q0]=="1"?"1":"N",Wi=S0;Wi<q0;++Wi)Oe[Wi]=aa;S0=q0-1}}for(var gr=0,Xi=ge;gr<Ge;++gr){var $r=Oe[gr];Xi=="L"&&$r=="1"?Oe[gr]="L":F.test($r)&&(Xi=$r)}for(var Fr=0;Fr<Ge;++Fr)if(w.test(Oe[Fr])){var _r=void 0;for(_r=Fr+1;_r<Ge&&w.test(Oe[_r]);++_r);for(var nr=(Fr?Oe[Fr-1]:ge)=="L",Ki=(_r<Ge?Oe[_r]:ge)=="L",Ud=nr==Ki?nr?"L":"R":ge,Fl=Fr;Fl<_r;++Fl)Oe[Fl]=Ud;Fr=_r-1}for(var ci=[],Qo,zr=0;zr<Ge;)if(B.test(Oe[zr])){var vx=zr;for(++zr;zr<Ge&&B.test(Oe[zr]);++zr);ci.push(new K(0,vx,zr))}else{var Ps=zr,eu=ci.length,tu=pe=="rtl"?1:0;for(++zr;zr<Ge&&Oe[zr]!="L";++zr);for(var Ci=Ps;Ci<zr;)if(N.test(Oe[Ci])){Ps<Ci&&(ci.splice(eu,0,new K(1,Ps,Ci)),eu+=tu);var jd=Ci;for(++Ci;Ci<zr&&N.test(Oe[Ci]);++Ci);ci.splice(eu,0,new K(2,jd,Ci)),eu+=tu,Ps=Ci}else++Ci;Ps<zr&&ci.splice(eu,0,new K(1,Ps,zr))}return pe=="ltr"&&(ci[0].level==1&&(Qo=Z.match(/^\s+/))&&(ci[0].from=Qo[0].length,ci.unshift(new K(0,0,Qo[0].length))),re(ci).level==1&&(Qo=Z.match(/\s+$/))&&(re(ci).to-=Qo[0].length,ci.push(new K(0,Ge-Qo[0].length,Ge)))),pe=="rtl"?ci.reverse():ci}}();function ht(c,A){var S=c.order;return S==null&&(S=c.order=Ft(c.text,A)),S}var Nt=[],Je=function(c,A,S){if(c.addEventListener)c.addEventListener(A,S,!1);else if(c.attachEvent)c.attachEvent("on"+A,S);else{var p=c._handlers||(c._handlers={});p[A]=(p[A]||Nt).concat(S)}};function mt(c,A){return c._handlers&&c._handlers[A]||Nt}function Xt(c,A,S){if(c.removeEventListener)c.removeEventListener(A,S,!1);else if(c.detachEvent)c.detachEvent("on"+A,S);else{var p=c._handlers,w=p&&p[A];if(w){var F=Ke(w,S);F>-1&&(p[A]=w.slice(0,F).concat(w.slice(F+1)))}}}function xt(c,A){var S=mt(c,A);if(!!S.length)for(var p=Array.prototype.slice.call(arguments,2),w=0;w<S.length;++w)S[w].apply(null,p)}function on(c,A,S){return typeof A=="string"&&(A={type:A,preventDefault:function(){this.defaultPrevented=!0}}),xt(c,S||A.type,c,A),na(A)||A.codemirrorIgnore}function wn(c){var A=c._handlers&&c._handlers.cursorActivity;if(!!A)for(var S=c.curOp.cursorActivityHandlers||(c.curOp.cursorActivityHandlers=[]),p=0;p<A.length;++p)Ke(S,A[p])==-1&&S.push(A[p])}function On(c,A){return mt(c,A).length>0}function V0(c){c.prototype.on=function(A,S){Je(this,A,S)},c.prototype.off=function(A,S){Xt(this,A,S)}}function X0(c){c.preventDefault?c.preventDefault():c.returnValue=!1}function ki(c){c.stopPropagation?c.stopPropagation():c.cancelBubble=!0}function na(c){return c.defaultPrevented!=null?c.defaultPrevented:c.returnValue==!1}function $t(c){X0(c),ki(c)}function Nr(c){return c.target||c.srcElement}function xi(c){var A=c.which;return A==null&&(c.button&1?A=1:c.button&2?A=3:c.button&4&&(A=2)),D&&c.ctrlKey&&A==1&&(A=3),A}var gn=function(){if(l&&u<9)return!1;var c=ee("div");return"draggable"in c||"dragDrop"in c}(),Q;function he(c){if(Q==null){var A=ee("span","\u200B");P(c,ee("span",[A,document.createTextNode("x")])),c.firstChild.offsetHeight!=0&&(Q=A.offsetWidth<=1&&A.offsetHeight>2&&!(l&&u<8))}var S=Q?ee("span","\u200B"):ee("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return S.setAttribute("cm-text",""),S}var qe;function st(c){if(qe!=null)return qe;var A=P(c,document.createTextNode("A\u062EA")),S=U(A,0,1).getBoundingClientRect(),p=U(A,1,2).getBoundingClientRect();return q(c),!S||S.left==S.right?!1:qe=p.right-S.right<3}var Ze=`

b`.split(/\n/).length!=3?function(c){for(var A=0,S=[],p=c.length;A<=p;){var w=c.indexOf(`
`,A);w==-1&&(w=c.length);var F=c.slice(A,c.charAt(w-1)=="\r"?w-1:w),B=F.indexOf("\r");B!=-1?(S.push(F.slice(0,B)),A+=B+1):(S.push(F),A=w+1)}return S}:function(c){return c.split(/\r\n?|\n/)},ft=window.getSelection?function(c){try{return c.selectionStart!=c.selectionEnd}catch{return!1}}:function(c){var A;try{A=c.ownerDocument.selection.createRange()}catch{}return!A||A.parentElement()!=c?!1:A.compareEndPoints("StartToEnd",A)!=0},tn=function(){var c=ee("div");return"oncopy"in c?!0:(c.setAttribute("oncopy","return;"),typeof c.oncopy=="function")}(),mn=null;function Cn(c){if(mn!=null)return mn;var A=P(c,ee("span","x")),S=A.getBoundingClientRect(),p=U(A,0,1).getBoundingClientRect();return mn=Math.abs(S.left-p.left)>1}var Sn={},Tn={};function hn(c,A){arguments.length>2&&(A.dependencies=Array.prototype.slice.call(arguments,2)),Sn[c]=A}function jt(c,A){Tn[c]=A}function Xn(c){if(typeof c=="string"&&Tn.hasOwnProperty(c))c=Tn[c];else if(c&&typeof c.name=="string"&&Tn.hasOwnProperty(c.name)){var A=Tn[c.name];typeof A=="string"&&(A={name:A}),c=Y(A,c),c.name=A.name}else{if(typeof c=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(c))return Xn("application/xml");if(typeof c=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(c))return Xn("application/json")}return typeof c=="string"?{name:c}:c||{name:"null"}}function Jr(c,A){A=Xn(A);var S=Sn[A.name];if(!S)return Jr(c,"text/plain");var p=S(c,A);if(dn.hasOwnProperty(A.name)){var w=dn[A.name];for(var F in w)!w.hasOwnProperty(F)||(p.hasOwnProperty(F)&&(p["_"+F]=p[F]),p[F]=w[F])}if(p.name=A.name,A.helperType&&(p.helperType=A.helperType),A.modeProps)for(var B in A.modeProps)p[B]=A.modeProps[B];return p}var dn={};function oi(c,A){var S=dn.hasOwnProperty(c)?dn[c]:dn[c]={};ye(A,S)}function m0(c,A){if(A===!0)return A;if(c.copyState)return c.copyState(A);var S={};for(var p in A){var w=A[p];w instanceof Array&&(w=w.concat([])),S[p]=w}return S}function Dn(c,A){for(var S;c.innerMode&&(S=c.innerMode(A),!(!S||S.mode==c));)A=S.state,c=S.mode;return S||{mode:c,state:A}}function Ur(c,A,S){return c.startState?c.startState(A,S):!0}var en=function(c,A,S){this.pos=this.start=0,this.string=c,this.tabSize=A||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=S};en.prototype.eol=function(){return this.pos>=this.string.length},en.prototype.sol=function(){return this.pos==this.lineStart},en.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},en.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},en.prototype.eat=function(c){var A=this.string.charAt(this.pos),S;if(typeof c=="string"?S=A==c:S=A&&(c.test?c.test(A):c(A)),S)return++this.pos,A},en.prototype.eatWhile=function(c){for(var A=this.pos;this.eat(c););return this.pos>A},en.prototype.eatSpace=function(){for(var c=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>c},en.prototype.skipToEnd=function(){this.pos=this.string.length},en.prototype.skipTo=function(c){var A=this.string.indexOf(c,this.pos);if(A>-1)return this.pos=A,!0},en.prototype.backUp=function(c){this.pos-=c},en.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=We(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?We(this.string,this.lineStart,this.tabSize):0)},en.prototype.indentation=function(){return We(this.string,null,this.tabSize)-(this.lineStart?We(this.string,this.lineStart,this.tabSize):0)},en.prototype.match=function(c,A,S){if(typeof c=="string"){var p=function(B){return S?B.toLowerCase():B},w=this.string.substr(this.pos,c.length);if(p(w)==p(c))return A!==!1&&(this.pos+=c.length),!0}else{var F=this.string.slice(this.pos).match(c);return F&&F.index>0?null:(F&&A!==!1&&(this.pos+=F[0].length),F)}},en.prototype.current=function(){return this.string.slice(this.start,this.pos)},en.prototype.hideFirstChars=function(c,A){this.lineStart+=c;try{return A()}finally{this.lineStart-=c}},en.prototype.lookAhead=function(c){var A=this.lineOracle;return A&&A.lookAhead(c)},en.prototype.baseToken=function(){var c=this.lineOracle;return c&&c.baseToken(this.pos)};function Rt(c,A){if(A-=c.first,A<0||A>=c.size)throw new Error("There is no line "+(A+c.first)+" in the document.");for(var S=c;!S.lines;)for(var p=0;;++p){var w=S.children[p],F=w.chunkSize();if(A<F){S=w;break}A-=F}return S.lines[A]}function D0(c,A,S){var p=[],w=A.line;return c.iter(A.line,S.line+1,function(F){var B=F.text;w==S.line&&(B=B.slice(0,S.ch)),w==A.line&&(B=B.slice(A.ch)),p.push(B),++w}),p}function vi(c,A,S){var p=[];return c.iter(A,S,function(w){p.push(w.text)}),p}function Vr(c,A){var S=A-c.height;if(S)for(var p=c;p;p=p.parent)p.height+=S}function sn(c){if(c.parent==null)return null;for(var A=c.parent,S=Ke(A.lines,c),p=A.parent;p;A=p,p=p.parent)for(var w=0;p.children[w]!=A;++w)S+=p.children[w].chunkSize();return S+A.first}function E0(c,A){var S=c.first;e:do{for(var p=0;p<c.children.length;++p){var w=c.children[p],F=w.height;if(A<F){c=w;continue e}A-=F,S+=w.chunkSize()}return S}while(!c.lines);for(var B=0;B<c.lines.length;++B){var N=c.lines[B],K=N.height;if(A<K)break;A-=K}return S+B}function Ni(c,A){return A>=c.first&&A<c.first+c.size}function b(c,A){return String(c.lineNumberFormatter(A+c.firstLineNumber))}function M(c,A,S){if(S===void 0&&(S=null),!(this instanceof M))return new M(c,A,S);this.line=c,this.ch=A,this.sticky=S}function X(c,A){return c.line-A.line||c.ch-A.ch}function Ae(c,A){return c.sticky==A.sticky&&X(c,A)==0}function xe(c){return M(c.line,c.ch)}function Me(c,A){return X(c,A)<0?A:c}function ze(c,A){return X(c,A)<0?c:A}function Ye(c,A){return Math.max(c.first,Math.min(A,c.first+c.size-1))}function it(c,A){if(A.line<c.first)return M(c.first,0);var S=c.first+c.size-1;return A.line>S?M(S,Rt(c,S).text.length):Gt(A,Rt(c,A.line).text.length)}function Gt(c,A){var S=c.ch;return S==null||S>A?M(c.line,A):S<0?M(c.line,0):c}function Zt(c,A){for(var S=[],p=0;p<A.length;p++)S[p]=it(c,A[p]);return S}var vn=function(c,A){this.state=c,this.lookAhead=A},zt=function(c,A,S,p){this.state=A,this.doc=c,this.line=S,this.maxLookAhead=p||0,this.baseTokens=null,this.baseTokenPos=1};zt.prototype.lookAhead=function(c){var A=this.doc.getLine(this.line+c);return A!=null&&c>this.maxLookAhead&&(this.maxLookAhead=c),A},zt.prototype.baseToken=function(c){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=c;)this.baseTokenPos+=2;var A=this.baseTokens[this.baseTokenPos+1];return{type:A&&A.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-c}},zt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},zt.fromSaved=function(c,A,S){return A instanceof vn?new zt(c,m0(c.mode,A.state),S,A.lookAhead):new zt(c,m0(c.mode,A),S)},zt.prototype.save=function(c){var A=c!==!1?m0(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new vn(A,this.maxLookAhead):A};function qt(c,A,S,p){var w=[c.state.modeGen],F={};c0(c,A.text,c.doc.mode,S,function(Z,pe){return w.push(Z,pe)},F,p);for(var B=S.state,N=function(Z){S.baseTokens=w;var pe=c.state.overlays[Z],ge=1,Ge=0;S.state=!0,c0(c,A.text,pe.mode,S,function(Oe,nt){for(var ut=ge;Ge<Oe;){var vt=w[ge];vt>Oe&&w.splice(ge,1,Oe,w[ge+1],vt),ge+=2,Ge=Math.min(Oe,vt)}if(!!nt)if(pe.opaque)w.splice(ut,ge-ut,Oe,"overlay "+nt),ge=ut+2;else for(;ut<ge;ut+=2){var Vt=w[ut+1];w[ut+1]=(Vt?Vt+" ":"")+"overlay "+nt}},F),S.state=B,S.baseTokens=null,S.baseTokenPos=1},K=0;K<c.state.overlays.length;++K)N(K);return{styles:w,classes:F.bgClass||F.textClass?F:null}}function yn(c,A,S){if(!A.styles||A.styles[0]!=c.state.modeGen){var p=K0(c,sn(A)),w=A.text.length>c.options.maxHighlightLength&&m0(c.doc.mode,p.state),F=qt(c,A,p);w&&(p.state=w),A.stateAfter=p.save(!w),A.styles=F.styles,F.classes?A.styleClasses=F.classes:A.styleClasses&&(A.styleClasses=null),S===c.doc.highlightFrontier&&(c.doc.modeFrontier=Math.max(c.doc.modeFrontier,++c.doc.highlightFrontier))}return A.styles}function K0(c,A,S){var p=c.doc,w=c.display;if(!p.mode.startState)return new zt(p,!0,A);var F=Uc(c,A,S),B=F>p.first&&Rt(p,F-1).stateAfter,N=B?zt.fromSaved(p,B,F):new zt(p,Ur(p.mode),F);return p.iter(F,A,function(K){Na(c,K.text,N);var Z=N.line;K.stateAfter=Z==A-1||Z%5==0||Z>=w.viewFrom&&Z<w.viewTo?N.save():null,N.nextLine()}),S&&(p.modeFrontier=N.line),N}function Na(c,A,S,p){var w=c.doc.mode,F=new en(A,c.options.tabSize,S);for(F.start=F.pos=p||0,A==""&&Zr(w,S.state);!F.eol();)jn(w,F,S.state),F.start=F.pos}function Zr(c,A){if(c.blankLine)return c.blankLine(A);if(!!c.innerMode){var S=Dn(c,A);if(S.mode.blankLine)return S.mode.blankLine(S.state)}}function jn(c,A,S,p){for(var w=0;w<10;w++){p&&(p[0]=Dn(c,S).mode);var F=c.token(A,S);if(A.pos>A.start)return F}throw new Error("Mode "+c.name+" failed to advance stream.")}var mr=function(c,A,S){this.start=c.start,this.end=c.pos,this.string=c.current(),this.type=A||null,this.state=S};function wi(c,A,S,p){var w=c.doc,F=w.mode,B;A=it(w,A);var N=Rt(w,A.line),K=K0(c,A.line,S),Z=new en(N.text,c.options.tabSize,K),pe;for(p&&(pe=[]);(p||Z.pos<A.ch)&&!Z.eol();)Z.start=Z.pos,B=jn(F,Z,K.state),p&&pe.push(new mr(Z,B,m0(w.mode,K.state)));return p?pe:new mr(Z,B,K.state)}function O0(c,A){if(c)for(;;){var S=c.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!S)break;c=c.slice(0,S.index)+c.slice(S.index+S[0].length);var p=S[1]?"bgClass":"textClass";A[p]==null?A[p]=S[2]:new RegExp("(?:^|\\s)"+S[2]+"(?:$|\\s)").test(A[p])||(A[p]+=" "+S[2])}return c}function c0(c,A,S,p,w,F,B){var N=S.flattenSpans;N==null&&(N=c.options.flattenSpans);var K=0,Z=null,pe=new en(A,c.options.tabSize,p),ge,Ge=c.options.addModeClass&&[null];for(A==""&&O0(Zr(S,p.state),F);!pe.eol();){if(pe.pos>c.options.maxHighlightLength?(N=!1,B&&Na(c,A,p,pe.pos),pe.pos=A.length,ge=null):ge=O0(jn(S,pe,p.state,Ge),F),Ge){var Oe=Ge[0].name;Oe&&(ge="m-"+(ge?Oe+" "+ge:Oe))}if(!N||Z!=ge){for(;K<pe.start;)K=Math.min(pe.start,K+5e3),w(K,Z);Z=ge}pe.start=pe.pos}for(;K<pe.pos;){var nt=Math.min(pe.pos,K+5e3);w(nt,Z),K=nt}}function Uc(c,A,S){for(var p,w,F=c.doc,B=S?-1:A-(c.doc.mode.innerMode?1e3:100),N=A;N>B;--N){if(N<=F.first)return F.first;var K=Rt(F,N-1),Z=K.stateAfter;if(Z&&(!S||N+(Z instanceof vn?Z.lookAhead:0)<=F.modeFrontier))return N;var pe=We(K.text,null,c.options.tabSize);(w==null||p>pe)&&(w=N-1,p=pe)}return w}function gm(c,A){if(c.modeFrontier=Math.min(c.modeFrontier,A),!(c.highlightFrontier<A-10)){for(var S=c.first,p=A-1;p>S;p--){var w=Rt(c,p).stateAfter;if(w&&(!(w instanceof vn)||p+w.lookAhead<A)){S=p+1;break}}c.highlightFrontier=Math.min(c.highlightFrontier,S)}}var pl=!1,Ua=!1;function YA(){pl=!0}function N2(){Ua=!0}function ml(c,A,S){this.marker=c,this.from=A,this.to=S}function ja(c,A){if(c)for(var S=0;S<c.length;++S){var p=c[S];if(p.marker==A)return p}}function _m(c,A){for(var S,p=0;p<c.length;++p)c[p]!=A&&(S||(S=[])).push(c[p]);return S}function Ko(c,A,S){var p=S&&window.WeakSet&&(S.markedSpans||(S.markedSpans=new WeakSet));p&&c.markedSpans&&p.has(c.markedSpans)?c.markedSpans.push(A):(c.markedSpans=c.markedSpans?c.markedSpans.concat([A]):[A],p&&p.add(c.markedSpans)),A.marker.attachLine(c)}function fd(c,A,S){var p;if(c)for(var w=0;w<c.length;++w){var F=c[w],B=F.marker,N=F.from==null||(B.inclusiveLeft?F.from<=A:F.from<A);if(N||F.from==A&&B.type=="bookmark"&&(!S||!F.marker.insertLeft)){var K=F.to==null||(B.inclusiveRight?F.to>=A:F.to>A);(p||(p=[])).push(new ml(B,F.from,K?null:F.to))}}return p}function jc(c,A,S){var p;if(c)for(var w=0;w<c.length;++w){var F=c[w],B=F.marker,N=F.to==null||(B.inclusiveRight?F.to>=A:F.to>A);if(N||F.from==A&&B.type=="bookmark"&&(!S||F.marker.insertLeft)){var K=F.from==null||(B.inclusiveLeft?F.from<=A:F.from<A);(p||(p=[])).push(new ml(B,K?null:F.from-A,F.to==null?null:F.to-A))}}return p}function k0(c,A){if(A.full)return null;var S=Ni(c,A.from.line)&&Rt(c,A.from.line).markedSpans,p=Ni(c,A.to.line)&&Rt(c,A.to.line).markedSpans;if(!S&&!p)return null;var w=A.from.ch,F=A.to.ch,B=X(A.from,A.to)==0,N=fd(S,w,B),K=jc(p,F,B),Z=A.text.length==1,pe=re(A.text).length+(Z?w:0);if(N)for(var ge=0;ge<N.length;++ge){var Ge=N[ge];if(Ge.to==null){var Oe=ja(K,Ge.marker);Oe?Z&&(Ge.to=Oe.to==null?null:Oe.to+pe):Ge.to=w}}if(K)for(var nt=0;nt<K.length;++nt){var ut=K[nt];if(ut.to!=null&&(ut.to+=pe),ut.from==null){var vt=ja(N,ut.marker);vt||(ut.from=pe,Z&&(N||(N=[])).push(ut))}else ut.from+=pe,Z&&(N||(N=[])).push(ut)}N&&(N=qA(N)),K&&K!=N&&(K=qA(K));var Vt=[N];if(!Z){var Lt=A.text.length-2,Dt;if(Lt>0&&N)for(var kt=0;kt<N.length;++kt)N[kt].to==null&&(Dt||(Dt=[])).push(new ml(N[kt].marker,null,null));for(var nn=0;nn<Lt;++nn)Vt.push(Dt);Vt.push(K)}return Vt}function qA(c){for(var A=0;A<c.length;++A){var S=c[A];S.from!=null&&S.from==S.to&&S.marker.clearWhenEmpty!==!1&&c.splice(A--,1)}return c.length?c:null}function QA(c,A,S){var p=null;if(c.iter(A.line,S.line+1,function(Oe){if(Oe.markedSpans)for(var nt=0;nt<Oe.markedSpans.length;++nt){var ut=Oe.markedSpans[nt].marker;ut.readOnly&&(!p||Ke(p,ut)==-1)&&(p||(p=[])).push(ut)}}),!p)return null;for(var w=[{from:A,to:S}],F=0;F<p.length;++F)for(var B=p[F],N=B.find(0),K=0;K<w.length;++K){var Z=w[K];if(!(X(Z.to,N.from)<0||X(Z.from,N.to)>0)){var pe=[K,1],ge=X(Z.from,N.from),Ge=X(Z.to,N.to);(ge<0||!B.inclusiveLeft&&!ge)&&pe.push({from:Z.from,to:N.from}),(Ge>0||!B.inclusiveRight&&!Ge)&&pe.push({from:N.to,to:Z.to}),w.splice.apply(w,pe),K+=pe.length-3}}return w}function JA(c){var A=c.markedSpans;if(!!A){for(var S=0;S<A.length;++S)A[S].marker.detachLine(c);c.markedSpans=null}}function Gc(c,A){if(!!A){for(var S=0;S<A.length;++S)A[S].marker.attachLine(c);c.markedSpans=A}}function Hc(c){return c.inclusiveLeft?-1:0}function si(c){return c.inclusiveRight?1:0}function Yo(c,A){var S=c.lines.length-A.lines.length;if(S!=0)return S;var p=c.find(),w=A.find(),F=X(p.from,w.from)||Hc(c)-Hc(A);if(F)return-F;var B=X(p.to,w.to)||si(c)-si(A);return B||A.id-c.id}function Es(c,A){var S=Ua&&c.markedSpans,p;if(S)for(var w=void 0,F=0;F<S.length;++F)w=S[F],w.marker.collapsed&&(A?w.from:w.to)==null&&(!p||Yo(p,w.marker)<0)&&(p=w.marker);return p}function Cs(c){return Es(c,!0)}function zc(c){return Es(c,!1)}function xm(c,A){var S=Ua&&c.markedSpans,p;if(S)for(var w=0;w<S.length;++w){var F=S[w];F.marker.collapsed&&(F.from==null||F.from<A)&&(F.to==null||F.to>A)&&(!p||Yo(p,F.marker)<0)&&(p=F.marker)}return p}function hd(c,A,S,p,w){var F=Rt(c,A),B=Ua&&F.markedSpans;if(B)for(var N=0;N<B.length;++N){var K=B[N];if(!!K.marker.collapsed){var Z=K.marker.find(0),pe=X(Z.from,S)||Hc(K.marker)-Hc(w),ge=X(Z.to,p)||si(K.marker)-si(w);if(!(pe>=0&&ge<=0||pe<=0&&ge>=0)&&(pe<=0&&(K.marker.inclusiveRight&&w.inclusiveLeft?X(Z.to,S)>=0:X(Z.to,S)>0)||pe>=0&&(K.marker.inclusiveRight&&w.inclusiveLeft?X(Z.from,p)<=0:X(Z.from,p)<0)))return!0}}}function ra(c){for(var A;A=Cs(c);)c=A.find(-1,!0).line;return c}function U2(c){for(var A;A=zc(c);)c=A.find(1,!0).line;return c}function j2(c){for(var A,S;A=zc(c);)c=A.find(1,!0).line,(S||(S=[])).push(c);return S}function Wc(c,A){var S=Rt(c,A),p=ra(S);return S==p?A:sn(p)}function vm(c,A){if(A>c.lastLine())return A;var S=Rt(c,A),p;if(!go(c,S))return A;for(;p=zc(S);)S=p.find(1,!0).line;return sn(S)+1}function go(c,A){var S=Ua&&A.markedSpans;if(S){for(var p=void 0,w=0;w<S.length;++w)if(p=S[w],!!p.marker.collapsed){if(p.from==null)return!0;if(!p.marker.widgetNode&&p.from==0&&p.marker.inclusiveLeft&&ZA(c,A,p))return!0}}}function ZA(c,A,S){if(S.to==null){var p=S.marker.find(1,!0);return ZA(c,p.line,ja(p.line.markedSpans,S.marker))}if(S.marker.inclusiveRight&&S.to==A.text.length)return!0;for(var w=void 0,F=0;F<A.markedSpans.length;++F)if(w=A.markedSpans[F],w.marker.collapsed&&!w.marker.widgetNode&&w.from==S.to&&(w.to==null||w.to!=S.from)&&(w.marker.inclusiveLeft||S.marker.inclusiveRight)&&ZA(c,A,w))return!0}function Ga(c){c=ra(c);for(var A=0,S=c.parent,p=0;p<S.lines.length;++p){var w=S.lines[p];if(w==c)break;A+=w.height}for(var F=S.parent;F;S=F,F=S.parent)for(var B=0;B<F.children.length;++B){var N=F.children[B];if(N==S)break;A+=N.height}return A}function pd(c){if(c.height==0)return 0;for(var A=c.text.length,S,p=c;S=Cs(p);){var w=S.find(0,!0);p=w.from.line,A+=w.from.ch-w.to.ch}for(p=c;S=zc(p);){var F=S.find(0,!0);A-=p.text.length-F.from.ch,p=F.to.line,A+=p.text.length-F.to.ch}return A}function $A(c){var A=c.display,S=c.doc;A.maxLine=Rt(S,S.first),A.maxLineLength=pd(A.maxLine),A.maxLineChanged=!0,S.iter(function(p){var w=pd(p);w>A.maxLineLength&&(A.maxLineLength=w,A.maxLine=p)})}var ma=function(c,A,S){this.text=c,Gc(this,A),this.height=S?S(this):1};ma.prototype.lineNo=function(){return sn(this)},V0(ma);function md(c,A,S,p){c.text=A,c.stateAfter&&(c.stateAfter=null),c.styles&&(c.styles=null),c.order!=null&&(c.order=null),JA(c),Gc(c,S);var w=p?p(c):1;w!=c.height&&Vr(c,w)}function wm(c){c.parent=null,JA(c)}var ef={},u0={};function tf(c,A){if(!c||/^\s*$/.test(c))return null;var S=A.addModeClass?u0:ef;return S[c]||(S[c]=c.replace(/\S+/g,"cm-$&"))}function nf(c,A){var S=ue("span",null,null,d?"padding-right: .1px":null),p={pre:ue("pre",[S],"CodeMirror-line"),content:S,col:0,pos:0,cm:c,trailingSpace:!1,splitSpaces:c.getOption("lineWrapping")};A.measure={};for(var w=0;w<=(A.rest?A.rest.length:0);w++){var F=w?A.rest[w-1]:A.line,B=void 0;p.pos=0,p.addToken=Ha,st(c.display.measure)&&(B=ht(F,c.doc.direction))&&(p.addToken=Em(p.addToken,B)),p.map=[];var N=A!=c.display.externalMeasured&&sn(F);Ui(F,p,yn(c,F,N)),F.styleClasses&&(F.styleClasses.bgClass&&(p.bgClass=se(F.styleClasses.bgClass,p.bgClass||"")),F.styleClasses.textClass&&(p.textClass=se(F.styleClasses.textClass,p.textClass||""))),p.map.length==0&&p.map.push(0,0,p.content.appendChild(he(c.display.measure))),w==0?(A.measure.map=p.map,A.measure.cache={}):((A.measure.maps||(A.measure.maps=[])).push(p.map),(A.measure.caches||(A.measure.caches=[])).push({}))}if(d){var K=p.content.lastChild;(/\bcm-tab\b/.test(K.className)||K.querySelector&&K.querySelector(".cm-tab"))&&(p.content.className="cm-tab-wrap-hack")}return xt(c,"renderLine",c,A.line,p.pre),p.pre.className&&(p.textClass=se(p.pre.className,p.textClass||"")),p}function ym(c){var A=ee("span","\u2022","cm-invalidchar");return A.title="\\u"+c.charCodeAt(0).toString(16),A.setAttribute("aria-label",A.title),A}function Ha(c,A,S,p,w,F,B){if(!!A){var N=c.splitSpaces?rf(A,c.trailingSpace):A,K=c.cm.state.specialChars,Z=!1,pe;if(!K.test(A))c.col+=A.length,pe=document.createTextNode(N),c.map.push(c.pos,c.pos+A.length,pe),l&&u<9&&(Z=!0),c.pos+=A.length;else{pe=document.createDocumentFragment();for(var ge=0;;){K.lastIndex=ge;var Ge=K.exec(A),Oe=Ge?Ge.index-ge:A.length-ge;if(Oe){var nt=document.createTextNode(N.slice(ge,ge+Oe));l&&u<9?pe.appendChild(ee("span",[nt])):pe.appendChild(nt),c.map.push(c.pos,c.pos+Oe,nt),c.col+=Oe,c.pos+=Oe}if(!Ge)break;ge+=Oe+1;var ut=void 0;if(Ge[0]=="	"){var vt=c.cm.options.tabSize,Vt=vt-c.col%vt;ut=pe.appendChild(ee("span",le(Vt),"cm-tab")),ut.setAttribute("role","presentation"),ut.setAttribute("cm-text","	"),c.col+=Vt}else Ge[0]=="\r"||Ge[0]==`
`?(ut=pe.appendChild(ee("span",Ge[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),ut.setAttribute("cm-text",Ge[0]),c.col+=1):(ut=c.cm.options.specialCharPlaceholder(Ge[0]),ut.setAttribute("cm-text",Ge[0]),l&&u<9?pe.appendChild(ee("span",[ut])):pe.appendChild(ut),c.col+=1);c.map.push(c.pos,c.pos+1,ut),c.pos++}}if(c.trailingSpace=N.charCodeAt(A.length-1)==32,S||p||w||Z||F||B){var Lt=S||"";p&&(Lt+=p),w&&(Lt+=w);var Dt=ee("span",[pe],Lt,F);if(B)for(var kt in B)B.hasOwnProperty(kt)&&kt!="style"&&kt!="class"&&Dt.setAttribute(kt,B[kt]);return c.content.appendChild(Dt)}c.content.appendChild(pe)}}function rf(c,A){if(c.length>1&&!/  /.test(c))return c;for(var S=A,p="",w=0;w<c.length;w++){var F=c.charAt(w);F==" "&&S&&(w==c.length-1||c.charCodeAt(w+1)==32)&&(F="\xA0"),p+=F,S=F==" "}return p}function Em(c,A){return function(S,p,w,F,B,N,K){w=w?w+" cm-force-border":"cm-force-border";for(var Z=S.pos,pe=Z+p.length;;){for(var ge=void 0,Ge=0;Ge<A.length&&(ge=A[Ge],!(ge.to>Z&&ge.from<=Z));Ge++);if(ge.to>=pe)return c(S,p,w,F,B,N,K);c(S,p.slice(0,ge.to-Z),w,F,null,N,K),F=null,p=p.slice(ge.to-Z),Z=ge.to}}}function af(c,A,S,p){var w=!p&&S.widgetNode;w&&c.map.push(c.pos,c.pos+A,w),!p&&c.cm.display.input.needsContentAttribute&&(w||(w=c.content.appendChild(document.createElement("span"))),w.setAttribute("cm-marker",S.id)),w&&(c.cm.display.input.setUneditable(w),c.content.appendChild(w)),c.pos+=A,c.trailingSpace=!1}function Ui(c,A,S){var p=c.markedSpans,w=c.text,F=0;if(!p){for(var B=1;B<S.length;B+=2)A.addToken(A,w.slice(F,F=S[B]),tf(S[B+1],A.cm.options));return}for(var N=w.length,K=0,Z=1,pe="",ge,Ge,Oe=0,nt,ut,vt,Vt,Lt;;){if(Oe==K){nt=ut=vt=Ge="",Lt=null,Vt=null,Oe=1/0;for(var Dt=[],kt=void 0,nn=0;nn<p.length;++nn){var Qt=p[nn],bn=Qt.marker;if(bn.type=="bookmark"&&Qt.from==K&&bn.widgetNode)Dt.push(bn);else if(Qt.from<=K&&(Qt.to==null||Qt.to>K||bn.collapsed&&Qt.to==K&&Qt.from==K)){if(Qt.to!=null&&Qt.to!=K&&Oe>Qt.to&&(Oe=Qt.to,ut=""),bn.className&&(nt+=" "+bn.className),bn.css&&(Ge=(Ge?Ge+";":"")+bn.css),bn.startStyle&&Qt.from==K&&(vt+=" "+bn.startStyle),bn.endStyle&&Qt.to==Oe&&(kt||(kt=[])).push(bn.endStyle,Qt.to),bn.title&&((Lt||(Lt={})).title=bn.title),bn.attributes)for(var S0 in bn.attributes)(Lt||(Lt={}))[S0]=bn.attributes[S0];bn.collapsed&&(!Vt||Yo(Vt.marker,bn)<0)&&(Vt=Qt)}else Qt.from>K&&Oe>Qt.from&&(Oe=Qt.from)}if(kt)for(var Hr=0;Hr<kt.length;Hr+=2)kt[Hr+1]==Oe&&(ut+=" "+kt[Hr]);if(!Vt||Vt.from==K)for(var q0=0;q0<Dt.length;++q0)af(A,0,Dt[q0]);if(Vt&&(Vt.from||0)==K){if(af(A,(Vt.to==null?N+1:Vt.to)-K,Vt.marker,Vt.from==null),Vt.to==null)return;Vt.to==K&&(Vt=!1)}}if(K>=N)break;for(var aa=Math.min(N,Oe);;){if(pe){var Wi=K+pe.length;if(!Vt){var gr=Wi>aa?pe.slice(0,aa-K):pe;A.addToken(A,gr,ge?ge+nt:nt,vt,K+gr.length==Oe?ut:"",Ge,Lt)}if(Wi>=aa){pe=pe.slice(aa-K),K=aa;break}K=Wi,vt=""}pe=w.slice(F,F=S[Z++]),ge=tf(S[Z++],A.cm.options)}}}function Dr(c,A,S){this.line=A,this.rest=j2(A),this.size=this.rest?sn(re(this.rest))-S+1:1,this.node=this.text=null,this.hidden=go(c,A)}function Vs(c,A,S){for(var p=[],w,F=A;F<S;F=w){var B=new Dr(c.doc,Rt(c.doc,F),F);w=F+B.size,p.push(B)}return p}var Ds=null;function G2(c){Ds?Ds.ops.push(c):c.ownsGroup=Ds={ops:[c],delayedCallbacks:[]}}function H2(c){var A=c.delayedCallbacks,S=0;do{for(;S<A.length;S++)A[S].call(null);for(var p=0;p<c.ops.length;p++){var w=c.ops[p];if(w.cursorActivityHandlers)for(;w.cursorActivityCalled<w.cursorActivityHandlers.length;)w.cursorActivityHandlers[w.cursorActivityCalled++].call(null,w.cm)}}while(S<A.length)}function F0(c,A){var S=c.ownsGroup;if(!!S)try{H2(S)}finally{Ds=null,A(S)}}var Fs=null;function cr(c,A){var S=mt(c,A);if(!!S.length){var p=Array.prototype.slice.call(arguments,2),w;Ds?w=Ds.delayedCallbacks:Fs?w=Fs:(w=Fs=[],setTimeout(ji,0));for(var F=function(N){w.push(function(){return S[N].apply(null,p)})},B=0;B<S.length;++B)F(B)}}function ji(){var c=Fs;Fs=null;for(var A=0;A<c.length;++A)c[A]()}function Sd(c,A,S,p){for(var w=0;w<A.changes.length;w++){var F=A.changes[w];F=="text"?za(c,A):F=="gutter"?Xc(c,A,S,p):F=="class"?_d(c,A):F=="widget"&&Vm(c,A,p)}A.changes=null}function Sl(c){return c.node==c.text&&(c.node=ee("div",null,null,"position: relative"),c.text.parentNode&&c.text.parentNode.replaceChild(c.node,c.text),c.node.appendChild(c.text),l&&u<8&&(c.node.style.zIndex=2)),c.node}function Cm(c,A){var S=A.bgClass?A.bgClass+" "+(A.line.bgClass||""):A.line.bgClass;if(S&&(S+=" CodeMirror-linebackground"),A.background)S?A.background.className=S:(A.background.parentNode.removeChild(A.background),A.background=null);else if(S){var p=Sl(A);A.background=p.insertBefore(ee("div",null,S),p.firstChild),c.display.input.setUneditable(A.background)}}function gd(c,A){var S=c.display.externalMeasured;return S&&S.line==A.line?(c.display.externalMeasured=null,A.measure=S.measure,S.built):nf(c,A)}function za(c,A){var S=A.text.className,p=gd(c,A);A.text==A.node&&(A.node=p.pre),A.text.parentNode.replaceChild(p.pre,A.text),A.text=p.pre,p.bgClass!=A.bgClass||p.textClass!=A.textClass?(A.bgClass=p.bgClass,A.textClass=p.textClass,_d(c,A)):S&&(A.text.className=S)}function _d(c,A){Cm(c,A),A.line.wrapClass?Sl(A).className=A.line.wrapClass:A.node!=A.text&&(A.node.className="");var S=A.textClass?A.textClass+" "+(A.line.textClass||""):A.line.textClass;A.text.className=S||""}function Xc(c,A,S,p){if(A.gutter&&(A.node.removeChild(A.gutter),A.gutter=null),A.gutterBackground&&(A.node.removeChild(A.gutterBackground),A.gutterBackground=null),A.line.gutterClass){var w=Sl(A);A.gutterBackground=ee("div",null,"CodeMirror-gutter-background "+A.line.gutterClass,"left: "+(c.options.fixedGutter?p.fixedPos:-p.gutterTotalWidth)+"px; width: "+p.gutterTotalWidth+"px"),c.display.input.setUneditable(A.gutterBackground),w.insertBefore(A.gutterBackground,A.text)}var F=A.line.gutterMarkers;if(c.options.lineNumbers||F){var B=Sl(A),N=A.gutter=ee("div",null,"CodeMirror-gutter-wrapper","left: "+(c.options.fixedGutter?p.fixedPos:-p.gutterTotalWidth)+"px");if(N.setAttribute("aria-hidden","true"),c.display.input.setUneditable(N),B.insertBefore(N,A.text),A.line.gutterClass&&(N.className+=" "+A.line.gutterClass),c.options.lineNumbers&&(!F||!F["CodeMirror-linenumbers"])&&(A.lineNumber=N.appendChild(ee("div",b(c.options,S),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+p.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+c.display.lineNumInnerWidth+"px"))),F)for(var K=0;K<c.display.gutterSpecs.length;++K){var Z=c.display.gutterSpecs[K].className,pe=F.hasOwnProperty(Z)&&F[Z];pe&&N.appendChild(ee("div",[pe],"CodeMirror-gutter-elt","left: "+p.gutterLeft[Z]+"px; width: "+p.gutterWidth[Z]+"px"))}}}function Vm(c,A,S){A.alignable&&(A.alignable=null);for(var p=z("CodeMirror-linewidget"),w=A.node.firstChild,F=void 0;w;w=F)F=w.nextSibling,p.test(w.className)&&A.node.removeChild(w);xd(c,A,S)}function Dm(c,A,S,p){var w=gd(c,A);return A.text=A.node=w.pre,w.bgClass&&(A.bgClass=w.bgClass),w.textClass&&(A.textClass=w.textClass),_d(c,A),Xc(c,A,S,p),xd(c,A,p),A.node}function xd(c,A,S){if(tr(c,A.line,A,S,!0),A.rest)for(var p=0;p<A.rest.length;p++)tr(c,A.rest[p],A,S,!1)}function tr(c,A,S,p,w){if(!!A.widgets)for(var F=Sl(S),B=0,N=A.widgets;B<N.length;++B){var K=N[B],Z=ee("div",[K.node],"CodeMirror-linewidget"+(K.className?" "+K.className:""));K.handleMouseEvents||Z.setAttribute("cm-ignore-events","true"),Fm(K,Z,S,p),c.display.input.setUneditable(Z),w&&K.above?F.insertBefore(Z,S.gutter||S.text):F.appendChild(Z),cr(K,"redraw")}}function Fm(c,A,S,p){if(c.noHScroll){(S.alignable||(S.alignable=[])).push(A);var w=p.wrapperWidth;A.style.left=p.fixedPos+"px",c.coverGutter||(w-=p.gutterTotalWidth,A.style.paddingLeft=p.gutterTotalWidth+"px"),A.style.width=w+"px"}c.coverGutter&&(A.style.zIndex=5,A.style.position="relative",c.noHScroll||(A.style.marginLeft=-p.gutterTotalWidth+"px"))}function gl(c){if(c.height!=null)return c.height;var A=c.doc.cm;if(!A)return 0;if(!O(document.body,c.node)){var S="position: relative;";c.coverGutter&&(S+="margin-left: -"+A.display.gutters.offsetWidth+"px;"),c.noHScroll&&(S+="width: "+A.display.wrapper.clientWidth+"px;"),P(A.display.measure,ee("div",[c.node],null,S))}return c.height=c.node.parentNode.offsetHeight}function yi(c,A){for(var S=Nr(A);S!=c.wrapper;S=S.parentNode)if(!S||S.nodeType==1&&S.getAttribute("cm-ignore-events")=="true"||S.parentNode==c.sizer&&S!=c.mover)return!0}function qo(c){return c.lineSpace.offsetTop}function vd(c){return c.mover.offsetHeight-c.lineSpace.offsetHeight}function wd(c){if(c.cachedPaddingH)return c.cachedPaddingH;var A=P(c.measure,ee("pre","x","CodeMirror-line-like")),S=window.getComputedStyle?window.getComputedStyle(A):A.currentStyle,p={left:parseInt(S.paddingLeft),right:parseInt(S.paddingRight)};return!isNaN(p.left)&&!isNaN(p.right)&&(c.cachedPaddingH=p),p}function Sr(c){return tt-c.display.nativeBarWidth}function Y0(c){return c.display.scroller.clientWidth-Sr(c)-c.display.barWidth}function _l(c){return c.display.scroller.clientHeight-Sr(c)-c.display.barHeight}function z2(c,A,S){var p=c.options.lineWrapping,w=p&&Y0(c);if(!A.measure.heights||p&&A.measure.width!=w){var F=A.measure.heights=[];if(p){A.measure.width=w;for(var B=A.text.firstChild.getClientRects(),N=0;N<B.length-1;N++){var K=B[N],Z=B[N+1];Math.abs(K.bottom-Z.bottom)>2&&F.push((K.bottom+Z.top)/2-S.top)}}F.push(S.bottom-S.top)}}function Tm(c,A,S){if(c.line==A)return{map:c.measure.map,cache:c.measure.cache};if(c.rest){for(var p=0;p<c.rest.length;p++)if(c.rest[p]==A)return{map:c.measure.maps[p],cache:c.measure.caches[p]};for(var w=0;w<c.rest.length;w++)if(sn(c.rest[w])>S)return{map:c.measure.maps[w],cache:c.measure.caches[w],before:!0}}}function yd(c,A){A=ra(A);var S=sn(A),p=c.display.externalMeasured=new Dr(c.doc,A,S);p.lineN=S;var w=p.built=nf(c,p);return p.text=w.pre,P(c.display.lineMeasure,w.pre),p}function of(c,A,S,p){return Sa(c,xl(c,A),S,p)}function Ed(c,A){if(A>=c.display.viewFrom&&A<c.display.viewTo)return c.display.view[qc(c,A)];var S=c.display.externalMeasured;if(S&&A>=S.lineN&&A<S.lineN+S.size)return S}function xl(c,A){var S=sn(A),p=Ed(c,S);p&&!p.text?p=null:p&&p.changes&&(Sd(c,p,S,X2(c)),c.curOp.forceUpdate=!0),p||(p=yd(c,A));var w=Tm(p,A,S);return{line:A,view:p,rect:null,map:w.map,cache:w.cache,before:w.before,hasHeights:!1}}function Sa(c,A,S,p,w){A.before&&(S=-1);var F=S+(p||""),B;return A.cache.hasOwnProperty(F)?B=A.cache[F]:(A.rect||(A.rect=A.view.text.getBoundingClientRect()),A.hasHeights||(z2(c,A.view,A.rect),A.hasHeights=!0),B=W2(c,A,S,p),B.bogus||(A.cache[F]=B)),{left:B.left,right:B.right,top:w?B.rtop:B.top,bottom:w?B.rbottom:B.bottom}}var bm={left:0,right:0,top:0,bottom:0};function Pm(c,A,S){for(var p,w,F,B,N,K,Z=0;Z<c.length;Z+=3)if(N=c[Z],K=c[Z+1],A<N?(w=0,F=1,B="left"):A<K?(w=A-N,F=w+1):(Z==c.length-3||A==K&&c[Z+3]>A)&&(F=K-N,w=F-1,A>=K&&(B="right")),w!=null){if(p=c[Z+2],N==K&&S==(p.insertLeft?"left":"right")&&(B=S),S=="left"&&w==0)for(;Z&&c[Z-2]==c[Z-3]&&c[Z-1].insertLeft;)p=c[(Z-=3)+2],B="left";if(S=="right"&&w==K-N)for(;Z<c.length-3&&c[Z+3]==c[Z+4]&&!c[Z+5].insertLeft;)p=c[(Z+=3)+2],B="right";break}return{node:p,start:w,end:F,collapse:B,coverStart:N,coverEnd:K}}function Rm(c,A){var S=bm;if(A=="left")for(var p=0;p<c.length&&(S=c[p]).left==S.right;p++);else for(var w=c.length-1;w>=0&&(S=c[w]).left==S.right;w--);return S}function W2(c,A,S,p){var w=Pm(A.map,S,p),F=w.node,B=w.start,N=w.end,K=w.collapse,Z;if(F.nodeType==3){for(var pe=0;pe<4;pe++){for(;B&&Ee(A.line.text.charAt(w.coverStart+B));)--B;for(;w.coverStart+N<w.coverEnd&&Ee(A.line.text.charAt(w.coverStart+N));)++N;if(l&&u<9&&B==0&&N==w.coverEnd-w.coverStart?Z=F.parentNode.getBoundingClientRect():Z=Rm(U(F,B,N).getClientRects(),p),Z.left||Z.right||B==0)break;N=B,B=B-1,K="right"}l&&u<11&&(Z=y(c.display.measure,Z))}else{B>0&&(K=p="right");var ge;c.options.lineWrapping&&(ge=F.getClientRects()).length>1?Z=ge[p=="right"?ge.length-1:0]:Z=F.getBoundingClientRect()}if(l&&u<9&&!B&&(!Z||!Z.left&&!Z.right)){var Ge=F.parentNode.getClientRects()[0];Ge?Z={left:Ge.left,right:Ge.left+Dd(c.display),top:Ge.top,bottom:Ge.bottom}:Z=bm}for(var Oe=Z.top-A.rect.top,nt=Z.bottom-A.rect.top,ut=(Oe+nt)/2,vt=A.view.measure.heights,Vt=0;Vt<vt.length-1&&!(ut<vt[Vt]);Vt++);var Lt=Vt?vt[Vt-1]:0,Dt=vt[Vt],kt={left:(K=="right"?Z.right:Z.left)-A.rect.left,right:(K=="left"?Z.left:Z.right)-A.rect.left,top:Lt,bottom:Dt};return!Z.left&&!Z.right&&(kt.bogus=!0),c.options.singleCursorHeightPerLine||(kt.rtop=Oe,kt.rbottom=nt),kt}function y(c,A){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Cn(c))return A;var S=screen.logicalXDPI/screen.deviceXDPI,p=screen.logicalYDPI/screen.deviceYDPI;return{left:A.left*S,right:A.right*S,top:A.top*p,bottom:A.bottom*p}}function T(c){if(c.measure&&(c.measure.cache={},c.measure.heights=null,c.rest))for(var A=0;A<c.rest.length;A++)c.measure.caches[A]={}}function W(c){c.display.externalMeasure=null,q(c.display.lineMeasure);for(var A=0;A<c.display.view.length;A++)T(c.display.view[A])}function J(c){W(c),c.display.cachedCharWidth=c.display.cachedTextHeight=c.display.cachedPaddingH=null,c.options.lineWrapping||(c.display.maxLineChanged=!0),c.display.lineNumChars=null}function ae(c){return f&&C?-(c.body.getBoundingClientRect().left-parseInt(getComputedStyle(c.body).marginLeft)):c.defaultView.pageXOffset||(c.documentElement||c.body).scrollLeft}function me(c){return f&&C?-(c.body.getBoundingClientRect().top-parseInt(getComputedStyle(c.body).marginTop)):c.defaultView.pageYOffset||(c.documentElement||c.body).scrollTop}function Ve(c){var A=ra(c),S=A.widgets,p=0;if(S)for(var w=0;w<S.length;++w)S[w].above&&(p+=gl(S[w]));return p}function je(c,A,S,p,w){if(!w){var F=Ve(A);S.top+=F,S.bottom+=F}if(p=="line")return S;p||(p="local");var B=Ga(A);if(p=="local"?B+=qo(c.display):B-=c.display.viewOffset,p=="page"||p=="window"){var N=c.display.lineSpace.getBoundingClientRect();B+=N.top+(p=="window"?0:me(Re(c)));var K=N.left+(p=="window"?0:ae(Re(c)));S.left+=K,S.right+=K}return S.top+=B,S.bottom+=B,S}function et(c,A,S){if(S=="div")return A;var p=A.left,w=A.top;if(S=="page")p-=ae(Re(c)),w-=me(Re(c));else if(S=="local"||!S){var F=c.display.sizer.getBoundingClientRect();p+=F.left,w+=F.top}var B=c.display.lineSpace.getBoundingClientRect();return{left:p-B.left,top:w-B.top}}function ot(c,A,S,p,w){return p||(p=Rt(c.doc,A.line)),je(c,p,of(c,p,A.ch,w),S)}function ct(c,A,S,p,w,F){p=p||Rt(c.doc,A.line),w||(w=xl(c,p));function B(nt,ut){var vt=Sa(c,w,nt,ut?"right":"left",F);return ut?vt.left=vt.right:vt.right=vt.left,je(c,p,vt,S)}var N=ht(p,c.doc.direction),K=A.ch,Z=A.sticky;if(K>=p.text.length?(K=p.text.length,Z="before"):K<=0&&(K=0,Z="after"),!N)return B(Z=="before"?K-1:K,Z=="before");function pe(nt,ut,vt){var Vt=N[ut],Lt=Vt.level==1;return B(vt?nt-1:nt,Lt!=vt)}var ge=Ce(N,K,Z),Ge=gt,Oe=pe(K,ge,Z=="before");return Ge!=null&&(Oe.other=pe(K,Ge,Z!="before")),Oe}function Ot(c,A){var S=0;A=it(c.doc,A),c.options.lineWrapping||(S=Dd(c.display)*A.ch);var p=Rt(c.doc,A.line),w=Ga(p)+qo(c.display);return{left:S,right:S,top:w,bottom:w+p.height}}function Ht(c,A,S,p,w){var F=M(c,A,S);return F.xRel=w,p&&(F.outside=p),F}function _n(c,A,S){var p=c.doc;if(S+=c.display.viewOffset,S<0)return Ht(p.first,0,null,-1,-1);var w=E0(p,S),F=p.first+p.size-1;if(w>F)return Ht(p.first+p.size-1,Rt(p,F).text.length,null,1,1);A<0&&(A=0);for(var B=Rt(p,w);;){var N=Wa(c,B,w,A,S),K=xm(B,N.ch+(N.xRel>0||N.outside>0?1:0));if(!K)return N;var Z=K.find(1);if(Z.line==w)return Z;B=Rt(p,w=Z.line)}}function Ln(c,A,S,p){p-=Ve(A);var w=A.text.length,F=$e(function(B){return Sa(c,S,B-1).bottom<=p},w,0);return w=$e(function(B){return Sa(c,S,B).top>p},F,w),{begin:F,end:w}}function C0(c,A,S,p){S||(S=xl(c,A));var w=je(c,A,Sa(c,S,p),"line").top;return Ln(c,A,S,w)}function Gi(c,A,S,p){return c.bottom<=S?!1:c.top>S?!0:(p?c.left:c.right)>A}function Wa(c,A,S,p,w){w-=Ga(A);var F=xl(c,A),B=Ve(A),N=0,K=A.text.length,Z=!0,pe=ht(A,c.doc.direction);if(pe){var ge=(c.options.lineWrapping?PU:Cd)(c,A,S,F,pe,p,w);Z=ge.level!=1,N=Z?ge.from:ge.to-1,K=Z?ge.to:ge.from-1}var Ge=null,Oe=null,nt=$e(function(nn){var Qt=Sa(c,F,nn);return Qt.top+=B,Qt.bottom+=B,Gi(Qt,p,w,!1)?(Qt.top<=w&&Qt.left<=p&&(Ge=nn,Oe=Qt),!0):!1},N,K),ut,vt,Vt=!1;if(Oe){var Lt=p-Oe.left<Oe.right-p,Dt=Lt==Z;nt=Ge+(Dt?0:1),vt=Dt?"after":"before",ut=Lt?Oe.left:Oe.right}else{!Z&&(nt==K||nt==N)&&nt++,vt=nt==0?"after":nt==A.text.length?"before":Sa(c,F,nt-(Z?1:0)).bottom+B<=w==Z?"after":"before";var kt=ct(c,M(S,nt,vt),"line",A,F);ut=kt.left,Vt=w<kt.top?-1:w>=kt.bottom?1:0}return nt=ve(A.text,nt,1),Ht(S,nt,vt,Vt,p-ut)}function Cd(c,A,S,p,w,F,B){var N=$e(function(ge){var Ge=w[ge],Oe=Ge.level!=1;return Gi(ct(c,M(S,Oe?Ge.to:Ge.from,Oe?"before":"after"),"line",A,p),F,B,!0)},0,w.length-1),K=w[N];if(N>0){var Z=K.level!=1,pe=ct(c,M(S,Z?K.from:K.to,Z?"after":"before"),"line",A,p);Gi(pe,F,B,!0)&&pe.top>B&&(K=w[N-1])}return K}function PU(c,A,S,p,w,F,B){var N=Ln(c,A,p,B),K=N.begin,Z=N.end;/\s/.test(A.text.charAt(Z-1))&&Z--;for(var pe=null,ge=null,Ge=0;Ge<w.length;Ge++){var Oe=w[Ge];if(!(Oe.from>=Z||Oe.to<=K)){var nt=Oe.level!=1,ut=Sa(c,p,nt?Math.min(Z,Oe.to)-1:Math.max(K,Oe.from)).right,vt=ut<F?F-ut+1e9:ut-F;(!pe||ge>vt)&&(pe=Oe,ge=vt)}}return pe||(pe=w[w.length-1]),pe.from<K&&(pe={from:K,to:pe.to,level:pe.level}),pe.to>Z&&(pe={from:pe.from,to:Z,level:pe.level}),pe}var Kc;function Vd(c){if(c.cachedTextHeight!=null)return c.cachedTextHeight;if(Kc==null){Kc=ee("pre",null,"CodeMirror-line-like");for(var A=0;A<49;++A)Kc.appendChild(document.createTextNode("x")),Kc.appendChild(ee("br"));Kc.appendChild(document.createTextNode("x"))}P(c.measure,Kc);var S=Kc.offsetHeight/50;return S>3&&(c.cachedTextHeight=S),q(c.measure),S||1}function Dd(c){if(c.cachedCharWidth!=null)return c.cachedCharWidth;var A=ee("span","xxxxxxxxxx"),S=ee("pre",[A],"CodeMirror-line-like");P(c.measure,S);var p=A.getBoundingClientRect(),w=(p.right-p.left)/10;return w>2&&(c.cachedCharWidth=w),w||10}function X2(c){for(var A=c.display,S={},p={},w=A.gutters.clientLeft,F=A.gutters.firstChild,B=0;F;F=F.nextSibling,++B){var N=c.display.gutterSpecs[B].className;S[N]=F.offsetLeft+F.clientLeft+w,p[N]=F.clientWidth}return{fixedPos:K2(A),gutterTotalWidth:A.gutters.offsetWidth,gutterLeft:S,gutterWidth:p,wrapperWidth:A.wrapper.clientWidth}}function K2(c){return c.scroller.getBoundingClientRect().left-c.sizer.getBoundingClientRect().left}function GD(c){var A=Vd(c.display),S=c.options.lineWrapping,p=S&&Math.max(5,c.display.scroller.clientWidth/Dd(c.display)-3);return function(w){if(go(c.doc,w))return 0;var F=0;if(w.widgets)for(var B=0;B<w.widgets.length;B++)w.widgets[B].height&&(F+=w.widgets[B].height);return S?F+(Math.ceil(w.text.length/p)||1)*A:F+A}}function Y2(c){var A=c.doc,S=GD(c);A.iter(function(p){var w=S(p);w!=p.height&&Vr(p,w)})}function Yc(c,A,S,p){var w=c.display;if(!S&&Nr(A).getAttribute("cm-not-content")=="true")return null;var F,B,N=w.lineSpace.getBoundingClientRect();try{F=A.clientX-N.left,B=A.clientY-N.top}catch{return null}var K=_n(c,F,B),Z;if(p&&K.xRel>0&&(Z=Rt(c.doc,K.line).text).length==K.ch){var pe=We(Z,Z.length,c.options.tabSize)-Z.length;K=M(K.line,Math.max(0,Math.round((F-wd(c.display).left)/Dd(c.display))-pe))}return K}function qc(c,A){if(A>=c.display.viewTo||(A-=c.display.viewFrom,A<0))return null;for(var S=c.display.view,p=0;p<S.length;p++)if(A-=S[p].size,A<0)return p}function Hi(c,A,S,p){A==null&&(A=c.doc.first),S==null&&(S=c.doc.first+c.doc.size),p||(p=0);var w=c.display;if(p&&S<w.viewTo&&(w.updateLineNumbers==null||w.updateLineNumbers>A)&&(w.updateLineNumbers=A),c.curOp.viewChanged=!0,A>=w.viewTo)Ua&&Wc(c.doc,A)<w.viewTo&&wl(c);else if(S<=w.viewFrom)Ua&&vm(c.doc,S+p)>w.viewFrom?wl(c):(w.viewFrom+=p,w.viewTo+=p);else if(A<=w.viewFrom&&S>=w.viewTo)wl(c);else if(A<=w.viewFrom){var F=Lm(c,S,S+p,1);F?(w.view=w.view.slice(F.index),w.viewFrom=F.lineN,w.viewTo+=p):wl(c)}else if(S>=w.viewTo){var B=Lm(c,A,A,-1);B?(w.view=w.view.slice(0,B.index),w.viewTo=B.lineN):wl(c)}else{var N=Lm(c,A,A,-1),K=Lm(c,S,S+p,1);N&&K?(w.view=w.view.slice(0,N.index).concat(Vs(c,N.lineN,K.lineN)).concat(w.view.slice(K.index)),w.viewTo+=p):wl(c)}var Z=w.externalMeasured;Z&&(S<Z.lineN?Z.lineN+=p:A<Z.lineN+Z.size&&(w.externalMeasured=null))}function vl(c,A,S){c.curOp.viewChanged=!0;var p=c.display,w=c.display.externalMeasured;if(w&&A>=w.lineN&&A<w.lineN+w.size&&(p.externalMeasured=null),!(A<p.viewFrom||A>=p.viewTo)){var F=p.view[qc(c,A)];if(F.node!=null){var B=F.changes||(F.changes=[]);Ke(B,S)==-1&&B.push(S)}}}function wl(c){c.display.viewFrom=c.display.viewTo=c.doc.first,c.display.view=[],c.display.viewOffset=0}function Lm(c,A,S,p){var w=qc(c,A),F,B=c.display.view;if(!Ua||S==c.doc.first+c.doc.size)return{index:w,lineN:S};for(var N=c.display.viewFrom,K=0;K<w;K++)N+=B[K].size;if(N!=A){if(p>0){if(w==B.length-1)return null;F=N+B[w].size-A,w++}else F=N-A;A+=F,S+=F}for(;Wc(c.doc,S)!=S;){if(w==(p<0?0:B.length-1))return null;S+=p*B[w-(p<0?1:0)].size,w+=p}return{index:w,lineN:S}}function RU(c,A,S){var p=c.display,w=p.view;w.length==0||A>=p.viewTo||S<=p.viewFrom?(p.view=Vs(c,A,S),p.viewFrom=A):(p.viewFrom>A?p.view=Vs(c,A,p.viewFrom).concat(p.view):p.viewFrom<A&&(p.view=p.view.slice(qc(c,A))),p.viewFrom=A,p.viewTo<S?p.view=p.view.concat(Vs(c,p.viewTo,S)):p.viewTo>S&&(p.view=p.view.slice(0,qc(c,S)))),p.viewTo=S}function HD(c){for(var A=c.display.view,S=0,p=0;p<A.length;p++){var w=A[p];!w.hidden&&(!w.node||w.changes)&&++S}return S}function sf(c){c.display.input.showSelection(c.display.input.prepareSelection())}function zD(c,A){A===void 0&&(A=!0);var S=c.doc,p={},w=p.cursors=document.createDocumentFragment(),F=p.selection=document.createDocumentFragment(),B=c.options.$customCursor;B&&(A=!0);for(var N=0;N<S.sel.ranges.length;N++)if(!(!A&&N==S.sel.primIndex)){var K=S.sel.ranges[N];if(!(K.from().line>=c.display.viewTo||K.to().line<c.display.viewFrom)){var Z=K.empty();if(B){var pe=B(c,K);pe&&q2(c,pe,w)}else(Z||c.options.showCursorWhenSelecting)&&q2(c,K.head,w);Z||LU(c,K,F)}}return p}function q2(c,A,S){var p=ct(c,A,"div",null,null,!c.options.singleCursorHeightPerLine),w=S.appendChild(ee("div","\xA0","CodeMirror-cursor"));if(w.style.left=p.left+"px",w.style.top=p.top+"px",w.style.height=Math.max(0,p.bottom-p.top)*c.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(c.getWrapperElement().className)){var F=ot(c,A,"div",null,null),B=F.right-F.left;w.style.width=(B>0?B:c.defaultCharWidth())+"px"}if(p.other){var N=S.appendChild(ee("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));N.style.display="",N.style.left=p.other.left+"px",N.style.top=p.other.top+"px",N.style.height=(p.other.bottom-p.other.top)*.85+"px"}}function Bm(c,A){return c.top-A.top||c.left-A.left}function LU(c,A,S){var p=c.display,w=c.doc,F=document.createDocumentFragment(),B=wd(c.display),N=B.left,K=Math.max(p.sizerWidth,Y0(c)-p.sizer.offsetLeft)-B.right,Z=w.direction=="ltr";function pe(Dt,kt,nn,Qt){kt<0&&(kt=0),kt=Math.round(kt),Qt=Math.round(Qt),F.appendChild(ee("div",null,"CodeMirror-selected","position: absolute; left: "+Dt+`px;
                             top: `+kt+"px; width: "+(nn==null?K-Dt:nn)+`px;
                             height: `+(Qt-kt)+"px"))}function ge(Dt,kt,nn){var Qt=Rt(w,Dt),bn=Qt.text.length,S0,Hr;function q0(gr,Xi){return ot(c,M(Dt,gr),"div",Qt,Xi)}function aa(gr,Xi,$r){var Fr=C0(c,Qt,null,gr),_r=Xi=="ltr"==($r=="after")?"left":"right",nr=$r=="after"?Fr.begin:Fr.end-(/\s/.test(Qt.text.charAt(Fr.end-1))?2:1);return q0(nr,_r)[_r]}var Wi=ht(Qt,w.direction);return _t(Wi,kt||0,nn==null?bn:nn,function(gr,Xi,$r,Fr){var _r=$r=="ltr",nr=q0(gr,_r?"left":"right"),Ki=q0(Xi-1,_r?"right":"left"),Ud=kt==null&&gr==0,Fl=nn==null&&Xi==bn,ci=Fr==0,Qo=!Wi||Fr==Wi.length-1;if(Ki.top-nr.top<=3){var zr=(Z?Ud:Fl)&&ci,vx=(Z?Fl:Ud)&&Qo,Ps=zr?N:(_r?nr:Ki).left,eu=vx?K:(_r?Ki:nr).right;pe(Ps,nr.top,eu-Ps,nr.bottom)}else{var tu,Ci,jd,wx;_r?(tu=Z&&Ud&&ci?N:nr.left,Ci=Z?K:aa(gr,$r,"before"),jd=Z?N:aa(Xi,$r,"after"),wx=Z&&Fl&&Qo?K:Ki.right):(tu=Z?aa(gr,$r,"before"):N,Ci=!Z&&Ud&&ci?K:nr.right,jd=!Z&&Fl&&Qo?N:Ki.left,wx=Z?aa(Xi,$r,"after"):K),pe(tu,nr.top,Ci-tu,nr.bottom),nr.bottom<Ki.top&&pe(N,nr.bottom,null,Ki.top),pe(jd,Ki.top,wx-jd,Ki.bottom)}(!S0||Bm(nr,S0)<0)&&(S0=nr),Bm(Ki,S0)<0&&(S0=Ki),(!Hr||Bm(nr,Hr)<0)&&(Hr=nr),Bm(Ki,Hr)<0&&(Hr=Ki)}),{start:S0,end:Hr}}var Ge=A.from(),Oe=A.to();if(Ge.line==Oe.line)ge(Ge.line,Ge.ch,Oe.ch);else{var nt=Rt(w,Ge.line),ut=Rt(w,Oe.line),vt=ra(nt)==ra(ut),Vt=ge(Ge.line,Ge.ch,vt?nt.text.length+1:null).end,Lt=ge(Oe.line,vt?0:null,Oe.ch).start;vt&&(Vt.top<Lt.top-2?(pe(Vt.right,Vt.top,null,Vt.bottom),pe(N,Lt.top,Lt.left,Lt.bottom)):pe(Vt.right,Vt.top,Lt.left-Vt.right,Vt.bottom)),Vt.bottom<Lt.top&&pe(N,Vt.bottom,null,Lt.top)}S.appendChild(F)}function Q2(c){if(!!c.state.focused){var A=c.display;clearInterval(A.blinker);var S=!0;A.cursorDiv.style.visibility="",c.options.cursorBlinkRate>0?A.blinker=setInterval(function(){c.hasFocus()||Fd(c),A.cursorDiv.style.visibility=(S=!S)?"":"hidden"},c.options.cursorBlinkRate):c.options.cursorBlinkRate<0&&(A.cursorDiv.style.visibility="hidden")}}function WD(c){c.hasFocus()||(c.display.input.focus(),c.state.focused||Z2(c))}function J2(c){c.state.delayingBlurEvent=!0,setTimeout(function(){c.state.delayingBlurEvent&&(c.state.delayingBlurEvent=!1,c.state.focused&&Fd(c))},100)}function Z2(c,A){c.state.delayingBlurEvent&&!c.state.draggingText&&(c.state.delayingBlurEvent=!1),c.options.readOnly!="nocursor"&&(c.state.focused||(xt(c,"focus",c,A),c.state.focused=!0,ne(c.display.wrapper,"CodeMirror-focused"),!c.curOp&&c.display.selForContextMenu!=c.doc.sel&&(c.display.input.reset(),d&&setTimeout(function(){return c.display.input.reset(!0)},20)),c.display.input.receivedFocus()),Q2(c))}function Fd(c,A){c.state.delayingBlurEvent||(c.state.focused&&(xt(c,"blur",c,A),c.state.focused=!1,I(c.display.wrapper,"CodeMirror-focused")),clearInterval(c.display.blinker),setTimeout(function(){c.state.focused||(c.display.shift=!1)},150))}function Mm(c){for(var A=c.display,S=A.lineDiv.offsetTop,p=Math.max(0,A.scroller.getBoundingClientRect().top),w=A.lineDiv.getBoundingClientRect().top,F=0,B=0;B<A.view.length;B++){var N=A.view[B],K=c.options.lineWrapping,Z=void 0,pe=0;if(!N.hidden){if(w+=N.line.height,l&&u<8){var ge=N.node.offsetTop+N.node.offsetHeight;Z=ge-S,S=ge}else{var Ge=N.node.getBoundingClientRect();Z=Ge.bottom-Ge.top,!K&&N.text.firstChild&&(pe=N.text.firstChild.getBoundingClientRect().right-Ge.left-1)}var Oe=N.line.height-Z;if((Oe>.005||Oe<-.005)&&(w<p&&(F-=Oe),Vr(N.line,Z),XD(N.line),N.rest))for(var nt=0;nt<N.rest.length;nt++)XD(N.rest[nt]);if(pe>c.display.sizerWidth){var ut=Math.ceil(pe/Dd(c.display));ut>c.display.maxLineLength&&(c.display.maxLineLength=ut,c.display.maxLine=N.line,c.display.maxLineChanged=!0)}}}Math.abs(F)>2&&(A.scroller.scrollTop+=F)}function XD(c){if(c.widgets)for(var A=0;A<c.widgets.length;++A){var S=c.widgets[A],p=S.node.parentNode;p&&(S.height=p.offsetHeight)}}function Im(c,A,S){var p=S&&S.top!=null?Math.max(0,S.top):c.scroller.scrollTop;p=Math.floor(p-qo(c));var w=S&&S.bottom!=null?S.bottom:p+c.wrapper.clientHeight,F=E0(A,p),B=E0(A,w);if(S&&S.ensure){var N=S.ensure.from.line,K=S.ensure.to.line;N<F?(F=N,B=E0(A,Ga(Rt(A,N))+c.wrapper.clientHeight)):Math.min(K,A.lastLine())>=B&&(F=E0(A,Ga(Rt(A,K))-c.wrapper.clientHeight),B=K)}return{from:F,to:Math.max(B,F+1)}}function BU(c,A){if(!on(c,"scrollCursorIntoView")){var S=c.display,p=S.sizer.getBoundingClientRect(),w=null,F=S.wrapper.ownerDocument;if(A.top+p.top<0?w=!0:A.bottom+p.top>(F.defaultView.innerHeight||F.documentElement.clientHeight)&&(w=!1),w!=null&&!x){var B=ee("div","\u200B",null,`position: absolute;
                         top: `+(A.top-S.viewOffset-qo(c.display))+`px;
                         height: `+(A.bottom-A.top+Sr(c)+S.barHeight)+`px;
                         left: `+A.left+"px; width: "+Math.max(2,A.right-A.left)+"px;");c.display.lineSpace.appendChild(B),B.scrollIntoView(w),c.display.lineSpace.removeChild(B)}}}function MU(c,A,S,p){p==null&&(p=0);var w;!c.options.lineWrapping&&A==S&&(S=A.sticky=="before"?M(A.line,A.ch+1,"before"):A,A=A.ch?M(A.line,A.sticky=="before"?A.ch-1:A.ch,"after"):A);for(var F=0;F<5;F++){var B=!1,N=ct(c,A),K=!S||S==A?N:ct(c,S);w={left:Math.min(N.left,K.left),top:Math.min(N.top,K.top)-p,right:Math.max(N.left,K.left),bottom:Math.max(N.bottom,K.bottom)+p};var Z=$2(c,w),pe=c.doc.scrollTop,ge=c.doc.scrollLeft;if(Z.scrollTop!=null&&(cf(c,Z.scrollTop),Math.abs(c.doc.scrollTop-pe)>1&&(B=!0)),Z.scrollLeft!=null&&(Qc(c,Z.scrollLeft),Math.abs(c.doc.scrollLeft-ge)>1&&(B=!0)),!B)break}return w}function IU(c,A){var S=$2(c,A);S.scrollTop!=null&&cf(c,S.scrollTop),S.scrollLeft!=null&&Qc(c,S.scrollLeft)}function $2(c,A){var S=c.display,p=Vd(c.display);A.top<0&&(A.top=0);var w=c.curOp&&c.curOp.scrollTop!=null?c.curOp.scrollTop:S.scroller.scrollTop,F=_l(c),B={};A.bottom-A.top>F&&(A.bottom=A.top+F);var N=c.doc.height+vd(S),K=A.top<p,Z=A.bottom>N-p;if(A.top<w)B.scrollTop=K?0:A.top;else if(A.bottom>w+F){var pe=Math.min(A.top,(Z?N:A.bottom)-F);pe!=w&&(B.scrollTop=pe)}var ge=c.options.fixedGutter?0:S.gutters.offsetWidth,Ge=c.curOp&&c.curOp.scrollLeft!=null?c.curOp.scrollLeft:S.scroller.scrollLeft-ge,Oe=Y0(c)-S.gutters.offsetWidth,nt=A.right-A.left>Oe;return nt&&(A.right=A.left+Oe),A.left<10?B.scrollLeft=0:A.left<Ge?B.scrollLeft=Math.max(0,A.left+ge-(nt?0:10)):A.right>Oe+Ge-3&&(B.scrollLeft=A.right+(nt?0:10)-Oe),B}function ex(c,A){A!=null&&(Om(c),c.curOp.scrollTop=(c.curOp.scrollTop==null?c.doc.scrollTop:c.curOp.scrollTop)+A)}function Td(c){Om(c);var A=c.getCursor();c.curOp.scrollToPos={from:A,to:A,margin:c.options.cursorScrollMargin}}function lf(c,A,S){(A!=null||S!=null)&&Om(c),A!=null&&(c.curOp.scrollLeft=A),S!=null&&(c.curOp.scrollTop=S)}function OU(c,A){Om(c),c.curOp.scrollToPos=A}function Om(c){var A=c.curOp.scrollToPos;if(A){c.curOp.scrollToPos=null;var S=Ot(c,A.from),p=Ot(c,A.to);KD(c,S,p,A.margin)}}function KD(c,A,S,p){var w=$2(c,{left:Math.min(A.left,S.left),top:Math.min(A.top,S.top)-p,right:Math.max(A.right,S.right),bottom:Math.max(A.bottom,S.bottom)+p});lf(c,w.scrollLeft,w.scrollTop)}function cf(c,A){Math.abs(c.doc.scrollTop-A)<2||(i||nx(c,{top:A}),YD(c,A,!0),i&&nx(c),Af(c,100))}function YD(c,A,S){A=Math.max(0,Math.min(c.display.scroller.scrollHeight-c.display.scroller.clientHeight,A)),!(c.display.scroller.scrollTop==A&&!S)&&(c.doc.scrollTop=A,c.display.scrollbars.setScrollTop(A),c.display.scroller.scrollTop!=A&&(c.display.scroller.scrollTop=A))}function Qc(c,A,S,p){A=Math.max(0,Math.min(A,c.display.scroller.scrollWidth-c.display.scroller.clientWidth)),!((S?A==c.doc.scrollLeft:Math.abs(c.doc.scrollLeft-A)<2)&&!p)&&(c.doc.scrollLeft=A,$D(c),c.display.scroller.scrollLeft!=A&&(c.display.scroller.scrollLeft=A),c.display.scrollbars.setScrollLeft(A))}function uf(c){var A=c.display,S=A.gutters.offsetWidth,p=Math.round(c.doc.height+vd(c.display));return{clientHeight:A.scroller.clientHeight,viewHeight:A.wrapper.clientHeight,scrollWidth:A.scroller.scrollWidth,clientWidth:A.scroller.clientWidth,viewWidth:A.wrapper.clientWidth,barLeft:c.options.fixedGutter?S:0,docHeight:p,scrollHeight:p+Sr(c)+A.barHeight,nativeBarWidth:A.nativeBarWidth,gutterWidth:S}}var Jc=function(c,A,S){this.cm=S;var p=this.vert=ee("div",[ee("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),w=this.horiz=ee("div",[ee("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");p.tabIndex=w.tabIndex=-1,c(p),c(w),Je(p,"scroll",function(){p.clientHeight&&A(p.scrollTop,"vertical")}),Je(w,"scroll",function(){w.clientWidth&&A(w.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,l&&u<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Jc.prototype.update=function(c){var A=c.scrollWidth>c.clientWidth+1,S=c.scrollHeight>c.clientHeight+1,p=c.nativeBarWidth;if(S){this.vert.style.display="block",this.vert.style.bottom=A?p+"px":"0";var w=c.viewHeight-(A?p:0);this.vert.firstChild.style.height=Math.max(0,c.scrollHeight-c.clientHeight+w)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(A){this.horiz.style.display="block",this.horiz.style.right=S?p+"px":"0",this.horiz.style.left=c.barLeft+"px";var F=c.viewWidth-c.barLeft-(S?p:0);this.horiz.firstChild.style.width=Math.max(0,c.scrollWidth-c.clientWidth+F)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&c.clientHeight>0&&(p==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:S?p:0,bottom:A?p:0}},Jc.prototype.setScrollLeft=function(c){this.horiz.scrollLeft!=c&&(this.horiz.scrollLeft=c),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Jc.prototype.setScrollTop=function(c){this.vert.scrollTop!=c&&(this.vert.scrollTop=c),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Jc.prototype.zeroWidthHack=function(){var c=D&&!E?"12px":"18px";this.horiz.style.height=this.vert.style.width=c,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new at,this.disableVert=new at},Jc.prototype.enableZeroWidthBar=function(c,A,S){c.style.visibility="";function p(){var w=c.getBoundingClientRect(),F=S=="vert"?document.elementFromPoint(w.right-1,(w.top+w.bottom)/2):document.elementFromPoint((w.right+w.left)/2,w.bottom-1);F!=c?c.style.visibility="hidden":A.set(1e3,p)}A.set(1e3,p)},Jc.prototype.clear=function(){var c=this.horiz.parentNode;c.removeChild(this.horiz),c.removeChild(this.vert)};var df=function(){};df.prototype.update=function(){return{bottom:0,right:0}},df.prototype.setScrollLeft=function(){},df.prototype.setScrollTop=function(){},df.prototype.clear=function(){};function bd(c,A){A||(A=uf(c));var S=c.display.barWidth,p=c.display.barHeight;qD(c,A);for(var w=0;w<4&&S!=c.display.barWidth||p!=c.display.barHeight;w++)S!=c.display.barWidth&&c.options.lineWrapping&&Mm(c),qD(c,uf(c)),S=c.display.barWidth,p=c.display.barHeight}function qD(c,A){var S=c.display,p=S.scrollbars.update(A);S.sizer.style.paddingRight=(S.barWidth=p.right)+"px",S.sizer.style.paddingBottom=(S.barHeight=p.bottom)+"px",S.heightForcer.style.borderBottom=p.bottom+"px solid transparent",p.right&&p.bottom?(S.scrollbarFiller.style.display="block",S.scrollbarFiller.style.height=p.bottom+"px",S.scrollbarFiller.style.width=p.right+"px"):S.scrollbarFiller.style.display="",p.bottom&&c.options.coverGutterNextToScrollbar&&c.options.fixedGutter?(S.gutterFiller.style.display="block",S.gutterFiller.style.height=p.bottom+"px",S.gutterFiller.style.width=A.gutterWidth+"px"):S.gutterFiller.style.display=""}var QD={native:Jc,null:df};function JD(c){c.display.scrollbars&&(c.display.scrollbars.clear(),c.display.scrollbars.addClass&&I(c.display.wrapper,c.display.scrollbars.addClass)),c.display.scrollbars=new QD[c.options.scrollbarStyle](function(A){c.display.wrapper.insertBefore(A,c.display.scrollbarFiller),Je(A,"mousedown",function(){c.state.focused&&setTimeout(function(){return c.display.input.focus()},0)}),A.setAttribute("cm-not-content","true")},function(A,S){S=="horizontal"?Qc(c,A):cf(c,A)},c),c.display.scrollbars.addClass&&ne(c.display.wrapper,c.display.scrollbars.addClass)}var kU=0;function Zc(c){c.curOp={cm:c,viewChanged:!1,startHeight:c.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++kU,markArrays:null},G2(c.curOp)}function $c(c){var A=c.curOp;A&&F0(A,function(S){for(var p=0;p<S.ops.length;p++)S.ops[p].cm.curOp=null;NU(S)})}function NU(c){for(var A=c.ops,S=0;S<A.length;S++)UU(A[S]);for(var p=0;p<A.length;p++)jU(A[p]);for(var w=0;w<A.length;w++)GU(A[w]);for(var F=0;F<A.length;F++)HU(A[F]);for(var B=0;B<A.length;B++)zU(A[B])}function UU(c){var A=c.cm,S=A.display;XU(A),c.updateMaxLine&&$A(A),c.mustUpdate=c.viewChanged||c.forceUpdate||c.scrollTop!=null||c.scrollToPos&&(c.scrollToPos.from.line<S.viewFrom||c.scrollToPos.to.line>=S.viewTo)||S.maxLineChanged&&A.options.lineWrapping,c.update=c.mustUpdate&&new km(A,c.mustUpdate&&{top:c.scrollTop,ensure:c.scrollToPos},c.forceUpdate)}function jU(c){c.updatedDisplay=c.mustUpdate&&tx(c.cm,c.update)}function GU(c){var A=c.cm,S=A.display;c.updatedDisplay&&Mm(A),c.barMeasure=uf(A),S.maxLineChanged&&!A.options.lineWrapping&&(c.adjustWidthTo=of(A,S.maxLine,S.maxLine.text.length).left+3,A.display.sizerWidth=c.adjustWidthTo,c.barMeasure.scrollWidth=Math.max(S.scroller.clientWidth,S.sizer.offsetLeft+c.adjustWidthTo+Sr(A)+A.display.barWidth),c.maxScrollLeft=Math.max(0,S.sizer.offsetLeft+c.adjustWidthTo-Y0(A))),(c.updatedDisplay||c.selectionChanged)&&(c.preparedSelection=S.input.prepareSelection())}function HU(c){var A=c.cm;c.adjustWidthTo!=null&&(A.display.sizer.style.minWidth=c.adjustWidthTo+"px",c.maxScrollLeft<A.doc.scrollLeft&&Qc(A,Math.min(A.display.scroller.scrollLeft,c.maxScrollLeft),!0),A.display.maxLineChanged=!1);var S=c.focus&&c.focus==G(Re(A));c.preparedSelection&&A.display.input.showSelection(c.preparedSelection,S),(c.updatedDisplay||c.startHeight!=A.doc.height)&&bd(A,c.barMeasure),c.updatedDisplay&&ix(A,c.barMeasure),c.selectionChanged&&Q2(A),A.state.focused&&c.updateInput&&A.display.input.reset(c.typing),S&&WD(c.cm)}function zU(c){var A=c.cm,S=A.display,p=A.doc;if(c.updatedDisplay&&ZD(A,c.update),S.wheelStartX!=null&&(c.scrollTop!=null||c.scrollLeft!=null||c.scrollToPos)&&(S.wheelStartX=S.wheelStartY=null),c.scrollTop!=null&&YD(A,c.scrollTop,c.forceScroll),c.scrollLeft!=null&&Qc(A,c.scrollLeft,!0,!0),c.scrollToPos){var w=MU(A,it(p,c.scrollToPos.from),it(p,c.scrollToPos.to),c.scrollToPos.margin);BU(A,w)}var F=c.maybeHiddenMarkers,B=c.maybeUnhiddenMarkers;if(F)for(var N=0;N<F.length;++N)F[N].lines.length||xt(F[N],"hide");if(B)for(var K=0;K<B.length;++K)B[K].lines.length&&xt(B[K],"unhide");S.wrapper.offsetHeight&&(p.scrollTop=A.display.scroller.scrollTop),c.changeObjs&&xt(A,"changes",A,c.changeObjs),c.update&&c.update.finish()}function ia(c,A){if(c.curOp)return A();Zc(c);try{return A()}finally{$c(c)}}function jr(c,A){return function(){if(c.curOp)return A.apply(c,arguments);Zc(c);try{return A.apply(c,arguments)}finally{$c(c)}}}function Ei(c){return function(){if(this.curOp)return c.apply(this,arguments);Zc(this);try{return c.apply(this,arguments)}finally{$c(this)}}}function Gr(c){return function(){var A=this.cm;if(!A||A.curOp)return c.apply(this,arguments);Zc(A);try{return c.apply(this,arguments)}finally{$c(A)}}}function Af(c,A){c.doc.highlightFrontier<c.display.viewTo&&c.state.highlight.set(A,Te(WU,c))}function WU(c){var A=c.doc;if(!(A.highlightFrontier>=c.display.viewTo)){var S=+new Date+c.options.workTime,p=K0(c,A.highlightFrontier),w=[];A.iter(p.line,Math.min(A.first+A.size,c.display.viewTo+500),function(F){if(p.line>=c.display.viewFrom){var B=F.styles,N=F.text.length>c.options.maxHighlightLength?m0(A.mode,p.state):null,K=qt(c,F,p,!0);N&&(p.state=N),F.styles=K.styles;var Z=F.styleClasses,pe=K.classes;pe?F.styleClasses=pe:Z&&(F.styleClasses=null);for(var ge=!B||B.length!=F.styles.length||Z!=pe&&(!Z||!pe||Z.bgClass!=pe.bgClass||Z.textClass!=pe.textClass),Ge=0;!ge&&Ge<B.length;++Ge)ge=B[Ge]!=F.styles[Ge];ge&&w.push(p.line),F.stateAfter=p.save(),p.nextLine()}else F.text.length<=c.options.maxHighlightLength&&Na(c,F.text,p),F.stateAfter=p.line%5==0?p.save():null,p.nextLine();if(+new Date>S)return Af(c,c.options.workDelay),!0}),A.highlightFrontier=p.line,A.modeFrontier=Math.max(A.modeFrontier,p.line),w.length&&ia(c,function(){for(var F=0;F<w.length;F++)vl(c,w[F],"text")})}}var km=function(c,A,S){var p=c.display;this.viewport=A,this.visible=Im(p,c.doc,A),this.editorIsHidden=!p.wrapper.offsetWidth,this.wrapperHeight=p.wrapper.clientHeight,this.wrapperWidth=p.wrapper.clientWidth,this.oldDisplayWidth=Y0(c),this.force=S,this.dims=X2(c),this.events=[]};km.prototype.signal=function(c,A){On(c,A)&&this.events.push(arguments)},km.prototype.finish=function(){for(var c=0;c<this.events.length;c++)xt.apply(null,this.events[c])};function XU(c){var A=c.display;!A.scrollbarsClipped&&A.scroller.offsetWidth&&(A.nativeBarWidth=A.scroller.offsetWidth-A.scroller.clientWidth,A.heightForcer.style.height=Sr(c)+"px",A.sizer.style.marginBottom=-A.nativeBarWidth+"px",A.sizer.style.borderRightWidth=Sr(c)+"px",A.scrollbarsClipped=!0)}function KU(c){if(c.hasFocus())return null;var A=G(Re(c));if(!A||!O(c.display.lineDiv,A))return null;var S={activeElt:A};if(window.getSelection){var p=Be(c).getSelection();p.anchorNode&&p.extend&&O(c.display.lineDiv,p.anchorNode)&&(S.anchorNode=p.anchorNode,S.anchorOffset=p.anchorOffset,S.focusNode=p.focusNode,S.focusOffset=p.focusOffset)}return S}function YU(c){if(!(!c||!c.activeElt||c.activeElt==G(c.activeElt.ownerDocument))&&(c.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(c.activeElt.nodeName)&&c.anchorNode&&O(document.body,c.anchorNode)&&O(document.body,c.focusNode))){var A=c.activeElt.ownerDocument,S=A.defaultView.getSelection(),p=A.createRange();p.setEnd(c.anchorNode,c.anchorOffset),p.collapse(!1),S.removeAllRanges(),S.addRange(p),S.extend(c.focusNode,c.focusOffset)}}function tx(c,A){var S=c.display,p=c.doc;if(A.editorIsHidden)return wl(c),!1;if(!A.force&&A.visible.from>=S.viewFrom&&A.visible.to<=S.viewTo&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo)&&S.renderedView==S.view&&HD(c)==0)return!1;eF(c)&&(wl(c),A.dims=X2(c));var w=p.first+p.size,F=Math.max(A.visible.from-c.options.viewportMargin,p.first),B=Math.min(w,A.visible.to+c.options.viewportMargin);S.viewFrom<F&&F-S.viewFrom<20&&(F=Math.max(p.first,S.viewFrom)),S.viewTo>B&&S.viewTo-B<20&&(B=Math.min(w,S.viewTo)),Ua&&(F=Wc(c.doc,F),B=vm(c.doc,B));var N=F!=S.viewFrom||B!=S.viewTo||S.lastWrapHeight!=A.wrapperHeight||S.lastWrapWidth!=A.wrapperWidth;RU(c,F,B),S.viewOffset=Ga(Rt(c.doc,S.viewFrom)),c.display.mover.style.top=S.viewOffset+"px";var K=HD(c);if(!N&&K==0&&!A.force&&S.renderedView==S.view&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo))return!1;var Z=KU(c);return K>4&&(S.lineDiv.style.display="none"),qU(c,S.updateLineNumbers,A.dims),K>4&&(S.lineDiv.style.display=""),S.renderedView=S.view,YU(Z),q(S.cursorDiv),q(S.selectionDiv),S.gutters.style.height=S.sizer.style.minHeight=0,N&&(S.lastWrapHeight=A.wrapperHeight,S.lastWrapWidth=A.wrapperWidth,Af(c,400)),S.updateLineNumbers=null,!0}function ZD(c,A){for(var S=A.viewport,p=!0;;p=!1){if(!p||!c.options.lineWrapping||A.oldDisplayWidth==Y0(c)){if(S&&S.top!=null&&(S={top:Math.min(c.doc.height+vd(c.display)-_l(c),S.top)}),A.visible=Im(c.display,c.doc,S),A.visible.from>=c.display.viewFrom&&A.visible.to<=c.display.viewTo)break}else p&&(A.visible=Im(c.display,c.doc,S));if(!tx(c,A))break;Mm(c);var w=uf(c);sf(c),bd(c,w),ix(c,w),A.force=!1}A.signal(c,"update",c),(c.display.viewFrom!=c.display.reportedViewFrom||c.display.viewTo!=c.display.reportedViewTo)&&(A.signal(c,"viewportChange",c,c.display.viewFrom,c.display.viewTo),c.display.reportedViewFrom=c.display.viewFrom,c.display.reportedViewTo=c.display.viewTo)}function nx(c,A){var S=new km(c,A);if(tx(c,S)){Mm(c),ZD(c,S);var p=uf(c);sf(c),bd(c,p),ix(c,p),S.finish()}}function qU(c,A,S){var p=c.display,w=c.options.lineNumbers,F=p.lineDiv,B=F.firstChild;function N(nt){var ut=nt.nextSibling;return d&&D&&c.display.currentWheelTarget==nt?nt.style.display="none":nt.parentNode.removeChild(nt),ut}for(var K=p.view,Z=p.viewFrom,pe=0;pe<K.length;pe++){var ge=K[pe];if(!ge.hidden)if(!ge.node||ge.node.parentNode!=F){var Ge=Dm(c,ge,Z,S);F.insertBefore(Ge,B)}else{for(;B!=ge.node;)B=N(B);var Oe=w&&A!=null&&A<=Z&&ge.lineNumber;ge.changes&&(Ke(ge.changes,"gutter")>-1&&(Oe=!1),Sd(c,ge,Z,S)),Oe&&(q(ge.lineNumber),ge.lineNumber.appendChild(document.createTextNode(b(c.options,Z)))),B=ge.node.nextSibling}Z+=ge.size}for(;B;)B=N(B)}function rx(c){var A=c.gutters.offsetWidth;c.sizer.style.marginLeft=A+"px",cr(c,"gutterChanged",c)}function ix(c,A){c.display.sizer.style.minHeight=A.docHeight+"px",c.display.heightForcer.style.top=A.docHeight+"px",c.display.gutters.style.height=A.docHeight+c.display.barHeight+Sr(c)+"px"}function $D(c){var A=c.display,S=A.view;if(!(!A.alignWidgets&&(!A.gutters.firstChild||!c.options.fixedGutter))){for(var p=K2(A)-A.scroller.scrollLeft+c.doc.scrollLeft,w=A.gutters.offsetWidth,F=p+"px",B=0;B<S.length;B++)if(!S[B].hidden){c.options.fixedGutter&&(S[B].gutter&&(S[B].gutter.style.left=F),S[B].gutterBackground&&(S[B].gutterBackground.style.left=F));var N=S[B].alignable;if(N)for(var K=0;K<N.length;K++)N[K].style.left=F}c.options.fixedGutter&&(A.gutters.style.left=p+w+"px")}}function eF(c){if(!c.options.lineNumbers)return!1;var A=c.doc,S=b(c.options,A.first+A.size-1),p=c.display;if(S.length!=p.lineNumChars){var w=p.measure.appendChild(ee("div",[ee("div",S)],"CodeMirror-linenumber CodeMirror-gutter-elt")),F=w.firstChild.offsetWidth,B=w.offsetWidth-F;return p.lineGutter.style.width="",p.lineNumInnerWidth=Math.max(F,p.lineGutter.offsetWidth-B)+1,p.lineNumWidth=p.lineNumInnerWidth+B,p.lineNumChars=p.lineNumInnerWidth?S.length:-1,p.lineGutter.style.width=p.lineNumWidth+"px",rx(c.display),!0}return!1}function ax(c,A){for(var S=[],p=!1,w=0;w<c.length;w++){var F=c[w],B=null;if(typeof F!="string"&&(B=F.style,F=F.className),F=="CodeMirror-linenumbers")if(A)p=!0;else continue;S.push({className:F,style:B})}return A&&!p&&S.push({className:"CodeMirror-linenumbers",style:null}),S}function tF(c){var A=c.gutters,S=c.gutterSpecs;q(A),c.lineGutter=null;for(var p=0;p<S.length;++p){var w=S[p],F=w.className,B=w.style,N=A.appendChild(ee("div",null,"CodeMirror-gutter "+F));B&&(N.style.cssText=B),F=="CodeMirror-linenumbers"&&(c.lineGutter=N,N.style.width=(c.lineNumWidth||1)+"px")}A.style.display=S.length?"":"none",rx(c)}function ff(c){tF(c.display),Hi(c),$D(c)}function QU(c,A,S,p){var w=this;this.input=S,w.scrollbarFiller=ee("div",null,"CodeMirror-scrollbar-filler"),w.scrollbarFiller.setAttribute("cm-not-content","true"),w.gutterFiller=ee("div",null,"CodeMirror-gutter-filler"),w.gutterFiller.setAttribute("cm-not-content","true"),w.lineDiv=ue("div",null,"CodeMirror-code"),w.selectionDiv=ee("div",null,null,"position: relative; z-index: 1"),w.cursorDiv=ee("div",null,"CodeMirror-cursors"),w.measure=ee("div",null,"CodeMirror-measure"),w.lineMeasure=ee("div",null,"CodeMirror-measure"),w.lineSpace=ue("div",[w.measure,w.lineMeasure,w.selectionDiv,w.cursorDiv,w.lineDiv],null,"position: relative; outline: none");var F=ue("div",[w.lineSpace],"CodeMirror-lines");w.mover=ee("div",[F],null,"position: relative"),w.sizer=ee("div",[w.mover],"CodeMirror-sizer"),w.sizerWidth=null,w.heightForcer=ee("div",null,null,"position: absolute; height: "+tt+"px; width: 1px;"),w.gutters=ee("div",null,"CodeMirror-gutters"),w.lineGutter=null,w.scroller=ee("div",[w.sizer,w.heightForcer,w.gutters],"CodeMirror-scroll"),w.scroller.setAttribute("tabIndex","-1"),w.wrapper=ee("div",[w.scrollbarFiller,w.gutterFiller,w.scroller],"CodeMirror"),w.wrapper.setAttribute("translate","no"),l&&u<8&&(w.gutters.style.zIndex=-1,w.scroller.style.paddingRight=0),!d&&!(i&&V)&&(w.scroller.draggable=!0),c&&(c.appendChild?c.appendChild(w.wrapper):c(w.wrapper)),w.viewFrom=w.viewTo=A.first,w.reportedViewFrom=w.reportedViewTo=A.first,w.view=[],w.renderedView=null,w.externalMeasured=null,w.viewOffset=0,w.lastWrapHeight=w.lastWrapWidth=0,w.updateLineNumbers=null,w.nativeBarWidth=w.barHeight=w.barWidth=0,w.scrollbarsClipped=!1,w.lineNumWidth=w.lineNumInnerWidth=w.lineNumChars=null,w.alignWidgets=!1,w.cachedCharWidth=w.cachedTextHeight=w.cachedPaddingH=null,w.maxLine=null,w.maxLineLength=0,w.maxLineChanged=!1,w.wheelDX=w.wheelDY=w.wheelStartX=w.wheelStartY=null,w.shift=!1,w.selForContextMenu=null,w.activeTouch=null,w.gutterSpecs=ax(p.gutters,p.lineNumbers),tF(w),S.init(w)}var Nm=0,Ts=null;l?Ts=-.53:i?Ts=15:f?Ts=-.7:_&&(Ts=-1/3);function nF(c){var A=c.wheelDeltaX,S=c.wheelDeltaY;return A==null&&c.detail&&c.axis==c.HORIZONTAL_AXIS&&(A=c.detail),S==null&&c.detail&&c.axis==c.VERTICAL_AXIS?S=c.detail:S==null&&(S=c.wheelDelta),{x:A,y:S}}function JU(c){var A=nF(c);return A.x*=Ts,A.y*=Ts,A}function rF(c,A){f&&m==102&&(c.display.chromeScrollHack==null?c.display.sizer.style.pointerEvents="none":clearTimeout(c.display.chromeScrollHack),c.display.chromeScrollHack=setTimeout(function(){c.display.chromeScrollHack=null,c.display.sizer.style.pointerEvents=""},100));var S=nF(A),p=S.x,w=S.y,F=Ts;A.deltaMode===0&&(p=A.deltaX,w=A.deltaY,F=1);var B=c.display,N=B.scroller,K=N.scrollWidth>N.clientWidth,Z=N.scrollHeight>N.clientHeight;if(!!(p&&K||w&&Z)){if(w&&D&&d){e:for(var pe=A.target,ge=B.view;pe!=N;pe=pe.parentNode)for(var Ge=0;Ge<ge.length;Ge++)if(ge[Ge].node==pe){c.display.currentWheelTarget=pe;break e}}if(p&&!i&&!g&&F!=null){w&&Z&&cf(c,Math.max(0,N.scrollTop+w*F)),Qc(c,Math.max(0,N.scrollLeft+p*F)),(!w||w&&Z)&&X0(A),B.wheelStartX=null;return}if(w&&F!=null){var Oe=w*F,nt=c.doc.scrollTop,ut=nt+B.wrapper.clientHeight;Oe<0?nt=Math.max(0,nt+Oe-50):ut=Math.min(c.doc.height,ut+Oe+50),nx(c,{top:nt,bottom:ut})}Nm<20&&A.deltaMode!==0&&(B.wheelStartX==null?(B.wheelStartX=N.scrollLeft,B.wheelStartY=N.scrollTop,B.wheelDX=p,B.wheelDY=w,setTimeout(function(){if(B.wheelStartX!=null){var vt=N.scrollLeft-B.wheelStartX,Vt=N.scrollTop-B.wheelStartY,Lt=Vt&&B.wheelDY&&Vt/B.wheelDY||vt&&B.wheelDX&&vt/B.wheelDX;B.wheelStartX=B.wheelStartY=null,Lt&&(Ts=(Ts*Nm+Lt)/(Nm+1),++Nm)}},200)):(B.wheelDX+=p,B.wheelDY+=w))}}var ga=function(c,A){this.ranges=c,this.primIndex=A};ga.prototype.primary=function(){return this.ranges[this.primIndex]},ga.prototype.equals=function(c){if(c==this)return!0;if(c.primIndex!=this.primIndex||c.ranges.length!=this.ranges.length)return!1;for(var A=0;A<this.ranges.length;A++){var S=this.ranges[A],p=c.ranges[A];if(!Ae(S.anchor,p.anchor)||!Ae(S.head,p.head))return!1}return!0},ga.prototype.deepCopy=function(){for(var c=[],A=0;A<this.ranges.length;A++)c[A]=new Zn(xe(this.ranges[A].anchor),xe(this.ranges[A].head));return new ga(c,this.primIndex)},ga.prototype.somethingSelected=function(){for(var c=0;c<this.ranges.length;c++)if(!this.ranges[c].empty())return!0;return!1},ga.prototype.contains=function(c,A){A||(A=c);for(var S=0;S<this.ranges.length;S++){var p=this.ranges[S];if(X(A,p.from())>=0&&X(c,p.to())<=0)return S}return-1};var Zn=function(c,A){this.anchor=c,this.head=A};Zn.prototype.from=function(){return ze(this.anchor,this.head)},Zn.prototype.to=function(){return Me(this.anchor,this.head)},Zn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function _o(c,A,S){var p=c&&c.options.selectionsMayTouch,w=A[S];A.sort(function(Ge,Oe){return X(Ge.from(),Oe.from())}),S=Ke(A,w);for(var F=1;F<A.length;F++){var B=A[F],N=A[F-1],K=X(N.to(),B.from());if(p&&!B.empty()?K>0:K>=0){var Z=ze(N.from(),B.from()),pe=Me(N.to(),B.to()),ge=N.empty()?B.from()==B.head:N.from()==N.head;F<=S&&--S,A.splice(--F,2,new Zn(ge?pe:Z,ge?Z:pe))}}return new ga(A,S)}function yl(c,A){return new ga([new Zn(c,A||c)],0)}function El(c){return c.text?M(c.from.line+c.text.length-1,re(c.text).length+(c.text.length==1?c.from.ch:0)):c.to}function iF(c,A){if(X(c,A.from)<0)return c;if(X(c,A.to)<=0)return El(A);var S=c.line+A.text.length-(A.to.line-A.from.line)-1,p=c.ch;return c.line==A.to.line&&(p+=El(A).ch-A.to.ch),M(S,p)}function ox(c,A){for(var S=[],p=0;p<c.sel.ranges.length;p++){var w=c.sel.ranges[p];S.push(new Zn(iF(w.anchor,A),iF(w.head,A)))}return _o(c.cm,S,c.sel.primIndex)}function aF(c,A,S){return c.line==A.line?M(S.line,c.ch-A.ch+S.ch):M(S.line+(c.line-A.line),c.ch)}function ZU(c,A,S){for(var p=[],w=M(c.first,0),F=w,B=0;B<A.length;B++){var N=A[B],K=aF(N.from,w,F),Z=aF(El(N),w,F);if(w=N.to,F=Z,S=="around"){var pe=c.sel.ranges[B],ge=X(pe.head,pe.anchor)<0;p[B]=new Zn(ge?Z:K,ge?K:Z)}else p[B]=new Zn(K,K)}return new ga(p,c.sel.primIndex)}function sx(c){c.doc.mode=Jr(c.options,c.doc.modeOption),hf(c)}function hf(c){c.doc.iter(function(A){A.stateAfter&&(A.stateAfter=null),A.styles&&(A.styles=null)}),c.doc.modeFrontier=c.doc.highlightFrontier=c.doc.first,Af(c,100),c.state.modeGen++,c.curOp&&Hi(c)}function oF(c,A){return A.from.ch==0&&A.to.ch==0&&re(A.text)==""&&(!c.cm||c.cm.options.wholeLineUpdateBefore)}function lx(c,A,S,p){function w(Lt){return S?S[Lt]:null}function F(Lt,Dt,kt){md(Lt,Dt,kt,p),cr(Lt,"change",Lt,A)}function B(Lt,Dt){for(var kt=[],nn=Lt;nn<Dt;++nn)kt.push(new ma(Z[nn],w(nn),p));return kt}var N=A.from,K=A.to,Z=A.text,pe=Rt(c,N.line),ge=Rt(c,K.line),Ge=re(Z),Oe=w(Z.length-1),nt=K.line-N.line;if(A.full)c.insert(0,B(0,Z.length)),c.remove(Z.length,c.size-Z.length);else if(oF(c,A)){var ut=B(0,Z.length-1);F(ge,ge.text,Oe),nt&&c.remove(N.line,nt),ut.length&&c.insert(N.line,ut)}else if(pe==ge)if(Z.length==1)F(pe,pe.text.slice(0,N.ch)+Ge+pe.text.slice(K.ch),Oe);else{var vt=B(1,Z.length-1);vt.push(new ma(Ge+pe.text.slice(K.ch),Oe,p)),F(pe,pe.text.slice(0,N.ch)+Z[0],w(0)),c.insert(N.line+1,vt)}else if(Z.length==1)F(pe,pe.text.slice(0,N.ch)+Z[0]+ge.text.slice(K.ch),w(0)),c.remove(N.line+1,nt);else{F(pe,pe.text.slice(0,N.ch)+Z[0],w(0)),F(ge,Ge+ge.text.slice(K.ch),Oe);var Vt=B(1,Z.length-1);nt>1&&c.remove(N.line+1,nt-1),c.insert(N.line+1,Vt)}cr(c,"change",c,A)}function Cl(c,A,S){function p(w,F,B){if(w.linked)for(var N=0;N<w.linked.length;++N){var K=w.linked[N];if(K.doc!=F){var Z=B&&K.sharedHist;S&&!Z||(A(K.doc,Z),p(K.doc,w,Z))}}}p(c,null,!0)}function sF(c,A){if(A.cm)throw new Error("This document is already in use.");c.doc=A,A.cm=c,Y2(c),sx(c),lF(c),c.options.direction=A.direction,c.options.lineWrapping||$A(c),c.options.mode=A.modeOption,Hi(c)}function lF(c){(c.doc.direction=="rtl"?ne:I)(c.display.lineDiv,"CodeMirror-rtl")}function $U(c){ia(c,function(){lF(c),Hi(c)})}function Um(c){this.done=[],this.undone=[],this.undoDepth=c?c.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=c?c.maxGeneration:1}function cx(c,A){var S={from:xe(A.from),to:El(A),text:D0(c,A.from,A.to)};return dF(c,S,A.from.line,A.to.line+1),Cl(c,function(p){return dF(p,S,A.from.line,A.to.line+1)},!0),S}function cF(c){for(;c.length;){var A=re(c);if(A.ranges)c.pop();else break}}function ej(c,A){if(A)return cF(c.done),re(c.done);if(c.done.length&&!re(c.done).ranges)return re(c.done);if(c.done.length>1&&!c.done[c.done.length-2].ranges)return c.done.pop(),re(c.done)}function uF(c,A,S,p){var w=c.history;w.undone.length=0;var F=+new Date,B,N;if((w.lastOp==p||w.lastOrigin==A.origin&&A.origin&&(A.origin.charAt(0)=="+"&&w.lastModTime>F-(c.cm?c.cm.options.historyEventDelay:500)||A.origin.charAt(0)=="*"))&&(B=ej(w,w.lastOp==p)))N=re(B.changes),X(A.from,A.to)==0&&X(A.from,N.to)==0?N.to=El(A):B.changes.push(cx(c,A));else{var K=re(w.done);for((!K||!K.ranges)&&jm(c.sel,w.done),B={changes:[cx(c,A)],generation:w.generation},w.done.push(B);w.done.length>w.undoDepth;)w.done.shift(),w.done[0].ranges||w.done.shift()}w.done.push(S),w.generation=++w.maxGeneration,w.lastModTime=w.lastSelTime=F,w.lastOp=w.lastSelOp=p,w.lastOrigin=w.lastSelOrigin=A.origin,N||xt(c,"historyAdded")}function tj(c,A,S,p){var w=A.charAt(0);return w=="*"||w=="+"&&S.ranges.length==p.ranges.length&&S.somethingSelected()==p.somethingSelected()&&new Date-c.history.lastSelTime<=(c.cm?c.cm.options.historyEventDelay:500)}function nj(c,A,S,p){var w=c.history,F=p&&p.origin;S==w.lastSelOp||F&&w.lastSelOrigin==F&&(w.lastModTime==w.lastSelTime&&w.lastOrigin==F||tj(c,F,re(w.done),A))?w.done[w.done.length-1]=A:jm(A,w.done),w.lastSelTime=+new Date,w.lastSelOrigin=F,w.lastSelOp=S,p&&p.clearRedo!==!1&&cF(w.undone)}function jm(c,A){var S=re(A);S&&S.ranges&&S.equals(c)||A.push(c)}function dF(c,A,S,p){var w=A["spans_"+c.id],F=0;c.iter(Math.max(c.first,S),Math.min(c.first+c.size,p),function(B){B.markedSpans&&((w||(w=A["spans_"+c.id]={}))[F]=B.markedSpans),++F})}function rj(c){if(!c)return null;for(var A,S=0;S<c.length;++S)c[S].marker.explicitlyCleared?A||(A=c.slice(0,S)):A&&A.push(c[S]);return A?A.length?A:null:c}function ij(c,A){var S=A["spans_"+c.id];if(!S)return null;for(var p=[],w=0;w<A.text.length;++w)p.push(rj(S[w]));return p}function AF(c,A){var S=ij(c,A),p=k0(c,A);if(!S)return p;if(!p)return S;for(var w=0;w<S.length;++w){var F=S[w],B=p[w];if(F&&B){e:for(var N=0;N<B.length;++N){for(var K=B[N],Z=0;Z<F.length;++Z)if(F[Z].marker==K.marker)continue e;F.push(K)}}else B&&(S[w]=B)}return S}function Pd(c,A,S){for(var p=[],w=0;w<c.length;++w){var F=c[w];if(F.ranges){p.push(S?ga.prototype.deepCopy.call(F):F);continue}var B=F.changes,N=[];p.push({changes:N});for(var K=0;K<B.length;++K){var Z=B[K],pe=void 0;if(N.push({from:Z.from,to:Z.to,text:Z.text}),A)for(var ge in Z)(pe=ge.match(/^spans_(\d+)$/))&&Ke(A,Number(pe[1]))>-1&&(re(N)[ge]=Z[ge],delete Z[ge])}}return p}function ux(c,A,S,p){if(p){var w=c.anchor;if(S){var F=X(A,w)<0;F!=X(S,w)<0?(w=A,A=S):F!=X(A,S)<0&&(A=S)}return new Zn(w,A)}else return new Zn(S||A,A)}function Gm(c,A,S,p,w){w==null&&(w=c.cm&&(c.cm.display.shift||c.extend)),li(c,new ga([ux(c.sel.primary(),A,S,w)],0),p)}function fF(c,A,S){for(var p=[],w=c.cm&&(c.cm.display.shift||c.extend),F=0;F<c.sel.ranges.length;F++)p[F]=ux(c.sel.ranges[F],A[F],null,w);var B=_o(c.cm,p,c.sel.primIndex);li(c,B,S)}function dx(c,A,S,p){var w=c.sel.ranges.slice(0);w[A]=S,li(c,_o(c.cm,w,c.sel.primIndex),p)}function hF(c,A,S,p){li(c,yl(A,S),p)}function aj(c,A,S){var p={ranges:A.ranges,update:function(w){this.ranges=[];for(var F=0;F<w.length;F++)this.ranges[F]=new Zn(it(c,w[F].anchor),it(c,w[F].head))},origin:S&&S.origin};return xt(c,"beforeSelectionChange",c,p),c.cm&&xt(c.cm,"beforeSelectionChange",c.cm,p),p.ranges!=A.ranges?_o(c.cm,p.ranges,p.ranges.length-1):A}function pF(c,A,S){var p=c.history.done,w=re(p);w&&w.ranges?(p[p.length-1]=A,Hm(c,A,S)):li(c,A,S)}function li(c,A,S){Hm(c,A,S),nj(c,c.sel,c.cm?c.cm.curOp.id:NaN,S)}function Hm(c,A,S){(On(c,"beforeSelectionChange")||c.cm&&On(c.cm,"beforeSelectionChange"))&&(A=aj(c,A,S));var p=S&&S.bias||(X(A.primary().head,c.sel.primary().head)<0?-1:1);mF(c,gF(c,A,p,!0)),!(S&&S.scroll===!1)&&c.cm&&c.cm.getOption("readOnly")!="nocursor"&&Td(c.cm)}function mF(c,A){A.equals(c.sel)||(c.sel=A,c.cm&&(c.cm.curOp.updateInput=1,c.cm.curOp.selectionChanged=!0,wn(c.cm)),cr(c,"cursorActivity",c))}function SF(c){mF(c,gF(c,c.sel,null,!1))}function gF(c,A,S,p){for(var w,F=0;F<A.ranges.length;F++){var B=A.ranges[F],N=A.ranges.length==c.sel.ranges.length&&c.sel.ranges[F],K=zm(c,B.anchor,N&&N.anchor,S,p),Z=B.head==B.anchor?K:zm(c,B.head,N&&N.head,S,p);(w||K!=B.anchor||Z!=B.head)&&(w||(w=A.ranges.slice(0,F)),w[F]=new Zn(K,Z))}return w?_o(c.cm,w,A.primIndex):A}function Rd(c,A,S,p,w){var F=Rt(c,A.line);if(F.markedSpans)for(var B=0;B<F.markedSpans.length;++B){var N=F.markedSpans[B],K=N.marker,Z="selectLeft"in K?!K.selectLeft:K.inclusiveLeft,pe="selectRight"in K?!K.selectRight:K.inclusiveRight;if((N.from==null||(Z?N.from<=A.ch:N.from<A.ch))&&(N.to==null||(pe?N.to>=A.ch:N.to>A.ch))){if(w&&(xt(K,"beforeCursorEnter"),K.explicitlyCleared))if(F.markedSpans){--B;continue}else break;if(!K.atomic)continue;if(S){var ge=K.find(p<0?1:-1),Ge=void 0;if((p<0?pe:Z)&&(ge=_F(c,ge,-p,ge&&ge.line==A.line?F:null)),ge&&ge.line==A.line&&(Ge=X(ge,S))&&(p<0?Ge<0:Ge>0))return Rd(c,ge,A,p,w)}var Oe=K.find(p<0?-1:1);return(p<0?Z:pe)&&(Oe=_F(c,Oe,p,Oe.line==A.line?F:null)),Oe?Rd(c,Oe,A,p,w):null}}return A}function zm(c,A,S,p,w){var F=p||1,B=Rd(c,A,S,F,w)||!w&&Rd(c,A,S,F,!0)||Rd(c,A,S,-F,w)||!w&&Rd(c,A,S,-F,!0);return B||(c.cantEdit=!0,M(c.first,0))}function _F(c,A,S,p){return S<0&&A.ch==0?A.line>c.first?it(c,M(A.line-1)):null:S>0&&A.ch==(p||Rt(c,A.line)).text.length?A.line<c.first+c.size-1?M(A.line+1,0):null:new M(A.line,A.ch+S)}function xF(c){c.setSelection(M(c.firstLine(),0),M(c.lastLine()),Ie)}function vF(c,A,S){var p={canceled:!1,from:A.from,to:A.to,text:A.text,origin:A.origin,cancel:function(){return p.canceled=!0}};return S&&(p.update=function(w,F,B,N){w&&(p.from=it(c,w)),F&&(p.to=it(c,F)),B&&(p.text=B),N!==void 0&&(p.origin=N)}),xt(c,"beforeChange",c,p),c.cm&&xt(c.cm,"beforeChange",c.cm,p),p.canceled?(c.cm&&(c.cm.curOp.updateInput=2),null):{from:p.from,to:p.to,text:p.text,origin:p.origin}}function Ld(c,A,S){if(c.cm){if(!c.cm.curOp)return jr(c.cm,Ld)(c,A,S);if(c.cm.state.suppressEdits)return}if(!((On(c,"beforeChange")||c.cm&&On(c.cm,"beforeChange"))&&(A=vF(c,A,!0),!A))){var p=pl&&!S&&QA(c,A.from,A.to);if(p)for(var w=p.length-1;w>=0;--w)wF(c,{from:p[w].from,to:p[w].to,text:w?[""]:A.text,origin:A.origin});else wF(c,A)}}function wF(c,A){if(!(A.text.length==1&&A.text[0]==""&&X(A.from,A.to)==0)){var S=ox(c,A);uF(c,A,S,c.cm?c.cm.curOp.id:NaN),pf(c,A,S,k0(c,A));var p=[];Cl(c,function(w,F){!F&&Ke(p,w.history)==-1&&(VF(w.history,A),p.push(w.history)),pf(w,A,null,k0(w,A))})}}function Wm(c,A,S){var p=c.cm&&c.cm.state.suppressEdits;if(!(p&&!S)){for(var w=c.history,F,B=c.sel,N=A=="undo"?w.done:w.undone,K=A=="undo"?w.undone:w.done,Z=0;Z<N.length&&(F=N[Z],!(S?F.ranges&&!F.equals(c.sel):!F.ranges));Z++);if(Z!=N.length){for(w.lastOrigin=w.lastSelOrigin=null;;)if(F=N.pop(),F.ranges){if(jm(F,K),S&&!F.equals(c.sel)){li(c,F,{clearRedo:!1});return}B=F}else if(p){N.push(F);return}else break;var pe=[];jm(B,K),K.push({changes:pe,generation:w.generation}),w.generation=F.generation||++w.maxGeneration;for(var ge=On(c,"beforeChange")||c.cm&&On(c.cm,"beforeChange"),Ge=function(ut){var vt=F.changes[ut];if(vt.origin=A,ge&&!vF(c,vt,!1))return N.length=0,{};pe.push(cx(c,vt));var Vt=ut?ox(c,vt):re(N);pf(c,vt,Vt,AF(c,vt)),!ut&&c.cm&&c.cm.scrollIntoView({from:vt.from,to:El(vt)});var Lt=[];Cl(c,function(Dt,kt){!kt&&Ke(Lt,Dt.history)==-1&&(VF(Dt.history,vt),Lt.push(Dt.history)),pf(Dt,vt,null,AF(Dt,vt))})},Oe=F.changes.length-1;Oe>=0;--Oe){var nt=Ge(Oe);if(nt)return nt.v}}}}function yF(c,A){if(A!=0&&(c.first+=A,c.sel=new ga(fe(c.sel.ranges,function(w){return new Zn(M(w.anchor.line+A,w.anchor.ch),M(w.head.line+A,w.head.ch))}),c.sel.primIndex),c.cm)){Hi(c.cm,c.first,c.first-A,A);for(var S=c.cm.display,p=S.viewFrom;p<S.viewTo;p++)vl(c.cm,p,"gutter")}}function pf(c,A,S,p){if(c.cm&&!c.cm.curOp)return jr(c.cm,pf)(c,A,S,p);if(A.to.line<c.first){yF(c,A.text.length-1-(A.to.line-A.from.line));return}if(!(A.from.line>c.lastLine())){if(A.from.line<c.first){var w=A.text.length-1-(c.first-A.from.line);yF(c,w),A={from:M(c.first,0),to:M(A.to.line+w,A.to.ch),text:[re(A.text)],origin:A.origin}}var F=c.lastLine();A.to.line>F&&(A={from:A.from,to:M(F,Rt(c,F).text.length),text:[A.text[0]],origin:A.origin}),A.removed=D0(c,A.from,A.to),S||(S=ox(c,A)),c.cm?oj(c.cm,A,p):lx(c,A,p),Hm(c,S,Ie),c.cantEdit&&zm(c,M(c.firstLine(),0))&&(c.cantEdit=!1)}}function oj(c,A,S){var p=c.doc,w=c.display,F=A.from,B=A.to,N=!1,K=F.line;c.options.lineWrapping||(K=sn(ra(Rt(p,F.line))),p.iter(K,B.line+1,function(Oe){if(Oe==w.maxLine)return N=!0,!0})),p.sel.contains(A.from,A.to)>-1&&wn(c),lx(p,A,S,GD(c)),c.options.lineWrapping||(p.iter(K,F.line+A.text.length,function(Oe){var nt=pd(Oe);nt>w.maxLineLength&&(w.maxLine=Oe,w.maxLineLength=nt,w.maxLineChanged=!0,N=!1)}),N&&(c.curOp.updateMaxLine=!0)),gm(p,F.line),Af(c,400);var Z=A.text.length-(B.line-F.line)-1;A.full?Hi(c):F.line==B.line&&A.text.length==1&&!oF(c.doc,A)?vl(c,F.line,"text"):Hi(c,F.line,B.line+1,Z);var pe=On(c,"changes"),ge=On(c,"change");if(ge||pe){var Ge={from:F,to:B,text:A.text,removed:A.removed,origin:A.origin};ge&&cr(c,"change",c,Ge),pe&&(c.curOp.changeObjs||(c.curOp.changeObjs=[])).push(Ge)}c.display.selForContextMenu=null}function Bd(c,A,S,p,w){var F;p||(p=S),X(p,S)<0&&(F=[p,S],S=F[0],p=F[1]),typeof A=="string"&&(A=c.splitLines(A)),Ld(c,{from:S,to:p,text:A,origin:w})}function EF(c,A,S,p){S<c.line?c.line+=p:A<c.line&&(c.line=A,c.ch=0)}function CF(c,A,S,p){for(var w=0;w<c.length;++w){var F=c[w],B=!0;if(F.ranges){F.copied||(F=c[w]=F.deepCopy(),F.copied=!0);for(var N=0;N<F.ranges.length;N++)EF(F.ranges[N].anchor,A,S,p),EF(F.ranges[N].head,A,S,p);continue}for(var K=0;K<F.changes.length;++K){var Z=F.changes[K];if(S<Z.from.line)Z.from=M(Z.from.line+p,Z.from.ch),Z.to=M(Z.to.line+p,Z.to.ch);else if(A<=Z.to.line){B=!1;break}}B||(c.splice(0,w+1),w=0)}}function VF(c,A){var S=A.from.line,p=A.to.line,w=A.text.length-(p-S)-1;CF(c.done,S,p,w),CF(c.undone,S,p,w)}function mf(c,A,S,p){var w=A,F=A;return typeof A=="number"?F=Rt(c,Ye(c,A)):w=sn(A),w==null?null:(p(F,w)&&c.cm&&vl(c.cm,w,S),F)}function Sf(c){this.lines=c,this.parent=null;for(var A=0,S=0;S<c.length;++S)c[S].parent=this,A+=c[S].height;this.height=A}Sf.prototype={chunkSize:function(){return this.lines.length},removeInner:function(c,A){for(var S=c,p=c+A;S<p;++S){var w=this.lines[S];this.height-=w.height,wm(w),cr(w,"delete")}this.lines.splice(c,A)},collapse:function(c){c.push.apply(c,this.lines)},insertInner:function(c,A,S){this.height+=S,this.lines=this.lines.slice(0,c).concat(A).concat(this.lines.slice(c));for(var p=0;p<A.length;++p)A[p].parent=this},iterN:function(c,A,S){for(var p=c+A;c<p;++c)if(S(this.lines[c]))return!0}};function gf(c){this.children=c;for(var A=0,S=0,p=0;p<c.length;++p){var w=c[p];A+=w.chunkSize(),S+=w.height,w.parent=this}this.size=A,this.height=S,this.parent=null}gf.prototype={chunkSize:function(){return this.size},removeInner:function(c,A){this.size-=A;for(var S=0;S<this.children.length;++S){var p=this.children[S],w=p.chunkSize();if(c<w){var F=Math.min(A,w-c),B=p.height;if(p.removeInner(c,F),this.height-=B-p.height,w==F&&(this.children.splice(S--,1),p.parent=null),(A-=F)==0)break;c=0}else c-=w}if(this.size-A<25&&(this.children.length>1||!(this.children[0]instanceof Sf))){var N=[];this.collapse(N),this.children=[new Sf(N)],this.children[0].parent=this}},collapse:function(c){for(var A=0;A<this.children.length;++A)this.children[A].collapse(c)},insertInner:function(c,A,S){this.size+=A.length,this.height+=S;for(var p=0;p<this.children.length;++p){var w=this.children[p],F=w.chunkSize();if(c<=F){if(w.insertInner(c,A,S),w.lines&&w.lines.length>50){for(var B=w.lines.length%25+25,N=B;N<w.lines.length;){var K=new Sf(w.lines.slice(N,N+=25));w.height-=K.height,this.children.splice(++p,0,K),K.parent=this}w.lines=w.lines.slice(0,B),this.maybeSpill()}break}c-=F}},maybeSpill:function(){if(!(this.children.length<=10)){var c=this;do{var A=c.children.splice(c.children.length-5,5),S=new gf(A);if(c.parent){c.size-=S.size,c.height-=S.height;var w=Ke(c.parent.children,c);c.parent.children.splice(w+1,0,S)}else{var p=new gf(c.children);p.parent=c,c.children=[p,S],c=p}S.parent=c.parent}while(c.children.length>10);c.parent.maybeSpill()}},iterN:function(c,A,S){for(var p=0;p<this.children.length;++p){var w=this.children[p],F=w.chunkSize();if(c<F){var B=Math.min(A,F-c);if(w.iterN(c,B,S))return!0;if((A-=B)==0)break;c=0}else c-=F}}};var _f=function(c,A,S){if(S)for(var p in S)S.hasOwnProperty(p)&&(this[p]=S[p]);this.doc=c,this.node=A};_f.prototype.clear=function(){var c=this.doc.cm,A=this.line.widgets,S=this.line,p=sn(S);if(!(p==null||!A)){for(var w=0;w<A.length;++w)A[w]==this&&A.splice(w--,1);A.length||(S.widgets=null);var F=gl(this);Vr(S,Math.max(0,S.height-F)),c&&(ia(c,function(){DF(c,S,-F),vl(c,p,"widget")}),cr(c,"lineWidgetCleared",c,this,p))}},_f.prototype.changed=function(){var c=this,A=this.height,S=this.doc.cm,p=this.line;this.height=null;var w=gl(this)-A;!w||(go(this.doc,p)||Vr(p,p.height+w),S&&ia(S,function(){S.curOp.forceUpdate=!0,DF(S,p,w),cr(S,"lineWidgetChanged",S,c,sn(p))}))},V0(_f);function DF(c,A,S){Ga(A)<(c.curOp&&c.curOp.scrollTop||c.doc.scrollTop)&&ex(c,S)}function sj(c,A,S,p){var w=new _f(c,S,p),F=c.cm;return F&&w.noHScroll&&(F.display.alignWidgets=!0),mf(c,A,"widget",function(B){var N=B.widgets||(B.widgets=[]);if(w.insertAt==null?N.push(w):N.splice(Math.min(N.length,Math.max(0,w.insertAt)),0,w),w.line=B,F&&!go(c,B)){var K=Ga(B)<c.scrollTop;Vr(B,B.height+gl(w)),K&&ex(F,w.height),F.curOp.forceUpdate=!0}return!0}),F&&cr(F,"lineWidgetAdded",F,w,typeof A=="number"?A:sn(A)),w}var FF=0,Vl=function(c,A){this.lines=[],this.type=A,this.doc=c,this.id=++FF};Vl.prototype.clear=function(){if(!this.explicitlyCleared){var c=this.doc.cm,A=c&&!c.curOp;if(A&&Zc(c),On(this,"clear")){var S=this.find();S&&cr(this,"clear",S.from,S.to)}for(var p=null,w=null,F=0;F<this.lines.length;++F){var B=this.lines[F],N=ja(B.markedSpans,this);c&&!this.collapsed?vl(c,sn(B),"text"):c&&(N.to!=null&&(w=sn(B)),N.from!=null&&(p=sn(B))),B.markedSpans=_m(B.markedSpans,N),N.from==null&&this.collapsed&&!go(this.doc,B)&&c&&Vr(B,Vd(c.display))}if(c&&this.collapsed&&!c.options.lineWrapping)for(var K=0;K<this.lines.length;++K){var Z=ra(this.lines[K]),pe=pd(Z);pe>c.display.maxLineLength&&(c.display.maxLine=Z,c.display.maxLineLength=pe,c.display.maxLineChanged=!0)}p!=null&&c&&this.collapsed&&Hi(c,p,w+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,c&&SF(c.doc)),c&&cr(c,"markerCleared",c,this,p,w),A&&$c(c),this.parent&&this.parent.clear()}},Vl.prototype.find=function(c,A){c==null&&this.type=="bookmark"&&(c=1);for(var S,p,w=0;w<this.lines.length;++w){var F=this.lines[w],B=ja(F.markedSpans,this);if(B.from!=null&&(S=M(A?F:sn(F),B.from),c==-1))return S;if(B.to!=null&&(p=M(A?F:sn(F),B.to),c==1))return p}return S&&{from:S,to:p}},Vl.prototype.changed=function(){var c=this,A=this.find(-1,!0),S=this,p=this.doc.cm;!A||!p||ia(p,function(){var w=A.line,F=sn(A.line),B=Ed(p,F);if(B&&(T(B),p.curOp.selectionChanged=p.curOp.forceUpdate=!0),p.curOp.updateMaxLine=!0,!go(S.doc,w)&&S.height!=null){var N=S.height;S.height=null;var K=gl(S)-N;K&&Vr(w,w.height+K)}cr(p,"markerChanged",p,c)})},Vl.prototype.attachLine=function(c){if(!this.lines.length&&this.doc.cm){var A=this.doc.cm.curOp;(!A.maybeHiddenMarkers||Ke(A.maybeHiddenMarkers,this)==-1)&&(A.maybeUnhiddenMarkers||(A.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(c)},Vl.prototype.detachLine=function(c){if(this.lines.splice(Ke(this.lines,c),1),!this.lines.length&&this.doc.cm){var A=this.doc.cm.curOp;(A.maybeHiddenMarkers||(A.maybeHiddenMarkers=[])).push(this)}},V0(Vl);function Md(c,A,S,p,w){if(p&&p.shared)return lj(c,A,S,p,w);if(c.cm&&!c.cm.curOp)return jr(c.cm,Md)(c,A,S,p,w);var F=new Vl(c,w),B=X(A,S);if(p&&ye(p,F,!1),B>0||B==0&&F.clearWhenEmpty!==!1)return F;if(F.replacedWith&&(F.collapsed=!0,F.widgetNode=ue("span",[F.replacedWith],"CodeMirror-widget"),p.handleMouseEvents||F.widgetNode.setAttribute("cm-ignore-events","true"),p.insertLeft&&(F.widgetNode.insertLeft=!0)),F.collapsed){if(hd(c,A.line,A,S,F)||A.line!=S.line&&hd(c,S.line,A,S,F))throw new Error("Inserting collapsed marker partially overlapping an existing one");N2()}F.addToHistory&&uF(c,{from:A,to:S,origin:"markText"},c.sel,NaN);var N=A.line,K=c.cm,Z;if(c.iter(N,S.line+1,function(ge){K&&F.collapsed&&!K.options.lineWrapping&&ra(ge)==K.display.maxLine&&(Z=!0),F.collapsed&&N!=A.line&&Vr(ge,0),Ko(ge,new ml(F,N==A.line?A.ch:null,N==S.line?S.ch:null),c.cm&&c.cm.curOp),++N}),F.collapsed&&c.iter(A.line,S.line+1,function(ge){go(c,ge)&&Vr(ge,0)}),F.clearOnEnter&&Je(F,"beforeCursorEnter",function(){return F.clear()}),F.readOnly&&(YA(),(c.history.done.length||c.history.undone.length)&&c.clearHistory()),F.collapsed&&(F.id=++FF,F.atomic=!0),K){if(Z&&(K.curOp.updateMaxLine=!0),F.collapsed)Hi(K,A.line,S.line+1);else if(F.className||F.startStyle||F.endStyle||F.css||F.attributes||F.title)for(var pe=A.line;pe<=S.line;pe++)vl(K,pe,"text");F.atomic&&SF(K.doc),cr(K,"markerAdded",K,F)}return F}var xf=function(c,A){this.markers=c,this.primary=A;for(var S=0;S<c.length;++S)c[S].parent=this};xf.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var c=0;c<this.markers.length;++c)this.markers[c].clear();cr(this,"clear")}},xf.prototype.find=function(c,A){return this.primary.find(c,A)},V0(xf);function lj(c,A,S,p,w){p=ye(p),p.shared=!1;var F=[Md(c,A,S,p,w)],B=F[0],N=p.widgetNode;return Cl(c,function(K){N&&(p.widgetNode=N.cloneNode(!0)),F.push(Md(K,it(K,A),it(K,S),p,w));for(var Z=0;Z<K.linked.length;++Z)if(K.linked[Z].isParent)return;B=re(F)}),new xf(F,B)}function TF(c){return c.findMarks(M(c.first,0),c.clipPos(M(c.lastLine())),function(A){return A.parent})}function cj(c,A){for(var S=0;S<A.length;S++){var p=A[S],w=p.find(),F=c.clipPos(w.from),B=c.clipPos(w.to);if(X(F,B)){var N=Md(c,F,B,p.primary,p.primary.type);p.markers.push(N),N.parent=p}}}function uj(c){for(var A=function(p){var w=c[p],F=[w.primary.doc];Cl(w.primary.doc,function(K){return F.push(K)});for(var B=0;B<w.markers.length;B++){var N=w.markers[B];Ke(F,N.doc)==-1&&(N.parent=null,w.markers.splice(B--,1))}},S=0;S<c.length;S++)A(S)}var dj=0,zi=function(c,A,S,p,w){if(!(this instanceof zi))return new zi(c,A,S,p,w);S==null&&(S=0),gf.call(this,[new Sf([new ma("",null)])]),this.first=S,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=S;var F=M(S,0);this.sel=yl(F),this.history=new Um(null),this.id=++dj,this.modeOption=A,this.lineSep=p,this.direction=w=="rtl"?"rtl":"ltr",this.extend=!1,typeof c=="string"&&(c=this.splitLines(c)),lx(this,{from:F,to:F,text:c}),li(this,yl(F),Ie)};zi.prototype=Y(gf.prototype,{constructor:zi,iter:function(c,A,S){S?this.iterN(c-this.first,A-c,S):this.iterN(this.first,this.first+this.size,c)},insert:function(c,A){for(var S=0,p=0;p<A.length;++p)S+=A[p].height;this.insertInner(c-this.first,A,S)},remove:function(c,A){this.removeInner(c-this.first,A)},getValue:function(c){var A=vi(this,this.first,this.first+this.size);return c===!1?A:A.join(c||this.lineSeparator())},setValue:Gr(function(c){var A=M(this.first,0),S=this.first+this.size-1;Ld(this,{from:A,to:M(S,Rt(this,S).text.length),text:this.splitLines(c),origin:"setValue",full:!0},!0),this.cm&&lf(this.cm,0,0),li(this,yl(A),Ie)}),replaceRange:function(c,A,S,p){A=it(this,A),S=S?it(this,S):A,Bd(this,c,A,S,p)},getRange:function(c,A,S){var p=D0(this,it(this,c),it(this,A));return S===!1?p:S===""?p.join(""):p.join(S||this.lineSeparator())},getLine:function(c){var A=this.getLineHandle(c);return A&&A.text},getLineHandle:function(c){if(Ni(this,c))return Rt(this,c)},getLineNumber:function(c){return sn(c)},getLineHandleVisualStart:function(c){return typeof c=="number"&&(c=Rt(this,c)),ra(c)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(c){return it(this,c)},getCursor:function(c){var A=this.sel.primary(),S;return c==null||c=="head"?S=A.head:c=="anchor"?S=A.anchor:c=="end"||c=="to"||c===!1?S=A.to():S=A.from(),S},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Gr(function(c,A,S){hF(this,it(this,typeof c=="number"?M(c,A||0):c),null,S)}),setSelection:Gr(function(c,A,S){hF(this,it(this,c),it(this,A||c),S)}),extendSelection:Gr(function(c,A,S){Gm(this,it(this,c),A&&it(this,A),S)}),extendSelections:Gr(function(c,A){fF(this,Zt(this,c),A)}),extendSelectionsBy:Gr(function(c,A){var S=fe(this.sel.ranges,c);fF(this,Zt(this,S),A)}),setSelections:Gr(function(c,A,S){if(!!c.length){for(var p=[],w=0;w<c.length;w++)p[w]=new Zn(it(this,c[w].anchor),it(this,c[w].head||c[w].anchor));A==null&&(A=Math.min(c.length-1,this.sel.primIndex)),li(this,_o(this.cm,p,A),S)}}),addSelection:Gr(function(c,A,S){var p=this.sel.ranges.slice(0);p.push(new Zn(it(this,c),it(this,A||c))),li(this,_o(this.cm,p,p.length-1),S)}),getSelection:function(c){for(var A=this.sel.ranges,S,p=0;p<A.length;p++){var w=D0(this,A[p].from(),A[p].to());S=S?S.concat(w):w}return c===!1?S:S.join(c||this.lineSeparator())},getSelections:function(c){for(var A=[],S=this.sel.ranges,p=0;p<S.length;p++){var w=D0(this,S[p].from(),S[p].to());c!==!1&&(w=w.join(c||this.lineSeparator())),A[p]=w}return A},replaceSelection:function(c,A,S){for(var p=[],w=0;w<this.sel.ranges.length;w++)p[w]=c;this.replaceSelections(p,A,S||"+input")},replaceSelections:Gr(function(c,A,S){for(var p=[],w=this.sel,F=0;F<w.ranges.length;F++){var B=w.ranges[F];p[F]={from:B.from(),to:B.to(),text:this.splitLines(c[F]),origin:S}}for(var N=A&&A!="end"&&ZU(this,p,A),K=p.length-1;K>=0;K--)Ld(this,p[K]);N?pF(this,N):this.cm&&Td(this.cm)}),undo:Gr(function(){Wm(this,"undo")}),redo:Gr(function(){Wm(this,"redo")}),undoSelection:Gr(function(){Wm(this,"undo",!0)}),redoSelection:Gr(function(){Wm(this,"redo",!0)}),setExtending:function(c){this.extend=c},getExtending:function(){return this.extend},historySize:function(){for(var c=this.history,A=0,S=0,p=0;p<c.done.length;p++)c.done[p].ranges||++A;for(var w=0;w<c.undone.length;w++)c.undone[w].ranges||++S;return{undo:A,redo:S}},clearHistory:function(){var c=this;this.history=new Um(this.history),Cl(this,function(A){return A.history=c.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(c){return c&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(c){return this.history.generation==(c||this.cleanGeneration)},getHistory:function(){return{done:Pd(this.history.done),undone:Pd(this.history.undone)}},setHistory:function(c){var A=this.history=new Um(this.history);A.done=Pd(c.done.slice(0),null,!0),A.undone=Pd(c.undone.slice(0),null,!0)},setGutterMarker:Gr(function(c,A,S){return mf(this,c,"gutter",function(p){var w=p.gutterMarkers||(p.gutterMarkers={});return w[A]=S,!S&&Pe(w)&&(p.gutterMarkers=null),!0})}),clearGutter:Gr(function(c){var A=this;this.iter(function(S){S.gutterMarkers&&S.gutterMarkers[c]&&mf(A,S,"gutter",function(){return S.gutterMarkers[c]=null,Pe(S.gutterMarkers)&&(S.gutterMarkers=null),!0})})}),lineInfo:function(c){var A;if(typeof c=="number"){if(!Ni(this,c)||(A=c,c=Rt(this,c),!c))return null}else if(A=sn(c),A==null)return null;return{line:A,handle:c,text:c.text,gutterMarkers:c.gutterMarkers,textClass:c.textClass,bgClass:c.bgClass,wrapClass:c.wrapClass,widgets:c.widgets}},addLineClass:Gr(function(c,A,S){return mf(this,c,A=="gutter"?"gutter":"class",function(p){var w=A=="text"?"textClass":A=="background"?"bgClass":A=="gutter"?"gutterClass":"wrapClass";if(!p[w])p[w]=S;else{if(z(S).test(p[w]))return!1;p[w]+=" "+S}return!0})}),removeLineClass:Gr(function(c,A,S){return mf(this,c,A=="gutter"?"gutter":"class",function(p){var w=A=="text"?"textClass":A=="background"?"bgClass":A=="gutter"?"gutterClass":"wrapClass",F=p[w];if(F)if(S==null)p[w]=null;else{var B=F.match(z(S));if(!B)return!1;var N=B.index+B[0].length;p[w]=F.slice(0,B.index)+(!B.index||N==F.length?"":" ")+F.slice(N)||null}else return!1;return!0})}),addLineWidget:Gr(function(c,A,S){return sj(this,c,A,S)}),removeLineWidget:function(c){c.clear()},markText:function(c,A,S){return Md(this,it(this,c),it(this,A),S,S&&S.type||"range")},setBookmark:function(c,A){var S={replacedWith:A&&(A.nodeType==null?A.widget:A),insertLeft:A&&A.insertLeft,clearWhenEmpty:!1,shared:A&&A.shared,handleMouseEvents:A&&A.handleMouseEvents};return c=it(this,c),Md(this,c,c,S,"bookmark")},findMarksAt:function(c){c=it(this,c);var A=[],S=Rt(this,c.line).markedSpans;if(S)for(var p=0;p<S.length;++p){var w=S[p];(w.from==null||w.from<=c.ch)&&(w.to==null||w.to>=c.ch)&&A.push(w.marker.parent||w.marker)}return A},findMarks:function(c,A,S){c=it(this,c),A=it(this,A);var p=[],w=c.line;return this.iter(c.line,A.line+1,function(F){var B=F.markedSpans;if(B)for(var N=0;N<B.length;N++){var K=B[N];!(K.to!=null&&w==c.line&&c.ch>=K.to||K.from==null&&w!=c.line||K.from!=null&&w==A.line&&K.from>=A.ch)&&(!S||S(K.marker))&&p.push(K.marker.parent||K.marker)}++w}),p},getAllMarks:function(){var c=[];return this.iter(function(A){var S=A.markedSpans;if(S)for(var p=0;p<S.length;++p)S[p].from!=null&&c.push(S[p].marker)}),c},posFromIndex:function(c){var A,S=this.first,p=this.lineSeparator().length;return this.iter(function(w){var F=w.text.length+p;if(F>c)return A=c,!0;c-=F,++S}),it(this,M(S,A))},indexFromPos:function(c){c=it(this,c);var A=c.ch;if(c.line<this.first||c.ch<0)return 0;var S=this.lineSeparator().length;return this.iter(this.first,c.line,function(p){A+=p.text.length+S}),A},copy:function(c){var A=new zi(vi(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return A.scrollTop=this.scrollTop,A.scrollLeft=this.scrollLeft,A.sel=this.sel,A.extend=!1,c&&(A.history.undoDepth=this.history.undoDepth,A.setHistory(this.getHistory())),A},linkedDoc:function(c){c||(c={});var A=this.first,S=this.first+this.size;c.from!=null&&c.from>A&&(A=c.from),c.to!=null&&c.to<S&&(S=c.to);var p=new zi(vi(this,A,S),c.mode||this.modeOption,A,this.lineSep,this.direction);return c.sharedHist&&(p.history=this.history),(this.linked||(this.linked=[])).push({doc:p,sharedHist:c.sharedHist}),p.linked=[{doc:this,isParent:!0,sharedHist:c.sharedHist}],cj(p,TF(this)),p},unlinkDoc:function(c){if(c instanceof N0&&(c=c.doc),this.linked)for(var A=0;A<this.linked.length;++A){var S=this.linked[A];if(S.doc==c){this.linked.splice(A,1),c.unlinkDoc(this),uj(TF(this));break}}if(c.history==this.history){var p=[c.id];Cl(c,function(w){return p.push(w.id)},!0),c.history=new Um(null),c.history.done=Pd(this.history.done,p),c.history.undone=Pd(this.history.undone,p)}},iterLinkedDocs:function(c){Cl(this,c)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(c){return this.lineSep?c.split(this.lineSep):Ze(c)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Gr(function(c){c!="rtl"&&(c="ltr"),c!=this.direction&&(this.direction=c,this.iter(function(A){return A.order=null}),this.cm&&$U(this.cm))})}),zi.prototype.eachLine=zi.prototype.iter;var bF=0;function Aj(c){var A=this;if(PF(A),!(on(A,c)||yi(A.display,c))){X0(c),l&&(bF=+new Date);var S=Yc(A,c,!0),p=c.dataTransfer.files;if(!(!S||A.isReadOnly()))if(p&&p.length&&window.FileReader&&window.File)for(var w=p.length,F=Array(w),B=0,N=function(){++B==w&&jr(A,function(){S=it(A.doc,S);var Oe={from:S,to:S,text:A.doc.splitLines(F.filter(function(nt){return nt!=null}).join(A.doc.lineSeparator())),origin:"paste"};Ld(A.doc,Oe),pF(A.doc,yl(it(A.doc,S),it(A.doc,El(Oe))))})()},K=function(Oe,nt){if(A.options.allowDropFileTypes&&Ke(A.options.allowDropFileTypes,Oe.type)==-1){N();return}var ut=new FileReader;ut.onerror=function(){return N()},ut.onload=function(){var vt=ut.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(vt)){N();return}F[nt]=vt,N()},ut.readAsText(Oe)},Z=0;Z<p.length;Z++)K(p[Z],Z);else{if(A.state.draggingText&&A.doc.sel.contains(S)>-1){A.state.draggingText(c),setTimeout(function(){return A.display.input.focus()},20);return}try{var pe=c.dataTransfer.getData("Text");if(pe){var ge;if(A.state.draggingText&&!A.state.draggingText.copy&&(ge=A.listSelections()),Hm(A.doc,yl(S,S)),ge)for(var Ge=0;Ge<ge.length;++Ge)Bd(A.doc,"",ge[Ge].anchor,ge[Ge].head,"drag");A.replaceSelection(pe,"around","paste"),A.display.input.focus()}}catch{}}}}function fj(c,A){if(l&&(!c.state.draggingText||+new Date-bF<100)){$t(A);return}if(!(on(c,A)||yi(c.display,A))&&(A.dataTransfer.setData("Text",c.getSelection()),A.dataTransfer.effectAllowed="copyMove",A.dataTransfer.setDragImage&&!_)){var S=ee("img",null,null,"position: fixed; left: 0; top: 0;");S.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",g&&(S.width=S.height=1,c.display.wrapper.appendChild(S),S._top=S.offsetTop),A.dataTransfer.setDragImage(S,0,0),g&&S.parentNode.removeChild(S)}}function hj(c,A){var S=Yc(c,A);if(!!S){var p=document.createDocumentFragment();q2(c,S,p),c.display.dragCursor||(c.display.dragCursor=ee("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),c.display.lineSpace.insertBefore(c.display.dragCursor,c.display.cursorDiv)),P(c.display.dragCursor,p)}}function PF(c){c.display.dragCursor&&(c.display.lineSpace.removeChild(c.display.dragCursor),c.display.dragCursor=null)}function RF(c){if(!!document.getElementsByClassName){for(var A=document.getElementsByClassName("CodeMirror"),S=[],p=0;p<A.length;p++){var w=A[p].CodeMirror;w&&S.push(w)}S.length&&S[0].operation(function(){for(var F=0;F<S.length;F++)c(S[F])})}}var LF=!1;function pj(){LF||(mj(),LF=!0)}function mj(){var c;Je(window,"resize",function(){c==null&&(c=setTimeout(function(){c=null,RF(Sj)},100))}),Je(window,"blur",function(){return RF(Fd)})}function Sj(c){var A=c.display;A.cachedCharWidth=A.cachedTextHeight=A.cachedPaddingH=null,A.scrollbarsClipped=!1,c.setSize()}for(var Dl={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},vf=0;vf<10;vf++)Dl[vf+48]=Dl[vf+96]=String(vf);for(var Xm=65;Xm<=90;Xm++)Dl[Xm]=String.fromCharCode(Xm);for(var wf=1;wf<=12;wf++)Dl[wf+111]=Dl[wf+63235]="F"+wf;var bs={};bs.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},bs.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},bs.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},bs.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},bs.default=D?bs.macDefault:bs.pcDefault;function gj(c){var A=c.split(/-(?!$)/);c=A[A.length-1];for(var S,p,w,F,B=0;B<A.length-1;B++){var N=A[B];if(/^(cmd|meta|m)$/i.test(N))F=!0;else if(/^a(lt)?$/i.test(N))S=!0;else if(/^(c|ctrl|control)$/i.test(N))p=!0;else if(/^s(hift)?$/i.test(N))w=!0;else throw new Error("Unrecognized modifier name: "+N)}return S&&(c="Alt-"+c),p&&(c="Ctrl-"+c),F&&(c="Cmd-"+c),w&&(c="Shift-"+c),c}function _j(c){var A={};for(var S in c)if(c.hasOwnProperty(S)){var p=c[S];if(/^(name|fallthrough|(de|at)tach)$/.test(S))continue;if(p=="..."){delete c[S];continue}for(var w=fe(S.split(" "),gj),F=0;F<w.length;F++){var B=void 0,N=void 0;F==w.length-1?(N=w.join(" "),B=p):(N=w.slice(0,F+1).join(" "),B="...");var K=A[N];if(!K)A[N]=B;else if(K!=B)throw new Error("Inconsistent bindings for "+N)}delete c[S]}for(var Z in A)c[Z]=A[Z];return c}function Id(c,A,S,p){A=Km(A);var w=A.call?A.call(c,p):A[c];if(w===!1)return"nothing";if(w==="...")return"multi";if(w!=null&&S(w))return"handled";if(A.fallthrough){if(Object.prototype.toString.call(A.fallthrough)!="[object Array]")return Id(c,A.fallthrough,S,p);for(var F=0;F<A.fallthrough.length;F++){var B=Id(c,A.fallthrough[F],S,p);if(B)return B}}}function BF(c){var A=typeof c=="string"?c:Dl[c.keyCode];return A=="Ctrl"||A=="Alt"||A=="Shift"||A=="Mod"}function MF(c,A,S){var p=c;return A.altKey&&p!="Alt"&&(c="Alt-"+c),(te?A.metaKey:A.ctrlKey)&&p!="Ctrl"&&(c="Ctrl-"+c),(te?A.ctrlKey:A.metaKey)&&p!="Mod"&&(c="Cmd-"+c),!S&&A.shiftKey&&p!="Shift"&&(c="Shift-"+c),c}function IF(c,A){if(g&&c.keyCode==34&&c.char)return!1;var S=Dl[c.keyCode];return S==null||c.altGraphKey?!1:(c.keyCode==3&&c.code&&(S=c.code),MF(S,c,A))}function Km(c){return typeof c=="string"?bs[c]:c}function Od(c,A){for(var S=c.doc.sel.ranges,p=[],w=0;w<S.length;w++){for(var F=A(S[w]);p.length&&X(F.from,re(p).to)<=0;){var B=p.pop();if(X(B.from,F.from)<0){F.from=B.from;break}}p.push(F)}ia(c,function(){for(var N=p.length-1;N>=0;N--)Bd(c.doc,"",p[N].from,p[N].to,"+delete");Td(c)})}function Ax(c,A,S){var p=ve(c.text,A+S,S);return p<0||p>c.text.length?null:p}function fx(c,A,S){var p=Ax(c,A.ch,S);return p==null?null:new M(A.line,p,S<0?"after":"before")}function hx(c,A,S,p,w){if(c){A.doc.direction=="rtl"&&(w=-w);var F=ht(S,A.doc.direction);if(F){var B=w<0?re(F):F[0],N=w<0==(B.level==1),K=N?"after":"before",Z;if(B.level>0||A.doc.direction=="rtl"){var pe=xl(A,S);Z=w<0?S.text.length-1:0;var ge=Sa(A,pe,Z).top;Z=$e(function(Ge){return Sa(A,pe,Ge).top==ge},w<0==(B.level==1)?B.from:B.to-1,Z),K=="before"&&(Z=Ax(S,Z,1))}else Z=w<0?B.to:B.from;return new M(p,Z,K)}}return new M(p,w<0?S.text.length:0,w<0?"before":"after")}function xj(c,A,S,p){var w=ht(A,c.doc.direction);if(!w)return fx(A,S,p);S.ch>=A.text.length?(S.ch=A.text.length,S.sticky="before"):S.ch<=0&&(S.ch=0,S.sticky="after");var F=Ce(w,S.ch,S.sticky),B=w[F];if(c.doc.direction=="ltr"&&B.level%2==0&&(p>0?B.to>S.ch:B.from<S.ch))return fx(A,S,p);var N=function(Vt,Lt){return Ax(A,Vt instanceof M?Vt.ch:Vt,Lt)},K,Z=function(Vt){return c.options.lineWrapping?(K=K||xl(c,A),C0(c,A,K,Vt)):{begin:0,end:A.text.length}},pe=Z(S.sticky=="before"?N(S,-1):S.ch);if(c.doc.direction=="rtl"||B.level==1){var ge=B.level==1==p<0,Ge=N(S,ge?1:-1);if(Ge!=null&&(ge?Ge<=B.to&&Ge<=pe.end:Ge>=B.from&&Ge>=pe.begin)){var Oe=ge?"before":"after";return new M(S.line,Ge,Oe)}}var nt=function(Vt,Lt,Dt){for(var kt=function(S0,Hr){return Hr?new M(S.line,N(S0,1),"before"):new M(S.line,S0,"after")};Vt>=0&&Vt<w.length;Vt+=Lt){var nn=w[Vt],Qt=Lt>0==(nn.level!=1),bn=Qt?Dt.begin:N(Dt.end,-1);if(nn.from<=bn&&bn<nn.to||(bn=Qt?nn.from:N(nn.to,-1),Dt.begin<=bn&&bn<Dt.end))return kt(bn,Qt)}},ut=nt(F+p,p,pe);if(ut)return ut;var vt=p>0?pe.end:N(pe.begin,-1);return vt!=null&&!(p>0&&vt==A.text.length)&&(ut=nt(p>0?0:w.length-1,p,Z(vt)),ut)?ut:null}var yf={selectAll:xF,singleSelection:function(c){return c.setSelection(c.getCursor("anchor"),c.getCursor("head"),Ie)},killLine:function(c){return Od(c,function(A){if(A.empty()){var S=Rt(c.doc,A.head.line).text.length;return A.head.ch==S&&A.head.line<c.lastLine()?{from:A.head,to:M(A.head.line+1,0)}:{from:A.head,to:M(A.head.line,S)}}else return{from:A.from(),to:A.to()}})},deleteLine:function(c){return Od(c,function(A){return{from:M(A.from().line,0),to:it(c.doc,M(A.to().line+1,0))}})},delLineLeft:function(c){return Od(c,function(A){return{from:M(A.from().line,0),to:A.from()}})},delWrappedLineLeft:function(c){return Od(c,function(A){var S=c.charCoords(A.head,"div").top+5,p=c.coordsChar({left:0,top:S},"div");return{from:p,to:A.from()}})},delWrappedLineRight:function(c){return Od(c,function(A){var S=c.charCoords(A.head,"div").top+5,p=c.coordsChar({left:c.display.lineDiv.offsetWidth+100,top:S},"div");return{from:A.from(),to:p}})},undo:function(c){return c.undo()},redo:function(c){return c.redo()},undoSelection:function(c){return c.undoSelection()},redoSelection:function(c){return c.redoSelection()},goDocStart:function(c){return c.extendSelection(M(c.firstLine(),0))},goDocEnd:function(c){return c.extendSelection(M(c.lastLine()))},goLineStart:function(c){return c.extendSelectionsBy(function(A){return OF(c,A.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(c){return c.extendSelectionsBy(function(A){return kF(c,A.head)},{origin:"+move",bias:1})},goLineEnd:function(c){return c.extendSelectionsBy(function(A){return vj(c,A.head.line)},{origin:"+move",bias:-1})},goLineRight:function(c){return c.extendSelectionsBy(function(A){var S=c.cursorCoords(A.head,"div").top+5;return c.coordsChar({left:c.display.lineDiv.offsetWidth+100,top:S},"div")},k)},goLineLeft:function(c){return c.extendSelectionsBy(function(A){var S=c.cursorCoords(A.head,"div").top+5;return c.coordsChar({left:0,top:S},"div")},k)},goLineLeftSmart:function(c){return c.extendSelectionsBy(function(A){var S=c.cursorCoords(A.head,"div").top+5,p=c.coordsChar({left:0,top:S},"div");return p.ch<c.getLine(p.line).search(/\S/)?kF(c,A.head):p},k)},goLineUp:function(c){return c.moveV(-1,"line")},goLineDown:function(c){return c.moveV(1,"line")},goPageUp:function(c){return c.moveV(-1,"page")},goPageDown:function(c){return c.moveV(1,"page")},goCharLeft:function(c){return c.moveH(-1,"char")},goCharRight:function(c){return c.moveH(1,"char")},goColumnLeft:function(c){return c.moveH(-1,"column")},goColumnRight:function(c){return c.moveH(1,"column")},goWordLeft:function(c){return c.moveH(-1,"word")},goGroupRight:function(c){return c.moveH(1,"group")},goGroupLeft:function(c){return c.moveH(-1,"group")},goWordRight:function(c){return c.moveH(1,"word")},delCharBefore:function(c){return c.deleteH(-1,"codepoint")},delCharAfter:function(c){return c.deleteH(1,"char")},delWordBefore:function(c){return c.deleteH(-1,"word")},delWordAfter:function(c){return c.deleteH(1,"word")},delGroupBefore:function(c){return c.deleteH(-1,"group")},delGroupAfter:function(c){return c.deleteH(1,"group")},indentAuto:function(c){return c.indentSelection("smart")},indentMore:function(c){return c.indentSelection("add")},indentLess:function(c){return c.indentSelection("subtract")},insertTab:function(c){return c.replaceSelection("	")},insertSoftTab:function(c){for(var A=[],S=c.listSelections(),p=c.options.tabSize,w=0;w<S.length;w++){var F=S[w].from(),B=We(c.getLine(F.line),F.ch,p);A.push(le(p-B%p))}c.replaceSelections(A)},defaultTab:function(c){c.somethingSelected()?c.indentSelection("add"):c.execCommand("insertTab")},transposeChars:function(c){return ia(c,function(){for(var A=c.listSelections(),S=[],p=0;p<A.length;p++)if(!!A[p].empty()){var w=A[p].head,F=Rt(c.doc,w.line).text;if(F){if(w.ch==F.length&&(w=new M(w.line,w.ch-1)),w.ch>0)w=new M(w.line,w.ch+1),c.replaceRange(F.charAt(w.ch-1)+F.charAt(w.ch-2),M(w.line,w.ch-2),w,"+transpose");else if(w.line>c.doc.first){var B=Rt(c.doc,w.line-1).text;B&&(w=new M(w.line,1),c.replaceRange(F.charAt(0)+c.doc.lineSeparator()+B.charAt(B.length-1),M(w.line-1,B.length-1),w,"+transpose"))}}S.push(new Zn(w,w))}c.setSelections(S)})},newlineAndIndent:function(c){return ia(c,function(){for(var A=c.listSelections(),S=A.length-1;S>=0;S--)c.replaceRange(c.doc.lineSeparator(),A[S].anchor,A[S].head,"+input");A=c.listSelections();for(var p=0;p<A.length;p++)c.indentLine(A[p].from().line,null,!0);Td(c)})},openLine:function(c){return c.replaceSelection(`
`,"start")},toggleOverwrite:function(c){return c.toggleOverwrite()}};function OF(c,A){var S=Rt(c.doc,A),p=ra(S);return p!=S&&(A=sn(p)),hx(!0,c,p,A,1)}function vj(c,A){var S=Rt(c.doc,A),p=U2(S);return p!=S&&(A=sn(p)),hx(!0,c,S,A,-1)}function kF(c,A){var S=OF(c,A.line),p=Rt(c.doc,S.line),w=ht(p,c.doc.direction);if(!w||w[0].level==0){var F=Math.max(S.ch,p.text.search(/\S/)),B=A.line==S.line&&A.ch<=F&&A.ch;return M(S.line,B?0:F,S.sticky)}return S}function Ym(c,A,S){if(typeof A=="string"&&(A=yf[A],!A))return!1;c.display.input.ensurePolled();var p=c.display.shift,w=!1;try{c.isReadOnly()&&(c.state.suppressEdits=!0),S&&(c.display.shift=!1),w=A(c)!=lt}finally{c.display.shift=p,c.state.suppressEdits=!1}return w}function wj(c,A,S){for(var p=0;p<c.state.keyMaps.length;p++){var w=Id(A,c.state.keyMaps[p],S,c);if(w)return w}return c.options.extraKeys&&Id(A,c.options.extraKeys,S,c)||Id(A,c.options.keyMap,S,c)}var yj=new at;function Ef(c,A,S,p){var w=c.state.keySeq;if(w){if(BF(A))return"handled";if(/\'$/.test(A)?c.state.keySeq=null:yj.set(50,function(){c.state.keySeq==w&&(c.state.keySeq=null,c.display.input.reset())}),NF(c,w+" "+A,S,p))return!0}return NF(c,A,S,p)}function NF(c,A,S,p){var w=wj(c,A,p);return w=="multi"&&(c.state.keySeq=A),w=="handled"&&cr(c,"keyHandled",c,A,S),(w=="handled"||w=="multi")&&(X0(S),Q2(c)),!!w}function UF(c,A){var S=IF(A,!0);return S?A.shiftKey&&!c.state.keySeq?Ef(c,"Shift-"+S,A,function(p){return Ym(c,p,!0)})||Ef(c,S,A,function(p){if(typeof p=="string"?/^go[A-Z]/.test(p):p.motion)return Ym(c,p)}):Ef(c,S,A,function(p){return Ym(c,p)}):!1}function Ej(c,A,S){return Ef(c,"'"+S+"'",A,function(p){return Ym(c,p,!0)})}var px=null;function jF(c){var A=this;if(!(c.target&&c.target!=A.display.input.getField())&&(A.curOp.focus=G(Re(A)),!on(A,c))){l&&u<11&&c.keyCode==27&&(c.returnValue=!1);var S=c.keyCode;A.display.shift=S==16||c.shiftKey;var p=UF(A,c);g&&(px=p?S:null,!p&&S==88&&!tn&&(D?c.metaKey:c.ctrlKey)&&A.replaceSelection("",null,"cut")),i&&!D&&!p&&S==46&&c.shiftKey&&!c.ctrlKey&&document.execCommand&&document.execCommand("cut"),S==18&&!/\bCodeMirror-crosshair\b/.test(A.display.lineDiv.className)&&Cj(A)}}function Cj(c){var A=c.display.lineDiv;ne(A,"CodeMirror-crosshair");function S(p){(p.keyCode==18||!p.altKey)&&(I(A,"CodeMirror-crosshair"),Xt(document,"keyup",S),Xt(document,"mouseover",S))}Je(document,"keyup",S),Je(document,"mouseover",S)}function GF(c){c.keyCode==16&&(this.doc.sel.shift=!1),on(this,c)}function HF(c){var A=this;if(!(c.target&&c.target!=A.display.input.getField())&&!(yi(A.display,c)||on(A,c)||c.ctrlKey&&!c.altKey||D&&c.metaKey)){var S=c.keyCode,p=c.charCode;if(g&&S==px){px=null,X0(c);return}if(!(g&&(!c.which||c.which<10)&&UF(A,c))){var w=String.fromCharCode(p==null?S:p);w!="\b"&&(Ej(A,c,w)||A.display.input.onKeyPress(c))}}}var Vj=400,mx=function(c,A,S){this.time=c,this.pos=A,this.button=S};mx.prototype.compare=function(c,A,S){return this.time+Vj>c&&X(A,this.pos)==0&&S==this.button};var Cf,Vf;function Dj(c,A){var S=+new Date;return Vf&&Vf.compare(S,c,A)?(Cf=Vf=null,"triple"):Cf&&Cf.compare(S,c,A)?(Vf=new mx(S,c,A),Cf=null,"double"):(Cf=new mx(S,c,A),Vf=null,"single")}function zF(c){var A=this,S=A.display;if(!(on(A,c)||S.activeTouch&&S.input.supportsTouch())){if(S.input.ensurePolled(),S.shift=c.shiftKey,yi(S,c)){d||(S.scroller.draggable=!1,setTimeout(function(){return S.scroller.draggable=!0},100));return}if(!Sx(A,c)){var p=Yc(A,c),w=xi(c),F=p?Dj(p,w):"single";Be(A).focus(),w==1&&A.state.selectingText&&A.state.selectingText(c),!(p&&Fj(A,w,p,F,c))&&(w==1?p?bj(A,p,F,c):Nr(c)==S.scroller&&X0(c):w==2?(p&&Gm(A.doc,p),setTimeout(function(){return S.input.focus()},20)):w==3&&($?A.display.input.onContextMenu(c):J2(A)))}}}function Fj(c,A,S,p,w){var F="Click";return p=="double"?F="Double"+F:p=="triple"&&(F="Triple"+F),F=(A==1?"Left":A==2?"Middle":"Right")+F,Ef(c,MF(F,w),w,function(B){if(typeof B=="string"&&(B=yf[B]),!B)return!1;var N=!1;try{c.isReadOnly()&&(c.state.suppressEdits=!0),N=B(c,S)!=lt}finally{c.state.suppressEdits=!1}return N})}function Tj(c,A,S){var p=c.getOption("configureMouse"),w=p?p(c,A,S):{};if(w.unit==null){var F=H?S.shiftKey&&S.metaKey:S.altKey;w.unit=F?"rectangle":A=="single"?"char":A=="double"?"word":"line"}return(w.extend==null||c.doc.extend)&&(w.extend=c.doc.extend||S.shiftKey),w.addNew==null&&(w.addNew=D?S.metaKey:S.ctrlKey),w.moveOnDrag==null&&(w.moveOnDrag=!(D?S.altKey:S.ctrlKey)),w}function bj(c,A,S,p){l?setTimeout(Te(WD,c),0):c.curOp.focus=G(Re(c));var w=Tj(c,S,p),F=c.doc.sel,B;c.options.dragDrop&&gn&&!c.isReadOnly()&&S=="single"&&(B=F.contains(A))>-1&&(X((B=F.ranges[B]).from(),A)<0||A.xRel>0)&&(X(B.to(),A)>0||A.xRel<0)?Pj(c,p,A,w):Rj(c,p,A,w)}function Pj(c,A,S,p){var w=c.display,F=!1,B=jr(c,function(Z){d&&(w.scroller.draggable=!1),c.state.draggingText=!1,c.state.delayingBlurEvent&&(c.hasFocus()?c.state.delayingBlurEvent=!1:J2(c)),Xt(w.wrapper.ownerDocument,"mouseup",B),Xt(w.wrapper.ownerDocument,"mousemove",N),Xt(w.scroller,"dragstart",K),Xt(w.scroller,"drop",B),F||(X0(Z),p.addNew||Gm(c.doc,S,null,null,p.extend),d&&!_||l&&u==9?setTimeout(function(){w.wrapper.ownerDocument.body.focus({preventScroll:!0}),w.input.focus()},20):w.input.focus())}),N=function(Z){F=F||Math.abs(A.clientX-Z.clientX)+Math.abs(A.clientY-Z.clientY)>=10},K=function(){return F=!0};d&&(w.scroller.draggable=!0),c.state.draggingText=B,B.copy=!p.moveOnDrag,Je(w.wrapper.ownerDocument,"mouseup",B),Je(w.wrapper.ownerDocument,"mousemove",N),Je(w.scroller,"dragstart",K),Je(w.scroller,"drop",B),c.state.delayingBlurEvent=!0,setTimeout(function(){return w.input.focus()},20),w.scroller.dragDrop&&w.scroller.dragDrop()}function WF(c,A,S){if(S=="char")return new Zn(A,A);if(S=="word")return c.findWordAt(A);if(S=="line")return new Zn(M(A.line,0),it(c.doc,M(A.line+1,0)));var p=S(c,A);return new Zn(p.from,p.to)}function Rj(c,A,S,p){l&&J2(c);var w=c.display,F=c.doc;X0(A);var B,N,K=F.sel,Z=K.ranges;if(p.addNew&&!p.extend?(N=F.sel.contains(S),N>-1?B=Z[N]:B=new Zn(S,S)):(B=F.sel.primary(),N=F.sel.primIndex),p.unit=="rectangle")p.addNew||(B=new Zn(S,S)),S=Yc(c,A,!0,!0),N=-1;else{var pe=WF(c,S,p.unit);p.extend?B=ux(B,pe.anchor,pe.head,p.extend):B=pe}p.addNew?N==-1?(N=Z.length,li(F,_o(c,Z.concat([B]),N),{scroll:!1,origin:"*mouse"})):Z.length>1&&Z[N].empty()&&p.unit=="char"&&!p.extend?(li(F,_o(c,Z.slice(0,N).concat(Z.slice(N+1)),0),{scroll:!1,origin:"*mouse"}),K=F.sel):dx(F,N,B,Ue):(N=0,li(F,new ga([B],0),Ue),K=F.sel);var ge=S;function Ge(Dt){if(X(ge,Dt)!=0)if(ge=Dt,p.unit=="rectangle"){for(var kt=[],nn=c.options.tabSize,Qt=We(Rt(F,S.line).text,S.ch,nn),bn=We(Rt(F,Dt.line).text,Dt.ch,nn),S0=Math.min(Qt,bn),Hr=Math.max(Qt,bn),q0=Math.min(S.line,Dt.line),aa=Math.min(c.lastLine(),Math.max(S.line,Dt.line));q0<=aa;q0++){var Wi=Rt(F,q0).text,gr=De(Wi,S0,nn);S0==Hr?kt.push(new Zn(M(q0,gr),M(q0,gr))):Wi.length>gr&&kt.push(new Zn(M(q0,gr),M(q0,De(Wi,Hr,nn))))}kt.length||kt.push(new Zn(S,S)),li(F,_o(c,K.ranges.slice(0,N).concat(kt),N),{origin:"*mouse",scroll:!1}),c.scrollIntoView(Dt)}else{var Xi=B,$r=WF(c,Dt,p.unit),Fr=Xi.anchor,_r;X($r.anchor,Fr)>0?(_r=$r.head,Fr=ze(Xi.from(),$r.anchor)):(_r=$r.anchor,Fr=Me(Xi.to(),$r.head));var nr=K.ranges.slice(0);nr[N]=Lj(c,new Zn(it(F,Fr),_r)),li(F,_o(c,nr,N),Ue)}}var Oe=w.wrapper.getBoundingClientRect(),nt=0;function ut(Dt){var kt=++nt,nn=Yc(c,Dt,!0,p.unit=="rectangle");if(!!nn)if(X(nn,ge)!=0){c.curOp.focus=G(Re(c)),Ge(nn);var Qt=Im(w,F);(nn.line>=Qt.to||nn.line<Qt.from)&&setTimeout(jr(c,function(){nt==kt&&ut(Dt)}),150)}else{var bn=Dt.clientY<Oe.top?-20:Dt.clientY>Oe.bottom?20:0;bn&&setTimeout(jr(c,function(){nt==kt&&(w.scroller.scrollTop+=bn,ut(Dt))}),50)}}function vt(Dt){c.state.selectingText=!1,nt=1/0,Dt&&(X0(Dt),w.input.focus()),Xt(w.wrapper.ownerDocument,"mousemove",Vt),Xt(w.wrapper.ownerDocument,"mouseup",Lt),F.history.lastSelOrigin=null}var Vt=jr(c,function(Dt){Dt.buttons===0||!xi(Dt)?vt(Dt):ut(Dt)}),Lt=jr(c,vt);c.state.selectingText=Lt,Je(w.wrapper.ownerDocument,"mousemove",Vt),Je(w.wrapper.ownerDocument,"mouseup",Lt)}function Lj(c,A){var S=A.anchor,p=A.head,w=Rt(c.doc,S.line);if(X(S,p)==0&&S.sticky==p.sticky)return A;var F=ht(w);if(!F)return A;var B=Ce(F,S.ch,S.sticky),N=F[B];if(N.from!=S.ch&&N.to!=S.ch)return A;var K=B+(N.from==S.ch==(N.level!=1)?0:1);if(K==0||K==F.length)return A;var Z;if(p.line!=S.line)Z=(p.line-S.line)*(c.doc.direction=="ltr"?1:-1)>0;else{var pe=Ce(F,p.ch,p.sticky),ge=pe-B||(p.ch-S.ch)*(N.level==1?-1:1);pe==K-1||pe==K?Z=ge<0:Z=ge>0}var Ge=F[K+(Z?-1:0)],Oe=Z==(Ge.level==1),nt=Oe?Ge.from:Ge.to,ut=Oe?"after":"before";return S.ch==nt&&S.sticky==ut?A:new Zn(new M(S.line,nt,ut),p)}function XF(c,A,S,p){var w,F;if(A.touches)w=A.touches[0].clientX,F=A.touches[0].clientY;else try{w=A.clientX,F=A.clientY}catch{return!1}if(w>=Math.floor(c.display.gutters.getBoundingClientRect().right))return!1;p&&X0(A);var B=c.display,N=B.lineDiv.getBoundingClientRect();if(F>N.bottom||!On(c,S))return na(A);F-=N.top-B.viewOffset;for(var K=0;K<c.display.gutterSpecs.length;++K){var Z=B.gutters.childNodes[K];if(Z&&Z.getBoundingClientRect().right>=w){var pe=E0(c.doc,F),ge=c.display.gutterSpecs[K];return xt(c,S,c,pe,ge.className,A),na(A)}}}function Sx(c,A){return XF(c,A,"gutterClick",!0)}function KF(c,A){yi(c.display,A)||Bj(c,A)||on(c,A,"contextmenu")||$||c.display.input.onContextMenu(A)}function Bj(c,A){return On(c,"gutterContextMenu")?XF(c,A,"gutterContextMenu",!1):!1}function YF(c){c.display.wrapper.className=c.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+c.options.theme.replace(/(^|\s)\s*/g," cm-s-"),J(c)}var kd={toString:function(){return"CodeMirror.Init"}},qF={},qm={};function Mj(c){var A=c.optionHandlers;function S(p,w,F,B){c.defaults[p]=w,F&&(A[p]=B?function(N,K,Z){Z!=kd&&F(N,K,Z)}:F)}c.defineOption=S,c.Init=kd,S("value","",function(p,w){return p.setValue(w)},!0),S("mode",null,function(p,w){p.doc.modeOption=w,sx(p)},!0),S("indentUnit",2,sx,!0),S("indentWithTabs",!1),S("smartIndent",!0),S("tabSize",4,function(p){hf(p),J(p),Hi(p)},!0),S("lineSeparator",null,function(p,w){if(p.doc.lineSep=w,!!w){var F=[],B=p.doc.first;p.doc.iter(function(K){for(var Z=0;;){var pe=K.text.indexOf(w,Z);if(pe==-1)break;Z=pe+w.length,F.push(M(B,pe))}B++});for(var N=F.length-1;N>=0;N--)Bd(p.doc,w,F[N],M(F[N].line,F[N].ch+w.length))}}),S("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(p,w,F){p.state.specialChars=new RegExp(w.source+(w.test("	")?"":"|	"),"g"),F!=kd&&p.refresh()}),S("specialCharPlaceholder",ym,function(p){return p.refresh()},!0),S("electricChars",!0),S("inputStyle",V?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),S("spellcheck",!1,function(p,w){return p.getInputField().spellcheck=w},!0),S("autocorrect",!1,function(p,w){return p.getInputField().autocorrect=w},!0),S("autocapitalize",!1,function(p,w){return p.getInputField().autocapitalize=w},!0),S("rtlMoveVisually",!R),S("wholeLineUpdateBefore",!0),S("theme","default",function(p){YF(p),ff(p)},!0),S("keyMap","default",function(p,w,F){var B=Km(w),N=F!=kd&&Km(F);N&&N.detach&&N.detach(p,B),B.attach&&B.attach(p,N||null)}),S("extraKeys",null),S("configureMouse",null),S("lineWrapping",!1,Oj,!0),S("gutters",[],function(p,w){p.display.gutterSpecs=ax(w,p.options.lineNumbers),ff(p)},!0),S("fixedGutter",!0,function(p,w){p.display.gutters.style.left=w?K2(p.display)+"px":"0",p.refresh()},!0),S("coverGutterNextToScrollbar",!1,function(p){return bd(p)},!0),S("scrollbarStyle","native",function(p){JD(p),bd(p),p.display.scrollbars.setScrollTop(p.doc.scrollTop),p.display.scrollbars.setScrollLeft(p.doc.scrollLeft)},!0),S("lineNumbers",!1,function(p,w){p.display.gutterSpecs=ax(p.options.gutters,w),ff(p)},!0),S("firstLineNumber",1,ff,!0),S("lineNumberFormatter",function(p){return p},ff,!0),S("showCursorWhenSelecting",!1,sf,!0),S("resetSelectionOnContextMenu",!0),S("lineWiseCopyCut",!0),S("pasteLinesPerSelection",!0),S("selectionsMayTouch",!1),S("readOnly",!1,function(p,w){w=="nocursor"&&(Fd(p),p.display.input.blur()),p.display.input.readOnlyChanged(w)}),S("screenReaderLabel",null,function(p,w){w=w===""?null:w,p.display.input.screenReaderLabelChanged(w)}),S("disableInput",!1,function(p,w){w||p.display.input.reset()},!0),S("dragDrop",!0,Ij),S("allowDropFileTypes",null),S("cursorBlinkRate",530),S("cursorScrollMargin",0),S("cursorHeight",1,sf,!0),S("singleCursorHeightPerLine",!0,sf,!0),S("workTime",100),S("workDelay",100),S("flattenSpans",!0,hf,!0),S("addModeClass",!1,hf,!0),S("pollInterval",100),S("undoDepth",200,function(p,w){return p.doc.history.undoDepth=w}),S("historyEventDelay",1250),S("viewportMargin",10,function(p){return p.refresh()},!0),S("maxHighlightLength",1e4,hf,!0),S("moveInputWithCursor",!0,function(p,w){w||p.display.input.resetPosition()}),S("tabindex",null,function(p,w){return p.display.input.getField().tabIndex=w||""}),S("autofocus",null),S("direction","ltr",function(p,w){return p.doc.setDirection(w)},!0),S("phrases",null)}function Ij(c,A,S){var p=S&&S!=kd;if(!A!=!p){var w=c.display.dragFunctions,F=A?Je:Xt;F(c.display.scroller,"dragstart",w.start),F(c.display.scroller,"dragenter",w.enter),F(c.display.scroller,"dragover",w.over),F(c.display.scroller,"dragleave",w.leave),F(c.display.scroller,"drop",w.drop)}}function Oj(c){c.options.lineWrapping?(ne(c.display.wrapper,"CodeMirror-wrap"),c.display.sizer.style.minWidth="",c.display.sizerWidth=null):(I(c.display.wrapper,"CodeMirror-wrap"),$A(c)),Y2(c),Hi(c),J(c),setTimeout(function(){return bd(c)},100)}function N0(c,A){var S=this;if(!(this instanceof N0))return new N0(c,A);this.options=A=A?ye(A):{},ye(qF,A,!1);var p=A.value;typeof p=="string"?p=new zi(p,A.mode,null,A.lineSeparator,A.direction):A.mode&&(p.modeOption=A.mode),this.doc=p;var w=new N0.inputStyles[A.inputStyle](this),F=this.display=new QU(c,p,w,A);F.wrapper.CodeMirror=this,YF(this),A.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),JD(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new at,keySeq:null,specialChars:null},A.autofocus&&!V&&F.input.focus(),l&&u<11&&setTimeout(function(){return S.display.input.reset(!0)},20),kj(this),pj(),Zc(this),this.curOp.forceUpdate=!0,sF(this,p),A.autofocus&&!V||this.hasFocus()?setTimeout(function(){S.hasFocus()&&!S.state.focused&&Z2(S)},20):Fd(this);for(var B in qm)qm.hasOwnProperty(B)&&qm[B](this,A[B],kd);eF(this),A.finishInit&&A.finishInit(this);for(var N=0;N<gx.length;++N)gx[N](this);$c(this),d&&A.lineWrapping&&getComputedStyle(F.lineDiv).textRendering=="optimizelegibility"&&(F.lineDiv.style.textRendering="auto")}N0.defaults=qF,N0.optionHandlers=qm;function kj(c){var A=c.display;Je(A.scroller,"mousedown",jr(c,zF)),l&&u<11?Je(A.scroller,"dblclick",jr(c,function(K){if(!on(c,K)){var Z=Yc(c,K);if(!(!Z||Sx(c,K)||yi(c.display,K))){X0(K);var pe=c.findWordAt(Z);Gm(c.doc,pe.anchor,pe.head)}}})):Je(A.scroller,"dblclick",function(K){return on(c,K)||X0(K)}),Je(A.scroller,"contextmenu",function(K){return KF(c,K)}),Je(A.input.getField(),"contextmenu",function(K){A.scroller.contains(K.target)||KF(c,K)});var S,p={end:0};function w(){A.activeTouch&&(S=setTimeout(function(){return A.activeTouch=null},1e3),p=A.activeTouch,p.end=+new Date)}function F(K){if(K.touches.length!=1)return!1;var Z=K.touches[0];return Z.radiusX<=1&&Z.radiusY<=1}function B(K,Z){if(Z.left==null)return!0;var pe=Z.left-K.left,ge=Z.top-K.top;return pe*pe+ge*ge>20*20}Je(A.scroller,"touchstart",function(K){if(!on(c,K)&&!F(K)&&!Sx(c,K)){A.input.ensurePolled(),clearTimeout(S);var Z=+new Date;A.activeTouch={start:Z,moved:!1,prev:Z-p.end<=300?p:null},K.touches.length==1&&(A.activeTouch.left=K.touches[0].pageX,A.activeTouch.top=K.touches[0].pageY)}}),Je(A.scroller,"touchmove",function(){A.activeTouch&&(A.activeTouch.moved=!0)}),Je(A.scroller,"touchend",function(K){var Z=A.activeTouch;if(Z&&!yi(A,K)&&Z.left!=null&&!Z.moved&&new Date-Z.start<300){var pe=c.coordsChar(A.activeTouch,"page"),ge;!Z.prev||B(Z,Z.prev)?ge=new Zn(pe,pe):!Z.prev.prev||B(Z,Z.prev.prev)?ge=c.findWordAt(pe):ge=new Zn(M(pe.line,0),it(c.doc,M(pe.line+1,0))),c.setSelection(ge.anchor,ge.head),c.focus(),X0(K)}w()}),Je(A.scroller,"touchcancel",w),Je(A.scroller,"scroll",function(){A.scroller.clientHeight&&(cf(c,A.scroller.scrollTop),Qc(c,A.scroller.scrollLeft,!0),xt(c,"scroll",c))}),Je(A.scroller,"mousewheel",function(K){return rF(c,K)}),Je(A.scroller,"DOMMouseScroll",function(K){return rF(c,K)}),Je(A.wrapper,"scroll",function(){return A.wrapper.scrollTop=A.wrapper.scrollLeft=0}),A.dragFunctions={enter:function(K){on(c,K)||$t(K)},over:function(K){on(c,K)||(hj(c,K),$t(K))},start:function(K){return fj(c,K)},drop:jr(c,Aj),leave:function(K){on(c,K)||PF(c)}};var N=A.input.getField();Je(N,"keyup",function(K){return GF.call(c,K)}),Je(N,"keydown",jr(c,jF)),Je(N,"keypress",jr(c,HF)),Je(N,"focus",function(K){return Z2(c,K)}),Je(N,"blur",function(K){return Fd(c,K)})}var gx=[];N0.defineInitHook=function(c){return gx.push(c)};function Df(c,A,S,p){var w=c.doc,F;S==null&&(S="add"),S=="smart"&&(w.mode.indent?F=K0(c,A).state:S="prev");var B=c.options.tabSize,N=Rt(w,A),K=We(N.text,null,B);N.stateAfter&&(N.stateAfter=null);var Z=N.text.match(/^\s*/)[0],pe;if(!p&&!/\S/.test(N.text))pe=0,S="not";else if(S=="smart"&&(pe=w.mode.indent(F,N.text.slice(Z.length),N.text),pe==lt||pe>150)){if(!p)return;S="prev"}S=="prev"?A>w.first?pe=We(Rt(w,A-1).text,null,B):pe=0:S=="add"?pe=K+c.options.indentUnit:S=="subtract"?pe=K-c.options.indentUnit:typeof S=="number"&&(pe=K+S),pe=Math.max(0,pe);var ge="",Ge=0;if(c.options.indentWithTabs)for(var Oe=Math.floor(pe/B);Oe;--Oe)Ge+=B,ge+="	";if(Ge<pe&&(ge+=le(pe-Ge)),ge!=Z)return Bd(w,ge,M(A,0),M(A,Z.length),"+input"),N.stateAfter=null,!0;for(var nt=0;nt<w.sel.ranges.length;nt++){var ut=w.sel.ranges[nt];if(ut.head.line==A&&ut.head.ch<Z.length){var vt=M(A,Z.length);dx(w,nt,new Zn(vt,vt));break}}}var xo=null;function Qm(c){xo=c}function _x(c,A,S,p,w){var F=c.doc;c.display.shift=!1,p||(p=F.sel);var B=+new Date-200,N=w=="paste"||c.state.pasteIncoming>B,K=Ze(A),Z=null;if(N&&p.ranges.length>1)if(xo&&xo.text.join(`
`)==A){if(p.ranges.length%xo.text.length==0){Z=[];for(var pe=0;pe<xo.text.length;pe++)Z.push(F.splitLines(xo.text[pe]))}}else K.length==p.ranges.length&&c.options.pasteLinesPerSelection&&(Z=fe(K,function(Vt){return[Vt]}));for(var ge=c.curOp.updateInput,Ge=p.ranges.length-1;Ge>=0;Ge--){var Oe=p.ranges[Ge],nt=Oe.from(),ut=Oe.to();Oe.empty()&&(S&&S>0?nt=M(nt.line,nt.ch-S):c.state.overwrite&&!N?ut=M(ut.line,Math.min(Rt(F,ut.line).text.length,ut.ch+re(K).length)):N&&xo&&xo.lineWise&&xo.text.join(`
`)==K.join(`
`)&&(nt=ut=M(nt.line,0)));var vt={from:nt,to:ut,text:Z?Z[Ge%Z.length]:K,origin:w||(N?"paste":c.state.cutIncoming>B?"cut":"+input")};Ld(c.doc,vt),cr(c,"inputRead",c,vt)}A&&!N&&JF(c,A),Td(c),c.curOp.updateInput<2&&(c.curOp.updateInput=ge),c.curOp.typing=!0,c.state.pasteIncoming=c.state.cutIncoming=-1}function QF(c,A){var S=c.clipboardData&&c.clipboardData.getData("Text");if(S)return c.preventDefault(),!A.isReadOnly()&&!A.options.disableInput&&A.hasFocus()&&ia(A,function(){return _x(A,S,0,null,"paste")}),!0}function JF(c,A){if(!(!c.options.electricChars||!c.options.smartIndent))for(var S=c.doc.sel,p=S.ranges.length-1;p>=0;p--){var w=S.ranges[p];if(!(w.head.ch>100||p&&S.ranges[p-1].head.line==w.head.line)){var F=c.getModeAt(w.head),B=!1;if(F.electricChars){for(var N=0;N<F.electricChars.length;N++)if(A.indexOf(F.electricChars.charAt(N))>-1){B=Df(c,w.head.line,"smart");break}}else F.electricInput&&F.electricInput.test(Rt(c.doc,w.head.line).text.slice(0,w.head.ch))&&(B=Df(c,w.head.line,"smart"));B&&cr(c,"electricInput",c,w.head.line)}}}function ZF(c){for(var A=[],S=[],p=0;p<c.doc.sel.ranges.length;p++){var w=c.doc.sel.ranges[p].head.line,F={anchor:M(w,0),head:M(w+1,0)};S.push(F),A.push(c.getRange(F.anchor,F.head))}return{text:A,ranges:S}}function $F(c,A,S,p){c.setAttribute("autocorrect",S?"":"off"),c.setAttribute("autocapitalize",p?"":"off"),c.setAttribute("spellcheck",!!A)}function e3(){var c=ee("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),A=ee("div",[c],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return d?c.style.width="1000px":c.setAttribute("wrap","off"),v&&(c.style.border="1px solid black"),$F(c),A}function Nj(c){var A=c.optionHandlers,S=c.helpers={};c.prototype={constructor:c,focus:function(){Be(this).focus(),this.display.input.focus()},setOption:function(p,w){var F=this.options,B=F[p];F[p]==w&&p!="mode"||(F[p]=w,A.hasOwnProperty(p)&&jr(this,A[p])(this,w,B),xt(this,"optionChange",this,p))},getOption:function(p){return this.options[p]},getDoc:function(){return this.doc},addKeyMap:function(p,w){this.state.keyMaps[w?"push":"unshift"](Km(p))},removeKeyMap:function(p){for(var w=this.state.keyMaps,F=0;F<w.length;++F)if(w[F]==p||w[F].name==p)return w.splice(F,1),!0},addOverlay:Ei(function(p,w){var F=p.token?p:c.getMode(this.options,p);if(F.startState)throw new Error("Overlays may not be stateful.");He(this.state.overlays,{mode:F,modeSpec:p,opaque:w&&w.opaque,priority:w&&w.priority||0},function(B){return B.priority}),this.state.modeGen++,Hi(this)}),removeOverlay:Ei(function(p){for(var w=this.state.overlays,F=0;F<w.length;++F){var B=w[F].modeSpec;if(B==p||typeof p=="string"&&B.name==p){w.splice(F,1),this.state.modeGen++,Hi(this);return}}}),indentLine:Ei(function(p,w,F){typeof w!="string"&&typeof w!="number"&&(w==null?w=this.options.smartIndent?"smart":"prev":w=w?"add":"subtract"),Ni(this.doc,p)&&Df(this,p,w,F)}),indentSelection:Ei(function(p){for(var w=this.doc.sel.ranges,F=-1,B=0;B<w.length;B++){var N=w[B];if(N.empty())N.head.line>F&&(Df(this,N.head.line,p,!0),F=N.head.line,B==this.doc.sel.primIndex&&Td(this));else{var K=N.from(),Z=N.to(),pe=Math.max(F,K.line);F=Math.min(this.lastLine(),Z.line-(Z.ch?0:1))+1;for(var ge=pe;ge<F;++ge)Df(this,ge,p);var Ge=this.doc.sel.ranges;K.ch==0&&w.length==Ge.length&&Ge[B].from().ch>0&&dx(this.doc,B,new Zn(K,Ge[B].to()),Ie)}}}),getTokenAt:function(p,w){return wi(this,p,w)},getLineTokens:function(p,w){return wi(this,M(p),w,!0)},getTokenTypeAt:function(p){p=it(this.doc,p);var w=yn(this,Rt(this.doc,p.line)),F=0,B=(w.length-1)/2,N=p.ch,K;if(N==0)K=w[2];else for(;;){var Z=F+B>>1;if((Z?w[Z*2-1]:0)>=N)B=Z;else if(w[Z*2+1]<N)F=Z+1;else{K=w[Z*2+2];break}}var pe=K?K.indexOf("overlay "):-1;return pe<0?K:pe==0?null:K.slice(0,pe-1)},getModeAt:function(p){var w=this.doc.mode;return w.innerMode?c.innerMode(w,this.getTokenAt(p).state).mode:w},getHelper:function(p,w){return this.getHelpers(p,w)[0]},getHelpers:function(p,w){var F=[];if(!S.hasOwnProperty(w))return F;var B=S[w],N=this.getModeAt(p);if(typeof N[w]=="string")B[N[w]]&&F.push(B[N[w]]);else if(N[w])for(var K=0;K<N[w].length;K++){var Z=B[N[w][K]];Z&&F.push(Z)}else N.helperType&&B[N.helperType]?F.push(B[N.helperType]):B[N.name]&&F.push(B[N.name]);for(var pe=0;pe<B._global.length;pe++){var ge=B._global[pe];ge.pred(N,this)&&Ke(F,ge.val)==-1&&F.push(ge.val)}return F},getStateAfter:function(p,w){var F=this.doc;return p=Ye(F,p==null?F.first+F.size-1:p),K0(this,p+1,w).state},cursorCoords:function(p,w){var F,B=this.doc.sel.primary();return p==null?F=B.head:typeof p=="object"?F=it(this.doc,p):F=p?B.from():B.to(),ct(this,F,w||"page")},charCoords:function(p,w){return ot(this,it(this.doc,p),w||"page")},coordsChar:function(p,w){return p=et(this,p,w||"page"),_n(this,p.left,p.top)},lineAtHeight:function(p,w){return p=et(this,{top:p,left:0},w||"page").top,E0(this.doc,p+this.display.viewOffset)},heightAtLine:function(p,w,F){var B=!1,N;if(typeof p=="number"){var K=this.doc.first+this.doc.size-1;p<this.doc.first?p=this.doc.first:p>K&&(p=K,B=!0),N=Rt(this.doc,p)}else N=p;return je(this,N,{top:0,left:0},w||"page",F||B).top+(B?this.doc.height-Ga(N):0)},defaultTextHeight:function(){return Vd(this.display)},defaultCharWidth:function(){return Dd(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(p,w,F,B,N){var K=this.display;p=ct(this,it(this.doc,p));var Z=p.bottom,pe=p.left;if(w.style.position="absolute",w.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(w),K.sizer.appendChild(w),B=="over")Z=p.top;else if(B=="above"||B=="near"){var ge=Math.max(K.wrapper.clientHeight,this.doc.height),Ge=Math.max(K.sizer.clientWidth,K.lineSpace.clientWidth);(B=="above"||p.bottom+w.offsetHeight>ge)&&p.top>w.offsetHeight?Z=p.top-w.offsetHeight:p.bottom+w.offsetHeight<=ge&&(Z=p.bottom),pe+w.offsetWidth>Ge&&(pe=Ge-w.offsetWidth)}w.style.top=Z+"px",w.style.left=w.style.right="",N=="right"?(pe=K.sizer.clientWidth-w.offsetWidth,w.style.right="0px"):(N=="left"?pe=0:N=="middle"&&(pe=(K.sizer.clientWidth-w.offsetWidth)/2),w.style.left=pe+"px"),F&&IU(this,{left:pe,top:Z,right:pe+w.offsetWidth,bottom:Z+w.offsetHeight})},triggerOnKeyDown:Ei(jF),triggerOnKeyPress:Ei(HF),triggerOnKeyUp:GF,triggerOnMouseDown:Ei(zF),execCommand:function(p){if(yf.hasOwnProperty(p))return yf[p].call(null,this)},triggerElectric:Ei(function(p){JF(this,p)}),findPosH:function(p,w,F,B){var N=1;w<0&&(N=-1,w=-w);for(var K=it(this.doc,p),Z=0;Z<w&&(K=xx(this.doc,K,N,F,B),!K.hitSide);++Z);return K},moveH:Ei(function(p,w){var F=this;this.extendSelectionsBy(function(B){return F.display.shift||F.doc.extend||B.empty()?xx(F.doc,B.head,p,w,F.options.rtlMoveVisually):p<0?B.from():B.to()},k)}),deleteH:Ei(function(p,w){var F=this.doc.sel,B=this.doc;F.somethingSelected()?B.replaceSelection("",null,"+delete"):Od(this,function(N){var K=xx(B,N.head,p,w,!1);return p<0?{from:K,to:N.head}:{from:N.head,to:K}})}),findPosV:function(p,w,F,B){var N=1,K=B;w<0&&(N=-1,w=-w);for(var Z=it(this.doc,p),pe=0;pe<w;++pe){var ge=ct(this,Z,"div");if(K==null?K=ge.left:ge.left=K,Z=t3(this,ge,N,F),Z.hitSide)break}return Z},moveV:Ei(function(p,w){var F=this,B=this.doc,N=[],K=!this.display.shift&&!B.extend&&B.sel.somethingSelected();if(B.extendSelectionsBy(function(pe){if(K)return p<0?pe.from():pe.to();var ge=ct(F,pe.head,"div");pe.goalColumn!=null&&(ge.left=pe.goalColumn),N.push(ge.left);var Ge=t3(F,ge,p,w);return w=="page"&&pe==B.sel.primary()&&ex(F,ot(F,Ge,"div").top-ge.top),Ge},k),N.length)for(var Z=0;Z<B.sel.ranges.length;Z++)B.sel.ranges[Z].goalColumn=N[Z]}),findWordAt:function(p){var w=this.doc,F=Rt(w,p.line).text,B=p.ch,N=p.ch;if(F){var K=this.getHelper(p,"wordChars");(p.sticky=="before"||N==F.length)&&B?--B:++N;for(var Z=F.charAt(B),pe=Le(Z,K)?function(ge){return Le(ge,K)}:/\s/.test(Z)?function(ge){return/\s/.test(ge)}:function(ge){return!/\s/.test(ge)&&!Le(ge)};B>0&&pe(F.charAt(B-1));)--B;for(;N<F.length&&pe(F.charAt(N));)++N}return new Zn(M(p.line,B),M(p.line,N))},toggleOverwrite:function(p){p!=null&&p==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ne(this.display.cursorDiv,"CodeMirror-overwrite"):I(this.display.cursorDiv,"CodeMirror-overwrite"),xt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==G(Re(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Ei(function(p,w){lf(this,p,w)}),getScrollInfo:function(){var p=this.display.scroller;return{left:p.scrollLeft,top:p.scrollTop,height:p.scrollHeight-Sr(this)-this.display.barHeight,width:p.scrollWidth-Sr(this)-this.display.barWidth,clientHeight:_l(this),clientWidth:Y0(this)}},scrollIntoView:Ei(function(p,w){p==null?(p={from:this.doc.sel.primary().head,to:null},w==null&&(w=this.options.cursorScrollMargin)):typeof p=="number"?p={from:M(p,0),to:null}:p.from==null&&(p={from:p,to:null}),p.to||(p.to=p.from),p.margin=w||0,p.from.line!=null?OU(this,p):KD(this,p.from,p.to,p.margin)}),setSize:Ei(function(p,w){var F=this,B=function(K){return typeof K=="number"||/^\d+$/.test(String(K))?K+"px":K};p!=null&&(this.display.wrapper.style.width=B(p)),w!=null&&(this.display.wrapper.style.height=B(w)),this.options.lineWrapping&&W(this);var N=this.display.viewFrom;this.doc.iter(N,this.display.viewTo,function(K){if(K.widgets){for(var Z=0;Z<K.widgets.length;Z++)if(K.widgets[Z].noHScroll){vl(F,N,"widget");break}}++N}),this.curOp.forceUpdate=!0,xt(this,"refresh",this)}),operation:function(p){return ia(this,p)},startOperation:function(){return Zc(this)},endOperation:function(){return $c(this)},refresh:Ei(function(){var p=this.display.cachedTextHeight;Hi(this),this.curOp.forceUpdate=!0,J(this),lf(this,this.doc.scrollLeft,this.doc.scrollTop),rx(this.display),(p==null||Math.abs(p-Vd(this.display))>.5||this.options.lineWrapping)&&Y2(this),xt(this,"refresh",this)}),swapDoc:Ei(function(p){var w=this.doc;return w.cm=null,this.state.selectingText&&this.state.selectingText(),sF(this,p),J(this),this.display.input.reset(),lf(this,p.scrollLeft,p.scrollTop),this.curOp.forceScroll=!0,cr(this,"swapDoc",this,w),w}),phrase:function(p){var w=this.options.phrases;return w&&Object.prototype.hasOwnProperty.call(w,p)?w[p]:p},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},V0(c),c.registerHelper=function(p,w,F){S.hasOwnProperty(p)||(S[p]=c[p]={_global:[]}),S[p][w]=F},c.registerGlobalHelper=function(p,w,F,B){c.registerHelper(p,w,B),S[p]._global.push({pred:F,val:B})}}function xx(c,A,S,p,w){var F=A,B=S,N=Rt(c,A.line),K=w&&c.direction=="rtl"?-S:S;function Z(){var Lt=A.line+K;return Lt<c.first||Lt>=c.first+c.size?!1:(A=new M(Lt,A.ch,A.sticky),N=Rt(c,Lt))}function pe(Lt){var Dt;if(p=="codepoint"){var kt=N.text.charCodeAt(A.ch+(S>0?0:-1));if(isNaN(kt))Dt=null;else{var nn=S>0?kt>=55296&&kt<56320:kt>=56320&&kt<57343;Dt=new M(A.line,Math.max(0,Math.min(N.text.length,A.ch+S*(nn?2:1))),-S)}}else w?Dt=xj(c.cm,N,A,S):Dt=fx(N,A,S);if(Dt==null)if(!Lt&&Z())A=hx(w,c.cm,N,A.line,K);else return!1;else A=Dt;return!0}if(p=="char"||p=="codepoint")pe();else if(p=="column")pe(!0);else if(p=="word"||p=="group")for(var ge=null,Ge=p=="group",Oe=c.cm&&c.cm.getHelper(A,"wordChars"),nt=!0;!(S<0&&!pe(!nt));nt=!1){var ut=N.text.charAt(A.ch)||`
`,vt=Le(ut,Oe)?"w":Ge&&ut==`
`?"n":!Ge||/\s/.test(ut)?null:"p";if(Ge&&!nt&&!vt&&(vt="s"),ge&&ge!=vt){S<0&&(S=1,pe(),A.sticky="after");break}if(vt&&(ge=vt),S>0&&!pe(!nt))break}var Vt=zm(c,A,F,B,!0);return Ae(F,Vt)&&(Vt.hitSide=!0),Vt}function t3(c,A,S,p){var w=c.doc,F=A.left,B;if(p=="page"){var N=Math.min(c.display.wrapper.clientHeight,Be(c).innerHeight||w(c).documentElement.clientHeight),K=Math.max(N-.5*Vd(c.display),3);B=(S>0?A.bottom:A.top)+S*K}else p=="line"&&(B=S>0?A.bottom+3:A.top-3);for(var Z;Z=_n(c,F,B),!!Z.outside;){if(S<0?B<=0:B>=w.height){Z.hitSide=!0;break}B+=S*5}return Z}var i0=function(c){this.cm=c,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new at,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};i0.prototype.init=function(c){var A=this,S=this,p=S.cm,w=S.div=c.lineDiv;w.contentEditable=!0,$F(w,p.options.spellcheck,p.options.autocorrect,p.options.autocapitalize);function F(N){for(var K=N.target;K;K=K.parentNode){if(K==w)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(K.className))break}return!1}Je(w,"paste",function(N){!F(N)||on(p,N)||QF(N,p)||u<=11&&setTimeout(jr(p,function(){return A.updateFromDOM()}),20)}),Je(w,"compositionstart",function(N){A.composing={data:N.data,done:!1}}),Je(w,"compositionupdate",function(N){A.composing||(A.composing={data:N.data,done:!1})}),Je(w,"compositionend",function(N){A.composing&&(N.data!=A.composing.data&&A.readFromDOMSoon(),A.composing.done=!0)}),Je(w,"touchstart",function(){return S.forceCompositionEnd()}),Je(w,"input",function(){A.composing||A.readFromDOMSoon()});function B(N){if(!(!F(N)||on(p,N))){if(p.somethingSelected())Qm({lineWise:!1,text:p.getSelections()}),N.type=="cut"&&p.replaceSelection("",null,"cut");else if(p.options.lineWiseCopyCut){var K=ZF(p);Qm({lineWise:!0,text:K.text}),N.type=="cut"&&p.operation(function(){p.setSelections(K.ranges,0,Ie),p.replaceSelection("",null,"cut")})}else return;if(N.clipboardData){N.clipboardData.clearData();var Z=xo.text.join(`
`);if(N.clipboardData.setData("Text",Z),N.clipboardData.getData("Text")==Z){N.preventDefault();return}}var pe=e3(),ge=pe.firstChild;p.display.lineSpace.insertBefore(pe,p.display.lineSpace.firstChild),ge.value=xo.text.join(`
`);var Ge=G(w.ownerDocument);ie(ge),setTimeout(function(){p.display.lineSpace.removeChild(pe),Ge.focus(),Ge==w&&S.showPrimarySelection()},50)}}Je(w,"copy",B),Je(w,"cut",B)},i0.prototype.screenReaderLabelChanged=function(c){c?this.div.setAttribute("aria-label",c):this.div.removeAttribute("aria-label")},i0.prototype.prepareSelection=function(){var c=zD(this.cm,!1);return c.focus=G(this.div.ownerDocument)==this.div,c},i0.prototype.showSelection=function(c,A){!c||!this.cm.display.view.length||((c.focus||A)&&this.showPrimarySelection(),this.showMultipleSelections(c))},i0.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},i0.prototype.showPrimarySelection=function(){var c=this.getSelection(),A=this.cm,S=A.doc.sel.primary(),p=S.from(),w=S.to();if(A.display.viewTo==A.display.viewFrom||p.line>=A.display.viewTo||w.line<A.display.viewFrom){c.removeAllRanges();return}var F=Jm(A,c.anchorNode,c.anchorOffset),B=Jm(A,c.focusNode,c.focusOffset);if(!(F&&!F.bad&&B&&!B.bad&&X(ze(F,B),p)==0&&X(Me(F,B),w)==0)){var N=A.display.view,K=p.line>=A.display.viewFrom&&n3(A,p)||{node:N[0].measure.map[2],offset:0},Z=w.line<A.display.viewTo&&n3(A,w);if(!Z){var pe=N[N.length-1].measure,ge=pe.maps?pe.maps[pe.maps.length-1]:pe.map;Z={node:ge[ge.length-1],offset:ge[ge.length-2]-ge[ge.length-3]}}if(!K||!Z){c.removeAllRanges();return}var Ge=c.rangeCount&&c.getRangeAt(0),Oe;try{Oe=U(K.node,K.offset,Z.offset,Z.node)}catch{}Oe&&(!i&&A.state.focused?(c.collapse(K.node,K.offset),Oe.collapsed||(c.removeAllRanges(),c.addRange(Oe))):(c.removeAllRanges(),c.addRange(Oe)),Ge&&c.anchorNode==null?c.addRange(Ge):i&&this.startGracePeriod()),this.rememberSelection()}},i0.prototype.startGracePeriod=function(){var c=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){c.gracePeriod=!1,c.selectionChanged()&&c.cm.operation(function(){return c.cm.curOp.selectionChanged=!0})},20)},i0.prototype.showMultipleSelections=function(c){P(this.cm.display.cursorDiv,c.cursors),P(this.cm.display.selectionDiv,c.selection)},i0.prototype.rememberSelection=function(){var c=this.getSelection();this.lastAnchorNode=c.anchorNode,this.lastAnchorOffset=c.anchorOffset,this.lastFocusNode=c.focusNode,this.lastFocusOffset=c.focusOffset},i0.prototype.selectionInEditor=function(){var c=this.getSelection();if(!c.rangeCount)return!1;var A=c.getRangeAt(0).commonAncestorContainer;return O(this.div,A)},i0.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||G(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},i0.prototype.blur=function(){this.div.blur()},i0.prototype.getField=function(){return this.div},i0.prototype.supportsTouch=function(){return!0},i0.prototype.receivedFocus=function(){var c=this,A=this;this.selectionInEditor()?setTimeout(function(){return c.pollSelection()},20):ia(this.cm,function(){return A.cm.curOp.selectionChanged=!0});function S(){A.cm.state.focused&&(A.pollSelection(),A.polling.set(A.cm.options.pollInterval,S))}this.polling.set(this.cm.options.pollInterval,S)},i0.prototype.selectionChanged=function(){var c=this.getSelection();return c.anchorNode!=this.lastAnchorNode||c.anchorOffset!=this.lastAnchorOffset||c.focusNode!=this.lastFocusNode||c.focusOffset!=this.lastFocusOffset},i0.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var c=this.getSelection(),A=this.cm;if(C&&f&&this.cm.display.gutterSpecs.length&&Uj(c.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var S=Jm(A,c.anchorNode,c.anchorOffset),p=Jm(A,c.focusNode,c.focusOffset);S&&p&&ia(A,function(){li(A.doc,yl(S,p),Ie),(S.bad||p.bad)&&(A.curOp.selectionChanged=!0)})}}},i0.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var c=this.cm,A=c.display,S=c.doc.sel.primary(),p=S.from(),w=S.to();if(p.ch==0&&p.line>c.firstLine()&&(p=M(p.line-1,Rt(c.doc,p.line-1).length)),w.ch==Rt(c.doc,w.line).text.length&&w.line<c.lastLine()&&(w=M(w.line+1,0)),p.line<A.viewFrom||w.line>A.viewTo-1)return!1;var F,B,N;p.line==A.viewFrom||(F=qc(c,p.line))==0?(B=sn(A.view[0].line),N=A.view[0].node):(B=sn(A.view[F].line),N=A.view[F-1].node.nextSibling);var K=qc(c,w.line),Z,pe;if(K==A.view.length-1?(Z=A.viewTo-1,pe=A.lineDiv.lastChild):(Z=sn(A.view[K+1].line)-1,pe=A.view[K+1].node.previousSibling),!N)return!1;for(var ge=c.doc.splitLines(jj(c,N,pe,B,Z)),Ge=D0(c.doc,M(B,0),M(Z,Rt(c.doc,Z).text.length));ge.length>1&&Ge.length>1;)if(re(ge)==re(Ge))ge.pop(),Ge.pop(),Z--;else if(ge[0]==Ge[0])ge.shift(),Ge.shift(),B++;else break;for(var Oe=0,nt=0,ut=ge[0],vt=Ge[0],Vt=Math.min(ut.length,vt.length);Oe<Vt&&ut.charCodeAt(Oe)==vt.charCodeAt(Oe);)++Oe;for(var Lt=re(ge),Dt=re(Ge),kt=Math.min(Lt.length-(ge.length==1?Oe:0),Dt.length-(Ge.length==1?Oe:0));nt<kt&&Lt.charCodeAt(Lt.length-nt-1)==Dt.charCodeAt(Dt.length-nt-1);)++nt;if(ge.length==1&&Ge.length==1&&B==p.line)for(;Oe&&Oe>p.ch&&Lt.charCodeAt(Lt.length-nt-1)==Dt.charCodeAt(Dt.length-nt-1);)Oe--,nt++;ge[ge.length-1]=Lt.slice(0,Lt.length-nt).replace(/^\u200b+/,""),ge[0]=ge[0].slice(Oe).replace(/\u200b+$/,"");var nn=M(B,Oe),Qt=M(Z,Ge.length?re(Ge).length-nt:0);if(ge.length>1||ge[0]||X(nn,Qt))return Bd(c.doc,ge,nn,Qt,"+input"),!0},i0.prototype.ensurePolled=function(){this.forceCompositionEnd()},i0.prototype.reset=function(){this.forceCompositionEnd()},i0.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},i0.prototype.readFromDOMSoon=function(){var c=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(c.readDOMTimeout=null,c.composing)if(c.composing.done)c.composing=null;else return;c.updateFromDOM()},80))},i0.prototype.updateFromDOM=function(){var c=this;(this.cm.isReadOnly()||!this.pollContent())&&ia(this.cm,function(){return Hi(c.cm)})},i0.prototype.setUneditable=function(c){c.contentEditable="false"},i0.prototype.onKeyPress=function(c){c.charCode==0||this.composing||(c.preventDefault(),this.cm.isReadOnly()||jr(this.cm,_x)(this.cm,String.fromCharCode(c.charCode==null?c.keyCode:c.charCode),0))},i0.prototype.readOnlyChanged=function(c){this.div.contentEditable=String(c!="nocursor")},i0.prototype.onContextMenu=function(){},i0.prototype.resetPosition=function(){},i0.prototype.needsContentAttribute=!0;function n3(c,A){var S=Ed(c,A.line);if(!S||S.hidden)return null;var p=Rt(c.doc,A.line),w=Tm(S,p,A.line),F=ht(p,c.doc.direction),B="left";if(F){var N=Ce(F,A.ch);B=N%2?"right":"left"}var K=Pm(w.map,A.ch,B);return K.offset=K.collapse=="right"?K.end:K.start,K}function Uj(c){for(var A=c;A;A=A.parentNode)if(/CodeMirror-gutter-wrapper/.test(A.className))return!0;return!1}function Nd(c,A){return A&&(c.bad=!0),c}function jj(c,A,S,p,w){var F="",B=!1,N=c.doc.lineSeparator(),K=!1;function Z(Oe){return function(nt){return nt.id==Oe}}function pe(){B&&(F+=N,K&&(F+=N),B=K=!1)}function ge(Oe){Oe&&(pe(),F+=Oe)}function Ge(Oe){if(Oe.nodeType==1){var nt=Oe.getAttribute("cm-text");if(nt){ge(nt);return}var ut=Oe.getAttribute("cm-marker"),vt;if(ut){var Vt=c.findMarks(M(p,0),M(w+1,0),Z(+ut));Vt.length&&(vt=Vt[0].find(0))&&ge(D0(c.doc,vt.from,vt.to).join(N));return}if(Oe.getAttribute("contenteditable")=="false")return;var Lt=/^(pre|div|p|li|table|br)$/i.test(Oe.nodeName);if(!/^br$/i.test(Oe.nodeName)&&Oe.textContent.length==0)return;Lt&&pe();for(var Dt=0;Dt<Oe.childNodes.length;Dt++)Ge(Oe.childNodes[Dt]);/^(pre|p)$/i.test(Oe.nodeName)&&(K=!0),Lt&&(B=!0)}else Oe.nodeType==3&&ge(Oe.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ge(A),A!=S;)A=A.nextSibling,K=!1;return F}function Jm(c,A,S){var p;if(A==c.display.lineDiv){if(p=c.display.lineDiv.childNodes[S],!p)return Nd(c.clipPos(M(c.display.viewTo-1)),!0);A=null,S=0}else for(p=A;;p=p.parentNode){if(!p||p==c.display.lineDiv)return null;if(p.parentNode&&p.parentNode==c.display.lineDiv)break}for(var w=0;w<c.display.view.length;w++){var F=c.display.view[w];if(F.node==p)return Gj(F,A,S)}}function Gj(c,A,S){var p=c.text.firstChild,w=!1;if(!A||!O(p,A))return Nd(M(sn(c.line),0),!0);if(A==p&&(w=!0,A=p.childNodes[S],S=0,!A)){var F=c.rest?re(c.rest):c.line;return Nd(M(sn(F),F.text.length),w)}var B=A.nodeType==3?A:null,N=A;for(!B&&A.childNodes.length==1&&A.firstChild.nodeType==3&&(B=A.firstChild,S&&(S=B.nodeValue.length));N.parentNode!=p;)N=N.parentNode;var K=c.measure,Z=K.maps;function pe(vt,Vt,Lt){for(var Dt=-1;Dt<(Z?Z.length:0);Dt++)for(var kt=Dt<0?K.map:Z[Dt],nn=0;nn<kt.length;nn+=3){var Qt=kt[nn+2];if(Qt==vt||Qt==Vt){var bn=sn(Dt<0?c.line:c.rest[Dt]),S0=kt[nn]+Lt;return(Lt<0||Qt!=vt)&&(S0=kt[nn+(Lt?1:0)]),M(bn,S0)}}}var ge=pe(B,N,S);if(ge)return Nd(ge,w);for(var Ge=N.nextSibling,Oe=B?B.nodeValue.length-S:0;Ge;Ge=Ge.nextSibling){if(ge=pe(Ge,Ge.firstChild,0),ge)return Nd(M(ge.line,ge.ch-Oe),w);Oe+=Ge.textContent.length}for(var nt=N.previousSibling,ut=S;nt;nt=nt.previousSibling){if(ge=pe(nt,nt.firstChild,-1),ge)return Nd(M(ge.line,ge.ch+ut),w);ut+=nt.textContent.length}}var ur=function(c){this.cm=c,this.prevInput="",this.pollingFast=!1,this.polling=new at,this.hasSelection=!1,this.composing=null};ur.prototype.init=function(c){var A=this,S=this,p=this.cm;this.createField(c);var w=this.textarea;c.wrapper.insertBefore(this.wrapper,c.wrapper.firstChild),v&&(w.style.width="0px"),Je(w,"input",function(){l&&u>=9&&A.hasSelection&&(A.hasSelection=null),S.poll()}),Je(w,"paste",function(B){on(p,B)||QF(B,p)||(p.state.pasteIncoming=+new Date,S.fastPoll())});function F(B){if(!on(p,B)){if(p.somethingSelected())Qm({lineWise:!1,text:p.getSelections()});else if(p.options.lineWiseCopyCut){var N=ZF(p);Qm({lineWise:!0,text:N.text}),B.type=="cut"?p.setSelections(N.ranges,null,Ie):(S.prevInput="",w.value=N.text.join(`
`),ie(w))}else return;B.type=="cut"&&(p.state.cutIncoming=+new Date)}}Je(w,"cut",F),Je(w,"copy",F),Je(c.scroller,"paste",function(B){if(!(yi(c,B)||on(p,B))){if(!w.dispatchEvent){p.state.pasteIncoming=+new Date,S.focus();return}var N=new Event("paste");N.clipboardData=B.clipboardData,w.dispatchEvent(N)}}),Je(c.lineSpace,"selectstart",function(B){yi(c,B)||X0(B)}),Je(w,"compositionstart",function(){var B=p.getCursor("from");S.composing&&S.composing.range.clear(),S.composing={start:B,range:p.markText(B,p.getCursor("to"),{className:"CodeMirror-composing"})}}),Je(w,"compositionend",function(){S.composing&&(S.poll(),S.composing.range.clear(),S.composing=null)})},ur.prototype.createField=function(c){this.wrapper=e3(),this.textarea=this.wrapper.firstChild},ur.prototype.screenReaderLabelChanged=function(c){c?this.textarea.setAttribute("aria-label",c):this.textarea.removeAttribute("aria-label")},ur.prototype.prepareSelection=function(){var c=this.cm,A=c.display,S=c.doc,p=zD(c);if(c.options.moveInputWithCursor){var w=ct(c,S.sel.primary().head,"div"),F=A.wrapper.getBoundingClientRect(),B=A.lineDiv.getBoundingClientRect();p.teTop=Math.max(0,Math.min(A.wrapper.clientHeight-10,w.top+B.top-F.top)),p.teLeft=Math.max(0,Math.min(A.wrapper.clientWidth-10,w.left+B.left-F.left))}return p},ur.prototype.showSelection=function(c){var A=this.cm,S=A.display;P(S.cursorDiv,c.cursors),P(S.selectionDiv,c.selection),c.teTop!=null&&(this.wrapper.style.top=c.teTop+"px",this.wrapper.style.left=c.teLeft+"px")},ur.prototype.reset=function(c){if(!(this.contextMenuPending||this.composing)){var A=this.cm;if(A.somethingSelected()){this.prevInput="";var S=A.getSelection();this.textarea.value=S,A.state.focused&&ie(this.textarea),l&&u>=9&&(this.hasSelection=S)}else c||(this.prevInput=this.textarea.value="",l&&u>=9&&(this.hasSelection=null))}},ur.prototype.getField=function(){return this.textarea},ur.prototype.supportsTouch=function(){return!1},ur.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!V||G(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},ur.prototype.blur=function(){this.textarea.blur()},ur.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ur.prototype.receivedFocus=function(){this.slowPoll()},ur.prototype.slowPoll=function(){var c=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){c.poll(),c.cm.state.focused&&c.slowPoll()})},ur.prototype.fastPoll=function(){var c=!1,A=this;A.pollingFast=!0;function S(){var p=A.poll();!p&&!c?(c=!0,A.polling.set(60,S)):(A.pollingFast=!1,A.slowPoll())}A.polling.set(20,S)},ur.prototype.poll=function(){var c=this,A=this.cm,S=this.textarea,p=this.prevInput;if(this.contextMenuPending||!A.state.focused||ft(S)&&!p&&!this.composing||A.isReadOnly()||A.options.disableInput||A.state.keySeq)return!1;var w=S.value;if(w==p&&!A.somethingSelected())return!1;if(l&&u>=9&&this.hasSelection===w||D&&/[\uf700-\uf7ff]/.test(w))return A.display.input.reset(),!1;if(A.doc.sel==A.display.selForContextMenu){var F=w.charCodeAt(0);if(F==8203&&!p&&(p="\u200B"),F==8666)return this.reset(),this.cm.execCommand("undo")}for(var B=0,N=Math.min(p.length,w.length);B<N&&p.charCodeAt(B)==w.charCodeAt(B);)++B;return ia(A,function(){_x(A,w.slice(B),p.length-B,null,c.composing?"*compose":null),w.length>1e3||w.indexOf(`
`)>-1?S.value=c.prevInput="":c.prevInput=w,c.composing&&(c.composing.range.clear(),c.composing.range=A.markText(c.composing.start,A.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ur.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ur.prototype.onKeyPress=function(){l&&u>=9&&(this.hasSelection=null),this.fastPoll()},ur.prototype.onContextMenu=function(c){var A=this,S=A.cm,p=S.display,w=A.textarea;A.contextMenuPending&&A.contextMenuPending();var F=Yc(S,c),B=p.scroller.scrollTop;if(!F||g)return;var N=S.options.resetSelectionOnContextMenu;N&&S.doc.sel.contains(F)==-1&&jr(S,li)(S.doc,yl(F),Ie);var K=w.style.cssText,Z=A.wrapper.style.cssText,pe=A.wrapper.offsetParent.getBoundingClientRect();A.wrapper.style.cssText="position: static",w.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(c.clientY-pe.top-5)+"px; left: "+(c.clientX-pe.left-5)+`px;
      z-index: 1000; background: `+(l?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var ge;d&&(ge=w.ownerDocument.defaultView.scrollY),p.input.focus(),d&&w.ownerDocument.defaultView.scrollTo(null,ge),p.input.reset(),S.somethingSelected()||(w.value=A.prevInput=" "),A.contextMenuPending=Oe,p.selForContextMenu=S.doc.sel,clearTimeout(p.detectingSelectAll);function Ge(){if(w.selectionStart!=null){var ut=S.somethingSelected(),vt="\u200B"+(ut?w.value:"");w.value="\u21DA",w.value=vt,A.prevInput=ut?"":"\u200B",w.selectionStart=1,w.selectionEnd=vt.length,p.selForContextMenu=S.doc.sel}}function Oe(){if(A.contextMenuPending==Oe&&(A.contextMenuPending=!1,A.wrapper.style.cssText=Z,w.style.cssText=K,l&&u<9&&p.scrollbars.setScrollTop(p.scroller.scrollTop=B),w.selectionStart!=null)){(!l||l&&u<9)&&Ge();var ut=0,vt=function(){p.selForContextMenu==S.doc.sel&&w.selectionStart==0&&w.selectionEnd>0&&A.prevInput=="\u200B"?jr(S,xF)(S):ut++<10?p.detectingSelectAll=setTimeout(vt,500):(p.selForContextMenu=null,p.input.reset())};p.detectingSelectAll=setTimeout(vt,200)}}if(l&&u>=9&&Ge(),$){$t(c);var nt=function(){Xt(window,"mouseup",nt),setTimeout(Oe,20)};Je(window,"mouseup",nt)}else setTimeout(Oe,50)},ur.prototype.readOnlyChanged=function(c){c||this.reset(),this.textarea.disabled=c=="nocursor",this.textarea.readOnly=!!c},ur.prototype.setUneditable=function(){},ur.prototype.needsContentAttribute=!1;function Hj(c,A){if(A=A?ye(A):{},A.value=c.value,!A.tabindex&&c.tabIndex&&(A.tabindex=c.tabIndex),!A.placeholder&&c.placeholder&&(A.placeholder=c.placeholder),A.autofocus==null){var S=G(c.ownerDocument);A.autofocus=S==c||c.getAttribute("autofocus")!=null&&S==document.body}function p(){c.value=N.getValue()}var w;if(c.form&&(Je(c.form,"submit",p),!A.leaveSubmitMethodAlone)){var F=c.form;w=F.submit;try{var B=F.submit=function(){p(),F.submit=w,F.submit(),F.submit=B}}catch{}}A.finishInit=function(K){K.save=p,K.getTextArea=function(){return c},K.toTextArea=function(){K.toTextArea=isNaN,p(),c.parentNode.removeChild(K.getWrapperElement()),c.style.display="",c.form&&(Xt(c.form,"submit",p),!A.leaveSubmitMethodAlone&&typeof c.form.submit=="function"&&(c.form.submit=w))}},c.style.display="none";var N=N0(function(K){return c.parentNode.insertBefore(K,c.nextSibling)},A);return N}function zj(c){c.off=Xt,c.on=Je,c.wheelEventPixels=JU,c.Doc=zi,c.splitLines=Ze,c.countColumn=We,c.findColumn=De,c.isWordChar=Fe,c.Pass=lt,c.signal=xt,c.Line=ma,c.changeEnd=El,c.scrollbarModel=QD,c.Pos=M,c.cmpPos=X,c.modes=Sn,c.mimeModes=Tn,c.resolveMode=Xn,c.getMode=Jr,c.modeExtensions=dn,c.extendMode=oi,c.copyState=m0,c.startState=Ur,c.innerMode=Dn,c.commands=yf,c.keyMap=bs,c.keyName=IF,c.isModifierKey=BF,c.lookupKey=Id,c.normalizeKeyMap=_j,c.StringStream=en,c.SharedTextMarker=xf,c.TextMarker=Vl,c.LineWidget=_f,c.e_preventDefault=X0,c.e_stopPropagation=ki,c.e_stop=$t,c.addClass=ne,c.contains=O,c.rmClass=I,c.keyNames=Dl}Mj(N0),Nj(N0);var Wj="iter insert remove copy getEditor constructor".split(" ");for(var Zm in zi.prototype)zi.prototype.hasOwnProperty(Zm)&&Ke(Wj,Zm)<0&&(N0.prototype[Zm]=function(c){return function(){return c.apply(this.doc,arguments)}}(zi.prototype[Zm]));return V0(zi),N0.inputStyles={textarea:ur,contenteditable:i0},N0.defineMode=function(c){!N0.defaults.mode&&c!="null"&&(N0.defaults.mode=c),hn.apply(this,arguments)},N0.defineMIME=jt,N0.defineMode("null",function(){return{token:function(c){return c.skipToEnd()}}}),N0.defineMIME("text/plain","null"),N0.defineExtension=function(c,A){N0.prototype[c]=A},N0.defineDocExtension=function(c,A){zi.prototype[c]=A},N0.fromTextArea=Hj,zj(N0),N0.version="5.65.7",N0})})(ds);const gve=ds.exports;(function(n,e){(function(t){t(ds.exports)})(function(t){var r="CodeMirror-hint",i="CodeMirror-hint-active";t.showHint=function(x,v,C){if(!v)return x.showHint(C);C&&C.async&&(v.async=!0);var V={hint:v};if(C)for(var D in C)V[D]=C[D];return x.showHint(V)},t.defineExtension("showHint",function(x){x=l(this,this.getCursor("start"),x);var v=this.listSelections();if(!(v.length>1)){if(this.somethingSelected()){if(!x.hint.supportsSelection)return;for(var C=0;C<v.length;C++)if(v[C].head.line!=v[C].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var V=this.state.completionActive=new a(this,x);!V.options.hint||(t.signal(this,"startCompletion",this),V.update(!0))}}),t.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});function a(x,v){if(this.cm=x,this.options=v,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var C=this;x.on("cursorActivity",this.activityFunc=function(){C.cursorActivity()})}}var o=window.requestAnimationFrame||function(x){return setTimeout(x,1e3/60)},s=window.cancelAnimationFrame||clearTimeout;a.prototype={close:function(){!this.active()||(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&t.signal(this.data,"close"),this.widget&&this.widget.close(),t.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(x,v){var C=x.list[v],V=this;this.cm.operation(function(){C.hint?C.hint(V.cm,x,C):V.cm.replaceRange(u(C),C.from||x.from,C.to||x.to,"complete"),t.signal(x,"pick",C),V.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(s(this.debounce),this.debounce=0);var x=this.startPos;this.data&&(x=this.data.from);var v=this.cm.getCursor(),C=this.cm.getLine(v.line);if(v.line!=this.startPos.line||C.length-v.ch!=this.startLen-this.startPos.ch||v.ch<x.ch||this.cm.somethingSelected()||!v.ch||this.options.closeCharacters.test(C.charAt(v.ch-1)))this.close();else{var V=this;this.debounce=o(function(){V.update()}),this.widget&&this.widget.disable()}},update:function(x){if(this.tick!=null){var v=this,C=++this.tick;g(this.options.hint,this.cm,this.options,function(V){v.tick==C&&v.finishUpdate(V,x)})}},finishUpdate:function(x,v){this.data&&t.signal(this.data,"update");var C=this.widget&&this.widget.picked||v&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=x,x&&x.list.length&&(C&&x.list.length==1?this.pick(x,0):(this.widget=new f(this,x),t.signal(x,"shown")))}};function l(x,v,C){var V=x.options.hintOptions,D={};for(var H in E)D[H]=E[H];if(V)for(var H in V)V[H]!==void 0&&(D[H]=V[H]);if(C)for(var H in C)C[H]!==void 0&&(D[H]=C[H]);return D.hint.resolve&&(D.hint=D.hint.resolve(x,v)),D}function u(x){return typeof x=="string"?x:x.text}function d(x,v){var C={Up:function(){v.moveFocus(-1)},Down:function(){v.moveFocus(1)},PageUp:function(){v.moveFocus(-v.menuSize()+1,!0)},PageDown:function(){v.moveFocus(v.menuSize()-1,!0)},Home:function(){v.setFocus(0)},End:function(){v.setFocus(v.length-1)},Enter:v.pick,Tab:v.pick,Esc:v.close},V=/Mac/.test(navigator.platform);V&&(C["Ctrl-P"]=function(){v.moveFocus(-1)},C["Ctrl-N"]=function(){v.moveFocus(1)});var D=x.options.customKeys,H=D?{}:C;function R($,z){var I;typeof z!="string"?I=function(q){return z(q,v)}:C.hasOwnProperty(z)?I=C[z]:I=z,H[$]=I}if(D)for(var j in D)D.hasOwnProperty(j)&&R(j,D[j]);var te=x.options.extraKeys;if(te)for(var j in te)te.hasOwnProperty(j)&&R(j,te[j]);return H}function h(x,v){for(;v&&v!=x;){if(v.nodeName.toUpperCase()==="LI"&&v.parentNode==x)return v;v=v.parentNode}}function f(x,v){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=x,this.data=v,this.picked=!1;var C=this,V=x.cm,D=V.getInputField().ownerDocument,H=D.defaultView||D.parentWindow,R=this.hints=D.createElement("ul");R.setAttribute("role","listbox"),R.setAttribute("aria-expanded","true"),R.id=this.id;var j=x.cm.options.theme;R.className="CodeMirror-hints "+j,this.selectedHint=v.selectedHint||0;for(var te=v.list,$=0;$<te.length;++$){var z=R.appendChild(D.createElement("li")),I=te[$],q=r+($!=this.selectedHint?"":" "+i);I.className!=null&&(q=I.className+" "+q),z.className=q,$==this.selectedHint&&z.setAttribute("aria-selected","true"),z.id=this.id+"-"+$,z.setAttribute("role","option"),I.render?I.render(z,v,I):z.appendChild(D.createTextNode(I.displayText||u(I))),z.hintId=$}var P=x.options.container||D.body,ee=V.cursorCoords(x.options.alignWithWord?v.from:null),ue=ee.left,U=ee.bottom,O=!0,G=0,ne=0;if(P!==D.body){var se=["absolute","relative","fixed"].indexOf(H.getComputedStyle(P).position)!==-1,ie=se?P:P.offsetParent,Re=ie.getBoundingClientRect(),Be=D.body.getBoundingClientRect();G=Re.left-Be.left-ie.scrollLeft,ne=Re.top-Be.top-ie.scrollTop}R.style.left=ue-G+"px",R.style.top=U-ne+"px";var Te=H.innerWidth||Math.max(D.body.offsetWidth,D.documentElement.offsetWidth),ye=H.innerHeight||Math.max(D.body.offsetHeight,D.documentElement.offsetHeight);P.appendChild(R),V.getInputField().setAttribute("aria-autocomplete","list"),V.getInputField().setAttribute("aria-owns",this.id),V.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var We=x.options.moveOnOverlap?R.getBoundingClientRect():new DOMRect,at=x.options.paddingForScrollbar?R.scrollHeight>R.clientHeight+1:!1,Ke;setTimeout(function(){Ke=V.getScrollInfo()});var tt=We.bottom-ye;if(tt>0){var lt=We.bottom-We.top,Ie=ee.top-(ee.bottom-We.top);if(Ie-lt>0)R.style.top=(U=ee.top-lt-ne)+"px",O=!1;else if(lt>ye){R.style.height=ye-5+"px",R.style.top=(U=ee.bottom-We.top-ne)+"px";var Ue=V.getCursor();v.from.ch!=Ue.ch&&(ee=V.cursorCoords(Ue),R.style.left=(ue=ee.left-G)+"px",We=R.getBoundingClientRect())}}var k=We.right-Te;if(at&&(k+=V.display.nativeBarWidth),k>0&&(We.right-We.left>Te&&(R.style.width=Te-5+"px",k-=We.right-We.left-Te),R.style.left=(ue=Math.max(ee.left-k-G,0))+"px"),at)for(var De=R.firstChild;De;De=De.nextSibling)De.style.paddingRight=V.display.nativeBarWidth+"px";if(V.addKeyMap(this.keyMap=d(x,{moveFocus:function(re,fe){C.changeActive(C.selectedHint+re,fe)},setFocus:function(re){C.changeActive(re)},menuSize:function(){return C.screenAmount()},length:te.length,close:function(){x.close()},pick:function(){C.pick()},data:v})),x.options.closeOnUnfocus){var we;V.on("blur",this.onBlur=function(){we=setTimeout(function(){x.close()},100)}),V.on("focus",this.onFocus=function(){clearTimeout(we)})}V.on("scroll",this.onScroll=function(){var re=V.getScrollInfo(),fe=V.getWrapperElement().getBoundingClientRect();Ke||(Ke=V.getScrollInfo());var He=U+Ke.top-re.top,oe=He-(H.pageYOffset||(D.documentElement||D.body).scrollTop);if(O||(oe+=R.offsetHeight),oe<=fe.top||oe>=fe.bottom)return x.close();R.style.top=He+"px",R.style.left=ue+Ke.left-re.left+"px"}),t.on(R,"dblclick",function(re){var fe=h(R,re.target||re.srcElement);fe&&fe.hintId!=null&&(C.changeActive(fe.hintId),C.pick())}),t.on(R,"click",function(re){var fe=h(R,re.target||re.srcElement);fe&&fe.hintId!=null&&(C.changeActive(fe.hintId),x.options.completeOnSingleClick&&C.pick())}),t.on(R,"mousedown",function(){setTimeout(function(){V.focus()},20)});var le=this.getSelectedHintRange();return(le.from!==0||le.to!==0)&&this.scrollToActive(),t.signal(v,"select",te[this.selectedHint],R.childNodes[this.selectedHint]),!0}f.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var x=this.completion.cm.getInputField();x.removeAttribute("aria-activedescendant"),x.removeAttribute("aria-owns");var v=this.completion.cm;this.completion.options.closeOnUnfocus&&(v.off("blur",this.onBlur),v.off("focus",this.onFocus)),v.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var x=this;this.keyMap={Enter:function(){x.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(x,v){if(x>=this.data.list.length?x=v?this.data.list.length-1:0:x<0&&(x=v?0:this.data.list.length-1),this.selectedHint!=x){var C=this.hints.childNodes[this.selectedHint];C&&(C.className=C.className.replace(" "+i,""),C.removeAttribute("aria-selected")),C=this.hints.childNodes[this.selectedHint=x],C.className+=" "+i,C.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",C.id),this.scrollToActive(),t.signal(this.data,"select",this.data.list[this.selectedHint],C)}},scrollToActive:function(){var x=this.getSelectedHintRange(),v=this.hints.childNodes[x.from],C=this.hints.childNodes[x.to],V=this.hints.firstChild;v.offsetTop<this.hints.scrollTop?this.hints.scrollTop=v.offsetTop-V.offsetTop:C.offsetTop+C.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=C.offsetTop+C.offsetHeight-this.hints.clientHeight+V.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var x=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-x),to:Math.min(this.data.list.length-1,this.selectedHint+x)}}};function m(x,v){if(!x.somethingSelected())return v;for(var C=[],V=0;V<v.length;V++)v[V].supportsSelection&&C.push(v[V]);return C}function g(x,v,C,V){if(x.async)x(v,V,C);else{var D=x(v,C);D&&D.then?D.then(V):V(D)}}function _(x,v){var C=x.getHelpers(v,"hint"),V;if(C.length){var D=function(H,R,j){var te=m(H,C);function $(z){if(z==te.length)return R(null);g(te[z],H,j,function(I){I&&I.list.length>0?R(I):$(z+1)})}$(0)};return D.async=!0,D.supportsSelection=!0,D}else return(V=x.getHelper(x.getCursor(),"hintWords"))?function(H){return t.hint.fromList(H,{words:V})}:t.hint.anyword?function(H,R){return t.hint.anyword(H,R)}:function(){}}t.registerHelper("hint","auto",{resolve:_}),t.registerHelper("hint","fromList",function(x,v){var C=x.getCursor(),V=x.getTokenAt(C),D,H=t.Pos(C.line,V.start),R=C;V.start<C.ch&&/\w/.test(V.string.charAt(C.ch-V.start-1))?D=V.string.substr(0,C.ch-V.start):(D="",H=C);for(var j=[],te=0;te<v.words.length;te++){var $=v.words[te];$.slice(0,D.length)==D&&j.push($)}if(j.length)return{list:j,from:H,to:R}}),t.commands.autocomplete=t.showHint;var E={hint:t.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};t.defineOption("hintOptions",null)})})();ds.exports.defineMode("mips-pp64",function(){const n=/\.(ascii|asciiz|align|beginstatic|byte|definelabel|else|elseif|endif|endstatic|fill|float|halfword|if|skip|word)\b/i,e=/\$?(a([0-3]|t)|f([0-9][1-9]?|p)|g(p)|k([0-1])|r(0|a)|s([0-8]|p)|t(\d)|v([0-1])|zero)\b/i,t=/\b(abs\.s|abs\.d|add|add\.s|add\.d|addi|addiu|addu|and|andi|bc1f|bc1fl|bc1t|bc1tl|beq|beql|beqz|bgez|bgezal|bgezall|bgezl|bgtz|bgtzl|blez|blezl|bltz|bltzal|bltzall|bltzl|bne|bnel|bnez|bnezl|break|c\.f\.s|c\.un\.s|c\.eq\.s|c\.ueq\.s|c\.olt\.s|c\.ult\.s|c\.ole\.s|c\.ule\.s|c\.sf\.s|c\.ngle\.s|c\.seq\.s|c\.ngl\.s|c\.lt\.s|c\.nge\.s|c\.le\.s|c\.ngt\.s|c\.f\.d|c\.un\.d|c\.eq\.d|c\.ueq\.d|c\.olt\.d|c\.ult\.d|c\.ole\.d|c\.ule\.d|c\.sf\.d|c\.ngle\.d|c\.seq\.d|c\.ngl\.d|c\.lt\.d|c\.nge\.d|c\.le\.d|c\.ngt\.d|ceil\.l\.s|ceil\.l\.d|ceil\.w\.s|ceil\.w\.d|cfc1|ctc1|cop0|cop1|cop2|cop3|cvt\.d\.s|cvt\.d\.w|cvt\.d\.l|cvt\.l\.d|cvt\.l\.d|cvt\.s\.d|cvt\.s\.w|cvt\.s\.l|cvt\.w\.s|cvt\.w\.d|dadd|daddi|daddiu|daddu|ddiv|ddivu|div|div\.s|div\.d|divu|dmfc1|dmult|dmultu|dmtc1|dsll|dsll32|dsllv|dsra|dsra32|dsrav|dsrl|dsrl32|dsrlv|dsub|dsubu|floor\.l\.s|floor\.l\.d|floor\.w\.s|floor\.w\.d|j|jal|jalr|jr|lb|lbu|ld|ldc1|ldc2|ldl|ldr|lh|lhu|li|ll|lld|lui|lw|lwc1|lwc2|lwc3|lwl|lwr|lwu|madd\.s|madd\.d|mfc1|mfhi|mflo|mov\.s|mov\.d|move|movt|msub\.s|msub\.d|mtc1|mthi|mtlo|mul\.s|mul\.d|mult|multu|neg\.s|neg\.d|nop|nor|or|ori|round\.l\.s|round\.l\.d|round\.w\.s|round\.w\.d|sb|sc|scd|sd|sdc1|sdc2|sdl|sdr|sh|sll|sllv|slt|slti|sltiu|sltu|sqrt\.s|sqrt\.d|sra|srav|srl|srlv|sub|sub\.s|sub\.d|subu|sw|swc1|swc2|swc3|swl|swr|sync|syscall|teq|teqi|tge|tgei|tgeiu|tgeu|tlt|tlti|tltiu|tltu|tne|tnei|trunc\.l\.s|trunc\.l\.d|trunc\.w\.s|trunc\.w\.d|xor|xori)\b/i,r=/\b(0x[\da-f]+|o[0-7]+|b[0-1]+|\d+)\b/i;return{startState:function(){return{blockComment:!1}},token:function(i,a){if(i.eatSpace())return null;let o;if(a.blockComment||i.match("/*")){a.blockComment=!0;let s=!1;for(;o=i.next();)if(o==="/"&&s){a.blockComment=!1;break}else s=o==="*";return"comment"}if(i.eat(";")||i.match("//"))return i.skipToEnd(),"comment";if(i.eat('"')){for(;(o=i.next())&&o!=='"';);return"string"}if(i.eat(".")){if(i.eatWhile(/\w/))return o=i.current(),n.test(o)?"def":null}else if(i.eatWhile(/[$\w.]/)){if(o=i.current(),t.test(o)){let s="keyword";return o.toLowerCase()==="nop"&&(s+=" nop"),s}if(e.test(o))return"atom";if(r.test(o))return"number"}return i.next(),null}}});ds.exports.registerHelper("hint","mips-pp64",function(n){const e=n.getCursor(),t=n.getTokenAt(e),r=t.string,i=t.start,a=e.ch,o=n.getLine(e.line);if(o[0]===".")return{list:["ascii","asciiz","align","byte","definelabel","else","elseif","endif","fill","float","halfword","if","skip","word"],from:ds.exports.Pos(e.line,1),to:ds.exports.Pos(e.line,a)};const s=Ave();function l(m,g){if(!m.length)return[];if(m.length===1)return Dg(m[0],g);let _=Dg(m[0],g);for(let E=0;E<m.length-1;E++){const x=Dg(m[E+1],g);_=cG(_,x,(v,C)=>v.name===C.name)}return _}if(/^(j|jal)\s+/i.test(o)){const m=l(s,"code");return h(m)}if(/^\w+\s+/.test(o)){const m=l(s);return h(m)}function h(m){let g=m.map(E=>E.name),_=1;return r.trim()&&(_=r.lastIndexOf("(")+1,r.substring(_)&&(g=f(r,g))),{list:g.sort(),from:ds.exports.Pos(e.line,i+_),to:ds.exports.Pos(e.line,a)}}function f(m,g){return g.filter(_=>_.startsWith(m))}});(function(n,e){(function(t){t(ds.exports)})(function(t){function r(O,G,ne,se,ie,Re){this.indented=O,this.column=G,this.type=ne,this.info=se,this.align=ie,this.prev=Re}function i(O,G,ne,se){var ie=O.indented;return O.context&&O.context.type=="statement"&&ne!="statement"&&(ie=O.context.indented),O.context=new r(ie,G,ne,se,null,O.context)}function a(O){var G=O.context.type;return(G==")"||G=="]"||G=="}")&&(O.indented=O.context.indented),O.context=O.context.prev}function o(O,G,ne){if(G.prevToken=="variable"||G.prevToken=="type"||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(O.string.slice(0,ne))||G.typeAtEndOfLine&&O.column()==O.indentation())return!0}function s(O){for(;;){if(!O||O.type=="top")return!0;if(O.type=="}"&&O.prev.info!="namespace")return!1;O=O.prev}}t.defineMode("clike",function(O,G){var ne=O.indentUnit,se=G.statementIndentUnit||ne,ie=G.dontAlignCalls,Re=G.keywords||{},Be=G.types||{},Te=G.builtin||{},ye=G.blockKeywords||{},We=G.defKeywords||{},at=G.atoms||{},Ke=G.hooks||{},tt=G.multiLineStrings,lt=G.indentStatements!==!1,Ie=G.indentSwitch!==!1,Ue=G.namespaceSeparator,k=G.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,De=G.numberStart||/[\d\.]/,we=G.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,le=G.isOperatorChar||/[+\-*&%=<>!?|\/]/,re=G.isIdentifierChar||/[\w\$_\xa1-\uffff]/,fe=G.isReservedIdentifier||!1,He,oe;function Y(Pe,rt){var Ee=Pe.next();if(Ke[Ee]){var ve=Ke[Ee](Pe,rt);if(ve!==!1)return ve}if(Ee=='"'||Ee=="'")return rt.tokenize=_e(Ee),rt.tokenize(Pe,rt);if(De.test(Ee)){if(Pe.backUp(1),Pe.match(we))return"number";Pe.next()}if(k.test(Ee))return He=Ee,null;if(Ee=="/"){if(Pe.eat("*"))return rt.tokenize=Fe,Fe(Pe,rt);if(Pe.eat("/"))return Pe.skipToEnd(),"comment"}if(le.test(Ee)){for(;!Pe.match(/^\/[\/*]/,!1)&&Pe.eat(le););return"operator"}if(Pe.eatWhile(re),Ue)for(;Pe.match(Ue);)Pe.eatWhile(re);var $e=Pe.current();return u(Re,$e)?(u(ye,$e)&&(He="newstatement"),u(We,$e)&&(oe=!0),"keyword"):u(Be,$e)?"type":u(Te,$e)||fe&&fe($e)?(u(ye,$e)&&(He="newstatement"),"builtin"):u(at,$e)?"atom":"variable"}function _e(Pe){return function(rt,Ee){for(var ve=!1,$e,_t=!1;($e=rt.next())!=null;){if($e==Pe&&!ve){_t=!0;break}ve=!ve&&$e=="\\"}return(_t||!(ve||tt))&&(Ee.tokenize=null),"string"}}function Fe(Pe,rt){for(var Ee=!1,ve;ve=Pe.next();){if(ve=="/"&&Ee){rt.tokenize=null;break}Ee=ve=="*"}return"comment"}function Le(Pe,rt){G.typeFirstDefinitions&&Pe.eol()&&s(rt.context)&&(rt.typeAtEndOfLine=o(Pe,rt,Pe.pos))}return{startState:function(Pe){return{tokenize:null,context:new r((Pe||0)-ne,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(Pe,rt){var Ee=rt.context;if(Pe.sol()&&(Ee.align==null&&(Ee.align=!1),rt.indented=Pe.indentation(),rt.startOfLine=!0),Pe.eatSpace())return Le(Pe,rt),null;He=oe=null;var ve=(rt.tokenize||Y)(Pe,rt);if(ve=="comment"||ve=="meta")return ve;if(Ee.align==null&&(Ee.align=!0),He==";"||He==":"||He==","&&Pe.match(/^\s*(?:\/\/.*)?$/,!1))for(;rt.context.type=="statement";)a(rt);else if(He=="{")i(rt,Pe.column(),"}");else if(He=="[")i(rt,Pe.column(),"]");else if(He=="(")i(rt,Pe.column(),")");else if(He=="}"){for(;Ee.type=="statement";)Ee=a(rt);for(Ee.type=="}"&&(Ee=a(rt));Ee.type=="statement";)Ee=a(rt)}else He==Ee.type?a(rt):lt&&((Ee.type=="}"||Ee.type=="top")&&He!=";"||Ee.type=="statement"&&He=="newstatement")&&i(rt,Pe.column(),"statement",Pe.current());if(ve=="variable"&&(rt.prevToken=="def"||G.typeFirstDefinitions&&o(Pe,rt,Pe.start)&&s(rt.context)&&Pe.match(/^\s*\(/,!1))&&(ve="def"),Ke.token){var $e=Ke.token(Pe,rt,ve);$e!==void 0&&(ve=$e)}return ve=="def"&&G.styleDefs===!1&&(ve="variable"),rt.startOfLine=!1,rt.prevToken=oe?"def":ve||He,Le(Pe,rt),ve},indent:function(Pe,rt){if(Pe.tokenize!=Y&&Pe.tokenize!=null||Pe.typeAtEndOfLine)return t.Pass;var Ee=Pe.context,ve=rt&&rt.charAt(0),$e=ve==Ee.type;if(Ee.type=="statement"&&ve=="}"&&(Ee=Ee.prev),G.dontIndentStatements)for(;Ee.type=="statement"&&G.dontIndentStatements.test(Ee.info);)Ee=Ee.prev;if(Ke.indent){var _t=Ke.indent(Pe,Ee,rt,ne);if(typeof _t=="number")return _t}var gt=Ee.prev&&Ee.prev.info=="switch";if(G.allmanIndentation&&/[{(]/.test(ve)){for(;Ee.type!="top"&&Ee.type!="}";)Ee=Ee.prev;return Ee.indented}return Ee.type=="statement"?Ee.indented+(ve=="{"?0:se):Ee.align&&(!ie||Ee.type!=")")?Ee.column+($e?0:1):Ee.type==")"&&!$e?Ee.indented+se:Ee.indented+($e?0:ne)+(!$e&&gt&&!/^(?:case|default)\b/.test(rt)?ne:0)},electricInput:Ie?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:"//",fold:"brace"}});function l(O){for(var G={},ne=O.split(" "),se=0;se<ne.length;++se)G[ne[se]]=!0;return G}function u(O,G){return typeof O=="function"?O(G):O.propertyIsEnumerable(G)}var d="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile inline restrict asm fortran",h="alignas alignof and and_eq audit axiom bitand bitor catch class compl concept constexpr const_cast decltype delete dynamic_cast explicit export final friend import module mutable namespace new noexcept not not_eq operator or or_eq override private protected public reinterpret_cast requires static_assert static_cast template this thread_local throw try typeid typename using virtual xor xor_eq",f="bycopy byref in inout oneway out self super atomic nonatomic retain copy readwrite readonly strong weak assign typeof nullable nonnull null_resettable _cmd @interface @implementation @end @protocol @encode @property @synthesize @dynamic @class @public @package @private @protected @required @optional @try @catch @finally @import @selector @encode @defs @synchronized @autoreleasepool @compatibility_alias @available",m="FOUNDATION_EXPORT FOUNDATION_EXTERN NS_INLINE NS_FORMAT_FUNCTION  NS_RETURNS_RETAINEDNS_ERROR_ENUM NS_RETURNS_NOT_RETAINED NS_RETURNS_INNER_POINTER NS_DESIGNATED_INITIALIZER NS_ENUM NS_OPTIONS NS_REQUIRES_NIL_TERMINATION NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_SWIFT_NAME NS_REFINED_FOR_SWIFT",g=l("int long char short double float unsigned signed void bool"),_=l("SEL instancetype id Class Protocol BOOL");function E(O){return u(g,O)||/.+_t$/.test(O)}function x(O){return E(O)||u(_,O)}var v="case do else for if switch while struct enum union",C="struct enum union";function V(O,G){if(!G.startOfLine)return!1;for(var ne,se=null;ne=O.peek();){if(ne=="\\"&&O.match(/^.$/)){se=V;break}else if(ne=="/"&&O.match(/^\/[\/\*]/,!1))break;O.next()}return G.tokenize=se,"meta"}function D(O,G){return G.prevToken=="type"?"type":!1}function H(O){return!O||O.length<2||O[0]!="_"?!1:O[1]=="_"||O[1]!==O[1].toLowerCase()}function R(O){return O.eatWhile(/[\w\.']/),"number"}function j(O,G){if(O.backUp(1),O.match(/^(?:R|u8R|uR|UR|LR)/)){var ne=O.match(/^"([^\s\\()]{0,16})\(/);return ne?(G.cpp11RawStringDelim=ne[1],G.tokenize=z,z(O,G)):!1}return O.match(/^(?:u8|u|U|L)/)?O.match(/^["']/,!1)?"string":!1:(O.next(),!1)}function te(O){var G=/(\w+)::~?(\w+)$/.exec(O);return G&&G[1]==G[2]}function $(O,G){for(var ne;(ne=O.next())!=null;)if(ne=='"'&&!O.eat('"')){G.tokenize=null;break}return"string"}function z(O,G){var ne=G.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),se=O.match(new RegExp(".*?\\)"+ne+'"'));return se?G.tokenize=null:O.skipToEnd(),"string"}function I(O,G){typeof O=="string"&&(O=[O]);var ne=[];function se(Re){if(Re)for(var Be in Re)Re.hasOwnProperty(Be)&&ne.push(Be)}se(G.keywords),se(G.types),se(G.builtin),se(G.atoms),ne.length&&(G.helperType=O[0],t.registerHelper("hintWords",O[0],ne));for(var ie=0;ie<O.length;++ie)t.defineMIME(O[ie],G)}I(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:l(d),types:E,blockKeywords:l(v),defKeywords:l(C),typeFirstDefinitions:!0,atoms:l("NULL true false"),isReservedIdentifier:H,hooks:{"#":V,"*":D},modeProps:{fold:["brace","include"]}}),I(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:l(d+" "+h),types:E,blockKeywords:l(v+" class try catch"),defKeywords:l(C+" class namespace"),typeFirstDefinitions:!0,atoms:l("true false NULL nullptr"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,isReservedIdentifier:H,hooks:{"#":V,"*":D,u:j,U:j,L:j,R:j,0:R,1:R,2:R,3:R,4:R,5:R,6:R,7:R,8:R,9:R,token:function(O,G,ne){if(ne=="variable"&&O.peek()=="("&&(G.prevToken==";"||G.prevToken==null||G.prevToken=="}")&&te(O.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),I("text/x-java",{name:"clike",keywords:l("abstract assert break case catch class const continue default do else enum extends final finally for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:l("var byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:l("catch class do else finally for if switch try while"),defKeywords:l("class interface enum @interface"),typeFirstDefinitions:!0,atoms:l("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(O){return O.match("interface",!1)?!1:(O.eatWhile(/[\w\$_]/),"meta")},'"':function(O,G){return O.match(/""$/)?(G.tokenize=q,G.tokenize(O,G)):!1}},modeProps:{fold:["brace","import"]}}),I("text/x-csharp",{name:"clike",keywords:l("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get window group into join let orderby partial remove select set value var yield"),types:l("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:l("catch class do else finally for foreach if struct switch try while"),defKeywords:l("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:l("true false null"),hooks:{"@":function(O,G){return O.eat('"')?(G.tokenize=$,$(O,G)):(O.eatWhile(/[\w\$_]/),"meta")}}});function q(O,G){for(var ne=!1;!O.eol();){if(!ne&&O.match('"""')){G.tokenize=null;break}ne=O.next()=="\\"&&!ne}return"string"}function P(O){return function(G,ne){for(var se;se=G.next();)if(se=="*"&&G.eat("/"))if(O==1){ne.tokenize=null;break}else return ne.tokenize=P(O-1),ne.tokenize(G,ne);else if(se=="/"&&G.eat("*"))return ne.tokenize=P(O+1),ne.tokenize(G,ne);return"comment"}}I("text/x-scala",{name:"clike",keywords:l("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:l("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:l("catch class enum do else finally for forSome if match switch try while"),defKeywords:l("class enum def object package trait type val var"),atoms:l("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(O){return O.eatWhile(/[\w\$_]/),"meta"},'"':function(O,G){return O.match('""')?(G.tokenize=q,G.tokenize(O,G)):!1},"'":function(O){return O.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(O,G){var ne=G.context;return ne.type=="}"&&ne.align&&O.eat(">")?(G.context=new r(ne.indented,ne.column,ne.type,ne.info,null,ne.prev),"operator"):!1},"/":function(O,G){return O.eat("*")?(G.tokenize=P(1),G.tokenize(O,G)):!1}},modeProps:{closeBrackets:{pairs:'()[]{}""',triples:'"'}}});function ee(O){return function(G,ne){for(var se=!1,ie,Re=!1;!G.eol();){if(!O&&!se&&G.match('"')){Re=!0;break}if(O&&G.match('"""')){Re=!0;break}ie=G.next(),!se&&ie=="$"&&G.match("{")&&G.skipTo("}"),se=!se&&ie=="\\"&&!O}return(Re||!O)&&(ne.tokenize=null),"string"}}I("text/x-kotlin",{name:"clike",keywords:l("package as typealias class interface this super val operator var fun for is in This throw return annotation break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend actual expect setparam value"),types:l("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void Annotation Any BooleanArray ByteArray Char CharArray DeprecationLevel DoubleArray Enum FloatArray Function Int IntArray Lazy LazyThreadSafetyMode LongArray Nothing ShortArray Unit"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+(\.\d+)?|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:l("catch class do else finally for if where try while enum"),defKeywords:l("class val var object interface fun"),atoms:l("true false null this"),hooks:{"@":function(O){return O.eatWhile(/[\w\$_]/),"meta"},"*":function(O,G){return G.prevToken=="."?"variable":"operator"},'"':function(O,G){return G.tokenize=ee(O.match('""')),G.tokenize(O,G)},"/":function(O,G){return O.eat("*")?(G.tokenize=P(1),G.tokenize(O,G)):!1},indent:function(O,G,ne,se){var ie=ne&&ne.charAt(0);if((O.prevToken=="}"||O.prevToken==")")&&ne=="")return O.indented;if(O.prevToken=="operator"&&ne!="}"&&O.context.type!="}"||O.prevToken=="variable"&&ie=="."||(O.prevToken=="}"||O.prevToken==")")&&ie==".")return se*2+G.indented;if(G.align&&G.type=="}")return G.indented+(O.context.type==(ne||"").charAt(0)?0:se)}},modeProps:{closeBrackets:{triples:'"'}}}),I(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:l("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:l("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:l("for while do if else struct"),builtin:l("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:l("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TextureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":V},modeProps:{fold:["brace","include"]}}),I("text/x-nesc",{name:"clike",keywords:l(d+" as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:E,blockKeywords:l(v),atoms:l("null true false"),hooks:{"#":V},modeProps:{fold:["brace","include"]}}),I("text/x-objectivec",{name:"clike",keywords:l(d+" "+f),types:x,builtin:l(m),blockKeywords:l(v+" @synthesize @try @catch @finally @autoreleasepool @synchronized"),defKeywords:l(C+" @interface @implementation @protocol @class"),dontIndentStatements:/^@.*$/,typeFirstDefinitions:!0,atoms:l("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:H,hooks:{"#":V,"*":D},modeProps:{fold:["brace","include"]}}),I("text/x-objectivec++",{name:"clike",keywords:l(d+" "+f+" "+h),types:x,builtin:l(m),blockKeywords:l(v+" @synthesize @try @catch @finally @autoreleasepool @synchronized class try catch"),defKeywords:l(C+" @interface @implementation @protocol @class class namespace"),dontIndentStatements:/^@.*$|^template$/,typeFirstDefinitions:!0,atoms:l("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:H,hooks:{"#":V,"*":D,u:j,U:j,L:j,R:j,0:R,1:R,2:R,3:R,4:R,5:R,6:R,7:R,8:R,9:R,token:function(O,G,ne){if(ne=="variable"&&O.peek()=="("&&(G.prevToken==";"||G.prevToken==null||G.prevToken=="}")&&te(O.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),I("text/x-squirrel",{name:"clike",keywords:l("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:E,blockKeywords:l("case catch class else for foreach if switch try while"),defKeywords:l("function local class"),typeFirstDefinitions:!0,atoms:l("true false null"),hooks:{"#":V},modeProps:{fold:["brace","include"]}});var ue=null;function U(O){return function(G,ne){for(var se=!1,ie,Re=!1;!G.eol();){if(!se&&G.match('"')&&(O=="single"||G.match('""'))){Re=!0;break}if(!se&&G.match("``")){ue=U(O),Re=!0;break}ie=G.next(),se=O=="single"&&!se&&ie=="\\"}return Re&&(ne.tokenize=null),"string"}}I("text/x-ceylon",{name:"clike",keywords:l("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(O){var G=O.charAt(0);return G===G.toUpperCase()&&G!==G.toLowerCase()},blockKeywords:l("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:l("class dynamic function interface module object package value"),builtin:l("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:l("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(O){return O.eatWhile(/[\w\$_]/),"meta"},'"':function(O,G){return G.tokenize=U(O.match('""')?"triple":"single"),G.tokenize(O,G)},"`":function(O,G){return!ue||!O.match("`")?!1:(G.tokenize=ue,ue=null,G.tokenize(O,G))},"'":function(O){return O.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(O,G,ne){if((ne=="variable"||ne=="type")&&G.prevToken==".")return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})})})();class i_ extends Ne.exports.Component{constructor(){super(...arguments),this.el=null,this.codemirror=null,this.onInternalValueChanged=(e,t)=>{this.props.onChange&&t.origin!=="setValue"&&this.props.onChange(e.getValue(),t)}}render(){let e=this.props.className;return this.props.readOnly&&(e+=" CodeMirror-readonly"),L("div",{ref:t=>{this.el=t},className:e})}componentDidMount(){const e=this.el;this.codemirror=gve(function(t){e.appendChild(t)},{mode:_ve(this.props.mode),indentUnit:xve(this.props.mode),value:this.props.value||this.props.defaultValue||"",extraKeys:{"Ctrl-Space":"autocomplete"},readOnly:this.props.readOnly||!1,viewportMargin:3e3}),this.codemirror.on("change",this.onInternalValueChanged)}componentWillUnmount(){this.codemirror=null}componentDidUpdate(e){this.codemirror&&this.props.value!==void 0&&this.props.value!==e.value&&F3(this.codemirror.getValue())!==F3(this.props.value)&&this.codemirror.setValue(this.props.value)}}function _ve(n){switch(n){case"c":return{name:"text/x-csrc"};case"mips-pp64":default:return"mips-pp64"}}function xve(n){switch(n){case"c":return 4;case"mips-pp64":default:return 2}}const vve=`; NAME:
; GAMES:
; EXECUTION: Direct

ADDIU SP SP -4
SW RA 0(SP)

; Your code here
; For code examples, see:
; https://github.com/PartyPlanner64/events

LW RA 0(SP)
JR RA
ADDIU SP SP 4`;class wve extends Ne.exports.Component{constructor(e){super(e),this.onEventNameChange=r=>{const i={...this.state,eventName:r};this.setState({eventName:r}),this.syncTextToStateVars(i,this.state.asm)},this.onAsmChange=r=>{this.setState({asm:r}),this.syncStateVarsToText(r)},this.onGameToggleClicked=(r,i)=>{const a=this.state.supportedGames,o=a.indexOf(r);let s;o===-1&&i?(this.setState({supportedGames:[...a,r]}),s={...this.state},s.supportedGames=[...a,r]):o>=0&&!i&&(a.splice(o,1),this.setState({supportedGames:a}),s={...this.state},s.supportedGames=a),s&&this.syncTextToStateVars(s,this.state.asm)},this.onExecTypeToggleClicked=(r,i)=>{const a={...this.state};a.executionType=r,this.setState({executionType:r}),this.syncTextToStateVars(a,this.state.asm)},this.onAddEventParameter=r=>{const i={...this.state};i.parameters=[...this.state.parameters,r],this.setState(i),this.syncTextToStateVars(i,this.state.asm)},this.onRemoveEventParameter=r=>{const i={...this.state};i.parameters=this.state.parameters.filter(a=>a.name!==r.name),this.setState(i),this.syncTextToStateVars(i,this.state.asm)},this.getEventName=()=>this.state.eventName,this.getSupportedGames=()=>this.state.supportedGames,this.getExecutionType=()=>this.state.executionType,this.getEventCode=()=>this.state.asm,this.syncTextToStateVars=(r,i)=>{let a=yve(i,["NAME","GAMES","EXECUTION","PARAM"]);a=`
`+a,a=Eve(a,"PARAM",r.parameters.map(o=>`${o.type}|${o.name}`)),a=bw(a,"EXECUTION",eM(r.executionType)),a=bw(a,"GAMES",r.supportedGames.map(ku).join(",")),a=bw(a,"NAME",r.eventName.trim()),a!==i&&this.setState({asm:a})},this.syncStateVarsToText=r=>{let i=Cve(r,"NAME");i!==null&&this.setState({eventName:(i||"").trim()}),i=a0.readSupportedGames(r),i!==null&&this.setState({supportedGames:i}),i=a0.readExecutionType(r),i&&this.setState({executionType:i}),i=a0.readParameters(r),i&&this.setState({parameters:i})},this.promptExit=async()=>{const r=this.state.asm,i=this.state.originalAsm;return!i||i!==r?await Zl("Are you sure you want to exit without saving the event?"):!0};const t=d5();t?this.state={eventName:t.name,supportedGames:t.supportedGames,executionType:t.executionType,asm:t.asm,parameters:t.parameters,originalAsm:t.asm}:this.state={eventName:"",supportedGames:[],executionType:s0.DIRECT,asm:vve,parameters:[]}}render(){return this.state.hasError?L("p",{children:"An error was encountered."}):Xe("div",{className:"createEventViewContainer",children:[L(i_,{mode:"mips-pp64",className:"eventcodemirror createeventcodemirror",value:this.state.asm,onChange:this.onAsmChange}),L(q9,{name:this.state.eventName,onEventNameChange:this.onEventNameChange,supportedGames:this.state.supportedGames,onGameToggleClicked:this.onGameToggleClicked,executionType:this.state.executionType,onExecTypeToggleClicked:this.onExecTypeToggleClicked,language:En.MIPS,parameters:this.state.parameters,onAddEventParameter:this.onAddEventParameter,onRemoveEventParameter:this.onRemoveEventParameter})]})}componentDidMount(){r_(this)}componentWillUnmount(){r_(null)}updateLastSavedCode(e){this.setState({originalAsm:e})}getLanguage(){return En.MIPS}}function yve(n,e){return a0.clearDiscreteProperties(n,e)}function bw(n,e,t){return a0.writeDiscreteProperty(n,e,t,";")}function Eve(n,e,t){return a0.writeDiscretePropertyArray(n,e,t,";")}function Cve(n,e){return a0.readDiscreteProperty(n,e)}const Vve=n=>{const[e,t]=Ne.exports.useState(0),r=typeof n.activeTabIndex=="number",i=r?n.activeTabIndex:e,a=C8.Children.toArray(n.children)[i].props.children;return Xe("div",{className:n.className,children:[L("div",{className:n.tabsClassName,children:C8.Children.map(n.children,(o,s)=>{if(!o)return null;const l=o;let u=l.props.className;return s===i&&(u+=" activeTab"),L(G4,{caption:l.props.caption,className:u,onClick:()=>{i!==s&&(r||t(s),n.onActiveTabChanged&&n.onActiveTabChanged(s))}})})}),L("div",{className:n.contentClassName,children:a})]})},G4=n=>L("div",{className:n.className,onClick:n.onClick,children:n.caption}),Dve=`// NAME:
// GAMES:
// EXECUTION: Direct

#include "ultra64.h"

void main() {
    // Your code here!
    // For code examples, see:
    // https://github.com/PartyPlanner64/events
}`;class Fve extends Ne.exports.Component{constructor(e){super(e),this.onEventNameChange=r=>{const i={...this.state,eventName:r};this.setState({eventName:r}),this.syncTextToStateVars(i,this.state.code)},this.onCodeChange=r=>{this.setState({code:r}),this.syncStateVarsToText(r)},this.onGameToggleClicked=(r,i)=>{const a=this.state.supportedGames,o=a.indexOf(r);let s;o===-1&&i?(this.setState({supportedGames:[...a,r]}),s={...this.state},s.supportedGames=[...a,r]):o>=0&&!i&&(a.splice(o,1),this.setState({supportedGames:a}),s={...this.state},s.supportedGames=a),s&&this.syncTextToStateVars(s,this.state.code)},this.onExecTypeToggleClicked=(r,i)=>{const a={...this.state};a.executionType=r,this.setState({executionType:r}),this.syncTextToStateVars(a,this.state.code)},this.onAddEventParameter=r=>{const i={...this.state};i.parameters=[...this.state.parameters,r],this.setState(i),this.syncTextToStateVars(i,this.state.code)},this.onRemoveEventParameter=r=>{const i={...this.state};i.parameters=this.state.parameters.filter(a=>a.name!==r.name),this.setState(i),this.syncTextToStateVars(i,this.state.code)},this.getEventName=()=>this.state.eventName,this.getSupportedGames=()=>this.state.supportedGames,this.getExecutionType=()=>this.state.executionType,this.getEventCode=()=>this.state.code,this.syncTextToStateVars=(r,i)=>{let a=Tve(i,["NAME","GAMES","EXECUTION","PARAM"]);a=`
`+a,a=bve(a,"PARAM",r.parameters.map(o=>`${o.type}|${o.name}`)),a=Pw(a,"EXECUTION",eM(r.executionType)),a=Pw(a,"GAMES",r.supportedGames.map(ku).join(",")),a=Pw(a,"NAME",r.eventName.trim()),a!==i&&this.setState({code:a})},this.syncStateVarsToText=r=>{let i=Pve(r,"NAME");i!==null&&this.setState({eventName:(i||"").trim()}),i=a0.readSupportedGames(r),i!==null&&this.setState({supportedGames:i}),i=a0.readExecutionType(r),i&&this.setState({executionType:i}),i=a0.readParameters(r),i&&this.setState({parameters:i})},this.promptExit=async()=>{const r=this.state.code,i=this.state.originalCode;return!i||i!==r?await Zl("Are you sure you want to exit without saving the event?"):!0},this.onActiveTabChanged=async r=>{switch(r){case 0:this.setState({activeCodeTabIndex:0,compiledAsm:null});break;case 1:{if(!this.getEventName()){o0("The event name is missing.");return}if(!this.getSupportedGames().length){o0("At least one game must be supported.");return}let i;const a=oo(En.C,this.state.code);try{await GE(a)}catch(o){o0(o.toString())}try{i=await a0.testCustomEvent(En.C,this.state.code,this.state.parameters,{game:a.supportedGames[0]})}catch(o){o0(o.toString());return}this.setState({activeCodeTabIndex:1,compiledAsm:i})}break}};const t=d5();t?this.state={eventName:t.name,supportedGames:t.supportedGames,executionType:t.executionType,code:t.asm,parameters:t.parameters,originalCode:t.asm,compiledAsm:null,activeCodeTabIndex:0}:this.state={eventName:"",supportedGames:[],executionType:s0.DIRECT,code:Dve,parameters:[],compiledAsm:null,activeCodeTabIndex:0}}render(){return this.state.hasError?L("p",{children:"An error was encountered."}):Xe("div",{className:"createEventViewContainer",children:[Xe(Vve,{activeTabIndex:this.state.activeCodeTabIndex,className:"createEventTabStrip",contentClassName:"createEventTabStripContent",tabsClassName:"createEventTabStripTabs",onActiveTabChanged:this.onActiveTabChanged,children:[L(G4,{caption:"C Source",className:"createEventTabStripTab",children:L(i_,{mode:"c",className:"eventcodemirror createeventcodemirror",value:this.state.code,onChange:this.onCodeChange},"c")}),L(G4,{caption:"MIPS Assembly",className:"createEventTabStripTab",children:L(i_,{mode:"mips-pp64",className:"eventcodemirror createeventcodemirror",value:this.state.compiledAsm||void 0,readOnly:!0},"mips")})]}),L(q9,{name:this.state.eventName,onEventNameChange:this.onEventNameChange,supportedGames:this.state.supportedGames,onGameToggleClicked:this.onGameToggleClicked,executionType:this.state.executionType,onExecTypeToggleClicked:this.onExecTypeToggleClicked,language:En.C,parameters:this.state.parameters,onAddEventParameter:this.onAddEventParameter,onRemoveEventParameter:this.onRemoveEventParameter})]})}componentDidMount(){r_(this)}componentWillUnmount(){r_(null)}updateLastSavedCode(e){this.setState({originalCode:e})}getLanguage(){return En.C}}function Tve(n,e){return a0.clearDiscreteProperties(n,e)}function Pw(n,e,t){return a0.writeDiscreteProperty(n,e,t,"//")}function bve(n,e,t){return a0.writeDiscretePropertyArray(n,e,t,"//")}function Pve(n,e){return a0.readDiscreteProperty(n,e)}class Rve extends Ne.exports.Component{constructor(e){super(e),this.state={hasError:!1}}render(){if(this.state.hasError)return L("p",{children:"An error was encountered."});const e=[];let t;Tt.getGameVersion()===3?t=L0.getStringCount("en",0):t=Bt.getStringCount();for(let i=0;i<t;i++)e.push(L(Lve,{strIndex:i}));return Xe("div",{className:"stringViewerContainer",children:[L("p",{children:"This is an experimental strings editor, probably doesn't work yet."}),e]})}componentDidCatch(e,t){this.setState({hasError:!0}),console.error(e)}}class Lve extends Ne.exports.Component{constructor(){super(...arguments),this.editor=null,this.state={hasFocus:!1},this.onValueChanged=(e,t)=>{if(Tt.getGameVersion()!==3){const i=hi(Bt._strToBytes(t));Bt.write(this.props.strIndex,i)}},this.onFocus=()=>{this.setState({hasFocus:!0})},this.onBlur=()=>{this.setState({hasFocus:!1})}}render(){let e;return Tt.getGameVersion()===3?e=L0.read("en",0,this.props.strIndex):e=Bt.read(this.props.strIndex),L(b2,{ref:r=>{this.editor=r},value:e,displayMode:Cp.Edit,showToolbar:!0,toolbarPlacement:B9.Top,onValueChange:this.onValueChanged,onFocus:this.onFocus,onBlur:this.onBlur})}componentDidMount(){this.state.hasFocus&&this.editor.focus()}componentDidUpdate(){this.state.hasFocus&&this.editor.focus()}}const Bve={WRITE8:128,WRITE16:129,IF8:208,IF16:209,IFNOT8:210,IFNOT16:211};class j1{static parse(e){const t=j1.splitInput(e);if(!t.length)return wt("Gameshark code string was empty"),null;if(t.length%2)return wt("Gameshark code string was malformed"),null;const r=[];for(let i=0;i<t.length;i+=2){let a=parseInt(t[i],16),o=parseInt(t[i+1],16);if(!a)return wt(`Invalid code instruction: ${t[i]}`),null;const s=j1.getCode(a,o);if(!s)return wt(`Could not parse code: ${At(a)} ${At(o)}`),null;r.push(s)}return r}static getCode(e,t){const r=j1.getOpcode(e);if(r===null)return null;const i=e&16777215|2147483648;return j1.opcodeHas8BitValue(r)&&(t=t&255),{opcode:r,addr:i,value:t}}static getOpcode(e){const t=(e&4278190080)>>>24;if(!t)return null;const r=Bve;for(let i in r)if(!!r.hasOwnProperty(i)&&r[i]===t)return i;return null}static opcodeHas8BitValue(e){return e==="WRITE8"||e==="IF8"||e==="IFNOT8"}static splitInput(e){return e?e.match(/\S+/g)||[]:[]}static printCodes(e){for(let t=0;t<e.length;t++)console.log(`${e[t].opcode} ${At(e[t].addr)} ${At(e[t].value)}`)}}class Mve{constructor(){this.REG1="A3",this.REG2="AT"}compile(e){let t=[];for(let a=0;a<e.length;a++){const o=e[a];let s;const l="compile"+o.opcode;if(typeof this[l]=="function"&&(s=this[l](o)),!s)return wt("Error compiling code",o),null;t=t.concat(s)}const r=new ArrayBuffer(t.length*4),i=new DataView(r);for(let a=0;a<t.length;a++)i.setUint32(a*4,t[a]);return r}compileWRITE8(e){return t0(`
      LUI ${this.REG1} ${this.getAddrUpper(e.addr)}
      ORI ${this.REG1} ${this.REG1} ${this.getAddrLower(e.addr)}
      ADDIU ${this.REG2} R0 ${e.value}
      SB ${this.REG2} 0(${this.REG1})
    `)}compileWRITE16(e){return t0(`
      LUI ${this.REG1} ${this.getAddrUpper(e.addr)}
      ORI ${this.REG1} ${this.REG1} ${this.getAddrLower(e.addr)}
      ADDIU ${this.REG2} R0 ${e.value}
      SH ${this.REG2} 0(${this.REG1})
    `)}compileIF8(e){return t0(`
      LUI ${this.REG1} ${this.getAddrUpper(e.addr)}
      ORI ${this.REG1} ${this.REG1} ${this.getAddrLower(e.addr)}
      LB ${this.REG1} 0(${this.REG1})
      ADDIU ${this.REG2} R0 ${e.value}
      BNE ${this.REG1} ${this.REG2} 4
    `)}compileIF16(e){return t0(`
      LUI ${this.REG1} ${this.getAddrUpper(e.addr)}
      ORI ${this.REG1} ${this.REG1} ${this.getAddrLower(e.addr)}
      LH ${this.REG1} 0(${this.REG1})
      ADDIU ${this.REG2} R0 ${e.value}
      BNE ${this.REG1} ${this.REG2} 4
    `)}compileIFNOT8(e){return t0(`
      LUI ${this.REG1} ${this.getAddrUpper(e.addr)}
      ORI ${this.REG1} ${this.REG1} ${this.getAddrLower(e.addr)}
      LB ${this.REG1} 0(${this.REG1})
      ADDIU ${this.REG2} R0 ${e.value}
      BEQ ${this.REG1} ${this.REG2} 4
    `)}compileIFNOT16(e){return t0(`
      LUI ${this.REG1} ${this.getAddrUpper(e.addr)}
      ORI ${this.REG1} ${this.REG1} ${this.getAddrLower(e.addr)}
      LH ${this.REG1} 0(${this.REG1})
      ADDIU ${this.REG2} R0 ${e.value}
      BEQ ${this.REG1} ${this.REG2} 4
    `)}getAddrUpper(e){return(e&4294901760)>>>16}getAddrLower(e){return e&65535}}class Ive extends Ne.exports.Component{constructor(){super(...arguments),this.inputEl=null,this.state={showApplied:!1},this.applyCheat=()=>{const e=this.inputEl.value,t=j1.parse(e);if(!t){o0("There was an error parsing the entered cheats");return}const i=new Mve().compile(t);if(!i){o0("There was an error compiling the entered cheats");return}C_.push(i),this.inputEl.value="",this.setState({showApplied:!0}),setTimeout(()=>{this.setState({showApplied:!1})},3e3)}}render(){const e=D$();let t;return this.state.showApplied&&(t=L("span",{className:"gsApplied",children:"Applied!"})),Xe("div",{id:"gamesharkView",children:[L("h3",{children:"Gameshark Cheats"}),!e&&L("p",{children:"Embeddable Gameshark cheats are not supported with this ROM."}),e&&Xe(ta,{children:[L("p",{children:"Paste cheats in the box below to embed them in the ROM."}),L("textarea",{ref:r=>{this.inputEl=r},rows:10}),L("button",{className:"patchBtn",onClick:this.applyCheat,children:"Apply"}),t]})]})}}var vD={exports:{}};(function(n){(function(e,t){n.exports?n.exports=t():window[e]=t()})("basicContext",function(){var e=null,t="item",r="separator",i=function(){var g=arguments.length<=0||arguments[0]===void 0?"":arguments[0];return document.querySelector(".basicContext "+g)},a=function(){var g=arguments.length<=0||arguments[0]===void 0?{}:arguments[0],_=Object.keys(g).length===0;return _===!0&&(g.type=r),g.type==null&&(g.type=t),g.class==null&&(g.class=""),g.visible!==!1&&(g.visible=!0),g.icon==null&&(g.icon=null),g.title==null&&(g.title="Undefined"),g.disabled!==!0&&(g.disabled=!1),g.disabled===!0&&(g.class+=" basicContext__item--disabled"),g.fn==null&&g.type!==r&&g.disabled===!1?(console.warn("Missing fn for item '"+g.title+"'"),!1):!0},o=function(g,_){var E="",x="";return a(g)===!1||g.visible===!1?"":(g.num=_,g.icon!==null&&(x="<span class='basicContext__icon "+g.icon+"'></span>"),g.type===t?E=`
		       <tr class='basicContext__item `+g.class+`'>
		           <td class='basicContext__data' data-num='`+g.num+"'>"+x+g.title+`</td>
		       </tr>
		       `:g.type===r&&(E=`
		       <tr class='basicContext__item basicContext__item--separator'></tr>
		       `),E)},s=function(g){var _="";return _+=`
	        <div class='basicContextContainer'>
	            <div class='basicContext'>
	                <table>
	                    <tbody>
	        `,g.forEach(function(E,x){return _+=o(E,x)}),_+=`
	                    </tbody>
	                </table>
	            </div>
	        </div>
	        `},l=function(){var g=arguments.length<=0||arguments[0]===void 0?{}:arguments[0],_={x:g.clientX,y:g.clientY};if(g.type==="touchend"&&(_.x==null||_.y==null)){var E=g.changedTouches;E!=null&&E.length>0&&(_.x=E[0].clientX,_.y=E[0].clientY)}return(_.x==null||_.x<0)&&(_.x=0),(_.y==null||_.y<0)&&(_.y=0),_},u=function(g,_){var E=l(g),x=E.x,v=E.y,C={width:window.innerWidth,height:window.innerHeight},V={width:_.offsetWidth,height:_.offsetHeight};x+V.width>C.width&&(x-=x+V.width-C.width),v+V.height>C.height&&(v-=v+V.height-C.height),V.height>C.height&&(v=0,_.classList.add("basicContext--scrollable"));var D=E.x-x,H=E.y-v;return{x,y:v,rx:D,ry:H}},d=function(){var g=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];return g.fn==null||g.visible===!1||g.disabled===!0?!1:(i("td[data-num='"+g.num+"']").onclick=g.fn,i("td[data-num='"+g.num+"']").oncontextmenu=g.fn,!0)},h=function(g,_,E,x){var v=s(g);document.body.insertAdjacentHTML("beforeend",v),e==null&&(e=document.body.style.overflow,document.body.style.overflow="hidden");var C=i(),V=u(_,C);return C.style.left=V.x+"px",C.style.top=V.y+"px",C.style.transformOrigin=V.rx+"px "+V.ry+"px",C.style.opacity=1,E==null&&(E=m),C.parentElement.onclick=E,C.parentElement.oncontextmenu=E,g.forEach(d),typeof _.preventDefault=="function"&&_.preventDefault(),typeof _.stopPropagation=="function"&&_.stopPropagation(),typeof x=="function"&&x(),!0},f=function(){var g=i();return!(g==null||g.length===0)},m=function(){if(f()===!1)return!1;var g=document.querySelector(".basicContextContainer");return g.parentElement.removeChild(g),e!=null&&(document.body.style.overflow=e,e=null),!0};return{ITEM:t,SEPARATOR:r,show:h,visible:f,close:m}})})(vD);const Ove="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wYVFSYNYLnIVQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACsklEQVRIx+1WTU9TQRQ9d2bea99rKW3aRG2gWCAxRpQNJq6oEhdqdyYFf4P/xkT+Ah/RnyBdSWzCqhbUolAloWihAm1f2/deO+MCJMqHSqyGBWc1ycyce8/NPXcGOMdZB520YRgA534KBDzkNYLkOk1h27bGOQcAyLaEx6u7Qve27MYuKpWmtO2acpyjAdQxgYTP0EPRnt7wwMDlOOeeq5pG1zXdjPtMbw/n/JKmaQoAWq5LrXarZNXtNce21tyWysq2my8UPn0oFtfL1Wp9G4B7WJHm93tu3xm7Ozp8Y/jWwsLClVRqvDcWiyEcDiMYDMI0Tei6DqK9K1IquK6Det3Czs4utspb+LyxgampqeLIyM3l/Lu3mbn03Pz2duUFgKaI9UYuDg5emxyfeJQYGhoKdXV1sfX1IhKJBCKRCKSUUEpBKQUp5c/yhUB3dxDBYAjxeBy1Wg3pdDqaSqWilmWN3n+QrMzOzmTeL2Ufi2i0Z2x8YuJhMpmE67pQSoGIIKVEu90+Qn4YSqm90hAdrH0+HwKBAIvFYkGv13Nv8umTJGPEoGnawaFOQikFTWjgxMB+zOpfNPJ3ZtZ5xxyfNOtsqU7eY/9rMjAighDiwB8dHTtEEIKDGIFZtRpWV1dh23bHA9m2jXx+GdVKFYwY4c3SEubnX3ZcTSbzCouLOTBiYH6fH319fSiXy78152kgpUS5/BX9/QPwB/z7Pvr1IP8LVfvsChCA4pxzeHQdpmmCAAjBYRgGDMM4xszqBFIGpRSEEDAMA5xz6LoOzgVA4KJhVfO5XK79pbTJbbcFArCyUsD09AxM0wel5J88XyAiuK6DwupHzD57DgYg+zqLzVIJVr2Sp0jIzxoOXSBihq5zBQCNhgOvVzt1yysoNOstGKYGAHCcNkkpHdNkG+d/jLOPb9oFHOb0bqxwAAAAAElFTkSuQmCC",kve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AYaEggWSdu7PgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAuklEQVQ4y6XTQWoCQRCF4U/NGBlR3HpJEXIFCeQ2gWShnkAQFFeeQbOLmF1msinBxXR0nAdNN82jqrr/KtKaYIU1ZsjUUI45ylh7jKuMbQ31lLj/wScG4Znjq8rYupFgFPs3ijoVXNSJJJ1UAIN+P/UP0yCwxSu6dQLkWNxF4XQ+F4kKiqYUPqKSLCgcH6EwjP0UT6nVSC08o3cHrUq9YIMd3pIU/pmFZdNZ+L06l49QeI+ys+iJQ5XxD4g7KTK7osn1AAAAAElFTkSuQmCC";class Nve extends Ne.exports.Component{render(){const e=this.props.boards.map(function(i,a){return L(PB,{board:i,index:a},a)}),t=!!lr(z0.uiShowRomBoards);let r;return t&&(r=m5().map(function(i,a){return L(PB,{board:i,index:a},"r"+a)})),L("div",{className:"boardMenu",role:"listbox",children:Xe("div",{className:"boardMenuInner",role:"presentation",children:[e,r]})})}}const PB=class extends Ne.exports.Component{constructor(){super(...arguments),this.handleClick=()=>{const e=Ys(this.props.board);qp(this.props.index,e),wt("Now viewing board",this.props.board)},this.onDragStart=e=>{if(Ys(this.props.board)){e.preventDefault();return}Ioe(),e.nativeEvent.dataTransfer.setData("text/plain",this.props.index),Ooe(function(t){t.preventDefault();const r=parseInt(t.dataTransfer.getData("text/plain"));isNaN(r)||(eR(),Ub(r))})},this.onDragEnd=e=>{eR()},this.onRightClick=e=>{e.preventDefault();const t=[{title:"Copy",fn:this.onCopyBoard},{title:"Delete",fn:this.onDeleteBoard,visible:!Ys(this.props.board)}];vD.exports.show(t,e.nativeEvent)},this.onDeleteBoard=()=>{Ub(this.props.index)},this.onCopyBoard=()=>{sC()}}render(){const e=`Open "${this.props.board.name}"`;let t="boardEntry";const r=Vn()===this.props.board;r&&(t+=" boardEntryCurrent");const i=this.props.board.otherbg.boardlogo||"";let a;i?a=L("img",{className:"boardEntryImg",src:i,width:"200",height:"88",alt:""}):a=L("div",{className:"boardEntryNoImg"});const o=this.props.board.name,s=Ys(this.props.board),l=od(this.handleClick);return Xe("div",{className:t,title:e,role:"option",tabIndex:0,"aria-selected":r,onClick:this.handleClick,onKeyDown:l,onContextMenu:this.onRightClick,draggable:!0,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,children:[a,L(Uve,{rom:s}),L(jve,{name:o}),L(Gve,{rom:s,onDeleteBoard:this.onDeleteBoard,onCopyBoard:this.onCopyBoard})]})}},Uve=class extends Ne.exports.Component{render(){return this.props.rom?L("div",{className:"boardEntryRomIcon",title:"Loaded from ROM",children:L("img",{src:Ove,width:"26",height:"26",alt:"From ROM"})}):null}};class jve extends Ne.exports.Component{constructor(){super(...arguments),this.state={editing:!1},this.handleClick=()=>{this.setState({editing:!!this.state.editing})}}render(){return L("div",{className:"boardName",children:L(b2,{value:this.props.name,displayMode:Cp.Display})})}}class Gve extends Ne.exports.Component{constructor(){super(...arguments),this.handleClick=e=>{e.preventDefault();const t=[{title:"Copy",fn:this.props.onCopyBoard},{title:"Delete",fn:this.props.onDeleteBoard,visible:!this.props.rom}];vD.exports.show(t,e.nativeEvent)}}render(){return L("img",{className:"boardMenuIcon",src:kve,onClick:this.handleClick,alt:"Board Options"})}}var wD=(n=>(n[n.Red=0]="Red",n[n.Green=1]="Green",n[n.Blue=2]="Blue",n))(wD||{});class Q9 extends Ne.exports.Component{constructor(){super(...arguments),this.onCloseClick=()=>{this.props.onClose&&this.props.onClose()}}render(){const e="notification "+this.getColorClass(this.props.color);return Xe("div",{className:e,children:[L("div",{className:"notificationContent",children:this.props.children}),L("div",{className:"notificationClose",role:"button",tabIndex:0,onClick:this.onCloseClick})]})}getColorClass(e){switch(e){case 0:return"notificationRed";case 1:return"notificationGreen";case 2:return"notificationBlue"}}}class Hve extends Ne.exports.Component{render(){const e={};return Ne.exports.Children.count(this.props.children)||(e.display="none"),L("div",{className:"notificationBar",style:e,children:this.props.children})}}class J9 extends Ne.exports.Component{render(){return L("button",{className:"notificationButton",onClick:this.props.onClick,children:this.props.children})}}const zve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABICAIAAACGBWc0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AYHAigfG9YLCgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAK0lEQVR42u3BAQ0AAADCoPdPbQ43oAAAAAAAAAAAAAAAAAAAAAAAAAAAPgxRSAABIBiyrgAAAABJRU5ErkJggg==",Z9=[{name:"Blank",id:"default"}],Wve={default:zve};class Xve extends Ne.exports.Component{constructor(){super(...arguments),this.state={version:1,type:zn.NORMAL,theme:0},this.onVersionChange=e=>{this.setState({version:e}),e!==3&&this.setState({type:zn.NORMAL})},this.onTypeChange=e=>{this.setState({type:e})},this.onThemeChange=e=>{this.setState({theme:e})},this.submit=()=>{if(this.state.type===zn.DUEL&&(o0("Duel board support is partially finished, coming soon!"),!G0()))return;const e=this.props.onAccept;e&&e(this.state.version,this.state.type,Z9[this.state.theme])}}render(){return Xe("div",{className:"newBoardContainer",children:[L(Kve,{onVersionChange:this.onVersionChange}),L(Yve,{onThemeChange:this.onThemeChange}),L(rr,{onClick:this.submit,css:"nbCreate",children:"Create"})]})}}class Kve extends Ne.exports.Component{constructor(){super(...arguments),this.state={version:1},this.onVersionChange=(e,t)=>{this.setState({version:e}),this.props.onVersionChange(e)}}render(){const e=[L(ko,{id:1,allowDeselect:!1,onToggled:this.onVersionChange,pressed:this.state.version===1,children:L("span",{className:"newBoardVersion",title:"Mario Party 1",children:"MP1"})},1)];return e.push(L(ko,{id:2,allowDeselect:!1,onToggled:this.onVersionChange,pressed:this.state.version===2,children:L("span",{className:"newBoardVersion",title:"Mario Party 2",children:"MP2"})},2)),e.push(L(ko,{id:3,allowDeselect:!1,onToggled:this.onVersionChange,pressed:this.state.version===3,children:L("span",{className:"newBoardVersion",title:"Mario Party 3",children:"MP3"})},3)),Xe("div",{className:"newBoardVersionSelect",children:[L("label",{className:"nbLabel",children:"Game Version"}),L("br",{}),e]})}}class Yve extends Ne.exports.Component{constructor(){super(...arguments),this.state={theme:0},this.onThemeChange=(e,t)=>{this.setState({theme:e}),this.props.onThemeChange(e)}}render(){const e=Z9.map((t,r)=>{const i=Wve[t.id];return Xe(ko,{id:r,allowDeselect:!1,css:"nbTheme",onToggled:this.onThemeChange,pressed:this.state.theme===r,children:[L("img",{src:i,className:"newBoardThemePreview",width:"96",height:"72",alt:""}),L("span",{className:"newBoardTheme",children:L("span",{className:"newBoardThemeInner",children:t.name})})]},r)});return Xe("div",{className:"NewBoardThemeSelect",children:[L("label",{className:"nbLabel",children:"Theme"}),L("br",{}),e]})}}function qve(n,e){try{window.gtag&&window.gtag("event",n,e)}catch(t){console.error(t)}}const $9=Object.create(null),Qve={id:"",name:"",level:w0.ERROR,fails:function(n,e){throw new Error("fails not implemented")}};function pr(n,e,t){const r=Object.create(Qve);return r.id=n,r.name=e,r.level=t,$9[n]=r,r}function Fn(n,e){const t=$9[n];return{id:t.id,name:t.name,level:t.level,fails:function(i){return t.fails(i,e)}}}const Jve=pr("HASSTART","Has start space",w0.ERROR);Jve.fails=function({board:n},e){return T_(n)<0?"No start space found on board.":!1};const Zve=pr("GAMEVERSION","Game version mismatch",w0.ERROR);Zve.fails=function({board:n},e){const t=Tt.getGameVersion();return t!==n.game?`Board is for MP${n.game}, but ROM is MP${t}`:!1};const $ve=pr("DEADEND","No dead ends",w0.WARNING);$ve.fails=function({board:n},e){const t=p5(n),r=T_(n);return r<0?!1:t.indexOf(r)>=0?"Start space does not lead anywhere.":t.length?"There is a dead end on the board.":!1};const ewe=pr("TOOMANYSPACES","Too many spaces",w0.ERROR);ewe.fails=function({board:n},e){return n.spaces.length>65535?"There is a hard limit of 65535 spaces.":!1};const twe=pr("OVERRECOMMENDEDSPACES","Over recommended spaces",w0.WARNING);twe.fails=function({board:n},e){const t=n.spaces.length;return t>e.max?`${t} spaces present, more than ${e.max} spaces can be unstable.`:!1};const KA=function(n,e){const t=pr(`TOOMANY${e.toUpperCase().replace(/\s+/g,"")}`,`Too many ${e}`,w0.ERROR);t.fails=function({board:r},i={}){const a=i.limit||0,o=r.spaces.filter(s=>s&&s.subtype===n).length;return o>a?`There are ${o} ${e}, but the limit is ${a} for this board.`:!1}};KA(yt.BOO,"Boos");KA(yt.BOWSER,"Bowsers");KA(yt.KOOPA,"Koopas");KA(yt.BANK,"Banks");KA(yt.ITEMSHOP,"Item Shops");KA(yt.GATE,"Gates");function eU(n){return n.spaces.filter(e=>e&&e.star).length}const nwe=pr("BADSTARCOUNT","Bad star count",w0.ERROR);nwe.fails=function({board:n},e){const t=eU(n);if((e.disallowed||{})[t])return t===1?"There cannot be exactly 1 star space.":`There cannot be exactly ${t} star spaces.`;const i=e.low||0,a=e.high||0;return t<i||t>a?i!==a?`There are ${t} stars, but the range is ${i}-${a} for this board.`:`There are ${t} stars, but the count must be ${i} for this board.`:!1};const rwe=pr("WARNNOSTARSPACES","No star spaces",w0.WARNING);rwe.fails=function({board:n},e={}){return eU(n)===0?"There are no star spaces, this may be unintentional.":!1};const tU=function(n,e){const t=pr(`TOOFEW${e.toUpperCase().replace(/\s+/g,"")}SPACES`,`Too few ${e} spaces`,w0.ERROR);t.fails=function({board:r},i={}){const a=i.low||0,o=r.spaces.filter(s=>s&&s.type===n).length;return o<a?`There are ${o} ${e} spaces, need at least ${a} spaces of this type.`:!1}};tU(de.BLUE,"Blue");tU(de.RED,"Red");const iwe=pr("TOOMANYOFEVENT","Too many of event",w0.ERROR);iwe.fails=function({board:n},e){let t=0;n.spaces.forEach(a=>{!a||!a.events||a.events.forEach(o=>{o.id===e.event.id&&t++})});const r=e.low||0,i=e.high||0;if(t<r||t>i){if(r&&i)return`There are ${t} of event ${e.event.name}, but the range is ${r}-${i} for this board.`;if(r)return`There are ${t} of event ${e.event.name}, but there must be at least ${r} for this board.`;if(i)return`There are ${t} of event ${e.event.name}, but there can be at most ${i} for this board.`}return!1};const awe=pr("UNRECOGNIZEDEVENTS","Unrecognized events",w0.ERROR);awe.fails=function({board:n},e){const t=Object.create(null);n.spaces.forEach(a=>{!a||!a.events||a.events.forEach(o=>{jo(o.id,n,j0())||(t[o.id]=!0)})});const r=[];for(const a in t)r.push(a);if(!r.length)return!1;let i=`The following events were unrecognized:
`;return r.forEach(a=>{i+="	"+a+`
`}),i};const owe=pr("UNSUPPORTEDEVENTS","Unsupported events",w0.ERROR);owe.fails=function({board:n},e){const t=Object.create(null),r=Tt.getROMGame();n.spaces.forEach(o=>{!o||!o.events||o.events.forEach(s=>{const l=jo(s.id,n,j0());!l||O$(l,r)&&(t[s.id]=!0)})});const i=[];for(const o in t)i.push(o);if(!i.length)return!1;let a=`The following events cannot be written to this ROM:
`;return i.forEach(o=>{a+="	"+o+`
`}),a};const swe=pr("CUSTOMEVENTFAIL","Custom event errors",w0.ERROR);swe.fails=async function({board:n,boardInfo:e},t){const r=Object.create(null),i=Tt.getROMGame();async function a(l){try{const u=jo(l.id,n,j0()),d=gs(n,l.id);await a0.testCustomEvent(d.language,d.code,u.parameters,{game:i,audioIndices:g6(n),board:n,boardInfo:e})}catch(u){console.error(u),r[l.id]||(r[l.id]=!0)}}for(const l of n.spaces)if(!(!l||!l.events))for(const u of l.events)!u||!u.custom||await a(u);if(n.boardevents)for(const l of n.boardevents)!l.custom||await a(l);const o=[];for(const l in r)o.push(l);if(!o.length)return!1;let s=`The following custom events fail to assemble:
`;return o.forEach(l=>{s+="	"+l+`
`}),s};const lwe=pr("CUSTOMEVENTBADPARAMS","Custom event parameter issues",w0.ERROR);lwe.fails=function({board:n},e){const t=Object.create(null);function r(a){const s=jo(a.id,n,j0()).parameters;if(s&&s.length)for(const l of s)tM(l.type)||(!a.parameterValues||!a.parameterValues.hasOwnProperty(l.name))&&(t[l.name]||(t[l.name]=0),t[l.name]++)}if(n.spaces.forEach(a=>{!a||!a.events||a.events.forEach(o=>{!o||!o.custom||r(o)})}),n.boardevents)for(const a of n.boardevents)!a.custom||r(a);const i=[];for(const a in t){const o=t[a];!o||i.push(`	${o} ${a} event parameter${o>1?"s are ":" is "}not set`)}return i.length?`Some event parameters need to be set:
`+i.join(`
`):!1};const cwe=pr("TOOMANYPATHOPTIONS","Too many path options",w0.ERROR);cwe.fails=function({board:n},e={}){const t=e.limit||2;for(const r in n.links){const i=n.links[r];if(Array.isArray(i)&&i.length>t)return`A space branches in ${i.length} directions, but the maximum is ${t}.`}return!1};const uwe=pr("CHARACTERSONPATH","Characters are on path",w0.WARNING);uwe.fails=function({board:n},e={}){for(const t in n.links){const r=n.spaces[t];if(r.hasOwnProperty("subtype")&&r.subtype!==yt.GATE)return"Characters and objects <a href='https://github.com/PartyPlanner64/PartyPlanner64/wiki/Creating-a-Board#special-charactersobjects' target='_blank'>should not be on the player path</a>."}return!1};const dwe=pr("SPLITATNONINVISIBLESPACE","Split at non-invisible space",w0.WARNING);dwe.fails=function({board:n},e={}){const t=[de.OTHER,de.STAR,de.START,de.BLACKSTAR,de.ARROW];for(const r in n.links)if(Pa(parseInt(r),n).length>1){const a=n.spaces[r];if(t.indexOf(a.type)===-1)return"There is a <a href='https://github.com/PartyPlanner64/PartyPlanner64/wiki/Creating-a-Board#board-flow' target='_blank'>non-conventional path split</a>."}return!1};const Awe=pr("TOOMANYARROWROTATIONS","Too many arrow rotations",w0.WARNING);Awe.fails=function({board:n},e={}){let t=0;return n.spaces.forEach(r=>{!r||typeof r.rotation=="number"&&t++}),t>e.limit?`Only ${e.limit} arrows will be rotated in-game.`:!1};const fwe=pr("GATESETUP","Incorrect gate setup",w0.ERROR);fwe.fails=function({board:n},e={}){const t=Br(yt.GATE,n);for(let i=0;i<t.length;i++){const a=t[i];if(n.spaces[a].type!==de.OTHER)return"Only invisible spaces can have gates.";const s=Pa(a,n);if(s.length!==1)return"A single path should leave a gate space.";const l=s[0],u=n.spaces[l];if(!u||u.type!==de.OTHER)return"Space after a gate space must be invisible.";if(u.subtype===yt.GATE)return"Gate spaces must be 2 or more spaces apart.";if(r(l).length!==1)return"A single path should connect to the space after a gate space.";const d=Pa(l,n);if(d.length!==1)return"A single path should leave the space after a gate space";const h=d[0];if(n.spaces[h].subtype===yt.GATE)return"Gate spaces must be 2 or more spaces apart.";const m=r(a);if(m.length!==1)return"A single path should connect to a gate space.";const g=m[0],_=n.spaces[g];if(!_||_.type!==de.OTHER)return"Space before a gate space must be invisible.";if(_.subtype===yt.GATE)return"Gate spaces must be 2 or more spaces apart.";if(r(g).length!==1)return"A single path should connect to the space before a gate space."}function r(i){const a=[];for(const o in n.links)Pa(parseInt(o),n).forEach(l=>{l===i&&a.push(Number(o))});return a}return!1};const hwe=pr("ADDITIONALBGCODEISSUE","Additional background code issue",w0.ERROR);hwe.fails=async function({board:n},e={}){const t=aC(n);if(!t)return!1;const r=Tt.getROMGame(),i=await A6(t.code,t.language,n,r);return i.length?(console.error(i),"The additional background code failed a test assembly."):!1};const pwe=pr("GETAUDIOINDEXCODEISSUE","Audio selection code issue",w0.ERROR);pwe.fails=async function({board:n},e={}){const t=oC(n);if(!t)return!1;const r=Tt.getROMGame(),i=await S6(t.code,t.language,n,r);return i.length?(console.error(i),"The music selection code failed a test assembly."):!1};const mwe=pr("AUDIODETAILSISSUE","Audio details issue",w0.ERROR);mwe.fails=async function({board:n},e={}){if(typeof n.audioType!="number")return"Expected audioType to be defined.";switch(n.audioType){case Ca.InGame:if(typeof n.audioIndex!="number")return"Expected an audio track index to be defined.";break;case Ca.Custom:if(!n.audioData)return"Expected custom audio data to be defined.";if(!Array.isArray(n.audioData))return"Expected custom audio data to be an array.";if(!n.audioData.length)return"Custom audio was chosen, but a midi file was not uploaded.";for(const t of n.audioData){const r=t.soundbankIndex,a=Rr.getSequenceTable(0).soundbanks.banks.length;if(r<0||r>=a)return`Soundbank index for custom audio is out of range (0 - ${a-1})`;if(!t.data)return"Custom audio was chosen, but a midi file was not uploaded.";let o;try{o=cM(t.data)}catch{return"Custom audio midi data could not be parsed into an ArrayBuffer."}let s;try{s=IE(o,{loop:!0})}catch{return"Custom audio midi data could not be converted into game audio."}if(!s)return"Custom audio midi data could not be converted into game audio."}break}return!1};const Swe=[Fn("TOOMANYGATES",{limit:0}),Fn("ADDITIONALBGCODEISSUE"),Fn("GETAUDIOINDEXCODEISSUE"),Fn("TOOMANYBOOS",{limit:2}),Fn("TOOMANYBOWSERS",{limit:1}),Fn("TOOMANYKOOPAS",{limit:1}),Fn("BADSTARCOUNT",{low:0,high:7,disallowed:{1:!0}}),Fn("WARNNOSTARSPACES")];function gwe(n){return Swe.slice(0)}const _we=[Fn("TOOMANYBOWSERS",{limit:0}),Fn("TOOMANYKOOPAS",{limit:0}),Fn("TOOMANYGATES",{limit:0})];function xwe(n){const e=_we.slice(0),t=f_();return e.push(Fn("TOOMANYARROWROTATIONS",{limit:t})),e}function vwe(n,e){return e===0?[Fn("TOOMANYBANKS",{limit:2}),Fn("TOOMANYITEMSHOPS",{limit:1}),Fn("TOOMANYBOOS",{limit:2}),Fn("BADSTARCOUNT",{low:7,high:7})]:[]}const wwe=[Fn("TOOMANYBOWSERS",{limit:0}),Fn("TOOMANYKOOPAS",{limit:0}),Fn("GATESETUP"),Fn("OVERRECOMMENDEDSPACES",{max:128}),Fn("ADDITIONALBGCODEISSUE"),Fn("GETAUDIOINDEXCODEISSUE")];function ywe(n){const e=wwe.slice(0),t=f_();return e.push(Fn("TOOMANYARROWROTATIONS",{limit:t})),e.push(Fn("TOOMANYOFEVENT",{event:NA,high:2})),e.push(Fn("TOOMANYBANKS",{limit:2})),e.push(Fn("TOOMANYOFEVENT",{event:y_,high:2})),e.push(Fn("TOOMANYITEMSHOPS",{limit:2})),e.push(Fn("TOOMANYBOOS",{limit:1})),e.push(Fn("TOOMANYGATES",{limit:2})),e.push(Fn("BADSTARCOUNT",{low:0,high:8,disallowed:{1:!0}})),e.push(Fn("WARNNOSTARSPACES")),e}function RB(n){return n?typeof n.then=="function":!1}function Ewe(n){return!!n.canOverwrite}function Cwe(n,e){return typeof e!="string"?n.type===zn.DUEL:n.type!==e}function Vwe(n){let e=[Fn("HASSTART"),Fn("GAMEVERSION"),Fn("DEADEND"),Fn("TOOMANYSPACES"),Fn("UNRECOGNIZEDEVENTS"),Fn("UNSUPPORTEDEVENTS"),Fn("CUSTOMEVENTFAIL"),Fn("CUSTOMEVENTBADPARAMS"),Fn("TOOMANYPATHOPTIONS"),Fn("CHARACTERSONPATH"),Fn("SPLITATNONINVISIBLESPACE"),Fn("AUDIODETAILSISSUE")];switch(n){case Qe.MP1_USA:case Qe.MP1_JPN:e=e.concat(gwe());break;case Qe.MP2_USA:case Qe.MP2_JPN:e=e.concat(xwe());break;case Qe.MP3_USA:case Qe.MP3_JPN:e=e.concat(ywe());break}return e}function Dwe(n,e){let t=[];switch(n){case Qe.MP2_USA:case Qe.MP2_JPN:t=t.concat(vwe(n,e));break}return t}async function Fwe(n){const e=Tt.getROMGame();if(!e)return null;const t=[],r=m5(),i=Vn(),a=[],o=[];if(!n)for(const u of Vwe(e)){let d=u.fails({board:i,boardInfo:Tg});RB(d)&&(d=await d),d&&(u.level===w0.ERROR?a.push(d):u.level===w0.WARNING&&o.push(d))}t.push({errors:a,warnings:o});const s=!n&&a.length>0,l=Q4(e);if(l)for(let u=0;u<r.length;u++){const d=r[u];if(Cwe(d,i.type))continue;const h=l[u],f=!Ewe(h),m=[],g=[];if(!f&&!n){const _=Dwe(e,u);for(const E of _){let x=E.fails({board:i,boardInfo:h});RB(x)&&(x=await x),x&&(E.level===w0.ERROR?m.push(x):E.level===w0.WARNING&&g.push(x))}}t.push({name:d.name,unavailable:f,forcedDisabled:s,errors:m,warnings:g})}return t}let ls=null;class LB extends Ne.exports.Component{constructor(e){super(e),this.onCodeChangeInternal=r=>{this.setState({code:r})},this.onLanguageToggleClicked=async r=>{(!this.codeHasChanged({fromDefaultOnly:!0})||await Zl("Are you sure you want to switch languages? The current code will not be kept."))&&this.setState({language:r,code:this.props.getDefaultCode(r)})},this.getCode=()=>this.state.code,this.getLanguage=()=>this.state.language,this.getBoard=()=>this.props.board,this.getDefaultCodeForLanguage=r=>this.props.getDefaultCode(r),this.onSetCode=(r,i)=>this.props.onSetCode(r,i),this.canSaveAndExit=()=>this.props.canSaveAndExit(this.state.code,this.state.language),this.promptExit=async()=>this.codeHasChanged()?await Zl("Are you sure you want to exit without saving your code?"):!0;const t=this.props.getExistingCode();t?this.state={code:t.code,language:t.language}:this.state={code:this.props.getDefaultCode(En.C),language:En.C}}render(){const e=[{id:En.C,text:"C",selected:this.state.language===En.C},{id:En.MIPS,text:"MIPS",selected:this.state.language===En.MIPS}],t=this.state.language===En.C?"c":"mips-pp64";return Xe("div",{className:"basicCodeViewContainer",children:[L("h2",{children:this.props.title}),Xe("div",{className:"editorSettingsSplit",children:[L("div",{children:L(i_,{mode:t,className:"eventcodemirror basiccodemirror",value:this.state.code,onChange:this.onCodeChangeInternal},t)}),Xe("div",{className:"createEventForm",children:[L("label",{children:"Language:"}),L(J8,{items:e,onToggleClick:this.onLanguageToggleClicked})]})]})]})}componentDidMount(){ls=this}componentWillUnmount(){ls=null}codeHasChanged(e){const t=this.state.code,r=this.props.getExistingCode(),i=r&&r.code!==t;let a=t!==this.props.getDefaultCode(this.state.language);return a&&(!e||!e.fromDefaultOnly)&&(a=!r),i||a}}async function Twe(){let n=ls.getCode();const e=ls.getLanguage();if(!n){o0("No code was provided, any existing code will be removed."),ls.onSetCode("",e);return}const t=await ls.canSaveAndExit();if(t.length>0){o0(t.join(`
`));return}n===ls.getDefaultCodeForLanguage(e)&&(n=""),ls.onSetCode(n,e)}function BB(){return ls?ls.promptExit():Promise.resolve(!0)}const bwe=""+new URL("logo.5f198d95.png",import.meta.url).href,Pwe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wUDEjATsbMk9wAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADxklEQVRYw+2YXU8jVRjH/+fMtEw7fYGWnYK7FGiK2RDYrBay9EIXuFmLWbnC3awXGxPDrbcSY/wAfgi5NOyNXCuSyBrMkkiykmjBaBtKmZYWLcVOX+acsxf0JatEUFmLyfyTySRn5mR+ed7meQ5gyZIlS5dS5N/uvX0bHZlMdxc75hQAjPpDR/1OVSKCHfnCF09Rqi+JFwlKgsHuHkqJZhj0mqKQfput4zqoo8Pr6ui2y1KYyrJDttlAKT2h4RymyWCa1UrNZD8Xf6/orFY2TbOyUy7zn5xOkikWzVQul8sCYP8YNBQKaKwiQjVBIm63e9zv776paZoWCPT4ent7aU9PwOb3d8Pr9UJVVdjtdlBKW6BCwDRNVKsVlEoGjo6OkM/nkMlkzL10mh1kM8fZ7IF+eJj7vlA4egKITVnmPyaTB/qZoBPX4NiXtJucS5Oa1nsnGOy7kUgk3LHYjDw7Owufzwen0wlJkkAIASGt7UKc7VEhBDjnYIyhXDZwePgrVlZW8OjREguFQkYqtfc0q+99BV772u7MfhuPo9jYKwFAJAIbpT1vcJf2wejoqx/OzLz51jsPHgzEYjOO7e1tGomMYWJiAoqinAoJoLl21kUphSzLUBQFnZ2dMAwDyWSSLiws2KPRaN9LV/teI5L9bj7PRu12G152HSf2j1GTh4evuHJZ6aNbt6LvTk1NXYlGo+jq6gIAlMvlptGFEH+CuwideEJAURSEw2GEw2ESi8W6NjY25lZXV+9883jts+H+ysdyzaDDwYHQe/Pz876hoaGmdc7jyhdShgiB2+3G9PQ0RkdHPIXCbw9/2Nr8nAouqCxJkt/vb77Y9ppZZ/B4vHA6HBBcyPT/UvBpuy13Xg9aFj1vxp83aS2LWqAW6EWDCsEvHZwQotllUwDY13UsLy8jlUq17R//R0Bd17G0tISdnZ0WqEt1IplMYnFxEcVi8VTY/6oHEEKgVCphcfFTJBK/wOvxtEDdbg/m5t5GJqMjnU633aLZbBa7u7u4d+8+tEDg+RhtNMWMsbaDcs5BCIGqqs0RhF7cUHpJylO7k6zNdZT8tRdF6xBAliRmmsyslcsGAPFcR9OYZxqjb2NuuqgKcDKVsmZcNr7L+UlNr9aqqFYrgkq8Sm4EoB47rn7yylj0/nY8TsbGx+Hz+QAAjDE8XlvD4OAg+gcGAFGfp0457CB/M8ZF3Vy6vo+trS28PjkJmywDAAqFAtbX1zEyMoLN7558SUjhfQIA49fd/viBGoIQly6belUzFd/Np2HJkiVLl1PPAJFxm2lUWqFHAAAAAElFTkSuQmCC",yD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkWAyclMXUDawAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADUElEQVRYw+2Yy04bSRSG/6o6demu6uqmaKCRIiQeaCLNykF5kRH77LPkCYCQRaSQRxmZBYt5g4ENCNG4axaxDfY0dnvwdBKJI5XadZM+/+fUqQvwaq/2cxtb0PexqqrfiEgAaMZtMcYIAA1jbPI7jksz/rLxF3PtbW2TOqvrur66uvpW1/WHNhhaALp9fn7+Zn9/XzVNgxjjtIyJW+sTm8zB4z9cOP/i4uLu8PDwr+FwaAHcdAYtikJ577G5udmLa+/v7/ne3p4dDodpGyh/Zl5WVZXlnPO+YpCIhPfeA0ja+p8D8VVVWSkl6wtUKSW89zkAsxLo1tZWRkS9gWqtYa11APRKoGVZpn0qKoSAMUatCpqFEHoF5Zxj7EG5CqjN8zwVQvSX0BmDlJKvGqOptZaICH0qKqUUAPwqoNoYA8ZYr6DWWgGgWElRpRTrE1QIgTRNSWsdVgF143jpFdRaS1mWlZ1BhRCF1pr3rahzjpxzW22HpTZQFUIokiRhPe6gU0WNMaErqMzzfMMY06uiRATnHGmtyzauVkWzLNtM07RXUMYY0jTlUsqiK6h0zm0kSdLn4en7LmMtpJS262KS1to8TdO1pqfT42N8OjnpEqut22grqDEmT5JkrX4/O/2MTydnS5N+kiQcgOsCSlpraYxZq1sjRogYdUr6AEIXUKOUYn3H5wTUey8AlF1AiyRJet0+n6Yo7z0B2OlyuQvOuRelptPjY5ydfp5x9eXlJQDg97dvn9zVBQbv32EwGEwVzfNctoG2KVq+NIeuMlc8GSulRAiBAOwuVVQpte29f1EOHRwcYHBwMNM2UfLL168LY7QoCimE2BmNRosV1VpXLwX9ryalRFEUxBjbXup6pdR2nuc/BJSIEEIQnPNyqeuJaOf/AGVYfv/inCPLMsYY21gKKoQoi6JYO+jg/buZhfOcZVkGxpjqAhryPF97Hp2koC6qKqXE3d3d0sXkdnd38SMS/mTlhxDE/DY6r2h2fX3Njo6OYIxB03x/Fp1/Lpzu33NPiIyxpePm+57OJyLc3Nzg9vaWALwB8PdjjM/KvhNjPFdKPcQYR9PzxOOj68TaHm2bf51DZgubq7eNQ4yRHh4eRkT0R13Xf+LVXu0XsX8AW2z37xq4Q9gAAAAASUVORK5CYII=",ED="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkWAykCCvybjgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADf0lEQVRYw+2Yz0rsSBTGv0qdqlRSlUqMrUZoZATxJQR3DSIMiPggrmRwI4KzFGbpIyioGwd8kaFdOe6E2YxubMR4U3dxu3vavrl20gNxBjxQJKk/8Ms5le+cFPBpn/bfNvbO2G9Zlv1MRBxA0e9zzjkAKBhjg3vXb0X/yvpXjPWX9Q2eWZ7n+cPDw+95nv9aBkPvgM5fXV21l5eXZVEUcM4NW5+49HlggzX45w3fXX9zc/O8v79/1+12NYCnyqBJkkhrLWZnZxsJ7cvLi7e0tKS73W5YBur9YF2UZZn2PM9rag8SEbfWWgBB2fiPQGyWZVoIwZoClVJya20MQNUCnZubi4ioMVDf96G1NgD8WqCtVits0qOccyilZF3QKE3TRkE9z0M/gqIOqI7jOOScNyfojEEI4dXdo6HWmogITXpUCMEB2DqgvlIKjLFGQbXWHEBSy6NSStYkKOccYRiS7/tpHVDT3y+NgmqtKYqiVmVQznni+77XtEeNMWSMmSsrlspAZZqmSRAErMEMOvSoUiqtCiriOJ5RSjXqUSKCMYZ832+VcZV6NIqi2TAMGwVljCEMQ08IkVQFFcaYmSAImiyevmUZrSGE0FULZ6G1jsMwrC1PeZ7j+voavV5vtK7FxsZGnb06SKMvk+b+tLW19df9/b2ra3t7e27kt2PYDg4OKq2/u7tznU7nTwALVUJPvu8LpVTt0N3e3pb2Hx4egjH2XQvDEJeXl9+JPoC0SuiVlHJqaVpbW8Pu7m6lucfHxzg/P8f29vYQ1FrLAbSqgCZBEEydPtvtNnZ2dirNPT09RVEUbyTKWktVQ58aYxqVptHQx3EsqoK2mtbQodwIgTRNCcDiRFAp5by1tnENHXg0SRLBOZ/sUd/3s48CFUIgSRJijM1X8mgcxx8CSkRI05R7nteaCEpEC9OCrqys4OzsrFQzy9rFxQVWV1ffVPlRFDHG2MxEeeKct5IkmQr06OgI6+vrb1Loe2aMQafTefv7G0VgjMkqoGkcx1PpKBFhc3PzX/87SSn58/PzxI/JLC4u4iPkafDlp2nKx9PouEejx8dHdnJyAqXUMGuMHxeOHiWOjjPGJs4bHxtdT0R4enpCr9cjAG0Afw/r1TG3LzjnrqSUr865LyMHrW7shcoObYuxOeNVFBt7LpsH5xy9vr5+IaJf8jz/A5/2af8T+woUyWfEnN7KnQAAAABJRU5ErkJggg==",CD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkWAyUJMZsNCgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADvklEQVRYw+2YPUskSRjH/0+9dFd3dVe37aijrILfYjAz0egCwYlV9BOYeJgfGF4gaO5H8BIDxUjHSA/OUeRgg402OUVQDke7LnD0ZmZ73lzpvQMfKLqqq4r5zfNaXcCHfMh/W6jD3K/FYvEnIQQHkNbfWWstAKRE9NK39ZbWn1R/ouV91ruXMdVqtdr19fVvtVrtlywY0QF0eHd399Pk5KSTpimsta+tTpw5fpGXPfj3H3bcf3Fx8ff6+vrnarWqAdz1DBrHsWOMweDgYC6mfXh4YBMTE7parfpZoKzNvrBYLGrGGMvLB4UQ3BhjAHhZ8+1ATLFY1FJKygvUcRxujIkAqL5Ah4aGQiFEbqCu60JrHQBw+wItFAp+nhrlnEMp5fQLGiZJkisoYwx1C8p+QHUURT7nPL+ETgQpJevXR32ttRBCIE+NSik5ANMPqKuUAhHlCqq15gDivjTqOA7lCco5h+/7wnXdpB/QoO4vuYJqrUUYhoWeQTnnseu6LG+NBkEggiAYyjosZYE6SZLEnudRjhX0VaNKqaRXUBlF0YBSKleNCiEQBIFwXbeQxZWp0TAMB33fzxWUiOD7PpNSxr2CyiAIBjzPy/Pw9FxltIaUUvcaTFJrHfm+/+b0tLCwAMYYiKhtm5qawu3tbZavZpbRrNIjlVKR53lvtvvOzg5WV1dRKpUy58vlMo6PjzE7O4u9vT08H0Ofk77neQxA0Hp4zgIVrutKpdSbTWitRalUwvz8fMd1lUoFMzMzqFQqTUkfQALgazfTK8dxcktNJycnTSnKGMMBFHoxfex53neXz3K5/KYUZYwRAEZ6CaYkCIJcU1OjRqMoklmgWRotvHcOJSJMT0/DWovDw8Omz+imKJYSSZIIAKNdNeo4zrAx5l1z6NbWFvb393FwcIDNzc2OGo3jWHLOu5vedd3ie4MuLS299peXl9uuk1IijmNBRMM9aTSKoncFPTs7e+2fnp52DKYkSThjrHvUCyFGvheUiJr8cG5uDmtra7DWYmNj45u1jaf8MAyJiAa6/sjY2NjvR0dH6dPTk32rLC4uWiKyDZdjmY2I7MrKStPey8tLq5T6syvo+Pj4l/Pzc5umqf0RcnV1ZY0xn3sJpmB0dBQ/Io++RH6SJLxeRtv6aHhzc0Pb29tQSiFN02+uFFuvEhvnG32z3brWucb9Qgjc3d3h/v5eAPgE4K/Mi1zG2Ii1dtdxnEdr7VPDRWtrhs66tE1bzyYtjVrGWetgrRWPj49PQoifa7XaH/iQD/mfyD/OxfLhU+RunwAAAABJRU5ErkJggg==",VD=""+new URL("debug.e0e74a89.png",import.meta.url).href,DD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AceFSgko8VmfgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEqklEQVRYw+2YTWsUSRjH/9X10i/Vb3Ymkxk0ul6ikoM38Sx6yGETDwEPEvIJBDWXRbyJiqcsOZljPsPs1YMHL1EGhGUcNGTyhiCEjYOJM6R7uvbgZEzGTmbaSLMLeaDorq6q4Tf/eup5qgo4sRP7bxs5ou3PQqHwO2OMAojb35RSCgBiQsjeu2qXuP0k7Se6vid926uTMAzDra2tv8IwfJwEw44AzZdKpTPnz58XcRxDKdUpbeLE+p7tjcH3f3jk+Hfv3jUfPHhQq1QqEsBO36C+7wvXdTEwMJDJ1O7u7mpnz56VlUrFSgLVDhnnFAoFqWmalpUPMsao67ouADOp/TAQt1AoSM45yQpUCEFd1/UAGKlABwcHHcZYZqC6rkNKaQPQU4HmcjkrS0UppTAMQ6QFdYIgyBRU0zS0Z5CnAZWe51mU0uwCOiHgnGtpfdSSUjLGGLJUlHNOAbhpQHXDMEAIyRRUSkkB+KkUFUKQLEEppbAsi+m6HqQBtdv+kimolJI5jpPrG5RS6uu6rmWtqG3bzLbtwaTNUhKoCILAN02TZJhBO4oahhH0C8o9zztlGEamijLGYNs203U9l8SVqKjjOAOWZWUKSgiBZVka59zvF5Tbtn3KNM0sN0/fsoyU4JzLfjfOXErpWZZ17PD0/v17vHr1Co1G41tedhxcv34dxWLxKF/dS6O7vX7/t5s3b376+PGjSmtxHKsoilQURapcLqvx8XFFCOkUTdPU9PS0Wl5e7vTbb7VaTd24cWMZwFA/ijJd17lhGKnU29rawtzcHD58+AClFJaWlrC4uHigj1IKCwsLWFlZwenTp2FZFkZHR3Hnzh1QSjtBH0AA4FMvUEMIkTo0lctlPHv2rDPNewvk2rVrGB0dRavVwuvXr7G4uIiXL1/CMAxMTk6iVCphbGwMFy5cAKUUrutSALl+FpNvmmZq/wzD8MBhjhCCe/fuYWJiAvV6Ha1WC7dv38atW7cAAM1mE2/evEG1WkWr1eqEKNd1Wb9TH9i2fezQdOnSJYyMjODp06dYXV0FAFy9ehVTU1N48eIFNjc3Ua1WMTQ0dCDoe57Hk0CTFM39ihg6PDyMer2OtbW1A+5hmiby+XziGM45giBgAIo9QYUQedd1jx1D6/U6HMfB/j2t53lQSmF7e/vQNOr7PqeU9lZU1/XCrwB9+/YtGo0G7t69i3PnzuHixYu4f/8+arUa1tfXD1XU931GCMn39FEhRN7zvGODNhoNzM7OYnp6Gg8fPkQURahWq5ifnz+w6LrzfRAEVNO0XE9QxtjQz4Dquv7DiWBjYwNPnjyB67qI4xhfvnxJOs933EPTNDiOQwghp3qCUkpzvu+nBr1y5QoePXqEpaWlQxVL8snLly9jZGTk+/HXcUAIEf2ABp7npY6jUkrMzMz0Dbk/3nafnYQQtNls9lxMdrFY/OmDHSEkVUlSOQgC2k6jhyrqfP78mTx//hyGYSCO4x+uFLuvEve3E0J69utu2z+eMYadnR18/fqVATgD4J/Ei1xN04aUUiUhRKSUau27aO2ez6RL27irj+oqpKue1A9KKRZFUYsx9kcYhn/jxE7sf2L/Ao3G7H18/ZeRAAAAAElFTkSuQmCC",FD=""+new URL("events.ab9e914f.png",import.meta.url).href,Rwe=""+new URL("eventload.ac71847b.png",import.meta.url).href,TD="data:image/png;base64,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",bD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AQWAhQoQv20YAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADA0lEQVRYw+2Yu0tjQRTGv7l5STBiMBFUthArQZSNxk62FKwEEUQN2IoQ8qdYaG8T0ASbWwUxhS8Em22EbbQIC1v5whgxueZ+21wX9eYxufcmPtYPpplMzvzunDlnzgzwpf9Uws6fSXoBDAKYAPADwHcA34yffwP4CWAPwAGAX0KIUku/juQAyTU2rjWSA60A7CWZon2lSPY2C3KBzmvBSUDFopsb2Q6KE5ApNl8pW7D1VvLq6oqqqjIWi3F0dJShUIg+n49er5fBYJCRSISJRIKnp6fUdb3uyjq+J8vlMldWVtjW1kZFUeo2j8fDWCzGm5sbZ/esEd1VpWkaJycnpSCft6mpKRYKhXqwFbNBtX2x2ozMsbOzg2QyWW/YqhSokZBnpY82IdDX14f5+Xlks1kcHx8jHo+js7PTNFbXdWxubkLTtFomZ6UOBZlU9OT6sbExZjIZappmGnN0dMRAIGByf39/P6+vr+0FFkmvTC4pl8s8OTmpCPikQqHASCRiAu3p6eHFxYXMNN5arh+UcbeiKIhGo3C73VXHlEol5PN5U39HRwc8Ho/MNIO1QCecChxVVZHL5Uz9w8PDaG9vlzExUcv1aSeOmWw2y66uLpPb/X4/d3d3Zc2ka4Ge2YVUVZXBYNAE6XK5uLy8zMfHR1lTZ7VAi3Ygt7e3K0a6y+XizMyMTLJ/rmJTQPf396uu5NzcHO/u7ho1WXTc9fl8niMjIxUhl5aWWCxa+v4zx4Pp8PCQfr/fBDo+Ps7b21urTkrXSk97VlJRLpfDw8ODqX96ehqBQMBqhnvB8jpjH1ix2N3djWg0Cl3XX9QAQ0NDdlLxQdXrsnFsFd/JVd73/HqtvKqESgDW3wHket03AOPO3pC2trYYDocZCoX+tXA4zI2NDauBZCrz3BXqy3Mj4qRr0vv7e1xeXlbst6C0EOJctsJPvKHbE9JXESHEHwCLbwC5aMwtfWeCECLZ4sBaN+ZEQ6CG4gDSLYBMG3N98iedD/VI9uGeHd/6IfdzP41/6TPoL3empoogJdXtAAAAAElFTkSuQmCC",nU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wgIEDgk7cKcLgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAE+klEQVRYw+2YS0xUVxjHf+feO8MMw/AYYICI4zCtaCgYFaZg4yu4sGBEN4pKTaMx2kWTGuOiSRPrg4VNV7ppgouSdKHBNNGFblptgjU2TVNDA20GFSEgDI9JRSgww733dMEwYEXFBx1N5p/c3OQ87vnd7/vOd79zIaGEFkwrgCHAAHTgG0D9z5h8oCM6xgCuAknxgP0UiEQhxoAts/o04LtZkA+Ad+JlVVvUStMwASAn2rcTmIi2h4F98Q6BZUDfLNgGwAvcn9X2PWCZa7J4hYUFwIYNJPX3Z2UYo6YCMB7ttEfvikNIT1Jo+Ic/GAMOAWejMRqJxuXy6NBeYH0U/KVBhceTlasowj0+ruTbbGKJxZK0HMWelJaSlGXV1HcVTbNrFguKogAgTRNdN9D1SHhSNzpG/gkHJ8Njsru7d62u60WAnPV8HTgQjdU5pT2tw+fLcRth6ZuUotTpdPozM7NWut1ud05OrisvL0/Jzc2xZGZmkZaWhsPhwGq1oijKDKiU6LpOJBJmbGy8+NGjR4RCQ7S1/Wk0nDvHxPiEEl1KapoWyM7O6LNaye3qGgw+F7QiH3uf6l5pmurGjIy8zR7P4hWdnZ3Oqqpqbdu2bbhcLpKTk1FVFSEEQsw4REr5XLdIKXE609SGhnOz5wpN04pLS/2XBgeHWhSs1zEnm63JA78EAoxMD1IBSkuxKEruh2aK+/OSktVfVFdvqanbs8dbVVVtb29vV0pLy6ioqMBms80JCcTannWFQiEOHfqEwcHBx+bqui5WrVptPXz48OJF+Z51QrVuDYWMEqvVQmHKaGffKJNqUVF2yvDfqSf87685UVu7+4O6urqU8vIKkZ2djRCC5uZmfD4fhYWFT8C9iEzT5OTJk1y//hMALpeL7du309bWhpSSe/fusWlTJVVVVaK8vNzu8Sx5T0o2Bx48zF+UnvSbNjmuFHm8vgMHDx50LV26NGad+bjyRXTt2jXOn78w5UZV5ciRI+zevYuWlhba2toIh8OcOlXPhQvnSU9Pp7KykpKS4tTh4Ycf/9V6+5IiTaloqqpmZmbGIF+3BgYGOHbsS8LhMADr1q1l796PcDgc7N+/D4tlKnXevXuXM2fOxoyUmppGst2ONKWmLHSWNwyD06e/oqOjA4CsrCzq6+ux2WwAeL1eli0rjGWLpqYmbt68+cRzFhz0ypWrXLx4Mebyo0ePMjvEhBAUFHjx+8sACIfDHD9+nKGhofnl0delmpqt1NRsfeYYVVVpaGjA4XDEQk9KGQuV/8Wiz8ur8920cQV9ESVAE6BvDaiU5hsHJ6WMFa0KQF8wyOXLl+np6Xnt3/iXBQwGgzQ1NXHnzp0Z0BRHMl1dXTQ2NjIyMjIn7ELUAE+DHBsbo7HxWzo775OWmjoD6nSmsmPHTvr7g/T29sbdogMDA3R3d1Nbuwt3Ts7jMTpdFBuGEXdQ0zQRQkx9Uufe9eLtT0/x3mRxzqPi2V6UM2dqTVUNXTf0yYmJcUA+VtFM3WXs6CulnPNg9yo73DSNWFxOr2uaUzk9MhkhEglLRTUjYkUOjlH7oq9Xla3Z1R4IiDK/H5fLFavOf75xg4KCApZ4vSCj5ynkU/5kzP8FZNRcwWAfra2trN+4EYs2VR4PDw9z69YtiouLuf37rz8KMfyZAPAvd2YGBh0+pHzjdlOeQ+8JdId6SSihhBJ6M/UvkRLqf5NwFscAAAAASUVORK5CYII=",rU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkWBAgakEAAvgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAESUlEQVRYw+2Y3U8jVRjGn3NmWvpBGWjZFtylQFPMlsBmFcjSBLvAzVoIyxXuZr0wJspeeisxxj/Av2DjhVwa9kbScKVIAhjMkkiyktSC0TaU0pYWHYr9nJnjBf2QDwVaVtZsn2QyycycmV/e97zPOe8AVVVVVVUvpUilY+/eRU0k0tggHygUAFL5m9r8meoJs9bExW+eI5m/xF4kKLFaG5soJeZUit7QaEirSlVzE1RbI9TWNKp5zk55XsurVKCUHtIoCiRJhiRlMzlJ/jXxZyYs59KSJGU202nlF52ORBIJKRiLxaIA5LJBbTaLWc4wW46RHoPB0GcyNd42m81mi6XJ2NzcTJuaLCqTqRGCIECv10OtVoNSWgJlDJIkIZvNIJlMYX9/H/F4DJFIRNoOheTdaOQgGt0N7+3FfhLF/WcAW+N55edAYDd8Jmj/DWh3OPNtReEGzebme1Zryy2/329wu0f48fFxGI1G6HQ6cBwHQggIKQ1n7OyMMsagKApkWUY6ncLe3u+Yn5/H06czss1mSwWD28+j4e3voOQW1broDz4fEoWxHAD09EBFadPbSq354+7uNz8ZGRm9/+6jR21u94h2Y2OD9vT0or+/HxqN5lRIAMVrZx2UUvA8D41Gg/r6eqRSKQQCATo1NaV2Op0tr11veYtw6rF4XO5Wq1V4vfbAv3OAHN/Zea02FuU+vXPH+f7Q0NA1p9OJhoYGAEA6nS4GnTF2Au4ydJgJBo1GA7vdDrvdTtxud8Pq6urEwsLCve+Xl77qbM18xudStNPaZvtgcnLS2NHRUYzOeVL5QmyIEBgMBgwPD6O7u6tOFP94z7u+9jVlCqM8x3Emk6n44JV7Zp6hrk6ATqsFUxhP/y+Gf+mgLtcAXK6Bc0fuvBl8dSN60Yo/b9FWI/rKgvKVVjgAOBwOPHnyxanPPH78IbxeLwBgcXH5aiK6uLgMQRDg9XoxNjZ64v7Y2Ci8Xi8EQagI8ggoY0pZL/B45iAIAkRRPOKfLtcARFGEIAjweObKd4W/g+6Ew5idnUUwGCxrjS/AHle5kIwxhMNhzMzMYHNzswRaq9chEAhgenoaiUTiVNizVpDjsJVAJpNJTE9/Cb//Nwh1dSVQg6EOExPvIBIJIxQKlb1UejxzcDgccDgcJyAvsrRGo1FsbW3hwYOHMFssR6u+sCmWZbmiSf9P1X8RKYoCQgj0en2xBeErbUrPG6X/zPCvaiNdseFX6oulDP5LFlnpJwDPcbIkyVIunU4BYEd2NIV+ptD6Fvqmy+oCDrtSuTgvC99VlENPz+ayyGYzjHJKltyyQH+gvf75G73Ohxs+H+nt64PRaAQAyLKM5aUltLe3o7WtDWD5fuqUnx3kgnOc5cMVDu9gfX0drsFBqPjDBIuiiJWVFXR1dWHtx2ffEiJ+RACg76bB5NvV28DY1TdMx9Ssl4K+rXgIVVVVVVUvp/4CVivTPqtayYoAAAAASUVORK5CYII=",iU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AsSAwsQq1Vo0QAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAF+klEQVRYw+2YWUxUZxTH/3eZhRmGbWBYBEQyVEIGSgsTGS0KFLS41JciaKtNk4oSUV5KUyGkSUFt6oNNxNK0JKXoQxXXtyooEVyImE5CJ6lAVTbhzrCUYZuFe+/XB2CAFBUKqA/8k5ubO/d+Z34553zn+84HrGhFK1rRGylqsWM3bYLMbPb1FkZEGgBsky/dJu+0kiKhsn5rdRPGJn8iywlKhYb6BtA0pbHZ6GC5nFotkcgiQbvJPN1lvlKW0dIs68ZKJKBpeoJGFMHzAnje6RjnhSfDow5OGLfzPO9otdvFvxUKyjw8zHf19fVZAAj/GzQ83F8jOEj4OKHiVCqVXq32jdVoNBp//wCfwMBAOiDAX6JW+8LT0xNKpRJSqRQ0TU+DEgKe5+F0OjA2ZsPQ0BD6+/tgNpv5Z93dQq/FPGKx9HIDA31/Wq1DDwBiZFnxUXt7L/dS0IRguPUwmlhRZJI0msAtoaEhMW1tbar09K3szp074ePjA4VCAYZhQFEUKGp6OCEvjyghBKIoQhAE2O02DAz8g5s3b6Kq6oIQHh5u6+p61mThnt2COF4nVVgampsxPDWWAYC4OEhoOuAD0V3zVXT0u4Vbt2778OM9e8LS07e6tbS00HFx8UhISIBcLp8TEgAoioIoirh9uw4OhwN+fn6u72ZeNE2DZVnI5XJ4eXnBZrOhvb2dPnr0qNRgMIQErQpJpBjpjv5+IVoqleAt95G2nhGMs1FRfu59FqZo3TrDZ8nJyX4GgwHe3t4AALvd7nI6IeQ/cDPldDqRm3sYen08rl69gvXrNyAzc9e8vAwQyOVyaLVaaLVaKj093buxsTGjtrZ2y9079b9FrXZ8zY7b6KjQsPDPs7OzfSIiIlzemU8oZ0IeOpSLffv2IjExEQBQUFAIhUKB7du3uWzOa9ZSFFQqFVJSUhAdrfOwWgc//ctkvEoTkdAswzBqtXpBBqckCAJycw/PggSAmJgYVFZWory8fDIyCyhFkwweHp5QuLmBiISlF1uI6+rqodfHz4Ksrq6GyWRCdvZ+cByHx4+fLLrgLxo0MDAAJpPJ9Ww0GnH27Dns3fsJysp+RFFREa5cuYynT9vm9Nx8I7ho0MjISBgM61FQUAij0YhLly7j5MnvsHbtWpSWngYAHDhwAOfOncWtW7WuNFjIHFgSUADIyspEWloaqqouIjh4FQoLCzE4OIigoCCkpqaB53kUFRWhpqYG+/dnQxAE14SdL/CSgE6s+Rvh5eWFjo5OlJeXw2azITU1DTU11VCr1cjP/xIZGR8hJCQEVVUXX32OugzRNPLzv8Du3Vk4ceJbSCQSXL/+OywWC2QyGYqLv8GpU98jOTkJTU1NOH/+wusBnZoc0dHRSE19H2VlZWAYBgcP5qCjowMlJcdQWfkr0tLScPz4Mdy7dxePHj2at212OfaOer0eokhQXFyMnJyD+Omnn1FSUjzrG51OB47jwLLsq/foTMXGvg2FQoGGhgbodLpZ7+rr69HY+HBW7Z03KCHikoLKZDIcOXIEGza8h6amplmQlZVnUVp6GgzDvHQfQGaGvofjcO3aNWzevAXBwcELXkafJ4lEgpSUZIyOjiIvLw86nQ6NjQ9x5kwppFLpc0sTIQQcx+HGjRtobW2d9qi7UoH29nZUVFRgeHh4TgOLgd+xYztycnKg1UagrOwHSKXSF3pxbGwMFRW/oK3tKTw9PKZBVSoPZGTsgtnMobu7e1lyNjIyEsnJSS8NNwBYLBZ0dnYiMzMLGn//2Tk6tSkWBAGvW6IogqIoKJVKVwtCL11Turyad3la6CbitYEu37HCC6JIpg8BWIYReF7gx+12GwAya0cz1c9Mtb5TfdNSla+JrlRw5eXU/4riRE13jjvhdDoIzYhOKsYfyhG3VSffiTdktTQ3U/F6PXx8fFxtxp36eqxZswarw8IAMtlPzXHYQS0wx8mkuziuByaTCRuTkiCZXE6tVivu378PnU4H4x8PaijKmkcBgD5SpW7uVYaDkDduNgUq+a7mzv5urGhFK1rRm6l/AQGHbTUbueE5AAAAAElFTkSuQmCC",Lwe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkWAzAL6CCKMgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFTklEQVRYw+2YS2xUVRjH/999nHtnuDPTeZCSANrXTB9SrMOY0GjSrsCACdGoJBUpsWxx6YqAiRvd6s5VS0I0UUJiorDTBZgQWlqoAykd2mnSJwwJTguduY9zXPRBH5e2M50SMf1W53735J7f+c75/t85F9i2bftvG72EMfyhUMjn9Xrx7Nmz5wMTiVUwS3y5XM6amZnJLDwrWwwpt7a2njh27FiHYRiqmDMAEAAW20QkOOcgIiGEEI7jiP7+/t5Lly59lclkJl4GqNTU1PRaW1vbvnA4zDBH59pxqd+yLHH16lUpmUz6rl27tvWg5eXlLBQKBRljJMvyxvcjERmGYfj9fu/ijLcSVNM0FggEgrIsFzQOEUFVVU1RFO2lgObzedUwDJ8kSQWPo6qqzDnXS5pMdXV1BzjHp0SiBaAaIYRBRDNC8JErV66U7d+/H4lEoqCIyrLMiMhXEtBoNBqTJOl7IXCI6Lna0dyDn0hq7O//GydOfIaDB5tx7txZVFVVbQjU4/EwXdfLNr30sVjth5Ik3wLo0Eb69/R048yZL9Dd3b2h7+u6rnm93uDC7JXiIGMfAPj5BRO1AfwoBL/o8/ns8+fP/9Dc3FyZTo/QwMAAksm7qKioQCQSWTOimqapHo+n+KWvro5FAbpARNJqLcQA5/YnqVTqDgAcPny41TAMbygUQiQSQSJxAPl8HrlcDkKIhS3iXilkmVRV1eeD4RQMqij0HUCGG6Rp5t5Np9OLZY8xpmuaptISIk3TwBjbwDgKGGN+ACoAp6A9WlNTGwfoPbfl5pwfXwq5oNuqqspuS7tWNOfliVRVDQNgBSeTLKPN/Y34KZW6f3sljyRJQVVVi8oDVVVJ07QwAK1gUCGoxc3POS665YSmaWFd1+ViQBlj5PV6Qx6PhxUhTyLq5jVN3vMCiQnrul5URBVFIV3XdwghlIKznoj8bv6RkcHHbt0ZY37LsuRsNrvmacnNbNuGEEI1DIPlcrm1QWOx2t+I6Mh6E6itrXOWAPx+//7AUQDy9evXx4no5nyWi3lJEnPbhS+2Fw6mK9/du3dvKpvNKuud8AmAGo3GvpYk6cuNRNxxnG9SqcGzAPj84Tg8Ly/LgrnW3nLxPQbgrALduRNG2F9dq3m0RKy+/q1oNFo/OPjgjTt3+sNrQTY01E9VVL5+687t3v6Zmae9o6PpnrGxzAgAs6R3pkAgEGxqajwaj8ffr6ioOpjJPNoVi9WqLS0tpCgKOju7qKvrgutH2ttPor39pMhms7h8+TLXdS1nWfZwKjX4x82bPb/29fX9OV9ai7/TLDTeaU60f/Tx8W+PHDmaaGhoKJuenlYCgQBVVlaSLMsUj8chhEBf33K5PHWqHadPd0CWZSIiSqfTUmPjPpZIvL2zuromLsv05tMnmd6Jh5nRzYAuJpPHs2NPdXVNKBgMSi/KyI6OzwEAnZ1di5ALvpULxRij3bt3q3v37N3DdE/ZZpdeWVna1rOlYCsh50rj6nJZCitKjN2jOKeN68hj8dfZV+VPyasH6jg2stkn65a2Qsy2bWSns6UFzWQy6O7uwfDwcElgOee4ceMGkskksv9kSwcaiUQgSRImJiaWgRabtaZpYnJyErvKd8Ef8JcOlCQJuu4B53wZ6GaiK4SAruullSfBbcs089yyTCmfz8O2LZimidnZ2Q1HNZfLwbZtmKaJfD4Px7FhWqYjJOGUDHRsYuovLXn3l8nJh4HJqUdIPXgAj65jaCgN0NJjlrRG8lj4+24So2Pj8Pt86O3rA+fO0Pj42FApf+QSgB1boCwOgFls27b9z+1fbOUFcM/gZNYAAAAASUVORK5CYII=",aU=""+new URL("audio.7d30fd5a.png",import.meta.url).href,oU="data:image/png;base64,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",sU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS0UqInYQcchQnSyIijhqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxc3NSdJES/5cUWsR4cNyPd/ced+8AoVFhmtU1Dmi6baaTCTGbWxXDrxAQQhBx9MvMMuYkKQXf8XWPAF/v4jzL/9yfo1fNWwwIiMSzzDBt4g3i6U3b4LxPHGUlWSU+Jx4z6YLEj1xXPH7jXHRZ4JlRM5OeJ44Si8UOVjqYlUyNeIo4pmo65QtZj1XOW5y1So217slfGMnrK8tcpzmMJBaxBAkiFNRQRgU29VWGToqFNO0nfPxDrl8il0KuMhg5FlCFBtn1g//B726twuSElxRJAKEXx/kYAcK7QLPuON/HjtM8AYLPwJXe9lcbwMwn6fW2FjsC+raBi+u2puwBlzvA4JMhm7IrBWkKhQLwfkbflAMGboGeNa+31j5OH4AMdZW6AQ4OgdEiZa/7vLu7s7d/z7T6+wEgYnKG3s9puAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+UCBQMwAvRNakUAAADjSURBVGje7ZqxDcMgEEVNlAUoKViDgRiMgajZgIKSEZIq0QUFnDM4CuRfZRcn/KTnjzhbbANKSnnj9uScxYi1L9vkNT2AGKFKSom9sFJqiF5Q6KcVKpWpqRJj7HqIEMLLvbX2Y52gEAA663q0kXqvte7qh0JLxSiNzjI2j2hDe4wxbyO51InG6l6kQiEAAAAAAAAAAAAAAAAA4PtHyrOPilAIAAD4EwDWcNd7/7yuTSVac//aJALDXQDMuBPXdlz6nrR6Su+h0JIxuherj3LOsRemUVkWPrMuqxBXrVbhZ49VAO7oTlveWOIKeQAAAABJRU5ErkJggg==",P2="data:image/png;base64,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",Bwe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4gIUBCAidQ5OGwAABmFJREFUWMPtmW9oVFcWwH9vppM4mTFOZxvTJBinH0ptNNXoFMRM0jWVkVCFCmJV1K7QQtjih1lcG5R+8M+nItJaWFeorUtRxKCWfjEuKxHjh6gx8U8x1bhKNFETq9NxTJP583L65c30zsuMGfNvWeiBC29u3jv3d+89555zT+D/RLRx0mMD7EA+kANYgBgwCDwFIsDQ/wp0KvAW4AXmAa8BBUAeYDXgngE9wA2gFbgI3B4rdLZSBHwEfA/0AXFAsmiDwHXgC+BdIHeiAKcAHwL/MQaVUbYh4CGwD3h7vLd+NvBXYAPgUL/TNA2Hw0FhYSHTp0/H6XRitVqJRCIEg0H6+vro6+tD13VERNUpwFXgn8A3QHSsoIuBek3T/OpANpuNiooKampqqKqqYtasWbjdbnJzc9E0DV3XefbsGQ8ePKC1tZWzZ8/S1NRET0+PGfhX4Cvgc+DJaLfbv3DhwpSt0zRNvF6v7NmzR7q6ukTXdclGIpGInDlzRurq6qSgoMBsDlHgS8A9GkhfVVVVikK73S6BQEA6OjpktBKNRuXYsWNSU1Mjmqap+uPGqtpfBLJ0xYoVKYqKiopk9+7dMjg4KOMhly5dkjVr1phhB4G/ZQtpBXapCtxut+zfvz/rbc5Wurq6ZMOGDWbYTqAmG9ClJSUlyQ9tNpts3759REhd16WhoUECgYAEAgHZtm2b3Lp1a0TYK1euyNKlS83H13dGQMkoucC3quNs3LhRQqHQiAPGYjGpq6tLDuhyuaS5uTmrlW1sbJSZM2eqsGHgAxXMYgJdBCxLhqCiItavX09+fv6EhrolS5awevVqLJYkjhN43wjHw0A1wK9p2iuJg3zVqlVUV1dPeEy2Wq2sXbuW2bNnq93vAHPTgf4JeCdxGBcWFrJy5UqsVuukpHFz5syhtrYWTUvGoFeBPyeCkgr6utEAmD9/PnPnzp20fNNisbB48WKmTk3xIW8ieVFBy4CXVVCHwzGpyXF5eTkej0c1xTeMneYl5b3XjDOU3NxcysrK1G0AQNd1enp60g4Sj8fp7+9P6evu7ubu3bsZ7bKkpCSlz+124/F4uHr1qmqOrwA9Kmhh4iEnJ4fi4uJhyltaWti0adMwoIQ8fPgw+RwKhdi6dSs2my3tu9XV1ezduxe7/feIabfbzfB5gMu8ok41M0q37bFYjJs3b2YETcnhRLhz507Gv8+YMSNtv9PpRNO0RIZlM/LgFBsVdRBTKjZpkiZnFfOKhtWVC4fDw5Q4HA58Pl/GFe3s7KS3tzfpxfPmzSMvLy/tuxUVFWkhnz59qsLGgAEz6IPEQzQapbu7e5gir9fLkSNHMjpTfX09Bw4cACA/P58dO3ZQWVmZ8ThS7RNgYGCAe/fuqV39QNAM+l9jBrZoNMq1a9cYGhpSwxqapuFyuTKCmh1n2rRpGd9PJ48ePTLb9c9GS7HR64lOgLa2trTbP5HS1tamrqgAPyauJxbTinYkfly+fJmWlpZJg4zH45w+fVq1fwEuJC59KugvwJlEcSAYDNLQ0EAkEpkU0PPnz3Py5Em1667BkzbN+7dR2UBEOHHiBKdOnZpwyFgsxqFDh1T7FKN+0JEJtNWogAjAkydPOHjwIPfv359Q0OPHj3P06FH1WAoCJ9S7vjmHE8MEfEaM5caNG4gIPp+PnJyc52Y/DoeDBQsWUFtbi9/vZ9GiRTidzudCnjt3jp07d9LZ2akyfAv8Y6QalQZsMY6q5DV5165d43YDTUh7e7ssW7bMfMdvBRZkuxvTgK+NGSVht2zZIr29veMC2djYKH6/33wD/Rn4y4uaThnwgzpbi8Ui69atk6amJonH46MCfPz4sezbt0/Ky8vNK9kPfDraUqjXDAtIaWmpbN68WS5evCiRSCRrwMOHD8vy5ctlypQpZsgwsO15pchs6N8C/g6sVkOupml4PB58Ph+VlZWUlZVRXFyMw+HAYrEQi8UIBoPcvn2b9vZ2mpubuXDhQrpod8+ome41yjpjKjsWAJ8AHxuF3JTvbDYbTqcTl8uF3W7HarUSjUYJh8OEQiEGBgYYGhrmwDrQZJQdj6tp5pjvX4Af+BfwWHW0URRyrwGfGdefCZM84D2jYnzdcAJ9BLCY4dGngXrgzRd1mrH8s8EGlALlRnsDKDFqRi8ZCW8QuGNMqB34aSzF2j9kPOU3/zokUrYCERgAAAAASUVORK5CYII=",PD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gIZFDEXnijShQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADPUlEQVRYw+2ZPUgcQRTHfzMbcickURElaJEjXCWCjQS1iEEMBOxsJIUg2mpjBLXQQvCDHIc2dgqCWAQ0XDgIgRTR5apEiwO5JoWVhR9YKIrG7E0K3cveet7umju9iA+GHd7OvPnv/N/HDCv4KwJ4RP7lFPjldZK4eJYAIaAGkIDKA0ABJIFdIAbMAEdejcxdgLuplgROgGYvIB8D328YqNlOgTduQD64oESaip6eHurq6pBSkkgkmJycdDRSVVXFxMQEyWQSpc69RgjB3t4eIyMjHB8fA9Dd3c3Ozg7RaNSc+hD4CLwFPjmt8wT4YX7l8vKyMmVlZcXVzgwNDalMcnR0pBobG1PjFhcXlVJKhcNhpWma3U7WnZV2hbkj9n42uWqcUiqjvb6+PsbGxuzDPwCvXQO9KRkYGGBubs7O7GegtaCAAnR1dTE8PIwQwhozS8CrggIKMDo6yvT0tFXlByJAS0EBBejt7SUUCll3thj4ArwoKKBCCPr7+xkcHLSqtYtq6c8ZULfZwUnGx8ftbvASeJ4zoGdnZ2npyGyGYWAYhidbHR0dVFdXW1XNZpT9s8zPz1/KmQAHBwfE43FPO19cXEwgECCRSJiqZ45A/X6/K6D7+/tMTU05jisqKnLlr5agSrGelfr6+noqKytz4n/l5eXU1tZee74j9aurq8zMzLC1tXXtQCstLaWzs5NgMJg/oMFg0BWt+ZaCyKP3QO+B3gWgjlG/vb3NwsICm5ubOV9c0zQaGhpoa2vD5/M5jk+7My0tLaXde2pqavJ+G21vb0+tZxiGam1ttb4PO1K/trbGxsZG3mmNRCLs7u5en/rDw8M0mlpaWlzXf3t1stZv8yodi8VS709OTq4P1Grc5/MxOzubk9ovpUTXdZqamnIXTPYFpMxNovBqR3ql8L/Io7Zz4n3Cv7tA8+mTXm3L2/JJr7ZltrRh7QshcpaaMqUnTdNS+kwfcSmPxuNxSkpKkFKyvr6e0huGga7rlJWVZa06biqUpmmXrtG6rlNRUYFhGFeW07RDib0JIfJ2GHFp+71J/SHws4AD6qtJvQLeAeVAgL+/dG5bfgNR4BsZQD0tEKACOOP8nxQAfwAPG9nwqzxsWQAAAABJRU5ErkJggg==",Mwe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AQaACoUZQW4TAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAlElEQVQY032PQQrCMBQF56UVwZ00eMviFTxAN5LDlN6jp5BmXaTauDApIRUHQuDn5U0CgHdWccc7G+IiPxORx91SGQIZ7xVdrhMAJt04n3SjIM28s9qU8G1rWh+VTcqraSfqsqU+iF+k4Pa217LLBEDKtX+QKUPdMNMN867VlJN+XOjHvV/e2ZDcleAYP/NcAmvm+gBPyjeWUUkCqAAAAABJRU5ErkJggg==",Iwe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AsGEjAJMRMmpgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAkklEQVQY042QsQnEMAxFv4SjQQwHniqQMTKB98hCuS6dmkBmMIbYVxw2iqv8Sl886QsRjFaRan3MmVrtLDR7XywI1WphrCL1COE+Qrhl4ioTd99S3LjpkQ1g9r5AtTJeyo2Nr/+0kgEUax5arhPLdcJCAMAxZ9pU+8CeEvaUOrCpcsyZaHxPqf+7mag0CADo7cN/EYBJPjUCHZkAAAAASUVORK5CYII=",Owe="data:image/gif;base64,R0lGODlhKwALAPEAAP///wAAAIKCggAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAKwALAAACMoSOCMuW2diD88UKG95W88uF4DaGWFmhZid93pq+pwxnLUnXh8ou+sSz+T64oCAyTBUAACH5BAkKAAAALAAAAAArAAsAAAI9xI4IyyAPYWOxmoTHrHzzmGHe94xkmJifyqFKQ0pwLLgHa82xrekkDrIBZRQab1jyfY7KTtPimixiUsevAAAh+QQJCgAAACwAAAAAKwALAAACPYSOCMswD2FjqZpqW9xv4g8KE7d54XmMpNSgqLoOpgvC60xjNonnyc7p+VKamKw1zDCMR8rp8pksYlKorgAAIfkECQoAAAAsAAAAACsACwAAAkCEjgjLltnYmJS6Bxt+sfq5ZUyoNJ9HHlEqdCfFrqn7DrE2m7Wdj/2y45FkQ13t5itKdshFExC8YCLOEBX6AhQAADsAAAAAAAAAAAA=";const kwe=[{name:"Load ROM",icon:Pwe,type:ce.ROM_LOAD,details:"Load a ROM image and read its boards"},{name:"New board",icon:yD,type:ce.BOARD_NEW,details:"Create a new board",dropdownFn:RD},{name:"Import board",icon:ED,type:ce.BOARD_LOAD,details:"Import a board file into the editor"},{name:"Export board",icon:CD,type:ce.BOARD_SAVE,details:"Export a board file for distribution"},{name:"Debug",icon:VD,type:ce.DEBUG,details:"Debug functionality",advanced:!0},{name:"Screenshot",icon:DD,type:ce.SCREENSHOT,details:"Take a screenshot of the current board",dropdownFn:LD},{name:"Events",icon:FD,type:ce.EVENTS,details:"View and manage events",advanced:!0},{name:"Settings",icon:TD,type:ce.SETTINGS,details:"Editor settings"},{name:"About",icon:bD,type:ce.ABOUT,details:"About PartyPlanner64"}],Nwe=[{name:"Close ROM",icon:nU,type:ce.ROM_UNLOAD,details:"Close the ROM file and remove its boards"},{name:"Save ROM",icon:rU,type:ce.ROM_SAVE,details:"Save changes out to a ROM file"},{name:"New board",icon:yD,type:ce.BOARD_NEW,details:"Create a new board",dropdownFn:RD},{name:"Import board",icon:ED,type:ce.BOARD_LOAD,details:"Import a board file into the editor"},{name:"Export board",icon:CD,type:ce.BOARD_SAVE,details:"Export a board file for distribution"},{name:"Debug",icon:VD,type:ce.DEBUG,details:"Debug functionality",advanced:!0},{name:"Screenshot",icon:DD,type:ce.SCREENSHOT,details:"Take a screenshot of the current board",dropdownFn:LD},{name:"Events",icon:FD,type:ce.EVENTS,details:"View and manage events",advanced:!0},{name:"Patches",icon:iU,type:ce.PATCHES,details:"Apply patches to the ROM",advanced:!0},{name:"Model Viewer",icon:oU,type:ce.MODEL_VIEWER,details:"View 3D model data in the ROM"},{name:"Sprites",icon:sU,type:ce.SPRITE_VIEWER,details:"View sprite data in the ROM",advanced:!0},{name:"Audio",icon:aU,type:ce.AUDIO,details:"Game audio options",advanced:!0},{name:"Settings",icon:TD,type:ce.SETTINGS,details:"Editor settings"},{name:"About",icon:bD,type:ce.ABOUT,details:"About PartyPlanner64"}],Uwe=[{name:"Close ROM",icon:nU,type:ce.ROM_UNLOAD,details:"Close the ROM file and remove its boards"},{name:"Save ROM",icon:rU,type:ce.ROM_SAVE,details:"Save changes out to a ROM file"},{name:"Overwrite",icon:Lwe,type:ce.BOARD_WRITE,details:"Overwrite a ROM board with the current board",dropdownFn:eye},{name:"New board",icon:yD,type:ce.BOARD_NEW,details:"Create a new board",dropdownFn:RD},{name:"Import board",icon:ED,type:ce.BOARD_LOAD,details:"Import a board file into the editor"},{name:"Export board",icon:CD,type:ce.BOARD_SAVE,details:"Export a board file for distribution"},{name:"Debug",icon:VD,type:ce.DEBUG,details:"Debug functionality",advanced:!0},{name:"Screenshot",icon:DD,type:ce.SCREENSHOT,details:"Take a screenshot of the current board",dropdownFn:LD},{name:"Events",icon:FD,type:ce.EVENTS,details:"View and manage events",advanced:!0},{name:"Patches",icon:iU,type:ce.PATCHES,details:"Apply patches to the ROM",advanced:!0},{name:"Model Viewer",icon:oU,type:ce.MODEL_VIEWER,details:"View 3D model data in the ROM"},{name:"Sprites",icon:sU,type:ce.SPRITE_VIEWER,details:"View sprite data in the ROM",advanced:!0},{name:"Audio",icon:aU,type:ce.AUDIO,details:"Game audio options",advanced:!0},{name:"Settings",icon:TD,type:ce.SETTINGS,details:"Editor settings"},{name:"About",icon:bD,type:ce.ABOUT,details:"About PartyPlanner64"}],lU=[{name:"Back to editor",icon:P2,type:ce.BOARD_EDITOR,details:"Return to the board editor"}],jwe=lU.concat([{name:"Create Event",icon:Bwe,type:ce.CREATEEVENT,details:"Create your own event code",dropdownFn:iye},{name:"Import Event",icon:Rwe,type:ce.EVENT_LOAD,details:"Load event code from a file"}]),Gwe=[{name:"Back to event list",icon:P2,type:ce.BACK_TO_EVENTS,details:"Return to the event list"},{name:"Save",icon:PD,type:ce.SAVE_EVENT,details:"Save the event"}],Hwe=[{name:"Back to editor",icon:P2,type:ce.ADDITIONALBG_BACK,details:"Return to the board editor"},{name:"Save",icon:PD,type:ce.SAVE_ADDITIONALBG,details:"Save the code"}],zwe=[{name:"Back to editor",icon:P2,type:ce.AUDIOSELECTCODE_BACK,details:"Return to the board editor"},{name:"Save",icon:PD,type:ce.SAVE_AUDIOSELECTCODE,details:"Save the code"}],MB={name:"",icon:"",type:"MORE",details:"More options"};async function Wwe(n){switch(n){case ce.ROM_LOAD:Bo(".z64,.v64,.rom,.n64",Xwe);break;case ce.ROM_UNLOAD:Tt.clear(),y5(),Xp(),qp(0),l5();break;case ce.ROM_SAVE:ro(!0),setTimeout(()=>{const e=!!lr(z0.writeDecompressed),t=Tt.saveROM(e),r=new Blob([t]);co.exports.saveAs(r,`MyMarioParty${Tt.getGameVersion()}.z64`),ro(!1),Jwe()},0);break;case ce.BOARD_LOAD:Bo(".json",Kwe);break;case ce.BOARD_SAVE:{let e=Vn();e=cU(e);const t=new Blob([JSON.stringify(e)]);co.exports.saveAs(t,e.name+".json")}break;case ce.BOARD_COPY:sC();break;case ce.BOARD_DETAILS:vr(fn.DETAILS);break;case ce.BOARD_EDITOR:vr(fn.EDITOR);break;case ce.SETTINGS:vr(fn.SETTINGS);break;case ce.ABOUT:vr(fn.ABOUT);break;case ce.MODEL_VIEWER:vr(fn.MODELS);break;case ce.SPRITE_VIEWER:vr(fn.SPRITES);break;case ce.EVENTS:vr(fn.EVENTS);break;case ce.BACK_TO_EVENTS:await dve()&&(Vy(null),vr(fn.EVENTS));break;case ce.EVENT_LOAD:Bo(".c,.s",qwe);break;case ce.SAVE_EVENT:uve();break;case ce.STRINGS_EDITOR:vr(fn.STRINGS);break;case ce.PATCHES:vr(fn.PATCHES);break;case ce.DEBUG:vr(fn.DEBUG);break;case ce.AUDIO:vr(fn.AUDIO);break;case ce.SET_BG:Bo("image/*",Ywe);break;case ce.SAVE_ADDITIONALBG:case ce.SAVE_AUDIOSELECTCODE:Twe();break;case ce.ADDITIONALBG_BACK:await BB()&&vr(fn.EDITOR);break;case ce.AUDIOSELECTCODE_BACK:await BB()&&vr(fn.DETAILS);break}}function cU(n={}){if(typeof n!="object")return n;n=JSON.parse(JSON.stringify(n));for(const e in n)!n.hasOwnProperty(e)||(e.charAt(0)==="_"&&delete n[e],typeof n[e]=="object"&&n[e]!==null&&(n[e]=cU(n[e])));return n}function Xwe(n){const e=n.target.files[0];if(!e)return;ro(!0);const t=new FileReader;t.onload=r=>{if(!r.target.result){ro(!1);return}const i=!!lr(z0.uiAllowAllRoms);Tt.setROMBuffer(r.target.result,i,o0).then(o=>{!o||(l5(),w5(),ro(!1),wt("ROM loaded"))},o=>{console.error(o),o0(`Error loading the ROM file.

${o}`)})},t.readAsArrayBuffer(e)}function Kwe(n){const e=n.target.files[0];if(!e)return;const t=new FileReader;t.onload=()=>{let r;try{r=JSON.parse(t.result)}catch{o0("Board could not be parsed.");return}const i=f5(r);qp(i)},t.readAsText(e)}function Ywe(n){const e=n.target.files[0];if(!e)return;const t=new FileReader;t.onload=()=>{S5(t.result)},t.readAsDataURL(e)}function qwe(n){const e=n.target&&n.target.files;if(!!(e&&e[0]))for(let t=0;t<e.length;t++){const r=e[t],i=new FileReader;i.onload=async()=>{try{const a=Qwe(r.name),o=i.result,s=oo(a,o);await GE(s),hr(s)}catch(a){o0("Event file load failed. "+a);return}},i.readAsText(r)}}function Qwe(n){const e=n.toLowerCase();if(e.endsWith(".s"))return En.MIPS;if(e.endsWith(".c"))return En.C;throw new Error(`Only .s or .c file extensions are recongized. (Saw ${n})`)}function Rw(n,e,t){let r;return n!==fn.EDITOR?n===fn.EVENTS?r=jwe:n===fn.CREATEEVENT_ASM||n===fn.CREATEEVENT_C?r=Gwe:n===fn.ADDITIONAL_BGS?r=Hwe:n===fn.AUDIO_SELECTION_CODE?r=zwe:r=lU:t?Ys(e)?r=Nwe:r=Uwe:r=kwe,lr(z0.uiAdvanced)||(r=r.filter(i=>!i.advanced)),r=r.filter(i=>!i.show||i.show()),r}function Jwe(){const n="romSaveNotice",e=()=>{cne(n)};lne(Xe(Q9,{color:wD.Green,onClose:e,children:["Before trying the game, review"," ",L("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/wiki/Emulator-Setup",target:"_blank",rel:"noopener noreferrer",children:"emulator setup instructions"}),".",L(J9,{onClick:e,children:"Got it"})]},n))}let Lw=!1;const Zwe=class extends Ne.exports.Component{constructor(e){super(e),this.actionsEl=null;const t=Rw(e.view,e.board,e.romLoaded);this.state={actions:t,totalActions:t,overflow:[]}}refresh(){const e=Rw(this.props.view,this.props.board,this.props.romLoaded);this.setState({actions:e,totalActions:e,overflow:[]})}render(){const t=this.state.actions.map(i=>i.dropdownFn?L(H4,{action:i,fn:i.dropdownFn},i.type):L(uU,{action:i},i.type));let r;return this.state.overflow.length&&(r=L(H4,{action:MB,overflow:this.state.overflow,fn:rye},MB.type)),Xe("div",{className:"header",role:"toolbar",children:[L($we,{}),Xe("div",{className:"headerActions",ref:i=>{this.actionsEl=i},children:[t,r]})]})}componentDidMount(){Lw=!0,window.addEventListener("resize",this.refresh.bind(this),!1),setTimeout(()=>{window.requestAnimationFrame(this.handleOverflow.bind(this))},0)}componentDidUpdate(){const e=Rw(this.props.view,this.props.board,this.props.romLoaded);lG(this.state.totalActions,e)||this.setState({actions:e,totalActions:e,overflow:[]}),setTimeout(()=>{window.requestAnimationFrame(this.handleOverflow.bind(this))},0)}componentWillUnmount(){Lw=!1,wt("Why did Header unmount?")}handleOverflow(){if(!Lw)return;const e=this.state.actions.slice(),t=this.state.overflow.length,r=this.state.overflow.slice(),i=cs.exports.findDOMNode(this),a=this.actionsEl;if(!!a){for(;a.offsetWidth>i.offsetWidth-215-(t?0:80);){const o=a.children[e.length-(t?2:1)];if(!o)break;o.style.display="none",r.unshift(e.pop())}for(let o=0;o<a.children.length-(t?2:1);o++){const s=a.children[o];s.style.display=""}e.length===this.state.actions.length&&r.length===this.state.overflow.length||this.setState({actions:e,overflow:r})}}},$we=class extends Ne.exports.Component{render(){return L("img",{className:"headerLogo",src:bwe,alt:"PartyPlanner64 Logo"})}},uU=class extends Ne.exports.Component{constructor(){super(...arguments),this.handleClick=()=>{Wwe(this.props.action.type)}}render(){let e;return this.props.action.icon&&(e=L("img",{className:"headerButtonIcon",src:this.props.action.icon,alt:""})),Xe("div",{className:"headerButton",title:this.props.action.details,role:"button",tabIndex:0,onClick:this.handleClick,onKeyDown:od(this.handleClick),children:[e,L("span",{className:"headerButtonText",children:this.props.action.name})]})}},H4=class extends Ne.exports.Component{constructor(){super(...arguments),this.dropdown=null,this.state={opened:!1},this.globalClickHandler=e=>{this.elementIsWithin(e.target)||this.close()},this.onButtonClick=e=>{this.state.opened&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),this.setState({opened:!this.state.opened})},this.onDropdownClick=e=>{e.stopPropagation()},this.close=()=>{this.state.opened&&this.setState({opened:!1})}}addGlobalHandler(){document.addEventListener("click",this.globalClickHandler)}removeGlobalHandler(){document.removeEventListener("click",this.globalClickHandler)}elementIsWithin(e){return this.dropdown?this.dropdown.contains(e):!0}componentDidMount(){this.addGlobalHandler(),window.addEventListener("resize",this.close,!1)}componentWillUnmount(){this.removeGlobalHandler(),window.removeEventListener("resize",this.close)}render(){let e="headerButton",t=null;if(this.state.opened){e+=" headerButtonExpanded";const i=this.props.fn(this.close,this.props);t=L("div",{className:"headerDropdown",onClick:this.onDropdownClick,children:i})}let r;return this.props.action.icon&&(r=L("img",{className:"headerButtonIcon",src:this.props.action.icon,alt:""})),Xe("div",{className:e,tabIndex:0,role:"button","aria-haspopup":"true",title:this.props.action.details,ref:i=>this.dropdown=i,onClick:this.onButtonClick,children:[r,L("span",{className:"headerButtonText",children:this.props.action.name}),L("div",{className:"headerDropdownArrow",children:"\u25BE"}),t]})}};function eye(n){const e=lr(z0.uiSkipValidation),t=Fwe(e);return L(tye,{resultsPromise:t,onClose:n})}const tye=n=>{const{resultsPromise:e,onClose:t}=n,[r,i]=Ne.exports.useState(null);return Ne.exports.useEffect(()=>{e.then(a=>{i(a)},a=>{t(),console.error(a),o0(`An error occurred during board validation, please submit an issue.

`+a.toString())})},[e,t]),r?L(ta,{children:r.map(function(a,o){return L(nye,{name:a.name,errors:a.errors,warnings:a.warnings,unavailable:a.unavailable,forcedDisabled:a.forcedDisabled,closeCallback:t,boardIndex:o-1},o)})}):L(aye,{})},nye=class extends Ne.exports.Component{constructor(){super(...arguments),this.boardClicked=async e=>{if(!!this.props.name){if(e.target&&e.target.tagName.toUpperCase()==="A"){e.stopPropagation();return}if(!this.hasErrors()&&!this.props.unavailable&&!this.props.forcedDisabled){this.props.closeCallback();const t=UA({writeBranding:lr(z0.writeBranding)});if(!t)return;ro(!0);const r=Vn();try{await t.overwriteBoard(this.props.boardIndex,r)}catch(a){console.error(a),o0(`Error overwriting the board.

`+a);return}wt("Board overwritten"),y5(),w5();let i=Cne(r);i<0&&(i=0),qp(i),qve("board_write",{event_category:"action",event_label:r.name}),ro(!1)}}}}hasErrors(){return!!this.props.errors.length}hasWarnings(){return!!this.props.warnings.length}render(){let e="overwriteEntry",t="";this.props.name&&(e+=" overwriteBoardEntry",t=`Overwrite ${this.props.name} with the current board.`);let r=[];return this.props.unavailable?(e+=" unavailable",r.push(L("div",{className:"overwriteBoardMessage",children:"Board cannot be overwritten currently."},"unavailable"))):(this.props.forcedDisabled&&(e+=" unavailable",r.push(L("div",{className:"overwriteBoardMessage",children:"Current issues must be resolved."},"unavailable"))),this.hasErrors()&&(e+=" failed",r=r.concat(this.props.errors.map((i,a)=>Xe("div",{className:"overwriteBoardMessage",children:[L("img",{src:Iwe,alt:"",className:"overwriteBoardIssueIcon"}),L("span",{dangerouslySetInnerHTML:{__html:i}})]},a+"e")))),this.hasWarnings()&&(r=r.concat(this.props.warnings.map((i,a)=>Xe("div",{className:"overwriteBoardMessage",children:[L("img",{src:Mwe,alt:"",className:"overwriteBoardIssueIcon"}),L("span",{dangerouslySetInnerHTML:{__html:i}})]},a+"w"))))),r.length?(t="Issues with the current board.",Xe("div",{className:e,onClick:this.boardClicked,title:t,children:[this.props.name&&Xe(ta,{children:[L("span",{className:"overwriteBoardName",children:this.props.name}),L("br",{})]}),r]})):this.props.name?L("div",{className:e,onClick:this.boardClicked,title:t,children:L("span",{className:"overwriteBoardName",children:this.props.name})}):null}};function rye(n,e){const t=e.overflow;return t.length?t.map(r=>r.dropdownFn?L(H4,{action:r,fn:r.dropdownFn},r.type):L(uU,{action:r},r.type)):null}function RD(n){function e(t,r,i){n();const a=f5(null,{game:t,type:r});qp(a)}return L(Xve,{onAccept:e})}function LD(n){function e(t,r){if(nc)r.then(i=>{co.exports.saveAs(i,"BoardScreenshot.png")});else{const i=window.open();if(i){const a=i.document;a&&(a.write(""),a.close(),a.body.appendChild(a.createElement("img")).src=t)}}n()}return L(qoe,{onAccept:e})}function iye(n){function e(t){switch(n(),t){case En.MIPS:vr(fn.CREATEEVENT_ASM);break;case En.C:vr(fn.CREATEEVENT_C);break;default:throw new Error(`Unrecognized event code language ${t}`)}}return L(mve,{onAccept:e})}const aye=()=>L("div",{className:"pendingDropdownBox",children:L("img",{className:"pendingDropdownImage",src:Owe,alt:"Loading"})});class Zg extends Ne.exports.Component{constructor(){super(...arguments),this.state={left:-1e3,top:-1e3,manuallyPlaced:!1},this.mouseDown=e=>{bu=this,[a_,o_]=[e.clientX,e.clientY];const t=this.getContainerEl();t.addEventListener("mousemove",dU),t.addEventListener("mouseup",s_),t.addEventListener("mouseleave",s_),t.classList.add("moving")},this.onWindowResize=()=>{this.updatePositionState()}}render(){if(!this.props.visible)return null;const e={left:this.state.left,top:this.state.top};return Xe("div",{className:"toolWindow",style:e,children:[Xe("div",{className:"toolWindowName",onMouseDown:this.mouseDown,children:[this.props.name,this.props.canClose&&L("div",{className:"toolWindowCloseBtn","aria-label":"Close",onClick:this.props.onCloseClick,children:"\xD7"})]}),this.props.children]})}componentDidMount(){this.props.visible&&this.updatePositionState(),window.addEventListener("resize",this.onWindowResize),this.attachMutationObserver()}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize),this.detachMutationObserver()}componentDidUpdate(){this.props.visible&&this.updatePositionState(),this.detachMutationObserver(),this.attachMutationObserver()}shouldComponentUpdate(e,t){return!this.tryUpdatePosition(t)}attachMutationObserver(){const e=cs.exports.findDOMNode(this);if(e&&"MutationObserver"in window){const t=new MutationObserver(i=>{this.updatePositionState()}),r={childList:!0,subtree:!0};t.observe(e,r),wg[this.props.name]=t}}detachMutationObserver(){wg[this.props.name]&&(wg[this.props.name].disconnect(),delete wg[this.props.name])}tryUpdatePosition(e){const t=this.state.left!==e.left||this.state.top!==e.top;return t&&this.updatePosition(e),t}updatePosition(e){e=e||this.state;const t=cs.exports.findDOMNode(this);t&&(t.style.left=e.left+"px",t.style.top=e.top+"px")}tryUpdatePositionState(e){const t=this.state.left!==e.left||this.state.top!==e.top;return t&&this.setState(e),t}updatePositionState(){if(this.state.manuallyPlaced){const e=AU(this,{left:this.state.left,top:this.state.top});this.tryUpdatePositionState(e)}else{const e={},t=this.props.position;t.indexOf("Left")!==-1&&(e.left=0),t.indexOf("Right")!==-1&&(e.left=this.getContainerWidth()-this.getWidth()),t.indexOf("Top")!==-1&&(e.top=0),t.indexOf("Bottom")!==-1&&(e.top=this.getContainerHeight()-this.getHeight()),this.tryUpdatePositionState(e)}}getWidth(){const e=cs.exports.findDOMNode(this);return e&&e.offsetWidth||0}getHeight(){const e=cs.exports.findDOMNode(this);return e&&e.offsetHeight||0}getContainerWidth(){const e=document.getElementsByClassName("main")[0];return e&&e.offsetWidth||0}getContainerHeight(){const e=document.getElementsByClassName("main")[0];return e&&e.offsetHeight||0}getContainerEl(){const e=cs.exports.findDOMNode(this);return e&&e.offsetParent||null}}let a_=null,o_=null,bu=null;const wg={};function dU(n){const[e,t]=[n.clientX,n.clientY],[r,i]=[e-a_,t-o_];let a={left:bu.state.left+r,top:bu.state.top+i,manuallyPlaced:!0};a=AU(bu,a),bu.setState(a),[a_,o_]=[e,t]}function s_(n){const e=bu.getContainerEl();n.type==="mouseleave"&&n.target!==e||(e.removeEventListener("mousemove",dU),e.removeEventListener("mouseup",s_),e.removeEventListener("mouseleave",s_),e.classList.remove("moving"),bu=null,a_=o_=null)}function AU(n,e){if(e.left<0)e.left=0;else{const t=n.getContainerWidth()-n.getWidth();e.left>t&&(e.left=t)}if(e.top<0)e.top=0;else{const t=n.getContainerHeight()-n.getHeight();e.top>t&&(e.top=t)}return e}const R2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wUCFjEB5KSrRwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADdElEQVRYw+2Yz0s6eRjHnzEv1V7ay3bwL4huC0F0KLqVl4K6hRCk/SSioHGyH0iDSDEpRIfC6CJUf0C36LB1MaSoS3VK9DZNG2HOOI7jew+LkqvzbXT3my74hgdmPj9fn8d5Pp/nI1FDdS6Hw4HR0VHUNSTHcUgmk3h+fsbExER9wnq9XqiqirxEUcTCwkJ9wW5tbUHXdfxTyWQSHo+nPmB3d3eRy+VgJE3TwPN8bWFDoRDMKhAI1Ab24OAAHx8fBctmsyVwqqoWtfk3sEy1Hfv7+//MP1sslrbJyUkaGRkpanN4eEjHx8cagI982cXFxa81/QwCgUCJR91u93/2c1v+LwdJA/RbQV0uF3p7e6M/G2JgYAAOhwNVgS4vL4PneWpra/vdzGSappGiKEWm67opUJvNRjzP08zMTGXB5/V6kU6noaoqhoaGUIlnPpvZfk6nE7qu4/X1FUtLS+b6bW9vF87tSkGrVR4UAGRZxtraWsmc1s8ve3t7mJ6eJoZh8hs52e12stlsZWElSaKTkxNTh8b4+DhaW1vL1vX09BSem5ubaX19nVpaWsBxXOnYR0dHZc9oXdcN7fr62rS3Y7GY4ThGSU0wGCwe//T0FNUoGo2aBo3H41XNsb+/j0LUi6JIQP0l5JqmkSiKxYV+vx+ZTKZkRYqiQJblsnZ5eWl6dY+Pj4bjpNPpskn3ysoKSoLJ7XYzqVQKLMtS/qPPZDIkCAJdXV2VnVyW5T/Mgs7NzZHVai1bNzg4SLOzs2Sx/L2tv7y8kM/no2AwaByoi4uLkCSpZttTLBaD0+n88fZERLSzs8PIsgyO46i9vd30ZN3d3f6Ojg72c1k0Gv3t7u5ONDvGw8MD+Xw+CofD5vPksbEx3N7emvaoIAjIZrNFxrIszHo0EolgeHjYsL3VqCIcDjNvb29IJBK/mMpuLBZqamoqvj4w5hxzf3+/6PF4ds7Pz5mKQYmIzs7OmO/YhiKRSICIAo3EuQFa6Tf6VaR+DprOzs6SNl1dXUXtAFAoFGK+dYWCIEDTtEIGVE65XK5Qr6oqNjc3a5NQ+P1+aJr2ZQaUSqWwurpa26xnY2MDiqIYQkqSZP568bPFsize399LIBOJBKampuorf5yfn4coigXIp6enL6/ANZPL5UI8HsfNzU39/49vt9vR19f3SA3Vuf4CRa8N5ZfnXoAAAAAASUVORK5CYII=",L2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wUCFjgyirZxGAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADeklEQVRYw+2YTWgcZRjHf89kJ7ubJZWNtNUWbA62YHNxhbZg4hJTd9e2WALFqBQPhXiY0YMml3qxAcGqtBYPuytKUUGQ6KkgIbtpK2JaRbD2UL96CT0Y+2Gs0qabTXbm8bCbmi/Z3SSzLbj/y8C88z7zm+d9Pt53oK666vp/Sap5WLP2OgxpRLUTmJFYavCuA9WM1QskgC6gpThTPpN46pm7BlSz1mHgIIoLGPNmK8clke6946CasZKAXcbKMYmn+7wENcpAvlMWEkB5RbPWwB0B1RF7O0KiinU5pFmrr/YeVTpQtlaWabevRzVr99YMVL98yQe6vypLt2H1Ax2xe2rjUUdNoGnZVl0d1BF7l+eg8kQyB9K/IsuuDmnGeszzGJV4agjh2RXaP6Un7Yc9L08STw9iyAtlK67fj+M4EAxCKASGAaYJoZBJg/m1jvZvrlFnsvtAj85Lmln5fIyPjXF6aIh7wmH8gQCTN2/S6PcTbmnBcQpcu3zl2n0bN0Ta3/z1N+97fdYeQPXQogHTZHR4mF8uXKSxsRSeTvF7DAPyU7Ct/REi0eglDI1I9N3rq770C2J2AJFjiwYKBW5NTiJzPtloKEIWCtCx81Ei0ShM5zeRmz6jZ14Oegpagu1DOD5vHYJBQs3NmOachHfBcSAa62Trjh2Qz8+GzENM5r/SG28bnoKWEqwX5fO5sDP5PKr/LjsKXbvjbI5EYGpqoYltnB076TkogCTSPSjDAORy/DkxgesUvWg0QGzvHlrb2paCnPXs45q1TngOWoLdhTCKaeIPBFAF0zR4srubjVu2LA05X3s1Y33iOSgA94a6aAqeN00fwSaT3fv2sa61tRLIomeF/Zq1Uqt+ZlpKPx9pb/7+m2/PPdXT8+Ca9euLiVN9kXxL4umDnoICuF8cWCuhNeeZmd6wqCFU7C55XeKp1zwFBdBTL26i4P4AhJfZei7/8ffUA2uf/nBm9WN07nt2Ji9hSAeQW6aJHwsF1/EmmRbCxlI/IXQC7jJmv3f/cx+7NQEtNYTvMCRWRVAp8Clw1rvy9N+ePQ3SXWEW3AKyEk+N1xy0tC84gSHPlz1lCYclkf7I8zpawfbQRjW54PYNYAxISiL9fk0KfoWwr6L6BjCBMA4cAbkg8dQ5T/7mrQg2Y23HZ/x+/a/c1fCetmkJ9Ct11VVX7fUP4forz+3Bw0wAAAAASUVORK5CYII=",B2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AEJETYS/bn+YgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFD0lEQVRYw+2WaWxUZRSGn3NnpstMGUrLtDOVlpYCZYkQCLJITMUlBBRFI/wRNKAWNCQoi6hRoRGRuATRiFIV3EgUohAkKFYRCGBIQBRQEQ2VSstS6OJMmXbmznf8UVQoBRFlBhPen/d+J/c57znnng8u67L+59Ivi526bpwn0RxyLkDCRcVYci1Keyw+kOGLt1xSoLq4xEVnxoE1A6Qbog5U12O0VEaWbU4EqNXm0zwZCjIdkV4ILhALkeuw5HH9pGTIJQGqXxY7EYaCdGtlvoXIjYg8oetKBiXe0Q0bDWg1cPyMJBQLkeGoPKFr77sq8T36zjgPWe7JiDUDxA9gVKmrrcUYA4Kxo9GPg3U1c4oe2vpNYqd++Zg02mfej8oMhKxgMMiWL9bTUF8PCh2zs2KFRUUr8wsLSmX4a3sSM0yAjF0RIsl6FXQB6DFVpSncRLjxBGleL91693bkdSkYjfKYrrmnZ8JAAWTYohBNkVcwZkE0atfGbJuc3Fz6DxlEbuc8LBEnyB04XY/p6pIeCSn9aW2weWK7A99VPXio8uC0rj17pmf6fK0CNYIx72PM03LTG/sSBgqwc0Hf9LzsomkZmRlTQbyt3/9UbUWXbEjZvPDT9vvDtqsDGqvBtndi7E2E5v4QN1CAho/GZ3pT3TNBpmCJB8COKWWfu1m6JcDXR4vUpHQSnGkQa4RwleFE5R6ajiylgUVQGokLKICuneDD4XoYte5X8Dy32sNT6/oQcg8FTz6I45TDBk5UQt22MMEf5lPPPCi1//NhajOzkUtrcMSeBxav2Z7U9OL67hpqdx2kFZ4OeXKZ4cmHjsWpuAun0l5vuyhTf1bYG948smOfY+HcVd5dh+gnpHY6d0CKH9KvzMCRPAamX9CV0XmhGQ54OF3Em+2lU5fzC3AXgCtzIGmRXELsjYujALicAXV6/TjTzu+8ww2udpk4rEDcSt8SaaIQi0LsPKfQgMZsYkTiC2rbB4kG9xOpO8/zDaRSX5tsRarjC9r4zFHsui8I7m1x65xuKgT3MnZAderx94710Av4LV44KCjN9nIadm/lt90tMGeF/J5+6duYdH2j35PMo6ybPOyfwjr+1V6LbjqCa3AtkZquqJ2D0wuW6+QeMWCHoGEnvVM28sjIKkb0jwhKHmgud161v3TZ9sqLtpnaVLvZg3E47iYlMJIUnw+HO0VijRFf8mFrVO8DrvHXNFLcyz7VZQUtR3WOjCj7Kn6gAMxOwhMrwindEfF7nFpXNrmhz+2DouNTksg5ldG0tIkirG22m2Z7bn57RxxB22jP1SVukpkM1kwQv6py5PBhKisqUFUsh8OIMSs7ZGfN6fpA+Z6LNUx/X65byk4Qtl8nxkJUjwEcP1rDj7v2sPfbXVT/8qvVwZd1a0Fh4SNafm/3hIECyOglQQguQs1LKlIXMzFQJaOjj74DB1DQtdBpwRiMY5aWT+iSMNCWG9ey32hqfhn05UhzJOjz++k3eCB5XQqwRABJArkTkzRL10zsHPceba365WMy9v9cMSsQuGJKdk6O+8yPaxjVJTRF58noJdVxd/QPpY9dURvo1OEFf8D/hqDNbfiWCjKOVNfVCSn9qQrcVX6UKM+ivIWq3WqLKXAQo1UJBwWQUYurUJ2P8O6fsC1LoBE1HxKs253QHj2jIz+b1A0jTwI3g1YAq1B9XUaUHbqkQAH0k0n5GNMTsQ8QClXI2BVhLuuy/tLvf98EyDtglo8AAAAASUVORK5CYII=",fU="data:image/png;base64,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",M2="data:image/png;base64,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",I2=""+new URL("telescope.2e141eb5.png",import.meta.url).href,BD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoGAxcR2D7sYgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEPElEQVRYw82Z32tbdRjGP+ckTZo5O8VGqwlp1Wk3q0Wm0tE1otPhjbvZemE3vBQRQYeI07+g9Ebj8MYLb4RRL+a88GLIUArVaS9UjFgcsq2LCVTbbjZ17RqXxos8p357mqSJOUvyQMhJzvecPHl/PO/7fY9FfbCAHUAf0A3cBdyic9eAP4AMkAJmgZV6fqhWBIAYsCwiEeAAcA9gV7juBjANfKFra4KvRoJDwIvAg8B1YE7vPiAMBMtcmwf+BH4ArgK3AVFgSec8s2gv8ILxuSBXnhWB7fpxW+ece/uBkF5XgDSwBjwMPKGw+QQ4Xy9RP3AQ6Hd9/zNwAVit0YNLIv2sPOCEShL4XOFRM9EQ8LL+tYPzwC/AP3UmYZsSsNf4bhH4sFzCWRVIviGLOvgSmMdbdALPuBLu3VJkfWUS7CXFHcDfwBkgi/dYVghFlaw2sBv43oj1skS7lBghaeFZD1zNFrI1A9wpS15R7C9Ucr1frw7gAWVpiMbAMUZWBloxrepzBfiAFi1K726ncfBJ6pbEpUthV3ATHTK0bV6B3mjcqtzoBx5TAfkdQ8cCwNNy+S6XJDUaIeBxleQD4rZOdJex8Nf/2QN4hbz02jK5OUT3Gwsv0nyYHPY7REOGqxfUZDQb1w152gGEbGWXgxlaByaXLlu9pYO5FiJqconZanzNktYqcLisAXf7gW0SWatSm9UE3FCcLgM5C7hXwh8Q+1bCikpr3pIlLSnA/U3WUFy7iN8cCbWUTBaQ0w7S3yJE8/JwEFjzA3vUDy4D51rI7QHgORnxkh+4Gh/s+ayeO06em9l9E4huV5MCsGDFB3sKyeTlsquHBoprv55aKrumv7/7ZpDdqQ4K4GN7q9X7BjrYN9DRDNf3GMezFRMnFgkQiwbXj1OZXKNItgN3GLvTlYpERw6HOTocBiCVXmXsRKZRRO8zjr9ii1lRs9AGPOLqj0sTjUUCHH8twhFZE+DIcJiRQ52NsqZTISek71jxwZ5C385rvH0sSnc0WPNdRxNpzkz4vcr6v5TtvYrRhEPUBhg/Pc/BkWlOnqq+y5v8LsvzI9Nexm1WO9+fNEv4yCGJWS5TmRyvvnWRVHqVd45FK97x5Kk5xt5Pe6kCtiy5jeKUMO1ukDZlvWOhcmRHE2mvs79d+6I2WTQJTFFiMtJMuIdknXJ9oZTJN5XMob3lK1EsGiQWCXghQY+6SC4C71Fm7GiXKplxg+hoIs1oIv3fH9lbV0ltBx4CDrFxNpoEPqDCwwh/tQkz/ukcx1+PcnQ4vF5WS9wrz8bReE7ZnFNT/mSJKUxVo/FNRFPpVV558wLjpzfObE1VKIPDrs9rFJ+aTAKXgMsaLPSp15wAvjUlqGqisUiAb6ayFWVn7ESm2Kxs3aTYFOf0e2TVWeBHio9wUtUSxHAP8cGeQp2N81Padpd6IDYjcoulsrla/AsaEynP92lgNQAAAABJRU5ErkJggg==",oye="data:image/png;base64,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";const sye=[{name:"Move spaces",icon:R2,type:ce.MOVE},{name:"Connect spaces",icon:L2,type:ce.LINE},{name:"Connect multiple spaces in one click",icon:B2,type:ce.LINE_STICKY},{name:"Erase spaces and lines",icon:M2,type:ce.ERASE},{name:"Telescope tool: move your cursor over the map to visualize how it will look during gameplay",icon:I2,type:ce.TELESCOPE},{spacer:!0},{name:"Add blue space",icon:tm,type:ce.ADD_BLUE,draggable:!0},{name:"Add red space",icon:nm,type:ce.ADD_RED,draggable:!0},{name:"Add happening space",icon:rm,type:ce.ADD_HAPPENING,draggable:!0},{name:"Add chance time space",icon:dV,type:ce.ADD_CHANCE,draggable:!0},{name:"Add Bowser space",icon:im,type:ce.ADD_BOWSER,draggable:!0},{name:"Add Mini-Game space",icon:pV,type:ce.ADD_MINIGAME,draggable:!0},{name:"Add shroom space",icon:mV,type:ce.ADD_SHROOM,draggable:!0},{name:"Add invisible space",icon:fl,type:ce.ADD_OTHER,draggable:!0},{name:"Add star space (decoration)",icon:rd,type:ce.ADD_STAR,draggable:!0,advanced:!0},{name:"Add start space",icon:id,type:ce.ADD_START,draggable:!0,advanced:!0},{spacer:!0},{name:"Add Toad",icon:sm,type:ce.ADD_TOAD_CHARACTER,draggable:!0},{name:"Add Boo",icon:ad,type:ce.ADD_BOO_CHARACTER,draggable:!0},{name:"Add Bowser",icon:bV,type:ce.ADD_BOWSER_CHARACTER,draggable:!0},{name:"Add Koopa Troopa",icon:PV,type:ce.ADD_KOOPA_CHARACTER,draggable:!0},{name:"Mark space as hosting star",icon:BD,type:ce.MARK_STAR}],lye=[{name:"Move spaces",icon:R2,type:ce.MOVE},{name:"Connect spaces",icon:L2,type:ce.LINE},{name:"Connect multiple spaces in one click",icon:B2,type:ce.LINE_STICKY},{name:"Erase spaces and lines",icon:M2,type:ce.ERASE},{name:"Rotate arrow spaces",icon:fU,type:ce.ROTATE},{name:"Telescope tool: move your cursor over the map to visualize how it will look during gameplay",icon:I2,type:ce.TELESCOPE},{spacer:!0},{name:"Add blue space",icon:tm,type:ce.ADD_BLUE,draggable:!0},{name:"Add red space",icon:nm,type:ce.ADD_RED,draggable:!0},{name:"Add happening space",icon:rm,type:ce.ADD_HAPPENING,draggable:!0},{name:"Add chance time space",icon:AV,type:ce.ADD_CHANCE,draggable:!0},{name:"Add Bowser space",icon:im,type:ce.ADD_BOWSER,draggable:!0},{name:"Add item space",icon:gV,type:ce.ADD_ITEM,draggable:!0},{name:"Add battle space",icon:xV,type:ce.ADD_BATTLE,draggable:!0},{name:"Add bank space",icon:wV,type:ce.ADD_BANK,draggable:!0},{name:"Add invisible space",icon:fl,type:ce.ADD_OTHER,draggable:!0},{name:"Add star space (decoration)",icon:rd,type:ce.ADD_STAR,draggable:!0,advanced:!0},{name:"Add black star space (decoration)",icon:SV,type:ce.ADD_BLACKSTAR,draggable:!0,advanced:!0},{name:"Add start space",icon:id,type:ce.ADD_START,draggable:!0,advanced:!0},{name:"Add arrow space",icon:am,type:ce.ADD_ARROW,draggable:!0},{spacer:!0},{name:"Add Toad",icon:sm,type:ce.ADD_TOAD_CHARACTER,draggable:!0},{name:"Add Boo",icon:ad,type:ce.ADD_BOO_CHARACTER,draggable:!0},{name:"Add bank",icon:VV,type:ce.ADD_BANK_SUBTYPE,draggable:!0},{name:"Add bank coin stack",icon:om,type:ce.ADD_BANKCOIN_SUBTYPE,draggable:!0},{name:"Add item shop",icon:FV,type:ce.ADD_ITEMSHOP_SUBTYPE,draggable:!0},{name:"Mark space as hosting star",icon:BD,type:ce.MARK_STAR}],cye=[{name:"Move spaces",icon:R2,type:ce.MOVE},{name:"Connect spaces",icon:L2,type:ce.LINE},{name:"Connect multiple spaces in one click",icon:B2,type:ce.LINE_STICKY},{name:"Erase spaces and lines",icon:M2,type:ce.ERASE},{name:"Rotate arrow spaces",icon:fU,type:ce.ROTATE},{name:"Telescope tool: move your cursor over the map to visualize how it will look during gameplay",icon:I2,type:ce.TELESCOPE},{spacer:!0},{name:"Add blue space",icon:lV,type:ce.ADD_BLUE,draggable:!0},{name:"Add red space",icon:cV,type:ce.ADD_RED,draggable:!0},{name:"Add happening space",icon:uV,type:ce.ADD_HAPPENING,draggable:!0},{name:"Add chance time space",icon:fV,type:ce.ADD_CHANCE,draggable:!0},{name:"Add Bowser space",icon:hV,type:ce.ADD_BOWSER,draggable:!0},{name:"Add item space",icon:_V,type:ce.ADD_ITEM,draggable:!0},{name:"Add battle space",icon:vV,type:ce.ADD_BATTLE,draggable:!0},{name:"Add bank space",icon:yV,type:ce.ADD_BANK,draggable:!0},{name:"Add Game Guy space",icon:EV,type:ce.ADD_GAMEGUY,draggable:!0},{name:"Add invisible space",icon:fl,type:ce.ADD_OTHER,draggable:!0},{name:"Add star space (decoration)",icon:rd,type:ce.ADD_STAR,draggable:!0,advanced:!0},{name:"Add start space",icon:id,type:ce.ADD_START,draggable:!0,advanced:!0},{name:"Add arrow space",icon:am,type:ce.ADD_ARROW,draggable:!0},{spacer:!0},{name:"Add Millennium Star",icon:TV,type:ce.ADD_TOAD_CHARACTER,draggable:!0},{name:"Add Boo",icon:ad,type:ce.ADD_BOO_CHARACTER,draggable:!0},{name:"Add bank",icon:CV,type:ce.ADD_BANK_SUBTYPE,draggable:!0},{name:"Add bank coin stack",icon:om,type:ce.ADD_BANKCOIN_SUBTYPE,draggable:!0},{name:"Add item shop",icon:DV,type:ce.ADD_ITEMSHOP_SUBTYPE,draggable:!0},{name:"Mark space as hosting star",icon:BD,type:ce.MARK_STAR},{name:"Mark space as Skeleton Key gate",icon:oye,type:ce.MARK_GATE}],uye=[{name:"Move spaces",icon:R2,type:ce.MOVE},{name:"Connect spaces",icon:L2,type:ce.LINE},{name:"Connect multiple spaces in one click",icon:B2,type:ce.LINE_STICKY},{name:"Erase spaces and lines",icon:M2,type:ce.ERASE},{name:"Telescope tool: move your cursor over the map to visualize how it will look during gameplay",icon:I2,type:ce.TELESCOPE},{spacer:!0},{name:"Add basic space",icon:LV,type:ce.ADD_DUEL_BASIC,draggable:!0},{name:"Add Mini-Game space",icon:BV,type:ce.ADD_MINIGAME,draggable:!0},{name:"Add reverse space",icon:MV,type:ce.ADD_DUEL_REVERSE,draggable:!0},{name:"Add happening space",icon:IV,type:ce.ADD_HAPPENING,draggable:!0},{name:"Add Game Guy space",icon:OV,type:ce.ADD_GAMEGUY,draggable:!0},{name:"Add power-up space",icon:kV,type:ce.ADD_DUEL_POWERUP,draggable:!0},{name:"Add invisible space",icon:fl,type:ce.ADD_OTHER,draggable:!0},{name:"Add blue start space",icon:NV,type:ce.ADD_DUEL_START_BLUE,draggable:!0,advanced:!0},{name:"Add red start space",icon:UV,type:ce.ADD_DUEL_START_RED,draggable:!0,advanced:!0}];function dye(n){return"spacer"in n&&n.spacer}function Aye(n,e){let t;switch(n){case 1:t=sye;break;case 2:t=lye;break;case 3:e===zn.DUEL?t=uye:t=cye;break;default:throw new Error(`Unknown game version found by Toolbar (${n})`)}return lr(z0.uiAdvanced)||(t=t.filter(r=>!r.advanced)),t}function fye(n){nC(n)}class hye extends Ne.exports.Component{constructor(){super(...arguments),this.state={}}render(){if(Bc())return L("div",{className:"toolbarReadonly",children:"Board is readonly."});let e=0;const r=Aye(this.props.gameVersion,this.props.boardType).map(i=>{if(dye(i))return L(mye,{},"spacer"+e++);const a=this.props.currentAction===i.type;return L(pye,{current:a,action:i},i.type)});return L("div",{className:"toolbar",role:"toolbar",children:r})}}class pye extends Ne.exports.Component{constructor(){super(...arguments),this.handleClick=()=>{fye(this.props.action.type)},this.onDragStart=e=>{!this.props.action.draggable||e.dataTransfer.setData("text",JSON.stringify({action:this.props.action}))}}render(){let e="toolbarButton";return this.props.current&&(e+=" selected"),L("div",{className:e,title:this.props.action.name,role:"button",tabIndex:0,onClick:this.handleClick,onKeyDown:od(this.handleClick),draggable:this.props.action.draggable,onDragStart:this.onDragStart,children:L("img",{className:"toolbarIcon",src:this.props.action.icon,alt:""})})}}const mye=class extends Ne.exports.Component{render(){return L("div",{className:"toolbarSpacer",role:"separator"})}},Sye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AEZBAIzQA4rzwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAtElEQVQoz42RsQ6CMBBAX02TziRMJs5u/IAf4ODIf7iyMbjxMYwM/ga/4ErCTII5B6wcJxre0vTae3fXOoCQFjL4HIAw1gxd5XRMxzHs+MHQVS6M9bz3OSEtZLNgTRLJEmSTQBNFWYKcD7PEf1X1OSFF4rzTeyDXfbW4d7tA2SDeVljj+JyTT9m0lg20Pc7ptiL3x7S2PU7P/a66OFsVaJGV6P3iDWJrVqCxyZ8O7Nf8S7C8APRySvghpgzSAAAAAElFTkSuQmCC",gye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AEZAzg2EIIXvAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAhklEQVQoz2NkQALsIuX/f7IEI/h/1jIwMDAwoIv9fNPJCOMzMVAIqGcAuvNxgZ8swQzsIuX/qeYCFpRAhAYa3DZoYLGLMPzHZQAjAwMDg54gRIG7LEJi52MGhkvvEfLocgwMEHkWdEliAJL6/ywMDAwM1nqYimC2wAAuNSheQAYw58MALjUAddwsIs4hVlkAAAAASUVORK5CYII=",_ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AYht+miiIVByuIOASpThZERcRJq1CECqFWaNXB5NI/aNKQpLg4Cq4FB38Wqw4uzro6uAqC4A+Ii6uToouU+F1SaBHjHcc9vPe9L3ffAUKtxDSrbQzQdNtMxmNiOrMqdrwihD6aMxiSmWXMSVICvuPrHgG+30V5ln/dn6NbzVoMCIjEs8wwbeIN4qlN2+C8TxxmBVklPiceNemCxI9cVzx+45x3WeCZYTOVnCcOE4v5FlZamBVMjXiSOKJqOuULaY9VzluctVKFNe7JXxjK6ivLXKc1iDgWsQQJIhRUUEQJNqK066RYSNJ5zMc/4PolcinkKoKRYwFlaJBdP/gf/O6tlZsY95JCMaD9xXE+hoGOXaBedZzvY8epnwDBZ+BKb/rLNWD6k/RqU4scAT3bwMV1U1P2gMsdoP/JkE3ZlYK0hFwOeD+jb8oAvbdA15rXt8Y5Th+AFPUqcQMcHAIjecpe93l3Z2vf/q1p9O8H1Ihyzj5/J3QAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfjDBUXAR2dR2FNAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAFFJREFUKM/FksEKwDAIQ/P8/3/OLov0sI5uPVQQgxBMVGxrJ0qbgSTbRpKAlpPekoIQQ1ol97DkvY9pfcL1w3JjwPXF83ix4Hojj0udSjr+BxdRVz7lI5zTZAAAAABJRU5ErkJggg==",xye="data:image/png;base64,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",vye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AYht+miiIVByuIOASpThZERcRJq1CECqFWaNXB5NI/aNKQpLg4Cq4FB38Wqw4uzro6uAqC4A+Ii6uToouU+F1SaBHjHcc9vPe9L3ffAUKtxDSrbQzQdNtMxmNiOrMqdrwihD6aMxiSmWXMSVICvuPrHgG+30V5ln/dn6NbzVoMCIjEs8wwbeIN4qlN2+C8TxxmBVklPiceNemCxI9cVzx+45x3WeCZYTOVnCcOE4v5FlZamBVMjXiSOKJqOuULaY9VzluctVKFNe7JXxjK6ivLXKc1iDgWsQQJIhRUUEQJNqK066RYSNJ5zMc/4PolcinkKoKRYwFlaJBdP/gf/O6tlZsY95JCMaD9xXE+hoGOXaBedZzvY8epnwDBZ+BKb/rLNWD6k/RqU4scAT3bwMV1U1P2gMsdoP/JkE3ZlYK0hFwOeD+jb8oAvbdA15rXt8Y5Th+AFPUqcQMcHAIjecpe93l3Z2vf/q1p9O8H1Ihyzj5/J3QAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfjDBUWGyKaztycAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAIRJREFUKM9jYBhowMjAwPAfSqOAHxYM/7Fp4DiBqhZmAAOyIbg0YzOMBYkPd8kWF4RgsAqEs/bOHjibMWEP3DImdFPX1DD8hymE0ejg/wKX//8XuPxHNwAjHNbe2YPiEmQ+zCCMQFxTA/E/uu3omhkYGBhCWhgYGXEFEMyJOKMPKRwoAgAIjCtnT63FJQAAAABJRU5ErkJggg==",wye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AYht+miiIVByuIOASpThZERcRJq1CECqFWaNXB5NI/aNKQpLg4Cq4FB38Wqw4uzro6uAqC4A+Ii6uToouU+F1SaBHjHcc9vPe9L3ffAUKtxDSrbQzQdNtMxmNiOrMqdrwihD6aMxiSmWXMSVICvuPrHgG+30V5ln/dn6NbzVoMCIjEs8wwbeIN4qlN2+C8TxxmBVklPiceNemCxI9cVzx+45x3WeCZYTOVnCcOE4v5FlZamBVMjXiSOKJqOuULaY9VzluctVKFNe7JXxjK6ivLXKc1iDgWsQQJIhRUUEQJNqK066RYSNJ5zMc/4PolcinkKoKRYwFlaJBdP/gf/O6tlZsY95JCMaD9xXE+hoGOXaBedZzvY8epnwDBZ+BKb/rLNWD6k/RqU4scAT3bwMV1U1P2gMsdoP/JkE3ZlYK0hFwOeD+jb8oAvbdA15rXt8Y5Th+AFPUqcQMcHAIjecpe93l3Z2vf/q1p9O8H1Ihyzj5/J3QAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfjDBUWCSub5hTrAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAGJJREFUKM9jZMABHMwn/YexD5zMY8SljgWXxn3Hc+BiTpYM/3EZxEhIM8KQKVhdw4SucN/xHAYnyylwDTA2NkOxegHZBfg04nQBqWDgDUAJgwMn8xhhUYYajVMYiIpGchISAIKHK/w7Gd2gAAAAAElFTkSuQmCC";class MD extends Ne.exports.Component{constructor(){super(...arguments),this.onDelete=(e,t)=>{this.props.onEventMouseLeave&&this.state.hoveredEvent===e&&(this.setState({hoveredEvent:null}),this.props.onEventMouseLeave(e,t)),this.props.onEventDeleted(e,t)},this.onMouseEnter=(e,t)=>{this.setState({hoveredEvent:e}),this.props.onEventMouseEnter&&this.props.onEventMouseEnter(e,t)},this.onMouseLeave=(e,t)=>{this.setState({hoveredEvent:null}),this.props.onEventMouseLeave&&this.props.onEventMouseLeave(e,t)}}render(){const e=this.props.events||[];let t=0;const r=e.map((i,a)=>L(yye,{event:i,eventIndex:a,board:this.props.board,onEventDeleted:this.onDelete,onEventActivationTypeToggle:this.props.onEventActivationTypeToggle,onEventParameterSet:this.props.onEventParameterSet,onEventMouseEnter:this.onMouseEnter,onEventMouseLeave:this.onMouseLeave},`${i.id}-${t++}`));return Xe("div",{className:"eventsList",children:[r,L(Rye,{onEventAdded:this.props.onEventAdded})]})}}const yye=n=>{const e=h2(),t=Ne.exports.useCallback(()=>{n.onEventDeleted(n.event,n.eventIndex)},[n.onEventDeleted,n.event,n.eventIndex]),r=Ne.exports.useCallback(()=>{n.onEventActivationTypeToggle(n.event,n.eventIndex),e()},[n.onEventActivationTypeToggle,n.event,n.eventIndex,e]),i=Ne.exports.useCallback((f,m)=>{n.onEventParameterSet(n.event,n.eventIndex,f,m),e()},[n.onEventParameterSet,n.event,n.eventIndex,e]),a=Ne.exports.useCallback(()=>{n.onEventMouseEnter&&n.onEventMouseEnter(n.event,n.eventIndex)},[n.onEventMouseEnter,n.event,n.eventIndex]),o=Ne.exports.useCallback(()=>{n.onEventMouseLeave&&n.onEventMouseLeave(n.event,n.eventIndex)},[n.onEventMouseLeave,n.event,n.eventIndex]),s=Hn(w8),l=n.event,u=jo(l.id,n.board,s);if(!u)return null;const d=u.name||l.id;let h;return u.parameters&&(h=L(Eye,{parameters:u.parameters,eventInstance:l,onEventParameterSet:i})),Xe("div",{className:"eventEntry",onMouseEnter:a,onMouseLeave:o,children:[Xe("div",{className:"eventEntryHeader",children:[L("span",{className:"eventEntryName",title:d,children:d}),L("div",{role:"button",className:"eventEntryDelete",onClick:t,title:"Remove this event"})]}),Xe("div",{className:"eventEntryOptions",children:[L(Fye,{activationType:l.activationType,onEventActivationTypeToggle:r}),h]})]})},Eye=n=>{const{parameters:e,eventInstance:t,onEventParameterSet:r}=n,i=Yoe();return L(ta,{children:e.map(a=>{const o=t.parameterValues&&t.parameterValues[a.name];switch(a.type){case an.Boolean:return L(bye,{parameter:a,parameterValue:o,onEventParameterSet:r},a.name);case an.Number:case an.PositiveNumber:return L(Tye,{parameter:a,parameterValue:o,positiveOnly:a.type==="+Number",onEventParameterSet:r},a.name);case an.Space:return L(Bw,{parameter:a,parameterValue:o,colorQueue:i,onEventParameterSet:r},a.name);case an.SpaceArray:{let s=[];return Array.isArray(o)&&(s=o.map((l,u)=>L(Bw,{parameter:a,parameterValue:o,parameterArrayIndex:u,colorQueue:i,onEventParameterSet:r},`${a.name}[${u}]`))),s.push(L(Bw,{parameter:a,parameterValue:o,parameterArrayIndex:s.length,colorQueue:i,onEventParameterSet:r},`${a.name}[${s.length}]`)),s}case an.NumberArray:default:return null}})})},Cye={[Wt.WALKOVER]:Sye,[Wt.LANDON]:gye,[Wt.BEGINORWALKOVER]:void 0,[Wt.BEFORE_TURN]:_ye,[Wt.AFTER_TURN]:xye,[Wt.BEFORE_PLAYER_TURN]:vye,[Wt.BEFORE_DICE_ROLL]:wye},Vye={[Wt.WALKOVER]:"Passing event",[Wt.LANDON]:"Land-on event",[Wt.BEGINORWALKOVER]:void 0,[Wt.BEFORE_TURN]:"Before turn",[Wt.AFTER_TURN]:"After turn",[Wt.BEFORE_PLAYER_TURN]:"Before player turn",[Wt.BEFORE_DICE_ROLL]:"Before dice roll"},Dye={[Wt.WALKOVER]:"Occurs when passing over the space",[Wt.LANDON]:"Occurs when landing on the space",[Wt.BEGINORWALKOVER]:void 0,[Wt.BEFORE_TURN]:'Occurs once per turn, prior to seeing "PLAYER START" for the first player',[Wt.AFTER_TURN]:"Occurs once per turn, prior to the Mini-Game selection list appearing",[Wt.BEFORE_PLAYER_TURN]:'Occurs for each player prior to seeing "PLAYER START" on their turn',[Wt.BEFORE_DICE_ROLL]:"Occurs for each player prior to the dice roll"};class Fye extends Ne.exports.Component{constructor(){super(...arguments),this.onTypeToggle=()=>{this.props.onEventActivationTypeToggle()}}render(){const e=this.props.activationType,t=Vye[e],r=Cye[e];return Xe("div",{className:"eventEntryItem eventEntryActivationTypeItem",onClick:this.onTypeToggle,children:[r&&L("img",{className:"eventEntryActivationTypeToggle",alt:"Activation Type",src:r,title:Dye[e]}),L("span",{children:t})]})}}class Tye extends Ne.exports.Component{constructor(){super(...arguments),this.onParameterClicked=async()=>{const e=this.props.parameter.name,t=this.props.positiveOnly,r=await F_(`Enter a${t?" positive ":" "}numeric value for the ${e} parameter:`);if(!r)return;const i=parseInt(r);if(isNaN(i)){o0("The value entered could not be parsed into a number");return}if(this.props.positiveOnly&&i<=0){o0("The value entered must be a positive number");return}this.props.onEventParameterSet(e,i)}}render(){const e=this.props.parameterValue,t=e!=null,r=`(Number) ${this.props.parameter.name}: ${t?e:"null"}`;return Xe("div",{className:"eventEntryItem",title:r,onClick:this.onParameterClicked,children:[Xe("span",{className:"eventEntryItemParameterName",children:[this.props.parameter.name,":"]}),"\xA0",t?L("span",{children:this.props.parameterValue}):L("span",{className:"eventEntryItemParameterUnset",children:"null"})]})}}class bye extends Ne.exports.Component{constructor(){super(...arguments),this.onParameterClicked=()=>{const e=this.props.parameterValue;this.props.onEventParameterSet(this.props.parameter.name,!e)}}render(){const e=this.props.parameterValue,t=e!=null,r=`(Boolean) ${this.props.parameter.name}: ${t?e:"null"}`;return Xe("div",{className:"eventEntryItem",title:r,onClick:this.onParameterClicked,children:[Xe("span",{className:"eventEntryItemParameterName",children:[this.props.parameter.name,":"]}),"\xA0",t?L("span",{children:this.props.parameterValue.toString()}):L("span",{className:"eventEntryItemParameterUnset",children:"null"})]})}}class Bw extends Ne.exports.Component{constructor(){super(...arguments),this.onDragStart=e=>{tR(this.onSpaceDroppedOn),e.dataTransfer.setDragImage(Gn("targetImg"),3,0),e.dataTransfer.setData("text",JSON.stringify({isEventParamDrop:!0}))},this.onSpaceDroppedOn=e=>{if(tR(null),e>=0)if(typeof this.props.parameterArrayIndex=="number"){const i=[...this.props.parameterValue||[]];i[this.props.parameterArrayIndex]=e,this.props.onEventParameterSet(this.props.parameter.name,i)}else this.props.onEventParameterSet(this.props.parameter.name,e)},this.onDeleteButtonClicked=()=>{const e=this.props.parameterArrayIndex;Bn(typeof e=="number");const r=this.props.parameterValue||[];if(r.length){const i=[...r];i.splice(e,1),this.props.onEventParameterSet(this.props.parameter.name,i)}},this.onParameterClicked=()=>{o0("To associate a space with this event parameter, click and drag from this list entry and release over the target space.")}}render(){const e=typeof this.props.parameterArrayIndex=="number",t=this.props.parameterValue;let r,i=this.props.parameter.name;if(e){const l=t&&t[this.props.parameterArrayIndex];r=typeof l<"u"&&l!==null,i+=`[${this.props.parameterArrayIndex}]`}else r=typeof t<"u"&&t!==null;let a="eventEntryItemParameterName";e&&!r&&(a+=" eventEntryItemParameterHypothetical");let o=`(Space) ${this.props.parameter.name}: `;r?(o+="set",G0()&&(o+=` (to space index ${t})`)):o+="null",o+=`
Drag to a space to associate it`;let s;return r?s=Xe("span",{className:"eventEntryItemParameterSpaceSetWrapper",children:[L("span",{style:{backgroundColor:`rgb(${this.props.colorQueue.next().join(", ")})`},className:"eventEntryItemParameterColorSwatch"})," ","set"]}):e?s=L("span",{children:"\u2014"}):s=L("span",{className:"eventEntryItemParameterUnset",children:"null"}),Xe("div",{className:"eventEntryItem eventEntryItemDraggable",title:o,draggable:!0,onDragStart:this.onDragStart,onClick:this.onParameterClicked,children:[L("img",{alt:"Target",src:Kk}),Xe("span",{className:a,children:[i,":"]}),"\xA0",s,e&&r&&L(Pye,{onDeleteButtonClicked:this.onDeleteButtonClicked})]})}}function Pye(n){return L("div",{role:"button",className:"eventParameterRightAlign eventParameterDelete",onClick:e=>{e.stopPropagation(),n.onDeleteButtonClicked()},title:"Remove this array entry"})}class Rye extends Ne.exports.Component{constructor(e){super(e),this.onSelection=r=>{const i=r.target.value;if(i.toString()==="-1")return;const[a,o]=i.split(","),s=Sc(this.state[a][o]);if(!s)throw new Error(`Could not add event ${i}`);this.props.onEventAdded(s),this._refreshLists()};const t=IB();this.state={selectedValue:-1,libraryEvents:t.libraryEvents.sort(yg),boardEvents:t.boardEvents.sort(yg)}}_refreshLists(){const e=IB();this.setState({libraryEvents:e.libraryEvents.sort(yg),boardEvents:e.boardEvents.sort(yg)})}render(){if(!this.state.libraryEvents.length&&!this.state.boardEvents.length)return null;const e=[L("option",{value:"-1",disabled:!0,children:"Add event"},"-1")];let t=0;return this.state.boardEvents.length&&e.push(L("optgroup",{label:"Board Events",children:this.state.boardEvents.map(r=>{const i="boardEvents,"+t++;return L("option",{value:i,children:r.name},i)})},"boardEvents")),t=0,e.push(L("optgroup",{label:"Library Events",children:this.state.libraryEvents.map(r=>{const i="libraryEvents,"+t++;return L("option",{value:i,children:r.name},i)})},"libraryEvents")),L("div",{className:"eventAddSelectEntry",children:L("select",{className:"eventAddSelect",value:this.state.selectedValue,onChange:this.onSelection,children:e})})}}function IB(){let n=M$();const e=[],t=Vn();for(const r in t.events){const i=gs(t,r);e.push(oo(i.language,i.code))}return n=n.filter(r=>!(r.name in t.events)),{libraryEvents:n,boardEvents:e}}function yg(n,e){return n.name<e.name?-1:n.name>e.name?1:0}const O2=n=>Xe("span",{className:"propertySectionTitle",children:[n.text,n.children]});function Lye(n){const e=h2(),t=$oe(),r=ese(),i=Ne.exports.useCallback((v,C)=>{St.dispatch(ZI({spaceIndices:t,type:v,subtype:C})),e()},[t,e]),a=Ne.exports.useCallback(v=>{g5(Ss(),!!v),e()},[e]);if(!r||!r.length)return L("div",{className:"propertiesEmptyText",children:"No space selected."});const o=r.length>1,s=r[0],l=Ss()[0],u=n.gameVersion,d=n.boardType,h=d===zn.DUEL,f=Gye(u,d),m=Hye(u,d);let g=s.type,_=s.subtype;const E=s.star||!1;let x=!1;if(o)for(const v of r)!v||(v.type!==g&&(g=void 0),v.subtype!==_&&(_=void 0),!!v.star!==E&&(x=!0));return Xe("div",{className:"properties",children:[Xe("div",{className:"propertiesPadded",children:[!o&&L(Bye,{space:s,spaceIndex:l}),L(OB,{toggleTypes:f,type:g,subtype:_,typeChanged:i}),L(OB,{toggleTypes:m,type:g,subtype:_,typeChanged:i}),!h&&L(Wye,{checked:E,indeterminate:x,onStarCheckChanged:a}),L(Xye,{space:s})]}),!o&&L(Kye,{selectedSpace:s}),o&&L(Yye,{selectedSpaceIndices:t,selectedSpaces:r},t.join(","))]})}class Bye extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onChangeX=e=>{const t=parseInt(e.target.value,10),r=e.target.value==="",i=Vn().bg.width;!r&&isNaN(t)||t<0||t>i||(this.state.oldX||this.setState({oldX:this.props.space.x}),St.dispatch(Js({spaceIndices:[this.props.spaceIndex],coords:[{x:r?0:t}]})),this.forceUpdate())},this.onChangeY=e=>{const t=parseInt(e.target.value,10),r=e.target.value==="",i=Vn().bg.height;!r&&isNaN(t)||t<0||t>i||(this.state.oldY||this.setState({oldY:this.props.space.y}),St.dispatch(Js({spaceIndices:[this.props.spaceIndex],coords:[{y:r?0:t}]})),this.forceUpdate())},this.onCoordSet=()=>{St.dispatch(Js({spaceIndices:[this.props.spaceIndex],coords:[{x:this.props.space.x||0,y:this.props.space.y||0}]})),this.setState({oldX:void 0,oldY:void 0,oldRot:void 0}),this.forceUpdate()},this.onKeyUp=e=>{e.key==="Enter"&&this.onCoordSet()}}render(){const e=this.props.space;return e?L(ta,{children:Xe("div",{className:"spaceCoordRow",children:[L("span",{className:"coordLabel",children:"X:"}),L("input",{className:"coordInput",type:"number",value:e.x,onChange:this.onChangeX,onBlur:this.onCoordSet,onKeyUp:this.onKeyUp}),L("span",{className:"coordLabel",children:"Y:"}),L("input",{className:"coordInput",type:"number",value:e.y,onChange:this.onChangeY,onBlur:this.onCoordSet,onKeyUp:this.onKeyUp})]})}):null}}const Mye=[{name:"Change to blue space",icon:tm,type:de.BLUE},{name:"Change to red space",icon:nm,type:de.RED},{name:"Change to happening space",icon:rm,type:de.HAPPENING},{name:"Change to chance time space",icon:dV,type:de.CHANCE},{name:"Change to Mini-Game space",icon:pV,type:de.MINIGAME},{name:"Change to shroom space",icon:mV,type:de.SHROOM},{name:"Change to Bowser space",icon:im,type:de.BOWSER},{name:"Change to invisible space",icon:fl,type:de.OTHER},{name:"Change to star space",icon:rd,type:de.STAR,advanced:!0},{name:"Change to start space",icon:id,type:de.START,advanced:!0}],Iye=[{name:"Show Toad",icon:sm,subtype:yt.TOAD},{name:"Show Boo",icon:ad,subtype:yt.BOO},{name:"Show Bowser",icon:bV,subtype:yt.BOWSER},{name:"Show Koopa Troopa",icon:PV,subtype:yt.KOOPA}],Oye=[{name:"Change to blue space",icon:tm,type:de.BLUE},{name:"Change to red space",icon:nm,type:de.RED},{name:"Change to happening space",icon:rm,type:de.HAPPENING},{name:"Change to chance time space",icon:AV,type:de.CHANCE},{name:"Change to Bowser space",icon:im,type:de.BOWSER},{name:"Change to item space",icon:gV,type:de.ITEM},{name:"Change to battle space",icon:xV,type:de.BATTLE},{name:"Change to bank space",icon:wV,type:de.BANK},{name:"Change to invisible space",icon:fl,type:de.OTHER},{name:"Change to star space",icon:rd,type:de.STAR,advanced:!0},{name:"Change to black star space",icon:SV,type:de.BLACKSTAR,advanced:!0},{name:"Change to start space",icon:id,type:de.START,advanced:!0},{name:"Change to arrow space",icon:am,type:de.ARROW}],kye=[{name:"Show Toad",icon:sm,subtype:yt.TOAD},{name:"Show Boo",icon:ad,subtype:yt.BOO},{name:"Show bank",icon:VV,subtype:yt.BANK},{name:"Show bank coin stack",icon:om,subtype:yt.BANKCOIN},{name:"Show item shop",icon:FV,subtype:yt.ITEMSHOP}],Nye=[{name:"Change to blue space",icon:lV,type:de.BLUE},{name:"Change to red space",icon:cV,type:de.RED},{name:"Change to happening space",icon:uV,type:de.HAPPENING},{name:"Change to chance time space",icon:fV,type:de.CHANCE},{name:"Change to Bowser space",icon:hV,type:de.BOWSER},{name:"Change to item space",icon:_V,type:de.ITEM},{name:"Change to battle space",icon:vV,type:de.BATTLE},{name:"Change to bank space",icon:yV,type:de.BANK},{name:"Change to Game Guy space",icon:EV,type:de.GAMEGUY},{name:"Change to invisible space",icon:fl,type:de.OTHER},{name:"Change to star space",icon:rd,type:de.STAR,advanced:!0},{name:"Change to start space",icon:id,type:de.START,advanced:!0},{name:"Change to arrow space",icon:am,type:de.ARROW}],Uye=[{name:"Show Millenium Star",icon:TV,subtype:yt.TOAD},{name:"Show Boo",icon:ad,subtype:yt.BOO},{name:"Show bank",icon:CV,subtype:yt.BANK},{name:"Show bank coin stack",icon:om,subtype:yt.BANKCOIN},{name:"Show item shop",icon:DV,subtype:yt.ITEMSHOP}],jye=[{name:"Change to basic space",icon:LV,type:de.DUEL_BASIC},{name:"Change to Mini-Game space",icon:BV,type:de.MINIGAME},{name:"Change to reverse space",icon:MV,type:de.DUEL_REVERSE},{name:"Change to happening space",icon:IV,type:de.HAPPENING},{name:"Change to Game Guy space",icon:OV,type:de.GAMEGUY},{name:"Change to power-up space",icon:kV,type:de.DUEL_POWERUP},{name:"Change to invisible space",icon:fl,type:de.OTHER},{name:"Change to blue start space",icon:NV,type:de.DUEL_START_BLUE,advanced:!0},{name:"Change to red start space",icon:UV,type:de.DUEL_START_RED,advanced:!0}];function Gye(n,e){let t=[];switch(n){case 1:t=Mye;break;case 2:t=Oye;break;case 3:switch(e){case zn.DUEL:t=jye;break;default:t=Nye;break}break}return lr(z0.uiAdvanced)||(t=t.filter(r=>!r.advanced)),t}function Hye(n,e){let t=[];switch(n){case 1:t=Iye;break;case 2:t=kye;break;case 3:switch(e){case zn.DUEL:t=[];break;default:t=Uye;break}break}return lr(z0.uiAdvanced)||(t=t.filter(r=>!r.advanced)),t}class OB extends Ne.exports.Component{constructor(){super(...arguments),this.onTypeChanged=(e,t)=>{this.props.typeChanged(e,t)}}render(){const e=this.props.type;if(e===de.START&&!lr(z0.uiAdvanced))return null;const t=this.props.subtype,r=this.onTypeChanged,a=(this.props.toggleTypes||[]).map(o=>{const s=o.type+"-"+o.subtype,l=o.type!==void 0&&e===o.type||o.subtype!==void 0&&t!==void 0&&t===o.subtype;return L(zye,{type:o.type,subtype:o.subtype,icon:o.icon,title:o.name,selected:l,typeChanged:r},s)});return L("div",{className:"spaceToggleContainer",children:a})}}class zye extends Ne.exports.Component{constructor(){super(...arguments),this.onTypeChanged=()=>{this.props.subtype!==void 0&&this.props.selected?this.props.typeChanged(this.props.type,void 0):this.props.typeChanged(this.props.type,this.props.subtype)}}render(){let e="spaceToggleButton";this.props.selected&&(e+=" selected");const t=this.props.subtype!==void 0?25:20;return L("div",{className:e,title:this.props.title,role:"button",tabIndex:0,onClick:this.onTypeChanged,onKeyDown:od(this.onTypeChanged),children:L("img",{src:this.props.icon,height:t,width:t,alt:""})})}}class Wye extends Ne.exports.Component{constructor(){super(...arguments),this.checkboxEl=null,this.onChange=e=>{this.props.onStarCheckChanged(e.target.checked)}}render(){return L("div",{className:"starCheckbox",children:Xe("label",{children:[L("input",{type:"checkbox",ref:e=>this.checkboxEl=e,checked:this.props.checked,value:this.props.checked,onChange:this.onChange})," ","Hosts star"]})})}componentDidMount(){this.checkboxEl.indeterminate=this.props.indeterminate}componentDidUpdate(e){e.indeterminate!==this.props.indeterminate&&(this.checkboxEl.indeterminate=this.props.indeterminate)}}function Xye(n){return n.space.aiTree?L(rr,{css:"propertiesAiTreeButton",onClick:()=>{wt("Showing decision tree",n.space.aiTree),A5(n.space.aiTree)},children:"AI Decision Tree"}):null}const Kye=n=>{const e=h2();function t(o){const s=n.selectedSpace,l=ri(o,{activationType:hU(s)});Fne(l),e()}function r(o,s){bne(s),e()}function i(o,s){let l;o.activationType===Wt.WALKOVER?l=Wt.LANDON:l=Wt.WALKOVER,St.dispatch(Tte({eventIndex:s,activationType:l}))}function a(o,s,l,u){St.dispatch(Pte({eventIndex:s,name:l,value:u}))}return Xe(ta,{children:[L(O2,{text:"Events"}),L("div",{className:"propertiesPadded",children:L(MD,{events:n.selectedSpace.events,board:Vn(),onEventAdded:t,onEventDeleted:r,onEventActivationTypeToggle:i,onEventParameterSet:a})})]})},Yye=n=>{const[e,t]=Ne.exports.useState([]);function r(u){const d=ri(u,{activationType:hU(n.selectedSpaces[0])});Tne(d,n.selectedSpaceIndices);const h=[];for(const f of n.selectedSpaceIndices){const m=Vn().spaces[f].events;Bn(!!m),h.push(m.length-1)}t([...e,{eventListIndices:h}])}function i(u,d){const h=e[d].eventListIndices;Pne(h,n.selectedSpaceIndices);for(let m=d+1;m<e.length;m++){const g=e[m];g.eventListIndices=g.eventListIndices.map(_=>_-1)}const f=[...e];f.splice(d,1),t(f)}function a(u,d){let h;u.activationType===Wt.WALKOVER?h=Wt.LANDON:h=Wt.WALKOVER,St.dispatch(bte({eventIndices:e[d].eventListIndices,spaceIndices:n.selectedSpaceIndices,activationType:h}))}function o(u,d,h,f){St.dispatch(Rte({eventIndices:e[d].eventListIndices,spaceIndices:n.selectedSpaceIndices,name:h,value:f}))}const s=n.selectedSpaces[0],l=e.map(u=>{var f;const d=u.eventListIndices[0];Bn(typeof d=="number");const h=(f=s.events)==null?void 0:f[d];return Bn(!!h),h});return Xe(ta,{children:[L(O2,{text:"Events"}),Xe("div",{className:"propertiesPadded",children:[L("p",{className:"propertiesMultipleEventsMessage",children:"Multiple spaces selected."}),L("p",{className:"propertiesMultipleEventsMessage",children:"You may add and edit new events only."}),L(MD,{events:l,board:Vn(),onEventAdded:r,onEventDeleted:i,onEventActivationTypeToggle:a,onEventParameterSet:o})]})]})};function hU(n){switch(n.type){case de.OTHER:case de.START:case de.ARROW:case de.STAR:case de.BLACKSTAR:return Wt.WALKOVER}return Wt.LANDON}const qye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wUDFgECGlerawAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAC1klEQVRYw+2Yy07dMBCGf9vjS2zHNuYAQaqQeKC+T8W++y55D/oo1WHZNyhsQBWhcRc9oVWUcnI2TisxkpX4Fn35M2M7A7zZm/3bxl7p+9R13XsiEgCGXVsppQDAwBgb78uuDLsr210xaZ9rG+us7/v+7u7uc9/3H+dg6BXQ05ubm3eXl5dqGAaUUl7Kjni2Pto4B7/f8NX5t7e336+urr5ut1sH4GExaEpJhRBwfHxc5dM+PT3xi4sLt91u7Rwo/8u8tus6xznntXyQiEQIIQBo5vr/BhK6rnNSSlYLVCklQggRgDkI9OTkpCWiaqBaazjnPAB9EOhms7E1FRVCwBijDgVtc85VQTnn2H1BeQioizFaIUS9BZ0xSCn5oT5qnXNERKipqJRSAAiHgGpjDBhjVUGdcwJAOkhRpRSrCSqEgLWWtNb5EFC/85eqoM45att2sxhUCJG01ry2ot578t6fzB2W5kBVzjk1TcMq7qAvihpj8lJQGWM8MsZUVZSI4L0nrfVmjmtW0bZtj621VUEZY7DWcillWgoqvfdHTdPUPDz92mWcg5TSLQ0m6ZyL1tqqy9Mfvjq7jc6CGmNi0zTVKTnnaJqGA/BLQElrLY0xa6gJay0ByEtAjVKK1fbPETSEIABsloCmpmlW8U8iQgiBAJwtAc3ee75SICHGKJeCbmqvoS9RLCVyzgTgfC+oUuo0hMDX8tGUkhRC7FdUa92tBSqlREqJGGOnixSNMa4CSkTIOQvO+f6oJ6KztUA552jbljHGjvaCCiE2KaVVQAGgbVswxtQS0BxjXGUdHVVVSoklweTPz8+xFqgQAjlnMd1Gp//D7f39Pbu+voYxBsPwKy06TReONk0hMsb2jpv2/TmfiPDw8IDHx0cC8A7At5fz6kT2s1LKjVLquZTyY3wOfiddR5tL2g6TMWVS2KQ+Nw6lFHp+fv5BRB/6vv+CN3uz/8R+AkL+03xKi0HYAAAAAElFTkSuQmCC",Qye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoGAy4zA9ogPAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADW0lEQVRYw+2Yz07sNhTGP9vHfxInTjADBOkKiT2vwbLrmYfgASr23VeaDY8ws6ZLHqMalt2zKGxAFYH4biZ0SMNMkovSVuJIVuIkzvzy+ficMwa+7Mv+28a23Pu1KIqfiEgAqNbXQggBACrGWH0e1q1aH9n6iMb1tmt1n5VlWd7f3/9WluUvbTC0BfTw+vr62+npqaqqCiGEt7Ymbu3XVo/B31+4dfzt7e1fl5eXf6xWKwvgsTNonufKOYf9/f1Rpvb5+ZmfnJzY1WoVt4HyD8alRVFYzjkfyweJSDjnHICo7f5HIK4oCiulZGOBKqWEcy4DYHqBHhwcpEQ0GqjWGtbaBIDuBTqZTOIxFRVCwBij+oKm3vtRQTnnWM+g7ANqsyyLhRDjBXTGIKXkfX00ttYSEWFMRaWUAoDrA6qNMWCMjQpqrRUA8l6KKqXYmKBCCMRxTFpr3wc0WfvLqKDWWkrTdNIZVAiRa6352IomSUJJkhy0FUttoMp7n0dRxEbMoG+KGmN8V1CZZdmeMWZURYkISZKQ1nrSxtWqaJqm+3EcjwrKGEMcx1xKmbdxtQVKmSTJXhRFnYunH/2guia11kJKabsWztJam8Vx3Ck8McbeFchD1azfIYSo0+jzTh81xmRRFPWW6ezsDIwxzGazwUE/iiIOIOnio6S1lsaYXj8ym81wd3cHAFgulzg/Px8c9AH4LlNvlFK9Q9NyuXzXv7m5GQTqnBMAJl0UzaMo6p0+p9Ppu/7FxcWgEOWcIwBHXUB9kiS9Q9NisXiDm06nmM/ngxTNskx2BZ0MjaHz+RwhBCwWi3crerNtMyklvPcE4HinjyqlDp1zg/6Adg1n2xTN81wKIY5eX1+3K6q1LoaAfkYWk1Iiz3NijB3unHql1GGWZb1APyvVEhG894JzvnvVE9FRX9DPrPLTNGWMsb2doEKISZ7n/wooAKRpCsaY6gLqsyzrHEd/NM8338E5h1JK7ATVWifHx8e9/G5zZ25Ia658771optFmeEofHh7Y1dUVjDGoquofW4rNrcTN+5tV0EfPtc1CPZ6I8Pj4iKenJwLwDcCfbwu24cxHIYRrpdRLCKEOZJubsLW1bdpWTaEbjTX6bc8hhEAvLy+vRPRzWZa/48u+7H9i3wGhxjGlD/oIjAAAAABJRU5ErkJggg==",Jye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkWBAMYnbq4WQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAD8UlEQVRYw+2YO0/rSBTH//Pya+yxMXk4JLwKkPgwdzvqFFRoO6pVekS7FaJHkejZj7IEBBJXSUACCV0QiGhFsGeLTVgSDEmI5LsrcaSRPTNn5J/PmTnHPsCXfMl/W8gHc79HUfSNc84AJL0xrbUGgIQQ0r/XvZb0rqR3xdB42li/T7rdbvf29vaPbre7nQbDPwAtHB4eVpaXl40kSaC1fmk94tR+X/pr8O8bfrj++Pj4r1qt9r3RaEgAj2ODBkFgKKUwOzubiWufnp7owsKCbDQaThoofWedF0WRpJTSrPYg55wppRQAO23+PRAVRZEUQpCsQA3DYEopH4A1EWg+n/c455mBmqYJKaULwJwINJfLOVlalDEGy7KMSUG9MAwzBaWUoudBMQmo9H3fYYxlF9AJgRCCTrpHHSkl55wjS4sKIRgANQmoaVkWCCGZgkopGYBgIosahkGyBGWMwXEcbppmOAmo29svmYJKKbnnebmxQRljgWmaNGuLuq7LXdfNp30spYEaYRgGtm2TDDPoi0UtywrHBRW+789YlpWpRTnncF2Xm6aZS+NKtajnebOO42QKSgiB4zhUCBGMCypc152xbTvLj6d/soyUEELIcQ+TkFL6juN8OjwtLi6CEIJKpYIkSbC/vw9CSGqLomh4r6am0VRQy7J827Y/7fdWqwUAuLy8BAC02+13da+vrweCvm3bFIA7Dig3TVNYlvVpF5bLZQBAqVQa6KdJPp9/E/QBhOOAWoZhTBWaWq0W4jjGxcUFKKWoVquI4zi1XV1dDYAqpRiA3Dj/TIFt21Olz3q9jna7jXK5jGq1imaziXq9nqpbLBaxsbHxEqKUUhxAcZzn/LK1tXV/f3+vPyuvfo91HMd6e3t7YGy49eXm5kbXarUfAH4dx/W5rGPoyykWAmEYcgClka43DKOglJoqhu7u7qLVamFubg6UUqyvr+Ph4SG9eFAoDOzRIAgEY6wYx/HHoKZpRtOCbm5uDvRXVlaws7MzlkWDIOCEkMJI1xuGUfB9fyrQtbU12LaN1dVVJEmCg4MDSClh2/abtrS0NJDvwzBklNLRp55zXpwW9OTkBABwdnYGADg/P0en00nVbTabAwHf8zxCCJkZaVHGWC4IgqlAi8XiQDDv998pHQ3+/noeCCHGyIfMz8+3j46OdJIk+mfI6empVkp9H2lR0zTdUqmEnxGe+ic/DEM2nEaH96h3d3dH9vb2YFkWkiR5U1IcLiW+nieEjNQbnnu9nnOOx8dHdDodDqAC4EdqIZdSWtRaHxqG8ay1jl8VWvXQC6UVbZMhneEMRIb6aXrQWvPn5+eYc/5bt9v9E1/yJf8T+RujWhC1/6r2lgAAAABJRU5ErkJggg==",Zye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEKBA4VMdK4RAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADSUlEQVRIx9WVb0jcdRzHX5/v77zzz51XaevypNBcHrLDuYtae9IfKExljMF8sBiDxczYnlUsKKGkhuWDQSxBKyiKRklZUcwWA90Go4XIGg6sNkqdszFnuzv19H73+/TA263SsfPak74Pv3y/7xff9+f7eX/g/77kVoho/7MP4uh6NDXCbPS0NPfGbxlAv2t9HKUNYROqP6N8TlIPyuaey/8ZoIdbGhHzMiIPL22oAknQt/Ak3pDHPkyY3G1p3Y6Y/RlxABEB8oAtRPU+gFUDFESPPNeKagcQXl5VEZDqlOXZoIq4ViXeHcn7aVp2u86MvBIKrwsYVbnB1xm2LP1NBM0aoJ9tK8BfsrvUPfnSyaODd6tCaF0Nlvyb4RwHfZ36904AZAXQL3f5yHe3oPqC42hgbi7OyNAQLpdFVah6CaKqKANAuzzVM3DtrnVT8b6dt3E12YZl9uB23RWNRhn79RwLiQTRKzMUFBZQXHJHyihHUKddGnqO/f2+C0AfqfHizX8ClUmK5oel9+wigH7f4ufUVDfnZrbisVwauhOr2ODz+3GcFMnFJOdHf7FF5KuKiqo3paHnxxU7WRvDlYj7a4QAqoewnXb21ca4SAcnxvYyEVt66cYgTqSMuVgMjMG2bXthYf7jyakLnRtePHV2JQdcAPLtmfPaFPkCkTZgD3kyTSJ/lLFLexmPWohA5e0QKsUAXp9vyXOj3diFHYEdfRM3sjhTg1erA+MgdYjcC3IPV2YdJuMR5m3B74GHglBaeK0yDkoXHn1Nnnx3Kuuw06a6HYjpQsQLegEkiCpsLIcHytKHNIGhi/jsftn60fTNPsk/Ozk2fAjlkzQ7CMCaollCJal0G18FDmQrvgwgg9hIagDVeCa8FlMDFLk/QJ0fwOnEjnZmK75yo6kVRijK5MqfiTV8erqd5vsvoX9clKb+hZwHjjbWPoqx3kdMJarjQHnamrf5Zuh5gdRqwzFjkdZXFSNWS1p8BtiH6juICMIzNNVtzyXWr9cgz/80Is1p7/uJXu7DJA+iehQRLyK7tD5cvlrA9Ro4zgzGnMTRIEqvDP6eAEa1IXIAo/MgFRj3WmAi9xHYUBPQxvW1y/Y3Vft0c12Z5jBi/wIUBFGN7nsmaQAAAABJRU5ErkJggg==",$ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkXAAwrGkcKOQAAAFVJREFUSMdjYBgFQwb8////5H8EOEGsPkYSLPiPopGRkSi9TLT2+agFpFuAllrgAFukYwEnCKYibIaRAtBT14DEwUkKzDs2mtFGLcALTuJLLaNg8AIAfWhOIFXsg6IAAAAASUVORK5CYII=";class e4e extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onAddAnimBG=e=>{Ine(e),this.forceUpdate()},this.onRemoveAnimBG=e=>{One(e),this.forceUpdate()},this.onAddAdditionalBG=e=>{Nne(e),this.forceUpdate()},this.onRemoveAdditionalBG=e=>{Une(e),this.forceUpdate()},this.onSetOverrideBackground=e=>{fA(e),this.forceUpdate()}}render(){const e=this.props.currentBoard,t=Ys(e);let r;kne(e)&&(r=L(kB,{list:"animbg",title:"Animation Backgrounds",onAddBackground:this.onAddAnimBG,onRemoveBackground:this.onRemoveAnimBG,onSetOverrideBackground:this.onSetOverrideBackground,children:L(o4e,{board:e})}));let i;if(jne(e)){const a=!!lr(z0.uiAdvanced),o=e.additionalbg&&e.additionalbg.length,s=!!e.additionalbgcode;i=(a||o||s)&&L(kB,{list:"additionalbg",title:"Additional Backgrounds",onAddBackground:this.onAddAdditionalBG,onRemoveBackground:this.onRemoveAdditionalBG,onSetOverrideBackground:this.onSetOverrideBackground,children:L(s4e,{})})}return Xe("div",{className:"properties",children:[G0()&&L(l4e,{}),L(n4e,{romBoard:t}),!t&&L(t4e,{gameVersion:e.game,boardType:e.type}),!t&&L(r4e,{board:this.props.currentBoard}),r,i,!t&&L(u4e,{board:e})]})}}const t4e=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onChangeBg=()=>{Bo("image/*",this.bgSelected)},this.bgSelected=e=>{const t=e.target.files[0];if(!t)return;const r=new FileReader;r.onload=i=>{S5(r.result)},r.readAsDataURL(t)}}render(){let e;switch(this.props.gameVersion){case 1:e="960 x 720";break;case 2:case 3:this.props.boardType===zn.DUEL?e="896 x 672":e="1152 x 864";break}return Xe("div",{className:"propertiesActionButton",onClick:this.onChangeBg,title:e,children:[L("img",{src:Qye,className:"propertiesActionButtonImg",width:"24",height:"24",alt:""}),L("span",{className:"propertiesActionButtonSpan",children:"Change main background"})]})}};function n4e(n){const e=Ne.exports.useCallback(()=>{vr(fn.DETAILS)},[]),t=n.romBoard?"View board details":"Edit board details";return Xe("div",{className:"propertiesActionButton",onClick:e,children:[L("img",{src:Jye,className:"propertiesActionButtonImg",width:"24",height:"24",alt:""}),L("span",{className:"propertiesActionButtonSpan",children:t})]})}class r4e extends Ne.exports.Component{constructor(){super(...arguments),this.state={noDeadEnds:!1},this.checkForDeadEnds=()=>{const e=p5(this.props.board);wt("Dead ends",e),e.length?u5(e):(this.setState({noDeadEnds:!0}),this._noDeadEndsTimeout=setTimeout(()=>{delete this._noDeadEndsTimeout,this.setState({noDeadEnds:!1})},1e3))}}componentWillUnmount(){this._noDeadEndsTimeout&&(delete this._noDeadEndsTimeout,clearTimeout(this._noDeadEndsTimeout))}render(){let e,t;return this.state.noDeadEnds?e="\u2713 No dead ends":(e="Check for dead ends",t=this.checkForDeadEnds),Xe("div",{className:"propertiesActionButton",onClick:t,children:[L("img",{src:Zye,className:"propertiesActionButtonImg",width:"24",height:"24",alt:""}),L("span",{className:"propertiesActionButtonSpan",children:e})]})}}const kB=n=>{const e=ws(),t=Hn(l=>l.app.overrideBg),r=e[n.list]||[];let i=0;const a=r.map(l=>(i++,L(i4e,{bg:l,text:"Background "+i,index:i-1,showing:l===t,onRemoveBackground:n.onRemoveBackground,onSetOverrideBackground:n.onSetOverrideBackground},i))),o=Ys(e);let s;return o||(s=L(a4e,{onAddBackground:n.onAddBackground})),!s&&!a.length?null:Xe("div",{className:"propertiesAnimationBGList",children:[L(O2,{text:n.title,children:n.children}),a,s]})};class i4e extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onRemove=e=>{e.stopPropagation(),this.props.onRemoveBackground(this.props.index),this.props.showing&&this.props.onSetOverrideBackground(null)},this.onEyeClick=e=>{e.stopPropagation(),bN()||this.props.onSetOverrideBackground(this.props.showing?null:this.props.bg)}}render(){let e="propertiesActionButtonEyeBtn";return this.props.showing&&(e+=" propertiesActionButtonEyeBtnShowing"),Xe("div",{className:"propertiesActionButton",children:[L("img",{src:this.props.bg,className:"propertiesActionButtonImg",width:"24",height:"24",alt:""}),L("span",{className:"propertiesActionButtonSpan",children:this.props.text}),L("span",{className:"propertiesActionButtonSpacer"}),L("div",{role:"button",onClick:this.onEyeClick,className:e,title:"Show this background until dismissed"}),L("div",{role:"button",className:"propertiesActionButtonDeleteBtn",onClick:this.onRemove,title:"Remove this background"})]})}}class a4e extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onAddAnimBg=()=>{Bo("image/*",this.bgSelected)},this.bgSelected=e=>{const t=e.target.files[0];if(!t)return;const r=new FileReader;r.onload=i=>{this.props.onAddBackground(r.result)},r.readAsDataURL(t)}}render(){return Xe("div",{className:"propertiesActionButton",onClick:this.onAddAnimBg,children:[L("img",{src:$ye,className:"propertiesActionButtonImg",width:"24",height:"24",alt:""}),L("span",{className:"propertiesActionButtonSpan",children:"Add background"})]})}}class o4e extends Ne.exports.Component{constructor(e){super(e),this.onClick=()=>{this.setState({playing:!this.state.playing}),this.state.playing?y4():mse()},this.state={playing:bN()}}render(){if(!this.props.board.animbg||!this.props.board.animbg.length)return null;const e=this.state.playing?"\u25AE\u25AE":"\u25BA";return L("div",{className:"bgListActionButton",onClick:this.onClick,children:e})}componentWillUnmount(){y4()}}function s4e(){const n=Ne.exports.useCallback(()=>{vr(fn.ADDITIONAL_BGS)},[]);return L("div",{className:"bgListActionButton",title:"Configure additional background usage",onClick:n,children:"\u2699"})}class l4e extends Ne.exports.Component{constructor(){super(...arguments),this.state={}}async onFindSpace(){const e=await F_("Enter a space index:");if(e){const t=parseInt(e);isNaN(t)||u5([t])}}render(){return Xe("div",{className:"propertiesActionButton",onClick:this.onFindSpace,children:[L("img",{src:qye,className:"propertiesActionButtonImg",width:"24",height:"24",alt:""}),L("span",{className:"propertiesActionButtonSpan",children:"Find space by index"})]})}}function c4e(n){return n.game===3?[Wt.BEFORE_TURN,Wt.AFTER_TURN,Wt.BEFORE_PLAYER_TURN,Wt.BEFORE_DICE_ROLL]:[Wt.BEFORE_TURN,Wt.BEFORE_PLAYER_TURN,Wt.BEFORE_DICE_ROLL]}const u4e=n=>{const e=h2();function t(l){const u=ri(l,{activationType:Wt.BEFORE_PLAYER_TURN});Vne(u),e()}function r(l,u){Dne(u),e()}function i(l,u){kb(u)}function a(l){kb(-1)}function o(l,u){const d=c4e(n.board),h=d.indexOf(l.activationType);if(h===-1)throw new Error(`Unexpected board event activation type ${l.activationType}`);const f=d[(h+1)%d.length];St.dispatch(yte({eventIndex:u,activationType:f}))}function s(l,u,d,h){St.dispatch(Ete({eventIndex:u,name:d,value:h}))}return Xe(ta,{children:[L(O2,{text:"Events"}),L("div",{className:"propertiesPadded",children:L(MD,{events:n.board.boardevents,board:n.board,onEventAdded:t,onEventDeleted:r,onEventActivationTypeToggle:o,onEventParameterSet:s,onEventMouseEnter:i,onEventMouseLeave:a})})]})};window.addEventListener("beforeunload",function(n){let e=!1;if(window.localStorage){const t=I$();try{localStorage.setItem("events",JSON.stringify(t))}catch{e=!0}const r=Mne();try{localStorage.setItem("boards",JSON.stringify(r))}catch{e=!0}}else e=!0;if(e){const t="Cannot save all your boards. Return to the editor and export them?";return n.returnValue=t,t}});const d4e={id:"BOULDERCHASE",name:"Boulder chase",activationType:Wt.LANDON,executionType:s0.DIRECT,fakeEvent:!0,supportedGames:[Qe.MP1_USA],parse(n,e){const t={METHOD_START:"6E26BAB74BC8411901472C0A40E2FC1D"};return!!Wn([n.buffer,e.offset,116],t.METHOD_START)}};hr(d4e);const A4e={id:"BOWSER",name:"Visit Bowser",activationType:Wt.WALKOVER,executionType:s0.DIRECT,supportedGames:[Qe.MP1_USA],parse(n,e){const t={PLAYER_DIRECTION_CHANGE:"DAD5E635FE90ED982D02B3F1D5C0CE21",METHOD_END:"8A835D982BE35F1804E9ABD65C5699F4"};if(Wn([n.buffer,e.offset,20],t.PLAYER_DIRECTION_CHANGE)&&Wn([n.buffer,e.offset+28,28],t.METHOD_END)){const r=n.getUint16(e.offset+26);return[72,73,79,83,84,91,93].indexOf(r)!==-1}return!1},write(n,e,t,r){return`
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)

      ; TODO: Turn player towards bowser
      ;addiu A0, R0, -1 ; current player
      ;addiu A1, R0, 8
      ;jal   0x8004D2A4
      ;addiu A2, R0, BOWSER_STANDING_SPACE_INDEX

      addiu A0, R0, ${[72,73,79,83,84,91,93][t.boardIndex]}
      addu  A1, R0, R0
      addiu A2, R0, 3
      jal   0x800587BC
      addiu A3, R0, 1

      lw    RA, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x18
    `}};hr(A4e);const f4e={id:"PASSSTART",name:"Pass start",activationType:Wt.WALKOVER,executionType:s0.PROCESS,supportedGames:[Qe.MP1_USA],parse(n,e){const t={METHOD_START:"D87057256E3E3CA9A6878AA03EF4C486",METHOD_END:"9AB28DCC38CFBE9AE8FEA4515E86D7B2"};return!!(Wn([n.buffer,e.offset,22],t.METHOD_START)&&Wn([n.buffer,e.offset+28,24],t.METHOD_END))},write(n,e,t,r){return`
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)

      ; TODO: Face player towards koopa troopa
      ;addiu A0, R0, -1
      ;addiu A1, R0, 8
      ;jal   0x8004D2A4
      ;addiu A2, R0, KOOPA_TROOPA_STANDING_SPACE_INDEX

      jal   koopa_start_space_event_inner
      NOP
      jal   EndProcess
      addu  A0, R0, R0
      lw    RA, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x18

  .definelabel CORE_800ED192,0x800ED192

  koopa_start_space_event_inner:
      addiu SP, SP, -0x18
      sw    RA, 0x14(SP)
      sw    S0, 0x10(SP)
      lui   S0, hi(CORE_800ED192)
      addiu S0, S0, lo(CORE_800ED192)
      lhu   V0, 0(S0)
      addiu V0, V0, 1
      sh    V0, 0(S0)
      jal   IsBoardFeatureFlagSet
      addiu A0, R0, 66
      bne   V0, R0, L800F965C
      lui   V1, 0x6666
      lhu   V0, 0(S0)
      sll   V0, V0, 0x10
      sra   A0, V0, 0x10
      ori V1, V1, 0x6667
      mult  A0, V1
      mfhi  A3
      sra   V1, A3, 2
      sra   V0, V0, 0x1f
      subu  V1, V1, V0
      sll   V0, V1, 2
      addu  V0, V0, V1
      sll   V0, V0, 1
      subu  A0, A0, V0
      sll   A0, A0, 0x10
      beq   A0, R0, L800F9624
      NOP
      jal   IsBoardFeatureFlagSet
      addiu A0, R0, 77
      bne   V0, R0, L800F965C
      NOP
    L800F9624:
      jal   IsBoardFeatureFlagSet
      addiu A0, R0, 77
      beq   V0, R0, L800F963C
      addiu A0, R0, -1
      jal   0x80058910
      addiu A1, R0, 1
    L800F963C:
      jal   SetBoardFeatureFlag
      addiu A0, R0, 77
      addiu A0, R0, 95
      addu  A1, R0, R0
      jal   0x800587EC
      addiu A2, R0, 1
      j     L800F9664
      NOP
    L800F965C:
      jal   receive_koopa_bonus
      NOP
    L800F9664:
      lw    RA, 0x14(SP)
      lw    S0, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x18

  receive_koopa_bonus:
      addiu SP, SP, -0x20
      sw    RA, 0x1c(SP)
      sw    S2, 0x18(SP)
      sw    S1, 0x14(SP)
      jal   GetCurrentPlayerIndex
      sw    S0, 0x10(SP)
      addu  S1, V0, R0
      sll   A0, S1, 0x10
      jal   0x800405DC
      sra   A0, A0, 0x10
      addiu A0, R0, -1
      addiu A1, R0, -1
      jal   0x80052BE8
      addiu A2, R0, 2
      jal   IsBoardFeatureFlagSet
      addiu A0, R0, 66
      bnel  V0, R0, L800F94F0
      addiu A0, R0, 65
      addiu A0, R0, 72
      addiu A1, R0, 60
      addiu A2, R0, 16
      jal   CreateTextWindow
      addiu A3, R0, 3
      addu  S0, V0, R0
      sll   V0, V0, 0x10
      sra   A0, V0, 0x10
      addiu A1, R0, 569 ; "Nice work! Take this 10 Coin Bonus! Use it wisely"
      addiu A2, R0, -1
      jal   LoadStringIntoWindow
      addiu A3, R0, -1
      j     L800F9520
      addiu S2, R0, 10
    L800F94F0:
      addiu A1, R0, 60
      addiu A2, R0, 17
      jal   CreateTextWindow
      addiu A3, R0, 3
      addu  S0, V0, R0
      sll   V0, V0, 0x10
      sra   A0, V0, 0x10
      addiu    A1, R0, 570 ; "Nice work! Take this 20 Coin Bonus! Just a little bit longer..."
      addiu    A2, R0, -1
      jal   LoadStringIntoWindow
      addiu    A3, R0, -1
      addiu    S2, R0, 20
    L800F9520:
      sll   S0, S0, 0x10
      sra   S0, S0, 0x10
      addu  A0, S0, R0
      jal   SetTextCharsPerFrame
      addu  A1, R0, R0
      jal   ShowTextWindow
      addu  A0, S0, R0
      jal   PlaySound
      addiu A0, R0, 1074  ; Metal metal? :D
      sll   S1, S1, 0x10
      sra   S1, S1, 0x10
      addu  A0, S0, R0
      jal   0x8004DBD4
      addu  A1, S1, R0
      jal   HideTextWindow
      addu  A0, S0, R0
      addu  S0, S2, R0
      addu  A0, S1, R0
      jal   AdjustPlayerCoinsGradual
      addu  A1, S0, R0
      addu  A0, S1, R0
      jal   ShowPlayerCoinChange
      addu  A1, S0, R0
      jal   SleepProcess
      addiu A0, R0, 30 ; 30 frames
      jal   0x8003FEFC
      addu  A0, S1, R0
      lw    RA, 0x1c(SP)
      lw    S2, 0x18(SP)
      lw    S1, 0x14(SP)
      lw    S0, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x20
    `}};hr(f4e);const h4e={id:"THWOMPCHAINSPLIT",name:"Thwomp Chain Split",activationType:Wt.WALKOVER,executionType:s0.PROCESS,fakeEvent:!0,supportedGames:[Qe.MP1_USA],parse(n,e){const t={METHOD_START:"A45C16B1E285427C790C6FAD1EC78394"};return!!Wn([n.buffer,e.offset,64],t.METHOD_START)}};hr(h4e);const pU={id:"GATECHAINSPLIT",name:"",fakeEvent:!0,activationType:Wt.WALKOVER,executionType:s0.PROCESS,supportedGames:[Qe.MP3_USA],parse(n,e){const t={GATE_FILTER:"A99A70CBC4A1F9509AAB966831FC584E"};return Wn([n.buffer,e.offset,68],t.GATE_FILTER),!1},write(n,e,t,r){throw new Error(`${pU.id} not implemented`)}};hr(pU);const mU={id:"REVERSECHAINSPLIT",name:"",fakeEvent:!0,activationType:Wt.WALKOVER,executionType:s0.DIRECT,supportedGames:[Qe.MP3_USA],parse(n,e){const t={REVERSE_FILTER:"0909C95D982B8A9B1F096AC54FFFB816"};return!!Wn([n.buffer,e.offset,48],t.REVERSE_FILTER)},write(n,e,t,r){throw new Error(`${mU.id} not implemented`)}};hr(mU);function Eg(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var SU={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,a){function o(u,d){if(!i[u]){if(!r[u]){var h=typeof Eg=="function"&&Eg;if(!d&&h)return h(u,!0);if(s)return s(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var m=i[u]={exports:{}};r[u][0].call(m.exports,function(g){var _=r[u][1][g];return o(_||g)},m,m.exports,t,r,i,a)}return i[u].exports}for(var s=typeof Eg=="function"&&Eg,l=0;l<a.length;l++)o(a[l]);return o}({1:[function(t,r,i){var a=t("./utils"),o=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u,d,h,f,m,g,_,E=[],x=0,v=l.length,C=v,V=a.getTypeOf(l)!=="string";x<l.length;)C=v-x,h=V?(u=l[x++],d=x<v?l[x++]:0,x<v?l[x++]:0):(u=l.charCodeAt(x++),d=x<v?l.charCodeAt(x++):0,x<v?l.charCodeAt(x++):0),f=u>>2,m=(3&u)<<4|d>>4,g=1<C?(15&d)<<2|h>>6:64,_=2<C?63&h:64,E.push(s.charAt(f)+s.charAt(m)+s.charAt(g)+s.charAt(_));return E.join("")},i.decode=function(l){var u,d,h,f,m,g,_=0,E=0,x="data:";if(l.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var v,C=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===s.charAt(64)&&C--,l.charAt(l.length-2)===s.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|C):new Array(0|C);_<l.length;)u=s.indexOf(l.charAt(_++))<<2|(f=s.indexOf(l.charAt(_++)))>>4,d=(15&f)<<4|(m=s.indexOf(l.charAt(_++)))>>2,h=(3&m)<<6|(g=s.indexOf(l.charAt(_++))),v[E++]=u,m!==64&&(v[E++]=d),g!==64&&(v[E++]=h);return v}},{"./support":30,"./utils":32}],2:[function(t,r,i){var a=t("./external"),o=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function u(d,h,f,m,g){this.compressedSize=d,this.uncompressedSize=h,this.crc32=f,this.compression=m,this.compressedContent=g}u.prototype={getContentWorker:function(){var d=new o(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,h,f){return d.pipe(new s).pipe(new l("uncompressedSize")).pipe(h.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var a=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var a=t("./utils"),o=function(){for(var s,l=[],u=0;u<256;u++){s=u;for(var d=0;d<8;d++)s=1&s?3988292384^s>>>1:s>>>1;l[u]=s}return l}();r.exports=function(s,l){return s!==void 0&&s.length?a.getTypeOf(s)!=="string"?function(u,d,h,f){var m=o,g=f+h;u^=-1;for(var _=f;_<g;_++)u=u>>>8^m[255&(u^d[_])];return-1^u}(0|l,s,s.length,0):function(u,d,h,f){var m=o,g=f+h;u^=-1;for(var _=f;_<g;_++)u=u>>>8^m[255&(u^d.charCodeAt(_))];return-1^u}(0|l,s,s.length,0):0}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var a=null;a=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:a}},{lie:37}],7:[function(t,r,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),s=t("./utils"),l=t("./stream/GenericWorker"),u=a?"uint8array":"array";function d(h,f){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=f,this.meta={}}i.magic="\b\0",s.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(u,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(f){h.push({data:f,meta:h.meta})}},i.compressWorker=function(h){return new d("Deflate",h)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){function a(m,g){var _,E="";for(_=0;_<g;_++)E+=String.fromCharCode(255&m),m>>>=8;return E}function o(m,g,_,E,x,v){var C,V,D=m.file,H=m.compression,R=v!==u.utf8encode,j=s.transformTo("string",v(D.name)),te=s.transformTo("string",u.utf8encode(D.name)),$=D.comment,z=s.transformTo("string",v($)),I=s.transformTo("string",u.utf8encode($)),q=te.length!==D.name.length,P=I.length!==$.length,ee="",ue="",U="",O=D.dir,G=D.date,ne={crc32:0,compressedSize:0,uncompressedSize:0};g&&!_||(ne.crc32=m.crc32,ne.compressedSize=m.compressedSize,ne.uncompressedSize=m.uncompressedSize);var se=0;g&&(se|=8),R||!q&&!P||(se|=2048);var ie=0,Re=0;O&&(ie|=16),x==="UNIX"?(Re=798,ie|=function(Te,ye){var We=Te;return Te||(We=ye?16893:33204),(65535&We)<<16}(D.unixPermissions,O)):(Re=20,ie|=function(Te){return 63&(Te||0)}(D.dosPermissions)),C=G.getUTCHours(),C<<=6,C|=G.getUTCMinutes(),C<<=5,C|=G.getUTCSeconds()/2,V=G.getUTCFullYear()-1980,V<<=4,V|=G.getUTCMonth()+1,V<<=5,V|=G.getUTCDate(),q&&(ue=a(1,1)+a(d(j),4)+te,ee+="up"+a(ue.length,2)+ue),P&&(U=a(1,1)+a(d(z),4)+I,ee+="uc"+a(U.length,2)+U);var Be="";return Be+=`
\0`,Be+=a(se,2),Be+=H.magic,Be+=a(C,2),Be+=a(V,2),Be+=a(ne.crc32,4),Be+=a(ne.compressedSize,4),Be+=a(ne.uncompressedSize,4),Be+=a(j.length,2),Be+=a(ee.length,2),{fileRecord:h.LOCAL_FILE_HEADER+Be+j+ee,dirRecord:h.CENTRAL_FILE_HEADER+a(Re,2)+Be+a(z.length,2)+"\0\0\0\0"+a(ie,4)+a(E,4)+j+ee+z}}var s=t("../utils"),l=t("../stream/GenericWorker"),u=t("../utf8"),d=t("../crc32"),h=t("../signature");function f(m,g,_,E){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=_,this.encodeFileName=E,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(f,l),f.prototype.push=function(m){var g=m.meta.percent||0,_=this.entriesCount,E=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:_?(g+100*(_-E-1))/_:100}}))},f.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var g=this.streamFiles&&!m.file.dir;if(g){var _=o(m,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(m){this.accumulate=!1;var g=this.streamFiles&&!m.file.dir,_=o(m,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),g)this.push({data:function(E){return h.DATA_DESCRIPTOR+a(E.crc32,4)+a(E.compressedSize,4)+a(E.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var m=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var _=this.bytesWritten-m,E=function(x,v,C,V,D){var H=s.transformTo("string",D(V));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(x,2)+a(x,2)+a(v,4)+a(C,4)+a(H.length,2)+H}(this.dirRecords.length,_,m,this.zipComment,this.encodeFileName);this.push({data:E,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(m){this._sources.push(m);var g=this;return m.on("data",function(_){g.processChunk(_)}),m.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),m.on("error",function(_){g.error(_)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(m){var g=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var _=0;_<g.length;_++)try{g[_].error(m)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,g=0;g<m.length;g++)m[g].lock()},r.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var a=t("../compressions"),o=t("./ZipFileWorker");i.generateWorker=function(s,l,u){var d=new o(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{s.forEach(function(f,m){h++;var g=function(v,C){var V=v||C,D=a[V];if(!D)throw new Error(V+" is not a valid compression method !");return D}(m.options.compression,l.compression),_=m.options.compressionOptions||l.compressionOptions||{},E=m.dir,x=m.date;m._compressWorker(g,_).withStreamInfo("file",{name:f,dir:E,date:x,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(f){d.error(f)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new a;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(o,s){return new a().loadAsync(o,s)},a.external=t("./external"),r.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var a=t("./utils"),o=t("./external"),s=t("./utf8"),l=t("./zipEntries"),u=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function h(f){return new o.Promise(function(m,g){var _=f.decompressed.getContentWorker().pipe(new u);_.on("error",function(E){g(E)}).on("end",function(){_.streamInfo.crc32!==f.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(f,m){var g=this;return m=a.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),d.isNode&&d.isStream(f)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",f,!0,m.optimizedBinaryString,m.base64).then(function(_){var E=new l(m);return E.load(_),E}).then(function(_){var E=[o.Promise.resolve(_)],x=_.files;if(m.checkCRC32)for(var v=0;v<x.length;v++)E.push(h(x[v]));return o.Promise.all(E)}).then(function(_){for(var E=_.shift(),x=E.files,v=0;v<x.length;v++){var C=x[v],V=C.fileNameStr,D=a.resolve(C.fileNameStr);g.file(D,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:m.createFolders}),C.dir||(g.file(D).unsafeOriginalName=V)}return E.zipComment.length&&(g.comment=E.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var a=t("../utils"),o=t("../stream/GenericWorker");function s(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}a.inherits(s,o),s.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var a=t("readable-stream").Readable;function o(s,l,u){a.call(this,l),this._helper=s;var d=this;s.on("data",function(h,f){d.push(h)||d._helper.pause(),u&&u(f)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}t("../utils").inherits(o,a),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,o);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,o)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var o=new Buffer(a);return o.fill(0),o},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,r,i){function a(D,H,R){var j,te=s.getTypeOf(H),$=s.extend(R||{},d);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(D=x(D)),$.createFolders&&(j=E(D))&&v.call(this,j,!0);var z=te==="string"&&$.binary===!1&&$.base64===!1;R&&R.binary!==void 0||($.binary=!z),(H instanceof h&&H.uncompressedSize===0||$.dir||!H||H.length===0)&&($.base64=!1,$.binary=!0,H="",$.compression="STORE",te="string");var I=null;I=H instanceof h||H instanceof l?H:g.isNode&&g.isStream(H)?new _(D,H):s.prepareContent(D,H,$.binary,$.optimizedBinaryString,$.base64);var q=new f(D,I,$);this.files[D]=q}var o=t("./utf8"),s=t("./utils"),l=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),d=t("./defaults"),h=t("./compressedObject"),f=t("./zipObject"),m=t("./generate"),g=t("./nodejsUtils"),_=t("./nodejs/NodejsStreamInputAdapter"),E=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var H=D.lastIndexOf("/");return 0<H?D.substring(0,H):""},x=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},v=function(D,H){return H=H!==void 0?H:d.createFolders,D=x(D),this.files[D]||a.call(this,D,null,{dir:!0,createFolders:H}),this.files[D]};function C(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var V={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var H,R,j;for(H in this.files)j=this.files[H],(R=H.slice(this.root.length,H.length))&&H.slice(0,this.root.length)===this.root&&D(R,j)},filter:function(D){var H=[];return this.forEach(function(R,j){D(R,j)&&H.push(j)}),H},file:function(D,H,R){if(arguments.length!==1)return D=this.root+D,a.call(this,D,H,R),this;if(C(D)){var j=D;return this.filter(function($,z){return!z.dir&&j.test($)})}var te=this.files[this.root+D];return te&&!te.dir?te:null},folder:function(D){if(!D)return this;if(C(D))return this.filter(function(te,$){return $.dir&&D.test(te)});var H=this.root+D,R=v.call(this,H),j=this.clone();return j.root=R.name,j},remove:function(D){D=this.root+D;var H=this.files[D];if(H||(D.slice(-1)!=="/"&&(D+="/"),H=this.files[D]),H&&!H.dir)delete this.files[D];else for(var R=this.filter(function(te,$){return $.name.slice(0,D.length)===D}),j=0;j<R.length;j++)delete this.files[R[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var H,R={};try{if((R=s.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");s.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var j=R.comment||this.comment||"";H=m.generateWorker(this,R,j)}catch(te){(H=new l("error")).error(te)}return new u(H,R.type||"string",R.mimeType)},generateAsync:function(D,H){return this.generateInternalStream(D).accumulate(H)},generateNodeStream:function(D,H){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(H)}};r.exports=V},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var a=t("./DataReader");function o(s){a.call(this,s);for(var l=0;l<this.data.length;l++)s[l]=255&s[l]}t("../utils").inherits(o,a),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var l=s.charCodeAt(0),u=s.charCodeAt(1),d=s.charCodeAt(2),h=s.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===u&&this.data[f+2]===d&&this.data[f+3]===h)return f-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var l=s.charCodeAt(0),u=s.charCodeAt(1),d=s.charCodeAt(2),h=s.charCodeAt(3),f=this.readData(4);return l===f[0]&&u===f[1]&&d===f[2]&&h===f[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var a=t("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var l,u=0;for(this.checkOffset(s),l=this.index+s-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=s,u},readString:function(s){return a.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(t,r,i){var a=t("./Uint8ArrayReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var a=t("./DataReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var a=t("./ArrayReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var a=t("../utils"),o=t("../support"),s=t("./ArrayReader"),l=t("./StringReader"),u=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");r.exports=function(h){var f=a.getTypeOf(h);return a.checkSupport(f),f!=="string"||o.uint8array?f==="nodebuffer"?new u(h):o.uint8array?new d(a.transformTo("uint8array",h)):new s(a.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var a=t("./GenericWorker"),o=t("../utils");function s(l){a.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(s,a),s.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var a=t("./GenericWorker"),o=t("../crc32");function s(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,a),s.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var a=t("../utils"),o=t("./GenericWorker");function s(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}a.inherits(s,o),s.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var a=t("../utils"),o=t("./GenericWorker");function s(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=a.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}a.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function a(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(l){s.processChunk(l)}),o.on("end",function(){s.end()}),o.on("error",function(l){s.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=a},{}],29:[function(t,r,i){var a=t("../utils"),o=t("./ConvertWorker"),s=t("./GenericWorker"),l=t("../base64"),u=t("../support"),d=t("../external"),h=null;if(u.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(g,_){return new d.Promise(function(E,x){var v=[],C=g._internalType,V=g._outputType,D=g._mimeType;g.on("data",function(H,R){v.push(H),_&&_(R)}).on("error",function(H){v=[],x(H)}).on("end",function(){try{var H=function(R,j,te){switch(R){case"blob":return a.newBlob(a.transformTo("arraybuffer",j),te);case"base64":return l.encode(j);default:return a.transformTo(R,j)}}(V,function(R,j){var te,$=0,z=null,I=0;for(te=0;te<j.length;te++)I+=j[te].length;switch(R){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(z=new Uint8Array(I),te=0;te<j.length;te++)z.set(j[te],$),$+=j[te].length;return z;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+R+"'")}}(C,v),D);E(H)}catch(R){x(R)}v=[]}).resume()})}function m(g,_,E){var x=_;switch(_){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=_,this._mimeType=E,a.checkSupport(x),this._worker=g.pipe(new o(x)),g.lock()}catch(v){this._worker=new s("error"),this._worker.error(v)}}m.prototype={accumulate:function(g){return f(this,g)},on:function(g,_){var E=this;return g==="data"?this._worker.on(g,function(x){_.call(E,x.data,x.meta)}):this._worker.on(g,function(){a.delay(_,arguments,E)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},g)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(a),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var a=t("./utils"),o=t("./support"),s=t("./nodejsUtils"),l=t("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}i.utf8encode=function(m){return o.nodebuffer?s.newBufferFrom(m,"utf-8"):function(g){var _,E,x,v,C,V=g.length,D=0;for(v=0;v<V;v++)(64512&(E=g.charCodeAt(v)))==55296&&v+1<V&&(64512&(x=g.charCodeAt(v+1)))==56320&&(E=65536+(E-55296<<10)+(x-56320),v++),D+=E<128?1:E<2048?2:E<65536?3:4;for(_=o.uint8array?new Uint8Array(D):new Array(D),v=C=0;C<D;v++)(64512&(E=g.charCodeAt(v)))==55296&&v+1<V&&(64512&(x=g.charCodeAt(v+1)))==56320&&(E=65536+(E-55296<<10)+(x-56320),v++),E<128?_[C++]=E:(E<2048?_[C++]=192|E>>>6:(E<65536?_[C++]=224|E>>>12:(_[C++]=240|E>>>18,_[C++]=128|E>>>12&63),_[C++]=128|E>>>6&63),_[C++]=128|63&E);return _}(m)},i.utf8decode=function(m){return o.nodebuffer?a.transformTo("nodebuffer",m).toString("utf-8"):function(g){var _,E,x,v,C=g.length,V=new Array(2*C);for(_=E=0;_<C;)if((x=g[_++])<128)V[E++]=x;else if(4<(v=u[x]))V[E++]=65533,_+=v-1;else{for(x&=v===2?31:v===3?15:7;1<v&&_<C;)x=x<<6|63&g[_++],v--;1<v?V[E++]=65533:x<65536?V[E++]=x:(x-=65536,V[E++]=55296|x>>10&1023,V[E++]=56320|1023&x)}return V.length!==E&&(V.subarray?V=V.subarray(0,E):V.length=E),a.applyFromCharCode(V)}(m=a.transformTo(o.uint8array?"uint8array":"array",m))},a.inherits(h,l),h.prototype.processChunk=function(m){var g=a.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var _=g;(g=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),g.set(_,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var E=function(v,C){var V;for((C=C||v.length)>v.length&&(C=v.length),V=C-1;0<=V&&(192&v[V])==128;)V--;return V<0||V===0?C:V+u[v[V]]>C?V:C}(g),x=g;E!==g.length&&(o.uint8array?(x=g.subarray(0,E),this.leftOver=g.subarray(E,g.length)):(x=g.slice(0,E),this.leftOver=g.slice(E,g.length))),this.push({data:i.utf8decode(x),meta:m.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,a.inherits(f,l),f.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var a=t("./support"),o=t("./base64"),s=t("./nodejsUtils"),l=t("./external");function u(_){return _}function d(_,E){for(var x=0;x<_.length;++x)E[x]=255&_.charCodeAt(x);return E}t("setimmediate"),i.newBlob=function(_,E){i.checkSupport("blob");try{return new Blob([_],{type:E})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(_),x.getBlob(E)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(_,E,x){var v=[],C=0,V=_.length;if(V<=x)return String.fromCharCode.apply(null,_);for(;C<V;)E==="array"||E==="nodebuffer"?v.push(String.fromCharCode.apply(null,_.slice(C,Math.min(C+x,V)))):v.push(String.fromCharCode.apply(null,_.subarray(C,Math.min(C+x,V)))),C+=x;return v.join("")},stringifyByChar:function(_){for(var E="",x=0;x<_.length;x++)E+=String.fromCharCode(_[x]);return E},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function f(_){var E=65536,x=i.getTypeOf(_),v=!0;if(x==="uint8array"?v=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(v=h.applyCanBeUsed.nodebuffer),v)for(;1<E;)try{return h.stringifyByChunk(_,x,E)}catch{E=Math.floor(E/2)}return h.stringifyByChar(_)}function m(_,E){for(var x=0;x<_.length;x++)E[x]=_[x];return E}i.applyFromCharCode=f;var g={};g.string={string:u,array:function(_){return d(_,new Array(_.length))},arraybuffer:function(_){return g.string.uint8array(_).buffer},uint8array:function(_){return d(_,new Uint8Array(_.length))},nodebuffer:function(_){return d(_,s.allocBuffer(_.length))}},g.array={string:f,array:u,arraybuffer:function(_){return new Uint8Array(_).buffer},uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return s.newBufferFrom(_)}},g.arraybuffer={string:function(_){return f(new Uint8Array(_))},array:function(_){return m(new Uint8Array(_),new Array(_.byteLength))},arraybuffer:u,uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return s.newBufferFrom(new Uint8Array(_))}},g.uint8array={string:f,array:function(_){return m(_,new Array(_.length))},arraybuffer:function(_){return _.buffer},uint8array:u,nodebuffer:function(_){return s.newBufferFrom(_)}},g.nodebuffer={string:f,array:function(_){return m(_,new Array(_.length))},arraybuffer:function(_){return g.nodebuffer.uint8array(_).buffer},uint8array:function(_){return m(_,new Uint8Array(_.length))},nodebuffer:u},i.transformTo=function(_,E){if(E=E||"",!_)return E;i.checkSupport(_);var x=i.getTypeOf(E);return g[x][_](E)},i.resolve=function(_){for(var E=_.split("/"),x=[],v=0;v<E.length;v++){var C=E[v];C==="."||C===""&&v!==0&&v!==E.length-1||(C===".."?x.pop():x.push(C))}return x.join("/")},i.getTypeOf=function(_){return typeof _=="string"?"string":Object.prototype.toString.call(_)==="[object Array]"?"array":a.nodebuffer&&s.isBuffer(_)?"nodebuffer":a.uint8array&&_ instanceof Uint8Array?"uint8array":a.arraybuffer&&_ instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(_){if(!a[_.toLowerCase()])throw new Error(_+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(_){var E,x,v="";for(x=0;x<(_||"").length;x++)v+="\\x"+((E=_.charCodeAt(x))<16?"0":"")+E.toString(16).toUpperCase();return v},i.delay=function(_,E,x){setImmediate(function(){_.apply(x||null,E||[])})},i.inherits=function(_,E){function x(){}x.prototype=E.prototype,_.prototype=new x},i.extend=function(){var _,E,x={};for(_=0;_<arguments.length;_++)for(E in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],E)&&x[E]===void 0&&(x[E]=arguments[_][E]);return x},i.prepareContent=function(_,E,x,v,C){return l.Promise.resolve(E).then(function(V){return a.blob&&(V instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(V))!==-1)&&typeof FileReader<"u"?new l.Promise(function(D,H){var R=new FileReader;R.onload=function(j){D(j.target.result)},R.onerror=function(j){H(j.target.error)},R.readAsArrayBuffer(V)}):V}).then(function(V){var D=i.getTypeOf(V);return D?(D==="arraybuffer"?V=i.transformTo("uint8array",V):D==="string"&&(C?V=o.decode(V):x&&v!==!0&&(V=function(H){return d(H,a.uint8array?new Uint8Array(H.length):new Array(H.length))}(V))),V):l.Promise.reject(new Error("Can't read the data of '"+_+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var a=t("./reader/readerFor"),o=t("./utils"),s=t("./signature"),l=t("./zipEntry"),u=t("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(f)+", expected "+o.pretty(h)+")")}},isSignature:function(h,f){var m=this.reader.index;this.reader.setIndex(h);var g=this.reader.readString(4)===f;return this.reader.setIndex(m),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),f=u.uint8array?"uint8array":"array",m=o.transformTo(f,h);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,f,m,g=this.zip64EndOfCentralSize-44;0<g;)h=this.reader.readInt(2),f=this.reader.readInt(4),m=this.reader.readData(f),this.zip64ExtensibleData[h]={id:h,length:f,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,f;for(h=0;h<this.files.length;h++)f=this.files[h],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var f=h;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var g=f-m;if(0<g)this.isSignature(f,s.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(h){this.reader=a(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var a=t("./reader/readerFor"),o=t("./utils"),s=t("./compressedObject"),l=t("./crc32"),u=t("./utf8"),d=t("./compressions"),h=t("./support");function f(m,g){this.options=m,this.loadOptions=g}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var g,_;if(m.skip(22),this.fileNameLength=m.readInt(2),_=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(_),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(E){for(var x in d)if(Object.prototype.hasOwnProperty.call(d,x)&&d[x].magic===E)return d[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,g,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var g=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(g),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=a(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var g,_,E,x=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<x;)g=m.readInt(2),_=m.readInt(2),E=m.readData(_),this.extraFields[g]={id:g,length:_,value:E};m.setIndex(x)},handleUTF8:function(){var m=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var _=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var E=this.findExtraFieldUnicodeComment();if(E!==null)this.fileCommentStr=E;else{var x=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var g=a(m.value);return g.readInt(1)!==1||l(this.fileName)!==g.readInt(4)?null:u.utf8decode(g.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var g=a(m.value);return g.readInt(1)!==1||l(this.fileComment)!==g.readInt(4)?null:u.utf8decode(g.readData(m.length-5))}return null}},r.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){function a(g,_,E){this.name=g,this.dir=E.dir,this.date=E.date,this.comment=E.comment,this.unixPermissions=E.unixPermissions,this.dosPermissions=E.dosPermissions,this._data=_,this._dataBinary=E.binary,this.options={compression:E.compression,compressionOptions:E.compressionOptions}}var o=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),l=t("./utf8"),u=t("./compressedObject"),d=t("./stream/GenericWorker");a.prototype={internalStream:function(g){var _=null,E="string";try{if(!g)throw new Error("No output type specified.");var x=(E=g.toLowerCase())==="string"||E==="text";E!=="binarystring"&&E!=="text"||(E="string"),_=this._decompressWorker();var v=!this._dataBinary;v&&!x&&(_=_.pipe(new l.Utf8EncodeWorker)),!v&&x&&(_=_.pipe(new l.Utf8DecodeWorker))}catch(C){(_=new d("error")).error(C)}return new o(_,E,"")},async:function(g,_){return this.internalStream(g).accumulate(_)},nodeStream:function(g,_){return this.internalStream(g||"nodebuffer").toNodejsStream(_)},_compressWorker:function(g,_){if(this._data instanceof u&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var E=this._decompressWorker();return this._dataBinary||(E=E.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(E,g,_)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new s(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<h.length;m++)a.prototype[h[m]]=f;r.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(a){var o,s,l=a.MutationObserver||a.WebKitMutationObserver;if(l){var u=0,d=new l(g),h=a.document.createTextNode("");d.observe(h,{characterData:!0}),o=function(){h.data=u=++u%2}}else if(a.setImmediate||a.MessageChannel===void 0)o="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var _=a.document.createElement("script");_.onreadystatechange=function(){g(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},a.document.documentElement.appendChild(_)}:function(){setTimeout(g,0)};else{var f=new a.MessageChannel;f.port1.onmessage=g,o=function(){f.port2.postMessage(0)}}var m=[];function g(){var _,E;s=!0;for(var x=m.length;x;){for(E=m,m=[],_=-1;++_<x;)E[_]();x=m.length}s=!1}r.exports=function(_){m.push(_)!==1||s||o()}}).call(this,typeof window<"u"?window:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var a=t("immediate");function o(){}var s={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,x!==o&&_(this,x)}function f(x,v,C){this.promise=x,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function m(x,v,C){a(function(){var V;try{V=v(C)}catch(D){return s.reject(x,D)}V===x?s.reject(x,new TypeError("Cannot resolve promise with itself")):s.resolve(x,V)})}function g(x){var v=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof v=="function")return function(){v.apply(x,arguments)}}function _(x,v){var C=!1;function V(R){C||(C=!0,s.reject(x,R))}function D(R){C||(C=!0,s.resolve(x,R))}var H=E(function(){v(D,V)});H.status==="error"&&V(H.value)}function E(x,v){var C={};try{C.value=x(v),C.status="success"}catch(V){C.status="error",C.value=V}return C}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var v=this.constructor;return this.then(function(C){return v.resolve(x()).then(function(){return C})},function(C){return v.resolve(x()).then(function(){throw C})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,v){if(typeof x!="function"&&this.state===u||typeof v!="function"&&this.state===l)return this;var C=new this.constructor(o);return this.state!==d?m(C,this.state===u?x:v,this.outcome):this.queue.push(new f(C,x,v)),C},f.prototype.callFulfilled=function(x){s.resolve(this.promise,x)},f.prototype.otherCallFulfilled=function(x){m(this.promise,this.onFulfilled,x)},f.prototype.callRejected=function(x){s.reject(this.promise,x)},f.prototype.otherCallRejected=function(x){m(this.promise,this.onRejected,x)},s.resolve=function(x,v){var C=E(g,v);if(C.status==="error")return s.reject(x,C.value);var V=C.value;if(V)_(x,V);else{x.state=u,x.outcome=v;for(var D=-1,H=x.queue.length;++D<H;)x.queue[D].callFulfilled(v)}return x},s.reject=function(x,v){x.state=l,x.outcome=v;for(var C=-1,V=x.queue.length;++C<V;)x.queue[C].callRejected(v);return x},h.resolve=function(x){return x instanceof this?x:s.resolve(new this(o),x)},h.reject=function(x){var v=new this(o);return s.reject(v,x)},h.all=function(x){var v=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=x.length,V=!1;if(!C)return this.resolve([]);for(var D=new Array(C),H=0,R=-1,j=new this(o);++R<C;)te(x[R],R);return j;function te($,z){v.resolve($).then(function(I){D[z]=I,++H!==C||V||(V=!0,s.resolve(j,D))},function(I){V||(V=!0,s.reject(j,I))})}},h.race=function(x){var v=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=x.length,V=!1;if(!C)return this.resolve([]);for(var D=-1,H=new this(o);++D<C;)R=x[D],v.resolve(R).then(function(j){V||(V=!0,s.resolve(H,j))},function(j){V||(V=!0,s.reject(H,j))});var R;return H}},{immediate:36}],38:[function(t,r,i){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var a=t("./zlib/deflate"),o=t("./utils/common"),s=t("./utils/strings"),l=t("./zlib/messages"),u=t("./zlib/zstream"),d=Object.prototype.toString,h=0,f=-1,m=0,g=8;function _(x){if(!(this instanceof _))return new _(x);this.options=o.assign({level:f,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},x||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var C=a.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(C!==h)throw new Error(l[C]);if(v.header&&a.deflateSetHeader(this.strm,v.header),v.dictionary){var V;if(V=typeof v.dictionary=="string"?s.string2buf(v.dictionary):d.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(C=a.deflateSetDictionary(this.strm,V))!==h)throw new Error(l[C]);this._dict_set=!0}}function E(x,v){var C=new _(v);if(C.push(x,!0),C.err)throw C.msg||l[C.err];return C.result}_.prototype.push=function(x,v){var C,V,D=this.strm,H=this.options.chunkSize;if(this.ended)return!1;V=v===~~v?v:v===!0?4:0,typeof x=="string"?D.input=s.string2buf(x):d.call(x)==="[object ArrayBuffer]"?D.input=new Uint8Array(x):D.input=x,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new o.Buf8(H),D.next_out=0,D.avail_out=H),(C=a.deflate(D,V))!==1&&C!==h)return this.onEnd(C),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||V!==4&&V!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(D.output,D.next_out))):this.onData(o.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&C!==1);return V===4?(C=a.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===h):V!==2||(this.onEnd(h),!(D.avail_out=0))},_.prototype.onData=function(x){this.chunks.push(x)},_.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},i.Deflate=_,i.deflate=E,i.deflateRaw=function(x,v){return(v=v||{}).raw=!0,E(x,v)},i.gzip=function(x,v){return(v=v||{}).gzip=!0,E(x,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var a=t("./zlib/inflate"),o=t("./utils/common"),s=t("./utils/strings"),l=t("./zlib/constants"),u=t("./zlib/messages"),d=t("./zlib/zstream"),h=t("./zlib/gzheader"),f=Object.prototype.toString;function m(_){if(!(this instanceof m))return new m(_);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},_||{});var E=this.options;E.raw&&0<=E.windowBits&&E.windowBits<16&&(E.windowBits=-E.windowBits,E.windowBits===0&&(E.windowBits=-15)),!(0<=E.windowBits&&E.windowBits<16)||_&&_.windowBits||(E.windowBits+=32),15<E.windowBits&&E.windowBits<48&&(15&E.windowBits)==0&&(E.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var x=a.inflateInit2(this.strm,E.windowBits);if(x!==l.Z_OK)throw new Error(u[x]);this.header=new h,a.inflateGetHeader(this.strm,this.header)}function g(_,E){var x=new m(E);if(x.push(_,!0),x.err)throw x.msg||u[x.err];return x.result}m.prototype.push=function(_,E){var x,v,C,V,D,H,R=this.strm,j=this.options.chunkSize,te=this.options.dictionary,$=!1;if(this.ended)return!1;v=E===~~E?E:E===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof _=="string"?R.input=s.binstring2buf(_):f.call(_)==="[object ArrayBuffer]"?R.input=new Uint8Array(_):R.input=_,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(j),R.next_out=0,R.avail_out=j),(x=a.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&te&&(H=typeof te=="string"?s.string2buf(te):f.call(te)==="[object ArrayBuffer]"?new Uint8Array(te):te,x=a.inflateSetDictionary(this.strm,H)),x===l.Z_BUF_ERROR&&$===!0&&(x=l.Z_OK,$=!1),x!==l.Z_STREAM_END&&x!==l.Z_OK)return this.onEnd(x),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&x!==l.Z_STREAM_END&&(R.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=s.utf8border(R.output,R.next_out),V=R.next_out-C,D=s.buf2string(R.output,C),R.next_out=V,R.avail_out=j-V,V&&o.arraySet(R.output,R.output,C,V,0),this.onData(D)):this.onData(o.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&($=!0)}while((0<R.avail_in||R.avail_out===0)&&x!==l.Z_STREAM_END);return x===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(x=a.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},m.prototype.onData=function(_){this.chunks.push(_)},m.prototype.onEnd=function(_){_===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},i.Inflate=m,i.inflate=g,i.inflateRaw=function(_,E){return(E=E||{}).raw=!0,g(_,E)},i.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,d,h,f){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+h),f);else for(var m=0;m<h;m++)l[f+m]=u[d+m]},flattenChunks:function(l){var u,d,h,f,m,g;for(u=h=0,d=l.length;u<d;u++)h+=l[u].length;for(g=new Uint8Array(h),u=f=0,d=l.length;u<d;u++)m=l[u],g.set(m,f),f+=m.length;return g}},s={arraySet:function(l,u,d,h,f){for(var m=0;m<h;m++)l[f+m]=u[d+m]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(a)},{}],42:[function(t,r,i){var a=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var l=new a.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(h,f){if(f<65537&&(h.subarray&&s||!h.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(h,f));for(var m="",g=0;g<f;g++)m+=String.fromCharCode(h[g]);return m}l[254]=l[254]=1,i.string2buf=function(h){var f,m,g,_,E,x=h.length,v=0;for(_=0;_<x;_++)(64512&(m=h.charCodeAt(_)))==55296&&_+1<x&&(64512&(g=h.charCodeAt(_+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),_++),v+=m<128?1:m<2048?2:m<65536?3:4;for(f=new a.Buf8(v),_=E=0;E<v;_++)(64512&(m=h.charCodeAt(_)))==55296&&_+1<x&&(64512&(g=h.charCodeAt(_+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),_++),m<128?f[E++]=m:(m<2048?f[E++]=192|m>>>6:(m<65536?f[E++]=224|m>>>12:(f[E++]=240|m>>>18,f[E++]=128|m>>>12&63),f[E++]=128|m>>>6&63),f[E++]=128|63&m);return f},i.buf2binstring=function(h){return d(h,h.length)},i.binstring2buf=function(h){for(var f=new a.Buf8(h.length),m=0,g=f.length;m<g;m++)f[m]=h.charCodeAt(m);return f},i.buf2string=function(h,f){var m,g,_,E,x=f||h.length,v=new Array(2*x);for(m=g=0;m<x;)if((_=h[m++])<128)v[g++]=_;else if(4<(E=l[_]))v[g++]=65533,m+=E-1;else{for(_&=E===2?31:E===3?15:7;1<E&&m<x;)_=_<<6|63&h[m++],E--;1<E?v[g++]=65533:_<65536?v[g++]=_:(_-=65536,v[g++]=55296|_>>10&1023,v[g++]=56320|1023&_)}return d(v,g)},i.utf8border=function(h,f){var m;for((f=f||h.length)>h.length&&(f=h.length),m=f-1;0<=m&&(192&h[m])==128;)m--;return m<0||m===0?f:m+l[h[m]]>f?m:f}},{"./common":41}],43:[function(t,r,i){r.exports=function(a,o,s,l){for(var u=65535&a|0,d=a>>>16&65535|0,h=0;s!==0;){for(s-=h=2e3<s?2e3:s;d=d+(u=u+o[l++]|0)|0,--h;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){var a=function(){for(var o,s=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;s[l]=o}return s}();r.exports=function(o,s,l,u){var d=a,h=u+l;o^=-1;for(var f=u;f<h;f++)o=o>>>8^d[255&(o^s[f])];return-1^o}},{}],46:[function(t,r,i){var a,o=t("../utils/common"),s=t("./trees"),l=t("./adler32"),u=t("./crc32"),d=t("./messages"),h=0,f=4,m=0,g=-2,_=-1,E=4,x=2,v=8,C=9,V=286,D=30,H=19,R=2*V+1,j=15,te=3,$=258,z=$+te+1,I=42,q=113,P=1,ee=2,ue=3,U=4;function O(k,De){return k.msg=d[De],De}function G(k){return(k<<1)-(4<k?9:0)}function ne(k){for(var De=k.length;0<=--De;)k[De]=0}function se(k){var De=k.state,we=De.pending;we>k.avail_out&&(we=k.avail_out),we!==0&&(o.arraySet(k.output,De.pending_buf,De.pending_out,we,k.next_out),k.next_out+=we,De.pending_out+=we,k.total_out+=we,k.avail_out-=we,De.pending-=we,De.pending===0&&(De.pending_out=0))}function ie(k,De){s._tr_flush_block(k,0<=k.block_start?k.block_start:-1,k.strstart-k.block_start,De),k.block_start=k.strstart,se(k.strm)}function Re(k,De){k.pending_buf[k.pending++]=De}function Be(k,De){k.pending_buf[k.pending++]=De>>>8&255,k.pending_buf[k.pending++]=255&De}function Te(k,De){var we,le,re=k.max_chain_length,fe=k.strstart,He=k.prev_length,oe=k.nice_match,Y=k.strstart>k.w_size-z?k.strstart-(k.w_size-z):0,_e=k.window,Fe=k.w_mask,Le=k.prev,Pe=k.strstart+$,rt=_e[fe+He-1],Ee=_e[fe+He];k.prev_length>=k.good_match&&(re>>=2),oe>k.lookahead&&(oe=k.lookahead);do if(_e[(we=De)+He]===Ee&&_e[we+He-1]===rt&&_e[we]===_e[fe]&&_e[++we]===_e[fe+1]){fe+=2,we++;do;while(_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&fe<Pe);if(le=$-(Pe-fe),fe=Pe-$,He<le){if(k.match_start=De,oe<=(He=le))break;rt=_e[fe+He-1],Ee=_e[fe+He]}}while((De=Le[De&Fe])>Y&&--re!=0);return He<=k.lookahead?He:k.lookahead}function ye(k){var De,we,le,re,fe,He,oe,Y,_e,Fe,Le=k.w_size;do{if(re=k.window_size-k.lookahead-k.strstart,k.strstart>=Le+(Le-z)){for(o.arraySet(k.window,k.window,Le,Le,0),k.match_start-=Le,k.strstart-=Le,k.block_start-=Le,De=we=k.hash_size;le=k.head[--De],k.head[De]=Le<=le?le-Le:0,--we;);for(De=we=Le;le=k.prev[--De],k.prev[De]=Le<=le?le-Le:0,--we;);re+=Le}if(k.strm.avail_in===0)break;if(He=k.strm,oe=k.window,Y=k.strstart+k.lookahead,_e=re,Fe=void 0,Fe=He.avail_in,_e<Fe&&(Fe=_e),we=Fe===0?0:(He.avail_in-=Fe,o.arraySet(oe,He.input,He.next_in,Fe,Y),He.state.wrap===1?He.adler=l(He.adler,oe,Fe,Y):He.state.wrap===2&&(He.adler=u(He.adler,oe,Fe,Y)),He.next_in+=Fe,He.total_in+=Fe,Fe),k.lookahead+=we,k.lookahead+k.insert>=te)for(fe=k.strstart-k.insert,k.ins_h=k.window[fe],k.ins_h=(k.ins_h<<k.hash_shift^k.window[fe+1])&k.hash_mask;k.insert&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[fe+te-1])&k.hash_mask,k.prev[fe&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=fe,fe++,k.insert--,!(k.lookahead+k.insert<te)););}while(k.lookahead<z&&k.strm.avail_in!==0)}function We(k,De){for(var we,le;;){if(k.lookahead<z){if(ye(k),k.lookahead<z&&De===h)return P;if(k.lookahead===0)break}if(we=0,k.lookahead>=te&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+te-1])&k.hash_mask,we=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),we!==0&&k.strstart-we<=k.w_size-z&&(k.match_length=Te(k,we)),k.match_length>=te)if(le=s._tr_tally(k,k.strstart-k.match_start,k.match_length-te),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=te){for(k.match_length--;k.strstart++,k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+te-1])&k.hash_mask,we=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart,--k.match_length!=0;);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+1])&k.hash_mask;else le=s._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if(le&&(ie(k,!1),k.strm.avail_out===0))return P}return k.insert=k.strstart<te-1?k.strstart:te-1,De===f?(ie(k,!0),k.strm.avail_out===0?ue:U):k.last_lit&&(ie(k,!1),k.strm.avail_out===0)?P:ee}function at(k,De){for(var we,le,re;;){if(k.lookahead<z){if(ye(k),k.lookahead<z&&De===h)return P;if(k.lookahead===0)break}if(we=0,k.lookahead>=te&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+te-1])&k.hash_mask,we=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=te-1,we!==0&&k.prev_length<k.max_lazy_match&&k.strstart-we<=k.w_size-z&&(k.match_length=Te(k,we),k.match_length<=5&&(k.strategy===1||k.match_length===te&&4096<k.strstart-k.match_start)&&(k.match_length=te-1)),k.prev_length>=te&&k.match_length<=k.prev_length){for(re=k.strstart+k.lookahead-te,le=s._tr_tally(k,k.strstart-1-k.prev_match,k.prev_length-te),k.lookahead-=k.prev_length-1,k.prev_length-=2;++k.strstart<=re&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+te-1])&k.hash_mask,we=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),--k.prev_length!=0;);if(k.match_available=0,k.match_length=te-1,k.strstart++,le&&(ie(k,!1),k.strm.avail_out===0))return P}else if(k.match_available){if((le=s._tr_tally(k,0,k.window[k.strstart-1]))&&ie(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return P}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&(le=s._tr_tally(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<te-1?k.strstart:te-1,De===f?(ie(k,!0),k.strm.avail_out===0?ue:U):k.last_lit&&(ie(k,!1),k.strm.avail_out===0)?P:ee}function Ke(k,De,we,le,re){this.good_length=k,this.max_lazy=De,this.nice_length=we,this.max_chain=le,this.func=re}function tt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*R),this.dyn_dtree=new o.Buf16(2*(2*D+1)),this.bl_tree=new o.Buf16(2*(2*H+1)),ne(this.dyn_ltree),ne(this.dyn_dtree),ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(j+1),this.heap=new o.Buf16(2*V+1),ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*V+1),ne(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function lt(k){var De;return k&&k.state?(k.total_in=k.total_out=0,k.data_type=x,(De=k.state).pending=0,De.pending_out=0,De.wrap<0&&(De.wrap=-De.wrap),De.status=De.wrap?I:q,k.adler=De.wrap===2?0:1,De.last_flush=h,s._tr_init(De),m):O(k,g)}function Ie(k){var De=lt(k);return De===m&&function(we){we.window_size=2*we.w_size,ne(we.head),we.max_lazy_match=a[we.level].max_lazy,we.good_match=a[we.level].good_length,we.nice_match=a[we.level].nice_length,we.max_chain_length=a[we.level].max_chain,we.strstart=0,we.block_start=0,we.lookahead=0,we.insert=0,we.match_length=we.prev_length=te-1,we.match_available=0,we.ins_h=0}(k.state),De}function Ue(k,De,we,le,re,fe){if(!k)return g;var He=1;if(De===_&&(De=6),le<0?(He=0,le=-le):15<le&&(He=2,le-=16),re<1||C<re||we!==v||le<8||15<le||De<0||9<De||fe<0||E<fe)return O(k,g);le===8&&(le=9);var oe=new tt;return(k.state=oe).strm=k,oe.wrap=He,oe.gzhead=null,oe.w_bits=le,oe.w_size=1<<oe.w_bits,oe.w_mask=oe.w_size-1,oe.hash_bits=re+7,oe.hash_size=1<<oe.hash_bits,oe.hash_mask=oe.hash_size-1,oe.hash_shift=~~((oe.hash_bits+te-1)/te),oe.window=new o.Buf8(2*oe.w_size),oe.head=new o.Buf16(oe.hash_size),oe.prev=new o.Buf16(oe.w_size),oe.lit_bufsize=1<<re+6,oe.pending_buf_size=4*oe.lit_bufsize,oe.pending_buf=new o.Buf8(oe.pending_buf_size),oe.d_buf=1*oe.lit_bufsize,oe.l_buf=3*oe.lit_bufsize,oe.level=De,oe.strategy=fe,oe.method=we,Ie(k)}a=[new Ke(0,0,0,0,function(k,De){var we=65535;for(we>k.pending_buf_size-5&&(we=k.pending_buf_size-5);;){if(k.lookahead<=1){if(ye(k),k.lookahead===0&&De===h)return P;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;var le=k.block_start+we;if((k.strstart===0||k.strstart>=le)&&(k.lookahead=k.strstart-le,k.strstart=le,ie(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-z&&(ie(k,!1),k.strm.avail_out===0))return P}return k.insert=0,De===f?(ie(k,!0),k.strm.avail_out===0?ue:U):(k.strstart>k.block_start&&(ie(k,!1),k.strm.avail_out),P)}),new Ke(4,4,8,4,We),new Ke(4,5,16,8,We),new Ke(4,6,32,32,We),new Ke(4,4,16,16,at),new Ke(8,16,32,32,at),new Ke(8,16,128,128,at),new Ke(8,32,128,256,at),new Ke(32,128,258,1024,at),new Ke(32,258,258,4096,at)],i.deflateInit=function(k,De){return Ue(k,De,v,15,8,0)},i.deflateInit2=Ue,i.deflateReset=Ie,i.deflateResetKeep=lt,i.deflateSetHeader=function(k,De){return k&&k.state?k.state.wrap!==2?g:(k.state.gzhead=De,m):g},i.deflate=function(k,De){var we,le,re,fe;if(!k||!k.state||5<De||De<0)return k?O(k,g):g;if(le=k.state,!k.output||!k.input&&k.avail_in!==0||le.status===666&&De!==f)return O(k,k.avail_out===0?-5:g);if(le.strm=k,we=le.last_flush,le.last_flush=De,le.status===I)if(le.wrap===2)k.adler=0,Re(le,31),Re(le,139),Re(le,8),le.gzhead?(Re(le,(le.gzhead.text?1:0)+(le.gzhead.hcrc?2:0)+(le.gzhead.extra?4:0)+(le.gzhead.name?8:0)+(le.gzhead.comment?16:0)),Re(le,255&le.gzhead.time),Re(le,le.gzhead.time>>8&255),Re(le,le.gzhead.time>>16&255),Re(le,le.gzhead.time>>24&255),Re(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),Re(le,255&le.gzhead.os),le.gzhead.extra&&le.gzhead.extra.length&&(Re(le,255&le.gzhead.extra.length),Re(le,le.gzhead.extra.length>>8&255)),le.gzhead.hcrc&&(k.adler=u(k.adler,le.pending_buf,le.pending,0)),le.gzindex=0,le.status=69):(Re(le,0),Re(le,0),Re(le,0),Re(le,0),Re(le,0),Re(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),Re(le,3),le.status=q);else{var He=v+(le.w_bits-8<<4)<<8;He|=(2<=le.strategy||le.level<2?0:le.level<6?1:le.level===6?2:3)<<6,le.strstart!==0&&(He|=32),He+=31-He%31,le.status=q,Be(le,He),le.strstart!==0&&(Be(le,k.adler>>>16),Be(le,65535&k.adler)),k.adler=1}if(le.status===69)if(le.gzhead.extra){for(re=le.pending;le.gzindex<(65535&le.gzhead.extra.length)&&(le.pending!==le.pending_buf_size||(le.gzhead.hcrc&&le.pending>re&&(k.adler=u(k.adler,le.pending_buf,le.pending-re,re)),se(k),re=le.pending,le.pending!==le.pending_buf_size));)Re(le,255&le.gzhead.extra[le.gzindex]),le.gzindex++;le.gzhead.hcrc&&le.pending>re&&(k.adler=u(k.adler,le.pending_buf,le.pending-re,re)),le.gzindex===le.gzhead.extra.length&&(le.gzindex=0,le.status=73)}else le.status=73;if(le.status===73)if(le.gzhead.name){re=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>re&&(k.adler=u(k.adler,le.pending_buf,le.pending-re,re)),se(k),re=le.pending,le.pending===le.pending_buf_size)){fe=1;break}fe=le.gzindex<le.gzhead.name.length?255&le.gzhead.name.charCodeAt(le.gzindex++):0,Re(le,fe)}while(fe!==0);le.gzhead.hcrc&&le.pending>re&&(k.adler=u(k.adler,le.pending_buf,le.pending-re,re)),fe===0&&(le.gzindex=0,le.status=91)}else le.status=91;if(le.status===91)if(le.gzhead.comment){re=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>re&&(k.adler=u(k.adler,le.pending_buf,le.pending-re,re)),se(k),re=le.pending,le.pending===le.pending_buf_size)){fe=1;break}fe=le.gzindex<le.gzhead.comment.length?255&le.gzhead.comment.charCodeAt(le.gzindex++):0,Re(le,fe)}while(fe!==0);le.gzhead.hcrc&&le.pending>re&&(k.adler=u(k.adler,le.pending_buf,le.pending-re,re)),fe===0&&(le.status=103)}else le.status=103;if(le.status===103&&(le.gzhead.hcrc?(le.pending+2>le.pending_buf_size&&se(k),le.pending+2<=le.pending_buf_size&&(Re(le,255&k.adler),Re(le,k.adler>>8&255),k.adler=0,le.status=q)):le.status=q),le.pending!==0){if(se(k),k.avail_out===0)return le.last_flush=-1,m}else if(k.avail_in===0&&G(De)<=G(we)&&De!==f)return O(k,-5);if(le.status===666&&k.avail_in!==0)return O(k,-5);if(k.avail_in!==0||le.lookahead!==0||De!==h&&le.status!==666){var oe=le.strategy===2?function(Y,_e){for(var Fe;;){if(Y.lookahead===0&&(ye(Y),Y.lookahead===0)){if(_e===h)return P;break}if(Y.match_length=0,Fe=s._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++,Fe&&(ie(Y,!1),Y.strm.avail_out===0))return P}return Y.insert=0,_e===f?(ie(Y,!0),Y.strm.avail_out===0?ue:U):Y.last_lit&&(ie(Y,!1),Y.strm.avail_out===0)?P:ee}(le,De):le.strategy===3?function(Y,_e){for(var Fe,Le,Pe,rt,Ee=Y.window;;){if(Y.lookahead<=$){if(ye(Y),Y.lookahead<=$&&_e===h)return P;if(Y.lookahead===0)break}if(Y.match_length=0,Y.lookahead>=te&&0<Y.strstart&&(Le=Ee[Pe=Y.strstart-1])===Ee[++Pe]&&Le===Ee[++Pe]&&Le===Ee[++Pe]){rt=Y.strstart+$;do;while(Le===Ee[++Pe]&&Le===Ee[++Pe]&&Le===Ee[++Pe]&&Le===Ee[++Pe]&&Le===Ee[++Pe]&&Le===Ee[++Pe]&&Le===Ee[++Pe]&&Le===Ee[++Pe]&&Pe<rt);Y.match_length=$-(rt-Pe),Y.match_length>Y.lookahead&&(Y.match_length=Y.lookahead)}if(Y.match_length>=te?(Fe=s._tr_tally(Y,1,Y.match_length-te),Y.lookahead-=Y.match_length,Y.strstart+=Y.match_length,Y.match_length=0):(Fe=s._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++),Fe&&(ie(Y,!1),Y.strm.avail_out===0))return P}return Y.insert=0,_e===f?(ie(Y,!0),Y.strm.avail_out===0?ue:U):Y.last_lit&&(ie(Y,!1),Y.strm.avail_out===0)?P:ee}(le,De):a[le.level].func(le,De);if(oe!==ue&&oe!==U||(le.status=666),oe===P||oe===ue)return k.avail_out===0&&(le.last_flush=-1),m;if(oe===ee&&(De===1?s._tr_align(le):De!==5&&(s._tr_stored_block(le,0,0,!1),De===3&&(ne(le.head),le.lookahead===0&&(le.strstart=0,le.block_start=0,le.insert=0))),se(k),k.avail_out===0))return le.last_flush=-1,m}return De!==f?m:le.wrap<=0?1:(le.wrap===2?(Re(le,255&k.adler),Re(le,k.adler>>8&255),Re(le,k.adler>>16&255),Re(le,k.adler>>24&255),Re(le,255&k.total_in),Re(le,k.total_in>>8&255),Re(le,k.total_in>>16&255),Re(le,k.total_in>>24&255)):(Be(le,k.adler>>>16),Be(le,65535&k.adler)),se(k),0<le.wrap&&(le.wrap=-le.wrap),le.pending!==0?m:1)},i.deflateEnd=function(k){var De;return k&&k.state?(De=k.state.status)!==I&&De!==69&&De!==73&&De!==91&&De!==103&&De!==q&&De!==666?O(k,g):(k.state=null,De===q?O(k,-3):m):g},i.deflateSetDictionary=function(k,De){var we,le,re,fe,He,oe,Y,_e,Fe=De.length;if(!k||!k.state||(fe=(we=k.state).wrap)===2||fe===1&&we.status!==I||we.lookahead)return g;for(fe===1&&(k.adler=l(k.adler,De,Fe,0)),we.wrap=0,Fe>=we.w_size&&(fe===0&&(ne(we.head),we.strstart=0,we.block_start=0,we.insert=0),_e=new o.Buf8(we.w_size),o.arraySet(_e,De,Fe-we.w_size,we.w_size,0),De=_e,Fe=we.w_size),He=k.avail_in,oe=k.next_in,Y=k.input,k.avail_in=Fe,k.next_in=0,k.input=De,ye(we);we.lookahead>=te;){for(le=we.strstart,re=we.lookahead-(te-1);we.ins_h=(we.ins_h<<we.hash_shift^we.window[le+te-1])&we.hash_mask,we.prev[le&we.w_mask]=we.head[we.ins_h],we.head[we.ins_h]=le,le++,--re;);we.strstart=le,we.lookahead=te-1,ye(we)}return we.strstart+=we.lookahead,we.block_start=we.strstart,we.insert=we.lookahead,we.lookahead=0,we.match_length=we.prev_length=te-1,we.match_available=0,k.next_in=oe,k.input=Y,k.avail_in=He,we.wrap=fe,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,i){r.exports=function(a,o){var s,l,u,d,h,f,m,g,_,E,x,v,C,V,D,H,R,j,te,$,z,I,q,P,ee;s=a.state,l=a.next_in,P=a.input,u=l+(a.avail_in-5),d=a.next_out,ee=a.output,h=d-(o-a.avail_out),f=d+(a.avail_out-257),m=s.dmax,g=s.wsize,_=s.whave,E=s.wnext,x=s.window,v=s.hold,C=s.bits,V=s.lencode,D=s.distcode,H=(1<<s.lenbits)-1,R=(1<<s.distbits)-1;e:do{C<15&&(v+=P[l++]<<C,C+=8,v+=P[l++]<<C,C+=8),j=V[v&H];t:for(;;){if(v>>>=te=j>>>24,C-=te,(te=j>>>16&255)===0)ee[d++]=65535&j;else{if(!(16&te)){if((64&te)==0){j=V[(65535&j)+(v&(1<<te)-1)];continue t}if(32&te){s.mode=12;break e}a.msg="invalid literal/length code",s.mode=30;break e}$=65535&j,(te&=15)&&(C<te&&(v+=P[l++]<<C,C+=8),$+=v&(1<<te)-1,v>>>=te,C-=te),C<15&&(v+=P[l++]<<C,C+=8,v+=P[l++]<<C,C+=8),j=D[v&R];n:for(;;){if(v>>>=te=j>>>24,C-=te,!(16&(te=j>>>16&255))){if((64&te)==0){j=D[(65535&j)+(v&(1<<te)-1)];continue n}a.msg="invalid distance code",s.mode=30;break e}if(z=65535&j,C<(te&=15)&&(v+=P[l++]<<C,(C+=8)<te&&(v+=P[l++]<<C,C+=8)),m<(z+=v&(1<<te)-1)){a.msg="invalid distance too far back",s.mode=30;break e}if(v>>>=te,C-=te,(te=d-h)<z){if(_<(te=z-te)&&s.sane){a.msg="invalid distance too far back",s.mode=30;break e}if(q=x,(I=0)===E){if(I+=g-te,te<$){for($-=te;ee[d++]=x[I++],--te;);I=d-z,q=ee}}else if(E<te){if(I+=g+E-te,(te-=E)<$){for($-=te;ee[d++]=x[I++],--te;);if(I=0,E<$){for($-=te=E;ee[d++]=x[I++],--te;);I=d-z,q=ee}}}else if(I+=E-te,te<$){for($-=te;ee[d++]=x[I++],--te;);I=d-z,q=ee}for(;2<$;)ee[d++]=q[I++],ee[d++]=q[I++],ee[d++]=q[I++],$-=3;$&&(ee[d++]=q[I++],1<$&&(ee[d++]=q[I++]))}else{for(I=d-z;ee[d++]=ee[I++],ee[d++]=ee[I++],ee[d++]=ee[I++],2<($-=3););$&&(ee[d++]=ee[I++],1<$&&(ee[d++]=ee[I++]))}break}}break}}while(l<u&&d<f);l-=$=C>>3,v&=(1<<(C-=$<<3))-1,a.next_in=l,a.next_out=d,a.avail_in=l<u?u-l+5:5-(l-u),a.avail_out=d<f?f-d+257:257-(d-f),s.hold=v,s.bits=C}},{}],49:[function(t,r,i){var a=t("../utils/common"),o=t("./adler32"),s=t("./crc32"),l=t("./inffast"),u=t("./inftrees"),d=1,h=2,f=0,m=-2,g=1,_=852,E=592;function x(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(I){var q;return I&&I.state?(q=I.state,I.total_in=I.total_out=q.total=0,I.msg="",q.wrap&&(I.adler=1&q.wrap),q.mode=g,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new a.Buf32(_),q.distcode=q.distdyn=new a.Buf32(E),q.sane=1,q.back=-1,f):m}function V(I){var q;return I&&I.state?((q=I.state).wsize=0,q.whave=0,q.wnext=0,C(I)):m}function D(I,q){var P,ee;return I&&I.state?(ee=I.state,q<0?(P=0,q=-q):(P=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?m:(ee.window!==null&&ee.wbits!==q&&(ee.window=null),ee.wrap=P,ee.wbits=q,V(I))):m}function H(I,q){var P,ee;return I?(ee=new v,(I.state=ee).window=null,(P=D(I,q))!==f&&(I.state=null),P):m}var R,j,te=!0;function $(I){if(te){var q;for(R=new a.Buf32(512),j=new a.Buf32(32),q=0;q<144;)I.lens[q++]=8;for(;q<256;)I.lens[q++]=9;for(;q<280;)I.lens[q++]=7;for(;q<288;)I.lens[q++]=8;for(u(d,I.lens,0,288,R,0,I.work,{bits:9}),q=0;q<32;)I.lens[q++]=5;u(h,I.lens,0,32,j,0,I.work,{bits:5}),te=!1}I.lencode=R,I.lenbits=9,I.distcode=j,I.distbits=5}function z(I,q,P,ee){var ue,U=I.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new a.Buf8(U.wsize)),ee>=U.wsize?(a.arraySet(U.window,q,P-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(ee<(ue=U.wsize-U.wnext)&&(ue=ee),a.arraySet(U.window,q,P-ee,ue,U.wnext),(ee-=ue)?(a.arraySet(U.window,q,P-ee,ee,0),U.wnext=ee,U.whave=U.wsize):(U.wnext+=ue,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=ue))),0}i.inflateReset=V,i.inflateReset2=D,i.inflateResetKeep=C,i.inflateInit=function(I){return H(I,15)},i.inflateInit2=H,i.inflate=function(I,q){var P,ee,ue,U,O,G,ne,se,ie,Re,Be,Te,ye,We,at,Ke,tt,lt,Ie,Ue,k,De,we,le,re=0,fe=new a.Buf8(4),He=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return m;(P=I.state).mode===12&&(P.mode=13),O=I.next_out,ue=I.output,ne=I.avail_out,U=I.next_in,ee=I.input,G=I.avail_in,se=P.hold,ie=P.bits,Re=G,Be=ne,De=f;e:for(;;)switch(P.mode){case g:if(P.wrap===0){P.mode=13;break}for(;ie<16;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}if(2&P.wrap&&se===35615){fe[P.check=0]=255&se,fe[1]=se>>>8&255,P.check=s(P.check,fe,2,0),ie=se=0,P.mode=2;break}if(P.flags=0,P.head&&(P.head.done=!1),!(1&P.wrap)||(((255&se)<<8)+(se>>8))%31){I.msg="incorrect header check",P.mode=30;break}if((15&se)!=8){I.msg="unknown compression method",P.mode=30;break}if(ie-=4,k=8+(15&(se>>>=4)),P.wbits===0)P.wbits=k;else if(k>P.wbits){I.msg="invalid window size",P.mode=30;break}P.dmax=1<<k,I.adler=P.check=1,P.mode=512&se?10:12,ie=se=0;break;case 2:for(;ie<16;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}if(P.flags=se,(255&P.flags)!=8){I.msg="unknown compression method",P.mode=30;break}if(57344&P.flags){I.msg="unknown header flags set",P.mode=30;break}P.head&&(P.head.text=se>>8&1),512&P.flags&&(fe[0]=255&se,fe[1]=se>>>8&255,P.check=s(P.check,fe,2,0)),ie=se=0,P.mode=3;case 3:for(;ie<32;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}P.head&&(P.head.time=se),512&P.flags&&(fe[0]=255&se,fe[1]=se>>>8&255,fe[2]=se>>>16&255,fe[3]=se>>>24&255,P.check=s(P.check,fe,4,0)),ie=se=0,P.mode=4;case 4:for(;ie<16;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}P.head&&(P.head.xflags=255&se,P.head.os=se>>8),512&P.flags&&(fe[0]=255&se,fe[1]=se>>>8&255,P.check=s(P.check,fe,2,0)),ie=se=0,P.mode=5;case 5:if(1024&P.flags){for(;ie<16;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}P.length=se,P.head&&(P.head.extra_len=se),512&P.flags&&(fe[0]=255&se,fe[1]=se>>>8&255,P.check=s(P.check,fe,2,0)),ie=se=0}else P.head&&(P.head.extra=null);P.mode=6;case 6:if(1024&P.flags&&(G<(Te=P.length)&&(Te=G),Te&&(P.head&&(k=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),a.arraySet(P.head.extra,ee,U,Te,k)),512&P.flags&&(P.check=s(P.check,ee,Te,U)),G-=Te,U+=Te,P.length-=Te),P.length))break e;P.length=0,P.mode=7;case 7:if(2048&P.flags){if(G===0)break e;for(Te=0;k=ee[U+Te++],P.head&&k&&P.length<65536&&(P.head.name+=String.fromCharCode(k)),k&&Te<G;);if(512&P.flags&&(P.check=s(P.check,ee,Te,U)),G-=Te,U+=Te,k)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=8;case 8:if(4096&P.flags){if(G===0)break e;for(Te=0;k=ee[U+Te++],P.head&&k&&P.length<65536&&(P.head.comment+=String.fromCharCode(k)),k&&Te<G;);if(512&P.flags&&(P.check=s(P.check,ee,Te,U)),G-=Te,U+=Te,k)break e}else P.head&&(P.head.comment=null);P.mode=9;case 9:if(512&P.flags){for(;ie<16;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}if(se!==(65535&P.check)){I.msg="header crc mismatch",P.mode=30;break}ie=se=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),I.adler=P.check=0,P.mode=12;break;case 10:for(;ie<32;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}I.adler=P.check=x(se),ie=se=0,P.mode=11;case 11:if(P.havedict===0)return I.next_out=O,I.avail_out=ne,I.next_in=U,I.avail_in=G,P.hold=se,P.bits=ie,2;I.adler=P.check=1,P.mode=12;case 12:if(q===5||q===6)break e;case 13:if(P.last){se>>>=7&ie,ie-=7&ie,P.mode=27;break}for(;ie<3;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}switch(P.last=1&se,ie-=1,3&(se>>>=1)){case 0:P.mode=14;break;case 1:if($(P),P.mode=20,q!==6)break;se>>>=2,ie-=2;break e;case 2:P.mode=17;break;case 3:I.msg="invalid block type",P.mode=30}se>>>=2,ie-=2;break;case 14:for(se>>>=7&ie,ie-=7&ie;ie<32;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}if((65535&se)!=(se>>>16^65535)){I.msg="invalid stored block lengths",P.mode=30;break}if(P.length=65535&se,ie=se=0,P.mode=15,q===6)break e;case 15:P.mode=16;case 16:if(Te=P.length){if(G<Te&&(Te=G),ne<Te&&(Te=ne),Te===0)break e;a.arraySet(ue,ee,U,Te,O),G-=Te,U+=Te,ne-=Te,O+=Te,P.length-=Te;break}P.mode=12;break;case 17:for(;ie<14;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}if(P.nlen=257+(31&se),se>>>=5,ie-=5,P.ndist=1+(31&se),se>>>=5,ie-=5,P.ncode=4+(15&se),se>>>=4,ie-=4,286<P.nlen||30<P.ndist){I.msg="too many length or distance symbols",P.mode=30;break}P.have=0,P.mode=18;case 18:for(;P.have<P.ncode;){for(;ie<3;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}P.lens[He[P.have++]]=7&se,se>>>=3,ie-=3}for(;P.have<19;)P.lens[He[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,we={bits:P.lenbits},De=u(0,P.lens,0,19,P.lencode,0,P.work,we),P.lenbits=we.bits,De){I.msg="invalid code lengths set",P.mode=30;break}P.have=0,P.mode=19;case 19:for(;P.have<P.nlen+P.ndist;){for(;Ke=(re=P.lencode[se&(1<<P.lenbits)-1])>>>16&255,tt=65535&re,!((at=re>>>24)<=ie);){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}if(tt<16)se>>>=at,ie-=at,P.lens[P.have++]=tt;else{if(tt===16){for(le=at+2;ie<le;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}if(se>>>=at,ie-=at,P.have===0){I.msg="invalid bit length repeat",P.mode=30;break}k=P.lens[P.have-1],Te=3+(3&se),se>>>=2,ie-=2}else if(tt===17){for(le=at+3;ie<le;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}ie-=at,k=0,Te=3+(7&(se>>>=at)),se>>>=3,ie-=3}else{for(le=at+7;ie<le;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}ie-=at,k=0,Te=11+(127&(se>>>=at)),se>>>=7,ie-=7}if(P.have+Te>P.nlen+P.ndist){I.msg="invalid bit length repeat",P.mode=30;break}for(;Te--;)P.lens[P.have++]=k}}if(P.mode===30)break;if(P.lens[256]===0){I.msg="invalid code -- missing end-of-block",P.mode=30;break}if(P.lenbits=9,we={bits:P.lenbits},De=u(d,P.lens,0,P.nlen,P.lencode,0,P.work,we),P.lenbits=we.bits,De){I.msg="invalid literal/lengths set",P.mode=30;break}if(P.distbits=6,P.distcode=P.distdyn,we={bits:P.distbits},De=u(h,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,we),P.distbits=we.bits,De){I.msg="invalid distances set",P.mode=30;break}if(P.mode=20,q===6)break e;case 20:P.mode=21;case 21:if(6<=G&&258<=ne){I.next_out=O,I.avail_out=ne,I.next_in=U,I.avail_in=G,P.hold=se,P.bits=ie,l(I,Be),O=I.next_out,ue=I.output,ne=I.avail_out,U=I.next_in,ee=I.input,G=I.avail_in,se=P.hold,ie=P.bits,P.mode===12&&(P.back=-1);break}for(P.back=0;Ke=(re=P.lencode[se&(1<<P.lenbits)-1])>>>16&255,tt=65535&re,!((at=re>>>24)<=ie);){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}if(Ke&&(240&Ke)==0){for(lt=at,Ie=Ke,Ue=tt;Ke=(re=P.lencode[Ue+((se&(1<<lt+Ie)-1)>>lt)])>>>16&255,tt=65535&re,!(lt+(at=re>>>24)<=ie);){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}se>>>=lt,ie-=lt,P.back+=lt}if(se>>>=at,ie-=at,P.back+=at,P.length=tt,Ke===0){P.mode=26;break}if(32&Ke){P.back=-1,P.mode=12;break}if(64&Ke){I.msg="invalid literal/length code",P.mode=30;break}P.extra=15&Ke,P.mode=22;case 22:if(P.extra){for(le=P.extra;ie<le;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}P.length+=se&(1<<P.extra)-1,se>>>=P.extra,ie-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=23;case 23:for(;Ke=(re=P.distcode[se&(1<<P.distbits)-1])>>>16&255,tt=65535&re,!((at=re>>>24)<=ie);){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}if((240&Ke)==0){for(lt=at,Ie=Ke,Ue=tt;Ke=(re=P.distcode[Ue+((se&(1<<lt+Ie)-1)>>lt)])>>>16&255,tt=65535&re,!(lt+(at=re>>>24)<=ie);){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}se>>>=lt,ie-=lt,P.back+=lt}if(se>>>=at,ie-=at,P.back+=at,64&Ke){I.msg="invalid distance code",P.mode=30;break}P.offset=tt,P.extra=15&Ke,P.mode=24;case 24:if(P.extra){for(le=P.extra;ie<le;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}P.offset+=se&(1<<P.extra)-1,se>>>=P.extra,ie-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){I.msg="invalid distance too far back",P.mode=30;break}P.mode=25;case 25:if(ne===0)break e;if(Te=Be-ne,P.offset>Te){if((Te=P.offset-Te)>P.whave&&P.sane){I.msg="invalid distance too far back",P.mode=30;break}ye=Te>P.wnext?(Te-=P.wnext,P.wsize-Te):P.wnext-Te,Te>P.length&&(Te=P.length),We=P.window}else We=ue,ye=O-P.offset,Te=P.length;for(ne<Te&&(Te=ne),ne-=Te,P.length-=Te;ue[O++]=We[ye++],--Te;);P.length===0&&(P.mode=21);break;case 26:if(ne===0)break e;ue[O++]=P.length,ne--,P.mode=21;break;case 27:if(P.wrap){for(;ie<32;){if(G===0)break e;G--,se|=ee[U++]<<ie,ie+=8}if(Be-=ne,I.total_out+=Be,P.total+=Be,Be&&(I.adler=P.check=P.flags?s(P.check,ue,Be,O-Be):o(P.check,ue,Be,O-Be)),Be=ne,(P.flags?se:x(se))!==P.check){I.msg="incorrect data check",P.mode=30;break}ie=se=0}P.mode=28;case 28:if(P.wrap&&P.flags){for(;ie<32;){if(G===0)break e;G--,se+=ee[U++]<<ie,ie+=8}if(se!==(4294967295&P.total)){I.msg="incorrect length check",P.mode=30;break}ie=se=0}P.mode=29;case 29:De=1;break e;case 30:De=-3;break e;case 31:return-4;case 32:default:return m}return I.next_out=O,I.avail_out=ne,I.next_in=U,I.avail_in=G,P.hold=se,P.bits=ie,(P.wsize||Be!==I.avail_out&&P.mode<30&&(P.mode<27||q!==4))&&z(I,I.output,I.next_out,Be-I.avail_out)?(P.mode=31,-4):(Re-=I.avail_in,Be-=I.avail_out,I.total_in+=Re,I.total_out+=Be,P.total+=Be,P.wrap&&Be&&(I.adler=P.check=P.flags?s(P.check,ue,Be,I.next_out-Be):o(P.check,ue,Be,I.next_out-Be)),I.data_type=P.bits+(P.last?64:0)+(P.mode===12?128:0)+(P.mode===20||P.mode===15?256:0),(Re==0&&Be===0||q===4)&&De===f&&(De=-5),De)},i.inflateEnd=function(I){if(!I||!I.state)return m;var q=I.state;return q.window&&(q.window=null),I.state=null,f},i.inflateGetHeader=function(I,q){var P;return I&&I.state?(2&(P=I.state).wrap)==0?m:((P.head=q).done=!1,f):m},i.inflateSetDictionary=function(I,q){var P,ee=q.length;return I&&I.state?(P=I.state).wrap!==0&&P.mode!==11?m:P.mode===11&&o(1,q,ee,0)!==P.check?-3:z(I,q,ee,ee)?(P.mode=31,-4):(P.havedict=1,f):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var a=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,f,m,g,_,E,x){var v,C,V,D,H,R,j,te,$,z=x.bits,I=0,q=0,P=0,ee=0,ue=0,U=0,O=0,G=0,ne=0,se=0,ie=null,Re=0,Be=new a.Buf16(16),Te=new a.Buf16(16),ye=null,We=0;for(I=0;I<=15;I++)Be[I]=0;for(q=0;q<m;q++)Be[h[f+q]]++;for(ue=z,ee=15;1<=ee&&Be[ee]===0;ee--);if(ee<ue&&(ue=ee),ee===0)return g[_++]=20971520,g[_++]=20971520,x.bits=1,0;for(P=1;P<ee&&Be[P]===0;P++);for(ue<P&&(ue=P),I=G=1;I<=15;I++)if(G<<=1,(G-=Be[I])<0)return-1;if(0<G&&(d===0||ee!==1))return-1;for(Te[1]=0,I=1;I<15;I++)Te[I+1]=Te[I]+Be[I];for(q=0;q<m;q++)h[f+q]!==0&&(E[Te[h[f+q]]++]=q);if(R=d===0?(ie=ye=E,19):d===1?(ie=o,Re-=257,ye=s,We-=257,256):(ie=l,ye=u,-1),I=P,H=_,O=q=se=0,V=-1,D=(ne=1<<(U=ue))-1,d===1&&852<ne||d===2&&592<ne)return 1;for(;;){for(j=I-O,$=E[q]<R?(te=0,E[q]):E[q]>R?(te=ye[We+E[q]],ie[Re+E[q]]):(te=96,0),v=1<<I-O,P=C=1<<U;g[H+(se>>O)+(C-=v)]=j<<24|te<<16|$|0,C!==0;);for(v=1<<I-1;se&v;)v>>=1;if(v!==0?(se&=v-1,se+=v):se=0,q++,--Be[I]==0){if(I===ee)break;I=h[f+E[q]]}if(ue<I&&(se&D)!==V){for(O===0&&(O=ue),H+=P,G=1<<(U=I-O);U+O<ee&&!((G-=Be[U+O])<=0);)U++,G<<=1;if(ne+=1<<U,d===1&&852<ne||d===2&&592<ne)return 1;g[V=se&D]=ue<<24|U<<16|H-_|0}}return se!==0&&(g[H+se]=I-O<<24|64<<16|0),x.bits=ue,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var a=t("../utils/common"),o=0,s=1;function l(re){for(var fe=re.length;0<=--fe;)re[fe]=0}var u=0,d=29,h=256,f=h+1+d,m=30,g=19,_=2*f+1,E=15,x=16,v=7,C=256,V=16,D=17,H=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(2*(f+2));l(z);var I=new Array(2*m);l(I);var q=new Array(512);l(q);var P=new Array(256);l(P);var ee=new Array(d);l(ee);var ue,U,O,G=new Array(m);function ne(re,fe,He,oe,Y){this.static_tree=re,this.extra_bits=fe,this.extra_base=He,this.elems=oe,this.max_length=Y,this.has_stree=re&&re.length}function se(re,fe){this.dyn_tree=re,this.max_code=0,this.stat_desc=fe}function ie(re){return re<256?q[re]:q[256+(re>>>7)]}function Re(re,fe){re.pending_buf[re.pending++]=255&fe,re.pending_buf[re.pending++]=fe>>>8&255}function Be(re,fe,He){re.bi_valid>x-He?(re.bi_buf|=fe<<re.bi_valid&65535,Re(re,re.bi_buf),re.bi_buf=fe>>x-re.bi_valid,re.bi_valid+=He-x):(re.bi_buf|=fe<<re.bi_valid&65535,re.bi_valid+=He)}function Te(re,fe,He){Be(re,He[2*fe],He[2*fe+1])}function ye(re,fe){for(var He=0;He|=1&re,re>>>=1,He<<=1,0<--fe;);return He>>>1}function We(re,fe,He){var oe,Y,_e=new Array(E+1),Fe=0;for(oe=1;oe<=E;oe++)_e[oe]=Fe=Fe+He[oe-1]<<1;for(Y=0;Y<=fe;Y++){var Le=re[2*Y+1];Le!==0&&(re[2*Y]=ye(_e[Le]++,Le))}}function at(re){var fe;for(fe=0;fe<f;fe++)re.dyn_ltree[2*fe]=0;for(fe=0;fe<m;fe++)re.dyn_dtree[2*fe]=0;for(fe=0;fe<g;fe++)re.bl_tree[2*fe]=0;re.dyn_ltree[2*C]=1,re.opt_len=re.static_len=0,re.last_lit=re.matches=0}function Ke(re){8<re.bi_valid?Re(re,re.bi_buf):0<re.bi_valid&&(re.pending_buf[re.pending++]=re.bi_buf),re.bi_buf=0,re.bi_valid=0}function tt(re,fe,He,oe){var Y=2*fe,_e=2*He;return re[Y]<re[_e]||re[Y]===re[_e]&&oe[fe]<=oe[He]}function lt(re,fe,He){for(var oe=re.heap[He],Y=He<<1;Y<=re.heap_len&&(Y<re.heap_len&&tt(fe,re.heap[Y+1],re.heap[Y],re.depth)&&Y++,!tt(fe,oe,re.heap[Y],re.depth));)re.heap[He]=re.heap[Y],He=Y,Y<<=1;re.heap[He]=oe}function Ie(re,fe,He){var oe,Y,_e,Fe,Le=0;if(re.last_lit!==0)for(;oe=re.pending_buf[re.d_buf+2*Le]<<8|re.pending_buf[re.d_buf+2*Le+1],Y=re.pending_buf[re.l_buf+Le],Le++,oe===0?Te(re,Y,fe):(Te(re,(_e=P[Y])+h+1,fe),(Fe=R[_e])!==0&&Be(re,Y-=ee[_e],Fe),Te(re,_e=ie(--oe),He),(Fe=j[_e])!==0&&Be(re,oe-=G[_e],Fe)),Le<re.last_lit;);Te(re,C,fe)}function Ue(re,fe){var He,oe,Y,_e=fe.dyn_tree,Fe=fe.stat_desc.static_tree,Le=fe.stat_desc.has_stree,Pe=fe.stat_desc.elems,rt=-1;for(re.heap_len=0,re.heap_max=_,He=0;He<Pe;He++)_e[2*He]!==0?(re.heap[++re.heap_len]=rt=He,re.depth[He]=0):_e[2*He+1]=0;for(;re.heap_len<2;)_e[2*(Y=re.heap[++re.heap_len]=rt<2?++rt:0)]=1,re.depth[Y]=0,re.opt_len--,Le&&(re.static_len-=Fe[2*Y+1]);for(fe.max_code=rt,He=re.heap_len>>1;1<=He;He--)lt(re,_e,He);for(Y=Pe;He=re.heap[1],re.heap[1]=re.heap[re.heap_len--],lt(re,_e,1),oe=re.heap[1],re.heap[--re.heap_max]=He,re.heap[--re.heap_max]=oe,_e[2*Y]=_e[2*He]+_e[2*oe],re.depth[Y]=(re.depth[He]>=re.depth[oe]?re.depth[He]:re.depth[oe])+1,_e[2*He+1]=_e[2*oe+1]=Y,re.heap[1]=Y++,lt(re,_e,1),2<=re.heap_len;);re.heap[--re.heap_max]=re.heap[1],function(Ee,ve){var $e,_t,gt,Ce,Ft,ht,Nt=ve.dyn_tree,Je=ve.max_code,mt=ve.stat_desc.static_tree,Xt=ve.stat_desc.has_stree,xt=ve.stat_desc.extra_bits,on=ve.stat_desc.extra_base,wn=ve.stat_desc.max_length,On=0;for(Ce=0;Ce<=E;Ce++)Ee.bl_count[Ce]=0;for(Nt[2*Ee.heap[Ee.heap_max]+1]=0,$e=Ee.heap_max+1;$e<_;$e++)wn<(Ce=Nt[2*Nt[2*(_t=Ee.heap[$e])+1]+1]+1)&&(Ce=wn,On++),Nt[2*_t+1]=Ce,Je<_t||(Ee.bl_count[Ce]++,Ft=0,on<=_t&&(Ft=xt[_t-on]),ht=Nt[2*_t],Ee.opt_len+=ht*(Ce+Ft),Xt&&(Ee.static_len+=ht*(mt[2*_t+1]+Ft)));if(On!==0){do{for(Ce=wn-1;Ee.bl_count[Ce]===0;)Ce--;Ee.bl_count[Ce]--,Ee.bl_count[Ce+1]+=2,Ee.bl_count[wn]--,On-=2}while(0<On);for(Ce=wn;Ce!==0;Ce--)for(_t=Ee.bl_count[Ce];_t!==0;)Je<(gt=Ee.heap[--$e])||(Nt[2*gt+1]!==Ce&&(Ee.opt_len+=(Ce-Nt[2*gt+1])*Nt[2*gt],Nt[2*gt+1]=Ce),_t--)}}(re,fe),We(_e,rt,re.bl_count)}function k(re,fe,He){var oe,Y,_e=-1,Fe=fe[1],Le=0,Pe=7,rt=4;for(Fe===0&&(Pe=138,rt=3),fe[2*(He+1)+1]=65535,oe=0;oe<=He;oe++)Y=Fe,Fe=fe[2*(oe+1)+1],++Le<Pe&&Y===Fe||(Le<rt?re.bl_tree[2*Y]+=Le:Y!==0?(Y!==_e&&re.bl_tree[2*Y]++,re.bl_tree[2*V]++):Le<=10?re.bl_tree[2*D]++:re.bl_tree[2*H]++,_e=Y,rt=(Le=0)===Fe?(Pe=138,3):Y===Fe?(Pe=6,3):(Pe=7,4))}function De(re,fe,He){var oe,Y,_e=-1,Fe=fe[1],Le=0,Pe=7,rt=4;for(Fe===0&&(Pe=138,rt=3),oe=0;oe<=He;oe++)if(Y=Fe,Fe=fe[2*(oe+1)+1],!(++Le<Pe&&Y===Fe)){if(Le<rt)for(;Te(re,Y,re.bl_tree),--Le!=0;);else Y!==0?(Y!==_e&&(Te(re,Y,re.bl_tree),Le--),Te(re,V,re.bl_tree),Be(re,Le-3,2)):Le<=10?(Te(re,D,re.bl_tree),Be(re,Le-3,3)):(Te(re,H,re.bl_tree),Be(re,Le-11,7));_e=Y,rt=(Le=0)===Fe?(Pe=138,3):Y===Fe?(Pe=6,3):(Pe=7,4)}}l(G);var we=!1;function le(re,fe,He,oe){Be(re,(u<<1)+(oe?1:0),3),function(Y,_e,Fe,Le){Ke(Y),Le&&(Re(Y,Fe),Re(Y,~Fe)),a.arraySet(Y.pending_buf,Y.window,_e,Fe,Y.pending),Y.pending+=Fe}(re,fe,He,!0)}i._tr_init=function(re){we||(function(){var fe,He,oe,Y,_e,Fe=new Array(E+1);for(Y=oe=0;Y<d-1;Y++)for(ee[Y]=oe,fe=0;fe<1<<R[Y];fe++)P[oe++]=Y;for(P[oe-1]=Y,Y=_e=0;Y<16;Y++)for(G[Y]=_e,fe=0;fe<1<<j[Y];fe++)q[_e++]=Y;for(_e>>=7;Y<m;Y++)for(G[Y]=_e<<7,fe=0;fe<1<<j[Y]-7;fe++)q[256+_e++]=Y;for(He=0;He<=E;He++)Fe[He]=0;for(fe=0;fe<=143;)z[2*fe+1]=8,fe++,Fe[8]++;for(;fe<=255;)z[2*fe+1]=9,fe++,Fe[9]++;for(;fe<=279;)z[2*fe+1]=7,fe++,Fe[7]++;for(;fe<=287;)z[2*fe+1]=8,fe++,Fe[8]++;for(We(z,f+1,Fe),fe=0;fe<m;fe++)I[2*fe+1]=5,I[2*fe]=ye(fe,5);ue=new ne(z,R,h+1,f,E),U=new ne(I,j,0,m,E),O=new ne(new Array(0),te,0,g,v)}(),we=!0),re.l_desc=new se(re.dyn_ltree,ue),re.d_desc=new se(re.dyn_dtree,U),re.bl_desc=new se(re.bl_tree,O),re.bi_buf=0,re.bi_valid=0,at(re)},i._tr_stored_block=le,i._tr_flush_block=function(re,fe,He,oe){var Y,_e,Fe=0;0<re.level?(re.strm.data_type===2&&(re.strm.data_type=function(Le){var Pe,rt=4093624447;for(Pe=0;Pe<=31;Pe++,rt>>>=1)if(1&rt&&Le.dyn_ltree[2*Pe]!==0)return o;if(Le.dyn_ltree[18]!==0||Le.dyn_ltree[20]!==0||Le.dyn_ltree[26]!==0)return s;for(Pe=32;Pe<h;Pe++)if(Le.dyn_ltree[2*Pe]!==0)return s;return o}(re)),Ue(re,re.l_desc),Ue(re,re.d_desc),Fe=function(Le){var Pe;for(k(Le,Le.dyn_ltree,Le.l_desc.max_code),k(Le,Le.dyn_dtree,Le.d_desc.max_code),Ue(Le,Le.bl_desc),Pe=g-1;3<=Pe&&Le.bl_tree[2*$[Pe]+1]===0;Pe--);return Le.opt_len+=3*(Pe+1)+5+5+4,Pe}(re),Y=re.opt_len+3+7>>>3,(_e=re.static_len+3+7>>>3)<=Y&&(Y=_e)):Y=_e=He+5,He+4<=Y&&fe!==-1?le(re,fe,He,oe):re.strategy===4||_e===Y?(Be(re,2+(oe?1:0),3),Ie(re,z,I)):(Be(re,4+(oe?1:0),3),function(Le,Pe,rt,Ee){var ve;for(Be(Le,Pe-257,5),Be(Le,rt-1,5),Be(Le,Ee-4,4),ve=0;ve<Ee;ve++)Be(Le,Le.bl_tree[2*$[ve]+1],3);De(Le,Le.dyn_ltree,Pe-1),De(Le,Le.dyn_dtree,rt-1)}(re,re.l_desc.max_code+1,re.d_desc.max_code+1,Fe+1),Ie(re,re.dyn_ltree,re.dyn_dtree)),at(re),oe&&Ke(re)},i._tr_tally=function(re,fe,He){return re.pending_buf[re.d_buf+2*re.last_lit]=fe>>>8&255,re.pending_buf[re.d_buf+2*re.last_lit+1]=255&fe,re.pending_buf[re.l_buf+re.last_lit]=255&He,re.last_lit++,fe===0?re.dyn_ltree[2*He]++:(re.matches++,fe--,re.dyn_ltree[2*(P[He]+h+1)]++,re.dyn_dtree[2*ie(fe)]++),re.last_lit===re.lit_bufsize-1},i._tr_align=function(re){Be(re,2,3),Te(re,C,z),function(fe){fe.bi_valid===16?(Re(fe,fe.bi_buf),fe.bi_buf=0,fe.bi_valid=0):8<=fe.bi_valid&&(fe.pending_buf[fe.pending++]=255&fe.bi_buf,fe.bi_buf>>=8,fe.bi_valid-=8)}(re)}},{"../utils/common":41}],53:[function(t,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,i){(function(a){(function(o,s){if(!o.setImmediate){var l,u,d,h,f=1,m={},g=!1,_=o.document,E=Object.getPrototypeOf&&Object.getPrototypeOf(o);E=E&&E.setTimeout?E:o,l={}.toString.call(o.process)==="[object process]"?function(V){process.nextTick(function(){v(V)})}:function(){if(o.postMessage&&!o.importScripts){var V=!0,D=o.onmessage;return o.onmessage=function(){V=!1},o.postMessage("","*"),o.onmessage=D,V}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",C,!1):o.attachEvent("onmessage",C),function(V){o.postMessage(h+V,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(V){v(V.data)},function(V){d.port2.postMessage(V)}):_&&"onreadystatechange"in _.createElement("script")?(u=_.documentElement,function(V){var D=_.createElement("script");D.onreadystatechange=function(){v(V),D.onreadystatechange=null,u.removeChild(D),D=null},u.appendChild(D)}):function(V){setTimeout(v,0,V)},E.setImmediate=function(V){typeof V!="function"&&(V=new Function(""+V));for(var D=new Array(arguments.length-1),H=0;H<D.length;H++)D[H]=arguments[H+1];var R={callback:V,args:D};return m[f]=R,l(f),f++},E.clearImmediate=x}function x(V){delete m[V]}function v(V){if(g)setTimeout(v,0,V);else{var D=m[V];if(D){g=!0;try{(function(H){var R=H.callback,j=H.args;switch(j.length){case 0:R();break;case 1:R(j[0]);break;case 2:R(j[0],j[1]);break;case 3:R(j[0],j[1],j[2]);break;default:R.apply(s,j)}})(D)}finally{x(V),g=!1}}}}function C(V){V.source===o&&typeof V.data=="string"&&V.data.indexOf(h)===0&&v(+V.data.slice(h.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof window<"u"?window:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(SU);const ID=SU.exports,p4e=[{w:10,h:12},{w:8,h:8}];function m4e(n){const e=new DataView(n);if(e.byteLength<32)return!1;const t=e.getUint32(0),r=e.getUint32(4),i=e.getUint32(8);return t>r||r>i||t===r&&t!==0||t!==12&&r!==12&&i!==12||(r-t)%2!==0?!1:!!gU(r,i,e.byteLength)}function gU(n,e,t){for(const r of p4e){const i=r.w*r.h;if(!(n>0&&(e-n)%i!==0||(t-e)%(i/2)!==0))return r}return null}function S4e(n,e,t){return!1}function g4e(n){const e=new DataView(n),t=e.getUint32(0),r=e.getUint32(4),i=e.getUint32(8),a=gU(r,i,e.byteLength);if(!a)throw new Error("Unrecongized font size");const o=a.w*a.h,s={images:[],chars:[],bpp:32,charWidth:a.w,charHeight:a.h},l=[];if(t>0){const h=(r-t)/2;for(let f=0;f<h;f++)l.push(e.getUint16(t+f*2))}if(r>0){let h=r;for(;h<i;){const f=o8(new DataView(n,h,o),l,8,16),m=bp(f,a.w,a.h);s.images.push(m),h+=o}}const u=[0];for(let h=1;h<16;h++)u.push(Math.floor(255*((h+1)/16)));let d=i;for(;d<n.byteLength;){const h=o8(new DataView(n,d,o/2),u,4,32);s.chars.push(h),d+=o/2}return s}function _4e(n){const e=new ID,t=e.folder("mainfs"),r=dt.getDirectoryCount();for(let i=0;i<r;i++){const a=t.folder(i.toString()),o=dt.getFileCount(i);for(let s=0;s<o;s++){const l=dt.get(i,s);let u=s.toString();Or.isForm(l)?u+=".form":Ou.isMtnx(l)&&(u+=".mtnx"),a.file(u,l)}}e.generateAsync({type:"blob"}).then(n)}function x4e(n,e){new ID().loadAsync(n).then(r=>{r.folder("mainfs").forEach((a,o)=>{const s=/(\d+)\/(\d+)/,l=a.match(s);if(!l)return;const u=parseInt(l[1]),d=parseInt(l[2]);isNaN(u)||isNaN(d)||o.async("arraybuffer").then(h=>{wt(`Overwriting MainFS ${u}/${d}`),dt.write(u,d,h)})})},r=>{e(r)})}function v4e(){const n=new ID,e=Tt.getROMGame(),t=n.folder("mainfs"),r=dt.getDirectoryCount();for(let o=0;o<r;o++){const s=t.folder(o.toString()),l=dt.getFileCount(o);for(let u=0;u<l;u++)try{const d=dt.get(o,u);if(Or.isForm(d)){try{const f=Or.unpack(d);f.BMP1.length&&f.BMP1.forEach((m,g)=>{const _=Ea(m.parsed.src,m.parsed.width,m.parsed.height);s.file(`${u}.${g}.png`,_.substr(_.indexOf(",")+1),{base64:!0})})}catch{}continue}if(o===0&&m4e(d)||S4e(e,o,u)){let f;try{f=g4e(d)}catch{}if(f){const{charWidth:m,charHeight:g}=f;let _=0;f.chars.forEach(C=>{const V=Ea(C,m,g);s.file(`${u}.${_}.png`,V.substr(V.indexOf(",")+1),{base64:!0}),_++}),f.images.forEach(C=>{const V=Ea(C,m,g);s.file(`${u}.${_}.png`,V.substr(V.indexOf(",")+1),{base64:!0}),_++});const E=f.chars.concat(f.images).map(C=>new DataView(C)),x=Oh(E,E.length,1,m*4,g),v=Ea(x,m*E.length,g);s.file(`${u}.all.png`,v.substr(v.indexOf(",")+1),{base64:!0});continue}}const h=a(o,u);if(h.forEach((f,m)=>{const g=Ea(f.src,f.width,f.height);s.file(`${u}.${m}.png`,g.substr(g.indexOf(",")+1),{base64:!0})}),h.length>1){const f=Oh(i(o,u),h.length,1,h[0].width*4,h[0].height),m=Ea(f,h[0].width*h.length,h[0].height);s.file(`${u}.all.png`,m.substr(m.indexOf(",")+1),{base64:!0})}}catch{}}n.generateAsync({type:"blob"}).then(o=>{co.exports.saveAs(o,`mp${Tt.getGameVersion()}-images.zip`)});function i(o,s){const l=dt.get(o,s),u=vu(l);return!u||!u.length?void 0:u.map(h=>new DataView(h.src))}function a(o,s){const l=dt.get(o,s),u=vu(l);if(!(!u||!u.length))return u}}function w4e(){const n=dt.getDirectoryCount();for(let e=0;e<n;e++){const t=dt.getFileCount(e);for(let r=0;r<t;r++){const i=dt.get(e,r);if(!!Or.isForm(i))try{const a=Or.unpack(i);a.BMP1.length&&a.BMP1.forEach(o=>{const s=Ea(o.parsed.src,o.parsed.width,o.parsed.height);console.log(`${e}/${r}:`),console.log(s)})}catch{}}}}function y4e(n="",e=!1){const t=L0.getDirectoryCount("en");for(let r=0;r<t;r++){const i=L0.getStringCount("en",r);for(let a=0;a<i;a++){const o=L0.read("en",r,a);if(o.indexOf(n)<0)continue;let s=`${r}/${a} (${At(r)}/${At(a)}):
`+o;e&&(s+=`
`+X4(L0.read("en",r,a,!0))),console.log(s)}}}function E4e(n="",e=!1){const t=Bt.getStringCount();for(let r=0;r<t;r++){const i=Bt.read(r);if(i.indexOf(n)<0)continue;let a=`${r} (${At(r)}):
`+i;e&&(a+=`
`+X4(Bt.read(r,!0))),console.log(a)}}function C4e(){if(!Tt.romIsLoaded()){console.log("ROM is not loaded");return}const n=cn.count(),e=[];for(let t=0;t<n;t++){const r=cn.getInfo(t);e.push({i:At(t),rom_start:At(r.rom_start),rom_end:At(r.rom_end),code_start:At(r.code_start),rodata_start:At(r.rodata_start),bss_start:At(r.bss_start),bss_end:At(r.bss_end)})}console.table(e)}function V4e(){if(!Tt.romIsLoaded()){console.log("ROM is not loaded");return}const n=cn.count(),e=[];for(let t=0;t<n;t++){const r=cn.getInfo(t);e.push(`   - [${At(r.rom_start)}, ${At(r.rom_start+(r.code_end-r.code_start))}, "asm", "overlay${t}_main", ${At(r.code_start)}]`),e.push(`   - [${At(r.rom_start+(r.rodata_start-r.code_start))}, ${At(r.rom_start+(r.rodata_end-r.code_start))}, "bin", "overlay${t}_rodata_bin"]`),e.push(`   # overlay${t} bss: ${At(r.bss_start)} - ${At(r.bss_end)}`)}console.log(e.join(`
`))}function D4e(){if(!Tt.romIsLoaded()){console.log("ROM is not loaded");return}const n=cn.count(),e=[];for(let t=0;t<n;t++){const r=cn.getInfo(t);e.push(`  - name: overlay${t}`),e.push("    type: code"),e.push("    overlay: True"),e.push(`    start: ${At(r.rom_start)}`),e.push(`    vram: ${At(r.code_start)}`),e.push("    files:"),e.push(`      - [${At(r.rom_start)}, "asm"]`),e.push(`      - [${At(r.rom_start+(r.rodata_start-r.code_start))}, "bin"] # rodata`),e.push("")}console.log(e.join(`
`))}function F4e(n){const e=cn.getInfo(n);let t=e.code_start;const r=cn.getCodeDataView(n),i=[];for(let l=0;l<r.byteLength;l+=4){const u=r.getUint32(l);let d="? "+At(u);try{d=tH(u)}catch{console.log("UNRECOGNIZED: "+At(u))}i.push(At(t)+": "+d),t+=4}console.log(i.join(`
`));const a=cn.getRoDataView(n);let o=[];t=e.rodata_start;let s=0;for(;s<a.byteLength;)o.push("D_"+At(t,"")+": "+wu(At(a.getUint32(s),""),8,"0")),o.push("D_"+At(t+4,"")+": "+wu(At(a.getUint32(s+4),""),8,"0")),o.push("D_"+At(t+8,"")+": "+wu(At(a.getUint32(s+8),""),8,"0")),o.push("D_"+At(t+12,"")+": "+wu(At(a.getUint32(s+12),""),8,"0")),t+=16,s+=16;console.log(o.join(`
`)),o=[];for(let l=e.bss_start;l<e.bss_end;l+=4)o.push(`D_${At(l,"")}: .word 0`);console.log(o.join(`
`))}const T4e=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={sceneIndex:"",sceneRamStartAddr:"",sceneCodeStartAddr:"",sceneCodeEndAddr:"",sceneRodataStartAddr:"",sceneRodataEndAddr:"",sceneBssStartAddr:"",sceneBssEndAddr:"",romToRamNumber:"",romToRamResult:"",mainfsToRomDir:"",mainfsToRomIndex:"",mainfsToRomResult:"",printStringDir:"",printStringIndex:"",findStringValue:"",printStringRaw:!1},this.onPrintSceneAsmClick=()=>{const e=parseInt(this.state.sceneIndex);isNaN(e)||F4e(e)},this.onPrintStringClick=()=>{const e=parseInt(this.state.printStringIndex,16);if(isNaN(e))return;let t;const r=this.state.printStringRaw,i=Tt.getGameVersion()===3;let a;if(i){if(a=parseInt(this.state.printStringDir,16),isNaN(a))return;t=L0.read("en",a,e,r)}else t=Bt.read(e,r);t instanceof ArrayBuffer?oG(t):console.log(t)},this.onFindStringClick=()=>{Tt.getGameVersion()===3?y4e(this.state.findStringValue):E4e(this.state.findStringValue)},this.onRomToRamClick=()=>{let e="";const t=parseInt(this.state.romToRamNumber,16);if(!isNaN(t)){const r=cn.count();for(let i=0;i<r;i++){const a=cn.getInfo(i);if(a.rom_start<=t&&t<=a.rom_end){const o=t-a.rom_start;e=`RAM: ${At(a.ram_start+o,"")}
`,e+=`Overlay ${i} (${At(i)}) offset +${o} (+${At(o)})`;break}}e||(e=this.findInMainFS(t)),e||t>=4096&&(e=`RAM: ${At(SG(t))}`)}e?this.setState({romToRamResult:e}):this.setState({romToRamResult:"Unknown"})},this.onMainFSToRomClick=()=>{let e="";const t=parseInt(this.state.mainfsToRomDir,10),r=parseInt(this.state.mainfsToRomIndex,10);if(!isNaN(t)&&!isNaN(r)){let i=dt.getROMOffset();const a=dt.getDirectoryCount();i+=4,i+=4*a;for(let o=0;o<a;o++){const s=dt.getFileCount(o);i+=4,i+=4*s;for(let l=0;l<s;l++){if(i+=dt.getFileHeaderSize(o,l),o===t&&l===r){e=`ROM: ${At(i)}`;break}i+=dt.getCompressedSize(o,l),i=xn(i,2)}if(e)break}}this.setState({mainfsToRomResult:e||"Unknown"})},this.onSceneIndexChange=e=>{this.setState({sceneIndex:e.target.value});const t=parseInt(e.target.value);if(isNaN(t)){this.clearSceneValues();return}const r=cn.getInfo(t);if(!r){this.clearSceneValues();return}this.setState({sceneRamStartAddr:At(r.ram_start,"")}),this.setState({sceneCodeStartAddr:At(r.code_start,"")}),this.setState({sceneCodeEndAddr:At(r.code_end,"")}),this.setState({sceneRodataStartAddr:At(r.rodata_start,"")}),this.setState({sceneRodataEndAddr:At(r.rodata_end,"")}),this.setState({sceneBssStartAddr:At(r.bss_start,"")}),this.setState({sceneBssEndAddr:At(r.bss_end,"")})},this.onOverlayDownloadClick=()=>{const e=parseInt(this.state.sceneIndex);if(!isNaN(e)){const t=cn.getDataView(e);co.exports.saveAs(new Blob([t]),`overlay-${e}.bin`)}},this.onOverlayReplaceClick=()=>{const e=parseInt(this.state.sceneIndex);isNaN(e)||Bo("",t=>{const r=t.target.files[0];if(!r)return;const i=new FileReader;i.onload=a=>{const o={ram_start:parseInt(this.state.sceneRamStartAddr,16),code_start:parseInt(this.state.sceneCodeStartAddr,16),code_end:parseInt(this.state.sceneCodeEndAddr,16),rodata_start:parseInt(this.state.sceneRodataStartAddr,16),rodata_end:parseInt(this.state.sceneRodataEndAddr,16),bss_start:parseInt(this.state.sceneBssStartAddr,16),bss_end:parseInt(this.state.sceneBssEndAddr,16)};cn.replace(e,i.result,o)},i.readAsArrayBuffer(r)})}}render(){const e=!!Tt.getROMBuffer();let t;return e&&(t=Xe(ta,{children:[L(rr,{onClick:b4e,children:"Import file dump"}),L(rr,{onClick:R4e,children:"Export file dump"}),L("br",{}),L("br",{}),L(rr,{onClick:v4e,children:"Dump images"}),L(rr,{onClick:w4e,children:"Print FORM images (console)"}),L("br",{}),L("br",{}),L(rr,{onClick:C4e,children:"Print scene table (console)"}),L(rr,{onClick:V4e,children:"Print scene table n64split (console)"}),L(rr,{onClick:D4e,children:"Print scene table n64splat (console)"}),L("br",{}),L("br",{}),L("input",{type:"text",placeholder:"Directory",className:"dbInputShort",value:this.state.printStringDir,onChange:r=>this.setState({printStringDir:r.target.value})}),L("input",{type:"text",placeholder:"Index",className:"dbInputShort",value:this.state.printStringIndex,onChange:r=>this.setState({printStringIndex:r.target.value})}),L(rr,{onClick:this.onPrintStringClick,children:"Print string (console)"}),L("input",{type:"checkbox",checked:this.state.printStringRaw,onChange:r=>this.setState({printStringRaw:r.target.checked})})," ",L("label",{children:"Raw?"}),L("br",{}),L("input",{type:"text",placeholder:"Search string",className:"dbInputShort",value:this.state.findStringValue,onChange:r=>this.setState({findStringValue:r.target.value})}),L(rr,{onClick:this.onFindStringClick,children:"Find string (console)"}),L("br",{}),L("br",{}),L("input",{type:"text",placeholder:"ROM Offset",className:"dbInputShort",value:this.state.romToRamNumber,onChange:r=>this.setState({romToRamNumber:r.target.value,romToRamResult:""})}),Xe(rr,{onClick:this.onRomToRamClick,children:["ROM ","->"," RAM"]}),L("br",{}),L("span",{className:"selectable dbMonospace",children:this.state.romToRamResult}),L("br",{}),L("br",{}),L("input",{type:"text",placeholder:"Directory",className:"dbInputShort",value:this.state.mainfsToRomDir,onChange:r=>this.setState({mainfsToRomDir:r.target.value,mainfsToRomResult:""})}),L("input",{type:"text",placeholder:"Index",className:"dbInputShort",value:this.state.mainfsToRomIndex,onChange:r=>this.setState({mainfsToRomIndex:r.target.value,mainfsToRomResult:""})}),Xe(rr,{onClick:this.onMainFSToRomClick,children:["MainFS ","->"," ROM"]}),L("br",{}),L("span",{className:"selectable dbMonospace",children:this.state.mainfsToRomResult}),L("br",{}),L("br",{}),L("input",{type:"text",placeholder:"Scene number",className:"dbInputShort",value:this.state.sceneIndex,onChange:this.onSceneIndexChange}),L(rr,{onClick:this.onPrintSceneAsmClick,children:"Print scene assembly (console)"}),L(rr,{onClick:this.onOverlayDownloadClick,children:"Download"}),L(rr,{onClick:this.onOverlayReplaceClick,children:"Replace"}),L("br",{}),L("table",{role:"presentation",children:Xe("tbody",{children:[L(Au,{label:"RAM start:",value:this.state.sceneRamStartAddr,onChange:this.makeSceneValueSetter("sceneRamStartAddr")}),L(Au,{label:"code start:",value:this.state.sceneCodeStartAddr,onChange:this.makeSceneValueSetter("sceneCodeStartAddr")}),L(Au,{label:"code end:",value:this.state.sceneCodeEndAddr,onChange:this.makeSceneValueSetter("sceneCodeEndAddr")}),L(Au,{label:"rodata start:",value:this.state.sceneRodataStartAddr,onChange:this.makeSceneValueSetter("sceneRodataStartAddr")}),L(Au,{label:"rodata end:",value:this.state.sceneRodataEndAddr,onChange:this.makeSceneValueSetter("sceneRodataEndAddr")}),L(Au,{label:"bss start:",value:this.state.sceneBssStartAddr,onChange:this.makeSceneValueSetter("sceneBssStartAddr")}),L(Au,{label:"bss end:",value:this.state.sceneBssEndAddr,onChange:this.makeSceneValueSetter("sceneBssEndAddr")})]})})]})),Xe("div",{id:"debugView",children:[L("h3",{children:"Debug Functionality"}),!e&&L("p",{children:"Load a ROM to access more functionality here."}),t]})}findInMainFS(e){const t=dt.getROMOffset(),r=!!lr(z0.writeDecompressed),i=dt.getByteLength(r);if(e>t&&e<t+i){let a=t;const o=dt.getDirectoryCount();for(let s=0;s<o;s++){const l=dt.getFileCount(s);for(let u=0;u<l;u++){const d=dt.getCompressedSize(s,u);if(a+=d,a>e){const h=e-(a-d);let f=`RAM: N/A
`;return f+=`MainFS ${s}/${u} (${At(s)}/${At(u)}) offset +${h} (+${At(h)})`,f}}}}return""}makeSceneValueSetter(e){return t=>{const r=parseInt(t.target.value,16);isNaN(r)||this.setState({[e]:At(r,"")})}}clearSceneValues(){this.setState({sceneRamStartAddr:""}),this.setState({sceneCodeStartAddr:""}),this.setState({sceneCodeEndAddr:""}),this.setState({sceneRodataStartAddr:""}),this.setState({sceneRodataEndAddr:""}),this.setState({sceneBssStartAddr:""}),this.setState({sceneBssEndAddr:""})}};function Au(n){return Xe("tr",{children:[L("td",{children:L("label",{children:n.label})}),L("td",{children:L("input",{type:"text",className:"dbInputShort",value:n.value,onChange:n.onChange})})]})}function b4e(){Bo(".zip",P4e)}function P4e(n){const e=n.target.files[0];if(!e)return;const t=new FileReader;t.onload=r=>{x4e(t.result,i=>{wt(i),o0(`Something went wrong while loading the zip. ${i}`)})},t.readAsArrayBuffer(e)}function R4e(){ro(!0),_4e(L4e)}function L4e(n){co.exports.saveAs(n,`mp${Tt.getGameVersion()}-files.zip`),ro(!1)}function $g(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$g=function(e){return typeof e}:$g=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(n)}function OD(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function NB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function kD(n,e,t){return e&&NB(n.prototype,e),t&&NB(n,t),n}var Qa={VERSION:"2.0.16",NOTES:[],HEADER_CHUNK_LENGTH:14,CIRCLE_OF_FOURTHS:["C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","Bbb","Ebb","Abb"],CIRCLE_OF_FIFTHS:["C","G","D","A","E","B","F#","C#","G#","D#","A#","E#"]},B4e=[["C"],["C#","Db"],["D"],["D#","Eb"],["E"],["F"],["F#","Gb"],["G"],["G#","Ab"],["A"],["A#","Bb"],["B"]],UB=0,M4e=function(e){B4e.forEach(function(t){t.forEach(function(r){return Qa.NOTES[UB]=r+e}),UB++})};for(var Mw=-1;Mw<=9;Mw++)M4e(Mw);var wr=function(){function n(){OD(this,n)}return kD(n,null,[{key:"byteToHex",value:function(t){return("0"+t.toString(16)).slice(-2)}},{key:"bytesToHex",value:function(t){var r=[];return t.forEach(function(i){return r.push(n.byteToHex(i))}),r.join("")}},{key:"hexToNumber",value:function(t){return parseInt(t,16)}},{key:"bytesToNumber",value:function(t){return n.hexToNumber(n.bytesToHex(t))}},{key:"bytesToLetters",value:function(t){var r=[];return t.forEach(function(i){return r.push(String.fromCharCode(i))}),r.join("")}},{key:"decToBinary",value:function(t){return(t>>>0).toString(2)}},{key:"getVarIntLength",value:function(t){for(var r=t[0],i=1;r>=128;)r=t[i],i++;return i}},{key:"readVarInt",value:function(t){var r=0;return t.forEach(function(i){var a=i;a&128?(r+=a&127,r<<=7):r+=a}),r}},{key:"atob",value:function(e){function t(r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return typeof atob=="function"?atob(e):Buffer.from(e,"base64").toString("binary")})}]),n}(),I4e=function(){function n(e,t){OD(this,n),this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.index=e,this.data=t,this.delta=0,this.runningDelta=0,this.events=[];var r=this.data.subarray(this.data.length-3,this.data.length);if(!(r[0]===255&&r[1]===47&&r[2]===0))throw"Invalid MIDI file; Last three bytes of track "+this.index+"must be FF 2F 00 to mark end of track"}return kD(n,[{key:"reset",value:function(){return this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.delta=0,this.runningDelta=0,this}},{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"setEventIndexByTick",value:function(t){t=t||0;for(var r in this.events)if(this.events[r].tick>=t)return this.eventIndex=r,this}},{key:"getCurrentByte",value:function(){return this.data[this.pointer]}},{key:"getDeltaByteCount",value:function(){return wr.getVarIntLength(this.data.subarray(this.pointer))}},{key:"getDelta",value:function(){return wr.readVarInt(this.data.subarray(this.pointer,this.pointer+this.getDeltaByteCount()))}},{key:"handleEvent",value:function(t,r){if(r=r||!1,r){var i=t-this.lastTick,a=this.getDelta(),o=i>=a;if(this.pointer<this.data.length&&(r||o)){var s=this.parseEvent();if(this.enabled)return s}}else if(this.events[this.eventIndex]&&this.events[this.eventIndex].tick<=t&&(this.eventIndex++,this.enabled))return this.events[this.eventIndex-1];return null}},{key:"getStringData",value:function(t){var r=wr.getVarIntLength(this.data.subarray(t+2)),i=wr.readVarInt(this.data.subarray(t+2,t+2+r)),a=wr.bytesToLetters(this.data.subarray(t+2+r,t+2+r+i));return a}},{key:"parseEvent",value:function(){var t=this.pointer+this.getDeltaByteCount(),r={},i=this.getDeltaByteCount();if(r.track=this.index+1,r.delta=this.getDelta(),this.lastTick=this.lastTick+r.delta,this.runningDelta+=r.delta,r.tick=this.runningDelta,r.byteIndex=this.pointer,this.data[t]==255){switch(this.data[t+1]){case 0:r.name="Sequence Number";break;case 1:r.name="Text Event",r.string=this.getStringData(t);break;case 2:r.name="Copyright Notice";break;case 3:r.name="Sequence/Track Name",r.string=this.getStringData(t);break;case 4:r.name="Instrument Name",r.string=this.getStringData(t);break;case 5:r.name="Lyric",r.string=this.getStringData(t);break;case 6:r.name="Marker";break;case 7:r.name="Cue Point",r.string=this.getStringData(t);break;case 9:r.name="Device Name",r.string=this.getStringData(t);break;case 32:r.name="MIDI Channel Prefix";break;case 33:r.name="MIDI Port",r.data=wr.bytesToNumber([this.data[t+3]]);break;case 47:r.name="End of Track";break;case 81:r.name="Set Tempo",r.data=Math.round(6e7/wr.bytesToNumber(this.data.subarray(t+3,t+6))),this.tempo=r.data;break;case 84:r.name="SMTPE Offset";break;case 88:r.name="Time Signature",r.data=this.data.subarray(t+3,t+7),r.timeSignature=""+r.data[0]+"/"+Math.pow(2,r.data[1]);break;case 89:r.name="Key Signature",r.data=this.data.subarray(t+3,t+5),r.data[0]>=0?r.keySignature=Qa.CIRCLE_OF_FIFTHS[r.data[0]]:r.data[0]<0&&(r.keySignature=Qa.CIRCLE_OF_FOURTHS[Math.abs(r.data[0])]),r.data[1]==0?r.keySignature+=" Major":r.data[1]==1&&(r.keySignature+=" Minor");break;case 127:r.name="Sequencer-Specific Meta-event";break;default:r.name="Unknown: "+this.data[t+1].toString(16);break}var a=wr.getVarIntLength(this.data.subarray(t+2)),o=wr.readVarInt(this.data.subarray(t+2,t+2+a));this.pointer+=i+3+o}else if(this.data[t]===240){r.name="Sysex";var s=wr.getVarIntLength(this.data.subarray(t+1)),l=wr.readVarInt(this.data.subarray(t+1,t+1+s));r.data=this.data.subarray(t+1+s,t+1+s+l),this.pointer+=i+1+s+l}else if(this.data[t]===247){r.name="Sysex (escape)";var u=wr.getVarIntLength(this.data.subarray(t+1)),d=wr.readVarInt(this.data.subarray(t+1,t+1+u));r.data=this.data.subarray(t+1+u,t+1+u+d),this.pointer+=i+1+u+d}else if(this.data[t]<128)if(r.running=!0,r.noteNumber=this.data[t],r.noteName=Qa.NOTES[this.data[t]],r.velocity=this.data[t+1],this.lastStatus<=143)r.name="Note off",r.channel=this.lastStatus-128+1,this.pointer+=i+2;else if(this.lastStatus<=159)r.name="Note on",r.channel=this.lastStatus-144+1,this.pointer+=i+2;else if(this.lastStatus<=175)r.name="Polyphonic Key Pressure",r.channel=this.lastStatus-160+1,r.note=Qa.NOTES[this.data[t+1]],r.pressure=event[1],this.pointer+=i+2;else if(this.lastStatus<=191)r.name="Controller Change",r.channel=this.lastStatus-176+1,r.number=this.data[t+1],r.value=this.data[t+2],this.pointer+=i+2;else if(this.lastStatus<=207)r.name="Program Change",r.channel=this.lastStatus-192+1,r.value=this.data[t+1],this.pointer+=i+1;else if(this.lastStatus<=223)r.name="Channel Key Pressure",r.channel=this.lastStatus-208+1,this.pointer+=i+1;else if(this.lastStatus<=239)r.name="Pitch Bend",r.channel=this.lastStatus-224+1,r.value=this.data[t+2],this.pointer+=i+2;else throw"Unknown event (running): ".concat(this.lastStatus);else if(this.lastStatus=this.data[t],this.data[t]<=143)r.name="Note off",r.channel=this.lastStatus-128+1,r.noteNumber=this.data[t+1],r.noteName=Qa.NOTES[this.data[t+1]],r.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=i+3;else if(this.data[t]<=159)r.name="Note on",r.channel=this.lastStatus-144+1,r.noteNumber=this.data[t+1],r.noteName=Qa.NOTES[this.data[t+1]],r.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=i+3;else if(this.data[t]<=175)r.name="Polyphonic Key Pressure",r.channel=this.lastStatus-160+1,r.note=Qa.NOTES[this.data[t+1]],r.pressure=event[2],this.pointer+=i+3;else if(this.data[t]<=191)r.name="Controller Change",r.channel=this.lastStatus-176+1,r.number=this.data[t+1],r.value=this.data[t+2],this.pointer+=i+3;else if(this.data[t]<=207)r.name="Program Change",r.channel=this.lastStatus-192+1,r.value=this.data[t+1],this.pointer+=i+2;else if(this.data[t]<=223)r.name="Channel Key Pressure",r.channel=this.lastStatus-208+1,this.pointer+=i+2;else if(this.data[t]<=239)r.name="Pitch Bend",r.channel=this.lastStatus-224+1,this.pointer+=i+3;else throw"Unknown event: ".concat(this.data[t]);return this.delta+=r.delta,this.events.push(r),r}},{key:"endOfTrack",value:function(){return this.data[this.pointer+1]==255&&this.data[this.pointer+2]==47&&this.data[this.pointer+3]==0}}]),n}();Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach});var O4e=function(){function n(e,t){OD(this,n),this.sampleRate=5,this.startTime=0,this.buffer=t||null,this.midiChunksByteLength=null,this.division,this.format,this.setIntervalId=!1,this.tracks=[],this.instruments=[],this.defaultTempo=120,this.tempo=null,this.startTick=0,this.tick=0,this.lastTick=null,this.inLoop=!1,this.totalTicks=0,this.events=[],this.totalEvents=0,this.eventListeners={},typeof e=="function"&&this.on("midiEvent",e)}return kD(n,[{key:"loadFile",value:function(t){throw"loadFile is only supported on Node.js"}},{key:"loadArrayBuffer",value:function(t){return this.buffer=new Uint8Array(t),this.fileLoaded()}},{key:"loadDataUri",value:function(t){for(var r=wr.atob(t.split(",")[1]),i=new Uint8Array(r.length),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return this.buffer=i,this.fileLoaded()}},{key:"getFilesize",value:function(){return this.buffer?this.buffer.length:0}},{key:"fileLoaded",value:function(){if(!this.validate())throw"Invalid MIDI file; should start with MThd";return this.setTempo(this.defaultTempo).getDivision().getFormat().getTracks().dryRun()}},{key:"validate",value:function(){return wr.bytesToLetters(this.buffer.subarray(0,4))==="MThd"}},{key:"getFormat",value:function(){return this.format=wr.bytesToNumber(this.buffer.subarray(8,10)),this}},{key:"getTracks",value:function(){this.tracks=[];for(var t=0;t<this.buffer.length;){if(wr.bytesToLetters(this.buffer.subarray(t,t+4))=="MTrk"){var r=wr.bytesToNumber(this.buffer.subarray(t+4,t+8));this.tracks.push(new I4e(this.tracks.length,this.buffer.subarray(t+8,t+8+r)))}t+=wr.bytesToNumber(this.buffer.subarray(t+4,t+8))+8}var i=0;return this.tracks.forEach(function(a){i+=8+a.data.length}),this.midiChunksByteLength=Qa.HEADER_CHUNK_LENGTH+i,this}},{key:"enableTrack",value:function(t){return this.tracks[t-1].enable(),this}},{key:"disableTrack",value:function(t){return this.tracks[t-1].disable(),this}},{key:"getDivision",value:function(){return this.division=wr.bytesToNumber(this.buffer.subarray(12,Qa.HEADER_CHUNK_LENGTH)),this}},{key:"playLoop",value:function(t){this.inLoop||(this.inLoop=!0,this.tick=this.getCurrentTick(),this.tracks.forEach(function(r,i){if(!t&&this.endOfFile())this.triggerPlayerEvent("endOfFile"),this.stop();else{var a=r.handleEvent(this.tick,t);t&&a?(a.hasOwnProperty("name")&&a.name==="Set Tempo"&&(this.defaultTempo=a.data,this.setTempo(a.data)),a.hasOwnProperty("name")&&a.name==="Program Change"&&(this.instruments.includes(a.value)||this.instruments.push(a.value))):a&&(a.hasOwnProperty("name")&&a.name==="Set Tempo"&&(this.setTempo(a.data),this.isPlaying()&&this.pause().play()),this.emitEvent(a))}},this),t||this.triggerPlayerEvent("playing",{tick:this.tick}),this.inLoop=!1)}},{key:"setTempo",value:function(t){return this.tempo=t,this}},{key:"setStartTime",value:function(t){return this.startTime=t,this}},{key:"play",value:function(){if(this.isPlaying())throw"Already playing...";return this.startTime||(this.startTime=new Date().getTime()),this.setIntervalId=setInterval(this.playLoop.bind(this),this.sampleRate),this}},{key:"loop",value:function(){setTimeout(function(){this.playLoop(),this.loop()}.bind(this),this.sampleRate)}},{key:"pause",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=this.tick,this.startTime=0,this}},{key:"stop",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=0,this.startTime=0,this.resetTracks(),this}},{key:"skipToTick",value:function(t){return this.stop(),this.startTick=t,this.tracks.forEach(function(r){r.setEventIndexByTick(t)}),this}},{key:"skipToPercent",value:function(t){if(t<0||t>100)throw"Percent must be number between 1 and 100.";return this.skipToTick(Math.round(t/100*this.totalTicks)),this}},{key:"skipToSeconds",value:function(t){var r=this.getSongTime();if(t<0||t>r)throw t+" seconds not within song time of "+r;return this.skipToPercent(t/r*100),this}},{key:"isPlaying",value:function(){return this.setIntervalId>0||$g(this.setIntervalId)==="object"}},{key:"dryRun",value:function(){for(this.resetTracks();!this.endOfFile();)this.playLoop(!0);return this.events=this.getEvents(),this.totalEvents=this.getTotalEvents(),this.totalTicks=this.getTotalTicks(),this.startTick=0,this.startTime=0,this.resetTracks(),this.triggerPlayerEvent("fileLoaded",this),this}},{key:"resetTracks",value:function(){return this.tracks.forEach(function(t){return t.reset()}),this}},{key:"getEvents",value:function(){return this.tracks.map(function(t){return t.events})}},{key:"getTotalTicks",value:function(){return Math.max.apply(null,this.tracks.map(function(t){return t.delta}))}},{key:"getTotalEvents",value:function(){return this.tracks.reduce(function(t,r){return{events:{length:t.events.length+r.events.length}}},{events:{length:0}}).events.length}},{key:"getSongTime",value:function(){return this.totalTicks/this.division/this.tempo*60}},{key:"getSongTimeRemaining",value:function(){return Math.round((this.totalTicks-this.getCurrentTick())/this.division/this.tempo*60)}},{key:"getSongPercentRemaining",value:function(){return Math.round(this.getSongTimeRemaining()/this.getSongTime()*100)}},{key:"bytesProcessed",value:function(){return Qa.HEADER_CHUNK_LENGTH+this.tracks.length*8+this.tracks.reduce(function(t,r){return{pointer:t.pointer+r.pointer}},{pointer:0}).pointer}},{key:"eventsPlayed",value:function(){return this.tracks.reduce(function(t,r){return{eventIndex:t.eventIndex+r.eventIndex}},{eventIndex:0}).eventIndex}},{key:"endOfFile",value:function(){return this.isPlaying()?this.totalTicks-this.tick<=0:this.bytesProcessed()>=this.midiChunksByteLength}},{key:"getCurrentTick",value:function(){return this.startTime?Math.round((new Date().getTime()-this.startTime)/1e3*(this.division*(this.tempo/60)))+this.startTick:this.startTick}},{key:"emitEvent",value:function(t){return this.triggerPlayerEvent("midiEvent",t),this}},{key:"on",value:function(t,r){return this.eventListeners.hasOwnProperty(t)||(this.eventListeners[t]=[]),this.eventListeners[t].push(r),this}},{key:"triggerPlayerEvent",value:function(t,r){return this.eventListeners.hasOwnProperty(t)&&this.eventListeners[t].forEach(function(i){return i(r||{})}),this}}]),n}(),k4e={Player:O4e,Utils:wr,Constants:Qa};const jB=new Int16Array([0,1,2,3,4,5,6,7,-8,-7,-6,-5,-4,-3,-2,-1]);function N4e(n,e,t,r,i){const a=new Int16Array(8);let o,s,l=0,u=0,d=0;const h=new Int16Array(16*r.npredictors);for(let f=0;f<8*r.order*r.npredictors;f++)h[f]=r.predictors[f];if(i){let f=Math.floor(t/5)*5;for(;f>0;){o=n.getUint8(l)>>4&15,s=n.getUint8(l)&15,s=s%r.npredictors,f--;const m=s*16;l++,HB(n,l,e,u,o,h,m,a),l+=2,f-=2,u+=16,HB(n,l,e,u,o,h,m,a),l+=2,f-=2,u+=16,d+=16}}else{let f=Math.floor(t/9)*9;for(;f>0;){o=n.getUint8(l)>>4&15,s=n.getUint8(l)&15,s=s%r.npredictors,f--;const m=s*16;l++,GB(n,l,e,u,o,h,m,a),l+=4,f-=4,u+=16,GB(n,l,e,u,o,h,m,a),l+=4,f-=4,u+=16,d+=16}}return d}function GB(n,e,t,r,i,a,o,s){const l=new Int16Array(8);let u=0;const d=new DataView(t,r),h=o+8;for(let f=0;f<8;f++)f&1?(l[f]=jB[n.getUint8(e)&15]<<i,e++):l[f]=jB[n.getUint8(e)>>4&15]<<i,l[f]=Gs(i+4,l[f]);for(let f=0;f<8;f++){if(u=a[o+f]*s[6],u+=a[h+f]*s[7],f>0)for(let _=f-1;_>-1;_--)u+=l[f-1-_]*a[h+_];let m=0;const g=(l[f]<<11)+u>>11;g>32767?m=32767:g<-32768?m=-32768:m=g,d.setInt16(f*2,m,!0)}for(let f=0;f<8;f++)s[f]=d.getInt16(f*2,!0)}function HB(n,e,t,r,i,a,o,s){const l=new Int16Array(8);let u=0;const d=new DataView(t,r),h=o+8;l[0]=((n.getUint8(e)&192)>>6&3)<<i,l[0]=Gs(i+2,l[0]),l[1]=((n.getUint8(e)&48)>>4&3)<<i,l[1]=Gs(i+2,l[1]),l[2]=((n.getUint8(e)&12)>>2&3)<<i,l[2]=Gs(i+2,l[2]),l[3]=(n.getUint8(e)&3&3)<<i,e++,l[3]=Gs(i+2,l[3]),l[4]=((n.getUint8(e)&192)>>6&3)<<i,l[4]=Gs(i+2,l[4]),l[5]=((n.getUint8(e)&48)>>4&3)<<i,l[5]=Gs(i+2,l[5]),l[6]=((n.getUint8(e)&12)>>2&3)<<i,l[6]=Gs(i+2,l[6]),l[7]=(n.getUint8(e)&3&3)<<i,e++,l[7]=Gs(i+2,l[7]);for(let f=0;f<8;f++){if(u=a[o+f]*s[6],u+=a[h+f]*s[7],f>0)for(let _=f-1;_>-1;_--)u+=l[f-1-_]*a[h+_];let m=0;const g=(l[f]<<11)+u>>11;g>32767?m=32767:g<-32768?m=-32768:m=g,d.setInt16(f*2,m,!0)}for(let f=0;f<8;f++)s[f]=d.getInt16(f*2,!0)}function Gs(n,e){const t=1<<n-1;return e=e&(1<<n)-1,(e^t)-t}const Iw=8,Ow=24,zB=8,WB=68;function U4e(n,e,t,r){if(t>=e.instruments.length||!e.instruments.length)throw new Error("Invalid bank instrument index"+t);const i=e.instruments[t];if(r>=i.sounds.length||!i.sounds.length)throw new Error("Invalid sound instrument index"+r);const a=i.sounds[r];return ND(n,a,e.sampleRate)}function ND(n,e,t){const r=e.wave,i=new DataView(n,r.waveBase);if(r.type===Kw.AL_RAW16_WAVE){const a=Iw+4+Ow+zB+(r.waveLen-2)+WB,o=new ArrayBuffer(a),s=new DataView(o);s.setUint32(0,1380533830);const l=a-8;s.setUint32(4,l,!0),s.setUint32(8,1463899717),s.setUint32(12,1718449184),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,1,!0),s.setUint32(24,t,!0),s.setUint32(28,t*2,!0),s.setUint16(32,2,!0),s.setUint16(34,16,!0),s.setUint32(36,1684108385);const u=r.waveLen-2;s.setUint32(40,u,!0);let d=44;for(let f=0;f<u;f++,d++)s.setUint8(d,i.getUint8(f+1));s.setUint32(d,1936552044),d+=4,s.setUint32(d,60,!0),d+=4,s.setUint32(d,0),d+=4,s.setUint32(d,0),d+=4,s.setUint32(d,0),d+=4;let h=60;return e.keymap&&e.keymap.keyBase!==0&&(h=e.keymap.keyBase),s.setUint32(d,h,!0),d+=4,r.rawWave.loop!==null&&(s.setUint32(d,0),d+=4,s.setUint32(d,0),d+=4,s.setUint32(d,0),d+=4,s.setUint32(d,1,!0),d+=4,s.setUint32(d,0),d+=4,r.rawWave.loop.count>0&&(s.setUint32(d,0),d+=4,s.setUint32(d,0),d+=4,s.setUint32(d,r.rawWave.loop.start,!0),d+=4,s.setUint32(d,r.rawWave.loop.end,!0),d+=4,s.setUint32(d,0),d+=4,r.rawWave.loop.count===4294967295?s.setUint32(d,0):s.setUint32(d,r.rawWave.loop.count,!0),d+=4)),o}else if(r.type===Kw.AL_ADPCM_WAVE){const a=r.adpcmWave;if(!a||!a.book)throw new Error("Cannot decode AL_ADPCM_WAVE without book");const o=new ArrayBuffer(r.waveLen*4*2),s=N4e(i,o,r.waveLen,a.book,(r.flags&48)===48),l=Iw+4+Ow+zB+s*2+WB,u=new ArrayBuffer(l),d=new DataView(u);d.setUint32(0,1380533830);const h=l-Iw;d.setUint32(4,h,!0),d.setUint32(8,1463899717),d.setUint32(12,1718449184),d.setUint32(16,Ow-8,!0),d.setUint16(20,1,!0),d.setUint16(22,1,!0),d.setUint32(24,t,!0),d.setUint32(28,t*2,!0),d.setUint16(32,2,!0),d.setUint16(34,16,!0),d.setUint32(36,1684108385);const f=s*2;d.setUint32(40,f,!0);const m=new DataView(o);let g=44;for(let E=0;E<s*2;E++,g++)d.setUint8(g,m.getUint8(E));d.setUint32(g,1936552044),g+=4,d.setUint32(g,60,!0),g+=4,d.setUint32(g,0),g+=4,d.setUint32(g,0),g+=4,d.setUint32(g,0),g+=4;let _=60;return e.keymap&&e.keymap.keyBase!==0&&(_=e.keymap.keyBase),d.setUint32(g,_,!0),g+=4,a.loop!==null&&(d.setUint32(g,0),g+=4,d.setUint32(g,0),g+=4,d.setUint32(g,0),g+=4,d.setUint32(g,1,!0),g+=4,d.setUint32(g,0),g+=4,a.loop.count>0&&(d.setUint32(g,0),g+=4,d.setUint32(g,0),g+=4,d.setUint32(g,a.loop.start,!0),g+=4,d.setUint32(g,a.loop.end,!0),g+=4,d.setUint32(g,0),g+=4,a.loop.count===4294967295?d.setUint32(g,0):d.setUint32(g,a.loop.count,!0),g+=4)),u}else throw new Error(`Unsupported wave type ${r.type}`)}let kw,_U=!1;function UD(){return kw||(kw=new AudioContext),kw}function xU(){return _U}function l_(n){_U=n}class vU{constructor(e){this._player=e,this._onFinishedCallbacks=[],this._player.on("endOfFile",()=>{this._onFinishedCallbacks.forEach(t=>t())})}stop(){this._player&&(this._player.stop(),l_(!1),this._onFinishedCallbacks.forEach(e=>e()))}addOnFinished(e){this._onFinishedCallbacks.push(e)}}function j4e(n,e){if(xU())throw new Error("Should not play more than one audio source at once.");const t=UD(),r=Rr.getSequenceTable(n);console.log(r);const i=r.midis[e].buffer,a=RI(new DataView(i),i.byteLength);wt(a);const o=[],s=[],l=r.midis[e].soundbankIndex,u=r.soundbanks.banks[l];for(let v=0;v<u.instruments.length;v++){s[v]=[];const C=u.instruments[v];for(let V=0;V<C.sounds.length;V++){const D=C.sounds[V],H=U4e(r.tbl,u,v,V),R=s[v];R.push(null);const j=R.length-1,te=C.volume,$=t.decodeAudioData(H).then(z=>{R[j]={audioBuffer:z,keymap:D.keymap,instrumentVolume:te,soundVolume:D.sampleVolume}});o.push($)}}const d=[];for(let v=0;v<u.instruments.length;v++);const h=[],f=16,m=[],g=[];for(let v=0;v<=f;v++)g.push(127);function _(v,C){const V=C.track,D=C.channel;if("channel"in C&&"track"in C&&(h[V]=D),v==="Program Change")m[C.channel]=C.value;else if(v==="Controller Change")switch(C.number){case 7:"value"in C&&(g[D]=C.value);break;default:wt("Unrecongized controller change event",C);break}else v==="Note on"?E(C):C.running?"track"in C&&"noteNumber"in C&&"velocity"in C&&E(C):v==="End of Track"||wt("Ignored event",C)}function E(v){const C=v.track,V=v.channel||h[C],D=m[V];if(!s[D]){console.warn(`Instrument ${D} is unrecongized`);return}d[V]||(d[V]={}),d[V][C]||(d[V][C]={});const H=G4e(s[D],v.noteNumber);if(!H){console.warn(`No note for channel ${V} instrument ${D} note number ${v.noteNumber}`);return}const R=d[V][C][v.noteNumber];if(!v.velocity)R?R.stop():console.warn(`There wasn't a node to stop playing for channel ${V} track ${C} note number ${v.noteNumber}`),d[V][C][v.noteNumber]=null;else{R&&console.warn(`There was a previous node playing for ${V} note number ${v.noteNumber}`);const j=H4e(H,v.noteNumber,v.velocity,g[V]);j.start(0),d[V][C][v.noteNumber]=j}}const x=new k4e.Player(function(v){wt(v),_(v.name,v)});return x.on("endOfFile",function(){l_(!1)}),x.loadArrayBuffer(a),Promise.all(o).then(()=>{wt(s),x.play()}),new vU(x)}function G4e(n,e){for(const t of n)if(e>=t.keymap.keyMin&&e<=t.keymap.keyMax)return t;return null}const Cg=127;function H4e(n,e,t,r){const i=UD(),a=i.createBufferSource();if(a.buffer=n.audioBuffer,a.detune.value=n.keymap.detune,e!==n.keymap.keyBase){const l=(e-n.keymap.keyBase)*100;a.detune.value+=l}const o=i.createGain();return o.gain.value=n.instrumentVolume/Cg,o.gain.value*=n.soundVolume/Cg,o.gain.value*=r/Cg,o.gain.value*=t/Cg,o.connect(i.destination),a.connect(o),a}function z4e(n,e){if(xU())throw new Error("Should not play more than one audio source at once.");const t=UD(),r=Rr.getSoundTable(n),i=r.sounds[e],a=ND(r.tbl,i,i.sampleRate);let o,s;return t.decodeAudioData(a).then(l=>{s=t.createBufferSource(),s.buffer=l,s.connect(t.destination),s.start(0),s.onended=()=>{l_(!1),o&&o()}}),new vU({stop:()=>{s&&(s.stop(),l_(!1))},on:(l,u)=>{if(l!=="endOfFile")throw new Error("Unexpected AudioPlayerController event "+l);o=u}})}const XB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEDBCArhrzjSQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAA3klEQVQ4y9WSPWpCURSEv5GHpLFKaxPEUkhtmSaNYrAVwS1YuIS0LiHapBbFFbgBwUayg0C2kOfYXOF69T0kTfBUhzPDnJ858N+hIsD2EBgBObAHxpIOKS8rEW8ALyGvFTWrlAj8RvlBUn6NlCVjV4H30K0dQU+2p6G+kLShZPe+i2N+cUTbfeAR+Dop2+4Cq4S7ltQNeB3oADm2d0F9lkwyiDovbVci7PUEZMEmgDOLJH3afgDeJPXSTW9xAeAD6JURYhdatifX/LadlprxEbfA819fOQN+gO94r/uKI0KFfwl0bVcYAAAAAElFTkSuQmCC",W4e="data:image/png;base64,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",X4e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAFnXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7VhZkus2DPzHKXIEbiDI44BbVW6Q46epxdto3ngk5y9SWZQpqgl0g23J1P/5e9Bf2Hw2jgJLijlGgy3kkJ3iJJl1W1trwnJcv+zX7HM/3S44dHm0fv0a+zZe0c/3GyRs/eW5n6RuOGkD2i7sgH7O7HCyjUsbkHdrv92+U97u0/CQzvapfYEwdgN9/R4EZDRGp3fkukc/jmnO4hGBz17RhuUobu+Z2zzmY+7odvpC3u3shTujW79/poJM3AbEF462fsvH3C0MPal2n/npAsjv5nF74G6Mlsboa3YaIpiKtCW1p7KcYWABlX65LWIXfBjnsuwZe0KKFYo1qFmwV7LZOrA9bLDNqh22L221FSEG1x3ods5V55e+BPqzq4soYe52OIEYjXyCVhWqeXS7Wyx2mTcv81UUbTPNYqSzALO448tOR51n9hvQGLN0rTXpxhXicrMAEcZUbh4xCoLYsXHKC7/LTg91Yx6E9VCQF5oTElRTVojC9l5bftHZYxybQGZdGlbaBgCKMDcjGOuhgInWs43WiHNiLXhM0EcRufPBFShgmV2zNKCN9xHiJDfnxj1il7GO3doNa4EQ7KMXSIPlArFCYNSPhIQaUvYciJkjCyfOrNHHEDnGKHF6lIqXICxRRJJk0eRTSJxikpRSTppd9rAwzjEL5ZRzVsWkCmjF3YoRqsUVX0LhEouUVHLRivKpoXKNVWqquWpzzTcs/xabUEstN+22o5R66Nxjl5567jpQa8OPMHjEISONPPSm2qbqs2r2Rbk/q2Y31aZiYRknd9XQLbJD2GknPDWDYi5YKC5TARS0m5qZZENwU7mpmckOi4IdVLM8xWl2KgYFQ7eOh71pd1fuj7oRh1/p5r5TjqZ0n1COpnSbcl91O1Ct6fKL4heB5iqcnBo/YGwY0JO6pNMWT7d0FWBpe/ZULXejLZQqWWttyj2Lb9DFV469ialNQq+qjAWr3cTG0edaUm+9cOsyqvdpUKoemTmGy8Jl2hgZtZca21FwedQcwCWGYEInGNmSlg62JiUJ/TaD9mgHjWBdMxOk4zYA1agASFHg30lGM6EACNcxgZcxrOpQqPECRQjkI1A0w/oEFK0ZXoeinayrUHTn/RoUPUp4BYqeq+E8FL0W1lkoSvoZKPpao+eg6Kjcz0DR8co5hioYYHUkV9jB63vxMBBRDSNm8mG4VrRVXNVS8DPBrsIkfMkcOnxfiihLK8LDG+nNAtSxgXNiklEMB5lnpD7yDMcOXWwKj61r6xvmn6mMDDSd+SSny+0NP0TA9mPFrh1JQv4Jz0sSEz6PAWy3JnxD/bmldwe+tgujMfUZwAyZdMlwRo34ELNr95i/4+OIDjrDxxEddIaPo5bO8HFEB53h44gOOsPHER10hZc/Ar3DxxEddIaPIzroDB+n5X+nPOgMH0d00FX72Omgq/Zxuo6+Kw+6ah87HXTVPnY6PiL/j3X0m+VCV+1jp4Ou2sd/ZyNn7WOng67ax04HXbWPj9jIIx101T52Ouiqfex00FX7+HUd/VQedNU+djroqn189FfkW6Azy4Wu2sdOB121j8/byFX72OmgTzysTzroEw/rp+voiA76xMP6aiMfeFifdNAnHtbfqqN3y4PO2UepI4XWPTcvFQhIDS+P8z/b5HqPyXFxeGNkLhw4RlN5zimC90q8npohI+iIC1NpRmkwXzNeuA4aZWDEvGTbzGP5q2usCXSrmNsuV4NpTfDOO+r6UlwlpkdA2hGvAtJriGcB6TXEs4D0Xc6/BaSfSHwXkN5V5SdA+q3M3wHS2bp5BaSrhfh/ZZ+r7FLFdwenaRLasF2SahMOzXVTSoomac2utRx7tsypGJFYU9NavaUkcLUWS/JPzoXZWqZ/AXojHW71+9YjAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH4wQIACEnRaXtKwAAAEBJREFUSMdjYBjqgBHG+P///1aqGszI6M3AwMDAgibuRSXzt8EYTLQOolELRi0YtWDUglELRi2giwUsuKq6IQMAGZoF5M5l+qAAAAAASUVORK5CYII=",K4e="data:image/png;base64,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",Y4e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bxSIVByuIqGSoThZERTpqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxcnRSdJES/5cUWsR4cNyPd/ced+8Af73MVLNjAlA1y0gl4kImuyp0vSKIYfRjBDGJmfqcKCbhOb7u4ePrXZRneZ/7c/QoOZMBPoF4lumGRbxBPLNp6Zz3icOsKCnE58TjBl2Q+JHrsstvnAsO+3lm2Ein5onDxEKhjeU2ZkVDJZ4mjiiqRvn+jMsK5y3OarnKmvfkLwzltJVlrtMcQgKLWIIIATKqKKEMC1FaNVJMpGg/7uEfdPwiuWRylcDIsYAKVEiOH/wPfndr5qcm3aRQHOh8se2PUaBrF2jUbPv72LYbJ0DgGbjSWv5KHYh9kl5raZEjoHcbuLhuafIecLkDDDzpkiE5UoCmP58H3s/om7JA3y3Qveb21tzH6QOQpq6SN8DBITBWoOx1j3cH23v790yzvx/R7XLN420FDQAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+QIHRUjG/0j6KEAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAkUlEQVQ4y7WSQRLCIBAEe6n8wAeZe/IYH4d3fJBvaC8YUVOF0ThVHFhmGXaYAFAnILMNM3BNtflbHEK1KVyA0mkageOy84Gijj1JdaxcVVNzViKivJCz+uRN5Sy8oSPY9SfxI9LKjPk+34pPefcXvHkQEXOrXGvxNw96v3Dmg2D8FKRdojzVtRUndWgv2YoB4AYjjupcJsGbEwAAAABJRU5ErkJggg==",q4e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bxSIVByuIqGSoThZERTpqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxcnRSdJES/5cUWsR4cNyPd/ced+8Af73MVLNjAlA1y0gl4kImuyp0vSKIYfRjBDGJmfqcKCbhOb7u4ePrXZRneZ/7c/QoOZMBPoF4lumGRbxBPLNp6Zz3icOsKCnE58TjBl2Q+JHrsstvnAsO+3lm2Ein5onDxEKhjeU2ZkVDJZ4mjiiqRvn+jMsK5y3OarnKmvfkLwzltJVlrtMcQgKLWIIIATKqKKEMC1FaNVJMpGg/7uEfdPwiuWRylcDIsYAKVEiOH/wPfndr5qcm3aRQHOh8se2PUaBrF2jUbPv72LYbJ0DgGbjSWv5KHYh9kl5raZEjoHcbuLhuafIecLkDDDzpkiE5UoCmP58H3s/om7JA3y3Qveb21tzH6QOQpq6SN8DBITBWoOx1j3cH23v790yzvx/R7XLN420FDQAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+QIHRY3HTioJJgAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABDklEQVQ4y53TQUqcQRDF8V93vgSTLIIIAV3qIniHIB4gl/E2OYg7McgEcgURwUUg2cSFi3ySUceXhSUMQjLO/KHoLqh+dFW/bpBkF5+xgxsEDWseuKn8uuIXDjAOdRg61vHG/3kUgbctyTFeYRtnmCwQ2MMHXGAqyWmSMcmXJPsLDkuyX7VjkvOOS7zGpLV2skigaiY1n1nHiJnlucN1x6bVGPC+Ywsv5no8zL85fKrS8afeeJUWLgdMnwzp0xItvOvz11+SjtuO31bnquNlWXPvuUYqN44YWpKjMsWyVj7HD0l2K76WPR+ZJZnWOs9YtR+T9KG1dlo/8hbfaybrNeWr2t/hZ7W7Ufm31tr9Xwlpvj6240ExAAAAAElFTkSuQmCC";class Q4e extends Ne.exports.Component{constructor(e){super(e),this.onPlayMidi=(t,r)=>{const i=j4e(t,r);i.addOnFinished(()=>{this.setState({playbackController:null,playing:!1})}),this.setState({playbackController:i,playingType:"midi",playing:[t,r]})},this.onPlaySound=(t,r)=>{const i=z4e(t,r);i.addOnFinished(()=>{this.setState({playbackController:null,playing:!1})}),this.setState({playbackController:i,playingType:"sound",playing:[t,r]})},this.onStop=(t,r)=>{this.state.playbackController&&this.state.playbackController.stop()},this.state={playingType:"none",hasError:!1,playing:!1}}render(){if(this.state.hasError)return L("p",{children:"An error was encountered."});const e=Tt.getGameVersion(),t=E_(e,{}),r=lr(z0.uiAdvanced),i=[],a=Rr.getSequenceTableCount();for(let l=0;l<a;l++){const u=l,d=t.getAudioMap(u);l>0&&i.push(L("tr",{children:L("td",{colSpan:2,children:L("hr",{})})},l+"hr"));const h=Rr.getSequenceTable(l);for(let f=0;f<h.midis.length;f++){const m=f;let g=!1,_=!1;this.state.playing&&(g=l===this.state.playing[0]&&f===this.state.playing[1]&&this.state.playingType==="midi",_=!g);let E;const x=d[m],v=`${m}, 0x${m.toString(16).toUpperCase()}`;x?E=Xe("span",{title:v,children:[x,r&&L("span",{className:"audioIndexBesideName",children:` (${v})`})]}):E=L("span",{title:v,children:v}),i.push(L(YB,{table:u,index:m,isPlaying:g,cannotPlay:_,trackName:E,onPlay:this.onPlayMidi,onStop:this.onStop,expandContent:L(ta,{children:Xe("div",{children:[Xe(rr,{onClick:()=>J4e(u,m,x||"Unknown"),css:"btnAudioExport",children:[L("img",{src:XB,height:"16",width:"16",alt:"Export midi"}),"Download midi"]}),Xe(rr,{onClick:()=>$4e(u,m),css:"btnAudioExport",children:[L("img",{src:W4e,height:"16",width:"16",alt:"Import midi"}),"Replace midi"]}),Xe("label",{className:"audioTableExpandedLabel",children:["Soundbank index:"," "]}),h.midis[f].soundbankIndex,L("img",{src:N4,className:"audioTableSmallEditIcon",title:"Change soundbank index",alt:"Change soundbank index",onClick:async()=>{await eEe(u,m)&&this.forceUpdate()}})]})})},u+"-"+m))}}const o=[],s=Rr.getSoundTableCount();for(let l=0;l<s;l++){l>0&&o.push(L("tr",{children:L("td",{colSpan:2,children:L("hr",{})})},l+"-s-hr"));const u=Rr.getSoundTable(l),d=t.getSoundEffectMap(l);for(let h=0;h<u.sounds.length;h++){let f=!1,m=!1;this.state.playing&&(f=l===this.state.playing[0]&&h===this.state.playing[1]&&this.state.playingType==="sound",m=!f);let g;const _=d[h],E=`${h}, 0x${h.toString(16).toUpperCase()}`;_?g=Xe("span",{title:E,children:[_,r&&L("span",{className:"audioIndexBesideName",children:` (${E})`})]}):g=L("span",{title:E,children:E});const x=_||`${h}`;o.push(L(YB,{table:l,index:h,isPlaying:f,cannotPlay:m,trackName:g,onPlay:this.onPlaySound,onStop:this.onStop,expandContent:Xe(rr,{onClick:()=>Z4e(l,h,x),css:"btnAudioExport",children:[L("img",{src:XB,height:"16",width:"16",alt:"Export"}),"Download .wav"]})},l+"-s-"+h))}}return Xe("div",{className:"audioViewContainer",children:[L("h2",{children:"Audio"}),L("p",{children:"This is an experimental audio player."}),L("h3",{children:"Sound Tracks"}),L(KB,{listing:i}),L("h3",{children:"Sound Effects"}),L(KB,{listing:o})]})}componentWillUnmount(){this.state.playbackController&&this.state.playbackController.stop()}componentDidCatch(e,t){this.setState({hasError:!0}),console.error(e)}}function KB(n){return Xe("table",{className:"audioViewTable",children:[Array.isArray(n.listing)?L("thead",{children:Xe("tr",{children:[L("th",{className:"audioViewTableIconColumn"}),L("th",{}),L("th",{className:"audioViewTableIconColumn"})]})}):null,L("tbody",{children:n.listing})]})}function YB(n){const[e,t]=Ne.exports.useState(!1);let r=L("td",{});if(n.isPlaying)r=L("td",{children:L("img",{src:X4e,alt:"Stop audio",title:"Stop audio",onClick:()=>n.onStop(n.table,n.index)})});else{const s=n.cannotPlay?"audioRowIconNoAction":"";r=L("td",{children:L("img",{src:K4e,alt:`Play ${n.trackName}`,title:`Play ${n.trackName}`,className:s,onClick:()=>{n.cannotPlay||n.onPlay(n.table,n.index)}})})}const i=1+(r?1:0)+(n.expandContent?1:0);let a;e&&n.expandContent&&(a=L("tr",{children:L("td",{colSpan:i,className:"audioTableExpandedContent",children:n.expandContent})}));let o="audioTableRow";return e&&(o+=" audioTableRowExpanded"),Xe(ta,{children:[Xe("tr",{className:o,children:[n.expandContent&&L("td",{children:L("img",{src:e?q4e:Y4e,alt:e?"Collapse":"Expand",onClick:()=>t(s=>!s)})}),L("td",{children:n.trackName}),r]}),a]})}function J4e(n,e,t){t=t||"music";const i=Rr.getSequenceTable(n).midis[e].buffer,a=RI(new DataView(i),i.byteLength);co.exports.saveAs(new Blob([a]),`${t}.mid`)}function Z4e(n,e,t){t=t||"sound";const r=Rr.getSoundTable(n),i=r.sounds[e],a=ND(r.tbl,i,i.sampleRate);co.exports.saveAs(new Blob([a]),`${t}.wav`)}function $4e(n,e){const t=Rr.getSequenceTable(n);Bo("audio/midi",r=>{const i=r.target.files[0];if(!i)return;const a=new FileReader;a.onload=o=>{Bn(a.result instanceof ArrayBuffer);const s=IE(a.result,{loop:!0});if(!s){o0("Could not process midi for insertion into the game");return}t.midis[e].buffer=s},a.readAsArrayBuffer(i)})}async function eEe(n,e){const t=Rr.getSequenceTable(n),r=t.soundbanks.banks.length;return await F_(`Enter new soundbank index (0 through ${r-1}):`).then(i=>{if(!i)return!1;const a=parseInt(i);return isNaN(a)||a<0||a>=r?(o0("Invalid soundbank index."),!1):(t.midis[e].soundbankIndex=a,!0)})}function tEe(n){const e=n.root;if(!e)return L("div",{children:"No decision tree provided."});const t=e.map((r,i)=>L(wU,{node:r},i));return L("div",{className:"aiEditor",children:t})}function wU(n){const e=n.node;let t=!1,r;return Array.isArray(e.decision)?r=e.decision.map((i,a)=>L(wU,{node:i},a)):t=!0,Xe("div",{className:"aiTreeNode",children:[nEe(e),r,t&&L(rEe,{node:e})]})}function nEe(n){switch(n.type){case ns.leaf:return null;case ns.hasCoins:return Xe("div",{className:"aiNodeCondition",children:["Has ",n.data," coins"]});case ns.star:return Xe("div",{className:"aiNodeCondition",children:["Stars: ",At(n.data)]});case ns.remainingSpaces:return Xe("div",{className:"aiNodeCondition",children:["Player has ",n.data," remaining spaces"]});case ns.stateComparison:return Xe("div",{className:"aiNodeCondition",children:["State ",At(n.data)]});case ns.winningHeuristic:return Xe("div",{className:"aiNodeCondition",children:["Heuristic ",At(n.data)]});case ns.customCode:return Xe("div",{className:"aiNodeCondition",children:["Custom function at ",At(n.data)]});case ns.turnsElapsed:return Xe("div",{className:"aiNodeCondition",children:[n.data," turns elapsed"]});case ns.hasItem:return Xe("div",{className:"aiNodeCondition",children:["Has the ",At(n.data)," item"]})}return L("div",{className:"aiNodeCondition",children:"Unknown Condition!"})}function rEe(n){const e=n.node.decision;let t;return e.probability.length===2?t=L(ih,{probability:e.probability[1],difficultyLong:"Normal / Hard",difficultyShort:"N/H"}):t=L(ih,{probability:e.probability[1],difficultyLong:"Normal",difficultyShort:"N"}),Xe("div",{children:[L("span",{className:"aiNodeDecision",children:e.value})," @ ",L(ih,{probability:e.probability[0],difficultyLong:"Easy",difficultyShort:"E"})," ",t,e.probability.length>2&&Xe(ta,{children:[" ",L(ih,{probability:e.probability[2],difficultyLong:"Hard",difficultyShort:"H"})," ",L(ih,{probability:e.probability[3],difficultyLong:"Super Hard",difficultyShort:"SH"})]})]})}function ih(n){return Xe(ta,{children:[Xe("span",{className:"aiNodeDifficulty",title:`Probability on ${n.difficultyLong} difficulty`,children:[n.difficultyShort,":"]})," ",L("span",{className:"aiNodeDifficulty",children:n.probability})]})}const iEe="data:image/png;base64,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",aEe=n=>{const[e,t]=Ne.exports.useState("");let r;if(n.message||n.messageHTML){let i;n.message?i=L("span",{className:"loadingMsgTxt selectable",children:n.message}):i=L("span",{className:"loadingMsgTxt selectable",dangerouslySetInnerHTML:{__html:n.messageHTML}});let a;n.prompt&&(a=L("input",{className:"blockerPromptInput",autoFocus:!0,value:e,onChange:o=>t(o.target.value),onKeyDown:od(o=>n.onAccept(e),{enter:!0})})),r=Xe("div",{className:"loadingMsg",children:[i,L("br",{}),L("br",{}),n.prompt&&Xe(ta,{children:[a,L("br",{}),L("br",{})]}),L("button",{autoFocus:!n.prompt,onClick:()=>n.onAccept(e),children:n.confirm?"Yes":"OK"}),(n.prompt||n.confirm)&&L("button",{onClick:()=>n.onCancel(),children:n.confirm?"No":"Cancel"})]})}else r=L("img",{className:"loadingGif swing",src:iEe,alt:"Loading"});return Xe("div",{className:"loading",children:[L("div",{className:"loadingEscapeBackDoor",onClick:n.onForceClose}),L("img",{className:"loadingLogo",src:H9,alt:"Loading"}),L("br",{}),r]})};function oEe(){const[n,e]=Ne.exports.useState([]),[t,r]=Ne.exports.useState(null);Ne.exports.useEffect(()=>{const a=dEe();e(a),r(a[0])},[]);const i=Ne.exports.useCallback(a=>r(a),[]);return n.length?Xe("div",{className:"spriteViewerContainer",children:[L(sEe,{spriteFsEntries:n,selectedSprite:t,onSelectedSpriteChanged:i}),L(cEe,{selectedSprite:t})]}):null}function sEe(n){return L("div",{className:"spriteViewerToolbar",children:L(lEe,{spriteFsEntries:n.spriteFsEntries,selectedSprite:n.selectedSprite,onSelectedSpriteChanged:n.onSelectedSpriteChanged})})}function lEe(n){const e=n.spriteFsEntries.map(t=>{const r=t.join("/");return L("option",{value:r,children:r},r)});return Xe("div",{className:"spriteSelectContainer",children:["Sprite:",L("select",{value:n.selectedSprite.join("/"),onChange:t=>{const[r,i]=t.target.value.split("/").map(o=>parseInt(o)),a=n.spriteFsEntries.find(o=>o[0]===r&&o[1]===i);a&&n.onSelectedSpriteChanged(a)},children:e})]})}function cEe(n){const[e,t]=n.selectedSprite,i=Ne.exports.useMemo(()=>yU(e,t),[e,t]).map((a,o)=>{const s=Ea(a.src,a.width,a.height);return L(uEe,{name:`Sprite ${e}/${t}`,dataUri:s,height:a.height,width:a.width},`${e}-${t}-${o}`)});return L("div",{className:"spriteDisplayContainer",children:i})}function uEe(n){return L("div",{className:"spriteImageDiv",children:L("img",{src:n.dataUri,height:n.height,width:n.width,alt:n.name},n.name)})}function dEe(){const n=[];let e=dt.getDirectoryCount();for(let t=0;t<e;t++){let r=dt.getFileCount(t);for(let i=0;i<r;i++)try{yU(t,i)&&n.push([t,i])}catch{}}return n}function yU(n,e){let t=dt.get(n,e),r=vu(t);return!r||!r.length?null:r}class AEe extends C8.Component{constructor(e){super(e),this.state={hasError:!1}}render(){return this.state.hasError?L("p",{children:"An error was encountered."}):this.props.children}componentDidCatch(e){this.setState({hasError:!0}),console.error(e)}}var Nw=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Uw(n,e,t,r){n.addEventListener?n.addEventListener(e,t,r):n.attachEvent&&n.attachEvent("on".concat(e),function(){t(window.event)})}function EU(n,e){for(var t=e.slice(0,e.length-1),r=0;r<t.length;r++)t[r]=n[t[r].toLowerCase()];return t}function CU(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");for(var e=n.split(","),t=e.lastIndexOf("");t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function fEe(n,e){for(var t=n.length>=e.length?n:e,r=n.length>=e.length?e:n,i=!0,a=0;a<t.length;a++)r.indexOf(t[a])===-1&&(i=!1);return i}var jD={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":Nw?173:189,"=":Nw?61:187,";":Nw?59:186,"'":222,"[":219,"]":221,"\\":220},Cc={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},z4={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},fi={16:!1,18:!1,17:!1,91:!1},br={};for(var Vg=1;Vg<20;Vg++)jD["f".concat(Vg)]=111+Vg;var J0=[],qB=!1,VU="all",DU=[],k2=function(e){return jD[e.toLowerCase()]||Cc[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function FU(n){VU=n||"all"}function Fp(){return VU||"all"}function hEe(){return J0.slice(0)}function pEe(n){var e=n.target||n.srcElement,t=e.tagName,r=!0;return(e.isContentEditable||(t==="INPUT"||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(r=!1),r}function mEe(n){return typeof n=="string"&&(n=k2(n)),J0.indexOf(n)!==-1}function SEe(n,e){var t,r;n||(n=Fp());for(var i in br)if(Object.prototype.hasOwnProperty.call(br,i))for(t=br[i],r=0;r<t.length;)t[r].scope===n?t.splice(r,1):r++;Fp()===n&&FU(e||"all")}function gEe(n){var e=n.keyCode||n.which||n.charCode,t=J0.indexOf(e);if(t>=0&&J0.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&J0.splice(0,J0.length),(e===93||e===224)&&(e=91),e in fi){fi[e]=!1;for(var r in Cc)Cc[r]===e&&(Ta[r]=!1)}}function _Ee(n){if(typeof n>"u")Object.keys(br).forEach(function(o){return delete br[o]});else if(Array.isArray(n))n.forEach(function(o){o.key&&jw(o)});else if(typeof n=="object")n.key&&jw(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var i=t[0],a=t[1];typeof i=="function"&&(a=i,i=""),jw({key:n,scope:i,method:a,splitKey:"+"})}}var jw=function(e){var t=e.key,r=e.scope,i=e.method,a=e.splitKey,o=a===void 0?"+":a,s=CU(t);s.forEach(function(l){var u=l.split(o),d=u.length,h=u[d-1],f=h==="*"?"*":k2(h);if(!!br[f]){r||(r=Fp());var m=d>1?EU(Cc,u):[];br[f]=br[f].filter(function(g){var _=i?g.method===i:!0;return!(_&&g.scope===r&&fEe(g.mods,m))})}})};function QB(n,e,t,r){if(e.element===r){var i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(var a in fi)Object.prototype.hasOwnProperty.call(fi,a)&&(!fi[a]&&e.mods.indexOf(+a)>-1||fi[a]&&e.mods.indexOf(+a)===-1)&&(i=!1);(e.mods.length===0&&!fi[16]&&!fi[18]&&!fi[17]&&!fi[91]||i||e.shortcut==="*")&&e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0))}}}function JB(n,e){var t=br["*"],r=n.keyCode||n.which||n.charCode;if(!!Ta.filter.call(this,n)){if((r===93||r===224)&&(r=91),J0.indexOf(r)===-1&&r!==229&&J0.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(g){var _=z4[g];n[g]&&J0.indexOf(_)===-1?J0.push(_):!n[g]&&J0.indexOf(_)>-1?J0.splice(J0.indexOf(_),1):g==="metaKey"&&n[g]&&J0.length===3&&(n.ctrlKey||n.shiftKey||n.altKey||(J0=J0.slice(J0.indexOf(_))))}),r in fi){fi[r]=!0;for(var i in Cc)Cc[i]===r&&(Ta[i]=!0);if(!t)return}for(var a in fi)Object.prototype.hasOwnProperty.call(fi,a)&&(fi[a]=n[z4[a]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(J0.indexOf(17)===-1&&J0.push(17),J0.indexOf(18)===-1&&J0.push(18),fi[17]=!0,fi[18]=!0);var o=Fp();if(t)for(var s=0;s<t.length;s++)t[s].scope===o&&(n.type==="keydown"&&t[s].keydown||n.type==="keyup"&&t[s].keyup)&&QB(n,t[s],o,e);if(r in br){for(var l=0;l<br[r].length;l++)if((n.type==="keydown"&&br[r][l].keydown||n.type==="keyup"&&br[r][l].keyup)&&br[r][l].key){for(var u=br[r][l],d=u.splitKey,h=u.key.split(d),f=[],m=0;m<h.length;m++)f.push(k2(h[m]));f.sort().join("")===J0.sort().join("")&&QB(n,u,o,e)}}}}function xEe(n){return DU.indexOf(n)>-1}function Ta(n,e,t){J0=[];var r=CU(n),i=[],a="all",o=document,s=0,l=!1,u=!0,d="+",h=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(a=e.scope),e.element&&(o=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(u=e.keydown),e.capture!==void 0&&(h=e.capture),typeof e.splitKey=="string"&&(d=e.splitKey)),typeof e=="string"&&(a=e);s<r.length;s++)n=r[s].split(d),i=[],n.length>1&&(i=EU(Cc,n)),n=n[n.length-1],n=n==="*"?"*":k2(n),n in br||(br[n]=[]),br[n].push({keyup:l,keydown:u,scope:a,mods:i,shortcut:r[s],method:t,key:r[s],splitKey:d,element:o});typeof o<"u"&&!xEe(o)&&window&&(DU.push(o),Uw(o,"keydown",function(f){JB(f,o)},h),qB||(qB=!0,Uw(window,"focus",function(){J0=[]},h)),Uw(o,"keyup",function(f){JB(f,o),gEe(f)},h))}function vEe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(br).forEach(function(t){var r=br[t].find(function(i){return i.scope===e&&i.shortcut===n});r&&r.method&&r.method()})}var Gw={setScope:FU,getScope:Fp,deleteScope:SEe,getPressedKeyCodes:hEe,isPressed:mEe,filter:pEe,trigger:vEe,unbind:_Ee,keyMap:jD,modifier:Cc,modifierMap:z4};for(var Hw in Gw)Object.prototype.hasOwnProperty.call(Gw,Hw)&&(Ta[Hw]=Gw[Hw]);if(typeof window<"u"){var wEe=window.hotkeys;Ta.noConflict=function(n){return n&&window.hotkeys===Ta&&(window.hotkeys=wEe),Ta},window.hotkeys=Ta}Ta.filter=function(){return!0};var TU=function(e,t){var r=e.target,i=r&&r.tagName;return Boolean(i&&t&&t.includes(i))},yEe=function(e){return TU(e,["INPUT","TEXTAREA","SELECT"])};function ZB(n,e,t,r){t instanceof Array&&(r=t,t=void 0);var i=t||{},a=i.enableOnTags,o=i.filter,s=i.keyup,l=i.keydown,u=i.filterPreventDefault,d=u===void 0?!0:u,h=i.enabled,f=h===void 0?!0:h,m=i.enableOnContentEditable,g=m===void 0?!1:m,_=Ne.exports.useRef(null),E=Ne.exports.useCallback(function(x,v){var C,V;return o&&!o(x)?!d:yEe(x)&&!TU(x,a)||(C=x.target)!=null&&C.isContentEditable&&!g?!0:_.current===null||document.activeElement===_.current||(V=_.current)!=null&&V.contains(document.activeElement)?(e(x,v),!0):!1},r?[_,a,o].concat(r):[_,a,o]);return Ne.exports.useEffect(function(){if(!f){Ta.unbind(n,E);return}return s&&l!==!0&&(t.keydown=!1),Ta(n,t||{},E),function(){return Ta.unbind(n,E)}},[E,n,f]),_}Ta.isPressed;function EEe(){let n=window.localStorage&&localStorage.getItem("boards");return n&&(n=JSON.parse(n)),!n||!n.length?null:n}function CEe(){let n=window.localStorage&&localStorage.getItem("events");return n&&(n=JSON.parse(n)),!n||!n.length?null:n}class VEe{addEventToLibrary(e){St.dispatch($E({event:e}))}removeEventFromLibrary(e){St.dispatch(gte({eventId:e}))}getEventFromLibrary(e){return w8(St.getState())[e]}getEventsInLibrary(){return w8(St.getState())}}class DEe extends Ne.exports.Component{constructor(){super(...arguments),this.state={aiTree:null,error:null,errorInfo:null,initialized:!1},this._onUpdateCheckHasUpdate=()=>{St.dispatch(kee(!0))}}render(){return this.state.error?L(IEe,{error:this.state.error,errorInfo:this.state.errorInfo,onClearError:()=>{this.setState({error:null,errorInfo:null}),ro(!1)}}):this.state.initialized?L(FEe,{...this.state}):null}componentDidCatch(e,t){bU(this,e,t)}componentDidMount(){if(nc)try{const e=window.require("electron").ipcRenderer;e.on("update-check-hasupdate",this._onUpdateCheckHasUpdate),e.send("update-check-start")}catch(e){console.error("Auto update failed in componentDidMount: ",e)}this.state.initialized||(LEe(),this.setState({initialized:!0}))}componentWillUnmount(){if(nc)try{window.require("electron").ipcRenderer.removeListener("update-check-hasupdate",this._onUpdateCheckHasUpdate)}catch(e){console.error("Auto update failed in componentWillUnmount: ",e)}}}function FEe(n){const e=Hn(qI),t=Hn(tC),r=Hn(eC),i=Hn(al),a=Hn(Uee),o=Hn(jee);nse(i.name),ise(),bEe();let s;switch(e){case fn.EDITOR:s=L(Ese,{});break;case fn.DETAILS:s=L(uxe,{board:i});break;case fn.SETTINGS:s=L(qae,{});break;case fn.ABOUT:s=L(wxe,{});break;case fn.MODELS:s=L(Gxe,{});break;case fn.SPRITES:s=L(oEe,{});break;case fn.EVENTS:s=L(AEe,{children:L(ove,{})});break;case fn.CREATEEVENT_ASM:s=L(wve,{});break;case fn.CREATEEVENT_C:s=L(Fve,{});break;case fn.STRINGS:s=L(Rve,{});break;case fn.PATCHES:s=L(Ive,{});break;case fn.DEBUG:s=L(T4e,{});break;case fn.AUDIO:s=L(Q4e,{});break;case fn.ADDITIONAL_BGS:s=L(LB,{board:i,title:"Additional Background Configuration",getExistingCode:()=>aC(i),getDefaultCode:d=>Yz(d),onSetCode:(d,h)=>Lne(d,h),canSaveAndExit:(d,h)=>Qz(d,h,i)});break;case fn.AUDIO_SELECTION_CODE:s=L(LB,{board:i,title:"Background Music Selection Code",getExistingCode:()=>oC(i),getDefaultCode:d=>eW(d),onSetCode:(d,h)=>Bne(d,h),canSaveAndExit:(d,h)=>tW(d,h,i)});break}let l;switch(e){case fn.EDITOR:case fn.DETAILS:case fn.EVENTS:l=L("div",{className:"sidebar",children:L(Nve,{boards:r})});break}let u="body";return a===ce.ERASE&&(u+=" eraser"),Xe("div",{className:u,children:[L(PEe,{}),L(Zwe,{view:e,romLoaded:o,board:i}),Xe("div",{className:"content",onKeyDownCapture:t?zae:void 0,children:[l,Xe("div",{className:"main",children:[s,Xe("div",{className:"mainOverlay",children:[L(Zg,{name:"Toolbox",position:"TopRight",visible:e===fn.EDITOR,children:L(hye,{currentAction:a,gameVersion:i.game,boardType:i.type})}),L(TEe,{currentView:e,currentBoard:i}),L(Zg,{name:"Board Properties",position:"BottomLeft",visible:e===fn.EDITOR,children:L(e4e,{currentBoard:i})}),n.aiTree&&L(Zg,{name:"AI Decision Tree",position:"TopLeft",visible:e===fn.EDITOR,canClose:!0,onCloseClick:()=>A5(null),children:L(tEe,{root:n.aiTree})})]}),L("div",{id:"dragZone"})]})]}),L(REe,{})]})}function TEe({currentView:n,currentBoard:e}){const t=tse();let r="Space Properties";return t>1&&(r+=` (${t} selected)`),L(Zg,{name:r,position:"BottomRight",visible:n===fn.EDITOR,children:L(Lye,{gameVersion:e.game,boardType:e.type})})}function bEe(){const n=Hn(qI),t=!Hn(tC)&&n===fn.EDITOR;ZB("ctrl+z",(r,i)=>{une()},{enabled:t,enableOnTags:["INPUT","SELECT"]}),ZB("ctrl+y",(r,i)=>{dne()},{enabled:t,enableOnTags:["INPUT","SELECT"]})}function PEe(){const n=Zoe(),e=Ne.exports.useCallback(()=>{n(Mb(!0))},[n]),t=Ne.exports.useCallback(()=>{n(Mb(!0)),ro(!0),nc&&window.require("electron").ipcRenderer.send("update-check-doupdate")},[n]),r=Hn(o=>o.app.updateHideNotification),i=Hn(Gee),a=Hn(Hee).slice();return i&&!r&&a.push(Xe(Q9,{color:wD.Blue,onClose:e,children:["An update is available.",L(J9,{onClick:t,children:"Install"})]},"update")),L(Hve,{children:a})}function REe(){const n=Hn(tC),e=Hn($te),t=Hn(ene),r=Hn(tne),i=Hn(nne),a=Hn(rne);return n?L(aEe,{message:e,messageHTML:t,prompt:r,confirm:i,onAccept:o=>{o0(),a&&a(o)},onCancel:()=>{o0(),a&&a()},onForceClose:()=>ro(!1)}):null}window.onerror=function(n,e,t,r,i){const a=window._PP64instance;i&&(a?bU(a,i,null):alert(i))};function LEe(){YZ(new VEe);let n;const e=EEe();e&&e.length?n=e.map(r=>II(r)):n=[E8(1)],St.dispatch(Xee({boards:n}));const t=CEe();t&&t.length&&t.forEach(r=>{if(!(!r||!r.asm))try{const i=r,a=oo(i.language||En.MIPS,i.asm);St.dispatch($E({event:a}))}catch(i){console.error("Error reading cached event",i)}}),Yp()}const BEe=document.getElementById("body"),MEe=Rk(BEe);MEe.render(L(aae,{store:St,children:L(DEe,{ref:n=>window._PP64instance=n})}));function bU(n,e,t){n.setState({error:e,errorInfo:t}),console.error(e,t)}function IEe(n){const e=n.errorInfo&&n.errorInfo.componentStack;return Xe("div",{className:"errorDiv selectable",children:[Xe("h2",{children:["Hey, it seeems like ","something's"," wrong in\xA0",L("span",{className:"errorStrikeoutText",children:"Mushroom Village"}),"\xA0 PartyPlanner64."]}),Xe("p",{children:["Please \xA0",L("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/issues",target:"_blank",rel:"noopener noreferrer",children:"file an issue"}),"\xA0 with the following details, and refresh the page. Or \xA0",L("a",{href:"#",onClick:n.onClearError,children:"click here"}),"\xA0 to dismiss this error, but you may be in a bad state."]}),L("pre",{children:n.error.toString()}),n.error.stack?Xe(Ne.exports.Fragment,{children:[L("div",{children:"Stack Error Details:"}),L("pre",{children:n.error.stack})]}):null,L("div",{children:"Component Stack Error Details:"}),L("pre",{children:e||"N/A"})]})}
