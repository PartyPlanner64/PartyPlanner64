function Kj(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var A0=(n=>(n[n.EDITOR=0]="EDITOR",n[n.DETAILS=1]="DETAILS",n[n.SETTINGS=2]="SETTINGS",n[n.ABOUT=3]="ABOUT",n[n.MODELS=4]="MODELS",n[n.PATCHES=5]="PATCHES",n[n.STRINGS=6]="STRINGS",n[n.EVENTS=7]="EVENTS",n[n.CREATEEVENT_ASM=8]="CREATEEVENT_ASM",n[n.CREATEEVENT_C=9]="CREATEEVENT_C",n[n.DEBUG=10]="DEBUG",n[n.AUDIO=11]="AUDIO",n[n.ADDITIONAL_BGS=12]="ADDITIONAL_BGS",n[n.AUDIO_SELECTION_CODE=13]="AUDIO_SELECTION_CODE",n[n.SPRITES=14]="SPRITES",n))(A0||{}),de=(n=>(n[n.OTHER=0]="OTHER",n[n.BLUE=1]="BLUE",n[n.RED=2]="RED",n[n.MINIGAME=3]="MINIGAME",n[n.HAPPENING=4]="HAPPENING",n[n.STAR=5]="STAR",n[n.CHANCE=6]="CHANCE",n[n.START=7]="START",n[n.SHROOM=8]="SHROOM",n[n.BOWSER=9]="BOWSER",n[n.ITEM=10]="ITEM",n[n.BATTLE=11]="BATTLE",n[n.BANK=12]="BANK",n[n.ARROW=13]="ARROW",n[n.BLACKSTAR=14]="BLACKSTAR",n[n.GAMEGUY=15]="GAMEGUY",n[n.DUEL_BASIC=16]="DUEL_BASIC",n[n.DUEL_START_BLUE=17]="DUEL_START_BLUE",n[n.DUEL_START_RED=18]="DUEL_START_RED",n[n.DUEL_POWERUP=19]="DUEL_POWERUP",n[n.DUEL_REVERSE=20]="DUEL_REVERSE",n))(de||{}),yt=(n=>(n[n.TOAD=0]="TOAD",n[n.BOWSER=1]="BOWSER",n[n.KOOPA=2]="KOOPA",n[n.BOO=3]="BOO",n[n.GOOMBA=4]="GOOMBA",n[n.BANK=5]="BANK",n[n.BANKCOIN=6]="BANKCOIN",n[n.ITEMSHOP=7]="ITEMSHOP",n[n.GATE=8]="GATE",n))(yt||{}),G0=(n=>(n.NORMAL="NORMAL",n.DUEL="DUEL",n))(G0||{}),dn=(n=>(n[n.NORMAL=0]="NORMAL",n[n.WESTERN=1]="WESTERN",n[n.PIRATE=2]="PIRATE",n[n.HORROR=3]="HORROR",n[n.SPACE=4]="SPACE",n[n.MYSTERY=5]="MYSTERY",n))(dn||{}),ue=(n=>(n[n.MOVE=0]="MOVE",n[n.LINE=1]="LINE",n[n.LINE_STICKY=2]="LINE_STICKY",n[n.ROTATE=3]="ROTATE",n[n.ERASE=4]="ERASE",n[n.ROM_LOAD=5]="ROM_LOAD",n[n.ROM_UNLOAD=6]="ROM_UNLOAD",n[n.BOARD_LOAD=7]="BOARD_LOAD",n[n.BOARD_SAVE=8]="BOARD_SAVE",n[n.BOARD_NEW=9]="BOARD_NEW",n[n.BOARD_WRITE=10]="BOARD_WRITE",n[n.BOARD_DETAILS=11]="BOARD_DETAILS",n[n.BOARD_EDITOR=12]="BOARD_EDITOR",n[n.BOARD_COPY=13]="BOARD_COPY",n[n.MODEL_VIEWER=13.3]="MODEL_VIEWER",n[n.STRINGS_EDITOR=13.4]="STRINGS_EDITOR",n[n.SPRITE_VIEWER=13.45]="SPRITE_VIEWER",n[n.EVENTS=13.5]="EVENTS",n[n.CREATEEVENT=13.6]="CREATEEVENT",n[n.BACK_TO_EVENTS=13.7]="BACK_TO_EVENTS",n[n.SAVE_EVENT=13.8]="SAVE_EVENT",n[n.EVENT_LOAD=13.9]="EVENT_LOAD",n[n.SET_BG=14]="SET_BG",n[n.SCREENSHOT=14.1]="SCREENSHOT",n[n.SAVE_ADDITIONALBG=14.2]="SAVE_ADDITIONALBG",n[n.ADDITIONALBG_BACK=14.3]="ADDITIONALBG_BACK",n[n.SAVE_AUDIOSELECTCODE=14.2]="SAVE_AUDIOSELECTCODE",n[n.AUDIOSELECTCODE_BACK=14.3]="AUDIOSELECTCODE_BACK",n[n.ROM_SAVE=15]="ROM_SAVE",n[n.SETTINGS=15.1]="SETTINGS",n[n.ABOUT=15.2]="ABOUT",n[n.PATCHES=15.3]="PATCHES",n[n.DEBUG=15.4]="DEBUG",n[n.AUDIO=15.5]="AUDIO",n[n.ADD_OTHER=16]="ADD_OTHER",n[n.ADD_BLUE=17]="ADD_BLUE",n[n.ADD_RED=18]="ADD_RED",n[n.ADD_MINIGAME=19]="ADD_MINIGAME",n[n.ADD_HAPPENING=20]="ADD_HAPPENING",n[n.ADD_STAR=21]="ADD_STAR",n[n.ADD_BLACKSTAR=21.2]="ADD_BLACKSTAR",n[n.ADD_START=21.3]="ADD_START",n[n.ADD_CHANCE=22]="ADD_CHANCE",n[n.ADD_SHROOM=23]="ADD_SHROOM",n[n.ADD_BOWSER=24]="ADD_BOWSER",n[n.ADD_TOAD_CHARACTER=25]="ADD_TOAD_CHARACTER",n[n.ADD_BOWSER_CHARACTER=26]="ADD_BOWSER_CHARACTER",n[n.ADD_KOOPA_CHARACTER=27]="ADD_KOOPA_CHARACTER",n[n.ADD_BOO_CHARACTER=28]="ADD_BOO_CHARACTER",n[n.ADD_ITEM=29]="ADD_ITEM",n[n.ADD_BATTLE=30]="ADD_BATTLE",n[n.ADD_BANK=31]="ADD_BANK",n[n.ADD_GAMEGUY=32]="ADD_GAMEGUY",n[n.ADD_ARROW=32.2]="ADD_ARROW",n[n.MARK_STAR=33]="MARK_STAR",n[n.MARK_GATE=33.1]="MARK_GATE",n[n.ADD_BANK_SUBTYPE=34]="ADD_BANK_SUBTYPE",n[n.ADD_BANKCOIN_SUBTYPE=35]="ADD_BANKCOIN_SUBTYPE",n[n.ADD_ITEMSHOP_SUBTYPE=36]="ADD_ITEMSHOP_SUBTYPE",n[n.ADD_DUEL_BASIC=37]="ADD_DUEL_BASIC",n[n.ADD_DUEL_REVERSE=38]="ADD_DUEL_REVERSE",n[n.ADD_DUEL_POWERUP=39]="ADD_DUEL_POWERUP",n[n.ADD_DUEL_START_BLUE=40]="ADD_DUEL_START_BLUE",n[n.ADD_DUEL_START_RED=41]="ADD_DUEL_START_RED",n[n.TELESCOPE=42]="TELESCOPE",n))(ue||{}),Qe=(n=>(n.MP1_USA="CLBE",n.MP1_JPN="CLBJ",n.MP1_PAL="NLBP",n.MP2_USA="NMWE",n.MP2_JPN="NMWJ",n.MP2_PAL="NMWP",n.MP3_USA="NMVE",n.MP3_JPN="NMVJ",n.MP3_PAL="NMVP",n))(Qe||{});function Oc(n){for(const e in Qe)if(Qe[e]===n)return e;return null}var y0=(n=>(n[n.MIPS=0]="MIPS",n[n.C=1]="C",n))(y0||{}),JB=(n=>(n[n.WALKOVER=1]="WALKOVER",n[n.LANDON=3]="LANDON",n[n.SPECIAL=7]="SPECIAL",n[n.BEGINORWALKOVER=8]="BEGINORWALKOVER",n))(JB||{}),Yt=(n=>(n[n.WALKOVER=1]="WALKOVER",n[n.LANDON=3]="LANDON",n[n.BEFORE_DICE_ROLL=-5]="BEFORE_DICE_ROLL",n[n.BEFORE_PLAYER_TURN=-4]="BEFORE_PLAYER_TURN",n[n.AFTER_TURN=-3]="AFTER_TURN",n[n.BEFORE_TURN=-2]="BEFORE_TURN",n[n.BEGINORWALKOVER=8]="BEGINORWALKOVER",n))(Yt||{});function jw(n){switch(n){case 3:return 3;case 1:return 1;case-2:case-3:case-4:case-5:return 7;case 8:return 8;default:throw new Error(`Unrecognized editor activation type ${n}`)}}var sn=(n=>(n[n.DIRECT=1]="DIRECT",n[n.PROCESS=2]="PROCESS",n))(sn||{});function ZB(n){switch(n){case 1:return"Direct";case 2:return"Process"}throw new Error(`Unknown execution type ${n}.`)}function Yj(n){switch(n){case"Direct":return 1;case"Process":return 2}return null}var wn=(n=>(n[n.ERROR=1]="ERROR",n[n.WARNING=2]="WARNING",n))(wn||{});const qj=["Boolean","Number","+Number","Number[]","Space","Space[]"];var i0=(n=>(n.Boolean="Boolean",n.Number="Number",n.PositiveNumber="+Number",n.NumberArray="Number[]",n.Space="Space",n.SpaceArray="Space[]",n))(i0||{});function $B(n){return n.endsWith("[]")}var ql=(n=>(n.Classic="classic",n.DarkGray="dark-gray",n))(ql||{});function pu(n){return JSON.parse(JSON.stringify(n))}function eM(n){for(const e in n)return!1;return!0}function ko(n,e){const t=document.createElement("canvas");return t.width=n,t.height=e,t.getContext("2d")}function j4(n,e,t){const r=n.getBoundingClientRect();return e=Math.round(e),t=Math.round(t),[e-Math.round(r.left),t-Math.round(r.top)]}let tM=!1;function Hn(){return tM}function Zg(n){tM=!!n}function wt(...n){Hn()&&console.log.apply(console,arguments)}function At(n,e="0x"){let t=Number(Math.abs(n)).toString(16).toUpperCase();return t.length===1&&(t="0"+t),(n<0?"-":"")+e+t}function O0(n){if(Hn()&&!n){debugger;throw new Error("Assertion failed")}}var Ws=function(n,e){return n+e&4294967295},e3=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function o_(n,e,t,r,i,a){return e=Ws(Ws(e,n),Ws(r,a)),Ws(e<<i|e>>>32-i,t)}function Vi(n,e,t,r,i,a,o){return o_(e&t|~e&r,n,e,i,a,o)}function Di(n,e,t,r,i,a,o){return o_(e&r|t&~r,n,e,i,a,o)}function Fi(n,e,t,r,i,a,o){return o_(e^t^r,n,e,i,a,o)}function Ti(n,e,t,r,i,a,o){return o_(t^(e|~r),n,e,i,a,o)}function ds(n,e){var t=n[0],r=n[1],i=n[2],a=n[3];t=Vi(t,r,i,a,e[0],7,-680876936),a=Vi(a,t,r,i,e[1],12,-389564586),i=Vi(i,a,t,r,e[2],17,606105819),r=Vi(r,i,a,t,e[3],22,-1044525330),t=Vi(t,r,i,a,e[4],7,-176418897),a=Vi(a,t,r,i,e[5],12,1200080426),i=Vi(i,a,t,r,e[6],17,-1473231341),r=Vi(r,i,a,t,e[7],22,-45705983),t=Vi(t,r,i,a,e[8],7,1770035416),a=Vi(a,t,r,i,e[9],12,-1958414417),i=Vi(i,a,t,r,e[10],17,-42063),r=Vi(r,i,a,t,e[11],22,-1990404162),t=Vi(t,r,i,a,e[12],7,1804603682),a=Vi(a,t,r,i,e[13],12,-40341101),i=Vi(i,a,t,r,e[14],17,-1502002290),r=Vi(r,i,a,t,e[15],22,1236535329),t=Di(t,r,i,a,e[1],5,-165796510),a=Di(a,t,r,i,e[6],9,-1069501632),i=Di(i,a,t,r,e[11],14,643717713),r=Di(r,i,a,t,e[0],20,-373897302),t=Di(t,r,i,a,e[5],5,-701558691),a=Di(a,t,r,i,e[10],9,38016083),i=Di(i,a,t,r,e[15],14,-660478335),r=Di(r,i,a,t,e[4],20,-405537848),t=Di(t,r,i,a,e[9],5,568446438),a=Di(a,t,r,i,e[14],9,-1019803690),i=Di(i,a,t,r,e[3],14,-187363961),r=Di(r,i,a,t,e[8],20,1163531501),t=Di(t,r,i,a,e[13],5,-1444681467),a=Di(a,t,r,i,e[2],9,-51403784),i=Di(i,a,t,r,e[7],14,1735328473),r=Di(r,i,a,t,e[12],20,-1926607734),t=Fi(t,r,i,a,e[5],4,-378558),a=Fi(a,t,r,i,e[8],11,-2022574463),i=Fi(i,a,t,r,e[11],16,1839030562),r=Fi(r,i,a,t,e[14],23,-35309556),t=Fi(t,r,i,a,e[1],4,-1530992060),a=Fi(a,t,r,i,e[4],11,1272893353),i=Fi(i,a,t,r,e[7],16,-155497632),r=Fi(r,i,a,t,e[10],23,-1094730640),t=Fi(t,r,i,a,e[13],4,681279174),a=Fi(a,t,r,i,e[0],11,-358537222),i=Fi(i,a,t,r,e[3],16,-722521979),r=Fi(r,i,a,t,e[6],23,76029189),t=Fi(t,r,i,a,e[9],4,-640364487),a=Fi(a,t,r,i,e[12],11,-421815835),i=Fi(i,a,t,r,e[15],16,530742520),r=Fi(r,i,a,t,e[2],23,-995338651),t=Ti(t,r,i,a,e[0],6,-198630844),a=Ti(a,t,r,i,e[7],10,1126891415),i=Ti(i,a,t,r,e[14],15,-1416354905),r=Ti(r,i,a,t,e[5],21,-57434055),t=Ti(t,r,i,a,e[12],6,1700485571),a=Ti(a,t,r,i,e[3],10,-1894986606),i=Ti(i,a,t,r,e[10],15,-1051523),r=Ti(r,i,a,t,e[1],21,-2054922799),t=Ti(t,r,i,a,e[8],6,1873313359),a=Ti(a,t,r,i,e[15],10,-30611744),i=Ti(i,a,t,r,e[6],15,-1560198380),r=Ti(r,i,a,t,e[13],21,1309151649),t=Ti(t,r,i,a,e[4],6,-145523070),a=Ti(a,t,r,i,e[11],10,-1120210379),i=Ti(i,a,t,r,e[2],15,718787259),r=Ti(r,i,a,t,e[9],21,-343485551),n[0]=Ws(t,n[0]),n[1]=Ws(r,n[1]),n[2]=Ws(i,n[2]),n[3]=Ws(a,n[3])}function nM(n){var e=[],t;for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}function rM(n){var e=[],t;for(t=0;t<64;t+=4)e[t>>2]=n[t]+(n[t+1]<<8)+(n[t+2]<<16)+(n[t+3]<<24);return e}function iM(n){var e=n.length,t=[1732584193,-271733879,-1732584194,271733878],r,i,a,o,s,l;for(r=64;r<=e;r+=64)ds(t,nM(n.substring(r-64,r)));for(n=n.substring(r-64),i=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<i;r+=1)a[r>>2]|=n.charCodeAt(r)<<(r%4<<3);if(a[r>>2]|=128<<(r%4<<3),r>55)for(ds(t,a),r=0;r<16;r+=1)a[r]=0;return o=e*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(o[2],16),l=parseInt(o[1],16)||0,a[14]=s,a[15]=l,ds(t,a),t}function Qj(n){var e=n.length,t=[1732584193,-271733879,-1732584194,271733878],r,i,a,o,s,l;for(r=64;r<=e;r+=64)ds(t,rM(n.subarray(r-64,r)));for(n=r-64<e?n.subarray(r-64):new Uint8Array(0),i=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<i;r+=1)a[r>>2]|=n[r]<<(r%4<<3);if(a[r>>2]|=128<<(r%4<<3),r>55)for(ds(t,a),r=0;r<16;r+=1)a[r]=0;return o=e*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(o[2],16),l=parseInt(o[1],16)||0,a[14]=s,a[15]=l,ds(t,a),t}function Jj(n){var e="",t;for(t=0;t<4;t+=1)e+=e3[n>>t*8+4&15]+e3[n>>t*8&15];return e}function Dp(n){var e;for(e=0;e<n.length;e+=1)n[e]=Jj(n[e]);return n.join("")}Dp(iM("hello"))!=="5d41402abc4b2a76b9719d911017c592"&&(Ws=function(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535});function aM(n){return/[\u0080-\uFFFF]/.test(n)&&(n=unescape(encodeURIComponent(n))),n}function Zj(n,e){var t=n.length,r=new ArrayBuffer(t),i=new Uint8Array(r),a;for(a=0;a<t;a++)i[a]=n.charCodeAt(a);return e?i:r}function $j(n){return String.fromCharCode.apply(null,new Uint8Array(n))}function eG(n,e,t){var r=new Uint8Array(n.byteLength+e.byteLength);return r.set(new Uint8Array(n)),r.set(new Uint8Array(e),n.byteLength),t?r:r.buffer}function Wn(){this.reset()}Wn.prototype.append=function(n){return this.appendBinary(aM(n)),this};Wn.prototype.appendBinary=function(n){this._buff+=n,this._length+=n.length;var e=this._buff.length,t;for(t=64;t<=e;t+=64)ds(this._hash,nM(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this};Wn.prototype.end=function(n){var e=this._buff,t=e.length,r,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a;for(r=0;r<t;r+=1)i[r>>2]|=e.charCodeAt(r)<<(r%4<<3);return this._finish(i,t),a=n?this._hash:Dp(this._hash),this.reset(),a};Wn.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this};Wn.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}};Wn.prototype.setState=function(n){return this._buff=n.buff,this._length=n.length,this._hash=n.hash,this};Wn.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length};Wn.prototype._finish=function(n,e){var t=e,r,i,a;if(n[t>>2]|=128<<(t%4<<3),t>55)for(ds(this._hash,n),t=0;t<16;t+=1)n[t]=0;r=this._length*8,r=r.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),a=parseInt(r[1],16)||0,n[14]=i,n[15]=a,ds(this._hash,n)};Wn.hash=function(n,e){return Wn.hashBinary(aM(n),e)};Wn.hashBinary=function(n,e){var t=iM(n);return e?t:Dp(t)};Wn.ArrayBuffer=function(){this.reset()};Wn.ArrayBuffer.prototype.append=function(n){var e=eG(this._buff.buffer,n,!0),t=e.length,r;for(this._length+=n.byteLength,r=64;r<=t;r+=64)ds(this._hash,rM(e.subarray(r-64,r)));return this._buff=r-64<t?e.subarray(r-64):new Uint8Array(0),this};Wn.ArrayBuffer.prototype.end=function(n){var e=this._buff,t=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i,a;for(i=0;i<t;i+=1)r[i>>2]|=e[i]<<(i%4<<3);return this._finish(r,t),a=n?this._hash:Dp(this._hash),this.reset(),a};Wn.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this};Wn.ArrayBuffer.prototype.getState=function(){var n=Wn.prototype.getState.call(this);return n.buff=$j(n.buff),n};Wn.ArrayBuffer.prototype.setState=function(n){return n.buff=Zj(n.buff,!0),Wn.prototype.setState.call(this,n)};Wn.ArrayBuffer.prototype.destroy=Wn.prototype.destroy;Wn.ArrayBuffer.prototype._finish=Wn.prototype._finish;Wn.ArrayBuffer.hash=function(n,e){e=e||{};var t=Qj(new Uint8Array(n,e.start||0,e.length));return e.raw?t:Dp(t)};function fr(n,e,t,r,i){if(n instanceof ArrayBuffer&&(n=new DataView(n)),e instanceof ArrayBuffer&&(e=new DataView(e)),Array.isArray(e))for(let a=0;a<i;a++)n.setUint8(t+a,e[r+a]);else for(let a=0;a<i;a++)n.setUint8(t+a,e.getUint8(r+a))}function hi(n){const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n[r];return e}function tG(n,e,t){return e+t>n.byteLength?"":Wn.ArrayBuffer.hash(n,{start:e,length:t})}function H0(n,e){return tG.apply(null,n).toLowerCase()===e.toLowerCase()}function G4(n,e=n.byteLength,t=0){let r="",i;n instanceof ArrayBuffer?i=new DataView(n):i=n;for(let a=0;a<e;a++)r+=At(i.getUint8(a),"")+(a&&t&&(a+1)%t===0?`
`:" ");return r}function nG(n,e=n.byteLength,t=0){console.log(G4(n,e,t))}function oM(n,e,t){const i=ko(e,t).createImageData(e,t),a=new Uint8Array(n);for(let o=0;o<n.byteLength;o++)i.data[o]=a[o];return i}function Ea(n,e,t){const r=oM(n,e,t),i=ko(e,t);return i.putImageData(r,0,0),i.canvas.toDataURL()}function sM(n){const e=atob(n.split(",")[1]),t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return t}function lM(n,e){if(n.byteLength!==e.byteLength)return!1;const t=new Uint8Array(n),r=new Uint8Array(e);for(let i=0;i<t.byteLength;i++)if(t[i]!==r[i])return!1;return!0}function rG(n,e){if(!n||!e)return n||e;const t=new Uint8Array(n.byteLength+e.byteLength);return t.set(new Uint8Array(n),0),t.set(new Uint8Array(e),n.byteLength),t.buffer}function iG(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function aG(n,e,t=(r,i)=>r===i){const r=[];for(let i=0;i<n.length;i++){const a=n[i];for(let o=0;o<e.length;o++)if(t(a,e[o])){r.push(a);break}}return r}function jd(n,e){const t=new Array(e);for(let r=0;r<e;r++)t[r]=n;return t}const oG=[{addr:2147484416,type:"u32",name:"osTvType",desc:"0=PAL"},{addr:2147484420,type:"u32",name:"osRomType",desc:"0=cart"},{addr:2147484424,type:"data",name:"osRomBase",desc:"B0000000=cart"},{addr:2147484428,type:"data",name:"osResetType",desc:"0=cold reset"},{addr:2147484440,type:"data",name:"osMemSize",desc:"Size of RDRAM"},{addr:2147567024,type:"code",name:"ReadMainFS",desc:"Reads file from MainFS"},{addr:2147567408,type:"code",name:"FreeMainFS",desc:"Free's an allocated MainFS file pointer"},{addr:2147578972,type:"code",name:"DMA",desc:"A0=rom_addr"},{addr:2147579176,type:"code",name:"LoadFormFile",desc:"A0=main_fs_DDDDFFFF"},{addr:2147579276,type:"code",name:"GetRandomByte"},{addr:2147579328,type:"code",name:"LoadOverlay",desc:"A0=overlay_index"},{addr:2147584272,type:"code",name:"InitSprite",desc:"A0=u32 file_id DDDDFFFF"},{addr:2147585104,type:"code",name:"ShowBasicSprite",desc:"A0=u16 basic_sprite_index"},{addr:2147585148,type:"code",name:"HideBasicSprite",desc:"A0=u16 basic_sprite_index"},{addr:2147585232,type:"code",name:"SetBasicSpritePos",desc:"A0=u16 basic_sprite_index"},{addr:2147585816,type:"code",name:"SetBasicSpriteSize",desc:"A0=u16 basic_sprite_index"},{addr:2147586144,type:"code",name:"InitBasicSprite",desc:"A0=short sprite_index"},{addr:2147594896,type:"code",name:"ParseObjType10",desc:"Parse OBJ1 type 0x10"},{addr:2147599080,type:"code",name:"FindFormEntry",desc:'Finds a FORM entry. A0=entry type (like "OBJ1")'},{addr:2147603008,type:"code",name:"InitCameras",desc:"A0=int cameras count"},{addr:2147604788,type:"code",name:"Convert3DTo2D",desc:"A0=3 point vector"},{addr:2147630100,type:"code",name:"LoadFormBinary",desc:"A0=form_addr"},{addr:2147726976,type:"code",name:"MakePermHeap",desc:"A0=heap_addr"},{addr:2147727012,type:"code",name:"MallocPerm",desc:"A0=size"},{addr:2147727048,type:"code",name:"FreePerm",desc:"A0=addr"},{addr:2147727184,type:"code",name:"MakeTempHeap",desc:"A0=heap_addr"},{addr:2147727220,type:"code",name:"MallocTemp",desc:"A0=size"},{addr:2147727256,type:"code",name:"FreeTemp",desc:"A0=addr"},{addr:2147729740,type:"code",name:"DirectionPrompt",desc:"Prompts player to choose path at branch"},{addr:2147740080,type:"code",name:"RunDecisionTree",desc:"A0=decision_tree_pointer"},{addr:2147768184,type:"code",name:"ShowPlayerCoinChange",desc:"A0=player_index"},{addr:2147787668,type:"code",name:"HVQDecode",desc:"HVQ image decoder"},{addr:2147795436,type:"code",name:"GetSpaceData",desc:"A0=space_index"},{addr:2147795460,type:"code",name:"GetAbsSpaceIndexFromChainSpaceIndex",desc:"A0=chain_index"},{addr:2147795504,type:"code",name:"GetChainLength",desc:"A0=chain_index"},{addr:2147795532,type:"code",name:"GetChainSpaceIndexFromAbsSpaceIndex",desc:"A0=abs_space_index"},{addr:2147796108,type:"code",name:"SetSpaceType",desc:"A0=space_index"},{addr:2147797248,type:"code",name:"EventTableHydrate",desc:"Moves event table data into the space data"},{addr:2147797804,type:"code",name:"SetCurrentSpaceIndex",desc:"A0=space_index"},{addr:2147797816,type:"code",name:"GetCurrentSpaceIndex"},{addr:2147798640,type:"code",name:"SwapPlayerLocationData",desc:"A0=player_index_1"},{addr:2147798848,type:"code",name:"SetPlayerBlue",desc:"Sets the player's turn state blue"},{addr:2147798856,type:"code",name:"SetPlayerRed",desc:"Sets the player's turn state red"},{addr:2147798864,type:"code",name:"SetPlayerGreen",desc:"Sets the player's turn state green"},{addr:2147798896,type:"code",name:"GetSumOfPlayerStars",desc:"sums the star count of all players"},{addr:2147798976,type:"code",name:"RNGPercentChance",desc:"A0=percent chance the call returns true"},{addr:2147799048,type:"code",name:"GetTurnsRemaining",desc:"Subtracts elapsed turns from total turns"},{addr:2147801048,type:"code",name:"SetPlayerOntoChain",desc:"A0=player_index"},{addr:2147801156,type:"code",name:"SetNextChainAndSpace",desc:"A0=player_index"},{addr:2147801392,type:"code",name:"CreateTextWindow",desc:"creates a text window based on upper left x and y coordinate"},{addr:2147801560,type:"code",name:"ShowTextWindow"},{addr:2147801808,type:"code",name:"HideTextWindow"},{addr:2147802724,type:"code",name:"WaitForTextConfirmation"},{addr:2147822208,type:"code",name:"GetCurrentPlayerIndex"},{addr:2147822220,type:"code",name:"GetPlayerStruct",desc:"A0=player_index pass -1 to get current player's struct"},{addr:2147822284,type:"code",name:"PlayerIsCurrent",desc:"A0=player_index tests if A0 is the current player"},{addr:2147822312,type:"code",name:"PlayerStructIsCurrent",desc:"A0=struct player pointer"},{addr:2147822368,type:"code",name:"PlayerIsCPU",desc:"A0=player_index"},{addr:2147822408,type:"code",name:"AdjustPlayerCoins",desc:"A0=player_index"},{addr:2147822520,type:"code",name:"PlayerHasCoins",desc:"A0=player_index"},{addr:2147823648,type:"code",name:"ClearPlayer0x20",desc:"clears all 0x20 entries in player structs"},{addr:2147834208,type:"code",name:"AdjustPlayerCoinsGradual",desc:"A0=player_index"},{addr:2147845968,type:"code",name:"ExecBoardScene",desc:"A0=board_fns"},{addr:2147850136,type:"code",name:"IsBoardFeatureFlagSet"},{addr:2147850204,type:"code",name:"SetBoardFeatureFlag",desc:"A0=feature"},{addr:2147850284,type:"code",name:"ClearBoardFeatureFlag",desc:"A0=feature"},{addr:2147850368,type:"code",name:"MakeHeap",desc:"A0=addr"},{addr:2147850400,type:"code",name:"Malloc",desc:"A0=heap pointer (main or temp)"},{addr:2147850540,type:"code",name:"Free",desc:"A0=allocated heap pointer"},{addr:2147851008,type:"code",name:"Ensure16",desc:"A0=num"},{addr:2147858488,type:"code",name:"FreeString",desc:"A0=*str"},{addr:2147864368,type:"code",name:"InitObjectSystem",desc:"A0=int max_objects"},{addr:2147867688,type:"code",name:"InitProcess",desc:"A0=fn"},{addr:2147868048,type:"code",name:"EndProcess"},{addr:2147877548,type:"code",name:"PlaySound",desc:"A0=index"},{addr:2147885756,type:"code",name:"DrawDebugText",desc:"A0=x_pos"},{addr:2147890512,type:"code",name:"SleepProcess"},{addr:2147890612,type:"code",name:"SleepVProcess"},{addr:2147932120,type:"code",name:"LoadStringIntoWindow",desc:"A0=window_id"},{addr:2147934320,type:"code",name:"SetTextCharsPerFrame",desc:"A0=window_id"},{addr:2148005196,type:"code",name:"HVQDecodeInner",desc:"HVQ image decoder"},{addr:2148007236,type:"code",name:"__leoCommand"},{addr:2148010448,type:"code",name:"__leoAnalize_asic_status"},{addr:2148011632,type:"code",name:"__leoSend_asic_cmd_w"},{addr:2148011688,type:"code",name:"__leoSend_asic_cmd_w_nochkDiskChange"},{addr:2148012004,type:"code",name:"__leoRecal_w"},{addr:2148012144,type:"code",name:"__leoSeek_w"},{addr:2148012288,type:"code",name:"__leoChk_err_retry"},{addr:2148012560,type:"code",name:"__leoChk_cur_drvmode"},{addr:2148012832,type:"code",name:"__LEOrw_flags"},{addr:2148012834,type:"code",name:"__LEOdma_que"},{addr:2148012858,type:"code",name:"__LEOPiDmaParam"},{addr:2148012882,type:"code",name:"__LEOtgt_param"},{addr:2148012894,type:"code",name:"__LEOPiInfo"},{addr:2148012898,type:"code",name:"__LEOasic_seq_ctl_shadow"},{addr:2148012902,type:"code",name:"__leoSet_mseq"},{addr:2148013268,type:"code",name:"__leoClr_reset"},{addr:2148013380,type:"code",name:"__LEOcommand_que"},{addr:2148013404,type:"code",name:"__leoClr_queue"},{addr:2148013552,type:"code",name:"__leoLba_to_phys"},{addr:2148014484,type:"code",name:"LeoReadDiskID"},{addr:2148014580,type:"code",name:"LeoReadWrite"},{addr:2148017600,type:"code",name:"osLeoDiskInit"},{addr:2148017756,type:"code",name:"__osDiskHandle"},{addr:2148017760,type:"code",name:"__LeoDiskHandle"},{addr:2148018112,type:"code",name:"LeoDriveExist"},{addr:2148029872,type:"code",name:"sqrtf",desc:"of F0 and F12"},{addr:2148029888,type:"code",name:"cosf"},{addr:2148030224,type:"code",name:"guLookAt",desc:"Calculate a 'lookat' view matrix."},{addr:2148031124,type:"code",name:"guLookAtF",desc:"Calculate a 'lookat' view matrix (floating point)"},{addr:2148032032,type:"code",name:"guLookAtReflect"},{addr:2148032140,type:"code",name:"guLookAtReflectF"},{addr:2148033552,type:"code",name:"guLookAtHilite"},{addr:2148033764,type:"code",name:"guLookAtHiliteF"},{addr:2148036208,type:"code",name:"guMtxF2L"},{addr:2148036360,type:"code",name:"guMtxL2F"},{addr:2148036448,type:"code",name:"guMtxIdentF"},{addr:2148036528,type:"code",name:"guMtxIdentF"},{addr:2148036696,type:"code",name:"guMtxF2L"},{addr:2148036848,type:"code",name:"guMtxXFMF"},{addr:2148037020,type:"code",name:"guMtxCatF"},{addr:2148037068,type:"code",name:"guMtxXFMF"},{addr:2148037248,type:"code",name:"guMtxXFML"},{addr:2148037388,type:"code",name:"guMtxCatL"},{addr:2148037504,type:"code",name:"guOrtho",desc:"Calculate a positive projection matrix."},{addr:2148037836,type:"code",name:"guOrthoF",desc:"Calculate a positive projection matrix (floating point)"},{addr:2148038144,type:"code",name:"guPerspective",desc:"Calculate a perspective drawing projection matrix."},{addr:2148038600,type:"code",name:"guPerspectiveF",desc:"Calculate a perspective drawing projection matrix (floating point)"},{addr:2148039040,type:"code",name:"guRotate"},{addr:2148039416,type:"code",name:"guRotateF"},{addr:2148039776,type:"code",name:"guRotateRPY"},{addr:2148040172,type:"code",name:"guRotateRPYF"},{addr:2148040576,type:"code",name:"guScale"},{addr:2148040700,type:"code",name:"guScaleF"},{addr:2148040800,type:"code",name:"sinf"},{addr:2148041216,type:"code",name:"guTranslate"},{addr:2148041328,type:"code",name:"guTranslateF"},{addr:2148041424,type:"code",name:"guRandom",desc:"Generates a pseudo-random number"},{addr:2148041472,type:"code",name:"osInvalDCache"},{addr:2148041872,type:"code",name:"osSetIntMask"},{addr:2148042096,type:"code",name:"osWritebackDCache"},{addr:2148042272,type:"code",name:"osCreateMesgQueue"},{addr:2148042320,type:"code",name:"osCreateThread"},{addr:2148042736,type:"code",name:"osGetThreadPri"},{addr:2148042768,type:"code",name:"osGetTime"},{addr:2148042912,type:"code",name:"osJamMesg"},{addr:2148043232,type:"code",name:"osRecvMesg"},{addr:2148043536,type:"code",name:"osSendMesg"},{addr:2148043840,type:"code",name:"osSetThreadPri"},{addr:2148044048,type:"code",name:"osStartThread"},{addr:2148044336,type:"code",name:"osStopThread"},{addr:2148044528,type:"code",name:"__osDequeueThread"},{addr:2148044580,type:"code",name:"__osFaultedThread"},{addr:2148044584,type:"code",name:"__osRunningThread"},{addr:2148044588,type:"code",name:"__osActiveQueue"},{addr:2148044592,type:"code",name:"__osRunQueue"},{addr:2148044596,type:"code",name:"__osThreadTail"},{addr:2148044992,type:"code",name:"__osSetTimerIntr"},{addr:2148045088,type:"code",name:"__osInsertTimer"},{addr:2148045360,type:"code",name:"osVirtualToPhysical",desc:"Translates between CPU virtual address/physical memory address"},{addr:2148045472,type:"code",name:"alBnkfNew",desc:"Initializes a bank file"},{addr:2148045620,type:"code",name:"alSeqFileNew"},{addr:2148045684,type:"code",name:"__bnkf_o_0098"},{addr:2148045856,type:"code",name:"__bnkf_o_0118"},{addr:2148046004,type:"code",name:"__bnkf_o_01D8"},{addr:2148046092,type:"code",name:"__bnkf_o_0258"},{addr:2148046192,type:"code",name:"alEvtqFlushType"},{addr:2148046316,type:"code",name:"alEvtqNextEvent"},{addr:2148046368,type:"code",name:"alEvtqFlushstring_num",desc:"returns pointer"},{addr:2148046468,type:"code",name:"alEvtqPostEvent"},{addr:2148046488,type:"code",name:"alEvtqPostEvent"},{addr:2148046756,type:"code",name:"alEvtqNextEvent"},{addr:2148046856,type:"code",name:"alEvtqFlushType"},{addr:2148046908,type:"code",name:"alEvtqNew"},{addr:2148047132,type:"code",name:"alLink"},{addr:2148047164,type:"code",name:"alUnlink"},{addr:2148047216,type:"code",name:"alHeapInit"},{addr:2148047280,type:"code",name:"alHeapDBAlloc"},{addr:2148047360,type:"code",name:"alCopy"},{addr:2148047424,type:"code",name:"alCSeqGetLoc"},{addr:2148047540,type:"code",name:"alCSeqSetLoc"},{addr:2148047656,type:"code",name:"alCSeqNewMarker"},{addr:2148047692,type:"code",name:"alCSeqNextEvent"},{addr:2148047936,type:"code",name:"__alCSeqNextDelta"},{addr:2148048064,type:"code",name:"__cseq_o_0194"},{addr:2148048320,type:"code",name:"alCSeqGetTicks"},{addr:2148048328,type:"code",name:"alCSeqSecToTicks"},{addr:2148048488,type:"code",name:"alCSeqTicksToSec"},{addr:2148048612,type:"code",name:"__alCSeqNextDelta"},{addr:2148048740,type:"code",name:"alCSeqNextEvent"},{addr:2148048984,type:"code",name:"alCSeqNew"},{addr:2148049876,type:"code",name:"__cseq_o_02A4"},{addr:2148050060,type:"code",name:"__cseq_o_0088"},{addr:2148050176,type:"code",name:"alSeqpDelete"},{addr:2148050208,type:"code",name:"alSeqpGetChlFXMix"},{addr:2148050240,type:"code",name:"alSeqpGetChlPan"},{addr:2148050272,type:"code",name:"alSeqpGetChlVol"},{addr:2148050304,type:"code",name:"alSeqpGetChlProgram"},{addr:2148050432,type:"code",name:"alCSPGetTempo"},{addr:2148050480,type:"code",name:"alSeqpGetState"},{addr:2148050496,type:"code",name:"alSeqpPlay"},{addr:2148050544,type:"code",name:"alSeqpSetBank"},{addr:2148050592,type:"code",name:"alSeqpSetChlFXMix"},{addr:2148050672,type:"code",name:"alSeqpSetSeq"},{addr:2148050720,type:"code",name:"alSeqpSetTempo"},{addr:2148050800,type:"code",name:"alSeqpSetVol"},{addr:2148050848,type:"code",name:"alSeqpStop"},{addr:2148050896,type:"code",name:"alSndpDelete"},{addr:2148050944,type:"code",name:"alSndpAllocate"},{addr:2148051136,type:"code",name:"alSndpDeallocate"},{addr:2148051216,type:"code",name:"alSndpSetSound"},{addr:2148051232,type:"code",name:"alSndpPlay"},{addr:2148051328,type:"code",name:"alSndpGetSound"},{addr:2148051344,type:"code",name:"alSndpStop"},{addr:2148051424,type:"code",name:"alSndpGetState"},{addr:2148051456,type:"code",name:"alSndpSetPitch"},{addr:2148051536,type:"code",name:"alSndpSetPriority"},{addr:2148051584,type:"code",name:"alSndpSetVol"},{addr:2148051664,type:"code",name:"alSndpSetPan"},{addr:2148051744,type:"code",name:"alSndpSetFXMix"},{addr:2148051824,type:"code",name:"alSynDelete"},{addr:2148051840,type:"code",name:"alSynAddPlayer"},{addr:2148051920,type:"code",name:"alSynRemovePlayer"},{addr:2148052080,type:"code",name:"alSynFreeVoice"},{addr:2148052240,type:"code",name:"_allocatePVoice"},{addr:2148052424,type:"code",name:"alSynAllocVoice"},{addr:2148052536,type:"code",name:"__synallocvoice_o_0048"},{addr:2148052720,type:"code",name:"alSynStopVoice"},{addr:2148052848,type:"code",name:"alSynStartVoice"},{addr:2148053008,type:"code",name:"alSynSetPitch"},{addr:2148053152,type:"code",name:"alSynSetVol"},{addr:2148053344,type:"code",name:"alCents2Ratio"},{addr:2148053440,type:"code",name:"osAiGetLength"},{addr:2148053616,type:"code",name:"osSpTaskStartGo"},{addr:2148053660,type:"code",name:"osSpTaskLoad"},{addr:2148054192,type:"code",name:"osSpTaskYield"},{addr:2148054224,type:"code",name:"osSpTaskYielded"},{addr:2148054304,type:"code",name:"osViGetCurrentFramebuffer"},{addr:2148054432,type:"code",name:"osViSetEvent"},{addr:2148054528,type:"code",name:"osViSetMode"},{addr:2148054608,type:"code",name:"osViSwapBuffer"},{addr:2148054688,type:"code",name:"osViBlack"},{addr:2148055664,type:"code",name:"__osPfsGetInitData"},{addr:2148055844,type:"code",name:"__osPfsRequestData"},{addr:2148056008,type:"code",name:"__osPfsPifRam"},{addr:2148056044,type:"code",name:"__pfsisplug_o_004C"},{addr:2148056072,type:"code",name:"osPfsIsPlug"},{addr:2148056208,type:"code",name:"__pfsisplug_o_0094"},{addr:2148056400,type:"code",name:"osEepromLongWrite"},{addr:2148056640,type:"code",name:"osEepromLongRead"},{addr:2148056752,type:"code",name:"osEPiStartDma"},{addr:2148056912,type:"code",name:"__osPiCreateAccessQueue"},{addr:2148056952,type:"code",name:"__osPiGetAccess"},{addr:2148056996,type:"code",name:"__osPiGetAccess"},{addr:2148057060,type:"code",name:"__osPiAccessQueue"},{addr:2148057084,type:"code",name:"__osPiCreateAccessQueue"},{addr:2148057104,type:"code",name:"__osPiRelAccess"},{addr:2148057152,type:"code",name:"bcopy"},{addr:2148057952,type:"code",name:"bzero",desc:"Writes all zeroes"},{addr:2148058112,type:"code",name:"strchr"},{addr:2148058204,type:"code",name:"memcpy"},{addr:2148058168,type:"code",name:"strlen"},{addr:2148058256,type:"code",name:"sprintf",desc:"A0=out_addr"},{addr:2148058400,type:"code",name:"rmonPrintf",desc:"no-op in release"},{addr:2148058420,type:"code",name:"osSyncPrintf",desc:"no-op in release"},{addr:2148058564,type:"code",name:"alCSPNew"},{addr:2148065316,type:"code",name:"alSeqpNew"},{addr:2148065496,type:"code",name:"__seqplayer_o_03EC"},{addr:2148067584,type:"code",name:"__seqplayer_o_0400"},{addr:2148067692,type:"code",name:"__seqplayer_o_0A54"},{addr:2148067772,type:"code",name:"__seqplayer_o_0244"},{addr:2148067872,type:"code",name:"__seqplayer_o_0D18"},{addr:2148067956,type:"code",name:"__seqplayer_o_0A1C"},{addr:2148068168,type:"code",name:"__seqplayer_o_0284"},{addr:2148068280,type:"code",name:"__seqplayer_o_0320"},{addr:2148068308,type:"code",name:"__seqplayer_o_0C7C"},{addr:2148068376,type:"code",name:"__seqplayer_o_04F8"},{addr:2148068668,type:"code",name:"__seqplayer_o_04E0"},{addr:2148068844,type:"code",name:"__seqplayer_o_0600"},{addr:2148069016,type:"code",name:"__seqplayer_o_107C"},{addr:2148069100,type:"code",name:"__seqplayer_o_167C"},{addr:2148069228,type:"code",name:"__seqplayer_o_00BC"},{addr:2148069408,type:"code",name:"__seqplayer_o_0238"},{addr:2148069648,type:"code",name:"__seqplayer_o_05D8"},{addr:2148069712,type:"code",name:"alSynSetFXMix"},{addr:2148070164,type:"code",name:"alAudioFrame"},{addr:2148070596,type:"code",name:"alSynNew"},{addr:2148071472,type:"code",name:"osAiSetFrequency"},{addr:2148071760,type:"code",name:"__CartRomHandle"},{addr:2148071876,type:"code",name:"osCartRomInit"},{addr:2148072144,type:"code",name:"osEepromProbe"},{addr:2148072272,type:"code",name:"osEepromRead"},{addr:2148072680,type:"code",name:"__conteepread_o_00A8"},{addr:2148072816,type:"code",name:"osEepromWrite"},{addr:2148073176,type:"code",name:"__conteepwrite_o_00AC"},{addr:2148073344,type:"code",name:"__osEepStatus"},{addr:2148073760,type:"code",name:"osContGetReadData"},{addr:2148073916,type:"code",name:"osContStartReadData"},{addr:2148074052,type:"code",name:"__contreaddata_o_0028"},{addr:2148074736,type:"code",name:"osEPiReadIo"},{addr:2148074832,type:"code",name:"osEPiWriteIo"},{addr:2148074928,type:"code",name:"osMotorInit"},{addr:2148075512,type:"code",name:"__osMotorAccess"},{addr:2148075840,type:"code",name:"__osPfsDeclearPage"},{addr:2148076120,type:"code",name:"osPfsAllocateFile"},{addr:2148076620,type:"code",name:"__pfsallocatefile_o_0178"},{addr:2148076912,type:"code",name:"__osPfsReleasePages"},{addr:2148077016,type:"code",name:"osPfsDeleteFile"},{addr:2148077340,type:"code",name:"__pfsdeletefile_o_00EC"},{addr:2148077436,type:"code",name:"alHeapCheck"},{addr:2148077856,type:"code",name:"osPfsFreeBlocks"},{addr:2148078128,type:"code",name:"osPfsInitPak"},{addr:2148078632,type:"code",name:"__pfsinitpak_o_0050"},{addr:2148080192,type:"code",name:"osPfsRepairId"},{addr:2148080288,type:"code",name:"osPfsFindFile"},{addr:2148080704,type:"code",name:"__osPfsSelectBank"},{addr:2148080816,type:"code",name:"osCreatePiManager"},{addr:2148081216,type:"code",name:"__osPiRawStartDma"},{addr:2148081224,type:"code",name:"__osPiTable"},{addr:2148081228,type:"code",name:"__osPiDevMgr"},{addr:2148081332,type:"code",name:"__Dom1SpeedParam"},{addr:2148081424,type:"code",name:"__osSiRawStartDma"},{addr:2148081448,type:"code",name:"__osCurrentHandle"},{addr:2148081456,type:"code",name:"__osPiTable"},{addr:2148081460,type:"code",name:"__osPiDevMgr"},{addr:2148081600,type:"code",name:"__osSpRawStartDma"},{addr:2148082576,type:"code",name:"osViSetSpecialFeatures"},{addr:2148082944,type:"code",name:"__osViSwapContext"},{addr:2148083728,type:"code",name:"osAfterPreNMI"},{addr:2148085420,type:"code",name:"__osEnqueueAndYield"},{addr:2148085756,type:"code",name:"__osPopThread"},{addr:2148086176,type:"code",name:"osGetMemSize"},{addr:2148087072,type:"code",name:"__osDisableInt"},{addr:2148087184,type:"code",name:"__osRestoreInt"},{addr:2148087216,type:"code",name:"osSetEventMesg"},{addr:2148087392,type:"code",name:"__osSetHWIntrRoutine"},{addr:2148087680,type:"code",name:"osGetCount"},{addr:2148087712,type:"code",name:"__osProbeTLB"},{addr:2148088096,type:"code",name:"osSetTimer"},{addr:2148088256,type:"code",name:"alLoadParam"},{addr:2148088684,type:"code",name:"alRaw16Pull"},{addr:2148089608,type:"code",name:"alAdpcmPull"},{addr:2148090272,type:"code",name:"alLoadParam"},{addr:2148090700,type:"code",name:"__load_o_0108"},{addr:2148091088,type:"code",name:"alAuxBusParam"},{addr:2148091136,type:"code",name:"alAuxBusPull"},{addr:2148091308,type:"code",name:"alAuxBusParam"},{addr:2148091360,type:"code",name:"alMainBusParam"},{addr:2148091408,type:"code",name:"alMainBusPull"},{addr:2148091680,type:"code",name:"alMainBusParam"},{addr:2148091728,type:"code",name:"alResampleParam"},{addr:2148091920,type:"code",name:"alResamplePull"},{addr:2148092220,type:"code",name:"alResampleParam"},{addr:2148092416,type:"code",name:"alSeqGetLoc"},{addr:2148092480,type:"code",name:"alSeqNewMarker"},{addr:2148092648,type:"code",name:"__seq_o_044C"},{addr:2148092756,type:"code",name:"alSeqSecToTicks"},{addr:2148092900,type:"code",name:"alSeqTicksToSec"},{addr:2148093008,type:"code",name:"__alSeqNextDelta"},{addr:2148093108,type:"code",name:"alSeqNextEvent"},{addr:2148093468,type:"code",name:"alSeqNew"},{addr:2148093644,type:"code",name:"alSeqSetLoc"},{addr:2148093700,type:"code",name:"__seq_o_011C"},{addr:2148093720,type:"code",name:"__seq_o_0040"},{addr:2148093768,type:"code",name:"__seq_o_0020"},{addr:2148093848,type:"code",name:"__seq_o_0104"},{addr:2148093936,type:"code",name:"alSynSetPriority"},{addr:2148093952,type:"code",name:"alSynAllocFX"},{addr:2148094112,type:"code",name:"__osAiDeviceBusy"},{addr:2148094144,type:"code",name:"__osSpDeviceBusy"},{addr:2148094176,type:"code",name:"__osSpGetStatus"},{addr:2148094192,type:"code",name:"__osSpSetStatus"},{addr:2148094208,type:"code",name:"__osSpSetPc"},{addr:2148094628,type:"code",name:"__osSiGetAccess"},{addr:2148094736,type:"code",name:"__osSiRelAccess"},{addr:2148094784,type:"code",name:"osPiGetCmdQueue"},{addr:2148097860,type:"code",name:"alFxNew"},{addr:2148099036,type:"code",name:"alEnvmixerNew"},{addr:2148099220,type:"code",name:"alLoadNew"},{addr:2148099396,type:"code",name:"alResampleNew"},{addr:2148099536,type:"code",name:"alAuxBusNew"},{addr:2148099628,type:"code",name:"alMainBusNew"},{addr:2148099720,type:"code",name:"alSaveNew"},{addr:2148099792,type:"code",name:"_ldexpf",desc:"multiply floating-point number by integral power of 2"},{addr:2148099828,type:"code",name:"_frexpf",desc:"convert floating-point number to fractional and integral components"},{addr:2148100052,type:"code",name:"alEnvmixerParam"},{addr:2148100264,type:"code",name:"alEnvmixerPull"},{addr:2148101072,type:"code",name:"alEnvmixerParam"},{addr:2148101284,type:"code",name:"__env_o_01E0"},{addr:2148102268,type:"code",name:"__env_o_0718"},{addr:2148102908,type:"code",name:"__env_o_027C"},{addr:2148103040,type:"code",name:"_doModFunc"},{addr:2148103180,type:"code",name:"alFxParamHdl"},{addr:2148103676,type:"code",name:"alFxParam"},{addr:2148103696,type:"code",name:"_filterBuffer"},{addr:2148103852,type:"code",name:"_loadOutputBuffer"},{addr:2148103924,type:"code",name:"alFxParam"},{addr:2148104388,type:"code",name:"_loadBuffer"},{addr:2148104440,type:"code",name:"__reverb_o_0178"},{addr:2148104756,type:"code",name:"_saveBuffer"},{addr:2148104976,type:"code",name:"__reverb_o_0154"},{addr:2148105124,type:"code",name:"alFxPull"},{addr:2148105344,type:"code",name:"__reverb_o_00C4"},{addr:2148105712,type:"code",name:"__reverb_o_024C"},{addr:2148105868,type:"code",name:"__reverb_o_05D0"},{addr:2148106016,type:"code",name:"alSaveParam"},{addr:2148106056,type:"code",name:"alSavePull"},{addr:2148106184,type:"code",name:"alSaveParam"},{addr:2148106224,type:"code",name:"__osPfsInodeCache"},{addr:2148106276,type:"code",name:"__osIdCheckSum"},{addr:2148106344,type:"code",name:"__osRepairPackId"},{addr:2148106480,type:"code",name:"__osPfsRWInode"},{addr:2148107092,type:"code",name:"__osCheckPackId"},{addr:2148107304,type:"code",name:"__osCheckId"},{addr:2148107448,type:"code",name:"__osGetId"},{addr:2148107488,type:"code",name:"__osGetId"},{addr:2148107908,type:"code",name:"__osCheckId"},{addr:2148107948,type:"code",name:"__osCheckPackId"},{addr:2148108092,type:"code",name:"__osPfsRWInode"},{addr:2148108304,type:"code",name:"__osRepairPackId"},{addr:2148108928,type:"code",name:"__osContRamRead"},{addr:2148109052,type:"code",name:"__osIdCheckSum"},{addr:2148109120,type:"code",name:"__osSumcalc"},{addr:2148109172,type:"code",name:"__osPfsInodeCacheBank"},{addr:2148109173,type:"code",name:"__osPfsInodeCacheChannel"},{addr:2148109440,type:"code",name:"__osContRamWrite"},{addr:2148109984,type:"code",name:"__osContDataCrc"},{addr:2148110108,type:"code",name:"__osContAddressCrc"},{addr:2148110224,type:"code",name:"__osDevMgrMain"},{addr:2148111184,type:"code",name:"__osEPiRawReadIo"},{addr:2148111552,type:"code",name:"__osEPiRawWriteIo"},{addr:2148111920,type:"code",name:"osPfsChecker"},{addr:2148113744,type:"code",name:"__osPfsGetStatus"},{addr:2148113872,type:"code",name:"__osPfsRequestOneChannel"},{addr:2148113984,type:"code",name:"__pfsgetstatus_o_0030"},{addr:2148114020,type:"code",name:"__osPfsGetStatus"},{addr:2148114132,type:"code",name:"__pfsgetstatus_o_0084"},{addr:2148114272,type:"code",name:"__osSpRawReadIo"},{addr:2148114352,type:"code",name:"__osSpRawWriteIo"},{addr:2148114432,type:"code",name:"__osResetGlobalIntMask"},{addr:2148114512,type:"code",name:"__osSetGlobalIntMask"},{addr:2148114576,type:"code",name:"osYieldThread"},{addr:2148114656,type:"code",name:"alFilterNew"},{addr:2148114688,type:"code",name:"__osSpDeviceBusy"},{addr:2148277364,type:"data",name:"overlay_table"},{addr:2148282356,type:"data",name:"rng_seed"},{addr:2148287312,type:"data",name:"model_info"},{addr:2148292986,type:"u16",name:"cur_board_scene_state",desc:"Determines how the board scene starts up when (re)loaded"},{addr:2148313792,type:"data",name:"jt_ai_logic",desc:"Jump table for 8003E9B0"},{addr:2148315232,type:"data",name:"jt_spacetype_to_turneffect",desc:"Jump table for space type to turn effect"},{addr:2148330124,type:"data",name:"__ALSndPlayer*sndp"},{addr:2148340464,type:"data",name:"main_fs_rom_location"},{addr:2148340468,type:"data",name:"main_fs_dir_count",desc:"Number of directories in main filesystem"},{addr:2148340480,type:"data",name:"main_fs_cur_dir_file_count",desc:"Count of files in directory being accessed"},{addr:2148360240,type:"data",name:"perm_heap_addr",desc:"Address of permanent heap"},{addr:2148360256,type:"data",name:"temp_heap_addr",desc:"Address of temporary heap"},{addr:2148368648,type:"data",name:"space_data",desc:"pointer to space data parsed from board def file"},{addr:2148368656,type:"data",name:"chain_data_addr",desc:"pointer to array of chain lengths and indices"},{addr:2148453156,type:"data",name:"debug_font_color",desc:"16 color values"},{addr:2148454722,type:"u16",name:"bank_coins",desc:"Coins in bank"},{addr:2148454724,type:"u16",name:"bank_stars",desc:"Stars in bank"},{addr:2148454728,type:"u16",name:"enabled_feature_flags"},{addr:2148454802,type:"u16",name:"times_passed_start",desc:"Number of times the start space has been passed"},{addr:2148455760,type:"u16",name:"max_objects",desc:"set from InitObjectSystem"},{addr:2148455879,type:"u8",name:"total_turns",desc:"Total game turns"},{addr:2148455881,type:"u8",name:"current_turn",desc:"Elapsed turns"},{addr:2148455900,type:"u16",name:"current_player_index",desc:"Player who's turn is active"},{addr:2148469236,type:"u32",name:"scene",desc:"Current scene"},{addr:2148478172,type:"u16",name:"hidden_block_space_index",desc:"Space index of hidden block"},{addr:2148479665,type:"u8",name:"p1_cpu_difficulty_1",desc:"Player 1 CPU difficulty"},{addr:2148479666,type:"u8",name:"p1_cpu_difficulty_2",desc:"Player 1 CPU difficulty"},{addr:2148479668,type:"u8",name:"p1_char",desc:"Player 1 character"},{addr:2148479672,type:"u16",name:"p1_coins",desc:"Player 1 coin count"},{addr:2148479674,type:"s16",name:"p1_minigame_coins",desc:"Player 1 coins in current Mini-Game"},{addr:2148479676,type:"u16",name:"p1_stars",desc:"Player 1 star count"},{addr:2148479678,type:"u16",name:"p1_cur_chain_index",desc:"Player 1 current chain index"},{addr:2148479680,type:"u16",name:"p1_cur_space_index",desc:"Player 1 current space index"},{addr:2148479682,type:"u16",name:"p1_next_chain_index",desc:"Player 1 next chain index"},{addr:2148479684,type:"u16",name:"p1_next_space_index",desc:"Player 1 next space index"},{addr:2148479686,type:"u8",name:"p1_poisoned",desc:"Player 1 poisoned boolean"},{addr:2148479687,type:"u8",name:"p1_turn_status",desc:"Color based on type of space landed on"},{addr:2148479700,type:"u16",name:"p1_total_minigame_coins",desc:"Player 1 total Mini-Game coins collected"},{addr:2148479702,type:"u16",name:"p1_total_coins",desc:"Player 1 total coins collected"},{addr:2148479704,type:"u8",name:"p1_total_happening_spaces",desc:"Player 1 total number of Happening Spaces landed on"},{addr:2148479705,type:"u8",name:"p1_total_red_spaces",desc:"Player 1 total number of red spaces landed on"},{addr:2148479706,type:"u8",name:"p1_total_blue_spaces",desc:"Player 1 total number of blue spaces landed on"},{addr:2148479707,type:"u8",name:"p1_total_minigame_spaces",desc:"Player 1 total number of Mini-Game spaces landed on"},{addr:2148479708,type:"u8",name:"p1_total_chance_spaces",desc:"Player 1 total number of Chance Time spaces landed on"},{addr:2148479709,type:"u8",name:"p1_total_mushroom_spaces",desc:"Player 1 total number of Mushroom spaces landed on"},{addr:2148479710,type:"u8",name:"p1_total_bowser_spaces",desc:"Player 1 total number of Bowser spaces landed on"},{addr:2148479713,type:"u8",name:"p2_cpu_difficulty_1",desc:"Player 2 CPU difficulty"},{addr:2148479714,type:"u8",name:"p2_cpu_difficulty_2",desc:"Player 2 CPU difficulty"},{addr:2148479716,type:"u8",name:"p2_char",desc:"Player 2 character"},{addr:2148479720,type:"u16",name:"p2_coins",desc:"Player 2 coin count"},{addr:2148479722,type:"s16",name:"p2_minigame_coins",desc:"Player 2 coins in current Mini-Game"},{addr:2148479724,type:"u16",name:"p2_stars",desc:"Player 2 star count"},{addr:2148479726,type:"u16",name:"p2_cur_chain_index",desc:"Player 2 current chain index"},{addr:2148479728,type:"u16",name:"p2_cur_space_index",desc:"Player 2 current space index"},{addr:2148479730,type:"u16",name:"p2_next_chain_index",desc:"Player 2 next chain index"},{addr:2148479732,type:"u16",name:"p2_next_space_index",desc:"Player 2 next space index"},{addr:2148479734,type:"u8",name:"p2_poisoned",desc:"Player 2 poisoned boolean"},{addr:2148479735,type:"u8",name:"p2_turn_status",desc:"Color based on type of spaced landed on"},{addr:2148479748,type:"u16",name:"p2_total_minigame_coins",desc:"Player 2 total Mini-Game coins collected"},{addr:2148479750,type:"u16",name:"p2_total_coins",desc:"Player 2 total coins collected"},{addr:2148479752,type:"u8",name:"p2_total_happening_spaces",desc:"Player 2 total number of Happening spaces landed on"},{addr:2148479753,type:"u8",name:"p2_total_red_spaces",desc:"Player 2 total number of red spaces landed on"},{addr:2148479754,type:"u8",name:"p2_total_blue_spaces",desc:"Player 2 total number of blue spaces landed on"},{addr:2148479755,type:"u8",name:"p2_total_minigame_spaces",desc:"Player 2 total number of Mini-Game spaces landed on"},{addr:2148479756,type:"u8",name:"p2_total_chance_spaces",desc:"Player 2 total number of Chance Time spaces landed on"},{addr:2148479757,type:"u8",name:"p2_total_mushroom_spaces",desc:"Player 2 total number of Mushroom spaces landed on"},{addr:2148479758,type:"u8",name:"p2_total_bowser_spaces",desc:"Player 2 total number of Bowser spaces landed on"},{addr:2148479761,type:"u8",name:"p3_cpu_difficulty_1",desc:"Player 3 CPU difficulty"},{addr:2148479762,type:"u8",name:"p3_cpu_difficulty_2",desc:"Player 3 CPU difficulty"},{addr:2148479764,type:"u8",name:"p3_char",desc:"Player 3 character"},{addr:2148479768,type:"u16",name:"p3_coins",desc:"Player 3 coin count"},{addr:2148479770,type:"s16",name:"p3_minigame_coins",desc:"Player 3 coins in current Mini-Game"},{addr:2148479772,type:"u16",name:"p3_stars",desc:"Player 3 star count"},{addr:2148479774,type:"u16",name:"p3_cur_chain_index",desc:"Player 3 current chain index"},{addr:2148479776,type:"u16",name:"p3_cur_space_index",desc:"Player 3 current space index"},{addr:2148479778,type:"u16",name:"p3_next_chain_index",desc:"Player 3 next chain index"},{addr:2148479780,type:"u16",name:"p3_next_space_index",desc:"Player 3 next space index"},{addr:2148479782,type:"u8",name:"p3_poisoned",desc:"Player 3 poisoned boolean"},{addr:2148479783,type:"u8",name:"p3_turn_status",desc:"Color based on type of space landed on"},{addr:2148479796,type:"u16",name:"p3_total_minigame_coins",desc:"Player 3 total Mini-Game coins collected"},{addr:2148479798,type:"u16",name:"p3_total_coins",desc:"Player 3 total coins collected"},{addr:2148479800,type:"u8",name:"p3_total_happening_spaces",desc:"Player 3 total number of Happening spaces landed on"},{addr:2148479801,type:"u8",name:"p3_total_red_spaces",desc:"Player 3 total number of red spaces landed on"},{addr:2148479802,type:"u8",name:"p3_total_blue_spaces",desc:"Player 3 total number of blue spaces landed on"},{addr:2148479803,type:"u8",name:"p3_total_minigame_spaces",desc:"Player 3 total number of Mini-Game spaces landed on"},{addr:2148479804,type:"u8",name:"p3_total_chance_spaces",desc:"Player 3 total number of Chance Time spaces landed on"},{addr:2148479805,type:"u8",name:"p3_total_mushroom_spaces",desc:"Player 3 total number of Mushroom spaces landed on"},{addr:2148479806,type:"u8",name:"p3_total_bowser_spaces",desc:"Player 3 total number of Bowser spaces landed on"},{addr:2148479809,type:"u8",name:"p3_cpu_difficulty_1",desc:"Player 3 CPU difficulty"},{addr:2148479810,type:"u8",name:"p3_cpu_difficulty_2",desc:"Player 3 CPU difficulty"},{addr:2148479812,type:"u8",name:"p4_char",desc:"Player 4 character"},{addr:2148479816,type:"u16",name:"p4_coins",desc:"Player 4 coin count"},{addr:2148479818,type:"s16",name:"p4_minigame_coins",desc:"Player 4 coins in current Mini-Game"},{addr:2148479820,type:"u16",name:"p4_stars",desc:"Player 4 star count"},{addr:2148479822,type:"u16",name:"p4_cur_chain_index",desc:"Player 4 current chain index"},{addr:2148479824,type:"u16",name:"p4_cur_space_index",desc:"Player 4 current space index"},{addr:2148479826,type:"u16",name:"p4_next_chain_index",desc:"Player 4 next chain index"},{addr:2148479828,type:"u16",name:"p4_next_space_index",desc:"Player 4 next space index"},{addr:2148479830,type:"u8",name:"p4_poisoned",desc:"Player 4 poisoned boolean"},{addr:2148479831,type:"u8",name:"p4_turn_status",desc:"Color based on type of space landed on"},{addr:2148479844,type:"u16",name:"p4_total_minigame_coins",desc:"Player 4 total Mini-Game coins collected"},{addr:2148479846,type:"u16",name:"p4_total_coins",desc:"Player 4 total coins collected"},{addr:2148479848,type:"u8",name:"p4_total_happening_spaces",desc:"Player 4 total number of Happening spaces landed on"},{addr:2148479849,type:"u8",name:"p4_total_red_spaces",desc:"Player 4 total number of red spaces landed on"},{addr:2148479850,type:"u8",name:"p4_total_blue_spaces",desc:"Player 4 total number of blue spaces landed on"},{addr:2148479851,type:"u8",name:"p4_total_minigame_spaces",desc:"Player 4 total number of Mini-Game spaces landed on"},{addr:2148479852,type:"u8",name:"p4_total_chance_spaces",desc:"Player 4 total number of Chance Time spaces landed on"},{addr:2148479853,type:"u8",name:"p4_total_mushroom_spaces",desc:"Player 4 total number of Mushroom spaces landed on"},{addr:2148479854,type:"u8",name:"p4_total_bowser_spaces",desc:"Player 4 total number of Bowser spaces landed on"}],sG=[{addr:2148275156,type:"data",name:"overlay_table"},{addr:2148489776,type:"data",name:"overlay_ram_start"}],lG=[{addr:2148307636,type:"data",name:"overlay_table"},{addr:2148546384,type:"data",name:"overlay_ram_start"}],uG=[{addr:2147484416,type:"u32",name:"osTvType",desc:"0=PAL"},{addr:2147484420,type:"u32",name:"osRomType",desc:"0=cart"},{addr:2147484424,type:"data",name:"osRomBase",desc:"B0000000=cart"},{addr:2147484428,type:"data",name:"osResetType",desc:"0=cold reset"},{addr:2147484440,type:"data",name:"osMemSize",desc:"Size of RDRAM"},{addr:2147568404,type:"code",name:"PlaySound",desc:"A0=sound_index"},{addr:2147579520,type:"code",name:"ReadMainFS",desc:"Reads file from MainFS"},{addr:2147579904,type:"code",name:"FreeMainFS",desc:"Free's an allocated MainFS file pointer"},{addr:2147584764,type:"code",name:"GetRandomByte"},{addr:2147749248,type:"code",name:"MakePermHeap",desc:"A0=heap_addr"},{addr:2147749284,type:"code",name:"MallocPerm",desc:"A0=size"},{addr:2147749320,type:"code",name:"FreePerm",desc:"A0=addr"},{addr:2147749456,type:"code",name:"MakeTempHeap",desc:"A0=heap_addr"},{addr:2147749492,type:"code",name:"MallocTemp",desc:"A0=size"},{addr:2147749528,type:"code",name:"FreeTemp",desc:"A0=addr"},{addr:2147764224,type:"code",name:"RunDecisionTree",desc:"A0=decision_tree_pointer"},{addr:2147797556,type:"code",name:"ShowPlayerCoinChange",desc:"A0=player_index"},{addr:2147800736,type:"code",name:"UseMushroom",desc:"Mushroom item function"},{addr:2147800884,type:"code",name:"UseSkeleton_key",desc:"Skeleton Key item function"},{addr:2147800920,type:"code",name:"UsePlunder_chest",desc:"Plunder Chest item function"},{addr:2147800960,type:"code",name:"UseBowserBomb",desc:"Bowser Bomb item function"},{addr:2147800992,type:"code",name:"UseDuelingGlove",desc:"Dueling Glove item function"},{addr:2147801176,type:"code",name:"UseWarpBlock",desc:"Warp Block item function"},{addr:2147801264,type:"code",name:"UseGoldenMushroom",desc:"Golden Mushroom item function"},{addr:2147801412,type:"code",name:"UseBooBell",desc:"Boo Bell item function"},{addr:2147801644,type:"code",name:"UseBowserSuit",desc:"Bowser Suit item function"},{addr:2147801796,type:"code",name:"UseMagicLamp",desc:"Magic Lamp item function"},{addr:2147828328,type:"code",name:"AddArrowAngle",desc:"F0=degree_rot_of_arrow"},{addr:2147830668,type:"code",name:"GetSpaceData",desc:"A0=space_index"},{addr:2147830704,type:"code",name:"GetAbsSpaceIndexFromChainSpaceIndex",desc:"A0=chain_index"},{addr:2147833484,type:"code",name:"EventTableHydrate",desc:"Moves event table data into the space data"},{addr:2147836228,type:"code",name:"CloseMessage",desc:"Closes open message window (with animation)"},{addr:2147836776,type:"code",name:"ShowMessage",desc:"A0=character_index"},{addr:2147839024,type:"code",name:"RotateCharacterModel",desc:"A0=player_index (-1 for cur)"},{addr:2147840736,type:"code",name:"SetPlayerOntoChain",desc:"A0=player_index"},{addr:2147840844,type:"code",name:"SetNextChainAndSpace"},{addr:2147867696,type:"code",name:"GetCurrentPlayerIndex"},{addr:2147867708,type:"code",name:"GetPlayerStruct",desc:"A0=player_index pass -1 to get current player's struct"},{addr:2147867780,type:"code",name:"PlayerIsCurrent",desc:"A0=player_index tests if A0 is the current player"},{addr:2147867808,type:"code",name:"PlayerIsCPU",desc:"A0=player_index"},{addr:2147867848,type:"code",name:"AdjustPlayerCoins",desc:"A0=player_index"},{addr:2147867960,type:"code",name:"PlayerHasCoins",desc:"A0=player_index"},{addr:2147868008,type:"code",name:"SetBoardPlayerAnimation",desc:"A0=player_index"},{addr:2147882164,type:"code",name:"AdjustPlayerCoinsGradual",desc:"A0=player_index"},{addr:2147910752,type:"code",name:"MakeHeap",desc:"A0=addr"},{addr:2147910784,type:"code",name:"Malloc",desc:"A0=heap pointer (main or temp)"},{addr:2147910924,type:"code",name:"Free",desc:"A0=allocated heap pointer"},{addr:2147967168,type:"code",name:"InitObjSys"},{addr:2147970660,type:"code",name:"InitProcess"},{addr:2147981148,type:"code",name:"PlayCharacterSound",desc:"A0=sound_index"},{addr:2147998176,type:"code",name:"SleepProcess"},{addr:2147998276,type:"code",name:"SleepVProcess"},{addr:2148070724,type:"code",name:"InitFadeIn",desc:"A0=fade_type"},{addr:2148070828,type:"code",name:"InitFadeOut",desc:"A0=fade_type"},{addr:2148397008,type:"data",name:"perm_heap_addr",desc:"Permanent heap pointer"},{addr:2148397024,type:"data",name:"temp_heap_addr",desc:"Temporary heap address"},{addr:2148084464,type:"code",name:"alSynStartVoiceParams"},{addr:2148084880,type:"code",name:"alSynSetPan"},{addr:2148101828,type:"code",name:"__leoCommand"},{addr:2148105040,type:"code",name:"__leoAnalize_asic_status"},{addr:2148106224,type:"code",name:"__leoSend_asic_cmd_w"},{addr:2148106280,type:"code",name:"__leoSend_asic_cmd_w_nochkDiskChange"},{addr:2148106596,type:"code",name:"__leoRecal_w"},{addr:2148106736,type:"code",name:"__leoSeek_w"},{addr:2148106880,type:"code",name:"__leoChk_err_retry"},{addr:2148107152,type:"code",name:"__leoChk_cur_drvmode"},{addr:2148107424,type:"code",name:"__LEOrw_flags"},{addr:2148107426,type:"code",name:"__LEOdma_que"},{addr:2148107450,type:"code",name:"__LEOPiDmaParam"},{addr:2148107474,type:"code",name:"__LEOtgt_param"},{addr:2148107490,type:"code",name:"__LEOasic_seq_ctl_shadow"},{addr:2148107494,type:"code",name:"__leoSet_mseq"},{addr:2148107860,type:"code",name:"__leoClr_reset"},{addr:2148107972,type:"code",name:"__LEOcommand_que"},{addr:2148107996,type:"code",name:"__leoClr_queue"},{addr:2148108144,type:"code",name:"__leoLba_to_phys"},{addr:2148108736,type:"code",name:"LeoDriveExist"},{addr:2148109280,type:"code",name:"__leoActive"},{addr:2148109284,type:"code",name:"LeoReadDiskID"},{addr:2148109376,type:"code",name:"__leoActive"},{addr:2148109380,type:"code",name:"LeoReadWrite"},{addr:2148109524,type:"code",name:"__LEO_country_code"},{addr:2148109528,type:"code",name:"__osShutdown"},{addr:2148109836,type:"code",name:"__LeoBootGame2"},{addr:2148110360,type:"code",name:"LeoBootGame"},{addr:2148110672,type:"code",name:"__LeoBootGame3"},{addr:2148117912,type:"code",name:"__leoInquiry"},{addr:2148118084,type:"code",name:"__leoMode_sel"},{addr:2148118260,type:"code",name:"__leoStart_stop"},{addr:2148118496,type:"code",name:"__LEORAM_BYTE"},{addr:2148118524,type:"code",name:"__LEOdisk_type"},{addr:2148118525,type:"code",name:"__LEORAM_START_LBA"},{addr:2148118543,type:"code",name:"__leoRd_capacity"},{addr:2148119508,type:"code",name:"__LEOtgt_param"},{addr:2148119520,type:"code",name:"leoRezero"},{addr:2148119668,type:"code",name:"leoSeek"},{addr:2148119860,type:"code",name:"__leoTest_unit_rdy"},{addr:2148123936,type:"code",name:"__osPiTable"},{addr:2148123940,type:"code",name:"osLeoDiskInit"},{addr:2148124092,type:"code",name:"__osDiskHandle"},{addr:2148124096,type:"code",name:"__LeoDiskHandle"},{addr:2148124448,type:"code",name:"osEepromWrite"},{addr:2148124808,type:"code",name:"__conteepwrite_o_00AC"},{addr:2148124976,type:"code",name:"__osEepStatus"},{addr:2148125392,type:"code",name:"osEepromProbe"},{addr:2148125520,type:"code",name:"osEepromLongWrite"},{addr:2148125760,type:"code",name:"osEepromLongRead"},{addr:2148127548,type:"code",name:"__osEnqueueAndYield"},{addr:2148127884,type:"code",name:"__osPopThread"},{addr:2148128304,type:"code",name:"__osDisableInt"},{addr:2148128416,type:"code",name:"__osRestoreInt"},{addr:2148128448,type:"code",name:"osSetIntMask"},{addr:2148128608,type:"code",name:"__osSetHWIntrRoutine"},{addr:2148128704,type:"code",name:"osCreatePiManager"},{addr:2148129104,type:"code",name:"__Dom2SpeedParam"},{addr:2148129112,type:"code",name:"__osPiTable"},{addr:2148129116,type:"code",name:"__osPiDevMgr"},{addr:2148129220,type:"code",name:"__Dom1SpeedParam"},{addr:2148129336,type:"code",name:"__osCurrentHandle"},{addr:2148129344,type:"code",name:"__osPiTable"},{addr:2148129348,type:"code",name:"__osPiDevMgr"},{addr:2148129600,type:"code",name:"osEPiWriteIo"},{addr:2148129696,type:"code",name:"osEPiReadIo"},{addr:2148129792,type:"code",name:"osEPiStartDma"},{addr:2148129952,type:"code",name:"__CartRomHandle"},{addr:2148130068,type:"code",name:"osCartRomInit"},{addr:2148130336,type:"code",name:"__osDevMgrMain"},{addr:2148131296,type:"code",name:"__osPiCreateAccessQueue"},{addr:2148131336,type:"code",name:"__osPiGetAccess"},{addr:2148131380,type:"code",name:"__osPiGetAccess"},{addr:2148131444,type:"code",name:"__osPiAccessQueue"},{addr:2148131468,type:"code",name:"__osPiCreateAccessQueue"},{addr:2148131488,type:"code",name:"__osPiRelAccess"},{addr:2148131536,type:"code",name:"osAiGetLength"},{addr:2148131552,type:"code",name:"__osPiAccessQueueEnabled"},{addr:2148132e3,type:"code",name:"alBnkfNew"},{addr:2148132148,type:"code",name:"alSeqFileNew"},{addr:2148132212,type:"code",name:"__bnkf_o_0098"},{addr:2148132384,type:"code",name:"__bnkf_o_0118"},{addr:2148132532,type:"code",name:"__bnkf_o_01D8"},{addr:2148132620,type:"code",name:"__bnkf_o_0258"},{addr:2148132720,type:"code",name:"alEvtqFlushType"},{addr:2148132844,type:"code",name:"alEvtqNextEvent"},{addr:2148132896,type:"code",name:"alEvtqFlush"},{addr:2148132996,type:"code",name:"alEvtqPostEvent"},{addr:2148133016,type:"code",name:"alEvtqPostEvent"},{addr:2148133284,type:"code",name:"alEvtqNextEvent"},{addr:2148133384,type:"code",name:"alEvtqFlushType"},{addr:2148133436,type:"code",name:"alEvtqNew"},{addr:2148133660,type:"code",name:"alLink"},{addr:2148133692,type:"code",name:"alUnlink"},{addr:2148133744,type:"code",name:"alHeapInit"},{addr:2148133808,type:"code",name:"alHeapDBAlloc"},{addr:2148133888,type:"code",name:"alCopy"},{addr:2148133952,type:"code",name:"alCSeqGetLoc"},{addr:2148134068,type:"code",name:"alCSeqSetLoc"},{addr:2148134184,type:"code",name:"alCSeqNewMarker"},{addr:2148134220,type:"code",name:"alCSeqNextEvent"},{addr:2148134464,type:"code",name:"__alCSeqNextDelta"},{addr:2148134592,type:"code",name:"__cseq_o_0194"},{addr:2148135140,type:"code",name:"__alCSeqNextDelta"},{addr:2148135512,type:"code",name:"alCSeqNew"},{addr:2148136404,type:"code",name:"__cseq_o_02A4"},{addr:2148136588,type:"code",name:"__cseq_o_0088"},{addr:2148136704,type:"code",name:"alSeqpDelete"},{addr:2148136736,type:"code",name:"alSeqpGetChlFXMix"},{addr:2148136768,type:"code",name:"alSeqpGetChlPan"},{addr:2148136800,type:"code",name:"alSeqpGetChlVol"},{addr:2148136832,type:"code",name:"alSeqpGetChlProgram"},{addr:2148136960,type:"code",name:"alCSPGetTempo"},{addr:2148137008,type:"code",name:"alSeqpGetState"},{addr:2148137024,type:"code",name:"alSeqpPlay"},{addr:2148137072,type:"code",name:"alSeqpSetBank"},{addr:2148137120,type:"code",name:"alSeqpSetSeq"},{addr:2148137168,type:"code",name:"alSeqpSetTempo"},{addr:2148137248,type:"code",name:"alSeqpSetVol"},{addr:2148137296,type:"code",name:"alSeqpStop"},{addr:2148137344,type:"code",name:"__CSPPostNextSeqEvent"},{addr:2148137460,type:"code",name:"alCSPNew"},{addr:2148138936,type:"code",name:"__csplayer_o_046C"},{addr:2148139052,type:"code",name:"__csplayer_o_01D0"},{addr:2148139308,type:"code",name:"__csplayer_o_03E0"},{addr:2148141448,type:"code",name:"__csplayer_o_03F4"},{addr:2148141848,type:"code",name:"__csplayer_o_115C"},{addr:2148141992,type:"code",name:"__csplayer_o_05B4"},{addr:2148142048,type:"code",name:"alSndpDelete"},{addr:2148142096,type:"code",name:"alSndpAllocate"},{addr:2148142288,type:"code",name:"alSndpDeallocate"},{addr:2148142368,type:"code",name:"alSndpSetSound"},{addr:2148142384,type:"code",name:"alSndpPlay"},{addr:2148142480,type:"code",name:"alSndpStop"},{addr:2148142560,type:"code",name:"alSndpGetState"},{addr:2148142592,type:"code",name:"alSndpSetPitch"},{addr:2148142672,type:"code",name:"alSndpSetPriority"},{addr:2148142720,type:"code",name:"alSndpSetVol"},{addr:2148142800,type:"code",name:"alSndpSetPan"},{addr:2148142880,type:"code",name:"alSndpSetFXMix"},{addr:2148143252,type:"code",name:"alAudioFrame"},{addr:2148143684,type:"code",name:"alSynNew"},{addr:2148144176,type:"code",name:"__synthesizer_o_0440"},{addr:2148144324,type:"code",name:"__synthesizer_o_0370"},{addr:2148144472,type:"code",name:"__synthesizer_o_032C"},{addr:2148144560,type:"code",name:"alSynDelete"},{addr:2148144576,type:"code",name:"alSynAddPlayer"},{addr:2148144656,type:"code",name:"alSynRemovePlayer"},{addr:2148144816,type:"code",name:"alSynFreeVoice"},{addr:2148144976,type:"code",name:"alSynAllocVoice"},{addr:2148145160,type:"code",name:"alSynAllocVoice"},{addr:2148145272,type:"code",name:"__synallocvoice_o_0048"},{addr:2148145456,type:"code",name:"alSynStopVoice"},{addr:2148145584,type:"code",name:"alSynStartVoice"},{addr:2148145744,type:"code",name:"alSynSetPitch"},{addr:2148145888,type:"code",name:"alSynSetVol"},{addr:2148146080,type:"code",name:"alSynSetFXMix"},{addr:2148146240,type:"code",name:"alSynAllocFX"},{addr:2148146400,type:"code",name:"alCents2Ratio"},{addr:2148146496,type:"code",name:"osInvalDCache"},{addr:2148146672,type:"code",name:"osInvalICache"},{addr:2148146800,type:"code",name:"osWritebackDCache"},{addr:2148146928,type:"code",name:"osWritebackDCacheAll"},{addr:2148146976,type:"code",name:"osContGetReadData"},{addr:2148147132,type:"code",name:"osContStartReadData"},{addr:2148147268,type:"code",name:"__contreaddata_o_0028"},{addr:2148148336,type:"code",name:"osVirtualToPhysical"},{addr:2148148432,type:"code",name:"cosf"},{addr:2148148768,type:"code",name:"guLookAt"},{addr:2148149668,type:"code",name:"guLookAtF"},{addr:2148150576,type:"code",name:"guLookAtHilite"},{addr:2148150788,type:"code",name:"guLookAtHiliteF"},{addr:2148153232,type:"code",name:"guLookAtReflect"},{addr:2148153340,type:"code",name:"guLookAtReflectF"},{addr:2148154924,type:"code",name:"guMtxCatF"},{addr:2148155152,type:"code",name:"guMtxXFML"},{addr:2148155292,type:"code",name:"guMtxCatL"},{addr:2148155408,type:"code",name:"guMtxF2L"},{addr:2148155560,type:"code",name:"guMtxL2F"},{addr:2148155648,type:"code",name:"guMtxIdentF"},{addr:2148155728,type:"code",name:"guMtxIdentF"},{addr:2148156048,type:"code",name:"guOrtho"},{addr:2148156380,type:"code",name:"guOrthoF"},{addr:2148156688,type:"code",name:"guPerspective"},{addr:2148157144,type:"code",name:"guPerspectiveF"},{addr:2148157584,type:"code",name:"guRandom",desc:"Generates a pseudo-random number"},{addr:2148157632,type:"code",name:"guRotate"},{addr:2148158008,type:"code",name:"guRotateF"},{addr:2148158368,type:"code",name:"guRotateRPY"},{addr:2148158764,type:"code",name:"guRotateRPYF"},{addr:2148159168,type:"code",name:"guScale"},{addr:2148159292,type:"code",name:"guScaleF"},{addr:2148159392,type:"code",name:"sinf"},{addr:2148159808,type:"code",name:"guTranslate"},{addr:2148159920,type:"code",name:"guTranslateF"},{addr:2148160016,type:"code",name:"bcopy"},{addr:2148160816,type:"code",name:"bzero"},{addr:2148160976,type:"code",name:"memcpy"},{addr:2148161016,type:"code",name:"strlen"},{addr:2148161040,type:"code",name:"strlen"},{addr:2148161052,type:"code",name:"strchr"},{addr:2148161076,type:"code",name:"memcpy"},{addr:2148161120,type:"code",name:"sprintf"},{addr:2148161264,type:"code",name:"rmonPrintf",desc:"no-op in released ROM"},{addr:2148161284,type:"code",name:"osSyncPrintf",desc:"no-op in released ROM"},{addr:2148161312,type:"code",name:"osCreateMesgQueue"},{addr:2148161360,type:"code",name:"osJamMesg"},{addr:2148161680,type:"code",name:"osRecvMesg"},{addr:2148161984,type:"code",name:"osSendMesg"},{addr:2148162288,type:"code",name:"osSetEventMesg"},{addr:2148162464,type:"code",name:"__osSetCause"},{addr:2148162480,type:"code",name:"__osSetCompare"},{addr:2148162496,type:"code",name:"__osSetCount"},{addr:2148162512,type:"code",name:"__osSetSR"},{addr:2148162528,type:"code",name:"osSpTaskStartGo"},{addr:2148162572,type:"code",name:"osSpTaskLoad"},{addr:2148163104,type:"code",name:"osSpTaskYield"},{addr:2148163136,type:"code",name:"osSpTaskYielded"},{addr:2148163216,type:"code",name:"__osSiRawStartDma"},{addr:2148163476,type:"code",name:"__osSiGetAccess"},{addr:2148163584,type:"code",name:"__osSiRelAccess"},{addr:2148163632,type:"code",name:"osCreateThread"},{addr:2148164064,type:"code",name:"osGetThreadPri"},{addr:2148164096,type:"code",name:"osSetThreadPri"},{addr:2148164304,type:"code",name:"osStartThread"},{addr:2148164592,type:"code",name:"osStopThread"},{addr:2148164784,type:"code",name:"__osDequeueThread"},{addr:2148164836,type:"code",name:"__osFaultedThread"},{addr:2148164840,type:"code",name:"__osRunningThread"},{addr:2148164844,type:"code",name:"__osActiveQueue"},{addr:2148164848,type:"code",name:"osYieldThread"},{addr:2148164852,type:"code",name:"__osThreadTail"},{addr:2148164928,type:"code",name:"osGetTime"},{addr:2148165072,type:"code",name:"osSetTimer"},{addr:2148165632,type:"code",name:"__osSetTimerIntr"},{addr:2148165728,type:"code",name:"__osInsertTimer"},{addr:2148166e3,type:"code",name:"__osProbeTLB"},{addr:2148166192,type:"code",name:"osViGetCurrentFramebuffer"},{addr:2148167152,type:"code",name:"osViSetEvent"},{addr:2148167248,type:"code",name:"osViSetMode"},{addr:2148167328,type:"code",name:"osViSetSpecialFeatures"},{addr:2148167696,type:"code",name:"osViSetYScale"},{addr:2148167776,type:"code",name:"osViSwapBuffer"},{addr:2148167856,type:"code",name:"__osViSwapContext"},{addr:2148168640,type:"code",name:"osViBlack"},{addr:2148168736,type:"code",name:"osMotorInit"},{addr:2148169320,type:"code",name:"__osMotorAccess"},{addr:2148169648,type:"code",name:"__osPfsSelectBank"},{addr:2148169760,type:"code",name:"__osContRamRead"},{addr:2148170248,type:"code",name:"__osPfsLastChannel"},{addr:2148170256,type:"code",name:"__osContRamWrite"},{addr:2148170880,type:"code",name:"osAfterPreNMI"},{addr:2148170912,type:"code",name:"osGetMemSize"},{addr:2148171824,type:"code",name:"osEepromRead"},{addr:2148172232,type:"code",name:"__conteepread_o_00A8"},{addr:2148172368,type:"code",name:"__osSetGlobalIntMask"},{addr:2148172432,type:"code",name:"__osResetGlobalIntMask"},{addr:2148172512,type:"code",name:"__osPiRawStartDma"},{addr:2148172720,type:"code",name:"osPiGetCmdQueue"},{addr:2148172752,type:"code",name:"__osEPiRawReadIo"},{addr:2148173104,type:"code",name:"alHeapCheck"},{addr:2148173120,type:"code",name:"__osEPiRawWriteIo"},{addr:2148173488,type:"code",name:"__osAiDeviceBusy"},{addr:2148173520,type:"code",name:"_init_lpfilter"},{addr:2148173684,type:"code",name:"alFxNew"},{addr:2148174860,type:"code",name:"alEnvmixerNew"},{addr:2148175044,type:"code",name:"alLoadNew"},{addr:2148175220,type:"code",name:"alResampleNew"},{addr:2148175360,type:"code",name:"alAuxBusNew"},{addr:2148175452,type:"code",name:"alMainBusNew"},{addr:2148175544,type:"code",name:"alSaveNew"},{addr:2148175616,type:"code",name:"alLoadParam"},{addr:2148176044,type:"code",name:"alRaw16Pull"},{addr:2148176968,type:"code",name:"alAdpcmPull"},{addr:2148177632,type:"code",name:"alLoadParam"},{addr:2148178060,type:"code",name:"__load_o_0108"},{addr:2148178448,type:"code",name:"alAuxBusParam"},{addr:2148178496,type:"code",name:"alAuxBusPull"},{addr:2148178668,type:"code",name:"alAuxBusParam"},{addr:2148178720,type:"code",name:"_ldexpf"},{addr:2148178756,type:"code",name:"_frexpf"},{addr:2148178980,type:"code",name:"alEnvmixerParam"},{addr:2148179192,type:"code",name:"alEnvmixerPull"},{addr:214818e4,type:"code",name:"alEnvmixerParam"},{addr:2148180212,type:"code",name:"__env_o_01E0"},{addr:2148181196,type:"code",name:"__env_o_0718"},{addr:2148181836,type:"code",name:"__env_o_027C"},{addr:2148181968,type:"code",name:"alFilterNew"},{addr:2148182e3,type:"code",name:"alMainBusParam"},{addr:2148182048,type:"code",name:"alMainBusPull"},{addr:2148182320,type:"code",name:"alMainBusParam"},{addr:2148182368,type:"code",name:"alResampleParam"},{addr:2148182560,type:"code",name:"alResamplePull"},{addr:2148182860,type:"code",name:"alResampleParam"},{addr:2148183056,type:"code",name:"_doModFunc"},{addr:2148183196,type:"code",name:"alFxParamHdl"},{addr:2148183692,type:"code",name:"alFxParam"},{addr:2148183712,type:"code",name:"_filterBuffer"},{addr:2148183868,type:"code",name:"_loadOutputBuffer"},{addr:2148183940,type:"code",name:"alFxParam"},{addr:2148184404,type:"code",name:"_loadBuffer"},{addr:2148184456,type:"code",name:"__reverb_o_0178"},{addr:2148184772,type:"code",name:"_saveBuffer"},{addr:2148184992,type:"code",name:"__reverb_o_0154"},{addr:2148185140,type:"code",name:"alFxPull"},{addr:2148185360,type:"code",name:"__reverb_o_00C4"},{addr:2148185728,type:"code",name:"__reverb_o_024C"},{addr:2148185884,type:"code",name:"__reverb_o_05D0"},{addr:2148186032,type:"code",name:"alSaveParam"},{addr:2148186072,type:"code",name:"alSavePull"},{addr:2148186200,type:"code",name:"alSaveParam"},{addr:2148186240,type:"code",name:"__resetPerfChanState"},{addr:2148186368,type:"code",name:"__setInstChanState"},{addr:2148186452,type:"code",name:"__lookupVoice"},{addr:2148186536,type:"code",name:"__vsPan"},{addr:2148186604,type:"code",name:"__mapVoice"},{addr:2148186684,type:"code",name:"__lookupSoundQuick"},{addr:2148186896,type:"code",name:"__initFromBank"},{addr:2148187068,type:"code",name:"__seqpReleaseVoice"},{addr:2148187360,type:"code",name:"__voiceNeedsNoteKill"},{addr:2148187536,type:"code",name:"__postNextSeqEvent"},{addr:2148187744,type:"code",name:"__vsDelta"},{addr:2148187772,type:"code",name:"__vsVol"},{addr:2148187864,type:"code",name:"__seqplayer_o_0420"},{addr:2148187884,type:"code",name:"__unmapVoice"},{addr:2148187984,type:"code",name:"__seqpStopOsc"},{addr:2148188072,type:"code",name:"__seqplayer_o_01DC"},{addr:2148188224,type:"code",name:"__initChanState"},{addr:2148188404,type:"code",name:"alSeqpNew"},{addr:2148188584,type:"code",name:"__seqplayer_o_03EC"},{addr:2148190672,type:"code",name:"__seqplayer_o_0400"},{addr:2148190780,type:"code",name:"__seqplayer_o_0A54"},{addr:2148190860,type:"code",name:"__seqplayer_o_0244"},{addr:2148190960,type:"code",name:"__seqplayer_o_0D18"},{addr:2148191044,type:"code",name:"__seqplayer_o_0A1C"},{addr:2148191256,type:"code",name:"__seqplayer_o_0284"},{addr:2148191368,type:"code",name:"__seqplayer_o_0320"},{addr:2148191396,type:"code",name:"__seqplayer_o_0C7C"},{addr:2148191464,type:"code",name:"__seqplayer_o_04F8"},{addr:2148191756,type:"code",name:"__seqplayer_o_04E0"},{addr:2148191932,type:"code",name:"__seqplayer_o_0600"},{addr:2148192104,type:"code",name:"__seqplayer_o_107C"},{addr:2148192188,type:"code",name:"__seqplayer_o_167C"},{addr:2148192316,type:"code",name:"__seqplayer_o_00BC"},{addr:2148192496,type:"code",name:"__seqplayer_o_0238"},{addr:2148192736,type:"code",name:"__seqplayer_o_05D8"},{addr:2148192800,type:"code",name:"alSynSetPriority"},{addr:2148192816,type:"code",name:"sqrtf",desc:"SQRT.S F0"},{addr:2148195664,type:"code",name:"osGetCount"},{addr:2148195728,type:"code",name:"__osSpDeviceBusy"},{addr:2148195760,type:"code",name:"__osSpGetStatus"},{addr:2148195776,type:"code",name:"__osSpSetStatus"},{addr:2148195792,type:"code",name:"__osSpSetPc"},{addr:2148195840,type:"code",name:"__osSpRawStartDma"},{addr:2148195984,type:"code",name:"__osSpRawReadIo"},{addr:2148196064,type:"code",name:"__osSpRawWriteIo"},{addr:2148196144,type:"code",name:"__osContDataCrc"},{addr:2148196252,type:"code",name:"__osContDataCrc"},{addr:2148196268,type:"code",name:"__osContAddressCrc"},{addr:2148196848,type:"code",name:"__osPfsGetInitData"},{addr:2148197028,type:"code",name:"__osPfsRequestData"},{addr:2148197192,type:"code",name:"__osPfsPifRam"},{addr:2148197228,type:"code",name:"__pfsisplug_o_004C"},{addr:2148197256,type:"code",name:"osPfsIsPlug"},{addr:2148197392,type:"code",name:"__pfsisplug_o_0094"},{addr:2148197584,type:"code",name:"__osPfsGetOneChannelData"},{addr:2148197712,type:"code",name:"__osPfsRequestOneChannel"},{addr:2148197824,type:"code",name:"__pfsgetstatus_o_0030"},{addr:2148197860,type:"code",name:"__osPfsGetStatus"},{addr:2148197972,type:"code",name:"__pfsgetstatus_o_0084"},{addr:2148198112,type:"code",name:"__osPfsInodeCache"},{addr:2148198232,type:"code",name:"__contpfs_o_0598"},{addr:2148198368,type:"code",name:"__osPfsRWInode"},{addr:2148198980,type:"code",name:"__contpfs_o_0578"},{addr:2148199192,type:"code",name:"__osCheckId"},{addr:2148199376,type:"code",name:"__osGetId"},{addr:2148199836,type:"code",name:"__osCheckPackId"},{addr:2148200192,type:"code",name:"__osRepairPackId"},{addr:2148202608,type:"code",name:"_Litob"},{addr:2148203200,type:"code",name:"_Ldtob"},{addr:2148204300,type:"code",name:"__xldtob_o_0080"},{addr:2148204452,type:"code",name:"__xldtob_o_0414"},{addr:2148205904,type:"code",name:"__osSpDeviceBusy"},{addr:2148209696,type:"code",name:"__divdi3"},{addr:2148210064,type:"code",name:"__udivdi3"},{addr:2148210096,type:"code",name:"__umoddi3"},{addr:2148305012,type:"data",name:"overlay_table"},{addr:2148319248,type:"data",name:"item_function_pointers",desc:"u32[10]"},{addr:2148397008,type:"data",name:"perm_heap_addr",desc:"Address of permanent heap"},{addr:2148397024,type:"data",name:"temp_heap_addr",desc:"Address of temporary heap"},{addr:2148407504,type:"u16",name:"num_board_spaces"},{addr:2148407506,type:"u16",name:"num_chains"},{addr:2148407508,type:"u32",name:"hydrated_space_data"},{addr:2148407512,type:"u32",name:"hydrated_chains"},{addr:2148407616,type:"data",name:"arrow_angles",desc:"f32[8]"},{addr:2148407648,type:"u32",name:"num_arrow_angles"},{addr:2148504494,type:"u16",name:"total_turns"},{addr:2148504496,type:"u16",name:"current_turn"},{addr:2148509246,type:"u16",name:"scene",desc:"Current scene number"},{addr:2148520643,type:"u8",name:"p1_controller"},{addr:2148520644,type:"u8",name:"p1_char",desc:"00=Mario"},{addr:2148520648,type:"u16",name:"p1_coins",desc:"Player 1 coin count"},{addr:2148520654,type:"u16",name:"p1_stars",desc:"Player 1 star count"},{addr:2148520656,type:"u16",name:"p1_cur_chain_index",desc:"Player 1 current chain index"},{addr:2148520658,type:"u16",name:"p1_cur_space_index",desc:"Player 1 current space index"},{addr:2148520660,type:"u16",name:"p1_next_chain_index",desc:"Player 1 next chain index"},{addr:2148520662,type:"u16",name:"p1_next_space_index",desc:"Player 1 next space index"},{addr:2148520665,type:"u8",name:"p1_item",desc:"Player 1 item"},{addr:2148520666,type:"u16",name:"p1_turn_status",desc:"Player 1 turn status"},{addr:2148520696,type:"u8",name:"p2_char",desc:"00=Mario"},{addr:2148520700,type:"u16",name:"p2_coins",desc:"Player 2 coin count"},{addr:2148520706,type:"u16",name:"p2_stars",desc:"Player 2 star count"},{addr:2148520708,type:"u16",name:"p2_cur_chain_index",desc:"Player 2 current chain index"},{addr:2148520710,type:"u16",name:"p2_cur_space_index",desc:"Player 2 current space index"},{addr:2148520712,type:"u16",name:"p2_next_chain_index",desc:"Player 2 next chain index"},{addr:2148520714,type:"u16",name:"p2_next_space_index",desc:"Player 2 next space index"},{addr:2148520717,type:"u8",name:"p2_item",desc:"Player 2 item"},{addr:2148520718,type:"u16",name:"p2_turn_status",desc:"Player 2 turn status"},{addr:2148520748,type:"u8",name:"p3_char",desc:"00=Mario"},{addr:2148520752,type:"u16",name:"p3_coins",desc:"Player 3 coin count"},{addr:2148520758,type:"u16",name:"p3_stars",desc:"Player 3 star count"},{addr:2148520769,type:"u8",name:"p3_item",desc:"Player 3 item"},{addr:2148520770,type:"u16",name:"p3_turn_statu",desc:"Player 3 turn status"},{addr:2148520800,type:"u8",name:"p4_char",desc:"00=Mario"},{addr:2148520804,type:"u16",name:"p4_coins",desc:"Player 4 coin count"},{addr:2148520810,type:"u16",name:"p4_stars",desc:"Player 4 star count"},{addr:2148520821,type:"u8",name:"p4_item",desc:"Player 4 item"},{addr:2148520822,type:"u16",name:"p4_turn_status",desc:"Player 4 turn status"},{addr:2148520984,type:"u16",name:"hidden_space_primary",desc:"space index of primary hidden space"}],cG=[{addr:2148305220,type:"data",name:"overlay_table"},{addr:2148533744,type:"data",name:"overlay_ram_start"}],dG=[{addr:2147484416,type:"u32",name:"osTvType",desc:"0=PAL"},{addr:2147484420,type:"u32",name:"osRomType",desc:"0=cart"},{addr:2147484424,type:"data",name:"osRomBase",desc:"B0000000=cart"},{addr:2147484428,type:"data",name:"osResetType",desc:"0=cold reset"},{addr:2147484440,type:"data",name:"osMemSize",desc:"Size of RDRAM"},{addr:2147523600,type:"code",name:"ReadMainFS",desc:"Reads file from MainFS"},{addr:2147524204,type:"code",name:"FreeMainFS",desc:"Free's an allocated MainFS file pointer"},{addr:2147525168,type:"code",name:"DecodeNone"},{addr:2147525324,type:"code",name:"DecodeLZ"},{addr:2147528704,type:"code",name:"DecodeFile"},{addr:2147529068,type:"code",name:"GetRandomByte"},{addr:2147530808,type:"code",name:"LoadGraphics"},{addr:2147532780,type:"code",name:"InitEspriteSlot"},{addr:2147533188,type:"code",name:"CloseEsprite"},{addr:2147557920,type:"code",name:"InitCameras",desc:"A0=num_cameras"},{addr:2147614240,type:"code",name:"InitAnimations",desc:"A0=1"},{addr:2147702848,type:"code",name:"MakePermHeap"},{addr:2147702884,type:"code",name:"MallocPerm",desc:"A0=size"},{addr:2147702920,type:"code",name:"FreePerm",desc:"A0=ptr"},{addr:2147702948,type:"code",name:"ReallocPerm"},{addr:2147702992,type:"code",name:"GetAllocatedPermHeapSize"},{addr:2147703024,type:"code",name:"GetUsedMemoryBlockCountPerm"},{addr:2147703056,type:"code",name:"MakeTempHeap"},{addr:2147703092,type:"code",name:"MallocTemp"},{addr:2147703128,type:"code",name:"FreeTemp"},{addr:2147703156,type:"code",name:"ReallocTemp"},{addr:2147703200,type:"code",name:"GetAllocatedTempHeapSize"},{addr:2147703232,type:"code",name:"GetUsedMemoryBlockCountTemp"},{addr:2147705040,type:"code",name:"MakeHeap"},{addr:2147705072,type:"code",name:"Malloc"},{addr:2147705224,type:"code",name:"Free"},{addr:2147705416,type:"code",name:"Realloc"},{addr:2147705616,type:"code",name:"GetAllocatedHeapSize"},{addr:2147705668,type:"code",name:"GetUsedMemoryBlockCount"},{addr:2147705708,type:"code",name:"GetMemoryAllocSize"},{addr:2147774816,type:"code",name:"InitObjSys"},{addr:2147778208,type:"code",name:"InitProcess"},{addr:2147778568,type:"code",name:"EndProcess"},{addr:2147778856,type:"code",name:"LoadOverlay",desc:"A0=num"},{addr:2147788064,type:"code",name:"PlayMusic",desc:"A0=index"},{addr:2147789448,type:"code",name:"PlaySound",desc:"A0=index"},{addr:2147802492,type:"code",name:"DrawDebugText",desc:"A0=x_pos"},{addr:2147807248,type:"code",name:"SleepProcess"},{addr:2147807348,type:"code",name:"SleepVProcess",desc:"Sleep 1 frame"},{addr:2147808676,type:"code",name:"SaveFileEncode",desc:"A0=start addr of data to encode"},{addr:2147809868,type:"code",name:"SaveFileDecode",desc:"A0=start addr of portion to decode"},{addr:2147833456,type:"code",name:"FreeGraphics"},{addr:2147833872,type:"code",name:"ImgPackParse"},{addr:2147877132,type:"code",name:"DisablePromptOption",desc:"A0=window_id"},{addr:2147885032,type:"code",name:"InitFadeIn",desc:"A0=fade_type"},{addr:2147885136,type:"code",name:"InitFadeOut",desc:"A0=fade_type"},{addr:2147885244,type:"code",name:"GetFadeStatus",desc:"returns 0 when fade action is finished"},{addr:2147902720,type:"code",name:"setjmp"},{addr:2147902820,type:"code",name:"longjmp"},{addr:2147930096,type:"code",name:"alSeqpGetChlVol"},{addr:2147930128,type:"code",name:"alSeqpGetChlFXMix"},{addr:2147930160,type:"code",name:"alSeqpGetChlPan"},{addr:2147930192,type:"code",name:"alSeqpGetChlProgram"},{addr:2147930320,type:"code",name:"alSeqpGetState"},{addr:2147930336,type:"code",name:"alCSPGetTempo"},{addr:2147930384,type:"code",name:"alSeqpPlay"},{addr:2147930432,type:"code",name:"alSeqpSetBank"},{addr:2147930480,type:"code",name:"alSeqpSetSeq"},{addr:2147930528,type:"code",name:"alSeqpSetTempo"},{addr:2147930608,type:"code",name:"alSeqpSetVol"},{addr:2147930656,type:"code",name:"alSeqpStop"},{addr:2147933812,type:"code",name:"alEvtqPostEvent"},{addr:2147950624,type:"code",name:"osEepromWrite"},{addr:2147951228,type:"code",name:"__osEepStatus"},{addr:2147951776,type:"code",name:"osEepromLongWrite"},{addr:2147952016,type:"code",name:"osEepromLongRead"},{addr:2147952128,type:"code",name:"osSetIntMask"},{addr:2147952288,type:"code",name:"osCreatePiManager"},{addr:2147952748,type:"code",name:"__Dom2SpeedParam"},{addr:2147952756,type:"code",name:"__osPiTable"},{addr:2147952760,type:"code",name:"__osPiDevMgr"},{addr:2147952864,type:"code",name:"__Dom1SpeedParam"},{addr:2147952976,type:"code",name:"__osEPiRawStartDma"},{addr:2147952980,type:"code",name:"__osCurrentHandle"},{addr:2147952988,type:"code",name:"__osPiTable"},{addr:2147952992,type:"code",name:"__osPiDevMgr"},{addr:2147953472,type:"code",name:"osEPiStartDma"},{addr:2147953632,type:"code",name:"__CartRomHandle"},{addr:2147953748,type:"code",name:"osCartRomInit"},{addr:2147954016,type:"code",name:"__osDevMgrMain"},{addr:2147954976,type:"code",name:"__osPiRelAccess"},{addr:2147955016,type:"code",name:"__osPiGetAccess"},{addr:2147955060,type:"code",name:"__osPiGetAccess"},{addr:2147955124,type:"code",name:"__osPiAccessQueue"},{addr:2147955148,type:"code",name:"__osPiCreateAccessQueue"},{addr:2147955168,type:"code",name:"__osPiRelAccess"},{addr:2147955216,type:"code",name:"osAiGetLength"},{addr:2147955232,type:"code",name:"__osPiAccessQueueEnabled"},{addr:2147955680,type:"code",name:"_init_lpfilter"},{addr:2147955844,type:"code",name:"alFxNew"},{addr:2147957020,type:"code",name:"alEnvmixerNew"},{addr:2147957204,type:"code",name:"alLoadNew"},{addr:2147957380,type:"code",name:"alResampleNew"},{addr:2147957520,type:"code",name:"alAuxBusNew"},{addr:2147957612,type:"code",name:"alMainBusNew"},{addr:2147957704,type:"code",name:"alSaveNew"},{addr:2147957776,type:"code",name:"alLoadParam"},{addr:2147958204,type:"code",name:"alRaw16Pull"},{addr:2147959128,type:"code",name:"alAdpcmPull"},{addr:2147959792,type:"code",name:"alLoadParam"},{addr:2147960220,type:"code",name:"__load_o_0108"},{addr:2147960608,type:"code",name:"alAuxBusParam"},{addr:2147960656,type:"code",name:"alAuxBusPull"},{addr:2147960828,type:"code",name:"alAuxBusParam"},{addr:2147960880,type:"code",name:"alBnkfNew"},{addr:2147961028,type:"code",name:"alSeqFileNew"},{addr:2147961092,type:"code",name:"__bnkf_o_0098"},{addr:2147961264,type:"code",name:"__bnkf_o_0118"},{addr:2147961412,type:"code",name:"__bnkf_o_01D8"},{addr:2147961500,type:"code",name:"__bnkf_o_0258"},{addr:2147961600,type:"code",name:"_ldexpf"},{addr:2147961636,type:"code",name:"_frexpf"},{addr:2147961860,type:"code",name:"alEnvmixerParam"},{addr:2147962072,type:"code",name:"alEnvmixerPull"},{addr:2147962880,type:"code",name:"alEnvmixerParam"},{addr:2147963092,type:"code",name:"__env_o_01E0"},{addr:2147964076,type:"code",name:"__env_o_0718"},{addr:2147964716,type:"code",name:"__env_o_027C"},{addr:2147964848,type:"code",name:"alEvtqFlushType"},{addr:2147965024,type:"code",name:"alEvtqFlush"},{addr:2147965144,type:"code",name:"alEvtqPostEvent"},{addr:2147965412,type:"code",name:"alEvtqNextEvent"},{addr:2147965564,type:"code",name:"alEvtqNew"},{addr:2147965696,type:"code",name:"alFilterNew"},{addr:2147965728,type:"code",name:"alMainBusParam"},{addr:2147965776,type:"code",name:"alMainBusPull"},{addr:2147966048,type:"code",name:"alMainBusParam"},{addr:2147966096,type:"code",name:"alResampleParam"},{addr:2147966288,type:"code",name:"alResamplePull"},{addr:2147966588,type:"code",name:"alResampleParam"},{addr:2147971580,type:"code",name:"alLink"},{addr:2147971612,type:"code",name:"alUnlink"},{addr:2147971664,type:"code",name:"alHeapInit"},{addr:2147971728,type:"code",name:"alHeapDBAlloc"},{addr:2147971808,type:"code",name:"alCopy"},{addr:2147971872,type:"code",name:"alCSeqGetLoc"},{addr:2147971988,type:"code",name:"alCSeqSetLoc"},{addr:2147972104,type:"code",name:"alCSeqNewMarker"},{addr:2147972384,type:"code",name:"__alCSeqNextDelta"},{addr:2147972512,type:"code",name:"__cseq_o_0194"},{addr:2147972768,type:"code",name:"alCSeqGetTicks"},{addr:2147972776,type:"code",name:"alCSeqSecToTicks"},{addr:2147972936,type:"code",name:"alCSeqTicksToSec"},{addr:2147973060,type:"code",name:"__alCSeqNextDelta"},{addr:2147973188,type:"code",name:"alCSeqNextEvent"},{addr:2147973432,type:"code",name:"alCSeqNew"},{addr:2147974324,type:"code",name:"__cseq_o_02A4"},{addr:2147974508,type:"code",name:"__cseq_o_0088"},{addr:2147974916,type:"code",name:"alAudioFrame"},{addr:2147975348,type:"code",name:"alSynNew"},{addr:2147975840,type:"code",name:"__synthesizer_o_0440"},{addr:2147975988,type:"code",name:"__synthesizer_o_0370"},{addr:2147976136,type:"code",name:"__synthesizer_o_032C"},{addr:2147976224,type:"code",name:"alSynDelete"},{addr:2147976240,type:"code",name:"alSynAddPlayer"},{addr:2147976320,type:"code",name:"alSynFreeVoice"},{addr:2147976664,type:"code",name:"alSynAllocVoice"},{addr:2147976776,type:"code",name:"__synallocvoice_o_0048"},{addr:2147976960,type:"code",name:"alSynStopVoice"},{addr:2147977088,type:"code",name:"alSynStartVoice"},{addr:2147977248,type:"code",name:"alSynSetPitch"},{addr:2147977392,type:"code",name:"alSynSetVol"},{addr:2147977584,type:"code",name:"alSynSetFXMix"},{addr:2147977744,type:"code",name:"alSynSetPan"},{addr:2147977888,type:"code",name:"alSynAllocFX"},{addr:2147978048,type:"code",name:"alCents2Ratio"},{addr:2147978144,type:"code",name:"osInvalDCache"},{addr:2147978320,type:"code",name:"osInvalICache"},{addr:2147978448,type:"code",name:"osWritebackDCache"},{addr:2147978624,type:"code",name:"osContGetReadData"},{addr:2147978780,type:"code",name:"osContStartReadData"},{addr:2147978916,type:"code",name:"__contreaddata_o_0028"},{addr:2147979984,type:"code",name:"osVirtualToPhysical"},{addr:2147980080,type:"code",name:"cosf"},{addr:2147980416,type:"code",name:"guLookAt"},{addr:2147981316,type:"code",name:"guLookAtF"},{addr:2147982224,type:"code",name:"guLookAtHilite"},{addr:2147982436,type:"code",name:"guLookAtHiliteF"},{addr:2147984880,type:"code",name:"guLookAtReflect"},{addr:2147984988,type:"code",name:"guLookAtReflectF"},{addr:2147986400,type:"code",name:"guOrtho"},{addr:2147986732,type:"code",name:"guOrthoF"},{addr:2147987040,type:"code",name:"guPerspective"},{addr:2147987496,type:"code",name:"guPerspectiveF"},{addr:2147987936,type:"code",name:"guRandom"},{addr:2147987984,type:"code",name:"guRotateRPY"},{addr:2147988380,type:"code",name:"guRotateRPYF"},{addr:2147988784,type:"code",name:"sinf"},{addr:2147989200,type:"code",name:"__osRdbSend"},{addr:2147989736,type:"code",name:"__osRdb_IP6_Empty"},{addr:2147989744,type:"code",name:"__osRdb_IP6_CurSend"},{addr:2147989748,type:"code",name:"__osRdb_IP6_CurWrite"},{addr:2147989752,type:"code",name:"__osRdb_IP6_Ct"},{addr:2147989756,type:"code",name:"__osRdb_IP6_Size"},{addr:2147989760,type:"code",name:"__osRdb_IP6_Data"},{addr:2147989764,type:"code",name:"osInitRdb"},{addr:2147989872,type:"code",name:"bcopy"},{addr:2147990672,type:"code",name:"bzero"},{addr:2147990832,type:"code",name:"memcpy"},{addr:2147990896,type:"code",name:"strlen"},{addr:2147990976,type:"code",name:"sprintf"},{addr:2147991120,type:"code",name:"rmonPrintf",desc:"disabled behind flag"},{addr:2147991168,type:"code",name:"osSyncPrintf",desc:"disabled behind flag"},{addr:2147991296,type:"code",name:"osCreateMesgQueue"},{addr:2147991344,type:"code",name:"osJamMesg"},{addr:2147991664,type:"code",name:"osRecvMesg"},{addr:2147991968,type:"code",name:"osSendMesg"},{addr:2147992272,type:"code",name:"__osEventStateTab"},{addr:2147992392,type:"code",name:"osSetEventMesg"},{addr:2147992456,type:"code",name:"osSetEventMesg"},{addr:2147992512,type:"code",name:"osSpTaskStartGo"},{addr:2147992556,type:"code",name:"osSpTaskLoad"},{addr:2147993088,type:"code",name:"osSpTaskYield"},{addr:2147993120,type:"code",name:"osSpTaskYielded"},{addr:2147993200,type:"code",name:"__osSiRawStartDma"},{addr:2147993460,type:"code",name:"__osSiGetAccess"},{addr:2147993568,type:"code",name:"__osSiRelAccess"},{addr:2147993616,type:"code",name:"osCreateThread"},{addr:2147994096,type:"code",name:"osGetThreadPri"},{addr:2147994128,type:"code",name:"osSetThreadPri"},{addr:2147994336,type:"code",name:"osStartThread"},{addr:2147994624,type:"code",name:"__osDequeueThread"},{addr:2147994676,type:"code",name:"__osFaultedThread"},{addr:2147994680,type:"code",name:"__osRunningThread"},{addr:2147994684,type:"code",name:"__osActiveQueue"},{addr:2147994688,type:"code",name:"osYieldThread"},{addr:2147994692,type:"code",name:"__osThreadTail"},{addr:2147994768,type:"code",name:"osGetTime"},{addr:2147994912,type:"code",name:"osSetTimer"},{addr:2147995784,type:"code",name:"__osSetTimerIntr"},{addr:2147995912,type:"code",name:"__osInsertTimer"},{addr:2147996176,type:"code",name:"__osProbeTLB"},{addr:2147996368,type:"code",name:"osViGetCurrentFramebuffer"},{addr:2147997328,type:"code",name:"osViSetEvent"},{addr:2147997424,type:"code",name:"osViSetMode"},{addr:2147997504,type:"code",name:"osViSetSpecialFeatures"},{addr:2147997872,type:"code",name:"osViSetYScale"},{addr:2147997952,type:"code",name:"osViSwapBuffer"},{addr:2147998032,type:"code",name:"__osViSwapContext"},{addr:2147998816,type:"code",name:"osViBlack"},{addr:2147998912,type:"code",name:"guMtxIdentF"},{addr:2147999008,type:"code",name:"guMtxF2L"},{addr:2147999136,type:"code",name:"guMtxL2F"},{addr:2147999264,type:"code",name:"guMtxCatF"},{addr:2147999808,type:"code",name:"guMtxCatL"},{addr:2147999936,type:"code",name:"guRotate"},{addr:2148000312,type:"code",name:"guRotateF"},{addr:2148000672,type:"code",name:"osMotorInit"},{addr:2148001256,type:"code",name:"__osMotorAccess"},{addr:2148001584,type:"code",name:"__osPfsSelectBank"},{addr:2148001696,type:"code",name:"__osContRamRead"},{addr:2148002184,type:"code",name:"__osPfsLastChannel"},{addr:2148002192,type:"code",name:"__osContRamWrite"},{addr:2148002816,type:"code",name:"osAfterPreNMI"},{addr:2148002848,type:"code",name:"osGetMemSize"},{addr:2148004048,type:"code",name:"__checkHardware_kmc"},{addr:2148004108,type:"code",name:"__osInitialize_kmc"},{addr:2148005024,type:"code",name:"__checkHardware_msp"},{addr:2148005072,type:"code",name:"__osInitialize_msp"},{addr:2148005984,type:"code",name:"__osInitialize_emu"},{addr:2148006112,type:"code",name:"__osEepromRead16K"},{addr:2148006116,type:"code",name:"__osEepPifRam"},{addr:2148006180,type:"code",name:"osEepromRead"},{addr:2148006536,type:"code",name:"__conteepread_o_00B8"},{addr:2148009500,type:"code",name:"__osEnqueueAndYield"},{addr:2148009844,type:"code",name:"__osPopThread"},{addr:2148010304,type:"code",name:"__osDisableInt"},{addr:2148010416,type:"code",name:"__osRestoreInt"},{addr:2148010448,type:"code",name:"__osSetGlobalIntMask"},{addr:2148010512,type:"code",name:"__osResetGlobalIntMask"},{addr:2148010592,type:"code",name:"__osPiRawStartDma"},{addr:2148010800,type:"code",name:"osPiGetCmdQueue"},{addr:2148010832,type:"code",name:"__osEPiRawReadIo"},{addr:2148011184,type:"code",name:"alHeapCheck"},{addr:2148011200,type:"code",name:"__osEPiRawWriteIo"},{addr:2148011568,type:"code",name:"osPiWriteIo"},{addr:2148011648,type:"code",name:"osPiReadIo"},{addr:2148011728,type:"code",name:"__osAiDeviceBusy"},{addr:2148011760,type:"code",name:"__osThreadSave"},{addr:2148012464,type:"code",name:"__osThprofStack"},{addr:2148012468,type:"code",name:"__osThprofHeap"},{addr:2148012608,type:"code",name:"sqrtf"},{addr:2148012624,type:"code",name:"__osRdb_Read_Data_Ct"},{addr:2148012628,type:"code",name:"__osRdb_Read_Data_Buf"},{addr:2148012632,type:"code",name:"osReadHost"},{addr:2148014272,type:"code",name:"MonitorInitBreak"},{addr:2148014304,type:"code",name:"__isExp"},{addr:2148014628,type:"code",name:"__isExpJP"},{addr:2148015540,type:"code",name:"__osThprofCount"},{addr:2148015544,type:"code",name:"__osThprofLastTimer"},{addr:2148015548,type:"code",name:"osThreadProfileCallback"},{addr:2148015680,type:"code",name:"__osThprofFunc"},{addr:2148015684,type:"code",name:"__osThprofFlag"},{addr:2148017296,type:"code",name:"__osGetCause"},{addr:2148017312,type:"code",name:"osGetCount"},{addr:2148017376,type:"code",name:"__rmonSendFault"},{addr:2148017380,type:"code",name:"rmonRdbReadBuf"},{addr:2148017808,type:"code",name:"__osSpDeviceBusy"},{addr:2148017840,type:"code",name:"__osSpGetStatus"},{addr:2148017856,type:"code",name:"__osSpSetStatus"},{addr:2148017872,type:"code",name:"__osSpSetPc"},{addr:2148017920,type:"code",name:"__osSpRawStartDma"},{addr:2148018064,type:"code",name:"__osSpRawReadIo"},{addr:2148018144,type:"code",name:"__osSpRawWriteIo"},{addr:2148018224,type:"code",name:"__osContDataCrc"},{addr:2148018332,type:"code",name:"__osContDataCrc"},{addr:2148018348,type:"code",name:"__osContAddressCrc"},{addr:2148019040,type:"code",name:"__osPfsGetInitData"},{addr:2148019220,type:"code",name:"__osPfsRequestData"},{addr:2148019384,type:"code",name:"__osPfsPifRam"},{addr:2148019420,type:"code",name:"__pfsisplug_o_004C"},{addr:2148019428,type:"code",name:"__rmonIOhandler"},{addr:2148019448,type:"code",name:"osPfsIsPlug"},{addr:2148019584,type:"code",name:"__pfsisplug_o_0094"},{addr:2148019604,type:"code",name:"__rmonIOputw"},{addr:2148019696,type:"code",name:"__rmonIOflush"},{addr:2148019756,type:"code",name:"__rmonSendFault"},{addr:2148019776,type:"code",name:"__osPfsGetOneChannelData"},{addr:2148019904,type:"code",name:"__osPfsRequestOneChannel"},{addr:2148020016,type:"code",name:"__pfsgetstatus_o_0030"},{addr:2148020052,type:"code",name:"__osPfsGetStatus"},{addr:2148020164,type:"code",name:"__pfsgetstatus_o_0084"},{addr:2148020304,type:"code",name:"__osPfsInodeCache"},{addr:2148020424,type:"code",name:"__contpfs_o_0598"},{addr:2148020560,type:"code",name:"__osPfsRWInode"},{addr:2148021172,type:"code",name:"__contpfs_o_0578"},{addr:2148021384,type:"code",name:"__osCheckId"},{addr:2148021568,type:"code",name:"__osGetId"},{addr:2148022028,type:"code",name:"__osCheckPackId"},{addr:2148022384,type:"code",name:"__osRepairPackId"},{addr:2148023008,type:"code",name:"__osPiRawReadIo"},{addr:2148023088,type:"code",name:"__osPiRawWriteIo"},{addr:2148023132,type:"code",name:"__osIdCheckSum"},{addr:2148023168,type:"code",name:"osEPiWriteIo"},{addr:2148023200,type:"code",name:"__osSumcalc"},{addr:2148023252,type:"code",name:"__osPfsInodeCacheBank"},{addr:2148023253,type:"code",name:"__osPfsInodeCacheChannel"},{addr:2148023632,type:"code",name:"_Litob"},{addr:2148024224,type:"code",name:"_Ldtob"},{addr:2148025324,type:"code",name:"__xldtob_o_0080"},{addr:2148025476,type:"code",name:"__xldtob_o_0414"},{addr:2148026928,type:"code",name:"__rmonExecute"},{addr:2148027072,type:"code",name:"__rmonWriteWordTo"},{addr:2148027136,type:"code",name:"__rmonReadWordAt"},{addr:2148027248,type:"code",name:"__rmonCopyWords"},{addr:2148027464,type:"code",name:"__rmonGetRegionCount"},{addr:2148027548,type:"code",name:"__rmonGetExeName"},{addr:2148027736,type:"code",name:"__rmonLoadProgram"},{addr:2148027744,type:"code",name:"__rmonListProcesses"},{addr:2148027832,type:"code",name:"__rmonWriteMem"},{addr:2148028380,type:"code",name:"__rmonUtilityBuffer"},{addr:2148028636,type:"code",name:"__rmonReadMem"},{addr:2148028976,type:"code",name:"__rmonSetComm"},{addr:2148029004,type:"code",name:"__rmonCopyWords"},{addr:2148029032,type:"code",name:"__rmonPanic"},{addr:2148029040,type:"code",name:"__rmonMQ"},{addr:2148029052,type:"code",name:"__rmonMemcpy"},{addr:2148029064,type:"code",name:"__rmonInit"},{addr:2148029100,type:"code",name:"__rmonReadWordAt"},{addr:2148029164,type:"code",name:"__rmonWriteWordTo"},{addr:2148029272,type:"code",name:"__rmonSetFault"},{addr:2148029312,type:"code",name:"__rmonGetRegisterContents"},{addr:2148029432,type:"code",name:"__rmonSetVRegs"},{addr:2148029868,type:"code",name:"__rmonGetVRegs"},{addr:2148030048,type:"code",name:"__rmonregs_o_0AA4"},{addr:2148030340,type:"code",name:"__rmonSetSRegs"},{addr:2148030704,type:"code",name:"__rmonGetSRegs"},{addr:2148031112,type:"code",name:"__rmonSetFRegisters"},{addr:2148031252,type:"code",name:"__rmonGetFRegisters"},{addr:2148031392,type:"code",name:"__rmonSetGRegisters"},{addr:2148031632,type:"code",name:"__rmonGetGRegisters"},{addr:2148031940,type:"code",name:"__rmonGetRegisterContents"},{addr:2148032064,type:"code",name:"__rmonMaskIdleThreadInts"},{addr:2148032168,type:"code",name:"__rmonGetTCB"},{addr:2148032268,type:"code",name:"__rmonStopUserThreads"},{addr:2148032752,type:"code",name:"__rmonGetThreadStatus"},{addr:2148034320,type:"code",name:"__rmonSendHeader"},{addr:2148034424,type:"code",name:"__rmonSendReply"},{addr:2148034608,type:"code",name:"__rmonSendData"},{addr:2148035248,type:"code",name:"__osSpRawReadIo"},{addr:2148035328,type:"code",name:"__osSpRawWriteIo"},{addr:2148035408,type:"code",name:"__osSpDeviceBusy"},{addr:2148035440,type:"code",name:"osStopThread"},{addr:2148035632,type:"code",name:"__osGetActiveQueue"},{addr:2148036096,type:"code",name:"__rmonRCPrunning"},{addr:2148036200,type:"code",name:"__rmonStepRCP"},{addr:2148036256,type:"code",name:"__rmonHitCpuFault"},{addr:2148036300,type:"code",name:"__rmonRcpAtBreak"},{addr:2148036301,type:"code",name:"__rmonHitSpBreak"},{addr:2148036441,type:"code",name:"__rmonHitBreak"},{addr:2148036661,type:"code",name:"__rmonGetExceptionStatus"},{addr:2148036721,type:"code",name:"__rmonSetSingleStep"},{addr:2148037149,type:"code",name:"__rmonGetBranchTarget"},{addr:2148037533,type:"code",name:"__rmonClearBreak"},{addr:2148037817,type:"code",name:"__rmonListBreak"},{addr:2148037825,type:"code",name:"__rmonSetBreak"},{addr:2148040448,type:"code",name:"__divdi3"},{addr:2148040816,type:"code",name:"__udivdi3"},{addr:2148040848,type:"code",name:"__umoddi3"},{addr:2148047536,type:"code",name:"midpoint",desc:"A0=output_xyz"},{addr:2148098804,type:"data",name:"overlay_table"},{addr:2148103760,type:"u32",name:"rng_seed"},{addr:2148146544,type:"data",name:"generic_save_data_decode_table",desc:"44 bytes"},{addr:2148317348,type:"u32",name:"debug_font_color",desc:"Used with DrawDebugText"},{addr:2148320244,type:"u8",name:"p1_buttonpress",desc:"0x80 (A)"},{addr:2148320245,type:"u8",name:"p1_buttonpress2",desc:"0x1 (Right C)"},{addr:2148320246,type:"u8",name:"p1_analog_x_axis"},{addr:2148320247,type:"u8",name:"p1_analog_y_axis"},{addr:2148320252,type:"u8",name:"p2_buttonpress",desc:"0x80 (A)"},{addr:2148320253,type:"u8",name:"p2_buttonpress2",desc:"0x1 (Right C)"},{addr:2148320254,type:"u8",name:"p2_analog_x_axis"},{addr:2148320255,type:"u8",name:"p2_analog_y_axis"},{addr:2148320260,type:"u8",name:"p3_buttonpress",desc:"0x80 (A)"},{addr:2148320261,type:"u8",name:"p3_buttonpress2",desc:"0x1 (Right C)"},{addr:2148320262,type:"u8",name:"p3_analog_x_axis"},{addr:2148320263,type:"u8",name:"p3_analog_y_axis"},{addr:2148320268,type:"u8",name:"p4_buttonpress",desc:"0x80 (A)"},{addr:2148320269,type:"u8",name:"p4_buttonpress2",desc:"0x1 (Right C)"},{addr:2148320270,type:"u8",name:"p4_analog_x_axis"},{addr:2148320271,type:"u8",name:"p4_analog_y_axis"},{addr:2148320485,type:"u8",name:"hidden_block_item_space_index"},{addr:2148323196,type:"u8",name:"p1_buttonpress3",desc:"see above"},{addr:2148323197,type:"u8",name:"p1_buttonpress4"},{addr:2148323198,type:"u8",name:"p2_buttonpress3"},{addr:2148323199,type:"u8",name:"p2_buttonpress4"},{addr:2148323200,type:"u8",name:"p3_buttonpress3"},{addr:2148323201,type:"u8",name:"p3_buttonpress4"},{addr:2148323202,type:"u8",name:"p4_buttonpress3"},{addr:2148323203,type:"u8",name:"p4_buttonpress4"},{addr:2148323418,type:"u8",name:"total_turns"},{addr:2148323419,type:"u8",name:"current_turn"},{addr:2148323420,type:"u8",name:"current_game_length",desc:"00=Lite Play"},{addr:2148323421,type:"u8",name:"current_star_spawn",desc:"00 for first star spawn"},{addr:2148323422,type:"u8",name:"star_spawn_indices",desc:"array length 8 of the current star order"},{addr:2148323431,type:"u8",name:"current_player_index",desc:"Player who's turn is active"},{addr:2148323433,type:"u8",name:"current_space_index"},{addr:2148323488,type:"u8",name:"board_ram9",desc:"free for board use"},{addr:2148323489,type:"u8",name:"board_ram10",desc:"free for board use"},{addr:2148323490,type:"u8",name:"board_ram11",desc:"free for board use"},{addr:2148323491,type:"u8",name:"board_ram12",desc:"free for board use"},{addr:2148323492,type:"u8",name:"board_ram13",desc:"free for board use"},{addr:2148323493,type:"u8",name:"board_ram14",desc:"free for board use"},{addr:2148323494,type:"u8",name:"board_ram15",desc:"free for board use"},{addr:2148323495,type:"u8",name:"board_ram16",desc:"free for board use"},{addr:2148323496,type:"u8",name:"board_ram17",desc:"free for board use"},{addr:2148323497,type:"u8",name:"cur_player_used_item",desc:"0=Player can use item"},{addr:2148323503,type:"u8",name:"slow_dice_flags",desc:"bit0 is P1"},{addr:2148323508,type:"u16",name:"bank_coin_total",desc:"Number of coins in bank"},{addr:2148326354,type:"u8",name:"p1_forced_dice_roll",desc:" forces p1's normal roll"},{addr:2148326355,type:"u8",name:"p1_forced_dice_roll2",desc:" forces p1's second roll when using a mushroom"},{addr:2148326356,type:"u8",name:"p1_forced_dice_roll3",desc:" forces p1's third roll when using a golden mushroom"},{addr:2148326357,type:"u8",name:"p1_spaces_remaining",desc:" controls the number above the player's head"},{addr:2148326430,type:"u8",name:"p2_forced_dice_roll",desc:" forces p2's normal roll"},{addr:2148326431,type:"u8",name:"p2_forced_dice_roll2",desc:" forces p2's second roll when using a mushroom"},{addr:2148326432,type:"u8",name:"p2_forced_dice_roll3",desc:" forces p2's third roll when using a golden mushroom"},{addr:2148326433,type:"u8",name:"p2_spaces_remaining",desc:" controls the number above the player's head"},{addr:2148326506,type:"u8",name:"p3_forced_dice_roll",desc:" forces p3's normal roll"},{addr:2148326507,type:"u8",name:"p3_forced_dice_roll2",desc:" forces p3's second roll when using a mushroom"},{addr:2148326508,type:"u8",name:"p3_forced_dice_roll3",desc:" forces p3's third roll when using a golden mushroom"},{addr:2148326509,type:"u8",name:"p3_spaces_remaining",desc:" controls the number above the player's head"},{addr:2148326582,type:"u8",name:"p4_forced_dice_roll",desc:" forces p4's normal roll"},{addr:2148326583,type:"u8",name:"p4_forced_dice_roll2",desc:" forces p4's second roll when using a mushroom"},{addr:2148326584,type:"u8",name:"p4_forced_dice_roll3",desc:" forces p4's third roll when using a golden mushroom"},{addr:2148326585,type:"u8",name:"p4_spaces_remaining",desc:" controls the number above the player's head"},{addr:2148327877,type:"u8",name:"hidden_block_coins_space_index"},{addr:2148327938,type:"u16",name:"current_scene"},{addr:2148339976,type:"data",name:"player_structs"},{addr:2148339977,type:"u8",name:"p1_cpu_difficulty"},{addr:2148339978,type:"u8",name:"p1_controller"},{addr:2148339979,type:"u8",name:"p1_char",desc:"Mario=0"},{addr:2148339986,type:"u16",name:"p1_coins",desc:"Player 1 coin count"},{addr:2148339990,type:"u8",name:"p1_stars",desc:"Player 1 star count"},{addr:2148339991,type:"u8",name:"p1_cur_chain_index",desc:"Player 1 current chain index"},{addr:2148339992,type:"u8",name:"p1_cur_space_index",desc:"Player 1 current space index"},{addr:2148339993,type:"u8",name:"p1_next_chain_index",desc:"Player 1 next chain index"},{addr:2148339994,type:"u8",name:"p1_next_space_index",desc:"Player 1 next space index"},{addr:2148339997,type:"u8",name:"p1_prev_chain_index",desc:"Player 1 previous chain index"},{addr:2148339998,type:"u8",name:"p1_prev_space_index",desc:"Player 1 previous space index"},{addr:2148339999,type:"u8",name:"p1_status_flags",desc:"0x80 (reset effect you land)"},{addr:214834e4,type:"u8",name:"p1_item1",desc:"Player 1 first item"},{addr:2148340001,type:"u8",name:"p1_item2",desc:"Player 1 second item"},{addr:2148340002,type:"u8",name:"p1_item3",desc:"Player 1 third item"},{addr:2148340003,type:"u8",name:"p1_bowser_suit_flag",desc:"1 = suit is on"},{addr:2148340004,type:"u8",name:"p1_turn_color_status",desc:"00=blank"},{addr:2148340016,type:"u16",name:"p1_minigame_star"},{addr:2148340018,type:"u16",name:"p1_coin_star"},{addr:2148340020,type:"s8",name:"p1_happening_space_count"},{addr:2148340021,type:"u8",name:"p1_red_space_count"},{addr:2148340022,type:"u8",name:"p1_blue_space_count"},{addr:2148340023,type:"u8",name:"p1_chance_space_count"},{addr:2148340024,type:"u8",name:"p1_bowser_space_count"},{addr:2148340025,type:"u8",name:"p1_battle_space_count"},{addr:2148340026,type:"u8",name:"p1_item_space_count"},{addr:2148340027,type:"u8",name:"p1_bank_space_count"},{addr:2148340028,type:"u8",name:"p1_game_guy_space_count"},{addr:2148340033,type:"u8",name:"p2_cpu_difficulty"},{addr:2148340034,type:"u8",name:"p2_controller"},{addr:2148340035,type:"u8",name:"p2_char"},{addr:2148340042,type:"u16",name:"p2_coins",desc:"Player 2 coin count"},{addr:2148340046,type:"u8",name:"p2_stars",desc:"Player 2 star count"},{addr:2148340047,type:"u8",name:"p2_cur_chain_index",desc:"Player 2 current chain index"},{addr:2148340048,type:"u8",name:"p2_cur_space_index",desc:"Player 2 current space index"},{addr:2148340049,type:"u8",name:"p2_next_chain_index",desc:"Player 2 next chain index"},{addr:2148340050,type:"u8",name:"p2_next_space_index",desc:"Player 2 next space index"},{addr:2148340053,type:"u8",name:"p2_prev_chain_index",desc:"Player 2 previous chain index"},{addr:2148340054,type:"u8",name:"p2_prev_space_index",desc:"Player 2 previous space index"},{addr:2148340055,type:"u8",name:"p2_status_flags",desc:"see p1 notes"},{addr:2148340056,type:"u8",name:"p2_item1",desc:"Player 2 first item"},{addr:2148340057,type:"u8",name:"p2_item2",desc:"Player 2 second item"},{addr:2148340058,type:"u8",name:"p2_item3",desc:"Player 2 third item"},{addr:2148340059,type:"u8",name:"p2_bowser_suit_flag",desc:"1 = suit is on"},{addr:2148340060,type:"u8",name:"p2_turn_color_status",desc:"00=blank"},{addr:2148340072,type:"u16",name:"p2_minigame_star"},{addr:2148340074,type:"u16",name:"p2_coin_star"},{addr:2148340076,type:"s8",name:"p2_happening_space_count"},{addr:2148340077,type:"u8",name:"p2_red_space_count"},{addr:2148340078,type:"u8",name:"p2_blue_space_count"},{addr:2148340079,type:"u8",name:"p2_chance_space_count"},{addr:2148340080,type:"u8",name:"p2_bowser_space_count"},{addr:2148340081,type:"u8",name:"p2_battle_space_count"},{addr:2148340082,type:"u8",name:"p2_item_space_count"},{addr:2148340083,type:"u8",name:"p2_bank_space_count"},{addr:2148340084,type:"u8",name:"p2_game_guy_space_count"},{addr:2148340089,type:"u8",name:"p3_cpu_difficulty"},{addr:2148340090,type:"u8",name:"p3_controller"},{addr:2148340091,type:"u8",name:"p3_char"},{addr:2148340098,type:"u16",name:"p3_coins",desc:"Player 3 coin count"},{addr:2148340102,type:"u8",name:"p3_stars",desc:"Player 3 star count"},{addr:2148340103,type:"u8",name:"p3_cur_chain_index",desc:"Player 3 current chain index"},{addr:2148340104,type:"u8",name:"p3_cur_space_index",desc:"Player 3 current space index"},{addr:2148340105,type:"u8",name:"p3_next_chain_index",desc:"Player 3 next chain index"},{addr:2148340106,type:"u8",name:"p3_next_space_index",desc:"Player 3 next space index"},{addr:2148340109,type:"u8",name:"p3_prev_chain_index",desc:"Player 3 previous chain index"},{addr:2148340110,type:"u8",name:"p3_prev_space_index",desc:"Player 3 previous space index"},{addr:2148340111,type:"u8",name:"p3_status_flags",desc:"see p1 notes"},{addr:2148340112,type:"u8",name:"p3_item1",desc:"Player 3 first item"},{addr:2148340113,type:"u8",name:"p3_item2",desc:"Player 3 second item"},{addr:2148340114,type:"u8",name:"p3_item3",desc:"Player 3 third item"},{addr:2148340115,type:"u8",name:"p3_bowser_suit_flag",desc:"1 = suit is on"},{addr:2148340116,type:"u8",name:"p3_turn_color_status",desc:"00=blank"},{addr:2148340128,type:"u16",name:"p3_minigame_star"},{addr:2148340130,type:"u16",name:"p3_coin_star"},{addr:2148340132,type:"s8",name:"p3_happening_space_count"},{addr:2148340133,type:"u8",name:"p3_red_space_count"},{addr:2148340134,type:"u8",name:"p3_blue_space_count"},{addr:2148340135,type:"u8",name:"p3_chance_space_count"},{addr:2148340136,type:"u8",name:"p3_bowser_space_count"},{addr:2148340137,type:"u8",name:"p3_battle_space_count"},{addr:2148340138,type:"u8",name:"p3_item_space_count"},{addr:2148340139,type:"u8",name:"p3_bank_space_count"},{addr:2148340140,type:"u8",name:"p3_game_guy_space_count"},{addr:2148340145,type:"u8",name:"p4_cpu_difficulty"},{addr:2148340146,type:"u8",name:"p4_controller"},{addr:2148340147,type:"u8",name:"p4_char"},{addr:2148340154,type:"u16",name:"p4_coins",desc:"Player 4 coin count"},{addr:2148340158,type:"u8",name:"p4_stars",desc:"Player 4 star count"},{addr:2148340159,type:"u8",name:"p4_cur_chain_index",desc:"Player 4 current chain index"},{addr:2148340160,type:"u8",name:"p4_cur_space_index",desc:"Player 4 current space index"},{addr:2148340161,type:"u8",name:"p4_next_chain_index",desc:"Player 4 next chain index"},{addr:2148340162,type:"u8",name:"p4_next_space_index",desc:"Player 4 next space index"},{addr:2148340165,type:"u8",name:"p4_prev_chain_index",desc:"Player 4 previous chain index"},{addr:2148340166,type:"u8",name:"p4_prev_space_index",desc:"Player 4 previous space index"},{addr:2148340167,type:"u8",name:"p4_status_flags",desc:"see p1 notes"},{addr:2148340168,type:"u8",name:"p4_item1",desc:"Player 4 first item"},{addr:2148340169,type:"u8",name:"p4_item2",desc:"Player 4 second item"},{addr:2148340170,type:"u8",name:"p4_item3",desc:"Player 4 third item"},{addr:2148340171,type:"u8",name:"p4_bowser_suit_flag",desc:"1 = suit is on"},{addr:2148340172,type:"u8",name:"p4_turn_color_status",desc:"00=blank"},{addr:2148340184,type:"u16",name:"p4_minigame_star"},{addr:2148340186,type:"u16",name:"p4_coin_star"},{addr:2148340188,type:"s8",name:"p4_happening_space_count"},{addr:2148340189,type:"u8",name:"p4_red_space_count"},{addr:2148340190,type:"u8",name:"p4_blue_space_count"},{addr:2148340191,type:"u8",name:"p4_chance_space_count"},{addr:2148340192,type:"u8",name:"p4_bowser_space_count"},{addr:2148340193,type:"u8",name:"p4_battle_space_count"},{addr:2148340194,type:"u8",name:"p4_item_space_count"},{addr:2148340195,type:"u8",name:"p4_bank_space_count"},{addr:2148340196,type:"u8",name:"p4_game_guy_space_count"},{addr:2148340303,type:"u8",name:"hidden_block_star_space_index"},{addr:2148352448,type:"u32",name:"cur_player_spaces_remaining"},{addr:2148376976,type:"code",name:"RunDecisionTree",desc:"A0=decision_tree_pointer"},{addr:2148409160,type:"code",name:"ShowPlayerCoinChange",desc:"A0=player_index"},{addr:2148419960,type:"code",name:"PlayerHasItem",desc:"A0=player_index"},{addr:2148420060,type:"code",name:"PlayerHasEmptyItemSlot",desc:"A0=player_index"},{addr:2148420104,type:"code",name:"FixUpPlayerItemSlots",desc:"A0=player_index"},{addr:2148443744,type:"code",name:"AddArrowAngle",desc:"F0=degree_rot_of_arrow"},{addr:2148446560,type:"code",name:"GetSpaceData",desc:"A0=space_index"},{addr:2148446596,type:"code",name:"GetAbsSpaceIndexFromChainSpaceIndex",desc:"A0=chain_index"},{addr:2148446640,type:"code",name:"GetChainLength",desc:"A0=chain_index"},{addr:2148446668,type:"code",name:"GetChainSpaceIndexFromAbsSpaceIndex",desc:"A0=abs_space_index"},{addr:2148446796,type:"code",name:"SetPlayerOntoAbsSpaceIndex",desc:"A0=abs_space_index"},{addr:2148448240,type:"code",name:"SetSpaceType",desc:"A0=space_index"},{addr:2148448864,type:"code",name:"EventTableHydrate",desc:"Moves event table data into the space data"},{addr:2148449468,type:"code",name:"SetCurrentSpaceIndex",desc:"A0=space_index"},{addr:2148449480,type:"code",name:"GetCurrentSpaceIndex"},{addr:2148449708,type:"code",name:"RedrawSpaces"},{addr:2148452040,type:"code",name:"CloseMessage",desc:"Closes open message window (with animation)"},{addr:2148452588,type:"code",name:"ShowMessage",desc:"A0=character_index"},{addr:2148453208,type:"code",name:"GetAngleBetweenSpaces",desc:"A0=space_1_data[0x8]"},{addr:2148453916,type:"code",name:"SetPlayerBlue",desc:"Sets the player's turn state blue"},{addr:2148453924,type:"code",name:"SetPlayerRed",desc:"Sets the player's turn state red"},{addr:2148453932,type:"code",name:"SetPlayerGreen",desc:"Sets the player's turn state green"},{addr:2148453964,type:"code",name:"GetSumOfPlayerStars",desc:"sums the star count of all players"},{addr:2148454044,type:"code",name:"RNGPercentChance",desc:"A0=percent_chance"},{addr:2148454116,type:"code",name:"GetTurnsElapsed"},{addr:2148454924,type:"code",name:"RotatePlayerModel",desc:"A0=player_index"},{addr:2148456732,type:"code",name:"SetPlayerOntoChain",desc:"A0=player_index"},{addr:2148456856,type:"code",name:"SetNextChainAndSpace",desc:"A0=player_index"},{addr:2148456952,type:"code",name:"SetPrevChainAndSpace",desc:"A0=player_index"},{addr:2148457048,type:"code",name:"ChangeStarLocation"},{addr:2148460992,type:"code",name:"GetPlayerPlacement",desc:"A0=player_index"},{addr:2148461144,type:"code",name:"GetPlayerPlacementAtEndOfGame",desc:"A0=player_index"},{addr:2148475184,type:"code",name:"GetCurrentPlayerIndex"},{addr:2148475196,type:"code",name:"GetPlayerStruct",desc:"A0=player_index pass -1 to get current player's struct"},{addr:2148475260,type:"code",name:"PlayerIsCurrent",desc:"A0=player_index tests if A0 is the current player"},{addr:2148475288,type:"code",name:"PlayerIsCPU",desc:"A0=player_index"},{addr:2148475328,type:"code",name:"AdjustPlayerCoins",desc:"A0=player_index"},{addr:2148475440,type:"code",name:"PlayerHasCoins",desc:"A0=player_index"},{addr:2148475652,type:"code",name:"SetBoardPlayerAnimation",desc:"A0=player_index"},{addr:2148490564,type:"code",name:"AdjustPlayerCoinsGradual",desc:"A0=player_index"},{addr:2148492272,type:"code",name:"RefreshHUD",desc:"A0=player_index"},{addr:2148503900,type:"code",name:"SetCameraType",desc:"A0=type"},{addr:2148535712,type:"data",name:"mini_ids_4p"},{addr:2148535732,type:"data",name:"mini_ids_4p_easy"},{addr:2148535744,type:"data",name:"mini_ids_1v3"},{addr:2148535756,type:"data",name:"mini_ids_1v3_easy"},{addr:2148535764,type:"data",name:"mini_ids_2v2"},{addr:2148535776,type:"data",name:"mini_ids_2v2_easy"},{addr:2148535784,type:"data",name:"mini_ids_battle"},{addr:2148535792,type:"data",name:"mini_ids_battle_easy"},{addr:2148535796,type:"data",name:"mini_ids_item"},{addr:2148535804,type:"data",name:"mini_ids_item_easy"},{addr:2148535816,type:"data",name:"mini_ids_duel"},{addr:2148535824,type:"data",name:"mini_ids_duel_easy"},{addr:2148535832,type:"data",name:"num_minis_in_roulette",desc:"Number of Mini-Games to populate the roulette with for each type (4p"},{addr:2148543576,type:"u32",name:"boo_function_pointer"},{addr:2148553232,type:"u16",name:"num_board_spaces"},{addr:2148553234,type:"u16",name:"num_chains"},{addr:2148553236,type:"u32",name:"hydrated_space_data"},{addr:2148553240,type:"u32",name:"hydrated_chains"},{addr:2148553360,type:"data",name:"arrow_angles",desc:"f32[8]"},{addr:2148553392,type:"u32",name:"num_arrow_angles"},{addr:2148554736,type:"u32",name:"p1_hud_xpos",desc:" float for p1's HUD x pos"},{addr:2148554740,type:"u32",name:"p1_hud_ypos",desc:" float for p1's HUD y pos"},{addr:2148554844,type:"u32",name:"p2_hud_xpos",desc:" see p1"},{addr:2148554848,type:"u32",name:"p2_hud_ypos",desc:" see p1"},{addr:2148554952,type:"u32",name:"p3_hud_xpos",desc:" see p1"},{addr:2148554956,type:"u32",name:"p3_hud_ypos",desc:" see p1"},{addr:2148555060,type:"u32",name:"p4_hud_xpos",desc:" see p1"},{addr:2148555064,type:"u32",name:"p4_hud_ypos",desc:" see p1"},{addr:2148555168,type:"data",name:"overlay_base",desc:"Overlay starting location"}],AG=[{addr:2148078296,type:"data",name:"overlay_table"},{addr:2148507904,type:"data",name:"overlay_ram_start"}];function uM(n){switch(n){case Qe.MP1_USA:return oG;case Qe.MP1_JPN:return sG;case Qe.MP1_PAL:return lG;case Qe.MP2_USA:return uG;case Qe.MP2_JPN:return cG;case Qe.MP2_PAL:throw new Error("Symbols not available for game type "+n);case Qe.MP3_USA:return dG;case Qe.MP3_JPN:return AG;case Qe.MP3_PAL:throw new Error("Symbols not available for game type "+n)}throw new Error("Unrecognized game type "+n)}function Vg(n,e){let t=uM(n);return t?(e&&(t=t.filter(r=>r.type===e)),t=t.filter(r=>r.name[0]!=="_"&&r.name[0]!=="?"),t):[]}function to(n,e){let t=uM(n);if(!t)throw new Error(`Symbols aren't available for ${n}.`);for(let r=0;r<t.length;r++)if(t[r].name===e)return t[r].addr;throw new Error(`Symbol ${e} wasn't found for ${n}.`)}function fG(n){return(n-3072|2147483648)>>>0}function t3(n){return(n+3072&2147483647)>>>0}const n3=9*4,l0=new class{constructor(){this._overlays=[],this._sceneInfo=[]}clearCache(){this._overlays=null,this._sceneInfo=null}count(){return this._sceneInfo.length}getInfo(e){return this._sceneInfo[e]||null}getDataView(e){return new DataView(this._overlays[e])}getCodeDataView(e){const t=this._sceneInfo[e],r=t.code_start&2147483647,i=t.code_end&2147483647;return new DataView(this._overlays[e],0,i-r)}getRoDataView(e){const t=this._sceneInfo[e],r=t.rodata_start&2147483647,i=t.rodata_end&2147483647,a=t.ram_start&2147483647;return new DataView(this._overlays[e],r-a,i-r)}getByteLength(){return this._sceneInfo.reduce((e,t)=>e+t.rom_end-t.rom_start,0)}extractAsync(){return new Promise(e=>{this.extract(),e()})}extract(){this._overlays=[],this._sceneInfo=[];let e=to(bt.getROMGame(),"overlay_table");if(!e){wt("overlay_table symbol undefined for current ROM");return}e=t3(e);const t=bt.getROMBuffer(),r=bt.getDataView();let i=e;for(;r.getUint32(i)!==1142947840;){const a={rom_start:r.getUint32(i),rom_end:r.getUint32(i+4),ram_start:r.getUint32(i+8),code_start:r.getUint32(i+12),code_end:r.getUint32(i+16),rodata_start:r.getUint32(i+20),rodata_end:r.getUint32(i+24),bss_start:r.getUint32(i+28),bss_end:r.getUint32(i+32)};this._sceneInfo.push(a),this._overlays.push(t.slice(a.rom_start,a.rom_end)),i+=n3}}pack(e,t=0){let r=to(bt.getROMGame(),"overlay_table");if(!r)throw new Error("overlay_table symbol undefined for current ROM");r=t3(r);const i=new DataView(e);let a=r,o=0;for(;i.getUint32(a)!==1142947840;){const s=this._sceneInfo[o];i.setUint32(a,s.rom_start),i.setUint32(a+4,s.rom_end),i.setUint32(a+8,s.ram_start),i.setUint32(a+12,s.code_start),i.setUint32(a+16,s.code_end),i.setUint32(a+20,s.rodata_start),i.setUint32(a+24,s.rodata_end),i.setUint32(a+28,s.bss_start),i.setUint32(a+32,s.bss_end);const l=this._overlays[o];fr(e,l,s.rom_start,0,l.byteLength),a+=n3,o++}}replace(e,t,r){if(t.byteLength%16)throw new Error("Cannot have overlay byte length that is not divisible by 16");this._overlays[e]=t;const i=this._sceneInfo[e],a=i.rom_end-i.rom_start,o=t.byteLength-a;if(i.rom_end=i.rom_start+t.byteLength,r)for(let s in r){const l=r[s];l&&(i[s]=l)}for(let s=e+1;s<this._sceneInfo.length;s++){const l=this._sceneInfo[s];i.rom_start<l.rom_start&&(l.rom_start+=o,l.rom_end+=o)}wt(`Replaced overlay ${At(e)} with new buffer of length ${t.byteLength}`,r)}};let hG=958,Jm=1024,pG=3;function cM(n,e,t){for(var r=0,i=0,a=hG,o=new ArrayBuffer(Jm),s=new DataView(o),l=0;i<t;){if((l&256)===0&&(l=n.getUint8(r),l|=65280,++r),(l&1)===1)e.setUint8(i,n.getUint8(r)),s.setUint8(a,n.getUint8(r)),++i,++r,a=(a+1)%Jm;else{var c=n.getUint8(r),d=n.getUint8(r+1);r+=2;for(var h=(d&192)<<2|c,f=(d&63)+pG,m,g=0;g<f;++g)m=s.getUint8(h%Jm),s.setUint8(a,m),a=(a+1)%Jm,e.setUint8(i,m),++i,++h}l>>=1}return r}function mG(n){let e=Math.ceil(n.byteLength/8),t=n.byteLength+e,r=new ArrayBuffer(t),i=new DataView(r),a=0,o=0;for(;a<t;)!a||!(a%9)?i.setUint8(a,255):(i.setUint8(a,n.getUint8(o)),o++),a++;return r}function dM(n,e,t){for(var r=0,i=0,a=0,o=0;i<t;){if(o===0&&(a=n.getUint32(r),o=32,r+=4),(a&2147483648)!==0)e.setUint8(i,n.getUint8(r)),++i,++r;else{var s=n.getUint8(r),l=n.getUint8(r+1);r+=2;var c=((s&15)<<8|l)+1,d=((s&240)>>4)+2;d===2&&(d=n.getUint8(r)+18,++r);var h,f;for(h=0;h<d&&i<t;++h)c>i?f=0:f=e.getUint8(i-c),e.setUint8(i,f),++i}a<<=1,--o}return r}function SG(n){let e=n.byteLength/32,t=n.byteLength+e*4,r=new ArrayBuffer(t),i=new DataView(r),a=0;for(let o=0;o<t;o+=36,a+=32)i.setUint32(o,4294967295),i.setUint32(o+4,n.getUint32(a)),i.setUint32(o+8,n.getUint32(a+4)),i.setUint32(o+12,n.getUint32(a+8)),i.setUint32(o+16,n.getUint32(a+12)),i.setUint32(o+20,n.getUint32(a+16)),i.setUint32(o+24,n.getUint32(a+20)),i.setUint32(o+28,n.getUint32(a+24)),i.setUint32(o+32,n.getUint32(a+28));return r}function AM(n,e,t){let r=0,i=0;for(;i<t;){let a=n.getUint8(r);r++;let o=a&127;if(a&128)for(let s=0;s<o;s++){let l=n.getUint8(r);r++,e.setUint8(i,l),i++}else{let s=n.getUint8(r);r++;for(let l=0;l<o;l++)e.setUint8(i,s),i++}}return r}function gG(n){const e=new ArrayBuffer(n.byteLength*3),t=new DataView(e);let r=0,i=0,a=0,o,s;for(;i<n.byteLength;)if(o=n.getUint8(i),s=n.getUint8(i+1),o===s){a=0;for(let l=0;l<127;l++){if(o=n.getUint8(i+l),s=n.getUint8(i+l+1),o!==s||i+l>=n.byteLength){a++;break}a++}t.setUint8(r,a),t.setUint8(r+1,n.getUint8(i)),r+=2,i+=a}else{a=0;for(let l=0;l<127&&(o=n.getUint8(i+l),s=n.getUint8(i+l+1),!(o===s||i+l>=n.byteLength));l++)a++;t.setUint8(r,128|a),r+=1;for(let l=0;l<a;l++)t.setUint8(r,n.getUint8(i+l)),r+=1,i+=1}return e.slice(0,r)}function s_(n,e,t){let r=new ArrayBuffer(t),i=new DataView(r),a;switch(n){case 1:a=cM(e,i,t);break;case 2:case 3:case 4:a=dM(e,i,t);break;case 5:a=AM(e,i,t);break;case 0:a=t;for(let o=0;o<t;o++)i.setUint8(o,e.getUint8(o));break;default:wt(`decompression ${n} not implemented.`);break}return r.compressedSize=a,r}function fM(n,e){switch(n){case 1:return mG(e);case 2:case 3:case 4:return SG(e);case 5:return gG(e);case 0:default:return e.buffer.slice(0)}}function _G(n,e,t){let r=new ArrayBuffer(t),i=new DataView(r);switch(n){case 1:return cM(e,i,t);case 2:case 3:case 4:return dM(e,i,t);case 5:return AM(e,i,t);case 0:return t;default:wt(`getCompressedSize ${n} not implemented.`)}}function Ro(n,e,t,r){return Math.sqrt((n-t)*(n-t)+(e-r)*(e-r))}function _x(n,e,t,r){return{x:(n+t)/2,y:(e+r)/2}}function xG(n,e,t,r,i,a){return Math.abs((a-r)*n-(i-t)*e+i*r-a*t)/Math.sqrt(Math.pow(a-r,2)+Math.pow(i-t,2))}function vG(n,e,t,r,i,a){const[o,s]=[Math.min(t,i),Math.max(t,i)],[l,c]=[Math.min(r,a),Math.max(r,a)];return n>=o&&n<=s&&e>=l&&e<=c}function _0(n,e){return e*Math.ceil(n/e)}function j1(n){return n*Math.PI/180}function wG(n){return n*180/Math.PI}function yG(n,e,t,r){const i=t-n,a=r-e;let o=Math.atan2(a,i);return o<0?Math.abs(o):Math.abs(o-Math.PI)+Math.PI}function hM(n){const e=new ArrayBuffer(4),t=new DataView(e);return t.setFloat32(0,n),t.getUint32(0)}var wA=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function pM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function EG(n){var e=n.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Ne={exports:{}},k0={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp=Symbol.for("react.element"),CG=Symbol.for("react.portal"),VG=Symbol.for("react.fragment"),DG=Symbol.for("react.strict_mode"),FG=Symbol.for("react.profiler"),TG=Symbol.for("react.provider"),bG=Symbol.for("react.context"),PG=Symbol.for("react.forward_ref"),RG=Symbol.for("react.suspense"),LG=Symbol.for("react.memo"),BG=Symbol.for("react.lazy"),r3=Symbol.iterator;function MG(n){return n===null||typeof n!="object"?null:(n=r3&&n[r3]||n["@@iterator"],typeof n=="function"?n:null)}var mM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SM=Object.assign,gM={};function yA(n,e,t){this.props=n,this.context=e,this.refs=gM,this.updater=t||mM}yA.prototype.isReactComponent={};yA.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};yA.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function _M(){}_M.prototype=yA.prototype;function H4(n,e,t){this.props=n,this.context=e,this.refs=gM,this.updater=t||mM}var z4=H4.prototype=new _M;z4.constructor=H4;SM(z4,yA.prototype);z4.isPureReactComponent=!0;var i3=Array.isArray,xM=Object.prototype.hasOwnProperty,W4={current:null},vM={key:!0,ref:!0,__self:!0,__source:!0};function wM(n,e,t){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)xM.call(e,r)&&!vM.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=t;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in s=n.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Fp,type:n,key:a,ref:o,props:i,_owner:W4.current}}function IG(n,e){return{$$typeof:Fp,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function X4(n){return typeof n=="object"&&n!==null&&n.$$typeof===Fp}function OG(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var a3=/\/+/g;function xx(n,e){return typeof n=="object"&&n!==null&&n.key!=null?OG(""+n.key):e.toString(36)}function Dg(n,e,t,r,i){var a=typeof n;(a==="undefined"||a==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Fp:case CG:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+xx(o,0):r,i3(i)?(t="",n!=null&&(t=n.replace(a3,"$&/")+"/"),Dg(i,e,t,"",function(c){return c})):i!=null&&(X4(i)&&(i=IG(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(a3,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",i3(n))for(var s=0;s<n.length;s++){a=n[s];var l=r+xx(a,s);o+=Dg(a,e,t,l,i)}else if(l=MG(n),typeof l=="function")for(n=l.call(n),s=0;!(a=n.next()).done;)a=a.value,l=r+xx(a,s++),o+=Dg(a,e,t,l,i);else if(a==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Zm(n,e,t){if(n==null)return n;var r=[],i=0;return Dg(n,r,"","",function(a){return e.call(t,a,i++)}),r}function kG(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var $i={current:null},Fg={transition:null},NG={ReactCurrentDispatcher:$i,ReactCurrentBatchConfig:Fg,ReactCurrentOwner:W4};k0.Children={map:Zm,forEach:function(n,e,t){Zm(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Zm(n,function(){e++}),e},toArray:function(n){return Zm(n,function(e){return e})||[]},only:function(n){if(!X4(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};k0.Component=yA;k0.Fragment=VG;k0.Profiler=FG;k0.PureComponent=H4;k0.StrictMode=DG;k0.Suspense=RG;k0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NG;k0.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=SM({},n.props),i=n.key,a=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=W4.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var s=n.type.defaultProps;for(l in e)xM.call(e,l)&&!vM.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:Fp,type:n.type,key:i,ref:a,props:r,_owner:o}};k0.createContext=function(n){return n={$$typeof:bG,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:TG,_context:n},n.Consumer=n};k0.createElement=wM;k0.createFactory=function(n){var e=wM.bind(null,n);return e.type=n,e};k0.createRef=function(){return{current:null}};k0.forwardRef=function(n){return{$$typeof:PG,render:n}};k0.isValidElement=X4;k0.lazy=function(n){return{$$typeof:BG,_payload:{_status:-1,_result:n},_init:kG}};k0.memo=function(n,e){return{$$typeof:LG,type:n,compare:e===void 0?null:e}};k0.startTransition=function(n){var e=Fg.transition;Fg.transition={};try{n()}finally{Fg.transition=e}};k0.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};k0.useCallback=function(n,e){return $i.current.useCallback(n,e)};k0.useContext=function(n){return $i.current.useContext(n)};k0.useDebugValue=function(){};k0.useDeferredValue=function(n){return $i.current.useDeferredValue(n)};k0.useEffect=function(n,e){return $i.current.useEffect(n,e)};k0.useId=function(){return $i.current.useId()};k0.useImperativeHandle=function(n,e,t){return $i.current.useImperativeHandle(n,e,t)};k0.useInsertionEffect=function(n,e){return $i.current.useInsertionEffect(n,e)};k0.useLayoutEffect=function(n,e){return $i.current.useLayoutEffect(n,e)};k0.useMemo=function(n,e){return $i.current.useMemo(n,e)};k0.useReducer=function(n,e,t){return $i.current.useReducer(n,e,t)};k0.useRef=function(n){return $i.current.useRef(n)};k0.useState=function(n){return $i.current.useState(n)};k0.useSyncExternalStore=function(n,e,t){return $i.current.useSyncExternalStore(n,e,t)};k0.useTransition=function(){return $i.current.useTransition()};k0.version="18.2.0";(function(n){n.exports=k0})(Ne);const $g=pM(Ne.exports);var Gl={exports:{}};(function(n,e){(function(t,r){var i=function(o){if(typeof o.document!="object")throw new Error("Cookies.js requires a `window` with a `document` object");var s=function(l,c,d){return arguments.length===1?s.get(l):s.set(l,c,d)};return s._document=o.document,s._cacheKeyPrefix="cookey.",s._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),s.defaults={path:"/",secure:!1},s.get=function(l){s._cachedDocumentCookie!==s._document.cookie&&s._renewCache();var c=s._cache[s._cacheKeyPrefix+l];return c===r?r:decodeURIComponent(c)},s.set=function(l,c,d){return d=s._getExtendedOptions(d),d.expires=s._getExpiresDate(c===r?-1:d.expires),s._document.cookie=s._generateCookieString(l,c,d),s},s.expire=function(l,c){return s.set(l,r,c)},s._getExtendedOptions=function(l){return{path:l&&l.path||s.defaults.path,domain:l&&l.domain||s.defaults.domain,expires:l&&l.expires||s.defaults.expires,secure:l&&l.secure!==r?l.secure:s.defaults.secure}},s._isValidDate=function(l){return Object.prototype.toString.call(l)==="[object Date]"&&!isNaN(l.getTime())},s._getExpiresDate=function(l,c){if(c=c||new Date,typeof l=="number"?l=l===1/0?s._maxExpireDate:new Date(c.getTime()+l*1e3):typeof l=="string"&&(l=new Date(l)),l&&!s._isValidDate(l))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return l},s._generateCookieString=function(l,c,d){l=l.replace(/[^#$&+\^`|]/g,encodeURIComponent),l=l.replace(/\(/g,"%28").replace(/\)/g,"%29"),c=(c+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),d=d||{};var h=l+"="+c;return h+=d.path?";path="+d.path:"",h+=d.domain?";domain="+d.domain:"",h+=d.expires?";expires="+d.expires.toUTCString():"",h+=d.secure?";secure":"",h},s._getCacheFromString=function(l){for(var c={},d=l?l.split("; "):[],h=0;h<d.length;h++){var f=s._getKeyValuePairFromCookieString(d[h]);c[s._cacheKeyPrefix+f.key]===r&&(c[s._cacheKeyPrefix+f.key]=f.value)}return c},s._getKeyValuePairFromCookieString=function(l){var c=l.indexOf("=");c=c<0?l.length:c;var d=l.substr(0,c),h;try{h=decodeURIComponent(d)}catch(f){console&&typeof console.error=="function"&&console.error('Could not decode cookie with key "'+d+'"',f)}return{key:h,value:l.substr(c+1)}},s._renewCache=function(){s._cache=s._getCacheFromString(s._document.cookie),s._cachedDocumentCookie=s._document.cookie},s._areEnabled=function(){var l="cookies.js",c=s.set(l,1).get(l)==="1";return s.expire(l),c},s.enabled=s._areEnabled(),s},a=t&&typeof t.document=="object"?i(t):i;typeof r=="function"&&r.amd?r(function(){return a}):(e=n.exports=a,e.Cookies=a)})(typeof window>"u"?wA:window)})(Gl,Gl.exports);const UG=13,jG=32;function Qc(n,e){return t=>{function r(){n(t),t.stopPropagation(),t.preventDefault()}((!e||e.enter)&&t.keyCode===UG||(!e||e.space)&&t.keyCode===jG)&&r()}}function GG(n){n.stopPropagation(),n.preventDefault()}function l_(){const[,n]=Ne.exports.useState(0);return Ne.exports.useCallback(()=>n(e=>e+1),[])}var u_={exports:{}},c_={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HG=Ne.exports,zG=Symbol.for("react.element"),WG=Symbol.for("react.fragment"),XG=Object.prototype.hasOwnProperty,KG=HG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YG={key:!0,ref:!0,__self:!0,__source:!0};function yM(n,e,t){var r,i={},a=null,o=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)XG.call(e,r)&&!YG.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:zG,type:n,key:a,ref:o,props:i,_owner:KG.current}}c_.Fragment=WG;c_.jsx=yM;c_.jsxs=yM;(function(n){n.exports=c_})(u_);const Aa=u_.exports.Fragment,B=u_.exports.jsx,Xe=u_.exports.jsxs,qG=Object.freeze(Object.defineProperty({__proto__:null,Fragment:Aa,jsx:B,jsxs:Xe},Symbol.toStringTag,{value:"Module"})),ir=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onClick=()=>{this.props.onClick(this.props.id)}}render(){let e="nbButton";return this.props.css&&(e+=" "+this.props.css),B("div",{className:e,title:this.props.title,tabIndex:0,onClick:this.onClick,onKeyDown:Qc(this.onClick),children:this.props.children})}},Bo=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onClick=()=>{this.props.readonly||this.props.allowDeselect===!1&&this.props.pressed||this.props.onToggled(this.props.id,!this.props.pressed)}}render(){let e="toggleButton"+(this.props.pressed?" pressed":"");return this.props.css&&(e+=" "+this.props.css),B("div",{className:e,title:this.props.title,tabIndex:0,onClick:this.onClick,onKeyDown:Qc(this.onClick),children:this.props.children})}};function e8(n){let t=n.items.map(r=>B(Bo,{id:r.id,pressed:r.selected,allowDeselect:n.allowDeselect,readonly:n.readonly,title:r.title,onToggled:n.onToggleClick,children:r.text},r.id));return B("div",{className:n.groupCssClass,children:t})}var In=(n=>(n.uiTheme="ui.theme",n.uiAdvanced="ui.advanced",n.uiDebug="ui.debug",n.uiSkipValidation="ui.skipvalidation",n.uiAllowAllRoms="ui.allowallroms",n.uiShowRomBoards="ui.showromboards",n.writeBranding="write.branding",n.writeDecompressed="write.decompressed",n.limitModelFPS="models.limitfps",n.limitModelAnimations="models.limitAnimations",n.modelUseGLB="models.useGLB",n))(In||{});const K4=[{name:"Theme",type:"section"},{id:"ui.theme",type:"theme",default:ql.Classic,name:"Theme"},{name:"UI",type:"section"},{id:"ui.advanced",type:"checkbox",default:!1,name:"Advanced features",desc:"Enables infrequently used, potentially complicated, and developer features."},{id:"ui.debug",type:"checkbox",default:Hn(),name:"Debug features",advanced:!0,desc:"Enables debug output and UI that may aid development."},{id:"ui.skipvalidation",type:"checkbox",default:!1,name:"Skip Overwrite Validation",advanced:!0,desc:"Allow boards to be written regardless of warnings."},{id:"ui.showromboards",type:"checkbox",default:!1,name:"Show ROM Boards",advanced:!0,desc:"Show boards parsed from the ROM in the editor."},{id:"ui.allowallroms",type:"checkbox",default:!1,name:"Allow All ROMs",advanced:!0,desc:"Allows more than just the officially supported ROMs to attempt to load."},{name:"ROM",type:"section"},{id:"write.branding",type:"checkbox",default:!0,name:"Include branding",desc:"Adds the PartyPlanner64 logo to the game boot splashscreens."},{id:"write.decompressed",type:"checkbox",default:!1,name:"Leave ROM decompressed",advanced:!0,desc:"Leaves all files decompressed when saving a ROM, resulting in larger file size."},{name:"Model Viewer",type:"section"},{id:"models.limitfps",type:"checkbox",default:!0,name:"Limit FPS",desc:"Reduce the refresh rate for better performance."},{id:"models.limitAnimations",type:"checkbox",default:!0,name:"Limit animations",desc:"Limit animations to those in the same directory as the model."},{id:"models.useGLB",type:"checkbox",default:!1,name:"Use GLB container for glTF",desc:"Create a GLB container when exporting models to glTF."}];function QG(n){return K4.find(e=>e.type==="section"?!1:e.id===n)}function o3(n){const e=QG(n);if(e&&e.type!=="section")return e.default}class JG{constructor(){this.listeners=new Set,this._tempSettings={}}getSetting(e){if(this._tempSettings.hasOwnProperty(e))return this._tempSettings[e];let t;if(Gl.exports.enabled){const r=Gl.exports.get(e);r===void 0?t=o3(e):t=JSON.parse(r)}else t=o3(e);return this._tempSettings[e]=t,t}setSetting(e,t){this._tempSettings[e]=t,Gl.exports.enabled&&Gl.exports.set(e,JSON.stringify(t),{expires:1/0}),this.listeners.forEach(r=>{r(e)})}reset(){this._tempSettings={},Gl.exports.enabled&&K4.forEach(e=>{e.type!=="section"&&e.id&&Gl.exports.expire(e.id)})}}const Jc=new JG;Zg(Jc.getSetting("ui.debug"));function s3(n){if(n)return Jc.getSetting(n)}function ZG(n,e){Jc.setSetting(n,e),n==="ui.debug"&&Zg(e)}function $G(){let n=K4;return Jc.getSetting("ui.advanced")||(n=n.filter(e=>!e.advanced)),n}const eH=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onSettingChanged=(e,t)=>{ZG(e,t),this.forceUpdate()}}render(){let e=$G().map(t=>{switch(t.type){case"checkbox":{const r=s3(t.id);return B(tH,{id:t.id,name:t.name,desc:t.desc,value:r,onCheckChanged:(i,a)=>this.onSettingChanged(i,a)},t.id)}case"section":return B("h3",{children:t.name},t.name);case"theme":{const r=s3(t.id);return B(nH,{id:t.id,name:t.name,value:r,onThemeChanged:this.onSettingChanged},t.id)}}throw new Error("Unrecognized setting type")});return Xe("div",{id:"settingsForm",children:[B("h2",{children:"Settings"}),e]})}},tH=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onToggled=()=>{this.props.onCheckChanged(this.props.id,!this.props.value)}}render(){const e=this.props.id+"-main",t=this.props.id+"-desc";return Xe("div",{className:"checkboxSetting",onClick:this.onToggled,children:[B("input",{type:"checkbox",className:"checkboxSettingChk",checked:this.props.value,onChange:this.onToggled,"aria-labelledby":e,"aria-describedby":t}),Xe("div",{className:"checkboxSettingLines",children:[B("span",{id:e,className:"checkboxSettingMain",children:this.props.name}),B("br",{}),B("span",{id:t,className:"checkboxSettingDesc",children:this.props.desc})]})]})}};function nH(n){return Xe("div",{className:"themeSetting",children:[B(l3,{name:"Classic",theme:ql.Classic,accentColorHexString:"#5A4540",selected:n.value===ql.Classic||!n.value,onSelected:e=>n.onThemeChanged(n.id,e)}),B(l3,{name:"Dark Gray",theme:ql.DarkGray,accentColorHexString:"#4a4a4a",selected:n.value===ql.DarkGray,onSelected:e=>n.onThemeChanged(n.id,e)})]})}function l3(n){return B(Bo,{id:n.theme,allowDeselect:!1,onToggled:()=>n.onSelected(n.theme),pressed:n.selected,children:B("span",{className:"themeColorSwatch",title:n.name,style:{backgroundColor:n.accentColorHexString}})},n.theme)}function tr(n){return Jc.getSetting(n)}function rH(n){Jc.listeners.add(n)}function iH(n){Jc.listeners.delete(n)}const Gw={r0:0,zero:0,at:1,v0:2,v1:3,a0:4,a1:5,a2:6,a3:7,t0:8,t1:9,t2:10,t3:11,t4:12,t5:13,t6:14,t7:15,s0:16,s1:17,s2:18,s3:19,s4:20,s5:21,s6:22,s7:23,t8:24,t9:25,k0:26,k1:27,gp:28,sp:29,fp:30,ra:31};function aH(n){if(!!n)return Gw[n.toLowerCase()]}function oH(n){for(let e in Gw)if(Gw[e]===n)return e;return""}function sH(n){if(typeof n!="number")throw new Error("getFloatRegName encountered non-number");return"F"+n}const t8={S:16,D:17,W:20,L:21};function EM(n){return t8[n.toUpperCase()]}function lH(n){for(let e in t8)if(t8[e]===n)return e;return""}const n8={S:0,D:1,W:4,L:5};function CM(n){return n8[n.toUpperCase()]}function uH(n){for(let e in n8)if(n8[e]===n)return e;return""}function cH(n){return t8.hasOwnProperty(n.toUpperCase())||n8.hasOwnProperty(n.toUpperCase())}const r8={F:0,UN:1,EQ:2,UEQ:3,OLT:4,ULT:5,OLE:6,ULE:7,SF:8,NGLE:9,SEQ:10,NGL:11,LT:12,NGE:13,LE:14,NGT:15};function dH(n){return r8[n.toUpperCase()]}function AH(n){for(let e in r8)if(r8[e]===n)return e;return""}function fH(n){return r8.hasOwnProperty(n.toUpperCase())}function Bh(n){return n[0]==="0"||n[0]==="1"}function vx(n,e,t){let r=n>>>t&i8(e.length),i=VM(e);return r===i}function VM(n){let e=0;for(var t=0;t<n.length;t++){let r=n[t]==="1"?1:0;e<<=1,e=e|r}return e}function i8(n){if(n<=0)throw new Error(`makeBitMask cannot make mask of length ${n}`);let e=1;for(;--n;)e<<=1,e=e|1;return e}function Hw(n,e){for(;n.length<e;)n="0"+n;return n}function hH(n,e,t,r){let[i,a,o]=n;a=a.toLowerCase();let s;return a==="b"?s=parseInt(o,2):a==="o"?s=parseInt(o,8):a==="x"?s=parseInt(o,16):s=parseInt(o,10),isNaN(s)||(r&&(s>>>=r),e===16&&t&&(s=DM(s)),i&&(s=-s)),s}function DM(n){return new Int16Array([n])[0]}function d_(n){if(n[n.length-1]==="?"&&(n=n.substring(0,n.length-1)),n.indexOf("int")===-1)return n.substr(0,2)==="cc"?{signed:!1,bits:4,shift:!1}:null;let e=0;const t=n.indexOf("shift");return t>0&&(e=n.substr(t).match(/\d+/g)),{signed:n[0]!=="u",bits:parseInt(n.match(/\d+/g)),shift:e}}const Pe="rs",ke="rt",Ut="rd",Mt="fs",Tn="ft",Kt="fd",Dl="fr",ei="uint5",Fl="uint5",Gd="uint10",Ct="int16",d0="uint16",u3="uint20",Tl="uint26",$m="uint26shift2",_a="cc",pH="cond",gn="fmt",rh="fmt3";function a8(n){return Tg[n.toLowerCase()]}const wx=new Map;function iA(n){if(wx.has(n))return wx.get(n);const e=mH(n);return wx.set(n,e),e}function mH(n){if(Bh(n))return n.length;switch(n=n.replace("?",""),n){case"cc":case"fmt3":return 3;case"cond":return 4;case"rs":case"rt":case"rd":case"fs":case"ft":case"fd":case"fr":case"sa":case"fmt":return 5}const e=d_(n);if(e)return e.bits;throw new Error(`Unrecongized format value: ${n}`)}function SH(n){let e="",t=0;for(let r in Tg){const i=Tg[r].format,a=Tg[r].fmts,o=gH(n,i,a);o>t&&(e=r,t=o)}return e}function gH(n,e,t){let r=0,i,a=0;for(let o=e.length-1;o>=0;o--){let s,l=e[o];if(Array.isArray(l)){let c=!1;for(let d=0;d<l.length;d++)if(i=c3(l[d],n,a,t),i>=0){c=!0,r+=i,s=iA(l[d]);break}if(!c)return 0}else if(i=c3(l,n,a,t),i>=0)r+=i,s=iA(l);else return 0;a+=s}return r}function c3(n,e,t,r){if(!Bh(n)){if(n===gn){for(let i=0;i<r.length;i++){let a=Hw(EM(r[i]).toString(2),5);if(vx(e,a,t))return a.length}return-1}if(n===rh){for(let i=0;i<r.length;i++){let a=Hw(CM(r[i]).toString(2),3);if(vx(e,a,t))return a.length}return-1}return 0}return vx(e,n,t)?n.length:-1}const Tg={"abs.fmt":{format:["010001",gn,"00000",Mt,Kt,"000101"],fmts:["S","D"],display:[Kt,Mt]},add:{format:["000000",Pe,ke,Ut,"00000100000"],display:[Ut,Pe,ke]},"add.fmt":{format:["010001",gn,Tn,Mt,Kt,"000000"],fmts:["S","D"],display:[Kt,Mt,Tn]},addi:{format:["001000",Pe,ke,Ct],display:[ke,Pe,Ct]},addiu:{format:["001001",Pe,ke,d0],display:[ke,Pe,d0]},addu:{format:["000000",Pe,ke,Ut,"00000100001"],display:[Ut,Pe,ke]},and:{format:["000000",Pe,ke,Ut,"00000100100"],display:[Ut,Pe,ke]},andi:{format:["001100",Pe,ke,d0],display:[ke,Pe,d0]},bc1f:{format:["010001","01000",[_a,"000"],"00",Ct],display:["cc?",Ct]},bc1fl:{format:["010001","01000",[_a,"000"],"10",Ct],display:["cc?",Ct]},bc1t:{format:["010001","01000",[_a,"000"],"01",Ct],display:["cc?",Ct]},bc1tl:{format:["010001","01000",[_a,"000"],"11",Ct],display:["cc?",Ct]},beq:{format:["000100",Pe,ke,d0],display:[Pe,ke,d0]},beql:{format:["010100",Pe,ke,d0],display:[Pe,ke,d0]},bgez:{format:["000001",Pe,"00001",d0],display:[Pe,d0]},bgezal:{format:["000001",Pe,"10001",d0],display:[Pe,d0]},bgezall:{format:["000001",Pe,"10011",d0],display:[Pe,d0]},bgezl:{format:["000001",Pe,"00011",d0],display:[Pe,d0]},bgtz:{format:["000111",Pe,"00000",d0],display:[Pe,d0]},bgtzl:{format:["010111",Pe,"00000",d0],display:[Pe,d0]},blez:{format:["000110",Pe,"00000",d0],display:[Pe,d0]},blezl:{format:["010110",Pe,"00000",d0],display:[Pe,d0]},bltz:{format:["000001",Pe,"00000",d0],display:[Pe,d0]},bltzal:{format:["000001",Pe,"10000",d0],display:[Pe,d0]},bltzall:{format:["000001",Pe,"10010",d0],display:[Pe,d0]},bltzl:{format:["000001",Pe,"00010",d0],display:[Pe,d0]},bne:{format:["000101",Pe,ke,d0],display:[Pe,ke,d0]},bnel:{format:["010101",Pe,ke,d0],display:[Pe,ke,d0]},break:{format:["000000",[u3,"00000000000000000000"],"001101"],display:["uint20?"]},"c.cond.fmt":{format:["010001",gn,Tn,Mt,[_a,"000"],"00","11",pH],fmts:["S","D"],display:["cc?",Mt,Tn]},"ceil.l.fmt":{format:["010001",gn,"00000",Mt,Kt,"001010"],fmts:["S","D"],display:[Kt,Mt]},"ceil.w.fmt":{format:["010001",gn,"00000",Mt,Kt,"001110"],fmts:["S","D"],display:[Kt,Mt]},cfc1:{format:["010001","00010",ke,Mt,"00000000000"],display:[ke,Mt]},ctc1:{format:["010001","00110",ke,Mt,"00000000000"],display:[ke,Mt]},cop0:{format:["010000",Tl],display:[Tl]},cop1:{format:["010001",Tl],display:[Tl]},cop2:{format:["010010",Tl],display:[Tl]},cop3:{format:["010011",Tl],display:[Tl]},"cvt.d.fmt":{format:["010001",gn,"00000",Mt,Kt,"100001"],fmts:["S","W","L"],display:[Kt,Mt]},"cvt.l.fmt":{format:["010001",gn,"00000",Mt,Kt,"100101"],fmts:["S","D"],display:[Kt,Mt]},"cvt.s.fmt":{format:["010001",gn,"00000",Mt,Kt,"100000"],fmts:["D","W","L"],display:[Kt,Mt]},"cvt.w.fmt":{format:["010001",gn,"00000",Mt,Kt,"100100"],fmts:["S","D"],display:[Kt,Mt]},dadd:{format:["000000",Pe,ke,Ut,"00000101100"],display:[Ut,Pe,ke]},daddi:{format:["011000",Pe,ke,Ct],display:[ke,Pe,Ct]},daddiu:{format:["011001",Pe,ke,d0],display:[ke,Pe,d0]},daddu:{format:["000000",Pe,ke,Ut,"00000101101"],display:[Ut,Pe,ke]},ddiv:{format:["000000",Pe,ke,"0000000000011110"],display:[Pe,ke]},ddivu:{format:["000000",Pe,ke,"0000000000011111"],display:[Pe,ke]},div:{format:["000000",Pe,ke,"0000000000011010"],display:[Pe,ke]},"div.fmt":{format:["010001",gn,Tn,Mt,Kt,"000011"],fmts:["S","D"],display:[Kt,Mt,Tn]},divu:{format:["000000",Pe,ke,"0000000000011011"],display:[Pe,ke]},dmfc1:{format:["010001","00001",ke,Mt,"00000000000"],display:[ke,Mt]},dmult:{format:["000000",Pe,ke,"0000000000011100"],display:[Pe,ke]},dmultu:{format:["000000",Pe,ke,"0000000000011101"],display:[Pe,ke]},dmtc1:{format:["010001","00101",ke,Mt,"00000000000"],display:[ke,Mt]},dsll:{format:["00000000000",ke,Ut,ei,"111000"],display:[Ut,ke,ei]},dsll32:{format:["00000000000",ke,Ut,ei,"111100"],display:[Ut,ke,ei]},dsllv:{format:["000000",Pe,ke,Ut,"00000010100"],display:[Ut,ke,Pe]},dsra:{format:["00000000000",ke,Ut,ei,"111011"],display:[Ut,ke,ei]},dsra32:{format:["00000000000",ke,Ut,ei,"111111"],display:[Ut,ke,ei]},dsrav:{format:["000000",Pe,ke,Ut,"00000010111"],display:[Ut,ke,Pe]},dsrl:{format:["00000000000",ke,Ut,ei,"111010"],display:[Ut,ke,ei]},dsrl32:{format:["00000000000",ke,Ut,ei,"111110"],display:[Ut,ke,ei]},dsrlv:{format:["000000",Pe,ke,Ut,"00000010110"],display:[Ut,ke,Pe]},dsub:{format:["000000",Pe,ke,Ut,"00000101110"],display:[Ut,Pe,ke]},dsubu:{format:["000000",Pe,ke,Ut,"00000101111"],display:[Ut,Pe,ke]},"floor.l.fmt":{format:["010001",gn,"00000",Mt,Kt,"001011"],fmts:["S","D"],display:[Kt,Mt]},"floor.w.fmt":{format:["010001",gn,"00000",Mt,Kt,"001111"],fmts:["S","D"],display:[Kt,Mt]},j:{format:["000010",$m],display:[$m]},jal:{format:["000011",$m],display:[$m]},jalr:{format:["000000",Pe,"00000",[Ut,"11111"],"00000","001001"],display:["rd?",Pe]},jr:{format:["000000",Pe,"000000000000000","001000"],display:[Pe]},lb:{format:["100000",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},lbu:{format:["100100",Pe,ke,d0],display:[ke,d0,"(",Pe,")"]},ld:{format:["110111",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},ldc1:{format:["110101",Pe,Tn,Ct],display:[Tn,Ct,"(",Pe,")"]},ldc2:{format:["110110",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},ldl:{format:["011010",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},ldr:{format:["011011",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},ldxc1:{format:["010011",Pe,ke,"00000",Kt,"000001"],display:[Kt,ke,"(",Pe,")"]},lh:{format:["100001",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},lhu:{format:["100101",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},ll:{format:["110000",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},lld:{format:["110100",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},lui:{format:["001111","00000",ke,d0],display:[ke,d0]},lw:{format:["100011",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},lwc1:{format:["110001",Pe,Tn,Ct],display:[Tn,Ct,"(",Pe,")"]},lwc2:{format:["110010",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},lwc3:{format:["110011",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},lwl:{format:["100010",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},lwr:{format:["100110",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},lwu:{format:["100111",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},lwxc1:{format:["010011",Pe,ke,"00000",Kt,"000000"],display:[Kt,ke,"(",Pe,")"]},"madd.fmt":{format:["010011",Dl,Tn,Mt,Kt,"100",rh],fmts:["S","D"],display:[Kt,Dl,Mt,Tn]},mfc1:{format:["010001","00000",ke,Mt,"00000000000"],display:[ke,Mt]},mfhi:{format:["000000","0000000000",Ut,"00000","010000"],display:[Ut]},mflo:{format:["000000","0000000000",Ut,"00000","010010"],display:[Ut]},"mov.fmt":{format:["010001",gn,"00000",Mt,Kt,"000110"],fmts:["S","D"],display:[Kt,Mt]},movf:{format:["000000",Pe,_a,"00",Ut,"00000","000001"],display:[Ut,Pe,_a]},"movf.fmt":{format:["010001",gn,_a,"00",Mt,Kt,"010001"],fmts:["S","D"],display:[Kt,Mt,_a]},movn:{format:["000000",Pe,ke,Ut,"00000","001011"],display:[Ut,Pe,ke]},"movn.fmt":{format:["010001",gn,ke,Mt,Kt,"010011"],fmts:["S","D"],display:[Kt,Mt,ke]},movt:{format:["000000",Pe,_a,"01",Ut,"00000","000001"],display:[Ut,Pe,_a]},"movt.fmt":{format:["010001",gn,_a,"01",Mt,Kt,"010001"],fmts:["S","D"],display:[Kt,Mt,_a]},movz:{format:["000000",Pe,ke,Ut,"00000","001010"],display:[Ut,Pe,ke]},"movz.fmt":{format:["010001",gn,ke,Mt,Kt,"010010"],fmts:["S","D"],display:[Kt,Mt,ke]},"msub.fmt":{format:["010011",Dl,Tn,Mt,Kt,"101",rh],fmts:["S","D"],display:[Kt,Dl,Mt,Tn]},mtc1:{format:["010001","00100",ke,Mt,"00000000000"],display:[ke,Mt]},mthi:{format:["000000",Pe,"000000000000000","010001"],display:[Pe]},mtlo:{format:["000000",Pe,"000000000000000","010011"],display:[Pe]},"mul.fmt":{format:["010001",gn,Tn,Mt,Kt,"000010"],fmts:["S","D"],display:[Kt,Mt,Tn]},mult:{format:["000000",Pe,ke,"0000000000","011000"],display:[Pe,ke]},multu:{format:["000000",Pe,ke,"0000000000","011001"],display:[Pe,ke]},"neg.fmt":{format:["010001",gn,"00000",Mt,Kt,"000111"],fmts:["S","D"],display:[Kt,Mt]},"nmadd.fmt":{format:["010011",Dl,Tn,Mt,Kt,"110",rh],fmts:["S","D"],display:[Kt,Dl,Mt,Tn]},"nmsub.fmt":{format:["010011",Dl,Tn,Mt,Kt,"111",rh],fmts:["S","D"],display:[Kt,Dl,Mt,Tn]},nop:{format:["00000000000000000000000000000000"],display:[]},nor:{format:["000000",Pe,ke,Ut,"00000","100111"],display:[Ut,Pe,ke]},or:{format:["000000",Pe,ke,Ut,"00000","100101"],display:[Ut,Pe,ke]},ori:{format:["001101",Pe,ke,d0],display:[ke,Pe,d0]},pref:{format:["110011",Pe,Fl,Ct],display:[Fl,Ct,"(",Pe,")"]},prefx:{format:["010011",Pe,ke,Fl,"00000","001111"],display:[Fl,ke,"(",Pe,")"]},"recip.fmt":{format:["010001",gn,"00000",Mt,Kt,"010101"],fmts:["S","D"],display:[Kt,Mt]},"round.l.fmt":{format:["010001",gn,"00000",Mt,Kt,"001000"],fmts:["S","D"],display:[Kt,Mt]},"round.w.fmt":{format:["010001",gn,"00000",Mt,Kt,"001100"],fmts:["S","D"],display:[Kt,Mt]},"rsqrt.fmt":{format:["010001",gn,"00000",Mt,Kt,"010110"],fmts:["S","D"],display:[Kt,Mt]},sb:{format:["101000",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},sc:{format:["111000",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},scd:{format:["111100",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},sd:{format:["111111",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},sdc1:{format:["111101",Pe,Tn,Ct],display:[Tn,Ct,"(",Pe,")"]},sdc2:{format:["111110",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},sdl:{format:["101100",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},sdr:{format:["101101",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},sdxc1:{format:["010011",Pe,Fl,Mt,"00000","001001"],display:[Mt,Fl,"(",Pe,")"]},sh:{format:["101001",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},sll:{format:["000000","00000",ke,Ut,ei,"000000"],display:[Ut,ke,ei]},sllv:{format:["000000",Pe,ke,Ut,"00000","000100"],display:[Ut,ke,Pe]},slt:{format:["000000",Pe,ke,Ut,"00000","101010"],display:[Ut,Pe,ke]},slti:{format:["001010",Pe,ke,Ct],display:[ke,Pe,Ct]},sltiu:{format:["001011",Pe,ke,d0],display:[ke,Pe,d0]},sltu:{format:["000000",Pe,ke,Ut,"00000","101011"],display:[Ut,Pe,ke]},"sqrt.fmt":{format:["010001",gn,"00000",Mt,Kt,"000100"],fmts:["S","D"],display:[Kt,Mt]},sra:{format:["000000","00000",ke,Ut,ei,"000011"],display:[Ut,ke,ei]},srav:{format:["000000",Pe,ke,Ut,"00000","000111"],display:[Ut,ke,Pe]},srl:{format:["000000","00000",ke,Ut,ei,"000010"],display:[Ut,ke,ei]},srlv:{format:["000000",Pe,ke,Ut,"00000","000110"],display:[Ut,ke,Pe]},sub:{format:["000000",Pe,ke,Ut,"00000","100010"],display:[Ut,Pe,ke]},"sub.fmt":{format:["010001",gn,Tn,Mt,Kt,"000001"],fmts:["S","D"],display:[Kt,Mt,Tn]},subu:{format:["000000",Pe,ke,Ut,"00000","100011"],display:[Ut,Pe,ke]},sw:{format:["101011",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},swc1:{format:["111001",Pe,Tn,Ct],display:[Tn,Ct,"(",Pe,")"]},swc2:{format:["111010",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},swc3:{format:["111011",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},swl:{format:["101010",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},swr:{format:["101110",Pe,ke,Ct],display:[ke,Ct,"(",Pe,")"]},swxc1:{format:["010011",Pe,Fl,Mt,"00000","001000"],display:[Mt,Fl,"(",Pe,")"]},sync:{format:["000000","000000000000000","00000","001111"],display:[]},syscall:{format:["000000",[u3,"00000000000000000000"],"001100"],display:[]},teq:{format:["000000",Pe,ke,Gd,"110100"],display:[Pe,ke]},teqi:{format:["000001",Pe,"01100",Ct],display:[Pe,Ct]},tge:{format:["000000",Pe,ke,Gd,"110000"],display:[Pe,ke]},tgei:{format:["000001",Pe,"01000",Ct],display:[Pe,Ct]},tgeiu:{format:["000001",Pe,"01001",d0],display:[Pe,d0]},tgeu:{format:["000000",Pe,ke,Gd,"110001"],display:[Pe,ke]},tlt:{format:["000000",Pe,ke,Gd,"110010"],display:[Pe,ke]},tlti:{format:["000001",Pe,"01010",Ct],display:[Pe,Ct]},tltiu:{format:["000001",Pe,"01011",d0],display:[Pe,d0]},tltu:{format:["000000",Pe,ke,Gd,"110011"],display:[Pe,ke]},tne:{format:["000000",Pe,ke,Gd,"110110"],display:[Pe,ke]},tnei:{format:["000001",Pe,"01110",Ct],display:[Pe,Ct]},"trunc.l.fmt":{format:["010001",gn,"00000",Mt,Kt,"001001"],fmts:["S","D"],display:[Kt,Mt]},"trunc.w.fmt":{format:["010001",gn,"00000",Mt,Kt,"001101"],fmts:["S","D"],display:[Kt,Mt]},xor:{format:["000000",Pe,ke,Ut,"00000","100110"],display:[Ut,Pe,ke]},xori:{format:["001110",Pe,ke,d0],display:[ke,Pe,d0]}},FM="([A-Za-z0-3.]+)",_H="(-)?0?([xbo]?)([A-Fa-f0-9]+)",xH="\\$?(\\w+)",vH="\\$?[Ff]([0-9]+)",wH=new RegExp("^\\s*"+FM),yx=Object.create(null);function d3(n){const e=wH.exec(n);if(e){const t=e[1].split(".");if(t.length===1)return t[0].toLowerCase();let r="",i=!1,a=!1;for(let o=t.length-1;o>0;o--){let s=t[o];i||(s==="fmt"||cH(s))&&(i=!0,s="fmt"),a||fH(s)&&(a=!0,s="cond"),r="."+s+r}return(t[0]+r).toLowerCase()}return null}function yH(n,e){if(yx[n])return yx[n];const t=[FM],r=e.display;for(let o=0;o<r.length;o++){const s=r[o],l=s.endsWith("?");let c="";if(l&&(c+="(?:[,\\s]+"),r[o+1]==="("){if(l)throw new Error("Not prepared to generate optional regex with parenthesis");if(r[o+3]!==")")throw new Error("Not prepared to generate regex for multiple values in parenthesis");c+=EH(Ex(s),Ex(r[o+2])),o=o+3}else c+=Ex(s);l&&(c+=")?"),t.push(c)}let i="^\\s*"+t.reduce((o,s,l)=>l===0||CH(s)?o+s:o+"[,\\s]+"+s,"")+"\\s*$";const a=new RegExp(i);return yx[n]=a,a}function Ex(n){if(VH(n))return xH;if(DH(n))return vH;if(d_(n))return _H;throw new Error(`Unrecognized display entry ${n}`)}function EH(n,e){return n+"\\s*\\(?"+e+"\\)?"}function CH(n){return n.startsWith("(?:")}function VH(n){if(!n)return!1;switch(n.substr(0,2)){case"rs":case"rt":case"rd":return!0}return!1}function DH(n){if(!n)return!1;switch(n.substr(0,2)){case"fs":case"ft":case"fd":return!0}return!1}function en(n,e){if(e=FH(e),Array.isArray(n))return n.map(t=>eS(t,e));if(typeof n=="object")return eS(n,e);if(typeof n=="string"){const t=n.split(/\r?\n/).filter(r=>!!r.trim());return t.length===1?eS(t[0],e):t.map(r=>eS(r,e))}throw new Error("Unexpected input to parse. Pass a string or array of strings.")}function FH(n){return Object.assign({intermediate:!1},n)}function eS(n,e){let t,r,i;if(typeof n=="string"){if(t=d3(n),!t)throw new Error(`Could not parse opcode from ${n}`);if(r=a8(t),!r)throw new Error(`Opcode ${t} was not recognized`);i=TH(t,r,n)}else if(typeof n=="object"){if(t=d3(n.op),!t)throw new Error("Object input to parse did not contain 'op'");if(r=a8(t),!r)throw new Error(`Opcode ${t} was not recognized`);i=n}return e.intermediate?i:bH(r.format,i)}function TH(n,e,t){let i=yH(n,e).exec(t);if(!i)throw new Error(`Could not parse instruction: ${t}`);let a={op:n};(n.indexOf(".fmt")!==-1||n.indexOf(".cond")!==-1)&&PH(i[1],n,e.fmts,e.format,a);const o=e.display;let s=2;for(let l=0;l<o.length;l++,s++){const c=i[s];let d=o[l];const h=d.endsWith("?");switch(h&&(d=d.replace("?","")),d){case"(":case")":s--;continue;case"rs":case"rd":case"rt":{const m=aH(c);if(m===void 0){if(h)continue;throw new Error(`Unrecognized ${d} register ${c}`)}a[d]=m;continue}case"fs":case"ft":case"fd":case"fr":if(a[d]=parseInt(c),isNaN(a[d]))throw new Error(`Unrecognized ${d} register ${c}`);continue}const f=d_(d);if(f){let m;const g=[i[s],i[s+1],i[s+2]];if(!h||g[2]){if(m=hH(g,f.bits,f.signed,f.shift),isNaN(m))throw new Error(`Could not parse immediate ${g.join("")}`);a[d]=m}s+=2;continue}throw new Error(`Unrecognized opcode display entry ${d}`)}return a}function bH(n,e){let t=0,r=0;for(let i=0;i<n.length;i++){let a,o=n[i],s=iA(Array.isArray(o)?o[0]:o);if(t=t<<s>>>0,Array.isArray(o)){for(let l=0;l<o.length;l++)if(a=A3(o[l],t,e),a.wrote){t=a.output;break}}else a=A3(o,t,e),a.wrote&&(t=a.output);r+=s}if(r!=32)throw new Error("Incorrect number of bits written for format "+n);return t}function A3(n,e,t){let r=!1;if(Bh(n))e|=VM(n),r=!0;else if(t[n]!==void 0){let i=t[n]&i8(iA(n));r=!0,e|=i}return{wrote:r,output:e>>>0}}function PH(n,e,t,r,i){const a=n.split("."),o=e.split(".");if(a.length!==o.length)throw new Error(`Given opcode ${n} does not have all pieces (${e})`);for(let s=0;s<o.length;s++){const l=o[s];if(l==="fmt"||l==="ftm3"){if(t.indexOf(a[s].toUpperCase())===-1)throw new Error(`Format ${a[s]} is not allowed for ${l}. Allowed values are ${t}`);l==="fmt"?i.fmt=EM(a[s]):l==="fmt3"&&(i.fmt3=CM(a[s]))}l==="cond"&&(i.cond=dH(a[s]))}}function RH(n,e){if(e=LH(e),Array.isArray(n))return n.map(i=>Cx(i,e));const t=n instanceof ArrayBuffer;if(t||n instanceof DataView){const i=t?new DataView(n):n,a=[];for(let o=0;o<i.byteLength;o+=4)a.push(Cx(i.getUint32(o),e));return a}const r=typeof n;if(r==="number"||r==="object")return Cx(n,e);throw new Error("Unexpected input to print.")}function LH(n){return Object.assign({casing:"toUpperCase",commas:!1,include$:!1,intermediate:!1,numBase:16},n)}function Cx(n,e){let t,r,i;if(typeof n=="number"){if(r=SH(n),!r)throw new Error("Unrecognized instruction");t=a8(r),i=MH(n,t.format),i.op=r}else if(typeof n=="object"){if(!n.op)throw new Error("Instruction object did not contain op");t=a8(n.op),i=n}else throw new Error(`Unexpected value ${n}`);if(!t)throw new Error("Invalid opcode");return e.intermediate?i:BH(i,t,e)}function BH(n,e,t){let r=kH(n,t);function i(o){switch(o){case"rs":case"rt":case"rd":return oH(n[o]);case"fs":case"ft":case"fd":return sH(n[o])}}const a=e.display;for(let o=0;o<a.length;o++){let s=a[o];if(s.endsWith("?")&&(s=s.replace("?",""),n[s]===void 0))continue;let l=n[s];if(l===void 0&&s!=="("&&s!==")")throw new Error(`Expected ${s} value, got undefined`);let c=t.commas;switch(s){case"rs":case"rt":case"rd":case"fs":case"ft":case"fd":r.endsWith("(")||(r+=" "),r+=OH(i(s),t);break;case"(":case")":c=!1,r.endsWith(",")&&(r=r.slice(0,-1)),r+=s;break}const d=d_(s);d&&(r.endsWith("(")||(r+=" "),d.signed&&d.bits===16&&(l=DM(l)),d.shift&&(l=l<<d.shift),r+=IH(l,t)),c&&o!==a.length-1&&!r.endsWith(",")&&(r+=",")}return r.trim()}function MH(n,e){let t={};for(let r=e.length-1;r>=0;r--){let i,a,o=e[r];if(Array.isArray(o))for(let s=o.length-1;s>=0;s--)if(a=iA(o[s]),i=n&i8(a),Bh(o[s])){if(o[s]===Hw(i.toString(2),a)){o=o[s];break}}else{o=o[s];break}else a=iA(o),i=n&i8(a);if(Bh(o)){n>>>=a;continue}t[o]=i,n>>>=a}return t}function IH(n,e){if(n===0)return n.toString(e.numBase);let t="";return n<0&&(t+="-"),e.numBase===16?t+="0x":e.numBase===8?t+="0o":e.numBase===2&&(t+="0b"),t+=Y4(Math.abs(n).toString(e.numBase),e.casing),t}function OH(n,e){let t="";return e.include$&&(t+="$"),t+=Y4(n,e.casing),t}function kH(n,e){const t=n.op.split(".");for(let i=0;i<t.length;i++)if(t[i]==="fmt")if(n.hasOwnProperty("fmt3"))t[i]=uH(n.fmt3);else if(n.hasOwnProperty("fmt"))t[i]=lH(n.fmt);else throw new Error("Format value not available");else if(t[i]==="cond")if(n.hasOwnProperty("cond"))t[i]=AH(n.cond);else throw new Error("Condition value not available");let r=t.join(".");return Y4(r,e.casing)}function Y4(n,e){switch(e){case"toLowerCase":return n.toLowerCase();case"toUpperCase":default:return n.toUpperCase()}}function A_(n){let e=n&65535,t=n>>>16;return e&32768&&(t+=1),[t,e]}function kc(n,e){return n=n&65535,e=e&65535,e&32768&&(n-=1),(n<<16|e)&2147483647}function TM(n,e){let t=e+4;for(;n.getUint32(t)!==65011720&&t<e+8192;)t+=4;if(n.getUint32(t)===65011720)t+=8;else return null;return t-e}function NH(n,e){const t=en(`JAL ${e}`),r=[];for(let i=0;i<n.byteLength;i+=4)n.getUint32(i)===t&&r.push(i);return r}function UH(n,e,t){const r=en(`JAL ${t}`),i=[];for(let a=e;a<n.byteLength;a+=4){const o=n.getUint32(a);if(o===65011720)break;o===r&&i.push(a)}return i}let Eu={};Eu[Qe.MP1_USA]=[{upper:87974,lower:87978},{upper:245782,lower:245790}];Eu[Qe.MP1_JPN]=[{upper:87766,lower:87770},{upper:245554,lower:245562}];Eu[Qe.MP1_PAL]=[{upper:90358,lower:90362},{upper:251962,lower:251966}];Eu[Qe.MP2_USA]=[{upper:268006,lower:268014}];Eu[Qe.MP2_JPN]=[{upper:265610,lower:265618}];Eu[Qe.MP3_USA]=[{upper:221598,lower:221606}];Eu[Qe.MP3_JPN]=[{upper:221578,lower:221586}];let bn;function Hd(n){switch(n){case 0:case 1:case 5:return 8;case 2:case 3:case 4:return 12}throw new Error(`_getFileHeaderSize(${n}) not handled`)}class dt{static getROMOffset(){let e=bt.getDataView(),t=dt.getPatchOffsets();if(!t)return null;let r=t[0],i=e.getUint16(r.upper)<<16,a=e.getUint16(r.lower),o=i|a;if(a&32768&&(o=o-65536),wt(`MainFS.getROMOffset -> ${At(o)}`),Hn())for(let s=1;s<t.length;s++){let l=e.getUint16(t[s].upper)<<16,c=e.getUint16(t[s].lower);if(l!==i||c!==a)throw new Error(`MainFS.getROMOffset patch offset ${s} seems wrong`)}return o}static setROMOffset(e,t){let r=new DataView(t),i=dt.getPatchOffsets();const[a,o]=A_(e);for(let s=0;s<i.length;s++)r.setUint16(i[s].upper,a),r.setUint16(i[s].lower,o);wt(`MainFS.setROMOffset -> ${At(kc(a,o))}`)}static getPatchOffsets(){return Eu[bt.getROMGame()]}static get(e,t){return bn[e][t].decompressed}static has(e,t){return!!bn[e][t]}static read(e,t,r){let i=bt.getROMBuffer(),a=dt.getROMOffset(),o=new DataView(i,a),s=a+o.getUint32(4*(1+e)),l=new DataView(i,s),c=s+l.getUint32(4*(1+t)),d=new DataView(i,c),h=d.getUint32(0),f=d.getUint32(4),m=c+Hd(f),g=new DataView(i,m),x={compressionType:f,decompressedSize:h,decompressed:s_(f,g,h)};if(Hn()&&h!==x.decompressed.byteLength)throw new Error(`MainFS Dir: ${e}, File: ${t} decompressed size mismatch`);if(r){let E=x.decompressed.compressedSize;x.compressed=i.slice(m,m+E)}return x}static write(e,t,r){let i=bn[e][t];if(!i)wt(`Adding new file to MainFS: ${e}/${t}`),bn[e][t]=i={compressionType:0};else if(r!==i.decompressed&&lM(r,i.decompressed))return;i.compressed&&(delete i.decompressedSize,delete i.compressed,i.compressionType=0),i.decompressed=r.slice(0)}static clearCache(){bn=null}static extract(){let e,t;Hn()&&window.performance&&(e=performance.now());let r=dt.getDirectoryCount();bn=new Array(r);for(let i=0;i<r;i++){let a=dt.getFileCount(i);bn[i]=new Array(a);for(let o=0;o<a;o++)bn[i][o]=dt.read(i,o,!0)}return Hn()&&e&&(t=performance.now(),wt(`MainFS.extract() -> ${t-e}ms`)),bn}static extractAsync(){return new Promise(e=>{dt.extract(),e()})}static pack(e,t=0){let r=new DataView(e,t),i=dt.getDirectoryCount();r.setUint32(0,i);let a=4,o=4+i*4;for(let s=0;s<i;s++)r.setUint32(a,o),a+=4,o=dt._writeDir(s,r,o),o=_0(o,2);return o}static _writeDir(e,t,r){let i=dt.getFileCount(e);t.setUint32(r,i);let a=r+4,o=r+4+i*4;for(let s=0;s<i;s++)t.setUint32(a,o-r),a+=4,o=dt._writeFile(e,s,t,o),o=_0(o,2);return o}static _writeFile(e,t,r,i){let a=bn[e][t],o=!!tr(In.writeDecompressed);if(a){r.setUint32(i,a.decompressedSize||a.decompressed.byteLength);let s=o?0:a.compressionType;r.setUint32(i+4,s);let l=i+8;Hd(s)===12&&(r.setUint32(i+8,a.decompressedSize||a.decompressed.byteLength),l+=4);let c;return o?c=a.decompressed:c=a.compressed||a.decompressed,fr(r,c,l,0,c.byteLength),l+c.byteLength}else{r.setUint32(i,0),r.setUint32(i+4,0);let s=i+8;return Hd(0)===12&&(r.setUint32(i+8,0),s+=4),s}}static getDirectoryCount(){if(bn)return bn.length;const e=bt.getROMBuffer();return new DataView(e,dt.getROMOffset()).getUint32(0)}static getFileCount(e){if(bn&&bn[e])return bn[e].length;const t=bt.getROMBuffer(),r=dt.getROMOffset(),i=new DataView(t,r),a=r+i.getUint32(4*(1+e));return new DataView(t,a).getUint32(0)}static getByteLength(){const e=bn.length,t=!!tr(In.writeDecompressed);let r=0;r+=4,r+=4*e;for(let i=0;i<e;i++){const a=bn[i].length;r+=4,r+=4*a;for(let o=0;o<a;o++){const s=bn[i][o];s?(r+=Hd(t?0:s.compressionType),s.compressed&&!t?r+=s.compressed.byteLength:r+=s.decompressed.byteLength,r=_0(r,2)):r+=Hd(0)}}return r}static getCompressedSize(e,t){return bn&&bn[e][t]&&bn[e][t].compressed?bn[e][t].compressed.byteLength:0}static getFileHeaderSize(e,t){return bn&&bn[e][t]&&typeof bn[e][t].compressionType=="number"?Hd(bn[e][t].compressionType):8}}const f3=Object.create(null),jH={};function ln(n,e){if(f3[n])throw new Error(`Cannot create an already existing BoardInfo ${n}.`);const t=Object.create(jH);return e&&Object.assign(t,e),f3[n]=t,t}const bg={name:"Test Info",boardDefFile:1,bgDir:1,str:{},img:{}};let tS=null;function GH(n){let e=n.getUint32(0),t=(e&4294967040)===1213616384;if(e===3){let a=new DataView(n.buffer,8),o=n.getUint32(4);return s_(3,a,o)}if(!t)return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if(!tS){tS=new ArrayBuffer(6144);for(var r=new DataView(tS),i=0;i<6144/2;i++)r.setUint16(i*2,1)}return tS}function HH(n,e,t){const r=bt.getGameVersion();if(r===null)throw new Error("HVQ encode not implemented");if(r>1){let i=fM(3,new DataView(n)),a=new ArrayBuffer(i.byteLength+8),o=new DataView(a);return o.setUint32(0,3),o.setUint32(4,n.byteLength),fr(o,i,8,0,i.byteLength),a}return n}function Mh(n,e,t,r,i){let a=e*r,o=t*i,s=new ArrayBuffer(a*o),l=new DataView(s),c,d,h,f,m,g,x,E;for(let _=0;_<o;_++){d=_%i,f=Math.floor(_/i)*e,g=d*r,E=_*a;for(let v=0;v<a;v+=4)c=v%r,h=f+Math.floor(v/r),m=g+c,x=E+v,l.setUint32(x,n[h].getUint32(m))}return s}function q4(n,e,t,r,i){let a=e*r,o=t*i,s=[],l=[],c=e*t;for(let f=0;f<c;f++)s.push(new ArrayBuffer(r*i)),l.push(new DataView(s[f]));let d,h;for(let f=0;f<o;f++){h=Math.floor(f/i)*e;for(let m=0;m<a;m++){d=h+Math.floor(m/r);let g=m%r,E=f%i*r+g,_=f*a+m;l[d].setUint8(E,n[_])}}return s}function Tp(n,e,t){const r=new ArrayBuffer(e*t*4),i=new Uint8Array(r),a=new DataView(n);let o=0;for(let s=0;s<e*t;s++){const l=a.getUint16(s*2);i[o]=((l&63488)>>>11)*8,i[o+1]=((l&1984)>>>6)*8,i[o+2]=((l&62)>>>1)*8,i[o+3]=l&1?255:0,o+=4}return r}function Ih(n,e,t){const r=new ArrayBuffer(e*t*2),i=new DataView(r),a=new Uint8Array(n);let o=0;for(let s=0;s<e*t;s++){let l=a[o]/8;l<<=11;let c=a[o+1]/8;c<<=6;let d=a[o+2]/8;d<<=1;const h=a[o+3]>>>7;i.setUint16(s*2,(l|c|d|h)&65535),o+=4}return r}let bp={},$0,Vf;bp[Qe.MP1_USA]=[{upper:357926,lower:357930},{upper:380946,lower:380950},{ovl:1,upper:566,lower:574},{ovl:63,upper:2774,lower:2782},{ovl:64,upper:23038,lower:23046},{ovl:65,upper:1826,lower:1834},{ovl:66,upper:14490,lower:14498},{ovl:67,upper:15970,lower:15978},{ovl:68,upper:3606,lower:3614},{ovl:69,upper:2186,lower:2194},{ovl:70,upper:10390,lower:10398},{ovl:71,upper:2230,lower:2238},{ovl:72,upper:2714,lower:2722},{ovl:73,upper:2730,lower:2738},{ovl:74,upper:5282,lower:5290},{ovl:75,upper:4494,lower:4502},{ovl:76,upper:3774,lower:3782},{ovl:77,upper:4082,lower:4090},{ovl:78,upper:4614,lower:4622},{ovl:79,upper:3822,lower:3830},{ovl:80,upper:1270,lower:1278},{ovl:81,upper:1490,lower:1498},{ovl:82,upper:6726,lower:6734},{ovl:83,upper:2370,lower:2378},{ovl:84,upper:2914,lower:2922},{ovl:85,upper:4350,lower:4358},{ovl:86,upper:1930,lower:1938},{ovl:87,upper:6294,lower:6302},{ovl:89,upper:2218,lower:2226},{ovl:90,upper:3006,lower:3014},{ovl:91,upper:3938,lower:3946},{ovl:92,upper:866,lower:874},{ovl:93,upper:2610,lower:2618},{ovl:94,upper:6042,lower:6050},{ovl:95,upper:1570,lower:1578},{ovl:96,upper:1582,lower:1590},{ovl:97,upper:21754,lower:21762},{ovl:98,upper:11426,lower:11434},{ovl:100,upper:23142,lower:23150},{ovl:101,upper:11470,lower:11478},{ovl:119,upper:10730,lower:10738},{ovl:120,upper:10614,lower:10622},{ovl:121,upper:3582,lower:3590},{ovl:123,upper:9394,lower:9398},{ovl:124,upper:5438,lower:5446},{ovl:125,upper:4842,lower:4850},{ovl:128,upper:7834,lower:7842},{ovl:130,upper:4898,lower:4906}];bp[Qe.MP1_JPN]=[{upper:357526,lower:2},{upper:379858,lower:2},{upper:870598,lower:6},{upper:2462374,lower:6},{upper:2485734,lower:6},{upper:2488530,lower:6},{upper:2604202,lower:6},{upper:2621122,lower:6},{upper:2625478,lower:6},{upper:2628346,lower:6},{upper:2639334,lower:6},{upper:2641942,lower:6},{upper:2644794,lower:6},{upper:2647770,lower:6},{upper:2653298,lower:6},{upper:2658142,lower:6},{upper:2662286,lower:6},{upper:2666690,lower:6},{upper:2671526,lower:6},{upper:2675726,lower:6},{upper:2677334,lower:6},{upper:2679090,lower:6},{upper:2685974,lower:6},{upper:2688866,lower:6},{upper:2692082,lower:6},{upper:2696782,lower:6},{upper:2699034,lower:6},{upper:2705462,lower:6},{upper:2708010,lower:6},{upper:2711338,lower:6},{upper:2715646,lower:6},{upper:2716770,lower:6},{upper:2719490,lower:6},{upper:2725790,lower:6},{upper:2727746,lower:6},{upper:2729598,lower:6},{upper:2752006,lower:6},{upper:2770646,lower:6},{upper:2844246,lower:6},{upper:2856686,lower:6},{upper:3132114,lower:6},{upper:3143158,lower:6},{upper:3147502,lower:6},{upper:3167842,lower:2},{upper:3183310,lower:6},{upper:3197802,lower:6},{upper:3226138,lower:6},{upper:3238402,lower:6}];bp[Qe.MP2_USA]=[{upper:347090,lower:347098},{upper:408118,lower:408126},{upper:478570,lower:478574},{ovl:63,upper:154,lower:162},{ovl:64,upper:150,lower:158},{ovl:66,upper:154,lower:162},{ovl:68,upper:154,lower:162},{ovl:70,upper:158,lower:166},{ovl:72,upper:162,lower:170},{ovl:74,upper:154,lower:162},{ovl:77,upper:3602,lower:3610},{ovl:78,upper:174,lower:182},{ovl:79,upper:166,lower:174},{ovl:80,upper:166,lower:174},{ovl:81,upper:22522,lower:22530},{ovl:82,upper:13326,lower:13334},{ovl:83,upper:154,lower:162},{ovl:84,upper:3950,lower:3958},{ovl:85,upper:158,lower:166},{ovl:98,upper:206,lower:214},{ovl:109,upper:14818,lower:14826},{ovl:110,upper:5558,lower:5566},{ovl:112,upper:7002,lower:7010},{ovl:114,upper:30,lower:38}];bp[Qe.MP3_USA]=[{ovl:129,upper:73318,lower:73326},{ovl:129,upper:153366,lower:153374},{ovl:128,upper:77898,lower:77906},{ovl:128,upper:138886,lower:138894},{ovl:79,upper:25386,lower:25394},{ovl:80,upper:14662,lower:14670},{ovl:81,upper:6754,lower:6762},{ovl:83,upper:13170,lower:13178},{ovl:84,upper:7126,lower:7134},{ovl:98,upper:20950,lower:20958},{ovl:100,upper:14346,lower:14354},{ovl:101,upper:12106,lower:12114},{ovl:110,upper:41914,lower:41918},{ovl:113,upper:5682,lower:5690},{ovl:115,upper:298,lower:306},{ovl:116,upper:1374,lower:1382},{ovl:122,upper:10058,lower:10066},{ovl:124,upper:30842,lower:30846},{ovl:125,upper:6382,lower:6390},{ovl:125,upper:10422,lower:10430}];const Z0={getROMOffset(){let n=this.getPatchOffsets();if(!n)return null;let e=n[0];if(!e)return null;let t=e.upper,r=e.lower,i,a;if(typeof e.ovl=="number"){const s=l0.getDataView(e.ovl);i=s.getUint16(t),a=s.getUint16(r)}else{const s=bt.getDataView();i=s.getUint16(t),a=s.getUint16(r)}const o=kc(i,a);if(Hn())for(let s=1;s<n.length;s++){const l=n[s];let c=l.upper,d=l.lower,h,f;if(typeof l.ovl=="number"){const m=l0.getDataView(l.ovl);h=m.getUint16(c),f=m.getUint16(d)}else{const m=bt.getDataView();h=m.getUint16(c),f=m.getUint16(d)}if(h!==i||f!==a)throw new Error(`HVQFS.getROMOffset patch offset ${s} seems wrong:
          offset: ${At(o)} vs ${At(h>>>16)+At(f,"")}
          reading upper: ${At(c)}, lower: ${At(d)}`)}return o},setROMOffset(n,e){wt(`HVQFS.setROMOffset(${At(n)})`);let t=this.getPatchOffsets();const[r,i]=A_(n);for(let a=0;a<t.length;a++){const o=t[a];let s=o.upper,l=o.lower;if(typeof o.ovl=="number"){const c=l0.getDataView(o.ovl);c.setUint16(s,r),c.setUint16(l,i)}else{const c=new DataView(e);c.setUint16(s,r),c.setUint16(l,i)}}wt(`HVQFS.setROMOffset -> ${At(r<<16|i)}`)},getPatchOffsets(){const n=bp[bt.getROMGame()];return n?n.map(e=>e.lower<10&&!e.ovl?{upper:e.upper,lower:e.upper+2+e.lower}:{upper:e.upper,lower:e.lower,ovl:e.ovl}):null},get(n,e){return $0[n][e]},read(n,e){let t=bt.getROMBuffer(),r=this.getROMOffset(),i=new DataView(t,r),a=r+i.getUint32(4*(1+n)),o=new DataView(t,a),s=a+o.getUint32(4*(1+e)),l=a+o.getUint32(4*(1+e+1));return t.slice(s,l)},write(n,e,t){$0[n][e]=t.slice(0)},clearCache(){$0=null,Vf=null},extract(){let n,e;Hn()&&window.performance&&(n=performance.now());let t=this.getDirectoryCount();$0=new Array(t),Vf=new Array(t);for(let r=0;r<t;r++){let i=this.getHVQFileCount(r);$0[r]=new Array(i);for(let a=0;a<i;a++)$0[r][a]=this.read(r,a);this._readMetadata(r)}return Hn()&&n&&(e=performance.now(),wt(`HVQFS.extract() -> ${e-n}ms`)),$0},extractAsync(){return new Promise((n,e)=>{this.extract(),n()})},pack(n,e=0){let t=new DataView(n,e),r=this.getDirectoryCount();t.setUint32(0,r+1);let i=4,a=4+(r+1)*4;for(let o=0;o<r;o++)t.setUint32(i,a),i+=4,a=this._writeBg(o,t,a),a=_0(a,4);return t.setUint32(i,a),a},_writeBg(n,e,t){let r=this.getHVQFileCount(n);e.setUint32(t,r+1),this._writeMetadata(n);let i=t+4,a=t+4+(r+1)*4;for(let o=0;o<r;o++)e.setUint32(i,a-t),i+=4,a=this._writeFile(n,o,e,a),a=_0(a,4);return e.setUint32(i,a-t),a},_writeFile(n,e,t,r){let i=$0[n][e];return fr(t,i,r,0,i.byteLength),r+i.byteLength},_readMetadata(n){let e=new DataView($0[n][0],0);const t={tileWidth:e.getUint32(0),tileHeight:e.getUint32(4),tileCountX:e.getUint32(8),tileCountY:e.getUint32(12),fov:e.getFloat32(16),scaleFactor:e.getFloat32(20),cameraEyePosX:e.getFloat32(24),cameraEyePosZ:e.getFloat32(28),cameraEyePosY:e.getFloat32(32),lookatPointX:e.getFloat32(36),lookatPointZ:e.getFloat32(40),lookatPointY:e.getFloat32(44),cameraUpVecX:e.getFloat32(48),cameraUpVecZ:e.getFloat32(52),cameraUpVecY:e.getFloat32(56)};this._setMetadata(n,t)},_writeMetadata(n){let e=new DataView($0[n][0],0);const t=this.getMetadata(n);e.setUint32(0,t.tileWidth),e.setUint32(4,t.tileHeight),e.setUint32(8,t.tileCountX),e.setUint32(12,t.tileCountY),e.setFloat32(16,t.fov),e.setFloat32(20,t.scaleFactor),e.setFloat32(24,t.cameraEyePosX),e.setFloat32(28,t.cameraEyePosZ),e.setFloat32(32,t.cameraEyePosY),e.setFloat32(36,t.lookatPointX),e.setFloat32(40,t.lookatPointZ),e.setFloat32(44,t.lookatPointY),e.setFloat32(48,t.cameraUpVecX),e.setFloat32(52,t.cameraUpVecZ),e.setFloat32(56,t.cameraUpVecY)},_getBgDimensions(n){const e=Vf[n];let t=e.tileWidth*e.tileCountX,r=e.tileHeight*e.tileCountY;return[t,r]},getMetadata(n){return Vf[n]},_setMetadata(n,e){Vf[n]=e},updateMetadata(n,e){const t=this.getMetadata(n);"tileWidth"in e&&(t.tileWidth=e.tileWidth),"tileHeight"in e&&(t.tileHeight=e.tileHeight),"tileCountX"in e&&(t.tileCountX=e.tileCountX),"tileCountY"in e&&(t.tileCountY=e.tileCountY),"fov"in e&&(t.fov=e.fov),"scaleFactor"in e&&(t.scaleFactor=e.scaleFactor),"cameraEyePosX"in e&&(t.cameraEyePosX=e.cameraEyePosX),"cameraEyePosZ"in e&&(t.cameraEyePosZ=e.cameraEyePosZ),"cameraEyePosY"in e&&(t.cameraEyePosY=e.cameraEyePosY),"lookatPointX"in e&&(t.lookatPointX=e.lookatPointX),"lookatPointZ"in e&&(t.lookatPointZ=e.lookatPointZ),"lookatPointY"in e&&(t.lookatPointY=e.lookatPointY),"cameraUpVecX"in e&&(t.cameraUpVecX=e.cameraUpVecX),"cameraUpVecZ"in e&&(t.cameraUpVecZ=e.cameraUpVecZ),"cameraUpVecY"in e&&(t.cameraUpVecY=e.cameraUpVecY),this._setMetadata(n,t)},readBackgroundImgData(n){let e=$0[n].length-1;const t=this.getMetadata(n);let r=t.tileWidth,i=t.tileHeight,a=t.tileCountX,o=t.tileCountY,s=r*a,l=i*o;wt(`HVQFS.readBackground, dir: ${n}, tiles: ${e}, board is ${s}x${l}`);let c=[],h=bt.getGameVersion()===1?1:2;for(let D=h;D<$0[n].length;D++)c.push(new DataView($0[n][D]));let m=c.map(GH).map(D=>new DataView(D)),g=[];for(let D=o-1;D>=0;D--)for(let V=0;V<a;V++)g.push(m[D*a+V]);let x=Mh(g,a,o,r*2,i),E=Tp(x,s,l),_=new Uint8Array(E),C=ko(s,l).createImageData(s,l);for(let D=0;D<_.byteLength;D++)C.data[D]=_[D];return C},readBackground(n){const e=this.getMetadata(n);let[t,r]=this._getBgDimensions(n),i=ko(t,r),a=this.readBackgroundImgData(n);return i.putImageData(a,0,0),Object.assign({},e,{width:t,height:r,src:i.canvas.toDataURL()})},writeBackground(n,e,t,r,i){let a=t/64,o=r/48,s=a*o;wt(`HVQFS.writeBackground, dir: ${n}, img is ${t}x${r}`);let d=q4(e.data,a,o,64*4,48).map(m=>Ih(m,64,48)).map(m=>HH(m)),h=[];for(let m=o-1;m>=0;m--)for(let g=0;g<a;g++)h.push(d[m*a+g]);const f=bt.getGameVersion();if(!$0[n]){if(!i)throw new Error("Cannot write a new HVQ background without metadata");$0[n]=[],f>1?($0[n][0]=$0[3][0],$0[n][1]=$0[3][1]):$0[n][0]=$0[0][0],this._readMetadata(n)}if(i&&this.updateMetadata(n,i),f===1)for(let m=1;m<=s;m++)$0[n][m]=h[m-1];else for(let m=2;m<=s+1;m++)$0[n][m]=h[m-2]},getDirectoryCount(){if($0)return $0.length;let n=bt.getROMBuffer(),e=this.getROMOffset();return e===null?0:new DataView(n,e).getUint32(0)-1},getHVQFileCount(n){if($0&&$0[n])return $0[n].length;let e=bt.getROMBuffer(),t=this.getROMOffset();if(t===null)return 0;let r=new DataView(e,t),i=t+r.getUint32(4*(1+n));return new DataView(e,i).getUint32(0)-1},getByteLength(){let n=0,e=$0.length;n+=4,n+=4*(e+1);for(let t=0;t<e;t++){let r=$0[t].length;n+=4,n+=4*(r+1);for(let i=0;i<r;i++)n+=$0[t][i].byteLength,n=_0(n,4)}return n}};function o8(n,e,t,r){let i=n;i instanceof DataView||(i=new DataView(i));const a=i.byteLength*(r/t),o=new ArrayBuffer(a),s=new DataView(o);let l=0,c=0,d;const h=r/8,f="setUint"+r;for(;c<a;)if(t===8)d=i.getUint8(l),s[f](c,ec(e,d)),l+=1,c+=h;else if(t===4)d=(i.getUint8(l)&240)>>4,s[f](c,ec(e,d)),c+=h,d=i.getUint8(l)&15,s[f](c,ec(e,d)),c+=h,l+=1;else if(t===2)d=(i.getUint8(l)&192)>>6,s[f](c,ec(e,d)),c+=h,d=(i.getUint8(l)&48)>>4,s[f](c,ec(e,d)),c+=h,d=(i.getUint8(l)&12)>>2,s[f](c,ec(e,d)),c+=h,d=i.getUint8(l)&3,s[f](c,ec(e,d)),c+=h,l+=1;else throw new Error(`Cannot decode palette with bpp: ${t}`);return o}function Q4(n,e,t){let r=n;r instanceof DataView||(r=new DataView(r));const i={colors:[],bpp:e},a={},o=e/8,s="getUint"+e;let l=0;for(;l<n.byteLength;){const m=r[s](l);if(a.hasOwnProperty(m.toString(16))){l+=o;continue}a[m.toString(16)]=i.colors.length,i.colors.push(m),l+=o}const c=new ArrayBuffer(n.byteLength/o*(t/8)),d=new DataView(c),h="setUint"+t;let f=0;for(l=0;f<c.byteLength;)if(t===8){const m=r[s](l),g=a[m.toString(16)];d[h](f,g),l+=o,f++}else throw new Error(`Cannot encode palette with bpp: ${t}`);return[c,i]}function ec(n,e){if(e>=n.length)throw new Error(`Invalid palette access (index ${e} of palette length ${n.length})`);return n[e]}function zH(n,e,t,r){const i=new ArrayBuffer(e*t*4),a=new Uint8Array(i),o=new DataView(n);let s=0;for(let c=0;c<e*t;c++){var l;if(r===8)l=o.getUint8(c);else if(r===4)l=o.getUint8(c/2)&(c%2?15:240),c%2===0&&(l>>=4,l=l&15),l=l/15*255;else throw new Error("bpp must be 4 or 8");a[s]=l,a[s+1]=l,a[s+2]=l,a[s+3]=255,s+=4}return i}function xc(n){let e=new DataView(n),t=e.getUint32(0),r=e.getUint32(12),i=e.getUint16(16),a=e.getUint8(25),o=r!==e.byteLength,s=[];if(o)for(;r!==e.byteLength;)s.push(e.getUint16(r)),r+=2;let l=[],c=t,d=new DataView(n,c);for(var h=0;h<i;h++){let f=d.getUint32(0),m=d.getUint16(4),g=d.getUint16(6),x;a>=8?x=a*m*g/8:x=m*g/(8/a);let E=n.slice(f,f+x);o&&(E=o8(E,s,a,16));let _={width:m,height:g};a===32?_.src=E:a===16||o?_.src=Tp(E,m,g):(a===4||a===8)&&(_.src=zH(E,m,g,a)),l.push(_),c+=12,d=new DataView(n,c)}return l}function Pr(n,e,t,r){let i=WH(n,e),a,o;t&&([a,o]=Q4(n[0].src,n[0].bpp,8),n[0]._bmpData=a,i+=o.colors.length*(e/t),i-=n[0].src.byteLength-a.byteLength);let s=new ArrayBuffer(i),l=new DataView(s),c;r&&(c=new DataView(r)),l.setUint32(0,32),l.setUint32(4,44),l.setUint32(8,44),o?l.setUint32(12,i-o.colors.length*(e/t)):l.setUint32(12,i),l.setUint16(16,n.length),l.setUint16(18,0);let d=0,h=0;for(let m=0;m<n.length;m++)d+=n[m].width,h+=n[m].height;if(l.setUint16(20,d),l.setUint16(22,h),c?l.setUint8(24,c.getUint8(24)):l.setUint8(24,0),l.setUint8(25,t||e),o){l.setUint8(26,o.colors.length);let m=i-o.colors.length*(e/t);for(let g=0;g<o.colors.length;g++)l.setUint16(m+g*2,o.colors[g])}let f=32;for(let m=0;m<n.length;m++)f=XH(l,f,n[m],e,c);return s}function WH(n,e){let t=32;for(let r=0;r<n.length;r++)t+=12,n[r].bpp===e?t+=n[r].src.byteLength:n[r].bpp===32&&e===16&&(t+=n[r].src.byteLength/2);return t}function XH(n,e,t,r,i){n.setUint32(e,e+12),n.setUint16(e+=4,t.width),n.setUint16(e+=2,t.height),i?(n.setUint32(e+=2,i.getUint32(e)),e+=4):(n.setUint16(e+=2,t.width/2),n.setUint16(e+=2,t.height/2),e+=2);let a;if(t._bmpData)a=new DataView(t._bmpData);else if(t.bpp===r)a=new DataView(t.src);else if(t.bpp===32&&r===16){let o=Ih(t.src,t.width,t.height);a=new DataView(o)}else throw new Error(`Cannot create ImgPack (yet) with inBpp=${t.bpp} and outBpp=${r}.`);return fr(n,a,e,0,a.byteLength),e+a.byteLength}const Pg=ln("MP1_USA_DK",{name:"DK's Jungle Adventure",canOverwrite:!0,boardDefFile:69,bgDir:0,pauseBgDir:4,sceneIndex:54,mainfsEventFile:[10,422],mainfsBoardFile:[10,423],koopaSpaceInst:3412,bowserSpaceInst:3256,boosLoopFnOffset:4568,boosReadbackFnOffset:4304,starSpaceArrOffset:13088,starSpaceCount:7,toadSpaceArrOffset:[13104,13128],audioIndexOffset:3006,str:{boardSelect:652,koopaIntro:571,starComments:[286,287,288,289,290,291,292]},img:{boardSelectImg:17,pauseLogoImg:276,introLogoImg:[356,357],introLogoImgDimens:[272,112],titleScreenImg:385},onLoad:function(n){n.otherbg.largescene=Z0.readBackground(Pg.bgDir+1).src,n.otherbg.conversation=Z0.readBackground(Pg.bgDir+2).src,n.otherbg.splashscreen=Z0.readBackground(Pg.bgDir+6).src},onAfterOverwrite:function(){const n=l0.getDataView(98);n.setUint32(28824,3313106944),n.setUint32(28828,0),n.setUint32(28832,0);let e=[];e=e.concat(Bt._strToBytes(`You're looking for Stars?
How about this instead...`)),e.push(255),e.push(0);const t=hi(e);Bt.write(396,t),Bt.write(399,t),Bt.write(402,t)}}),Rg=ln("MP1_USA_PEACH",{name:"Peach's Birthday Cake",canOverwrite:!0,boardDefFile:70,bgDir:7,pauseBgDir:14,str:{boardSelect:653,koopaIntro:572},img:{boardSelectImg:20,pauseLogoImg:277,introLogoImg:[359],introLogoImgDimens:[284,126],titleScreenImg:382},sceneIndex:55,mainfsEventFile:[10,424],mainfsBoardFile:[10,425],eventASMStart:0,koopaSpaceInst:1984,bowserSpaceInst:2440,goombaSpaceInst:2304,onLoad:function(n){n.otherbg.largescene=Z0.readBackground(Rg.bgDir+1).src,n.otherbg.conversation=Z0.readBackground(Rg.bgDir+2).src,n.otherbg.splashscreen=Z0.readBackground(Rg.bgDir+10).src},onAfterOverwrite:function(n){const e=dt.get(10,360),t=[{src:new ArrayBuffer(250*50*4),width:250,height:50,bpp:32}],r=Pr(t,16,0,e);dt.write(10,360,r)}}),Lg=ln("MP1_USA_YOSHI",{name:"Yoshi's Tropical Island",canOverwrite:!0,boardDefFile:71,bgDir:18,pauseBgDir:25,str:{boardSelect:654,koopaIntro:573},img:{boardSelectImg:18,pauseLogoImg:278,introLogoImg:[362],introLogoImgDimens:[270,120],titleScreenImg:383},sceneIndex:56,mainfsEventFile:[10,426],mainfsBoardFile:[10,427],onLoad:function(n){n.otherbg.largescene=Z0.readBackground(Lg.bgDir+1).src,n.otherbg.conversation=Z0.readBackground(Lg.bgDir+2).src,n.otherbg.splashscreen=Z0.readBackground(Lg.bgDir+8).src},onAfterOverwrite:function(n){const e=dt.get(10,363),t=[{src:new ArrayBuffer(208*40*4),width:208,height:40,bpp:32}],r=Pr(t,16,0,e);dt.write(10,363,r)}}),Bg=ln("MP1_USA_WARIO",{name:"Wario's Battle Canyon",canOverwrite:!0,boardDefFile:72,bgDir:27,pauseBgDir:36,str:{boardSelect:655,koopaIntro:574},img:{boardSelectImg:19,pauseLogoImg:279,introLogoImg:[365],introLogoImgDimens:[290,114],titleScreenImg:384},sceneIndex:57,mainfsEventFile:[10,428],mainfsBoardFile:[10,429],koopaSpaceInst:3792,bowserSpaceInst:3496,boosLoopFnOffset:4508,boosReadbackFnOffset:4244,starSpaceArrOffset:12864,starSpaceCount:7,toadSpaceArrOffset:[12880,12912],onLoad:function(n){n.otherbg.largescene=Z0.readBackground(Bg.bgDir+1).src,n.otherbg.conversation=Z0.readBackground(Bg.bgDir+2).src,n.otherbg.splashscreen=Z0.readBackground(Bg.bgDir+11).src},onAfterOverwrite:function(n){const e=dt.get(10,366),t=[{src:new ArrayBuffer(280*76*4),width:280,height:76,bpp:32}],r=Pr(t,16,0,e);dt.write(10,366,r)}}),Ho=ln("MP1_USA_LUIGI");Ho.name="Luigi's Engine Room";Ho.boardDefFile=73;Ho.bgDir=39;Ho.str={boardSelect:656,koopaIntro:575};Ho.img={boardSelectImg:21,pauseLogoImg:280,introLogoImg:[368],introLogoImgDimens:[276,128],titleScreenImg:381};Ho.sceneIndex=58;Ho.eventASMStart=0;Ho.starSpaceArrOffset=12128;Ho.starSpaceCount=7;Ho.toadSpaceArrOffset=[12144,12276];const Cu=ln("MP1_USA_MARIO");Cu.name="Mario's Rainbow Castle";Cu.boardDefFile=74;Cu.bgDir=47;Cu.str={boardSelect:657,koopaIntro:576};Cu.img={boardSelectImg:22,pauseLogoImg:281,introLogoImg:[371],introLogoImgDimens:[270,96],titleScreenImg:380};Cu.sceneIndex=59;Cu.eventASMStart=0;const zo=ln("MP1_USA_BOWSER");zo.name="Bowser's Magma Mountain";zo.boardDefFile=75;zo.bgDir=56;zo.str={boardSelect:658,koopaIntro:577};zo.img={boardSelectImg:23,pauseLogoImg:282,introLogoImg:[374],introLogoImgDimens:[270,106]};zo.sceneIndex=60;zo.eventASMStart=0;zo.starSpaceArrOffset=8856;zo.starSpaceCount=7;zo.toadSpaceArrOffset=[8872,8904];const co=ln("MP1_USA_ETERNALSTAR");co.name="Eternal Star";co.boardDefFile=76;co.bgDir=68;co.str={boardSelect:[659,660],koopaIntro:578};co.img={boardSelectImg:24,pauseLogoImg:283,introLogoImg:[378]};co.sceneIndex=61;co.eventASMStart=0;co.bowserSpaceInst=3548;co.starSpaceArrOffset=9712;co.starSpaceCount=7;co.toadSpaceArrOffset=9728;const Ao=ln("MP1_USA_TRAINING");Ao.name="Training";Ao.boardDefFile=77;Ao.bgDir=77;Ao.str={};Ao.img={};Ao.sceneIndex=62;Ao.eventASMStart=0;Ao.bowserSpaceInst=812;Ao.toadSpaceInst=364;Ao.koopaSpaceInst=500;Ao.booSpaceInst=676;const EA=ln("MP1_USA_STADIUM");EA.name="Mini-Game Stadium";EA.boardDefFile=83;EA.bgDir=99;EA.str={};EA.img={};const Vu=ln("MP1_USA_ISLAND");Vu.name="Mini-Game Island";Vu.boardDefFile=78;Vu.bgDir=79;Vu.str={};Vu.img={};Vu.sceneIndex=114;Vu.eventASMStart=0;function KH(){return[Pg,Rg,Lg,Bg,Ho,Cu,zo,co,Ao,Vu,EA]}const Du=ln("MP1_JPN_DK");Du.name="DK's Jungle Adventure";Du.boardDefFile=69;Du.bgDir=0;Du.str={boardSelect:652,koopaIntro:571,starComments:[286,287,288,289,290,291,292]};Du.img={boardSelectImg:17,pauseLogoImg:276,introLogoImg:[356,357],titleScreenImg:385};Du.eventASMStart=0;Du.eventASMEnd=0;function YH(){return[Du]}const bM=ln("MP2_WESTERN",{name:"Western Land",canOverwrite:!0,boardDefFile:64,bgDir:2,animBgSet:0,costumeType:dn.WESTERN,str:{boardSelect:197,boardNames:[190,210],boardGreeting:[1248,1249],boardWinner:707,boardPlayCount:1327},img:{introLogoImg:406,pauseLogoImg:380,boardSelectImg:30,boardSelectIconCoords:[39,20],boardSelectIconMask:20},mainfsEventFile:[10,682],mainfsBoardFile:[10,683],sceneIndex:62,eventASMStart:54096,eventASMEnd:60132,spaceEventTables:[{upper:13292,lower:13300},{upper:13304,lower:13312,primary:!0},{upper:13316,lower:13324}],starSpaceArrOffset:[61828,61940],starSpaceCount:7,toadSpaceArrOffset:[61844,62020],bankArrOffset:[62344],bankCoinArrOffset:[62060],bankCount:2,itemShopArrOffset:[62348],itemShopCount:1,booArrOffset:[62056],booCount:2,audioIndexOffset:13226,onLoad:function(n){n.otherbg.largescene=Z0.readBackground(bM.bgDir+2).src},onAfterOverwrite:function(n){l0.getDataView(82).setUint16(11790,81);let t=[];t.push(11),t=t.concat(Bt._strToBytes("Don't listen to Toad!")),t.push(10),t=t.concat(Bt._strToBytes("I've got the results. Follow me!")),t.push(0),Bt.write(697,hi(t));let r=dt.get(10,410),i=[{src:new ArrayBuffer(144*128*4),width:144,height:128,bpp:32}],a=Pr(i,16,0,r);dt.write(10,410,a),r=dt.get(10,411),i=[{src:new ArrayBuffer(32*16*4),width:32,height:16,bpp:32}],a=Pr(i,16,0,r),dt.write(10,411,a),r=dt.get(10,412),i=[{src:new ArrayBuffer(64*64*4),width:64,height:64,bpp:32}],a=Pr(i,16,0,r),dt.write(10,412,a);let o=dt.get(10,394),s=new DataView(o);s.setUint16(508,0),s.setUint16(4358,0),dt.write(10,394,o),o=dt.get(10,395),s=new DataView(o),s.setUint16(516,0),s.setUint16(1558,0),dt.write(10,395,o)}}),gs=ln("MP2_PIRATE");gs.name="Pirate Land";gs.boardDefFile=65;gs.bgDir=10;gs.animBgSet=1;gs.costumeType=dn.PIRATE;gs.str={boardSelect:198};gs.img={introLogoImg:422,pauseLogoImg:381,boardSelectImg:31,boardSelectIconCoords:[35,61]};gs.arrowRotStartOffset=0;gs.arrowRotEndOffset=0;const fo=ln("MP2_HORROR");fo.name="Horror Land";fo.boardDefFile=66;fo.bgDir=21;fo.animBgSet=2;fo.costumeType=dn.HORROR;fo.str={boardSelect:201};fo.img={introLogoImg:581,pauseLogoImg:382,boardSelectImg:32,boardSelectIconCoords:[133,60]};fo.sceneIndex=67;fo.eventASMStart=0;fo.eventASMEnd=0;fo.spaceEventTables=[{upper:14420,lower:14428},{upper:14432,lower:14440},{upper:14488,lower:14496},{upper:14500,lower:14504}];const Fu=ln("MP2_SPACE");Fu.name="Space Land";Fu.boardDefFile=67;Fu.bgDir=24;Fu.animBgSet=3;Fu.costumeType=dn.SPACE;Fu.str={boardSelect:199,boardNames:[193,212]};Fu.img={introLogoImg:500,pauseLogoImg:383,boardSelectImg:33,boardSelectIconCoords:[93,10]};const Zc=ln("MP2_MYSTERY");Zc.name="Mystery Land";Zc.boardDefFile=68;Zc.bgDir=16;Zc.costumeType=dn.MYSTERY;Zc.str={boardSelect:200};Zc.img={introLogoImg:502,pauseLogoImg:384,boardSelectImg:34,boardSelectIconCoords:[139,19]};const Tu=ln("MP2_BOWSER");Tu.name="Bowser Land";Tu.boardDefFile=69;Tu.bgDir=37;Tu.animBgSet=4;Tu.costumeType=dn.NORMAL;Tu.str={boardSelect:202};Tu.img={introLogoImg:547,pauseLogoImg:385,boardSelectImg:35};function qH(){return[bM,gs,fo,Fu,Zc,Tu]}const PM=ln("MP3_CHILLY",{name:"Chilly Waters",canOverwrite:!0,boardDefFile:570,bgDir:3,pauseBgDir:5,str:{boardSelect:[[21,30],[26,17]],boardGreeting:[24,12],boardGreetingDuel:[24,0],boardNames:[[49,39],[83,43]]},img:{boardSelectImg:72,splashLogoImg:22,splashLogoTextImg:28,pauseLogoImg:125,statsLogoImg:[19,105],gateImg:354},sceneIndex:72,mainfsEventFile:[19,618],mainfsBoardFile:[19,619],eventASMStart:84720,eventASMEnd:93164,spaceEventTables:[{upper:9896,lower:9904},{upper:9908,lower:9916},{upper:9932,lower:9940}],starSpaceArrOffset:[96528,96640],starSpaceCount:8,toadSpaceArrOffset:[96544,96732],bankArrOffset:[97124],bankCoinArrOffset:[96768],bankCount:2,itemShopArrOffset:[97128],itemShopCount:2,booArrOffset:[96764],booCount:1,gateNeighborsOffset:[96724],gateArrOffset:[96892],gateCount:2,arrowRotStartOffset:9112,arrowRotEndOffset:9280,audioIndexOffset:9858,onLoad:function(n){n.otherbg.largescene=Z0.readBackground(PM.bgDir+1).src}}),RM=ln("MP3_BLOOBER",{name:"Deep Bloober Sea",canOverwrite:!0,boardDefFile:571,bgDir:6,pauseBgDir:8,str:{boardSelect:[[21,31],[26,18]],boardGreeting:[24,13],boardGreetingDuel:[24,2],boardNames:[[49,40],[83,44]]},img:{boardSelectImg:73,splashLogoImg:23,splashLogoTextImg:29,pauseLogoImg:126,statsLogoImg:[19,106],gateImg:359},sceneIndex:73,mainfsEventFile:[19,620],mainfsBoardFile:[19,621],onLoad:function(n){n.otherbg.largescene=Z0.readBackground(RM.bgDir+1).src}}),LM=ln("MP3_SPINY",{name:"Spiny Desert",canOverwrite:!0,boardDefFile:572,bgDir:9,pauseBgDir:11,str:{boardSelect:[[21,32],[26,19]],boardGreeting:[24,14],boardGreetingDuel:[24,4],boardNames:[[49,41],[83,45]]},img:{boardSelectImg:74,splashLogoImg:24,splashLogoTextImg:30,pauseLogoImg:127,statsLogoImg:[19,107],gateImg:366},sceneIndex:74,mainfsEventFile:[19,622],mainfsBoardFile:[19,623],onLoad:function(n){n.otherbg.largescene=Z0.readBackground(LM.bgDir+1).src}}),BM=ln("MP3_WOODY",{name:"Woody Woods",canOverwrite:!0,boardDefFile:573,bgDir:12,pauseBgDir:14,str:{boardSelect:[[21,33],[26,20]],boardGreeting:[24,15],boardGreetingDuel:[24,6],boardNames:[[49,42],[83,46]]},img:{boardSelectImg:75,splashLogoImg:25,splashLogoTextImg:31,pauseLogoImg:128,statsLogoImg:[19,108],gateImg:373},sceneIndex:75,mainfsEventFile:[19,624],mainfsBoardFile:[19,625],onLoad:function(n){n.otherbg.largescene=Z0.readBackground(BM.bgDir+1).src}}),MM=ln("MP3_CAVERN",{name:"Creepy Cavern",canOverwrite:!0,boardDefFile:574,bgDir:15,pauseBgDir:17,str:{boardSelect:[[21,34],[26,21]],boardGreeting:[24,16],boardGreetingDuel:[24,8],boardNames:[[49,43],[83,47]]},img:{boardSelectImg:76,splashLogoImg:26,splashLogoTextImg:32,pauseLogoImg:129,statsLogoImg:[19,109],gateImg:383},sceneIndex:76,mainfsEventFile:[19,626],mainfsBoardFile:[19,627],onLoad:function(n){n.otherbg.largescene=Z0.readBackground(MM.bgDir+1).src}}),IM=ln("MP3_WALUIGI",{name:"Waluigi's Land",canOverwrite:!0,boardDefFile:575,bgDir:18,pauseBgDir:20,str:{boardSelect:[[21,35],[26,22]],boardGreeting:[24,17],boardGreetingDuel:[24,10],boardNames:[[49,44],[83,48]]},img:{boardSelectImg:77,splashLogoImg:27,splashLogoTextImg:33,pauseLogoImg:130,statsLogoImg:[19,110],gateImg:387},sceneIndex:77,mainfsEventFile:[19,628],mainfsBoardFile:[19,629],onLoad:function(n){n.otherbg.largescene=Z0.readBackground(IM.bgDir+1).src}}),ll=ln("MP3U_GATEGUY");ll.name="Gate Guy";ll.type=G0.DUEL;ll.boardDefFile=577;ll.bgDir=24;ll.img={boardSelectImg:81,splashLogoImg:34,splashLogoTextImg:40,miniMapWithBg:279,miniMapDots:280};ll.sceneIndex=91;ll.spaceEventTables=[{upper:33052,lower:33060},{upper:33064,lower:33072}];ll.onAfterOverwrite=function(n){};const CA=ln("MP3U_ARROWHEAD");CA.name="Arrowhead";CA.type=G0.DUEL;CA.boardDefFile=578;CA.bgDir=25;CA.img={boardSelectImg:82,splashLogoImg:35,splashLogoTextImg:41,miniMapWithBg:310,miniMapDots:311};const VA=ln("MP3U_PIPESQUEAK");VA.name="Pipesqueak";VA.type=G0.DUEL;VA.boardDefFile=579;VA.bgDir=26;VA.img={boardSelectImg:83,splashLogoImg:36,splashLogoTextImg:42,miniMapWithBg:312,miniMapDots:313};const DA=ln("MP3U_BLOWHARD");DA.name="Blowhard";DA.type=G0.DUEL;DA.boardDefFile=580;DA.bgDir=27;DA.img={boardSelectImg:84,splashLogoImg:37,splashLogoTextImg:43,miniMapWithBg:315,miniMapDots:316};const FA=ln("MP3U_MRMOVER");FA.name="Mr. Mover";FA.type=G0.DUEL;FA.boardDefFile=581;FA.bgDir=28;FA.img={boardSelectImg:85,splashLogoImg:38,splashLogoTextImg:44,miniMapWithBg:317,miniMapDots:318};const TA=ln("MP3U_BACKTRACK");TA.name="Backtrack";TA.type=G0.DUEL;TA.boardDefFile=582;TA.bgDir=29;TA.img={boardSelectImg:86,splashLogoImg:39,splashLogoTextImg:45,miniMapWithBg:319,miniMapDots:320};function QH(){return[PM,RM,LM,BM,MM,IM,ll,CA,VA,DA,FA,TA]}function J4(n){switch(n){case Qe.MP1_USA:return KH();case Qe.MP1_JPN:return YH();case Qe.MP2_USA:return qH();case Qe.MP3_USA:return QH()}return wt("Missing boardinfo for "+n),null}function JH(n,e){return J4(n)[e]}function f_(){return 8}class OM{constructor(e,t,r){this.__type="ALEnv",this.__smallVolumes=r,this._extract(e,t)}_extract(e,t){this.attackTime=e.getInt32(t),this.decayTime=e.getInt32(t+4),this.releaseTime=e.getInt32(t+8),this.__smallVolumes?(this.attackVolume=e.getUint8(t+12),this.decayVolume=e.getUint8(t+13)):(this.attackVolume=e.getInt16(t+12),this.decayVolume=e.getInt16(t+14))}}class ZH{constructor(e,t){this.__type="ALKey",this._extract(e,t)}_extract(e,t){this.velocityMin=e.getUint8(t),this.velocityMax=e.getUint8(t+1),this.keyMin=e.getUint8(t+2),this.keyMax=e.getUint8(t+3),this.keyBase=e.getUint8(t+4),this.detune=e.getInt8(t+5)}}class $H{constructor(e,t){this.__type="ALADPCMLoop",this._extract(e,t)}_extract(e,t){this.start=e.getUint32(t),this.end=e.getUint32(t+4),this.count=e.getUint32(t+8),this.state=[];for(let r=0;r<16;r++)this.state[r]=e.getUint16(t+12+r*2)}}class ez{constructor(e,t){this.__type="ALADPCMBook",this._extract(e,t)}_extract(e,t){this.order=e.getInt32(t),this.npredictors=e.getInt32(t+4);const r=this.order*this.npredictors*8;this.predictors=new Array(r);for(let i=0;i<r;i++)this.predictors[i]=e.getInt16(t+8+i*2)}}class tz{constructor(e,t){this.__type="ALADPCMWaveInfo",this.loop=null,this.book=null,this._extract(e,t)}_extract(e,t){const r=e.getUint32(t);r!==0&&(this.loop=new $H(e,r));const i=e.getUint32(t+4);i!==0&&(this.book=new ez(e,i))}}class nz{constructor(e,t){this.__type="ALRAWWaveInfo",this._extract(e,t)}_extract(e,t){this.start=e.getUint32(t),this.end=e.getUint32(t+4),this.count=e.getUint32(t+8)}}class rz{constructor(e,t){this.__type="ALRAWWaveInfo",this.loop=null,this._extract(e,t)}_extract(e,t){const r=e.getUint32(t);r!==0&&(this.loop=new nz(e,t+r))}}var zw=(n=>(n[n.AL_ADPCM_WAVE=0]="AL_ADPCM_WAVE",n[n.AL_RAW16_WAVE=1]="AL_RAW16_WAVE",n[n.AL_VOX_WAVE=2]="AL_VOX_WAVE",n[n.AL_MUSYX_WAVE=3]="AL_MUSYX_WAVE",n))(zw||{});class kM{constructor(e,t){this.__type="ALWave",this._extract(e,t)}_extract(e,t){if(this.waveBase=e.getUint32(t),this.waveLen=e.getUint32(t+4),this.type=e.getUint8(t+8),this.flags=e.getUint8(t+9),this.type===0)this.adpcmWave=new tz(e,t+12);else if(this.type===1)this.rawWave=new rz(e,t+12);else throw new Error(`Unrecognized ALWaveTable type ${this.type}`)}}class iz{constructor(e,t){this.__type="ALSound",this._extract(e,t)}_extract(e,t){const r=e.getUint32(t);this.env=new OM(e,r);const i=e.getUint32(t+4);this.keymap=new ZH(e,i);const a=e.getUint32(t+8);this.wave=new kM(e,a),this.samplePan=e.getUint8(t+12),this.sampleVolume=e.getUint8(t+13),this.flags=e.getUint8(t+14)}}class az{constructor(e,t){this.__type="ALInst",this.sounds=[],this._extract(e,t)}_extract(e,t){this.volume=e.getUint8(t),this.pan=e.getUint8(t+1),this.priority=e.getUint8(t+2),this.flags=e.getUint8(t+3),this.tremType=e.getUint8(t+4),this.tremRate=e.getUint8(t+5),this.tremDepth=e.getUint8(t+6),this.tremDelay=e.getUint8(t+7),this.vibType=e.getUint8(t+8),this.vibRate=e.getUint8(t+9),this.vibDepth=e.getUint8(t+10),this.vibDelay=e.getUint8(t+11),this.bendRange=e.getInt16(t+12);const r=e.getInt16(t+14);for(let i=0;i<r;i++){const a=e.getUint32(t+16+i*4);this.sounds.push(new iz(e,a))}}}class oz{constructor(e,t){this.__type="ALBank",this.instruments=[],this._extract(e,t)}_extract(e,t){if(this.flags=e.getUint8(t+2),this.pad=e.getUint8(t+3),this.sampleRate=e.getInt32(t+4),e.getUint32(t+8))throw new Error(`Need to parse percussion at bank offset 0x${(e.byteOffset+t).toString(16)}`);let i=e.getUint16(t);for(let a=0;a<i;a++){let o=e.getUint32(t+12+a*4);this.instruments.push(new az(e,o))}}}class NM{constructor(e){if(this.__type="B1",this.banks=[],e.getUint16(0)!==16945)throw new Error("B1 constructor encountered non-B1 structure");this._extract(e)}_extract(e){let t=e.getUint16(2);for(let r=0;r<t;r++){let i=e.getUint32(4+r*4);this.banks.push(new oz(e,i))}}}const h3=21298;class sz{constructor(e){this.__type="S2",this.midis=[],this._extract(e)}_extract(e){if(e.getUint16(0)!==h3)throw new Error("S2 constructor encountered non-S2 structure");let t=e.getUint16(2),r=4+t*8;for(let c=0;c<t;c++){let d=e.getUint32(4+c*4*2),h=e.getUint32(8+c*4*2),f=e.byteOffset+d;this.midis.push({buffer:e.buffer.slice(f,f+h),soundbankIndex:e.getUint8(r+c*16)})}let i=e.getUint32(r+12),a=e.getUint32(4);this.tbl=e.buffer.slice(e.byteOffset+i,e.byteOffset+a);const o=e.getUint32(r+4),s=e.getUint32(r+8);let l=new DataView(e.buffer,e.byteOffset+o);this.soundbanks=new NM(l),this._rawB1=e.buffer.slice(e.byteOffset+o,e.byteOffset+o+s)}pack(e,t=0){const r=new DataView(e,t);let i=0;r.setUint16(0,h3),r.setUint16(2,this.midis.length),i+=4;const a=this.midis.length*8,o=this.midis.length*16+4,s=_0(4+a+o,16);let l=s+this._rawB1.byteLength+this.tbl.byteLength;l=_0(l,8);for(const c of this.midis){r.setUint32(i,l);const d=_0(c.buffer.byteLength,8);r.setUint32(i+4,d),i+=8,l+=d}for(const c of this.midis)r.setInt8(i,c.soundbankIndex),r.setInt8(i+1,127),r.setUint8(i+2,255),r.setUint8(i+3,255),r.setUint32(i+4,s),r.setUint32(i+8,this._rawB1.byteLength),r.setUint32(i+12,s+this._rawB1.byteLength),i+=16;r.setUint32(i,4294967295),i+=4,i=_0(i,16),fr(r,this._rawB1,i,0,this._rawB1.byteLength),i+=_0(this._rawB1.byteLength,8),fr(r,this.tbl,i,0,this.tbl.byteLength),i+=_0(this.tbl.byteLength,8);for(const c of this.midis)fr(r,c.buffer,i,0,c.buffer.byteLength),i+=_0(c.buffer.byteLength,8);return i=_0(i,16),Hn()&&O0(this.getByteLength()===i),i}getByteLength(){let e=0;e+=2,e+=2,e+=this.midis.length*8,e+=this.midis.length*16+4,e=_0(e,16),e+=_0(this._rawB1.byteLength,8),e+=_0(this.tbl.byteLength,8);for(const t of this.midis)e+=_0(t.buffer.byteLength,8);return e=_0(e,16),e}}const p3=1296188976,Df=64;class lz{constructor(e){this.__type="MBF0",this.midis=[],this._extract(e)}_extract(e){if(e.getUint32(0)!==p3)throw new Error("MBF0 constructor encountered non-MBF0 structure");const t=e.getUint32(4);this._headerContents=new ArrayBuffer(56),fr(this._headerContents,e,0,8,this._headerContents.byteLength);const r=Df,i=new Map;for(let h=0;h<t;h++){const f=r+h*16,m=e.getUint32(f+8),g=e.getUint32(f+12);let x;i.has(m)?x=i.get(m):(x=e.buffer.slice(e.byteOffset+m,e.byteOffset+m+g),i.set(m,x)),this.midis.push({buffer:x,mystery0:e.getUint8(f),mystery1:e.getUint8(f+1),mystery4:e.getUint32(f+4),soundbankIndex:e.getUint8(f+2)}),O0(e.getUint8(f+3)===0),O0(e.getUint32(f+4)===117440512||e.getUint32(f+4)===0)}const a=Df+16*t,o=e.getUint32(a),s=e.getUint32(a+4),l=e.getUint32(a+8),c=l+e.getUint32(a+12);this.tbl=e.buffer.slice(e.byteOffset+l,e.byteOffset+c);const d=new DataView(e.buffer,e.byteOffset+o,s);this.soundbanks=new NM(d),this._soundbackBuffer=e.buffer.slice(e.byteOffset+o,e.byteOffset+o+s)}pack(e,t=0){const r=new DataView(e,t);let i=0;r.setUint32(0,p3),r.setUint32(4,this.midis.length),fr(r,this._headerContents,8,0,this._headerContents.byteLength),i+=Df,i+=16*this.midis.length,i+=16;const a=new Map;for(const f of this.midis)a.has(f.buffer)||(O0(i%8===0),a.set(f.buffer,i),fr(r,f.buffer,i,0,f.buffer.byteLength),i+=_0(f.buffer.byteLength,8));i=_0(i,16);const o=i,s=this._soundbackBuffer.byteLength;fr(r,this._soundbackBuffer,i,0,s),i+=_0(s,8);const l=i,c=this.tbl.byteLength;fr(r,this.tbl,i,0,c),i+=_0(c,8);const d=_0(i,16);i=Df;for(const f of this.midis)r.setUint8(i,f.mystery0||0),r.setUint8(i+1,typeof f.mystery1=="number"?f.mystery1:111),r.setUint8(i+2,f.soundbankIndex),r.setUint8(i+3,0),r.setUint32(i+4,typeof f.mystery4=="number"?f.mystery4:117440512),r.setUint32(i+8,a.get(f.buffer)),r.setUint32(i+12,f.buffer.byteLength),i+=16;r.setUint32(i,o),r.setUint32(i+4,s),r.setUint32(i+8,l),r.setUint32(i+12,c);const h=d;return Hn()&&O0(this.getByteLength()===h),h}getByteLength(){let e=0;e+=4,e+=4,e+=this._headerContents.byteLength,O0(e===Df),e+=this.midis.length*16,e+=16,O0(e%16===0);const t=new Set;for(const r of this.midis)t.has(r.buffer)||(t.add(r.buffer),e+=_0(r.buffer.byteLength,8));return e=_0(e,16),O0(this._soundbackBuffer.byteLength%8===0),e+=this._soundbackBuffer.byteLength,O0(this.tbl.byteLength%8===0),e+=this.tbl.byteLength,e=_0(e,16),e}}class UM{constructor(e,t){this.__type="ALSoundSimple",this._extract(e,t)}_extract(e,t){const r=e.getUint32(t);this.env=new OM(e,r),this.sampleRate=e.getUint32(t+4);const i=e.getUint32(t+8);this.wave=new kM(e,i),this.samplePan=e.getUint8(t+12),this.sampleVolume=e.getUint8(t+13),this.flags=e.getUint8(t+14)}}class uz{constructor(e){if(this.__type="SBF0",this.sounds=[],e.getUint32(0)!==1396852272)throw new Error("SBF0 constructor encountered non-SBF0 structure");this._extract(e)}_extract(e){const t=e.getUint32(68),r=116;if(t===0)throw new Error("Does soundCount === 0?");const i=new DataView(e.buffer,e.byteOffset+r);for(let s=0;s<t;s++)this.sounds.push(new UM(i,s*16));const a=e.getUint32(84),o=a+e.getUint32(88);if(this.tbl=e.buffer.slice(e.byteOffset+a,e.byteOffset+o),Hn()){let s="";const l=e.getUint32(4),c=o;for(let d=0;d<l;d++){const h=e.getUint32(c+d*4),f=e.getUint8(c+h),m=c+h+8;for(let g=0;g<f;g++){const x=e.getUint32(m+g*8+4);let E;const _=e.getUint8(c+x);switch(_){case 146:case 147:E=e.getUint16(c+x+1);break;case 18:case 19:E=e.getUint16(c+x+2);break;case 1:case 160:continue;default:throw new Error("Unrecongized soundFxInfoType "+At(_)+" at "+At(e.byteOffset+c+x))}s+=`
${At(d)}: ${At(E)}`}}wt(s)}}}class cz{constructor(e){if(this.__type="T3",this.sounds=[],e.getUint16(0)!==21555)throw new Error("T3 constructor encountered non-T3 structure");this._extract(e)}_extract(e){const t=e.getUint16(2),r=[];for(let c=0;c<t;c++)r.push({rawSound:e.getUint16(4+c*8+4)&4095,sampleRate:e.getUint16(4+c*8+6)});const i=e.getUint32(4+t*8+4),a=4+t*8+44,o=new DataView(e.buffer,e.byteOffset+a);for(let c=0;c<i;c++){const d=new UM(o,c*16);for(const h of r)if(h.rawSound===c){d.sampleRate=h.sampleRate;break}d.sampleRate||(console.warn(`Unknown sample rate for raw sound ${c}, guessing...`),d.sampleRate=22050),this.sounds.push(d)}console.log(this.sounds);const s=e.getUint32(4+t*8+12),l=s+e.getUint32(4+t*8+20);this.tbl=e.buffer.slice(e.byteOffset+s,e.byteOffset+l)}}class dz{constructor(e){if(this.__type="FXD0",e.getUint32(0)!==1180189744)throw new Error("FXD0 constructor encountered non-FXD0 structure");this._extract(e)}_extract(e){this.hunks=[];let t=e.getUint32(4),r=16;for(let i=0;i<t;i++,r+=520){const a=r+520;this.hunks.push(e.buffer.slice(e.byteOffset+r,e.byteOffset+a))}}}let vo,Pn;const Az={[Qe.MP1_USA]:[{type:"S2",offsets:[{upper:399174,lower:399178},{ovl:110,upper:3682,lower:3686}]},{type:"S2",offsets:[{upper:110378,lower:110382},{upper:399182,lower:399186},{upper:399230,lower:399234},{ovl:110,upper:3690,lower:3694},{ovl:110,upper:3730,lower:3734}]},{type:"T3",byteLength:3692928,offsets:[{upper:110386,lower:110390},{upper:399150,lower:399154},{upper:399238,lower:399242},{ovl:110,upper:3662,lower:3666},{ovl:110,upper:3738,lower:3742}]},{type:"T3",byteLength:1263616,offsets:[{upper:110350,lower:110354},{upper:399202,lower:399206},{ovl:110,upper:3706,lower:3710}]},{type:"FXD0",byteLength:2096,offsets:[{upper:110426,lower:110430}]},{type:"Pointer",byteLength:0,offsets:[{upper:110438,lower:110442}]}],[Qe.MP1_JPN]:[],[Qe.MP1_PAL]:[],[Qe.MP2_USA]:[{type:"MBF0",offsets:[{upper:119618,lower:119622},{upper:502254,lower:502258},{upper:502290,lower:502294}]},{type:"SBF0",byteLength:3888e3,offsets:[{upper:502266,lower:502270}]},{type:"SBF0",byteLength:1487184,offsets:[{upper:119630,lower:119634},{upper:502302,lower:502306}]},{type:"FXD0",byteLength:2624,offsets:[{upper:119682,lower:119686}]}],[Qe.MP2_JPN]:[],[Qe.MP2_PAL]:[],[Qe.MP3_USA]:[{type:"MBF0",offsets:[{upper:62058,lower:62062},{upper:311026,lower:311030}]},{type:"SBF0",byteLength:4876240,offsets:[{upper:62070,lower:62074},{upper:311038,lower:311042}]},{type:"FXD0",byteLength:2624,offsets:[{upper:62110,lower:62114}]}],[Qe.MP3_JPN]:[],[Qe.MP3_PAL]:[]},Rr={getROMOffset(n=0){const e=this.getPatchInfo();if(!e||!e.length)return null;let t=e[n];if(!t)return null;let r=t.offsets[0],i=r.upper,a=r.lower,o,s;if(typeof r.ovl=="number"){const c=l0.getDataView(r.ovl);o=c.getUint16(i),s=c.getUint16(a)}else{const c=bt.getDataView();o=c.getUint16(i),s=c.getUint16(a)}const l=kc(o,s);return wt(`Audio.getROMOffset -> ${At(l)}`),Hn()&&t.offsets.forEach((c,d)=>{let h=c.upper,f=c.lower,m,g;if(typeof c.ovl=="number"){const E=l0.getDataView(c.ovl);m=E.getUint16(h),g=E.getUint16(f)}else{const E=bt.getDataView();m=E.getUint16(h),g=E.getUint16(f)}const x=kc(m,g);if(x!==l)throw new Error(`AudioFS.getROMOffset patch offset ${n}/${d} seems wrong:
          offset: ${At(l)} vs ${At(x)}
          reading upper: ${At(h)}, lower: ${At(f)}`)}),l},setROMOffset(n,e){wt(`Audio.setROMOffset(${At(n)})`);let t=this.getPatchInfo(),r=n;for(let i=0;i<t.length;i++){const a=t[i],[o,s]=A_(r);for(let l=0;l<a.offsets.length;l++){const c=a.offsets[l];let d=c.upper,h=c.lower;if(typeof c.ovl=="number"){const f=l0.getDataView(c.ovl);f.setUint16(d,o),f.setUint16(h,s)}else{const f=new DataView(e);f.setUint16(d,o),f.setUint16(h,s)}}switch(a.type){case"T3":case"SBF0":case"FXD0":O0(typeof a.byteLength=="number"),O0(a.byteLength%16===0),r+=a.byteLength;break;case"S2":O0(!!Pn[i]),r+=Pn[i].getByteLength();break;case"MBF0":O0(!!Pn[i]),r+=Pn[i].getByteLength();break;case"Pointer":break;default:throw new Error("Unhandled audio subsection type: "+a.type)}}},getPatchInfo(){return Az[bt.getROMGame()]},read(n){throw new Error("audio.read not implemented")},write(n,e){throw new Error("audio.write not implemented")},getSequenceTableCount(){let n=0;for(let e=0;e<Pn.length;e++){const t=Pn[e];t&&"midis"in t&&n++}return n},getSequenceTable(n){if(!Pn)return null;let e=-1;for(let t=0;t<Pn.length;t++){const r=Pn[t];if(r&&"midis"in r&&(e++,e===n))return r}return null},getSoundTableCount(){let n=0;for(let e=0;e<Pn.length;e++){const t=Pn[e];t&&"sounds"in t&&n++}return n},getSoundTable(n){if(!Pn)return null;let e=-1;for(let t=0;t<Pn.length;t++){const r=Pn[t];if(r&&"sounds"in r&&(e++,e===n))return r}return null},clearCache(){vo=null,Pn=null},extract(){const n=bt.getROMBuffer();if(this.getROMOffset()===null)return;const t=this.getPatchInfo();vo=new Array(t.length),Pn=new Array(t.length);for(let r=0;r<t.length;r++){const i=t[r];switch(i.type){case"S2":const a=this.getROMOffset(r),o=Pn[r]=new sz(bt.getDataView(a));vo[r]=n.slice(a,a+o.getByteLength());break;case"T3":O0(typeof i.byteLength=="number");const s=this.getROMOffset(r);vo[r]=n.slice(s,s+i.byteLength),Pn[r]=new cz(bt.getDataView(s));break;case"MBF0":const l=this.getROMOffset(r),c=Pn[r]=new lz(bt.getDataView(l));vo[r]=n.slice(l,l+c.getByteLength());break;case"SBF0":O0(typeof i.byteLength=="number");const d=this.getROMOffset(r);vo[r]=n.slice(d,d+i.byteLength),Pn[r]=new uz(bt.getDataView(d));break;case"FXD0":O0(typeof i.byteLength=="number");const h=this.getROMOffset(r);vo[r]=n.slice(h,h+i.byteLength),Pn[r]=new dz(bt.getDataView(h));break;case"Pointer":vo[r]=Pn[r]=null;break;default:throw new Error("Unhandled audio subsection type: "+i.type)}}},extractAsync(){return new Promise((n,e)=>{this.extract(),n()})},pack(n,e=0){const t=this.getPatchInfo();if(!t||!t.length||!vo)throw new Error("Unable to write audio section.");let r=e;for(let a=0;a<t.length;a++){const o=t[a];switch(o.type){case"T3":case"SBF0":case"FXD0":O0(typeof o.byteLength=="number"),fr(n,vo[a],r,0,vo[a].byteLength),r+=o.byteLength;break;case"S2":r+=Pn[a].pack(n,r),r=_0(r,16);break;case"MBF0":r+=Pn[a].pack(n,r),r=_0(r,16);break;case"Pointer":break;default:throw new Error("Unhandled audio subsection type: "+o.type)}}const i=r-e;return O0(i%16===0),i},getByteLength(){const n=this.getPatchInfo();if(!n||!n.length)throw new Error("Unable to determine audio section length.");let e=0;for(let t=0;t<n.length;t++){const r=n[t];switch(r.type){case"T3":case"SBF0":case"FXD0":O0(typeof r.byteLength=="number"),e+=r.byteLength;break;case"S2":e+=Pn[t].getByteLength();break;case"MBF0":e+=Pn[t].getByteLength();break;case"Pointer":break;default:throw new Error("Unhandled audio subsection type: "+r.type)}}return e}};function fz(n,e){let t=jM(n);e.spaces=hz(n,t);let r=pz(n,t);return e.links=r.links,e._chains=r.chains,wt(`Parsing board def, ${At(t.spaceCount)} (${t.spaceCount}) spaces`),e}function jM(n){let e=new DataView(n),t=bt.getGameVersion();switch(t){case 1:return{spaceCount:e.getUint16(0),chainCount:e.getUint16(4),spaceStartOffset:e.getUint16(6),linkStartOffset:e.getUint16(10)};case 2:case 3:return{spaceCount:e.getUint16(0),chainCount:e.getUint16(2),spaceStartOffset:e.getUint16(4),linkStartOffset:e.getUint16(6)}}throw new Error("Unrecongized game "+t)}function hz(n,e){let t=new DataView(n,e.spaceStartOffset),r=[],i=0;for(let a=0;a<e.spaceCount;a++)r.push({type:t.getUint8(i+3),x:t.getFloat32(i+4),y:t.getFloat32(i+12),z:t.getFloat32(i+8)}),i+=16;return r}function pz(n,e){let t=new Array(e.chainCount),r={},i=new DataView(n,e.linkStartOffset);for(let a=0;a<e.chainCount;a++){let o=i.getUint16(a*2),s=new DataView(n,e.linkStartOffset+o),l=s.getUint16(0);if(t[a]=[],l===1)t[a].push(s.getUint16(2));else for(let c=1;c<l;c++){let d=s.getUint16(c*2),h=s.getUint16((c+1)*2);r.hasOwnProperty(d)?(Array.isArray(r[d])||(r[d]=[r[d]]),r[d].indexOf(h)===-1&&r[d].push(h)):r[d]=h,t[a].push(d),c+1===l&&t[a].push(h)}}return{links:r,chains:t}}function mz(n,e=GM(n)){let t=new ArrayBuffer(Sz(n,e));return gz(t,n,e),_z(t,n.spaces),xz(t,e),t}function Sz(n,e){let t,r,i;return t=Z4(),r=n.spaces.length*16,i=e.length*2,e.forEach(a=>{i+=(a.length+1)*2}),t+r+i}function Z4(){let n,e=bt.getGameVersion();switch(e){case 1:n=12;break;case 2:case 3:n=8;break;default:throw new Error(`_boardDefHeaderSize: unknown game version ${e}`)}return n}function gz(n,e,t){let r=new DataView(n),i=bt.getGameVersion(),a=Z4()+e.spaces.length*16;switch(i){case 1:r.setUint16(0,e.spaces.length),r.setUint16(4,t.length),r.setUint16(6,12),r.setUint16(8,a),r.setUint16(10,a);break;case 2:case 3:r.setUint16(0,e.spaces.length),r.setUint16(2,t.length),r.setUint16(4,8),r.setUint16(6,a);break}}function _z(n,e){let t=new DataView(n),r=Z4();e.forEach(i=>{t.setUint32(r,i.type),t.setFloat32(r+4,i.x),t.setFloat32(r+8,i.z||0),t.setFloat32(r+12,i.y),r+=16})}function xz(n,e){let t=new DataView(n),r,i;r=i=jM(n).linkStartOffset;let a=e.length*2;for(var o=0;o<e.length;o++){t.setUint16(i,a),t.setUint16(r+a,e[o].length),a+=2;for(var s=0;s<e[o].length;s++)t.setUint16(r+a,e[o][s]),a+=2;i+=2}}function GM(n){n=pu(n);let e=n.spaces,t=n.links,r=[];function i(s){let l=[],c=s,d;for(;!e[c]._seen;){if(e[c]._seen=!0,l.push(c),d=t[c],Array.isArray(d)){r.push(l),d.forEach(h=>{i(h)});return}if(typeof d!="number"){console.warn(`determineChains.parseChain hit a dead end at ${At(c)} (${c})`),r.push(l);return}if(o(d,c)){r.push(l),i(d);return}c=d}l.length&&r.push(l)}var a={};for(let s=0;s<e.length;s++)e[s]&&(a[s]=[]);for(let s in t)Pa(parseInt(s,10),n).forEach(c=>{a[c].push(Number(s))});function o(s,l){return l===void 0?!!a[s].length:a[s].length?a[s].indexOf(Number(l))===-1||a[s].length>1:!1}i(A2(n));for(let s=0;s<e.length;s++)!e[s]||e[s]._seen||!o(s)&&$C(s,"*",n)&&i(s);for(let s=0;s<e.length;s++)!e[s]||e[s]._seen||i(s);return wt("chains: ",r),r}function vz(n,e){let t=n.spaces,r=n.links;for(let i=0;i<e.length;i++){let a=e[i];if(a.length===1){let o=a[0],s=t[o],l=r[o],c,d;if(Array.isArray(l))if(l.length===1){let h=t[l[0]],f=_x(s.x,s.y,h.x,h.y);c=f.x,d=f.y}else if(l.length===2){let h=t[l[0]],f=t[l[1]],m=_x(h.x,h.y,f.x,f.y),g=Ro(s.x,s.y,m.x,m.y),x=.01/g;c=(1-x)*s.x+x*m.x,d=(1-x)*s.y+x*m.y,wt(`Padding branch x: ${s.x}, y: ${s.y}, padX: ${c}, padY: ${d}`)}else c=s.x,d=s.y;else if(typeof l=="number"){let h=t[l],f=_x(s.x,s.y,h.x,h.y);c=f.x,d=f.y}if(typeof c=="number"&&typeof d=="number"){let h=iV(c,d,de.OTHER,void 0,n);a.push(h),r[o]=h,r[h]=l}}}}function s8(n,e){for(let t=0;t<n.length;t++){const i=n[t].indexOf(e);if(i>=0)return[t,i]}return[-1,-1]}var wz=function(){var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(e){e=e||{};var t=typeof e<"u"?e:{},r={},i;for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);var a=[],o="./this.program",s=function(b,M){throw M},l=!1,c=!1,d=!1,h=!1;l=typeof window=="object",c=typeof importScripts=="function",d=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",h=!l&&!d&&!c;var f="";function m(b){return t.locateFile?t.locateFile(b,f):f+b}var g,x,E,_;d?(c?f=f+"/":f=__dirname+"/",g=function(M,X){return E||(E=null),_||(_=null),M=_.normalize(M),E.readFileSync(M,X?null:"utf8")},x=function(M){var X=g(M,!0);return X.buffer||(X=new Uint8Array(X)),$(X.buffer),X},process.argv.length>1&&(o=process.argv[1].replace(/\\/g,"/")),a=process.argv.slice(2),process.on("uncaughtException",function(b){if(!(b instanceof vi))throw b}),process.on("unhandledRejection",Ce),s=function(b){process.exit(b)},t.inspect=function(){return"[Emscripten Module object]"}):h?(typeof read<"u"&&(g=function(M){return read(M)}),x=function(M){var X;return typeof readbuffer=="function"?new Uint8Array(readbuffer(M)):(X=read(M,"binary"),$(typeof X=="object"),X)},typeof scriptArgs<"u"?a=scriptArgs:typeof arguments<"u"&&(a=arguments),typeof quit=="function"&&(s=function(b){quit(b)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(l||c)&&(c?f=self.location.href:document.currentScript&&(f=document.currentScript.src),n&&(f=n),f.indexOf("blob:")!==0?f=f.substr(0,f.lastIndexOf("/")+1):f="",g=function(M){var X=new XMLHttpRequest;return X.open("GET",M,!1),X.send(null),X.responseText},c&&(x=function(M){var X=new XMLHttpRequest;return X.open("GET",M,!1),X.responseType="arraybuffer",X.send(null),new Uint8Array(X.response)}));var v=t.print||console.log.bind(console),C=t.printErr||console.warn.bind(console);for(i in r)r.hasOwnProperty(i)&&(t[i]=r[i]);r=null,t.arguments&&(a=t.arguments),t.thisProgram&&(o=t.thisProgram),t.quit&&(s=t.quit);var D;t.wasmBinary&&(D=t.wasmBinary);var V;t.noExitRuntime&&(V=t.noExitRuntime),typeof WebAssembly!="object"&&C("no native wasm support detected");function H(b,M,X,Ae){switch(X=X||"i8",X.charAt(X.length-1)==="*"&&(X="i32"),X){case"i1":Be[b>>0]=M;break;case"i8":Be[b>>0]=M;break;case"i16":ye[b>>1]=M;break;case"i32":We[b>>2]=M;break;case"i64":a0=[M>>>0,(_t=M,+Le(_t)>=1?_t>0?(Ee(+rt(_t/4294967296),4294967295)|0)>>>0:~~+Re((_t-+(~~_t>>>0))/4294967296)>>>0:0)],We[b>>2]=a0[0],We[b+4>>2]=a0[1];break;case"float":at[b>>2]=M;break;case"double":Ke[b>>3]=M;break;default:Ce("invalid type for setValue: "+X)}}var R,j=new WebAssembly.Table({initial:9,maximum:9+0,element:"anyfunc"}),te=!1;function $(b,M){b||Ce("Assertion failed: "+M)}function z(b){var M=t["_"+b];return $(M,"Cannot call unknown function "+b+", make sure it is exported"),M}function I(b,M,X,Ae,xe){var Me={string:function(qt){var w0=0;if(qt!=null&&qt!==0){var Kn=(qt.length<<2)+1;w0=e0(Kn),O(qt,w0,Kn)}return w0},array:function(qt){var w0=e0(qt.length);return oe(qt,w0),w0}};function ze(qt){return M==="string"?ce(qt):M==="boolean"?Boolean(qt):qt}var Ye=z(b),it=[],Gt=0;if(Ae)for(var Zt=0;Zt<Ae.length;Zt++){var x0=Me[X[Zt]];x0?(Gt===0&&(Gt=Ur()),it[Zt]=x0(Ae[Zt])):it[Zt]=Ae[Zt]}var zt=Ye.apply(null,it);return zt=ze(zt),Gt!==0&&Rt(Gt),zt}function q(b,M,X,Ae){X=X||[];var xe=X.every(function(ze){return ze==="number"}),Me=M!=="string";return Me&&xe&&!Ae?z(b):function(){return I(b,M,X,arguments)}}var P=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ee(b,M,X){for(var Ae=M+X,xe=M;b[xe]&&!(xe>=Ae);)++xe;if(xe-M>16&&b.subarray&&P)return P.decode(b.subarray(M,xe));for(var Me="";M<xe;){var ze=b[M++];if(!(ze&128)){Me+=String.fromCharCode(ze);continue}var Ye=b[M++]&63;if((ze&224)==192){Me+=String.fromCharCode((ze&31)<<6|Ye);continue}var it=b[M++]&63;if((ze&240)==224?ze=(ze&15)<<12|Ye<<6|it:ze=(ze&7)<<18|Ye<<12|it<<6|b[M++]&63,ze<65536)Me+=String.fromCharCode(ze);else{var Gt=ze-65536;Me+=String.fromCharCode(55296|Gt>>10,56320|Gt&1023)}}return Me}function ce(b,M){return b?ee(Te,b,M):""}function U(b,M,X,Ae){if(!(Ae>0))return 0;for(var xe=X,Me=X+Ae-1,ze=0;ze<b.length;++ze){var Ye=b.charCodeAt(ze);if(Ye>=55296&&Ye<=57343){var it=b.charCodeAt(++ze);Ye=65536+((Ye&1023)<<10)|it&1023}if(Ye<=127){if(X>=Me)break;M[X++]=Ye}else if(Ye<=2047){if(X+1>=Me)break;M[X++]=192|Ye>>6,M[X++]=128|Ye&63}else if(Ye<=65535){if(X+2>=Me)break;M[X++]=224|Ye>>12,M[X++]=128|Ye>>6&63,M[X++]=128|Ye&63}else{if(X+3>=Me)break;M[X++]=240|Ye>>18,M[X++]=128|Ye>>12&63,M[X++]=128|Ye>>6&63,M[X++]=128|Ye&63}}return M[X]=0,X-xe}function O(b,M,X){return U(b,Te,M,X)}function G(b){for(var M=0,X=0;X<b.length;++X){var Ae=b.charCodeAt(X);Ae>=55296&&Ae<=57343&&(Ae=65536+((Ae&1023)<<10)|b.charCodeAt(++X)&1023),Ae<=127?++M:Ae<=2047?M+=2:Ae<=65535?M+=3:M+=4}return M}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function re(b){var M=G(b)+1,X=e0(M);return U(b,Be,X,M),X}function oe(b,M){Be.set(b,M)}var se=65536,be,Be,Te,ye,We,at,Ke;function tt(b){be=b,t.HEAP8=Be=new Int8Array(b),t.HEAP16=ye=new Int16Array(b),t.HEAP32=We=new Int32Array(b),t.HEAPU8=Te=new Uint8Array(b),t.HEAPU16=new Uint16Array(b),t.HEAPU32=new Uint32Array(b),t.HEAPF32=at=new Float32Array(b),t.HEAPF64=Ke=new Float64Array(b)}var lt=5285248,Ie=42208,Ue=t.TOTAL_MEMORY||16777216;t.wasmMemory?R=t.wasmMemory:R=new WebAssembly.Memory({initial:Ue/se,maximum:Ue/se}),R&&(be=R.buffer),Ue=be.byteLength,tt(be),We[Ie>>2]=lt;function k(b){for(;b.length>0;){var M=b.shift();if(typeof M=="function"){M();continue}var X=M.func;typeof X=="number"?M.arg===void 0?t.dynCall_v(X):t.dynCall_vi(X,M.arg):X(M.arg===void 0?null:M.arg)}}var De=[],we=[],le=[],ne=[];function fe(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)_e(t.preRun.shift());k(De)}function He(){!t.noFSInit&&!Q.init.initialized&&Q.init(),k(we)}function ae(){Q.ignorePermissions=!1,k(le)}function Y(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Fe(t.postRun.shift());k(ne)}function _e(b){De.unshift(b)}function Fe(b){ne.unshift(b)}var Le=Math.abs,Re=Math.ceil,rt=Math.floor,Ee=Math.min,ve=0,$e=null;function gt(b){ve++,t.monitorRunDependencies&&t.monitorRunDependencies(ve)}function St(b){if(ve--,t.monitorRunDependencies&&t.monitorRunDependencies(ve),ve==0&&$e){var M=$e;$e=null,M()}}t.preloadedImages={},t.preloadedAudios={};function Ce(b){throw t.onAbort&&t.onAbort(b),b+="",v(b),C(b),te=!0,b="abort("+b+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(b)}var Ft="data:application/octet-stream;base64,";function ht(b){return String.prototype.startsWith?b.startsWith(Ft):b.indexOf(Ft)===0}var Nt="smlrc.wasm";ht(Nt)||(Nt=m(Nt));function Je(){try{if(D)return new Uint8Array(D);if(x)return x(Nt);throw"both async and sync fetching of the wasm failed"}catch(b){Ce(b)}}function mt(){return!D&&(l||c)&&typeof fetch=="function"?fetch(Nt,{credentials:"same-origin"}).then(function(b){if(!b.ok)throw"failed to load wasm binary file at '"+Nt+"'";return b.arrayBuffer()}).catch(function(){return Je()}):new Promise(function(b,M){b(Je())})}function Wt(){var b={a:c0};function M(ze,Ye){var it=ze.exports;t.asm=it,St()}gt();function X(ze){M(ze.instance)}function Ae(ze){return mt().then(function(Ye){return WebAssembly.instantiate(Ye,b)}).then(ze,function(Ye){C("failed to asynchronously prepare wasm: "+Ye),Ce(Ye)})}function xe(){if(!D&&typeof WebAssembly.instantiateStreaming=="function"&&!ht(Nt)&&typeof fetch=="function")fetch(Nt,{credentials:"same-origin"}).then(function(ze){var Ye=WebAssembly.instantiateStreaming(ze,b);return Ye.then(X,function(it){C("wasm streaming compile failed: "+it),C("falling back to ArrayBuffer instantiation"),Ae(X)})});else return Ae(X)}if(t.instantiateWasm)try{var Me=t.instantiateWasm(b,M);return Me}catch(ze){return C("Module.instantiateWasm callback failed with error: "+ze),!1}return xe(),{}}var _t,a0;we.push({func:function(){mn()}});function v0(b){return b}function M0(b){var M=/\b_Z[\w\d_]+/g;return b.replace(M,function(X){var Ae=X;return X===Ae?X:Ae+" ["+X+"]"})}function Vn(){var b=new Error;if(!b.stack){try{throw new Error}catch(M){b=M}if(!b.stack)return"(no stack trace available)"}return b.stack.toString()}function Xn(){var b=Vn();return t.extraStackTrace&&(b+=`
`+t.extraStackTrace()),M0(b)}function ki(){}function ta(b){return t.___errno_location&&(We[t.___errno_location()>>2]=b),b}var $t={splitPath:function(b){var M=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return M.exec(b).slice(1)},normalizeArray:function(b,M){for(var X=0,Ae=b.length-1;Ae>=0;Ae--){var xe=b[Ae];xe==="."?b.splice(Ae,1):xe===".."?(b.splice(Ae,1),X++):X&&(b.splice(Ae,1),X--)}if(M)for(;X;X--)b.unshift("..");return b},normalize:function(b){var M=b.charAt(0)==="/",X=b.substr(-1)==="/";return b=$t.normalizeArray(b.split("/").filter(function(Ae){return!!Ae}),!M).join("/"),!b&&!M&&(b="."),b&&X&&(b+="/"),(M?"/":"")+b},dirname:function(b){var M=$t.splitPath(b),X=M[0],Ae=M[1];return!X&&!Ae?".":(Ae&&(Ae=Ae.substr(0,Ae.length-1)),X+Ae)},basename:function(b){if(b==="/")return"/";var M=b.lastIndexOf("/");return M===-1?b:b.substr(M+1)},extname:function(b){return $t.splitPath(b)[3]},join:function(){var b=Array.prototype.slice.call(arguments,0);return $t.normalize(b.join("/"))},join2:function(b,M){return $t.normalize(b+"/"+M)}},Nr={resolve:function(){for(var b="",M=!1,X=arguments.length-1;X>=-1&&!M;X--){var Ae=X>=0?arguments[X]:Q.cwd();if(typeof Ae!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!Ae)return"";b=Ae+"/"+b,M=Ae.charAt(0)==="/"}return b=$t.normalizeArray(b.split("/").filter(function(xe){return!!xe}),!M).join("/"),(M?"/":"")+b||"."},relative:function(b,M){b=Nr.resolve(b).substr(1),M=Nr.resolve(M).substr(1);function X(Gt){for(var Zt=0;Zt<Gt.length&&Gt[Zt]==="";Zt++);for(var x0=Gt.length-1;x0>=0&&Gt[x0]==="";x0--);return Zt>x0?[]:Gt.slice(Zt,x0-Zt+1)}for(var Ae=X(b.split("/")),xe=X(M.split("/")),Me=Math.min(Ae.length,xe.length),ze=Me,Ye=0;Ye<Me;Ye++)if(Ae[Ye]!==xe[Ye]){ze=Ye;break}for(var it=[],Ye=ze;Ye<Ae.length;Ye++)it.push("..");return it=it.concat(xe.slice(ze)),it.join("/")}},xi={ttys:[],init:function(){},shutdown:function(){},register:function(b,M){xi.ttys[b]={input:[],output:[],ops:M},Q.registerDevice(b,xi.stream_ops)},stream_ops:{open:function(b){var M=xi.ttys[b.node.rdev];if(!M)throw new Q.ErrnoError(43);b.tty=M,b.seekable=!1},close:function(b){b.tty.ops.flush(b.tty)},flush:function(b){b.tty.ops.flush(b.tty)},read:function(b,M,X,Ae,xe){if(!b.tty||!b.tty.ops.get_char)throw new Q.ErrnoError(60);for(var Me=0,ze=0;ze<Ae;ze++){var Ye;try{Ye=b.tty.ops.get_char(b.tty)}catch{throw new Q.ErrnoError(29)}if(Ye===void 0&&Me===0)throw new Q.ErrnoError(6);if(Ye==null)break;Me++,M[X+ze]=Ye}return Me&&(b.node.timestamp=Date.now()),Me},write:function(b,M,X,Ae,xe){if(!b.tty||!b.tty.ops.put_char)throw new Q.ErrnoError(60);try{for(var Me=0;Me<Ae;Me++)b.tty.ops.put_char(b.tty,M[X+Me])}catch{throw new Q.ErrnoError(29)}return Ae&&(b.node.timestamp=Date.now()),Me}},default_tty_ops:{get_char:function(b){if(!b.input.length){var M=null;if(d){var X=256,Ae=Buffer.alloc?Buffer.alloc(X):new Buffer(X),xe=0;try{xe=E.readSync(process.stdin.fd,Ae,0,X,null)}catch(Me){if(Me.toString().indexOf("EOF")!=-1)xe=0;else throw Me}xe>0?M=Ae.slice(0,xe).toString("utf-8"):M=null}else typeof window<"u"&&typeof window.prompt=="function"?(M=window.prompt("Input: "),M!==null&&(M+=`
`)):typeof readline=="function"&&(M=readline(),M!==null&&(M+=`
`));if(!M)return null;b.input=Jr(M,!0)}return b.input.shift()},put_char:function(b,M){M===null||M===10?(v(ee(b.output,0)),b.output=[]):M!=0&&b.output.push(M)},flush:function(b){b.output&&b.output.length>0&&(v(ee(b.output,0)),b.output=[])}},default_tty1_ops:{put_char:function(b,M){M===null||M===10?(C(ee(b.output,0)),b.output=[]):M!=0&&b.output.push(M)},flush:function(b){b.output&&b.output.length>0&&(C(ee(b.output,0)),b.output=[])}}},S0={ops_table:null,mount:function(b){return S0.createNode(null,"/",16895,0)},createNode:function(b,M,X,Ae){if(Q.isBlkdev(X)||Q.isFIFO(X))throw new Q.ErrnoError(63);S0.ops_table||(S0.ops_table={dir:{node:{getattr:S0.node_ops.getattr,setattr:S0.node_ops.setattr,lookup:S0.node_ops.lookup,mknod:S0.node_ops.mknod,rename:S0.node_ops.rename,unlink:S0.node_ops.unlink,rmdir:S0.node_ops.rmdir,readdir:S0.node_ops.readdir,symlink:S0.node_ops.symlink},stream:{llseek:S0.stream_ops.llseek}},file:{node:{getattr:S0.node_ops.getattr,setattr:S0.node_ops.setattr},stream:{llseek:S0.stream_ops.llseek,read:S0.stream_ops.read,write:S0.stream_ops.write,allocate:S0.stream_ops.allocate,mmap:S0.stream_ops.mmap,msync:S0.stream_ops.msync}},link:{node:{getattr:S0.node_ops.getattr,setattr:S0.node_ops.setattr,readlink:S0.node_ops.readlink},stream:{}},chrdev:{node:{getattr:S0.node_ops.getattr,setattr:S0.node_ops.setattr},stream:Q.chrdev_stream_ops}});var xe=Q.createNode(b,M,X,Ae);return Q.isDir(xe.mode)?(xe.node_ops=S0.ops_table.dir.node,xe.stream_ops=S0.ops_table.dir.stream,xe.contents={}):Q.isFile(xe.mode)?(xe.node_ops=S0.ops_table.file.node,xe.stream_ops=S0.ops_table.file.stream,xe.usedBytes=0,xe.contents=null):Q.isLink(xe.mode)?(xe.node_ops=S0.ops_table.link.node,xe.stream_ops=S0.ops_table.link.stream):Q.isChrdev(xe.mode)&&(xe.node_ops=S0.ops_table.chrdev.node,xe.stream_ops=S0.ops_table.chrdev.stream),xe.timestamp=Date.now(),b&&(b.contents[M]=xe),xe},getFileDataAsRegularArray:function(b){if(b.contents&&b.contents.subarray){for(var M=[],X=0;X<b.usedBytes;++X)M.push(b.contents[X]);return M}return b.contents},getFileDataAsTypedArray:function(b){return b.contents?b.contents.subarray?b.contents.subarray(0,b.usedBytes):new Uint8Array(b.contents):new Uint8Array},expandFileStorage:function(b,M){var X=b.contents?b.contents.length:0;if(!(X>=M)){var Ae=1024*1024;M=Math.max(M,X*(X<Ae?2:1.125)|0),X!=0&&(M=Math.max(M,256));var xe=b.contents;b.contents=new Uint8Array(M),b.usedBytes>0&&b.contents.set(xe.subarray(0,b.usedBytes),0)}},resizeFileStorage:function(b,M){if(b.usedBytes!=M){if(M==0){b.contents=null,b.usedBytes=0;return}if(!b.contents||b.contents.subarray){var X=b.contents;b.contents=new Uint8Array(M),X&&b.contents.set(X.subarray(0,Math.min(M,b.usedBytes))),b.usedBytes=M;return}if(b.contents||(b.contents=[]),b.contents.length>M)b.contents.length=M;else for(;b.contents.length<M;)b.contents.push(0);b.usedBytes=M}},node_ops:{getattr:function(b){var M={};return M.dev=Q.isChrdev(b.mode)?b.id:1,M.ino=b.id,M.mode=b.mode,M.nlink=1,M.uid=0,M.gid=0,M.rdev=b.rdev,Q.isDir(b.mode)?M.size=4096:Q.isFile(b.mode)?M.size=b.usedBytes:Q.isLink(b.mode)?M.size=b.link.length:M.size=0,M.atime=new Date(b.timestamp),M.mtime=new Date(b.timestamp),M.ctime=new Date(b.timestamp),M.blksize=4096,M.blocks=Math.ceil(M.size/M.blksize),M},setattr:function(b,M){M.mode!==void 0&&(b.mode=M.mode),M.timestamp!==void 0&&(b.timestamp=M.timestamp),M.size!==void 0&&S0.resizeFileStorage(b,M.size)},lookup:function(b,M){throw Q.genericErrors[44]},mknod:function(b,M,X,Ae){return S0.createNode(b,M,X,Ae)},rename:function(b,M,X){if(Q.isDir(b.mode)){var Ae;try{Ae=Q.lookupNode(M,X)}catch{}if(Ae)for(var xe in Ae.contents)throw new Q.ErrnoError(55)}delete b.parent.contents[b.name],b.name=X,M.contents[X]=b,b.parent=M},unlink:function(b,M){delete b.contents[M]},rmdir:function(b,M){var X=Q.lookupNode(b,M);for(var Ae in X.contents)throw new Q.ErrnoError(55);delete b.contents[M]},readdir:function(b){var M=[".",".."];for(var X in b.contents)!b.contents.hasOwnProperty(X)||M.push(X);return M},symlink:function(b,M,X){var Ae=S0.createNode(b,M,41471,0);return Ae.link=X,Ae},readlink:function(b){if(!Q.isLink(b.mode))throw new Q.ErrnoError(28);return b.link}},stream_ops:{read:function(b,M,X,Ae,xe){var Me=b.node.contents;if(xe>=b.node.usedBytes)return 0;var ze=Math.min(b.node.usedBytes-xe,Ae);if(ze>8&&Me.subarray)M.set(Me.subarray(xe,xe+ze),X);else for(var Ye=0;Ye<ze;Ye++)M[X+Ye]=Me[xe+Ye];return ze},write:function(b,M,X,Ae,xe,Me){if(!Ae)return 0;var ze=b.node;if(ze.timestamp=Date.now(),M.subarray&&(!ze.contents||ze.contents.subarray)){if(Me)return ze.contents=M.subarray(X,X+Ae),ze.usedBytes=Ae,Ae;if(ze.usedBytes===0&&xe===0)return ze.contents=M.slice(X,X+Ae),ze.usedBytes=Ae,Ae;if(xe+Ae<=ze.usedBytes)return ze.contents.set(M.subarray(X,X+Ae),xe),Ae}if(S0.expandFileStorage(ze,xe+Ae),ze.contents.subarray&&M.subarray)ze.contents.set(M.subarray(X,X+Ae),xe);else for(var Ye=0;Ye<Ae;Ye++)ze.contents[xe+Ye]=M[X+Ye];return ze.usedBytes=Math.max(ze.usedBytes,xe+Ae),Ae},llseek:function(b,M,X){var Ae=M;if(X===1?Ae+=b.position:X===2&&Q.isFile(b.node.mode)&&(Ae+=b.node.usedBytes),Ae<0)throw new Q.ErrnoError(28);return Ae},allocate:function(b,M,X){S0.expandFileStorage(b.node,M+X),b.node.usedBytes=Math.max(b.node.usedBytes,M+X)},mmap:function(b,M,X,Ae,xe,Me,ze){if(!Q.isFile(b.node.mode))throw new Q.ErrnoError(43);var Ye,it,Gt=b.node.contents;if(!(ze&2)&&Gt.buffer===M.buffer)it=!1,Ye=Gt.byteOffset;else{(xe>0||xe+Ae<b.node.usedBytes)&&(Gt.subarray?Gt=Gt.subarray(xe,xe+Ae):Gt=Array.prototype.slice.call(Gt,xe,xe+Ae)),it=!0;var Zt=M.buffer==Be.buffer;if(Ye=C0(Ae),!Ye)throw new Q.ErrnoError(48);(Zt?Be:M).set(Gt,Ye)}return{ptr:Ye,allocated:it}},msync:function(b,M,X,Ae,xe){if(!Q.isFile(b.node.mode))throw new Q.ErrnoError(43);return xe&2||S0.stream_ops.write(b,M,0,Ae,X,!1),0}}},Q={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(b){if(!(b instanceof Q.ErrnoError))throw b+" : "+Xn();return ta(b.errno)},lookupPath:function(b,M){if(b=Nr.resolve(Q.cwd(),b),M=M||{},!b)return{path:"",node:null};var X={follow_mount:!0,recurse_count:0};for(var Ae in X)M[Ae]===void 0&&(M[Ae]=X[Ae]);if(M.recurse_count>8)throw new Q.ErrnoError(32);for(var xe=$t.normalizeArray(b.split("/").filter(function(zt){return!!zt}),!1),Me=Q.root,ze="/",Ye=0;Ye<xe.length;Ye++){var it=Ye===xe.length-1;if(it&&M.parent)break;if(Me=Q.lookupNode(Me,xe[Ye]),ze=$t.join2(ze,xe[Ye]),Q.isMountpoint(Me)&&(!it||it&&M.follow_mount)&&(Me=Me.mounted.root),!it||M.follow)for(var Gt=0;Q.isLink(Me.mode);){var Zt=Q.readlink(ze);ze=Nr.resolve($t.dirname(ze),Zt);var x0=Q.lookupPath(ze,{recurse_count:M.recurse_count});if(Me=x0.node,Gt++>40)throw new Q.ErrnoError(32)}}return{path:ze,node:Me}},getPath:function(b){for(var M;;){if(Q.isRoot(b)){var X=b.mount.mountpoint;return M?X[X.length-1]!=="/"?X+"/"+M:X+M:X}M=M?b.name+"/"+M:b.name,b=b.parent}},hashName:function(b,M){for(var X=0,Ae=0;Ae<M.length;Ae++)X=(X<<5)-X+M.charCodeAt(Ae)|0;return(b+X>>>0)%Q.nameTable.length},hashAddNode:function(b){var M=Q.hashName(b.parent.id,b.name);b.name_next=Q.nameTable[M],Q.nameTable[M]=b},hashRemoveNode:function(b){var M=Q.hashName(b.parent.id,b.name);if(Q.nameTable[M]===b)Q.nameTable[M]=b.name_next;else for(var X=Q.nameTable[M];X;){if(X.name_next===b){X.name_next=b.name_next;break}X=X.name_next}},lookupNode:function(b,M){var X=Q.mayLookup(b);if(X)throw new Q.ErrnoError(X,b);for(var Ae=Q.hashName(b.id,M),xe=Q.nameTable[Ae];xe;xe=xe.name_next){var Me=xe.name;if(xe.parent.id===b.id&&Me===M)return xe}return Q.lookup(b,M)},createNode:function(b,M,X,Ae){if(!Q.FSNode){Q.FSNode=function(Ye,it,Gt,Zt){Ye||(Ye=this),this.parent=Ye,this.mount=Ye.mount,this.mounted=null,this.id=Q.nextInode++,this.name=it,this.mode=Gt,this.node_ops={},this.stream_ops={},this.rdev=Zt},Q.FSNode.prototype={};var xe=365,Me=146;Object.defineProperties(Q.FSNode.prototype,{read:{get:function(){return(this.mode&xe)===xe},set:function(Ye){Ye?this.mode|=xe:this.mode&=~xe}},write:{get:function(){return(this.mode&Me)===Me},set:function(Ye){Ye?this.mode|=Me:this.mode&=~Me}},isFolder:{get:function(){return Q.isDir(this.mode)}},isDevice:{get:function(){return Q.isChrdev(this.mode)}}})}var ze=new Q.FSNode(b,M,X,Ae);return Q.hashAddNode(ze),ze},destroyNode:function(b){Q.hashRemoveNode(b)},isRoot:function(b){return b===b.parent},isMountpoint:function(b){return!!b.mounted},isFile:function(b){return(b&61440)===32768},isDir:function(b){return(b&61440)===16384},isLink:function(b){return(b&61440)===40960},isChrdev:function(b){return(b&61440)===8192},isBlkdev:function(b){return(b&61440)===24576},isFIFO:function(b){return(b&61440)===4096},isSocket:function(b){return(b&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(b){var M=Q.flagModes[b];if(typeof M>"u")throw new Error("Unknown file open mode: "+b);return M},flagsToPermissionString:function(b){var M=["r","w","rw"][b&3];return b&512&&(M+="w"),M},nodePermissions:function(b,M){return Q.ignorePermissions?0:M.indexOf("r")!==-1&&!(b.mode&292)||M.indexOf("w")!==-1&&!(b.mode&146)||M.indexOf("x")!==-1&&!(b.mode&73)?2:0},mayLookup:function(b){var M=Q.nodePermissions(b,"x");return M||(b.node_ops.lookup?0:2)},mayCreate:function(b,M){try{var X=Q.lookupNode(b,M);return 20}catch{}return Q.nodePermissions(b,"wx")},mayDelete:function(b,M,X){var Ae;try{Ae=Q.lookupNode(b,M)}catch(Me){return Me.errno}var xe=Q.nodePermissions(b,"wx");if(xe)return xe;if(X){if(!Q.isDir(Ae.mode))return 54;if(Q.isRoot(Ae)||Q.getPath(Ae)===Q.cwd())return 10}else if(Q.isDir(Ae.mode))return 31;return 0},mayOpen:function(b,M){return b?Q.isLink(b.mode)?32:Q.isDir(b.mode)&&(Q.flagsToPermissionString(M)!=="r"||M&512)?31:Q.nodePermissions(b,Q.flagsToPermissionString(M)):44},MAX_OPEN_FDS:4096,nextfd:function(b,M){b=b||0,M=M||Q.MAX_OPEN_FDS;for(var X=b;X<=M;X++)if(!Q.streams[X])return X;throw new Q.ErrnoError(33)},getStream:function(b){return Q.streams[b]},createStream:function(b,M,X){Q.FSStream||(Q.FSStream=function(){},Q.FSStream.prototype={},Object.defineProperties(Q.FSStream.prototype,{object:{get:function(){return this.node},set:function(ze){this.node=ze}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}}));var Ae=new Q.FSStream;for(var xe in b)Ae[xe]=b[xe];b=Ae;var Me=Q.nextfd(M,X);return b.fd=Me,Q.streams[Me]=b,b},closeStream:function(b){Q.streams[b]=null},chrdev_stream_ops:{open:function(b){var M=Q.getDevice(b.node.rdev);b.stream_ops=M.stream_ops,b.stream_ops.open&&b.stream_ops.open(b)},llseek:function(){throw new Q.ErrnoError(70)}},major:function(b){return b>>8},minor:function(b){return b&255},makedev:function(b,M){return b<<8|M},registerDevice:function(b,M){Q.devices[b]={stream_ops:M}},getDevice:function(b){return Q.devices[b]},getMounts:function(b){for(var M=[],X=[b];X.length;){var Ae=X.pop();M.push(Ae),X.push.apply(X,Ae.mounts)}return M},syncfs:function(b,M){typeof b=="function"&&(M=b,b=!1),Q.syncFSRequests++,Q.syncFSRequests>1&&C("warning: "+Q.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var X=Q.getMounts(Q.root.mount),Ae=0;function xe(ze){return Q.syncFSRequests--,M(ze)}function Me(ze){if(ze)return Me.errored?void 0:(Me.errored=!0,xe(ze));++Ae>=X.length&&xe(null)}X.forEach(function(ze){if(!ze.type.syncfs)return Me(null);ze.type.syncfs(ze,b,Me)})},mount:function(b,M,X){var Ae=X==="/",xe=!X,Me;if(Ae&&Q.root)throw new Q.ErrnoError(10);if(!Ae&&!xe){var ze=Q.lookupPath(X,{follow_mount:!1});if(X=ze.path,Me=ze.node,Q.isMountpoint(Me))throw new Q.ErrnoError(10);if(!Q.isDir(Me.mode))throw new Q.ErrnoError(54)}var Ye={type:b,opts:M,mountpoint:X,mounts:[]},it=b.mount(Ye);return it.mount=Ye,Ye.root=it,Ae?Q.root=it:Me&&(Me.mounted=Ye,Me.mount&&Me.mount.mounts.push(Ye)),it},unmount:function(b){var M=Q.lookupPath(b,{follow_mount:!1});if(!Q.isMountpoint(M.node))throw new Q.ErrnoError(28);var X=M.node,Ae=X.mounted,xe=Q.getMounts(Ae);Object.keys(Q.nameTable).forEach(function(ze){for(var Ye=Q.nameTable[ze];Ye;){var it=Ye.name_next;xe.indexOf(Ye.mount)!==-1&&Q.destroyNode(Ye),Ye=it}}),X.mounted=null;var Me=X.mount.mounts.indexOf(Ae);X.mount.mounts.splice(Me,1)},lookup:function(b,M){return b.node_ops.lookup(b,M)},mknod:function(b,M,X){var Ae=Q.lookupPath(b,{parent:!0}),xe=Ae.node,Me=$t.basename(b);if(!Me||Me==="."||Me==="..")throw new Q.ErrnoError(28);var ze=Q.mayCreate(xe,Me);if(ze)throw new Q.ErrnoError(ze);if(!xe.node_ops.mknod)throw new Q.ErrnoError(63);return xe.node_ops.mknod(xe,Me,M,X)},create:function(b,M){return M=M!==void 0?M:438,M&=4095,M|=32768,Q.mknod(b,M,0)},mkdir:function(b,M){return M=M!==void 0?M:511,M&=1023,M|=16384,Q.mknod(b,M,0)},mkdirTree:function(b,M){for(var X=b.split("/"),Ae="",xe=0;xe<X.length;++xe)if(!!X[xe]){Ae+="/"+X[xe];try{Q.mkdir(Ae,M)}catch(Me){if(Me.errno!=20)throw Me}}},mkdev:function(b,M,X){return typeof X>"u"&&(X=M,M=438),M|=8192,Q.mknod(b,M,X)},symlink:function(b,M){if(!Nr.resolve(b))throw new Q.ErrnoError(44);var X=Q.lookupPath(M,{parent:!0}),Ae=X.node;if(!Ae)throw new Q.ErrnoError(44);var xe=$t.basename(M),Me=Q.mayCreate(Ae,xe);if(Me)throw new Q.ErrnoError(Me);if(!Ae.node_ops.symlink)throw new Q.ErrnoError(63);return Ae.node_ops.symlink(Ae,xe,b)},rename:function(b,M){var X=$t.dirname(b),Ae=$t.dirname(M),xe=$t.basename(b),Me=$t.basename(M),ze,Ye,it;try{ze=Q.lookupPath(b,{parent:!0}),Ye=ze.node,ze=Q.lookupPath(M,{parent:!0}),it=ze.node}catch{throw new Q.ErrnoError(10)}if(!Ye||!it)throw new Q.ErrnoError(44);if(Ye.mount!==it.mount)throw new Q.ErrnoError(75);var Gt=Q.lookupNode(Ye,xe),Zt=Nr.relative(b,Ae);if(Zt.charAt(0)!==".")throw new Q.ErrnoError(28);if(Zt=Nr.relative(M,X),Zt.charAt(0)!==".")throw new Q.ErrnoError(55);var x0;try{x0=Q.lookupNode(it,Me)}catch{}if(Gt!==x0){var zt=Q.isDir(Gt.mode),qt=Q.mayDelete(Ye,xe,zt);if(qt)throw new Q.ErrnoError(qt);if(qt=x0?Q.mayDelete(it,Me,zt):Q.mayCreate(it,Me),qt)throw new Q.ErrnoError(qt);if(!Ye.node_ops.rename)throw new Q.ErrnoError(63);if(Q.isMountpoint(Gt)||x0&&Q.isMountpoint(x0))throw new Q.ErrnoError(10);if(it!==Ye&&(qt=Q.nodePermissions(Ye,"w"),qt))throw new Q.ErrnoError(qt);try{Q.trackingDelegate.willMovePath&&Q.trackingDelegate.willMovePath(b,M)}catch(w0){C("FS.trackingDelegate['willMovePath']('"+b+"', '"+M+"') threw an exception: "+w0.message)}Q.hashRemoveNode(Gt);try{Ye.node_ops.rename(Gt,it,Me)}catch(w0){throw w0}finally{Q.hashAddNode(Gt)}try{Q.trackingDelegate.onMovePath&&Q.trackingDelegate.onMovePath(b,M)}catch(w0){C("FS.trackingDelegate['onMovePath']('"+b+"', '"+M+"') threw an exception: "+w0.message)}}},rmdir:function(b){var M=Q.lookupPath(b,{parent:!0}),X=M.node,Ae=$t.basename(b),xe=Q.lookupNode(X,Ae),Me=Q.mayDelete(X,Ae,!0);if(Me)throw new Q.ErrnoError(Me);if(!X.node_ops.rmdir)throw new Q.ErrnoError(63);if(Q.isMountpoint(xe))throw new Q.ErrnoError(10);try{Q.trackingDelegate.willDeletePath&&Q.trackingDelegate.willDeletePath(b)}catch(ze){C("FS.trackingDelegate['willDeletePath']('"+b+"') threw an exception: "+ze.message)}X.node_ops.rmdir(X,Ae),Q.destroyNode(xe);try{Q.trackingDelegate.onDeletePath&&Q.trackingDelegate.onDeletePath(b)}catch(ze){C("FS.trackingDelegate['onDeletePath']('"+b+"') threw an exception: "+ze.message)}},readdir:function(b){var M=Q.lookupPath(b,{follow:!0}),X=M.node;if(!X.node_ops.readdir)throw new Q.ErrnoError(54);return X.node_ops.readdir(X)},unlink:function(b){var M=Q.lookupPath(b,{parent:!0}),X=M.node,Ae=$t.basename(b),xe=Q.lookupNode(X,Ae),Me=Q.mayDelete(X,Ae,!1);if(Me)throw new Q.ErrnoError(Me);if(!X.node_ops.unlink)throw new Q.ErrnoError(63);if(Q.isMountpoint(xe))throw new Q.ErrnoError(10);try{Q.trackingDelegate.willDeletePath&&Q.trackingDelegate.willDeletePath(b)}catch(ze){C("FS.trackingDelegate['willDeletePath']('"+b+"') threw an exception: "+ze.message)}X.node_ops.unlink(X,Ae),Q.destroyNode(xe);try{Q.trackingDelegate.onDeletePath&&Q.trackingDelegate.onDeletePath(b)}catch(ze){C("FS.trackingDelegate['onDeletePath']('"+b+"') threw an exception: "+ze.message)}},readlink:function(b){var M=Q.lookupPath(b),X=M.node;if(!X)throw new Q.ErrnoError(44);if(!X.node_ops.readlink)throw new Q.ErrnoError(28);return Nr.resolve(Q.getPath(X.parent),X.node_ops.readlink(X))},stat:function(b,M){var X=Q.lookupPath(b,{follow:!M}),Ae=X.node;if(!Ae)throw new Q.ErrnoError(44);if(!Ae.node_ops.getattr)throw new Q.ErrnoError(63);return Ae.node_ops.getattr(Ae)},lstat:function(b){return Q.stat(b,!0)},chmod:function(b,M,X){var Ae;if(typeof b=="string"){var xe=Q.lookupPath(b,{follow:!X});Ae=xe.node}else Ae=b;if(!Ae.node_ops.setattr)throw new Q.ErrnoError(63);Ae.node_ops.setattr(Ae,{mode:M&4095|Ae.mode&-4096,timestamp:Date.now()})},lchmod:function(b,M){Q.chmod(b,M,!0)},fchmod:function(b,M){var X=Q.getStream(b);if(!X)throw new Q.ErrnoError(8);Q.chmod(X.node,M)},chown:function(b,M,X,Ae){var xe;if(typeof b=="string"){var Me=Q.lookupPath(b,{follow:!Ae});xe=Me.node}else xe=b;if(!xe.node_ops.setattr)throw new Q.ErrnoError(63);xe.node_ops.setattr(xe,{timestamp:Date.now()})},lchown:function(b,M,X){Q.chown(b,M,X,!0)},fchown:function(b,M,X){var Ae=Q.getStream(b);if(!Ae)throw new Q.ErrnoError(8);Q.chown(Ae.node,M,X)},truncate:function(b,M){if(M<0)throw new Q.ErrnoError(28);var X;if(typeof b=="string"){var Ae=Q.lookupPath(b,{follow:!0});X=Ae.node}else X=b;if(!X.node_ops.setattr)throw new Q.ErrnoError(63);if(Q.isDir(X.mode))throw new Q.ErrnoError(31);if(!Q.isFile(X.mode))throw new Q.ErrnoError(28);var xe=Q.nodePermissions(X,"w");if(xe)throw new Q.ErrnoError(xe);X.node_ops.setattr(X,{size:M,timestamp:Date.now()})},ftruncate:function(b,M){var X=Q.getStream(b);if(!X)throw new Q.ErrnoError(8);if((X.flags&2097155)===0)throw new Q.ErrnoError(28);Q.truncate(X.node,M)},utime:function(b,M,X){var Ae=Q.lookupPath(b,{follow:!0}),xe=Ae.node;xe.node_ops.setattr(xe,{timestamp:Math.max(M,X)})},open:function(b,M,X,Ae,xe){if(b==="")throw new Q.ErrnoError(44);M=typeof M=="string"?Q.modeStringToFlags(M):M,X=typeof X>"u"?438:X,M&64?X=X&4095|32768:X=0;var Me;if(typeof b=="object")Me=b;else{b=$t.normalize(b);try{var ze=Q.lookupPath(b,{follow:!(M&131072)});Me=ze.node}catch{}}var Ye=!1;if(M&64)if(Me){if(M&128)throw new Q.ErrnoError(20)}else Me=Q.mknod(b,X,0),Ye=!0;if(!Me)throw new Q.ErrnoError(44);if(Q.isChrdev(Me.mode)&&(M&=-513),M&65536&&!Q.isDir(Me.mode))throw new Q.ErrnoError(54);if(!Ye){var it=Q.mayOpen(Me,M);if(it)throw new Q.ErrnoError(it)}M&512&&Q.truncate(Me,0),M&=-641;var Gt=Q.createStream({node:Me,path:Q.getPath(Me),flags:M,seekable:!0,position:0,stream_ops:Me.stream_ops,ungotten:[],error:!1},Ae,xe);Gt.stream_ops.open&&Gt.stream_ops.open(Gt),t.logReadFiles&&!(M&1)&&(Q.readFiles||(Q.readFiles={}),b in Q.readFiles||(Q.readFiles[b]=1,C("FS.trackingDelegate error on read file: "+b)));try{if(Q.trackingDelegate.onOpenFile){var Zt=0;(M&2097155)!==1&&(Zt|=Q.tracking.openFlags.READ),(M&2097155)!==0&&(Zt|=Q.tracking.openFlags.WRITE),Q.trackingDelegate.onOpenFile(b,Zt)}}catch(x0){C("FS.trackingDelegate['onOpenFile']('"+b+"', flags) threw an exception: "+x0.message)}return Gt},close:function(b){if(Q.isClosed(b))throw new Q.ErrnoError(8);b.getdents&&(b.getdents=null);try{b.stream_ops.close&&b.stream_ops.close(b)}catch(M){throw M}finally{Q.closeStream(b.fd)}b.fd=null},isClosed:function(b){return b.fd===null},llseek:function(b,M,X){if(Q.isClosed(b))throw new Q.ErrnoError(8);if(!b.seekable||!b.stream_ops.llseek)throw new Q.ErrnoError(70);if(X!=0&&X!=1&&X!=2)throw new Q.ErrnoError(28);return b.position=b.stream_ops.llseek(b,M,X),b.ungotten=[],b.position},read:function(b,M,X,Ae,xe){if(Ae<0||xe<0)throw new Q.ErrnoError(28);if(Q.isClosed(b))throw new Q.ErrnoError(8);if((b.flags&2097155)===1)throw new Q.ErrnoError(8);if(Q.isDir(b.node.mode))throw new Q.ErrnoError(31);if(!b.stream_ops.read)throw new Q.ErrnoError(28);var Me=typeof xe<"u";if(!Me)xe=b.position;else if(!b.seekable)throw new Q.ErrnoError(70);var ze=b.stream_ops.read(b,M,X,Ae,xe);return Me||(b.position+=ze),ze},write:function(b,M,X,Ae,xe,Me){if(Ae<0||xe<0)throw new Q.ErrnoError(28);if(Q.isClosed(b))throw new Q.ErrnoError(8);if((b.flags&2097155)===0)throw new Q.ErrnoError(8);if(Q.isDir(b.node.mode))throw new Q.ErrnoError(31);if(!b.stream_ops.write)throw new Q.ErrnoError(28);b.flags&1024&&Q.llseek(b,0,2);var ze=typeof xe<"u";if(!ze)xe=b.position;else if(!b.seekable)throw new Q.ErrnoError(70);var Ye=b.stream_ops.write(b,M,X,Ae,xe,Me);ze||(b.position+=Ye);try{b.path&&Q.trackingDelegate.onWriteToFile&&Q.trackingDelegate.onWriteToFile(b.path)}catch(it){C("FS.trackingDelegate['onWriteToFile']('"+b.path+"') threw an exception: "+it.message)}return Ye},allocate:function(b,M,X){if(Q.isClosed(b))throw new Q.ErrnoError(8);if(M<0||X<=0)throw new Q.ErrnoError(28);if((b.flags&2097155)===0)throw new Q.ErrnoError(8);if(!Q.isFile(b.node.mode)&&!Q.isDir(b.node.mode))throw new Q.ErrnoError(43);if(!b.stream_ops.allocate)throw new Q.ErrnoError(138);b.stream_ops.allocate(b,M,X)},mmap:function(b,M,X,Ae,xe,Me,ze){if((Me&2)!==0&&(ze&2)===0&&(b.flags&2097155)!==2)throw new Q.ErrnoError(2);if((b.flags&2097155)===1)throw new Q.ErrnoError(2);if(!b.stream_ops.mmap)throw new Q.ErrnoError(43);return b.stream_ops.mmap(b,M,X,Ae,xe,Me,ze)},msync:function(b,M,X,Ae,xe){return!b||!b.stream_ops.msync?0:b.stream_ops.msync(b,M,X,Ae,xe)},munmap:function(b){return 0},ioctl:function(b,M,X){if(!b.stream_ops.ioctl)throw new Q.ErrnoError(59);return b.stream_ops.ioctl(b,M,X)},readFile:function(b,M){if(M=M||{},M.flags=M.flags||"r",M.encoding=M.encoding||"binary",M.encoding!=="utf8"&&M.encoding!=="binary")throw new Error('Invalid encoding type "'+M.encoding+'"');var X,Ae=Q.open(b,M.flags),xe=Q.stat(b),Me=xe.size,ze=new Uint8Array(Me);return Q.read(Ae,ze,0,Me,0),M.encoding==="utf8"?X=ee(ze,0):M.encoding==="binary"&&(X=ze),Q.close(Ae),X},writeFile:function(b,M,X){X=X||{},X.flags=X.flags||"w";var Ae=Q.open(b,X.flags,X.mode);if(typeof M=="string"){var xe=new Uint8Array(G(M)+1),Me=U(M,xe,0,xe.length);Q.write(Ae,xe,0,Me,void 0,X.canOwn)}else if(ArrayBuffer.isView(M))Q.write(Ae,M,0,M.byteLength,void 0,X.canOwn);else throw new Error("Unsupported data type");Q.close(Ae)},cwd:function(){return Q.currentPath},chdir:function(b){var M=Q.lookupPath(b,{follow:!0});if(M.node===null)throw new Q.ErrnoError(44);if(!Q.isDir(M.node.mode))throw new Q.ErrnoError(54);var X=Q.nodePermissions(M.node,"x");if(X)throw new Q.ErrnoError(X);Q.currentPath=M.path},createDefaultDirectories:function(){Q.mkdir("/tmp"),Q.mkdir("/home"),Q.mkdir("/home/web_user")},createDefaultDevices:function(){Q.mkdir("/dev"),Q.registerDevice(Q.makedev(1,3),{read:function(){return 0},write:function(Ae,xe,Me,ze,Ye){return ze}}),Q.mkdev("/dev/null",Q.makedev(1,3)),xi.register(Q.makedev(5,0),xi.default_tty_ops),xi.register(Q.makedev(6,0),xi.default_tty1_ops),Q.mkdev("/dev/tty",Q.makedev(5,0)),Q.mkdev("/dev/tty1",Q.makedev(6,0));var b;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var M=new Uint8Array(1);b=function(){return crypto.getRandomValues(M),M[0]}}else if(d)try{var X=null;b=function(){return X.randomBytes(1)[0]}}catch{}b||(b=function(){Ce("random_device")}),Q.createDevice("/dev","random",b),Q.createDevice("/dev","urandom",b),Q.mkdir("/dev/shm"),Q.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){Q.mkdir("/proc"),Q.mkdir("/proc/self"),Q.mkdir("/proc/self/fd"),Q.mount({mount:function(){var b=Q.createNode("/proc/self","fd",16895,73);return b.node_ops={lookup:function(M,X){var Ae=+X,xe=Q.getStream(Ae);if(!xe)throw new Q.ErrnoError(8);var Me={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return xe.path}}};return Me.parent=Me,Me}},b}},{},"/proc/self/fd")},createStandardStreams:function(){t.stdin?Q.createDevice("/dev","stdin",t.stdin):Q.symlink("/dev/tty","/dev/stdin"),t.stdout?Q.createDevice("/dev","stdout",null,t.stdout):Q.symlink("/dev/tty","/dev/stdout"),t.stderr?Q.createDevice("/dev","stderr",null,t.stderr):Q.symlink("/dev/tty1","/dev/stderr"),Q.open("/dev/stdin","r"),Q.open("/dev/stdout","w"),Q.open("/dev/stderr","w")},ensureErrnoError:function(){Q.ErrnoError||(Q.ErrnoError=function(M,X){this.node=X,this.setErrno=function(Ae){this.errno=Ae},this.setErrno(M),this.message="FS error"},Q.ErrnoError.prototype=new Error,Q.ErrnoError.prototype.constructor=Q.ErrnoError,[44].forEach(function(b){Q.genericErrors[b]=new Q.ErrnoError(b),Q.genericErrors[b].stack="<generic error, no stack>"}))},staticInit:function(){Q.ensureErrnoError(),Q.nameTable=new Array(4096),Q.mount(S0,{},"/"),Q.createDefaultDirectories(),Q.createDefaultDevices(),Q.createSpecialDirectories(),Q.filesystems={MEMFS:S0}},init:function(b,M,X){Q.init.initialized=!0,Q.ensureErrnoError(),t.stdin=b||t.stdin,t.stdout=M||t.stdout,t.stderr=X||t.stderr,Q.createStandardStreams()},quit:function(){Q.init.initialized=!1;var b=t._fflush;b&&b(0);for(var M=0;M<Q.streams.length;M++){var X=Q.streams[M];!X||Q.close(X)}},getMode:function(b,M){var X=0;return b&&(X|=365),M&&(X|=146),X},joinPath:function(b,M){var X=$t.join.apply(null,b);return M&&X[0]=="/"&&(X=X.substr(1)),X},absolutePath:function(b,M){return Nr.resolve(M,b)},standardizePath:function(b){return $t.normalize(b)},findObject:function(b,M){var X=Q.analyzePath(b,M);return X.exists?X.object:(ta(X.error),null)},analyzePath:function(b,M){try{var X=Q.lookupPath(b,{follow:!M});b=X.path}catch{}var Ae={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var X=Q.lookupPath(b,{parent:!0});Ae.parentExists=!0,Ae.parentPath=X.path,Ae.parentObject=X.node,Ae.name=$t.basename(b),X=Q.lookupPath(b,{follow:!M}),Ae.exists=!0,Ae.path=X.path,Ae.object=X.node,Ae.name=X.node.name,Ae.isRoot=X.path==="/"}catch(xe){Ae.error=xe.errno}return Ae},createFolder:function(b,M,X,Ae){var xe=$t.join2(typeof b=="string"?b:Q.getPath(b),M),Me=Q.getMode(X,Ae);return Q.mkdir(xe,Me)},createPath:function(b,M,X,Ae){b=typeof b=="string"?b:Q.getPath(b);for(var xe=M.split("/").reverse();xe.length;){var Me=xe.pop();if(!!Me){var ze=$t.join2(b,Me);try{Q.mkdir(ze)}catch{}b=ze}}return ze},createFile:function(b,M,X,Ae,xe){var Me=$t.join2(typeof b=="string"?b:Q.getPath(b),M),ze=Q.getMode(Ae,xe);return Q.create(Me,ze)},createDataFile:function(b,M,X,Ae,xe,Me){var ze=M?$t.join2(typeof b=="string"?b:Q.getPath(b),M):b,Ye=Q.getMode(Ae,xe),it=Q.create(ze,Ye);if(X){if(typeof X=="string"){for(var Gt=new Array(X.length),Zt=0,x0=X.length;Zt<x0;++Zt)Gt[Zt]=X.charCodeAt(Zt);X=Gt}Q.chmod(it,Ye|146);var zt=Q.open(it,"w");Q.write(zt,X,0,X.length,0,Me),Q.close(zt),Q.chmod(it,Ye)}return it},createDevice:function(b,M,X,Ae){var xe=$t.join2(typeof b=="string"?b:Q.getPath(b),M),Me=Q.getMode(!!X,!!Ae);Q.createDevice.major||(Q.createDevice.major=64);var ze=Q.makedev(Q.createDevice.major++,0);return Q.registerDevice(ze,{open:function(Ye){Ye.seekable=!1},close:function(Ye){Ae&&Ae.buffer&&Ae.buffer.length&&Ae(10)},read:function(Ye,it,Gt,Zt,x0){for(var zt=0,qt=0;qt<Zt;qt++){var w0;try{w0=X()}catch{throw new Q.ErrnoError(29)}if(w0===void 0&&zt===0)throw new Q.ErrnoError(6);if(w0==null)break;zt++,it[Gt+qt]=w0}return zt&&(Ye.node.timestamp=Date.now()),zt},write:function(Ye,it,Gt,Zt,x0){for(var zt=0;zt<Zt;zt++)try{Ae(it[Gt+zt])}catch{throw new Q.ErrnoError(29)}return Zt&&(Ye.node.timestamp=Date.now()),zt}}),Q.mkdev(xe,Me,ze)},createLink:function(b,M,X,Ae,xe){var Me=$t.join2(typeof b=="string"?b:Q.getPath(b),M);return Q.symlink(X,Me)},forceLoadFile:function(b){if(b.isDevice||b.isFolder||b.link||b.contents)return!0;var M=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(g)try{b.contents=Jr(g(b.url),!0),b.usedBytes=b.contents.length}catch{M=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return M||ta(29),M},createLazyFile:function(b,M,X,Ae,xe){function Me(){this.lengthKnown=!1,this.chunks=[]}if(Me.prototype.get=function(zt){if(!(zt>this.length-1||zt<0)){var qt=zt%this.chunkSize,w0=zt/this.chunkSize|0;return this.getter(w0)[qt]}},Me.prototype.setDataGetter=function(zt){this.getter=zt},Me.prototype.cacheLength=function(){var zt=new XMLHttpRequest;if(zt.open("HEAD",X,!1),zt.send(null),!(zt.status>=200&&zt.status<300||zt.status===304))throw new Error("Couldn't load "+X+". Status: "+zt.status);var qt=Number(zt.getResponseHeader("Content-length")),w0,Kn=(w0=zt.getResponseHeader("Accept-Ranges"))&&w0==="bytes",ka=(w0=zt.getResponseHeader("Content-Encoding"))&&w0==="gzip",Zr=1024*1024;Kn||(Zr=qt);var N0=function(wi,kn){if(wi>kn)throw new Error("invalid range ("+wi+", "+kn+") or no bytes requested!");if(kn>qt-1)throw new Error("only "+qt+" bytes available! programmer error!");var un=new XMLHttpRequest;if(un.open("GET",X,!1),qt!==Zr&&un.setRequestHeader("Range","bytes="+wi+"-"+kn),typeof Uint8Array<"u"&&(un.responseType="arraybuffer"),un.overrideMimeType&&un.overrideMimeType("text/plain; charset=x-user-defined"),un.send(null),!(un.status>=200&&un.status<300||un.status===304))throw new Error("Couldn't load "+X+". Status: "+un.status);return un.response!==void 0?new Uint8Array(un.response||[]):Jr(un.responseText||"",!0)},mr=this;mr.setDataGetter(function(wi){var kn=wi*Zr,un=(wi+1)*Zr-1;if(un=Math.min(un,qt-1),typeof mr.chunks[wi]>"u"&&(mr.chunks[wi]=N0(kn,un)),typeof mr.chunks[wi]>"u")throw new Error("doXHR failed!");return mr.chunks[wi]}),(ka||!qt)&&(Zr=qt=1,qt=this.getter(0).length,Zr=qt,v("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=qt,this._chunkSize=Zr,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!c)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var ze=new Me;Object.defineProperties(ze,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var Ye={isDevice:!1,contents:ze}}else var Ye={isDevice:!1,url:X};var it=Q.createFile(b,M,Ye,Ae,xe);Ye.contents?it.contents=Ye.contents:Ye.url&&(it.contents=null,it.url=Ye.url),Object.defineProperties(it,{usedBytes:{get:function(){return this.contents.length}}});var Gt={},Zt=Object.keys(it.stream_ops);return Zt.forEach(function(x0){var zt=it.stream_ops[x0];Gt[x0]=function(){if(!Q.forceLoadFile(it))throw new Q.ErrnoError(29);return zt.apply(null,arguments)}}),Gt.read=function(zt,qt,w0,Kn,ka){if(!Q.forceLoadFile(it))throw new Q.ErrnoError(29);var Zr=zt.node.contents;if(ka>=Zr.length)return 0;var N0=Math.min(Zr.length-ka,Kn);if(Zr.slice)for(var mr=0;mr<N0;mr++)qt[w0+mr]=Zr[ka+mr];else for(var mr=0;mr<N0;mr++)qt[w0+mr]=Zr.get(ka+mr);return N0},it.stream_ops=Gt,it},createPreloadedFile:function(b,M,X,Ae,xe,Me,ze,Ye,it,Gt){Browser.init();var Zt=M?Nr.resolve($t.join2(b,M)):b;function x0(zt){function qt(Kn){Gt&&Gt(),Ye||Q.createDataFile(b,M,Kn,Ae,xe,it),Me&&Me(),St()}var w0=!1;t.preloadPlugins.forEach(function(Kn){w0||Kn.canHandle(Zt)&&(Kn.handle(zt,Zt,qt,function(){ze&&ze(),St()}),w0=!0)}),w0||qt(zt)}gt(),typeof X=="string"?Browser.asyncLoad(X,function(zt){x0(zt)},ze):x0(X)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(b,M,X){M=M||function(){},X=X||function(){};var Ae=Q.indexedDB();try{var xe=Ae.open(Q.DB_NAME(),Q.DB_VERSION)}catch(Me){return X(Me)}xe.onupgradeneeded=function(){v("creating db");var ze=xe.result;ze.createObjectStore(Q.DB_STORE_NAME)},xe.onsuccess=function(){var ze=xe.result,Ye=ze.transaction([Q.DB_STORE_NAME],"readwrite"),it=Ye.objectStore(Q.DB_STORE_NAME),Gt=0,Zt=0,x0=b.length;function zt(){Zt==0?M():X()}b.forEach(function(qt){var w0=it.put(Q.analyzePath(qt).object.contents,qt);w0.onsuccess=function(){Gt++,Gt+Zt==x0&&zt()},w0.onerror=function(){Zt++,Gt+Zt==x0&&zt()}}),Ye.onerror=X},xe.onerror=X},loadFilesFromDB:function(b,M,X){M=M||function(){},X=X||function(){};var Ae=Q.indexedDB();try{var xe=Ae.open(Q.DB_NAME(),Q.DB_VERSION)}catch(Me){return X(Me)}xe.onupgradeneeded=X,xe.onsuccess=function(){var ze=xe.result;try{var Ye=ze.transaction([Q.DB_STORE_NAME],"readonly")}catch(qt){X(qt);return}var it=Ye.objectStore(Q.DB_STORE_NAME),Gt=0,Zt=0,x0=b.length;function zt(){Zt==0?M():X()}b.forEach(function(qt){var w0=it.get(qt);w0.onsuccess=function(){Q.analyzePath(qt).exists&&Q.unlink(qt),Q.createDataFile($t.dirname(qt),$t.basename(qt),w0.result,!0,!0,!0),Gt++,Gt+Zt==x0&&zt()},w0.onerror=function(){Zt++,Gt+Zt==x0&&zt()}}),Ye.onerror=X},xe.onerror=X}},he={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(b,M){if(M[0]!=="/"){var X;if(b===-100)X=Q.cwd();else{var Ae=Q.getStream(b);if(!Ae)throw new Q.ErrnoError(8);X=Ae.path}M=$t.join2(X,M)}return M},doStat:function(b,M,X){try{var Ae=b(M)}catch(xe){if(xe&&xe.node&&$t.normalize(M)!==$t.normalize(Q.getPath(xe.node)))return-54;throw xe}return We[X>>2]=Ae.dev,We[X+4>>2]=0,We[X+8>>2]=Ae.ino,We[X+12>>2]=Ae.mode,We[X+16>>2]=Ae.nlink,We[X+20>>2]=Ae.uid,We[X+24>>2]=Ae.gid,We[X+28>>2]=Ae.rdev,We[X+32>>2]=0,a0=[Ae.size>>>0,(_t=Ae.size,+Le(_t)>=1?_t>0?(Ee(+rt(_t/4294967296),4294967295)|0)>>>0:~~+Re((_t-+(~~_t>>>0))/4294967296)>>>0:0)],We[X+40>>2]=a0[0],We[X+44>>2]=a0[1],We[X+48>>2]=4096,We[X+52>>2]=Ae.blocks,We[X+56>>2]=Ae.atime.getTime()/1e3|0,We[X+60>>2]=0,We[X+64>>2]=Ae.mtime.getTime()/1e3|0,We[X+68>>2]=0,We[X+72>>2]=Ae.ctime.getTime()/1e3|0,We[X+76>>2]=0,a0=[Ae.ino>>>0,(_t=Ae.ino,+Le(_t)>=1?_t>0?(Ee(+rt(_t/4294967296),4294967295)|0)>>>0:~~+Re((_t-+(~~_t>>>0))/4294967296)>>>0:0)],We[X+80>>2]=a0[0],We[X+84>>2]=a0[1],0},doMsync:function(b,M,X,Ae,xe){var Me=Te.slice(b,b+X);Q.msync(M,Me,xe,X,Ae)},doMkdir:function(b,M){return b=$t.normalize(b),b[b.length-1]==="/"&&(b=b.substr(0,b.length-1)),Q.mkdir(b,M,0),0},doMknod:function(b,M,X){switch(M&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return Q.mknod(b,M,X),0},doReadlink:function(b,M,X){if(X<=0)return-28;var Ae=Q.readlink(b),xe=Math.min(X,G(Ae)),Me=Be[M+xe];return O(Ae,M,X+1),Be[M+xe]=Me,xe},doAccess:function(b,M){if(M&-8)return-28;var X,Ae=Q.lookupPath(b,{follow:!0});if(X=Ae.node,!X)return-44;var xe="";return M&4&&(xe+="r"),M&2&&(xe+="w"),M&1&&(xe+="x"),xe&&Q.nodePermissions(X,xe)?-2:0},doDup:function(b,M,X){var Ae=Q.getStream(X);return Ae&&Q.close(Ae),Q.open(b,M,0,X,X).fd},doReadv:function(b,M,X,Ae){for(var xe=0,Me=0;Me<X;Me++){var ze=We[M+Me*8>>2],Ye=We[M+(Me*8+4)>>2],it=Q.read(b,Be,ze,Ye,Ae);if(it<0)return-1;if(xe+=it,it<Ye)break}return xe},doWritev:function(b,M,X,Ae){for(var xe=0,Me=0;Me<X;Me++){var ze=We[M+Me*8>>2],Ye=We[M+(Me*8+4)>>2],it=Q.write(b,Be,ze,Ye,Ae);if(it<0)return-1;xe+=it}return xe},varargs:0,get:function(b){he.varargs+=4;var M=We[he.varargs-4>>2];return M},getStr:function(){var b=ce(he.get());return b},getStreamFromFD:function(b){b===void 0&&(b=he.get());var M=Q.getStream(b);if(!M)throw new Q.ErrnoError(8);return M},get64:function(){var b=he.get();return he.get(),b},getZero:function(){he.get()}};function qe(b,M){he.varargs=M;try{var X=he.getStreamFromFD(),Ae=he.get();switch(Ae){case 0:{var xe=he.get();if(xe<0)return-28;var Me;return Me=Q.open(X.path,X.flags,0,xe),Me.fd}case 1:case 2:return 0;case 3:return X.flags;case 4:{var xe=he.get();return X.flags|=xe,0}case 12:{var xe=he.get(),ze=0;return ye[xe+ze>>1]=2,0}case 13:case 14:return 0;case 16:case 8:return-28;case 9:return ta(28),-1;default:return-28}}catch(Ye){return(typeof Q>"u"||!(Ye instanceof Q.ErrnoError))&&Ce(Ye),-Ye.errno}}function st(b,M){he.varargs=M;try{var X=he.getStr(),Ae=he.get(),xe=he.get(),Me=Q.open(X,Ae,xe);return Me.fd}catch(ze){return(typeof Q>"u"||!(ze instanceof Q.ErrnoError))&&Ce(ze),-ze.errno}}function Ze(b,M){he.varargs=M;try{var X=he.getStreamFromFD(),Ae=he.get();switch(Ae){case 21509:case 21505:return X.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return X.tty?0:-59;case 21519:{if(!X.tty)return-59;var xe=he.get();return We[xe>>2]=0,0}case 21520:return X.tty?-28:-59;case 21531:{var xe=he.get();return Q.ioctl(X,Ae,xe)}case 21523:return X.tty?0:-59;case 21524:return X.tty?0:-59;default:Ce("bad ioctl syscall "+Ae)}}catch(Me){return(typeof Q>"u"||!(Me instanceof Q.ErrnoError))&&Ce(Me),-Me.errno}}function ft(){}function t0(b,M,X){Te.set(Te.subarray(M,M+X),b)}function p0(b){Ce("OOM")}function E0(b){p0()}function m0(b){En(b)}function D0(b){try{var M=he.getStreamFromFD(b);return Q.close(M),0}catch(X){return(typeof Q>"u"||!(X instanceof Q.ErrnoError))&&Ce(X),X.errno}}function f0(b,M,X,Ae){try{var xe=he.getStreamFromFD(b),Me=he.doReadv(xe,M,X);return We[Ae>>2]=Me,0}catch(ze){return(typeof Q>"u"||!(ze instanceof Q.ErrnoError))&&Ce(ze),ze.errno}}function jt(b,M,X,Ae,xe){try{var Me=he.getStreamFromFD(b),ze=4294967296,Ye=X*ze+(M>>>0),it=9007199254740992;return Ye<=-it||Ye>=it?-61:(Q.llseek(Me,Ye,Ae),a0=[Me.position>>>0,(_t=Me.position,+Le(_t)>=1?_t>0?(Ee(+rt(_t/4294967296),4294967295)|0)>>>0:~~+Re((_t-+(~~_t>>>0))/4294967296)>>>0:0)],We[xe>>2]=a0[0],We[xe+4>>2]=a0[1],Me.getdents&&Ye===0&&Ae===0&&(Me.getdents=null),0)}catch(Gt){return(typeof Q>"u"||!(Gt instanceof Q.ErrnoError))&&Ce(Gt),Gt.errno}}function z0(b,M,X,Ae){try{var xe=he.getStreamFromFD(b),Me=he.doWritev(xe,M,X);return We[Ae>>2]=Me,0}catch(ze){return(typeof Q>"u"||!(ze instanceof Q.ErrnoError))&&Ce(ze),ze.errno}}Q.staticInit();function Jr(b,M,X){var Ae=X>0?X:G(b)+1,xe=new Array(Ae),Me=U(b,xe,0,xe.length);return M&&(xe.length=Me),xe}var c0={f:ki,c:qe,k:st,h:Ze,a:ft,j:t0,d:E0,l:m0,b:D0,g:f0,i:jt,e:z0,memory:R,table:j},ai=Wt();t.asm=ai;var mn=t.___wasm_call_ctors=function(){return(mn=t.___wasm_call_ctors=t.asm.m).apply(null,arguments)};t._main=function(){return(t._main=t.asm.n).apply(null,arguments)},t.___errno_location=function(){return(t.___errno_location=t.asm.o).apply(null,arguments)};var C0=t._malloc=function(){return(C0=t._malloc=t.asm.p).apply(null,arguments)},Ur=t.stackSave=function(){return(Ur=t.stackSave=t.asm.q).apply(null,arguments)},e0=t.stackAlloc=function(){return(e0=t.stackAlloc=t.asm.r).apply(null,arguments)},Rt=t.stackRestore=function(){return(Rt=t.stackRestore=t.asm.s).apply(null,arguments)};t.asm=ai,t.ccall=I,t.cwrap=q,t.setValue=H,t.FS=Q;var Dn;t.then=function(b){if(Dn)b(t);else{var M=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){M&&M(),b(t)}}return t};function vi(b){this.name="ExitStatus",this.message="Program terminated with exit("+b+")",this.status=b}$e=function b(){Dn||o0(),Dn||($e=b)};function Vr(b){var M=t._main;b=b||[];var X=b.length+1,Ae=e0((X+1)*4);We[Ae>>2]=re(o);for(var xe=1;xe<X;xe++)We[(Ae>>2)+xe]=re(b[xe-1]);We[(Ae>>2)+X]=0;try{var Me=M(X,Ae);En(Me,!0)}catch(Ye){if(Ye instanceof vi)return;if(Ye=="unwind"){V=!0;return}else{var ze=Ye;Ye&&typeof Ye=="object"&&Ye.stack&&(ze=[Ye,Ye.stack]),C("exception thrown: "+ze),s(1,Ye)}}finally{}}function o0(b){if(b=b||a,ve>0||(fe(),ve>0))return;function M(){Dn||(Dn=!0,!te&&(He(),ae(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Ni&&Vr(b),Y()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),M()},1)):M()}t.run=o0;function En(b,M){M&&V&&b===0||(V||(te=!0,t.onExit&&t.onExit(b)),s(b,new vi(b)))}if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();var Ni=!0;return t.noInitialRun&&(Ni=!1),V=!0,o0(),e}}();/** @license

cpp.js - Simple implementation of the C Preprocessor in Javascript

Copyright (c) 2011, Alexander Christoph Gessler
All rights reserved.

Redistribution and use of this software in source and binary forms,
with or without modification, are permitted provided that the
following conditions are met:

* Redistributions of source code must retain the above
  copyright notice, this list of conditions and the
  following disclaimer.

* Redistributions in binary form must reproduce the above
  copyright notice, this list of conditions and the
  following disclaimer in the documentation and/or other
  materials provided with the distribution.

* Neither the name of the cpp.js team, nor the names of its
  contributors may be used to endorse or promote products
  derived from this software without specific prior
  written permission of the cpp.js Development Team.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function HM(n){var e=function(U){return U.trim()},t=function(U){U=("__"+U.replace(/\r\n/g,`
`)+"__").split("");var O=!1,G=!1,re=!1,oe=0;for(let se=0,be=U.length;se<be;se++){if(re){(U[se]==="'"||U[se]==='"')&&U[se-1]!=="\\"&&(re=!1);continue}if(O){U[se]==="*"&&U[se+1]==="/"&&(U[se+1]="",O=!1),U[se]="",U[se]===`
`&&++oe;continue}if(G){U[se+1]===`
`&&(G=!1),U[se]="";continue}if(U[se]===`
`)if(U[se-1]==="\\")U[se-1]="",U[se]="",++oe;else for(;oe>0;)U[se]+=`
`,--oe;if(re=U[se]==="'"||U[se]==='"',U[se]==="/"){if(U[se+1]==="*"){U[se]="",O=!0;continue}if(U[se+1]==="/"){U[se]="",G=!0;continue}}}return U.join("").slice(2,-2)},r=function(U,O){return(U[O]==='"'||U[O]==="'")&&(!O||U[O-1]!=="\\"||O>1&&U[O-2]==="\\")},i={signal_char:"#",warn_func:function(U){console.log(U)},error_func:function(U){throw console.log(U),U},comment_stripper:t,include_func:null,completion_func:null,pragma_func:function(U){return null}};if(n)for(var a in i)a in n||(n[a]=i[a]);else n=i;n.include_func&&!n.completion_func&&n.error_func("include_func but not completion_func specified");var o=n.error_func;n.error_func=function(U){throw o(U),U};var s=new RegExp("^"+n.signal_char+"(\\w+)[ 	]*(.*?)[ 	]*$","m"),l=/\b(d(?!efined)|[a-ce-zA-Z_])\w*(?![\w"])/g,c=/^(d(?!efined)|[a-ce-zA-Z_])\w*$/g,d=/^((?:d(?!efined)|[a-ce-zA-Z_])\w*)\s*\((.*)\)$/g,h=/defined\s+([a-zA-Z_]\w*)/g,f=/defined\s*\((\s*[a-zA-Z_]\w*\s*)\)/g,m=/__defined_magic_([a-zA-Z_]\w*)_/,g=/\b(\+|-|)(0|0x|)([1-9a-f][0-9a-f]*|0)([ul]*)\b/ig,x=/"(.*?)"/g,E=/[+\-*%\/&^|]?=/g,_=/--|\+\+/g,v=/(?:(<)(.*)>|"(.*)")(.*)/,C="__doublesharp_magic__",D=new RegExp(C,"g"),V="__whitespace_magic__",H=new RegExp(V,"g"),R="__empty_magic__",j=new RegExp(R,"g"),te="__nosubs__",$=new RegExp(te,"g"),z={"==":1,"!=":1,"+":1,"-":1,"*":1,"/":1,"%":1,"<=":1,">=":1,"<":1,">":1,"=":1,"+=":1,"*=":1,"/=":1,"&=":1,"|=":1,"^=":1,"#":1,"##":1,"->":1},I={},q={},P=null,ee=0,ce={};return{clear:function(){I={},ce={},q={},ee=0},defined:function(U){return U in I},define:function(U,O){var G=this._get_macro_info(U);!this._is_identifier(U)&&!G&&n.error_func("not a valid preprocessor identifier: '"+U+"'"),typeof O=="number"&&(O=O.toString(10)),G?(U=G.name,this.undefine(U),q[U]=G):this.undefine(U),I[U]=O||"",ce[U.length]=(ce[U.length]||0)+1,U.length>ee&&(ee=U.length)},undefine:function(U){if(U in I){delete I[U];var O=ce[U.length]-1;if(U.length===ee&&!O){ee=0;for(let re=U.length-1;re>=0;--re)if(ce[re]){ee=re;break}}ce[U.length]=O,delete q[U]}else{var G=this._get_macro_info(U);G&&this.undefine(G.name)}},define_multiple:function(U){for(var O in U)this.define(O,U[O])},run:function(U,O){O=O||"<unnamed>",U||ye("input empty or null"),U=n.comment_stripper(U);var G=U.split(s),re=new Array(Math.floor(G.length/3)+2),oe=0;for(let lt=0;lt<re.length;++lt)re[lt]="";var se=0,be=1,Be,Te=[],ye=function(lt){n.error_func("(cpp) error # "+O+":"+be+": "+lt)},We=function(lt){n.warn_func("(cpp) warning # "+O+":"+be+": "+lt)},at=this,Ke=function(lt,Ie,Ue){switch(lt){case"define":var k,De;Ie=e(Ie);for(var we=void 0,le=0;le<Ie.length;++le)if(Ie[le]==="(")we=(we||0)+1;else if(Ie[le]===")"&&--we===0||Ie[le].match(/\s/)&&we===void 0){Ie[le]===")"&&++le,k=Ie.slice(0,le),De=e(Ie.slice(le));break}we&&ye("unbalanced parentheses in define: "+Ie),k===void 0&&(k=Ie),at.defined(k)&&We(k+" redefined"),!at._is_identifier(k)&&!at._is_macro(k)&&ye("not a valid preprocessor identifier: '"+k+"'"),at.define(k,De);break;case"undef":at.undefine(Ie);break;case"include":Ie=at.subs(Ie,{},ye,We);var ne=Ie.match(v);ne[4]&&ye("unrecognized characters in include: "+Ie);var fe=(ne[2]||"")+(ne[3]||"");return n.include_func||ye("include directive not supported, no handler specified"),n.include_func(fe,ne[1]==="<",function(He){He===null&&ye("failed to access include file: "+fe);var ae={};for(var Y in n)ae[Y]=n[Y];var _e;ae.completion_func=function(Fe,Le,Re){for(re.length=oe,oe+=Le.length,re=re.concat(Le),at._set_state(_e),++Ue;Ue<G.length;++Ue)if(!tt(Ue,G[Ue]))return!1;at._result(re,I)},_e=HM(ae),_e._set_state(at),_e.run(He,fe)}),!1;case"error":ye("#error: "+Ie);break;case"pragma":n.pragma_func(Ie)||We("ignoring unrecognized #pragma: "+Ie);break;default:We("unrecognized preprocessor command: "+lt);break}return!0},tt=function(lt,Ue){var Ue=G[lt];switch(lt%3){case 0:be+=Ue.split(`
`).length-1,!se&&e(Ue).length&&(re[oe++]=at.subs(Ue,ye,We));break;case 1:Be=Ue;break;case 2:var k=!0;switch(Be){case"ifdef":case"ifndef":Ue||ye("expected identifier after "+Be),Ue="(defined "+Ue+")",Be=="ifndef"&&(Ue="!"+Ue);case"if":Te.push(!1),Ue.length||ye("expected identifier after if");case"else":case"elif":var De=!1;(Be=="elif"||Be=="else")&&(De=Te[Te.length-1],se>0&&--se,Be=="else"&&Ue.length&&We("ignoring tokens after else")),se>0||De||Be!="else"&&!at._eval(Ue,ye,We)?++se:Te[Te.length-1]=!0;break;case"endif":Te.length||ye("endif with no matching if"),se>0&&--se,Te.pop();break;default:k=se>0}if(!k&&!Ke(Be,Ue,lt))return!1;break}return!0};for(let lt=0;lt<G.length;++lt)if(!tt(lt,G[lt]))return null;return Te.length>0&&ye("unexpected EOF, expected endif"),this._result(re,I)},subs:function(U,O,G,re,oe){G=G||n.error_func,re=re||n.warn_func;var se=1e10,be={};if(O)for(let lt in O)be[lt]=se;oe=oe||0;for(var Be=U,Te=/\b.|["']/g,ye,We=[],at=!1;ye=Te.exec(Be);){var Ke=ye.index;if(r(Be,Ke)&&(at=!at),!at)for(let lt=Math.min(Be.length-Ke,ee);lt>=1;--lt){if(!ce[lt])continue;let Ie=Be.slice(Ke,Ke+lt);if(Ie in I){if(be[Ie]>Ke){We.push(Be.slice(0,Ke)),We.push(te+Ie),Be=Be.slice(Ke+Ie.length),Te.lastIndex=0;for(let Ue in be)be[Ue]!=se&&(be[Ue]>Ke?be[Ue]-=Ke+Ie.length:delete be[Ue]);break}else delete be[Ie];var tt;if(this._is_macro(Ie)?tt=this._subs_macro(Be,Ie,{},G,re,oe,Ke):tt=this._subs_simple(Be,Ie,{},G,re,oe,Ke),tt===null)continue;tt[0]=this._handle_ops(tt[0],G,re),tt[0]=this._handle_pragma(tt[0],G,re),We.push(Be.slice(0,Ke)),Be=tt[0]+Be.slice(Ke+tt[1]),Te.lastIndex=0;for(let Ue in be)be[Ue]!=se&&(be[Ue]>Ke?be[Ue]=tt[0].length-tt[1]+(be[Ue]-Ke):delete be[Ue]);be[Ie]=tt[0].length;break}}}return We.push(Be),Be=We.join(""),oe||(Be=this._remove_sentinels(Be)),Be},_set_state:function(U){U=U._get_state(),I=U.state,ce=U.macro_counts_by_length,q=U.macro_cache,ee=U.max_macro_length},_get_state:function(U){return{state:I,macro_counts_by_length:ce,macro_cache:q,max_macro_length:ee}},_result:function(U,O){for(let re=U.length-1;re>=0&&!U[re];--re)U.pop();var G=U.join(`
`);return n.completion_func&&n.completion_func(G,U,O),G},_is_identifier:function(U){return!!U.match(c)},_is_macro:function(U){return this._get_macro_info(U)!=null},_is_pp_special_token:function(U){return e(U)in z},_get_macro_info:function(U){if(q[U])return q[U];var O=d.exec(U);if(!O)return null;d.lastIndex=0;var G=O[2].split(",");if(G.length===1&&!e(G[0]))G=[];else for(let se=0;se<G.length;++se){var re=G[se]=e(G[se]);if(!this._is_identifier(re)&&!this._is_macro(re))return null}var oe=new RegExp(O[1]+"\\s*\\(","g");return{params:G,pat:oe,name:O[1],full:U}},_remove_sentinels:function(U){return U=U.replace(D,"##"),U=U.replace(H," "),U=U.replace(j,""),U=U.replace($,""),U},_handle_pragma:function(U,O,G){var re=this;return U.replace(/_Pragma\s*\(\s*"(.*?([^\\]|\\\\))"\s*\)/g,function(oe,se){return se=se.replace(/\\"/g,'"').replace(/\\\\/g,"\\"),se=re._remove_sentinels(se),se=re._concatenate_strings(se),n.pragma_func(se)||G("unrecognized _Pragma(): "+se),""})},_concatenate_strings:function(U){var O=!1,G=null,re=0,oe=[];for(let se=0;se<U.length;++se)r(U,se)?(O?G=se:G!==null&&(oe.push(U.slice(re,G)),re=se+1),O=!O):U[se].match(/\s/)||(oe.push(U.slice(re,se)),re=se,G=null);return oe.push(U.slice(re)),oe.join("")},_handle_ops:function(U,O,G){var re=[],oe=!1,se,be;for(let lt=0;lt<U.length-1;++lt){if(r(U,lt)){oe=!oe;continue}if(!(U[lt]!=="#"||oe)){var Be=U[lt+1]==="#",Te=null,ye=null,We=!1,at=0;if(Be){for(se=lt-1;se>=0;--se)if(!U[se].match(/\s/))r(U,se)?We=!We:U[se]==="("?++at:U[se]===")"&&--at,Te=U[se]+(Te||"");else if(Te!==null){if(!We&&!at)break;Te=" "+Te}++se}else se=lt;We=!1,at=0;var Ke=!0;for(be=lt+(Be?2:1);be<U.length;++be)if(!U[be].match(/\s/))Ke=!0,r(U,be)?We=!We:U[be]==="("?++at:U[be]===")"&&--at,ye=(ye||"")+U[be];else{if(ye!==null&&!We&&!at)break;(Be||Ke||We)&&ye!==null&&(ye=ye+" ",Ke=!1)}ye=e(ye||"");var tt;Be?(Te=e(Te||""),(!ye||!Te)&&O("## cannot appear at either end of a macro expansion"),(this._is_pp_special_token(Te)||this._is_pp_special_token(ye))&&!this._is_pp_special_token(Te+ye)&&O('pasting "'+Te+'" and "'+ye+'" does not give a valid preprocessing token'),tt=Te+ye,tt==="##"?tt=C:tt=tt.replace($,"")):(ye||O("# cannot appear at the end of a macro expansion"),tt='"'+ye.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'),re.push(U.slice(0,se)),re.push(tt),be<U.length&&re.push(U.slice(be)),U=re.join(""),re.length=0,lt=0}}return U},_subs_simple:function(U,O,G,re,oe,se,be){var Be=new RegExp(O+"(\\b|"+V+"|"+R+")","g");Be.lastIndex=be||0;var Te=Be.exec(U);return!Te||Te.index!=be?null:[I[O],Te[0].length]},_subs_macro:function(U,O,G,re,oe,se,be){var Be=this._get_macro_info(O);Be.pat.lastIndex=be||0;var Te=Be.pat.exec(U);if(!Te||Te.index!=be)return null;var ye=[],We,at=-1,Ke=!1;for(let fe=Te.index;fe<U.length;++fe)if(U[fe]===","&&!at&&(ye.push(e(U.slice(We,fe))),We=fe+1),U[fe]==="(")++at===0&&(We=fe+1);else if((U[fe]==='"'||U[fe]==="'")&&(!fe||U[fe-1]!=="\\"))Ke?--at:++at,Ke=!Ke;else if(U[fe]===")"&&--at===-1){ye.push(e(U.slice(We,fe))),We=fe+1;break}at!==-1&&re("unbalanced parentheses, expected )"),ye.length!==Be.params.length&&(Be.params.length||ye.length>1||ye[0]?re("illegal invocation of macro "+O+", expected "+Be.params.length+" parameters but got "+ye.length):ye=[]);for(let fe=0;fe<ye.length;++fe)ye[fe]||(ye[fe]=R);var tt=I[O];for(let fe=0;fe<Be.params.length;++fe){var lt=ye[fe].replace(/(\w)\s+(\w)/g,"$1"+V+"$2");lt=this.subs(lt,G,re,oe,se+1);for(var Ie=new RegExp("^"+Be.params[fe]+"\\b"),Ue=!1,k=[],De,we=!0,le=0;le<tt.length;++le){if(tt[le]==="#")Ue=!0;else if(we&&(De=Ie.exec(tt.slice(le)))){if(!Ue){for(var ne=le+De[0].length;ne<tt.length;++ne)if(tt[ne]==="#")Ue=!0;else if(!tt[ne].match(/\s/))break}k.push(tt.slice(0,le)),k.push(Ue?ye[fe]:lt),tt=tt.slice(le+De[0].length),le=-1;continue}else tt[le].match(/\s/)||(Ue=!1);we=tt[le].match(/\W/)}k.push(tt),tt=k.join("")}return[tt,We-be]},_masked_eval:function(U){if(!P){P={};var O=[];try{O=[window,{window:1}]}catch{try{O=[window,{window:1,process:1,require:1,module:1,__filename:1,__dirname:1}]}catch{}}for(let re=0;re<O.length;++re)for(var G in O[re])P[G]=void 0;P.defined=this.defined}return P.__result__=!1,new Function("with(this) { __result__ = ("+U+"); }").call(P),P.__result__},_eval:function(U,O,G){var re=U;U.match(x)&&O("string literal not allowed in if expression"),U.replace(/[=!<>]=/g,"").match(E)&&O("assignment operator not allowed in if expression"),U.match(_)&&O("--/++ operators not allowed in if expression"),U=U.replace(g,"$1$2$3"),U=U.replace(h,"defined($1)"),U=U.replace(f," __defined_magic_$1_ "),U=this.subs(U,{},O,G),U=U.replace(m,'defined("$1")'),U=U.replace(l," 0 ");try{var oe=!!this._masked_eval(U)}catch(se){O("error in expression: "+re+" ("+se+")")}return oe}}}const yz=`
#ifndef _ULTRA64_TYPES_H_
#define _ULTRA64_TYPES_H_

#ifndef NULL
#define NULL    (void *)0
#endif

#define TRUE 1
#define FALSE 0

typedef signed char            s8;
typedef unsigned char          u8;
typedef signed short int       s16;
typedef unsigned short int     u16;
typedef signed int             s32;
typedef unsigned int           u32;

// SmallerC can't do u64...
typedef struct { u32 upper; u32 lower; } u64;

typedef float  f32;

#endif /* _ULTRA64_TYPES_H_ */


#ifndef _ULTRA64_THREAD_H_
#define _ULTRA64_THREAD_H_

/* Recommended priorities for system threads */
#define OS_PRIORITY_MAX      255
#define OS_PRIORITY_VIMGR    254
#define OS_PRIORITY_RMON     250
#define OS_PRIORITY_RMONSPIN 200
#define OS_PRIORITY_PIMGR    150
#define OS_PRIORITY_SIMGR    140
#define OS_PRIORITY_APPMAX   127
#define OS_PRIORITY_IDLE       0

#define OS_STATE_STOPPED    1
#define OS_STATE_RUNNABLE    2
#define OS_STATE_RUNNING    4
#define OS_STATE_WAITING    8

typedef s32 OSPri;
typedef s32 OSId;

typedef union
{
    struct {
      f32 f_odd;
      f32 f_even;
    } f;
} __OSfp;

typedef struct
{
    /* registers */
    u64 at, v0, v1, a0, a1, a2, a3;
    u64 t0, t1, t2, t3, t4, t5, t6, t7;
    u64 s0, s1, s2, s3, s4, s5, s6, s7;
    u64 t8, t9, gp, sp, s8, ra;
    u64 lo, hi;
    u32 sr, pc, cause, badvaddr, rcp;
    u32 fpcsr;
    __OSfp  fp0,  fp2,  fp4,  fp6,  fp8, fp10, fp12, fp14;
    __OSfp fp16, fp18, fp20, fp22, fp24, fp26, fp28, fp30;
} __OSThreadContext;

typedef struct
{
    u32 flag;
    u32 count;
    u64 time;
} __OSThreadprofile_s;

typedef struct OSThread_s
{
    struct OSThread_s *next;
    OSPri priority;
    struct OSThread_s **queue;
    struct OSThread_s *tlnext;
    u16 state;
    u16 flags;
    OSId id;
    int fp;
    __OSThreadprofile_s *thprof;
    __OSThreadContext context;
} OSThread;

void osCreateThread(OSThread *thread, OSId id, void (*entry)(void *), void *arg, void *sp, OSPri pri);
OSId osGetThreadId(OSThread *thread);
OSPri osGetThreadPri(OSThread *thread);
void osSetThreadPri(OSThread *thread, OSPri pri);
void osStartThread(OSThread *thread);
void osStopThread(OSThread *thread);

#endif /* _ULTRA64_THREAD_H_ */


#ifndef _OS_MESSAGE_H_
#define	_OS_MESSAGE_H_

typedef u32 OSEvent;

/*
 * Structure for message
 */
typedef void * OSMesg;

/*
 * Structure for message queue
 */
typedef struct OSMesgQueue_s {
	OSThread	*mtqueue;   /* Queue to store threads blocked on empty mailboxes (receive) */
	OSThread	*fullqueue; /* Queue to store threads blocked on full mailboxes (send) */
	s32		validCount;	/* Contains number of valid message */
	s32		first;		/* Points to first valid message */
	s32		msgCount;	/* Contains total # of messages */
	OSMesg		*msg;		/* Points to message buffer array */
} OSMesgQueue;

/* Events */
#define OS_EVENT_SW1              0     /* CPU SW1 interrupt */
#define OS_EVENT_SW2              1     /* CPU SW2 interrupt */
#define OS_EVENT_CART             2     /* Cartridge interrupt: used by rmon */
#define OS_EVENT_COUNTER          3     /* Counter int: used by VI/Timer Mgr */
#define OS_EVENT_SP               4     /* SP task done interrupt */
#define OS_EVENT_SI               5     /* SI (controller) interrupt */
#define OS_EVENT_AI               6     /* AI interrupt */
#define OS_EVENT_VI               7     /* VI interrupt: used by VI/Timer Mgr */
#define OS_EVENT_PI               8     /* PI interrupt: used by PI Manager */
#define OS_EVENT_DP               9     /* DP full sync interrupt */
#define OS_EVENT_CPU_BREAK        10    /* CPU breakpoint: used by rmon */
#define OS_EVENT_SP_BREAK         11    /* SP breakpoint:  used by rmon */
#define OS_EVENT_FAULT            12    /* CPU fault event: used by rmon */
#define OS_EVENT_THREADSTATUS     13    /* CPU thread status: used by rmon */
#define OS_EVENT_PRENMI           14    /* Pre NMI interrupt */

/* Flags to turn blocking on/off when sending/receiving message */
#define	OS_MESG_NOBLOCK		0
#define	OS_MESG_BLOCK		1

extern void		osCreateMesgQueue(OSMesgQueue *, OSMesg *, s32);
extern s32		osSendMesg(OSMesgQueue *, OSMesg, s32);
extern s32		osJamMesg(OSMesgQueue *, OSMesg, s32);
extern s32		osRecvMesg(OSMesgQueue *, OSMesg *, s32);
extern void		osSetEventMesg(OSEvent, OSMesgQueue *, OSMesg);

#endif /* !_OS_MESSAGE_H_ */


#ifndef _OS_CONT_H_
#define	_OS_CONT_H_

typedef struct {
	u16     type;    /* Controller Type */
	u8      status;  /* Controller status */
	u8      errno;
} OSContStatus;

typedef struct {
	u16     button;
	s8      stick_x; /* -80 <= stick_x <= 80 */
	s8      stick_y; /* -80 <= stick_y <= 80 */
	u8      errno;
} OSContPad;

typedef struct {
	void    *address;               /* Ram pad Address:  11 bits */
	u8      databuffer[32];         /* address of the data buffer */
	u8      addressCrc;             /* CRC code for address */
	u8      dataCrc;                /* CRC code for data */
	u8      errno;
} OSContRamIo;

/* Controller type */

#define CONT_ABSOLUTE           0x0001
#define CONT_RELATIVE           0x0002
#define CONT_JOYPORT            0x0004
#define CONT_EEPROM		0x8000
#define CONT_EEP16K		0x4000
#define	CONT_TYPE_MASK		0x1f07
#define	CONT_TYPE_NORMAL	0x0005
#define	CONT_TYPE_MOUSE		0x0002
#define	CONT_TYPE_VOICE		0x0100

/* Controller status */

#define CONT_CARD_ON            0x01
#define CONT_CARD_PULL          0x02
#define CONT_ADDR_CRC_ER        0x04
#define CONT_EEPROM_BUSY	0x80

/* Buttons */

#define CONT_A      0x8000
#define CONT_B      0x4000
#define CONT_G	    0x2000
#define CONT_START  0x1000
#define CONT_UP     0x0800
#define CONT_DOWN   0x0400
#define CONT_LEFT   0x0200
#define CONT_RIGHT  0x0100
#define CONT_L      0x0020
#define CONT_R      0x0010
#define CONT_E      0x0008
#define CONT_D      0x0004
#define CONT_C      0x0002
#define CONT_F      0x0001

/* Nintendo's official button names */

#define A_BUTTON	CONT_A
#define B_BUTTON	CONT_B
#define L_TRIG		CONT_L
#define R_TRIG		CONT_R
#define Z_TRIG		CONT_G
#define START_BUTTON	CONT_START
#define U_JPAD		CONT_UP
#define L_JPAD		CONT_LEFT
#define R_JPAD		CONT_RIGHT
#define D_JPAD		CONT_DOWN
#define U_CBUTTONS	CONT_E
#define L_CBUTTONS	CONT_C
#define R_CBUTTONS	CONT_F
#define D_CBUTTONS	CONT_D

/* Controller error number */

#define	CONT_ERR_NO_CONTROLLER		PFS_ERR_NOPACK 		/* 1 */
#define	CONT_ERR_CONTRFAIL		CONT_OVERRUN_ERROR	/* 4 */
#define	CONT_ERR_INVALID		PFS_ERR_INVALID		/* 5 */
#define	CONT_ERR_DEVICE			PFS_ERR_DEVICE 		/* 11 */
#define	CONT_ERR_NOT_READY		12
#define	CONT_ERR_VOICE_MEMORY		13
#define	CONT_ERR_VOICE_WORD		14
#define	CONT_ERR_VOICE_NO_RESPONSE	15

/* Controller interface */

extern s32 osContInit(OSMesgQueue *, u8 *, OSContStatus *);
extern s32 osContReset(OSMesgQueue *, OSContStatus *);
extern s32 osContStartQuery(OSMesgQueue *);
extern s32 osContStartReadData(OSMesgQueue *);
extern void osContGetQuery(OSContStatus *);
extern void osContGetReadData(OSContPad *);

#endif /* _OS_CONT_H_ */

#ifndef _MBI_H_
#define	_MBI_H_

#define _SHIFTL(v, s, w)	    ((unsigned int) (((unsigned int)(v) & ((0x01 << (w)) - 1)) << (s)))
#define _SHIFTR(v, s, w)	    ((unsigned int)(((unsigned int)(v) >> (s)) & ((0x01 << (w)) - 1)))

#define _SHIFT _SHIFTL

#define G_ON	(1)
#define G_OFF	(0)

//include <PR/abi.h>

#define	M_GFXTASK	1
#define	M_AUDTASK	2
#define	M_VIDTASK	3
#define M_HVQTASK	6
#define M_HVQMTASK	7

#define	NUM_SEGMENTS		(16)
#define	SEGMENT_OFFSET(a)	((unsigned int)(a) & 0x00ffffff)
#define	SEGMENT_NUMBER(a)	(((unsigned int)(a) << 4) >> 28)
#define	SEGMENT_ADDR(num, off)	(((num) << 24) + (off))

#endif /* !_MBI_H_ */

#ifndef _GBI_H_
#define	_GBI_H_

#define F3DEX_GBI_2 1
#define _LANGUAGE_C 1

#ifdef    F3DEX_GBI_2
#ifndef  F3DEX_GBI
#define F3DEX_GBI
#endif
#define	G_NOOP			0x00
#define	G_RDPHALF_2		0xf1
#define	G_SETOTHERMODE_H	0xe3
#define	G_SETOTHERMODE_L	0xe2
#define	G_RDPHALF_1		0xe1
#define	G_SPNOOP		0xe0
#define	G_ENDDL			0xdf
#define	G_DL			0xde
#define	G_LOAD_UCODE		0xdd
#define	G_MOVEMEM		0xdc
#define	G_MOVEWORD		0xdb
#define	G_MTX			0xda
#define G_GEOMETRYMODE		0xd9
#define	G_POPMTX		0xd8
#define	G_TEXTURE		0xd7
#define	G_DMA_IO		0xd6
#define	G_SPECIAL_1		0xd5
#define	G_SPECIAL_2		0xd4
#define	G_SPECIAL_3		0xd3

#define	G_VTX			0x01
#define	G_MODIFYVTX		0x02
#define	G_CULLDL		0x03
#define	G_BRANCH_Z		0x04
#define	G_TRI1			0x05
#define G_TRI2			0x06
#define G_QUAD			0x07
#define G_LINE3D		0x08
#else

/* DMA commands: */
#define	G_SPNOOP		0	/* handle 0 gracefully */
#define	G_MTX			1
#define G_RESERVED0		2	/* not implemeted */
#define G_MOVEMEM		3	/* move a block of memory (up to 4 words) to dmem */
#define	G_VTX			4
#define G_RESERVED1		5	/* not implemeted */
#define	G_DL			6
#define G_RESERVED2		7	/* not implemeted */
#define G_RESERVED3		8	/* not implemeted */
#define G_SPRITE2D_BASE		9	/* sprite command */

/* IMMEDIATE commands: */
#define	G_IMMFIRST		-65
#define	G_TRI1			(G_IMMFIRST-0)
#define G_CULLDL		(G_IMMFIRST-1)
#define	G_POPMTX		(G_IMMFIRST-2)
#define	G_MOVEWORD		(G_IMMFIRST-3)
#define	G_TEXTURE		(G_IMMFIRST-4)
#define	G_SETOTHERMODE_H	(G_IMMFIRST-5)
#define	G_SETOTHERMODE_L	(G_IMMFIRST-6)
#define G_ENDDL			(G_IMMFIRST-7)
#define G_SETGEOMETRYMODE	(G_IMMFIRST-8)
#define G_CLEARGEOMETRYMODE	(G_IMMFIRST-9)
#define G_LINE3D		(G_IMMFIRST-10)
#define G_RDPHALF_1		(G_IMMFIRST-11)
#define G_RDPHALF_2		(G_IMMFIRST-12)
#if (defined(F3DEX_GBI)||defined(F3DLP_GBI))
#define G_MODIFYVTX		(G_IMMFIRST-13)
#define G_TRI2		(G_IMMFIRST-14)
#define G_BRANCH_Z		(G_IMMFIRST-15)
#define G_LOAD_UCODE		(G_IMMFIRST-16)
#else
#define G_RDPHALF_CONT	(G_IMMFIRST-13)
#endif

#define G_SPRITE2D_SCALEFLIP    (G_IMMFIRST-1)
#define G_SPRITE2D_DRAW         (G_IMMFIRST-2)

/* RDP commands: */
#define	G_NOOP			0xc0	/*   0 */

#endif

/* RDP commands: */
#define	G_SETCIMG		0xff	/*  -1 */
#define	G_SETZIMG		0xfe	/*  -2 */
#define	G_SETTIMG		0xfd	/*  -3 */
#define	G_SETCOMBINE		0xfc	/*  -4 */
#define	G_SETENVCOLOR		0xfb	/*  -5 */
#define	G_SETPRIMCOLOR		0xfa	/*  -6 */
#define	G_SETBLENDCOLOR		0xf9	/*  -7 */
#define	G_SETFOGCOLOR		0xf8	/*  -8 */
#define	G_SETFILLCOLOR		0xf7	/*  -9 */
#define	G_FILLRECT		0xf6	/* -10 */
#define	G_SETTILE		0xf5	/* -11 */
#define	G_LOADTILE		0xf4	/* -12 */
#define	G_LOADBLOCK		0xf3	/* -13 */
#define	G_SETTILESIZE		0xf2	/* -14 */
#define	G_LOADTLUT		0xf0	/* -16 */
#define	G_RDPSETOTHERMODE	0xef	/* -17 */
#define	G_SETPRIMDEPTH		0xee	/* -18 */
#define	G_SETSCISSOR		0xed	/* -19 */
#define	G_SETCONVERT		0xec	/* -20 */
#define	G_SETKEYR		0xeb	/* -21 */
#define	G_SETKEYGB		0xea	/* -22 */
#define	G_RDPFULLSYNC		0xe9	/* -23 */
#define	G_RDPTILESYNC		0xe8	/* -24 */
#define	G_RDPPIPESYNC		0xe7	/* -25 */
#define	G_RDPLOADSYNC		0xe6	/* -26 */
#define G_TEXRECTFLIP		0xe5	/* -27 */
#define G_TEXRECT		0xe4	/* -28 */

#define G_TRI_FILL		0xc8 /* fill triangle:            11001000 */
#define G_TRI_SHADE		0xcc /* shade triangle:           11001100 */
#define G_TRI_TXTR		0xca /* texture triangle:         11001010 */
#define G_TRI_SHADE_TXTR	0xce /* shade, texture triangle:  11001110 */
#define G_TRI_FILL_ZBUFF	0xc9 /* fill, zbuff triangle:     11001001 */
#define G_TRI_SHADE_ZBUFF	0xcd /* shade, zbuff triangle:    11001101 */
#define G_TRI_TXTR_ZBUFF	0xcb /* texture, zbuff triangle:  11001011 */
#define G_TRI_SHADE_TXTR_ZBUFF	0xcf /* shade, txtr, zbuff trngl: 11001111 */

#define G_RDP_TRI_FILL_MASK	0x08
#define G_RDP_TRI_SHADE_MASK	0x04
#define G_RDP_TRI_TXTR_MASK	0x02
#define G_RDP_TRI_ZBUFF_MASK	0x01

#define BOWTIE_VAL	0

#define G_RDP_ADDR_FIXUP	3

#define	GDMACMD(x)		(x)
#define	GIMMCMD(x)		(G_IMMFIRST-(x))
#define	GRDPCMD(x)		(0xff-(x))

#define	G_DMACMDSIZ		128
#define	G_IMMCMDSIZ		64
#define	G_RDPCMDSIZ		64

#define	G_TEXTURE_IMAGE_FRAC	2
#define	G_TEXTURE_SCALE_FRAC	16
#define	G_SCALE_FRAC		8
#define	G_ROTATE_FRAC		16

#define	G_MAXFBZ		0x3fff	/* 3b exp, 11b mantissa */

#define	GPACK_RGBA5551(r, g, b, a)	((((r)<<8) & 0xf800) | 							 (((g)<<3) & 0x7c0) |							 (((b)>>2) & 0x3e) | ((a) & 0x1))
#define	GPACK_ZDZ(z, dz)		((z) << 2 | (dz))

#define G_MTX_MODELVIEW	0x00	/* matrix types */
#define G_MTX_PROJECTION	0x04
#define G_MTX_MUL		0x00	/* concat or load */
#define G_MTX_LOAD		0x02
#define G_MTX_NOPUSH		0x00	/* push or not */
#define G_MTX_PUSH		0x01

#define G_ZBUFFER		0x00000001
#define G_SHADE			0x00000004	/* enable Gouraud interp */

#define G_TEXTURE_ENABLE	0x00000000	/* Ignored               */
#define G_SHADING_SMOOTH	0x00200000	/* flat or smooth shaded */
#define G_CULL_FRONT		0x00000200
#define G_CULL_BACK		0x00000400
#define G_CULL_BOTH		0x00000600	/* To make code cleaner */

#define G_FOG			0x00010000
#define G_LIGHTING		0x00020000
#define G_TEXTURE_GEN		0x00040000
#define G_TEXTURE_GEN_LINEAR	0x00080000
#define G_LOD			0x00100000	/* NOT IMPLEMENTED */
#if	(defined(F3DEX_GBI)||defined(F3DLP_GBI))
#define G_CLIPPING		0x00800000
#else
#define G_CLIPPING		0x00000000
#endif

#ifdef _LANGUAGE_ASSEMBLY
#define G_FOG_H			(G_FOG/0x10000)
#define G_LIGHTING_H		(G_LIGHTING/0x10000)
#define G_TEXTURE_GEN_H		(G_TEXTURE_GEN/0x10000)
#define G_TEXTURE_GEN_LINEAR_H	(G_TEXTURE_GEN_LINEAR/0x10000)
#define G_LOD_H			(G_LOD/0x10000)	/* NOT IMPLEMENTED */
#if	(defined(F3DEX_GBI)||defined(F3DLP_GBI))
#define G_CLIPPING_H		(G_CLIPPING/0x10000)
#endif
#endif

#define G_IM_FMT_RGBA	0
#define G_IM_FMT_YUV	1
#define G_IM_FMT_CI	2
#define G_IM_FMT_IA	3
#define G_IM_FMT_I	4

#define G_IM_SIZ_4b	0
#define G_IM_SIZ_8b	1
#define G_IM_SIZ_16b	2
#define G_IM_SIZ_32b	3
#define G_IM_SIZ_DD	5

#define G_IM_SIZ_4b_BYTES		0
#define G_IM_SIZ_4b_TILE_BYTES	G_IM_SIZ_4b_BYTES
#define G_IM_SIZ_4b_LINE_BYTES	G_IM_SIZ_4b_BYTES

#define G_IM_SIZ_8b_BYTES		1
#define G_IM_SIZ_8b_TILE_BYTES	G_IM_SIZ_8b_BYTES
#define G_IM_SIZ_8b_LINE_BYTES	G_IM_SIZ_8b_BYTES

#define G_IM_SIZ_16b_BYTES		2
#define G_IM_SIZ_16b_TILE_BYTES	G_IM_SIZ_16b_BYTES
#define G_IM_SIZ_16b_LINE_BYTES	G_IM_SIZ_16b_BYTES

#define G_IM_SIZ_32b_BYTES		4
#define G_IM_SIZ_32b_TILE_BYTES	2
#define G_IM_SIZ_32b_LINE_BYTES	2

#define G_IM_SIZ_4b_LOAD_BLOCK	G_IM_SIZ_16b
#define G_IM_SIZ_8b_LOAD_BLOCK	G_IM_SIZ_16b
#define G_IM_SIZ_16b_LOAD_BLOCK	G_IM_SIZ_16b
#define G_IM_SIZ_32b_LOAD_BLOCK	G_IM_SIZ_32b

#define G_IM_SIZ_4b_SHIFT  2
#define G_IM_SIZ_8b_SHIFT  1
#define G_IM_SIZ_16b_SHIFT 0
#define G_IM_SIZ_32b_SHIFT 0

#define G_IM_SIZ_4b_INCR  3
#define G_IM_SIZ_8b_INCR  1
#define G_IM_SIZ_16b_INCR 0
#define G_IM_SIZ_32b_INCR 0

#define G_CCMUX_COMBINED	0
#define G_CCMUX_TEXEL0		1
#define G_CCMUX_TEXEL1		2
#define G_CCMUX_PRIMITIVE	3
#define G_CCMUX_SHADE		4
#define G_CCMUX_ENVIRONMENT	5
#define G_CCMUX_CENTER		6
#define G_CCMUX_SCALE		6
#define G_CCMUX_COMBINED_ALPHA	7
#define G_CCMUX_TEXEL0_ALPHA	8
#define G_CCMUX_TEXEL1_ALPHA	9
#define G_CCMUX_PRIMITIVE_ALPHA	10
#define G_CCMUX_SHADE_ALPHA	11
#define G_CCMUX_ENV_ALPHA	12
#define G_CCMUX_LOD_FRACTION	13
#define G_CCMUX_PRIM_LOD_FRAC	14
#define G_CCMUX_NOISE		7
#define G_CCMUX_K4		7
#define G_CCMUX_K5		15
#define G_CCMUX_1		6
#define G_CCMUX_0		31

#define G_ACMUX_COMBINED	0
#define G_ACMUX_TEXEL0		1
#define G_ACMUX_TEXEL1		2
#define G_ACMUX_PRIMITIVE	3
#define G_ACMUX_SHADE		4
#define G_ACMUX_ENVIRONMENT	5
#define G_ACMUX_LOD_FRACTION	0
#define G_ACMUX_PRIM_LOD_FRAC	6
#define G_ACMUX_1		6
#define G_ACMUX_0		7

#define	G_CC_PRIMITIVE		0, 0, 0, PRIMITIVE, 0, 0, 0, PRIMITIVE
#define	G_CC_SHADE		0, 0, 0, SHADE, 0, 0, 0, SHADE
#define	G_CC_MODULATEI		TEXEL0, 0, SHADE, 0, 0, 0, 0, SHADE
#define	G_CC_MODULATEIA		TEXEL0, 0, SHADE, 0, TEXEL0, 0, SHADE, 0
#define	G_CC_MODULATEIDECALA	TEXEL0, 0, SHADE, 0, 0, 0, 0, TEXEL0
#define	G_CC_MODULATERGB	G_CC_MODULATEI
#define	G_CC_MODULATERGBA	G_CC_MODULATEIA
#define	G_CC_MODULATERGBDECALA	G_CC_MODULATEIDECALA
#define	G_CC_MODULATEI_PRIM	TEXEL0, 0, PRIMITIVE, 0, 0, 0, 0, PRIMITIVE
#define	G_CC_MODULATEIA_PRIM	TEXEL0, 0, PRIMITIVE, 0, TEXEL0, 0, PRIMITIVE, 0
#define	G_CC_MODULATEIDECALA_PRIM	TEXEL0, 0, PRIMITIVE, 0, 0, 0, 0, TEXEL0
#define	G_CC_MODULATERGB_PRIM	G_CC_MODULATEI_PRIM
#define	G_CC_MODULATERGBA_PRIM	G_CC_MODULATEIA_PRIM
#define	G_CC_MODULATERGBDECALA_PRIM	G_CC_MODULATEIDECALA_PRIM
#define	G_CC_DECALRGB		0, 0, 0, TEXEL0, 0, 0, 0, SHADE
#define	G_CC_DECALRGBA		0, 0, 0, TEXEL0, 0, 0, 0, TEXEL0
#define	G_CC_BLENDI		ENVIRONMENT, SHADE, TEXEL0, SHADE, 0, 0, 0, SHADE
#define	G_CC_BLENDIA		ENVIRONMENT, SHADE, TEXEL0, SHADE, TEXEL0, 0, SHADE, 0
#define	G_CC_BLENDIDECALA	ENVIRONMENT, SHADE, TEXEL0, SHADE, 0, 0, 0, TEXEL0
#define	G_CC_BLENDRGBA		TEXEL0, SHADE, TEXEL0_ALPHA, SHADE, 0, 0, 0, SHADE
#define	G_CC_BLENDRGBDECALA	TEXEL0, SHADE, TEXEL0_ALPHA, SHADE, 0, 0, 0, TEXEL0
#define G_CC_ADDRGB		1, 0, TEXEL0, SHADE, 0, 0, 0, SHADE
#define G_CC_ADDRGBDECALA	1, 0, TEXEL0, SHADE, 0, 0, 0, TEXEL0
#define G_CC_REFLECTRGB		ENVIRONMENT, 0, TEXEL0, SHADE, 0, 0, 0, SHADE
#define G_CC_REFLECTRGBDECALA	ENVIRONMENT, 0, TEXEL0, SHADE, 0, 0, 0, TEXEL0
#define G_CC_HILITERGB		PRIMITIVE, SHADE, TEXEL0, SHADE, 0, 0, 0, SHADE
#define G_CC_HILITERGBA		PRIMITIVE, SHADE, TEXEL0, SHADE, PRIMITIVE, SHADE, TEXEL0, SHADE
#define G_CC_HILITERGBDECALA	PRIMITIVE, SHADE, TEXEL0, SHADE, 0, 0, 0, TEXEL0
#define G_CC_SHADEDECALA	0, 0, 0, SHADE, 0, 0, 0, TEXEL0
#define	G_CC_BLENDPE		PRIMITIVE, ENVIRONMENT, TEXEL0, ENVIRONMENT, TEXEL0, 0, SHADE, 0
#define	G_CC_BLENDPEDECALA	PRIMITIVE, ENVIRONMENT, TEXEL0, ENVIRONMENT, 0, 0, 0, TEXEL0

#define	_G_CC_BLENDPE		ENVIRONMENT, PRIMITIVE, TEXEL0, PRIMITIVE, TEXEL0, 0, SHADE, 0
#define	_G_CC_BLENDPEDECALA	ENVIRONMENT, PRIMITIVE, TEXEL0, PRIMITIVE, 0, 0, 0, TEXEL0
#define	_G_CC_TWOCOLORTEX	PRIMITIVE, SHADE, TEXEL0, SHADE, 0, 0, 0, SHADE
#define	_G_CC_SPARSEST		PRIMITIVE, TEXEL0, LOD_FRACTION, TEXEL0, PRIMITIVE, TEXEL0, LOD_FRACTION, TEXEL0
#define G_CC_TEMPLERP   TEXEL1, TEXEL0, PRIM_LOD_FRAC, TEXEL0, TEXEL1, TEXEL0, PRIM_LOD_FRAC, TEXEL0

#define	G_CC_TRILERP		TEXEL1, TEXEL0, LOD_FRACTION, TEXEL0, TEXEL1, TEXEL0, LOD_FRACTION, TEXEL0
#define	G_CC_INTERFERENCE	TEXEL0, 0, TEXEL1, 0, TEXEL0, 0, TEXEL1, 0

#define	G_CC_1CYUV2RGB		TEXEL0, K4, K5, TEXEL0, 0, 0, 0, SHADE

#define	G_CC_YUV2RGB		TEXEL1, K4, K5, TEXEL1, 0, 0, 0, 0

#define	G_CC_PASS2		0, 0, 0, COMBINED, 0, 0, 0, COMBINED
#define	G_CC_MODULATEI2		COMBINED, 0, SHADE, 0, 0, 0, 0, SHADE
#define	G_CC_MODULATEIA2	COMBINED, 0, SHADE, 0, COMBINED, 0, SHADE, 0
#define	G_CC_MODULATERGB2	G_CC_MODULATEI2
#define	G_CC_MODULATERGBA2	G_CC_MODULATEIA2
#define	G_CC_MODULATEI_PRIM2	COMBINED, 0, PRIMITIVE, 0, 0, 0, 0, PRIMITIVE
#define	G_CC_MODULATEIA_PRIM2	COMBINED, 0, PRIMITIVE, 0, COMBINED, 0, PRIMITIVE, 0
#define	G_CC_MODULATERGB_PRIM2	G_CC_MODULATEI_PRIM2
#define	G_CC_MODULATERGBA_PRIM2	G_CC_MODULATEIA_PRIM2
#define	G_CC_DECALRGB2		0, 0, 0, COMBINED, 0, 0, 0, SHADE

#define	G_CC_BLENDI2		ENVIRONMENT, SHADE, COMBINED, SHADE, 0, 0, 0, SHADE
#define	G_CC_BLENDIA2		ENVIRONMENT, SHADE, COMBINED, SHADE, COMBINED, 0, SHADE, 0
#define	G_CC_CHROMA_KEY2	TEXEL0, CENTER, SCALE, 0, 0, 0, 0, 0
#define G_CC_HILITERGB2		ENVIRONMENT, COMBINED, TEXEL0, COMBINED, 0, 0, 0, SHADE
#define G_CC_HILITERGBA2	ENVIRONMENT, COMBINED, TEXEL0, COMBINED, ENVIRONMENT, COMBINED, TEXEL0, COMBINED
#define G_CC_HILITERGBDECALA2	ENVIRONMENT, COMBINED, TEXEL0, COMBINED, 0, 0, 0, TEXEL0
#define G_CC_HILITERGBPASSA2	ENVIRONMENT, COMBINED, TEXEL0, COMBINED, 0, 0, 0, COMBINED

#define	G_MDSFT_ALPHACOMPARE		0
#define	G_MDSFT_ZSRCSEL			2
#define	G_MDSFT_RENDERMODE		3
#define	G_MDSFT_BLENDER			16

#define	G_MDSFT_BLENDMASK		0	/* unsupported */
#define	G_MDSFT_ALPHADITHER		4
#define	G_MDSFT_RGBDITHER		6

#define	G_MDSFT_COMBKEY			8
#define	G_MDSFT_TEXTCONV		9
#define	G_MDSFT_TEXTFILT		12
#define	G_MDSFT_TEXTLUT			14
#define	G_MDSFT_TEXTLOD			16
#define	G_MDSFT_TEXTDETAIL		17
#define	G_MDSFT_TEXTPERSP		19
#define	G_MDSFT_CYCLETYPE		20
#define	G_MDSFT_COLORDITHER		22	/* unsupported in HW 2.0 */
#define	G_MDSFT_PIPELINE		23

#define	G_PM_1PRIMITIVE		(1 << G_MDSFT_PIPELINE)
#define	G_PM_NPRIMITIVE		(0 << G_MDSFT_PIPELINE)

#define	G_CYC_1CYCLE		(0 << G_MDSFT_CYCLETYPE)
#define	G_CYC_2CYCLE		(1 << G_MDSFT_CYCLETYPE)
#define	G_CYC_COPY		(2 << G_MDSFT_CYCLETYPE)
#define	G_CYC_FILL		(3 << G_MDSFT_CYCLETYPE)

#define G_TP_NONE	(0 << G_MDSFT_TEXTPERSP)
#define G_TP_PERSP	(1 << G_MDSFT_TEXTPERSP)

#define G_TD_CLAMP	(0 << G_MDSFT_TEXTDETAIL)
#define G_TD_SHARPEN	(1 << G_MDSFT_TEXTDETAIL)
#define G_TD_DETAIL	(2 << G_MDSFT_TEXTDETAIL)

#define G_TL_TILE	(0 << G_MDSFT_TEXTLOD)
#define G_TL_LOD	(1 << G_MDSFT_TEXTLOD)

#define G_TT_NONE	(0 << G_MDSFT_TEXTLUT)
#define G_TT_RGBA16	(2 << G_MDSFT_TEXTLUT)
#define G_TT_IA16	(3 << G_MDSFT_TEXTLUT)

#define G_TF_POINT	(0 << G_MDSFT_TEXTFILT)
#define G_TF_AVERAGE	(3 << G_MDSFT_TEXTFILT)
#define G_TF_BILERP	(2 << G_MDSFT_TEXTFILT)

#define G_TC_CONV	(0 << G_MDSFT_TEXTCONV)
#define G_TC_FILTCONV	(5 << G_MDSFT_TEXTCONV)
#define G_TC_FILT	(6 << G_MDSFT_TEXTCONV)

#define G_CK_NONE	(0 << G_MDSFT_COMBKEY)
#define G_CK_KEY	(1 << G_MDSFT_COMBKEY)

#define	G_CD_MAGICSQ		(0 << G_MDSFT_RGBDITHER)
#define	G_CD_BAYER		(1 << G_MDSFT_RGBDITHER)
#define	G_CD_NOISE		(2 << G_MDSFT_RGBDITHER)

#ifndef _HW_VERSION_1
#define	G_CD_DISABLE		(3 << G_MDSFT_RGBDITHER)
#define	G_CD_ENABLE		G_CD_NOISE	/* HW 1.0 compatibility mode */
#else
#define G_CD_ENABLE		(1 << G_MDSFT_COLORDITHER)
#define G_CD_DISABLE		(0 << G_MDSFT_COLORDITHER)
#endif

#define	G_AD_PATTERN		(0 << G_MDSFT_ALPHADITHER)
#define	G_AD_NOTPATTERN		(1 << G_MDSFT_ALPHADITHER)
#define	G_AD_NOISE		(2 << G_MDSFT_ALPHADITHER)
#define	G_AD_DISABLE		(3 << G_MDSFT_ALPHADITHER)

#define	G_AC_NONE		(0 << G_MDSFT_ALPHACOMPARE)
#define	G_AC_THRESHOLD		(1 << G_MDSFT_ALPHACOMPARE)
#define	G_AC_DITHER		(3 << G_MDSFT_ALPHACOMPARE)

#define	G_ZS_PIXEL		(0 << G_MDSFT_ZSRCSEL)
#define	G_ZS_PRIM		(1 << G_MDSFT_ZSRCSEL)

#define	AA_EN		0x8
#define	Z_CMP		0x10
#define	Z_UPD		0x20
#define	IM_RD		0x40
#define	CLR_ON_CVG	0x80
#define	CVG_DST_CLAMP	0
#define	CVG_DST_WRAP	0x100
#define	CVG_DST_FULL	0x200
#define	CVG_DST_SAVE	0x300
#define	ZMODE_OPA	0
#define	ZMODE_INTER	0x400
#define	ZMODE_XLU	0x800
#define	ZMODE_DEC	0xc00
#define	CVG_X_ALPHA	0x1000
#define	ALPHA_CVG_SEL	0x2000
#define	FORCE_BL	0x4000
#define	TEX_EDGE	0x0000 /* used to be 0x8000 */

#define	G_BL_CLR_IN	0
#define	G_BL_CLR_MEM	1
#define	G_BL_CLR_BL	2
#define	G_BL_CLR_FOG	3
#define	G_BL_1MA	0
#define	G_BL_A_MEM	1
#define	G_BL_A_IN	0
#define	G_BL_A_FOG	1
#define	G_BL_A_SHADE	2
#define	G_BL_1		2
#define	G_BL_0		3

#define	GBL_c1(m1a, m1b, m2a, m2b)		(m1a) << 30 | (m1b) << 26 | (m2a) << 22 | (m2b) << 18
#define	GBL_c2(m1a, m1b, m2a, m2b)		(m1a) << 28 | (m1b) << 24 | (m2a) << 20 | (m2b) << 16

#define	RM_AA_ZB_OPA_SURF(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_RA_ZB_OPA_SURF(clk)						AA_EN | Z_CMP | Z_UPD | CVG_DST_CLAMP |				ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_ZB_XLU_SURF(clk)						AA_EN | Z_CMP | IM_RD | CVG_DST_WRAP | CLR_ON_CVG |		FORCE_BL | ZMODE_XLU |						GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_OPA_DECAL(clk)						AA_EN | Z_CMP | IM_RD | CVG_DST_WRAP | ALPHA_CVG_SEL |		ZMODE_DEC |							GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_RA_ZB_OPA_DECAL(clk)						AA_EN | Z_CMP | CVG_DST_WRAP | ALPHA_CVG_SEL |			ZMODE_DEC |							GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_ZB_XLU_DECAL(clk)						AA_EN | Z_CMP | IM_RD | CVG_DST_WRAP | CLR_ON_CVG |		FORCE_BL | ZMODE_DEC |						GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_OPA_INTER(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			ALPHA_CVG_SEL |	ZMODE_INTER |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_RA_ZB_OPA_INTER(clk)						AA_EN | Z_CMP | Z_UPD | CVG_DST_CLAMP |				ALPHA_CVG_SEL |	ZMODE_INTER |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_ZB_XLU_INTER(clk)						AA_EN | Z_CMP | IM_RD | CVG_DST_WRAP | CLR_ON_CVG |		FORCE_BL | ZMODE_INTER |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_XLU_LINE(clk)						AA_EN | Z_CMP | IM_RD | CVG_DST_CLAMP | CVG_X_ALPHA |		ALPHA_CVG_SEL | FORCE_BL | ZMODE_XLU |				GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_DEC_LINE(clk)						AA_EN | Z_CMP | IM_RD | CVG_DST_SAVE | CVG_X_ALPHA |		ALPHA_CVG_SEL | FORCE_BL | ZMODE_DEC |				GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_TEX_EDGE(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_OPA | TEX_EDGE |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_ZB_TEX_INTER(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_INTER | TEX_EDGE |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_ZB_SUB_SURF(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_FULL |			ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_ZB_PCL_SURF(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			ZMODE_OPA | G_AC_DITHER | 					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_OPA_TERR(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_TEX_TERR(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_CLAMP |			CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_OPA | TEX_EDGE |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_ZB_SUB_TERR(clk)						AA_EN | Z_CMP | Z_UPD | IM_RD | CVG_DST_FULL |			ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)


#define	RM_AA_OPA_SURF(clk)						AA_EN | IM_RD | CVG_DST_CLAMP |					ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_RA_OPA_SURF(clk)						AA_EN | CVG_DST_CLAMP |					ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_XLU_SURF(clk)						AA_EN | IM_RD | CVG_DST_WRAP | CLR_ON_CVG | FORCE_BL |		ZMODE_OPA |							GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_XLU_LINE(clk)						AA_EN | IM_RD | CVG_DST_CLAMP | CVG_X_ALPHA |			ALPHA_CVG_SEL | FORCE_BL | ZMODE_OPA |				GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_DEC_LINE(clk)						AA_EN | IM_RD | CVG_DST_FULL | CVG_X_ALPHA |			ALPHA_CVG_SEL | FORCE_BL | ZMODE_OPA |				GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_TEX_EDGE(clk)						AA_EN | IM_RD | CVG_DST_CLAMP |					CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_OPA | TEX_EDGE |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_SUB_SURF(clk)						AA_EN | IM_RD | CVG_DST_FULL |					ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_AA_PCL_SURF(clk)						AA_EN | IM_RD | CVG_DST_CLAMP |					ZMODE_OPA | G_AC_DITHER | 					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_OPA_TERR(clk)						AA_EN | IM_RD | CVG_DST_CLAMP |					ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_TEX_TERR(clk)						AA_EN | IM_RD | CVG_DST_CLAMP |					CVG_X_ALPHA | ALPHA_CVG_SEL | ZMODE_OPA | TEX_EDGE |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_AA_SUB_TERR(clk)						AA_EN | IM_RD | CVG_DST_FULL |					ZMODE_OPA | ALPHA_CVG_SEL |					GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)


#define	RM_ZB_OPA_SURF(clk)						Z_CMP | Z_UPD | CVG_DST_FULL | ALPHA_CVG_SEL |			ZMODE_OPA |							GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_ZB_XLU_SURF(clk)						Z_CMP | IM_RD | CVG_DST_FULL | FORCE_BL | ZMODE_XLU |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_ZB_OPA_DECAL(clk)						Z_CMP | CVG_DST_FULL | ALPHA_CVG_SEL | ZMODE_DEC |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_A_MEM)

#define	RM_ZB_XLU_DECAL(clk)						Z_CMP | IM_RD | CVG_DST_FULL | FORCE_BL | ZMODE_DEC |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_ZB_CLD_SURF(clk)						Z_CMP | IM_RD | CVG_DST_SAVE | FORCE_BL | ZMODE_XLU |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_ZB_OVL_SURF(clk)						Z_CMP | IM_RD | CVG_DST_SAVE | FORCE_BL | ZMODE_DEC |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_ZB_PCL_SURF(clk)						Z_CMP | Z_UPD | CVG_DST_FULL | ZMODE_OPA |			G_AC_DITHER | 							GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)


#define	RM_OPA_SURF(clk)						CVG_DST_CLAMP | FORCE_BL | ZMODE_OPA |				GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)

#define	RM_XLU_SURF(clk)						IM_RD | CVG_DST_FULL | FORCE_BL | ZMODE_OPA |			GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_TEX_EDGE(clk)						CVG_DST_CLAMP | CVG_X_ALPHA | ALPHA_CVG_SEL | FORCE_BL |	ZMODE_OPA | TEX_EDGE | AA_EN |						GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)

#define	RM_CLD_SURF(clk)						IM_RD | CVG_DST_SAVE | FORCE_BL | ZMODE_OPA |			GBL_c##clk(G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)

#define	RM_PCL_SURF(clk)						CVG_DST_FULL | FORCE_BL | ZMODE_OPA | 				G_AC_DITHER | 							GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)

#define	RM_ADD(clk)						IM_RD | CVG_DST_SAVE | FORCE_BL | ZMODE_OPA |		GBL_c##clk(G_BL_CLR_IN, G_BL_A_FOG, G_BL_CLR_MEM, G_BL_1)

#define	RM_NOOP(clk)		GBL_c##clk(0, 0, 0, 0)

#define RM_VISCVG(clk) 	IM_RD | FORCE_BL |     	GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_BL, G_BL_A_MEM)

/* for rendering to an 8-bit framebuffer */
#define RM_OPA_CI(clk)                    	CVG_DST_CLAMP | ZMODE_OPA |          	GBL_c##clk(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)

#define	G_RM_AA_ZB_OPA_SURF	RM_AA_ZB_OPA_SURF(1)
#define	G_RM_AA_ZB_OPA_SURF2	RM_AA_ZB_OPA_SURF(2)
#define	G_RM_AA_ZB_XLU_SURF	RM_AA_ZB_XLU_SURF(1)
#define	G_RM_AA_ZB_XLU_SURF2	RM_AA_ZB_XLU_SURF(2)
#define	G_RM_AA_ZB_OPA_DECAL	RM_AA_ZB_OPA_DECAL(1)
#define	G_RM_AA_ZB_OPA_DECAL2	RM_AA_ZB_OPA_DECAL(2)
#define	G_RM_AA_ZB_XLU_DECAL	RM_AA_ZB_XLU_DECAL(1)
#define	G_RM_AA_ZB_XLU_DECAL2	RM_AA_ZB_XLU_DECAL(2)
#define	G_RM_AA_ZB_OPA_INTER	RM_AA_ZB_OPA_INTER(1)
#define	G_RM_AA_ZB_OPA_INTER2	RM_AA_ZB_OPA_INTER(2)
#define	G_RM_AA_ZB_XLU_INTER	RM_AA_ZB_XLU_INTER(1)
#define	G_RM_AA_ZB_XLU_INTER2	RM_AA_ZB_XLU_INTER(2)
#define	G_RM_AA_ZB_XLU_LINE	RM_AA_ZB_XLU_LINE(1)
#define	G_RM_AA_ZB_XLU_LINE2	RM_AA_ZB_XLU_LINE(2)
#define	G_RM_AA_ZB_DEC_LINE	RM_AA_ZB_DEC_LINE(1)
#define	G_RM_AA_ZB_DEC_LINE2	RM_AA_ZB_DEC_LINE(2)
#define	G_RM_AA_ZB_TEX_EDGE	RM_AA_ZB_TEX_EDGE(1)
#define	G_RM_AA_ZB_TEX_EDGE2	RM_AA_ZB_TEX_EDGE(2)
#define	G_RM_AA_ZB_TEX_INTER	RM_AA_ZB_TEX_INTER(1)
#define	G_RM_AA_ZB_TEX_INTER2	RM_AA_ZB_TEX_INTER(2)
#define	G_RM_AA_ZB_SUB_SURF	RM_AA_ZB_SUB_SURF(1)
#define	G_RM_AA_ZB_SUB_SURF2	RM_AA_ZB_SUB_SURF(2)
#define	G_RM_AA_ZB_PCL_SURF	RM_AA_ZB_PCL_SURF(1)
#define	G_RM_AA_ZB_PCL_SURF2	RM_AA_ZB_PCL_SURF(2)
#define	G_RM_AA_ZB_OPA_TERR	RM_AA_ZB_OPA_TERR(1)
#define	G_RM_AA_ZB_OPA_TERR2	RM_AA_ZB_OPA_TERR(2)
#define	G_RM_AA_ZB_TEX_TERR	RM_AA_ZB_TEX_TERR(1)
#define	G_RM_AA_ZB_TEX_TERR2	RM_AA_ZB_TEX_TERR(2)
#define	G_RM_AA_ZB_SUB_TERR	RM_AA_ZB_SUB_TERR(1)
#define	G_RM_AA_ZB_SUB_TERR2	RM_AA_ZB_SUB_TERR(2)

#define	G_RM_RA_ZB_OPA_SURF	RM_RA_ZB_OPA_SURF(1)
#define	G_RM_RA_ZB_OPA_SURF2	RM_RA_ZB_OPA_SURF(2)
#define	G_RM_RA_ZB_OPA_DECAL	RM_RA_ZB_OPA_DECAL(1)
#define	G_RM_RA_ZB_OPA_DECAL2	RM_RA_ZB_OPA_DECAL(2)
#define	G_RM_RA_ZB_OPA_INTER	RM_RA_ZB_OPA_INTER(1)
#define	G_RM_RA_ZB_OPA_INTER2	RM_RA_ZB_OPA_INTER(2)

#define	G_RM_AA_OPA_SURF	RM_AA_OPA_SURF(1)
#define	G_RM_AA_OPA_SURF2	RM_AA_OPA_SURF(2)
#define	G_RM_AA_XLU_SURF	RM_AA_XLU_SURF(1)
#define	G_RM_AA_XLU_SURF2	RM_AA_XLU_SURF(2)
#define	G_RM_AA_XLU_LINE	RM_AA_XLU_LINE(1)
#define	G_RM_AA_XLU_LINE2	RM_AA_XLU_LINE(2)
#define	G_RM_AA_DEC_LINE	RM_AA_DEC_LINE(1)
#define	G_RM_AA_DEC_LINE2	RM_AA_DEC_LINE(2)
#define	G_RM_AA_TEX_EDGE	RM_AA_TEX_EDGE(1)
#define	G_RM_AA_TEX_EDGE2	RM_AA_TEX_EDGE(2)
#define	G_RM_AA_SUB_SURF	RM_AA_SUB_SURF(1)
#define	G_RM_AA_SUB_SURF2	RM_AA_SUB_SURF(2)
#define	G_RM_AA_PCL_SURF	RM_AA_PCL_SURF(1)
#define	G_RM_AA_PCL_SURF2	RM_AA_PCL_SURF(2)
#define	G_RM_AA_OPA_TERR	RM_AA_OPA_TERR(1)
#define	G_RM_AA_OPA_TERR2	RM_AA_OPA_TERR(2)
#define	G_RM_AA_TEX_TERR	RM_AA_TEX_TERR(1)
#define	G_RM_AA_TEX_TERR2	RM_AA_TEX_TERR(2)
#define	G_RM_AA_SUB_TERR	RM_AA_SUB_TERR(1)
#define	G_RM_AA_SUB_TERR2	RM_AA_SUB_TERR(2)

#define	G_RM_RA_OPA_SURF	RM_RA_OPA_SURF(1)
#define	G_RM_RA_OPA_SURF2	RM_RA_OPA_SURF(2)

#define	G_RM_ZB_OPA_SURF	RM_ZB_OPA_SURF(1)
#define	G_RM_ZB_OPA_SURF2	RM_ZB_OPA_SURF(2)
#define	G_RM_ZB_XLU_SURF	RM_ZB_XLU_SURF(1)
#define	G_RM_ZB_XLU_SURF2	RM_ZB_XLU_SURF(2)
#define	G_RM_ZB_OPA_DECAL	RM_ZB_OPA_DECAL(1)
#define	G_RM_ZB_OPA_DECAL2	RM_ZB_OPA_DECAL(2)
#define	G_RM_ZB_XLU_DECAL	RM_ZB_XLU_DECAL(1)
#define	G_RM_ZB_XLU_DECAL2	RM_ZB_XLU_DECAL(2)
#define	G_RM_ZB_CLD_SURF	RM_ZB_CLD_SURF(1)
#define	G_RM_ZB_CLD_SURF2	RM_ZB_CLD_SURF(2)
#define	G_RM_ZB_OVL_SURF	RM_ZB_OVL_SURF(1)
#define	G_RM_ZB_OVL_SURF2	RM_ZB_OVL_SURF(2)
#define	G_RM_ZB_PCL_SURF	RM_ZB_PCL_SURF(1)
#define	G_RM_ZB_PCL_SURF2	RM_ZB_PCL_SURF(2)

#define	G_RM_OPA_SURF		RM_OPA_SURF(1)
#define	G_RM_OPA_SURF2		RM_OPA_SURF(2)
#define	G_RM_XLU_SURF		RM_XLU_SURF(1)
#define	G_RM_XLU_SURF2		RM_XLU_SURF(2)
#define	G_RM_CLD_SURF		RM_CLD_SURF(1)
#define	G_RM_CLD_SURF2		RM_CLD_SURF(2)
#define	G_RM_TEX_EDGE		RM_TEX_EDGE(1)
#define	G_RM_TEX_EDGE2		RM_TEX_EDGE(2)
#define	G_RM_PCL_SURF		RM_PCL_SURF(1)
#define	G_RM_PCL_SURF2		RM_PCL_SURF(2)
#define G_RM_ADD       		RM_ADD(1)
#define G_RM_ADD2      		RM_ADD(2)
#define G_RM_NOOP       	RM_NOOP(1)
#define G_RM_NOOP2      	RM_NOOP(2)
#define G_RM_VISCVG    		RM_VISCVG(1)
#define G_RM_VISCVG2    	RM_VISCVG(2)
#define G_RM_OPA_CI         RM_OPA_CI(1)
#define G_RM_OPA_CI2        RM_OPA_CI(2)


#define	G_RM_FOG_SHADE_A	GBL_c1(G_BL_CLR_FOG, G_BL_A_SHADE, G_BL_CLR_IN, G_BL_1MA)
#define	G_RM_FOG_PRIM_A		GBL_c1(G_BL_CLR_FOG, G_BL_A_FOG, G_BL_CLR_IN, G_BL_1MA)
#define	G_RM_PASS		GBL_c1(G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1)

#define	G_CV_K0		175
#define	G_CV_K1		-43
#define	G_CV_K2		-89
#define	G_CV_K3		222
#define	G_CV_K4		114
#define	G_CV_K5		42

#define	G_SC_NON_INTERLACE	0
#define	G_SC_ODD_INTERLACE	3
#define	G_SC_EVEN_INTERLACE	2

#define G_DL_PUSH		0x00
#define G_DL_NOPUSH		0x01

#if defined(_LANGUAGE_C)

typedef struct {
	short		ob[3];	/* x, y, z */
	unsigned short	flag;
	short		tc[2];	/* texture coord */
	unsigned char	cn[4];	/* color & alpha */
} Vtx_t;

typedef struct {
	short		ob[3];	/* x, y, z */
	unsigned short	flag;
	short		tc[2];	/* texture coord */
	signed char	n[3];	/* normal */
	unsigned char   a;      /* alpha  */
} Vtx_tn;

typedef union {
    Vtx_t		v;  /* Use this one for colors  */
    Vtx_tn              n;  /* Use this one for normals */
    u64	force_structure_alignment;
} Vtx;

typedef struct {
  void *SourceImagePointer;
  void *TlutPointer;
  short Stride;
  short SubImageWidth;
  short SubImageHeight;
  char  SourceImageType;
  char  SourceImageBitSize;
  short SourceImageOffsetS;
  short SourceImageOffsetT;
  /* 20 bytes for above */

  /* padding to bring structure size to 64 bit allignment */
  char dummy[4];

} uSprite_t;

typedef union {
  uSprite_t  s;

  /* Need to make sure this is 64 bit aligned */
  u64         force_structure_allignment[3];
} uSprite;

typedef struct {
	unsigned char	flag;
	unsigned char	v[3];
} Tri;

typedef long	Mtx_t[4][4];

typedef union {
    Mtx_t		m;
    u64	force_structure_alignment;
} Mtx;

#define G_MAXZ		0x03ff	/* 10 bits of integer screen-Z precision */

typedef struct {
	short	vscale[4];  /* scale, 2 bits fraction */
	short	vtrans[4];  /* translate, 2 bits fraction */
	/* both the above arrays are padded to 64-bit boundary */
} Vp_t;

typedef union {
    Vp_t		vp;
    u64	force_structure_alignment;
} Vp;

#define G_MV_MMTX	2
#define G_MV_PMTX	6
#define G_MV_VIEWPORT	8
#define G_MV_LIGHT	10
#define G_MV_POINT	12
#define G_MV_MATRIX	14
#define G_MVO_LOOKATX	(0*24)
#define G_MVO_LOOKATY	(1*24)
#define G_MVO_L0	(2*24)
#define G_MVO_L1	(3*24)
#define G_MVO_L2	(4*24)
#define G_MVO_L3	(5*24)
#define G_MVO_L4	(6*24)
#define G_MVO_L5	(7*24)
#define G_MVO_L6	(8*24)
#define G_MVO_L7	(9*24)

#define G_MW_MATRIX		0x00
#define G_MW_NUMLIGHT		0x02
#define G_MW_CLIP		0x04
#define G_MW_SEGMENT		0x06
#define G_MW_FOG		0x08
#define G_MW_LIGHTCOL		0x0a
#ifdef	F3DEX_GBI_2
#define G_MW_FORCEMTX		0x0c
#else	/* F3DEX_GBI_2 */
#define G_MW_POINTS		0x0c
#endif	/* F3DEX_GBI_2 */
#define	G_MW_PERSPNORM		0x0e

#define G_MWO_NUMLIGHT		0x00
#define G_MWO_CLIP_RNX		0x04
#define G_MWO_CLIP_RNY		0x0c
#define G_MWO_CLIP_RPX		0x14
#define G_MWO_CLIP_RPY		0x1c
#define G_MWO_SEGMENT_0		0x00
#define G_MWO_SEGMENT_1		0x01
#define G_MWO_SEGMENT_2		0x02
#define G_MWO_SEGMENT_3		0x03
#define G_MWO_SEGMENT_4		0x04
#define G_MWO_SEGMENT_5		0x05
#define G_MWO_SEGMENT_6		0x06
#define G_MWO_SEGMENT_7		0x07
#define G_MWO_SEGMENT_8		0x08
#define G_MWO_SEGMENT_9		0x09
#define G_MWO_SEGMENT_A		0x0a
#define G_MWO_SEGMENT_B		0x0b
#define G_MWO_SEGMENT_C		0x0c
#define G_MWO_SEGMENT_D		0x0d
#define G_MWO_SEGMENT_E		0x0e
#define G_MWO_SEGMENT_F		0x0f
#define G_MWO_FOG		0x00
#define G_MWO_aLIGHT_1		0x00
#define G_MWO_bLIGHT_1		0x04
#ifdef	F3DEX_GBI_2
#define G_MWO_aLIGHT_2		0x18
#define G_MWO_bLIGHT_2		0x1c
#define G_MWO_aLIGHT_3		0x30
#define G_MWO_bLIGHT_3		0x34
#define G_MWO_aLIGHT_4		0x48
#define G_MWO_bLIGHT_4		0x4c
#define G_MWO_aLIGHT_5		0x60
#define G_MWO_bLIGHT_5		0x64
#define G_MWO_aLIGHT_6		0x78
#define G_MWO_bLIGHT_6		0x7c
#define G_MWO_aLIGHT_7		0x90
#define G_MWO_bLIGHT_7		0x94
#define G_MWO_aLIGHT_8		0xa8
#define G_MWO_bLIGHT_8		0xac
#else
#define G_MWO_aLIGHT_2		0x20
#define G_MWO_bLIGHT_2		0x24
#define G_MWO_aLIGHT_3		0x40
#define G_MWO_bLIGHT_3		0x44
#define G_MWO_aLIGHT_4		0x60
#define G_MWO_bLIGHT_4		0x64
#define G_MWO_aLIGHT_5		0x80
#define G_MWO_bLIGHT_5		0x84
#define G_MWO_aLIGHT_6		0xa0
#define G_MWO_bLIGHT_6		0xa4
#define G_MWO_aLIGHT_7		0xc0
#define G_MWO_bLIGHT_7		0xc4
#define G_MWO_aLIGHT_8		0xe0
#define G_MWO_bLIGHT_8		0xe4
#endif
#define G_MWO_MATRIX_XX_XY_I	0x00
#define G_MWO_MATRIX_XZ_XW_I	0x04
#define G_MWO_MATRIX_YX_YY_I	0x08
#define G_MWO_MATRIX_YZ_YW_I	0x0c
#define G_MWO_MATRIX_ZX_ZY_I	0x10
#define G_MWO_MATRIX_ZZ_ZW_I	0x14
#define G_MWO_MATRIX_WX_WY_I	0x18
#define G_MWO_MATRIX_WZ_WW_I	0x1c
#define G_MWO_MATRIX_XX_XY_F	0x20
#define G_MWO_MATRIX_XZ_XW_F	0x24
#define G_MWO_MATRIX_YX_YY_F	0x28
#define G_MWO_MATRIX_YZ_YW_F	0x2c
#define G_MWO_MATRIX_ZX_ZY_F	0x30
#define G_MWO_MATRIX_ZZ_ZW_F	0x34
#define G_MWO_MATRIX_WX_WY_F	0x38
#define G_MWO_MATRIX_WZ_WW_F	0x3c
#define G_MWO_POINT_RGBA	0x10
#define G_MWO_POINT_ST		0x14
#define G_MWO_POINT_XYSCREEN	0x18
#define G_MWO_POINT_ZSCREEN	0x1c

typedef struct {
  unsigned char	col[3];		/* diffuse light value (rgba) */
  char 		pad1;
  unsigned char	colc[3];	/* copy of diffuse light value (rgba) */
  char 		pad2;
  signed char	dir[3];		/* direction of light (normalized) */
  char 		pad3;
} Light_t;

typedef struct {
  unsigned char	col[3];		/* ambient light value (rgba) */
  char 		pad1;
  unsigned char	colc[3];	/* copy of ambient light value (rgba) */
  char 		pad2;
} Ambient_t;

typedef struct {
  int		x1,y1,x2,y2;	/* texture offsets for highlight 1/2 */
} Hilite_t;

typedef union {
    Light_t	l;
    u64	force_structure_alignment[2];
} Light;

typedef union {
    Ambient_t	l;
    u64	force_structure_alignment[1];
} Ambient;

typedef struct {
    Ambient	a;
    Light	l[7];
} Lightsn;

typedef struct {
    Ambient	a;
    Light	l[1];
} Lights0;

typedef struct {
    Ambient	a;
    Light	l[1];
} Lights1;

typedef struct {
    Ambient	a;
    Light	l[2];
} Lights2;

typedef struct {
    Ambient	a;
    Light	l[3];
} Lights3;

typedef struct {
    Ambient	a;
    Light	l[4];
} Lights4;

typedef struct {
    Ambient	a;
    Light	l[5];
} Lights5;

typedef struct {
    Ambient	a;
    Light	l[6];
} Lights6;

typedef struct {
    Ambient	a;
    Light	l[7];
} Lights7;

typedef struct {
    Light	l[2];
} LookAt;

typedef union {
    Hilite_t	h;
    long int	force_structure_alignment[4];
} Hilite;

#define gdSPDefLights0(ar,ag,ab)							{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ { 0, 0, 0},0,{ 0, 0, 0},0,{ 0, 0, 0},0}}} }
#define gdSPDefLights1(ar,ag,ab,r1,g1,b1,x1,y1,z1)					{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}}} }
#define gdSPDefLights2(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2)			{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},				{{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}}} }
#define gdSPDefLights3(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3)											{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},				{{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},				{{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}}} }
#define gdSPDefLights4(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3,r4,g4,b4,x4,y4,z4)								{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},				{{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},				{{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}},				{{ {r4,g4,b4},0,{r4,g4,b4},0,{x4,y4,z4},0}}} }
#define gdSPDefLights5(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3,r4,g4,b4,x4,y4,z4,r5,g5,b5,x5,y5,z5)						{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},				{{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},				{{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}},				{{ {r4,g4,b4},0,{r4,g4,b4},0,{x4,y4,z4},0}},				{{ {r5,g5,b5},0,{r5,g5,b5},0,{x5,y5,z5},0}}} }


#define gdSPDefLights6(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3,r4,g4,b4,x4,y4,z4,r5,g5,b5,x5,y5,z5,r6,g6,b6,x6,y6,z6)				{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},				{{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},				{{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}},				{{ {r4,g4,b4},0,{r4,g4,b4},0,{x4,y4,z4},0}},				{{ {r5,g5,b5},0,{r5,g5,b5},0,{x5,y5,z5},0}},				{{ {r6,g6,b6},0,{r6,g6,b6},0,{x6,y6,z6},0}}} }


#define gdSPDefLights7(ar,ag,ab,r1,g1,b1,x1,y1,z1,r2,g2,b2,x2,y2,z2,r3,g3,b3,x3,y3,z3,r4,g4,b4,x4,y4,z4,r5,g5,b5,x5,y5,z5,r6,g6,b6,x6,y6,z6,r7,g7,b7,x7,y7,z7)			{ 	{{ {ar,ag,ab},0,{ar,ag,ab},0}},					       {{{ {r1,g1,b1},0,{r1,g1,b1},0,{x1,y1,z1},0}},				{{ {r2,g2,b2},0,{r2,g2,b2},0,{x2,y2,z2},0}},				{{ {r3,g3,b3},0,{r3,g3,b3},0,{x3,y3,z3},0}},				{{ {r4,g4,b4},0,{r4,g4,b4},0,{x4,y4,z4},0}},				{{ {r5,g5,b5},0,{r5,g5,b5},0,{x5,y5,z5},0}},				{{ {r6,g6,b6},0,{r6,g6,b6},0,{x6,y6,z6},0}},				{{ {r7,g7,b7},0,{r7,g7,b7},0,{x7,y7,z7},0}}} }


#define gdSPDefLookAt(rightx,righty,rightz,upx,upy,upz)			    		{	{{ {{0,0,0},0,{0,0,0},0,{rightx,righty,rightz},0}}, 			{ {{0,0x80,0},0,{0,0x80,0},0,{upx,upy,upz},0}}}   }

// bit fields not supported in SmallerC.
typedef struct {
	int		cmd;
	// unsigned int	par:8;
	// unsigned int	len:16;
	unsigned int	addr;
} Gdma;

typedef struct {
		int		cmd;
		//int		pad:24;
		Tri		tri;
} Gtri;

typedef struct {
		int		cmd;
		//int		pad1:24;
		//int             pad2:24;
		unsigned char	param;
} Gpopmtx;

typedef struct {
		int		cmd;
		//int		pad0:8;
		//int		mw_index:8;
		//int		number:8;
		//int		pad1:8;
		int		base; //:24;
} Gsegment;

typedef struct {
		int		cmd;
		//int		pad0:8;
		//int		sft:8;
		//int		len:8;
		unsigned int	data; //:32;
} GsetothermodeL;

typedef struct {
		int		cmd;
		//int		pad0:8;
		//int		sft:8;
		//int		len:8;
		unsigned int	data; //:32;
} GsetothermodeH;

typedef struct {
		unsigned char	cmd;
		unsigned char	lodscale;
		unsigned char	tile;
		unsigned char	on;
		unsigned short	s;
		unsigned short	t;
} Gtexture;

typedef struct {
		int		cmd;
		//int		pad:24;
		Tri		line;
} Gline3D;

typedef struct {
		int		cmd;
		//int		pad1:24;
		short int	pad2;
		short int       scale;
} Gperspnorm;

typedef struct {
                int             cmd;
                //unsigned int    fmt:3;
                //unsigned int    siz:2;
               // unsigned int    pad:7;
                //unsigned int    wd:12;
                unsigned int    dram;
} Gsetimg;

typedef struct {
		int		cmd;
		//unsigned int	muxs0:24;
		unsigned int	muxs1; //:32;
} Gsetcombine;

typedef struct {
		int		cmd;
		unsigned char	pad;
		unsigned char	prim_min_level;
		unsigned char	prim_level;
		unsigned long	color;
} Gsetcolor;

typedef struct {
		int		cmd;
		//int		x0:10;
		//int		x0frac:2;
		//int		y0:10;
		//int		y0frac:2;
		//unsigned int	pad:8;
		//int		x1:10;
		//int		x1frac:2;
		//int		y1:10;
		//int		y1frac:2;
} Gfillrect;

typedef struct {
		int		cmd;
		// unsigned int	fmt:3;
		// unsigned int	siz:2;
		// unsigned int	pad0:1;
		// unsigned int	line:9;
		// unsigned int	tmem:9;
		// unsigned int	pad1:5;
		// unsigned int	tile:3;
		// unsigned int	palette:4;
		// unsigned int	ct:1;
		// unsigned int	mt:1;
		// unsigned int	maskt:4;
		// unsigned int	shiftt:4;
		// unsigned int	cs:1;
		// unsigned int	ms:1;
		// unsigned int	masks:4;
		// unsigned int	shifts:4;
} Gsettile;

typedef struct {
		int		cmd;
		// unsigned int	sl:12;
		// unsigned int	tl:12;
		// int		pad:5;
		// unsigned int	tile:3;
		// unsigned int	sh:12;
		// unsigned int	th:12;
} Gloadtile;

typedef Gloadtile Gloadblock;

typedef Gloadtile Gsettilesize;

typedef Gloadtile Gloadtlut;

typedef struct {
		unsigned int	cmd;
		// unsigned int	xl:12;
		// unsigned int	yl:12;
		// unsigned int	pad1:5;
		// unsigned int	tile:3;
		// unsigned int	xh:12;
		// unsigned int	yh:12;
		// unsigned int	s:16;
		// unsigned int	t:16;
		// unsigned int	dsdx:16;
		// unsigned int	dtdy:16;
} Gtexrect;

#define	MakeTexRect(xh,yh,flip,tile,xl,yl,s,t,dsdx,dtdy)			G_TEXRECT, xh, yh, 0, flip, 0, tile, xl, yl, s, t, dsdx, dtdy

typedef struct {
    unsigned long w0;
    unsigned long w1;
    unsigned long w2;
    unsigned long w3;
} TexRect;

typedef struct {
	unsigned int w0;
	unsigned int w1;
} Gwords;

typedef union {
	Gwords		words;
	Gdma		dma;
	Gtri		tri;
	Gline3D		line;
	Gpopmtx		popmtx;
	Gsegment	segment;
	GsetothermodeH	setothermodeH;
	GsetothermodeL	setothermodeL;
	Gtexture	texture;
	Gperspnorm	perspnorm;
	Gsetimg		setimg;
	Gsetcombine	setcombine;
	Gsetcolor	setcolor;
	Gfillrect	fillrect;	/* use for setscissor also */
	Gsettile	settile;
	Gloadtile	loadtile;	/* use for loadblock also, th is dxt */
	Gsettilesize	settilesize;
	Gloadtlut	loadtlut;
       u64	force_structure_alignment;
} Gfx;

#define	gDma0p(pkt, c, s, l)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL((c), 24, 8) | _SHIFTL((l), 0, 24);		_g->words.w1 = (unsigned int)(s);				}

#define	gsDma0p(c, s, l)						{{										_SHIFTL((c), 24, 8) | _SHIFTL((l), 0, 24), (unsigned int)(s)	}}

#define	gDma1p(pkt, c, s, l, p)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL((c), 24, 8) | _SHIFTL((p), 16, 8) |				_SHIFTL((l), 0, 16));					_g->words.w1 = (unsigned int)(s);				}

#define	gsDma1p(c, s, l, p)						{{										(_SHIFTL((c), 24, 8) | _SHIFTL((p), 16, 8) | 				 _SHIFTL((l), 0, 16)), 						        (unsigned int)(s)						}}

#define	gDma2p(pkt, c, adrs, len, idx, ofs)				{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = (_SHIFTL((c),24,8)|_SHIFTL(((len)-1)/8,19,5)|				_SHIFTL((ofs)/8,8,8)|_SHIFTL((idx),0,8));		_g->words.w1 = (unsigned int)(adrs);				}
#define	gsDma2p(c, adrs, len, idx, ofs)					{{										(_SHIFTL((c),24,8)|_SHIFTL(((len)-1)/8,19,5)|				 _SHIFTL((ofs)/8,8,8)|_SHIFTL((idx),0,8)),			        (unsigned int)(adrs)						}}

#define	gSPNoOp(pkt)		gDma0p(pkt, G_SPNOOP, 0, 0)
#define	gsSPNoOp()		gsDma0p(G_SPNOOP, 0, 0)

#ifdef	F3DEX_GBI_2
#define	gSPMatrix(pkt, m, p)			gDma2p((pkt),G_MTX,(m),sizeof(Mtx),(p)^G_MTX_PUSH,0)
#define	gsSPMatrix(m, p)			gsDma2p(     G_MTX,(m),sizeof(Mtx),(p)^G_MTX_PUSH,0)
#else	/* F3DEX_GBI_2 */
#define	gSPMatrix(pkt, m, p)	gDma1p(pkt, G_MTX, m, sizeof(Mtx), p)
#define	gsSPMatrix(m, p)	gsDma1p(G_MTX, m, sizeof(Mtx), p)
#endif	/* F3DEX_GBI_2 */

#if	defined(F3DEX_GBI_2)

#define	gSPVertex(pkt, v, n, v0)				{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 =								  _SHIFTL(G_VTX,24,8)|_SHIFTL((n),12,8)|_SHIFTL((v0)+(n),1,7);		_g->words.w1 = (unsigned int)(v);				}
#define	gsSPVertex(v, n, v0)					{{										(_SHIFTL(G_VTX,24,8)|_SHIFTL((n),12,8)|_SHIFTL((v0)+(n),1,7)),	        (unsigned int)(v)						}}
#elif	(defined(F3DEX_GBI)||defined(F3DLP_GBI))

#define	gSPVertex(pkt, v, n, v0)                 gDma1p((pkt),G_VTX,(v),((n)<<10)|(sizeof(Vtx)*(n)-1),(v0)*2)
#define	gsSPVertex(v, n, v0)                 gsDma1p(G_VTX,(v),((n)<<10)|(sizeof(Vtx)*(n)-1),(v0)*2)
#else
#define	gSPVertex(pkt, v, n, v0)                 gDma1p(pkt, G_VTX, v, sizeof(Vtx)*(n),((n)-1)<<4|(v0))
#define	gsSPVertex(v, n, v0)                 gsDma1p(G_VTX, v, sizeof(Vtx)*(n), ((n)-1)<<4|(v0))
#endif

#ifdef	F3DEX_GBI_2
#define gSPViewport(pkt, v)			gDma2p((pkt), G_MOVEMEM, (v), sizeof(Vp), G_MV_VIEWPORT, 0)
#define gsSPViewport(v)			gsDma2p(      G_MOVEMEM, (v), sizeof(Vp), G_MV_VIEWPORT, 0)
#else	/* F3DEX_GBI_2 */
#define gSPViewport(pkt,v)			gDma1p((pkt), G_MOVEMEM, (v), sizeof(Vp), G_MV_VIEWPORT)
#define gsSPViewport(v)			gsDma1p(      G_MOVEMEM, (v), sizeof(Vp), G_MV_VIEWPORT)
#endif	/* F3DEX_GBI_2 */

#define	gSPDisplayList(pkt,dl)	gDma1p(pkt,G_DL,dl,0,G_DL_PUSH)
#define	gsSPDisplayList(   dl)	gsDma1p(   G_DL,dl,0,G_DL_PUSH)

#define	gSPBranchList(pkt,dl)	gDma1p(pkt,G_DL,dl,0,G_DL_NOPUSH)
#define	gsSPBranchList(   dl)	gsDma1p(   G_DL,dl,0,G_DL_NOPUSH)

#define	gSPSprite2DBase(pkt, s)	gDma1p(pkt, G_SPRITE2D_BASE, s, sizeof(uSprite), 0)
#define	gsSPSprite2DBase(s)	gsDma1p(G_SPRITE2D_BASE, s, sizeof(uSprite), 0)

#define	gImmp0(pkt, c)							{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL((c), 24, 8);				}

#define	gsImmp0(c)							{{										_SHIFTL((c), 24, 8)						}}

#define	gImmp1(pkt, c, p0)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL((c), 24, 8);					_g->words.w1 = (unsigned int)(p0);				}

#define	gsImmp1(c, p0)							{{										_SHIFTL((c), 24, 8), (unsigned int)(p0)				}}

#define	gImmp2(pkt, c, p0, p1)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL((c), 24, 8);					_g->words.w1 = _SHIFTL((p0), 16, 16) | _SHIFTL((p1), 8, 8);	}

#define	gsImmp2(c, p0, p1)						{{										_SHIFTL((c), 24, 8),  _SHIFTL((p0), 16, 16) | _SHIFTL((p1), 8, 8)}}

#define	gImmp3(pkt, c, p0, p1, p2)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL((c), 24, 8);					_g->words.w1 = (_SHIFTL((p0), 16, 16) | _SHIFTL((p1), 8, 8) |				_SHIFTL((p2), 0, 8));				}

#define	gsImmp3(c, p0, p1, p2)						{{										_SHIFTL((c), 24, 8), (_SHIFTL((p0), 16, 16) | 						      _SHIFTL((p1), 8, 8) | _SHIFTL((p2), 0, 8))}}

#define	gImmp21(pkt, c, p0, p1, dat)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL((c), 24, 8)  | _SHIFTL((p0), 8, 16) |				_SHIFTL((p1), 0, 8));					_g->words.w1 = (unsigned int) (dat);				}

#define	gsImmp21(c, p0, p1, dat)					{{										_SHIFTL((c), 24, 8) | _SHIFTL((p0), 8, 16) | _SHIFTL((p1), 0, 8),        (unsigned int) (dat)						}}

#ifdef	F3DEX_GBI_2
#define gMoveWd(pkt, index, offset, data)					gDma1p((pkt), G_MOVEWORD, data, offset, index)
#define gsMoveWd(    index, offset, data)					gsDma1p(      G_MOVEWORD, data, offset, index)
#else	/* F3DEX_GBI_2 */
#define gMoveWd(pkt, index, offset, data)					gImmp21((pkt), G_MOVEWORD, offset, index, data)
#define gsMoveWd(    index, offset, data)					gsImmp21(      G_MOVEWORD, offset, index, data)
#endif	/* F3DEX_GBI_2 */

#define gSPSprite2DScaleFlip(pkt, sx, sy, fx, fy)                       {                                                                       	Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_SPRITE2D_SCALEFLIP, 24, 8) |          			_SHIFTL((fx), 8, 8) |                           			_SHIFTL((fy), 0, 8));	                        	_g->words.w1 = (_SHIFTL((sx), 16, 16) |                         			_SHIFTL((sy),  0, 16));                         }

#define gsSPSprite2DScaleFlip(sx, sy, fx, fy)                           {{                                                                                 (_SHIFTL(G_SPRITE2D_SCALEFLIP, 24, 8) |                       	   _SHIFTL((fx), 8, 8) |                                        	   _SHIFTL((fy), 0, 8)),	                                	  (_SHIFTL((sx), 16, 16) |                                      	   _SHIFTL((sy),  0, 16))                                       }}

#define gSPSprite2DDraw(pkt, px, py)                                    {                                                                       	Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_SPRITE2D_DRAW, 24, 8));               	_g->words.w1 = (_SHIFTL((px), 16, 16) |                         			_SHIFTL((py),  0, 16));                         }

#define gsSPSprite2DDraw(px, py)                                        {{                                                                                 (_SHIFTL(G_SPRITE2D_DRAW, 24, 8)),                            	  (_SHIFTL((px), 16, 16) |                                      	   _SHIFTL((py),  0, 16))                                       }}

#if	(defined(F3DLP_GBI)||defined(F3DEX_GBI))
#define __gsSP1Triangle_w1(v0, v1, v2)			     (_SHIFTL((v0)*2,16,8)|_SHIFTL((v1)*2,8,8)|_SHIFTL((v2)*2,0,8))
#define __gsSP1Triangle_w1f(v0, v1, v2, flag)			     (((flag) == 0) ? __gsSP1Triangle_w1(v0, v1, v2):		      ((flag) == 1) ? __gsSP1Triangle_w1(v1, v2, v0):			              __gsSP1Triangle_w1(v2, v0, v1))
#define __gsSPLine3D_w1(v0, v1, wd)				     (_SHIFTL((v0)*2,16,8)|_SHIFT((v1)*2,8,8)|_SHIFT((wd),0,8))
#define __gsSPLine3D_w1f(v0, v1, wd, flag)			     (((flag) == 0) ? __gsSPLine3D_w1(v0, v1, wd):			              __gsSPLine3D_w1(v1, v0, wd))
#define __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag)	  (((flag) == 0) ? __gsSP1Triangle_w1(v0, v1, v2):         ((flag) == 1) ? __gsSP1Triangle_w1(v1, v2, v3):         ((flag) == 2) ? __gsSP1Triangle_w1(v2, v3, v0):                         __gsSP1Triangle_w1(v3, v0, v1))
#define __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag)	  (((flag) == 0) ? __gsSP1Triangle_w1(v0, v2, v3):         ((flag) == 1) ? __gsSP1Triangle_w1(v1, v3, v0):         ((flag) == 2) ? __gsSP1Triangle_w1(v2, v0, v1):                         __gsSP1Triangle_w1(v3, v1, v2))
#else
#define __gsSP1Triangle_w1f(v0, v1, v2, flag)			     (_SHIFTL((flag), 24,8)|_SHIFTL((v0)*10,16,8)|		      _SHIFTL((v1)*10, 8,8)|_SHIFTL((v2)*10, 0,8))
#define __gsSPLine3D_w1f(v0, v1, wd, flag)			     (_SHIFTL((flag), 24,8)|_SHIFTL((v0)*10,16,8)| 		      _SHIFTL((v1)*10, 8,8)|_SHIFTL((wd),    0,8))
#endif

#ifdef	F3DEX_GBI_2

#define gSP1Triangle(pkt, v0, v1, v2, flag)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_TRI1, 24, 8)|							__gsSP1Triangle_w1f(v0, v1, v2, flag);			_g->words.w1 = 0;						}
#define gsSP1Triangle(v0, v1, v2, flag)					{{										_SHIFTL(G_TRI1, 24, 8)|__gsSP1Triangle_w1f(v0, v1, v2, flag),		0								}}

#define gSPLine3D(pkt, v0, v1, flag)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_LINE3D, 24, 8)|						__gsSPLine3D_w1f(v0, v1, 0, flag);			_g->words.w1 = 0;						}
#define gsSPLine3D(v0, v1, flag)					{{										_SHIFTL(G_LINE3D, 24, 8)|__gsSPLine3D_w1f(v0, v1, 0, flag),		0								}}

#define gSPLineW3D(pkt, v0, v1, wd, flag)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_LINE3D, 24, 8)|						__gsSPLine3D_w1f(v0, v1, wd, flag);			_g->words.w1 = 0;						}
#define gsSPLineW3D(v0, v1, wd, flag)					{{										_SHIFTL(G_LINE3D, 24, 8)|__gsSPLine3D_w1f(v0, v1, wd, flag),		0								}}

#define gSP1Quadrangle(pkt, v0, v1, v2, v3, flag)                       {                                                                               Gfx *_g = (Gfx *)(pkt);                                                                                                                         _g->words.w0 = (_SHIFTL(G_QUAD, 24, 8)|	                                                __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag));           _g->words.w1 =  __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag);    }

#define gsSP1Quadrangle(v0, v1, v2, v3, flag)                           {{                                                                               (_SHIFTL(G_QUAD, 24, 8)|                                                 __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag)),                           __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag)                    }}
#else	/* F3DEX_GBI_2 */

#define gSP1Triangle(pkt, v0, v1, v2, flag)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_TRI1, 24, 8);					_g->words.w1 = __gsSP1Triangle_w1f(v0, v1, v2, flag);		}
#define gsSP1Triangle(v0, v1, v2, flag)					{{										_SHIFTL(G_TRI1, 24, 8),							__gsSP1Triangle_w1f(v0, v1, v2, flag)				}}

#define gSPLine3D(pkt, v0, v1, flag)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_LINE3D, 24, 8);				_g->words.w1 = __gsSPLine3D_w1f(v0, v1, 0, flag);		}
#define gsSPLine3D(v0, v1, flag)					{{										_SHIFTL(G_LINE3D, 24, 8),						__gsSPLine3D_w1f(v0, v1, 0, flag)				}}

#define gSPLineW3D(pkt, v0, v1, wd, flag)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_LINE3D, 24, 8);				_g->words.w1 = __gsSPLine3D_w1f(v0, v1, wd, flag);		}
#define gsSPLineW3D(v0, v1, wd, flag)					{{										_SHIFTL(G_LINE3D, 24, 8),						__gsSPLine3D_w1f(v0, v1, wd, flag)				}}

#define gSP1Quadrangle(pkt, v0, v1, v2, v3, flag)                       {                                                                               Gfx *_g = (Gfx *)(pkt);                                                                                                                         _g->words.w0 = (_SHIFTL(G_TRI2, 24, 8)|	                                                __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag));           _g->words.w1 =  __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag);    }

#define gsSP1Quadrangle(v0, v1, v2, v3, flag)                           {{                                                                               (_SHIFTL(G_TRI2, 24, 8)|                                                 __gsSP1Quadrangle_w1f(v0, v1, v2, v3, flag)),                           __gsSP1Quadrangle_w2f(v0, v1, v2, v3, flag)                    }}
#endif	/* F3DEX_GBI_2 */

#if	(defined(F3DLP_GBI)||defined(F3DEX_GBI))

#define gSP2Triangles(pkt, v00, v01, v02, flag0, v10, v11, v12, flag1)	{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_TRI2, 24, 8)|							__gsSP1Triangle_w1f(v00, v01, v02, flag0));	        _g->words.w1 =  __gsSP1Triangle_w1f(v10, v11, v12, flag1); 	}

#define gsSP2Triangles(v00, v01, v02, flag0, v10, v11, v12, flag1)	{{										(_SHIFTL(G_TRI2, 24, 8)|						 __gsSP1Triangle_w1f(v00, v01, v02, flag0)),				 __gsSP1Triangle_w1f(v10, v11, v12, flag1)			}}

#endif	/* F3DEX_GBI/F3DLP_GBI */

#if	(defined(F3DEX_GBI)||defined(F3DLP_GBI))
#define gSPCullDisplayList(pkt,vstart,vend)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_CULLDL, 24, 8) | 						_SHIFTL((vstart)*2, 0, 16);				_g->words.w1 = _SHIFTL((vend)*2, 0, 16);			}

#define gsSPCullDisplayList(vstart,vend)				{{										_SHIFTL(G_CULLDL, 24, 8) | _SHIFTL((vstart)*2, 0, 16),			_SHIFTL((vend)*2, 0, 16)					}}

#else
#define gSPCullDisplayList(pkt,vstart,vend)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_CULLDL, 24, 8) |			                       ((0x0f & (vstart))*40);					_g->words.w1 = (unsigned int)((0x0f & ((vend)+1))*40);		}

#define gsSPCullDisplayList(vstart,vend)				{{										_SHIFTL(G_CULLDL, 24, 8) | ((0x0f & (vstart))*40), 			((0x0f & ((vend)+1))*40)					}}
#endif

#define gSPSegment(pkt, segment, base)						gMoveWd(pkt, G_MW_SEGMENT, (segment)*4, base)
#define gsSPSegment(segment, base)						gsMoveWd(    G_MW_SEGMENT, (segment)*4, base)


#define FR_NEG_FRUSTRATIO_1	0x00000001
#define FR_POS_FRUSTRATIO_1	0x0000ffff
#define FR_NEG_FRUSTRATIO_2	0x00000002
#define FR_POS_FRUSTRATIO_2	0x0000fffe
#define FR_NEG_FRUSTRATIO_3	0x00000003
#define FR_POS_FRUSTRATIO_3	0x0000fffd
#define FR_NEG_FRUSTRATIO_4	0x00000004
#define FR_POS_FRUSTRATIO_4	0x0000fffc
#define FR_NEG_FRUSTRATIO_5	0x00000005
#define FR_POS_FRUSTRATIO_5	0x0000fffb
#define FR_NEG_FRUSTRATIO_6	0x00000006
#define FR_POS_FRUSTRATIO_6	0x0000fffa

#define gSPClipRatio(pkt, r)						{										gMoveWd(pkt, G_MW_CLIP, G_MWO_CLIP_RNX, FR_NEG_##r);			gMoveWd(pkt, G_MW_CLIP, G_MWO_CLIP_RNY, FR_NEG_##r);			gMoveWd(pkt, G_MW_CLIP, G_MWO_CLIP_RPX, FR_POS_##r);			gMoveWd(pkt, G_MW_CLIP, G_MWO_CLIP_RPY, FR_POS_##r);		}

#define gsSPClipRatio(r)							gsMoveWd(G_MW_CLIP, G_MWO_CLIP_RNX, FR_NEG_##r),			gsMoveWd(G_MW_CLIP, G_MWO_CLIP_RNY, FR_NEG_##r),			gsMoveWd(G_MW_CLIP, G_MWO_CLIP_RPX, FR_POS_##r),			gsMoveWd(G_MW_CLIP, G_MWO_CLIP_RPY, FR_POS_##r)

#ifdef	F3DEX_GBI_2
#define gSPInsertMatrix(pkt, where, num)					ERROR!! gSPInsertMatrix is no longer supported.
#define gsSPInsertMatrix(where, num)						ERROR!! gsSPInsertMatrix is no longer supported.
#else
#define gSPInsertMatrix(pkt, where, num)					gMoveWd(pkt, G_MW_MATRIX, where, num)
#define gsSPInsertMatrix(where, num)						gsMoveWd(G_MW_MATRIX, where, num)
#endif

#ifdef	F3DEX_GBI_2
#define	gSPForceMatrix(pkt, mptr)					{	gDma2p((pkt),G_MOVEMEM,(mptr),sizeof(Mtx),G_MV_MATRIX,0);		gMoveWd((pkt), G_MW_FORCEMTX,0,0x00010000);			}
#define	gsSPForceMatrix(mptr)							gsDma2p(G_MOVEMEM,(mptr),sizeof(Mtx),G_MV_MATRIX,0),			gsMoveWd(G_MW_FORCEMTX,0,0x00010000)

#else	/* F3DEX_GBI_2 */
#define	gSPForceMatrix(pkt, mptr)					{										gDma1p(pkt, G_MOVEMEM, mptr,              16, G_MV_MATRIX_1);		gDma1p(pkt, G_MOVEMEM, (char *)(mptr)+16, 16, G_MV_MATRIX_2);		gDma1p(pkt, G_MOVEMEM, (char *)(mptr)+32, 16, G_MV_MATRIX_3);		gDma1p(pkt, G_MOVEMEM, (char *)(mptr)+48, 16, G_MV_MATRIX_4);	}
#define	gsSPForceMatrix(mptr)							gsDma1p(    G_MOVEMEM, mptr,              16, G_MV_MATRIX_1),		gsDma1p(    G_MOVEMEM, (char *)(mptr)+16, 16, G_MV_MATRIX_2),		gsDma1p(    G_MOVEMEM, (char *)(mptr)+32, 16, G_MV_MATRIX_3),		gsDma1p(    G_MOVEMEM, (char *)(mptr)+48, 16, G_MV_MATRIX_4)
#endif	/* F3DEX_GBI_2 */

#if	(defined(F3DEX_GBI)||defined(F3DLP_GBI))
#define gSPModifyVertex(pkt, vtx, where, val)				{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = (_SHIFTL(G_MODIFYVTX,24,8)|					        _SHIFTL((where),16,8)|_SHIFTL((vtx)*2,0,16));		_g->words.w1 = (unsigned int)(val);				}
#define gsSPModifyVertex(vtx, where, val)				{{										_SHIFTL(G_MODIFYVTX,24,8)|						_SHIFTL((where),16,8)|_SHIFTL((vtx)*2,0,16),				(unsigned int)(val)						}}
#else
#define gSPModifyVertex(pkt, vtx, where, val)					 gMoveWd(pkt, G_MW_POINTS, (vtx)*40+(where), val)
#define gsSPModifyVertex(vtx, where, val)					 gsMoveWd(G_MW_POINTS, (vtx)*40+(where), val)
#endif

#if	(defined(F3DEX_GBI)||defined(F3DLP_GBI))

#define	G_BZ_PERSP	0
#define	G_BZ_ORTHO	1

#define	G_DEPTOZSrg(zval, near, far, flag, zmin, zmax)			(((unsigned int)FTOFIX32(((flag) == G_BZ_PERSP ? 						  (1.0f-(float)(near)/(float)(zval)) / 					  (1.0f-(float)(near)/(float)(far )) :					  ((float)(zval) - (float)(near)) /					  ((float)(far ) - (float)(near))))) *		 (((int)((zmax) - (zmin)))&~1) + (int)FTOFIX32(zmin))

#define	G_DEPTOZS(zval, near, far, flag) 	G_DEPTOZSrg(zval, near, far, flag, 0, G_MAXZ)

#define	gSPBranchLessZrg(pkt, dl, vtx, zval, near, far, flag, zmin, zmax) {										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = _SHIFTL(G_RDPHALF_1,24,8);				_g->words.w1 = (unsigned int)(dl);					_g = (Gfx *)(pkt);							_g->words.w0 = (_SHIFTL(G_BRANCH_Z,24,8)|					        _SHIFTL((vtx)*5,12,12)|_SHIFTL((vtx)*2,0,12));		_g->words.w1 = G_DEPTOZSrg(zval, near, far, flag, zmin, zmax);	}

#define	gsSPBranchLessZrg(dl, vtx, zval, near, far, flag, zmin, zmax)	      {{	_SHIFTL(G_RDPHALF_1,24,8),					      	(unsigned int)(dl),						}},    {{	_SHIFTL(G_BRANCH_Z,24,8)|_SHIFTL((vtx)*5,12,12)|_SHIFTL((vtx)*2,0,12),	G_DEPTOZSrg(zval, near, far, flag, zmin, zmax),			}}

#define	gSPBranchLessZ(pkt, dl, vtx, zval, near, far, flag)			gSPBranchLessZrg(pkt, dl, vtx, zval, near, far, flag, 0, G_MAXZ)
#define	gsSPBranchLessZ(dl, vtx, zval, near, far, flag)				gsSPBranchLessZrg(dl, vtx, zval, near, far, flag, 0, G_MAXZ)

#define	gSPBranchLessZraw(pkt, dl, vtx, zval)				{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = _SHIFTL(G_RDPHALF_1,24,8);				_g->words.w1 = (unsigned int)(dl);					_g = (Gfx *)(pkt);							_g->words.w0 = (_SHIFTL(G_BRANCH_Z,24,8)|					        _SHIFTL((vtx)*5,12,12)|_SHIFTL((vtx)*2,0,12));		_g->words.w1 = (unsigned int)(zval);				}

#define	gsSPBranchLessZraw(dl, vtx, zval)				{{	_SHIFTL(G_RDPHALF_1,24,8),					      	(unsigned int)(dl),						}},    {{	_SHIFTL(G_BRANCH_Z,24,8)|_SHIFTL((vtx)*5,12,12)|_SHIFTL((vtx)*2,0,12),	(unsigned int)(zval),						}}

#define	gSPLoadUcodeEx(pkt, uc_start, uc_dstart, uc_dsize)		{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = _SHIFTL(G_RDPHALF_1,24,8);				_g->words.w1 = (unsigned int)(uc_dstart);				_g = (Gfx *)(pkt);							_g->words.w0 = (_SHIFTL(G_LOAD_UCODE,24,8)|						_SHIFTL((int)(uc_dsize)-1,0,16));			_g->words.w1 = (unsigned int)(uc_start);			}

#define	gsSPLoadUcodeEx(uc_start, uc_dstart, uc_dsize)			{{	_SHIFTL(G_RDPHALF_1,24,8),						(unsigned int)(uc_dstart),				}},	{{	_SHIFTL(G_LOAD_UCODE,24,8)|						  _SHIFTL((int)(uc_dsize)-1,0,16),					(unsigned int)(uc_start),				}}

#define	gSPLoadUcode(pkt, uc_start, uc_dstart)				        gSPLoadUcodeEx((pkt), (uc_start), (uc_dstart), SP_UCODE_DATA_SIZE)
#define	gsSPLoadUcode(uc_start, uc_dstart)				        gsSPLoadUcodeEx((uc_start), (uc_dstart), SP_UCODE_DATA_SIZE)

#define	gSPLoadUcodeL(pkt, ucode)					        gSPLoadUcode((pkt), OS_K0_TO_PHYSICAL(&##ucode##TextStart),			            OS_K0_TO_PHYSICAL(&##ucode##DataStart))
#define	gsSPLoadUcodeL(ucode)						        gsSPLoadUcode(OS_K0_TO_PHYSICAL(&##ucode##TextStart),				      OS_K0_TO_PHYSICAL(&##ucode##DataStart))
#endif

#ifdef	F3DEX_GBI_2

#define	gSPDma_io(pkt, flag, dmem, dram, size)				{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = _SHIFTL(G_DMA_IO,24,8)|_SHIFTL((flag),23,1)|		  _SHIFTL((dmem)/8,13,10)|_SHIFTL((size)-1,0,12);			_g->words.w1 = (unsigned int)(dram);				}

#define	gsSPDma_io(flag, dmem, dram, size)				{{										_SHIFTL(G_DMA_IO,24,8)|_SHIFTL((flag),23,1)|				_SHIFTL((dmem)/8,13,10)|_SHIFTL((size)-1,0,12),				(unsigned int)(dram)						}}

#define	gSPDmaRead(pkt,dmem,dram,size)	gSPDma_io((pkt),0,(dmem),(dram),(size))
#define	gsSPDmaRead(dmem,dram,size)	gsSPDma_io(0,(dmem),(dram),(size))
#define	gSPDmaWrite(pkt,dmem,dram,size)	gSPDma_io((pkt),1,(dmem),(dram),(size))
#define	gsSPDmaWrite(dmem,dram,size)	gsSPDma_io(1,(dmem),(dram),(size))
#endif

#ifdef	F3DEX_GBI_2
#define NUML(n)	((n)*24)
#else
#define NUML(n)	(((n)+1)*32 + 0x80000000)
#endif
#define NUMLIGHTS_0	1
#define NUMLIGHTS_1	1
#define NUMLIGHTS_2	2
#define NUMLIGHTS_3	3
#define NUMLIGHTS_4	4
#define NUMLIGHTS_5	5
#define NUMLIGHTS_6	6
#define NUMLIGHTS_7	7

#define gSPNumLights(pkt, n)							gMoveWd(pkt, G_MW_NUMLIGHT, G_MWO_NUMLIGHT, NUML(n))
#define gsSPNumLights(n)							gsMoveWd(    G_MW_NUMLIGHT, G_MWO_NUMLIGHT, NUML(n))

#define LIGHT_1		1
#define LIGHT_2		2
#define LIGHT_3		3
#define LIGHT_4		4
#define LIGHT_5		5
#define LIGHT_6		6
#define LIGHT_7		7
#define LIGHT_8		8

#ifdef	F3DEX_GBI_2
#define gSPLight(pkt, l, n)		  gDma2p((pkt),G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,(n)*24+24)
#define gsSPLight(l, n)		 gsDma2p(      G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,(n)*24+24)
#else	/* F3DEX_GBI_2 */
#define gSPLight(pkt, l, n)		 gDma1p(pkt, G_MOVEMEM, l, sizeof(Light),((n)-1)*2+G_MV_L0)
#define gsSPLight(l, n)		 gsDma1p(    G_MOVEMEM, l, sizeof(Light),((n)-1)*2+G_MV_L0)
#endif	/* F3DEX_GBI_2 */

#define gSPLightColor(pkt, n, col)					{										gMoveWd(pkt, G_MW_LIGHTCOL, G_MWO_a##n, col);				gMoveWd(pkt, G_MW_LIGHTCOL, G_MWO_b##n, col);			}
#define gsSPLightColor(n, col)							gsMoveWd(G_MW_LIGHTCOL, G_MWO_a##n, col),				gsMoveWd(G_MW_LIGHTCOL, G_MWO_b##n, col)

#define gSPSetLights0(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_0);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.a,2);					}
#define gsSPSetLights0(name)							gsSPNumLights(NUMLIGHTS_0),						gsSPLight(&name.l[0],1),						gsSPLight(&name.a,2)

#define gSPSetLights1(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_1);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.a,2);					}
#define gsSPSetLights1(name)							gsSPNumLights(NUMLIGHTS_1),						gsSPLight(&name.l[0],1),						gsSPLight(&name.a,2)

#define gSPSetLights2(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_2);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.l[1],2);						gSPLight(pkt,&name.a,3);					}
#define gsSPSetLights2(name)							gsSPNumLights(NUMLIGHTS_2),						gsSPLight(&name.l[0],1),						gsSPLight(&name.l[1],2),						gsSPLight(&name.a,3)

#define gSPSetLights3(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_3);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.l[1],2);						gSPLight(pkt,&name.l[2],3);						gSPLight(pkt,&name.a,4);					}
#define gsSPSetLights3(name)							gsSPNumLights(NUMLIGHTS_3),						gsSPLight(&name.l[0],1),						gsSPLight(&name.l[1],2),						gsSPLight(&name.l[2],3),						gsSPLight(&name.a,4)

#define gSPSetLights4(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_4);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.l[1],2);						gSPLight(pkt,&name.l[2],3);						gSPLight(pkt,&name.l[3],4);						gSPLight(pkt,&name.a,5);					}
#define gsSPSetLights4(name)							gsSPNumLights(NUMLIGHTS_4),						gsSPLight(&name.l[0],1),						gsSPLight(&name.l[1],2),						gsSPLight(&name.l[2],3),						gsSPLight(&name.l[3],4),						gsSPLight(&name.a,5)

#define gSPSetLights5(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_5);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.l[1],2);						gSPLight(pkt,&name.l[2],3);						gSPLight(pkt,&name.l[3],4);						gSPLight(pkt,&name.l[4],5);						gSPLight(pkt,&name.a,6);					}

#define gsSPSetLights5(name)							gsSPNumLights(NUMLIGHTS_5),						gsSPLight(&name.l[0],1),						gsSPLight(&name.l[1],2),						gsSPLight(&name.l[2],3),						gsSPLight(&name.l[3],4),						gsSPLight(&name.l[4],5),						gsSPLight(&name.a,6)

#define gSPSetLights6(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_6);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.l[1],2);						gSPLight(pkt,&name.l[2],3);						gSPLight(pkt,&name.l[3],4);						gSPLight(pkt,&name.l[4],5);						gSPLight(pkt,&name.l[5],6);						gSPLight(pkt,&name.a,7);					}

#define gsSPSetLights6(name)							gsSPNumLights(NUMLIGHTS_6),						gsSPLight(&name.l[0],1),						gsSPLight(&name.l[1],2),						gsSPLight(&name.l[2],3),						gsSPLight(&name.l[3],4),						gsSPLight(&name.l[4],5),						gsSPLight(&name.l[5],6),						gsSPLight(&name.a,7)

#define gSPSetLights7(pkt,name)						{										gSPNumLights(pkt,NUMLIGHTS_7);						gSPLight(pkt,&name.l[0],1);						gSPLight(pkt,&name.l[1],2);						gSPLight(pkt,&name.l[2],3);						gSPLight(pkt,&name.l[3],4);						gSPLight(pkt,&name.l[4],5);						gSPLight(pkt,&name.l[5],6);						gSPLight(pkt,&name.l[6],7);						gSPLight(pkt,&name.a,8);					}

#define gsSPSetLights7(name)							gsSPNumLights(NUMLIGHTS_7),						gsSPLight(&name.l[0],1),						gsSPLight(&name.l[1],2),						gsSPLight(&name.l[2],3),						gsSPLight(&name.l[3],4),						gsSPLight(&name.l[4],5),						gsSPLight(&name.l[5],6),						gsSPLight(&name.l[6],7),						gsSPLight(&name.a,8)

#ifdef	F3DEX_GBI_2
#define gSPLookAtX(pkt, l)		 gDma2p((pkt),G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,G_MVO_LOOKATX)
#define gsSPLookAtX(l)			 gsDma2p(     G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,G_MVO_LOOKATX)
#define gSPLookAtY(pkt, l)		 gDma2p((pkt),G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,G_MVO_LOOKATY)
#define gsSPLookAtY(l)			 gsDma2p(     G_MOVEMEM,(l),sizeof(Light),G_MV_LIGHT,G_MVO_LOOKATY)
#else	/* F3DEX_GBI_2 */
#define gSPLookAtX(pkt, l)		 gDma1p(pkt, G_MOVEMEM, l, sizeof(Light),G_MV_LOOKATX)
#define gsSPLookAtX(l)			 gsDma1p(    G_MOVEMEM, l, sizeof(Light),G_MV_LOOKATX)
#define gSPLookAtY(pkt, l)		 gDma1p(pkt, G_MOVEMEM, l, sizeof(Light),G_MV_LOOKATY)
#define gsSPLookAtY(l)			 gsDma1p(    G_MOVEMEM, l, sizeof(Light),G_MV_LOOKATY)
#endif	/* F3DEX_GBI_2 */

#define gSPLookAt(pkt, la)						{										gSPLookAtX(pkt,la)							gSPLookAtY(pkt,(char *)(la)+16)					}
#define gsSPLookAt(la)								gsSPLookAtX(la),							gsSPLookAtY((char *)(la)+16)

#define gDPSetHilite1Tile(pkt, tile, hilite, width, height)			gDPSetTileSize(pkt, tile, (hilite)->h.x1 & 0xfff, (hilite)->h.y1 & 0xfff, 			((((width)-1)*4)+(hilite)->h.x1) & 0xfff, ((((height)-1)*4)+(hilite)->h.y1) & 0xfff)

#define gDPSetHilite2Tile(pkt, tile, hilite, width, height)			gDPSetTileSize(pkt, tile, (hilite)->h.x2 & 0xfff, (hilite)->h.y2 & 0xfff, 			((((width)-1)*4)+(hilite)->h.x2) & 0xfff, ((((height)-1)*4)+(hilite)->h.y2) & 0xfff)

#define gSPFogFactor(pkt, fm, fo)				        gMoveWd(pkt, G_MW_FOG, G_MWO_FOG, 					(_SHIFTL(fm,16,16) | _SHIFTL(fo,0,16)))

#define gsSPFogFactor(fm, fo)					        gsMoveWd(G_MW_FOG, G_MWO_FOG, 						(_SHIFTL(fm,16,16) | _SHIFTL(fo,0,16)))

#define gSPFogPosition(pkt, min, max)					gMoveWd(pkt, G_MW_FOG, G_MWO_FOG, 					(_SHIFTL((128000/((max)-(min))),16,16) |				_SHIFTL(((500-(min))*256/((max)-(min))),0,16)))

#define gsSPFogPosition(min, max)					gsMoveWd(G_MW_FOG, G_MWO_FOG, 						(_SHIFTL((128000/((max)-(min))),16,16) |				_SHIFTL(((500-(min))*256/((max)-(min))),0,16)))

#ifdef	F3DEX_GBI_2

#define gSPTexture(pkt, s, t, level, tile, on)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_TEXTURE,24,8) | 						_SHIFTL(BOWTIE_VAL,16,8) |						_SHIFTL((level),11,3) | _SHIFTL((tile),8,3) |				_SHIFTL((on),1,7));					_g->words.w1 = (_SHIFTL((s),16,16) | _SHIFTL((t),0,16));	}
#define gsSPTexture(s, t, level, tile, on)				{{										(_SHIFTL(G_TEXTURE,24,8) | _SHIFTL(BOWTIE_VAL,16,8) |			 _SHIFTL((level),11,3) | _SHIFTL((tile),8,3) | _SHIFTL((on),1,7)),        (_SHIFTL((s),16,16) | _SHIFTL((t),0,16))			}}

#define gSPTextureL(pkt, s, t, level, xparam, tile, on)		{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_TEXTURE,24,8) | 						_SHIFTL((xparam),16,8) | 						_SHIFTL((level),11,3) | _SHIFTL((tile),8,3) |				_SHIFTL((on),1,7));					_g->words.w1 = (_SHIFTL((s),16,16) | _SHIFTL((t),0,16));	}
#define gsSPTextureL(s, t, level, xparam, tile, on)			{{										(_SHIFTL(G_TEXTURE,24,8) | _SHIFTL((xparam),16,8) |			 _SHIFTL((level),11,3) | _SHIFTL((tile),8,3) | _SHIFTL((on),1,7)),        (_SHIFTL((s),16,16) | _SHIFTL((t),0,16))			}}
#else

#define gSPTexture(pkt, s, t, level, tile, on)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_TEXTURE,24,8)|_SHIFTL(BOWTIE_VAL,16,8)|			_SHIFTL((level),11,3)|_SHIFTL((tile),8,3)|				_SHIFTL((on),0,8));					_g->words.w1 = (_SHIFTL((s),16,16)|_SHIFTL((t),0,16));		}
#define gsSPTexture(s, t, level, tile, on)				{{										(_SHIFTL(G_TEXTURE,24,8)|_SHIFTL(BOWTIE_VAL,16,8)|			 _SHIFTL((level),11,3)|_SHIFTL((tile),8,3)|_SHIFTL((on),0,8)),	        (_SHIFTL((s),16,16)|_SHIFTL((t),0,16))				}}

#define gSPTextureL(pkt, s, t, level, xparam, tile, on)		{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_TEXTURE,24,8)|_SHIFTL((xparam),16,8)|				_SHIFTL((level),11,3)|_SHIFTL((tile),8,3)|				_SHIFTL((on),0,8));					_g->words.w1 = (_SHIFTL((s),16,16)|_SHIFTL((t),0,16));		}
#define gsSPTextureL(s, t, level, xparam, tile, on)			{{										(_SHIFTL(G_TEXTURE,24,8)|_SHIFTL((xparam),16,8)|			 _SHIFTL((level),11,3)|_SHIFTL((tile),8,3)|_SHIFTL((on),0,8)),	        (_SHIFTL((s),16,16)|_SHIFTL((t),0,16))				}}
#endif

#define gSPPerspNormalize(pkt, s)	gMoveWd(pkt, G_MW_PERSPNORM, 0, (s))
#define gsSPPerspNormalize(s)		gsMoveWd(    G_MW_PERSPNORM, 0, (s))

#ifdef	F3DEX_GBI_2
#define gSPPopMatrixN(pkt, n, num)	gDma2p((pkt),G_POPMTX,(num)*64,64,2,0)
#define gsSPPopMatrixN(n, num)		gsDma2p(     G_POPMTX,(num)*64,64,2,0)
#define gSPPopMatrix(pkt, n)		gSPPopMatrixN((pkt), (n), 1)
#define gsSPPopMatrix(n)		gsSPPopMatrixN(      (n), 1)
#else	/* F3DEX_GBI_2 */
#define gSPPopMatrix(pkt, n)		gImmp1(pkt, G_POPMTX, n)
#define gsSPPopMatrix(n)		gsImmp1(    G_POPMTX, n)
#endif	/* F3DEX_GBI_2 */

#define gSPEndDisplayList(pkt)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_ENDDL, 24, 8);					_g->words.w1 = 0;						}

#define gsSPEndDisplayList()						{{										_SHIFTL(G_ENDDL, 24, 8), 0					}}

#ifdef	F3DEX_GBI_2

#define	gSPGeometryMode(pkt, c, s)					{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = _SHIFTL(G_GEOMETRYMODE,24,8)|_SHIFTL(~(u32)(c),0,24);	_g->words.w1 = (u32)(s);					}

#define	gsSPGeometryMode(c, s)						{{										(_SHIFTL(G_GEOMETRYMODE,24,8)|_SHIFTL(~(u32)(c),0,24)),(u32)(s)	}}
#define	gSPSetGeometryMode(pkt, word)	gSPGeometryMode((pkt),0,(word))
#define	gsSPSetGeometryMode(word)	gsSPGeometryMode(0,(word))
#define	gSPClearGeometryMode(pkt, word)	gSPGeometryMode((pkt),(word),0)
#define	gsSPClearGeometryMode(word)	gsSPGeometryMode((word),0)
#define	gSPLoadGeometryMode(pkt, word)	gSPGeometryMode((pkt),-1,(word))
#define	gsSPLoadGeometryMode(word)	gsSPGeometryMode(-1,(word))

#else	/* F3DEX_GBI_2 */
#define	gSPSetGeometryMode(pkt, word)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_SETGEOMETRYMODE, 24, 8);			_g->words.w1 = (unsigned int)(word);				}

#define	gsSPSetGeometryMode(word)					{{										_SHIFTL(G_SETGEOMETRYMODE, 24, 8), (unsigned int)(word)		}}

#define	gSPClearGeometryMode(pkt, word)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_CLEARGEOMETRYMODE, 24, 8);			_g->words.w1 = (unsigned int)(word);				}

#define	gsSPClearGeometryMode(word)					{{										_SHIFTL(G_CLEARGEOMETRYMODE, 24, 8), (unsigned int)(word)	}}
#endif	/* F3DEX_GBI_2 */

#ifdef	F3DEX_GBI_2
#define	gSPSetOtherMode(pkt, cmd, sft, len, data)			{										Gfx *_g = (Gfx *)(pkt);							_g->words.w0 = (_SHIFTL(cmd,24,8)|_SHIFTL(32-(sft)-(len),8,8)|				_SHIFTL((len)-1,0,8));					_g->words.w1 = (unsigned int)(data);				}

#define	gsSPSetOtherMode(cmd, sft, len, data)				{{										_SHIFTL(cmd,24,8)|_SHIFTL(32-(sft)-(len),8,8)|_SHIFTL((len)-1,0,8), 	(unsigned int)(data)						}}
#else
#define	gSPSetOtherMode(pkt, cmd, sft, len, data)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(cmd, 24, 8) | _SHIFTL(sft, 8, 8) |				_SHIFTL(len, 0, 8));					_g->words.w1 = (unsigned int)(data);				}

#define	gsSPSetOtherMode(cmd, sft, len, data)				{{										_SHIFTL(cmd, 24, 8) | _SHIFTL(sft, 8, 8) | _SHIFTL(len, 0, 8),		(unsigned int)(data)						}}
#endif

#define	gDPPipelineMode(pkt, mode)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_PIPELINE, 1, mode)
#define	gsDPPipelineMode(mode)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_PIPELINE, 1, mode)

#define	gDPSetCycleType(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_CYCLETYPE, 2, type)
#define	gsDPSetCycleType(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_CYCLETYPE, 2, type)

#define	gDPSetTexturePersp(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTPERSP, 1, type)
#define	gsDPSetTexturePersp(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTPERSP, 1, type)

#define	gDPSetTextureDetail(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTDETAIL, 2, type)
#define	gsDPSetTextureDetail(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTDETAIL, 2, type)

#define	gDPSetTextureLOD(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTLOD, 1, type)
#define	gsDPSetTextureLOD(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTLOD, 1, type)

#define	gDPSetTextureLUT(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTLUT, 2, type)
#define	gsDPSetTextureLUT(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTLUT, 2, type)

#define	gDPSetTextureFilter(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTFILT, 2, type)
#define	gsDPSetTextureFilter(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTFILT, 2, type)

#define	gDPSetTextureConvert(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_TEXTCONV, 3, type)
#define	gsDPSetTextureConvert(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_TEXTCONV, 3, type)

#define	gDPSetCombineKey(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_COMBKEY, 1, type)
#define	gsDPSetCombineKey(type)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_COMBKEY, 1, type)

#ifndef _HW_VERSION_1
#define	gDPSetColorDither(pkt, mode)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_RGBDITHER, 2, mode)
#define	gsDPSetColorDither(mode)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_RGBDITHER, 2, mode)
#else
#define gDPSetColorDither(pkt, mode)    	gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_COLORDITHER, 1, mode)
#define gsDPSetColorDither(mode)                	gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_COLORDITHER, 1, mode)
#endif

#ifndef _HW_VERSION_1
#define	gDPSetAlphaDither(pkt, mode)		gSPSetOtherMode(pkt, G_SETOTHERMODE_H, G_MDSFT_ALPHADITHER, 2, mode)
#define	gsDPSetAlphaDither(mode)			gsSPSetOtherMode(G_SETOTHERMODE_H, G_MDSFT_ALPHADITHER, 2, mode)
#endif

#define	gDPSetBlendMask(pkt, mask)      gDPNoOp(pkt)
#define	gsDPSetBlendMask(mask)		gsDPNoOp()

#define	gDPSetAlphaCompare(pkt, type)		gSPSetOtherMode(pkt, G_SETOTHERMODE_L, G_MDSFT_ALPHACOMPARE, 2, type)
#define	gsDPSetAlphaCompare(type)			gsSPSetOtherMode(G_SETOTHERMODE_L, G_MDSFT_ALPHACOMPARE, 2, type)

#define	gDPSetDepthSource(pkt, src)		gSPSetOtherMode(pkt, G_SETOTHERMODE_L, G_MDSFT_ZSRCSEL, 1, src)
#define	gsDPSetDepthSource(src)		gsSPSetOtherMode(G_SETOTHERMODE_L, G_MDSFT_ZSRCSEL, 1, src)

#define	gDPSetRenderMode(pkt, c0, c1)		gSPSetOtherMode(pkt, G_SETOTHERMODE_L, G_MDSFT_RENDERMODE, 29, 				(c0) | (c1))
#define	gsDPSetRenderMode(c0, c1)		gsSPSetOtherMode(G_SETOTHERMODE_L, G_MDSFT_RENDERMODE, 29, 				 (c0) | (c1))

#define	gSetImage(pkt, cmd, fmt, siz, width, i)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(cmd, 24, 8) | _SHIFTL(fmt, 21, 3) |			       _SHIFTL(siz, 19, 2) | _SHIFTL((width)-1, 0, 12);		_g->words.w1 = (unsigned int)(i);				}

#define	gsSetImage(cmd, fmt, siz, width, i)				{{										_SHIFTL(cmd, 24, 8) | _SHIFTL(fmt, 21, 3) |				_SHIFTL(siz, 19, 2) | _SHIFTL((width)-1, 0, 12),			(unsigned int)(i)						}}

#define	gDPSetColorImage(pkt, f, s, w, i)	gSetImage(pkt, G_SETCIMG, f, s, w, i)
#define	gsDPSetColorImage(f, s, w, i)		gsSetImage(G_SETCIMG, f, s, w, i)

#define	gDPSetDepthImage(pkt, i)	gSetImage(pkt, G_SETZIMG, 0, 0, 1, i)
#define	gsDPSetDepthImage(i)		gsSetImage(G_SETZIMG, 0, 0, 1, i)
/* kept for compatibility */
#define	gDPSetMaskImage(pkt, i)		gDPSetDepthImage(pkt, i)
#define	gsDPSetMaskImage(i)			gsDPSetDepthImage(i)

#define	gDPSetTextureImage(pkt, f, s, w, i)	gSetImage(pkt, G_SETTIMG, f, s, w, i)
#define	gsDPSetTextureImage(f, s, w, i)	gsSetImage(G_SETTIMG, f, s, w, i)

#define	gDPSetCombine(pkt, muxs0, muxs1)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_SETCOMBINE, 24, 8) | _SHIFTL(muxs0, 0, 24);	_g->words.w1 = (unsigned int)(muxs1);				}

#define	gsDPSetCombine(muxs0, muxs1)					{{										_SHIFTL(G_SETCOMBINE, 24, 8) | _SHIFTL(muxs0, 0, 24),			(unsigned int)(muxs1)						}}

#define	GCCc0w0(saRGB0, mRGB0, saA0, mA0)						(_SHIFTL((saRGB0), 20, 4) | _SHIFTL((mRGB0), 15, 5) | 			 _SHIFTL((saA0), 12, 3) | _SHIFTL((mA0), 9, 3))

#define	GCCc1w0(saRGB1, mRGB1)								(_SHIFTL((saRGB1), 5, 4) | _SHIFTL((mRGB1), 0, 5))

#define GCCc0w1(sbRGB0, aRGB0, sbA0, aA0)				                (_SHIFTL((sbRGB0), 28, 4) | _SHIFTL((aRGB0), 15, 3) |			 _SHIFTL((sbA0), 12, 3) | _SHIFTL((aA0), 9, 3))

#define	GCCc1w1(sbRGB1, saA1, mA1, aRGB1, sbA1, aA1)					(_SHIFTL((sbRGB1), 24, 4) | _SHIFTL((saA1), 21, 3) |			 _SHIFTL((mA1), 18, 3) | _SHIFTL((aRGB1), 6, 3) |			 _SHIFTL((sbA1), 3, 3) | _SHIFTL((aA1), 0, 3))

#define	gDPSetCombineLERP(pkt, a0, b0, c0, d0, Aa0, Ab0, Ac0, Ad0,			a1, b1, c1, d1,	Aa1, Ab1, Ac1, Ad1)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 =	_SHIFTL(G_SETCOMBINE, 24, 8) |						_SHIFTL(GCCc0w0(G_CCMUX_##a0, G_CCMUX_##c0,					       G_ACMUX_##Aa0, G_ACMUX_##Ac0) |				       GCCc1w0(G_CCMUX_##a1, G_CCMUX_##c1), 				       0, 24);						_g->words.w1 =	(unsigned int)(GCCc0w1(G_CCMUX_##b0, 							       G_CCMUX_##d0,							       G_ACMUX_##Ab0, 							       G_ACMUX_##Ad0) |						       GCCc1w1(G_CCMUX_##b1, 							       G_ACMUX_##Aa1,							       G_ACMUX_##Ac1, 							       G_CCMUX_##d1,							       G_ACMUX_##Ab1, 							       G_ACMUX_##Ad1));		}

#define	gsDPSetCombineLERP(a0, b0, c0, d0, Aa0, Ab0, Ac0, Ad0,				a1, b1, c1, d1,	Aa1, Ab1, Ac1, Ad1)			{{										_SHIFTL(G_SETCOMBINE, 24, 8) |						_SHIFTL(GCCc0w0(G_CCMUX_##a0, G_CCMUX_##c0,					       G_ACMUX_##Aa0, G_ACMUX_##Ac0) |				       GCCc1w0(G_CCMUX_##a1, G_CCMUX_##c1), 0, 24),			(unsigned int)(GCCc0w1(G_CCMUX_##b0, G_CCMUX_##d0,					       G_ACMUX_##Ab0, G_ACMUX_##Ad0) |				       GCCc1w1(G_CCMUX_##b1, G_ACMUX_##Aa1,					       G_ACMUX_##Ac1, G_CCMUX_##d1,					       G_ACMUX_##Ab1, G_ACMUX_##Ad1))		}}

#define gDPSetCombineMode(pkt, a, b)	gDPSetCombineLERP(pkt, a, b)
#define	gsDPSetCombineMode(a, b)	gsDPSetCombineLERP(a, b)

#define	gDPSetColor(pkt, c, d)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(c, 24, 8);					_g->words.w1 = (unsigned int)(d);				}

#define	gsDPSetColor(c, d)						{{										_SHIFTL(c, 24, 8), (unsigned int)(d)				}}

#define	DPRGBColor(pkt, cmd, r, g, b, a)				            gDPSetColor(pkt, cmd,								(_SHIFTL(r, 24, 8) | _SHIFTL(g, 16, 8) | 				 _SHIFTL(b, 8, 8) | _SHIFTL(a, 0, 8)))
#define	sDPRGBColor(cmd, r, g, b, a)						    gsDPSetColor(cmd,									 (_SHIFTL(r, 24, 8) | _SHIFTL(g, 16, 8) | 				  _SHIFTL(b, 8, 8) | _SHIFTL(a, 0, 8)))

#define	gDPSetEnvColor(pkt, r, g, b, a)					            DPRGBColor(pkt, G_SETENVCOLOR, r,g,b,a)
#define	gsDPSetEnvColor(r, g, b, a)					            sDPRGBColor(G_SETENVCOLOR, r,g,b,a)
#define	gDPSetBlendColor(pkt, r, g, b, a)				            DPRGBColor(pkt, G_SETBLENDCOLOR, r,g,b,a)
#define	gsDPSetBlendColor(r, g, b, a)					            sDPRGBColor(G_SETBLENDCOLOR, r,g,b,a)
#define	gDPSetFogColor(pkt, r, g, b, a)					            DPRGBColor(pkt, G_SETFOGCOLOR, r,g,b,a)
#define	gsDPSetFogColor(r, g, b, a)					            sDPRGBColor(G_SETFOGCOLOR, r,g,b,a)
#define	gDPSetFillColor(pkt, d)						            gDPSetColor(pkt, G_SETFILLCOLOR, (d))
#define	gsDPSetFillColor(d)						            gsDPSetColor(G_SETFILLCOLOR, (d))

#define	gDPSetPrimDepth(pkt, z, dz)							gDPSetColor(pkt, G_SETPRIMDEPTH, 						    _SHIFTL(z, 16, 16) | _SHIFTL(dz, 0, 16))
#define	gsDPSetPrimDepth(z, dz)								gsDPSetColor(G_SETPRIMDEPTH, _SHIFTL(z, 16, 16) | 				     _SHIFTL(dz, 0, 16))

#define	gDPSetPrimColor(pkt, m, l, r, g, b, a)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 =	(_SHIFTL(G_SETPRIMCOLOR, 24, 8) | 					 _SHIFTL(m, 8, 8) | _SHIFTL(l, 0, 8));			_g->words.w1 =  (_SHIFTL(r, 24, 8) | _SHIFTL(g, 16, 8) | 				 _SHIFTL(b, 8, 8) | _SHIFTL(a, 0, 8));		}

#define	gsDPSetPrimColor(m, l, r, g, b, a)				{{										(_SHIFTL(G_SETPRIMCOLOR, 24, 8) | _SHIFTL(m, 8, 8) |			 _SHIFTL(l, 0, 8)),							(_SHIFTL(r, 24, 8) | _SHIFTL(g, 16, 8) | _SHIFTL(b, 8, 8) |		 _SHIFTL(a, 0, 8))						}}

#define	gDPSetOtherMode(pkt, mode0, mode1)				{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_RDPSETOTHERMODE,24,8)|_SHIFTL(mode0,0,24);	_g->words.w1 = (unsigned int)(mode1);				}

#define	gsDPSetOtherMode(mode0, mode1)					{{										_SHIFTL(G_RDPSETOTHERMODE,24,8)|_SHIFTL(mode0,0,24),			(unsigned int)(mode1)						}}

#define	G_TX_LOADTILE	7
#define	G_TX_RENDERTILE	0

#define	G_TX_NOMIRROR	0
#define	G_TX_WRAP	0
#define	G_TX_MIRROR	0x1
#define	G_TX_CLAMP	0x2
#define	G_TX_NOMASK	0
#define	G_TX_NOLOD	0


#ifndef MAX
#define MAX(a, b)				((a) > (b) ? (a) : (b))
#endif

#ifndef MIN
#define MIN(a, b)				((a) < (b) ? (a) : (b))
#endif

#define	G_TX_DXT_FRAC	11

#ifdef _HW_VERSION_1
#define G_TX_LDBLK_MAX_TXL	4095
#else
#define G_TX_LDBLK_MAX_TXL	2047
#endif /* _HW_VERSION_1 */

#define TXL2WORDS(txls, b_txl)	MAX(1, ((txls)*(b_txl)/8))
#define CALC_DXT(width, b_txl)			(((1 << G_TX_DXT_FRAC) + TXL2WORDS(width, b_txl) - 1) / 					TXL2WORDS(width, b_txl))

#define TXL2WORDS_4b(txls)	MAX(1, ((txls)/16))
#define CALC_DXT_4b(width)			(((1 << G_TX_DXT_FRAC) + TXL2WORDS_4b(width) - 1) / 					TXL2WORDS_4b(width))

#define gDPLoadTileGeneric(pkt, c, tile, uls, ult, lrs, lrt)		{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(c, 24, 8) | _SHIFTL(uls, 12, 12) |			      _SHIFTL(ult, 0, 12);					_g->words.w1 = _SHIFTL(tile, 24, 3) | _SHIFTL(lrs, 12, 12) |			      _SHIFTL(lrt, 0, 12);				}

#define gsDPLoadTileGeneric(c, tile, uls, ult, lrs, lrt)		{{										_SHIFTL(c, 24, 8) | _SHIFTL(uls, 12, 12) | _SHIFTL(ult, 0, 12),		_SHIFTL(tile, 24, 3) | _SHIFTL(lrs, 12, 12) | _SHIFTL(lrt, 0, 12)}}

#define	gDPSetTileSize(pkt, t, uls, ult, lrs, lrt)					gDPLoadTileGeneric(pkt, G_SETTILESIZE, t, uls, ult, lrs, lrt)
#define	gsDPSetTileSize(t, uls, ult, lrs, lrt)						gsDPLoadTileGeneric(G_SETTILESIZE, t, uls, ult, lrs, lrt)
#define	gDPLoadTile(pkt, t, uls, ult, lrs, lrt)						gDPLoadTileGeneric(pkt, G_LOADTILE, t, uls, ult, lrs, lrt)
#define	gsDPLoadTile(t, uls, ult, lrs, lrt)						gsDPLoadTileGeneric(G_LOADTILE, t, uls, ult, lrs, lrt)

#define	gDPSetTile(pkt, fmt, siz, line, tmem, tile, palette, cmt,			maskt, shiftt, cms, masks, shifts)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_SETTILE, 24, 8) | _SHIFTL(fmt, 21, 3) |		       _SHIFTL(siz, 19, 2) | _SHIFTL(line, 9, 9) |			       _SHIFTL(tmem, 0, 9);					_g->words.w1 = _SHIFTL(tile, 24, 3) | _SHIFTL(palette, 20, 4) |			       _SHIFTL(cmt, 18, 2) | _SHIFTL(maskt, 14, 4) |			       _SHIFTL(shiftt, 10, 4) |_SHIFTL(cms, 8, 2) |			       _SHIFTL(masks, 4, 4) | _SHIFTL(shifts, 0, 4);	}

#define	gsDPSetTile(fmt, siz, line, tmem, tile, palette, cmt,				maskt, shiftt, cms, masks, shifts)			{{										(_SHIFTL(G_SETTILE, 24, 8) | _SHIFTL(fmt, 21, 3) | 			 _SHIFTL(siz, 19, 2) | _SHIFTL(line, 9, 9) | _SHIFTL(tmem, 0, 9)),        (_SHIFTL(tile, 24, 3) | _SHIFTL(palette, 20, 4) | 			 _SHIFTL(cmt, 18, 2) | _SHIFTL(maskt, 14, 4) | 				 _SHIFTL(shiftt, 10, 4) | _SHIFTL(cms, 8, 2) | 				 _SHIFTL(masks, 4, 4) | _SHIFTL(shifts, 0, 4))			}}

#define gDPLoadBlock(pkt, tile, uls, ult, lrs, dxt)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_LOADBLOCK, 24, 8) | 						_SHIFTL(uls, 12, 12) | _SHIFTL(ult, 0, 12));		_g->words.w1 = (_SHIFTL(tile, 24, 3) |							_SHIFTL((MIN(lrs,G_TX_LDBLK_MAX_TXL)), 12, 12) |			_SHIFTL(dxt, 0, 12));				}

#define gsDPLoadBlock(tile, uls, ult, lrs, dxt)				{{										(_SHIFTL(G_LOADBLOCK, 24, 8) | _SHIFTL(uls, 12, 12) | 			 _SHIFTL(ult, 0, 12)),							(_SHIFTL(tile, 24, 3) | 						 _SHIFTL((MIN(lrs,G_TX_LDBLK_MAX_TXL)), 12, 12) |			 _SHIFTL(dxt, 0, 12))						}}

#define	gDPLoadTLUTCmd(pkt, tile, count)				{										Gfx *_g = (Gfx *)pkt;																_g->words.w0 = _SHIFTL(G_LOADTLUT, 24, 8);				_g->words.w1 = _SHIFTL((tile), 24, 3) | _SHIFTL((count), 14, 10);}

#define	gsDPLoadTLUTCmd(tile, count)					{{										_SHIFTL(G_LOADTLUT, 24, 8),						_SHIFTL((tile), 24, 3) | _SHIFTL((count), 14, 10)		}}

#define	gDPLoadTextureBlock(pkt, timg, fmt, siz, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE, 			0 , cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT) -1,			CALC_DXT(width, siz##_BYTES)); 					gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((width) * siz##_LINE_BYTES)+7)>>3, 0,					G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadTextureBlockYuv(pkt, timg, fmt, siz, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE, 			0 , cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT) -1,			CALC_DXT(width, siz##_BYTES)); 					gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((width) * 1)+7)>>3, 0,						G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadTextureBlockS(pkt, timg, fmt, siz, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE, 			0 , cmt, maskt,	shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,0);		gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((width) * siz##_LINE_BYTES)+7)>>3, 0,					G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadMultiBlockS(pkt, timg, tmem, rtile, fmt, siz, width, 			   height, pal, cms, cmt, masks, maskt, shifts, shiftt)	{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 			0 , cmt, maskt,	shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,0);		gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((width) * siz##_LINE_BYTES)+7)>>3, tmem,				rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts);							gDPSetTileSize(pkt, rtile, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}


#define	gDPLoadTextureBlockYuvS(pkt, timg, fmt, siz, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE, 			0 , cmt, maskt,	shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,0);		gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((width) * 1)+7)>>3, 0,						G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	_gDPLoadTextureBlock(pkt, timg, tmem, fmt, siz, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE,  		0, cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)); 					gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz, (((width) * siz##_LINE_BYTES)+7)>>3,			tmem, G_TX_RENDERTILE, pal, cmt,					maskt, shiftt, cms, masks, shifts);				gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	_gDPLoadTextureBlockTile(pkt, timg, tmem, rtile, fmt, siz, width,  		height, pal, cms, cmt, masks, maskt, shifts, shiftt)	{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 0,		cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)); 					gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz, (((width) * siz##_LINE_BYTES)+7)>>3,			tmem, rtile, pal, cmt,							maskt, shiftt, cms, masks, shifts);				gDPSetTileSize(pkt, rtile, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadMultiBlock(pkt, timg, tmem, rtile, fmt, siz, width,  			height, pal, cms, cmt, masks, maskt, shifts, shiftt)	{										gDPSetTextureImage(pkt, fmt, siz##_LOAD_BLOCK, 1, timg);		gDPSetTile(pkt, fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 0,		cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)); 					gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz, (((width) * siz##_LINE_BYTES)+7)>>3,			tmem, rtile, pal, cmt,							maskt, shiftt, cms, masks, shifts);				gDPSetTileSize(pkt, rtile, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gsDPLoadTextureBlock(timg, fmt, siz, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),			gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, 0, 					G_TX_LOADTILE, 	0 , cmt, maskt,	shiftt, cms, 				masks, shifts),							gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)), 					gsDPPipeSync(),								gsDPSetTile(fmt, siz, ((((width) * siz##_LINE_BYTES)+7)>>3), 0,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)


#define	gsDPLoadTextureBlockS(timg, fmt, siz, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),			gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, 0, G_TX_LOADTILE, 0 , 			cmt, maskt,shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1, 0 ),	gsDPPipeSync(),								gsDPSetTile(fmt, siz, ((((width) * siz##_LINE_BYTES)+7)>>3), 0,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)

#define	_gsDPLoadTextureBlock(timg, tmem, fmt, siz, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),			gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 			0 , cmt, maskt,	shiftt, cms, masks, shifts),			gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)), 					gsDPPipeSync(),								gsDPSetTile(fmt, siz,								((((width) * siz##_LINE_BYTES)+7)>>3), tmem,				G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)


#define	_gsDPLoadTextureBlockTile(timg, tmem, rtile, fmt, siz, width,			height, pal, cms, cmt, masks, maskt, shifts, shiftt)											gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),			gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 			0 , cmt, maskt,	shiftt, cms, masks, shifts),			gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)), 					gsDPPipeSync(),								gsDPSetTile(fmt, siz,								((((width) * siz##_LINE_BYTES)+7)>>3), tmem,				rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts),							gsDPSetTileSize(rtile, 0, 0,							((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)


#define	gsDPLoadMultiBlock(timg, tmem, rtile, fmt, siz, width,				height, pal, cms, cmt, masks, maskt, shifts, shiftt)											gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),			gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 			0 , cmt, maskt,	shiftt, cms, masks, shifts),			gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1,			CALC_DXT(width, siz##_BYTES)), 					gsDPPipeSync(),								gsDPSetTile(fmt, siz,								((((width) * siz##_LINE_BYTES)+7)>>3), tmem,				rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts),							gsDPSetTileSize(rtile, 0, 0,							((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)

#define	gsDPLoadMultiBlockS(timg, tmem, rtile, fmt, siz, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, siz##_LOAD_BLOCK, 1, timg),			gsDPSetTile(fmt, siz##_LOAD_BLOCK, 0, tmem, G_TX_LOADTILE, 0 , 			cmt, maskt,shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, 						(((width)*(height) + siz##_INCR) >> siz##_SHIFT)-1, 0 ),	gsDPPipeSync(),								gsDPSetTile(fmt, siz, ((((width) * siz##_LINE_BYTES)+7)>>3), tmem,		rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts),							gsDPSetTileSize(rtile, 0, 0,							((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)


#define	gDPLoadTextureBlock_4b(pkt, timg, fmt, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);			gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, 0, G_TX_LOADTILE, 0,			cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,						(((width)*(height)+3)>>2)-1,						CALC_DXT_4b(width)); 						gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), 0,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadTextureBlock_4bS(pkt, timg, fmt, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);			gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, 0, G_TX_LOADTILE, 0,			cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,						(((width)*(height)+3)>>2)-1, 0 );				gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), 0,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadMultiBlock_4b(pkt, timg, tmem, rtile, fmt, width, height,		pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);			gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0,			cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,						(((width)*(height)+3)>>2)-1,						CALC_DXT_4b(width));						gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), tmem,			rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts);							gDPSetTileSize(pkt, rtile, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadMultiBlock_4bS(pkt, timg, tmem, rtile, fmt, width, height,		pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);			gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0,			cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,						(((width)*(height)+3)>>2)-1, 0 );				gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), tmem,			rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts);							gDPSetTileSize(pkt, rtile, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}


#define	_gDPLoadTextureBlock_4b(pkt, timg, tmem, fmt, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)		{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_16b, 1, timg);			gDPSetTile(pkt, fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0,			cmt, maskt, shiftt, cms, masks, shifts);			gDPLoadSync(pkt);							gDPLoadBlock(pkt, G_TX_LOADTILE, 0, 0,						(((width)*(height)+3)>>2)-1,						CALC_DXT_4b(width));						gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), tmem,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE, 0, 0,					((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)			}

#define	gsDPLoadTextureBlock_4b(timg, fmt, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),			gsDPSetTile(fmt, G_IM_SIZ_16b, 0, 0, G_TX_LOADTILE, 0 , cmt,			maskt, shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)>>2)-1,			CALC_DXT_4b(width)),						gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), 0,				G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)

#define	gsDPLoadTextureBlock_4bS(timg, fmt, width, height,				pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),			gsDPSetTile(fmt, G_IM_SIZ_16b, 0, 0, G_TX_LOADTILE, 0 , cmt,			maskt, shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)>>2)-1,0),	gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), 0,				G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)

#define	gsDPLoadMultiBlock_4b(timg, tmem, rtile, fmt, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),			gsDPSetTile(fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0 , cmt,			maskt, shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)>>2)-1,			CALC_DXT_4b(width)), 						gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), tmem,			rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts),							gsDPSetTileSize(rtile, 0, 0,							((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)


#define	gsDPLoadMultiBlock_4bS(timg, tmem, rtile, fmt, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),			gsDPSetTile(fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0 , cmt,			maskt, shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)>>2)-1,0),	gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), tmem,			rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts),							gsDPSetTileSize(rtile, 0, 0,							((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)


#define	_gsDPLoadTextureBlock_4b(timg, tmem, fmt, width, height,			pal, cms, cmt, masks, maskt, shifts, shiftt)												gsDPSetTextureImage(fmt, G_IM_SIZ_16b, 1, timg),			gsDPSetTile(fmt, G_IM_SIZ_16b, 0, tmem, G_TX_LOADTILE, 0 , cmt,			maskt, shiftt, cms, masks, shifts),				gsDPLoadSync(),								gsDPLoadBlock(G_TX_LOADTILE, 0, 0, (((width)*(height)+3)>>2)-1,			CALC_DXT_4b(width)), 						gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, ((((width)>>1)+7)>>3), tmem,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE, 0, 0,						((width)-1) << G_TEXTURE_IMAGE_FRAC,					((height)-1) << G_TEXTURE_IMAGE_FRAC)

#ifndef _HW_VERSION_1

#define	gDPLoadTextureTile(pkt, timg, fmt, siz, width, height,				uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)			{										gDPSetTextureImage(pkt, fmt, siz, width, timg);				gDPSetTile(pkt, fmt, siz,							(((((lrs)-(uls)+1) * siz##_TILE_BYTES)+7)>>3), 0,			G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,			shifts);							gDPLoadSync(pkt);							gDPLoadTile(	pkt, G_TX_LOADTILE,							(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC);				gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((((lrs)-(uls)+1) * siz##_LINE_BYTES)+7)>>3), 0,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts);							gDPSetTileSize(pkt, G_TX_RENDERTILE,							(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)			}

#else /******** WORKAROUND hw 1 load tile bug ********/

#define	gDPLoadTextureTile(pkt, timg, fmt, siz, width, height,				uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)												{										int _loadtile_i, _loadtile_nw; Gfx *_loadtile_temp = pkt; 		guDPLoadTextureTile(_loadtile_temp, timg, fmt, siz, 				width, height,        					                uls, ult, lrs, lrt, pal,                                                cms, cmt, masks, maskt, shifts, shiftt);			_loadtile_nw = guGetDPLoadTextureTileSz(ult, lrt) - 1;			for(_loadtile_i = 0; _loadtile_i < _loadtile_nw; _loadtile_i++)		  pkt;								}

#endif /* HW_VERSION_1 */

#define	gDPLoadMultiTile(pkt, timg, tmem, rtile, fmt, siz, width, height,		uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)			{										gDPSetTextureImage(pkt, fmt, siz, width, timg);				gDPSetTile(pkt, fmt, siz,							(((((lrs)-(uls)+1) * siz##_TILE_BYTES)+7)>>3), tmem,			G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,			shifts);							gDPLoadSync(pkt);							gDPLoadTile(	pkt, G_TX_LOADTILE,							(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC);				gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, siz,							(((((lrs)-(uls)+1) * siz##_LINE_BYTES)+7)>>3), tmem,			rtile, pal, cmt, maskt, shiftt, cms, masks,				shifts);							gDPSetTileSize(pkt, rtile,								(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)			}


#define	gsDPLoadTextureTile(timg, fmt, siz, width, height,				uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)													gsDPSetTextureImage(fmt, siz, width, timg),				gsDPSetTile(fmt, siz, 								    (((((lrs)-(uls)+1) * siz##_TILE_BYTES)+7)>>3), 0,			    G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,			    shifts),							gsDPLoadSync(),								gsDPLoadTile(	G_TX_LOADTILE,								(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC),				gsDPPipeSync(),								gsDPSetTile(fmt, siz, 								    (((((lrs)-(uls)+1) * siz##_LINE_BYTES)+7)>>3), 0,			    G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,		    shifts),							gsDPSetTileSize(G_TX_RENDERTILE,							(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)

#define	gsDPLoadMultiTile(timg, tmem, rtile, fmt, siz, width, height,			uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)													gsDPSetTextureImage(fmt, siz, width, timg),				gsDPSetTile(fmt, siz, 								    (((((lrs)-(uls)+1) * siz##_TILE_BYTES)+7)>>3), 			    tmem, G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, 			    masks, shifts),						gsDPLoadSync(),								gsDPLoadTile(	G_TX_LOADTILE,								(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC),				gsDPPipeSync(),								gsDPSetTile(fmt, siz, 								    (((((lrs)-(uls)+1) * siz##_LINE_BYTES)+7)>>3), 			    tmem, rtile, pal, cmt, maskt, shiftt, cms, masks,			    shifts),							gsDPSetTileSize(rtile,									(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)

#define	gDPLoadTextureTile_4b(pkt, timg, fmt, width, height,				uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)			{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_8b, ((width)>>1), timg);		gDPSetTile(pkt, fmt, G_IM_SIZ_8b, 						   (((((lrs)-(uls)+1)>>1)+7)>>3), 0,					   G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,			   shifts);							gDPLoadSync(pkt);							gDPLoadTile(	pkt, G_TX_LOADTILE,							(uls)<<(G_TEXTURE_IMAGE_FRAC-1),					(ult)<<(G_TEXTURE_IMAGE_FRAC),						(lrs)<<(G_TEXTURE_IMAGE_FRAC-1),					(lrt)<<(G_TEXTURE_IMAGE_FRAC));				gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, 						   (((((lrs)-(uls)+1)>>1)+7)>>3), 0,					   G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, 			   masks, shifts);						gDPSetTileSize(pkt, G_TX_RENDERTILE,							(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)			}

#define	gDPLoadMultiTile_4b(pkt, timg, tmem, rtile, fmt, width, height,			uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)			{										gDPSetTextureImage(pkt, fmt, G_IM_SIZ_8b, ((width)>>1), timg);		gDPSetTile(pkt, fmt, G_IM_SIZ_8b, 			        		   (((((lrs)-(uls)+1)>>1)+7)>>3), tmem,					   G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,			   shifts);							gDPLoadSync(pkt);							gDPLoadTile(	pkt, G_TX_LOADTILE,							(uls)<<(G_TEXTURE_IMAGE_FRAC-1),					(ult)<<(G_TEXTURE_IMAGE_FRAC),						(lrs)<<(G_TEXTURE_IMAGE_FRAC-1),					(lrt)<<(G_TEXTURE_IMAGE_FRAC));				gDPPipeSync(pkt);							gDPSetTile(pkt, fmt, G_IM_SIZ_4b, 						   (((((lrs)-(uls)+1)>>1)+7)>>3), tmem,					   rtile, pal, cmt, maskt, shiftt, cms, masks,				   shifts);							gDPSetTileSize(pkt, rtile,								(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)			}

#define	gsDPLoadTextureTile_4b(timg, fmt, width, height,				uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)													gsDPSetTextureImage(fmt, G_IM_SIZ_8b, ((width)>>1), timg),		gsDPSetTile(fmt, G_IM_SIZ_8b, (((((lrs)-(uls)+1)>>1)+7)>>3), 0,			G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, masks,			shifts),							gsDPLoadSync(),								gsDPLoadTile(	G_TX_LOADTILE,								(uls)<<(G_TEXTURE_IMAGE_FRAC-1),					(ult)<<(G_TEXTURE_IMAGE_FRAC),						(lrs)<<(G_TEXTURE_IMAGE_FRAC-1),					(lrt)<<(G_TEXTURE_IMAGE_FRAC)),				gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, (((((lrs)-(uls)+1)>>1)+7)>>3), 0,			G_TX_RENDERTILE, pal, cmt, maskt, shiftt, cms, masks,			shifts),							gsDPSetTileSize(G_TX_RENDERTILE,							(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)

#define	gsDPLoadMultiTile_4b(timg, tmem, rtile, fmt, width, height,			uls, ult, lrs, lrt, pal,						cms, cmt, masks, maskt, shifts, shiftt)													gsDPSetTextureImage(fmt, G_IM_SIZ_8b, ((width)>>1), timg),		gsDPSetTile(fmt, G_IM_SIZ_8b, (((((lrs)-(uls)+1)>>1)+7)>>3), 			    tmem, G_TX_LOADTILE, 0 , cmt, maskt, shiftt, cms, 			    masks, shifts),						gsDPLoadSync(),								gsDPLoadTile(	G_TX_LOADTILE,								(uls)<<(G_TEXTURE_IMAGE_FRAC-1),					(ult)<<(G_TEXTURE_IMAGE_FRAC),						(lrs)<<(G_TEXTURE_IMAGE_FRAC-1),					(lrt)<<(G_TEXTURE_IMAGE_FRAC)),				gsDPPipeSync(),								gsDPSetTile(fmt, G_IM_SIZ_4b, (((((lrs)-(uls)+1)>>1)+7)>>3), 			    tmem, rtile, pal, cmt, maskt, shiftt, cms, masks,			    shifts),							gsDPSetTileSize(rtile,									(uls)<<G_TEXTURE_IMAGE_FRAC,						(ult)<<G_TEXTURE_IMAGE_FRAC,						(lrs)<<G_TEXTURE_IMAGE_FRAC,						(lrt)<<G_TEXTURE_IMAGE_FRAC)

#ifndef _HW_VERSION_1

#define gDPLoadTLUT_pal16(pkt, pal, dram)				{										gDPSetTextureImage(pkt, G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram);		gDPTileSync(pkt);							gDPSetTile(pkt, 0, 0, 0, (256+(((pal)&0xf)*16)),				G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0);				gDPLoadSync(pkt);							gDPLoadTLUTCmd(pkt, G_TX_LOADTILE, 15);					gDPPipeSync(pkt)						}

#else /* **** WORKAROUND hardware 1 load_tlut bug ****** */

#define gDPLoadTLUT_pal16(pkt, pal, dram)													        _gDPLoadTextureBlock(pkt, dram, (256+(((pal)&0xf)*16)),				G_IM_FMT_RGBA, G_IM_SIZ_16b, 4*16, 1,					pal, 0, 0, 0, 0, 0, 0)

#endif /* _HW_VERSION_1 */

#ifndef _HW_VERSION_1

#define gsDPLoadTLUT_pal16(pal, dram)					 										gsDPSetTextureImage(G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram),		gsDPTileSync(),								gsDPSetTile(0, 0, 0, (256+(((pal)&0xf)*16)),					G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0),				gsDPLoadSync(),								gsDPLoadTLUTCmd(G_TX_LOADTILE, 15),					gsDPPipeSync()

#else /* **** WORKAROUND hardware 1 load_tlut bug ****** */

#define gsDPLoadTLUT_pal16(pal, dram)                                   										_gsDPLoadTextureBlock(dram, (256+(((pal)&0xf)*16)),           	                G_IM_FMT_RGBA, G_IM_SIZ_16b, 4*16, 1,                                   pal, 0, 0, 0, 0, 0, 0)

#endif /* _HW_VERSION_1 */ 

#ifndef _HW_VERSION_1

#define gDPLoadTLUT_pal256(pkt, dram)					{										gDPSetTextureImage(pkt, G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram);		gDPTileSync(pkt);							gDPSetTile(pkt, 0, 0, 0, 256,							G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0);				gDPLoadSync(pkt);							gDPLoadTLUTCmd(pkt, G_TX_LOADTILE, 255);				gDPPipeSync(pkt)						}

#else /* **** WORKAROUND hardware 1 load_tlut bug ****** */

#define gDPLoadTLUT_pal256(pkt, dram)                                   	                                                                	_gDPLoadTextureBlock(pkt, dram, 256,           			                G_IM_FMT_RGBA, G_IM_SIZ_16b, 4*256, 1,			                0, 0, 0, 0, 0, 0, 0)


#endif /* _HW_VERSION_1 */

#ifndef _HW_VERSION_1

#define gsDPLoadTLUT_pal256(dram)					 										gsDPSetTextureImage(G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram),		gsDPTileSync(),								gsDPSetTile(0, 0, 0, 256,							G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0),				gsDPLoadSync(),								gsDPLoadTLUTCmd(G_TX_LOADTILE, 255),					gsDPPipeSync()

#else /* **** WORKAROUND hardware 1 load_tlut bug ****** */

#define gsDPLoadTLUT_pal256(dram)                                                                                                               	_gsDPLoadTextureBlock(dram, 256,                            	                G_IM_FMT_RGBA, G_IM_SIZ_16b, 4*256, 1,                                  0, 0, 0, 0, 0, 0, 0)

#endif /* _HW_VERSION_1 */


#ifndef _HW_VERSION_1

#define gDPLoadTLUT(pkt, count, tmemaddr, dram)				{										gDPSetTextureImage(pkt, G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram);		gDPTileSync(pkt);							gDPSetTile(pkt, 0, 0, 0, tmemaddr,						G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0);				gDPLoadSync(pkt);							gDPLoadTLUTCmd(pkt, G_TX_LOADTILE, ((count)-1));			gDPPipeSync(pkt);						}

#else /* **** WORKAROUND hardware 1 load_tlut bug ****** */

#define gDPLoadTLUT(pkt, count, tmemaddr, dram)                         									        _gDPLoadTextureBlock(pkt, dram, tmemaddr,                                       G_IM_FMT_RGBA, G_IM_SIZ_16b, 4, count,                                  0, 0, 0, 0, 0, 0, 0)

#endif /* _HW_VERSION_1 */


#ifndef _HW_VERSION_1

#define gsDPLoadTLUT(count, tmemaddr, dram)				 										gsDPSetTextureImage(G_IM_FMT_RGBA, G_IM_SIZ_16b, 1, dram),		gsDPTileSync(),								gsDPSetTile(0, 0, 0, tmemaddr,							G_TX_LOADTILE, 0 , 0, 0, 0, 0, 0, 0),				gsDPLoadSync(),								gsDPLoadTLUTCmd(G_TX_LOADTILE, ((count)-1)),				gsDPPipeSync()

#else /* **** WORKAROUND hardware 1 load_tlut bug ****** */
#define gsDPLoadTLUT(count, tmemaddr, dram)                                                                                                             _gsDPLoadTextureBlock(dram, tmemaddr,                       	                G_IM_FMT_RGBA, G_IM_SIZ_16b, 4, count,                                  0, 0, 0, 0, 0, 0, 0)

#endif /* _HW_VERSION_1 */

#define gDPSetScissor(pkt, mode, ulx, uly, lrx, lry)			{										Gfx *_g = (Gfx *)pkt;																_g->words.w0 = _SHIFTL(G_SETSCISSOR, 24, 8) |					       _SHIFTL((int)((float)(ulx)*4.0F), 12, 12) |	                       _SHIFTL((int)((float)(uly)*4.0F), 0, 12);		_g->words.w1 = _SHIFTL(mode, 24, 2) |						       _SHIFTL((int)((float)(lrx)*4.0F), 12, 12) |	                       _SHIFTL((int)((float)(lry)*4.0F), 0, 12);	}

#define gDPSetScissorFrac(pkt, mode, ulx, uly, lrx, lry)		{										Gfx *_g = (Gfx *)pkt;																_g->words.w0 = _SHIFTL(G_SETSCISSOR, 24, 8) |					       _SHIFTL((int)((ulx)), 12, 12) |			                       _SHIFTL((int)((uly)), 0, 12);				_g->words.w1 = _SHIFTL(mode, 24, 2) |						       _SHIFTL((int)((lrx)), 12, 12) | 			                       _SHIFTL((int)((lry)), 0, 12);			}

#define gsDPSetScissor(mode, ulx, uly, lrx, lry)			{{										_SHIFTL(G_SETSCISSOR, 24, 8) |						_SHIFTL((int)((float)(ulx)*4.0F), 12, 12) |				_SHIFTL((int)((float)(uly)*4.0F), 0, 12),				_SHIFTL(mode, 24, 2) |							_SHIFTL((int)((float)(lrx)*4.0F), 12, 12) |				_SHIFTL((int)((float)(lry)*4.0F), 0, 12)			}}

#define gsDPSetScissorFrac(mode, ulx, uly, lrx, lry)			{{										_SHIFTL(G_SETSCISSOR, 24, 8) |						_SHIFTL((int)((ulx)), 12, 12) |						_SHIFTL((int)((uly)), 0, 12),						_SHIFTL(mode, 24, 2) |							_SHIFTL((int)(lrx), 12, 12) |						_SHIFTL((int)(lry), 0, 12)					}}

#define	gDPFillRectangle(pkt, ulx, uly, lrx, lry)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_FILLRECT, 24, 8) | 						_SHIFTL((lrx), 14, 10) | _SHIFTL((lry), 2, 10));	_g->words.w1 = (_SHIFTL((ulx), 14, 10) | _SHIFTL((uly), 2, 10));}

#define	gsDPFillRectangle(ulx, uly, lrx, lry)				{{										(_SHIFTL(G_FILLRECT, 24, 8) | _SHIFTL((lrx), 14, 10) | 			 _SHIFTL((lry), 2, 10)),						(_SHIFTL((ulx), 14, 10) | _SHIFTL((uly), 2, 10))		}}

#define	gDPScisFillRectangle(pkt, ulx, uly, lrx, lry)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_FILLRECT, 24, 8) | 						_SHIFTL(MAX((lrx),0), 14, 10) | 					_SHIFTL(MAX((lry),0), 2, 10));				_g->words.w1 = (_SHIFTL(MAX((ulx),0), 14, 10) | 					_SHIFTL(MAX((uly),0), 2, 10));			}

#define	gDPSetConvert(pkt, k0, k1, k2, k3, k4, k5)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_SETCONVERT, 24, 8) |						_SHIFTL(k0, 13, 9) | _SHIFTL(k1, 4, 9) | 				_SHIFTR(k2, 5, 4));					_g->words.w1 = (_SHIFTL(k2, 27, 5) | _SHIFTL(k3, 18, 9) |				_SHIFTL(k4, 9, 9) | _SHIFTL(k5, 0, 9));		}

#define gsDPSetConvert(k0, k1, k2, k3, k4, k5)				{{										(_SHIFTL(G_SETCONVERT, 24, 8) |						 _SHIFTL(k0, 13, 9) | _SHIFTL(k1, 4, 9) | _SHIFTR(k2, 5, 4)),		(_SHIFTL(k2, 27, 5) | _SHIFTL(k3, 18, 9) | _SHIFTL(k4, 9, 9) | 		 _SHIFTL(k5, 0, 9))						}}

#define	gDPSetKeyR(pkt, cR, sR, wR)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(G_SETKEYR, 24, 8);				_g->words.w1 = (_SHIFTL(wR, 16, 12) | _SHIFTL(cR, 8, 8) | 				_SHIFTL(sR, 0, 8));				}

#define	gsDPSetKeyR(cR, sR, wR)						{{										_SHIFTL(G_SETKEYR, 24, 8),						_SHIFTL(wR, 16, 12) | _SHIFTL(cR, 8, 8) | _SHIFTL(sR, 0, 8)	}}

#define	gDPSetKeyGB(pkt, cG, sG, wG, cB, sB, wB)			{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = (_SHIFTL(G_SETKEYGB, 24, 8) |						_SHIFTL(wG, 12, 12) | _SHIFTL(wB, 0, 12));		_g->words.w1 = (_SHIFTL(cG, 24, 8) | _SHIFTL(sG, 16, 8) |				 _SHIFTL(cB, 8, 8) | _SHIFTL(sB, 0, 8));	}

#define	gsDPSetKeyGB(cG, sG, wG, cB, sB, wB)				{{										(_SHIFTL(G_SETKEYGB, 24, 8) | _SHIFTL(wG, 12, 12) |			 _SHIFTL(wB, 0, 12)),							(_SHIFTL(cG, 24, 8) | _SHIFTL(sG, 16, 8) | _SHIFTL(cB, 8, 8) |		 _SHIFTL(sB, 0, 8))						}}

#define gDPNoParam(pkt, cmd)						{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(cmd, 24, 8);					_g->words.w1 = 0;						}

#define gsDPNoParam(cmd)						{{										_SHIFTL(cmd, 24, 8), 0						}}

#define gDPParam(pkt, cmd, param)					{										Gfx *_g = (Gfx *)(pkt);																_g->words.w0 = _SHIFTL(cmd, 24, 8);					_g->words.w1 = (param);						}

#define gsDPParam(cmd, param)						{{										_SHIFTL(cmd, 24, 8), (param)					}}

#define gsDPTextureRectangle(xl, yl, xh, yh, tile, s, t, dsdx, dtdy)	{{									    (_SHIFTL(G_TEXRECT, 24, 8) | _SHIFTL(xh, 12, 12) | 			     _SHIFTL(yh, 0, 12)),						    (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) | _SHIFTL(yl, 0, 12)),	}},									{{									    _SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16),				    _SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)			}}

#define gDPTextureRectangle(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy){									    Gfx *_g = (Gfx *)(pkt);						    if (pkt);								    _g->words.w0 = (_SHIFTL(G_TEXRECT, 24, 8) | _SHIFTL(xh, 12, 12) |			    _SHIFTL(yh, 0, 12));    				    _g->words.w1 = (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) |			    _SHIFTL(yl, 0, 12));				    _g ++;								    _g->words.w0 = (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16));		    _g->words.w1 = (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16));	}

#define gsDPTextureRectangleFlip(xl, yl, xh, yh, tile, s, t, dsdx, dtdy) {{									    (_SHIFTL(G_TEXRECTFLIP, 24, 8) | _SHIFTL(xh, 12, 12) |		     _SHIFTL(yh, 0, 12)),						    (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) | _SHIFTL(yl, 0, 12)),	}},									{{									    _SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16),				    _SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)			}}

#define gDPTextureRectangleFlip(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy){									    Gfx *_g = (Gfx *)(pkt);						    if (pkt);								    _g->words.w0 = (_SHIFTL(G_TEXRECTFLIP, 24, 8) | _SHIFTL(xh, 12, 12) | 		    _SHIFTL(yh, 0, 12));    				    _g->words.w1 = (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) |			    _SHIFTL(yl, 0, 12));				    _g ++;								    _g->words.w0 = (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16));		    _g->words.w1 = (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16));	}

#define gsSPTextureRectangle(xl, yl, xh, yh, tile, s, t, dsdx, dtdy)	    {{(_SHIFTL(G_TEXRECT, 24, 8) | _SHIFTL(xh, 12, 12) | _SHIFTL(yh, 0, 12)),    (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) | _SHIFTL(yl, 0, 12))}},	    gsImmp1(G_RDPHALF_1, (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16))),	    gsImmp1(G_RDPHALF_2, (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)))

#define gSPTextureRectangle(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy){									    Gfx *_g = (Gfx *)(pkt);															    _g->words.w0 = (_SHIFTL(G_TEXRECT, 24, 8) | _SHIFTL(xh, 12, 12) |			    _SHIFTL(yh, 0, 12));    				    _g->words.w1 = (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) |			    _SHIFTL(yl, 0, 12));				    gImmp1(pkt, G_RDPHALF_1, (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16)));	    gImmp1(pkt, G_RDPHALF_2, (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)));}

#define gSPScisTextureRectangle(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy) {                                                                                Gfx *_g = (Gfx *)(pkt);                                                                                                                                   _g->words.w0 = (_SHIFTL(G_TEXRECT, 24, 8) |                                                  _SHIFTL(MAX((s16)(xh),0), 12, 12) |                                          _SHIFTL(MAX((s16)(yh),0), 0, 12));                           _g->words.w1 = (_SHIFTL((tile), 24, 3) |                                                     _SHIFTL(MAX((s16)(xl),0), 12, 12) |                                          _SHIFTL(MAX((s16)(yl),0), 0, 12));                           gImmp1(pkt, G_RDPHALF_1,                                                                 (_SHIFTL(((s) -                                                                        (((s16)(xl) < 0) ?                                                            (((s16)(dsdx) < 0) ?                                                          (MAX((((s16)(xl)*(s16)(dsdx))>>7),0)) :          			    (MIN((((s16)(xl)*(s16)(dsdx))>>7),0))) : 0)),    			 16, 16) |                                                            _SHIFTL(((t) -                                                                        (((yl) < 0) ?                                                                 (((s16)(dtdy) < 0) ?                                                          (MAX((((s16)(yl)*(s16)(dtdy))>>7),0)) :                                      (MIN((((s16)(yl)*(s16)(dtdy))>>7),0))) : 0)),    			 0, 16)));                                               gImmp1(pkt, G_RDPHALF_2, (_SHIFTL((dsdx), 16, 16) |                                                    _SHIFTL((dtdy), 0, 16)));                      }

#define gsSPTextureRectangleFlip(xl, yl, xh, yh, tile, s, t, dsdx, dtdy)     {{(_SHIFTL(G_TEXRECTFLIP, 24, 8) | _SHIFTL(xh, 12, 12) |		     _SHIFTL(yh, 0, 12)),						    (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) | _SHIFTL(yl, 0, 12))}},	    gsImmp1(G_RDPHALF_1, (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16))),	    gsImmp1(G_RDPHALF_2, (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16)))

#define gSPTextureRectangleFlip(pkt, xl, yl, xh, yh, tile, s, t, dsdx, dtdy) {								       	    Gfx *_g = (Gfx *)(pkt);					       										     _g->words.w0 = (_SHIFTL(G_TEXRECTFLIP, 24, 8) | _SHIFTL(xh, 12, 12) |		    _SHIFTL(yh, 0, 12)); 				    _g->words.w1 = (_SHIFTL(tile, 24, 3) | _SHIFTL(xl, 12, 12) |			    _SHIFTL(yl, 0, 12));				    gImmp1(pkt, G_RDPHALF_1, (_SHIFTL(s, 16, 16) | _SHIFTL(t, 0, 16)));	    gImmp1(pkt, G_RDPHALF_2, (_SHIFTL(dsdx, 16, 16) | _SHIFTL(dtdy, 0, 16))); }

#define gsDPWord(wordhi, wordlo)			    gsImmp1(G_RDPHALF_1, (unsigned int)(wordhi)),	    gsImmp1(G_RDPHALF_2, (unsigned int)(wordlo))

#define gDPWord(pkt, wordhi, wordlo)      		{							    Gfx *_g = (Gfx *)(pkt);											    gImmp1(pkt, G_RDPHALF_1, (unsigned int)(wordhi));	    gImmp1(pkt, G_RDPHALF_2, (unsigned int)(wordlo));	}

#define	gDPFullSync(pkt)	gDPNoParam(pkt, G_RDPFULLSYNC)
#define	gsDPFullSync()		gsDPNoParam(G_RDPFULLSYNC)
#define	gDPTileSync(pkt)	gDPNoParam(pkt, G_RDPTILESYNC)
#define	gsDPTileSync()		gsDPNoParam(G_RDPTILESYNC)
#define	gDPPipeSync(pkt)	gDPNoParam(pkt, G_RDPPIPESYNC)
#define	gsDPPipeSync()		gsDPNoParam(G_RDPPIPESYNC)
#define	gDPLoadSync(pkt)	gDPNoParam(pkt, G_RDPLOADSYNC)
#define	gsDPLoadSync()		gsDPNoParam(G_RDPLOADSYNC)
#define	gDPNoOp(pkt)		gDPNoParam(pkt, G_NOOP)
#define	gsDPNoOp()		gsDPNoParam(G_NOOP)
#define	gDPNoOpTag(pkt, tag)	gDPParam(pkt, G_NOOP, tag)
#define	gsDPNoOpTag(tag)	gsDPParam(G_NOOP, tag)

#endif /* _LANGUAGE_C */

#endif /* _GBI_H_ */
`;async function Ez(n){return new Promise((e,t)=>{HM({include_func:(i,a,o)=>{if(i.toLowerCase()==="ultra64.h"){o(yz);return}o(null)},completion_func(i){e(i)},warn_func(i){console.warn(i)},error_func(i){console.error(i),t(i)}}).run(n)})}async function bA(n){try{n=await Ez(n)}catch(d){throw typeof d=="string"?new Error(d):d}let e;const t=[],r=d=>{d=d.replace('in "/input.c"',""),t.push(d)},i=wz({noInitialRun:!0,locateFile:(d,h)=>d==="smlrc.wasm"?"/smlrc.wasm":h+d,print:r,printErr:r});await new Promise(d=>{i.then(h=>{e=h,d()})}),e.FS.writeFile("/input.c",n,{flags:"w+"});const o="/output.s",s=["./smallerc","/input.c",o],l=[s.length,Vz(e,s)];try{e.ccall("main","number",["number","number"],l)}catch{throw new Error(`Error during event compile:
`+t.join(`
`))}let c=e.FS.readFile(o,{encoding:"utf8"});return c=Fz(c),c=Dz(c),c=Iz(c),c}function Cz(n,e){const t=n._malloc((e.length+1)*Uint8Array.BYTES_PER_ELEMENT);if(!t)throw new Error("Null pointer returned in str2ptr");for(let r=0;r<e.length;r++)n.setValue(t+r,e.charCodeAt(r),"i8");return n.setValue(t+e.length,0,"i8"),t}function Vz(n,e){const t=n._malloc(e.length*Uint32Array.BYTES_PER_ELEMENT);if(!t)throw new Error("Null pointer returned in str2ptrs");return e.forEach((r,i)=>{const a=Cz(n,r);n.setValue(t+4*i,a,"i32")}),t}const Vx=[["r0","$0"],["at","$1"],["v0","$2"],["v1","$3"],["a0","$4"],["a1","$5"],["a2","$6"],["a3","$7"],["t0","$8"],["t1","$9"],["t2","$10"],["t3","$11"],["t4","$12"],["t5","$13"],["t6","$14"],["t7","$15"],["s0","$16"],["s1","$17"],["s2","$18"],["s3","$19"],["s4","$20"],["s5","$21"],["s6","$22"],["s7","$23"],["t8","$24"],["t9","$25"],["k0","$26"],["k1","$27"],["gp","$28"],["sp","$29"],["fp","$30"],["ra","$31"]];function Dz(n){for(let e=Vx.length-1;e>=0;e--)n=n.replace(new RegExp("\\"+Vx[e][1],"g"),Vx[e][0]);return n}function Fz(n){const e={text:[],data:[],rdata:[],bss:[]};let t="text";return n.split(`
`).forEach(r=>{switch(r.trim()){case".text":t="text";break;case".data":t="data";break;case".rdata":t="rdata";break;case".bss":t="bss";break;default:e[t].push(r);break}}),`; .text
${e.text.join(`
`)}
; .data
${e.data.join(`
`)}
; .rdata
${e.rdata.join(`
`)}
; .bss
${e.bss.join(`
`)}`}const m3=`__floatsisf:
__floatunsisf:
  mtc1 A0, F12
  cvt.s.w F12, F12
  mfc1 V0, F12
  JR RA
  NOP`,S3=`__fixsfsi:
__fixunssfsi:
  mtc1 A0, F12
  cvt.w.s F12, F12
  mfc1 V0, F12
  JR RA
  NOP`,Tz=`__addsf3:
  mtc1 A0, F12
  mtc1 A1, F13
  add.s F12, F12, F13
  mfc1 V0, F12
  JR RA
  NOP`,bz=`__subsf3:
  mtc1 A0, F12
  mtc1 A1, F13
  sub.s F12, F12, F13
  mfc1 V0, F12
  JR RA
  NOP`,Pz=`__negsf2:
  mtc1 A0, F12
  neg.s F12, F12
  mfc1 V0, F12
  JR RA
  NOP`,Rz=`__mulsf3:
  mtc1 A0, F12
  mtc1 A1, F13
  mul.s F12, F12, F13
  mfc1 V0, F12
  JR RA
  NOP`,Lz=`__divsf3:
  mtc1 A0, F12
  mtc1 A1, F13
  div.s F12, F12, F13
  mfc1 V0, F12
  JR RA
  NOP`,Bz=`__lesf2:
  mtc1 A0, F12
  mtc1 A1, F13

  c.eq.s F12, F13
  bc1t __lesf2_ret ; a == b
  li V0, 0

  c.lt.s F12, F13
  li V0, -1 ; a < b
  bc1t __lesf2_ret
  nop

  li V0, 1 ; a > b

  mfc1 V0, F12
__lesf2_ret:
  JR RA
  NOP`,Mz=`__gesf2:
  mtc1 A0, F12
  mtc1 A1, F13

  c.eq.s F12, F13
  bc1t __gesf2_ret ; a == b
  li V0, 0

  c.lt.s F12, F13
  li V0, -1 ; a < b
  bc1t __gesf2_ret
  nop

  li V0, 1 ; a > b

  mfc1 V0, F12
__gesf2_ret:
  JR RA
  NOP`;function Iz(n){let e="";return n.indexOf("__floatsisf")>=0&&(e+=`
`+m3),n.indexOf("__floatunsisf")>=0&&(e+=`
`+m3),n.indexOf("__fixsfsi")>=0&&(e+=`
`+S3),n.indexOf("__fixunssfsi")>=0&&(e+=`
`+S3),n.indexOf("__addsf3")>=0&&(e+=`
`+Tz),n.indexOf("__subsf3")>=0&&(e+=`
`+bz),n.indexOf("__negsf2")>=0&&(e+=`
`+Pz),n.indexOf("__mulsf3")>=0&&(e+=`
`+Rz),n.indexOf("__divsf3")>=0&&(e+=`
`+Lz),n.indexOf("__lesf2")>=0&&(e+=`
`+Bz),n.indexOf("__gesf2")>=0&&(e+=`
`+Mz),e&&(n+=`
; .text
.align 4
`+e.trim()),n}var kr;(function(n){n[n.firstPass=0]="firstPass",n[n.secondPass=1]="secondPass"})(kr||(kr={}));var zM="\\?\\!\\@",$4="@?@?[\\w\\?\\!]+",Oz=new RegExp("^("+$4+")\\:");function kz(n){var e=n.line.match(Oz);if(e===null)return!1;var t=e[1];return!eE(t)&&!tE(t)&&(n.currentLabel=t),nE(n,t,Nz(n)),t}function eE(n){return n.indexOf("@@")===0}function tE(n){return n.indexOf("@")===0&&n[1]!=="@"}function Nz(n){return n.memPos+n.outIndex>>>0}function Pt(n,e){throw new Error(n+`
Line: `+e.line)}function nE(n,e,t){eE(e)?(n.currentLabel||Pt("Local label "+e+" (starts with @@) cannot be used before a window label",n),jz(n,e,t)):tE(e)?Gz(n,e,t):Uz(n,e,t)}function Uz(n,e,t){n.symbols[e]=t,n.symbolsByValue[t]=e,n.symbolOutputMap&&(n.symbolOutputMap[e]=n.outIndex)}function jz(n,e,t){var r=n.localSymbols[n.currentLabel];r||(r=n.localSymbols[n.currentLabel]=Object.create(null)),r[e]=t}function Gz(n,e,t){var r=n.staticSymbols[n.staticSymbols.length-1];r[e]=t}function Hz(n){if(n.currentPass===kr.firstPass){n.staticSymbols.push(Object.create(null));var e=n.staticSymbolIndices[n.staticSymbolIndices.length-1],t=n.staticSymbols.length-1;n.staticSymbolIndices.before[t]=e,n.staticSymbolIndices.push(t)}else n.staticSymbolIndices.shift()}function zz(n){if(n.currentPass===kr.firstPass){var e=n.staticSymbolIndices;e.push(e.before[e[e.length-1]])}else n.staticSymbolIndices.shift()}function Wz(n){return n.currentPass===kr.firstPass?n.staticSymbols[n.staticSymbolIndices[n.staticSymbolIndices.length-1]]:n.staticSymbols[n.staticSymbolIndices[0]]}function Ww(n,e){if(eE(e)){n.currentLabel||Pt("Local label "+e+" cannot be referenced in the current scope",n);var t=n.localSymbols[n.currentLabel];return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:null}if(tE(e)){var r=Wz(n);return Object.prototype.hasOwnProperty.call(r,e)?r[e]:null}return Object.prototype.hasOwnProperty.call(n.symbols,e)?n.symbols[e]:null}function Xz(n,e){return n.symbolsByValue[e]||null}function Kz(n){if(typeof n!="string")return null;var e=n[0]==="-";e&&(n=n.substr(1));var t;return n[0]==="b"||n[0]==="0"&&n[1]==="b"?t=parseInt(n.substr(2),2):n[0]==="o"||n[0]==="0"&&n[1]==="o"?t=parseInt(n.substr(2),8):n[0]==="x"||n[0]==="0"&&n[1]==="x"?t=parseInt(n.substr(2),16):t=parseInt(n,10),isNaN(t)?null:(e&&(t=-t),t)}function Yz(n){var e=n===0,t=n<0,r=n.toString(16).toUpperCase();return t&&(r=r.substr(1)),(t?"-":"")+(e?"":"0x")+r}function qz(n){if(n.length<2)return null;var e=n[0];if(n[n.length-1]!==e||e!=='"'&&e!=="'")return null;for(var t="",r=1;r<n.length-1;r++){var i=n[r];if(i==="\\"){var a=n[r+1],o=n[r+2],s=n[r+3];switch(a){case"\\":case'"':case"'":case"?":t+=a,r++;continue;case"n":t+=`
`,r++;continue;case"r":t+="\r",r++;continue;case"t":t+="	",r++;continue;case"b":t+="\b",r++;continue;case"x":if(g3(o))g3(s)?(t+=String.fromCharCode(parseInt(o+s,16)),r+=3):(t+=String.fromCharCode(parseInt(o,16)),r+=2);else throw new Error("Hex escape sequence followed by non-hex character: "+a);continue;default:if(Dx(a)){Dx(o)?Dx(s)?(t+=String.fromCharCode(parseInt(a+o+s,8)),r+=3):(t+=String.fromCharCode(parseInt(a+o,8)),r+=2):(t+=String.fromCharCode(parseInt(a,8)),r++);continue}}}t+=i}return t}function Dx(n){switch(n){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":return!0}return!1}function g3(n){switch(n.toUpperCase()){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"A":case"B":case"C":case"D":case"E":case"F":return!0}return!1}function WM(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=[],i=0,a=e;i<a.length;i++){var o=a[i],s=n.indexOf(o);s>=0&&r.push(s)}return r.length===0?-1:Math.min.apply(Math,r)}function Qz(n,e){return typeof e=="string"&&Pt('Assembler function abs cannot be called with string "'+e+'", value must be a number.',n),Math.abs(e)}function Jz(n,e){typeof e=="string"&&Pt('Assembler function hi cannot be called with string "'+e+'", value must be a number.',n);var t=e&65535,r=e>>>16;return t&32768&&(r+=1),r}function Zz(n,e){return typeof e=="string"&&Pt('Assembler function lo cannot be called with string "'+e+'", value must be a number.',n),e&65535}function $z(n,e){return n.memPos+n.outIndex}function Ra(n,e){return XM(n,e)}var eW=new RegExp("^([-\\w]+)\\(([\\(\\),-\\w"+zM+"]*)\\)$","i");function XM(n,e){var t=eW.exec(n);if(t===null){var r=Ww(e,n);if(r!==null)return r;var i=Kz(n);if(i!==null)return i;var a=qz(n);return typeof a=="string"?a:null}else{var o=t[1];if(!aA[o]){var r=Ww(e,o);return r!==null?r:null}var s="",l=0,c=void 0;for(c=o.length+1;c<n.length-1;c++){var d=n[c];if(d==="(")l++;else if(d===")"&&(l--,l<0)){c++;break}s+=d}var h="";c<n.length-1&&(h=n.substring(c,n.length));var f=0;if(s&&(f=XM(s,e)),f===null)return Pt("Could not evaluate "+s,e),null;var m=aA[o](e,f);return h&&(m=m+h),m}}var aA=Object.create(null);aA.abs=Qz;aA.hi=Jz;aA.lo=Zz;aA.org=$z;function KM(n){n.lineExpressions.length!==2&&Pt(".definelabel must have two arguments, a label name and value",n);var e=n.lineExpressions[0],t=Ra(n.lineExpressions[1],n);return typeof t!="number"?(Pt("The value in .definelabel must evaluate to a numeric value",n),!1):(nE(n,e,t),!0)}var tW=new RegExp("^\\.definelabel\\s+("+$4+")[\\s,]+([-\\w"+zM+"]+)$","i");KM.matches=function(n){var e=n.line.match(tW);return e!==null};var YM=new RegExp("^\\s*("+$4+")\\s+equ(?:$|(?:\\s+(.+)$))","i");function qM(n){var e=n.line.match(YM);e||Pt("equ directive was not able to be parsed",n);var t=e[1],r=e[2]||"";return nE(n,t,r),!0}qM.matches=function(n){var e=n.line.match(YM);return e!==null};function nW(n){var e=n.line,t=WM(e," ","	");if(t===-1){n.lineExpressions=[];return}var r=e.substr(t+1),i=[];rE(r,i,n),n.lineExpressions=i}function _3(n){var e=n.line,t=WM(e," ","	");if(t===-1)return e;var r=e.substring(0,t),i=e.substr(t+1),a=[];if(rE(i,a,n),n.lineExpressions=a,a.length>0){var o=[];a.forEach(function(s,l){var c=Ra(s,n);typeof c=="number"&&l===a.length-1&&(c=iW(r,c,n)),o.push(c)}),n.evaluatedLineExpressions=o,e=r+" "+rW(o,a).join(" ")}return e}function rW(n,e){return n.map(function(t,r){return typeof t=="number"?Yz(t):t===null?e[r]:t})}function iW(n,e,t){if(aW(n)){var r=t.memPos+t.outIndex,i=e-r;i%4!==0&&Pt("Misaligned branch instruction detected",t);var a=i/4-1;return a}return e}function aW(n){if(n=n.toLowerCase(),n[0]!=="b")return!1;switch(n){case"bc1f":case"bc1fl":case"bc1t":case"bc1tl":case"beq":case"beql":case"bgez":case"bgezal":case"bgezall":case"bgezl":case"bgtz":case"bgtzl":case"blez":case"blezl":case"bltz":case"bltzal":case"bltzall":case"bltzl":case"bne":case"bnel":return!0}return!1}function rE(n,e,t){var r="",i="",a=0,o=!1,s="";function l(m){r+=m}function c(){for(;x3(r[r.length-1]);)r=r.slice(0,-1);if(r=r.trim(),!!r){var m=Ww(t,r);typeof m=="string"?rE(m,e,t):e.push(r),r=""}}function d(){i||a||!x3(s)||c()}for(var h=0;h<n.length;h++){var f=n[h];switch(d(),f){case"(":!o&&!i&&a++;break;case")":!o&&!i&&(a<=0&&Pt("Imbalanced parenthesis in expression: "+n,t),a--);break;case'"':case"'":o||(i?i===f&&(i=""):i=f);break}l(f),!o&&f==="\\"?o=!0:o=!1,s=f}return a>0&&Pt("Imbalanced parenthesis in expression: "+n,t),i&&Pt("Unterminated string: "+r,t),c(),e}function x3(n){return n===","||oW(n)}function oW(n){return n===" "||n==="	"}function Cr(n,e){var t=sW(n,e);return function(r){return!!r.line.match(t)}}function sW(n,e){return new RegExp("^\\."+n+(e?"":"\\s+"),"i")}function QM(n){n.lineExpressions.length!==1&&Pt(".org directive requires one numeric argument",n);var e=Ra(n.lineExpressions[0],n);return typeof e!="number"?(Pt("Could not parse .org immediate "+e,n),!1):(e<0&&Pt(".org directive cannot be negative",n),n.memPos=e>>>0,!0)}QM.matches=Cr("org");function JM(n){n.lineExpressions.length!==1&&Pt(".orga directive requires one numeric argument",n);var e=Ra(n.lineExpressions[0],n);return typeof e!="number"?(Pt("Could not parse .orga immediate "+e,n),!1):(e<0&&Pt(".orga directive cannot be negative.",n),n.outIndex=e>>>0,!0)}JM.matches=Cr("orga");function ZM(n){n.lineExpressions.length!==1&&Pt(".align requires one power of two number argument",n);var e=Ra(n.lineExpressions[0],n);if(e===null&&Pt("Could not parse .align immediate "+n.lineExpressions,n),typeof e!="number")return Pt(".align requires one power of two number argument",n),!1;for(e%2&&Pt(".align directive requires a power of two.",n),e<0&&Pt(".align directive cannot align by a negative value.",n);n.outIndex%e;)n.currentPass===kr.secondPass&&n.dataView.setUint8(n.outIndex,0),n.outIndex++;return!0}ZM.matches=Cr("align");function $M(n){n.lineExpressions.length!==1&&Pt(".skip directive requires one numeric argument",n);var e=Ra(n.lineExpressions[0],n);return typeof e!="number"?(Pt("Could not parse .skip immediate "+e,n),!1):(e<0&&Pt(".skip directive cannot skip a negative length.",n),n.outIndex+=e,!0)}$M.matches=Cr("skip");function e6(n){(!n.lineExpressions.length||n.lineExpressions.length>2)&&Pt(".fill directive takes a length and optional value",n);var e,t;if(e=Ra(n.lineExpressions[0],n),typeof e!="number")return Pt("Could not parse .fill length "+n.lineExpressions[0],n),!1;if(e<0&&Pt(".fill length must be positive.",n),n.lineExpressions.length>1){if(t=Ra(n.lineExpressions[1],n),typeof t!="number")return Pt("Could not parse .fill value "+n.lineExpressions[1],n),!1}else t=0;if(n.currentPass===kr.secondPass)for(var r=0;r<e;r++)n.dataView.setInt8(n.outIndex+r,t);return n.outIndex+=e,!0}e6.matches=Cr("fill");function t6(n){return iE(n,!0)}t6.matches=Cr("asciiz");function iE(n,e){var t=[],r=n.lineExpressions;if(r.forEach(function(a){var o=Ra(a,n);if(o===null&&Pt("Could not parse .ascii value "+a,n),typeof o=="number")t.push(o);else if(typeof o=="string")for(var s=0;s<o.length;s++)t.push(o.charCodeAt(s))}),e&&t.push(0),n.currentPass===kr.secondPass)for(var i=0;i<t.length;i++)t[i]<0?n.dataView.setInt8(n.outIndex+i,t[i]):n.dataView.setUint8(n.outIndex+i,t[i]);return n.outIndex+=t.length,!0}iE.matches=Cr("ascii");function n6(n){if(n.currentPass===kr.secondPass){n.evaluatedLineExpressions.length||Pt(".byte directive requires arguments",n);for(var e=n.evaluatedLineExpressions,t=0;t<e.length;t++){var r=e[t];typeof r!="number"&&Pt(".byte directive requires numeric arguments, saw: "+r,n),r<0?n.dataView.setInt8(n.outIndex+t,r):n.dataView.setUint8(n.outIndex+t,r)}}return n.outIndex+=n.lineExpressions.length,!0}var lW=Cr("byte"),uW=Cr("db");n6.matches=function(n){return lW(n)||uW(n)};function r6(n){if(n.currentPass===kr.secondPass){n.evaluatedLineExpressions.length||Pt(".halfword directive requires arguments",n);for(var e=n.evaluatedLineExpressions,t=0;t<e.length;t++){var r=e[t];typeof r!="number"&&Pt(".halfword directive requires numeric arguments, saw: "+r,n),r<0?n.dataView.setInt16(n.outIndex+t*2,r):n.dataView.setUint16(n.outIndex+t*2,r)}}return n.outIndex+=2*n.lineExpressions.length,!0}var cW=Cr("halfword"),dW=Cr("dh");r6.matches=function(n){return cW(n)||dW(n)};function i6(n){if(n.currentPass===kr.secondPass){n.evaluatedLineExpressions.length||Pt(".word directive requires arguments",n);for(var e=n.evaluatedLineExpressions,t=0;t<e.length;t++){var r=e[t];typeof r!="number"&&Pt(".word directive requires numeric arguments, saw: "+r,n),r<0?n.dataView.setInt32(n.outIndex+t*4,r):n.dataView.setUint32(n.outIndex+t*4,r)}}return n.outIndex+=4*n.lineExpressions.length,!0}var AW=Cr("word"),fW=Cr("dw");i6.matches=function(n){return AW(n)||fW(n)};function a6(n){if(n.currentPass===kr.secondPass){n.evaluatedLineExpressions.length||Pt(".float directive requires arguments",n),n.evaluatedLineExpressions.some(function(r){return typeof r!="number"})&&Pt(".float directive requires numeric arguments",n);for(var e=n.evaluatedLineExpressions,t=0;t<e.length;t++)n.dataView.setFloat32(n.outIndex+t*4,e[t])}return n.outIndex+=4*n.lineExpressions.length,!0}a6.matches=Cr("float");var yr;(function(n){n[n.None=0]="None",n[n.AcceptingBlock=1]="AcceptingBlock",n[n.ExecutingBlock=2]="ExecutingBlock",n[n.NoLongerAcceptingBlock=4]="NoLongerAcceptingBlock",n[n.SawElse=8]="SawElse"})(yr||(yr={}));var aE=yr.AcceptingBlock|yr.ExecutingBlock|yr.NoLongerAcceptingBlock;function l8(n,e){n.ifElseStack[n.ifElseStack.length-1]&=~aE,n.ifElseStack[n.ifElseStack.length-1]|=e}function o6(n){n.lineExpressions.length||Pt("A condition must be passed to an if directive",n),n.lineExpressions.length>1&&Pt("Only a single condition can be passed to an if directive",n);var e=Ra(n.lineExpressions[0],n);return e===null&&Pt("Could not parse .if condition",n),typeof e!="number"&&Pt("Condition of if directive must evaluate to a numeric value, saw: "+e,n),e?n.ifElseStack.push(yr.ExecutingBlock):n.ifElseStack.push(yr.AcceptingBlock),!0}o6.matches=Cr("if");function s6(n){n.lineExpressions.length&&Pt("The else directive cannot take a condition or parameters",n),n.ifElseStack.length||Pt("An else directive was reached, but there was no previous if directive",n);var e=n.ifElseStack[n.ifElseStack.length-1];switch(e&yr.SawElse&&Pt("Encountered another else directive, but an else directive was already passed",n),e&aE){case yr.AcceptingBlock:l8(n,yr.ExecutingBlock);break;case yr.ExecutingBlock:l8(n,yr.NoLongerAcceptingBlock);break;case yr.NoLongerAcceptingBlock:break;default:Pt("Unexpected conditional block state: "+e.toString(16),n)}return n.ifElseStack[n.ifElseStack.length-1]|=yr.SawElse,!0}s6.matches=Cr("else",!0);function l6(n){n.lineExpressions.length||Pt("A condition must be passed to an elseif directive",n),n.lineExpressions.length>1&&Pt("Only a single condition can be passed to an elseif directive",n),n.ifElseStack.length||Pt("An elseif directive was reached, but there was no previous if directive",n);var e=n.ifElseStack[n.ifElseStack.length-1];e&yr.SawElse&&Pt("Encountered an elseif after seeing an else directive",n);var t=Ra(n.lineExpressions[0],n);switch(t===null&&Pt("Could not parse .elseif condition",n),typeof t!="number"&&Pt("Condition of elseif directive must evaluate to a numeric value, saw: "+t,n),e&aE){case yr.AcceptingBlock:t&&l8(n,yr.ExecutingBlock);break;case yr.ExecutingBlock:l8(n,yr.NoLongerAcceptingBlock);break;case yr.NoLongerAcceptingBlock:break;default:Pt("Unexpected conditional block state: "+e.toString(16),n)}return!0}l6.matches=Cr("elseif");function u6(n){return n.lineExpressions.length&&Pt("The endif directive cannot take a condition or parameters",n),n.ifElseStack.length||Pt("An endif directive was reached, but there was no previous if directive",n),n.ifElseStack.pop(),!0}u6.matches=Cr("endif",!0);function c6(n){n.lineExpressions.length||Pt("A file name must be passed to an include directive",n),n.lineExpressions.length>1&&Pt("Only a single file name can be passed to an include directive",n);var e=Ra(n.lineExpressions[0],n);if(e===null&&Pt("Could not parse .include file name",n),typeof e!="string"){Pt("File name of include directive must evaluate to a string, saw: "+e,n);return}var t=n.files[e];if(typeof t!="string"&&Pt("The "+e+" file was not a string",n),n.currentPass!==kr.firstPass){Pt("The `include` directive shouldn't be present after the first assembly phase",n);return}n.linesToInsert=`.beginfile
`+t+`
.endfile`,n.line=""}c6.matches=Cr("include");function d6(n){return n.lineExpressions.length&&Pt("The beginfile directive takes no arguments",n),Hz(n),!0}d6.matches=Cr("beginfile",!0);function A6(n){return n.lineExpressions.length&&Pt("The endfile directive takes no arguments",n),zz(n),!0}A6.matches=Cr("endfile",!0);function Pp(n){var e=hW(n);return function(t){return!!t.line.match(e)}}function hW(n){return new RegExp("^"+n+"\\s+","i")}function f6(n){if(n.currentPass!==kr.firstPass){Pt("The `beqz` macro shouldn't be present after the first assembly phase",n);return}n.lineExpressions.length!==2&&Pt("The `beqz` macro must take a register and label",n),n.line="",n.linesToInsert="BEQ "+n.lineExpressions[0]+" R0 "+n.lineExpressions[1]}f6.matches=Pp("beqz");function h6(n){if(n.currentPass!==kr.firstPass){Pt("The `bnez` macro shouldn't be present after the first assembly phase",n);return}n.lineExpressions.length!==2&&Pt("The `bnez` macro must take a register and label",n),n.line="",n.linesToInsert="BNE "+n.lineExpressions[0]+" R0 "+n.lineExpressions[1]}h6.matches=Pp("bnez");function p6(n){if(n.currentPass!==kr.firstPass){Pt("The `bnezl` macro shouldn't be present after the first assembly phase",n);return}n.lineExpressions.length!==2&&Pt("The `bnezl` macro must take a register and label",n),n.line="",n.linesToInsert="BNEL "+n.lineExpressions[0]+" R0 "+n.lineExpressions[1]}p6.matches=Pp("bnezl");function m6(n){if(n.currentPass!==kr.firstPass){Pt("The `li` macro shouldn't be present after the first assembly phase",n);return}n.lineExpressions.length<=1&&Pt("The `li` macro must take a register and immediate",n);var e=n.lineExpressions[0],t=Ra(n.lineExpressions[1],n);if(t===null){n.line="",n.linesToInsert="LUI "+e+", hi("+n.lineExpressions[1]+`)
ADDIU `+e+", "+e+", lo("+n.lineExpressions[1]+")";return}if(typeof t!="number"){Pt("Immediate value of `li` macro must evaluate to a number, saw: "+t,n);return}if(n.line="",t>=-32768&&t<=32767)n.linesToInsert="ADDIU "+e+", R0, "+t;else if(t>0&&t<=65535)n.linesToInsert="ORI "+e+", R0, "+t;else if((t&65535)===0)n.linesToInsert="LUI "+e+", "+(t>>16);else if(t>=-4294967295&&t<=4294901759){var r=(t&32768)!==0;n.linesToInsert="LUI "+e+", "+((t>>>16)+(r?1:0))+`
ADDIU `+e+", "+e+", "+(t&65535)}else Pt("li immediate value "+t+" seems out of range",n)}m6.matches=Pp("li");function S6(n){if(n.currentPass!==kr.firstPass){Pt("The `move` macro shouldn't be present after the first assembly phase",n);return}n.lineExpressions.length!==2&&Pt("The `move` macro must take two registers",n),n.line="",n.linesToInsert="ADDU "+n.lineExpressions[0]+" "+n.lineExpressions[1]+" R0"}S6.matches=Pp("move");var pW=[KM,qM,QM,JM,ZM,$M,e6,iE,t6,n6,r6,i6,a6,o6,l6,s6,u6,c6,d6,A6],mW=[f6,h6,p6,m6,S6];function v3(n){for(var e=0,t=pW;e<t.length;e++){var r=t[e];if(r.matches(n))return r}for(var i=0,a=mW;i<a.length;i++){var o=a[i];if(o.matches(n))return o}return null}function w3(n,e){e(n)}function SW(n){var e=n.toLowerCase();return Fx(e,".if")||Fx(e,".else")||Fx(e,".endif")}function Fx(n,e){return n.substr(0,e.length)===e}function gW(n){var e=[0];return e.before=Object.create(null),{buffer:null,dataView:null,line:"",memPos:0,outIndex:0,symbols:Object.create(null),symbolsByValue:Object.create(null),symbolOutputMap:n.symbolOutputMap,currentLabel:null,localSymbols:Object.create(null),staticSymbols:[Object.create(null)],staticSymbolIndices:e,currentPass:kr.firstPass,lineExpressions:[],evaluatedLineExpressions:null,ifElseStack:[],files:n.files||Object.create(null),linesToInsert:null}}var _W=globalThis&&globalThis.__spreadArrays||function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r};function tl(n,e){e=e||{};for(var t=E3(n),r=gW(e),i=[],a=[],o=0;o<t.length;o++){var s=t[o];if(r.line=s,y3(r)){s&&a.push(s);continue}s=xW(r);var l=v3(r);if(l?(nW(r),w3(r,l),s=r.line):s&&(r.outIndex+=4),s&&a.push(s),"linesToInsert"in r&&r.linesToInsert){var c=E3(r.linesToInsert);t.splice.apply(t,_W([o+1,0],c)),r.linesToInsert=null}}return t=a,r.buffer=e.buffer||new ArrayBuffer(r.outIndex),r.dataView=new DataView(r.buffer),r.memPos=0,r.outIndex=0,r.currentPass=kr.secondPass,t.forEach(function(d){if(r.line=d,r.lineExpressions=[],r.evaluatedLineExpressions=[],y3(r))return d;var h=v3(r);if(h){_3(r),w3(r,h);return}var f=Xz(r,r.memPos+r.outIndex);f!==null&&(r.currentLabel=f),d=r.line=_3(r),e.text&&i.push(d);var m;try{m=en(d)}catch(g){Pt(g,r);return}r.dataView.setUint32(r.outIndex,m),r.outIndex+=4}),r.ifElseStack.length&&Pt("An if directive was used without an endif directive",r),r.staticSymbolIndices[0]!==0&&Pt("A beginfile directive was used without an endfile directive",r),e.text?i:r.buffer}function y3(n){if(n.ifElseStack.length){var e=n.ifElseStack[n.ifElseStack.length-1];return!(e&yr.ExecutingBlock)&&!SW(n.line)}return!1}function xW(n){for(var e;e=kz(n);)n.line=n.line.substr(e.length+1).trim();return n.line}function E3(n){var e=wW(n);return e=e.filter(function(t){return typeof t=="string"}),e=vW(e),e=e.map(function(t){return t.trim()}),e=e.filter(Boolean),e}function vW(n){var e=!1,t=n.map(function(r){if(e){var i=r.indexOf("*/");i>=0&&(r=r.substr(i+2),e=!1)}if(e)return"";for(var a=r.indexOf("/*");a>=0;){if(Tx(r,a))a++;else{var i=r.indexOf("*/",a+2);if(i>=0)r=r.substr(0,a)+r.substr(i+2);else{r=r.substr(0,a),e=!0;break}}a=r.indexOf("/*",a)}for(var o=r.indexOf(";");o>=0;){if(!Tx(r,o)){r=r.substr(0,o),e=!1;break}o=r.indexOf(";",o+1)}for(var s=r.indexOf("//");s>=0;){if(!Tx(r,s)){r=r.substr(0,s),e=!1;break}s=r.indexOf("//",s+2)}return r});if(e)throw new Error("Unclosed block comment detected.");return t}function Tx(n,e){return C3(n,e,'"')||C3(n,e,"'")}function C3(n,e,t){var r=n.indexOf(t);if(r===-1||r>e)return!1;var i=n.indexOf(t,e);return i!==-1}function wW(n){if(typeof n=="string")return n.split(/\r?\n/);if(!Array.isArray(n))throw new Error("Input must be a string or array of strings");return n}const g6=`; Customize the background used each turn!
; This function runs at the start of each turn.
; The default background is available as DEFAULT_BG.
; Additional backgrounds are available as ADDITIONAL_BG_#,
; e.g. ADDITIONAL_BG_1 for the first added background.
ADDIU SP SP -4
SW RA 0(SP)

; Return the background index in V0.
LI V0 DEFAULT_BG

LW RA 0(SP)
JR RA
ADDIU SP SP 4`,yW=`// Customize the background used each turn!
// This function runs at the start of each turn.
// The default background is available as DEFAULT_BG.
// Additional backgrounds are available as ADDITIONAL_BG_#,
// e.g. ADDITIONAL_BG_1 for the first added background.

int PickBackground() {
    return DEFAULT_BG;
}`;function EW(n){switch(n){case y0.C:return yW;case y0.MIPS:return g6}throw new Error(`Unrecognized event code language ${n}`)}function CW(n){if(!n.additionalbg)return[];let e=0;return n.additionalbg.map(t=>++e)}async function VW(n,e,t){const r=DW(t);let i=[];for(const a of r)i=i.concat(await _6(n,e,t,a));return i.length===r.length?i.unshift("All possible target game versions failed to compile/assemble."):i=[],i}async function _6(n,e,t,r){let i=[];const a=CW(t);if(e===y0.C){const o=x6(n,0,a);try{const s=Rp(o,r);wt(s);const l=await bA(s);wt(l);const c=Oh(l,2147483648,r);tl(c)}catch(s){i.push(`Failed test compile/assemble for ${Oc(r)}:
${s}
`)}}else{const o=Xw(n,0,a);try{const s=Oh(o,2147483648,r);wt(s),tl(s)}catch(s){i.push(`Failed test assembly for ${Oc(r)}:
${s}
`)}}return i}function DW(n){switch(n.game){case 1:return[Qe.MP1_USA,Qe.MP1_PAL,Qe.MP1_JPN];case 2:return[Qe.MP2_USA,Qe.MP2_PAL,Qe.MP2_JPN];case 3:return[Qe.MP3_USA,Qe.MP3_PAL,Qe.MP3_JPN]}}async function oE(n,e,t){const r=tV(n);if(!r)return Xw(g6,e,t);switch(r.language){case y0.C:const i=x6(r.code,e,t);bt.getROMGame();const a=Rp(i),o=await bA(a);return Lp(`
        .beginfile ; Scopes static labels
        ${o}
        .align 4
        .endfile
      `,!0);case y0.MIPS:return Xw(r.code,e,t);default:throw new Error(`Unrecognized event code language ${r.language}`)}}function Xw(n,e,t){return Lp(`
    .beginfile ; Scopes static labels
    __PP64_INTERNAL_ADDITIONAL_BG_CHOICE:
    ${sE(e,t).join(`
`)}
    ${n}
    .align 4
    .endfile
  `,!0)}function sE(n,e){const t=[`.definelabel DEFAULT_BG,${n}`];return e&&e.forEach((r,i)=>{t.push(`.definelabel ADDITIONAL_BG_${i+1},${r}`)}),t}function x6(n,e,t){return`
#define PickBackground __PP64_INTERNAL_ADDITIONAL_BG_CHOICE
${v6(e,t).join(`
`)}
${n}
  `}function v6(n,e){const t=[`#define DEFAULT_BG ${n}`];return e&&e.forEach((r,i)=>{t.push(`#define ADDITIONAL_BG_${i+1} ${r}`)}),t}function PA(n){return n!=null&&n.additionalbg?n.additionalbg.map((e,t)=>bt.romIsLoaded()?Z0.getDirectoryCount()+t:t):null}function w6(n,e,t,r){const i=FW(e,t,r),a=D6(r.audioIndices),o=v6(r.boardInfo.bgDir,PA(r.board)),s=[...i,...a,...o,n].join(`
`);return Rp(s,r.game)}function Rp(n,e){return[n].join(`
`)}function FW(n,e,t){let r=[];const i=n.parameters,a=e.parameterValues;return i&&i.length&&a&&i.forEach(o=>{const s=a[o.name];switch(o.type){case i0.Boolean:r.push(`#define ${o.name} ${s?1:0}`);break;case i0.Number:case i0.PositiveNumber:typeof s=="number"?r.push(`#define ${o.name} ${s}`):r.push(`#define ${o.name} 0`);break;case i0.NumberArray:break;case i0.Space:if(t.testCompile)r.push(`#define ${o.name} 0`),r.push(`#define ${o.name}_chain_index 0`),r.push(`#define ${o.name}_chain_space_index 0`);else if(r.push(`#define ${o.name} ${s}`),t.chains){const l=s8(t.chains,s);r.push(`#define ${o.name}_chain_index ${l[0]}`),r.push(`#define ${o.name}_chain_space_index ${l[1]}`)}break;case i0.SpaceArray:if(t.testCompile)r.push(`#define ${o.name} 0`),r.push(`#define ${o.name}_length 1`),r.push(`#define ${o.name}_chain_indices 0`),r.push(`#define ${o.name}_chain_space_indices 0`);else{const l=s||[];r.push(`#define ${o.name} ${l.join(",")}`),r.push(`#define ${o.name}_length ${l.length}`);const c=l.map(f=>s8(t.chains,f)),d=c.map(f=>f[0]),h=c.map(f=>f[1]);r.push(`#define ${o.name}_chain_indices ${d.join(",")}`),r.push(`#define ${o.name}_chain_space_indices ${h.join(",")}`)}break;default:typeof s<"u"&&s!==null&&r.push(`#define ${o.name} ${s}`);break}}),r}const y6=`; Customize the background music used each turn!
; This function runs whenever the board music starts playing.
; Custom tracks you've added are available as MUSIC_TRACK_INDEX_#,
; e.g. MUSIC_TRACK_INDEX_1 for the first added custom song.
; (If you aren't using custom music, then only MUSIC_TRACK_INDEX_1
; exists and it is set to the in-game music index you chose.)
ADDIU SP SP -4
SW RA 0(SP)

; Return the audio index in V0.
LI V0 MUSIC_TRACK_INDEX_1

LW RA 0(SP)
JR RA
ADDIU SP SP 4`,TW=`// Customize the background music used each turn!
// This function runs whenever the board music starts playing.
// Custom tracks you've added are available as MUSIC_TRACK_INDEX_#,
// e.g. MUSIC_TRACK_INDEX_1 for the first added custom song.
// (If you aren't using custom music, then only MUSIC_TRACK_INDEX_1
// exists and it is set to the in-game music index you chose.)

int PickAudioIndex() {
    return MUSIC_TRACK_INDEX_1;
}`;function bW(n){switch(n){case y0.C:return TW;case y0.MIPS:return y6}throw new Error(`Unrecognized event code language ${n}`)}async function PW(n,e,t){const r=RW(t);let i=[];for(const a of r)i=i.concat(await E6(n,e,t,a));return i.length===r.length?i.unshift("All possible target game versions failed to compile/assemble."):i=[],i}async function E6(n,e,t,r){let i=[];const a=C6(t);if(e===y0.C){const o=V6(n,a);try{const s=Rp(o,r);wt(s);const l=await bA(s);wt(l);const c=Oh(l,2147483648,r);tl(c)}catch(s){i.push(`Failed test compile/assemble for ${Oc(r)}:
${s}
`)}}else{const o=Kw(n,a);try{const s=Oh(o,2147483648,r);wt(s),tl(s)}catch(s){i.push(`Failed test assembly for ${Oc(r)}:
${s}
`)}}return i}function RW(n){switch(n.game){case 1:return[Qe.MP1_USA,Qe.MP1_PAL,Qe.MP1_JPN];case 2:return[Qe.MP2_USA,Qe.MP2_PAL,Qe.MP2_JPN];case 3:return[Qe.MP3_USA,Qe.MP3_PAL,Qe.MP3_JPN]}}async function lE(n,e){const t=nV(n);if(!t)return Kw(y6,e);switch(t.language){case y0.C:const r=V6(t.code,e);bt.getROMGame();const i=Rp(r),a=await bA(i);return Lp(`
        .beginfile ; Scopes static labels
        ${a}
        .align 4
        .endfile
      `,!0);case y0.MIPS:return Kw(t.code,e);default:throw new Error(`Unrecognized event code language ${t.language}`)}}function Kw(n,e){return Lp(`
    .beginfile ; Scopes static labels
    __PP64_INTERNAL_GET_BOARD_AUDIO_INDEX:
    ${uE(e).join(`
`)}
    ${n}
    .align 4
    .endfile
  `,!0)}function C6(n){if(!n.audioData||!n.audioData.length)return[1];let e=0;return n.audioData.map(t=>++e)}function uE(n){return n.map((t,r)=>`.definelabel MUSIC_TRACK_INDEX_${r+1},${t}`)}function V6(n,e){return`
#define PickAudioIndex __PP64_INTERNAL_GET_BOARD_AUDIO_INDEX
${D6(e).join(`
`)}
${n}
  `}function D6(n){return n?n.map((t,r)=>`#define MUSIC_TRACK_INDEX_${r+1} ${t}`):[]}function V3(n,e,t,r){const i=F6(e,t,r),a=uE(r.audioIndices),o=sE(r.boardInfo.bgDir,PA(r.board)),s=[...i,...a,...o,n].join(`
`);return Oh(s,r.addr,r.game)}function Oh(n,e,t){const r=`.org ${At(e)}`,i=qw(n),a=Yw(t,!0);return[r,...i,...a,n,".align 4"].join(`
`)}function D3(n,e,t,r,i,a){const o=n.split(`
`).find(d=>d.startsWith("main:")),s=T6(r.curSpaceIndex,a),l=!o&&`${s}:`,c=o&&`.definelabel ${s},main`;return Lp(`
    .beginfile ; Scopes static labels
    ${l||""}
    ${F6(e,t,r).join(`
`)}
    ${n}
    ${c||""}
    .align 4
    .endfile
  `,i)}function Yw(n,e){const r=Vg(n).map(i=>`.definelabel ${i.name},0x${i.addr.toString(16)}`);switch(n){case Qe.MP1_USA:e?r.push(".definelabel GetBoardAudioIndex,0"):r.push(".definelabel GetBoardAudioIndex,__PP64_INTERNAL_GET_BOARD_AUDIO_INDEX");break;case Qe.MP2_USA:e?(r.push(".definelabel ViewBoardMap,0"),r.push(".definelabel GetBoardAudioIndex,0"),r.push(".definelabel GetRandPromptSelection,0")):(r.push(".definelabel ViewBoardMap,__PP64_INTERNAL_VIEW_MAP"),r.push(".definelabel GetBoardAudioIndex,__PP64_INTERNAL_GET_BOARD_AUDIO_INDEX"),r.push(".definelabel GetRandPromptSelection,__PP64_INTERNAL_RAND_MESSAGE_CHOICE"));break;case Qe.MP3_USA:e?(r.push(".definelabel GetBasicPromptSelection,0"),r.push(".definelabel ViewBoardMap,0"),r.push(".definelabel GetBoardAudioIndex,0")):(r.push(".definelabel GetBasicPromptSelection,__PP64_INTERNAL_BASIC_MESSAGE_CHOICE"),r.push(".definelabel ViewBoardMap,__PP64_INTERNAL_VIEW_MAP"),r.push(".definelabel GetBoardAudioIndex,__PP64_INTERNAL_GET_BOARD_AUDIO_INDEX"));break}return r}const LW=/func_(8[0-9A-Fa-f]{7})/g,BW=/D_(8[0-9A-Fa-f]{7})/g;function qw(n){let e=[];const t=n.match(LW);t&&t.forEach(i=>{if(n.indexOf(i+":")>=0)return;const a=i.substr(5).toUpperCase();e.push(`.definelabel ${i},0x${a}`)});const r=n.match(BW);return r&&r.forEach(i=>{if(n.indexOf(i+":")>=0)return;const a=i.substr(2).toUpperCase();e.push(`.definelabel ${i},0x${a}`)}),e=e.filter((i,a)=>e.indexOf(i)===a),e}function F6(n,e,t){let r=[];const i=n.parameters,a=e.parameterValues;return i&&i.length&&a&&i.forEach(o=>{const s=a[o.name];switch(o.type){case i0.Boolean:r.push(`.definelabel ${o.name},${s?1:0}`);break;case i0.Number:typeof s=="number"&&r.push(`.definelabel ${o.name},${s}`);break;case i0.NumberArray:break;case i0.Space:if(r.push(`.definelabel ${o.name},${s}`),t.chains){const l=s8(t.chains,s);r.push(`.definelabel ${o.name}_chain_index,${l[0]}`),r.push(`.definelabel ${o.name}_chain_space_index,${l[1]}`)}else r.push(`.definelabel ${o.name}_chain_index,-1`),r.push(`.definelabel ${o.name}_chain_space_index,-1`);break;case i0.SpaceArray:if(t.testCompile)r.push(`${o.name} equ 0`),r.push(`${o.name}_length equ 1`),r.push(`${o.name}_chain_indices equ 0`),r.push(`${o.name}_chain_space_indices equ 0`);else{const l=s||[];r.push(`${o.name} equ ${l.join(",")}`),r.push(`${o.name}_length equ ${l.length}`);const c=l.map(f=>s8(t.chains,f)),d=c.map(f=>f[0]),h=c.map(f=>f[1]);r.push(`${o.name}_chain_indices equ ${d.join(",")}`),r.push(`${o.name}_chain_space_indices equ ${h.join(",")}`)}break;default:typeof s<"u"&&s!==null&&r.push(`.definelabel ${o.name},${s}`);break}}),r}function Lp(n,e){const t=n.split(`
`).map(o=>o.trim()),r=OW(t,e),i=MW(r);n=e?kW(t):r.join(`
`);const a=/[@\w!?]/;return i.forEach(o=>{let s=-1;do if(s=n.indexOf(o,s),s>=0){if(s>0){const l=n[s-1];if(a.test(l)){s+=o.length;continue}}if(s+o.length<n.length){const l=n[s+o.length];if(a.test(l)){s+=o.length;continue}}n=n.slice(0,s)+"@"+n.slice(s),s+=o.length+1}while(s>=0)}),n}function MW(n){const e=/^\.definelabel\s+([^,]+)/i,t=/^([@\w!?]+):/i,r=/^\s*([@\w!?]+)\s+equ(?:$|\s+)/i;let i=[];return n.forEach(a=>{let o=e.exec(a);if(o){i.push(o[1]);return}if(o=r.exec(a),o){i.push(o[1]);return}for(;o=t.exec(a);)i.push(o[1]),a=a.substr(o[0].length)}),i=i.filter(IW),i}function IW(n){return!(n.indexOf("__PP64_INTERNAL")>=0||n[0]==="@")}function OW(n,e){let t=!1,r=[];for(let i=0;i<n.length;i++){if(n[i]===".beginstatic"){if(t)throw new Error("Cannot repeat .beginstatic within a static section");t=!0,e||r.push("; omitted statics");continue}else if(n[i]===".endstatic"){if(!t)throw new Error("Saw .endstatic without .beginstatic");t=!1;continue}t||r.push(n[i])}if(t)throw new Error("Saw .beginstatic without .endstatic");return r}function kW(n){let e=[];for(let t=0;t<n.length;t++)n[t]===".beginstatic"?e.push("; .beginstatic"):n[t]===".endstatic"?e.push("; .endstatic"):e.push(n[t]);return e.join(`
`)}function T6(n,e){return`__PP64_INTERNAL_EVENT_${n<0?"minus"+Math.abs(n):n}_${e}`}class zd{constructor(e){this._spaceIndex=e,this._entries=[]}parse(e,t){let r;e instanceof ArrayBuffer?r=new DataView(e,t):r=e;let i=0,a,o,s;for(;(a=r.getUint16(i))!==0;)o=r.getUint16(i+2),s=r.getUint32(i+4),this.add(a,o,s),i+=8}write(e,t){let r=new DataView(e,t),i=0;return this.forEach(a=>{if(typeof a.address=="string")throw new Error("Cannot write event list with symbolic address");this._writeEntry(r,i,a.activationType,a.executionType,a.address),i+=8}),this._writeEntry(r,i,0,0),i+=8,i}getAssembly(){let e=`${b6(this._spaceIndex)}:
`;return this.forEach((t,r)=>{e+=`.halfword ${t.activationType}, ${t.executionType}
`,typeof t.address=="string"?e+=`.word ${t.address}
`:e+=`.word ${T6(this._spaceIndex,r)}
`}),e+=`.word 0, 0
`,e}_writeEntry(e,t,r,i,a=0){if(e.setUint16(t,r),e.setUint16(t+2,i),!a&&(r||i))throw new Error("Tried to write null address from SpaceEventList.");e.setUint32(t+4,a)}add(e,t,r=0){this._entries.push(new NW(e,t,r))}setAddress(e,t=0){this._entries[e].address=t>>>0}forEach(e){this._entries.forEach(e)}count(){return this._entries.length}byteLength(){return this._entries.length*8+8}static byteLength(e){return e*8+8}}class NW{constructor(e,t,r){this.activationType=e,this.executionType=t,this.address=r}}function b6(n){return`__PP64_INTERNAL_SPACE_LIST_${n<0?"minus"+Math.abs(n):n}`}class F3{constructor(){this._entries={}}parse(e,t){let r;e instanceof ArrayBuffer?r=new DataView(e,t):r=e;let i=0,a,o;for(;(a=r.getInt16(i))!==-1;)o=r.getUint32(i+4),this.add(a,o),i+=8}write(e,t){let r=new DataView(e,t),i=0;for(let a in this._entries)this._writeEntry(r,i,parseInt(a),this._entries[a]),i+=8;return this._writeEntry(r,i,65535,0),i+=8,i}getAssembly(){let e=`__PP64_INTERNAL_SPACE_TABLE:
`;for(let t in this._entries)e+=`.halfword ${parseInt(t)}, 0
       .word ${b6(parseInt(t))}
`;return e+=`.halfword 0xFFFF, 0, 0, 0
`,e}_writeEntry(e,t,r,i){if(e.setUint16(t,r),e.setUint16(t+2,0),!i&&r!==65535)throw new Error(`Tried to write null address from SpaceEventTable at space index ${r}.`);e.setUint32(t+4,i)}add(e,t=0){this._entries[e]=t}forEach(e){for(let t in this._entries){let r={spaceIndex:Number(t),address:this._entries[t]};e(r)}}byteLength(){return Object.keys(this._entries).length*8+8}}function T3(n){return String.fromCharCode((n&4278190080)>>>24)+String.fromCharCode((n&16711680)>>>16)+String.fromCharCode((n&65280)>>>8)+String.fromCharCode(n&255)}function UW(n){let e=new Array(n.length);for(let t=0;t<n.length;++t)e[t]=n.charCodeAt(t);return e}function jW(n){if("TextEncoder"in window)return new TextEncoder().encode(n).buffer;const e=new ArrayBuffer(n.length*2),t=new Uint16Array(e);for(let r=0,i=n.length;r<i;r++)t[r]=n.charCodeAt(r);return e}function GW(n){return"TextDecoder"in window?new TextDecoder().decode(n):String.fromCharCode.apply(null,new Uint16Array(n))}function vc(n,e,t){for(;n.length<e;)n=t+n;return n}function HW(n,e,t,r){return n.slice(0,e)+r+n.slice(e+Math.abs(t))}function b3(n,e){return n<e?-1:n>e?1:0}function P3(n){return n&&n.replace(/\r\n|\r/g,`
`)}function zW(n){return n?n.replace(/<\w+>/g,"").replace("\u3000","\u24B6").replace("\u3001","\u24B7").replace("\u3002","\u25B2").replace("\u3003","\u25BA").replace("\u3004","\u25C4").replace("\u3005","\u25BC").replace("\u3006","\u24CF").replace("\u3007","\u{1F579}\uFE0F").replace("\u3008","\u272A").replace("\u3009","\u2605").replace("\u3010","\u24C8").replace("\u3011","\u24C7"):""}var WW=ImageData;const XW=WW;function KW(n,e){let t=0;for(let r=0;r<e.height;r++)for(let i=0;i<e.width;i++){const a=Math.floor(i*n.width/e.width);let s=(Math.floor(r*n.height/e.height)*n.width+a)*4;e.data[t++]=n.data[s++],e.data[t++]=n.data[s++],e.data[t++]=n.data[s++],e.data[t++]=n.data[s++]}}function R3(n,e){function t(o,s,l,c,d){return Math.round((o-s)*d+(l-o)*c)}function r(o,s,l,c,d){const h=n.data[(l*n.width+c)*4+o];if(c===d)return h;const f=n.data[(l*n.width+d)*4+o];return t(s,c,d,h,f)}function i(o,s,l,c,d,h,f){const m=r(o,s,h,l,c);if(h===f)return m;const g=r(o,s,f,l,c);return t(d,h,f,m,g)}let a=0;for(let o=0;o<e.height;o++)for(let s=0;s<e.width;s++){const l=s*n.width/e.width,c=o*n.height/e.height,d=Math.floor(l),h=Math.floor(c),f=Math.min(Math.ceil(l),n.width-1),m=Math.min(Math.ceil(c),n.height-1);e.data[a++]=i(0,l,d,f,c,h,m),e.data[a++]=i(1,l,d,f,c,h,m),e.data[a++]=i(2,l,d,f,c,h,m),e.data[a++]=i(3,l,d,f,c,h,m)}}var P6=function(e,t,r,i){i=i||"bilinear-interpolation";let a;switch(i){case"nearest-neighbor":a=KW;break;case"bilinear-interpolation":a=R3;break;case"biliniear-interpolation":a=R3;break;default:throw new Error(`Unknown algorithm: ${i}`)}const o=new XW(t,r);return a(e,o),o};function YW(n,e,t,r,i,a,o,s){let l=o*(r/8),c=new ArrayBuffer(l*s),d=new Uint8Array(c),h=new Uint8Array(n),f=e*(r/8),m=i*(r/8),g=0;for(let x=a;x<a+s;x++){let E=m+f*x;for(let _=0;_<l;_++)d[g++]=h[E+_]}return c}function bc(n,e,t){const r=n.width,i=n.height,a=ko(r,i);a.drawImage(n,0,0,r,i);let o=a.getImageData(0,0,r,i);return(e!==r||t!==i)&&(o=P6(o,e,t)),o.data.buffer}function qW(n){const e=n>>>16&255,t=n>>>8&255,r=n&255,i=255-e,a=255-t,o=255-r;return i<<16|a<<8|o}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const cE="138",Wd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Xd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},QW=0,L3=1,JW=2,R6=1,ZW=2,ih=3,kh=0,Wr=1,Nc=2,L6=1,tu=0,G1=1,B3=2,M3=3,I3=4,$W=5,x1=100,eX=101,tX=102,O3=103,k3=104,nX=200,rX=201,iX=202,aX=203,B6=204,M6=205,oX=206,sX=207,lX=208,uX=209,cX=210,dX=0,AX=1,fX=2,Qw=3,hX=4,pX=5,mX=6,SX=7,h_=0,gX=1,_X=2,nu=0,xX=1,vX=2,wX=3,yX=4,EX=5,I6=300,oA=301,sA=302,Jw=303,Zw=304,p_=306,dE=307,Nh=1e3,sa=1001,Uh=1002,Kr=1003,$w=1004,ey=1005,pi=1006,O6=1007,Bp=1008,Uc=1009,CX=1010,VX=1011,jh=1012,DX=1013,Mg=1014,wc=1015,H1=1016,FX=1017,TX=1018,z1=1020,bX=1021,PX=1022,Qi=1023,RX=1024,LX=1025,Pc=1026,lA=1027,BX=1028,MX=1029,IX=1030,OX=1031,kX=1033,bx=33776,Px=33777,Rx=33778,Lx=33779,N3=35840,U3=35841,j3=35842,G3=35843,NX=36196,H3=37492,z3=37496,W3=37808,X3=37809,K3=37810,Y3=37811,q3=37812,Q3=37813,J3=37814,Z3=37815,$3=37816,eT=37817,tT=37818,nT=37819,rT=37820,iT=37821,aT=36492,UX=2200,jX=2201,GX=2202,Gh=2300,Hh=2301,Bx=2302,y1=2400,E1=2401,u8=2402,AE=2500,k6=2501,HX=0,mu=3e3,Qn=3001,zX=3200,WX=3201,RA=0,XX=1,Mx=7680,KX=519,zh=35044,c8=35048,oT="300 es",ty=1035;class ul{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,o=i.length;a<o;a++)i[a].call(this,e);e.target=null}}}const ui=[];for(let n=0;n<256;n++)ui[n]=(n<16?"0":"")+n.toString(16);let nS=1234567;const W1=Math.PI/180,Wh=180/Math.PI;function Mo(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ui[n&255]+ui[n>>8&255]+ui[n>>16&255]+ui[n>>24&255]+"-"+ui[e&255]+ui[e>>8&255]+"-"+ui[e>>16&15|64]+ui[e>>24&255]+"-"+ui[t&63|128]+ui[t>>8&255]+"-"+ui[t>>16&255]+ui[t>>24&255]+ui[r&255]+ui[r>>8&255]+ui[r>>16&255]+ui[r>>24&255]).toUpperCase()}function qi(n,e,t){return Math.max(e,Math.min(t,n))}function fE(n,e){return(n%e+e)%e}function YX(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function qX(n,e,t){return n!==e?(t-n)/(e-n):0}function ph(n,e,t){return(1-t)*n+t*e}function QX(n,e,t,r){return ph(n,e,1-Math.exp(-t*r))}function JX(n,e=1){return e-Math.abs(fE(n,e*2)-e)}function ZX(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function $X(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function eK(n,e){return n+Math.floor(Math.random()*(e-n+1))}function tK(n,e){return n+Math.random()*(e-n)}function nK(n){return n*(.5-Math.random())}function rK(n){return n!==void 0&&(nS=n%2147483647),nS=nS*16807%2147483647,(nS-1)/2147483646}function iK(n){return n*W1}function aK(n){return n*Wh}function ny(n){return(n&n-1)===0&&n!==0}function oK(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function d8(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function sK(n,e,t,r,i){const a=Math.cos,o=Math.sin,s=a(t/2),l=o(t/2),c=a((e+r)/2),d=o((e+r)/2),h=a((e-r)/2),f=o((e-r)/2),m=a((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":n.set(s*d,l*h,l*f,s*c);break;case"YZY":n.set(l*f,s*d,l*h,s*c);break;case"ZXZ":n.set(l*h,l*f,s*d,s*c);break;case"XZX":n.set(s*d,l*g,l*m,s*c);break;case"YXY":n.set(l*m,s*d,l*g,s*c);break;case"ZYZ":n.set(l*g,l*m,s*d,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}var N6=Object.freeze({__proto__:null,DEG2RAD:W1,RAD2DEG:Wh,generateUUID:Mo,clamp:qi,euclideanModulo:fE,mapLinear:YX,inverseLerp:qX,lerp:ph,damp:QX,pingpong:JX,smoothstep:ZX,smootherstep:$X,randInt:eK,randFloat:tK,randFloatSpread:nK,seededRandom:rK,degToRad:iK,radToDeg:aK,isPowerOfTwo:ny,ceilPowerOfTwo:oK,floorPowerOfTwo:d8,setQuaternionFromProperEuler:sK});class pt{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),a=this.x-e.x,o=this.y-e.y;return this.x=a*r-o*i+e.x,this.y=a*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}pt.prototype.isVector2=!0;class Ir{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,a,o,s,l,c){const d=this.elements;return d[0]=e,d[1]=i,d[2]=s,d[3]=t,d[4]=a,d[5]=l,d[6]=r,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,o=r[0],s=r[3],l=r[6],c=r[1],d=r[4],h=r[7],f=r[2],m=r[5],g=r[8],x=i[0],E=i[3],_=i[6],v=i[1],C=i[4],D=i[7],V=i[2],H=i[5],R=i[8];return a[0]=o*x+s*v+l*V,a[3]=o*E+s*C+l*H,a[6]=o*_+s*D+l*R,a[1]=c*x+d*v+h*V,a[4]=c*E+d*C+h*H,a[7]=c*_+d*D+h*R,a[2]=f*x+m*v+g*V,a[5]=f*E+m*C+g*H,a[8]=f*_+m*D+g*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],d=e[8];return t*o*d-t*s*c-r*a*d+r*s*l+i*a*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],d=e[8],h=d*o-s*c,f=s*l-d*a,m=c*a-o*l,g=t*h+r*f+i*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/g;return e[0]=h*x,e[1]=(i*c-d*r)*x,e[2]=(s*r-i*o)*x,e[3]=f*x,e[4]=(d*t-i*l)*x,e[5]=(i*a-s*t)*x,e[6]=m*x,e[7]=(r*l-c*t)*x,e[8]=(o*t-r*a)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,a,o,s){const l=Math.cos(a),c=Math.sin(a);return this.set(r*l,r*c,-r*(l*o+c*s)+o+e,-i*c,i*l,-i*(-c*o+l*s)+s+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,a=i[0],o=i[3],s=i[6],l=i[1],c=i[4],d=i[7];return i[0]=t*a+r*l,i[3]=t*o+r*c,i[6]=t*s+r*d,i[1]=-r*a+t*l,i[4]=-r*o+t*c,i[7]=-r*s+t*d,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}Ir.prototype.isMatrix3=!0;function U6(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}function Xh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const j6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wo={h:0,s:0,l:0},rS={h:0,s:0,l:0};function Ix(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function X1(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ox(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}class Jt{constructor(e,t,r){return t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,r){return this.r=e,this.g=t,this.b=r,this}setHSL(e,t,r){if(e=fE(e,1),t=qi(t,0,1),r=qi(r,0,1),t===0)this.r=this.g=this.b=r;else{const i=r<=.5?r*(1+t):r+t-r*t,a=2*r-i;this.r=Ix(a,i,e+1/3),this.g=Ix(a,i,e),this.b=Ix(a,i,e-1/3)}return this}setStyle(e){function t(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const s=parseFloat(i[1])/360,l=parseInt(i[2],10)/100,c=parseInt(i[3],10)/100;return t(i[4]),this.setHSL(s,l,c)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=r[1],a=i.length;if(a===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(a===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=j6[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=X1(e.r),this.g=X1(e.g),this.b=X1(e.b),this}copyLinearToSRGB(e){return this.r=Ox(e.r),this.g=Ox(e.g),this.b=Ox(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,r=this.g,i=this.b,a=Math.max(t,r,i),o=Math.min(t,r,i);let s,l;const c=(o+a)/2;if(o===a)s=0,l=0;else{const d=a-o;switch(l=c<=.5?d/(a+o):d/(2-a-o),a){case t:s=(r-i)/d+(r<i?6:0);break;case r:s=(i-t)/d+2;break;case i:s=(t-r)/d+4;break}s/=6}return e.h=s,e.s=l,e.l=c,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,r){return this.getHSL(wo),wo.h+=e,wo.s+=t,wo.l+=r,this.setHSL(wo.h,wo.s,wo.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(wo),e.getHSL(rS);const r=ph(wo.h,rS.h,t),i=ph(wo.s,rS.s,t),a=ph(wo.l,rS.l,t);return this.setHSL(r,i,a),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Jt.NAMES=j6;Jt.prototype.isColor=!0;Jt.prototype.r=1;Jt.prototype.g=1;Jt.prototype.b=1;let Kd;class $c{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Kd===void 0&&(Kd=Xh("canvas")),Kd.width=e.width,Kd.height=e.height;const r=Kd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Kd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Xh("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let o=0;o<a.length;o++)a[o]=X1(a[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(X1(t[r]/255)*255):t[r]=X1(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class G6{constructor(e=null){this.uuid=Mo(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let o=0,s=i.length;o<s;o++)i[o].isDataTexture?a.push(kx(i[o].image)):a.push(kx(i[o]))}else a=kx(i);r.url=a}return t||(e.images[this.uuid]=r),r}}function kx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?$c.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}G6.prototype.isSource=!0;let lK=0;class qr extends ul{constructor(e=qr.DEFAULT_IMAGE,t=qr.DEFAULT_MAPPING,r=sa,i=sa,a=pi,o=Bp,s=Qi,l=Uc,c=1,d=mu){super(),Object.defineProperty(this,"id",{value:lK++}),this.uuid=Mo(),this.name="",this.source=new G6(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=o,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=l,this.offset=new pt(0,0),this.repeat=new pt(1,1),this.center=new pt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ir,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==I6)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Nh:e.x=e.x-Math.floor(e.x);break;case sa:e.x=e.x<0?0:1;break;case Uh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Nh:e.y=e.y-Math.floor(e.y);break;case sa:e.y=e.y<0?0:1;break;case Uh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}qr.DEFAULT_IMAGE=null;qr.DEFAULT_MAPPING=I6;qr.prototype.isTexture=!0;class xn{constructor(e=0,t=0,r=0,i=1){this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*a,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*a,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*a,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,a;const l=e.elements,c=l[0],d=l[4],h=l[8],f=l[1],m=l[5],g=l[9],x=l[2],E=l[6],_=l[10];if(Math.abs(d-f)<.01&&Math.abs(h-x)<.01&&Math.abs(g-E)<.01){if(Math.abs(d+f)<.1&&Math.abs(h+x)<.1&&Math.abs(g+E)<.1&&Math.abs(c+m+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const C=(c+1)/2,D=(m+1)/2,V=(_+1)/2,H=(d+f)/4,R=(h+x)/4,j=(g+E)/4;return C>D&&C>V?C<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(C),i=H/r,a=R/r):D>V?D<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(D),r=H/i,a=j/i):V<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(V),r=R/a,i=j/a),this.set(r,i,a,t),this}let v=Math.sqrt((E-g)*(E-g)+(h-x)*(h-x)+(f-d)*(f-d));return Math.abs(v)<.001&&(v=1),this.x=(E-g)/v,this.y=(h-x)/v,this.z=(f-d)/v,this.w=Math.acos((c+m+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}xn.prototype.isVector4=!0;class Ta extends ul{constructor(e,t,r={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new xn(0,0,e,t),this.scissorTest=!1,this.viewport=new xn(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new qr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:pi,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Ta.prototype.isWebGLRenderTarget=!0;class m_ extends qr{constructor(e=null,t=1,r=1,i=1){super(null),this.image={data:e,width:t,height:r,depth:i},this.magFilter=Kr,this.minFilter=Kr,this.wrapR=sa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}m_.prototype.isDataArrayTexture=!0;class uK extends Ta{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new m_(null,e,t,r),this.texture.isRenderTargetTexture=!0}}uK.prototype.isWebGLArrayRenderTarget=!0;class hE extends qr{constructor(e=null,t=1,r=1,i=1){super(null),this.image={data:e,width:t,height:r,depth:i},this.magFilter=Kr,this.minFilter=Kr,this.wrapR=sa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}hE.prototype.isData3DTexture=!0;class cK extends Ta{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new hE(null,e,t,r),this.texture.isRenderTargetTexture=!0}}cK.prototype.isWebGL3DRenderTarget=!0;class dK extends Ta{constructor(e,t,r,i={}){super(e,t,i);const a=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=a.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,a=this.texture.length;i<a;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}dK.prototype.isWebGLMultipleRenderTargets=!0;class Si{constructor(e=0,t=0,r=0,i=1){this._x=e,this._y=t,this._z=r,this._w=i}static slerp(e,t,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,i)}static slerpFlat(e,t,r,i,a,o,s){let l=r[i+0],c=r[i+1],d=r[i+2],h=r[i+3];const f=a[o+0],m=a[o+1],g=a[o+2],x=a[o+3];if(s===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=h;return}if(s===1){e[t+0]=f,e[t+1]=m,e[t+2]=g,e[t+3]=x;return}if(h!==x||l!==f||c!==m||d!==g){let E=1-s;const _=l*f+c*m+d*g+h*x,v=_>=0?1:-1,C=1-_*_;if(C>Number.EPSILON){const V=Math.sqrt(C),H=Math.atan2(V,_*v);E=Math.sin(E*H)/V,s=Math.sin(s*H)/V}const D=s*v;if(l=l*E+f*D,c=c*E+m*D,d=d*E+g*D,h=h*E+x*D,E===1-s){const V=1/Math.sqrt(l*l+c*c+d*d+h*h);l*=V,c*=V,d*=V,h*=V}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,a,o){const s=r[i],l=r[i+1],c=r[i+2],d=r[i+3],h=a[o],f=a[o+1],m=a[o+2],g=a[o+3];return e[t]=s*g+d*h+l*m-c*f,e[t+1]=l*g+d*f+c*h-s*m,e[t+2]=c*g+d*m+s*f-l*h,e[t+3]=d*g-s*h-l*f-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,i=e._y,a=e._z,o=e._order,s=Math.cos,l=Math.sin,c=s(r/2),d=s(i/2),h=s(a/2),f=l(r/2),m=l(i/2),g=l(a/2);switch(o){case"XYZ":this._x=f*d*h+c*m*g,this._y=c*m*h-f*d*g,this._z=c*d*g+f*m*h,this._w=c*d*h-f*m*g;break;case"YXZ":this._x=f*d*h+c*m*g,this._y=c*m*h-f*d*g,this._z=c*d*g-f*m*h,this._w=c*d*h+f*m*g;break;case"ZXY":this._x=f*d*h-c*m*g,this._y=c*m*h+f*d*g,this._z=c*d*g+f*m*h,this._w=c*d*h-f*m*g;break;case"ZYX":this._x=f*d*h-c*m*g,this._y=c*m*h+f*d*g,this._z=c*d*g-f*m*h,this._w=c*d*h+f*m*g;break;case"YZX":this._x=f*d*h+c*m*g,this._y=c*m*h+f*d*g,this._z=c*d*g-f*m*h,this._w=c*d*h-f*m*g;break;case"XZY":this._x=f*d*h-c*m*g,this._y=c*m*h-f*d*g,this._z=c*d*g+f*m*h,this._w=c*d*h+f*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],a=t[8],o=t[1],s=t[5],l=t[9],c=t[2],d=t[6],h=t[10],f=r+s+h;if(f>0){const m=.5/Math.sqrt(f+1);this._w=.25/m,this._x=(d-l)*m,this._y=(a-c)*m,this._z=(o-i)*m}else if(r>s&&r>h){const m=2*Math.sqrt(1+r-s-h);this._w=(d-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(a+c)/m}else if(s>h){const m=2*Math.sqrt(1+s-r-h);this._w=(a-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+h-r-s);this._w=(o-i)/m,this._x=(a+c)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(qi(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,a=e._z,o=e._w,s=t._x,l=t._y,c=t._z,d=t._w;return this._x=r*d+o*s+i*c-a*l,this._y=i*d+o*l+a*s-r*c,this._z=a*d+o*c+r*l-i*s,this._w=o*d-r*s-i*l-a*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,a=this._z,o=this._w;let s=o*e._w+r*e._x+i*e._y+a*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=r,this._y=i,this._z=a,this;const l=1-s*s;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*a+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),d=Math.atan2(c,s),h=Math.sin((1-t)*d)/c,f=Math.sin(t*d)/c;return this._w=o*h+this._w*f,this._x=r*h+this._x*f,this._y=i*h+this._y*f,this._z=a*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(a),r*Math.cos(a),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Si.prototype.isQuaternion=!0;class Se{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(sT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(sT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*i,this.y=a[1]*t+a[4]*r+a[7]*i,this.z=a[2]*t+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=e.elements,o=1/(a[3]*t+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*i+a[12])*o,this.y=(a[1]*t+a[5]*r+a[9]*i+a[13])*o,this.z=(a[2]*t+a[6]*r+a[10]*i+a[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,a=e.x,o=e.y,s=e.z,l=e.w,c=l*t+o*i-s*r,d=l*r+s*t-a*i,h=l*i+a*r-o*t,f=-a*t-o*r-s*i;return this.x=c*l+f*-a+d*-s-h*-o,this.y=d*l+f*-o+h*-a-c*-s,this.z=h*l+f*-s+c*-o-d*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i,this.y=a[1]*t+a[5]*r+a[9]*i,this.z=a[2]*t+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,a=e.z,o=t.x,s=t.y,l=t.z;return this.x=i*l-a*s,this.y=a*o-r*l,this.z=r*s-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Nx.copy(this).projectOnVector(e),this.sub(Nx)}reflect(e){return this.sub(Nx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(qi(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Se.prototype.isVector3=!0;const Nx=new Se,sT=new Si;class ho{constructor(e=new Se(1/0,1/0,1/0),t=new Se(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,a=-1/0,o=-1/0,s=-1/0;for(let l=0,c=e.length;l<c;l+=3){const d=e[l],h=e[l+1],f=e[l+2];d<t&&(t=d),h<r&&(r=h),f<i&&(i=f),d>a&&(a=d),h>o&&(o=h),f>s&&(s=f)}return this.min.set(t,r,i),this.max.set(a,o,s),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,a=-1/0,o=-1/0,s=-1/0;for(let l=0,c=e.count;l<c;l++){const d=e.getX(l),h=e.getY(l),f=e.getZ(l);d<t&&(t=d),h<r&&(r=h),f<i&&(i=f),d>a&&(a=d),h>o&&(o=h),f>s&&(s=f)}return this.min.set(t,r,i),this.max.set(a,o,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=tc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const a=r.attributes.position;for(let o=0,s=a.count;o<s;o++)tc.fromBufferAttribute(a,o).applyMatrix4(e.matrixWorld),this.expandByPoint(tc)}else r.boundingBox===null&&r.computeBoundingBox(),Ux.copy(r.boundingBox),Ux.applyMatrix4(e.matrixWorld),this.union(Ux);const i=e.children;for(let a=0,o=i.length;a<o;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,tc),tc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ff),iS.subVectors(this.max,Ff),Yd.subVectors(e.a,Ff),qd.subVectors(e.b,Ff),Qd.subVectors(e.c,Ff),bl.subVectors(qd,Yd),Pl.subVectors(Qd,qd),nc.subVectors(Yd,Qd);let t=[0,-bl.z,bl.y,0,-Pl.z,Pl.y,0,-nc.z,nc.y,bl.z,0,-bl.x,Pl.z,0,-Pl.x,nc.z,0,-nc.x,-bl.y,bl.x,0,-Pl.y,Pl.x,0,-nc.y,nc.x,0];return!jx(t,Yd,qd,Qd,iS)||(t=[1,0,0,0,1,0,0,0,1],!jx(t,Yd,qd,Qd,iS))?!1:(aS.crossVectors(bl,Pl),t=[aS.x,aS.y,aS.z],jx(t,Yd,qd,Qd,iS))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return tc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(tc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ps[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ps[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ps[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ps[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ps[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ps[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ps[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ps[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ps),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}ho.prototype.isBox3=!0;const Ps=[new Se,new Se,new Se,new Se,new Se,new Se,new Se,new Se],tc=new Se,Ux=new ho,Yd=new Se,qd=new Se,Qd=new Se,bl=new Se,Pl=new Se,nc=new Se,Ff=new Se,iS=new Se,aS=new Se,rc=new Se;function jx(n,e,t,r,i){for(let a=0,o=n.length-3;a<=o;a+=3){rc.fromArray(n,a);const s=i.x*Math.abs(rc.x)+i.y*Math.abs(rc.y)+i.z*Math.abs(rc.z),l=e.dot(rc),c=t.dot(rc),d=r.dot(rc);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>s)return!1}return!0}const AK=new ho,lT=new Se,oS=new Se,Gx=new Se;class ed{constructor(e=new Se,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):AK.setFromPoints(e).getCenter(r);let i=0;for(let a=0,o=e.length;a<o;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Gx.subVectors(e,this.center);const t=Gx.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.add(Gx.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return this.center.equals(e.center)===!0?oS.set(0,0,1).multiplyScalar(e.radius):oS.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(lT.copy(e.center).add(oS)),this.expandByPoint(lT.copy(e.center).sub(oS)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Rs=new Se,Hx=new Se,sS=new Se,Rl=new Se,zx=new Se,lS=new Se,Wx=new Se;class LA{constructor(e=new Se,t=new Se(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Rs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Rs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Rs.copy(this.direction).multiplyScalar(t).add(this.origin),Rs.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Hx.copy(e).add(t).multiplyScalar(.5),sS.copy(t).sub(e).normalize(),Rl.copy(this.origin).sub(Hx);const a=e.distanceTo(t)*.5,o=-this.direction.dot(sS),s=Rl.dot(this.direction),l=-Rl.dot(sS),c=Rl.lengthSq(),d=Math.abs(1-o*o);let h,f,m,g;if(d>0)if(h=o*l-s,f=o*s-l,g=a*d,h>=0)if(f>=-g)if(f<=g){const x=1/d;h*=x,f*=x,m=h*(h+o*f+2*s)+f*(o*h+f+2*l)+c}else f=a,h=Math.max(0,-(o*f+s)),m=-h*h+f*(f+2*l)+c;else f=-a,h=Math.max(0,-(o*f+s)),m=-h*h+f*(f+2*l)+c;else f<=-g?(h=Math.max(0,-(-o*a+s)),f=h>0?-a:Math.min(Math.max(-a,-l),a),m=-h*h+f*(f+2*l)+c):f<=g?(h=0,f=Math.min(Math.max(-a,-l),a),m=f*(f+2*l)+c):(h=Math.max(0,-(o*a+s)),f=h>0?a:Math.min(Math.max(-a,-l),a),m=-h*h+f*(f+2*l)+c);else f=o>0?-a:a,h=Math.max(0,-(o*f+s)),m=-h*h+f*(f+2*l)+c;return r&&r.copy(this.direction).multiplyScalar(h).add(this.origin),i&&i.copy(sS).multiplyScalar(f).add(Hx),m}intersectSphere(e,t){Rs.subVectors(e.center,this.origin);const r=Rs.dot(this.direction),i=Rs.dot(Rs)-r*r,a=e.radius*e.radius;if(i>a)return null;const o=Math.sqrt(a-i),s=r-o,l=r+o;return s<0&&l<0?null:s<0?this.at(l,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,a,o,s,l;const c=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,f=this.origin;return c>=0?(r=(e.min.x-f.x)*c,i=(e.max.x-f.x)*c):(r=(e.max.x-f.x)*c,i=(e.min.x-f.x)*c),d>=0?(a=(e.min.y-f.y)*d,o=(e.max.y-f.y)*d):(a=(e.max.y-f.y)*d,o=(e.min.y-f.y)*d),r>o||a>i||((a>r||r!==r)&&(r=a),(o<i||i!==i)&&(i=o),h>=0?(s=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(s=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),r>l||s>i)||((s>r||r!==r)&&(r=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Rs)!==null}intersectTriangle(e,t,r,i,a){zx.subVectors(t,e),lS.subVectors(r,e),Wx.crossVectors(zx,lS);let o=this.direction.dot(Wx),s;if(o>0){if(i)return null;s=1}else if(o<0)s=-1,o=-o;else return null;Rl.subVectors(this.origin,e);const l=s*this.direction.dot(lS.crossVectors(Rl,lS));if(l<0)return null;const c=s*this.direction.dot(zx.cross(Rl));if(c<0||l+c>o)return null;const d=-s*Rl.dot(Wx);return d<0?null:this.at(d/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class u0{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,a,o,s,l,c,d,h,f,m,g,x,E){const _=this.elements;return _[0]=e,_[4]=t,_[8]=r,_[12]=i,_[1]=a,_[5]=o,_[9]=s,_[13]=l,_[2]=c,_[6]=d,_[10]=h,_[14]=f,_[3]=m,_[7]=g,_[11]=x,_[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new u0().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Jd.setFromMatrixColumn(e,0).length(),a=1/Jd.setFromMatrixColumn(e,1).length(),o=1/Jd.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,i=e.y,a=e.z,o=Math.cos(r),s=Math.sin(r),l=Math.cos(i),c=Math.sin(i),d=Math.cos(a),h=Math.sin(a);if(e.order==="XYZ"){const f=o*d,m=o*h,g=s*d,x=s*h;t[0]=l*d,t[4]=-l*h,t[8]=c,t[1]=m+g*c,t[5]=f-x*c,t[9]=-s*l,t[2]=x-f*c,t[6]=g+m*c,t[10]=o*l}else if(e.order==="YXZ"){const f=l*d,m=l*h,g=c*d,x=c*h;t[0]=f+x*s,t[4]=g*s-m,t[8]=o*c,t[1]=o*h,t[5]=o*d,t[9]=-s,t[2]=m*s-g,t[6]=x+f*s,t[10]=o*l}else if(e.order==="ZXY"){const f=l*d,m=l*h,g=c*d,x=c*h;t[0]=f-x*s,t[4]=-o*h,t[8]=g+m*s,t[1]=m+g*s,t[5]=o*d,t[9]=x-f*s,t[2]=-o*c,t[6]=s,t[10]=o*l}else if(e.order==="ZYX"){const f=o*d,m=o*h,g=s*d,x=s*h;t[0]=l*d,t[4]=g*c-m,t[8]=f*c+x,t[1]=l*h,t[5]=x*c+f,t[9]=m*c-g,t[2]=-c,t[6]=s*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,m=o*c,g=s*l,x=s*c;t[0]=l*d,t[4]=x-f*h,t[8]=g*h+m,t[1]=h,t[5]=o*d,t[9]=-s*d,t[2]=-c*d,t[6]=m*h+g,t[10]=f-x*h}else if(e.order==="XZY"){const f=o*l,m=o*c,g=s*l,x=s*c;t[0]=l*d,t[4]=-h,t[8]=c*d,t[1]=f*h+x,t[5]=o*d,t[9]=m*h-g,t[2]=g*h-m,t[6]=s*d,t[10]=x*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(fK,e,hK)}lookAt(e,t,r){const i=this.elements;return xa.subVectors(e,t),xa.lengthSq()===0&&(xa.z=1),xa.normalize(),Ll.crossVectors(r,xa),Ll.lengthSq()===0&&(Math.abs(r.z)===1?xa.x+=1e-4:xa.z+=1e-4,xa.normalize(),Ll.crossVectors(r,xa)),Ll.normalize(),uS.crossVectors(xa,Ll),i[0]=Ll.x,i[4]=uS.x,i[8]=xa.x,i[1]=Ll.y,i[5]=uS.y,i[9]=xa.y,i[2]=Ll.z,i[6]=uS.z,i[10]=xa.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,o=r[0],s=r[4],l=r[8],c=r[12],d=r[1],h=r[5],f=r[9],m=r[13],g=r[2],x=r[6],E=r[10],_=r[14],v=r[3],C=r[7],D=r[11],V=r[15],H=i[0],R=i[4],j=i[8],te=i[12],$=i[1],z=i[5],I=i[9],q=i[13],P=i[2],ee=i[6],ce=i[10],U=i[14],O=i[3],G=i[7],re=i[11],oe=i[15];return a[0]=o*H+s*$+l*P+c*O,a[4]=o*R+s*z+l*ee+c*G,a[8]=o*j+s*I+l*ce+c*re,a[12]=o*te+s*q+l*U+c*oe,a[1]=d*H+h*$+f*P+m*O,a[5]=d*R+h*z+f*ee+m*G,a[9]=d*j+h*I+f*ce+m*re,a[13]=d*te+h*q+f*U+m*oe,a[2]=g*H+x*$+E*P+_*O,a[6]=g*R+x*z+E*ee+_*G,a[10]=g*j+x*I+E*ce+_*re,a[14]=g*te+x*q+E*U+_*oe,a[3]=v*H+C*$+D*P+V*O,a[7]=v*R+C*z+D*ee+V*G,a[11]=v*j+C*I+D*ce+V*re,a[15]=v*te+C*q+D*U+V*oe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],a=e[12],o=e[1],s=e[5],l=e[9],c=e[13],d=e[2],h=e[6],f=e[10],m=e[14],g=e[3],x=e[7],E=e[11],_=e[15];return g*(+a*l*h-i*c*h-a*s*f+r*c*f+i*s*m-r*l*m)+x*(+t*l*m-t*c*f+a*o*f-i*o*m+i*c*d-a*l*d)+E*(+t*c*h-t*s*m-a*o*h+r*o*m+a*s*d-r*c*d)+_*(-i*s*d-t*l*h+t*s*f+i*o*h-r*o*f+r*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],d=e[8],h=e[9],f=e[10],m=e[11],g=e[12],x=e[13],E=e[14],_=e[15],v=h*E*c-x*f*c+x*l*m-s*E*m-h*l*_+s*f*_,C=g*f*c-d*E*c-g*l*m+o*E*m+d*l*_-o*f*_,D=d*x*c-g*h*c+g*s*m-o*x*m-d*s*_+o*h*_,V=g*h*l-d*x*l-g*s*f+o*x*f+d*s*E-o*h*E,H=t*v+r*C+i*D+a*V;if(H===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/H;return e[0]=v*R,e[1]=(x*f*a-h*E*a-x*i*m+r*E*m+h*i*_-r*f*_)*R,e[2]=(s*E*a-x*l*a+x*i*c-r*E*c-s*i*_+r*l*_)*R,e[3]=(h*l*a-s*f*a-h*i*c+r*f*c+s*i*m-r*l*m)*R,e[4]=C*R,e[5]=(d*E*a-g*f*a+g*i*m-t*E*m-d*i*_+t*f*_)*R,e[6]=(g*l*a-o*E*a-g*i*c+t*E*c+o*i*_-t*l*_)*R,e[7]=(o*f*a-d*l*a+d*i*c-t*f*c-o*i*m+t*l*m)*R,e[8]=D*R,e[9]=(g*h*a-d*x*a-g*r*m+t*x*m+d*r*_-t*h*_)*R,e[10]=(o*x*a-g*s*a+g*r*c-t*x*c-o*r*_+t*s*_)*R,e[11]=(d*s*a-o*h*a-d*r*c+t*h*c+o*r*m-t*s*m)*R,e[12]=V*R,e[13]=(d*x*i-g*h*i+g*r*f-t*x*f-d*r*E+t*h*E)*R,e[14]=(g*s*i-o*x*i-g*r*l+t*x*l+o*r*E-t*s*E)*R,e[15]=(o*h*i-d*s*i+d*r*l-t*h*l-o*r*f+t*s*f)*R,this}scale(e){const t=this.elements,r=e.x,i=e.y,a=e.z;return t[0]*=r,t[4]*=i,t[8]*=a,t[1]*=r,t[5]*=i,t[9]*=a,t[2]*=r,t[6]*=i,t[10]*=a,t[3]*=r,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),a=1-r,o=e.x,s=e.y,l=e.z,c=a*o,d=a*s;return this.set(c*o+r,c*s-i*l,c*l+i*s,0,c*s+i*l,d*s+r,d*l-i*o,0,c*l-i*s,d*l+i*o,a*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,a,o){return this.set(1,r,a,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,a=t._x,o=t._y,s=t._z,l=t._w,c=a+a,d=o+o,h=s+s,f=a*c,m=a*d,g=a*h,x=o*d,E=o*h,_=s*h,v=l*c,C=l*d,D=l*h,V=r.x,H=r.y,R=r.z;return i[0]=(1-(x+_))*V,i[1]=(m+D)*V,i[2]=(g-C)*V,i[3]=0,i[4]=(m-D)*H,i[5]=(1-(f+_))*H,i[6]=(E+v)*H,i[7]=0,i[8]=(g+C)*R,i[9]=(E-v)*R,i[10]=(1-(f+x))*R,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let a=Jd.set(i[0],i[1],i[2]).length();const o=Jd.set(i[4],i[5],i[6]).length(),s=Jd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],yo.copy(this);const c=1/a,d=1/o,h=1/s;return yo.elements[0]*=c,yo.elements[1]*=c,yo.elements[2]*=c,yo.elements[4]*=d,yo.elements[5]*=d,yo.elements[6]*=d,yo.elements[8]*=h,yo.elements[9]*=h,yo.elements[10]*=h,t.setFromRotationMatrix(yo),r.x=a,r.y=o,r.z=s,this}makePerspective(e,t,r,i,a,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,l=2*a/(t-e),c=2*a/(r-i),d=(t+e)/(t-e),h=(r+i)/(r-i),f=-(o+a)/(o-a),m=-2*o*a/(o-a);return s[0]=l,s[4]=0,s[8]=d,s[12]=0,s[1]=0,s[5]=c,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=f,s[14]=m,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,r,i,a,o){const s=this.elements,l=1/(t-e),c=1/(r-i),d=1/(o-a),h=(t+e)*l,f=(r+i)*c,m=(o+a)*d;return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-f,s[2]=0,s[6]=0,s[10]=-2*d,s[14]=-m,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}u0.prototype.isMatrix4=!0;const Jd=new Se,yo=new u0,fK=new Se(0,0,0),hK=new Se(1,1,1),Ll=new Se,uS=new Se,xa=new Se,uT=new u0,cT=new Si;class td{constructor(e=0,t=0,r=0,i=td.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,a=i[0],o=i[4],s=i[8],l=i[1],c=i[5],d=i[9],h=i[2],f=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(qi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-qi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(s,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(qi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-qi(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(qi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,m));break;case"XZY":this._z=Math.asin(-qi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return uT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(uT,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return cT.setFromEuler(this),this.setFromQuaternion(cT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}td.prototype.isEuler=!0;td.DefaultOrder="XYZ";td.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class H6{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let pK=0;const dT=new Se,Zd=new Si,Ls=new u0,cS=new Se,Tf=new Se,mK=new Se,SK=new Si,AT=new Se(1,0,0),fT=new Se(0,1,0),hT=new Se(0,0,1),gK={type:"added"},pT={type:"removed"};class nn extends ul{constructor(){super(),Object.defineProperty(this,"id",{value:pK++}),this.uuid=Mo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=nn.DefaultUp.clone();const e=new Se,t=new td,r=new Si,i=new Se(1,1,1);function a(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(a),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new u0},normalMatrix:{value:new Ir}}),this.matrix=new u0,this.matrixWorld=new u0,this.matrixAutoUpdate=nn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new H6,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Zd.setFromAxisAngle(e,t),this.quaternion.multiply(Zd),this}rotateOnWorldAxis(e,t){return Zd.setFromAxisAngle(e,t),this.quaternion.premultiply(Zd),this}rotateX(e){return this.rotateOnAxis(AT,e)}rotateY(e){return this.rotateOnAxis(fT,e)}rotateZ(e){return this.rotateOnAxis(hT,e)}translateOnAxis(e,t){return dT.copy(e).applyQuaternion(this.quaternion),this.position.add(dT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(AT,e)}translateY(e){return this.translateOnAxis(fT,e)}translateZ(e){return this.translateOnAxis(hT,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Ls.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?cS.copy(e):cS.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Tf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ls.lookAt(Tf,cS,this.up):Ls.lookAt(cS,Tf,this.up),this.quaternion.setFromRotationMatrix(Ls),i&&(Ls.extractRotation(i.matrixWorld),Zd.setFromRotationMatrix(Ls),this.quaternion.premultiply(Zd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(gK)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(pT)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(pT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ls.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ls.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ls),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tf,e,mK),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tf,SK,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let a=0,o=i.length;a<o;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function a(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const h=l[c];a(e.shapes,h)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,c=this.material.length;l<c;l++)s.push(a(e.materials,this.material[l]));i.material=s}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(a(e.animations,l))}}if(t){const s=o(e.geometries),l=o(e.materials),c=o(e.textures),d=o(e.images),h=o(e.shapes),f=o(e.skeletons),m=o(e.animations),g=o(e.nodes);s.length>0&&(r.geometries=s),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),m.length>0&&(r.animations=m),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(s){const l=[];for(const c in s){const d=s[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}nn.DefaultUp=new Se(0,1,0);nn.DefaultMatrixAutoUpdate=!0;nn.prototype.isObject3D=!0;const Eo=new Se,Bs=new Se,Xx=new Se,Ms=new Se,$d=new Se,e1=new Se,mT=new Se,Kx=new Se,Yx=new Se,qx=new Se;class Lr{constructor(e=new Se,t=new Se,r=new Se){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Eo.subVectors(e,t),i.cross(Eo);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,r,i,a){Eo.subVectors(i,t),Bs.subVectors(r,t),Xx.subVectors(e,t);const o=Eo.dot(Eo),s=Eo.dot(Bs),l=Eo.dot(Xx),c=Bs.dot(Bs),d=Bs.dot(Xx),h=o*c-s*s;if(h===0)return a.set(-2,-1,-1);const f=1/h,m=(c*l-s*d)*f,g=(o*d-s*l)*f;return a.set(1-m-g,g,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Ms),Ms.x>=0&&Ms.y>=0&&Ms.x+Ms.y<=1}static getUV(e,t,r,i,a,o,s,l){return this.getBarycoord(e,t,r,i,Ms),l.set(0,0),l.addScaledVector(a,Ms.x),l.addScaledVector(o,Ms.y),l.addScaledVector(s,Ms.z),l}static isFrontFacing(e,t,r,i){return Eo.subVectors(r,t),Bs.subVectors(e,t),Eo.cross(Bs).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Eo.subVectors(this.c,this.b),Bs.subVectors(this.a,this.b),Eo.cross(Bs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Lr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Lr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,a){return Lr.getUV(e,this.a,this.b,this.c,t,r,i,a)}containsPoint(e){return Lr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Lr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,a=this.c;let o,s;$d.subVectors(i,r),e1.subVectors(a,r),Kx.subVectors(e,r);const l=$d.dot(Kx),c=e1.dot(Kx);if(l<=0&&c<=0)return t.copy(r);Yx.subVectors(e,i);const d=$d.dot(Yx),h=e1.dot(Yx);if(d>=0&&h<=d)return t.copy(i);const f=l*h-d*c;if(f<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(r).addScaledVector($d,o);qx.subVectors(e,a);const m=$d.dot(qx),g=e1.dot(qx);if(g>=0&&m<=g)return t.copy(a);const x=m*c-l*g;if(x<=0&&c>=0&&g<=0)return s=c/(c-g),t.copy(r).addScaledVector(e1,s);const E=d*g-m*h;if(E<=0&&h-d>=0&&m-g>=0)return mT.subVectors(a,i),s=(h-d)/(h-d+(m-g)),t.copy(i).addScaledVector(mT,s);const _=1/(E+x+f);return o=x*_,s=f*_,t.copy(r).addScaledVector($d,o).addScaledVector(e1,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let _K=0;class Qr extends ul{constructor(){super(),Object.defineProperty(this,"id",{value:_K++}),this.uuid=Mo(),this.name="",this.type="Material",this.fog=!0,this.blending=G1,this.side=kh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=B6,this.blendDst=M6,this.blendEquation=x1,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Qw,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=KX,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Mx,this.stencilZFail=Mx,this.stencilZPass=Mx,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===L6;continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==G1&&(r.blending=this.blending),this.side!==kh&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(a){const o=[];for(const s in a){const l=a[s];delete l.metadata,o.push(l)}return o}if(t){const a=i(e.textures),o=i(e.images);a.length>0&&(r.textures=a),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}Qr.prototype.isMaterial=!0;Qr.fromType=function(){return null};class Rc extends Qr{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=h_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Rc.prototype.isMeshBasicMaterial=!0;const Rn=new Se,dS=new pt;class vn{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=zh,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let i=0,a=e.length;i<a;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new Jt),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let i=0,a=e.length;i<a;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new pt),t[r++]=o.x,t[r++]=o.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let i=0,a=e.length;i<a;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new Se),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let i=0,a=e.length;i<a;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new xn),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)dS.fromBufferAttribute(this,t),dS.applyMatrix3(e),this.setXY(t,dS.x,dS.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Rn.fromBufferAttribute(this,t),Rn.applyMatrix3(e),this.setXYZ(t,Rn.x,Rn.y,Rn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Rn.x=this.getX(t),Rn.y=this.getY(t),Rn.z=this.getZ(t),Rn.applyMatrix4(e),this.setXYZ(t,Rn.x,Rn.y,Rn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Rn.x=this.getX(t),Rn.y=this.getY(t),Rn.z=this.getZ(t),Rn.applyNormalMatrix(e),this.setXYZ(t,Rn.x,Rn.y,Rn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Rn.x=this.getX(t),Rn.y=this.getY(t),Rn.z=this.getZ(t),Rn.transformDirection(e),this.setXYZ(t,Rn.x,Rn.y,Rn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==zh&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}vn.prototype.isBufferAttribute=!0;class z6 extends vn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class W6 extends vn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class xK extends vn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}xK.prototype.isFloat16BufferAttribute=!0;class Bn extends vn{constructor(e,t,r){super(new Float32Array(e),t,r)}}let vK=0;const Wa=new u0,Qx=new nn,t1=new Se,va=new ho,bf=new ho,ti=new Se;class yn extends ul{constructor(){super(),Object.defineProperty(this,"id",{value:vK++}),this.uuid=Mo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(U6(e)?W6:z6)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new Ir().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Wa.makeRotationFromQuaternion(e),this.applyMatrix4(Wa),this}rotateX(e){return Wa.makeRotationX(e),this.applyMatrix4(Wa),this}rotateY(e){return Wa.makeRotationY(e),this.applyMatrix4(Wa),this}rotateZ(e){return Wa.makeRotationZ(e),this.applyMatrix4(Wa),this}translate(e,t,r){return Wa.makeTranslation(e,t,r),this.applyMatrix4(Wa),this}scale(e,t,r){return Wa.makeScale(e,t,r),this.applyMatrix4(Wa),this}lookAt(e){return Qx.lookAt(e),Qx.updateMatrix(),this.applyMatrix4(Qx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(t1).negate(),this.translate(t1.x,t1.y,t1.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const a=e[r];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new Bn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ho);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Se(-1/0,-1/0,-1/0),new Se(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const a=t[r];va.setFromBufferAttribute(a),this.morphTargetsRelative?(ti.addVectors(this.boundingBox.min,va.min),this.boundingBox.expandByPoint(ti),ti.addVectors(this.boundingBox.max,va.max),this.boundingBox.expandByPoint(ti)):(this.boundingBox.expandByPoint(va.min),this.boundingBox.expandByPoint(va.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ed);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Se,1/0);return}if(e){const r=this.boundingSphere.center;if(va.setFromBufferAttribute(e),t)for(let a=0,o=t.length;a<o;a++){const s=t[a];bf.setFromBufferAttribute(s),this.morphTargetsRelative?(ti.addVectors(va.min,bf.min),va.expandByPoint(ti),ti.addVectors(va.max,bf.max),va.expandByPoint(ti)):(va.expandByPoint(bf.min),va.expandByPoint(bf.max))}va.getCenter(r);let i=0;for(let a=0,o=e.count;a<o;a++)ti.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(ti));if(t)for(let a=0,o=t.length;a<o;a++){const s=t[a],l=this.morphTargetsRelative;for(let c=0,d=s.count;c<d;c++)ti.fromBufferAttribute(s,c),l&&(t1.fromBufferAttribute(e,c),ti.add(t1)),i=Math.max(i,r.distanceToSquared(ti))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,a=t.normal.array,o=t.uv.array,s=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new vn(new Float32Array(4*s),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let $=0;$<s;$++)c[$]=new Se,d[$]=new Se;const h=new Se,f=new Se,m=new Se,g=new pt,x=new pt,E=new pt,_=new Se,v=new Se;function C($,z,I){h.fromArray(i,$*3),f.fromArray(i,z*3),m.fromArray(i,I*3),g.fromArray(o,$*2),x.fromArray(o,z*2),E.fromArray(o,I*2),f.sub(h),m.sub(h),x.sub(g),E.sub(g);const q=1/(x.x*E.y-E.x*x.y);!isFinite(q)||(_.copy(f).multiplyScalar(E.y).addScaledVector(m,-x.y).multiplyScalar(q),v.copy(m).multiplyScalar(x.x).addScaledVector(f,-E.x).multiplyScalar(q),c[$].add(_),c[z].add(_),c[I].add(_),d[$].add(v),d[z].add(v),d[I].add(v))}let D=this.groups;D.length===0&&(D=[{start:0,count:r.length}]);for(let $=0,z=D.length;$<z;++$){const I=D[$],q=I.start,P=I.count;for(let ee=q,ce=q+P;ee<ce;ee+=3)C(r[ee+0],r[ee+1],r[ee+2])}const V=new Se,H=new Se,R=new Se,j=new Se;function te($){R.fromArray(a,$*3),j.copy(R);const z=c[$];V.copy(z),V.sub(R.multiplyScalar(R.dot(z))).normalize(),H.crossVectors(j,z);const q=H.dot(d[$])<0?-1:1;l[$*4]=V.x,l[$*4+1]=V.y,l[$*4+2]=V.z,l[$*4+3]=q}for(let $=0,z=D.length;$<z;++$){const I=D[$],q=I.start,P=I.count;for(let ee=q,ce=q+P;ee<ce;ee+=3)te(r[ee+0]),te(r[ee+1]),te(r[ee+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new vn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,m=r.count;f<m;f++)r.setXYZ(f,0,0,0);const i=new Se,a=new Se,o=new Se,s=new Se,l=new Se,c=new Se,d=new Se,h=new Se;if(e)for(let f=0,m=e.count;f<m;f+=3){const g=e.getX(f+0),x=e.getX(f+1),E=e.getX(f+2);i.fromBufferAttribute(t,g),a.fromBufferAttribute(t,x),o.fromBufferAttribute(t,E),d.subVectors(o,a),h.subVectors(i,a),d.cross(h),s.fromBufferAttribute(r,g),l.fromBufferAttribute(r,x),c.fromBufferAttribute(r,E),s.add(d),l.add(d),c.add(d),r.setXYZ(g,s.x,s.y,s.z),r.setXYZ(x,l.x,l.y,l.z),r.setXYZ(E,c.x,c.y,c.z)}else for(let f=0,m=t.count;f<m;f+=3)i.fromBufferAttribute(t,f+0),a.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),d.subVectors(o,a),h.subVectors(i,a),d.cross(h),r.setXYZ(f+0,d.x,d.y,d.z),r.setXYZ(f+1,d.x,d.y,d.z),r.setXYZ(f+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(e.attributes[i]===void 0)continue;const o=r[i].array,s=e.attributes[i],l=s.array,c=s.itemSize*t,d=Math.min(l.length,o.length-c);for(let h=0,f=c;h<d;h++,f++)o[f]=l[h]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ti.fromBufferAttribute(e,t),ti.normalize(),e.setXYZ(t,ti.x,ti.y,ti.z)}toNonIndexed(){function e(s,l){const c=s.array,d=s.itemSize,h=s.normalized,f=new c.constructor(l.length*d);let m=0,g=0;for(let x=0,E=l.length;x<E;x++){s.isInterleavedBufferAttribute?m=l[x]*s.data.stride+s.offset:m=l[x]*d;for(let _=0;_<d;_++)f[g++]=c[m++]}return new vn(f,d,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new yn,r=this.index.array,i=this.attributes;for(const s in i){const l=i[s],c=e(l,r);t.setAttribute(s,c)}const a=this.morphAttributes;for(const s in a){const l=[],c=a[s];for(let d=0,h=c.length;d<h;d++){const f=c[d],m=e(f,r);l.push(m)}t.morphAttributes[s]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,l=o.length;s<l;s++){const c=o[s];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let a=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let h=0,f=c.length;h<f;h++){const m=c[h];d.push(m.toJSON(e.data))}d.length>0&&(i[l]=d,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const d=i[c];this.setAttribute(c,d.clone(t))}const a=e.morphAttributes;for(const c in a){const d=[],h=a[c];for(let f=0,m=h.length;f<m;f++)d.push(h[f].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}yn.prototype.isBufferGeometry=!0;const ST=new u0,n1=new LA,Jx=new ed,Bl=new Se,Ml=new Se,Il=new Se,Zx=new Se,$x=new Se,ev=new Se,AS=new Se,fS=new Se,hS=new Se,pS=new pt,mS=new pt,SS=new pt,tv=new Se,gS=new Se;class Mi extends nn{constructor(e=new yn,t=new Rc){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,i=this.material,a=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),Jx.copy(r.boundingSphere),Jx.applyMatrix4(a),e.ray.intersectsSphere(Jx)===!1)||(ST.copy(a).invert(),n1.copy(e.ray).applyMatrix4(ST),r.boundingBox!==null&&n1.intersectsBox(r.boundingBox)===!1))return;let o;if(r.isBufferGeometry){const s=r.index,l=r.attributes.position,c=r.morphAttributes.position,d=r.morphTargetsRelative,h=r.attributes.uv,f=r.attributes.uv2,m=r.groups,g=r.drawRange;if(s!==null)if(Array.isArray(i))for(let x=0,E=m.length;x<E;x++){const _=m[x],v=i[_.materialIndex],C=Math.max(_.start,g.start),D=Math.min(s.count,Math.min(_.start+_.count,g.start+g.count));for(let V=C,H=D;V<H;V+=3){const R=s.getX(V),j=s.getX(V+1),te=s.getX(V+2);o=_S(this,v,e,n1,l,c,d,h,f,R,j,te),o&&(o.faceIndex=Math.floor(V/3),o.face.materialIndex=_.materialIndex,t.push(o))}}else{const x=Math.max(0,g.start),E=Math.min(s.count,g.start+g.count);for(let _=x,v=E;_<v;_+=3){const C=s.getX(_),D=s.getX(_+1),V=s.getX(_+2);o=_S(this,i,e,n1,l,c,d,h,f,C,D,V),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let x=0,E=m.length;x<E;x++){const _=m[x],v=i[_.materialIndex],C=Math.max(_.start,g.start),D=Math.min(l.count,Math.min(_.start+_.count,g.start+g.count));for(let V=C,H=D;V<H;V+=3){const R=V,j=V+1,te=V+2;o=_S(this,v,e,n1,l,c,d,h,f,R,j,te),o&&(o.faceIndex=Math.floor(V/3),o.face.materialIndex=_.materialIndex,t.push(o))}}else{const x=Math.max(0,g.start),E=Math.min(l.count,g.start+g.count);for(let _=x,v=E;_<v;_+=3){const C=_,D=_+1,V=_+2;o=_S(this,i,e,n1,l,c,d,h,f,C,D,V),o&&(o.faceIndex=Math.floor(_/3),t.push(o))}}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Mi.prototype.isMesh=!0;function wK(n,e,t,r,i,a,o,s){let l;if(e.side===Wr?l=r.intersectTriangle(o,a,i,!0,s):l=r.intersectTriangle(i,a,o,e.side!==Nc,s),l===null)return null;gS.copy(s),gS.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(gS);return c<t.near||c>t.far?null:{distance:c,point:gS.clone(),object:n}}function _S(n,e,t,r,i,a,o,s,l,c,d,h){Bl.fromBufferAttribute(i,c),Ml.fromBufferAttribute(i,d),Il.fromBufferAttribute(i,h);const f=n.morphTargetInfluences;if(a&&f){AS.set(0,0,0),fS.set(0,0,0),hS.set(0,0,0);for(let g=0,x=a.length;g<x;g++){const E=f[g],_=a[g];E!==0&&(Zx.fromBufferAttribute(_,c),$x.fromBufferAttribute(_,d),ev.fromBufferAttribute(_,h),o?(AS.addScaledVector(Zx,E),fS.addScaledVector($x,E),hS.addScaledVector(ev,E)):(AS.addScaledVector(Zx.sub(Bl),E),fS.addScaledVector($x.sub(Ml),E),hS.addScaledVector(ev.sub(Il),E)))}Bl.add(AS),Ml.add(fS),Il.add(hS)}n.isSkinnedMesh&&(n.boneTransform(c,Bl),n.boneTransform(d,Ml),n.boneTransform(h,Il));const m=wK(n,e,t,r,Bl,Ml,Il,tv);if(m){s&&(pS.fromBufferAttribute(s,c),mS.fromBufferAttribute(s,d),SS.fromBufferAttribute(s,h),m.uv=Lr.getUV(tv,Bl,Ml,Il,pS,mS,SS,new pt)),l&&(pS.fromBufferAttribute(l,c),mS.fromBufferAttribute(l,d),SS.fromBufferAttribute(l,h),m.uv2=Lr.getUV(tv,Bl,Ml,Il,pS,mS,SS,new pt));const g={a:c,b:d,c:h,normal:new Se,materialIndex:0};Lr.getNormal(Bl,Ml,Il,g.normal),m.face=g}return m}class Mp extends yn{constructor(e=1,t=1,r=1,i=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:a,depthSegments:o};const s=this;i=Math.floor(i),a=Math.floor(a),o=Math.floor(o);const l=[],c=[],d=[],h=[];let f=0,m=0;g("z","y","x",-1,-1,r,t,e,o,a,0),g("z","y","x",1,-1,r,t,-e,o,a,1),g("x","z","y",1,1,e,r,t,i,o,2),g("x","z","y",1,-1,e,r,-t,i,o,3),g("x","y","z",1,-1,e,t,r,i,a,4),g("x","y","z",-1,-1,e,t,-r,i,a,5),this.setIndex(l),this.setAttribute("position",new Bn(c,3)),this.setAttribute("normal",new Bn(d,3)),this.setAttribute("uv",new Bn(h,2));function g(x,E,_,v,C,D,V,H,R,j,te){const $=D/R,z=V/j,I=D/2,q=V/2,P=H/2,ee=R+1,ce=j+1;let U=0,O=0;const G=new Se;for(let re=0;re<ce;re++){const oe=re*z-q;for(let se=0;se<ee;se++){const be=se*$-I;G[x]=be*v,G[E]=oe*C,G[_]=P,c.push(G.x,G.y,G.z),G[x]=0,G[E]=0,G[_]=H>0?1:-1,d.push(G.x,G.y,G.z),h.push(se/R),h.push(1-re/j),U+=1}}for(let re=0;re<j;re++)for(let oe=0;oe<R;oe++){const se=f+oe+ee*re,be=f+oe+ee*(re+1),Be=f+(oe+1)+ee*(re+1),Te=f+(oe+1)+ee*re;l.push(se,be,Te),l.push(be,Be,Te),O+=6}s.addGroup(m,O,te),m+=O,f+=U}}static fromJSON(e){return new Mp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function uA(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Ri(n){const e={};for(let t=0;t<n.length;t++){const r=uA(n[t]);for(const i in r)e[i]=r[i]}return e}const yK={clone:uA,merge:Ri};var EK=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,CK=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class No extends Qr{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=EK,this.fragmentShader=CK,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=uA(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}No.prototype.isShaderMaterial=!0;class pE extends nn{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new u0,this.projectionMatrix=new u0,this.projectionMatrixInverse=new u0}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}pE.prototype.isCamera=!0;class mi extends pE{constructor(e=50,t=1,r=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Wh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(W1*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Wh*2*Math.atan(Math.tan(W1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,a,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(W1*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,a=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;a+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const s=this.filmOffset;s!==0&&(a+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}mi.prototype.isPerspectiveCamera=!0;const r1=90,i1=1;class mE extends nn{constructor(e,t,r){if(super(),this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const i=new mi(r1,i1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Se(1,0,0)),this.add(i);const a=new mi(r1,i1,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Se(-1,0,0)),this.add(a);const o=new mi(r1,i1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Se(0,1,0)),this.add(o);const s=new mi(r1,i1,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new Se(0,-1,0)),this.add(s);const l=new mi(r1,i1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Se(0,0,1)),this.add(l);const c=new mi(r1,i1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Se(0,0,-1)),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,a,o,s,l,c]=this.children,d=e.xr.enabled,h=e.getRenderTarget();e.xr.enabled=!1;const f=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,a),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,s),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=f,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(h),e.xr.enabled=d,r.texture.needsPMREMUpdate=!0}}class S_ extends qr{constructor(e,t,r,i,a,o,s,l,c,d){e=e!==void 0?e:[],t=t!==void 0?t:oA,super(e,t,r,i,a,o,s,l,c,d),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}S_.prototype.isCubeTexture=!0;class X6 extends Ta{constructor(e,t={}){super(e,e,t);const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new S_(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:pi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Qi,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Mp(5,5,5),a=new No({name:"CubemapFromEquirect",uniforms:uA(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Wr,blending:tu});a.uniforms.tEquirect.value=t;const o=new Mi(i,a),s=t.minFilter;return t.minFilter===Bp&&(t.minFilter=pi),new mE(1,10,this).update(e,o),t.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const a=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(a)}}X6.prototype.isWebGLCubeRenderTarget=!0;const nv=new Se,VK=new Se,DK=new Ir;class Hs{constructor(e=new Se(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=nv.subVectors(r,t).cross(VK.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(nv),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(r).multiplyScalar(a).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||DK.getNormalMatrix(e),i=this.coplanarPoint(nv).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}Hs.prototype.isPlane=!0;const a1=new ed,xS=new Se;class g_{constructor(e=new Hs,t=new Hs,r=new Hs,i=new Hs,a=new Hs,o=new Hs){this.planes=[e,t,r,i,a,o]}set(e,t,r,i,a,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(r),s[3].copy(i),s[4].copy(a),s[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],c=r[5],d=r[6],h=r[7],f=r[8],m=r[9],g=r[10],x=r[11],E=r[12],_=r[13],v=r[14],C=r[15];return t[0].setComponents(s-i,h-l,x-f,C-E).normalize(),t[1].setComponents(s+i,h+l,x+f,C+E).normalize(),t[2].setComponents(s+a,h+c,x+m,C+_).normalize(),t[3].setComponents(s-a,h-c,x-m,C-_).normalize(),t[4].setComponents(s-o,h-d,x-g,C-v).normalize(),t[5].setComponents(s+o,h+d,x+g,C+v).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),a1.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(a1)}intersectsSprite(e){return a1.center.set(0,0,0),a1.radius=.7071067811865476,a1.applyMatrix4(e.matrixWorld),this.intersectsSphere(a1)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(xS.x=i.normal.x>0?e.max.x:e.min.x,xS.y=i.normal.y>0?e.max.y:e.min.y,xS.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(xS)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function K6(){let n=null,e=!1,t=null,r=null;function i(a,o){t(a,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function FK(n,e){const t=e.isWebGL2,r=new WeakMap;function i(c,d){const h=c.array,f=c.usage,m=n.createBuffer();n.bindBuffer(d,m),n.bufferData(d,h,f),c.onUploadCallback();let g;if(h instanceof Float32Array)g=5126;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(h instanceof Int16Array)g=5122;else if(h instanceof Uint32Array)g=5125;else if(h instanceof Int32Array)g=5124;else if(h instanceof Int8Array)g=5120;else if(h instanceof Uint8Array)g=5121;else if(h instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:m,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}function a(c,d,h){const f=d.array,m=d.updateRange;n.bindBuffer(h,c),m.count===-1?n.bufferSubData(h,0,f):(t?n.bufferSubData(h,m.offset*f.BYTES_PER_ELEMENT,f,m.offset,m.count):n.bufferSubData(h,m.offset*f.BYTES_PER_ELEMENT,f.subarray(m.offset,m.offset+m.count)),m.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);d&&(n.deleteBuffer(d.buffer),r.delete(c))}function l(c,d){if(c.isGLBufferAttribute){const f=r.get(c);(!f||f.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=r.get(c);h===void 0?r.set(c,i(c,d)):h.version<c.version&&(a(h.buffer,c,d),h.version=c.version)}return{get:o,remove:s,update:l}}class SE extends yn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const a=e/2,o=t/2,s=Math.floor(r),l=Math.floor(i),c=s+1,d=l+1,h=e/s,f=t/l,m=[],g=[],x=[],E=[];for(let _=0;_<d;_++){const v=_*f-o;for(let C=0;C<c;C++){const D=C*h-a;g.push(D,-v,0),x.push(0,0,1),E.push(C/s),E.push(1-_/l)}}for(let _=0;_<l;_++)for(let v=0;v<s;v++){const C=v+c*_,D=v+c*(_+1),V=v+1+c*(_+1),H=v+1+c*_;m.push(C,D,H),m.push(D,V,H)}this.setIndex(m),this.setAttribute("position",new Bn(g,3)),this.setAttribute("normal",new Bn(x,3)),this.setAttribute("uv",new Bn(E,2))}static fromJSON(e){return new SE(e.width,e.height,e.widthSegments,e.heightSegments)}}var TK=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,bK=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,PK=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,RK=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,LK=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,BK=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,MK="vec3 transformed = vec3( position );",IK=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,OK=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,kK=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,NK=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,UK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,jK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,GK=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,HK=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,zK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,WK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,XK=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,KK=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,YK=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,qK=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,QK=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,JK=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,ZK=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,$K=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,eY="gl_FragColor = linearToOutputTexel( gl_FragColor );",tY=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,nY=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,rY=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,iY=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,aY=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,oY=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,sY=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,lY=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,uY=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,cY=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,dY=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,AY=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,fY=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,hY=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,pY=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,mY=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,SY=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,gY=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,_Y=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,xY=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,vY=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,wY=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,yY=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,EY=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,CY=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,VY=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,DY=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,FY=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,TY=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,bY=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,PY=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,RY=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,LY=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,BY=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,MY=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,IY=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ]
		#endif
	}
#endif`,OY=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,kY=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			float texelIndex = float( vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,NY=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,UY=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,jY=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,GY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,HY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zY=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,WY=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,XY=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,KY=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,YY=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,qY=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,QY=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,JY=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,ZY=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$Y=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,eq=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,tq=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,nq=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,rq=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,iq=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,aq=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,oq=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,sq=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,lq=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,uq=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,cq=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,dq=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Aq=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,fq=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,hq=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,pq=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,mq=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Sq=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,gq=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,_q=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,xq=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,vq=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,wq=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,yq=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Eq=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Cq=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Vq=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Dq=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Fq=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Tq=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,bq=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Pq=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Rq=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Lq=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Bq=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Mq=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Iq=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Oq=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kq=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Nq=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Uq=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,jq=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gq=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Hq=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,zq=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Wq=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xq=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Kq=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yq=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qq=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qq=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Jq=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Zq=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$q=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,eQ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tQ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,B0={alphamap_fragment:TK,alphamap_pars_fragment:bK,alphatest_fragment:PK,alphatest_pars_fragment:RK,aomap_fragment:LK,aomap_pars_fragment:BK,begin_vertex:MK,beginnormal_vertex:IK,bsdfs:OK,bumpmap_pars_fragment:kK,clipping_planes_fragment:NK,clipping_planes_pars_fragment:UK,clipping_planes_pars_vertex:jK,clipping_planes_vertex:GK,color_fragment:HK,color_pars_fragment:zK,color_pars_vertex:WK,color_vertex:XK,common:KK,cube_uv_reflection_fragment:YK,defaultnormal_vertex:qK,displacementmap_pars_vertex:QK,displacementmap_vertex:JK,emissivemap_fragment:ZK,emissivemap_pars_fragment:$K,encodings_fragment:eY,encodings_pars_fragment:tY,envmap_fragment:nY,envmap_common_pars_fragment:rY,envmap_pars_fragment:iY,envmap_pars_vertex:aY,envmap_physical_pars_fragment:mY,envmap_vertex:oY,fog_vertex:sY,fog_pars_vertex:lY,fog_fragment:uY,fog_pars_fragment:cY,gradientmap_pars_fragment:dY,lightmap_fragment:AY,lightmap_pars_fragment:fY,lights_lambert_vertex:hY,lights_pars_begin:pY,lights_toon_fragment:SY,lights_toon_pars_fragment:gY,lights_phong_fragment:_Y,lights_phong_pars_fragment:xY,lights_physical_fragment:vY,lights_physical_pars_fragment:wY,lights_fragment_begin:yY,lights_fragment_maps:EY,lights_fragment_end:CY,logdepthbuf_fragment:VY,logdepthbuf_pars_fragment:DY,logdepthbuf_pars_vertex:FY,logdepthbuf_vertex:TY,map_fragment:bY,map_pars_fragment:PY,map_particle_fragment:RY,map_particle_pars_fragment:LY,metalnessmap_fragment:BY,metalnessmap_pars_fragment:MY,morphcolor_vertex:IY,morphnormal_vertex:OY,morphtarget_pars_vertex:kY,morphtarget_vertex:NY,normal_fragment_begin:UY,normal_fragment_maps:jY,normal_pars_fragment:GY,normal_pars_vertex:HY,normal_vertex:zY,normalmap_pars_fragment:WY,clearcoat_normal_fragment_begin:XY,clearcoat_normal_fragment_maps:KY,clearcoat_pars_fragment:YY,output_fragment:qY,packing:QY,premultiplied_alpha_fragment:JY,project_vertex:ZY,dithering_fragment:$Y,dithering_pars_fragment:eq,roughnessmap_fragment:tq,roughnessmap_pars_fragment:nq,shadowmap_pars_fragment:rq,shadowmap_pars_vertex:iq,shadowmap_vertex:aq,shadowmask_pars_fragment:oq,skinbase_vertex:sq,skinning_pars_vertex:lq,skinning_vertex:uq,skinnormal_vertex:cq,specularmap_fragment:dq,specularmap_pars_fragment:Aq,tonemapping_fragment:fq,tonemapping_pars_fragment:hq,transmission_fragment:pq,transmission_pars_fragment:mq,uv_pars_fragment:Sq,uv_pars_vertex:gq,uv_vertex:_q,uv2_pars_fragment:xq,uv2_pars_vertex:vq,uv2_vertex:wq,worldpos_vertex:yq,background_vert:Eq,background_frag:Cq,cube_vert:Vq,cube_frag:Dq,depth_vert:Fq,depth_frag:Tq,distanceRGBA_vert:bq,distanceRGBA_frag:Pq,equirect_vert:Rq,equirect_frag:Lq,linedashed_vert:Bq,linedashed_frag:Mq,meshbasic_vert:Iq,meshbasic_frag:Oq,meshlambert_vert:kq,meshlambert_frag:Nq,meshmatcap_vert:Uq,meshmatcap_frag:jq,meshnormal_vert:Gq,meshnormal_frag:Hq,meshphong_vert:zq,meshphong_frag:Wq,meshphysical_vert:Xq,meshphysical_frag:Kq,meshtoon_vert:Yq,meshtoon_frag:qq,points_vert:Qq,points_frag:Jq,shadow_vert:Zq,shadow_frag:$q,sprite_vert:eQ,sprite_frag:tQ},It={common:{diffuse:{value:new Jt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ir},uv2Transform:{value:new Ir},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new pt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Jt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Jt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ir}},sprite:{diffuse:{value:new Jt(16777215)},opacity:{value:1},center:{value:new pt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ir}}},os={basic:{uniforms:Ri([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.fog]),vertexShader:B0.meshbasic_vert,fragmentShader:B0.meshbasic_frag},lambert:{uniforms:Ri([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.fog,It.lights,{emissive:{value:new Jt(0)}}]),vertexShader:B0.meshlambert_vert,fragmentShader:B0.meshlambert_frag},phong:{uniforms:Ri([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.fog,It.lights,{emissive:{value:new Jt(0)},specular:{value:new Jt(1118481)},shininess:{value:30}}]),vertexShader:B0.meshphong_vert,fragmentShader:B0.meshphong_frag},standard:{uniforms:Ri([It.common,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.roughnessmap,It.metalnessmap,It.fog,It.lights,{emissive:{value:new Jt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:B0.meshphysical_vert,fragmentShader:B0.meshphysical_frag},toon:{uniforms:Ri([It.common,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.gradientmap,It.fog,It.lights,{emissive:{value:new Jt(0)}}]),vertexShader:B0.meshtoon_vert,fragmentShader:B0.meshtoon_frag},matcap:{uniforms:Ri([It.common,It.bumpmap,It.normalmap,It.displacementmap,It.fog,{matcap:{value:null}}]),vertexShader:B0.meshmatcap_vert,fragmentShader:B0.meshmatcap_frag},points:{uniforms:Ri([It.points,It.fog]),vertexShader:B0.points_vert,fragmentShader:B0.points_frag},dashed:{uniforms:Ri([It.common,It.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:B0.linedashed_vert,fragmentShader:B0.linedashed_frag},depth:{uniforms:Ri([It.common,It.displacementmap]),vertexShader:B0.depth_vert,fragmentShader:B0.depth_frag},normal:{uniforms:Ri([It.common,It.bumpmap,It.normalmap,It.displacementmap,{opacity:{value:1}}]),vertexShader:B0.meshnormal_vert,fragmentShader:B0.meshnormal_frag},sprite:{uniforms:Ri([It.sprite,It.fog]),vertexShader:B0.sprite_vert,fragmentShader:B0.sprite_frag},background:{uniforms:{uvTransform:{value:new Ir},t2D:{value:null}},vertexShader:B0.background_vert,fragmentShader:B0.background_frag},cube:{uniforms:Ri([It.envmap,{opacity:{value:1}}]),vertexShader:B0.cube_vert,fragmentShader:B0.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:B0.equirect_vert,fragmentShader:B0.equirect_frag},distanceRGBA:{uniforms:Ri([It.common,It.displacementmap,{referencePosition:{value:new Se},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:B0.distanceRGBA_vert,fragmentShader:B0.distanceRGBA_frag},shadow:{uniforms:Ri([It.lights,It.fog,{color:{value:new Jt(0)},opacity:{value:1}}]),vertexShader:B0.shadow_vert,fragmentShader:B0.shadow_frag}};os.physical={uniforms:Ri([os.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new pt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Jt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new pt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Jt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Jt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:B0.meshphysical_vert,fragmentShader:B0.meshphysical_frag};function nQ(n,e,t,r,i,a){const o=new Jt(0);let s=i===!0?0:1,l,c,d=null,h=0,f=null;function m(x,E){let _=!1,v=E.isScene===!0?E.background:null;v&&v.isTexture&&(v=e.get(v));const C=n.xr,D=C.getSession&&C.getSession();D&&D.environmentBlendMode==="additive"&&(v=null),v===null?g(o,s):v&&v.isColor&&(g(v,1),_=!0),(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||v.mapping===p_)?(c===void 0&&(c=new Mi(new Mp(1,1,1),new No({name:"BackgroundCubeMaterial",uniforms:uA(os.cube.uniforms),vertexShader:os.cube.vertexShader,fragmentShader:os.cube.fragmentShader,side:Wr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(V,H,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,(d!==v||h!==v.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,d=v,h=v.version,f=n.toneMapping),x.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(l===void 0&&(l=new Mi(new SE(2,2),new No({name:"BackgroundMaterial",uniforms:uA(os.background.uniforms),vertexShader:os.background.vertexShader,fragmentShader:os.background.fragmentShader,side:kh,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=v,v.matrixAutoUpdate===!0&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),(d!==v||h!==v.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,d=v,h=v.version,f=n.toneMapping),x.unshift(l,l.geometry,l.material,0,0,null))}function g(x,E){t.buffers.color.setClear(x.r,x.g,x.b,E,a)}return{getClearColor:function(){return o},setClearColor:function(x,E=1){o.set(x),s=E,g(o,s)},getClearAlpha:function(){return s},setClearAlpha:function(x){s=x,g(o,s)},render:m}}function rQ(n,e,t,r){const i=n.getParameter(34921),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||a!==null,s={},l=x(null);let c=l;function d(q,P,ee,ce,U){let O=!1;if(o){const G=g(ce,ee,P);c!==G&&(c=G,f(c.object)),O=E(ce,U),O&&_(ce,U)}else{const G=P.wireframe===!0;(c.geometry!==ce.id||c.program!==ee.id||c.wireframe!==G)&&(c.geometry=ce.id,c.program=ee.id,c.wireframe=G,O=!0)}q.isInstancedMesh===!0&&(O=!0),U!==null&&t.update(U,34963),O&&(R(q,P,ee,ce),U!==null&&n.bindBuffer(34963,t.get(U).buffer))}function h(){return r.isWebGL2?n.createVertexArray():a.createVertexArrayOES()}function f(q){return r.isWebGL2?n.bindVertexArray(q):a.bindVertexArrayOES(q)}function m(q){return r.isWebGL2?n.deleteVertexArray(q):a.deleteVertexArrayOES(q)}function g(q,P,ee){const ce=ee.wireframe===!0;let U=s[q.id];U===void 0&&(U={},s[q.id]=U);let O=U[P.id];O===void 0&&(O={},U[P.id]=O);let G=O[ce];return G===void 0&&(G=x(h()),O[ce]=G),G}function x(q){const P=[],ee=[],ce=[];for(let U=0;U<i;U++)P[U]=0,ee[U]=0,ce[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:ee,attributeDivisors:ce,object:q,attributes:{},index:null}}function E(q,P){const ee=c.attributes,ce=q.attributes;let U=0;for(const O in ce){const G=ee[O],re=ce[O];if(G===void 0||G.attribute!==re||G.data!==re.data)return!0;U++}return c.attributesNum!==U||c.index!==P}function _(q,P){const ee={},ce=q.attributes;let U=0;for(const O in ce){const G=ce[O],re={};re.attribute=G,G.data&&(re.data=G.data),ee[O]=re,U++}c.attributes=ee,c.attributesNum=U,c.index=P}function v(){const q=c.newAttributes;for(let P=0,ee=q.length;P<ee;P++)q[P]=0}function C(q){D(q,0)}function D(q,P){const ee=c.newAttributes,ce=c.enabledAttributes,U=c.attributeDivisors;ee[q]=1,ce[q]===0&&(n.enableVertexAttribArray(q),ce[q]=1),U[q]!==P&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](q,P),U[q]=P)}function V(){const q=c.newAttributes,P=c.enabledAttributes;for(let ee=0,ce=P.length;ee<ce;ee++)P[ee]!==q[ee]&&(n.disableVertexAttribArray(ee),P[ee]=0)}function H(q,P,ee,ce,U,O){r.isWebGL2===!0&&(ee===5124||ee===5125)?n.vertexAttribIPointer(q,P,ee,U,O):n.vertexAttribPointer(q,P,ee,ce,U,O)}function R(q,P,ee,ce){if(r.isWebGL2===!1&&(q.isInstancedMesh||ce.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;v();const U=ce.attributes,O=ee.getAttributes(),G=P.defaultAttributeValues;for(const re in O){const oe=O[re];if(oe.location>=0){let se=U[re];if(se===void 0&&(re==="instanceMatrix"&&q.instanceMatrix&&(se=q.instanceMatrix),re==="instanceColor"&&q.instanceColor&&(se=q.instanceColor)),se!==void 0){const be=se.normalized,Be=se.itemSize,Te=t.get(se);if(Te===void 0)continue;const ye=Te.buffer,We=Te.type,at=Te.bytesPerElement;if(se.isInterleavedBufferAttribute){const Ke=se.data,tt=Ke.stride,lt=se.offset;if(Ke.isInstancedInterleavedBuffer){for(let Ie=0;Ie<oe.locationSize;Ie++)D(oe.location+Ie,Ke.meshPerAttribute);q.isInstancedMesh!==!0&&ce._maxInstanceCount===void 0&&(ce._maxInstanceCount=Ke.meshPerAttribute*Ke.count)}else for(let Ie=0;Ie<oe.locationSize;Ie++)C(oe.location+Ie);n.bindBuffer(34962,ye);for(let Ie=0;Ie<oe.locationSize;Ie++)H(oe.location+Ie,Be/oe.locationSize,We,be,tt*at,(lt+Be/oe.locationSize*Ie)*at)}else{if(se.isInstancedBufferAttribute){for(let Ke=0;Ke<oe.locationSize;Ke++)D(oe.location+Ke,se.meshPerAttribute);q.isInstancedMesh!==!0&&ce._maxInstanceCount===void 0&&(ce._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Ke=0;Ke<oe.locationSize;Ke++)C(oe.location+Ke);n.bindBuffer(34962,ye);for(let Ke=0;Ke<oe.locationSize;Ke++)H(oe.location+Ke,Be/oe.locationSize,We,be,Be*at,Be/oe.locationSize*Ke*at)}}else if(G!==void 0){const be=G[re];if(be!==void 0)switch(be.length){case 2:n.vertexAttrib2fv(oe.location,be);break;case 3:n.vertexAttrib3fv(oe.location,be);break;case 4:n.vertexAttrib4fv(oe.location,be);break;default:n.vertexAttrib1fv(oe.location,be)}}}}V()}function j(){z();for(const q in s){const P=s[q];for(const ee in P){const ce=P[ee];for(const U in ce)m(ce[U].object),delete ce[U];delete P[ee]}delete s[q]}}function te(q){if(s[q.id]===void 0)return;const P=s[q.id];for(const ee in P){const ce=P[ee];for(const U in ce)m(ce[U].object),delete ce[U];delete P[ee]}delete s[q.id]}function $(q){for(const P in s){const ee=s[P];if(ee[q.id]===void 0)continue;const ce=ee[q.id];for(const U in ce)m(ce[U].object),delete ce[U];delete ee[q.id]}}function z(){I(),c!==l&&(c=l,f(c.object))}function I(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:z,resetDefaultState:I,dispose:j,releaseStatesOfGeometry:te,releaseStatesOfProgram:$,initAttributes:v,enableAttribute:C,disableUnusedAttributes:V}}function iQ(n,e,t,r){const i=r.isWebGL2;let a;function o(c){a=c}function s(c,d){n.drawArrays(a,c,d),t.update(d,a,1)}function l(c,d,h){if(h===0)return;let f,m;if(i)f=n,m="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[m](a,c,d,h),t.update(d,a,h)}this.setMode=o,this.render=s,this.renderInstances=l}function aQ(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(R){if(R==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let s=t.precision!==void 0?t.precision:"highp";const l=a(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const c=o||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,h=n.getParameter(34930),f=n.getParameter(35660),m=n.getParameter(3379),g=n.getParameter(34076),x=n.getParameter(34921),E=n.getParameter(36347),_=n.getParameter(36348),v=n.getParameter(36349),C=f>0,D=o||e.has("OES_texture_float"),V=C&&D,H=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:g,maxAttributes:x,maxVertexUniforms:E,maxVaryings:_,maxFragmentUniforms:v,vertexTextures:C,floatFragmentTextures:D,floatVertexTextures:V,maxSamples:H}}function oQ(n){const e=this;let t=null,r=0,i=!1,a=!1;const o=new Hs,s=new Ir,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f,m){const g=h.length!==0||f||r!==0||i;return i=f,t=d(h,m,0),r=h.length,g},this.beginShadows=function(){a=!0,d(null)},this.endShadows=function(){a=!1,c()},this.setState=function(h,f,m){const g=h.clippingPlanes,x=h.clipIntersection,E=h.clipShadows,_=n.get(h);if(!i||g===null||g.length===0||a&&!E)a?d(null):c();else{const v=a?0:r,C=v*4;let D=_.clippingState||null;l.value=D,D=d(g,f,C,m);for(let V=0;V!==C;++V)D[V]=t[V];_.clippingState=D,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=v}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(h,f,m,g){const x=h!==null?h.length:0;let E=null;if(x!==0){if(E=l.value,g!==!0||E===null){const _=m+x*4,v=f.matrixWorldInverse;s.getNormalMatrix(v),(E===null||E.length<_)&&(E=new Float32Array(_));for(let C=0,D=m;C!==x;++C,D+=4)o.copy(h[C]).applyMatrix4(v,s),o.normal.toArray(E,D),E[D+3]=o.constant}l.value=E,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,E}}function sQ(n){let e=new WeakMap;function t(o,s){return s===Jw?o.mapping=oA:s===Zw&&(o.mapping=sA),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const s=o.mapping;if(s===Jw||s===Zw)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new X6(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const s=o.target;s.removeEventListener("dispose",i);const l=e.get(s);l!==void 0&&(e.delete(s),l.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}class gE extends pE{constructor(e=-1,t=1,r=1,i=-1,a=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,o=r+e,s=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=c*this.view.offsetX,o=a+c*this.view.width,s-=d*this.view.offsetY,l=s-d*this.view.height}this.projectionMatrix.makeOrthographic(a,o,s,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}gE.prototype.isOrthographicCamera=!0;const C1=4,gT=[.125,.215,.35,.446,.526,.582],mc=20,rv=new gE,_T=new Jt;let iv=null;const dc=(1+Math.sqrt(5))/2,o1=1/dc,xT=[new Se(1,1,1),new Se(-1,1,1),new Se(1,1,-1),new Se(-1,1,-1),new Se(0,dc,o1),new Se(0,dc,-o1),new Se(o1,0,dc),new Se(-o1,0,dc),new Se(dc,o1,0),new Se(-dc,o1,0)];class vT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){iv=this._renderer.getRenderTarget(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,i,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ET(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=yT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(iv),e.scissorTest=!1,vS(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===oA||e.mapping===sA?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),iv=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize-32,r={magFilter:pi,minFilter:pi,generateMipmaps:!1,type:H1,format:Qi,encoding:mu,depthBuffer:!1},i=wT(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=wT(e,t,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=lQ(a)),this._blurMaterial=uQ(a,e,t)}return i}_compileMaterial(e){const t=new Mi(this._lodPlanes[0],e);this._renderer.compile(t,rv)}_sceneToCubeUV(e,t,r,i){const s=new mi(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,f=d.toneMapping;d.getClearColor(_T),d.toneMapping=nu,d.autoClear=!1;const m=new Rc({name:"PMREM.Background",side:Wr,depthWrite:!1,depthTest:!1}),g=new Mi(new Mp,m);let x=!1;const E=e.background;E?E.isColor&&(m.color.copy(E),e.background=null,x=!0):(m.color.copy(_T),x=!0);for(let _=0;_<6;_++){const v=_%3;v===0?(s.up.set(0,l[_],0),s.lookAt(c[_],0,0)):v===1?(s.up.set(0,0,l[_]),s.lookAt(0,c[_],0)):(s.up.set(0,l[_],0),s.lookAt(0,0,c[_]));const C=this._cubeSize;vS(i,v*C,_>2?C:0,C,C),d.setRenderTarget(i),x&&d.render(g,s),d.render(e,s)}g.geometry.dispose(),g.material.dispose(),d.toneMapping=f,d.autoClear=h,e.background=E}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===oA||e.mapping===sA;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=ET()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=yT());const a=i?this._cubemapMaterial:this._equirectMaterial,o=new Mi(this._lodPlanes[0],a),s=a.uniforms;s.envMap.value=e;const l=this._cubeSize;vS(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,rv)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=xT[(i-1)%xT.length];this._blur(e,i-1,i,a,o)}t.autoClear=r}_blur(e,t,r,i,a){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",a),this._halfBlur(o,e,r,r,i,"longitudinal",a)}_halfBlur(e,t,r,i,a,o,s){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=new Mi(this._lodPlanes[i],c),f=c.uniforms,m=this._sizeLods[r]-1,g=isFinite(a)?Math.PI/(2*m):2*Math.PI/(2*mc-1),x=a/g,E=isFinite(a)?1+Math.floor(d*x):mc;E>mc&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${mc}`);const _=[];let v=0;for(let R=0;R<mc;++R){const j=R/x,te=Math.exp(-j*j/2);_.push(te),R===0?v+=te:R<E&&(v+=2*te)}for(let R=0;R<_.length;R++)_[R]=_[R]/v;f.envMap.value=e.texture,f.samples.value=E,f.weights.value=_,f.latitudinal.value=o==="latitudinal",s&&(f.poleAxis.value=s);const{_lodMax:C}=this;f.dTheta.value=g,f.mipInt.value=C-r;const D=this._sizeLods[i],V=3*D*(i>C-C1?i-C+C1:0),H=4*(this._cubeSize-D);vS(t,V,H,3*D,2*D),l.setRenderTarget(t),l.render(h,rv)}}function lQ(n){const e=[],t=[],r=[];let i=n;const a=n-C1+1+gT.length;for(let o=0;o<a;o++){const s=Math.pow(2,i);t.push(s);let l=1/s;o>n-C1?l=gT[o-n+C1-1]:o===0&&(l=0),r.push(l);const c=1/(s-1),d=-c/2,h=1+c/2,f=[d,d,h,d,h,h,d,d,h,h,d,h],m=6,g=6,x=3,E=2,_=1,v=new Float32Array(x*g*m),C=new Float32Array(E*g*m),D=new Float32Array(_*g*m);for(let H=0;H<m;H++){const R=H%3*2/3-1,j=H>2?0:-1,te=[R,j,0,R+2/3,j,0,R+2/3,j+1,0,R,j,0,R+2/3,j+1,0,R,j+1,0];v.set(te,x*g*H),C.set(f,E*g*H);const $=[H,H,H,H,H,H];D.set($,_*g*H)}const V=new yn;V.setAttribute("position",new vn(v,x)),V.setAttribute("uv",new vn(C,E)),V.setAttribute("faceIndex",new vn(D,_)),e.push(V),i>C1&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function wT(n,e,t){const r=new Ta(n,e,t);return r.texture.mapping=p_,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function vS(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function uQ(n,e,t){const r=new Float32Array(mc),i=new Se(0,1,0);return new No({name:"SphericalGaussianBlur",defines:{n:mc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:_E(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:tu,depthTest:!1,depthWrite:!1})}function yT(){return new No({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_E(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:tu,depthTest:!1,depthWrite:!1})}function ET(){return new No({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_E(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:tu,depthTest:!1,depthWrite:!1})}function _E(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function cQ(n){let e=new WeakMap,t=null;function r(s){if(s&&s.isTexture){const l=s.mapping,c=l===Jw||l===Zw,d=l===oA||l===sA;if(c||d)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let h=e.get(s);return t===null&&(t=new vT(n)),h=c?t.fromEquirectangular(s,h):t.fromCubemap(s,h),e.set(s,h),h.texture}else{if(e.has(s))return e.get(s).texture;{const h=s.image;if(c&&h&&h.height>0||d&&h&&i(h)){t===null&&(t=new vT(n));const f=c?t.fromEquirectangular(s):t.fromCubemap(s);return e.set(s,f),s.addEventListener("dispose",a),f.texture}else return null}}}return s}function i(s){let l=0;const c=6;for(let d=0;d<c;d++)s[d]!==void 0&&l++;return l===c}function a(s){const l=s.target;l.removeEventListener("dispose",a);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function dQ(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function AQ(n,e,t,r){const i={},a=new WeakMap;function o(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const g in f.attributes)e.remove(f.attributes[g]);f.removeEventListener("dispose",o),delete i[f.id];const m=a.get(f);m&&(e.remove(m),a.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function s(h,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,t.memory.geometries++),f}function l(h){const f=h.attributes;for(const g in f)e.update(f[g],34962);const m=h.morphAttributes;for(const g in m){const x=m[g];for(let E=0,_=x.length;E<_;E++)e.update(x[E],34962)}}function c(h){const f=[],m=h.index,g=h.attributes.position;let x=0;if(m!==null){const v=m.array;x=m.version;for(let C=0,D=v.length;C<D;C+=3){const V=v[C+0],H=v[C+1],R=v[C+2];f.push(V,H,H,R,R,V)}}else{const v=g.array;x=g.version;for(let C=0,D=v.length/3-1;C<D;C+=3){const V=C+0,H=C+1,R=C+2;f.push(V,H,H,R,R,V)}}const E=new(U6(f)?W6:z6)(f,1);E.version=x;const _=a.get(h);_&&e.remove(_),a.set(h,E)}function d(h){const f=a.get(h);if(f){const m=h.index;m!==null&&f.version<m.version&&c(h)}else c(h);return a.get(h)}return{get:s,update:l,getWireframeAttribute:d}}function fQ(n,e,t,r){const i=r.isWebGL2;let a;function o(f){a=f}let s,l;function c(f){s=f.type,l=f.bytesPerElement}function d(f,m){n.drawElements(a,m,s,f*l),t.update(m,a,1)}function h(f,m,g){if(g===0)return;let x,E;if(i)x=n,E="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),E="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[E](a,m,s,f*l,g),t.update(m,a,g)}this.setMode=o,this.setIndex=c,this.render=d,this.renderInstances=h}function hQ(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,o,s){switch(t.calls++,o){case 4:t.triangles+=s*(a/3);break;case 1:t.lines+=s*(a/2);break;case 3:t.lines+=s*(a-1);break;case 2:t.lines+=s*a;break;case 0:t.points+=s*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function pQ(n,e){return n[0]-e[0]}function mQ(n,e){return Math.abs(e[1])-Math.abs(n[1])}function av(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function SQ(n,e,t){const r={},i=new Float32Array(8),a=new WeakMap,o=new xn,s=[];for(let c=0;c<8;c++)s[c]=[c,0];function l(c,d,h,f){const m=c.morphTargetInfluences;if(e.isWebGL2===!0){const x=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,E=x!==void 0?x.length:0;let _=a.get(d);if(_===void 0||_.count!==E){let ce=function(){P.dispose(),a.delete(d),d.removeEventListener("dispose",ce)};var g=ce;_!==void 0&&_.texture.dispose();const D=d.morphAttributes.position!==void 0,V=d.morphAttributes.normal!==void 0,H=d.morphAttributes.color!==void 0,R=d.morphAttributes.position||[],j=d.morphAttributes.normal||[],te=d.morphAttributes.color||[];let $=0;D===!0&&($=1),V===!0&&($=2),H===!0&&($=3);let z=d.attributes.position.count*$,I=1;z>e.maxTextureSize&&(I=Math.ceil(z/e.maxTextureSize),z=e.maxTextureSize);const q=new Float32Array(z*I*4*E),P=new m_(q,z,I,E);P.format=Qi,P.type=wc,P.needsUpdate=!0;const ee=$*4;for(let U=0;U<E;U++){const O=R[U],G=j[U],re=te[U],oe=z*I*4*U;for(let se=0;se<O.count;se++){const be=se*ee;D===!0&&(o.fromBufferAttribute(O,se),O.normalized===!0&&av(o,O),q[oe+be+0]=o.x,q[oe+be+1]=o.y,q[oe+be+2]=o.z,q[oe+be+3]=0),V===!0&&(o.fromBufferAttribute(G,se),G.normalized===!0&&av(o,G),q[oe+be+4]=o.x,q[oe+be+5]=o.y,q[oe+be+6]=o.z,q[oe+be+7]=0),H===!0&&(o.fromBufferAttribute(re,se),re.normalized===!0&&av(o,G),q[oe+be+8]=o.x,q[oe+be+9]=o.y,q[oe+be+10]=o.z,q[oe+be+11]=re.itemSize===4?o.w:1)}}_={count:E,texture:P,size:new pt(z,I)},a.set(d,_),d.addEventListener("dispose",ce)}let v=0;for(let D=0;D<m.length;D++)v+=m[D];const C=d.morphTargetsRelative?1:1-v;f.getUniforms().setValue(n,"morphTargetBaseInfluence",C),f.getUniforms().setValue(n,"morphTargetInfluences",m),f.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const x=m===void 0?0:m.length;let E=r[d.id];if(E===void 0||E.length!==x){E=[];for(let V=0;V<x;V++)E[V]=[V,0];r[d.id]=E}for(let V=0;V<x;V++){const H=E[V];H[0]=V,H[1]=m[V]}E.sort(mQ);for(let V=0;V<8;V++)V<x&&E[V][1]?(s[V][0]=E[V][0],s[V][1]=E[V][1]):(s[V][0]=Number.MAX_SAFE_INTEGER,s[V][1]=0);s.sort(pQ);const _=d.morphAttributes.position,v=d.morphAttributes.normal;let C=0;for(let V=0;V<8;V++){const H=s[V],R=H[0],j=H[1];R!==Number.MAX_SAFE_INTEGER&&j?(_&&d.getAttribute("morphTarget"+V)!==_[R]&&d.setAttribute("morphTarget"+V,_[R]),v&&d.getAttribute("morphNormal"+V)!==v[R]&&d.setAttribute("morphNormal"+V,v[R]),i[V]=j,C+=j):(_&&d.hasAttribute("morphTarget"+V)===!0&&d.deleteAttribute("morphTarget"+V),v&&d.hasAttribute("morphNormal"+V)===!0&&d.deleteAttribute("morphNormal"+V),i[V]=0)}const D=d.morphTargetsRelative?1:1-C;f.getUniforms().setValue(n,"morphTargetBaseInfluence",D),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function gQ(n,e,t,r){let i=new WeakMap;function a(l){const c=r.render.frame,d=l.geometry,h=e.get(l,d);return i.get(h)!==c&&(e.update(h),i.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),h}function o(){i=new WeakMap}function s(l){const c=l.target;c.removeEventListener("dispose",s),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:a,dispose:o}}const Y6=new qr,q6=new m_,Q6=new hE,J6=new S_,CT=[],VT=[],DT=new Float32Array(16),FT=new Float32Array(9),TT=new Float32Array(4);function BA(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let a=CT[i];if(a===void 0&&(a=new Float32Array(i),CT[i]=a),e!==0){r.toArray(a,0);for(let o=1,s=0;o!==e;++o)s+=t,n[o].toArray(a,s)}return a}function Zi(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Ii(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function __(n,e){let t=VT[e];t===void 0&&(t=new Int32Array(e),VT[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function _Q(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function xQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zi(t,e))return;n.uniform2fv(this.addr,e),Ii(t,e)}}function vQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Zi(t,e))return;n.uniform3fv(this.addr,e),Ii(t,e)}}function wQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zi(t,e))return;n.uniform4fv(this.addr,e),Ii(t,e)}}function yQ(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Zi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ii(t,e)}else{if(Zi(t,r))return;TT.set(r),n.uniformMatrix2fv(this.addr,!1,TT),Ii(t,r)}}function EQ(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Zi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ii(t,e)}else{if(Zi(t,r))return;FT.set(r),n.uniformMatrix3fv(this.addr,!1,FT),Ii(t,r)}}function CQ(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Zi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ii(t,e)}else{if(Zi(t,r))return;DT.set(r),n.uniformMatrix4fv(this.addr,!1,DT),Ii(t,r)}}function VQ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function DQ(n,e){const t=this.cache;Zi(t,e)||(n.uniform2iv(this.addr,e),Ii(t,e))}function FQ(n,e){const t=this.cache;Zi(t,e)||(n.uniform3iv(this.addr,e),Ii(t,e))}function TQ(n,e){const t=this.cache;Zi(t,e)||(n.uniform4iv(this.addr,e),Ii(t,e))}function bQ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function PQ(n,e){const t=this.cache;Zi(t,e)||(n.uniform2uiv(this.addr,e),Ii(t,e))}function RQ(n,e){const t=this.cache;Zi(t,e)||(n.uniform3uiv(this.addr,e),Ii(t,e))}function LQ(n,e){const t=this.cache;Zi(t,e)||(n.uniform4uiv(this.addr,e),Ii(t,e))}function BQ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||Y6,i)}function MQ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||Q6,i)}function IQ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||J6,i)}function OQ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||q6,i)}function kQ(n){switch(n){case 5126:return _Q;case 35664:return xQ;case 35665:return vQ;case 35666:return wQ;case 35674:return yQ;case 35675:return EQ;case 35676:return CQ;case 5124:case 35670:return VQ;case 35667:case 35671:return DQ;case 35668:case 35672:return FQ;case 35669:case 35673:return TQ;case 5125:return bQ;case 36294:return PQ;case 36295:return RQ;case 36296:return LQ;case 35678:case 36198:case 36298:case 36306:case 35682:return BQ;case 35679:case 36299:case 36307:return MQ;case 35680:case 36300:case 36308:case 36293:return IQ;case 36289:case 36303:case 36311:case 36292:return OQ}}function NQ(n,e){n.uniform1fv(this.addr,e)}function UQ(n,e){const t=BA(e,this.size,2);n.uniform2fv(this.addr,t)}function jQ(n,e){const t=BA(e,this.size,3);n.uniform3fv(this.addr,t)}function GQ(n,e){const t=BA(e,this.size,4);n.uniform4fv(this.addr,t)}function HQ(n,e){const t=BA(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function zQ(n,e){const t=BA(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function WQ(n,e){const t=BA(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function XQ(n,e){n.uniform1iv(this.addr,e)}function KQ(n,e){n.uniform2iv(this.addr,e)}function YQ(n,e){n.uniform3iv(this.addr,e)}function qQ(n,e){n.uniform4iv(this.addr,e)}function QQ(n,e){n.uniform1uiv(this.addr,e)}function JQ(n,e){n.uniform2uiv(this.addr,e)}function ZQ(n,e){n.uniform3uiv(this.addr,e)}function $Q(n,e){n.uniform4uiv(this.addr,e)}function eJ(n,e,t){const r=e.length,i=__(t,r);n.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)t.setTexture2D(e[a]||Y6,i[a])}function tJ(n,e,t){const r=e.length,i=__(t,r);n.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)t.setTexture3D(e[a]||Q6,i[a])}function nJ(n,e,t){const r=e.length,i=__(t,r);n.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)t.setTextureCube(e[a]||J6,i[a])}function rJ(n,e,t){const r=e.length,i=__(t,r);n.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||q6,i[a])}function iJ(n){switch(n){case 5126:return NQ;case 35664:return UQ;case 35665:return jQ;case 35666:return GQ;case 35674:return HQ;case 35675:return zQ;case 35676:return WQ;case 5124:case 35670:return XQ;case 35667:case 35671:return KQ;case 35668:case 35672:return YQ;case 35669:case 35673:return qQ;case 5125:return QQ;case 36294:return JQ;case 36295:return ZQ;case 36296:return $Q;case 35678:case 36198:case 36298:case 36306:case 35682:return eJ;case 35679:case 36299:case 36307:return tJ;case 35680:case 36300:case 36308:case 36293:return nJ;case 36289:case 36303:case 36311:case 36292:return rJ}}function aJ(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=kQ(e.type)}function Z6(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=iJ(e.type)}Z6.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Ii(e,n)};function $6(n){this.id=n,this.seq=[],this.map={}}$6.prototype.setValue=function(n,e,t){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const o=r[i];o.setValue(n,e[o.id],t)}};const ov=/(\w+)(\])?(\[|\.)?/g;function bT(n,e){n.seq.push(e),n.map[e.id]=e}function oJ(n,e,t){const r=n.name,i=r.length;for(ov.lastIndex=0;;){const a=ov.exec(r),o=ov.lastIndex;let s=a[1];const l=a[2]==="]",c=a[3];if(l&&(s=s|0),c===void 0||c==="["&&o+2===i){bT(t,c===void 0?new aJ(s,n,e):new Z6(s,n,e));break}else{let h=t.map[s];h===void 0&&(h=new $6(s),bT(t,h)),t=h}}}function ru(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let r=0;r<t;++r){const i=n.getActiveUniform(e,r),a=n.getUniformLocation(e,i.name);oJ(i,a,this)}}ru.prototype.setValue=function(n,e,t,r){const i=this.map[e];i!==void 0&&i.setValue(n,t,r)};ru.prototype.setOptional=function(n,e,t){const r=e[t];r!==void 0&&this.setValue(n,t,r)};ru.upload=function(n,e,t,r){for(let i=0,a=e.length;i!==a;++i){const o=e[i],s=t[o.id];s.needsUpdate!==!1&&o.setValue(n,s.value,r)}};ru.seqWithValue=function(n,e){const t=[];for(let r=0,i=n.length;r!==i;++r){const a=n[r];a.id in e&&t.push(a)}return t};function PT(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let sJ=0;function lJ(n){const e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function uJ(n){switch(n){case mu:return["Linear","( value )"];case Qn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function RT(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();return r&&i===""?"":t.toUpperCase()+`

`+i+`

`+lJ(n.getShaderSource(e))}function cJ(n,e){const t=uJ(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function dJ(n,e){let t;switch(e){case xX:t="Linear";break;case vX:t="Reinhard";break;case wX:t="OptimizedCineon";break;case yX:t="ACESFilmic";break;case EX:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function AJ(n){return[n.extensionDerivatives||!!n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ah).join(`
`)}function fJ(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function hJ(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const a=n.getActiveAttrib(e,i),o=a.name;let s=1;a.type===35674&&(s=2),a.type===35675&&(s=3),a.type===35676&&(s=4),t[o]={type:a.type,location:n.getAttribLocation(e,o),locationSize:s}}return t}function ah(n){return n!==""}function LT(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function BT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const pJ=/^[ \t]*#include +<([\w\d./]+)>/gm;function ry(n){return n.replace(pJ,mJ)}function mJ(n,e){const t=B0[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return ry(t)}const SJ=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,gJ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function MT(n){return n.replace(gJ,eI).replace(SJ,_J)}function _J(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),eI(n,e,t,r)}function eI(n,e,t,r){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function IT(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function xJ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===R6?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===ZW?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ih&&(e="SHADOWMAP_TYPE_VSM"),e}function vJ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case oA:case sA:e="ENVMAP_TYPE_CUBE";break;case p_:case dE:e="ENVMAP_TYPE_CUBE_UV";break}return e}function wJ(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case sA:case dE:e="ENVMAP_MODE_REFRACTION";break}return e}function yJ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case h_:e="ENVMAP_BLENDING_MULTIPLY";break;case gX:e="ENVMAP_BLENDING_MIX";break;case _X:e="ENVMAP_BLENDING_ADD";break}return e}function EJ(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e/32+1)+3,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function CJ(n,e,t,r){const i=n.getContext(),a=t.defines;let o=t.vertexShader,s=t.fragmentShader;const l=xJ(t),c=vJ(t),d=wJ(t),h=yJ(t),f=EJ(t),m=t.isWebGL2?"":AJ(t),g=fJ(a),x=i.createProgram();let E,_,v=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(E=[g].filter(ah).join(`
`),E.length>0&&(E+=`
`),_=[m,g].filter(ah).join(`
`),_.length>0&&(_+=`
`)):(E=[IT(t),"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ah).join(`
`),_=[m,IT(t),"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==nu?"#define TONE_MAPPING":"",t.toneMapping!==nu?B0.tonemapping_pars_fragment:"",t.toneMapping!==nu?dJ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",B0.encodings_pars_fragment,cJ("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ah).join(`
`)),o=ry(o),o=LT(o,t),o=BT(o,t),s=ry(s),s=LT(s,t),s=BT(s,t),o=MT(o),s=MT(s),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,E=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,_=["#define varying in",t.glslVersion===oT?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===oT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const C=v+E+o,D=v+_+s,V=PT(i,35633,C),H=PT(i,35632,D);if(i.attachShader(x,V),i.attachShader(x,H),t.index0AttributeName!==void 0?i.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x),n.debug.checkShaderErrors){const te=i.getProgramInfoLog(x).trim(),$=i.getShaderInfoLog(V).trim(),z=i.getShaderInfoLog(H).trim();let I=!0,q=!0;if(i.getProgramParameter(x,35714)===!1){I=!1;const P=RT(i,V,"vertex"),ee=RT(i,H,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,35715)+`

Program Info Log: `+te+`
`+P+`
`+ee)}else te!==""?console.warn("THREE.WebGLProgram: Program Info Log:",te):($===""||z==="")&&(q=!1);q&&(this.diagnostics={runnable:I,programLog:te,vertexShader:{log:$,prefix:E},fragmentShader:{log:z,prefix:_}})}i.deleteShader(V),i.deleteShader(H);let R;this.getUniforms=function(){return R===void 0&&(R=new ru(i,x)),R};let j;return this.getAttributes=function(){return j===void 0&&(j=hJ(i,x)),j},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.name=t.shaderName,this.id=sJ++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=V,this.fragmentShader=H,this}let VJ=0;class DJ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(a)===!1&&(o.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const r=new FJ;t.set(e,r)}return t.get(e)}}class FJ{constructor(){this.id=VJ++,this.usedTimes=0}}function TJ(n,e,t,r,i,a,o){const s=new H6,l=new DJ,c=[],d=i.isWebGL2,h=i.logarithmicDepthBuffer,f=i.floatVertexTextures,m=i.maxVertexUniforms,g=i.vertexTextures;let x=i.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(z){const q=z.skeleton.bones;if(f)return 1024;{const ee=Math.floor((m-20)/4),ce=Math.min(ee,q.length);return ce<q.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+q.length+" bones. This GPU supports "+ce+"."),0):ce}}function v(z,I,q,P,ee){const ce=P.fog,U=ee.geometry,O=z.isMeshStandardMaterial?P.environment:null,G=(z.isMeshStandardMaterial?t:e).get(z.envMap||O),re=!!G&&(G.mapping===p_||G.mapping===dE)?G.image.height:null,oe=E[z.type],se=ee.isSkinnedMesh?_(ee):0;z.precision!==null&&(x=i.getMaxPrecision(z.precision),x!==z.precision&&console.warn("THREE.WebGLProgram.getParameters:",z.precision,"not supported, using",x,"instead."));const be=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,Be=be!==void 0?be.length:0;let Te=0;U.morphAttributes.position!==void 0&&(Te=1),U.morphAttributes.normal!==void 0&&(Te=2),U.morphAttributes.color!==void 0&&(Te=3);let ye,We,at,Ke;if(oe){const k=os[oe];ye=k.vertexShader,We=k.fragmentShader}else ye=z.vertexShader,We=z.fragmentShader,l.update(z),at=l.getVertexShaderID(z),Ke=l.getFragmentShaderID(z);const tt=n.getRenderTarget(),lt=z.alphaTest>0,Ie=z.clearcoat>0;return{isWebGL2:d,shaderID:oe,shaderName:z.type,vertexShader:ye,fragmentShader:We,defines:z.defines,customVertexShaderID:at,customFragmentShaderID:Ke,isRawShaderMaterial:z.isRawShaderMaterial===!0,glslVersion:z.glslVersion,precision:x,instancing:ee.isInstancedMesh===!0,instancingColor:ee.isInstancedMesh===!0&&ee.instanceColor!==null,supportsVertexTextures:g,outputEncoding:tt===null?n.outputEncoding:tt.isXRRenderTarget===!0?tt.texture.encoding:mu,map:!!z.map,matcap:!!z.matcap,envMap:!!G,envMapMode:G&&G.mapping,envMapCubeUVHeight:re,lightMap:!!z.lightMap,aoMap:!!z.aoMap,emissiveMap:!!z.emissiveMap,bumpMap:!!z.bumpMap,normalMap:!!z.normalMap,objectSpaceNormalMap:z.normalMapType===XX,tangentSpaceNormalMap:z.normalMapType===RA,decodeVideoTexture:!!z.map&&z.map.isVideoTexture===!0&&z.map.encoding===Qn,clearcoat:Ie,clearcoatMap:Ie&&!!z.clearcoatMap,clearcoatRoughnessMap:Ie&&!!z.clearcoatRoughnessMap,clearcoatNormalMap:Ie&&!!z.clearcoatNormalMap,displacementMap:!!z.displacementMap,roughnessMap:!!z.roughnessMap,metalnessMap:!!z.metalnessMap,specularMap:!!z.specularMap,specularIntensityMap:!!z.specularIntensityMap,specularColorMap:!!z.specularColorMap,opaque:z.transparent===!1&&z.blending===G1,alphaMap:!!z.alphaMap,alphaTest:lt,gradientMap:!!z.gradientMap,sheen:z.sheen>0,sheenColorMap:!!z.sheenColorMap,sheenRoughnessMap:!!z.sheenRoughnessMap,transmission:z.transmission>0,transmissionMap:!!z.transmissionMap,thicknessMap:!!z.thicknessMap,combine:z.combine,vertexTangents:!!z.normalMap&&!!U.attributes.tangent,vertexColors:z.vertexColors,vertexAlphas:z.vertexColors===!0&&!!U.attributes.color&&U.attributes.color.itemSize===4,vertexUvs:!!z.map||!!z.bumpMap||!!z.normalMap||!!z.specularMap||!!z.alphaMap||!!z.emissiveMap||!!z.roughnessMap||!!z.metalnessMap||!!z.clearcoatMap||!!z.clearcoatRoughnessMap||!!z.clearcoatNormalMap||!!z.displacementMap||!!z.transmissionMap||!!z.thicknessMap||!!z.specularIntensityMap||!!z.specularColorMap||!!z.sheenColorMap||!!z.sheenRoughnessMap,uvsVertexOnly:!(!!z.map||!!z.bumpMap||!!z.normalMap||!!z.specularMap||!!z.alphaMap||!!z.emissiveMap||!!z.roughnessMap||!!z.metalnessMap||!!z.clearcoatNormalMap||z.transmission>0||!!z.transmissionMap||!!z.thicknessMap||!!z.specularIntensityMap||!!z.specularColorMap||z.sheen>0||!!z.sheenColorMap||!!z.sheenRoughnessMap)&&!!z.displacementMap,fog:!!ce,useFog:z.fog,fogExp2:ce&&ce.isFogExp2,flatShading:!!z.flatShading,sizeAttenuation:z.sizeAttenuation,logarithmicDepthBuffer:h,skinning:ee.isSkinnedMesh===!0&&se>0,maxBones:se,useVertexTexture:f,morphTargets:U.morphAttributes.position!==void 0,morphNormals:U.morphAttributes.normal!==void 0,morphColors:U.morphAttributes.color!==void 0,morphTargetsCount:Be,morphTextureStride:Te,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:z.dithering,shadowMapEnabled:n.shadowMap.enabled&&q.length>0,shadowMapType:n.shadowMap.type,toneMapping:z.toneMapped?n.toneMapping:nu,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:z.premultipliedAlpha,doubleSided:z.side===Nc,flipSided:z.side===Wr,depthPacking:z.depthPacking!==void 0?z.depthPacking:!1,index0AttributeName:z.index0AttributeName,extensionDerivatives:z.extensions&&z.extensions.derivatives,extensionFragDepth:z.extensions&&z.extensions.fragDepth,extensionDrawBuffers:z.extensions&&z.extensions.drawBuffers,extensionShaderTextureLOD:z.extensions&&z.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:z.customProgramCacheKey()}}function C(z){const I=[];if(z.shaderID?I.push(z.shaderID):(I.push(z.customVertexShaderID),I.push(z.customFragmentShaderID)),z.defines!==void 0)for(const q in z.defines)I.push(q),I.push(z.defines[q]);return z.isRawShaderMaterial===!1&&(D(I,z),V(I,z),I.push(n.outputEncoding)),I.push(z.customProgramCacheKey),I.join()}function D(z,I){z.push(I.precision),z.push(I.outputEncoding),z.push(I.envMapMode),z.push(I.envMapCubeUVHeight),z.push(I.combine),z.push(I.vertexUvs),z.push(I.fogExp2),z.push(I.sizeAttenuation),z.push(I.maxBones),z.push(I.morphTargetsCount),z.push(I.morphAttributeCount),z.push(I.numDirLights),z.push(I.numPointLights),z.push(I.numSpotLights),z.push(I.numHemiLights),z.push(I.numRectAreaLights),z.push(I.numDirLightShadows),z.push(I.numPointLightShadows),z.push(I.numSpotLightShadows),z.push(I.shadowMapType),z.push(I.toneMapping),z.push(I.numClippingPlanes),z.push(I.numClipIntersection)}function V(z,I){s.disableAll(),I.isWebGL2&&s.enable(0),I.supportsVertexTextures&&s.enable(1),I.instancing&&s.enable(2),I.instancingColor&&s.enable(3),I.map&&s.enable(4),I.matcap&&s.enable(5),I.envMap&&s.enable(6),I.lightMap&&s.enable(7),I.aoMap&&s.enable(8),I.emissiveMap&&s.enable(9),I.bumpMap&&s.enable(10),I.normalMap&&s.enable(11),I.objectSpaceNormalMap&&s.enable(12),I.tangentSpaceNormalMap&&s.enable(13),I.clearcoat&&s.enable(14),I.clearcoatMap&&s.enable(15),I.clearcoatRoughnessMap&&s.enable(16),I.clearcoatNormalMap&&s.enable(17),I.displacementMap&&s.enable(18),I.specularMap&&s.enable(19),I.roughnessMap&&s.enable(20),I.metalnessMap&&s.enable(21),I.gradientMap&&s.enable(22),I.alphaMap&&s.enable(23),I.alphaTest&&s.enable(24),I.vertexColors&&s.enable(25),I.vertexAlphas&&s.enable(26),I.vertexUvs&&s.enable(27),I.vertexTangents&&s.enable(28),I.uvsVertexOnly&&s.enable(29),I.fog&&s.enable(30),z.push(s.mask),s.disableAll(),I.useFog&&s.enable(0),I.flatShading&&s.enable(1),I.logarithmicDepthBuffer&&s.enable(2),I.skinning&&s.enable(3),I.useVertexTexture&&s.enable(4),I.morphTargets&&s.enable(5),I.morphNormals&&s.enable(6),I.morphColors&&s.enable(7),I.premultipliedAlpha&&s.enable(8),I.shadowMapEnabled&&s.enable(9),I.physicallyCorrectLights&&s.enable(10),I.doubleSided&&s.enable(11),I.flipSided&&s.enable(12),I.depthPacking&&s.enable(13),I.dithering&&s.enable(14),I.specularIntensityMap&&s.enable(15),I.specularColorMap&&s.enable(16),I.transmission&&s.enable(17),I.transmissionMap&&s.enable(18),I.thicknessMap&&s.enable(19),I.sheen&&s.enable(20),I.sheenColorMap&&s.enable(21),I.sheenRoughnessMap&&s.enable(22),I.decodeVideoTexture&&s.enable(23),I.opaque&&s.enable(24),z.push(s.mask)}function H(z){const I=E[z.type];let q;if(I){const P=os[I];q=yK.clone(P.uniforms)}else q=z.uniforms;return q}function R(z,I){let q;for(let P=0,ee=c.length;P<ee;P++){const ce=c[P];if(ce.cacheKey===I){q=ce,++q.usedTimes;break}}return q===void 0&&(q=new CJ(n,I,z,a),c.push(q)),q}function j(z){if(--z.usedTimes===0){const I=c.indexOf(z);c[I]=c[c.length-1],c.pop(),z.destroy()}}function te(z){l.remove(z)}function $(){l.dispose()}return{getParameters:v,getProgramCacheKey:C,getUniforms:H,acquireProgram:R,releaseProgram:j,releaseShaderCache:te,programs:c,dispose:$}}function bJ(){let n=new WeakMap;function e(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function t(a){n.delete(a)}function r(a,o,s){n.get(a)[o]=s}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function PJ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function OT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function kT(){const n=[];let e=0;const t=[],r=[],i=[];function a(){e=0,t.length=0,r.length=0,i.length=0}function o(h,f,m,g,x,E){let _=n[e];return _===void 0?(_={id:h.id,object:h,geometry:f,material:m,groupOrder:g,renderOrder:h.renderOrder,z:x,group:E},n[e]=_):(_.id=h.id,_.object=h,_.geometry=f,_.material=m,_.groupOrder=g,_.renderOrder=h.renderOrder,_.z=x,_.group=E),e++,_}function s(h,f,m,g,x,E){const _=o(h,f,m,g,x,E);m.transmission>0?r.push(_):m.transparent===!0?i.push(_):t.push(_)}function l(h,f,m,g,x,E){const _=o(h,f,m,g,x,E);m.transmission>0?r.unshift(_):m.transparent===!0?i.unshift(_):t.unshift(_)}function c(h,f){t.length>1&&t.sort(h||PJ),r.length>1&&r.sort(f||OT),i.length>1&&i.sort(f||OT)}function d(){for(let h=e,f=n.length;h<f;h++){const m=n[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:a,push:s,unshift:l,finish:d,sort:c}}function RJ(){let n=new WeakMap;function e(r,i){let a;return n.has(r)===!1?(a=new kT,n.set(r,[a])):i>=n.get(r).length?(a=new kT,n.get(r).push(a)):a=n.get(r)[i],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function LJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Se,color:new Jt};break;case"SpotLight":t={position:new Se,direction:new Se,color:new Jt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Se,color:new Jt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Se,skyColor:new Jt,groundColor:new Jt};break;case"RectAreaLight":t={color:new Jt,position:new Se,halfWidth:new Se,halfHeight:new Se};break}return n[e.id]=t,t}}}function BJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let MJ=0;function IJ(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function OJ(n,e){const t=new LJ,r=BJ(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)i.probe.push(new Se);const a=new Se,o=new u0,s=new u0;function l(d,h){let f=0,m=0,g=0;for(let te=0;te<9;te++)i.probe[te].set(0,0,0);let x=0,E=0,_=0,v=0,C=0,D=0,V=0,H=0;d.sort(IJ);const R=h!==!0?Math.PI:1;for(let te=0,$=d.length;te<$;te++){const z=d[te],I=z.color,q=z.intensity,P=z.distance,ee=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)f+=I.r*q*R,m+=I.g*q*R,g+=I.b*q*R;else if(z.isLightProbe)for(let ce=0;ce<9;ce++)i.probe[ce].addScaledVector(z.sh.coefficients[ce],q);else if(z.isDirectionalLight){const ce=t.get(z);if(ce.color.copy(z.color).multiplyScalar(z.intensity*R),z.castShadow){const U=z.shadow,O=r.get(z);O.shadowBias=U.bias,O.shadowNormalBias=U.normalBias,O.shadowRadius=U.radius,O.shadowMapSize=U.mapSize,i.directionalShadow[x]=O,i.directionalShadowMap[x]=ee,i.directionalShadowMatrix[x]=z.shadow.matrix,D++}i.directional[x]=ce,x++}else if(z.isSpotLight){const ce=t.get(z);if(ce.position.setFromMatrixPosition(z.matrixWorld),ce.color.copy(I).multiplyScalar(q*R),ce.distance=P,ce.coneCos=Math.cos(z.angle),ce.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),ce.decay=z.decay,z.castShadow){const U=z.shadow,O=r.get(z);O.shadowBias=U.bias,O.shadowNormalBias=U.normalBias,O.shadowRadius=U.radius,O.shadowMapSize=U.mapSize,i.spotShadow[_]=O,i.spotShadowMap[_]=ee,i.spotShadowMatrix[_]=z.shadow.matrix,H++}i.spot[_]=ce,_++}else if(z.isRectAreaLight){const ce=t.get(z);ce.color.copy(I).multiplyScalar(q),ce.halfWidth.set(z.width*.5,0,0),ce.halfHeight.set(0,z.height*.5,0),i.rectArea[v]=ce,v++}else if(z.isPointLight){const ce=t.get(z);if(ce.color.copy(z.color).multiplyScalar(z.intensity*R),ce.distance=z.distance,ce.decay=z.decay,z.castShadow){const U=z.shadow,O=r.get(z);O.shadowBias=U.bias,O.shadowNormalBias=U.normalBias,O.shadowRadius=U.radius,O.shadowMapSize=U.mapSize,O.shadowCameraNear=U.camera.near,O.shadowCameraFar=U.camera.far,i.pointShadow[E]=O,i.pointShadowMap[E]=ee,i.pointShadowMatrix[E]=z.shadow.matrix,V++}i.point[E]=ce,E++}else if(z.isHemisphereLight){const ce=t.get(z);ce.skyColor.copy(z.color).multiplyScalar(q*R),ce.groundColor.copy(z.groundColor).multiplyScalar(q*R),i.hemi[C]=ce,C++}}v>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=It.LTC_FLOAT_1,i.rectAreaLTC2=It.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=It.LTC_HALF_1,i.rectAreaLTC2=It.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=m,i.ambient[2]=g;const j=i.hash;(j.directionalLength!==x||j.pointLength!==E||j.spotLength!==_||j.rectAreaLength!==v||j.hemiLength!==C||j.numDirectionalShadows!==D||j.numPointShadows!==V||j.numSpotShadows!==H)&&(i.directional.length=x,i.spot.length=_,i.rectArea.length=v,i.point.length=E,i.hemi.length=C,i.directionalShadow.length=D,i.directionalShadowMap.length=D,i.pointShadow.length=V,i.pointShadowMap.length=V,i.spotShadow.length=H,i.spotShadowMap.length=H,i.directionalShadowMatrix.length=D,i.pointShadowMatrix.length=V,i.spotShadowMatrix.length=H,j.directionalLength=x,j.pointLength=E,j.spotLength=_,j.rectAreaLength=v,j.hemiLength=C,j.numDirectionalShadows=D,j.numPointShadows=V,j.numSpotShadows=H,i.version=MJ++)}function c(d,h){let f=0,m=0,g=0,x=0,E=0;const _=h.matrixWorldInverse;for(let v=0,C=d.length;v<C;v++){const D=d[v];if(D.isDirectionalLight){const V=i.directional[f];V.direction.setFromMatrixPosition(D.matrixWorld),a.setFromMatrixPosition(D.target.matrixWorld),V.direction.sub(a),V.direction.transformDirection(_),f++}else if(D.isSpotLight){const V=i.spot[g];V.position.setFromMatrixPosition(D.matrixWorld),V.position.applyMatrix4(_),V.direction.setFromMatrixPosition(D.matrixWorld),a.setFromMatrixPosition(D.target.matrixWorld),V.direction.sub(a),V.direction.transformDirection(_),g++}else if(D.isRectAreaLight){const V=i.rectArea[x];V.position.setFromMatrixPosition(D.matrixWorld),V.position.applyMatrix4(_),s.identity(),o.copy(D.matrixWorld),o.premultiply(_),s.extractRotation(o),V.halfWidth.set(D.width*.5,0,0),V.halfHeight.set(0,D.height*.5,0),V.halfWidth.applyMatrix4(s),V.halfHeight.applyMatrix4(s),x++}else if(D.isPointLight){const V=i.point[m];V.position.setFromMatrixPosition(D.matrixWorld),V.position.applyMatrix4(_),m++}else if(D.isHemisphereLight){const V=i.hemi[E];V.direction.setFromMatrixPosition(D.matrixWorld),V.direction.transformDirection(_),V.direction.normalize(),E++}}}return{setup:l,setupView:c,state:i}}function NT(n,e){const t=new OJ(n,e),r=[],i=[];function a(){r.length=0,i.length=0}function o(h){r.push(h)}function s(h){i.push(h)}function l(h){t.setup(r,h)}function c(h){t.setupView(r,h)}return{init:a,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:s}}function kJ(n,e){let t=new WeakMap;function r(a,o=0){let s;return t.has(a)===!1?(s=new NT(n,e),t.set(a,[s])):o>=t.get(a).length?(s=new NT(n,e),t.get(a).push(s)):s=t.get(a)[o],s}function i(){t=new WeakMap}return{get:r,dispose:i}}class xE extends Qr{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=zX,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}xE.prototype.isMeshDepthMaterial=!0;class vE extends Qr{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Se,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}vE.prototype.isMeshDistanceMaterial=!0;const NJ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,UJ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function tI(n,e,t){let r=new g_;const i=new pt,a=new pt,o=new xn,s=new xE({depthPacking:WX}),l=new vE,c={},d=t.maxTextureSize,h={0:Wr,1:kh,2:Nc},f=new No({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pt},radius:{value:4}},vertexShader:NJ,fragmentShader:UJ}),m=f.clone();m.defines.HORIZONTAL_PASS=1;const g=new yn;g.setAttribute("position",new vn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Mi(g,f),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=R6,this.render=function(D,V,H){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||D.length===0)return;const R=n.getRenderTarget(),j=n.getActiveCubeFace(),te=n.getActiveMipmapLevel(),$=n.state;$.setBlending(tu),$.buffers.color.setClear(1,1,1,1),$.buffers.depth.setTest(!0),$.setScissorTest(!1);for(let z=0,I=D.length;z<I;z++){const q=D[z],P=q.shadow;if(P===void 0){console.warn("THREE.WebGLShadowMap:",q,"has no shadow.");continue}if(P.autoUpdate===!1&&P.needsUpdate===!1)continue;i.copy(P.mapSize);const ee=P.getFrameExtents();if(i.multiply(ee),a.copy(P.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(a.x=Math.floor(d/ee.x),i.x=a.x*ee.x,P.mapSize.x=a.x),i.y>d&&(a.y=Math.floor(d/ee.y),i.y=a.y*ee.y,P.mapSize.y=a.y)),P.map===null&&!P.isPointLightShadow&&this.type===ih){const U={minFilter:pi,magFilter:pi,format:Qi};P.map=new Ta(i.x,i.y,U),P.map.texture.name=q.name+".shadowMap",P.mapPass=new Ta(i.x,i.y,U),P.camera.updateProjectionMatrix()}if(P.map===null){const U={minFilter:Kr,magFilter:Kr,format:Qi};P.map=new Ta(i.x,i.y,U),P.map.texture.name=q.name+".shadowMap",P.camera.updateProjectionMatrix()}n.setRenderTarget(P.map),n.clear();const ce=P.getViewportCount();for(let U=0;U<ce;U++){const O=P.getViewport(U);o.set(a.x*O.x,a.y*O.y,a.x*O.z,a.y*O.w),$.viewport(o),P.updateMatrices(q,U),r=P.getFrustum(),C(V,H,P.camera,q,this.type)}!P.isPointLightShadow&&this.type===ih&&_(P,H),P.needsUpdate=!1}E.needsUpdate=!1,n.setRenderTarget(R,j,te)};function _(D,V){const H=e.update(x);f.defines.VSM_SAMPLES!==D.blurSamples&&(f.defines.VSM_SAMPLES=D.blurSamples,m.defines.VSM_SAMPLES=D.blurSamples,f.needsUpdate=!0,m.needsUpdate=!0),f.uniforms.shadow_pass.value=D.map.texture,f.uniforms.resolution.value=D.mapSize,f.uniforms.radius.value=D.radius,n.setRenderTarget(D.mapPass),n.clear(),n.renderBufferDirect(V,null,H,f,x,null),m.uniforms.shadow_pass.value=D.mapPass.texture,m.uniforms.resolution.value=D.mapSize,m.uniforms.radius.value=D.radius,n.setRenderTarget(D.map),n.clear(),n.renderBufferDirect(V,null,H,m,x,null)}function v(D,V,H,R,j,te){let $=null;const z=H.isPointLight===!0?D.customDistanceMaterial:D.customDepthMaterial;if(z!==void 0?$=z:$=H.isPointLight===!0?l:s,n.localClippingEnabled&&V.clipShadows===!0&&V.clippingPlanes.length!==0||V.displacementMap&&V.displacementScale!==0||V.alphaMap&&V.alphaTest>0){const I=$.uuid,q=V.uuid;let P=c[I];P===void 0&&(P={},c[I]=P);let ee=P[q];ee===void 0&&(ee=$.clone(),P[q]=ee),$=ee}return $.visible=V.visible,$.wireframe=V.wireframe,te===ih?$.side=V.shadowSide!==null?V.shadowSide:V.side:$.side=V.shadowSide!==null?V.shadowSide:h[V.side],$.alphaMap=V.alphaMap,$.alphaTest=V.alphaTest,$.clipShadows=V.clipShadows,$.clippingPlanes=V.clippingPlanes,$.clipIntersection=V.clipIntersection,$.displacementMap=V.displacementMap,$.displacementScale=V.displacementScale,$.displacementBias=V.displacementBias,$.wireframeLinewidth=V.wireframeLinewidth,$.linewidth=V.linewidth,H.isPointLight===!0&&$.isMeshDistanceMaterial===!0&&($.referencePosition.setFromMatrixPosition(H.matrixWorld),$.nearDistance=R,$.farDistance=j),$}function C(D,V,H,R,j){if(D.visible===!1)return;if(D.layers.test(V.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&j===ih)&&(!D.frustumCulled||r.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,D.matrixWorld);const z=e.update(D),I=D.material;if(Array.isArray(I)){const q=z.groups;for(let P=0,ee=q.length;P<ee;P++){const ce=q[P],U=I[ce.materialIndex];if(U&&U.visible){const O=v(D,U,R,H.near,H.far,j);n.renderBufferDirect(H,null,z,O,D,ce)}}}else if(I.visible){const q=v(D,I,R,H.near,H.far,j);n.renderBufferDirect(H,null,z,q,D,null)}}const $=D.children;for(let z=0,I=$.length;z<I;z++)C($[z],V,H,R,j)}}function jJ(n,e,t){const r=t.isWebGL2;function i(){let Ce=!1;const Ft=new xn;let ht=null;const Nt=new xn(0,0,0,0);return{setMask:function(Je){ht!==Je&&!Ce&&(n.colorMask(Je,Je,Je,Je),ht=Je)},setLocked:function(Je){Ce=Je},setClear:function(Je,mt,Wt,_t,a0){a0===!0&&(Je*=_t,mt*=_t,Wt*=_t),Ft.set(Je,mt,Wt,_t),Nt.equals(Ft)===!1&&(n.clearColor(Je,mt,Wt,_t),Nt.copy(Ft))},reset:function(){Ce=!1,ht=null,Nt.set(-1,0,0,0)}}}function a(){let Ce=!1,Ft=null,ht=null,Nt=null;return{setTest:function(Je){Je?Te(2929):ye(2929)},setMask:function(Je){Ft!==Je&&!Ce&&(n.depthMask(Je),Ft=Je)},setFunc:function(Je){if(ht!==Je){if(Je)switch(Je){case dX:n.depthFunc(512);break;case AX:n.depthFunc(519);break;case fX:n.depthFunc(513);break;case Qw:n.depthFunc(515);break;case hX:n.depthFunc(514);break;case pX:n.depthFunc(518);break;case mX:n.depthFunc(516);break;case SX:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);ht=Je}},setLocked:function(Je){Ce=Je},setClear:function(Je){Nt!==Je&&(n.clearDepth(Je),Nt=Je)},reset:function(){Ce=!1,Ft=null,ht=null,Nt=null}}}function o(){let Ce=!1,Ft=null,ht=null,Nt=null,Je=null,mt=null,Wt=null,_t=null,a0=null;return{setTest:function(v0){Ce||(v0?Te(2960):ye(2960))},setMask:function(v0){Ft!==v0&&!Ce&&(n.stencilMask(v0),Ft=v0)},setFunc:function(v0,M0,Vn){(ht!==v0||Nt!==M0||Je!==Vn)&&(n.stencilFunc(v0,M0,Vn),ht=v0,Nt=M0,Je=Vn)},setOp:function(v0,M0,Vn){(mt!==v0||Wt!==M0||_t!==Vn)&&(n.stencilOp(v0,M0,Vn),mt=v0,Wt=M0,_t=Vn)},setLocked:function(v0){Ce=v0},setClear:function(v0){a0!==v0&&(n.clearStencil(v0),a0=v0)},reset:function(){Ce=!1,Ft=null,ht=null,Nt=null,Je=null,mt=null,Wt=null,_t=null,a0=null}}}const s=new i,l=new a,c=new o;let d={},h={},f=new WeakMap,m=[],g=null,x=!1,E=null,_=null,v=null,C=null,D=null,V=null,H=null,R=!1,j=null,te=null,$=null,z=null,I=null;const q=n.getParameter(35661);let P=!1,ee=0;const ce=n.getParameter(7938);ce.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(ce)[1]),P=ee>=1):ce.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(ce)[1]),P=ee>=2);let U=null,O={};const G=n.getParameter(3088),re=n.getParameter(2978),oe=new xn().fromArray(G),se=new xn().fromArray(re);function be(Ce,Ft,ht){const Nt=new Uint8Array(4),Je=n.createTexture();n.bindTexture(Ce,Je),n.texParameteri(Ce,10241,9728),n.texParameteri(Ce,10240,9728);for(let mt=0;mt<ht;mt++)n.texImage2D(Ft+mt,0,6408,1,1,0,6408,5121,Nt);return Je}const Be={};Be[3553]=be(3553,3553,1),Be[34067]=be(34067,34069,6),s.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Te(2929),l.setFunc(Qw),k(!1),De(L3),Te(2884),Ie(tu);function Te(Ce){d[Ce]!==!0&&(n.enable(Ce),d[Ce]=!0)}function ye(Ce){d[Ce]!==!1&&(n.disable(Ce),d[Ce]=!1)}function We(Ce,Ft){return h[Ce]!==Ft?(n.bindFramebuffer(Ce,Ft),h[Ce]=Ft,r&&(Ce===36009&&(h[36160]=Ft),Ce===36160&&(h[36009]=Ft)),!0):!1}function at(Ce,Ft){let ht=m,Nt=!1;if(Ce)if(ht=f.get(Ft),ht===void 0&&(ht=[],f.set(Ft,ht)),Ce.isWebGLMultipleRenderTargets){const Je=Ce.texture;if(ht.length!==Je.length||ht[0]!==36064){for(let mt=0,Wt=Je.length;mt<Wt;mt++)ht[mt]=36064+mt;ht.length=Je.length,Nt=!0}}else ht[0]!==36064&&(ht[0]=36064,Nt=!0);else ht[0]!==1029&&(ht[0]=1029,Nt=!0);Nt&&(t.isWebGL2?n.drawBuffers(ht):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ht))}function Ke(Ce){return g!==Ce?(n.useProgram(Ce),g=Ce,!0):!1}const tt={[x1]:32774,[eX]:32778,[tX]:32779};if(r)tt[O3]=32775,tt[k3]=32776;else{const Ce=e.get("EXT_blend_minmax");Ce!==null&&(tt[O3]=Ce.MIN_EXT,tt[k3]=Ce.MAX_EXT)}const lt={[nX]:0,[rX]:1,[iX]:768,[B6]:770,[cX]:776,[lX]:774,[oX]:772,[aX]:769,[M6]:771,[uX]:775,[sX]:773};function Ie(Ce,Ft,ht,Nt,Je,mt,Wt,_t){if(Ce===tu){x===!0&&(ye(3042),x=!1);return}if(x===!1&&(Te(3042),x=!0),Ce!==$W){if(Ce!==E||_t!==R){if((_!==x1||D!==x1)&&(n.blendEquation(32774),_=x1,D=x1),_t)switch(Ce){case G1:n.blendFuncSeparate(1,771,1,771);break;case B3:n.blendFunc(1,1);break;case M3:n.blendFuncSeparate(0,769,0,1);break;case I3:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}else switch(Ce){case G1:n.blendFuncSeparate(770,771,1,771);break;case B3:n.blendFunc(770,1);break;case M3:n.blendFuncSeparate(0,769,0,1);break;case I3:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}v=null,C=null,V=null,H=null,E=Ce,R=_t}return}Je=Je||Ft,mt=mt||ht,Wt=Wt||Nt,(Ft!==_||Je!==D)&&(n.blendEquationSeparate(tt[Ft],tt[Je]),_=Ft,D=Je),(ht!==v||Nt!==C||mt!==V||Wt!==H)&&(n.blendFuncSeparate(lt[ht],lt[Nt],lt[mt],lt[Wt]),v=ht,C=Nt,V=mt,H=Wt),E=Ce,R=null}function Ue(Ce,Ft){Ce.side===Nc?ye(2884):Te(2884);let ht=Ce.side===Wr;Ft&&(ht=!ht),k(ht),Ce.blending===G1&&Ce.transparent===!1?Ie(tu):Ie(Ce.blending,Ce.blendEquation,Ce.blendSrc,Ce.blendDst,Ce.blendEquationAlpha,Ce.blendSrcAlpha,Ce.blendDstAlpha,Ce.premultipliedAlpha),l.setFunc(Ce.depthFunc),l.setTest(Ce.depthTest),l.setMask(Ce.depthWrite),s.setMask(Ce.colorWrite);const Nt=Ce.stencilWrite;c.setTest(Nt),Nt&&(c.setMask(Ce.stencilWriteMask),c.setFunc(Ce.stencilFunc,Ce.stencilRef,Ce.stencilFuncMask),c.setOp(Ce.stencilFail,Ce.stencilZFail,Ce.stencilZPass)),le(Ce.polygonOffset,Ce.polygonOffsetFactor,Ce.polygonOffsetUnits),Ce.alphaToCoverage===!0?Te(32926):ye(32926)}function k(Ce){j!==Ce&&(Ce?n.frontFace(2304):n.frontFace(2305),j=Ce)}function De(Ce){Ce!==QW?(Te(2884),Ce!==te&&(Ce===L3?n.cullFace(1029):Ce===JW?n.cullFace(1028):n.cullFace(1032))):ye(2884),te=Ce}function we(Ce){Ce!==$&&(P&&n.lineWidth(Ce),$=Ce)}function le(Ce,Ft,ht){Ce?(Te(32823),(z!==Ft||I!==ht)&&(n.polygonOffset(Ft,ht),z=Ft,I=ht)):ye(32823)}function ne(Ce){Ce?Te(3089):ye(3089)}function fe(Ce){Ce===void 0&&(Ce=33984+q-1),U!==Ce&&(n.activeTexture(Ce),U=Ce)}function He(Ce,Ft){U===null&&fe();let ht=O[U];ht===void 0&&(ht={type:void 0,texture:void 0},O[U]=ht),(ht.type!==Ce||ht.texture!==Ft)&&(n.bindTexture(Ce,Ft||Be[Ce]),ht.type=Ce,ht.texture=Ft)}function ae(){const Ce=O[U];Ce!==void 0&&Ce.type!==void 0&&(n.bindTexture(Ce.type,null),Ce.type=void 0,Ce.texture=void 0)}function Y(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function _e(){try{n.texSubImage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Fe(){try{n.texSubImage3D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Le(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Re(){try{n.texStorage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function rt(){try{n.texStorage3D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Ee(){try{n.texImage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ve(){try{n.texImage3D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function $e(Ce){oe.equals(Ce)===!1&&(n.scissor(Ce.x,Ce.y,Ce.z,Ce.w),oe.copy(Ce))}function gt(Ce){se.equals(Ce)===!1&&(n.viewport(Ce.x,Ce.y,Ce.z,Ce.w),se.copy(Ce))}function St(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},U=null,O={},h={},f=new WeakMap,m=[],g=null,x=!1,E=null,_=null,v=null,C=null,D=null,V=null,H=null,R=!1,j=null,te=null,$=null,z=null,I=null,oe.set(0,0,n.canvas.width,n.canvas.height),se.set(0,0,n.canvas.width,n.canvas.height),s.reset(),l.reset(),c.reset()}return{buffers:{color:s,depth:l,stencil:c},enable:Te,disable:ye,bindFramebuffer:We,drawBuffers:at,useProgram:Ke,setBlending:Ie,setMaterial:Ue,setFlipSided:k,setCullFace:De,setLineWidth:we,setPolygonOffset:le,setScissorTest:ne,activeTexture:fe,bindTexture:He,unbindTexture:ae,compressedTexImage2D:Y,texImage2D:Ee,texImage3D:ve,texStorage2D:Re,texStorage3D:rt,texSubImage2D:_e,texSubImage3D:Fe,compressedTexSubImage2D:Le,scissor:$e,viewport:gt,reset:St}}function GJ(n,e,t,r,i,a,o){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,d=i.maxTextureSize,h=i.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=new WeakMap;let g;const x=new WeakMap;let E=!1;try{E=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(ae,Y){return E?new OffscreenCanvas(ae,Y):Xh("canvas")}function v(ae,Y,_e,Fe){let Le=1;if((ae.width>Fe||ae.height>Fe)&&(Le=Fe/Math.max(ae.width,ae.height)),Le<1||Y===!0)if(typeof HTMLImageElement<"u"&&ae instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ae instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ae instanceof ImageBitmap){const Re=Y?d8:Math.floor,rt=Re(Le*ae.width),Ee=Re(Le*ae.height);g===void 0&&(g=_(rt,Ee));const ve=_e?_(rt,Ee):g;return ve.width=rt,ve.height=Ee,ve.getContext("2d").drawImage(ae,0,0,rt,Ee),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ae.width+"x"+ae.height+") to ("+rt+"x"+Ee+")."),ve}else return"data"in ae&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ae.width+"x"+ae.height+")."),ae;return ae}function C(ae){return ny(ae.width)&&ny(ae.height)}function D(ae){return s?!1:ae.wrapS!==sa||ae.wrapT!==sa||ae.minFilter!==Kr&&ae.minFilter!==pi}function V(ae,Y){return ae.generateMipmaps&&Y&&ae.minFilter!==Kr&&ae.minFilter!==pi}function H(ae){n.generateMipmap(ae)}function R(ae,Y,_e,Fe,Le=!1){if(s===!1)return Y;if(ae!==null){if(n[ae]!==void 0)return n[ae];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ae+"'")}let Re=Y;return Y===6403&&(_e===5126&&(Re=33326),_e===5131&&(Re=33325),_e===5121&&(Re=33321)),Y===33319&&(_e===5126&&(Re=33328),_e===5131&&(Re=33327),_e===5121&&(Re=33323)),Y===6408&&(_e===5126&&(Re=34836),_e===5131&&(Re=34842),_e===5121&&(Re=Fe===Qn&&Le===!1?35907:32856),_e===32819&&(Re=32854),_e===32820&&(Re=32855)),(Re===33325||Re===33326||Re===33327||Re===33328||Re===34842||Re===34836)&&e.get("EXT_color_buffer_float"),Re}function j(ae,Y,_e){return V(ae,_e)===!0||ae.isFramebufferTexture&&ae.minFilter!==Kr&&ae.minFilter!==pi?Math.log2(Math.max(Y.width,Y.height))+1:ae.mipmaps!==void 0&&ae.mipmaps.length>0?ae.mipmaps.length:ae.isCompressedTexture&&Array.isArray(ae.image)?Y.mipmaps.length:1}function te(ae){return ae===Kr||ae===$w||ae===ey?9728:9729}function $(ae){const Y=ae.target;Y.removeEventListener("dispose",$),I(Y),Y.isVideoTexture&&m.delete(Y)}function z(ae){const Y=ae.target;Y.removeEventListener("dispose",z),P(Y)}function I(ae){const Y=r.get(ae);if(Y.__webglInit===void 0)return;const _e=ae.source,Fe=x.get(_e);if(Fe){const Le=Fe[Y.__cacheKey];Le.usedTimes--,Le.usedTimes===0&&q(ae),Object.keys(Fe).length===0&&x.delete(_e)}r.remove(ae)}function q(ae){const Y=r.get(ae);n.deleteTexture(Y.__webglTexture);const _e=ae.source,Fe=x.get(_e);delete Fe[Y.__cacheKey],o.memory.textures--}function P(ae){const Y=ae.texture,_e=r.get(ae),Fe=r.get(Y);if(Fe.__webglTexture!==void 0&&(n.deleteTexture(Fe.__webglTexture),o.memory.textures--),ae.depthTexture&&ae.depthTexture.dispose(),ae.isWebGLCubeRenderTarget)for(let Le=0;Le<6;Le++)n.deleteFramebuffer(_e.__webglFramebuffer[Le]),_e.__webglDepthbuffer&&n.deleteRenderbuffer(_e.__webglDepthbuffer[Le]);else n.deleteFramebuffer(_e.__webglFramebuffer),_e.__webglDepthbuffer&&n.deleteRenderbuffer(_e.__webglDepthbuffer),_e.__webglMultisampledFramebuffer&&n.deleteFramebuffer(_e.__webglMultisampledFramebuffer),_e.__webglColorRenderbuffer&&n.deleteRenderbuffer(_e.__webglColorRenderbuffer),_e.__webglDepthRenderbuffer&&n.deleteRenderbuffer(_e.__webglDepthRenderbuffer);if(ae.isWebGLMultipleRenderTargets)for(let Le=0,Re=Y.length;Le<Re;Le++){const rt=r.get(Y[Le]);rt.__webglTexture&&(n.deleteTexture(rt.__webglTexture),o.memory.textures--),r.remove(Y[Le])}r.remove(Y),r.remove(ae)}let ee=0;function ce(){ee=0}function U(){const ae=ee;return ae>=l&&console.warn("THREE.WebGLTextures: Trying to use "+ae+" texture units while this GPU supports only "+l),ee+=1,ae}function O(ae){const Y=[];return Y.push(ae.wrapS),Y.push(ae.wrapT),Y.push(ae.magFilter),Y.push(ae.minFilter),Y.push(ae.anisotropy),Y.push(ae.internalFormat),Y.push(ae.format),Y.push(ae.type),Y.push(ae.generateMipmaps),Y.push(ae.premultiplyAlpha),Y.push(ae.flipY),Y.push(ae.unpackAlignment),Y.push(ae.encoding),Y.join()}function G(ae,Y){const _e=r.get(ae);if(ae.isVideoTexture&&fe(ae),ae.isRenderTargetTexture===!1&&ae.version>0&&_e.__version!==ae.version){const Fe=ae.image;if(Fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{We(_e,ae,Y);return}}t.activeTexture(33984+Y),t.bindTexture(3553,_e.__webglTexture)}function re(ae,Y){const _e=r.get(ae);if(ae.version>0&&_e.__version!==ae.version){We(_e,ae,Y);return}t.activeTexture(33984+Y),t.bindTexture(35866,_e.__webglTexture)}function oe(ae,Y){const _e=r.get(ae);if(ae.version>0&&_e.__version!==ae.version){We(_e,ae,Y);return}t.activeTexture(33984+Y),t.bindTexture(32879,_e.__webglTexture)}function se(ae,Y){const _e=r.get(ae);if(ae.version>0&&_e.__version!==ae.version){at(_e,ae,Y);return}t.activeTexture(33984+Y),t.bindTexture(34067,_e.__webglTexture)}const be={[Nh]:10497,[sa]:33071,[Uh]:33648},Be={[Kr]:9728,[$w]:9984,[ey]:9986,[pi]:9729,[O6]:9985,[Bp]:9987};function Te(ae,Y,_e){if(_e?(n.texParameteri(ae,10242,be[Y.wrapS]),n.texParameteri(ae,10243,be[Y.wrapT]),(ae===32879||ae===35866)&&n.texParameteri(ae,32882,be[Y.wrapR]),n.texParameteri(ae,10240,Be[Y.magFilter]),n.texParameteri(ae,10241,Be[Y.minFilter])):(n.texParameteri(ae,10242,33071),n.texParameteri(ae,10243,33071),(ae===32879||ae===35866)&&n.texParameteri(ae,32882,33071),(Y.wrapS!==sa||Y.wrapT!==sa)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(ae,10240,te(Y.magFilter)),n.texParameteri(ae,10241,te(Y.minFilter)),Y.minFilter!==Kr&&Y.minFilter!==pi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Fe=e.get("EXT_texture_filter_anisotropic");if(Y.type===wc&&e.has("OES_texture_float_linear")===!1||s===!1&&Y.type===H1&&e.has("OES_texture_half_float_linear")===!1)return;(Y.anisotropy>1||r.get(Y).__currentAnisotropy)&&(n.texParameterf(ae,Fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,i.getMaxAnisotropy())),r.get(Y).__currentAnisotropy=Y.anisotropy)}}function ye(ae,Y){let _e=!1;ae.__webglInit===void 0&&(ae.__webglInit=!0,Y.addEventListener("dispose",$));const Fe=Y.source;let Le=x.get(Fe);Le===void 0&&(Le={},x.set(Fe,Le));const Re=O(Y);if(Re!==ae.__cacheKey){Le[Re]===void 0&&(Le[Re]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,_e=!0),Le[Re].usedTimes++;const rt=Le[ae.__cacheKey];rt!==void 0&&(Le[ae.__cacheKey].usedTimes--,rt.usedTimes===0&&q(Y)),ae.__cacheKey=Re,ae.__webglTexture=Le[Re].texture}return _e}function We(ae,Y,_e){let Fe=3553;Y.isDataArrayTexture&&(Fe=35866),Y.isData3DTexture&&(Fe=32879);const Le=ye(ae,Y),Re=Y.source;if(t.activeTexture(33984+_e),t.bindTexture(Fe,ae.__webglTexture),Re.version!==Re.__currentVersion||Le===!0){n.pixelStorei(37440,Y.flipY),n.pixelStorei(37441,Y.premultiplyAlpha),n.pixelStorei(3317,Y.unpackAlignment),n.pixelStorei(37443,0);const rt=D(Y)&&C(Y.image)===!1;let Ee=v(Y.image,rt,!1,d);Ee=He(Y,Ee);const ve=C(Ee)||s,$e=a.convert(Y.format,Y.encoding);let gt=a.convert(Y.type),St=R(Y.internalFormat,$e,gt,Y.encoding,Y.isVideoTexture);Te(Fe,Y,ve);let Ce;const Ft=Y.mipmaps,ht=s&&Y.isVideoTexture!==!0,Nt=ae.__version===void 0,Je=j(Y,Ee,ve);if(Y.isDepthTexture)St=6402,s?Y.type===wc?St=36012:Y.type===Mg?St=33190:Y.type===z1?St=35056:St=33189:Y.type===wc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Y.format===Pc&&St===6402&&Y.type!==jh&&Y.type!==Mg&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Y.type=jh,gt=a.convert(Y.type)),Y.format===lA&&St===6402&&(St=34041,Y.type!==z1&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Y.type=z1,gt=a.convert(Y.type))),ht&&Nt?t.texStorage2D(3553,1,St,Ee.width,Ee.height):t.texImage2D(3553,0,St,Ee.width,Ee.height,0,$e,gt,null);else if(Y.isDataTexture)if(Ft.length>0&&ve){ht&&Nt&&t.texStorage2D(3553,Je,St,Ft[0].width,Ft[0].height);for(let mt=0,Wt=Ft.length;mt<Wt;mt++)Ce=Ft[mt],ht?t.texSubImage2D(3553,mt,0,0,Ce.width,Ce.height,$e,gt,Ce.data):t.texImage2D(3553,mt,St,Ce.width,Ce.height,0,$e,gt,Ce.data);Y.generateMipmaps=!1}else ht?(Nt&&t.texStorage2D(3553,Je,St,Ee.width,Ee.height),t.texSubImage2D(3553,0,0,0,Ee.width,Ee.height,$e,gt,Ee.data)):t.texImage2D(3553,0,St,Ee.width,Ee.height,0,$e,gt,Ee.data);else if(Y.isCompressedTexture){ht&&Nt&&t.texStorage2D(3553,Je,St,Ft[0].width,Ft[0].height);for(let mt=0,Wt=Ft.length;mt<Wt;mt++)Ce=Ft[mt],Y.format!==Qi?$e!==null?ht?t.compressedTexSubImage2D(3553,mt,0,0,Ce.width,Ce.height,$e,Ce.data):t.compressedTexImage2D(3553,mt,St,Ce.width,Ce.height,0,Ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ht?t.texSubImage2D(3553,mt,0,0,Ce.width,Ce.height,$e,gt,Ce.data):t.texImage2D(3553,mt,St,Ce.width,Ce.height,0,$e,gt,Ce.data)}else if(Y.isDataArrayTexture)ht?(Nt&&t.texStorage3D(35866,Je,St,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(35866,0,0,0,0,Ee.width,Ee.height,Ee.depth,$e,gt,Ee.data)):t.texImage3D(35866,0,St,Ee.width,Ee.height,Ee.depth,0,$e,gt,Ee.data);else if(Y.isData3DTexture)ht?(Nt&&t.texStorage3D(32879,Je,St,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(32879,0,0,0,0,Ee.width,Ee.height,Ee.depth,$e,gt,Ee.data)):t.texImage3D(32879,0,St,Ee.width,Ee.height,Ee.depth,0,$e,gt,Ee.data);else if(Y.isFramebufferTexture)ht&&Nt?t.texStorage2D(3553,Je,St,Ee.width,Ee.height):t.texImage2D(3553,0,St,Ee.width,Ee.height,0,$e,gt,null);else if(Ft.length>0&&ve){ht&&Nt&&t.texStorage2D(3553,Je,St,Ft[0].width,Ft[0].height);for(let mt=0,Wt=Ft.length;mt<Wt;mt++)Ce=Ft[mt],ht?t.texSubImage2D(3553,mt,0,0,$e,gt,Ce):t.texImage2D(3553,mt,St,$e,gt,Ce);Y.generateMipmaps=!1}else ht?(Nt&&t.texStorage2D(3553,Je,St,Ee.width,Ee.height),t.texSubImage2D(3553,0,0,0,$e,gt,Ee)):t.texImage2D(3553,0,St,$e,gt,Ee);V(Y,ve)&&H(Fe),Re.__currentVersion=Re.version,Y.onUpdate&&Y.onUpdate(Y)}ae.__version=Y.version}function at(ae,Y,_e){if(Y.image.length!==6)return;const Fe=ye(ae,Y),Le=Y.source;if(t.activeTexture(33984+_e),t.bindTexture(34067,ae.__webglTexture),Le.version!==Le.__currentVersion||Fe===!0){n.pixelStorei(37440,Y.flipY),n.pixelStorei(37441,Y.premultiplyAlpha),n.pixelStorei(3317,Y.unpackAlignment),n.pixelStorei(37443,0);const Re=Y.isCompressedTexture||Y.image[0].isCompressedTexture,rt=Y.image[0]&&Y.image[0].isDataTexture,Ee=[];for(let mt=0;mt<6;mt++)!Re&&!rt?Ee[mt]=v(Y.image[mt],!1,!0,c):Ee[mt]=rt?Y.image[mt].image:Y.image[mt],Ee[mt]=He(Y,Ee[mt]);const ve=Ee[0],$e=C(ve)||s,gt=a.convert(Y.format,Y.encoding),St=a.convert(Y.type),Ce=R(Y.internalFormat,gt,St,Y.encoding),Ft=s&&Y.isVideoTexture!==!0,ht=ae.__version===void 0;let Nt=j(Y,ve,$e);Te(34067,Y,$e);let Je;if(Re){Ft&&ht&&t.texStorage2D(34067,Nt,Ce,ve.width,ve.height);for(let mt=0;mt<6;mt++){Je=Ee[mt].mipmaps;for(let Wt=0;Wt<Je.length;Wt++){const _t=Je[Wt];Y.format!==Qi?gt!==null?Ft?t.compressedTexSubImage2D(34069+mt,Wt,0,0,_t.width,_t.height,gt,_t.data):t.compressedTexImage2D(34069+mt,Wt,Ce,_t.width,_t.height,0,_t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ft?t.texSubImage2D(34069+mt,Wt,0,0,_t.width,_t.height,gt,St,_t.data):t.texImage2D(34069+mt,Wt,Ce,_t.width,_t.height,0,gt,St,_t.data)}}}else{Je=Y.mipmaps,Ft&&ht&&(Je.length>0&&Nt++,t.texStorage2D(34067,Nt,Ce,Ee[0].width,Ee[0].height));for(let mt=0;mt<6;mt++)if(rt){Ft?t.texSubImage2D(34069+mt,0,0,0,Ee[mt].width,Ee[mt].height,gt,St,Ee[mt].data):t.texImage2D(34069+mt,0,Ce,Ee[mt].width,Ee[mt].height,0,gt,St,Ee[mt].data);for(let Wt=0;Wt<Je.length;Wt++){const a0=Je[Wt].image[mt].image;Ft?t.texSubImage2D(34069+mt,Wt+1,0,0,a0.width,a0.height,gt,St,a0.data):t.texImage2D(34069+mt,Wt+1,Ce,a0.width,a0.height,0,gt,St,a0.data)}}else{Ft?t.texSubImage2D(34069+mt,0,0,0,gt,St,Ee[mt]):t.texImage2D(34069+mt,0,Ce,gt,St,Ee[mt]);for(let Wt=0;Wt<Je.length;Wt++){const _t=Je[Wt];Ft?t.texSubImage2D(34069+mt,Wt+1,0,0,gt,St,_t.image[mt]):t.texImage2D(34069+mt,Wt+1,Ce,gt,St,_t.image[mt])}}}V(Y,$e)&&H(34067),Le.__currentVersion=Le.version,Y.onUpdate&&Y.onUpdate(Y)}ae.__version=Y.version}function Ke(ae,Y,_e,Fe,Le){const Re=a.convert(_e.format,_e.encoding),rt=a.convert(_e.type),Ee=R(_e.internalFormat,Re,rt,_e.encoding);r.get(Y).__hasExternalTextures||(Le===32879||Le===35866?t.texImage3D(Le,0,Ee,Y.width,Y.height,Y.depth,0,Re,rt,null):t.texImage2D(Le,0,Ee,Y.width,Y.height,0,Re,rt,null)),t.bindFramebuffer(36160,ae),ne(Y)?f.framebufferTexture2DMultisampleEXT(36160,Fe,Le,r.get(_e).__webglTexture,0,le(Y)):n.framebufferTexture2D(36160,Fe,Le,r.get(_e).__webglTexture,0),t.bindFramebuffer(36160,null)}function tt(ae,Y,_e){if(n.bindRenderbuffer(36161,ae),Y.depthBuffer&&!Y.stencilBuffer){let Fe=33189;if(_e||ne(Y)){const Le=Y.depthTexture;Le&&Le.isDepthTexture&&(Le.type===wc?Fe=36012:Le.type===Mg&&(Fe=33190));const Re=le(Y);ne(Y)?f.renderbufferStorageMultisampleEXT(36161,Re,Fe,Y.width,Y.height):n.renderbufferStorageMultisample(36161,Re,Fe,Y.width,Y.height)}else n.renderbufferStorage(36161,Fe,Y.width,Y.height);n.framebufferRenderbuffer(36160,36096,36161,ae)}else if(Y.depthBuffer&&Y.stencilBuffer){const Fe=le(Y);_e&&ne(Y)===!1?n.renderbufferStorageMultisample(36161,Fe,35056,Y.width,Y.height):ne(Y)?f.renderbufferStorageMultisampleEXT(36161,Fe,35056,Y.width,Y.height):n.renderbufferStorage(36161,34041,Y.width,Y.height),n.framebufferRenderbuffer(36160,33306,36161,ae)}else{const Fe=Y.isWebGLMultipleRenderTargets===!0?Y.texture[0]:Y.texture,Le=a.convert(Fe.format,Fe.encoding),Re=a.convert(Fe.type),rt=R(Fe.internalFormat,Le,Re,Fe.encoding),Ee=le(Y);_e&&ne(Y)===!1?n.renderbufferStorageMultisample(36161,Ee,rt,Y.width,Y.height):ne(Y)?f.renderbufferStorageMultisampleEXT(36161,Ee,rt,Y.width,Y.height):n.renderbufferStorage(36161,rt,Y.width,Y.height)}n.bindRenderbuffer(36161,null)}function lt(ae,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,ae),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Y.depthTexture).__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),G(Y.depthTexture,0);const Fe=r.get(Y.depthTexture).__webglTexture,Le=le(Y);if(Y.depthTexture.format===Pc)ne(Y)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,Fe,0,Le):n.framebufferTexture2D(36160,36096,3553,Fe,0);else if(Y.depthTexture.format===lA)ne(Y)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,Fe,0,Le):n.framebufferTexture2D(36160,33306,3553,Fe,0);else throw new Error("Unknown depthTexture format")}function Ie(ae){const Y=r.get(ae),_e=ae.isWebGLCubeRenderTarget===!0;if(ae.depthTexture&&!Y.__autoAllocateDepthBuffer){if(_e)throw new Error("target.depthTexture not supported in Cube render targets");lt(Y.__webglFramebuffer,ae)}else if(_e){Y.__webglDepthbuffer=[];for(let Fe=0;Fe<6;Fe++)t.bindFramebuffer(36160,Y.__webglFramebuffer[Fe]),Y.__webglDepthbuffer[Fe]=n.createRenderbuffer(),tt(Y.__webglDepthbuffer[Fe],ae,!1)}else t.bindFramebuffer(36160,Y.__webglFramebuffer),Y.__webglDepthbuffer=n.createRenderbuffer(),tt(Y.__webglDepthbuffer,ae,!1);t.bindFramebuffer(36160,null)}function Ue(ae,Y,_e){const Fe=r.get(ae);Y!==void 0&&Ke(Fe.__webglFramebuffer,ae,ae.texture,36064,3553),_e!==void 0&&Ie(ae)}function k(ae){const Y=ae.texture,_e=r.get(ae),Fe=r.get(Y);ae.addEventListener("dispose",z),ae.isWebGLMultipleRenderTargets!==!0&&(Fe.__webglTexture===void 0&&(Fe.__webglTexture=n.createTexture()),Fe.__version=Y.version,o.memory.textures++);const Le=ae.isWebGLCubeRenderTarget===!0,Re=ae.isWebGLMultipleRenderTargets===!0,rt=C(ae)||s;if(Le){_e.__webglFramebuffer=[];for(let Ee=0;Ee<6;Ee++)_e.__webglFramebuffer[Ee]=n.createFramebuffer()}else if(_e.__webglFramebuffer=n.createFramebuffer(),Re)if(i.drawBuffers){const Ee=ae.texture;for(let ve=0,$e=Ee.length;ve<$e;ve++){const gt=r.get(Ee[ve]);gt.__webglTexture===void 0&&(gt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(s&&ae.samples>0&&ne(ae)===!1){_e.__webglMultisampledFramebuffer=n.createFramebuffer(),_e.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,_e.__webglColorRenderbuffer);const Ee=a.convert(Y.format,Y.encoding),ve=a.convert(Y.type),$e=R(Y.internalFormat,Ee,ve,Y.encoding),gt=le(ae);n.renderbufferStorageMultisample(36161,gt,$e,ae.width,ae.height),t.bindFramebuffer(36160,_e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,_e.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),ae.depthBuffer&&(_e.__webglDepthRenderbuffer=n.createRenderbuffer(),tt(_e.__webglDepthRenderbuffer,ae,!0)),t.bindFramebuffer(36160,null)}if(Le){t.bindTexture(34067,Fe.__webglTexture),Te(34067,Y,rt);for(let Ee=0;Ee<6;Ee++)Ke(_e.__webglFramebuffer[Ee],ae,Y,36064,34069+Ee);V(Y,rt)&&H(34067),t.unbindTexture()}else if(Re){const Ee=ae.texture;for(let ve=0,$e=Ee.length;ve<$e;ve++){const gt=Ee[ve],St=r.get(gt);t.bindTexture(3553,St.__webglTexture),Te(3553,gt,rt),Ke(_e.__webglFramebuffer,ae,gt,36064+ve,3553),V(gt,rt)&&H(3553)}t.unbindTexture()}else{let Ee=3553;(ae.isWebGL3DRenderTarget||ae.isWebGLArrayRenderTarget)&&(s?Ee=ae.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ee,Fe.__webglTexture),Te(Ee,Y,rt),Ke(_e.__webglFramebuffer,ae,Y,36064,Ee),V(Y,rt)&&H(Ee),t.unbindTexture()}ae.depthBuffer&&Ie(ae)}function De(ae){const Y=C(ae)||s,_e=ae.isWebGLMultipleRenderTargets===!0?ae.texture:[ae.texture];for(let Fe=0,Le=_e.length;Fe<Le;Fe++){const Re=_e[Fe];if(V(Re,Y)){const rt=ae.isWebGLCubeRenderTarget?34067:3553,Ee=r.get(Re).__webglTexture;t.bindTexture(rt,Ee),H(rt),t.unbindTexture()}}}function we(ae){if(s&&ae.samples>0&&ne(ae)===!1){const Y=ae.width,_e=ae.height;let Fe=16384;const Le=[36064],Re=ae.stencilBuffer?33306:36096;ae.depthBuffer&&Le.push(Re);const rt=r.get(ae),Ee=rt.__ignoreDepthValues!==void 0?rt.__ignoreDepthValues:!1;Ee===!1&&(ae.depthBuffer&&(Fe|=256),ae.stencilBuffer&&(Fe|=1024)),t.bindFramebuffer(36008,rt.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,rt.__webglFramebuffer),Ee===!0&&(n.invalidateFramebuffer(36008,[Re]),n.invalidateFramebuffer(36009,[Re])),n.blitFramebuffer(0,0,Y,_e,0,0,Y,_e,Fe,9728),n.invalidateFramebuffer(36008,Le),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,rt.__webglMultisampledFramebuffer)}}function le(ae){return Math.min(h,ae.samples)}function ne(ae){const Y=r.get(ae);return s&&ae.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function fe(ae){const Y=o.render.frame;m.get(ae)!==Y&&(m.set(ae,Y),ae.update())}function He(ae,Y){const _e=ae.encoding,Fe=ae.format,Le=ae.type;return ae.isCompressedTexture===!0||ae.isVideoTexture===!0||ae.format===ty||_e!==mu&&(_e===Qn?s===!1?e.has("EXT_sRGB")===!0&&Fe===Qi?(ae.format=ty,ae.minFilter=pi,ae.generateMipmaps=!1):Y=$c.sRGBToLinear(Y):(Fe!==Qi||Le!==Uc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",_e)),Y}this.allocateTextureUnit=U,this.resetTextureUnits=ce,this.setTexture2D=G,this.setTexture2DArray=re,this.setTexture3D=oe,this.setTextureCube=se,this.rebindTextures=Ue,this.setupRenderTarget=k,this.updateRenderTargetMipmap=De,this.updateMultisampleRenderTarget=we,this.setupDepthRenderbuffer=Ie,this.setupFrameBufferTexture=Ke,this.useMultisampledRTT=ne}function HJ(n,e,t){const r=t.isWebGL2;function i(a,o=null){let s;if(a===Uc)return 5121;if(a===FX)return 32819;if(a===TX)return 32820;if(a===CX)return 5120;if(a===VX)return 5122;if(a===jh)return 5123;if(a===DX)return 5124;if(a===Mg)return 5125;if(a===wc)return 5126;if(a===H1)return r?5131:(s=e.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(a===bX)return 6406;if(a===Qi)return 6408;if(a===RX)return 6409;if(a===LX)return 6410;if(a===Pc)return 6402;if(a===lA)return 34041;if(a===BX)return 6403;if(a===PX)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(a===ty)return s=e.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(a===MX)return 36244;if(a===IX)return 33319;if(a===OX)return 33320;if(a===kX)return 36249;if(a===bx||a===Px||a===Rx||a===Lx)if(o===Qn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(a===bx)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===Px)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===Rx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===Lx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(a===bx)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===Px)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===Rx)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===Lx)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===N3||a===U3||a===j3||a===G3)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(a===N3)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===U3)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===j3)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===G3)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===NX)return s=e.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===H3||a===z3)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(a===H3)return o===Qn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(a===z3)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===W3||a===X3||a===K3||a===Y3||a===q3||a===Q3||a===J3||a===Z3||a===$3||a===eT||a===tT||a===nT||a===rT||a===iT)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(a===W3)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===X3)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===K3)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===Y3)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===q3)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===Q3)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===J3)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===Z3)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===$3)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===eT)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===tT)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===nT)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===rT)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===iT)return o===Qn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===aT)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(a===aT)return o===Qn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(a===z1)return r?34042:(s=e.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}class nI extends mi{constructor(e=[]){super(),this.cameras=e}}nI.prototype.isArrayCamera=!0;class oh extends nn{constructor(){super(),this.type="Group"}}oh.prototype.isGroup=!0;const zJ={type:"move"};class sv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new oh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new oh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Se,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Se),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new oh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Se,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Se),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,a=null,o=null;const s=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(s!==null&&(i=t.getPose(e.targetRaySpace,r),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(zJ))),c&&e.hand){o=!0;for(const x of e.hand.values()){const E=t.getJointPose(x,r);if(c.joints[x.jointName]===void 0){const v=new oh;v.matrixAutoUpdate=!1,v.visible=!1,c.joints[x.jointName]=v,c.add(v)}const _=c.joints[x.jointName];E!==null&&(_.matrix.fromArray(E.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=E.radius),_.visible=E!==null}const d=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],f=d.position.distanceTo(h.position),m=.02,g=.005;c.inputState.pinching&&f>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=a!==null),c!==null&&(c.visible=o!==null),this}}class rI extends qr{constructor(e,t,r,i,a,o,s,l,c,d){if(d=d!==void 0?d:Pc,d!==Pc&&d!==lA)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===Pc&&(r=jh),r===void 0&&d===lA&&(r=z1),super(null,i,a,o,s,l,d,r,c),this.image={width:e,height:t},this.magFilter=s!==void 0?s:Kr,this.minFilter=l!==void 0?l:Kr,this.flipY=!1,this.generateMipmaps=!1}}rI.prototype.isDepthTexture=!0;class WJ extends ul{constructor(e,t){super();const r=this;let i=null,a=1,o=null,s="local-floor",l=null,c=null,d=null,h=null,f=null;const m=t.getContextAttributes();let g=null,x=null;const E=[],_=new Map,v=new mi;v.layers.enable(1),v.viewport=new xn;const C=new mi;C.layers.enable(2),C.viewport=new xn;const D=[v,C],V=new nI;V.layers.enable(1),V.layers.enable(2);let H=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let G=E[O];return G===void 0&&(G=new sv,E[O]=G),G.getTargetRaySpace()},this.getControllerGrip=function(O){let G=E[O];return G===void 0&&(G=new sv,E[O]=G),G.getGripSpace()},this.getHand=function(O){let G=E[O];return G===void 0&&(G=new sv,E[O]=G),G.getHandSpace()};function j(O){const G=_.get(O.inputSource);G&&G.dispatchEvent({type:O.type,data:O.inputSource})}function te(){_.forEach(function(O,G){O.disconnect(G)}),_.clear(),H=null,R=null,e.setRenderTarget(g),h=null,d=null,c=null,i=null,x=null,U.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(O){a=O,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){s=O,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return c},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(O){if(i=O,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",j),i.addEventListener("selectstart",j),i.addEventListener("selectend",j),i.addEventListener("squeeze",j),i.addEventListener("squeezestart",j),i.addEventListener("squeezeend",j),i.addEventListener("end",te),i.addEventListener("inputsourceschange",$),m.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const G={antialias:i.renderState.layers===void 0?m.antialias:!0,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:a};h=new XRWebGLLayer(i,t,G),i.updateRenderState({baseLayer:h}),x=new Ta(h.framebufferWidth,h.framebufferHeight,{format:Qi,type:Uc,encoding:e.outputEncoding})}else{let G=null,re=null,oe=null;m.depth&&(oe=m.stencil?35056:33190,G=m.stencil?lA:Pc,re=m.stencil?z1:jh);const se={colorFormat:e.outputEncoding===Qn?35907:32856,depthFormat:oe,scaleFactor:a};c=new XRWebGLBinding(i,t),d=c.createProjectionLayer(se),i.updateRenderState({layers:[d]}),x=new Ta(d.textureWidth,d.textureHeight,{format:Qi,type:Uc,depthTexture:new rI(d.textureWidth,d.textureHeight,re,void 0,void 0,void 0,void 0,void 0,void 0,G),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0});const be=e.properties.get(x);be.__ignoreDepthValues=d.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(1),o=await i.requestReferenceSpace(s),U.setContext(i),U.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function $(O){const G=i.inputSources;for(let re=0;re<E.length;re++)_.set(G[re],E[re]);for(let re=0;re<O.removed.length;re++){const oe=O.removed[re],se=_.get(oe);se&&(se.dispatchEvent({type:"disconnected",data:oe}),_.delete(oe))}for(let re=0;re<O.added.length;re++){const oe=O.added[re],se=_.get(oe);se&&se.dispatchEvent({type:"connected",data:oe})}}const z=new Se,I=new Se;function q(O,G,re){z.setFromMatrixPosition(G.matrixWorld),I.setFromMatrixPosition(re.matrixWorld);const oe=z.distanceTo(I),se=G.projectionMatrix.elements,be=re.projectionMatrix.elements,Be=se[14]/(se[10]-1),Te=se[14]/(se[10]+1),ye=(se[9]+1)/se[5],We=(se[9]-1)/se[5],at=(se[8]-1)/se[0],Ke=(be[8]+1)/be[0],tt=Be*at,lt=Be*Ke,Ie=oe/(-at+Ke),Ue=Ie*-at;G.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(Ue),O.translateZ(Ie),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert();const k=Be+Ie,De=Te+Ie,we=tt-Ue,le=lt+(oe-Ue),ne=ye*Te/De*k,fe=We*Te/De*k;O.projectionMatrix.makePerspective(we,le,ne,fe,k,De)}function P(O,G){G===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(G.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(i===null)return;V.near=C.near=v.near=O.near,V.far=C.far=v.far=O.far,(H!==V.near||R!==V.far)&&(i.updateRenderState({depthNear:V.near,depthFar:V.far}),H=V.near,R=V.far);const G=O.parent,re=V.cameras;P(V,G);for(let se=0;se<re.length;se++)P(re[se],G);V.matrixWorld.decompose(V.position,V.quaternion,V.scale),O.position.copy(V.position),O.quaternion.copy(V.quaternion),O.scale.copy(V.scale),O.matrix.copy(V.matrix),O.matrixWorld.copy(V.matrixWorld);const oe=O.children;for(let se=0,be=oe.length;se<be;se++)oe[se].updateMatrixWorld(!0);re.length===2?q(V,v,C):V.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return V},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(h!==null)return h.fixedFoveation},this.setFoveation=function(O){d!==null&&(d.fixedFoveation=O),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=O)};let ee=null;function ce(O,G){if(l=G.getViewerPose(o),f=G,l!==null){const oe=l.views;h!==null&&(e.setRenderTargetFramebuffer(x,h.framebuffer),e.setRenderTarget(x));let se=!1;oe.length!==V.cameras.length&&(V.cameras.length=0,se=!0);for(let be=0;be<oe.length;be++){const Be=oe[be];let Te=null;if(h!==null)Te=h.getViewport(Be);else{const We=c.getViewSubImage(d,Be);Te=We.viewport,be===0&&(e.setRenderTargetTextures(x,We.colorTexture,d.ignoreDepthValues?void 0:We.depthStencilTexture),e.setRenderTarget(x))}const ye=D[be];ye.matrix.fromArray(Be.transform.matrix),ye.projectionMatrix.fromArray(Be.projectionMatrix),ye.viewport.set(Te.x,Te.y,Te.width,Te.height),be===0&&V.matrix.copy(ye.matrix),se===!0&&V.cameras.push(ye)}}const re=i.inputSources;for(let oe=0;oe<E.length;oe++){const se=E[oe],be=re[oe];se.update(be,G,o)}ee&&ee(O,G),f=null}const U=new K6;U.setAnimationLoop(ce),this.setAnimationLoop=function(O){ee=O},this.dispose=function(){}}}function XJ(n){function e(_,v){_.fogColor.value.copy(v.color),v.isFog?(_.fogNear.value=v.near,_.fogFar.value=v.far):v.isFogExp2&&(_.fogDensity.value=v.density)}function t(_,v,C,D,V){v.isMeshBasicMaterial?r(_,v):v.isMeshLambertMaterial?(r(_,v),l(_,v)):v.isMeshToonMaterial?(r(_,v),d(_,v)):v.isMeshPhongMaterial?(r(_,v),c(_,v)):v.isMeshStandardMaterial?(r(_,v),v.isMeshPhysicalMaterial?f(_,v,V):h(_,v)):v.isMeshMatcapMaterial?(r(_,v),m(_,v)):v.isMeshDepthMaterial?(r(_,v),g(_,v)):v.isMeshDistanceMaterial?(r(_,v),x(_,v)):v.isMeshNormalMaterial?(r(_,v),E(_,v)):v.isLineBasicMaterial?(i(_,v),v.isLineDashedMaterial&&a(_,v)):v.isPointsMaterial?o(_,v,C,D):v.isSpriteMaterial?s(_,v):v.isShadowMaterial?(_.color.value.copy(v.color),_.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function r(_,v){_.opacity.value=v.opacity,v.color&&_.diffuse.value.copy(v.color),v.emissive&&_.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(_.map.value=v.map),v.alphaMap&&(_.alphaMap.value=v.alphaMap),v.specularMap&&(_.specularMap.value=v.specularMap),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest);const C=n.get(v).envMap;C&&(_.envMap.value=C,_.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=v.reflectivity,_.ior.value=v.ior,_.refractionRatio.value=v.refractionRatio),v.lightMap&&(_.lightMap.value=v.lightMap,_.lightMapIntensity.value=v.lightMapIntensity),v.aoMap&&(_.aoMap.value=v.aoMap,_.aoMapIntensity.value=v.aoMapIntensity);let D;v.map?D=v.map:v.specularMap?D=v.specularMap:v.displacementMap?D=v.displacementMap:v.normalMap?D=v.normalMap:v.bumpMap?D=v.bumpMap:v.roughnessMap?D=v.roughnessMap:v.metalnessMap?D=v.metalnessMap:v.alphaMap?D=v.alphaMap:v.emissiveMap?D=v.emissiveMap:v.clearcoatMap?D=v.clearcoatMap:v.clearcoatNormalMap?D=v.clearcoatNormalMap:v.clearcoatRoughnessMap?D=v.clearcoatRoughnessMap:v.specularIntensityMap?D=v.specularIntensityMap:v.specularColorMap?D=v.specularColorMap:v.transmissionMap?D=v.transmissionMap:v.thicknessMap?D=v.thicknessMap:v.sheenColorMap?D=v.sheenColorMap:v.sheenRoughnessMap&&(D=v.sheenRoughnessMap),D!==void 0&&(D.isWebGLRenderTarget&&(D=D.texture),D.matrixAutoUpdate===!0&&D.updateMatrix(),_.uvTransform.value.copy(D.matrix));let V;v.aoMap?V=v.aoMap:v.lightMap&&(V=v.lightMap),V!==void 0&&(V.isWebGLRenderTarget&&(V=V.texture),V.matrixAutoUpdate===!0&&V.updateMatrix(),_.uv2Transform.value.copy(V.matrix))}function i(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity}function a(_,v){_.dashSize.value=v.dashSize,_.totalSize.value=v.dashSize+v.gapSize,_.scale.value=v.scale}function o(_,v,C,D){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.size.value=v.size*C,_.scale.value=D*.5,v.map&&(_.map.value=v.map),v.alphaMap&&(_.alphaMap.value=v.alphaMap),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest);let V;v.map?V=v.map:v.alphaMap&&(V=v.alphaMap),V!==void 0&&(V.matrixAutoUpdate===!0&&V.updateMatrix(),_.uvTransform.value.copy(V.matrix))}function s(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.rotation.value=v.rotation,v.map&&(_.map.value=v.map),v.alphaMap&&(_.alphaMap.value=v.alphaMap),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest);let C;v.map?C=v.map:v.alphaMap&&(C=v.alphaMap),C!==void 0&&(C.matrixAutoUpdate===!0&&C.updateMatrix(),_.uvTransform.value.copy(C.matrix))}function l(_,v){v.emissiveMap&&(_.emissiveMap.value=v.emissiveMap)}function c(_,v){_.specular.value.copy(v.specular),_.shininess.value=Math.max(v.shininess,1e-4),v.emissiveMap&&(_.emissiveMap.value=v.emissiveMap),v.bumpMap&&(_.bumpMap.value=v.bumpMap,_.bumpScale.value=v.bumpScale,v.side===Wr&&(_.bumpScale.value*=-1)),v.normalMap&&(_.normalMap.value=v.normalMap,_.normalScale.value.copy(v.normalScale),v.side===Wr&&_.normalScale.value.negate()),v.displacementMap&&(_.displacementMap.value=v.displacementMap,_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias)}function d(_,v){v.gradientMap&&(_.gradientMap.value=v.gradientMap),v.emissiveMap&&(_.emissiveMap.value=v.emissiveMap),v.bumpMap&&(_.bumpMap.value=v.bumpMap,_.bumpScale.value=v.bumpScale,v.side===Wr&&(_.bumpScale.value*=-1)),v.normalMap&&(_.normalMap.value=v.normalMap,_.normalScale.value.copy(v.normalScale),v.side===Wr&&_.normalScale.value.negate()),v.displacementMap&&(_.displacementMap.value=v.displacementMap,_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias)}function h(_,v){_.roughness.value=v.roughness,_.metalness.value=v.metalness,v.roughnessMap&&(_.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(_.metalnessMap.value=v.metalnessMap),v.emissiveMap&&(_.emissiveMap.value=v.emissiveMap),v.bumpMap&&(_.bumpMap.value=v.bumpMap,_.bumpScale.value=v.bumpScale,v.side===Wr&&(_.bumpScale.value*=-1)),v.normalMap&&(_.normalMap.value=v.normalMap,_.normalScale.value.copy(v.normalScale),v.side===Wr&&_.normalScale.value.negate()),v.displacementMap&&(_.displacementMap.value=v.displacementMap,_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias),n.get(v).envMap&&(_.envMapIntensity.value=v.envMapIntensity)}function f(_,v,C){h(_,v),_.ior.value=v.ior,v.sheen>0&&(_.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),_.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(_.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(_.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(_.clearcoat.value=v.clearcoat,_.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(_.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(_.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),_.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===Wr&&_.clearcoatNormalScale.value.negate())),v.transmission>0&&(_.transmission.value=v.transmission,_.transmissionSamplerMap.value=C.texture,_.transmissionSamplerSize.value.set(C.width,C.height),v.transmissionMap&&(_.transmissionMap.value=v.transmissionMap),_.thickness.value=v.thickness,v.thicknessMap&&(_.thicknessMap.value=v.thicknessMap),_.attenuationDistance.value=v.attenuationDistance,_.attenuationColor.value.copy(v.attenuationColor)),_.specularIntensity.value=v.specularIntensity,_.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(_.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(_.specularColorMap.value=v.specularColorMap)}function m(_,v){v.matcap&&(_.matcap.value=v.matcap),v.bumpMap&&(_.bumpMap.value=v.bumpMap,_.bumpScale.value=v.bumpScale,v.side===Wr&&(_.bumpScale.value*=-1)),v.normalMap&&(_.normalMap.value=v.normalMap,_.normalScale.value.copy(v.normalScale),v.side===Wr&&_.normalScale.value.negate()),v.displacementMap&&(_.displacementMap.value=v.displacementMap,_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias)}function g(_,v){v.displacementMap&&(_.displacementMap.value=v.displacementMap,_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias)}function x(_,v){v.displacementMap&&(_.displacementMap.value=v.displacementMap,_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias),_.referencePosition.value.copy(v.referencePosition),_.nearDistance.value=v.nearDistance,_.farDistance.value=v.farDistance}function E(_,v){v.bumpMap&&(_.bumpMap.value=v.bumpMap,_.bumpScale.value=v.bumpScale,v.side===Wr&&(_.bumpScale.value*=-1)),v.normalMap&&(_.normalMap.value=v.normalMap,_.normalScale.value.copy(v.normalScale),v.side===Wr&&_.normalScale.value.negate()),v.displacementMap&&(_.displacementMap.value=v.displacementMap,_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function KJ(){const n=Xh("canvas");return n.style.display="block",n}function fn(n={}){const e=n.canvas!==void 0?n.canvas:KJ(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,a=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,s=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",c=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let d;n.context!==void 0?d=t.getContextAttributes().alpha:d=n.alpha!==void 0?n.alpha:!1;let h=null,f=null;const m=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=mu,this.physicallyCorrectLights=!1,this.toneMapping=nu,this.toneMappingExposure=1;const x=this;let E=!1,_=0,v=0,C=null,D=-1,V=null;const H=new xn,R=new xn;let j=null,te=e.width,$=e.height,z=1,I=null,q=null;const P=new xn(0,0,te,$),ee=new xn(0,0,te,$);let ce=!1;const U=new g_;let O=!1,G=!1,re=null;const oe=new u0,se=new pt,be=new Se,Be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Te(){return C===null?z:1}let ye=t;function We(he,qe){for(let st=0;st<he.length;st++){const Ze=he[st],ft=e.getContext(Ze,qe);if(ft!==null)return ft}return null}try{const he={alpha:!0,depth:r,stencil:i,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:s,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${cE}`),e.addEventListener("webglcontextlost",Ce,!1),e.addEventListener("webglcontextrestored",Ft,!1),ye===null){const qe=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&qe.shift(),ye=We(qe,he),ye===null)throw We(qe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ye.getShaderPrecisionFormat===void 0&&(ye.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(he){throw console.error("THREE.WebGLRenderer: "+he.message),he}let at,Ke,tt,lt,Ie,Ue,k,De,we,le,ne,fe,He,ae,Y,_e,Fe,Le,Re,rt,Ee,ve,$e;function gt(){at=new dQ(ye),Ke=new aQ(ye,at,n),at.init(Ke),ve=new HJ(ye,at,Ke),tt=new jJ(ye,at,Ke),lt=new hQ,Ie=new bJ,Ue=new GJ(ye,at,tt,Ie,Ke,ve,lt),k=new sQ(x),De=new cQ(x),we=new FK(ye,Ke),$e=new rQ(ye,at,we,Ke),le=new AQ(ye,we,lt,$e),ne=new gQ(ye,le,we,lt),Re=new SQ(ye,Ke,Ue),_e=new oQ(Ie),fe=new TJ(x,k,De,at,Ke,$e,_e),He=new XJ(Ie),ae=new RJ,Y=new kJ(at,Ke),Le=new nQ(x,k,tt,ne,d,o),Fe=new tI(x,ne,Ke),rt=new iQ(ye,at,lt,Ke),Ee=new fQ(ye,at,lt,Ke),lt.programs=fe.programs,x.capabilities=Ke,x.extensions=at,x.properties=Ie,x.renderLists=ae,x.shadowMap=Fe,x.state=tt,x.info=lt}gt();const St=new WJ(x,ye);this.xr=St,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){const he=at.get("WEBGL_lose_context");he&&he.loseContext()},this.forceContextRestore=function(){const he=at.get("WEBGL_lose_context");he&&he.restoreContext()},this.getPixelRatio=function(){return z},this.setPixelRatio=function(he){he!==void 0&&(z=he,this.setSize(te,$,!1))},this.getSize=function(he){return he.set(te,$)},this.setSize=function(he,qe,st){if(St.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}te=he,$=qe,e.width=Math.floor(he*z),e.height=Math.floor(qe*z),st!==!1&&(e.style.width=he+"px",e.style.height=qe+"px"),this.setViewport(0,0,he,qe)},this.getDrawingBufferSize=function(he){return he.set(te*z,$*z).floor()},this.setDrawingBufferSize=function(he,qe,st){te=he,$=qe,z=st,e.width=Math.floor(he*st),e.height=Math.floor(qe*st),this.setViewport(0,0,he,qe)},this.getCurrentViewport=function(he){return he.copy(H)},this.getViewport=function(he){return he.copy(P)},this.setViewport=function(he,qe,st,Ze){he.isVector4?P.set(he.x,he.y,he.z,he.w):P.set(he,qe,st,Ze),tt.viewport(H.copy(P).multiplyScalar(z).floor())},this.getScissor=function(he){return he.copy(ee)},this.setScissor=function(he,qe,st,Ze){he.isVector4?ee.set(he.x,he.y,he.z,he.w):ee.set(he,qe,st,Ze),tt.scissor(R.copy(ee).multiplyScalar(z).floor())},this.getScissorTest=function(){return ce},this.setScissorTest=function(he){tt.setScissorTest(ce=he)},this.setOpaqueSort=function(he){I=he},this.setTransparentSort=function(he){q=he},this.getClearColor=function(he){return he.copy(Le.getClearColor())},this.setClearColor=function(){Le.setClearColor.apply(Le,arguments)},this.getClearAlpha=function(){return Le.getClearAlpha()},this.setClearAlpha=function(){Le.setClearAlpha.apply(Le,arguments)},this.clear=function(he=!0,qe=!0,st=!0){let Ze=0;he&&(Ze|=16384),qe&&(Ze|=256),st&&(Ze|=1024),ye.clear(Ze)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ce,!1),e.removeEventListener("webglcontextrestored",Ft,!1),ae.dispose(),Y.dispose(),Ie.dispose(),k.dispose(),De.dispose(),ne.dispose(),$e.dispose(),fe.dispose(),St.dispose(),St.removeEventListener("sessionstart",_t),St.removeEventListener("sessionend",a0),re&&(re.dispose(),re=null),v0.stop()};function Ce(he){he.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Ft(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const he=lt.autoReset,qe=Fe.enabled,st=Fe.autoUpdate,Ze=Fe.needsUpdate,ft=Fe.type;gt(),lt.autoReset=he,Fe.enabled=qe,Fe.autoUpdate=st,Fe.needsUpdate=Ze,Fe.type=ft}function ht(he){const qe=he.target;qe.removeEventListener("dispose",ht),Nt(qe)}function Nt(he){Je(he),Ie.remove(he)}function Je(he){const qe=Ie.get(he).programs;qe!==void 0&&(qe.forEach(function(st){fe.releaseProgram(st)}),he.isShaderMaterial&&fe.releaseShaderCache(he))}this.renderBufferDirect=function(he,qe,st,Ze,ft,t0){qe===null&&(qe=Be);const p0=ft.isMesh&&ft.matrixWorld.determinant()<0,E0=xi(he,qe,st,Ze,ft);tt.setMaterial(Ze,p0);let m0=st.index;const D0=st.attributes.position;if(m0===null){if(D0===void 0||D0.count===0)return}else if(m0.count===0)return;let f0=1;Ze.wireframe===!0&&(m0=le.getWireframeAttribute(st),f0=2),$e.setup(ft,Ze,E0,st,m0);let jt,z0=rt;m0!==null&&(jt=we.get(m0),z0=Ee,z0.setIndex(jt));const Jr=m0!==null?m0.count:D0.count,c0=st.drawRange.start*f0,ai=st.drawRange.count*f0,mn=t0!==null?t0.start*f0:0,C0=t0!==null?t0.count*f0:1/0,Ur=Math.max(c0,mn),e0=Math.min(Jr,c0+ai,mn+C0)-1,Rt=Math.max(0,e0-Ur+1);if(Rt!==0){if(ft.isMesh)Ze.wireframe===!0?(tt.setLineWidth(Ze.wireframeLinewidth*Te()),z0.setMode(1)):z0.setMode(4);else if(ft.isLine){let Dn=Ze.linewidth;Dn===void 0&&(Dn=1),tt.setLineWidth(Dn*Te()),ft.isLineSegments?z0.setMode(1):ft.isLineLoop?z0.setMode(2):z0.setMode(3)}else ft.isPoints?z0.setMode(0):ft.isSprite&&z0.setMode(4);if(ft.isInstancedMesh)z0.renderInstances(Ur,Rt,ft.count);else if(st.isInstancedBufferGeometry){const Dn=Math.min(st.instanceCount,st._maxInstanceCount);z0.renderInstances(Ur,Rt,Dn)}else z0.render(Ur,Rt)}},this.compile=function(he,qe){f=Y.get(he),f.init(),g.push(f),he.traverseVisible(function(st){st.isLight&&st.layers.test(qe.layers)&&(f.pushLight(st),st.castShadow&&f.pushShadow(st))}),f.setupLights(x.physicallyCorrectLights),he.traverse(function(st){const Ze=st.material;if(Ze)if(Array.isArray(Ze))for(let ft=0;ft<Ze.length;ft++){const t0=Ze[ft];$t(t0,he,st)}else $t(Ze,he,st)}),g.pop(),f=null};let mt=null;function Wt(he){mt&&mt(he)}function _t(){v0.stop()}function a0(){v0.start()}const v0=new K6;v0.setAnimationLoop(Wt),typeof window<"u"&&v0.setContext(window),this.setAnimationLoop=function(he){mt=he,St.setAnimationLoop(he),he===null?v0.stop():v0.start()},St.addEventListener("sessionstart",_t),St.addEventListener("sessionend",a0),this.render=function(he,qe){if(qe!==void 0&&qe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;he.autoUpdate===!0&&he.updateMatrixWorld(),qe.parent===null&&qe.updateMatrixWorld(),St.enabled===!0&&St.isPresenting===!0&&(St.cameraAutoUpdate===!0&&St.updateCamera(qe),qe=St.getCamera()),he.isScene===!0&&he.onBeforeRender(x,he,qe,C),f=Y.get(he,g.length),f.init(),g.push(f),oe.multiplyMatrices(qe.projectionMatrix,qe.matrixWorldInverse),U.setFromProjectionMatrix(oe),G=this.localClippingEnabled,O=_e.init(this.clippingPlanes,G,qe),h=ae.get(he,m.length),h.init(),m.push(h),M0(he,qe,0,x.sortObjects),h.finish(),x.sortObjects===!0&&h.sort(I,q),O===!0&&_e.beginShadows();const st=f.state.shadowsArray;if(Fe.render(st,he,qe),O===!0&&_e.endShadows(),this.info.autoReset===!0&&this.info.reset(),Le.render(h,he),f.setupLights(x.physicallyCorrectLights),qe.isArrayCamera){const Ze=qe.cameras;for(let ft=0,t0=Ze.length;ft<t0;ft++){const p0=Ze[ft];Vn(h,he,p0,p0.viewport)}}else Vn(h,he,qe);C!==null&&(Ue.updateMultisampleRenderTarget(C),Ue.updateRenderTargetMipmap(C)),he.isScene===!0&&he.onAfterRender(x,he,qe),$e.resetDefaultState(),D=-1,V=null,g.pop(),g.length>0?f=g[g.length-1]:f=null,m.pop(),m.length>0?h=m[m.length-1]:h=null};function M0(he,qe,st,Ze){if(he.visible===!1)return;if(he.layers.test(qe.layers)){if(he.isGroup)st=he.renderOrder;else if(he.isLOD)he.autoUpdate===!0&&he.update(qe);else if(he.isLight)f.pushLight(he),he.castShadow&&f.pushShadow(he);else if(he.isSprite){if(!he.frustumCulled||U.intersectsSprite(he)){Ze&&be.setFromMatrixPosition(he.matrixWorld).applyMatrix4(oe);const p0=ne.update(he),E0=he.material;E0.visible&&h.push(he,p0,E0,st,be.z,null)}}else if((he.isMesh||he.isLine||he.isPoints)&&(he.isSkinnedMesh&&he.skeleton.frame!==lt.render.frame&&(he.skeleton.update(),he.skeleton.frame=lt.render.frame),!he.frustumCulled||U.intersectsObject(he))){Ze&&be.setFromMatrixPosition(he.matrixWorld).applyMatrix4(oe);const p0=ne.update(he),E0=he.material;if(Array.isArray(E0)){const m0=p0.groups;for(let D0=0,f0=m0.length;D0<f0;D0++){const jt=m0[D0],z0=E0[jt.materialIndex];z0&&z0.visible&&h.push(he,p0,z0,st,be.z,jt)}}else E0.visible&&h.push(he,p0,E0,st,be.z,null)}}const t0=he.children;for(let p0=0,E0=t0.length;p0<E0;p0++)M0(t0[p0],qe,st,Ze)}function Vn(he,qe,st,Ze){const ft=he.opaque,t0=he.transmissive,p0=he.transparent;f.setupLightsView(st),t0.length>0&&Xn(ft,qe,st),Ze&&tt.viewport(H.copy(Ze)),ft.length>0&&ki(ft,qe,st),t0.length>0&&ki(t0,qe,st),p0.length>0&&ki(p0,qe,st),tt.buffers.depth.setTest(!0),tt.buffers.depth.setMask(!0),tt.buffers.color.setMask(!0),tt.setPolygonOffset(!1)}function Xn(he,qe,st){const Ze=Ke.isWebGL2;re===null&&(re=new Ta(1,1,{generateMipmaps:!0,type:ve.convert(H1)!==null?H1:Uc,minFilter:Bp,samples:Ze&&a===!0?4:0})),x.getDrawingBufferSize(se),Ze?re.setSize(se.x,se.y):re.setSize(d8(se.x),d8(se.y));const ft=x.getRenderTarget();x.setRenderTarget(re),x.clear();const t0=x.toneMapping;x.toneMapping=nu,ki(he,qe,st),x.toneMapping=t0,Ue.updateMultisampleRenderTarget(re),Ue.updateRenderTargetMipmap(re),x.setRenderTarget(ft)}function ki(he,qe,st){const Ze=qe.isScene===!0?qe.overrideMaterial:null;for(let ft=0,t0=he.length;ft<t0;ft++){const p0=he[ft],E0=p0.object,m0=p0.geometry,D0=Ze===null?p0.material:Ze,f0=p0.group;E0.layers.test(st.layers)&&ta(E0,qe,st,m0,D0,f0)}}function ta(he,qe,st,Ze,ft,t0){he.onBeforeRender(x,qe,st,Ze,ft,t0),he.modelViewMatrix.multiplyMatrices(st.matrixWorldInverse,he.matrixWorld),he.normalMatrix.getNormalMatrix(he.modelViewMatrix),ft.onBeforeRender(x,qe,st,Ze,he,t0),ft.transparent===!0&&ft.side===Nc?(ft.side=Wr,ft.needsUpdate=!0,x.renderBufferDirect(st,qe,Ze,ft,he,t0),ft.side=kh,ft.needsUpdate=!0,x.renderBufferDirect(st,qe,Ze,ft,he,t0),ft.side=Nc):x.renderBufferDirect(st,qe,Ze,ft,he,t0),he.onAfterRender(x,qe,st,Ze,ft,t0)}function $t(he,qe,st){qe.isScene!==!0&&(qe=Be);const Ze=Ie.get(he),ft=f.state.lights,t0=f.state.shadowsArray,p0=ft.state.version,E0=fe.getParameters(he,ft.state,t0,qe,st),m0=fe.getProgramCacheKey(E0);let D0=Ze.programs;Ze.environment=he.isMeshStandardMaterial?qe.environment:null,Ze.fog=qe.fog,Ze.envMap=(he.isMeshStandardMaterial?De:k).get(he.envMap||Ze.environment),D0===void 0&&(he.addEventListener("dispose",ht),D0=new Map,Ze.programs=D0);let f0=D0.get(m0);if(f0!==void 0){if(Ze.currentProgram===f0&&Ze.lightsStateVersion===p0)return Nr(he,E0),f0}else E0.uniforms=fe.getUniforms(he),he.onBuild(st,E0,x),he.onBeforeCompile(E0,x),f0=fe.acquireProgram(E0,m0),D0.set(m0,f0),Ze.uniforms=E0.uniforms;const jt=Ze.uniforms;(!he.isShaderMaterial&&!he.isRawShaderMaterial||he.clipping===!0)&&(jt.clippingPlanes=_e.uniform),Nr(he,E0),Ze.needsLights=Q(he),Ze.lightsStateVersion=p0,Ze.needsLights&&(jt.ambientLightColor.value=ft.state.ambient,jt.lightProbe.value=ft.state.probe,jt.directionalLights.value=ft.state.directional,jt.directionalLightShadows.value=ft.state.directionalShadow,jt.spotLights.value=ft.state.spot,jt.spotLightShadows.value=ft.state.spotShadow,jt.rectAreaLights.value=ft.state.rectArea,jt.ltc_1.value=ft.state.rectAreaLTC1,jt.ltc_2.value=ft.state.rectAreaLTC2,jt.pointLights.value=ft.state.point,jt.pointLightShadows.value=ft.state.pointShadow,jt.hemisphereLights.value=ft.state.hemi,jt.directionalShadowMap.value=ft.state.directionalShadowMap,jt.directionalShadowMatrix.value=ft.state.directionalShadowMatrix,jt.spotShadowMap.value=ft.state.spotShadowMap,jt.spotShadowMatrix.value=ft.state.spotShadowMatrix,jt.pointShadowMap.value=ft.state.pointShadowMap,jt.pointShadowMatrix.value=ft.state.pointShadowMatrix);const z0=f0.getUniforms(),Jr=ru.seqWithValue(z0.seq,jt);return Ze.currentProgram=f0,Ze.uniformsList=Jr,f0}function Nr(he,qe){const st=Ie.get(he);st.outputEncoding=qe.outputEncoding,st.instancing=qe.instancing,st.skinning=qe.skinning,st.morphTargets=qe.morphTargets,st.morphNormals=qe.morphNormals,st.morphColors=qe.morphColors,st.morphTargetsCount=qe.morphTargetsCount,st.numClippingPlanes=qe.numClippingPlanes,st.numIntersection=qe.numClipIntersection,st.vertexAlphas=qe.vertexAlphas,st.vertexTangents=qe.vertexTangents,st.toneMapping=qe.toneMapping}function xi(he,qe,st,Ze,ft){qe.isScene!==!0&&(qe=Be),Ue.resetTextureUnits();const t0=qe.fog,p0=Ze.isMeshStandardMaterial?qe.environment:null,E0=C===null?x.outputEncoding:C.isXRRenderTarget===!0?C.texture.encoding:mu,m0=(Ze.isMeshStandardMaterial?De:k).get(Ze.envMap||p0),D0=Ze.vertexColors===!0&&!!st.attributes.color&&st.attributes.color.itemSize===4,f0=!!Ze.normalMap&&!!st.attributes.tangent,jt=!!st.morphAttributes.position,z0=!!st.morphAttributes.normal,Jr=!!st.morphAttributes.color,c0=Ze.toneMapped?x.toneMapping:nu,ai=st.morphAttributes.position||st.morphAttributes.normal||st.morphAttributes.color,mn=ai!==void 0?ai.length:0,C0=Ie.get(Ze),Ur=f.state.lights;if(O===!0&&(G===!0||he!==V)){const b=he===V&&Ze.id===D;_e.setState(Ze,he,b)}let e0=!1;Ze.version===C0.__version?(C0.needsLights&&C0.lightsStateVersion!==Ur.state.version||C0.outputEncoding!==E0||ft.isInstancedMesh&&C0.instancing===!1||!ft.isInstancedMesh&&C0.instancing===!0||ft.isSkinnedMesh&&C0.skinning===!1||!ft.isSkinnedMesh&&C0.skinning===!0||C0.envMap!==m0||Ze.fog&&C0.fog!==t0||C0.numClippingPlanes!==void 0&&(C0.numClippingPlanes!==_e.numPlanes||C0.numIntersection!==_e.numIntersection)||C0.vertexAlphas!==D0||C0.vertexTangents!==f0||C0.morphTargets!==jt||C0.morphNormals!==z0||C0.morphColors!==Jr||C0.toneMapping!==c0||Ke.isWebGL2===!0&&C0.morphTargetsCount!==mn)&&(e0=!0):(e0=!0,C0.__version=Ze.version);let Rt=C0.currentProgram;e0===!0&&(Rt=$t(Ze,qe,ft));let Dn=!1,vi=!1,Vr=!1;const o0=Rt.getUniforms(),En=C0.uniforms;if(tt.useProgram(Rt.program)&&(Dn=!0,vi=!0,Vr=!0),Ze.id!==D&&(D=Ze.id,vi=!0),Dn||V!==he){if(o0.setValue(ye,"projectionMatrix",he.projectionMatrix),Ke.logarithmicDepthBuffer&&o0.setValue(ye,"logDepthBufFC",2/(Math.log(he.far+1)/Math.LN2)),V!==he&&(V=he,vi=!0,Vr=!0),Ze.isShaderMaterial||Ze.isMeshPhongMaterial||Ze.isMeshToonMaterial||Ze.isMeshStandardMaterial||Ze.envMap){const b=o0.map.cameraPosition;b!==void 0&&b.setValue(ye,be.setFromMatrixPosition(he.matrixWorld))}(Ze.isMeshPhongMaterial||Ze.isMeshToonMaterial||Ze.isMeshLambertMaterial||Ze.isMeshBasicMaterial||Ze.isMeshStandardMaterial||Ze.isShaderMaterial)&&o0.setValue(ye,"isOrthographic",he.isOrthographicCamera===!0),(Ze.isMeshPhongMaterial||Ze.isMeshToonMaterial||Ze.isMeshLambertMaterial||Ze.isMeshBasicMaterial||Ze.isMeshStandardMaterial||Ze.isShaderMaterial||Ze.isShadowMaterial||ft.isSkinnedMesh)&&o0.setValue(ye,"viewMatrix",he.matrixWorldInverse)}if(ft.isSkinnedMesh){o0.setOptional(ye,ft,"bindMatrix"),o0.setOptional(ye,ft,"bindMatrixInverse");const b=ft.skeleton;b&&(Ke.floatVertexTextures?(b.boneTexture===null&&b.computeBoneTexture(),o0.setValue(ye,"boneTexture",b.boneTexture,Ue),o0.setValue(ye,"boneTextureSize",b.boneTextureSize)):o0.setOptional(ye,b,"boneMatrices"))}const Ni=st.morphAttributes;return(Ni.position!==void 0||Ni.normal!==void 0||Ni.color!==void 0&&Ke.isWebGL2===!0)&&Re.update(ft,st,Ze,Rt),(vi||C0.receiveShadow!==ft.receiveShadow)&&(C0.receiveShadow=ft.receiveShadow,o0.setValue(ye,"receiveShadow",ft.receiveShadow)),vi&&(o0.setValue(ye,"toneMappingExposure",x.toneMappingExposure),C0.needsLights&&S0(En,Vr),t0&&Ze.fog&&He.refreshFogUniforms(En,t0),He.refreshMaterialUniforms(En,Ze,z,$,re),ru.upload(ye,C0.uniformsList,En,Ue)),Ze.isShaderMaterial&&Ze.uniformsNeedUpdate===!0&&(ru.upload(ye,C0.uniformsList,En,Ue),Ze.uniformsNeedUpdate=!1),Ze.isSpriteMaterial&&o0.setValue(ye,"center",ft.center),o0.setValue(ye,"modelViewMatrix",ft.modelViewMatrix),o0.setValue(ye,"normalMatrix",ft.normalMatrix),o0.setValue(ye,"modelMatrix",ft.matrixWorld),Rt}function S0(he,qe){he.ambientLightColor.needsUpdate=qe,he.lightProbe.needsUpdate=qe,he.directionalLights.needsUpdate=qe,he.directionalLightShadows.needsUpdate=qe,he.pointLights.needsUpdate=qe,he.pointLightShadows.needsUpdate=qe,he.spotLights.needsUpdate=qe,he.spotLightShadows.needsUpdate=qe,he.rectAreaLights.needsUpdate=qe,he.hemisphereLights.needsUpdate=qe}function Q(he){return he.isMeshLambertMaterial||he.isMeshToonMaterial||he.isMeshPhongMaterial||he.isMeshStandardMaterial||he.isShadowMaterial||he.isShaderMaterial&&he.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(he,qe,st){Ie.get(he.texture).__webglTexture=qe,Ie.get(he.depthTexture).__webglTexture=st;const Ze=Ie.get(he);Ze.__hasExternalTextures=!0,Ze.__hasExternalTextures&&(Ze.__autoAllocateDepthBuffer=st===void 0,Ze.__autoAllocateDepthBuffer||at.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ze.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(he,qe){const st=Ie.get(he);st.__webglFramebuffer=qe,st.__useDefaultFramebuffer=qe===void 0},this.setRenderTarget=function(he,qe=0,st=0){C=he,_=qe,v=st;let Ze=!0;if(he){const m0=Ie.get(he);m0.__useDefaultFramebuffer!==void 0?(tt.bindFramebuffer(36160,null),Ze=!1):m0.__webglFramebuffer===void 0?Ue.setupRenderTarget(he):m0.__hasExternalTextures&&Ue.rebindTextures(he,Ie.get(he.texture).__webglTexture,Ie.get(he.depthTexture).__webglTexture)}let ft=null,t0=!1,p0=!1;if(he){const m0=he.texture;(m0.isData3DTexture||m0.isDataArrayTexture)&&(p0=!0);const D0=Ie.get(he).__webglFramebuffer;he.isWebGLCubeRenderTarget?(ft=D0[qe],t0=!0):Ke.isWebGL2&&he.samples>0&&Ue.useMultisampledRTT(he)===!1?ft=Ie.get(he).__webglMultisampledFramebuffer:ft=D0,H.copy(he.viewport),R.copy(he.scissor),j=he.scissorTest}else H.copy(P).multiplyScalar(z).floor(),R.copy(ee).multiplyScalar(z).floor(),j=ce;if(tt.bindFramebuffer(36160,ft)&&Ke.drawBuffers&&Ze&&tt.drawBuffers(he,ft),tt.viewport(H),tt.scissor(R),tt.setScissorTest(j),t0){const m0=Ie.get(he.texture);ye.framebufferTexture2D(36160,36064,34069+qe,m0.__webglTexture,st)}else if(p0){const m0=Ie.get(he.texture),D0=qe||0;ye.framebufferTextureLayer(36160,36064,m0.__webglTexture,st||0,D0)}D=-1},this.readRenderTargetPixels=function(he,qe,st,Ze,ft,t0,p0){if(!(he&&he.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let E0=Ie.get(he).__webglFramebuffer;if(he.isWebGLCubeRenderTarget&&p0!==void 0&&(E0=E0[p0]),E0){tt.bindFramebuffer(36160,E0);try{const m0=he.texture,D0=m0.format,f0=m0.type;if(D0!==Qi&&ve.convert(D0)!==ye.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jt=f0===H1&&(at.has("EXT_color_buffer_half_float")||Ke.isWebGL2&&at.has("EXT_color_buffer_float"));if(f0!==Uc&&ve.convert(f0)!==ye.getParameter(35738)&&!(f0===wc&&(Ke.isWebGL2||at.has("OES_texture_float")||at.has("WEBGL_color_buffer_float")))&&!jt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ye.checkFramebufferStatus(36160)===36053?qe>=0&&qe<=he.width-Ze&&st>=0&&st<=he.height-ft&&ye.readPixels(qe,st,Ze,ft,ve.convert(D0),ve.convert(f0),t0):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const m0=C!==null?Ie.get(C).__webglFramebuffer:null;tt.bindFramebuffer(36160,m0)}}},this.copyFramebufferToTexture=function(he,qe,st=0){if(qe.isFramebufferTexture!==!0){console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");return}const Ze=Math.pow(2,-st),ft=Math.floor(qe.image.width*Ze),t0=Math.floor(qe.image.height*Ze);Ue.setTexture2D(qe,0),ye.copyTexSubImage2D(3553,st,0,0,he.x,he.y,ft,t0),tt.unbindTexture()},this.copyTextureToTexture=function(he,qe,st,Ze=0){const ft=qe.image.width,t0=qe.image.height,p0=ve.convert(st.format),E0=ve.convert(st.type);Ue.setTexture2D(st,0),ye.pixelStorei(37440,st.flipY),ye.pixelStorei(37441,st.premultiplyAlpha),ye.pixelStorei(3317,st.unpackAlignment),qe.isDataTexture?ye.texSubImage2D(3553,Ze,he.x,he.y,ft,t0,p0,E0,qe.image.data):qe.isCompressedTexture?ye.compressedTexSubImage2D(3553,Ze,he.x,he.y,qe.mipmaps[0].width,qe.mipmaps[0].height,p0,qe.mipmaps[0].data):ye.texSubImage2D(3553,Ze,he.x,he.y,p0,E0,qe.image),Ze===0&&st.generateMipmaps&&ye.generateMipmap(3553),tt.unbindTexture()},this.copyTextureToTexture3D=function(he,qe,st,Ze,ft=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const t0=he.max.x-he.min.x+1,p0=he.max.y-he.min.y+1,E0=he.max.z-he.min.z+1,m0=ve.convert(Ze.format),D0=ve.convert(Ze.type);let f0;if(Ze.isData3DTexture)Ue.setTexture3D(Ze,0),f0=32879;else if(Ze.isDataArrayTexture)Ue.setTexture2DArray(Ze,0),f0=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ye.pixelStorei(37440,Ze.flipY),ye.pixelStorei(37441,Ze.premultiplyAlpha),ye.pixelStorei(3317,Ze.unpackAlignment);const jt=ye.getParameter(3314),z0=ye.getParameter(32878),Jr=ye.getParameter(3316),c0=ye.getParameter(3315),ai=ye.getParameter(32877),mn=st.isCompressedTexture?st.mipmaps[0]:st.image;ye.pixelStorei(3314,mn.width),ye.pixelStorei(32878,mn.height),ye.pixelStorei(3316,he.min.x),ye.pixelStorei(3315,he.min.y),ye.pixelStorei(32877,he.min.z),st.isDataTexture||st.isData3DTexture?ye.texSubImage3D(f0,ft,qe.x,qe.y,qe.z,t0,p0,E0,m0,D0,mn.data):st.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ye.compressedTexSubImage3D(f0,ft,qe.x,qe.y,qe.z,t0,p0,E0,m0,mn.data)):ye.texSubImage3D(f0,ft,qe.x,qe.y,qe.z,t0,p0,E0,m0,D0,mn),ye.pixelStorei(3314,jt),ye.pixelStorei(32878,z0),ye.pixelStorei(3316,Jr),ye.pixelStorei(3315,c0),ye.pixelStorei(32877,ai),ft===0&&Ze.generateMipmaps&&ye.generateMipmap(f0),tt.unbindTexture()},this.initTexture=function(he){Ue.setTexture2D(he,0),tt.unbindTexture()},this.resetState=function(){_=0,v=0,C=null,tt.reset(),$e.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}fn.prototype.isWebGLRenderer=!0;class YJ extends fn{}YJ.prototype.isWebGL1Renderer=!0;class Kh extends nn{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}Kh.prototype.isScene=!0;class Ip{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=zh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Mo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Ip.prototype.isInterleavedBuffer=!0;const xr=new Se;class Yh{constructor(e,t,r,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)xr.x=this.getX(t),xr.y=this.getY(t),xr.z=this.getZ(t),xr.applyMatrix4(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)xr.x=this.getX(t),xr.y=this.getY(t),xr.z=this.getZ(t),xr.applyNormalMatrix(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)xr.x=this.getX(t),xr.y=this.getY(t),xr.z=this.getZ(t),xr.transformDirection(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new vn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Yh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Yh.prototype.isInterleavedBufferAttribute=!0;class wE extends Qr{constructor(e){super(),this.type="SpriteMaterial",this.color=new Jt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}wE.prototype.isSpriteMaterial=!0;let s1;const Pf=new Se,l1=new Se,u1=new Se,c1=new pt,Rf=new pt,iI=new u0,wS=new Se,Lf=new Se,yS=new Se,UT=new pt,lv=new pt,jT=new pt;class qJ extends nn{constructor(e){if(super(),this.type="Sprite",s1===void 0){s1=new yn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Ip(t,5);s1.setIndex([0,1,2,0,2,3]),s1.setAttribute("position",new Yh(r,3,0,!1)),s1.setAttribute("uv",new Yh(r,2,3,!1))}this.geometry=s1,this.material=e!==void 0?e:new wE,this.center=new pt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),l1.setFromMatrixScale(this.matrixWorld),iI.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),u1.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&l1.multiplyScalar(-u1.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const o=this.center;ES(wS.set(-.5,-.5,0),u1,o,l1,i,a),ES(Lf.set(.5,-.5,0),u1,o,l1,i,a),ES(yS.set(.5,.5,0),u1,o,l1,i,a),UT.set(0,0),lv.set(1,0),jT.set(1,1);let s=e.ray.intersectTriangle(wS,Lf,yS,!1,Pf);if(s===null&&(ES(Lf.set(-.5,.5,0),u1,o,l1,i,a),lv.set(0,1),s=e.ray.intersectTriangle(wS,yS,Lf,!1,Pf),s===null))return;const l=e.ray.origin.distanceTo(Pf);l<e.near||l>e.far||t.push({distance:l,point:Pf.clone(),uv:Lr.getUV(Pf,wS,Lf,yS,UT,lv,jT,new pt),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}qJ.prototype.isSprite=!0;function ES(n,e,t,r,i,a){c1.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Rf.x=a*c1.x-i*c1.y,Rf.y=i*c1.x+a*c1.y):Rf.copy(c1),n.copy(e),n.x+=Rf.x,n.y+=Rf.y,n.applyMatrix4(iI)}const GT=new Se,HT=new xn,zT=new xn,QJ=new Se,WT=new u0;class aI extends Mi{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new u0,this.bindMatrixInverse=new u0}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new xn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;HT.fromBufferAttribute(i.attributes.skinIndex,e),zT.fromBufferAttribute(i.attributes.skinWeight,e),GT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const o=zT.getComponent(a);if(o!==0){const s=HT.getComponent(a);WT.multiplyMatrices(r.bones[s].matrixWorld,r.boneInverses[s]),t.addScaledVector(QJ.copy(GT).applyMatrix4(WT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}aI.prototype.isSkinnedMesh=!0;class JJ extends nn{constructor(){super(),this.type="Bone"}}JJ.prototype.isBone=!0;class ZJ extends qr{constructor(e=null,t=1,r=1,i,a,o,s,l,c=Kr,d=Kr,h,f){super(null,o,s,l,c,d,i,a,h,f),this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}ZJ.prototype.isDataTexture=!0;class iy extends vn{constructor(e,t,r,i=1){typeof r=="number"&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}iy.prototype.isInstancedBufferAttribute=!0;const XT=new u0,KT=new u0,CS=[],Bf=new Mi;class $J extends Mi{constructor(e,t,r){super(e,t),this.instanceMatrix=new iy(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Bf.geometry=this.geometry,Bf.material=this.material,Bf.material!==void 0)for(let a=0;a<i;a++){this.getMatrixAt(a,XT),KT.multiplyMatrices(r,XT),Bf.matrixWorld=KT,Bf.raycast(e,CS);for(let o=0,s=CS.length;o<s;o++){const l=CS[o];l.instanceId=a,l.object=this,t.push(l)}CS.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new iy(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}$J.prototype.isInstancedMesh=!0;class bu extends Qr{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Jt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}bu.prototype.isLineBasicMaterial=!0;const YT=new Se,qT=new Se,QT=new u0,uv=new LA,VS=new ed;class yE extends nn{constructor(e=new yn,t=new bu){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,a=t.count;i<a;i++)YT.fromBufferAttribute(t,i-1),qT.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=YT.distanceTo(qT);e.setAttribute("lineDistance",new Bn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),VS.copy(r.boundingSphere),VS.applyMatrix4(i),VS.radius+=a,e.ray.intersectsSphere(VS)===!1)return;QT.copy(i).invert(),uv.copy(e.ray).applyMatrix4(QT);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,c=new Se,d=new Se,h=new Se,f=new Se,m=this.isLineSegments?2:1;if(r.isBufferGeometry){const g=r.index,E=r.attributes.position;if(g!==null){const _=Math.max(0,o.start),v=Math.min(g.count,o.start+o.count);for(let C=_,D=v-1;C<D;C+=m){const V=g.getX(C),H=g.getX(C+1);if(c.fromBufferAttribute(E,V),d.fromBufferAttribute(E,H),uv.distanceSqToSegment(c,d,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const j=e.ray.origin.distanceTo(f);j<e.near||j>e.far||t.push({distance:j,point:h.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,o.start),v=Math.min(E.count,o.start+o.count);for(let C=_,D=v-1;C<D;C+=m){if(c.fromBufferAttribute(E,C),d.fromBufferAttribute(E,C+1),uv.distanceSqToSegment(c,d,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const H=e.ray.origin.distanceTo(f);H<e.near||H>e.far||t.push({distance:H,point:h.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}yE.prototype.isLine=!0;const JT=new Se,ZT=new Se;class Op extends yE{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,a=t.count;i<a;i+=2)JT.fromBufferAttribute(t,i),ZT.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+JT.distanceTo(ZT);e.setAttribute("lineDistance",new Bn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Op.prototype.isLineSegments=!0;class eZ extends yE{constructor(e,t){super(e,t),this.type="LineLoop"}}eZ.prototype.isLineLoop=!0;class EE extends Qr{constructor(e){super(),this.type="PointsMaterial",this.color=new Jt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}EE.prototype.isPointsMaterial=!0;const $T=new u0,ay=new LA,DS=new ed,FS=new Se;class tZ extends nn{constructor(e=new yn,t=new EE){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),DS.copy(r.boundingSphere),DS.applyMatrix4(i),DS.radius+=a,e.ray.intersectsSphere(DS)===!1)return;$T.copy(i).invert(),ay.copy(e.ray).applyMatrix4($T);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s;if(r.isBufferGeometry){const c=r.index,h=r.attributes.position;if(c!==null){const f=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let g=f,x=m;g<x;g++){const E=c.getX(g);FS.fromBufferAttribute(h,E),eb(FS,E,l,i,e,t,this)}}else{const f=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let g=f,x=m;g<x;g++)FS.fromBufferAttribute(h,g),eb(FS,g,l,i,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}tZ.prototype.isPoints=!0;function eb(n,e,t,r,i,a,o){const s=ay.distanceSqToPoint(n);if(s<t){const l=new Se;ay.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;a.push({distance:c,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:o})}}class nZ extends qr{constructor(e,t,r,i,a,o,s,l,c){super(e,t,r,i,a,o,s,l,c),this.minFilter=o!==void 0?o:pi,this.magFilter=a!==void 0?a:pi,this.generateMipmaps=!1;const d=this;function h(){d.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}nZ.prototype.isVideoTexture=!0;class rZ extends qr{constructor(e,t,r){super({width:e,height:t}),this.format=r,this.magFilter=Kr,this.minFilter=Kr,this.generateMipmaps=!1,this.needsUpdate=!0}}rZ.prototype.isFramebufferTexture=!0;class iZ extends qr{constructor(e,t,r,i,a,o,s,l,c,d,h,f){super(null,o,s,l,c,d,i,a,h,f),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}iZ.prototype.isCompressedTexture=!0;class aZ extends qr{constructor(e,t,r,i,a,o,s,l,c){super(e,t,r,i,a,o,s,l,c),this.needsUpdate=!0}}aZ.prototype.isCanvasTexture=!0;const TS=new Se,bS=new Se,cv=new Se,PS=new Lr;class oZ extends yn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),a=Math.cos(W1*t),o=e.getIndex(),s=e.getAttribute("position"),l=o?o.count:s.count,c=[0,0,0],d=["a","b","c"],h=new Array(3),f={},m=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:x,b:E,c:_}=PS;if(x.fromBufferAttribute(s,c[0]),E.fromBufferAttribute(s,c[1]),_.fromBufferAttribute(s,c[2]),PS.getNormal(cv),h[0]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,h[1]=`${Math.round(E.x*i)},${Math.round(E.y*i)},${Math.round(E.z*i)}`,h[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let v=0;v<3;v++){const C=(v+1)%3,D=h[v],V=h[C],H=PS[d[v]],R=PS[d[C]],j=`${D}_${V}`,te=`${V}_${D}`;te in f&&f[te]?(cv.dot(f[te].normal)<=a&&(m.push(H.x,H.y,H.z),m.push(R.x,R.y,R.z)),f[te]=null):j in f||(f[j]={index0:c[v],index1:c[C],normal:cv.clone()})}}for(const g in f)if(f[g]){const{index0:x,index1:E}=f[g];TS.fromBufferAttribute(s,x),bS.fromBufferAttribute(s,E),m.push(TS.x,TS.y,TS.z),m.push(bS.x,bS.y,bS.z)}this.setAttribute("position",new Bn(m,3))}}}class ao{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),a=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),a+=r.distanceTo(i),t.push(a),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const a=r.length;let o;t?o=t:o=e*r[a-1];let s=0,l=a-1,c;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),c=r[i]-o,c<0)s=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(a-1);const d=r[i],f=r[i+1]-d,m=(o-d)/f;return(i+m)/(a-1)}getTangent(e,t){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const o=this.getPoint(i),s=this.getPoint(a),l=t||(o.isVector2?new pt:new Se);return l.copy(s).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new Se,i=[],a=[],o=[],s=new Se,l=new u0;for(let m=0;m<=e;m++){const g=m/e;i[m]=this.getTangentAt(g,new Se)}a[0]=new Se,o[0]=new Se;let c=Number.MAX_VALUE;const d=Math.abs(i[0].x),h=Math.abs(i[0].y),f=Math.abs(i[0].z);d<=c&&(c=d,r.set(1,0,0)),h<=c&&(c=h,r.set(0,1,0)),f<=c&&r.set(0,0,1),s.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],s),o[0].crossVectors(i[0],a[0]);for(let m=1;m<=e;m++){if(a[m]=a[m-1].clone(),o[m]=o[m-1].clone(),s.crossVectors(i[m-1],i[m]),s.length()>Number.EPSILON){s.normalize();const g=Math.acos(qi(i[m-1].dot(i[m]),-1,1));a[m].applyMatrix4(l.makeRotationAxis(s,g))}o[m].crossVectors(i[m],a[m])}if(t===!0){let m=Math.acos(qi(a[0].dot(a[e]),-1,1));m/=e,i[0].dot(s.crossVectors(a[0],a[e]))>0&&(m=-m);for(let g=1;g<=e;g++)a[g].applyMatrix4(l.makeRotationAxis(i[g],m*g)),o[g].crossVectors(i[g],a[g])}return{tangents:i,normals:a,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class x_ extends ao{constructor(e=0,t=0,r=1,i=1,a=0,o=Math.PI*2,s=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=s,this.aRotation=l}getPoint(e,t){const r=t||new pt,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const o=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(o?a=0:a=i),this.aClockwise===!0&&!o&&(a===i?a=-i:a=a-i);const s=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){const d=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,m=c-this.aY;l=f*d-m*h+this.aX,c=f*h+m*d+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}x_.prototype.isEllipseCurve=!0;class oI extends x_{constructor(e,t,r,i,a,o){super(e,t,r,r,i,a,o),this.type="ArcCurve"}}oI.prototype.isArcCurve=!0;function CE(){let n=0,e=0,t=0,r=0;function i(a,o,s,l){n=a,e=s,t=-3*a+3*o-2*s-l,r=2*a-2*o+s+l}return{initCatmullRom:function(a,o,s,l,c){i(o,s,c*(s-a),c*(l-o))},initNonuniformCatmullRom:function(a,o,s,l,c,d,h){let f=(o-a)/c-(s-a)/(c+d)+(s-o)/d,m=(s-o)/d-(l-o)/(d+h)+(l-s)/h;f*=d,m*=d,i(o,s,f,m)},calc:function(a){const o=a*a,s=o*a;return n+e*a+t*o+r*s}}}const RS=new Se,dv=new CE,Av=new CE,fv=new CE;class sI extends ao{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new Se){const r=t,i=this.points,a=i.length,o=(a-(this.closed?0:1))*e;let s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:l===0&&s===a-1&&(s=a-2,l=1);let c,d;this.closed||s>0?c=i[(s-1)%a]:(RS.subVectors(i[0],i[1]).add(i[0]),c=RS);const h=i[s%a],f=i[(s+1)%a];if(this.closed||s+2<a?d=i[(s+2)%a]:(RS.subVectors(i[a-1],i[a-2]).add(i[a-1]),d=RS),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(h),m),x=Math.pow(h.distanceToSquared(f),m),E=Math.pow(f.distanceToSquared(d),m);x<1e-4&&(x=1),g<1e-4&&(g=x),E<1e-4&&(E=x),dv.initNonuniformCatmullRom(c.x,h.x,f.x,d.x,g,x,E),Av.initNonuniformCatmullRom(c.y,h.y,f.y,d.y,g,x,E),fv.initNonuniformCatmullRom(c.z,h.z,f.z,d.z,g,x,E)}else this.curveType==="catmullrom"&&(dv.initCatmullRom(c.x,h.x,f.x,d.x,this.tension),Av.initCatmullRom(c.y,h.y,f.y,d.y,this.tension),fv.initCatmullRom(c.z,h.z,f.z,d.z,this.tension));return r.set(dv.calc(l),Av.calc(l),fv.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Se().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}sI.prototype.isCatmullRomCurve3=!0;function tb(n,e,t,r,i){const a=(r-e)*.5,o=(i-t)*.5,s=n*n,l=n*s;return(2*t-2*r+a+o)*l+(-3*t+3*r-2*a-o)*s+a*n+t}function sZ(n,e){const t=1-n;return t*t*e}function lZ(n,e){return 2*(1-n)*n*e}function uZ(n,e){return n*n*e}function mh(n,e,t,r){return sZ(n,e)+lZ(n,t)+uZ(n,r)}function cZ(n,e){const t=1-n;return t*t*t*e}function dZ(n,e){const t=1-n;return 3*t*t*n*e}function AZ(n,e){return 3*(1-n)*n*n*e}function fZ(n,e){return n*n*n*e}function Sh(n,e,t,r,i){return cZ(n,e)+dZ(n,t)+AZ(n,r)+fZ(n,i)}class VE extends ao{constructor(e=new pt,t=new pt,r=new pt,i=new pt){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new pt){const r=t,i=this.v0,a=this.v1,o=this.v2,s=this.v3;return r.set(Sh(e,i.x,a.x,o.x,s.x),Sh(e,i.y,a.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}VE.prototype.isCubicBezierCurve=!0;class lI extends ao{constructor(e=new Se,t=new Se,r=new Se,i=new Se){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Se){const r=t,i=this.v0,a=this.v1,o=this.v2,s=this.v3;return r.set(Sh(e,i.x,a.x,o.x,s.x),Sh(e,i.y,a.y,o.y,s.y),Sh(e,i.z,a.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}lI.prototype.isCubicBezierCurve3=!0;class v_ extends ao{constructor(e=new pt,t=new pt){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new pt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new pt;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}v_.prototype.isLineCurve=!0;class hZ extends ao{constructor(e=new Se,t=new Se){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new Se){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class DE extends ao{constructor(e=new pt,t=new pt,r=new pt){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new pt){const r=t,i=this.v0,a=this.v1,o=this.v2;return r.set(mh(e,i.x,a.x,o.x),mh(e,i.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}DE.prototype.isQuadraticBezierCurve=!0;class uI extends ao{constructor(e=new Se,t=new Se,r=new Se){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Se){const r=t,i=this.v0,a=this.v1,o=this.v2;return r.set(mh(e,i.x,a.x,o.x),mh(e,i.y,a.y,o.y),mh(e,i.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}uI.prototype.isQuadraticBezierCurve3=!0;class FE extends ao{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new pt){const r=t,i=this.points,a=(i.length-1)*e,o=Math.floor(a),s=a-o,l=i[o===0?o:o-1],c=i[o],d=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(tb(s,l.x,c.x,d.x,h.x),tb(s,l.y,c.y,d.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new pt().fromArray(i))}return this}}FE.prototype.isSplineCurve=!0;var cI=Object.freeze({__proto__:null,ArcCurve:oI,CatmullRomCurve3:sI,CubicBezierCurve:VE,CubicBezierCurve3:lI,EllipseCurve:x_,LineCurve:v_,LineCurve3:hZ,QuadraticBezierCurve:DE,QuadraticBezierCurve3:uI,SplineCurve:FE});class pZ extends ao{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new v_(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=r){const o=i[a]-r,s=this.curves[a],l=s.getLength(),c=l===0?0:1-o/l;return s.getPointAt(c,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,a=this.curves;i<a.length;i++){const o=a[i],s=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(s);for(let c=0;c<l.length;c++){const d=l[c];r&&r.equals(d)||(t.push(d),r=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new cI[i.type]().fromJSON(i))}return this}}class oy extends pZ{constructor(e){super(),this.type="Path",this.currentPoint=new pt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new v_(this.currentPoint.clone(),new pt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const a=new DE(this.currentPoint.clone(),new pt(e,t),new pt(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,a,o){const s=new VE(this.currentPoint.clone(),new pt(e,t),new pt(r,i),new pt(a,o));return this.curves.push(s),this.currentPoint.set(a,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new FE(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,a,o){const s=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+s,t+l,r,i,a,o),this}absarc(e,t,r,i,a,o){return this.absellipse(e,t,r,r,i,a,o),this}ellipse(e,t,r,i,a,o,s,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,t+d,r,i,a,o,s,l),this}absellipse(e,t,r,i,a,o,s,l){const c=new x_(e,t,r,i,a,o,s,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class kp extends oy{constructor(e){super(e),this.uuid=Mo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new oy().fromJSON(i))}return this}}const mZ={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let a=dI(n,0,i,t,!0);const o=[];if(!a||a.next===a.prev)return o;let s,l,c,d,h,f,m;if(r&&(a=vZ(n,e,a,t)),n.length>80*t){s=c=n[0],l=d=n[1];for(let g=t;g<i;g+=t)h=n[g],f=n[g+1],h<s&&(s=h),f<l&&(l=f),h>c&&(c=h),f>d&&(d=f);m=Math.max(c-s,d-l),m=m!==0?1/m:0}return qh(a,o,t,s,l,m),o}};function dI(n,e,t,r,i){let a,o;if(i===RZ(n,e,t,r)>0)for(a=e;a<t;a+=r)o=nb(a,n[a],n[a+1],o);else for(a=t-r;a>=e;a-=r)o=nb(a,n[a],n[a+1],o);return o&&w_(o,o.next)&&(Jh(o),o=o.next),o}function Su(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(w_(t,t.next)||or(t.prev,t,t.next)===0)){if(Jh(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function qh(n,e,t,r,i,a,o){if(!n)return;!o&&a&&VZ(n,r,i,a);let s=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,a?gZ(n,r,i,a):SZ(n)){e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),Jh(n),n=c.next,s=c.next;continue}if(n=c,n===s){o?o===1?(n=_Z(Su(n),e,t),qh(n,e,t,r,i,a,2)):o===2&&xZ(n,e,t,r,i,a):qh(Su(n),e,t,r,i,a,1);break}}}function SZ(n){const e=n.prev,t=n,r=n.next;if(or(e,t,r)>=0)return!1;let i=n.next.next;for(;i!==n.prev;){if(V1(e.x,e.y,t.x,t.y,r.x,r.y,i.x,i.y)&&or(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function gZ(n,e,t,r){const i=n.prev,a=n,o=n.next;if(or(i,a,o)>=0)return!1;const s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,d=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=sy(s,l,e,t,r),f=sy(c,d,e,t,r);let m=n.prevZ,g=n.nextZ;for(;m&&m.z>=h&&g&&g.z<=f;){if(m!==n.prev&&m!==n.next&&V1(i.x,i.y,a.x,a.y,o.x,o.y,m.x,m.y)&&or(m.prev,m,m.next)>=0||(m=m.prevZ,g!==n.prev&&g!==n.next&&V1(i.x,i.y,a.x,a.y,o.x,o.y,g.x,g.y)&&or(g.prev,g,g.next)>=0))return!1;g=g.nextZ}for(;m&&m.z>=h;){if(m!==n.prev&&m!==n.next&&V1(i.x,i.y,a.x,a.y,o.x,o.y,m.x,m.y)&&or(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;g&&g.z<=f;){if(g!==n.prev&&g!==n.next&&V1(i.x,i.y,a.x,a.y,o.x,o.y,g.x,g.y)&&or(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function _Z(n,e,t){let r=n;do{const i=r.prev,a=r.next.next;!w_(i,a)&&AI(i,r,r.next,a)&&Qh(i,a)&&Qh(a,i)&&(e.push(i.i/t),e.push(r.i/t),e.push(a.i/t),Jh(r),Jh(r.next),r=n=a),r=r.next}while(r!==n);return Su(r)}function xZ(n,e,t,r,i,a){let o=n;do{let s=o.next.next;for(;s!==o.prev;){if(o.i!==s.i&&TZ(o,s)){let l=fI(o,s);o=Su(o,o.next),l=Su(l,l.next),qh(o,e,t,r,i,a),qh(l,e,t,r,i,a);return}s=s.next}o=o.next}while(o!==n)}function vZ(n,e,t,r){const i=[];let a,o,s,l,c;for(a=0,o=e.length;a<o;a++)s=e[a]*r,l=a<o-1?e[a+1]*r:n.length,c=dI(n,s,l,r,!1),c===c.next&&(c.steiner=!0),i.push(FZ(c));for(i.sort(wZ),a=0;a<i.length;a++)yZ(i[a],t),t=Su(t,t.next);return t}function wZ(n,e){return n.x-e.x}function yZ(n,e){if(e=EZ(n,e),e){const t=fI(e,n);Su(e,e.next),Su(t,t.next)}}function EZ(n,e){let t=e;const r=n.x,i=n.y;let a=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const f=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=r&&f>a){if(a=f,f===r){if(i===t.y)return t;if(i===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(r===a)return o;const s=o,l=o.x,c=o.y;let d=1/0,h;t=o;do r>=t.x&&t.x>=l&&r!==t.x&&V1(i<c?r:a,i,l,c,i<c?a:r,i,t.x,t.y)&&(h=Math.abs(i-t.y)/(r-t.x),Qh(t,n)&&(h<d||h===d&&(t.x>o.x||t.x===o.x&&CZ(o,t)))&&(o=t,d=h)),t=t.next;while(t!==s);return o}function CZ(n,e){return or(n.prev,n,e.prev)<0&&or(e.next,n,n.next)<0}function VZ(n,e,t,r){let i=n;do i.z===null&&(i.z=sy(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,DZ(i)}function DZ(n){let e,t,r,i,a,o,s,l,c=1;do{for(t=n,n=null,a=null,o=0;t;){for(o++,r=t,s=0,e=0;e<c&&(s++,r=r.nextZ,!!r);e++);for(l=c;s>0||l>0&&r;)s!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:n=i,i.prevZ=a,a=i;t=r}a.nextZ=null,c*=2}while(o>1);return n}function sy(n,e,t,r,i){return n=32767*(n-t)*i,e=32767*(e-r)*i,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function FZ(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function V1(n,e,t,r,i,a,o,s){return(i-o)*(e-s)-(n-o)*(a-s)>=0&&(n-o)*(r-s)-(t-o)*(e-s)>=0&&(t-o)*(a-s)-(i-o)*(r-s)>=0}function TZ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!bZ(n,e)&&(Qh(n,e)&&Qh(e,n)&&PZ(n,e)&&(or(n.prev,n,e.prev)||or(n,e.prev,e))||w_(n,e)&&or(n.prev,n,n.next)>0&&or(e.prev,e,e.next)>0)}function or(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function w_(n,e){return n.x===e.x&&n.y===e.y}function AI(n,e,t,r){const i=BS(or(n,e,t)),a=BS(or(n,e,r)),o=BS(or(t,r,n)),s=BS(or(t,r,e));return!!(i!==a&&o!==s||i===0&&LS(n,t,e)||a===0&&LS(n,r,e)||o===0&&LS(t,n,r)||s===0&&LS(t,e,r))}function LS(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function BS(n){return n>0?1:n<0?-1:0}function bZ(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&AI(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Qh(n,e){return or(n.prev,n,n.next)<0?or(n,e,n.next)>=0&&or(n,n.prev,e)>=0:or(n,e,n.prev)<0||or(n,n.next,e)<0}function PZ(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function fI(n,e){const t=new ly(n.i,n.x,n.y),r=new ly(e.i,e.x,e.y),i=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,a.next=r,r.prev=a,r}function nb(n,e,t,r){const i=new ly(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Jh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function ly(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function RZ(n,e,t,r){let i=0;for(let a=e,o=t-r;a<t;a+=r)i+=(n[o]-n[a])*(n[a+1]+n[o+1]),o=a;return i}class iu{static area(e){const t=e.length;let r=0;for(let i=t-1,a=0;a<t;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return iu.area(e)<0}static triangulateShape(e,t){const r=[],i=[],a=[];rb(e),ib(r,e);let o=e.length;t.forEach(rb);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,ib(r,t[l]);const s=mZ.triangulate(r,i);for(let l=0;l<s.length;l+=3)a.push(s.slice(l,l+3));return a}}function rb(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function ib(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class MA extends yn{constructor(e=new kp([new pt(.5,.5),new pt(-.5,.5),new pt(-.5,-.5),new pt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],a=[];for(let s=0,l=e.length;s<l;s++){const c=e[s];o(c)}this.setAttribute("position",new Bn(i,3)),this.setAttribute("uv",new Bn(a,2)),this.computeVertexNormals();function o(s){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1;let h=t.depth!==void 0?t.depth:1,f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:m-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,E=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,v=t.UVGenerator!==void 0?t.UVGenerator:LZ;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),h=t.amount);let C,D=!1,V,H,R,j;_&&(C=_.getSpacedPoints(d),D=!0,f=!1,V=_.computeFrenetFrames(d,!1),H=new Se,R=new Se,j=new Se),f||(E=0,m=0,g=0,x=0);const te=s.extractPoints(c);let $=te.shape;const z=te.holes;if(!iu.isClockWise($)){$=$.reverse();for(let Ie=0,Ue=z.length;Ie<Ue;Ie++){const k=z[Ie];iu.isClockWise(k)&&(z[Ie]=k.reverse())}}const q=iu.triangulateShape($,z),P=$;for(let Ie=0,Ue=z.length;Ie<Ue;Ie++){const k=z[Ie];$=$.concat(k)}function ee(Ie,Ue,k){return Ue||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ue.clone().multiplyScalar(k).add(Ie)}const ce=$.length,U=q.length;function O(Ie,Ue,k){let De,we,le;const ne=Ie.x-Ue.x,fe=Ie.y-Ue.y,He=k.x-Ie.x,ae=k.y-Ie.y,Y=ne*ne+fe*fe,_e=ne*ae-fe*He;if(Math.abs(_e)>Number.EPSILON){const Fe=Math.sqrt(Y),Le=Math.sqrt(He*He+ae*ae),Re=Ue.x-fe/Fe,rt=Ue.y+ne/Fe,Ee=k.x-ae/Le,ve=k.y+He/Le,$e=((Ee-Re)*ae-(ve-rt)*He)/(ne*ae-fe*He);De=Re+ne*$e-Ie.x,we=rt+fe*$e-Ie.y;const gt=De*De+we*we;if(gt<=2)return new pt(De,we);le=Math.sqrt(gt/2)}else{let Fe=!1;ne>Number.EPSILON?He>Number.EPSILON&&(Fe=!0):ne<-Number.EPSILON?He<-Number.EPSILON&&(Fe=!0):Math.sign(fe)===Math.sign(ae)&&(Fe=!0),Fe?(De=-fe,we=ne,le=Math.sqrt(Y)):(De=ne,we=fe,le=Math.sqrt(Y/2))}return new pt(De/le,we/le)}const G=[];for(let Ie=0,Ue=P.length,k=Ue-1,De=Ie+1;Ie<Ue;Ie++,k++,De++)k===Ue&&(k=0),De===Ue&&(De=0),G[Ie]=O(P[Ie],P[k],P[De]);const re=[];let oe,se=G.concat();for(let Ie=0,Ue=z.length;Ie<Ue;Ie++){const k=z[Ie];oe=[];for(let De=0,we=k.length,le=we-1,ne=De+1;De<we;De++,le++,ne++)le===we&&(le=0),ne===we&&(ne=0),oe[De]=O(k[De],k[le],k[ne]);re.push(oe),se=se.concat(oe)}for(let Ie=0;Ie<E;Ie++){const Ue=Ie/E,k=m*Math.cos(Ue*Math.PI/2),De=g*Math.sin(Ue*Math.PI/2)+x;for(let we=0,le=P.length;we<le;we++){const ne=ee(P[we],G[we],De);We(ne.x,ne.y,-k)}for(let we=0,le=z.length;we<le;we++){const ne=z[we];oe=re[we];for(let fe=0,He=ne.length;fe<He;fe++){const ae=ee(ne[fe],oe[fe],De);We(ae.x,ae.y,-k)}}}const be=g+x;for(let Ie=0;Ie<ce;Ie++){const Ue=f?ee($[Ie],se[Ie],be):$[Ie];D?(R.copy(V.normals[0]).multiplyScalar(Ue.x),H.copy(V.binormals[0]).multiplyScalar(Ue.y),j.copy(C[0]).add(R).add(H),We(j.x,j.y,j.z)):We(Ue.x,Ue.y,0)}for(let Ie=1;Ie<=d;Ie++)for(let Ue=0;Ue<ce;Ue++){const k=f?ee($[Ue],se[Ue],be):$[Ue];D?(R.copy(V.normals[Ie]).multiplyScalar(k.x),H.copy(V.binormals[Ie]).multiplyScalar(k.y),j.copy(C[Ie]).add(R).add(H),We(j.x,j.y,j.z)):We(k.x,k.y,h/d*Ie)}for(let Ie=E-1;Ie>=0;Ie--){const Ue=Ie/E,k=m*Math.cos(Ue*Math.PI/2),De=g*Math.sin(Ue*Math.PI/2)+x;for(let we=0,le=P.length;we<le;we++){const ne=ee(P[we],G[we],De);We(ne.x,ne.y,h+k)}for(let we=0,le=z.length;we<le;we++){const ne=z[we];oe=re[we];for(let fe=0,He=ne.length;fe<He;fe++){const ae=ee(ne[fe],oe[fe],De);D?We(ae.x,ae.y+C[d-1].y,C[d-1].x+k):We(ae.x,ae.y,h+k)}}}Be(),Te();function Be(){const Ie=i.length/3;if(f){let Ue=0,k=ce*Ue;for(let De=0;De<U;De++){const we=q[De];at(we[2]+k,we[1]+k,we[0]+k)}Ue=d+E*2,k=ce*Ue;for(let De=0;De<U;De++){const we=q[De];at(we[0]+k,we[1]+k,we[2]+k)}}else{for(let Ue=0;Ue<U;Ue++){const k=q[Ue];at(k[2],k[1],k[0])}for(let Ue=0;Ue<U;Ue++){const k=q[Ue];at(k[0]+ce*d,k[1]+ce*d,k[2]+ce*d)}}r.addGroup(Ie,i.length/3-Ie,0)}function Te(){const Ie=i.length/3;let Ue=0;ye(P,Ue),Ue+=P.length;for(let k=0,De=z.length;k<De;k++){const we=z[k];ye(we,Ue),Ue+=we.length}r.addGroup(Ie,i.length/3-Ie,1)}function ye(Ie,Ue){let k=Ie.length;for(;--k>=0;){const De=k;let we=k-1;we<0&&(we=Ie.length-1);for(let le=0,ne=d+E*2;le<ne;le++){const fe=ce*le,He=ce*(le+1),ae=Ue+De+fe,Y=Ue+we+fe,_e=Ue+we+He,Fe=Ue+De+He;Ke(ae,Y,_e,Fe)}}}function We(Ie,Ue,k){l.push(Ie),l.push(Ue),l.push(k)}function at(Ie,Ue,k){tt(Ie),tt(Ue),tt(k);const De=i.length/3,we=v.generateTopUV(r,i,De-3,De-2,De-1);lt(we[0]),lt(we[1]),lt(we[2])}function Ke(Ie,Ue,k,De){tt(Ie),tt(Ue),tt(De),tt(Ue),tt(k),tt(De);const we=i.length/3,le=v.generateSideWallUV(r,i,we-6,we-3,we-2,we-1);lt(le[0]),lt(le[1]),lt(le[3]),lt(le[1]),lt(le[2]),lt(le[3])}function tt(Ie){i.push(l[Ie*3+0]),i.push(l[Ie*3+1]),i.push(l[Ie*3+2])}function lt(Ie){a.push(Ie.x),a.push(Ie.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return BZ(t,r,e)}static fromJSON(e,t){const r=[];for(let a=0,o=e.shapes.length;a<o;a++){const s=t[e.shapes[a]];r.push(s)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new cI[i.type]().fromJSON(i)),new MA(r,e.options)}}const LZ={generateTopUV:function(n,e,t,r,i){const a=e[t*3],o=e[t*3+1],s=e[r*3],l=e[r*3+1],c=e[i*3],d=e[i*3+1];return[new pt(a,o),new pt(s,l),new pt(c,d)]},generateSideWallUV:function(n,e,t,r,i,a){const o=e[t*3],s=e[t*3+1],l=e[t*3+2],c=e[r*3],d=e[r*3+1],h=e[r*3+2],f=e[i*3],m=e[i*3+1],g=e[i*3+2],x=e[a*3],E=e[a*3+1],_=e[a*3+2];return Math.abs(s-d)<Math.abs(o-c)?[new pt(o,1-l),new pt(c,1-h),new pt(f,1-g),new pt(x,1-_)]:[new pt(s,1-l),new pt(d,1-h),new pt(m,1-g),new pt(E,1-_)]}};function BZ(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const a=n[r];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class TE extends yn{constructor(e=new kp([new pt(0,.5),new pt(-.5,-.5),new pt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],a=[],o=[];let s=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(s,l,d),s+=l,l=0;this.setIndex(r),this.setAttribute("position",new Bn(i,3)),this.setAttribute("normal",new Bn(a,3)),this.setAttribute("uv",new Bn(o,2));function c(d){const h=i.length/3,f=d.extractPoints(t);let m=f.shape;const g=f.holes;iu.isClockWise(m)===!1&&(m=m.reverse());for(let E=0,_=g.length;E<_;E++){const v=g[E];iu.isClockWise(v)===!0&&(g[E]=v.reverse())}const x=iu.triangulateShape(m,g);for(let E=0,_=g.length;E<_;E++){const v=g[E];m=m.concat(v)}for(let E=0,_=m.length;E<_;E++){const v=m[E];i.push(v.x,v.y,0),a.push(0,0,1),o.push(v.x,v.y)}for(let E=0,_=x.length;E<_;E++){const v=x[E],C=v[0]+h,D=v[1]+h,V=v[2]+h;r.push(C,D,V),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return MZ(t,e)}static fromJSON(e,t){const r=[];for(let i=0,a=e.shapes.length;i<a;i++){const o=t[e.shapes[i]];r.push(o)}return new TE(r,e.curveSegments)}}function MZ(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class hI extends Qr{constructor(e){super(),this.type="ShadowMaterial",this.color=new Jt(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}hI.prototype.isShadowMaterial=!0;class pI extends No{constructor(e){super(e),this.type="RawShaderMaterial"}}pI.prototype.isRawShaderMaterial=!0;class bE extends Qr{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Jt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=RA,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}bE.prototype.isMeshStandardMaterial=!0;class mI extends bE{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return qi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Jt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Jt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Jt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}mI.prototype.isMeshPhysicalMaterial=!0;class SI extends Qr{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Jt(16777215),this.specular=new Jt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=RA,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=h_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}SI.prototype.isMeshPhongMaterial=!0;class gI extends Qr{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Jt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=RA,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}gI.prototype.isMeshToonMaterial=!0;class _I extends Qr{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=RA,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}_I.prototype.isMeshNormalMaterial=!0;class xI extends Qr{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=h_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}xI.prototype.isMeshLambertMaterial=!0;class vI extends Qr{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Jt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=RA,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}vI.prototype.isMeshMatcapMaterial=!0;class wI extends bu{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}wI.prototype.isLineDashedMaterial=!0;const IZ={ShadowMaterial:hI,SpriteMaterial:wE,RawShaderMaterial:pI,ShaderMaterial:No,PointsMaterial:EE,MeshPhysicalMaterial:mI,MeshStandardMaterial:bE,MeshPhongMaterial:SI,MeshToonMaterial:gI,MeshNormalMaterial:_I,MeshLambertMaterial:xI,MeshDepthMaterial:xE,MeshDistanceMaterial:vE,MeshBasicMaterial:Rc,MeshMatcapMaterial:vI,LineDashedMaterial:wI,LineBasicMaterial:bu,Material:Qr};Qr.fromType=function(n){return new IZ[n]};const Zn={arraySlice:function(n,e,t){return Zn.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(i,a){return n[i]-n[a]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r},sortedArray:function(n,e,t){const r=n.length,i=new n.constructor(r);for(let a=0,o=0;o!==r;++a){const s=t[a]*e;for(let l=0;l!==e;++l)i[o++]=n[s+l]}return i},flattenJSON:function(n,e,t,r){let i=1,a=n[0];for(;a!==void 0&&a[r]===void 0;)a=n[i++];if(a===void 0)return;let o=a[r];if(o!==void 0)if(Array.isArray(o))do o=a[r],o!==void 0&&(e.push(a.time),t.push.apply(t,o)),a=n[i++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[r],o!==void 0&&(e.push(a.time),o.toArray(t,t.length)),a=n[i++];while(a!==void 0);else do o=a[r],o!==void 0&&(e.push(a.time),t.push(o)),a=n[i++];while(a!==void 0)},subclip:function(n,e,t,r,i=30){const a=n.clone();a.name=e;const o=[];for(let l=0;l<a.tracks.length;++l){const c=a.tracks[l],d=c.getValueSize(),h=[],f=[];for(let m=0;m<c.times.length;++m){const g=c.times[m]*i;if(!(g<t||g>=r)){h.push(c.times[m]);for(let x=0;x<d;++x)f.push(c.values[m*d+x])}}h.length!==0&&(c.times=Zn.convertArray(h,c.times.constructor),c.values=Zn.convertArray(f,c.values.constructor),o.push(c))}a.tracks=o;let s=1/0;for(let l=0;l<a.tracks.length;++l)s>a.tracks[l].times[0]&&(s=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*s);return a.resetDuration(),a},makeClipAdditive:function(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,a=e/r;for(let o=0;o<i;++o){const s=t.tracks[o],l=s.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(_){return _.name===s.name&&_.ValueTypeName===l});if(c===void 0)continue;let d=0;const h=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);let f=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=m/3);const g=s.times.length-1;let x;if(a<=s.times[0]){const _=d,v=h-d;x=Zn.arraySlice(s.values,_,v)}else if(a>=s.times[g]){const _=g*h+d,v=_+h-d;x=Zn.arraySlice(s.values,_,v)}else{const _=s.createInterpolant(),v=d,C=h-d;_.evaluate(a),x=Zn.arraySlice(_.resultBuffer,v,C)}l==="quaternion"&&new Si().fromArray(x).normalize().conjugate().toArray(x);const E=c.times.length;for(let _=0;_<E;++_){const v=_*m+f;if(l==="quaternion")Si.multiplyQuaternionsFlat(c.values,v,x,0,c.values,v);else{const C=m-f*2;for(let D=0;D<C;++D)c.values[v+D]-=x[D]}}}return n.blendMode=k6,n}};class gu{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],a=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let s=r+2;;){if(i===void 0){if(e<a)break r;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,a)}if(r===s)break;if(a=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=a)){const s=t[1];e<s&&(r=2,a=s);for(let l=r-2;;){if(a===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===l)break;if(i=a,a=t[--r-1],e>=a)break t}o=r,r=0;break n}break e}for(;r<o;){const s=r+o>>>1;e<t[s]?o=s:r=s+1}if(i=t[r],a=t[r-1],a===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,a,e)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let o=0;o!==i;++o)t[o]=r[a+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}gu.prototype.beforeStart_=gu.prototype.copySampleValue_;gu.prototype.afterEnd_=gu.prototype.copySampleValue_;class OZ extends gu{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:y1,endingEnd:y1}}intervalChanged_(e,t,r){const i=this.parameterPositions;let a=e-2,o=e+1,s=i[a],l=i[o];if(s===void 0)switch(this.getSettings_().endingStart){case E1:a=e,s=2*t-r;break;case u8:a=i.length-2,s=t+i[a]-i[a+1];break;default:a=e,s=r}if(l===void 0)switch(this.getSettings_().endingEnd){case E1:o=e,l=2*r-t;break;case u8:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,d=this.valueSize;this._weightPrev=c/(t-s),this._weightNext=c/(l-r),this._offsetPrev=a*d,this._offsetNext=o*d}interpolate_(e,t,r,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,c=l-s,d=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,m=this._weightNext,g=(r-t)/(i-t),x=g*g,E=x*g,_=-f*E+2*f*x-f*g,v=(1+f)*E+(-1.5-2*f)*x+(-.5+f)*g+1,C=(-1-m)*E+(1.5+m)*x+.5*g,D=m*E-m*x;for(let V=0;V!==s;++V)a[V]=_*o[d+V]+v*o[c+V]+C*o[l+V]+D*o[h+V];return a}}class yI extends gu{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,c=l-s,d=(r-t)/(i-t),h=1-d;for(let f=0;f!==s;++f)a[f]=o[c+f]*h+o[l+f]*d;return a}}class kZ extends gu{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class _s{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Zn.convertArray(t,this.TimeBufferType),this.values=Zn.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Zn.convertArray(e.times,Array),values:Zn.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new kZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new yI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new OZ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Gh:t=this.InterpolantFactoryMethodDiscrete;break;case Hh:t=this.InterpolantFactoryMethodLinear;break;case Bx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gh;case this.InterpolantFactoryMethodLinear:return Hh;case this.InterpolantFactoryMethodSmooth:return Bx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let a=0,o=i-1;for(;a!==i&&r[a]<e;)++a;for(;o!==-1&&r[o]>t;)--o;if(++o,a!==0||o!==i){a>=o&&(o=Math.max(o,1),a=o-1);const s=this.getValueSize();this.times=Zn.arraySlice(r,a,o),this.values=Zn.arraySlice(this.values,a*s,o*s)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==a;s++){const l=r[s];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,o),e=!1;break}o=l}if(i!==void 0&&Zn.isTypedArray(i))for(let s=0,l=i.length;s!==l;++s){const c=i[s];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,c),e=!1;break}}return e}optimize(){const e=Zn.arraySlice(this.times),t=Zn.arraySlice(this.values),r=this.getValueSize(),i=this.getInterpolation()===Bx,a=e.length-1;let o=1;for(let s=1;s<a;++s){let l=!1;const c=e[s],d=e[s+1];if(c!==d&&(s!==1||c!==e[0]))if(i)l=!0;else{const h=s*r,f=h-r,m=h+r;for(let g=0;g!==r;++g){const x=t[h+g];if(x!==t[f+g]||x!==t[m+g]){l=!0;break}}}if(l){if(s!==o){e[o]=e[s];const h=s*r,f=o*r;for(let m=0;m!==r;++m)t[f+m]=t[h+m]}++o}}if(a>0){e[o]=e[a];for(let s=a*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[s+c];++o}return o!==e.length?(this.times=Zn.arraySlice(e,0,o),this.values=Zn.arraySlice(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Zn.arraySlice(this.times,0),t=Zn.arraySlice(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}_s.prototype.TimeBufferType=Float32Array;_s.prototype.ValueBufferType=Float32Array;_s.prototype.DefaultInterpolation=Hh;class IA extends _s{}IA.prototype.ValueTypeName="bool";IA.prototype.ValueBufferType=Array;IA.prototype.DefaultInterpolation=Gh;IA.prototype.InterpolantFactoryMethodLinear=void 0;IA.prototype.InterpolantFactoryMethodSmooth=void 0;class EI extends _s{}EI.prototype.ValueTypeName="color";class A8 extends _s{}A8.prototype.ValueTypeName="number";class NZ extends gu{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=(r-t)/(i-t);let c=e*s;for(let d=c+s;c!==d;c+=4)Si.slerpFlat(a,0,o,c-s,o,c,l);return a}}class Np extends _s{InterpolantFactoryMethodLinear(e){return new NZ(this.times,this.values,this.getValueSize(),e)}}Np.prototype.ValueTypeName="quaternion";Np.prototype.DefaultInterpolation=Hh;Np.prototype.InterpolantFactoryMethodSmooth=void 0;class OA extends _s{}OA.prototype.ValueTypeName="string";OA.prototype.ValueBufferType=Array;OA.prototype.DefaultInterpolation=Gh;OA.prototype.InterpolantFactoryMethodLinear=void 0;OA.prototype.InterpolantFactoryMethodSmooth=void 0;class Lc extends _s{}Lc.prototype.ValueTypeName="vector";class uy{constructor(e,t=-1,r,i=AE){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Mo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,s=r.length;o!==s;++o)t.push(jZ(r[o]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,o=r.length;a!==o;++a)t.push(_s.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const a=t.length,o=[];for(let s=0;s<a;s++){let l=[],c=[];l.push((s+a-1)%a,s,(s+1)%a),c.push(0,1,0);const d=Zn.getKeyframeOrder(l);l=Zn.sortedArray(l,1,d),c=Zn.sortedArray(c,1,d),!i&&l[0]===0&&(l.push(a),c.push(c[0])),o.push(new A8(".morphTargetInfluences["+t[s].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let s=0,l=e.length;s<l;s++){const c=e[s],d=c.name.match(a);if(d&&d.length>1){const h=d[1];let f=i[h];f||(i[h]=f=[]),f.push(c)}}const o=[];for(const s in i)o.push(this.CreateFromMorphTargetSequence(s,i[s],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,f,m,g,x){if(m.length!==0){const E=[],_=[];Zn.flattenJSON(m,E,_,g),E.length!==0&&x.push(new h(f,E,_))}},i=[],a=e.name||"default",o=e.fps||30,s=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const f=c[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const m={};let g;for(g=0;g<f.length;g++)if(f[g].morphTargets)for(let x=0;x<f[g].morphTargets.length;x++)m[f[g].morphTargets[x]]=-1;for(const x in m){const E=[],_=[];for(let v=0;v!==f[g].morphTargets.length;++v){const C=f[g];E.push(C.time),_.push(C.morphTarget===x?1:0)}i.push(new A8(".morphTargetInfluence["+x+"]",E,_))}l=m.length*o}else{const m=".bones["+t[h].name+"]";r(Lc,m+".position",f,"pos",i),r(Np,m+".quaternion",f,"rot",i),r(Lc,m+".scale",f,"scl",i)}}return i.length===0?null:new this(a,l,i,s)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function UZ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return A8;case"vector":case"vector2":case"vector3":case"vector4":return Lc;case"color":return EI;case"quaternion":return Np;case"bool":case"boolean":return IA;case"string":return OA}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function jZ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=UZ(n.type);if(n.times===void 0){const t=[],r=[];Zn.flattenJSON(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const cA={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class GZ{constructor(e,t,r){const i=this;let a=!1,o=0,s=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(d){s++,a===!1&&i.onStart!==void 0&&i.onStart(d,o,s),a=!0},this.itemEnd=function(d){o++,i.onProgress!==void 0&&i.onProgress(d,o,s),o===s&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return c.push(d,h),this},this.removeHandler=function(d){const h=c.indexOf(d);return h!==-1&&c.splice(h,2),this},this.getHandler=function(d){for(let h=0,f=c.length;h<f;h+=2){const m=c[h],g=c[h+1];if(m.global&&(m.lastIndex=0),m.test(d))return g}return null}}}const HZ=new GZ;class Pu{constructor(e){this.manager=e!==void 0?e:HZ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,a){r.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Is={};class zZ extends Pu{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=cA.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Is[e]!==void 0){Is[e].push({onLoad:t,onProgress:r,onError:i});return}Is[e]=[],Is[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=Is[e],h=c.body.getReader(),f=c.headers.get("Content-Length"),m=f?parseInt(f):0,g=m!==0;let x=0;const E=new ReadableStream({start(_){v();function v(){h.read().then(({done:C,value:D})=>{if(C)_.close();else{x+=D.byteLength;const V=new ProgressEvent("progress",{lengthComputable:g,loaded:x,total:m});for(let H=0,R=d.length;H<R;H++){const j=d[H];j.onProgress&&j.onProgress(V)}_.enqueue(D),v()}})}}});return new Response(E)}else throw Error(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,s));case"json":return c.json();default:if(s===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(s),f=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(f);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{cA.add(e,c);const d=Is[e];delete Is[e];for(let h=0,f=d.length;h<f;h++){const m=d[h];m.onLoad&&m.onLoad(c)}}).catch(c=>{const d=Is[e];if(d===void 0)throw this.manager.itemError(e),c;delete Is[e];for(let h=0,f=d.length;h<f;h++){const m=d[h];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class CI extends Pu{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=cA.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;const s=Xh("img");function l(){d(),cA.add(e,this),t&&t(this),a.manager.itemEnd(e)}function c(h){d(),i&&i(h),a.manager.itemError(e),a.manager.itemEnd(e)}function d(){s.removeEventListener("load",l,!1),s.removeEventListener("error",c,!1)}return s.addEventListener("load",l,!1),s.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),a.manager.itemStart(e),s.src=e,s}}class WZ extends Pu{constructor(e){super(e)}load(e,t,r,i){const a=new S_,o=new CI(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function l(c){o.load(e[c],function(d){a.images[c]=d,s++,s===6&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return a}}class VI extends Pu{constructor(e){super(e)}load(e,t,r,i){const a=new qr,o=new CI(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(s){a.image=s,a.needsUpdate=!0,t!==void 0&&t(a)},r,i),a}}class ps extends nn{constructor(e,t=1){super(),this.type="Light",this.color=new Jt(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}ps.prototype.isLight=!0;class XZ extends ps{constructor(e,t,r){super(e,r),this.type="HemisphereLight",this.position.copy(nn.DefaultUp),this.updateMatrix(),this.groundColor=new Jt(t)}copy(e){return ps.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}XZ.prototype.isHemisphereLight=!0;const ab=new u0,ob=new Se,sb=new Se;class PE{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pt(512,512),this.map=null,this.mapPass=null,this.matrix=new u0,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new g_,this._frameExtents=new pt(1,1),this._viewportCount=1,this._viewports=[new xn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;ob.setFromMatrixPosition(e.matrixWorld),t.position.copy(ob),sb.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(sb),t.updateMatrixWorld(),ab.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ab),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class DI extends PE{constructor(){super(new mi(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,r=Wh*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(r!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}DI.prototype.isSpotLightShadow=!0;class KZ extends ps{constructor(e,t,r=0,i=Math.PI/3,a=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(nn.DefaultUp),this.updateMatrix(),this.target=new nn,this.distance=r,this.angle=i,this.penumbra=a,this.decay=o,this.shadow=new DI}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}KZ.prototype.isSpotLight=!0;const lb=new u0,Mf=new Se,hv=new Se;class FI extends PE{constructor(){super(new mi(90,1,.5,500)),this._frameExtents=new pt(4,2),this._viewportCount=6,this._viewports=[new xn(2,1,1,1),new xn(0,1,1,1),new xn(3,1,1,1),new xn(1,1,1,1),new xn(3,0,1,1),new xn(1,0,1,1)],this._cubeDirections=[new Se(1,0,0),new Se(-1,0,0),new Se(0,0,1),new Se(0,0,-1),new Se(0,1,0),new Se(0,-1,0)],this._cubeUps=[new Se(0,1,0),new Se(0,1,0),new Se(0,1,0),new Se(0,1,0),new Se(0,0,1),new Se(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),Mf.setFromMatrixPosition(e.matrixWorld),r.position.copy(Mf),hv.copy(r.position),hv.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(hv),r.updateMatrixWorld(),i.makeTranslation(-Mf.x,-Mf.y,-Mf.z),lb.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lb)}}FI.prototype.isPointLightShadow=!0;class YZ extends ps{constructor(e,t,r=0,i=1){super(e,t),this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new FI}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}YZ.prototype.isPointLight=!0;class TI extends PE{constructor(){super(new gE(-5,5,5,-5,.5,500))}}TI.prototype.isDirectionalLightShadow=!0;class qZ extends ps{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(nn.DefaultUp),this.updateMatrix(),this.target=new nn,this.shadow=new TI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}qZ.prototype.isDirectionalLight=!0;class QZ extends ps{constructor(e,t){super(e,t),this.type="AmbientLight"}}QZ.prototype.isAmbientLight=!0;class JZ extends ps{constructor(e,t,r=10,i=10){super(e,t),this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}JZ.prototype.isRectAreaLight=!0;class bI{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Se)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,a=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*a),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*a)),t.addScaledVector(o[6],.315392*(3*a*a-1)),t.addScaledVector(o[7],1.092548*(r*a)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,a=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*a),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*a),t.addScaledVector(o[6],.743125*a*a-.247708),t.addScaledVector(o[7],2*.429043*r*a),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*r*a,t[8]=.546274*(r*r-i*i)}}bI.prototype.isSphericalHarmonics3=!0;class RE extends ps{constructor(e=new bI,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}RE.prototype.isLightProbe=!0;class ZZ{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class $Z extends yn{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}$Z.prototype.isInstancedBufferGeometry=!0;class e$ extends Pu{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=cA.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;const s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(l){cA.add(e,l),t&&t(l),a.manager.itemEnd(e)}).catch(function(l){i&&i(l),a.manager.itemError(e),a.manager.itemEnd(e)}),a.manager.itemStart(e)}}e$.prototype.isImageBitmapLoader=!0;let MS;const t$={getContext:function(){return MS===void 0&&(MS=new(window.AudioContext||window.webkitAudioContext)),MS},setContext:function(n){MS=n}};class n$ extends Pu{constructor(e){super(e)}load(e,t,r,i){const a=this,o=new zZ(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(s){try{const l=s.slice(0);t$.getContext().decodeAudioData(l,function(d){t(d)})}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}}class r$ extends RE{constructor(e,t,r=1){super(void 0,r);const i=new Jt().set(e),a=new Jt().set(t),o=new Se(i.r,i.g,i.b),s=new Se(a.r,a.g,a.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(c)}}r$.prototype.isHemisphereLightProbe=!0;class i$ extends RE{constructor(e,t=1){super(void 0,t);const r=new Jt().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}i$.prototype.isAmbientLightProbe=!0;class a${constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ub(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ub();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ub(){return(typeof performance>"u"?Date:performance).now()}class o$ extends nn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class s${constructor(e,t,r){this.binding=e,this.valueSize=r;let i,a,o;switch(t){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,a=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let s=0;s!==i;++s)r[a+s]=r[s];o=t}else{o+=t;const s=t/o;this._mixBufferRegion(r,a,0,s,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-a,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){s.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let a=r,o=i;a!==o;++a)t[a]=t[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,a){if(i>=.5)for(let o=0;o!==a;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Si.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,a){const o=this._workIndex*a;Si.multiplyQuaternionsFlat(e,o,e,t,e,r),Si.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,a){const o=1-i;for(let s=0;s!==a;++s){const l=t+s;e[l]=e[l]*o+e[r+s]*i}}_lerpAdditive(e,t,r,i,a){for(let o=0;o!==a;++o){const s=t+o;e[s]=e[s]+e[r+o]*i}}}const LE="\\[\\]\\.:\\/",l$=new RegExp("["+LE+"]","g"),BE="[^"+LE+"]",u$="[^"+LE.replace("\\.","")+"]",c$=/((?:WC+[\/:])*)/.source.replace("WC",BE),d$=/(WCOD+)?/.source.replace("WCOD",u$),A$=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",BE),f$=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",BE),h$=new RegExp("^"+c$+d$+A$+f$+"$"),p$=["material","materials","bones"];class m${constructor(e,t,r){const i=r||X0.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class X0{constructor(e,t,r){this.path=t,this.parsedPath=r||X0.parseTrackName(t),this.node=X0.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new X0.Composite(e,t,r):new X0(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(l$,"")}static parseTrackName(e){const t=h$.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);p$.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(a){for(let o=0;o<a.length;o++){const s=a[o];if(s.name===t||s.uuid===t)return s;const l=r(s.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=X0.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}X0.Composite=m$;X0.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};X0.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};X0.prototype.GetterByBindingType=[X0.prototype._getValue_direct,X0.prototype._getValue_array,X0.prototype._getValue_arrayElement,X0.prototype._getValue_toArray];X0.prototype.SetterByBindingTypeAndVersioning=[[X0.prototype._setValue_direct,X0.prototype._setValue_direct_setNeedsUpdate,X0.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[X0.prototype._setValue_array,X0.prototype._setValue_array_setNeedsUpdate,X0.prototype._setValue_array_setMatrixWorldNeedsUpdate],[X0.prototype._setValue_arrayElement,X0.prototype._setValue_arrayElement_setNeedsUpdate,X0.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[X0.prototype._setValue_fromArray,X0.prototype._setValue_fromArray_setNeedsUpdate,X0.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class S${constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const a=t.tracks,o=a.length,s=new Array(o),l={endingStart:y1,endingEnd:y1};for(let c=0;c!==o;++c){const d=a[c].createInterpolant(null);s[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=jX,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,a=e._clip.duration,o=a/i,s=i/a;e.warp(1,o,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,a=i.time,o=this.timeScale;let s=this._timeScaleInterpolant;s===null&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const l=s.parameterPositions,c=s.sampleValues;return l[0]=a,l[1]=a+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*r;if(l<0||r===0)return;this._startTime=null,t=r*l}t*=this._updateTimeScale(e);const o=this._updateTime(t),s=this._updateWeight(e);if(s>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case k6:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),c[d].accumulateAdditive(s);break;case AE:default:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),c[d].accumulate(i,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,a=this._loopCount;const o=r===GX;if(e===0)return a===-1?i:o&&(a&1)===1?t-i:i;if(r===UX){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const s=Math.floor(i/t);i-=t*s,a+=Math.abs(s);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(o&&(a&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=E1,i.endingEnd=E1):(e?i.endingStart=this.zeroSlopeAtStart?E1:y1:i.endingStart=u8,t?i.endingEnd=this.zeroSlopeAtEnd?E1:y1:i.endingEnd=u8)}_scheduleFading(e,t,r){const i=this._mixer,a=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,l=o.sampleValues;return s[0]=a,l[0]=t,s[1]=a+e,l[1]=r,this}}class PI extends ul{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,a=i.length,o=e._propertyBindings,s=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let d=c[l];d===void 0&&(d={},c[l]=d);for(let h=0;h!==a;++h){const f=i[h],m=f.name;let g=d[m];if(g!==void 0)++g.referenceCount,o[h]=g;else{if(g=o[h],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const x=t&&t._propertyBindings[h].binding.parsedPath;g=new s$(X0.create(r,m,x),f.ValueTypeName,f.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[h]=g}s[h].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,a=this._actionsByClip;let o=a[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=o;else{const s=o.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,o=this._actionsByClip,s=o[a],l=s.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;const h=s.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],l.length===0&&delete o[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,a=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,a=r.path,o=this._bindingsByRootAndName,s=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete s[a],Object.keys(s).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new yI(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=r,t[r]=a}clipAction(e,t,r){const i=t||this._root,a=i.uuid;let o=typeof e=="string"?uy.findByName(i,e):e;const s=o!==null?o.uuid:e,l=this._actionsByClip[s];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=AE),l!==void 0){const h=l.actionByRoot[a];if(h!==void 0&&h.blendMode===r)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const d=new S$(this,o,t,r);return this._bindAction(d,c),this._addInactiveAction(d,s,a),d}existingAction(e,t){const r=t||this._root,i=r.uuid,a=typeof e=="string"?uy.findByName(r,e):e,o=a?a.uuid:e,s=this._actionsByClip[o];return s!==void 0&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,a=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,a,o);const s=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)s[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const o=a.knownActions;for(let s=0,l=o.length;s!==l;++s){const c=o[s];this._deactivateAction(c);const d=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=d,t[d]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const s=r[o].actionByRoot,l=s[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,a=i[t];if(a!==void 0)for(const o in a){const s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}PI.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class g$ extends Ip{constructor(e,t,r=1){super(e,t),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}g$.prototype.isInstancedInterleavedBuffer=!0;class cb{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(qi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const Ol=new Se,IS=new u0,pv=new u0;class _$ extends Op{constructor(e){const t=RI(e),r=new yn,i=[],a=[],o=new Jt(0,0,1),s=new Jt(0,1,0);for(let c=0;c<t.length;c++){const d=t[c];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(o.r,o.g,o.b),a.push(s.r,s.g,s.b))}r.setAttribute("position",new Bn(i,3)),r.setAttribute("color",new Bn(a,3));const l=new bu({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");pv.copy(this.root.matrixWorld).invert();for(let a=0,o=0;a<t.length;a++){const s=t[a];s.parent&&s.parent.isBone&&(IS.multiplyMatrices(pv,s.matrixWorld),Ol.setFromMatrixPosition(IS),i.setXYZ(o,Ol.x,Ol.y,Ol.z),IS.multiplyMatrices(pv,s.parent.matrixWorld),Ol.setFromMatrixPosition(IS),i.setXYZ(o+1,Ol.x,Ol.y,Ol.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function RI(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,RI(n.children[t]));return e}class x$ extends Op{constructor(e=10,t=10,r=4473924,i=8947848){r=new Jt(r),i=new Jt(i);const a=t/2,o=e/t,s=e/2,l=[],c=[];for(let f=0,m=0,g=-s;f<=t;f++,g+=o){l.push(-s,0,g,s,0,g),l.push(g,0,-s,g,0,s);const x=f===a?r:i;x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3}const d=new yn;d.setAttribute("position",new Bn(l,3)),d.setAttribute("color",new Bn(c,3));const h=new bu({vertexColors:!0,toneMapped:!1});super(d,h),this.type="GridHelper"}}const v$=new Float32Array(1);new Int32Array(v$.buffer);ao.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(ao.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};oy.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)};x$.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};_$.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Pu.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ZZ.extractUrlBase(n)};Pu.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};ho.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)};ho.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};ho.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};ho.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};ho.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)};td.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")};ed.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};g_.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};Ir.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};Ir.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Ir.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Ir.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Ir.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Ir.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};u0.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)};u0.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};u0.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Se().setFromMatrixColumn(this,3)};u0.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)};u0.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};u0.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};u0.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};u0.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};u0.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)};u0.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};u0.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};u0.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};u0.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};u0.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};u0.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};u0.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};u0.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};u0.prototype.makeFrustum=function(n,e,t,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,r,t,i,a)};u0.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};Hs.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};Si.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)};Si.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};LA.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};LA.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)};LA.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};Lr.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};Lr.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)};Lr.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)};Lr.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)};Lr.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)};Lr.barycoordFromPoint=function(n,e,t,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Lr.getBarycoord(n,e,t,r,i)};Lr.normal=function(n,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Lr.getNormal(n,e,t,r)};kp.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)};kp.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new MA(this,n)};kp.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new TE(this,n)};pt.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};pt.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};pt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Se.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};Se.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};Se.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)};Se.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)};Se.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)};Se.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)};Se.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Se.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};Se.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};xn.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};xn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};nn.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)};nn.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};nn.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)};nn.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};nn.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(nn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Mi.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Mi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),HX},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});aI.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};mi.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(ps.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(vn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===c8},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(c8)}}});vn.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?c8:zh),this};vn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},vn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};yn.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)};yn.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new vn(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)};yn.prototype.addDrawCall=function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)};yn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};yn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};yn.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)};yn.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(yn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Ip.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?c8:zh),this};Ip.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};MA.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};MA.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};MA.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Kh.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(Qr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Jt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===L6}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(No.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});fn.prototype.clearTarget=function(n,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,r)};fn.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)};fn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};fn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};fn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};fn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};fn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};fn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};fn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};fn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};fn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};fn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};fn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};fn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};fn.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)};fn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};fn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};fn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};fn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};fn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};fn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};fn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};fn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};fn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};fn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(fn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?Qn:mu}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});Object.defineProperties(tI.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Ta.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});o$.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new n$().load(n,function(r){e.setBuffer(r)}),this};mE.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};mE.prototype.clear=function(n,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,r)};$c.crossOrigin=void 0;$c.loadTexture=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new VI;i.setCrossOrigin(this.crossOrigin);const a=i.load(n,t,void 0,r);return e&&(a.mapping=e),a};$c.loadTextureCube=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new WZ;i.setCrossOrigin(this.crossOrigin);const a=i.load(n,t,void 0,r);return e&&(a.mapping=e),a};$c.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};$c.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:cE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=cE);function Po(n){for(var e=arguments.length,t=Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+n+(t.length?" "+t.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function _u(n){return!!n&&!!n[$n]}function nl(n){return!!n&&(function(e){if(!e||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===b$}(n)||Array.isArray(n)||!!n[Sb]||!!n.constructor[Sb]||ME(n)||IE(n))}function jc(n,e,t){t===void 0&&(t=!1),kA(n)===0?(t?Object.keys:Y1)(n).forEach(function(r){t&&typeof r=="symbol"||e(r,n[r],n)}):n.forEach(function(r,i){return e(i,r,n)})}function kA(n){var e=n[$n];return e?e.i>3?e.i-4:e.i:Array.isArray(n)?1:ME(n)?2:IE(n)?3:0}function K1(n,e){return kA(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function w$(n,e){return kA(n)===2?n.get(e):n[e]}function LI(n,e,t){var r=kA(n);r===2?n.set(e,t):r===3?(n.delete(e),n.add(t)):n[e]=t}function BI(n,e){return n===e?n!==0||1/n==1/e:n!=n&&e!=e}function ME(n){return F$&&n instanceof Map}function IE(n){return T$&&n instanceof Set}function Ac(n){return n.o||n.t}function OE(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var e=II(n);delete e[$n];for(var t=Y1(e),r=0;r<t.length;r++){var i=t[r],a=e[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(e[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),e)}function kE(n,e){return e===void 0&&(e=!1),NE(n)||_u(n)||!nl(n)||(kA(n)>1&&(n.set=n.add=n.clear=n.delete=y$),Object.freeze(n),e&&jc(n,function(t,r){return kE(r,!0)},!0)),n}function y$(){Po(2)}function NE(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function As(n){var e=fy[n];return e||Po(18,n),e}function E$(n,e){fy[n]||(fy[n]=e)}function cy(){return Zh}function mv(n,e){e&&(As("Patches"),n.u=[],n.s=[],n.v=e)}function f8(n){dy(n),n.p.forEach(C$),n.p=null}function dy(n){n===Zh&&(Zh=n.l)}function db(n){return Zh={p:[],l:Zh,h:n,m:!0,_:0}}function C$(n){var e=n[$n];e.i===0||e.i===1?e.j():e.O=!0}function Sv(n,e){e._=e.p.length;var t=e.p[0],r=n!==void 0&&n!==t;return e.h.g||As("ES5").S(e,n,r),r?(t[$n].P&&(f8(e),Po(4)),nl(n)&&(n=h8(e,n),e.l||p8(e,n)),e.u&&As("Patches").M(t[$n].t,n,e.u,e.s)):n=h8(e,t,[]),f8(e),e.u&&e.v(e.u,e.s),n!==MI?n:void 0}function h8(n,e,t){if(NE(e))return e;var r=e[$n];if(!r)return jc(e,function(a,o){return Ab(n,r,e,a,o,t)},!0),e;if(r.A!==n)return e;if(!r.P)return p8(n,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=OE(r.k):r.o;jc(r.i===3?new Set(i):i,function(a,o){return Ab(n,r,i,a,o,t)}),p8(n,i,!1),t&&n.u&&As("Patches").R(r,t,n.u,n.s)}return r.o}function Ab(n,e,t,r,i,a){if(_u(i)){var o=h8(n,i,a&&e&&e.i!==3&&!K1(e.D,r)?a.concat(r):void 0);if(LI(t,r,o),!_u(o))return;n.m=!1}if(nl(i)&&!NE(i)){if(!n.h.F&&n._<1)return;h8(n,i),e&&e.A.l||p8(n,i)}}function p8(n,e,t){t===void 0&&(t=!1),n.h.F&&n.m&&kE(e,t)}function gv(n,e){var t=n[$n];return(t?Ac(t):n)[e]}function fb(n,e){if(e in n)for(var t=Object.getPrototypeOf(n);t;){var r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Object.getPrototypeOf(t)}}function Xl(n){n.P||(n.P=!0,n.l&&Xl(n.l))}function _v(n){n.o||(n.o=OE(n.t))}function Ay(n,e,t){var r=ME(e)?As("MapSet").N(e,t):IE(e)?As("MapSet").T(e,t):n.g?function(i,a){var o=Array.isArray(i),s={i:o?1:0,A:a?a.A:cy(),P:!1,I:!1,D:{},l:a,t:i,k:null,o:null,j:null,C:!1},l=s,c=$h;o&&(l=[s],c=sh);var d=Proxy.revocable(l,c),h=d.revoke,f=d.proxy;return s.k=f,s.j=h,f}(e,t):As("ES5").J(e,t);return(t?t.A:cy()).p.push(r),r}function V$(n){return _u(n)||Po(22,n),function e(t){if(!nl(t))return t;var r,i=t[$n],a=kA(t);if(i){if(!i.P&&(i.i<4||!As("ES5").K(i)))return i.t;i.I=!0,r=hb(t,a),i.I=!1}else r=hb(t,a);return jc(r,function(o,s){i&&w$(i.t,o)===s||LI(r,o,e(s))}),a===3?new Set(r):r}(n)}function hb(n,e){switch(e){case 2:return new Map(n);case 3:return Array.from(n)}return OE(n)}function D$(){function n(a,o){var s=i[a];return s?s.enumerable=o:i[a]=s={configurable:!0,enumerable:o,get:function(){var l=this[$n];return $h.get(l,a)},set:function(l){var c=this[$n];$h.set(c,a,l)}},s}function e(a){for(var o=a.length-1;o>=0;o--){var s=a[o][$n];if(!s.P)switch(s.i){case 5:r(s)&&Xl(s);break;case 4:t(s)&&Xl(s)}}}function t(a){for(var o=a.t,s=a.k,l=Y1(s),c=l.length-1;c>=0;c--){var d=l[c];if(d!==$n){var h=o[d];if(h===void 0&&!K1(o,d))return!0;var f=s[d],m=f&&f[$n];if(m?m.t!==h:!BI(f,h))return!0}}var g=!!o[$n];return l.length!==Y1(o).length+(g?0:1)}function r(a){var o=a.k;if(o.length!==a.t.length)return!0;var s=Object.getOwnPropertyDescriptor(o,o.length-1);if(s&&!s.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};E$("ES5",{J:function(a,o){var s=Array.isArray(a),l=function(d,h){if(d){for(var f=Array(h.length),m=0;m<h.length;m++)Object.defineProperty(f,""+m,n(m,!0));return f}var g=II(h);delete g[$n];for(var x=Y1(g),E=0;E<x.length;E++){var _=x[E];g[_]=n(_,d||!!g[_].enumerable)}return Object.create(Object.getPrototypeOf(h),g)}(s,a),c={i:s?5:4,A:o?o.A:cy(),P:!1,I:!1,D:{},l:o,t:a,k:l,o:null,O:!1,C:!1};return Object.defineProperty(l,$n,{value:c,writable:!0}),l},S:function(a,o,s){s?_u(o)&&o[$n].A===a&&e(a.p):(a.u&&function l(c){if(c&&typeof c=="object"){var d=c[$n];if(d){var h=d.t,f=d.k,m=d.D,g=d.i;if(g===4)jc(f,function(C){C!==$n&&(h[C]!==void 0||K1(h,C)?m[C]||l(f[C]):(m[C]=!0,Xl(d)))}),jc(h,function(C){f[C]!==void 0||K1(f,C)||(m[C]=!1,Xl(d))});else if(g===5){if(r(d)&&(Xl(d),m.length=!0),f.length<h.length)for(var x=f.length;x<h.length;x++)m[x]=!1;else for(var E=h.length;E<f.length;E++)m[E]=!0;for(var _=Math.min(f.length,h.length),v=0;v<_;v++)f.hasOwnProperty(v)||(m[v]=!0),m[v]===void 0&&l(f[v])}}}}(a.p[0]),e(a.p))},K:function(a){return a.i===4?t(a):r(a)}})}var pb,Zh,UE=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",F$=typeof Map<"u",T$=typeof Set<"u",mb=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",MI=UE?Symbol.for("immer-nothing"):((pb={})["immer-nothing"]=!0,pb),Sb=UE?Symbol.for("immer-draftable"):"__$immer_draftable",$n=UE?Symbol.for("immer-state"):"__$immer_state",b$=""+Object.prototype.constructor,Y1=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,II=Object.getOwnPropertyDescriptors||function(n){var e={};return Y1(n).forEach(function(t){e[t]=Object.getOwnPropertyDescriptor(n,t)}),e},fy={},$h={get:function(n,e){if(e===$n)return n;var t=Ac(n);if(!K1(t,e))return function(i,a,o){var s,l=fb(a,o);return l?"value"in l?l.value:(s=l.get)===null||s===void 0?void 0:s.call(i.k):void 0}(n,t,e);var r=t[e];return n.I||!nl(r)?r:r===gv(n.t,e)?(_v(n),n.o[e]=Ay(n.A.h,r,n)):r},has:function(n,e){return e in Ac(n)},ownKeys:function(n){return Reflect.ownKeys(Ac(n))},set:function(n,e,t){var r=fb(Ac(n),e);if(r!=null&&r.set)return r.set.call(n.k,t),!0;if(!n.P){var i=gv(Ac(n),e),a=i==null?void 0:i[$n];if(a&&a.t===t)return n.o[e]=t,n.D[e]=!1,!0;if(BI(t,i)&&(t!==void 0||K1(n.t,e)))return!0;_v(n),Xl(n)}return n.o[e]===t&&typeof t!="number"&&(t!==void 0||e in n.o)||(n.o[e]=t,n.D[e]=!0,!0)},deleteProperty:function(n,e){return gv(n.t,e)!==void 0||e in n.t?(n.D[e]=!1,_v(n),Xl(n)):delete n.D[e],n.o&&delete n.o[e],!0},getOwnPropertyDescriptor:function(n,e){var t=Ac(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.i!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty:function(){Po(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){Po(12)}},sh={};jc($h,function(n,e){sh[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),sh.deleteProperty=function(n,e){return sh.set.call(this,n,e,void 0)},sh.set=function(n,e,t){return $h.set.call(this,n[0],e,t,n[0])};var P$=function(){function n(t){var r=this;this.g=mb,this.F=!0,this.produce=function(i,a,o){if(typeof i=="function"&&typeof a!="function"){var s=a;a=i;var l=r;return function(x){var E=this;x===void 0&&(x=s);for(var _=arguments.length,v=Array(_>1?_-1:0),C=1;C<_;C++)v[C-1]=arguments[C];return l.produce(x,function(D){var V;return(V=a).call.apply(V,[E,D].concat(v))})}}var c;if(typeof a!="function"&&Po(6),o!==void 0&&typeof o!="function"&&Po(7),nl(i)){var d=db(r),h=Ay(r,i,void 0),f=!0;try{c=a(h),f=!1}finally{f?f8(d):dy(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(x){return mv(d,o),Sv(x,d)},function(x){throw f8(d),x}):(mv(d,o),Sv(c,d))}if(!i||typeof i!="object"){if((c=a(i))===void 0&&(c=i),c===MI&&(c=void 0),r.F&&kE(c,!0),o){var m=[],g=[];As("Patches").M(i,c,m,g),o(m,g)}return c}Po(21,i)},this.produceWithPatches=function(i,a){if(typeof i=="function")return function(c){for(var d=arguments.length,h=Array(d>1?d-1:0),f=1;f<d;f++)h[f-1]=arguments[f];return r.produceWithPatches(c,function(m){return i.apply(void 0,[m].concat(h))})};var o,s,l=r.produce(i,a,function(c,d){o=c,s=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,s]}):[l,o,s]},typeof(t==null?void 0:t.useProxies)=="boolean"&&this.setUseProxies(t.useProxies),typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=n.prototype;return e.createDraft=function(t){nl(t)||Po(8),_u(t)&&(t=V$(t));var r=db(this),i=Ay(this,t,void 0);return i[$n].C=!0,dy(r),i},e.finishDraft=function(t,r){var i=t&&t[$n],a=i.A;return mv(a,r),Sv(void 0,a)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!mb&&Po(20),this.g=t},e.applyPatches=function(t,r){var i;for(i=r.length-1;i>=0;i--){var a=r[i];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}i>-1&&(r=r.slice(i+1));var o=As("Patches").$;return _u(t)?o(t,r):this.produce(t,function(s){return o(s,r)})},n}(),La=new P$,OI=La.produce;La.produceWithPatches.bind(La);La.setAutoFreeze.bind(La);La.setUseProxies.bind(La);La.applyPatches.bind(La);La.createDraft.bind(La);La.finishDraft.bind(La);function R$(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _b(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gb(Object(t),!0).forEach(function(r){R$(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gb(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Li(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var xb=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),xv=function(){return Math.random().toString(36).substring(7).split("").join(".")},m8={INIT:"@@redux/INIT"+xv(),REPLACE:"@@redux/REPLACE"+xv(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+xv()}};function L$(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function kI(n,e,t){var r;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Li(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Li(1));return t(kI)(n,e)}if(typeof n!="function")throw new Error(Li(2));var i=n,a=e,o=[],s=o,l=!1;function c(){s===o&&(s=o.slice())}function d(){if(l)throw new Error(Li(3));return a}function h(x){if(typeof x!="function")throw new Error(Li(4));if(l)throw new Error(Li(5));var E=!0;return c(),s.push(x),function(){if(!!E){if(l)throw new Error(Li(6));E=!1,c();var v=s.indexOf(x);s.splice(v,1),o=null}}}function f(x){if(!L$(x))throw new Error(Li(7));if(typeof x.type>"u")throw new Error(Li(8));if(l)throw new Error(Li(9));try{l=!0,a=i(a,x)}finally{l=!1}for(var E=o=s,_=0;_<E.length;_++){var v=E[_];v()}return x}function m(x){if(typeof x!="function")throw new Error(Li(10));i=x,f({type:m8.REPLACE})}function g(){var x,E=h;return x={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Li(11));function C(){v.next&&v.next(d())}C();var D=E(C);return{unsubscribe:D}}},x[xb]=function(){return this},x}return f({type:m8.INIT}),r={dispatch:f,subscribe:h,getState:d,replaceReducer:m},r[xb]=g,r}function B$(n){Object.keys(n).forEach(function(e){var t=n[e],r=t(void 0,{type:m8.INIT});if(typeof r>"u")throw new Error(Li(12));if(typeof t(void 0,{type:m8.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Li(13))})}function M$(n){for(var e=Object.keys(n),t={},r=0;r<e.length;r++){var i=e[r];typeof n[i]=="function"&&(t[i]=n[i])}var a=Object.keys(t),o;try{B$(t)}catch(s){o=s}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},f=0;f<a.length;f++){var m=a[f],g=t[m],x=l[m],E=g(x,c);if(typeof E>"u")throw c&&c.type,new Error(Li(14));h[m]=E,d=d||E!==x}return d=d||a.length!==Object.keys(l).length,d?h:l}}function S8(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function I$(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){return function(){var i=r.apply(void 0,arguments),a=function(){throw new Error(Li(15))},o={getState:i.getState,dispatch:function(){return a.apply(void 0,arguments)}},s=e.map(function(l){return l(o)});return a=S8.apply(void 0,s)(i.dispatch),_b(_b({},i),{},{dispatch:a})}}}function NI(n){var e=function(r){var i=r.dispatch,a=r.getState;return function(o){return function(s){return typeof s=="function"?s(i,a,n):o(s)}}};return e}var UI=NI();UI.withExtraArgument=NI;const vb=UI;var O$=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();globalThis&&globalThis.__generator;var g8=globalThis&&globalThis.__spreadArray||function(n,e){for(var t=0,r=e.length,i=n.length;t<r;t++,i++)n[i]=e[t];return n},k$=Object.defineProperty,wb=Object.getOwnPropertySymbols,N$=Object.prototype.hasOwnProperty,U$=Object.prototype.propertyIsEnumerable,yb=function(n,e,t){return e in n?k$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t},ep=function(n,e){for(var t in e||(e={}))N$.call(e,t)&&yb(n,t,e[t]);if(wb)for(var r=0,i=wb(e);r<i.length;r++){var t=i[r];U$.call(e,t)&&yb(n,t,e[t])}return n},j$=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?S8:S8.apply(null,arguments)};function G$(n){if(typeof n!="object"||n===null)return!1;var e=Object.getPrototypeOf(n);if(e===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return e===t}var H$=function(n){O$(e,n);function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=n.apply(this,t)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n.prototype.concat.apply(this,t)},e.prototype.prepend=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.length===1&&Array.isArray(t[0])?new(e.bind.apply(e,g8([void 0],t[0].concat(this)))):new(e.bind.apply(e,g8([void 0],t.concat(this))))},e}(Array);function hy(n){return nl(n)?OI(n,function(){}):n}function z$(n){return typeof n=="boolean"}function W$(){return function(e){return X$(e)}}function X$(n){n===void 0&&(n={});var e=n.thunk,t=e===void 0?!0:e;n.immutableCheck,n.serializableCheck;var r=new H$;return t&&(z$(t)?r.push(vb):r.push(vb.withExtraArgument(t.extraArgument))),r}var K$=!0;function Y$(n){var e=W$(),t=n||{},r=t.reducer,i=r===void 0?void 0:r,a=t.middleware,o=a===void 0?e():a,s=t.devTools,l=s===void 0?!0:s,c=t.preloadedState,d=c===void 0?void 0:c,h=t.enhancers,f=h===void 0?void 0:h,m;if(typeof i=="function")m=i;else if(G$(i))m=M$(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=o;typeof g=="function"&&(g=g(e));var x=I$.apply(void 0,g),E=S8;l&&(E=j$(ep({trace:!K$},typeof l=="object"&&l)));var _=[x];Array.isArray(f)?_=g8([x],f):typeof f=="function"&&(_=f(_));var v=E.apply(void 0,_);return kI(m,d,v)}function tp(n,e){function t(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var a=e.apply(void 0,r);if(!a)throw new Error("prepareAction did not return an object");return ep(ep({type:n,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:n,payload:r[0]}}return t.toString=function(){return""+n},t.type=n,t.match=function(r){return r.type===n},t}function jI(n){var e={},t=[],r,i={addCase:function(a,o){var s=typeof a=="string"?a:a.type;if(s in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[s]=o,i},addMatcher:function(a,o){return t.push({matcher:a,reducer:o}),i},addDefaultCase:function(a){return r=a,i}};return n(i),[e,t,r]}function q$(n){return typeof n=="function"}function Q$(n,e,t,r){t===void 0&&(t=[]);var i=typeof e=="function"?jI(e):[e,t,r],a=i[0],o=i[1],s=i[2],l;if(q$(n))l=function(){return hy(n())};else{var c=hy(n);l=function(){return c}}function d(h,f){h===void 0&&(h=l());var m=g8([a[f.type]],o.filter(function(g){var x=g.matcher;return x(f)}).map(function(g){var x=g.reducer;return x}));return m.filter(function(g){return!!g}).length===0&&(m=[s]),m.reduce(function(g,x){if(x)if(_u(g)){var E=g,_=x(E,f);return typeof _>"u"?g:_}else{if(nl(g))return OI(g,function(v){return x(v,f)});var _=x(g,f);if(typeof _>"u"){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}return g},h)}return d.getInitialState=l,d}function J$(n,e){return n+"/"+e}function jE(n){var e=n.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var t=typeof n.initialState=="function"?n.initialState:hy(n.initialState),r=n.reducers||{},i=Object.keys(r),a={},o={},s={};i.forEach(function(d){var h=r[d],f=J$(e,d),m,g;"reducer"in h?(m=h.reducer,g=h.prepare):m=h,a[d]=m,o[f]=m,s[d]=g?tp(f,g):tp(f)});function l(){var d=typeof n.extraReducers=="function"?jI(n.extraReducers):[n.extraReducers],h=d[0],f=h===void 0?{}:h,m=d[1],g=m===void 0?[]:m,x=d[2],E=x===void 0?void 0:x,_=ep(ep({},f),o);return Q$(t,_,g,E)}var c;return{name:e,reducer:function(d,h){return c||(c=l()),c(d,h)},actions:s,caseReducers:a,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var GE="listenerMiddleware";tp(GE+"/add");tp(GE+"/removeAll");tp(GE+"/remove");D$();const on={readDiscreteProperty:function(n,e){let r=new RegExp("^\\s*[;\\/]+\\s*"+e+":(.+)$","gim").exec(n);return r?r[1]:null},readDiscretePropertySet:function(n,e){const t=new RegExp("^\\s*[;\\/]+\\s*"+e+":(.+)$","gim");let r=null;const i=[];do r=t.exec(n),r&&i.push(r[1].trim());while(r);return i},clearDiscreteProperties(n,e){return e.forEach(t=>{const r=new RegExp("^\\s*[;\\/]+\\s*"+t+`:.*[\r
]*`,"gim");n=n.replace(r,"")}),n},writeDiscreteProperty(n,e,t,r){return`${r} ${e}: ${t}
`+n},writeDiscretePropertyArray(n,e,t,r){for(let i=t.length-1;i>=0;i--)n=`${r} ${e}: ${t[i]}
`+n;return n},readSupportedGames:function(n){let e=on.readDiscreteProperty(n,"GAMES");if(e!==null){let t=e.trim().split(",");const r=[];for(let i=0;i<t.length;i++){let a=t[i];Qe[a]&&r.push(Qe[a])}return r}return null},readExecutionType:function(n){let e=on.readDiscreteProperty(n,"EXECUTION");if(e)return Yj(e.trim())},readParameters:function(n){const e=on.readDiscretePropertySet(n,"PARAM"),t=[];return e.forEach(r=>{const i=r.split("|");if(i.length!==2)return;const a={name:i[1],type:i[0]};try{on.validateParameters([a]),t.push(a)}catch{}}),t},validParameterNameRegex:/^[\w?!]*$/,validateParameters:function(n){!n||n.forEach(e=>{if(!e.name)throw new Error("An event parameter didn't have a name");if(!e.type)throw new Error("An event parameter didn't have a type");if(!e.name.match(on.validParameterNameRegex))throw new Error(`Event parameter name '${e.name}' is not valid`);if(qj.indexOf(e.type)===-1)throw new Error(`Event parameter type ${e.type} is not recognized`)})},testCustomEvent:async function(n,e,t,r={}){switch(n){case y0.MIPS:return on.testAssemble(e,t,r);case y0.C:return on.testCompile(e,t,r);default:throw new Error(`Unrecognized event code language: ${n}`)}},testAssemble:function(n,e,t={}){const r=Eb(e),i=oo(y0.MIPS,n),a=V3(n,i,{parameterValues:r},Object.assign({addr:0,audioIndices:jd(1,50),boardInfo:bg,board:{additionalbg:jd("",50)},testCompile:!0},t));return tl(a)},testCompile:async function(n,e,t={}){const r=Eb(e),i=oo(y0.C,n),a=w6(n,i,{parameterValues:r},{testCompile:!0,audioIndices:jd(1,50),boardInfo:bg,board:{additionalbg:jd("",50)},...t});wt(a);const o=await bA(a);wt(o);const s=V3(o,i,{},Object.assign({addr:0,audioIndices:jd(1,50),boardInfo:bg,board:{additionalbg:jd("",50)}},t));return tl(s),o}};function Eb(n){const e={};return n&&n.length&&n.forEach(t=>{e[t.name]=0}),e}function oo(n,e){let t=on.readDiscreteProperty(e,"NAME");if(!t||!t.trim())throw new Error("Custom event must have a name");t=t.trim();const r=t,i=on.readExecutionType(e);if(!i)throw new Error("Custom event must have execution type");const a=on.readSupportedGames(e);if(!a)throw new Error("Custom event must have supported games list");const o=on.readParameters(e);return{id:r,name:t,custom:!0,language:n,asm:e,activationType:Yt.LANDON,executionType:i,supportedGames:a,parameters:o}}async function HE(n){const{language:e,parameters:t,supportedGames:r}=n;t&&on.validateParameters(t);const i=n.asm;for(let a=0;a<r.length;a++){const o=r[a];try{await on.testCustomEvent(e,i,t,{game:o})}catch(s){const l="Failed a test compile/assembly for "+Oc(o)+`. The event code may need adjustments before it can be used.

`+s;throw console.error(l+`

`+i),console.error(s),new Error(l)}}return!0}async function Z$(n,e,t,r,i,a){wt("Writing custom event",e,t);const o=oo(r,i);if(r===y0.C){const s=w6(i,o,e,t);i=await bA(s)}return i}var gh=(n=>(n[n.None=0]="None",n[n.Library=1]="Library",n[n.Board=2]="Board",n))(gh||{});const $$={boards:[],romBoards:[],currentBoardIndex:0,currentBoardIsROM:!1,selectedSpaceIndices:{},selectionBoxCoords:null,highlightedSpaceIndices:null,temporaryConnections:null,eventLibrary:{},currentEventId:null,currentEventType:0,hoveredBoardEventIndex:-1},GI=jE({name:"boardState",initialState:$$,reducers:{setBoardsAction:(n,e)=>{let{boards:t}=e.payload;n.boards=t},addBoardAction:(n,e)=>{let{board:t,rom:r}=e.payload;(r?n.romBoards:n.boards).push(t)},deleteBoardAction:(n,e)=>{const{boardIndex:t}=e.payload;if(isNaN(t)||t<0||t>=n.boards.length)return;n.boards.length===1&&n.boards.push(K8()),n.boards.splice(t,1);let r=-1;n.currentBoardIndex>t?r=n.currentBoardIndex-1:n.boards.length===1?r=0:n.currentBoardIndex===t&&n.currentBoardIndex===n.boards.length&&(r=n.currentBoardIndex-1),r>=0&&(n.currentBoardIndex=r,n.currentBoardIsROM=!1)},setCurrentBoardAction:(n,e)=>{let{index:t,rom:r}=e.payload;const i=n.currentBoardIndex!==t||n.currentBoardIsROM!==r;n.currentBoardIndex=t,n.currentBoardIsROM=r,i&&(n.selectedSpaceIndices={},n.selectionBoxCoords=null,n.hoveredBoardEventIndex=-1,n.temporaryConnections=null,n.highlightedSpaceIndices=null)},clearBoardsFromROMAction:n=>{n.romBoards=[],n.boards.length||n.boards.push(K8())},copyCurrentBoardAction:(n,e)=>{let t=J0(n),r=pu(t);delete r._rom,r.name="Copy of "+r.name;let i;n.currentBoardIsROM?(i=n.boards.length,n.boards.push(r)):(i=n.currentBoardIndex+1,n.boards.splice(i,0,r)),e.payload.makeCurrent&&(n.currentBoardIndex=i,n.currentBoardIsROM=!1)},setBoardNameAction:(n,e)=>{const t=J0(n);t.name=e.payload.name},setBoardDescriptionAction:(n,e)=>{const t=J0(n);t.description=e.payload.description},setBoardDifficultyAction:(n,e)=>{const t=J0(n);t.difficulty=e.payload.difficulty},setBoardCostumeTypeIndexAction:(n,e)=>{const t=J0(n);t.costumeTypeIndex=e.payload.costumeType},setBackgroundAction:(n,e)=>{const{bg:t}=e.payload,r=J0(n);r.bg.src=t},setBoardOtherBgAction:(n,e)=>{const{name:t,value:r}=e.payload,i=J0(n);i.otherbg[t]=r},addAnimationBackgroundAction:(n,e)=>{const{bg:t}=e.payload,r=J0(n);r.animbg=r.animbg||[],r.animbg.push(t)},removeAnimationBackgroundAction:(n,e)=>{const{index:t}=e.payload,r=J0(n);!r.animbg||r.animbg.length<=t||t<0||r.animbg.splice(t,1)},addAdditionalBackgroundAction:(n,e)=>{let{bg:t}=e.payload;const r=J0(n);r.additionalbg=r.additionalbg||[],r.additionalbg.push(t)},removeAdditionalBackgroundAction:(n,e)=>{let{index:t}=e.payload;const r=J0(n);!r.additionalbg||r.additionalbg.length<=t||t<0||r.additionalbg.splice(t,1)},setAdditionalBackgroundCodeAction:(n,e)=>{let{code:t,language:r}=e.payload;const i=J0(n);t?i.additionalbgcode={code:t,language:r}:delete i.additionalbgcode},setAudioSelectCodeAction:(n,e)=>{let{code:t,language:r}=e.payload;const i=J0(n);t?i.audioSelectCode={code:t,language:r}:delete i.audioSelectCode},setBoardAudioAction:(n,e)=>{let{audioChanges:t}=e.payload;const r=J0(n);if("audioType"in t)switch(r.audioType=t.audioType,t.audioType){case eo.Custom:r.audioData||(r.audioData=[]);break}typeof t.gameAudioIndex=="number"&&(r.audioIndex=t.gameAudioIndex);const i=t.customAudioIndex;typeof i=="number"&&(O0(Array.isArray(r.audioData)),O0(i<=r.audioData.length),i===r.audioData.length&&r.audioData.push({name:"(select a midi file)",data:"",soundbankIndex:0}),t.delete?(O0(i<r.audioData.length),r.audioData.splice(i,1)):(t.midiName&&(r.audioData[i].name=t.midiName),t.midiData&&(r.audioData[i].data=t.midiData),typeof t.soundbankIndex=="number"&&(r.audioData[i].soundbankIndex=t.soundbankIndex)))},addSpaceAction:(n,e)=>{let{x:t,y:r,type:i,subtype:a}=e.payload;const o=J0(n);Gk(t,r,i,a,o,n.eventLibrary)},removeSpaceAction:(n,e)=>{let{index:t}=e.payload;const r=J0(n);Cb(n,r,t)},removeSpacesAction:(n,e)=>{const{spaceIndices:t}=e.payload,r=J0(n);for(let i=0;i<t.length;i++){const a=t[i];if(Cb(n,r,a))for(let o=i+1;o<t.length;o++)t[o]>a&&t[o]--}},addConnectionAction:(n,e)=>{let{startSpaceIndex:t,endSpaceIndex:r}=e.payload;const i=J0(n);zk(t,r,i),n.temporaryConnections=null},eraseConnectionsAction:(n,e)=>{let{x:t,y:r}=e.payload;const i=J0(n);Xee(i,t,r)},setTemporaryUIConnections:(n,e)=>{let{connections:t}=e.payload;n.temporaryConnections=t},setSpacePositionsAction:(n,e)=>{const{spaceIndices:t,coords:r}=e.payload,i=J0(n);for(let a=0;a<t.length;a++){const o=i.spaces[t[a]],s=r[a];typeof s.x=="number"&&(o.x=s.x),typeof s.y=="number"&&(o.y=s.y),typeof s.z=="number"&&(o.z=s.z)}},setSpaceTypeAction:(n,e)=>{const{spaceIndices:t,type:r,subtype:i}=e.payload,a=J0(n);for(let o=0;o<t.length;o++){const s=a.spaces[t[o]];r!==void 0&&(s.type=r,s.rotation&&delete s.rotation),i!==void 0?s.subtype=i:delete s.subtype}},setSpaceSubtypeAction:(n,e)=>{const{spaceIndices:t,subtype:r}=e.payload,i=J0(n);for(let a=0;a<t.length;a++){const o=i.spaces[t[a]];typeof r>"u"?delete o.subtype:o.subtype=r}},setSpaceHostsStarAction:(n,e)=>{let{spaceIndices:t,hostsStar:r}=e.payload;const i=J0(n);for(let a=0;a<t.length;a++){const o=i.spaces[t[a]];r?o.star=!0:delete o.star}},setSpaceRotationAction:(n,e)=>{let{spaceIndex:t,angleYAxisDeg:r}=e.payload;Qee(n);const a=J0(n).spaces[t];if(!a)throw new Error("setSpaceRotation: Invalid space index "+t);a.rotation=Math.round(r)},addSelectedSpaceAction:(n,e)=>{let t=e.payload;n.selectedSpaceIndices[t]=!0},setSelectedSpaceAction:(n,e)=>{let t=e.payload;n.selectedSpaceIndices={[t]:!0}},setSelectedSpacesAction:(n,e)=>{let t=e.payload;const r={};for(const i of t)r[i]=!0;n.selectedSpaceIndices=r},clearSelectedSpacesAction:(n,e)=>{n.selectedSpaceIndices={}},setHighlightedSpacesAction:(n,e)=>{const{spaceIndices:t}=e.payload;n.highlightedSpaceIndices=t},setSelectionBoxCoordsAction:(n,e)=>{const{selectionCoords:t}=e.payload;n.selectionBoxCoords=t},changeCurrentEventAction:(n,e)=>{const{id:t,type:r}=e.payload;n.currentEventId=t,n.currentEventType=r},addEventToLibraryAction:(n,e)=>{const{event:t}=e.payload;n.eventLibrary[t.id]=t},removeEventFromLibraryAction:(n,e)=>{const{eventId:t}=e.payload;if(!n.eventLibrary[t])throw new Error(`Cannot remove event ${t}, as it isn't in the event library`);if(!n.eventLibrary[t].custom)throw new Error(`Cannot remove event ${t}, as it is a built-in event`);delete n.eventLibrary[t]},addEventToBoardAction:(n,e)=>{const{event:t}=e.payload,r=J0(n);if(r.boardevents||(r.boardevents=[]),r.boardevents.push(t),t.custom){const i=qee(n,t.id,r);p4(r,i)}},removeEventFromBoardAction:(n,e)=>{const{eventIndex:t}=e.payload,r=J0(n);JI(r,t)},includeEventInBoardAction:(n,e)=>{const{event:t}=e.payload,r=J0(n);p4(r,t)},excludeEventFromBoardAction:(n,e)=>{let{eventId:t}=e.payload;const r=J0(n);Yee(r,t)},setHoveredBoardEventIndexAction:(n,e)=>{let{eventIndex:t}=e.payload;n.hoveredBoardEventIndex=t},setBoardEventActivationTypeAction:(n,e)=>{let{eventIndex:t,activationType:r}=e.payload;const a=J0(n).boardevents[t];a.activationType=r},setBoardEventEventParameterAction:(n,e)=>{let{eventIndex:t,name:r,value:i}=e.payload;const o=J0(n).boardevents[t];o.parameterValues||(o.parameterValues={}),o.parameterValues[r]=i},addEventToSpaceAction:(n,e)=>{const{event:t,toStart:r}=e.payload,i=J0(n),a=OS(n);cs(i,a,t,r||!1,n.eventLibrary)},removeEventFromSpaceAction:(n,e)=>{let{eventIndex:t}=e.payload;const r=OS(n);ZI(r,t)},setSpaceEventActivationTypeAction:(n,e)=>{let{eventIndex:t,activationType:r}=e.payload;const a=OS(n).events[t];a.activationType=r},setSpaceEventEventParameterAction:(n,e)=>{let{eventIndex:t,name:r,value:i}=e.payload;const o=OS(n).events[t];o.parameterValues||(o.parameterValues={}),o.parameterValues[r]=i}}}),{setBoardsAction:eee,addBoardAction:HI,deleteBoardAction:tee,setCurrentBoardAction:nee,clearBoardsFromROMAction:ree,copyCurrentBoardAction:iee,setBoardNameAction:aee,setBoardDescriptionAction:oee,setBoardDifficultyAction:see,setBoardCostumeTypeIndexAction:lee,setBackgroundAction:uee,setBoardOtherBgAction:cee,addAnimationBackgroundAction:dee,removeAnimationBackgroundAction:Aee,addAdditionalBackgroundAction:fee,removeAdditionalBackgroundAction:hee,setAdditionalBackgroundCodeAction:pee,setAudioSelectCodeAction:mee,setBoardAudioAction:See,addConnectionAction:gee,eraseConnectionsAction:_ee,setTemporaryUIConnections:zE,addSpaceAction:xee,removeSpaceAction:vee,removeSpacesAction:wee,setSpacePositionsAction:qs,setSpaceTypeAction:zI,setSpaceSubtypeAction:py,setSpaceHostsStarAction:yee,setSpaceRotationAction:WI,addSelectedSpaceAction:Eee,setSelectedSpaceAction:XI,setSelectedSpacesAction:KI,clearSelectedSpacesAction:YI,setHighlightedSpacesAction:_8,setSelectionBoxCoordsAction:WE,changeCurrentEventAction:Cee,addEventToLibraryAction:XE,removeEventFromLibraryAction:Vee,addEventToBoardAction:Dee,removeEventFromBoardAction:Fee,includeEventInBoardAction:Tee,excludeEventFromBoardAction:bee,setHoveredBoardEventIndexAction:qI,setBoardEventActivationTypeAction:Pee,setBoardEventEventParameterAction:Ree,addEventToSpaceAction:Lee,removeEventFromSpaceAction:Bee,setSpaceEventActivationTypeAction:Mee,setSpaceEventEventParameterAction:Iee}=GI.actions,Oee=n=>n.data.present,KE=n=>n.data.present.boards,kee=n=>n.data.present.romBoards,Nee=n=>n.data.present.currentBoardIsROM,rl=n=>n.data.present.currentBoardIsROM?n.data.present.romBoards[n.data.present.currentBoardIndex]:n.data.present.boards[n.data.present.currentBoardIndex],Uee=n=>n.data.present.selectionBoxCoords,jee=n=>n.data.present.hoveredBoardEventIndex,QI=n=>{var e,t;return(t=(e=n.data)==null?void 0:e.present)==null?void 0:t.highlightedSpaceIndices},Gee=n=>n.data.present.temporaryConnections,Up=n=>n.data.present.selectedSpaceIndices,Hee=n=>{switch(n.data.present.currentEventType){case 2:O0(!!n.data.present.currentEventId);const e=rl(n).events[n.data.present.currentEventId];return O0(typeof e!="string"),oo(e.language,e.code);case 1:return O0(!!n.data.present.currentEventId),n.data.present.eventLibrary[n.data.present.currentEventId];case 0:default:return null}},zee=n=>n.data.present.currentEventType,y_=n=>n.data.present.eventLibrary;function Cb(n,e,t){if(t<0||t>=e.spaces.length)return!1;Wee(t,e),Kee(t,e,n.eventLibrary);let r=e.spaces.length;e.spaces.splice(t,1);function i(s){return parseInt(s)>parseInt(t)?s-1:s}let a,o;for(let s=0;s<r;s++)!e.links.hasOwnProperty(s)||(a=i(s),o=e.links[s],a!==s&&delete e.links[s],Array.isArray(o)?e.links[a]=o.map(i):e.links[a]=i(o));return eV(e,n.eventLibrary,(s,l)=>{var c;switch(s.type){case i0.Space:l.parameterValues&&l.parameterValues.hasOwnProperty(s.name)&&(l.parameterValues[s.name]=i(l.parameterValues[s.name]));break;case i0.SpaceArray:const d=(c=l.parameterValues)==null?void 0:c[s.name];l.parameterValues&&Array.isArray(d)&&(l.parameterValues[s.name]=d.map(i));break}}),!0}function Wee(n,e){if(!!e.links){delete e.links[n];for(let t in e.links){let r=e.links[t];if(Array.isArray(r)){let i=r.indexOf(n);i!==-1&&r.splice(i,1),r.length===1?e.links[t]=r[0]:r.length||delete e.links[t]}else r===n&&delete e.links[t]}}}function Xee(n,e,t){let r=n.spaces,i=n.links,a=!1;for(let o in i){let s=r[o],l,c=i[o];if(Array.isArray(c)){let d=0;for(;d<c.length;)l=r[c[d]],Vb(s,l,e,t)?(c.splice(d,1),a=!0):d++;c.length===1?i[o]=c=c[0]:c.length||delete i[o]}else l=r[c],Vb(s,l,e,t)&&(delete i[o],a=!0)}return a}function Vb(n,e,t,r){return t>n.x&&t>e.x||t<n.x&&t<e.x||r>n.y&&r>e.y||r<n.y&&r<e.y?!1:xG(t,r,n.x,n.y,e.x,e.y)<=4}function Kee(n,e,t){eV(e,t,(r,i)=>{var a;switch(r.type){case i0.Space:i.parameterValues&&i.parameterValues.hasOwnProperty(r.name)&&i.parameterValues[r.name]===n&&delete i.parameterValues[r.name];break;case i0.SpaceArray:const o=(a=i.parameterValues)==null?void 0:a[r.name];i.parameterValues&&Array.isArray(o)&&(i.parameterValues[r.name]=o.filter(s=>s!==n));break}})}function J0(n){return n.currentBoardIsROM?n.romBoards[n.currentBoardIndex]:n.boards[n.currentBoardIndex]}function OS(n){const e=Object.keys(n.selectedSpaceIndices).map(r=>parseInt(r,10));O0(e.length===1);const t=J0(n).spaces[e[0]];return O0(!!t),t}function JI(n,e){var t;(t=n.boardevents)!=null&&t.length&&e>=0&&n.boardevents.splice(e,1)}function Yee(n,e){n.events&&delete n.events[e],Zp(n,(t,r,i)=>{t.id===e&&(i?ZI(i,r):JI(n,r))})}function ZI(n,e){!n||!n.events||e>=0&&n.events.splice(e,1)}function qee(n,e,t){if(t&&t.events&&!!Ss(t,e)){const r=Ss(t,e);return oo(r.language,r.code)}return n.eventLibrary[e]}function Qee(n){if(n.currentBoardIsROM)throw new Error("Current board must not be a ROM board.")}const Jee=GI.reducer;var $I={exports:{}},e5={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dA=Ne.exports;function Zee(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var $ee=typeof Object.is=="function"?Object.is:Zee,ete=dA.useState,tte=dA.useEffect,nte=dA.useLayoutEffect,rte=dA.useDebugValue;function ite(n,e){var t=e(),r=ete({inst:{value:t,getSnapshot:e}}),i=r[0].inst,a=r[1];return nte(function(){i.value=t,i.getSnapshot=e,vv(i)&&a({inst:i})},[n,t,e]),tte(function(){return vv(i)&&a({inst:i}),n(function(){vv(i)&&a({inst:i})})},[n]),rte(t),t}function vv(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!$ee(n,t)}catch{return!0}}function ate(n,e){return e()}var ote=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ate:ite;e5.useSyncExternalStore=dA.useSyncExternalStore!==void 0?dA.useSyncExternalStore:ote;(function(n){n.exports=e5})($I);var t5={exports:{}},n5={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_=Ne.exports,ste=$I.exports;function lte(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ute=typeof Object.is=="function"?Object.is:lte,cte=ste.useSyncExternalStore,dte=E_.useRef,Ate=E_.useEffect,fte=E_.useMemo,hte=E_.useDebugValue;n5.useSyncExternalStoreWithSelector=function(n,e,t,r,i){var a=dte(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=fte(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),i!==void 0&&o.hasValue){var g=o.value;if(i(g,m))return h=g}return h=m}if(g=h,ute(d,m))return g;var x=r(m);return i!==void 0&&i(g,x)?g:(d=m,h=x)}var c=!1,d,h,f=t===void 0?null:t;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,t,r,i]);var s=cte(n,a[0],a[1]);return Ate(function(){o.hasValue=!0,o.value=s},[s]),hte(s),s};(function(n){n.exports=n5})(t5);var ls={exports:{}},Ma={},r5={exports:{}},i5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,G){var re=O.length;O.push(G);e:for(;0<re;){var oe=re-1>>>1,se=O[oe];if(0<i(se,G))O[oe]=G,O[re]=se,re=oe;else break e}}function t(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var G=O[0],re=O.pop();if(re!==G){O[0]=re;e:for(var oe=0,se=O.length,be=se>>>1;oe<be;){var Be=2*(oe+1)-1,Te=O[Be],ye=Be+1,We=O[ye];if(0>i(Te,re))ye<se&&0>i(We,Te)?(O[oe]=We,O[ye]=re,oe=ye):(O[oe]=Te,O[Be]=re,oe=Be);else if(ye<se&&0>i(We,re))O[oe]=We,O[ye]=re,oe=ye;else break e}}return G}function i(O,G){var re=O.sortIndex-G.sortIndex;return re!==0?re:O.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var l=[],c=[],d=1,h=null,f=3,m=!1,g=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(O){for(var G=t(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=O)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function D(O){if(x=!1,C(O),!g)if(t(l)!==null)g=!0,ce(V);else{var G=t(c);G!==null&&U(D,G.startTime-O)}}function V(O,G){g=!1,x&&(x=!1,_(j),j=-1),m=!0;var re=f;try{for(C(G),h=t(l);h!==null&&(!(h.expirationTime>G)||O&&!z());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,f=h.priorityLevel;var se=oe(h.expirationTime<=G);G=n.unstable_now(),typeof se=="function"?h.callback=se:h===t(l)&&r(l),C(G)}else r(l);h=t(l)}if(h!==null)var be=!0;else{var Be=t(c);Be!==null&&U(D,Be.startTime-G),be=!1}return be}finally{h=null,f=re,m=!1}}var H=!1,R=null,j=-1,te=5,$=-1;function z(){return!(n.unstable_now()-$<te)}function I(){if(R!==null){var O=n.unstable_now();$=O;var G=!0;try{G=R(!0,O)}finally{G?q():(H=!1,R=null)}}else H=!1}var q;if(typeof v=="function")q=function(){v(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ee=P.port2;P.port1.onmessage=I,q=function(){ee.postMessage(null)}}else q=function(){E(I,0)};function ce(O){R=O,H||(H=!0,q())}function U(O,G){j=E(function(){O(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,ce(V))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var re=f;f=G;try{return O()}finally{f=re}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var re=f;f=O;try{return G()}finally{f=re}},n.unstable_scheduleCallback=function(O,G,re){var oe=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?oe+re:oe):re=oe,O){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=re+se,O={id:d++,callback:G,priorityLevel:O,startTime:re,expirationTime:se,sortIndex:-1},re>oe?(O.sortIndex=re,e(c,O),t(l)===null&&O===t(c)&&(x?(_(j),j=-1):x=!0,U(D,re-oe))):(O.sortIndex=se,e(l,O),g||m||(g=!0,ce(V))),O},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(O){var G=f;return function(){var re=f;f=G;try{return O.apply(this,arguments)}finally{f=re}}}})(i5);(function(n){n.exports=i5})(r5);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a5=Ne.exports,Ba=r5.exports;function Et(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o5=new Set,np={};function nd(n,e){AA(n,e),AA(n+"Capture",e)}function AA(n,e){for(np[n]=e,n=0;n<e.length;n++)o5.add(e[n])}var il=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),my=Object.prototype.hasOwnProperty,pte=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Db={},Fb={};function mte(n){return my.call(Fb,n)?!0:my.call(Db,n)?!1:pte.test(n)?Fb[n]=!0:(Db[n]=!0,!1)}function Ste(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function gte(n,e,t,r){if(e===null||typeof e>"u"||Ste(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ea(n,e,t,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var _i={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){_i[n]=new ea(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];_i[e]=new ea(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){_i[n]=new ea(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){_i[n]=new ea(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){_i[n]=new ea(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){_i[n]=new ea(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){_i[n]=new ea(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){_i[n]=new ea(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){_i[n]=new ea(n,5,!1,n.toLowerCase(),null,!1,!1)});var YE=/[\-:]([a-z])/g;function qE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(YE,qE);_i[e]=new ea(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(YE,qE);_i[e]=new ea(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(YE,qE);_i[e]=new ea(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){_i[n]=new ea(n,1,!1,n.toLowerCase(),null,!1,!1)});_i.xlinkHref=new ea("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){_i[n]=new ea(n,1,!1,n.toLowerCase(),null,!0,!0)});function QE(n,e,t,r){var i=_i.hasOwnProperty(e)?_i[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gte(e,t,i,r)&&(t=null),r||i===null?mte(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var cl=a5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kS=Symbol.for("react.element"),D1=Symbol.for("react.portal"),F1=Symbol.for("react.fragment"),JE=Symbol.for("react.strict_mode"),Sy=Symbol.for("react.profiler"),s5=Symbol.for("react.provider"),l5=Symbol.for("react.context"),ZE=Symbol.for("react.forward_ref"),gy=Symbol.for("react.suspense"),_y=Symbol.for("react.suspense_list"),$E=Symbol.for("react.memo"),Hl=Symbol.for("react.lazy"),u5=Symbol.for("react.offscreen"),Tb=Symbol.iterator;function If(n){return n===null||typeof n!="object"?null:(n=Tb&&n[Tb]||n["@@iterator"],typeof n=="function"?n:null)}var lr=Object.assign,wv;function lh(n){if(wv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);wv=e&&e[1]||""}return`
`+wv+n}var yv=!1;function Ev(n,e){if(!n||yv)return"";yv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=s);break}}}finally{yv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?lh(n):""}function _te(n){switch(n.tag){case 5:return lh(n.type);case 16:return lh("Lazy");case 13:return lh("Suspense");case 19:return lh("SuspenseList");case 0:case 2:case 15:return n=Ev(n.type,!1),n;case 11:return n=Ev(n.type.render,!1),n;case 1:return n=Ev(n.type,!0),n;default:return""}}function xy(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F1:return"Fragment";case D1:return"Portal";case Sy:return"Profiler";case JE:return"StrictMode";case gy:return"Suspense";case _y:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case l5:return(n.displayName||"Context")+".Consumer";case s5:return(n._context.displayName||"Context")+".Provider";case ZE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case $E:return e=n.displayName||null,e!==null?e:xy(n.type)||"Memo";case Hl:e=n._payload,n=n._init;try{return xy(n(e))}catch{}}return null}function xte(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xy(e);case 8:return e===JE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xu(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function c5(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vte(n){var e=c5(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,a=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function NS(n){n._valueTracker||(n._valueTracker=vte(n))}function d5(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=c5(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function x8(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function vy(n,e){var t=e.checked;return lr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:n._wrapperState.initialChecked})}function bb(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=xu(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function A5(n,e){e=e.checked,e!=null&&QE(n,"checked",e,!1)}function wy(n,e){A5(n,e);var t=xu(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?yy(n,e.type,t):e.hasOwnProperty("defaultValue")&&yy(n,e.type,xu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Pb(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function yy(n,e,t){(e!=="number"||x8(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var uh=Array.isArray;function q1(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+xu(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Ey(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Et(91));return lr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Rb(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Et(92));if(uh(t)){if(1<t.length)throw Error(Et(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:xu(t)}}function f5(n,e){var t=xu(e.value),r=xu(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Lb(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function h5(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cy(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?h5(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var US,p5=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(US=US||document.createElement("div"),US.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=US.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function rp(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var _h={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wte=["Webkit","ms","Moz","O"];Object.keys(_h).forEach(function(n){wte.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),_h[e]=_h[n]})});function m5(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||_h.hasOwnProperty(n)&&_h[n]?(""+e).trim():e+"px"}function S5(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=m5(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var yte=lr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vy(n,e){if(e){if(yte[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Et(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Et(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Et(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Et(62))}}function Dy(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fy=null;function eC(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ty=null,Q1=null,J1=null;function Bb(n){if(n=Hp(n)){if(typeof Ty!="function")throw Error(Et(280));var e=n.stateNode;e&&(e=T_(e),Ty(n.stateNode,n.type,e))}}function g5(n){Q1?J1?J1.push(n):J1=[n]:Q1=n}function _5(){if(Q1){var n=Q1,e=J1;if(J1=Q1=null,Bb(n),e)for(n=0;n<e.length;n++)Bb(e[n])}}function x5(n,e){return n(e)}function v5(){}var Cv=!1;function w5(n,e,t){if(Cv)return n(e,t);Cv=!0;try{return x5(n,e,t)}finally{Cv=!1,(Q1!==null||J1!==null)&&(v5(),_5())}}function ip(n,e){var t=n.stateNode;if(t===null)return null;var r=T_(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Et(231,e,typeof t));return t}var by=!1;if(il)try{var Of={};Object.defineProperty(Of,"passive",{get:function(){by=!0}}),window.addEventListener("test",Of,Of),window.removeEventListener("test",Of,Of)}catch{by=!1}function Ete(n,e,t,r,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var xh=!1,v8=null,w8=!1,Py=null,Cte={onError:function(n){xh=!0,v8=n}};function Vte(n,e,t,r,i,a,o,s,l){xh=!1,v8=null,Ete.apply(Cte,arguments)}function Dte(n,e,t,r,i,a,o,s,l){if(Vte.apply(this,arguments),xh){if(xh){var c=v8;xh=!1,v8=null}else throw Error(Et(198));w8||(w8=!0,Py=c)}}function rd(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,(e.flags&4098)!==0&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function y5(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Mb(n){if(rd(n)!==n)throw Error(Et(188))}function Fte(n){var e=n.alternate;if(!e){if(e=rd(n),e===null)throw Error(Et(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===t)return Mb(i),n;if(a===r)return Mb(i),e;a=a.sibling}throw Error(Et(188))}if(t.return!==r.return)t=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===t){o=!0,t=i,r=a;break}if(s===r){o=!0,r=i,t=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===t){o=!0,t=a,r=i;break}if(s===r){o=!0,r=a,t=i;break}s=s.sibling}if(!o)throw Error(Et(189))}}if(t.alternate!==r)throw Error(Et(190))}if(t.tag!==3)throw Error(Et(188));return t.stateNode.current===t?n:e}function E5(n){return n=Fte(n),n!==null?C5(n):null}function C5(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=C5(n);if(e!==null)return e;n=n.sibling}return null}var V5=Ba.unstable_scheduleCallback,Ib=Ba.unstable_cancelCallback,Tte=Ba.unstable_shouldYield,bte=Ba.unstable_requestPaint,Er=Ba.unstable_now,Pte=Ba.unstable_getCurrentPriorityLevel,tC=Ba.unstable_ImmediatePriority,D5=Ba.unstable_UserBlockingPriority,y8=Ba.unstable_NormalPriority,Rte=Ba.unstable_LowPriority,F5=Ba.unstable_IdlePriority,C_=null,fs=null;function Lte(n){if(fs&&typeof fs.onCommitFiberRoot=="function")try{fs.onCommitFiberRoot(C_,n,void 0,(n.current.flags&128)===128)}catch{}}var Io=Math.clz32?Math.clz32:Ite,Bte=Math.log,Mte=Math.LN2;function Ite(n){return n>>>=0,n===0?32:31-(Bte(n)/Mte|0)|0}var jS=64,GS=4194304;function ch(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function E8(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,a=n.pingedLanes,o=t&268435455;if(o!==0){var s=o&~i;s!==0?r=ch(s):(a&=o,a!==0&&(r=ch(a)))}else o=t&~i,o!==0?r=ch(o):a!==0&&(r=ch(a));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if((r&4)!==0&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Io(e),i=1<<t,r|=n[t],e&=~i;return r}function Ote(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kte(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,a=n.pendingLanes;0<a;){var o=31-Io(a),s=1<<o,l=i[o];l===-1?((s&t)===0||(s&r)!==0)&&(i[o]=Ote(s,e)):l<=e&&(n.expiredLanes|=s),a&=~s}}function Ry(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function T5(){var n=jS;return jS<<=1,(jS&4194240)===0&&(jS=64),n}function Vv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function jp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Io(e),n[e]=t}function Nte(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Io(t),a=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~a}}function nC(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Io(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var An=0;function b5(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var P5,rC,R5,L5,B5,Ly=!1,HS=[],au=null,ou=null,su=null,ap=new Map,op=new Map,Kl=[],Ute="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ob(n,e){switch(n){case"focusin":case"focusout":au=null;break;case"dragenter":case"dragleave":ou=null;break;case"mouseover":case"mouseout":su=null;break;case"pointerover":case"pointerout":ap.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":op.delete(e.pointerId)}}function kf(n,e,t,r,i,a){return n===null||n.nativeEvent!==a?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Hp(e),e!==null&&rC(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function jte(n,e,t,r,i){switch(e){case"focusin":return au=kf(au,n,e,t,r,i),!0;case"dragenter":return ou=kf(ou,n,e,t,r,i),!0;case"mouseover":return su=kf(su,n,e,t,r,i),!0;case"pointerover":var a=i.pointerId;return ap.set(a,kf(ap.get(a)||null,n,e,t,r,i)),!0;case"gotpointercapture":return a=i.pointerId,op.set(a,kf(op.get(a)||null,n,e,t,r,i)),!0}return!1}function M5(n){var e=yc(n.target);if(e!==null){var t=rd(e);if(t!==null){if(e=t.tag,e===13){if(e=y5(t),e!==null){n.blockedOn=e,B5(n.priority,function(){R5(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ig(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=By(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Fy=r,t.target.dispatchEvent(r),Fy=null}else return e=Hp(t),e!==null&&rC(e),n.blockedOn=t,!1;e.shift()}return!0}function kb(n,e,t){Ig(n)&&t.delete(e)}function Gte(){Ly=!1,au!==null&&Ig(au)&&(au=null),ou!==null&&Ig(ou)&&(ou=null),su!==null&&Ig(su)&&(su=null),ap.forEach(kb),op.forEach(kb)}function Nf(n,e){n.blockedOn===e&&(n.blockedOn=null,Ly||(Ly=!0,Ba.unstable_scheduleCallback(Ba.unstable_NormalPriority,Gte)))}function sp(n){function e(i){return Nf(i,n)}if(0<HS.length){Nf(HS[0],n);for(var t=1;t<HS.length;t++){var r=HS[t];r.blockedOn===n&&(r.blockedOn=null)}}for(au!==null&&Nf(au,n),ou!==null&&Nf(ou,n),su!==null&&Nf(su,n),ap.forEach(e),op.forEach(e),t=0;t<Kl.length;t++)r=Kl[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Kl.length&&(t=Kl[0],t.blockedOn===null);)M5(t),t.blockedOn===null&&Kl.shift()}var Z1=cl.ReactCurrentBatchConfig,C8=!0;function Hte(n,e,t,r){var i=An,a=Z1.transition;Z1.transition=null;try{An=1,iC(n,e,t,r)}finally{An=i,Z1.transition=a}}function zte(n,e,t,r){var i=An,a=Z1.transition;Z1.transition=null;try{An=4,iC(n,e,t,r)}finally{An=i,Z1.transition=a}}function iC(n,e,t,r){if(C8){var i=By(n,e,t,r);if(i===null)Iv(n,e,r,V8,t),Ob(n,r);else if(jte(i,n,e,t,r))r.stopPropagation();else if(Ob(n,r),e&4&&-1<Ute.indexOf(n)){for(;i!==null;){var a=Hp(i);if(a!==null&&P5(a),a=By(n,e,t,r),a===null&&Iv(n,e,r,V8,t),a===i)break;i=a}i!==null&&r.stopPropagation()}else Iv(n,e,r,null,t)}}var V8=null;function By(n,e,t,r){if(V8=null,n=eC(r),n=yc(n),n!==null)if(e=rd(n),e===null)n=null;else if(t=e.tag,t===13){if(n=y5(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return V8=n,null}function I5(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pte()){case tC:return 1;case D5:return 4;case y8:case Rte:return 16;case F5:return 536870912;default:return 16}default:return 16}}var Ql=null,aC=null,Og=null;function O5(){if(Og)return Og;var n,e=aC,t=e.length,r,i="value"in Ql?Ql.value:Ql.textContent,a=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[a-r];r++);return Og=i.slice(n,1<r?1-r:void 0)}function kg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function zS(){return!0}function Nb(){return!1}function Ia(n){function e(t,r,i,a,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in n)n.hasOwnProperty(s)&&(t=n[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?zS:Nb,this.isPropagationStopped=Nb,this}return lr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=zS)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=zS)},persist:function(){},isPersistent:zS}),e}var NA={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oC=Ia(NA),Gp=lr({},NA,{view:0,detail:0}),Wte=Ia(Gp),Dv,Fv,Uf,V_=lr({},Gp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sC,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Uf&&(Uf&&n.type==="mousemove"?(Dv=n.screenX-Uf.screenX,Fv=n.screenY-Uf.screenY):Fv=Dv=0,Uf=n),Dv)},movementY:function(n){return"movementY"in n?n.movementY:Fv}}),Ub=Ia(V_),Xte=lr({},V_,{dataTransfer:0}),Kte=Ia(Xte),Yte=lr({},Gp,{relatedTarget:0}),Tv=Ia(Yte),qte=lr({},NA,{animationName:0,elapsedTime:0,pseudoElement:0}),Qte=Ia(qte),Jte=lr({},NA,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Zte=Ia(Jte),$te=lr({},NA,{data:0}),jb=Ia($te),e0e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t0e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n0e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r0e(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=n0e[n])?!!e[n]:!1}function sC(){return r0e}var i0e=lr({},Gp,{key:function(n){if(n.key){var e=e0e[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=kg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?t0e[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sC,charCode:function(n){return n.type==="keypress"?kg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?kg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),a0e=Ia(i0e),o0e=lr({},V_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gb=Ia(o0e),s0e=lr({},Gp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sC}),l0e=Ia(s0e),u0e=lr({},NA,{propertyName:0,elapsedTime:0,pseudoElement:0}),c0e=Ia(u0e),d0e=lr({},V_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),A0e=Ia(d0e),f0e=[9,13,27,32],lC=il&&"CompositionEvent"in window,vh=null;il&&"documentMode"in document&&(vh=document.documentMode);var h0e=il&&"TextEvent"in window&&!vh,k5=il&&(!lC||vh&&8<vh&&11>=vh),Hb=String.fromCharCode(32),zb=!1;function N5(n,e){switch(n){case"keyup":return f0e.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U5(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var T1=!1;function p0e(n,e){switch(n){case"compositionend":return U5(e);case"keypress":return e.which!==32?null:(zb=!0,Hb);case"textInput":return n=e.data,n===Hb&&zb?null:n;default:return null}}function m0e(n,e){if(T1)return n==="compositionend"||!lC&&N5(n,e)?(n=O5(),Og=aC=Ql=null,T1=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return k5&&e.locale!=="ko"?null:e.data;default:return null}}var S0e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!S0e[n.type]:e==="textarea"}function j5(n,e,t,r){g5(r),e=D8(e,"onChange"),0<e.length&&(t=new oC("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var wh=null,lp=null;function g0e(n){Z5(n,0)}function D_(n){var e=R1(n);if(d5(e))return n}function _0e(n,e){if(n==="change")return e}var G5=!1;if(il){var bv;if(il){var Pv="oninput"in document;if(!Pv){var Xb=document.createElement("div");Xb.setAttribute("oninput","return;"),Pv=typeof Xb.oninput=="function"}bv=Pv}else bv=!1;G5=bv&&(!document.documentMode||9<document.documentMode)}function Kb(){wh&&(wh.detachEvent("onpropertychange",H5),lp=wh=null)}function H5(n){if(n.propertyName==="value"&&D_(lp)){var e=[];j5(e,lp,n,eC(n)),w5(g0e,e)}}function x0e(n,e,t){n==="focusin"?(Kb(),wh=e,lp=t,wh.attachEvent("onpropertychange",H5)):n==="focusout"&&Kb()}function v0e(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return D_(lp)}function w0e(n,e){if(n==="click")return D_(e)}function y0e(n,e){if(n==="input"||n==="change")return D_(e)}function E0e(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Uo=typeof Object.is=="function"?Object.is:E0e;function up(n,e){if(Uo(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!my.call(e,i)||!Uo(n[i],e[i]))return!1}return!0}function Yb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function qb(n,e){var t=Yb(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Yb(t)}}function z5(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?z5(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function W5(){for(var n=window,e=x8();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=x8(n.document)}return e}function uC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function C0e(n){var e=W5(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&z5(t.ownerDocument.documentElement,t)){if(r!==null&&uC(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!n.extend&&a>r&&(i=r,r=a,a=i),i=qb(t,a);var o=qb(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),a>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var V0e=il&&"documentMode"in document&&11>=document.documentMode,b1=null,My=null,yh=null,Iy=!1;function Qb(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Iy||b1==null||b1!==x8(r)||(r=b1,"selectionStart"in r&&uC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yh&&up(yh,r)||(yh=r,r=D8(My,"onSelect"),0<r.length&&(e=new oC("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=b1)))}function WS(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var P1={animationend:WS("Animation","AnimationEnd"),animationiteration:WS("Animation","AnimationIteration"),animationstart:WS("Animation","AnimationStart"),transitionend:WS("Transition","TransitionEnd")},Rv={},X5={};il&&(X5=document.createElement("div").style,"AnimationEvent"in window||(delete P1.animationend.animation,delete P1.animationiteration.animation,delete P1.animationstart.animation),"TransitionEvent"in window||delete P1.transitionend.transition);function F_(n){if(Rv[n])return Rv[n];if(!P1[n])return n;var e=P1[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in X5)return Rv[n]=e[t];return n}var K5=F_("animationend"),Y5=F_("animationiteration"),q5=F_("animationstart"),Q5=F_("transitionend"),J5=new Map,Jb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ru(n,e){J5.set(n,e),nd(e,[n])}for(var Lv=0;Lv<Jb.length;Lv++){var Bv=Jb[Lv],D0e=Bv.toLowerCase(),F0e=Bv[0].toUpperCase()+Bv.slice(1);Ru(D0e,"on"+F0e)}Ru(K5,"onAnimationEnd");Ru(Y5,"onAnimationIteration");Ru(q5,"onAnimationStart");Ru("dblclick","onDoubleClick");Ru("focusin","onFocus");Ru("focusout","onBlur");Ru(Q5,"onTransitionEnd");AA("onMouseEnter",["mouseout","mouseover"]);AA("onMouseLeave",["mouseout","mouseover"]);AA("onPointerEnter",["pointerout","pointerover"]);AA("onPointerLeave",["pointerout","pointerover"]);nd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nd("onBeforeInput",["compositionend","keypress","textInput","paste"]);nd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T0e=new Set("cancel close invalid load scroll toggle".split(" ").concat(dh));function Zb(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Dte(r,e,void 0,n),n.currentTarget=null}function Z5(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Zb(i,s,c),a=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Zb(i,s,c),a=l}}}if(w8)throw n=Py,w8=!1,Py=null,n}function jn(n,e){var t=e[jy];t===void 0&&(t=e[jy]=new Set);var r=n+"__bubble";t.has(r)||($5(e,n,2,!1),t.add(r))}function Mv(n,e,t){var r=0;e&&(r|=4),$5(t,n,r,e)}var XS="_reactListening"+Math.random().toString(36).slice(2);function cp(n){if(!n[XS]){n[XS]=!0,o5.forEach(function(t){t!=="selectionchange"&&(T0e.has(t)||Mv(t,!1,n),Mv(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[XS]||(e[XS]=!0,Mv("selectionchange",!1,e))}}function $5(n,e,t,r){switch(I5(e)){case 1:var i=Hte;break;case 4:i=zte;break;default:i=iC}t=i.bind(null,e,t,n),i=void 0,!by||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Iv(n,e,t,r,i){var a=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=yc(s),o===null)return;if(l=o.tag,l===5||l===6){r=a=o;continue e}s=s.parentNode}}r=r.return}w5(function(){var c=a,d=eC(t),h=[];e:{var f=J5.get(n);if(f!==void 0){var m=oC,g=n;switch(n){case"keypress":if(kg(t)===0)break e;case"keydown":case"keyup":m=a0e;break;case"focusin":g="focus",m=Tv;break;case"focusout":g="blur",m=Tv;break;case"beforeblur":case"afterblur":m=Tv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ub;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Kte;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=l0e;break;case K5:case Y5:case q5:m=Qte;break;case Q5:m=c0e;break;case"scroll":m=Wte;break;case"wheel":m=A0e;break;case"copy":case"cut":case"paste":m=Zte;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Gb}var x=(e&4)!==0,E=!x&&n==="scroll",_=x?f!==null?f+"Capture":null:f;x=[];for(var v=c,C;v!==null;){C=v;var D=C.stateNode;if(C.tag===5&&D!==null&&(C=D,_!==null&&(D=ip(v,_),D!=null&&x.push(dp(v,D,C)))),E)break;v=v.return}0<x.length&&(f=new m(f,g,null,t,d),h.push({event:f,listeners:x}))}}if((e&7)===0){e:{if(f=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",f&&t!==Fy&&(g=t.relatedTarget||t.fromElement)&&(yc(g)||g[al]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=c,g=g?yc(g):null,g!==null&&(E=rd(g),g!==E||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(x=Ub,D="onMouseLeave",_="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(x=Gb,D="onPointerLeave",_="onPointerEnter",v="pointer"),E=m==null?f:R1(m),C=g==null?f:R1(g),f=new x(D,v+"leave",m,t,d),f.target=E,f.relatedTarget=C,D=null,yc(d)===c&&(x=new x(_,v+"enter",g,t,d),x.target=C,x.relatedTarget=E,D=x),E=D,m&&g)t:{for(x=m,_=g,v=0,C=x;C;C=d1(C))v++;for(C=0,D=_;D;D=d1(D))C++;for(;0<v-C;)x=d1(x),v--;for(;0<C-v;)_=d1(_),C--;for(;v--;){if(x===_||_!==null&&x===_.alternate)break t;x=d1(x),_=d1(_)}x=null}else x=null;m!==null&&$b(h,f,m,x,!1),g!==null&&E!==null&&$b(h,E,g,x,!0)}}e:{if(f=c?R1(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var V=_0e;else if(Wb(f))if(G5)V=y0e;else{V=v0e;var H=x0e}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(V=w0e);if(V&&(V=V(n,c))){j5(h,V,t,d);break e}H&&H(n,f,c),n==="focusout"&&(H=f._wrapperState)&&H.controlled&&f.type==="number"&&yy(f,"number",f.value)}switch(H=c?R1(c):window,n){case"focusin":(Wb(H)||H.contentEditable==="true")&&(b1=H,My=c,yh=null);break;case"focusout":yh=My=b1=null;break;case"mousedown":Iy=!0;break;case"contextmenu":case"mouseup":case"dragend":Iy=!1,Qb(h,t,d);break;case"selectionchange":if(V0e)break;case"keydown":case"keyup":Qb(h,t,d)}var R;if(lC)e:{switch(n){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else T1?N5(n,t)&&(j="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(j="onCompositionStart");j&&(k5&&t.locale!=="ko"&&(T1||j!=="onCompositionStart"?j==="onCompositionEnd"&&T1&&(R=O5()):(Ql=d,aC="value"in Ql?Ql.value:Ql.textContent,T1=!0)),H=D8(c,j),0<H.length&&(j=new jb(j,n,null,t,d),h.push({event:j,listeners:H}),R?j.data=R:(R=U5(t),R!==null&&(j.data=R)))),(R=h0e?p0e(n,t):m0e(n,t))&&(c=D8(c,"onBeforeInput"),0<c.length&&(d=new jb("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=R))}Z5(h,e)})}function dp(n,e,t){return{instance:n,listener:e,currentTarget:t}}function D8(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ip(n,t),a!=null&&r.unshift(dp(n,a,i)),a=ip(n,e),a!=null&&r.push(dp(n,a,i))),n=n.return}return r}function d1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function $b(n,e,t,r,i){for(var a=e._reactName,o=[];t!==null&&t!==r;){var s=t,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,i?(l=ip(t,a),l!=null&&o.unshift(dp(t,l,s))):i||(l=ip(t,a),l!=null&&o.push(dp(t,l,s)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var b0e=/\r\n?/g,P0e=/\u0000|\uFFFD/g;function eP(n){return(typeof n=="string"?n:""+n).replace(b0e,`
`).replace(P0e,"")}function KS(n,e,t){if(e=eP(e),eP(n)!==e&&t)throw Error(Et(425))}function F8(){}var Oy=null,ky=null;function Ny(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Uy=typeof setTimeout=="function"?setTimeout:void 0,R0e=typeof clearTimeout=="function"?clearTimeout:void 0,tP=typeof Promise=="function"?Promise:void 0,L0e=typeof queueMicrotask=="function"?queueMicrotask:typeof tP<"u"?function(n){return tP.resolve(null).then(n).catch(B0e)}:Uy;function B0e(n){setTimeout(function(){throw n})}function Ov(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),sp(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);sp(e)}function lu(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function nP(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var UA=Math.random().toString(36).slice(2),us="__reactFiber$"+UA,Ap="__reactProps$"+UA,al="__reactContainer$"+UA,jy="__reactEvents$"+UA,M0e="__reactListeners$"+UA,I0e="__reactHandles$"+UA;function yc(n){var e=n[us];if(e)return e;for(var t=n.parentNode;t;){if(e=t[al]||t[us]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=nP(n);n!==null;){if(t=n[us])return t;n=nP(n)}return e}n=t,t=n.parentNode}return null}function Hp(n){return n=n[us]||n[al],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function R1(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Et(33))}function T_(n){return n[Ap]||null}var Gy=[],L1=-1;function Lu(n){return{current:n}}function zn(n){0>L1||(n.current=Gy[L1],Gy[L1]=null,L1--)}function Mn(n,e){L1++,Gy[L1]=n.current,n.current=e}var vu={},Oi=Lu(vu),ua=Lu(!1),Gc=vu;function fA(n,e){var t=n.type.contextTypes;if(!t)return vu;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in t)i[a]=e[a];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ca(n){return n=n.childContextTypes,n!=null}function T8(){zn(ua),zn(Oi)}function rP(n,e,t){if(Oi.current!==vu)throw Error(Et(168));Mn(Oi,e),Mn(ua,t)}function eO(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Et(108,xte(n)||"Unknown",i));return lr({},t,r)}function b8(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||vu,Gc=Oi.current,Mn(Oi,n),Mn(ua,ua.current),!0}function iP(n,e,t){var r=n.stateNode;if(!r)throw Error(Et(169));t?(n=eO(n,e,Gc),r.__reactInternalMemoizedMergedChildContext=n,zn(ua),zn(Oi),Mn(Oi,n)):zn(ua),Mn(ua,t)}var zs=null,b_=!1,kv=!1;function tO(n){zs===null?zs=[n]:zs.push(n)}function O0e(n){b_=!0,tO(n)}function Bu(){if(!kv&&zs!==null){kv=!0;var n=0,e=An;try{var t=zs;for(An=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}zs=null,b_=!1}catch(i){throw zs!==null&&(zs=zs.slice(n+1)),V5(tC,Bu),i}finally{An=e,kv=!1}}return null}var B1=[],M1=0,P8=null,R8=0,Qa=[],Ja=0,Hc=null,Xs=1,Ks="";function fc(n,e){B1[M1++]=R8,B1[M1++]=P8,P8=n,R8=e}function nO(n,e,t){Qa[Ja++]=Xs,Qa[Ja++]=Ks,Qa[Ja++]=Hc,Hc=n;var r=Xs;n=Ks;var i=32-Io(r)-1;r&=~(1<<i),t+=1;var a=32-Io(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xs=1<<32-Io(e)+i|t<<i|r,Ks=a+n}else Xs=1<<a|t<<i|r,Ks=n}function cC(n){n.return!==null&&(fc(n,1),nO(n,1,0))}function dC(n){for(;n===P8;)P8=B1[--M1],B1[M1]=null,R8=B1[--M1],B1[M1]=null;for(;n===Hc;)Hc=Qa[--Ja],Qa[Ja]=null,Ks=Qa[--Ja],Qa[Ja]=null,Xs=Qa[--Ja],Qa[Ja]=null}var ba=null,Va=null,er=!1,To=null;function rO(n,e){var t=no(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function aP(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ba=n,Va=lu(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ba=n,Va=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Hc!==null?{id:Xs,overflow:Ks}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=no(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ba=n,Va=null,!0):!1;default:return!1}}function Hy(n){return(n.mode&1)!==0&&(n.flags&128)===0}function zy(n){if(er){var e=Va;if(e){var t=e;if(!aP(n,e)){if(Hy(n))throw Error(Et(418));e=lu(t.nextSibling);var r=ba;e&&aP(n,e)?rO(r,t):(n.flags=n.flags&-4097|2,er=!1,ba=n)}}else{if(Hy(n))throw Error(Et(418));n.flags=n.flags&-4097|2,er=!1,ba=n}}}function oP(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ba=n}function YS(n){if(n!==ba)return!1;if(!er)return oP(n),er=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Ny(n.type,n.memoizedProps)),e&&(e=Va)){if(Hy(n))throw iO(),Error(Et(418));for(;e;)rO(n,e),e=lu(e.nextSibling)}if(oP(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Et(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Va=lu(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Va=null}}else Va=ba?lu(n.stateNode.nextSibling):null;return!0}function iO(){for(var n=Va;n;)n=lu(n.nextSibling)}function hA(){Va=ba=null,er=!1}function AC(n){To===null?To=[n]:To.push(n)}var k0e=cl.ReactCurrentBatchConfig;function Do(n,e){if(n&&n.defaultProps){e=lr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var L8=Lu(null),B8=null,I1=null,fC=null;function hC(){fC=I1=B8=null}function pC(n){var e=L8.current;zn(L8),n._currentValue=e}function Wy(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function $1(n,e){B8=n,fC=I1=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&e)!==0&&(la=!0),n.firstContext=null)}function so(n){var e=n._currentValue;if(fC!==n)if(n={context:n,memoizedValue:e,next:null},I1===null){if(B8===null)throw Error(Et(308));I1=n,B8.dependencies={lanes:0,firstContext:n}}else I1=I1.next=n;return e}var Ec=null;function mC(n){Ec===null?Ec=[n]:Ec.push(n)}function aO(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,mC(e)):(t.next=i.next,i.next=t),e.interleaved=t,ol(n,r)}function ol(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var zl=!1;function SC(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oO(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Qs(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function uu(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,(K0&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ol(n,t)}return i=r.interleaved,i===null?(e.next=e,mC(r)):(e.next=i.next,i.next=e),r.interleaved=e,ol(n,t)}function Ng(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,nC(n,t)}}function sP(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,a=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};a===null?i=a=o:a=a.next=o,t=t.next}while(t!==null);a===null?i=a=e:a=a.next=e}else i=a=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function M8(n,e,t,r){var i=n.updateQueue;zl=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,o===null?a=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==o&&(s===null?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(a!==null){var h=i.baseState;o=0,d=c=l=null,s=a;do{var f=s.lane,m=s.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=n,x=s;switch(f=e,m=t,x.tag){case 1:if(g=x.payload,typeof g=="function"){h=g.call(m,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,f=typeof g=="function"?g.call(m,h,f):g,f==null)break e;h=lr({},h,f);break e;case 2:zl=!0}}s.callback!==null&&s.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else m={eventTime:m,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Wc|=o,n.lanes=o,n.memoizedState=h}}function lP(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Et(191,i));i.call(r)}}}var sO=new a5.Component().refs;function Xy(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:lr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var P_={isMounted:function(n){return(n=n._reactInternals)?rd(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Ji(),i=du(n),a=Qs(r,i);a.payload=e,t!=null&&(a.callback=t),e=uu(n,a,i),e!==null&&(Oo(e,n,i,r),Ng(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Ji(),i=du(n),a=Qs(r,i);a.tag=1,a.payload=e,t!=null&&(a.callback=t),e=uu(n,a,i),e!==null&&(Oo(e,n,i,r),Ng(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ji(),r=du(n),i=Qs(t,r);i.tag=2,e!=null&&(i.callback=e),e=uu(n,i,r),e!==null&&(Oo(e,n,r,t),Ng(e,n,r))}};function uP(n,e,t,r,i,a,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!up(t,r)||!up(i,a):!0}function lO(n,e,t){var r=!1,i=vu,a=e.contextType;return typeof a=="object"&&a!==null?a=so(a):(i=ca(e)?Gc:Oi.current,r=e.contextTypes,a=(r=r!=null)?fA(n,i):vu),e=new e(t,a),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=P_,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=a),e}function cP(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&P_.enqueueReplaceState(e,e.state,null)}function Ky(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=sO,SC(n);var a=e.contextType;typeof a=="object"&&a!==null?i.context=so(a):(a=ca(e)?Gc:Oi.current,i.context=fA(n,a)),i.state=n.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Xy(n,e,a,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&P_.enqueueReplaceState(i,i.state,null),M8(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function jf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Et(309));var r=t.stateNode}if(!r)throw Error(Et(147,n));var i=r,a=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;s===sO&&(s=i.refs={}),o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof n!="string")throw Error(Et(284));if(!t._owner)throw Error(Et(290,n))}return n}function qS(n,e){throw n=Object.prototype.toString.call(e),Error(Et(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function dP(n){var e=n._init;return e(n._payload)}function uO(n){function e(_,v){if(n){var C=_.deletions;C===null?(_.deletions=[v],_.flags|=16):C.push(v)}}function t(_,v){if(!n)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function i(_,v){return _=Au(_,v),_.index=0,_.sibling=null,_}function a(_,v,C){return _.index=C,n?(C=_.alternate,C!==null?(C=C.index,C<v?(_.flags|=2,v):C):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return n&&_.alternate===null&&(_.flags|=2),_}function s(_,v,C,D){return v===null||v.tag!==6?(v=Wv(C,_.mode,D),v.return=_,v):(v=i(v,C),v.return=_,v)}function l(_,v,C,D){var V=C.type;return V===F1?d(_,v,C.props.children,D,C.key):v!==null&&(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Hl&&dP(V)===v.type)?(D=i(v,C.props),D.ref=jf(_,v,C),D.return=_,D):(D=Wg(C.type,C.key,C.props,null,_.mode,D),D.ref=jf(_,v,C),D.return=_,D)}function c(_,v,C,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==C.containerInfo||v.stateNode.implementation!==C.implementation?(v=Xv(C,_.mode,D),v.return=_,v):(v=i(v,C.children||[]),v.return=_,v)}function d(_,v,C,D,V){return v===null||v.tag!==7?(v=Mc(C,_.mode,D,V),v.return=_,v):(v=i(v,C),v.return=_,v)}function h(_,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Wv(""+v,_.mode,C),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case kS:return C=Wg(v.type,v.key,v.props,null,_.mode,C),C.ref=jf(_,null,v),C.return=_,C;case D1:return v=Xv(v,_.mode,C),v.return=_,v;case Hl:var D=v._init;return h(_,D(v._payload),C)}if(uh(v)||If(v))return v=Mc(v,_.mode,C,null),v.return=_,v;qS(_,v)}return null}function f(_,v,C,D){var V=v!==null?v.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return V!==null?null:s(_,v,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case kS:return C.key===V?l(_,v,C,D):null;case D1:return C.key===V?c(_,v,C,D):null;case Hl:return V=C._init,f(_,v,V(C._payload),D)}if(uh(C)||If(C))return V!==null?null:d(_,v,C,D,null);qS(_,C)}return null}function m(_,v,C,D,V){if(typeof D=="string"&&D!==""||typeof D=="number")return _=_.get(C)||null,s(v,_,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case kS:return _=_.get(D.key===null?C:D.key)||null,l(v,_,D,V);case D1:return _=_.get(D.key===null?C:D.key)||null,c(v,_,D,V);case Hl:var H=D._init;return m(_,v,C,H(D._payload),V)}if(uh(D)||If(D))return _=_.get(C)||null,d(v,_,D,V,null);qS(v,D)}return null}function g(_,v,C,D){for(var V=null,H=null,R=v,j=v=0,te=null;R!==null&&j<C.length;j++){R.index>j?(te=R,R=null):te=R.sibling;var $=f(_,R,C[j],D);if($===null){R===null&&(R=te);break}n&&R&&$.alternate===null&&e(_,R),v=a($,v,j),H===null?V=$:H.sibling=$,H=$,R=te}if(j===C.length)return t(_,R),er&&fc(_,j),V;if(R===null){for(;j<C.length;j++)R=h(_,C[j],D),R!==null&&(v=a(R,v,j),H===null?V=R:H.sibling=R,H=R);return er&&fc(_,j),V}for(R=r(_,R);j<C.length;j++)te=m(R,_,j,C[j],D),te!==null&&(n&&te.alternate!==null&&R.delete(te.key===null?j:te.key),v=a(te,v,j),H===null?V=te:H.sibling=te,H=te);return n&&R.forEach(function(z){return e(_,z)}),er&&fc(_,j),V}function x(_,v,C,D){var V=If(C);if(typeof V!="function")throw Error(Et(150));if(C=V.call(C),C==null)throw Error(Et(151));for(var H=V=null,R=v,j=v=0,te=null,$=C.next();R!==null&&!$.done;j++,$=C.next()){R.index>j?(te=R,R=null):te=R.sibling;var z=f(_,R,$.value,D);if(z===null){R===null&&(R=te);break}n&&R&&z.alternate===null&&e(_,R),v=a(z,v,j),H===null?V=z:H.sibling=z,H=z,R=te}if($.done)return t(_,R),er&&fc(_,j),V;if(R===null){for(;!$.done;j++,$=C.next())$=h(_,$.value,D),$!==null&&(v=a($,v,j),H===null?V=$:H.sibling=$,H=$);return er&&fc(_,j),V}for(R=r(_,R);!$.done;j++,$=C.next())$=m(R,_,j,$.value,D),$!==null&&(n&&$.alternate!==null&&R.delete($.key===null?j:$.key),v=a($,v,j),H===null?V=$:H.sibling=$,H=$);return n&&R.forEach(function(I){return e(_,I)}),er&&fc(_,j),V}function E(_,v,C,D){if(typeof C=="object"&&C!==null&&C.type===F1&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case kS:e:{for(var V=C.key,H=v;H!==null;){if(H.key===V){if(V=C.type,V===F1){if(H.tag===7){t(_,H.sibling),v=i(H,C.props.children),v.return=_,_=v;break e}}else if(H.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Hl&&dP(V)===H.type){t(_,H.sibling),v=i(H,C.props),v.ref=jf(_,H,C),v.return=_,_=v;break e}t(_,H);break}else e(_,H);H=H.sibling}C.type===F1?(v=Mc(C.props.children,_.mode,D,C.key),v.return=_,_=v):(D=Wg(C.type,C.key,C.props,null,_.mode,D),D.ref=jf(_,v,C),D.return=_,_=D)}return o(_);case D1:e:{for(H=C.key;v!==null;){if(v.key===H)if(v.tag===4&&v.stateNode.containerInfo===C.containerInfo&&v.stateNode.implementation===C.implementation){t(_,v.sibling),v=i(v,C.children||[]),v.return=_,_=v;break e}else{t(_,v);break}else e(_,v);v=v.sibling}v=Xv(C,_.mode,D),v.return=_,_=v}return o(_);case Hl:return H=C._init,E(_,v,H(C._payload),D)}if(uh(C))return g(_,v,C,D);if(If(C))return x(_,v,C,D);qS(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,v!==null&&v.tag===6?(t(_,v.sibling),v=i(v,C),v.return=_,_=v):(t(_,v),v=Wv(C,_.mode,D),v.return=_,_=v),o(_)):t(_,v)}return E}var pA=uO(!0),cO=uO(!1),zp={},hs=Lu(zp),fp=Lu(zp),hp=Lu(zp);function Cc(n){if(n===zp)throw Error(Et(174));return n}function gC(n,e){switch(Mn(hp,e),Mn(fp,n),Mn(hs,zp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cy(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Cy(e,n)}zn(hs),Mn(hs,e)}function mA(){zn(hs),zn(fp),zn(hp)}function dO(n){Cc(hp.current);var e=Cc(hs.current),t=Cy(e,n.type);e!==t&&(Mn(fp,n),Mn(hs,t))}function _C(n){fp.current===n&&(zn(hs),zn(fp))}var ar=Lu(0);function I8(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nv=[];function xC(){for(var n=0;n<Nv.length;n++)Nv[n]._workInProgressVersionPrimary=null;Nv.length=0}var Ug=cl.ReactCurrentDispatcher,Uv=cl.ReactCurrentBatchConfig,zc=0,sr=null,Xr=null,ni=null,O8=!1,Eh=!1,pp=0,N0e=0;function bi(){throw Error(Et(321))}function vC(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Uo(n[t],e[t]))return!1;return!0}function wC(n,e,t,r,i,a){if(zc=a,sr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ug.current=n===null||n.memoizedState===null?H0e:z0e,n=t(r,i),Eh){a=0;do{if(Eh=!1,pp=0,25<=a)throw Error(Et(301));a+=1,ni=Xr=null,e.updateQueue=null,Ug.current=W0e,n=t(r,i)}while(Eh)}if(Ug.current=k8,e=Xr!==null&&Xr.next!==null,zc=0,ni=Xr=sr=null,O8=!1,e)throw Error(Et(300));return n}function yC(){var n=pp!==0;return pp=0,n}function as(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ni===null?sr.memoizedState=ni=n:ni=ni.next=n,ni}function lo(){if(Xr===null){var n=sr.alternate;n=n!==null?n.memoizedState:null}else n=Xr.next;var e=ni===null?sr.memoizedState:ni.next;if(e!==null)ni=e,Xr=n;else{if(n===null)throw Error(Et(310));Xr=n,n={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},ni===null?sr.memoizedState=ni=n:ni=ni.next=n}return ni}function mp(n,e){return typeof e=="function"?e(n):e}function jv(n){var e=lo(),t=e.queue;if(t===null)throw Error(Et(311));t.lastRenderedReducer=n;var r=Xr,i=r.baseQueue,a=t.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,t.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,l=null,c=a;do{var d=c.lane;if((zc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=h,o=r):l=l.next=h,sr.lanes|=d,Wc|=d}c=c.next}while(c!==null&&c!==a);l===null?o=r:l.next=s,Uo(r,e.memoizedState)||(la=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do a=i.lane,sr.lanes|=a,Wc|=a,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Gv(n){var e=lo(),t=e.queue;if(t===null)throw Error(Et(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,a=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do a=n(a,o.action),o=o.next;while(o!==i);Uo(a,e.memoizedState)||(la=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),t.lastRenderedState=a}return[a,r]}function AO(){}function fO(n,e){var t=sr,r=lo(),i=e(),a=!Uo(r.memoizedState,i);if(a&&(r.memoizedState=i,la=!0),r=r.queue,EC(mO.bind(null,t,r,n),[n]),r.getSnapshot!==e||a||ni!==null&&ni.memoizedState.tag&1){if(t.flags|=2048,Sp(9,pO.bind(null,t,r,i,e),void 0,null),ri===null)throw Error(Et(349));(zc&30)!==0||hO(t,e,i)}return i}function hO(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=sr.updateQueue,e===null?(e={lastEffect:null,stores:null},sr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function pO(n,e,t,r){e.value=t,e.getSnapshot=r,SO(e)&&gO(n)}function mO(n,e,t){return t(function(){SO(e)&&gO(n)})}function SO(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Uo(n,t)}catch{return!0}}function gO(n){var e=ol(n,1);e!==null&&Oo(e,n,1,-1)}function AP(n){var e=as();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mp,lastRenderedState:n},e.queue=n,n=n.dispatch=G0e.bind(null,sr,n),[e.memoizedState,n]}function Sp(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=sr.updateQueue,e===null?(e={lastEffect:null,stores:null},sr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function _O(){return lo().memoizedState}function jg(n,e,t,r){var i=as();sr.flags|=n,i.memoizedState=Sp(1|e,t,void 0,r===void 0?null:r)}function R_(n,e,t,r){var i=lo();r=r===void 0?null:r;var a=void 0;if(Xr!==null){var o=Xr.memoizedState;if(a=o.destroy,r!==null&&vC(r,o.deps)){i.memoizedState=Sp(e,t,a,r);return}}sr.flags|=n,i.memoizedState=Sp(1|e,t,a,r)}function fP(n,e){return jg(8390656,8,n,e)}function EC(n,e){return R_(2048,8,n,e)}function xO(n,e){return R_(4,2,n,e)}function vO(n,e){return R_(4,4,n,e)}function wO(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function yO(n,e,t){return t=t!=null?t.concat([n]):null,R_(4,4,wO.bind(null,e,n),t)}function CC(){}function EO(n,e){var t=lo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&vC(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function CO(n,e){var t=lo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&vC(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function VO(n,e,t){return(zc&21)===0?(n.baseState&&(n.baseState=!1,la=!0),n.memoizedState=t):(Uo(t,e)||(t=T5(),sr.lanes|=t,Wc|=t,n.baseState=!0),e)}function U0e(n,e){var t=An;An=t!==0&&4>t?t:4,n(!0);var r=Uv.transition;Uv.transition={};try{n(!1),e()}finally{An=t,Uv.transition=r}}function DO(){return lo().memoizedState}function j0e(n,e,t){var r=du(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},FO(n))TO(e,t);else if(t=aO(n,e,t,r),t!==null){var i=Ji();Oo(t,n,r,i),bO(t,e,r)}}function G0e(n,e,t){var r=du(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(FO(n))TO(e,i);else{var a=n.alternate;if(n.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,t);if(i.hasEagerState=!0,i.eagerState=s,Uo(s,o)){var l=e.interleaved;l===null?(i.next=i,mC(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=aO(n,e,i,r),t!==null&&(i=Ji(),Oo(t,n,r,i),bO(t,e,r))}}function FO(n){var e=n.alternate;return n===sr||e!==null&&e===sr}function TO(n,e){Eh=O8=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function bO(n,e,t){if((t&4194240)!==0){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,nC(n,t)}}var k8={readContext:so,useCallback:bi,useContext:bi,useEffect:bi,useImperativeHandle:bi,useInsertionEffect:bi,useLayoutEffect:bi,useMemo:bi,useReducer:bi,useRef:bi,useState:bi,useDebugValue:bi,useDeferredValue:bi,useTransition:bi,useMutableSource:bi,useSyncExternalStore:bi,useId:bi,unstable_isNewReconciler:!1},H0e={readContext:so,useCallback:function(n,e){return as().memoizedState=[n,e===void 0?null:e],n},useContext:so,useEffect:fP,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,jg(4194308,4,wO.bind(null,e,n),t)},useLayoutEffect:function(n,e){return jg(4194308,4,n,e)},useInsertionEffect:function(n,e){return jg(4,2,n,e)},useMemo:function(n,e){var t=as();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=as();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=j0e.bind(null,sr,n),[r.memoizedState,n]},useRef:function(n){var e=as();return n={current:n},e.memoizedState=n},useState:AP,useDebugValue:CC,useDeferredValue:function(n){return as().memoizedState=n},useTransition:function(){var n=AP(!1),e=n[0];return n=U0e.bind(null,n[1]),as().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=sr,i=as();if(er){if(t===void 0)throw Error(Et(407));t=t()}else{if(t=e(),ri===null)throw Error(Et(349));(zc&30)!==0||hO(r,e,t)}i.memoizedState=t;var a={value:t,getSnapshot:e};return i.queue=a,fP(mO.bind(null,r,a,n),[n]),r.flags|=2048,Sp(9,pO.bind(null,r,a,t,e),void 0,null),t},useId:function(){var n=as(),e=ri.identifierPrefix;if(er){var t=Ks,r=Xs;t=(r&~(1<<32-Io(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=pp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=N0e++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},z0e={readContext:so,useCallback:EO,useContext:so,useEffect:EC,useImperativeHandle:yO,useInsertionEffect:xO,useLayoutEffect:vO,useMemo:CO,useReducer:jv,useRef:_O,useState:function(){return jv(mp)},useDebugValue:CC,useDeferredValue:function(n){var e=lo();return VO(e,Xr.memoizedState,n)},useTransition:function(){var n=jv(mp)[0],e=lo().memoizedState;return[n,e]},useMutableSource:AO,useSyncExternalStore:fO,useId:DO,unstable_isNewReconciler:!1},W0e={readContext:so,useCallback:EO,useContext:so,useEffect:EC,useImperativeHandle:yO,useInsertionEffect:xO,useLayoutEffect:vO,useMemo:CO,useReducer:Gv,useRef:_O,useState:function(){return Gv(mp)},useDebugValue:CC,useDeferredValue:function(n){var e=lo();return Xr===null?e.memoizedState=n:VO(e,Xr.memoizedState,n)},useTransition:function(){var n=Gv(mp)[0],e=lo().memoizedState;return[n,e]},useMutableSource:AO,useSyncExternalStore:fO,useId:DO,unstable_isNewReconciler:!1};function SA(n,e){try{var t="",r=e;do t+=_te(r),r=r.return;while(r);var i=t}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:n,source:e,stack:i,digest:null}}function Hv(n,e,t){return{value:n,source:null,stack:t!=null?t:null,digest:e!=null?e:null}}function Yy(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var X0e=typeof WeakMap=="function"?WeakMap:Map;function PO(n,e,t){t=Qs(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){U8||(U8=!0,i4=r),Yy(n,e)},t}function RO(n,e,t){t=Qs(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Yy(n,e)}}var a=n.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){Yy(n,e),typeof r!="function"&&(cu===null?cu=new Set([this]):cu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function hP(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new X0e;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=one.bind(null,n,e,t),e.then(n,n))}function pP(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function mP(n,e,t,r,i){return(n.mode&1)===0?(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Qs(-1,1),e.tag=2,uu(t,e,1))),t.lanes|=1),n):(n.flags|=65536,n.lanes=i,n)}var K0e=cl.ReactCurrentOwner,la=!1;function Yi(n,e,t,r){e.child=n===null?cO(e,null,t,r):pA(e,n.child,t,r)}function SP(n,e,t,r,i){t=t.render;var a=e.ref;return $1(e,i),r=wC(n,e,t,r,a,i),t=yC(),n!==null&&!la?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,sl(n,e,i)):(er&&t&&cC(e),e.flags|=1,Yi(n,e,r,i),e.child)}function gP(n,e,t,r,i){if(n===null){var a=t.type;return typeof a=="function"&&!LC(a)&&a.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=a,LO(n,e,a,r,i)):(n=Wg(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(a=n.child,(n.lanes&i)===0){var o=a.memoizedProps;if(t=t.compare,t=t!==null?t:up,t(o,r)&&n.ref===e.ref)return sl(n,e,i)}return e.flags|=1,n=Au(a,r),n.ref=e.ref,n.return=e,e.child=n}function LO(n,e,t,r,i){if(n!==null){var a=n.memoizedProps;if(up(a,r)&&n.ref===e.ref)if(la=!1,e.pendingProps=r=a,(n.lanes&i)!==0)(n.flags&131072)!==0&&(la=!0);else return e.lanes=n.lanes,sl(n,e,i)}return qy(n,e,t,r,i)}function BO(n,e,t){var r=e.pendingProps,i=r.children,a=n!==null?n.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mn(k1,ya),ya|=t;else{if((t&1073741824)===0)return n=a!==null?a.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Mn(k1,ya),ya|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:t,Mn(k1,ya),ya|=r}else a!==null?(r=a.baseLanes|t,e.memoizedState=null):r=t,Mn(k1,ya),ya|=r;return Yi(n,e,i,t),e.child}function MO(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function qy(n,e,t,r,i){var a=ca(t)?Gc:Oi.current;return a=fA(e,a),$1(e,i),t=wC(n,e,t,r,a,i),r=yC(),n!==null&&!la?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,sl(n,e,i)):(er&&r&&cC(e),e.flags|=1,Yi(n,e,t,i),e.child)}function _P(n,e,t,r,i){if(ca(t)){var a=!0;b8(e)}else a=!1;if($1(e,i),e.stateNode===null)Gg(n,e),lO(e,t,r),Ky(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=so(c):(c=ca(t)?Gc:Oi.current,c=fA(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==c)&&cP(e,o,r,c),zl=!1;var f=e.memoizedState;o.state=f,M8(e,r,o,i),l=e.memoizedState,s!==r||f!==l||ua.current||zl?(typeof d=="function"&&(Xy(e,t,d,r),l=e.memoizedState),(s=zl||uP(e,t,s,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,oO(n,e),s=e.memoizedProps,c=e.type===e.elementType?s:Do(e.type,s),o.props=c,h=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=so(l):(l=ca(t)?Gc:Oi.current,l=fA(e,l));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==h||f!==l)&&cP(e,o,r,l),zl=!1,f=e.memoizedState,o.state=f,M8(e,r,o,i);var g=e.memoizedState;s!==h||f!==g||ua.current||zl?(typeof m=="function"&&(Xy(e,t,m,r),g=e.memoizedState),(c=zl||uP(e,t,c,r,f,g,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||s===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return Qy(n,e,t,r,a,i)}function Qy(n,e,t,r,i,a){MO(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&iP(e,t,!1),sl(n,e,a);r=e.stateNode,K0e.current=e;var s=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=pA(e,n.child,null,a),e.child=pA(e,null,s,a)):Yi(n,e,s,a),e.memoizedState=r.state,i&&iP(e,t,!0),e.child}function IO(n){var e=n.stateNode;e.pendingContext?rP(n,e.pendingContext,e.pendingContext!==e.context):e.context&&rP(n,e.context,!1),gC(n,e.containerInfo)}function xP(n,e,t,r,i){return hA(),AC(i),e.flags|=256,Yi(n,e,t,r),e.child}var Jy={dehydrated:null,treeContext:null,retryLane:0};function Zy(n){return{baseLanes:n,cachePool:null,transitions:null}}function OO(n,e,t){var r=e.pendingProps,i=ar.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=n!==null&&n.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Mn(ar,i&1),n===null)return zy(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((e.mode&1)===0?e.lanes=1:n.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,n=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},(r&1)===0&&a!==null?(a.childLanes=0,a.pendingProps=o):a=M_(o,r,0,null),n=Mc(n,r,t,null),a.return=e,n.return=e,a.sibling=n,e.child=a,e.child.memoizedState=Zy(t),e.memoizedState=Jy,n):VC(e,o));if(i=n.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Y0e(n,e,o,r,s,i,t);if(a){a=r.fallback,o=e.mode,i=n.child,s=i.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Au(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=Au(s,a):(a=Mc(a,o,t,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=n.child.memoizedState,o=o===null?Zy(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=n.childLanes&~t,e.memoizedState=Jy,r}return a=n.child,n=a.sibling,r=Au(a,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function VC(n,e){return e=M_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function QS(n,e,t,r){return r!==null&&AC(r),pA(e,n.child,null,t),n=VC(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Y0e(n,e,t,r,i,a,o){if(t)return e.flags&256?(e.flags&=-257,r=Hv(Error(Et(422))),QS(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=M_({mode:"visible",children:r.children},i,0,null),a=Mc(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,(e.mode&1)!==0&&pA(e,n.child,null,o),e.child.memoizedState=Zy(o),e.memoizedState=Jy,a);if((e.mode&1)===0)return QS(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(Et(419)),r=Hv(a,r,void 0),QS(n,e,o,r)}if(s=(o&n.childLanes)!==0,la||s){if(r=ri,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ol(n,i),Oo(r,n,i,-1))}return RC(),r=Hv(Error(Et(421))),QS(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=sne.bind(null,n),i._reactRetry=e,null):(n=a.treeContext,Va=lu(i.nextSibling),ba=e,er=!0,To=null,n!==null&&(Qa[Ja++]=Xs,Qa[Ja++]=Ks,Qa[Ja++]=Hc,Xs=n.id,Ks=n.overflow,Hc=e),e=VC(e,r.children),e.flags|=4096,e)}function vP(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Wy(n.return,e,t)}function zv(n,e,t,r,i){var a=n.memoizedState;a===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=i)}function kO(n,e,t){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Yi(n,e,r.children,t),r=ar.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&vP(n,t,e);else if(n.tag===19)vP(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Mn(ar,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&I8(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),zv(e,!1,i,t,a);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&I8(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}zv(e,!0,t,null,a);break;case"together":zv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gg(n,e){(e.mode&1)===0&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function sl(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Wc|=e.lanes,(t&e.childLanes)===0)return null;if(n!==null&&e.child!==n.child)throw Error(Et(153));if(e.child!==null){for(n=e.child,t=Au(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Au(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function q0e(n,e,t){switch(e.tag){case 3:IO(e),hA();break;case 5:dO(e);break;case 1:ca(e.type)&&b8(e);break;case 4:gC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Mn(L8,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Mn(ar,ar.current&1),e.flags|=128,null):(t&e.child.childLanes)!==0?OO(n,e,t):(Mn(ar,ar.current&1),n=sl(n,e,t),n!==null?n.sibling:null);Mn(ar,ar.current&1);break;case 19:if(r=(t&e.childLanes)!==0,(n.flags&128)!==0){if(r)return kO(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mn(ar,ar.current),r)break;return null;case 22:case 23:return e.lanes=0,BO(n,e,t)}return sl(n,e,t)}var NO,$y,UO,jO;NO=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};$y=function(){};UO=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Cc(hs.current);var a=null;switch(t){case"input":i=vy(n,i),r=vy(n,r),a=[];break;case"select":i=lr({},i,{value:void 0}),r=lr({},r,{value:void 0}),a=[];break;case"textarea":i=Ey(n,i),r=Ey(n,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=F8)}Vy(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(o in s)s.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(np.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(s=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(a||(a=[]),a.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(np.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&jn("scroll",n),a||s===l||(a=[])):(a=a||[]).push(c,l))}t&&(a=a||[]).push("style",t);var c=a;(e.updateQueue=c)&&(e.flags|=4)}};jO=function(n,e,t,r){t!==r&&(e.flags|=4)};function Gf(n,e){if(!er)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Pi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Q0e(n,e,t){var r=e.pendingProps;switch(dC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(e),null;case 1:return ca(e.type)&&T8(),Pi(e),null;case 3:return r=e.stateNode,mA(),zn(ua),zn(Oi),xC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(YS(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,To!==null&&(s4(To),To=null))),$y(n,e),Pi(e),null;case 5:_C(e);var i=Cc(hp.current);if(t=e.type,n!==null&&e.stateNode!=null)UO(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Et(166));return Pi(e),null}if(n=Cc(hs.current),YS(e)){r=e.stateNode,t=e.type;var a=e.memoizedProps;switch(r[us]=e,r[Ap]=a,n=(e.mode&1)!==0,t){case"dialog":jn("cancel",r),jn("close",r);break;case"iframe":case"object":case"embed":jn("load",r);break;case"video":case"audio":for(i=0;i<dh.length;i++)jn(dh[i],r);break;case"source":jn("error",r);break;case"img":case"image":case"link":jn("error",r),jn("load",r);break;case"details":jn("toggle",r);break;case"input":bb(r,a),jn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},jn("invalid",r);break;case"textarea":Rb(r,a),jn("invalid",r)}Vy(t,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&KS(r.textContent,s,n),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&KS(r.textContent,s,n),i=["children",""+s]):np.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&jn("scroll",r)}switch(t){case"input":NS(r),Pb(r,a,!0);break;case"textarea":NS(r),Lb(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=F8)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=h5(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[us]=e,n[Ap]=r,NO(n,e,!1,!1),e.stateNode=n;e:{switch(o=Dy(t,r),t){case"dialog":jn("cancel",n),jn("close",n),i=r;break;case"iframe":case"object":case"embed":jn("load",n),i=r;break;case"video":case"audio":for(i=0;i<dh.length;i++)jn(dh[i],n);i=r;break;case"source":jn("error",n),i=r;break;case"img":case"image":case"link":jn("error",n),jn("load",n),i=r;break;case"details":jn("toggle",n),i=r;break;case"input":bb(n,r),i=vy(n,r),jn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=lr({},r,{value:void 0}),jn("invalid",n);break;case"textarea":Rb(n,r),i=Ey(n,r),jn("invalid",n);break;default:i=r}Vy(t,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?S5(n,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&p5(n,l)):a==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&rp(n,l):typeof l=="number"&&rp(n,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(np.hasOwnProperty(a)?l!=null&&a==="onScroll"&&jn("scroll",n):l!=null&&QE(n,a,l,o))}switch(t){case"input":NS(n),Pb(n,r,!1);break;case"textarea":NS(n),Lb(n);break;case"option":r.value!=null&&n.setAttribute("value",""+xu(r.value));break;case"select":n.multiple=!!r.multiple,a=r.value,a!=null?q1(n,!!r.multiple,a,!1):r.defaultValue!=null&&q1(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=F8)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pi(e),null;case 6:if(n&&e.stateNode!=null)jO(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Et(166));if(t=Cc(hp.current),Cc(hs.current),YS(e)){if(r=e.stateNode,t=e.memoizedProps,r[us]=e,(a=r.nodeValue!==t)&&(n=ba,n!==null))switch(n.tag){case 3:KS(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&KS(r.nodeValue,t,(n.mode&1)!==0)}a&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[us]=e,e.stateNode=r}return Pi(e),null;case 13:if(zn(ar),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(er&&Va!==null&&(e.mode&1)!==0&&(e.flags&128)===0)iO(),hA(),e.flags|=98560,a=!1;else if(a=YS(e),r!==null&&r.dehydrated!==null){if(n===null){if(!a)throw Error(Et(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Et(317));a[us]=e}else hA(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Pi(e),a=!1}else To!==null&&(s4(To),To=null),a=!0;if(!a)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(n===null||(ar.current&1)!==0?Yr===0&&(Yr=3):RC())),e.updateQueue!==null&&(e.flags|=4),Pi(e),null);case 4:return mA(),$y(n,e),n===null&&cp(e.stateNode.containerInfo),Pi(e),null;case 10:return pC(e.type._context),Pi(e),null;case 17:return ca(e.type)&&T8(),Pi(e),null;case 19:if(zn(ar),a=e.memoizedState,a===null)return Pi(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Gf(a,!1);else{if(Yr!==0||n!==null&&(n.flags&128)!==0)for(n=e.child;n!==null;){if(o=I8(n),o!==null){for(e.flags|=128,Gf(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)a=t,n=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=n,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,n=o.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Mn(ar,ar.current&1|2),e.child}n=n.sibling}a.tail!==null&&Er()>gA&&(e.flags|=128,r=!0,Gf(a,!1),e.lanes=4194304)}else{if(!r)if(n=I8(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Gf(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!er)return Pi(e),null}else 2*Er()-a.renderingStartTime>gA&&t!==1073741824&&(e.flags|=128,r=!0,Gf(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(t=a.last,t!==null?t.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Er(),e.sibling=null,t=ar.current,Mn(ar,r?t&1|2:t&1),e):(Pi(e),null);case 22:case 23:return PC(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(ya&1073741824)!==0&&(Pi(e),e.subtreeFlags&6&&(e.flags|=8192)):Pi(e),null;case 24:return null;case 25:return null}throw Error(Et(156,e.tag))}function J0e(n,e){switch(dC(e),e.tag){case 1:return ca(e.type)&&T8(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return mA(),zn(ua),zn(Oi),xC(),n=e.flags,(n&65536)!==0&&(n&128)===0?(e.flags=n&-65537|128,e):null;case 5:return _C(e),null;case 13:if(zn(ar),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Et(340));hA()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return zn(ar),null;case 4:return mA(),null;case 10:return pC(e.type._context),null;case 22:case 23:return PC(),null;case 24:return null;default:return null}}var JS=!1,Bi=!1,Z0e=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function O1(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ar(n,e,r)}else t.current=null}function e4(n,e,t){try{t()}catch(r){Ar(n,e,r)}}var wP=!1;function $0e(n,e){if(Oy=C8,n=W5(),uC(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{t.nodeType,a.nodeType}catch{t=null;break e}var o=0,s=-1,l=-1,c=0,d=0,h=n,f=null;t:for(;;){for(var m;h!==t||i!==0&&h.nodeType!==3||(s=o+i),h!==a||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===n)break t;if(f===t&&++c===i&&(s=o),f===a&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}t=s===-1||l===-1?null:{start:s,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(ky={focusedElem:n,selectionRange:t},C8=!1,Xt=e;Xt!==null;)if(e=Xt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Xt=n;else for(;Xt!==null;){e=Xt;try{var g=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,E=g.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?x:Do(e.type,x),E);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Et(163))}}catch(D){Ar(e,e.return,D)}if(n=e.sibling,n!==null){n.return=e.return,Xt=n;break}Xt=e.return}return g=wP,wP=!1,g}function Ch(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var a=i.destroy;i.destroy=void 0,a!==void 0&&e4(e,t,a)}i=i.next}while(i!==r)}}function L_(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function t4(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function GO(n){var e=n.alternate;e!==null&&(n.alternate=null,GO(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[us],delete e[Ap],delete e[jy],delete e[M0e],delete e[I0e])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function HO(n){return n.tag===5||n.tag===3||n.tag===4}function yP(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||HO(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function n4(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=F8));else if(r!==4&&(n=n.child,n!==null))for(n4(n,e,t),n=n.sibling;n!==null;)n4(n,e,t),n=n.sibling}function r4(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(r4(n,e,t),n=n.sibling;n!==null;)r4(n,e,t),n=n.sibling}var ci=null,Fo=!1;function kl(n,e,t){for(t=t.child;t!==null;)zO(n,e,t),t=t.sibling}function zO(n,e,t){if(fs&&typeof fs.onCommitFiberUnmount=="function")try{fs.onCommitFiberUnmount(C_,t)}catch{}switch(t.tag){case 5:Bi||O1(t,e);case 6:var r=ci,i=Fo;ci=null,kl(n,e,t),ci=r,Fo=i,ci!==null&&(Fo?(n=ci,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ci.removeChild(t.stateNode));break;case 18:ci!==null&&(Fo?(n=ci,t=t.stateNode,n.nodeType===8?Ov(n.parentNode,t):n.nodeType===1&&Ov(n,t),sp(n)):Ov(ci,t.stateNode));break;case 4:r=ci,i=Fo,ci=t.stateNode.containerInfo,Fo=!0,kl(n,e,t),ci=r,Fo=i;break;case 0:case 11:case 14:case 15:if(!Bi&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&((a&2)!==0||(a&4)!==0)&&e4(t,e,o),i=i.next}while(i!==r)}kl(n,e,t);break;case 1:if(!Bi&&(O1(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(s){Ar(t,e,s)}kl(n,e,t);break;case 21:kl(n,e,t);break;case 22:t.mode&1?(Bi=(r=Bi)||t.memoizedState!==null,kl(n,e,t),Bi=r):kl(n,e,t);break;default:kl(n,e,t)}}function EP(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Z0e),e.forEach(function(r){var i=lne.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Co(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var a=n,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:ci=s.stateNode,Fo=!1;break e;case 3:ci=s.stateNode.containerInfo,Fo=!0;break e;case 4:ci=s.stateNode.containerInfo,Fo=!0;break e}s=s.return}if(ci===null)throw Error(Et(160));zO(a,o,i),ci=null,Fo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ar(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)WO(e,n),e=e.sibling}function WO(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Co(e,n),Qo(n),r&4){try{Ch(3,n,n.return),L_(3,n)}catch(x){Ar(n,n.return,x)}try{Ch(5,n,n.return)}catch(x){Ar(n,n.return,x)}}break;case 1:Co(e,n),Qo(n),r&512&&t!==null&&O1(t,t.return);break;case 5:if(Co(e,n),Qo(n),r&512&&t!==null&&O1(t,t.return),n.flags&32){var i=n.stateNode;try{rp(i,"")}catch(x){Ar(n,n.return,x)}}if(r&4&&(i=n.stateNode,i!=null)){var a=n.memoizedProps,o=t!==null?t.memoizedProps:a,s=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&A5(i,a),Dy(s,o);var c=Dy(s,a);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?S5(i,h):d==="dangerouslySetInnerHTML"?p5(i,h):d==="children"?rp(i,h):QE(i,d,h,c)}switch(s){case"input":wy(i,a);break;case"textarea":f5(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?q1(i,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?q1(i,!!a.multiple,a.defaultValue,!0):q1(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ap]=a}catch(x){Ar(n,n.return,x)}}break;case 6:if(Co(e,n),Qo(n),r&4){if(n.stateNode===null)throw Error(Et(162));i=n.stateNode,a=n.memoizedProps;try{i.nodeValue=a}catch(x){Ar(n,n.return,x)}}break;case 3:if(Co(e,n),Qo(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{sp(e.containerInfo)}catch(x){Ar(n,n.return,x)}break;case 4:Co(e,n),Qo(n);break;case 13:Co(e,n),Qo(n),i=n.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(TC=Er())),r&4&&EP(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Bi=(c=Bi)||d,Co(e,n),Bi=c):Co(e,n),Qo(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&(n.mode&1)!==0)for(Xt=n,d=n.child;d!==null;){for(h=Xt=d;Xt!==null;){switch(f=Xt,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ch(4,f,f.return);break;case 1:O1(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){Ar(r,t,x)}}break;case 5:O1(f,f.return);break;case 22:if(f.memoizedState!==null){VP(h);continue}}m!==null?(m.return=f,Xt=m):VP(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=m5("display",o))}catch(x){Ar(n,n.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){Ar(n,n.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Co(e,n),Qo(n),r&4&&EP(n);break;case 21:break;default:Co(e,n),Qo(n)}}function Qo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(HO(t)){var r=t;break e}t=t.return}throw Error(Et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rp(i,""),r.flags&=-33);var a=yP(n);r4(n,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=yP(n);n4(n,s,o);break;default:throw Error(Et(161))}}catch(l){Ar(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function ene(n,e,t){Xt=n,XO(n)}function XO(n,e,t){for(var r=(n.mode&1)!==0;Xt!==null;){var i=Xt,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||JS;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||Bi;s=JS;var c=Bi;if(JS=o,(Bi=l)&&!c)for(Xt=i;Xt!==null;)o=Xt,l=o.child,o.tag===22&&o.memoizedState!==null?DP(i):l!==null?(l.return=o,Xt=l):DP(i);for(;a!==null;)Xt=a,XO(a),a=a.sibling;Xt=i,JS=s,Bi=c}CP(n)}else(i.subtreeFlags&8772)!==0&&a!==null?(a.return=i,Xt=a):CP(n)}}function CP(n){for(;Xt!==null;){var e=Xt;if((e.flags&8772)!==0){var t=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Bi||L_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Bi)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Do(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&lP(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}lP(e,o,t)}break;case 5:var s=e.stateNode;if(t===null&&e.flags&4){t=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&sp(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Et(163))}Bi||e.flags&512&&t4(e)}catch(f){Ar(e,e.return,f)}}if(e===n){Xt=null;break}if(t=e.sibling,t!==null){t.return=e.return,Xt=t;break}Xt=e.return}}function VP(n){for(;Xt!==null;){var e=Xt;if(e===n){Xt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Xt=t;break}Xt=e.return}}function DP(n){for(;Xt!==null;){var e=Xt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{L_(4,e)}catch(l){Ar(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ar(e,i,l)}}var a=e.return;try{t4(e)}catch(l){Ar(e,a,l)}break;case 5:var o=e.return;try{t4(e)}catch(l){Ar(e,o,l)}}}catch(l){Ar(e,e.return,l)}if(e===n){Xt=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Xt=s;break}Xt=e.return}}var tne=Math.ceil,N8=cl.ReactCurrentDispatcher,DC=cl.ReactCurrentOwner,ro=cl.ReactCurrentBatchConfig,K0=0,ri=null,Br=null,gi=0,ya=0,k1=Lu(0),Yr=0,gp=null,Wc=0,B_=0,FC=0,Vh=null,oa=null,TC=0,gA=1/0,Gs=null,U8=!1,i4=null,cu=null,ZS=!1,Jl=null,j8=0,Dh=0,a4=null,Hg=-1,zg=0;function Ji(){return(K0&6)!==0?Er():Hg!==-1?Hg:Hg=Er()}function du(n){return(n.mode&1)===0?1:(K0&2)!==0&&gi!==0?gi&-gi:k0e.transition!==null?(zg===0&&(zg=T5()),zg):(n=An,n!==0||(n=window.event,n=n===void 0?16:I5(n.type)),n)}function Oo(n,e,t,r){if(50<Dh)throw Dh=0,a4=null,Error(Et(185));jp(n,t,r),((K0&2)===0||n!==ri)&&(n===ri&&((K0&2)===0&&(B_|=t),Yr===4&&Yl(n,gi)),da(n,r),t===1&&K0===0&&(e.mode&1)===0&&(gA=Er()+500,b_&&Bu()))}function da(n,e){var t=n.callbackNode;kte(n,e);var r=E8(n,n===ri?gi:0);if(r===0)t!==null&&Ib(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Ib(t),e===1)n.tag===0?O0e(FP.bind(null,n)):tO(FP.bind(null,n)),L0e(function(){(K0&6)===0&&Bu()}),t=null;else{switch(b5(r)){case 1:t=tC;break;case 4:t=D5;break;case 16:t=y8;break;case 536870912:t=F5;break;default:t=y8}t=ek(t,KO.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function KO(n,e){if(Hg=-1,zg=0,(K0&6)!==0)throw Error(Et(327));var t=n.callbackNode;if(eA()&&n.callbackNode!==t)return null;var r=E8(n,n===ri?gi:0);if(r===0)return null;if((r&30)!==0||(r&n.expiredLanes)!==0||e)e=G8(n,r);else{e=r;var i=K0;K0|=2;var a=qO();(ri!==n||gi!==e)&&(Gs=null,gA=Er()+500,Bc(n,e));do try{ine();break}catch(s){YO(n,s)}while(1);hC(),N8.current=a,K0=i,Br!==null?e=0:(ri=null,gi=0,e=Yr)}if(e!==0){if(e===2&&(i=Ry(n),i!==0&&(r=i,e=o4(n,i))),e===1)throw t=gp,Bc(n,0),Yl(n,r),da(n,Er()),t;if(e===6)Yl(n,r);else{if(i=n.current.alternate,(r&30)===0&&!nne(i)&&(e=G8(n,r),e===2&&(a=Ry(n),a!==0&&(r=a,e=o4(n,a))),e===1))throw t=gp,Bc(n,0),Yl(n,r),da(n,Er()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Et(345));case 2:hc(n,oa,Gs);break;case 3:if(Yl(n,r),(r&130023424)===r&&(e=TC+500-Er(),10<e)){if(E8(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Ji(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Uy(hc.bind(null,n,oa,Gs),e);break}hc(n,oa,Gs);break;case 4:if(Yl(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Io(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=Er()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tne(r/1960))-r,10<r){n.timeoutHandle=Uy(hc.bind(null,n,oa,Gs),r);break}hc(n,oa,Gs);break;case 5:hc(n,oa,Gs);break;default:throw Error(Et(329))}}}return da(n,Er()),n.callbackNode===t?KO.bind(null,n):null}function o4(n,e){var t=Vh;return n.current.memoizedState.isDehydrated&&(Bc(n,e).flags|=256),n=G8(n,e),n!==2&&(e=oa,oa=t,e!==null&&s4(e)),n}function s4(n){oa===null?oa=n:oa.push.apply(oa,n)}function nne(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],a=i.getSnapshot;i=i.value;try{if(!Uo(a(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yl(n,e){for(e&=~FC,e&=~B_,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Io(e),r=1<<t;n[t]=-1,e&=~r}}function FP(n){if((K0&6)!==0)throw Error(Et(327));eA();var e=E8(n,0);if((e&1)===0)return da(n,Er()),null;var t=G8(n,e);if(n.tag!==0&&t===2){var r=Ry(n);r!==0&&(e=r,t=o4(n,r))}if(t===1)throw t=gp,Bc(n,0),Yl(n,e),da(n,Er()),t;if(t===6)throw Error(Et(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,hc(n,oa,Gs),da(n,Er()),null}function bC(n,e){var t=K0;K0|=1;try{return n(e)}finally{K0=t,K0===0&&(gA=Er()+500,b_&&Bu())}}function Xc(n){Jl!==null&&Jl.tag===0&&(K0&6)===0&&eA();var e=K0;K0|=1;var t=ro.transition,r=An;try{if(ro.transition=null,An=1,n)return n()}finally{An=r,ro.transition=t,K0=e,(K0&6)===0&&Bu()}}function PC(){ya=k1.current,zn(k1)}function Bc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,R0e(t)),Br!==null)for(t=Br.return;t!==null;){var r=t;switch(dC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&T8();break;case 3:mA(),zn(ua),zn(Oi),xC();break;case 5:_C(r);break;case 4:mA();break;case 13:zn(ar);break;case 19:zn(ar);break;case 10:pC(r.type._context);break;case 22:case 23:PC()}t=t.return}if(ri=n,Br=n=Au(n.current,null),gi=ya=e,Yr=0,gp=null,FC=B_=Wc=0,oa=Vh=null,Ec!==null){for(e=0;e<Ec.length;e++)if(t=Ec[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,a=t.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}t.pending=r}Ec=null}return n}function YO(n,e){do{var t=Br;try{if(hC(),Ug.current=k8,O8){for(var r=sr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}O8=!1}if(zc=0,ni=Xr=sr=null,Eh=!1,pp=0,DC.current=null,t===null||t.return===null){Yr=1,gp=e,Br=null;break}e:{var a=n,o=t.return,s=t,l=e;if(e=gi,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=s,h=d.tag;if((d.mode&1)===0&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=pP(o);if(m!==null){m.flags&=-257,mP(m,o,s,a,e),m.mode&1&&hP(a,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var x=new Set;x.add(l),e.updateQueue=x}else g.add(l);break e}else{if((e&1)===0){hP(a,c,e),RC();break e}l=Error(Et(426))}}else if(er&&s.mode&1){var E=pP(o);if(E!==null){(E.flags&65536)===0&&(E.flags|=256),mP(E,o,s,a,e),AC(SA(l,s));break e}}a=l=SA(l,s),Yr!==4&&(Yr=2),Vh===null?Vh=[a]:Vh.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var _=PO(a,l,e);sP(a,_);break e;case 1:s=l;var v=a.type,C=a.stateNode;if((a.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(cu===null||!cu.has(C)))){a.flags|=65536,e&=-e,a.lanes|=e;var D=RO(a,s,e);sP(a,D);break e}}a=a.return}while(a!==null)}JO(t)}catch(V){e=V,Br===t&&t!==null&&(Br=t=t.return);continue}break}while(1)}function qO(){var n=N8.current;return N8.current=k8,n===null?k8:n}function RC(){(Yr===0||Yr===3||Yr===2)&&(Yr=4),ri===null||(Wc&268435455)===0&&(B_&268435455)===0||Yl(ri,gi)}function G8(n,e){var t=K0;K0|=2;var r=qO();(ri!==n||gi!==e)&&(Gs=null,Bc(n,e));do try{rne();break}catch(i){YO(n,i)}while(1);if(hC(),K0=t,N8.current=r,Br!==null)throw Error(Et(261));return ri=null,gi=0,Yr}function rne(){for(;Br!==null;)QO(Br)}function ine(){for(;Br!==null&&!Tte();)QO(Br)}function QO(n){var e=$O(n.alternate,n,ya);n.memoizedProps=n.pendingProps,e===null?JO(n):Br=e,DC.current=null}function JO(n){var e=n;do{var t=e.alternate;if(n=e.return,(e.flags&32768)===0){if(t=Q0e(t,e,ya),t!==null){Br=t;return}}else{if(t=J0e(t,e),t!==null){t.flags&=32767,Br=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Yr=6,Br=null;return}}if(e=e.sibling,e!==null){Br=e;return}Br=e=n}while(e!==null);Yr===0&&(Yr=5)}function hc(n,e,t){var r=An,i=ro.transition;try{ro.transition=null,An=1,ane(n,e,t,r)}finally{ro.transition=i,An=r}return null}function ane(n,e,t,r){do eA();while(Jl!==null);if((K0&6)!==0)throw Error(Et(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Et(177));n.callbackNode=null,n.callbackPriority=0;var a=t.lanes|t.childLanes;if(Nte(n,a),n===ri&&(Br=ri=null,gi=0),(t.subtreeFlags&2064)===0&&(t.flags&2064)===0||ZS||(ZS=!0,ek(y8,function(){return eA(),null})),a=(t.flags&15990)!==0,(t.subtreeFlags&15990)!==0||a){a=ro.transition,ro.transition=null;var o=An;An=1;var s=K0;K0|=4,DC.current=null,$0e(n,t),WO(t,n),C0e(ky),C8=!!Oy,ky=Oy=null,n.current=t,ene(t),bte(),K0=s,An=o,ro.transition=a}else n.current=t;if(ZS&&(ZS=!1,Jl=n,j8=i),a=n.pendingLanes,a===0&&(cu=null),Lte(t.stateNode),da(n,Er()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(U8)throw U8=!1,n=i4,i4=null,n;return(j8&1)!==0&&n.tag!==0&&eA(),a=n.pendingLanes,(a&1)!==0?n===a4?Dh++:(Dh=0,a4=n):Dh=0,Bu(),null}function eA(){if(Jl!==null){var n=b5(j8),e=ro.transition,t=An;try{if(ro.transition=null,An=16>n?16:n,Jl===null)var r=!1;else{if(n=Jl,Jl=null,j8=0,(K0&6)!==0)throw Error(Et(331));var i=K0;for(K0|=4,Xt=n.current;Xt!==null;){var a=Xt,o=a.child;if((Xt.flags&16)!==0){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(Xt=c;Xt!==null;){var d=Xt;switch(d.tag){case 0:case 11:case 15:Ch(8,d,a)}var h=d.child;if(h!==null)h.return=d,Xt=h;else for(;Xt!==null;){d=Xt;var f=d.sibling,m=d.return;if(GO(d),d===c){Xt=null;break}if(f!==null){f.return=m,Xt=f;break}Xt=m}}}var g=a.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var E=x.sibling;x.sibling=null,x=E}while(x!==null)}}Xt=a}}if((a.subtreeFlags&2064)!==0&&o!==null)o.return=a,Xt=o;else e:for(;Xt!==null;){if(a=Xt,(a.flags&2048)!==0)switch(a.tag){case 0:case 11:case 15:Ch(9,a,a.return)}var _=a.sibling;if(_!==null){_.return=a.return,Xt=_;break e}Xt=a.return}}var v=n.current;for(Xt=v;Xt!==null;){o=Xt;var C=o.child;if((o.subtreeFlags&2064)!==0&&C!==null)C.return=o,Xt=C;else e:for(o=v;Xt!==null;){if(s=Xt,(s.flags&2048)!==0)try{switch(s.tag){case 0:case 11:case 15:L_(9,s)}}catch(V){Ar(s,s.return,V)}if(s===o){Xt=null;break e}var D=s.sibling;if(D!==null){D.return=s.return,Xt=D;break e}Xt=s.return}}if(K0=i,Bu(),fs&&typeof fs.onPostCommitFiberRoot=="function")try{fs.onPostCommitFiberRoot(C_,n)}catch{}r=!0}return r}finally{An=t,ro.transition=e}}return!1}function TP(n,e,t){e=SA(t,e),e=PO(n,e,1),n=uu(n,e,1),e=Ji(),n!==null&&(jp(n,1,e),da(n,e))}function Ar(n,e,t){if(n.tag===3)TP(n,n,t);else for(;e!==null;){if(e.tag===3){TP(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cu===null||!cu.has(r))){n=SA(t,n),n=RO(e,n,1),e=uu(e,n,1),n=Ji(),e!==null&&(jp(e,1,n),da(e,n));break}}e=e.return}}function one(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Ji(),n.pingedLanes|=n.suspendedLanes&t,ri===n&&(gi&t)===t&&(Yr===4||Yr===3&&(gi&130023424)===gi&&500>Er()-TC?Bc(n,0):FC|=t),da(n,e)}function ZO(n,e){e===0&&((n.mode&1)===0?e=1:(e=GS,GS<<=1,(GS&130023424)===0&&(GS=4194304)));var t=Ji();n=ol(n,e),n!==null&&(jp(n,e,t),da(n,t))}function sne(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),ZO(n,t)}function lne(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Et(314))}r!==null&&r.delete(e),ZO(n,t)}var $O;$O=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ua.current)la=!0;else{if((n.lanes&t)===0&&(e.flags&128)===0)return la=!1,q0e(n,e,t);la=(n.flags&131072)!==0}else la=!1,er&&(e.flags&1048576)!==0&&nO(e,R8,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gg(n,e),n=e.pendingProps;var i=fA(e,Oi.current);$1(e,t),i=wC(null,e,r,n,i,t);var a=yC();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ca(r)?(a=!0,b8(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,SC(e),i.updater=P_,e.stateNode=i,i._reactInternals=e,Ky(e,r,n,t),e=Qy(null,e,r,!0,a,t)):(e.tag=0,er&&a&&cC(e),Yi(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Gg(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=cne(r),n=Do(r,n),i){case 0:e=qy(null,e,r,n,t);break e;case 1:e=_P(null,e,r,n,t);break e;case 11:e=SP(null,e,r,n,t);break e;case 14:e=gP(null,e,r,Do(r.type,n),t);break e}throw Error(Et(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Do(r,i),qy(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Do(r,i),_P(n,e,r,i,t);case 3:e:{if(IO(e),n===null)throw Error(Et(387));r=e.pendingProps,a=e.memoizedState,i=a.element,oO(n,e),M8(e,r,null,t);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=SA(Error(Et(423)),e),e=xP(n,e,r,t,i);break e}else if(r!==i){i=SA(Error(Et(424)),e),e=xP(n,e,r,t,i);break e}else for(Va=lu(e.stateNode.containerInfo.firstChild),ba=e,er=!0,To=null,t=cO(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(hA(),r===i){e=sl(n,e,t);break e}Yi(n,e,r,t)}e=e.child}return e;case 5:return dO(e),n===null&&zy(e),r=e.type,i=e.pendingProps,a=n!==null?n.memoizedProps:null,o=i.children,Ny(r,i)?o=null:a!==null&&Ny(r,a)&&(e.flags|=32),MO(n,e),Yi(n,e,o,t),e.child;case 6:return n===null&&zy(e),null;case 13:return OO(n,e,t);case 4:return gC(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=pA(e,null,r,t):Yi(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Do(r,i),SP(n,e,r,i,t);case 7:return Yi(n,e,e.pendingProps,t),e.child;case 8:return Yi(n,e,e.pendingProps.children,t),e.child;case 12:return Yi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Mn(L8,r._currentValue),r._currentValue=o,a!==null)if(Uo(a.value,o)){if(a.children===i.children&&!ua.current){e=sl(n,e,t);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=Qs(-1,t&-t),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=t,l=a.alternate,l!==null&&(l.lanes|=t),Wy(a.return,t,e),s.lanes|=t;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Et(341));o.lanes|=t,s=o.alternate,s!==null&&(s.lanes|=t),Wy(o,t,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Yi(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,$1(e,t),i=so(i),r=r(i),e.flags|=1,Yi(n,e,r,t),e.child;case 14:return r=e.type,i=Do(r,e.pendingProps),i=Do(r.type,i),gP(n,e,r,i,t);case 15:return LO(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Do(r,i),Gg(n,e),e.tag=1,ca(r)?(n=!0,b8(e)):n=!1,$1(e,t),lO(e,r,i),Ky(e,r,i,t),Qy(null,e,r,!0,n,t);case 19:return kO(n,e,t);case 22:return BO(n,e,t)}throw Error(Et(156,e.tag))};function ek(n,e){return V5(n,e)}function une(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function no(n,e,t,r){return new une(n,e,t,r)}function LC(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cne(n){if(typeof n=="function")return LC(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ZE)return 11;if(n===$E)return 14}return 2}function Au(n,e){var t=n.alternate;return t===null?(t=no(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Wg(n,e,t,r,i,a){var o=2;if(r=n,typeof n=="function")LC(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case F1:return Mc(t.children,i,a,e);case JE:o=8,i|=8;break;case Sy:return n=no(12,t,e,i|2),n.elementType=Sy,n.lanes=a,n;case gy:return n=no(13,t,e,i),n.elementType=gy,n.lanes=a,n;case _y:return n=no(19,t,e,i),n.elementType=_y,n.lanes=a,n;case u5:return M_(t,i,a,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case s5:o=10;break e;case l5:o=9;break e;case ZE:o=11;break e;case $E:o=14;break e;case Hl:o=16,r=null;break e}throw Error(Et(130,n==null?n:typeof n,""))}return e=no(o,t,e,i),e.elementType=n,e.type=r,e.lanes=a,e}function Mc(n,e,t,r){return n=no(7,n,r,e),n.lanes=t,n}function M_(n,e,t,r){return n=no(22,n,r,e),n.elementType=u5,n.lanes=t,n.stateNode={isHidden:!1},n}function Wv(n,e,t){return n=no(6,n,null,e),n.lanes=t,n}function Xv(n,e,t){return e=no(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function dne(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vv(0),this.expirationTimes=Vv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function BC(n,e,t,r,i,a,o,s,l){return n=new dne(n,e,t,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=no(3,null,null,e),n.current=a,a.stateNode=n,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},SC(a),n}function Ane(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D1,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function tk(n){if(!n)return vu;n=n._reactInternals;e:{if(rd(n)!==n||n.tag!==1)throw Error(Et(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ca(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Et(171))}if(n.tag===1){var t=n.type;if(ca(t))return eO(n,t,e)}return e}function nk(n,e,t,r,i,a,o,s,l){return n=BC(t,r,!0,n,i,a,o,s,l),n.context=tk(null),t=n.current,r=Ji(),i=du(t),a=Qs(r,i),a.callback=e!=null?e:null,uu(t,a,i),n.current.lanes=i,jp(n,i,r),da(n,r),n}function I_(n,e,t,r){var i=e.current,a=Ji(),o=du(i);return t=tk(t),e.context===null?e.context=t:e.pendingContext=t,e=Qs(a,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=uu(i,e,o),n!==null&&(Oo(n,i,o,a),Ng(n,i,o)),o}function H8(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function bP(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function MC(n,e){bP(n,e),(n=n.alternate)&&bP(n,e)}function fne(){return null}var rk=typeof reportError=="function"?reportError:function(n){console.error(n)};function IC(n){this._internalRoot=n}O_.prototype.render=IC.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Et(409));I_(n,e,null,null)};O_.prototype.unmount=IC.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Xc(function(){I_(null,n,null,null)}),e[al]=null}};function O_(n){this._internalRoot=n}O_.prototype.unstable_scheduleHydration=function(n){if(n){var e=L5();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Kl.length&&e!==0&&e<Kl[t].priority;t++);Kl.splice(t,0,n),t===0&&M5(n)}};function OC(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function k_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function PP(){}function hne(n,e,t,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var c=H8(o);a.call(c)}}var o=nk(e,r,n,0,null,!1,!1,"",PP);return n._reactRootContainer=o,n[al]=o.current,cp(n.nodeType===8?n.parentNode:n),Xc(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var c=H8(l);s.call(c)}}var l=BC(n,0,!1,null,null,!1,!1,"",PP);return n._reactRootContainer=l,n[al]=l.current,cp(n.nodeType===8?n.parentNode:n),Xc(function(){I_(e,l,t,r)}),l}function N_(n,e,t,r,i){var a=t._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=H8(o);s.call(l)}}I_(e,o,n,i)}else o=hne(t,e,n,i,r);return H8(o)}P5=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ch(e.pendingLanes);t!==0&&(nC(e,t|1),da(e,Er()),(K0&6)===0&&(gA=Er()+500,Bu()))}break;case 13:Xc(function(){var r=ol(n,1);if(r!==null){var i=Ji();Oo(r,n,1,i)}}),MC(n,1)}};rC=function(n){if(n.tag===13){var e=ol(n,134217728);if(e!==null){var t=Ji();Oo(e,n,134217728,t)}MC(n,134217728)}};R5=function(n){if(n.tag===13){var e=du(n),t=ol(n,e);if(t!==null){var r=Ji();Oo(t,n,e,r)}MC(n,e)}};L5=function(){return An};B5=function(n,e){var t=An;try{return An=n,e()}finally{An=t}};Ty=function(n,e,t){switch(e){case"input":if(wy(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=T_(r);if(!i)throw Error(Et(90));d5(r),wy(r,i)}}}break;case"textarea":f5(n,t);break;case"select":e=t.value,e!=null&&q1(n,!!t.multiple,e,!1)}};x5=bC;v5=Xc;var pne={usingClientEntryPoint:!1,Events:[Hp,R1,T_,g5,_5,bC]},Hf={findFiberByHostInstance:yc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mne={bundleType:Hf.bundleType,version:Hf.version,rendererPackageName:Hf.rendererPackageName,rendererConfig:Hf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cl.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=E5(n),n===null?null:n.stateNode},findFiberByHostInstance:Hf.findFiberByHostInstance||fne,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$S.isDisabled&&$S.supportsFiber)try{C_=$S.inject(mne),fs=$S}catch{}}Ma.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pne;Ma.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!OC(e))throw Error(Et(200));return Ane(n,e,null,t)};Ma.createRoot=function(n,e){if(!OC(n))throw Error(Et(299));var t=!1,r="",i=rk;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=BC(n,1,!1,null,null,t,!1,r,i),n[al]=e.current,cp(n.nodeType===8?n.parentNode:n),new IC(e)};Ma.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Et(188)):(n=Object.keys(n).join(","),Error(Et(268,n)));return n=E5(e),n=n===null?null:n.stateNode,n};Ma.flushSync=function(n){return Xc(n)};Ma.hydrate=function(n,e,t){if(!k_(e))throw Error(Et(200));return N_(null,n,e,!0,t)};Ma.hydrateRoot=function(n,e,t){if(!OC(n))throw Error(Et(405));var r=t!=null&&t.hydratedSources||null,i=!1,a="",o=rk;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=nk(e,null,n,1,t!=null?t:null,i,!1,a,o),n[al]=e.current,cp(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new O_(e)};Ma.render=function(n,e,t){if(!k_(e))throw Error(Et(200));return N_(null,n,e,!1,t)};Ma.unmountComponentAtNode=function(n){if(!k_(n))throw Error(Et(40));return n._reactRootContainer?(Xc(function(){N_(null,null,n,!1,function(){n._reactRootContainer=null,n[al]=null})}),!0):!1};Ma.unstable_batchedUpdates=bC;Ma.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!k_(t))throw Error(Et(200));if(n==null||n._reactInternals===void 0)throw Error(Et(38));return N_(n,e,t,!1,r)};Ma.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=Ma})(ls);function Sne(n){n()}let ik=Sne;const gne=n=>ik=n,_ne=()=>ik,wu=$g.createContext(null);function ak(){return Ne.exports.useContext(wu)}const xne=()=>{throw new Error("uSES not initialized!")};let ok=xne;const vne=n=>{ok=n},wne=(n,e)=>n===e;function yne(n=wu){const e=n===wu?ak:()=>Ne.exports.useContext(n);return function(r,i=wne){const{store:a,subscription:o,getServerState:s}=e(),l=ok(o.addNestedSub,a.getState,s||a.getState,r,i);return Ne.exports.useDebugValue(l),l}}const Ene=yne();var sk={exports:{}},hn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ii=typeof Symbol=="function"&&Symbol.for,kC=ii?Symbol.for("react.element"):60103,NC=ii?Symbol.for("react.portal"):60106,U_=ii?Symbol.for("react.fragment"):60107,j_=ii?Symbol.for("react.strict_mode"):60108,G_=ii?Symbol.for("react.profiler"):60114,H_=ii?Symbol.for("react.provider"):60109,z_=ii?Symbol.for("react.context"):60110,UC=ii?Symbol.for("react.async_mode"):60111,W_=ii?Symbol.for("react.concurrent_mode"):60111,X_=ii?Symbol.for("react.forward_ref"):60112,K_=ii?Symbol.for("react.suspense"):60113,Cne=ii?Symbol.for("react.suspense_list"):60120,Y_=ii?Symbol.for("react.memo"):60115,q_=ii?Symbol.for("react.lazy"):60116,Vne=ii?Symbol.for("react.block"):60121,Dne=ii?Symbol.for("react.fundamental"):60117,Fne=ii?Symbol.for("react.responder"):60118,Tne=ii?Symbol.for("react.scope"):60119;function Oa(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case kC:switch(n=n.type,n){case UC:case W_:case U_:case G_:case j_:case K_:return n;default:switch(n=n&&n.$$typeof,n){case z_:case X_:case q_:case Y_:case H_:return n;default:return e}}case NC:return e}}}function lk(n){return Oa(n)===W_}hn.AsyncMode=UC;hn.ConcurrentMode=W_;hn.ContextConsumer=z_;hn.ContextProvider=H_;hn.Element=kC;hn.ForwardRef=X_;hn.Fragment=U_;hn.Lazy=q_;hn.Memo=Y_;hn.Portal=NC;hn.Profiler=G_;hn.StrictMode=j_;hn.Suspense=K_;hn.isAsyncMode=function(n){return lk(n)||Oa(n)===UC};hn.isConcurrentMode=lk;hn.isContextConsumer=function(n){return Oa(n)===z_};hn.isContextProvider=function(n){return Oa(n)===H_};hn.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===kC};hn.isForwardRef=function(n){return Oa(n)===X_};hn.isFragment=function(n){return Oa(n)===U_};hn.isLazy=function(n){return Oa(n)===q_};hn.isMemo=function(n){return Oa(n)===Y_};hn.isPortal=function(n){return Oa(n)===NC};hn.isProfiler=function(n){return Oa(n)===G_};hn.isStrictMode=function(n){return Oa(n)===j_};hn.isSuspense=function(n){return Oa(n)===K_};hn.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===U_||n===W_||n===G_||n===j_||n===K_||n===Cne||typeof n=="object"&&n!==null&&(n.$$typeof===q_||n.$$typeof===Y_||n.$$typeof===H_||n.$$typeof===z_||n.$$typeof===X_||n.$$typeof===Dne||n.$$typeof===Fne||n.$$typeof===Tne||n.$$typeof===Vne)};hn.typeOf=Oa;(function(n){n.exports=hn})(sk);var uk=sk.exports,bne={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Pne={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ck={};ck[uk.ForwardRef]=bne;ck[uk.Memo]=Pne;var Rne={exports:{}},pn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jC=Symbol.for("react.element"),GC=Symbol.for("react.portal"),Q_=Symbol.for("react.fragment"),J_=Symbol.for("react.strict_mode"),Z_=Symbol.for("react.profiler"),$_=Symbol.for("react.provider"),e2=Symbol.for("react.context"),Lne=Symbol.for("react.server_context"),t2=Symbol.for("react.forward_ref"),n2=Symbol.for("react.suspense"),r2=Symbol.for("react.suspense_list"),i2=Symbol.for("react.memo"),a2=Symbol.for("react.lazy"),Bne=Symbol.for("react.offscreen"),dk;dk=Symbol.for("react.module.reference");function po(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case jC:switch(n=n.type,n){case Q_:case Z_:case J_:case n2:case r2:return n;default:switch(n=n&&n.$$typeof,n){case Lne:case e2:case t2:case a2:case i2:case $_:return n;default:return e}}case GC:return e}}}pn.ContextConsumer=e2;pn.ContextProvider=$_;pn.Element=jC;pn.ForwardRef=t2;pn.Fragment=Q_;pn.Lazy=a2;pn.Memo=i2;pn.Portal=GC;pn.Profiler=Z_;pn.StrictMode=J_;pn.Suspense=n2;pn.SuspenseList=r2;pn.isAsyncMode=function(){return!1};pn.isConcurrentMode=function(){return!1};pn.isContextConsumer=function(n){return po(n)===e2};pn.isContextProvider=function(n){return po(n)===$_};pn.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===jC};pn.isForwardRef=function(n){return po(n)===t2};pn.isFragment=function(n){return po(n)===Q_};pn.isLazy=function(n){return po(n)===a2};pn.isMemo=function(n){return po(n)===i2};pn.isPortal=function(n){return po(n)===GC};pn.isProfiler=function(n){return po(n)===Z_};pn.isStrictMode=function(n){return po(n)===J_};pn.isSuspense=function(n){return po(n)===n2};pn.isSuspenseList=function(n){return po(n)===r2};pn.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===Q_||n===Z_||n===J_||n===n2||n===r2||n===Bne||typeof n=="object"&&n!==null&&(n.$$typeof===a2||n.$$typeof===i2||n.$$typeof===$_||n.$$typeof===e2||n.$$typeof===t2||n.$$typeof===dk||n.getModuleId!==void 0)};pn.typeOf=po;(function(n){n.exports=pn})(Rne);function Mne(){const n=_ne();let e=null,t=null;return{clear(){e=null,t=null},notify(){n(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!i||e===null||(i=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}const RP={notify(){},get:()=>[]};function Ine(n,e){let t,r=RP;function i(h){return l(),r.subscribe(h)}function a(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function s(){return Boolean(t)}function l(){t||(t=e?e.addNestedSub(o):n.subscribe(o),r=Mne())}function c(){t&&(t(),t=void 0,r.clear(),r=RP)}const d={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:s,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const One=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kne=One?Ne.exports.useLayoutEffect:Ne.exports.useEffect;function Nne({store:n,context:e,children:t,serverState:r}){const i=Ne.exports.useMemo(()=>{const s=Ine(n);return{store:n,subscription:s,getServerState:r?()=>r:void 0}},[n,r]),a=Ne.exports.useMemo(()=>n.getState(),[n]);return kne(()=>{const{subscription:s}=i;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),a!==n.getState()&&s.notifyNestedSubs(),()=>{s.tryUnsubscribe(),s.onStateChange=void 0}},[i,a]),B((e||wu).Provider,{value:i,children:t})}function Ak(n=wu){const e=n===wu?ak:()=>Ne.exports.useContext(n);return function(){const{store:r}=e();return r}}const Une=Ak();function jne(n=wu){const e=n===wu?Une:Ak(n);return function(){return e().dispatch}}const Gne=jne();vne(t5.exports.useSyncExternalStoreWithSelector);gne(ls.exports.unstable_batchedUpdates);function Hne(n){n=n||P0().name,n=zW(n),document.title=n?`PartyPlanner64 - ${n}`:"PartyPlanner64"}const zne=()=>Gne(),j0=Ene;function xs(){return j0(rl)}function fk(){return j0(Up)}function Wne(){const n=fk();return Ne.exports.useMemo(()=>{const e=[];for(let t in n)e.push(parseInt(t,10));return e},[n])}function Xne(){const n=xs(),e=fk();return Ne.exports.useMemo(()=>{const t=[];for(let r in e){const i=n.spaces[r];i&&t.push(i)}return t},[n,e])}function Kne(n){Ne.exports.useEffect(()=>{Hne(n)},[n])}function Yne(){const[n,e]=Ne.exports.useState(tr(In.uiTheme)||ql.Classic),t=Ne.exports.useCallback(r=>{r===In.uiTheme&&e(tr(In.uiTheme)||ql.Classic)},[]);return Ne.exports.useEffect(()=>(rH(t),()=>iH(t)),[t]),n}function qne(){const n=Yne();Ne.exports.useEffect(()=>{const e=document.documentElement,t=e.className.split(" ").filter(r=>r.startsWith("theme-"));e.classList.remove(...t),e.classList.add("theme-"+n)},[n])}var Kc={},Yc={};Object.defineProperty(Yc,"__esModule",{value:!0});Yc.ActionCreators=Yc.ActionTypes=void 0;var pc={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};Yc.ActionTypes=pc;var Qne={undo:function(){return{type:pc.UNDO}},redo:function(){return{type:pc.REDO}},jumpToFuture:function(e){return{type:pc.JUMP_TO_FUTURE,index:e}},jumpToPast:function(e){return{type:pc.JUMP_TO_PAST,index:e}},jump:function(e){return{type:pc.JUMP,index:e}},clearHistory:function(){return{type:pc.CLEAR_HISTORY}}};Yc.ActionCreators=Qne;var vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.parseActions=o2;vs.isHistory=Jne;vs.includeAction=Zne;vs.excludeAction=$ne;vs.combineFilters=ere;vs.groupByActionTypes=tre;vs.newHistory=nre;function o2(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Array.isArray(n)?n:typeof n=="string"?[n]:e}function Jne(n){return typeof n.present<"u"&&typeof n.future<"u"&&typeof n.past<"u"&&Array.isArray(n.future)&&Array.isArray(n.past)}function Zne(n){var e=o2(n);return function(t){return e.indexOf(t.type)>=0}}function $ne(n){var e=o2(n);return function(t){return e.indexOf(t.type)<0}}function ere(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.reduce(function(r,i){return function(a,o,s){return r(a,o,s)&&i(a,o,s)}},function(){return!0})}function tre(n){var e=o2(n);return function(t){return e.indexOf(t.type)>=0?t.type:null}}function nre(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{past:n,present:e,future:t,group:r,_latestUnfiltered:e,index:n.length,limit:n.length+t.length+1}}var hk={},jA={};Object.defineProperty(jA,"__esModule",{value:!0});jA.set=dre;jA.start=lre;jA.end=ure;jA.log=cre;function Jo(n){return are(n)||ire(n)||rre()}function rre(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function ire(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}function are(n){if(Array.isArray(n)){for(var e=0,t=new Array(n.length);e<n.length;e++)t[e]=n[e];return t}}var s2,Za,l4={prevState:"#9E9E9E",action:"#03A9F4",nextState:"#4CAF50"};function ore(){Za={header:[],prev:[],action:[],next:[],msgs:[]}}function sre(){var n=Za,e=n.header,t=n.prev,r=n.next,i=n.action,a=n.msgs;if(console.group){var o,s,l,c,d;(o=console).groupCollapsed.apply(o,Jo(e)),(s=console).log.apply(s,Jo(t)),(l=console).log.apply(l,Jo(i)),(c=console).log.apply(c,Jo(r)),(d=console).log.apply(d,Jo(a)),console.groupEnd()}else{var h,f,m,g,x;(h=console).log.apply(h,Jo(e)),(f=console).log.apply(f,Jo(t)),(m=console).log.apply(m,Jo(i)),(g=console).log.apply(g,Jo(r)),(x=console).log.apply(x,Jo(a))}}function u4(n,e,t){return["%c".concat(n),"color: ".concat(e,"; font-weight: bold"),t]}function lre(n,e){ore(),s2&&(console.group?(Za.header=["%credux-undo","font-style: italic","action",n.type],Za.action=u4("action",l4.action,n),Za.prev=u4("prev history",l4.prevState,e)):(Za.header=["redux-undo action",n.type],Za.action=["action",n],Za.prev=["prev history",e]))}function ure(n){s2&&(console.group?Za.next=u4("next history",l4.nextState,n):Za.next=["next history",n],sre())}function cre(){if(s2){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];Za.msgs=Za.msgs.concat([].concat(e,[`
`]))}}function dre(n){s2=n}(function(n){function e(V){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(R){return typeof R}:e=function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},e(V)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=D;var t=o(jA),r=Yc,i=vs;function a(){if(typeof WeakMap!="function")return null;var V=new WeakMap;return a=function(){return V},V}function o(V){if(V&&V.__esModule)return V;if(V===null||e(V)!=="object"&&typeof V!="function")return{default:V};var H=a();if(H&&H.has(V))return H.get(V);var R={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in V)if(Object.prototype.hasOwnProperty.call(V,te)){var $=j?Object.getOwnPropertyDescriptor(V,te):null;$&&($.get||$.set)?Object.defineProperty(R,te,$):R[te]=V[te]}return R.default=V,H&&H.set(V,R),R}function s(V,H){var R=Object.keys(V);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(V);H&&(j=j.filter(function(te){return Object.getOwnPropertyDescriptor(V,te).enumerable})),R.push.apply(R,j)}return R}function l(V){for(var H=1;H<arguments.length;H++){var R=arguments[H]!=null?arguments[H]:{};H%2?s(Object(R),!0).forEach(function(j){c(V,j,R[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(R)):s(Object(R)).forEach(function(j){Object.defineProperty(V,j,Object.getOwnPropertyDescriptor(R,j))})}return V}function c(V,H,R){return H in V?Object.defineProperty(V,H,{value:R,enumerable:!0,configurable:!0,writable:!0}):V[H]=R,V}function d(V){return m(V)||f(V)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(V){if(Symbol.iterator in Object(V)||Object.prototype.toString.call(V)==="[object Arguments]")return Array.from(V)}function m(V){if(Array.isArray(V)){for(var H=0,R=new Array(V.length);H<V.length;H++)R[H]=V[H];return R}}function g(V,H){var R=(0,i.newHistory)([],V,[]);return H&&(R._latestUnfiltered=null),R}function x(V,H,R,j){var te=V.past.length+1;t.log("inserting",H),t.log("new free: ",R-te);var $=V.past,z=V._latestUnfiltered,I=R&&R<=te,q=$.slice(I?1:0),P=z!=null?[].concat(d(q),[z]):q;return(0,i.newHistory)(P,H,[],j)}function E(V,H){if(H<0||H>=V.future.length)return V;var R=V.past,j=V.future,te=V._latestUnfiltered,$=[].concat(d(R),[te],d(j.slice(0,H))),z=j[H],I=j.slice(H+1);return(0,i.newHistory)($,z,I)}function _(V,H){if(H<0||H>=V.past.length)return V;var R=V.past,j=V.future,te=V._latestUnfiltered,$=R.slice(0,H),z=[].concat(d(R.slice(H+1)),[te],d(j)),I=R[H];return(0,i.newHistory)($,I,z)}function v(V,H){return H>0?E(V,H-1):H<0?_(V,V.past.length+H):V}function C(V,H){return H.indexOf(V)>-1?V:!V}function D(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.set(H.debug);var R=l({limit:void 0,filter:function(){return!0},groupBy:function(){return null},undoType:r.ActionTypes.UNDO,redoType:r.ActionTypes.REDO,jumpToPastType:r.ActionTypes.JUMP_TO_PAST,jumpToFutureType:r.ActionTypes.JUMP_TO_FUTURE,jumpType:r.ActionTypes.JUMP,neverSkipReducer:!1,ignoreInitialState:!1,syncFilter:!1},H,{initTypes:(0,i.parseActions)(H.initTypes,["@@redux-undo/INIT"]),clearHistoryType:(0,i.parseActions)(H.clearHistoryType,[r.ActionTypes.CLEAR_HISTORY])}),j=R.neverSkipReducer?function($,z){for(var I=arguments.length,q=new Array(I>2?I-2:0),P=2;P<I;P++)q[P-2]=arguments[P];return l({},$,{present:V.apply(void 0,[$.present,z].concat(q))})}:function($){return $},te;return function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.start(z,$);for(var I=$,q=arguments.length,P=new Array(q>2?q-2:0),ee=2;ee<q;ee++)P[ee-2]=arguments[ee];if(!te)if(t.log("history is uninitialized"),$===void 0){var ce={type:"@@redux-undo/CREATE_HISTORY"},U=V.apply(void 0,[$,ce].concat(P));return I=g(U,R.ignoreInitialState),t.log("do not set initialState on probe actions"),t.end(I),I}else(0,i.isHistory)($)?(I=te=R.ignoreInitialState?$:(0,i.newHistory)($.past,$.present,$.future),t.log("initialHistory initialized: initialState is a history",te)):(I=te=g($,R.ignoreInitialState),t.log("initialHistory initialized: initialState is not a history",te));var O;switch(z.type){case void 0:return I;case R.undoType:return O=v(I,-1),t.log("perform undo"),t.end(O),j.apply(void 0,[O,z].concat(P));case R.redoType:return O=v(I,1),t.log("perform redo"),t.end(O),j.apply(void 0,[O,z].concat(P));case R.jumpToPastType:return O=_(I,z.index),t.log("perform jumpToPast to ".concat(z.index)),t.end(O),j.apply(void 0,[O,z].concat(P));case R.jumpToFutureType:return O=E(I,z.index),t.log("perform jumpToFuture to ".concat(z.index)),t.end(O),j.apply(void 0,[O,z].concat(P));case R.jumpType:return O=v(I,z.index),t.log("perform jump to ".concat(z.index)),t.end(O),j.apply(void 0,[O,z].concat(P));case C(z.type,R.clearHistoryType):return O=g(I.present,R.ignoreInitialState),t.log("perform clearHistory"),t.end(O),j.apply(void 0,[O,z].concat(P));default:if(O=V.apply(void 0,[I.present,z].concat(P)),R.initTypes.some(function(be){return be===z.type}))return t.log("reset history due to init action"),t.end(te),te;if(I._latestUnfiltered===O)return I;var G=typeof R.filter=="function"&&!R.filter(z,O,I);if(G){var re=(0,i.newHistory)(I.past,O,I.future,I.group);return R.syncFilter||(re._latestUnfiltered=I._latestUnfiltered),t.log("filter ignored action, not storing it in past"),t.end(re),re}var oe=R.groupBy(z,O,I);if(oe!=null&&oe===I.group){var se=(0,i.newHistory)(I.past,O,I.future,I.group);return t.log("groupBy grouped the action with the previous action"),t.end(se),se}return I=x(I,O,R.limit,oe),t.log("inserted new state into history"),t.end(I),I}}}})(hk);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ActionTypes",{enumerable:!0,get:function(){return e.ActionTypes}}),Object.defineProperty(n,"ActionCreators",{enumerable:!0,get:function(){return e.ActionCreators}}),Object.defineProperty(n,"parseActions",{enumerable:!0,get:function(){return t.parseActions}}),Object.defineProperty(n,"isHistory",{enumerable:!0,get:function(){return t.isHistory}}),Object.defineProperty(n,"includeAction",{enumerable:!0,get:function(){return t.includeAction}}),Object.defineProperty(n,"excludeAction",{enumerable:!0,get:function(){return t.excludeAction}}),Object.defineProperty(n,"combineFilters",{enumerable:!0,get:function(){return t.combineFilters}}),Object.defineProperty(n,"groupByActionTypes",{enumerable:!0,get:function(){return t.groupByActionTypes}}),Object.defineProperty(n,"newHistory",{enumerable:!0,get:function(){return t.newHistory}}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var e=Yc,t=vs,r=i(hk);function i(a){return a&&a.__esModule?a:{default:a}}})(Kc);const Are=pM(Kc),fre={currentView:A0.EDITOR,currentAction:ue.MOVE,updateHideNotification:!1,notifications:[],overrideBg:null,romLoaded:!1,updateExists:!1,imagesLoaded:!1},pk=jE({name:"appState",initialState:fre,reducers:{changeViewAction:(n,e)=>{n.currentView=e.payload},changeCurrentActionAction:(n,e)=>{n.currentAction=e.payload},setHideUpdateNotification:(n,e)=>{n.updateHideNotification=e.payload},addNotificationAction:(n,e)=>{const{notification:t}=e.payload;n.notifications.find(r=>r.key===t.key)||n.notifications.push(t)},removeNotificationAction:(n,e)=>{const{notificationKey:t}=e.payload;n.notifications=n.notifications.filter(r=>r.key!==t)},setOverrideBgAction:(n,e)=>{n.overrideBg=e.payload},setRomLoadedAction:(n,e)=>{n.romLoaded=e.payload},setUpdateExistsAction:(n,e)=>{n.updateExists=e.payload},setImagesLoadedAction:(n,e)=>{n.imagesLoaded=e.payload}}}),{changeViewAction:hre,changeCurrentActionAction:pre,setHideUpdateNotification:LP,addNotificationAction:mre,removeNotificationAction:Sre,setOverrideBgAction:gre,setRomLoadedAction:_re,setUpdateExistsAction:xre,setImagesLoadedAction:vre}=pk.actions,mk=n=>n.app.currentView,wre=n=>n.app.currentAction,yre=n=>n.app.romLoaded,Ere=n=>n.app.updateExists,Cre=n=>n.app.notifications,Vre=pk.reducer,Dre={blocked:!1,prompt:!1,confirm:!1,message:"",messageHTML:"",onBlockerFinished:void 0},Sk=jE({name:"blocker",initialState:Dre,reducers:{blockUIAction:(n,e)=>{n.blocked=e.payload},showMessageAction:(n,e)=>{const t=e.payload;n.blocked=!!t,n.prompt=!1,n.confirm=!1,n.message=t||"",n.messageHTML="",n.onBlockerFinished=void 0},showMessageHTMLAction:(n,e)=>{const t=e.payload;n.blocked=!!t,n.prompt=!1,n.confirm=!1,n.message="",n.messageHTML=t||"",n.onBlockerFinished=void 0},confirmFromUserAction:(n,e)=>{const{message:t,onConfirmed:r}=e.payload;n.blocked=!0,n.prompt=!1,n.confirm=!0,n.message=t||"",n.messageHTML="",n.onBlockerFinished=r},promptUserAction:(n,e)=>{const{message:t,onSubmit:r}=e.payload;n.blocked=!0,n.prompt=!0,n.confirm=!1,n.message=t||"",n.messageHTML="",n.onBlockerFinished=r}}}),{blockUIAction:Fre,showMessageAction:Tre,showMessageHTMLAction:CEe,confirmFromUserAction:bre,promptUserAction:Pre}=Sk.actions,HC=n=>n.blocker.blocked,Rre=n=>n.blocker.message,Lre=n=>n.blocker.messageHTML,Bre=n=>n.blocker.prompt,Mre=n=>n.blocker.confirm,Ire=n=>n.blocker.onBlockerFinished,Ore=Sk.reducer,kre=n=>e=>t=>{const r=e(t);return t.type!==_8.type&&QI(n.getState())&&n.dispatch(_8({spaceIndices:null})),r},Nre=Are(Jee,{ignoreInitialState:!1,debug:!1,groupBy:Kc.groupByActionTypes([qs.type,WI.type]),filter:Kc.excludeAction([XE.type,YI.type,XI.type,KI.type,WE.type,_8.type,qI.type,zE.type])}),vt=Y$({reducer:{app:Vre,blocker:Ore,data:Nre},middleware:n=>n({serializableCheck:{ignoredActionPaths:["payload.event.parse","payload.event.write","payload.onConfirmed","payload.onSubmit","payload.notification"],ignoredPaths:["app.notifications","blocker.onBlockerFinished","data.present.eventLibrary","data.past","data.future","data._latestUnfiltered"]}}).concat(kre)});window._pp64Store=vt;function hr(n){vt.dispatch(XE({event:n}))}function Ure(n){vt.dispatch(Vee({eventId:n}))}function Wp(n){return y_(vt.getState())[n]}function Gn(){return y_(vt.getState())}function jre(){return j0(y_)}var ts=(n=>(n[n.leaf=0]="leaf",n[n.hasCoins=1]="hasCoins",n[n.star=2]="star",n[n.remainingSpaces=3]="remainingSpaces",n[n.stateComparison=4]="stateComparison",n[n.winningHeuristic=5]="winningHeuristic",n[n.customCode=6]="customCode",n[n.turnsElapsed=7]="turnsElapsed",n[n.hasItem=8]="hasItem",n))(ts||{});function gk(n,e,t,r){const i=[];let a;do{a=n.getUint8(e);let o=n.getUint32(e+4),s=n.getUint32(e+8);s&2147483648?i.push({type:a,data:o,decision:gk(n,(s&2147483647)-t,t,r)}):i.push({type:a,data:o,decision:Gre(s,r)}),e+=12}while(a!==0);return i}function Gre(n,e){return e===3?{value:(n&4026531840)>>>28,probability:[n&127,(n&16256)>>>7,(n&2080768)>>>14,(n&266338304)>>>21]}:{value:(n&4294901760)>>>16,probability:[n&255,(n&65280)>>>8]}}const _k={id:"CHAINSPLIT1",name:"",activationType:Yt.WALKOVER,executionType:sn.PROCESS,parameters:[{name:"left_space",type:i0.Space},{name:"right_space",type:i0.Space},{name:"chains",type:i0.NumberArray}],fakeEvent:!0,supportedGames:[Qe.MP1_USA],parse(n,e){const t={METHOD_START:"597324F65BC9A4D0BCA9527477258625",METHOD_MID1:"E276F5BAE352AC662ADCA86793409B62",METHOD_MID2:"24FBEBD7FA3B256016D536690EF70AD8",METHOD_END:"F153076BBD19ECBB4967EFC92CD738DF"};if(H0([n.buffer,e.offset,44],t.METHOD_START)&&H0([n.buffer,e.offset+76,28],t.METHOD_MID2)&&H0([n.buffer,e.offset+224,40],t.METHOD_END)){const r=n.getUint16(e.offset+218),i=n.getUint16(e.offset+222),a=e.chains[r][0],o=e.chains[i][0];Go(e.curSpace,a,e.board),Go(e.curSpace,o,e.board);const s=to(e.game,"RunDecisionTree"),l=UH(n,e.offset,s);if(l.length){const c=l[0],d=n.getUint16(c-6),h=n.getUint16(c-2),f=kc(d,h),m=e.addr&2147483647,g=f-m,x=e.offset+g,E=m-e.offset;gk(n,x,E,e.gameVersion),e.board,e.curSpaceIndex}return!0}return!1},write(n,e,t,r){const i=e.parameterValues.chains;return`
        ADDIU SP SP 0xFFD8
        SW RA 0x24(SP)
        SW S2 0x20(SP)
        SW S1 0x1C(SP)
        SW S0 0x18(SP)

        ; Change player to standing animation?
        ADDIU A0 R0 -1
        ADDIU A1 R0 -1
        JAL 0x80052BE8
        ADDIU A2 R0 2

        JAL SleepVProcess
        NOP
        JAL chainsplit_1_setup_arrows
        NOP
        LUI S0 0x800F
        ADDIU S0 S0 0xD5DC ; 0x800ED5DC
        LH A0 0(S0)
        LUI A1 hi(indices)
        JAL 0x8003C218
        ADDIU A1 A1 lo(indices)
        ADDU S2 V0 R0
        ADDU A0 S2 R0
        LH A1 0(S0)
        JAL 0x8003C060
        ADDU A2 R0 R0
        JAL PlayerIsCPU
        ADDIU A0 R0 -1
        BEQ V0 R0 do_direction_prompt
        NOP
        LUI A0 hi(ai_logic)
        ADDIU A0 A0 lo(ai_logic)
        JAL 0x8003E9B0
        ADDU S0 R0 R0
        SLL V0 V0 0x10
        SRA S1 V0 0x10
        BLEZ S1 choice_neg
        ADDU A0 S2 R0
      choice_pos:
        JAL 0x8003BE84
        ADDIU A1 R0 0xFFFE
        ADDIU S0 S0 1
        SLT V0 S0 S1
        BNE V0 R0 choice_pos
        ADDU A0 S2 R0
      choice_neg:
        JAL 0x8003BE84
        ADDIU A1 R0 0xFFFC
      do_direction_prompt:
        JAL 0x8003C14C ; DirectionPrompt
        ADDU A0 S2 R0
        ADDU S0 V0 R0
        JAL 0x8003B908
        ADDU A0 S2 R0
        JAL chainsplit_1_hide_arrows
        NOP
        BNE S0 R0 set_chain_right
        ADDIU A0 R0 -1
        J set_chain
        ADDIU A1 R0 ${i[0]}
      set_chain_right:
        ADDIU A1 R0 ${i[1]}
      set_chain:
        JAL SetNextChainAndSpace
        ADDU A2 R0 R0 ; 0th space of the chain
        JAL 0x8005DD90
        ADDU A0 R0 R0
        LW RA 0x24(SP)
        LW S2 0x20(SP)
        LW S1 0x1C(SP)
        LW S0 0x18(SP)
        JR RA
        ADDIU SP SP 0x28

      ; Choose randomly
      ai_logic:
        .word 0x00000000, 0x00000000, 0x00003232

      indices:
        .halfword left_space
        .halfword right_space
        .halfword 0xFFFF
        .align 4

    .beginstatic
      .definelabel CORE_800EE320,0x800EE320

      chainsplit_1_setup_arrows:
        addiu SP, SP, -0x18
        sw    RA, 0x10(SP)
      @@setup_arrows_loop1:
        jal 0x8004B850 ; waiting for this to signal
        NOP
        beq V0, R0, @@setup_arrows_loop1_exit
        NOP
        jal SleepVProcess
        NOP
        j @@setup_arrows_loop1
        NOP
      @@setup_arrows_loop1_exit:
        jal SleepVProcess
        NOP
        addu  A0, R0, R0
        addiu A1, R0, 146
        jal   0x80045D84
        addiu A2, R0, 1
        lui   AT, hi(chainsplit_1_memval1)
        sw    V0, lo(chainsplit_1_memval1)(AT)
        addiu A0, R0, 1
        addiu A1, R0, 160
        jal   0x80045D84
        addiu A2, R0, 1
        lui   AT, hi(chainsplit_1_memval2)
        sw    V0, lo(chainsplit_1_memval2)(AT)
        addiu A0, R0, 3
        addiu A1, R0, 174
        jal   0x80045D84
        addiu A2, R0, 1
        lui   AT, hi(chainsplit_1_memval3)
        sw    V0, lo(chainsplit_1_memval3)(AT)
        addiu A0, R0, 11
        addiu A1, R0, 188
        jal   0x80045D84
        addiu A2, R0, 1
        lui   AT, hi(chainsplit_1_memval4)
        sw    V0, lo(chainsplit_1_memval4)(AT)
        jal   SleepProcess
        addiu A0, R0, 3
        addiu V0, R0, 1
        lui   AT, hi(CORE_800EE320)
        sh    V0, lo(CORE_800EE320)(AT)
        lw    RA, 0x10(SP)
        jr    RA
        addiu SP, SP, 0x18

      chainsplit_1_hide_arrows:
        addiu SP, SP, -0x18
        sw    RA, 0x10(SP)
        lui   AT, hi(CORE_800EE320)
        sh    R0, lo(CORE_800EE320)(AT)
        lui   A0, hi(chainsplit_1_memval1)
        jal   0x80045E6C
        lw    A0, lo(chainsplit_1_memval1)(A0)
        lui   A0, hi(chainsplit_1_memval2)
        jal   0x80045E6C
        lw    A0, lo(chainsplit_1_memval2)(A0)
        lui   A0, hi(chainsplit_1_memval3)
        jal   0x80045E6C
        lw    A0, lo(chainsplit_1_memval3)(A0)
        lui   A0, hi(chainsplit_1_memval4)
        jal   0x80045E6C
        lw    A0, lo(chainsplit_1_memval4)(A0)
        lw    RA, 0x10(SP)
        jr    RA
        addiu SP, SP, 0x18

      chainsplit_1_memval1:
        .word 0
      chainsplit_1_memval2:
        .word 0
      chainsplit_1_memval3:
        .word 0
      chainsplit_1_memval4:
        .word 0
    .endstatic
    `}};hr(_k);const zC={id:"CHAINMERGE",name:"",activationType:Yt.WALKOVER,executionType:sn.DIRECT,parameters:[{name:"prevSpace",type:i0.Number},{name:"chain",type:i0.Number},{name:"spaceIndex",type:i0.Number}],fakeEvent:!0,supportedGames:[Qe.MP1_USA,Qe.MP2_USA],parse(n,e){const t={START:"d218c758ea3247b6e5ec2ae0c3568a92",END:"560c69d6e851f4a22984b74c660e8536",EXTRA_CALL_START:"BABAF76D201027AE882BEB58BB38B4EB"};let r,i;return H0([n.buffer,e.offset,12],t.START)&&H0([n.buffer,e.offset+24,12],t.END)?(r=n.getUint16(e.offset+14),r=r>1e3?0:r,n.getUint16(e.offset+20)===0?i=e.chains[r][0]:i=e.chains[r][n.getUint16(e.offset+22)],isNaN(i)||Go(e.curSpace,i,e.board),!0):H0([n.buffer,e.offset,24],t.EXTRA_CALL_START)&&H0([n.buffer,e.offset+36,12],t.END)?(r=n.getUint16(e.offset+26),r=r>1e3?0:r,n.getUint16(e.offset+32)===0?i=e.chains[r][0]:i=e.chains[r][n.getUint16(e.offset+34)],typeof i=="number"&&Go(e.curSpace,i,e.board),!0):!1},write(n,e,t,r){return`
      ADDIU SP, SP, -0x18
      SW    RA, 0x10(SP)
      ADDIU A0, R0, -1
      ADDIU A1, R0, ${e.parameterValues.chain}
      JAL   SetNextChainAndSpace
      ADDIU A2, R0, ${e.parameterValues.spaceIndex||0}
      LW    RA, 0x10(SP)
      JR    RA
      ADDIU SP, SP, 0x18
    `}};hr(zC);const BP={id:"STAR1",name:"Buy star",activationType:Yt.WALKOVER,executionType:sn.DIRECT,fakeEvent:!0,supportedGames:[Qe.MP1_USA],parse(n,e){const t={METHOD_START:"14A3FD0F13B034F8C90659FF589A17DB",METHOD_MID:"B48ABB1B1FDBF7B5EF9765FD61C3940E",METHOD_END:"5FEE3364FDCA8B0E9247BFB37A391358"};return!!(H0([n.buffer,e.offset,20],t.METHOD_START)&&H0([n.buffer,e.offset+24,16],t.METHOD_MID)&&H0([n.buffer,e.offset+48,52],t.METHOD_END))},write(n,e,t,r){return`
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)
      jal   GetCurrentSpaceIndex
      NOP
      sll   V0, V0, 0x10
      jal   __PP64_INTERNAL_STAR_SPACE
      sra   A0, V0, 0x10
      sll   V0, V0, 0x10
      sra   V0, V0, 0x10
      addiu V1, R0, 1
      bne   V0, V1, L800F9700 ; test if player bought star?
      addiu A0, R0, 68
      addu  A1, R0, R0
      jal   0x800587EC
      addiu A2, R0, 2
      jal   __PP64_INTERNAL_GET_NEXT_TOAD_INDEX
      NOP
      sll   V0, V0, 0x10
      addiu A0, R0, -1
      addiu A1, R0, 8
      jal   0x8004D2A4
      sra   A2, V0, 0x10
    L800F9700:
      lw    RA, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x18
    `}},MP={parse(n,e){const t={PLAYER_DIRECTION_CHANGE:"DAD5E635FE90ED982D02B3F1D5C0CE21",METHOD_END:"FF104A680C0ECE615B5A24AD95A908CC",DK_TWOBOO_METHOD_START:"94A87B51D2478E81AAC34F7D3C5C37F2"};return H0([n.buffer,e.offset+28,24],t.METHOD_END)&&H0([n.buffer,e.offset,20],t.PLAYER_DIRECTION_CHANGE)?n.getUint16(e.offset+26)===101:!!(H0([n.buffer,e.offset+84,24],t.METHOD_END)&&H0([n.buffer,e.offset,40],t.DK_TWOBOO_METHOD_START))},write(n,e,t,r){return`
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)

      ; TODO: Face player towards Boo
      ;jal   GetCurrentSpaceIndex
      ;NOP
      ;sll   V0, V0, 0x10
      ;sra   V1, V0, 0x10
      ;addiu    V0, R0, 10 ; bottom left boo invisible space index
      ;beq   V1, V0, boo_space_event_passing_bottom_boo
      ;addiu    V0, R0, 129 ; upper middle boo invisible space index
      ;bne   V1, V0, boo_space_event_goto_boo_scene
      ;addiu    A0, R0, 101 ; Boo overlay index
      ;addiu    A0, R0, -1
      ;addiu    A1, R0, 8
      ;j     L800F97E0
      ;addiu    A2, R0, 111 ; upper middle boo standing space index
    ;boo_space_event_passing_bottom_boo:
      ;addiu    A0, R0, -1
      ;addiu    A1, R0, 8
      ;addiu    A2, R0, 98 ; bottom left boo standing space index
    ;L800F97E0:
      ;jal   0x8004D2A4
      ;NOP

      addiu A0, R0, 101 ; Boo overlay index
    boo_space_event_goto_boo_scene:
      addu  A1, R0, R0
      jal   0x800587EC  ; 0x800587BC wrapper, A3 = 0 default
      addiu A2, R0, 1
      lw    RA, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x18
    `}},IP={id:"GATECLOSE3",name:"",activationType:Yt.WALKOVER,executionType:sn.DIRECT,parameters:[{name:"gateIndex",type:i0.Number}],fakeEvent:!0,supportedGames:[Qe.MP3_USA],parse(n,e){if(TM(n,e.offset)!==28)return!1;let r=[201597626];return n.getUint32(e.offset+8)===r[e.boardIndex]},write(n,e,t,r){return`
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)
      jal   __PP64_INTERNAL_GATE_CLOSE_EVENT
       li    A0, ${e.parameterValues.gateIndex}
      lw    RA, 0x10(SP)
      jr    RA
       addiu SP, SP, 0x18
    `}},OP={id:"GATE3",name:"",activationType:Yt.WALKOVER,executionType:sn.PROCESS,parameters:[{name:"gateEntryIndex",type:i0.Number},{name:"gateSpaceIndex",type:i0.Number},{name:"gateExitIndex",type:i0.Number},{name:"gatePrevChain",type:i0.NumberArray},{name:"gateNextChain",type:i0.NumberArray}],fakeEvent:!0,supportedGames:[Qe.MP3_USA],parse(n,e){if(e.boardIndex===0){if(e.offset!==3274312)return!1;if(n.getUint16(e.offset+98)===e.curSpaceIndex)return e.board.spaces[n.getUint16(e.offset+262)].subtype=yt.GATE,!0;if(n.getUint16(e.offset+106)===e.curSpaceIndex)return e.board.spaces[n.getUint16(e.offset+270)].subtype=yt.GATE,!0}return!1},write(n,e,t,r){return`
      J __PP64_INTERNAL_GATE_EVENT
      NOP
    `}},kP={parse(n,e){let t=!1;if(e.boardIndex===0){if(e.offset!==2755864)return!1;t=!0}return!!t},write(n,e,t,r){return`
      J __PP64_INTERNAL_BOO_SPACE_EVENT
      NOP
    `}},NP={parse(n,e){let t,r=!1;if(e.boardIndex===0){if(e.offset!==3291628||n.getUint32(e.offset+76)!==201568050)return!1;t=TM(n,e.offset),r=t===4564}return!!r},write(n,e,t,r){return`
      J __PP64_INTERNAL_BOO_SPACE_EVENT
      NOP
    `}},UP={parse(n,e){let t={WESTERN:"D52AD53C2FED642C3001C3579B4299C3"};return!!H0([n.buffer,e.offset,2112],t.WESTERN)},write(n,e,t,r){return`
      J __PP64_INTERNAL_STAR_SPACE_EVENT ; star_space_event
      NOP
    `}},Hre={parse(n,e){let t={CHILLY:"E9B6C28983AAE724AC187EA8E0CBC79D"};return!!H0([n.buffer,e.offset,956],t.CHILLY)},write(n,e,t,r){return`
      J __PP64_INTERNAL_STAR_SPACE_EVENT ; star_space_event
      NOP
    `}},jP={parse(n,e){let t=!1;if(e.boardIndex===0){if(e.offset!==2746652)return!1;t=!0}return!!t},write(n,e,t,r){return`
      J __PP64_INTERNAL_BANK_SPACE_EVENT
      NOP
    `}},GP={parse(n,e){let t={CHILLY:"FCA0025616E8B2BE4CD60F47EE60DC30"};return!!H0([n.buffer,e.offset,180],t.CHILLY)},write(n,e,t,r){return`
      J __PP64_INTERNAL_BANK_SPACE_EVENT
      NOP
    `}},HP={parse(n,e){let t=!1;if(e.boardIndex===0){if(e.offset!==2747904)return!1;t=!0}return!!t},write(n,e,t,r){return`
      J __PP64_INTERNAL_ITEM_SHOP_EVENT
      NOP
    `}},zP={parse(n,e){let t=!1;if(e.boardIndex===0){if(e.offset!==3281356||n.getUint32(e.offset+68)!==201574479)return!1;t=!0}return!!t},write(n,e,t,r){return`
      J __PP64_INTERNAL_ITEM_SHOP_EVENT
      NOP
    `}},WC={id:"BOO",name:"Visit Boo",activationType:Yt.WALKOVER,executionType:sn.DIRECT,supportedGames:[Qe.MP1_USA,Qe.MP2_USA,Qe.MP3_USA],parse(n,e){switch(e.gameVersion){case 1:return MP.parse(n,e);case 2:return kP.parse(n,e);case 3:return NP.parse(n,e)}},write(n,e,t,r){switch(t.gameVersion){case 1:return MP.write(n,e,t,r);case 2:return kP.write(n,e,t,r);case 3:return NP.write(n,e,t,r)}}};hr(WC);const xk={id:"STAR",name:"Buy star",activationType:Yt.WALKOVER,executionType:sn.DIRECT,fakeEvent:!0,supportedGames:[Qe.MP1_USA,Qe.MP2_USA,Qe.MP3_USA],parse(n,e){switch(e.gameVersion){case 1:return BP.parse(n,e);case 2:return UP.parse(n,e)}return!1},write(n,e,t,r){switch(t.gameVersion){case 1:return BP.write(n,e,t,r);case 2:return UP.write(n,e,t,r);case 3:return Hre.write(n,e,t,r)}return!1}};hr(xk);const GA={id:"BANK",name:"Visit Bank",activationType:Yt.WALKOVER,executionType:sn.DIRECT,supportedGames:[Qe.MP2_USA,Qe.MP3_USA],parse(n,e){switch(e.gameVersion){case 1:return!1;case 2:return jP.parse(n,e);case 3:return GP.parse(n,e)}return!1},write(n,e,t,r){switch(t.gameVersion){case 1:return!1;case 2:return jP.write(n,e,t,r);case 3:return GP.write(n,e,t,r)}return!1}};hr(GA);const l2={id:"ITEMSHOP",name:"Visit Item Shop",activationType:Yt.WALKOVER,executionType:sn.DIRECT,supportedGames:[Qe.MP2_USA,Qe.MP3_USA],parse(n,e){switch(e.gameVersion){case 1:return!1;case 2:return HP.parse(n,e);case 3:return zP.parse(n,e)}return!1},write(n,e,t,r){switch(t.gameVersion){case 1:return!1;case 2:return HP.write(n,e,t,r);case 3:return zP.write(n,e,t,r)}return!1}};hr(l2);const z8={id:"GATE",name:"Skeleton Key Gate",activationType:Yt.WALKOVER,executionType:sn.PROCESS,fakeEvent:!0,supportedGames:[Qe.MP3_USA],parse(n,e){switch(e.gameVersion){case 1:return!1;case 2:return!1;case 3:return OP.parse(n,e)}return!1},write(n,e,t,r){switch(t.gameVersion){case 1:return!1;case 2:return!1;case 3:return OP.write(n,e,t,r)}return!1}};hr(z8);const vk={id:"GATECLOSE",name:"Skeleton Key Gate Close",activationType:Yt.WALKOVER,executionType:sn.DIRECT,parameters:[{name:"gateIndex",type:i0.Number}],fakeEvent:!0,supportedGames:[Qe.MP3_USA],parse(n,e){switch(e.gameVersion){case 1:return!1;case 2:return!1;case 3:return IP.parse(n,e)}return!1},write(n,e,t,r){switch(t.gameVersion){case 1:return!1;case 2:return!1;case 3:return IP.write(n,e,t,r)}return!1}};hr(vk);const wk={id:"CHAINSPLIT2",name:"",activationType:Yt.WALKOVER,executionType:sn.PROCESS,parameters:[{name:"left_space",type:i0.Space},{name:"right_space",type:i0.Space},{name:"chains",type:i0.NumberArray}],fakeEvent:!0,supportedGames:[Qe.MP2_USA],parse(n,e){let t={METHOD_START:"0C01A009C54E209652DA667F464FB7C0",METHOD_MID2:"FC606B8F8BD2C8D39BB9581B0E4D8398",METHOD_END:"2F3A0045D0AC927FF23ACD73B5B62E1C"};if(H0([n.buffer,e.offset,44],t.METHOD_START)&&H0([n.buffer,e.offset+76,28],t.METHOD_MID2)&&H0([n.buffer,e.offset+240,40],t.METHOD_END)){let r=n.getUint16(e.offset+234),i=n.getUint16(e.offset+238),a=e.chains[r][0],o=e.chains[i][0];return Go(e.curSpace,a,e.board),Go(e.curSpace,o,e.board),!0}return!1},write(n,e,t,r){const i=e.parameterValues.chains;return`
  addiu SP, SP, -0x28
  sw    RA, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)

  ; Change player to standing animation?
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2

  jal   func_8007DA44
   nop
  jal   chainsplit_setup_arrows
   nop
  lui   S0, hi(D_800F93C6)
  addiu S0, S0, lo(D_800F93C6)
  lh    A0, 0(S0)
  lui   A1, hi(indices)
  jal   func_80041A74
   addiu A1, A1, lo(indices)
  move  S2, V0
  move  A0, S2
  lh    A1, 0(S0)
  jal   func_800417EC
   move  A2, R0
  jal   func_8005DCA0
   li    A0, -1
  beqz  V0, L80107D14
   li    V0, 4
  lui   A0, hi(ai_random_choice)
  addiu A0, A0, lo(ai_random_choice)
  jal   func_80044800
   move  S0, R0
  sll   V0, V0, 0x10
  sra   S1, V0, 0x10
  blez  S1, L80107D0C
   move  A0, S2
L80107CF4:
  jal   func_80041610
   li    A1, -2
  addiu S0, S0, 1
  slt   V0, S0, S1
  bnez  V0, L80107CF4
   move  A0, S2
L80107D0C:
  jal   func_80041610
   li    A1, -4
L80107D14:
  jal   func_800418D8
   move  A0, S2
  move  S0, V0
  jal   func_8004108C
   move  A0, S2
  jal   chainsplit_hide_arrows
   nop
  bnez  S0, L80107D40
   li    A0, -1
  j     L80107D44
   li    A1, ${i[0]}
L80107D40:
  li    A1, ${i[1]}
L80107D44:
  jal   SetNextChainAndSpace
   move  A2, R0
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

ai_random_choice:
  .word 0x00000000, 0x00000000, 0x00003232

indices:
  .halfword left_space
  .halfword right_space
  .halfword 0xFFFF
  .align 4

.beginstatic

chainsplit_setup_arrows:
/* 298E94 80103BC4 27BDFFE8 */  addiu SP, SP, -0x18
/* 298E98 80103BC8 AFBF0010 */  sw    RA, 0x10(SP)
L80103BCC:
/* 298E9C 80103BCC 0C014E66 */  jal   func_80053998
/* 298EA0 80103BD0 00000000 */   nop
/* 298EA4 80103BD4 10400005 */  beqz  V0, L80103BEC
/* 298EA8 80103BD8 00000000 */   nop
/* 298EAC 80103BDC 0C01F691 */  jal   func_8007DA44
/* 298EB0 80103BE0 00000000 */   nop
/* 298EB4 80103BE4 08040EF3 */  j     L80103BCC
/* 298EB8 80103BE8 00000000 */   nop
L80103BEC:
/* 298EBC 80103BEC 0C01F691 */  jal   func_8007DA44
/* 298EC0 80103BF0 00000000 */   nop
/* 298EC4 80103BF4 00002021 */  move  A0, R0
/* 298EC8 80103BF8 24050092 */  li    A1, 146
/* 298ECC 80103BFC 0C01331F */  jal   func_8004CC7C
/* 298ED0 80103C00 24060001 */   li    A2, 1
/* 298ED4 80103C04 3C018011 */  lui   AT, hi(chainsplit_arrow_memval1)
/* 298ED8 80103C08 AC2236D8 */  sw    V0, lo(chainsplit_arrow_memval1)(AT)
/* 298EDC 80103C0C 24040001 */  li    A0, 1
/* 298EE0 80103C10 240500A0 */  li    A1, 160
/* 298EE4 80103C14 0C01331F */  jal   func_8004CC7C
/* 298EE8 80103C18 24060001 */   li    A2, 1
/* 298EEC 80103C1C 3C018011 */  lui   AT, hi(chainsplit_arrow_memval2)
/* 298EF0 80103C20 AC2236DC */  sw    V0, lo(chainsplit_arrow_memval2)(AT)
/* 298EF4 80103C24 2404000D */  li    A0, 13
/* 298EF8 80103C28 240500AE */  li    A1, 174
/* 298EFC 80103C2C 0C01331F */  jal   func_8004CC7C
/* 298F00 80103C30 24060001 */   li    A2, 1
/* 298F04 80103C34 3C018011 */  lui   AT, hi(chainsplit_arrow_memval3)
/* 298F08 80103C38 AC2236E8 */  sw    V0, lo(chainsplit_arrow_memval3)(AT)
/* 298F0C 80103C3C 24040003 */  li    A0, 3
/* 298F10 80103C40 240500BC */  li    A1, 188
/* 298F14 80103C44 0C01331F */  jal   func_8004CC7C
/* 298F18 80103C48 24060001 */   li    A2, 1
/* 298F1C 80103C4C 3C018011 */  lui   AT, hi(chainsplit_arrow_memval4)
/* 298F20 80103C50 AC2236E0 */  sw    V0, lo(chainsplit_arrow_memval4)(AT)
/* 298F24 80103C54 2404000B */  li    A0, 11
/* 298F28 80103C58 240500CA */  li    A1, 202
/* 298F2C 80103C5C 0C01331F */  jal   func_8004CC7C
/* 298F30 80103C60 24060001 */   li    A2, 1
/* 298F34 80103C64 3C018011 */  lui   AT, hi(chainsplit_arrow_memval5)
/* 298F38 80103C68 AC2236E4 */  sw    V0, lo(chainsplit_arrow_memval5)(AT)
/* 298F3C 80103C6C 0C01F678 */  jal   func_8007D9E0
/* 298F40 80103C70 24040003 */   li    A0, 3
/* 298F44 80103C74 24020001 */  li    V0, 1
/* 298F48 80103C78 3C018010 */  lui   AT, hi(D_800FA198)
/* 298F4C 80103C7C A422A198 */  sh    V0, lo(D_800FA198)(AT)
/* 298F50 80103C80 3C018010 */  lui   AT, hi(D_80101058)
/* 298F54 80103C84 A4221058 */  sh    V0, lo(D_80101058)(AT)
/* 298F58 80103C88 8FBF0010 */  lw    RA, 0x10(SP)
/* 298F5C 80103C8C 03E00008 */  jr    RA
/* 298F60 80103C90 27BD0018 */   addiu SP, SP, 0x18

chainsplit_hide_arrows:
/* 298F64 80103C94 27BDFFE8 */  addiu SP, SP, -0x18
/* 298F68 80103C98 AFBF0010 */  sw    RA, 0x10(SP)
/* 298F6C 80103C9C 3C018010 */  lui   AT, hi(D_800FA198)
/* 298F70 80103CA0 A420A198 */  sh    R0, lo(D_800FA198)(AT)
/* 298F74 80103CA4 3C018010 */  lui   AT, hi(D_80101058)
/* 298F78 80103CA8 A4201058 */  sh    R0, lo(D_80101058)(AT)
/* 298F7C 80103CAC 3C048011 */  lui   A0, hi(chainsplit_arrow_memval1)
/* 298F80 80103CB0 0C01335C */  jal   func_8004CD70
/* 298F84 80103CB4 8C8436D8 */   lw    A0, lo(chainsplit_arrow_memval1)(A0)
/* 298F88 80103CB8 3C048011 */  lui   A0, hi(chainsplit_arrow_memval2)
/* 298F8C 80103CBC 0C01335C */  jal   func_8004CD70
/* 298F90 80103CC0 8C8436DC */   lw    A0, lo(chainsplit_arrow_memval2)(A0)
/* 298F94 80103CC4 3C048011 */  lui   A0, hi(chainsplit_arrow_memval3)
/* 298F98 80103CC8 0C01335C */  jal   func_8004CD70
/* 298F9C 80103CCC 8C8436E8 */   lw    A0, lo(chainsplit_arrow_memval3)(A0)
/* 298FA0 80103CD0 3C048011 */  lui   A0, hi(chainsplit_arrow_memval4)
/* 298FA4 80103CD4 0C01335C */  jal   func_8004CD70
/* 298FA8 80103CD8 8C8436E0 */   lw    A0, lo(chainsplit_arrow_memval4)(A0)
/* 298FAC 80103CDC 3C048011 */  lui   A0, hi(chainsplit_arrow_memval5)
/* 298FB0 80103CE0 0C01335C */  jal   func_8004CD70
/* 298FB4 80103CE4 8C8436E4 */   lw    A0, lo(chainsplit_arrow_memval5)(A0)
/* 298FB8 80103CE8 8FBF0010 */  lw    RA, 0x10(SP)
/* 298FBC 80103CEC 03E00008 */  jr    RA
/* 298FC0 80103CF0 27BD0018 */   addiu SP, SP, 0x18

.align 4
  chainsplit_arrow_memval1:
    .word 0
  chainsplit_arrow_memval2:
    .word 0
  chainsplit_arrow_memval3:
    .word 0
  chainsplit_arrow_memval4:
    .word 0
  chainsplit_arrow_memval5:
    .word 0

.endstatic
`}};hr(wk);const zre="/assets/bootsplash.74126b65.png";function Ca(n,e,t){return new Promise((r,i)=>{const a=new Image,o=setTimeout(()=>i("Failed to write image!"),45e3);a.onload=()=>{const s=a.height,l=a.width,c=ko(l,s);c.drawImage(a,0,0,l,s);let d=c.getImageData(0,0,l,s);(e!==l||t!==s)&&(d=P6(d,e,t)),clearTimeout(o),r(d)},a.src=n})}const c4=68,Wre=1297377380,WP=1297379947;function yk(n,e){const t=new ArrayBuffer(1e5),r=new DataView(t),i=Xre(n),a=n.getUint32(64);Kre(r,i,a);let o=14;for(let s=0;s<c4-4;s+=4){const l=n.getUint32(s);if(l===0)continue;let c=0;const d=new Map,h={altPattern:null,altOffset:0,altLength:0,position:l,original:-1};let f=!1;for(;h.position<e&&!f;){h.position,h.original=-1,Ya(n,h,!0);let g=Tt(n,h,!0),x=g<128;if(g===255||x&&c===255){let E;if(x?E=g:E=Tt(n,h,!0),E==81)(Tt(n,h,!0)<<8|Tt(n,h,!0))<<8|Tt(n,h,!0);else if(E==45){let _=Tt(n,h,!0);Tt(n,h,!0);let v=((Tt(n,h,!1)<<8|Tt(n,h,!1))<<8|Tt(n,h,!1))<<8|Tt(n,h,!1);if(_==255||_==0)break;{const C=d.get(h.position);if(d.has(h.position)){let D=C;D===0?d.delete(h.position):d.set(h.position,D-1)}else d.set(h.position,_-1);h.altPattern===null?h.position=h.position-v:d.delete(h.position)}}else E==46?(Tt(n,h,!0),Tt(n,h,!0)):E==47&&(f=!0);x||(c=g)}else g>=144&&g<160||x&&c>=144&&c<160?(x||Tt(n,h,!0),Tt(n,h,!0),Ya(n,h,!0),x||(c=g)):g>=176&&g<192||x&&c>=176&&c<192?(x||Tt(n,h,!0),Tt(n,h,!0),x||(c=g)):g>=192&&g<208||x&&c>=192&&c<208||g>=208&&g<224||x&&c>=208&&c<224?(x||Tt(n,h,!0),x||(c=g)):(g>=224&&g<240||x&&c>=224&&c<240)&&(x||Tt(n,h,!0),Tt(n,h,!0),x||(c=g))}}for(let s=0;s<c4-4;s+=4){let l=0,c=0,d=new Array(196608);for(let f=0;f<196608;f++)d[f]=new v1;let h=n.getUint32(s);if(h!=0){r.setUint32(o,1297379947),o+=4;let f=0;const m=new Map,g=[],x={altPattern:null,altOffset:0,altLength:0,position:h,original:-1};let E=!1;for(;x.position<e&&!E;){if(c>=196608){for(let R=0;R<c;R++)d[R].contents!=null&&(d[R].contents=null);return console.error("Overflow? trackEventCountSub >= 0x30000"),t}x.position,x.original=-1;let D=Ya(n,x,!0);d[c].deltaTime+=D,l+=D,d[c].absoluteTime=l;let V=Tt(n,x,!0),H=V<128;if(V==255||H&&f==255){let R;if(H?R=V:R=Tt(n,x,!0),R==81){let j=(Tt(n,x,!0)<<8|Tt(n,x,!0))<<8|Tt(n,x,!0);d[c].type=255,d[c].contentSize=5,d[c].contents=new Array(5),d[c].contents[0]=81,d[c].contents[1]=3,d[c].contents[2]=j>>16&255,d[c].contents[3]=j>>8&255,d[c].contents[4]=j>>0&255,c++}else if(R==45){let j=0;g.length>0&&(j=g.pop()),d[c].type=176|s/4&15,d[c].contentSize=2,d[c].contents=new Array(2),d[c].contents[0]=103,d[c].contents[1]=j,c++;let te=Tt(n,x,!0);Tt(n,x,!0);let $=((Tt(n,x,!1)<<8|Tt(n,x,!1))<<8|Tt(n,x,!1))<<8|Tt(n,x,!1);if(!(te==255||te==0)){let z=m.get(x.position);if(m.has(x.position)){let I=z;I==0?m.delete(x.position):m.set(x.position,I-1)}else m.set(x.position,te-1);x.altPattern===null?x.position=x.position-$:m.delete(x.position)}}else if(R==46){let j=Tt(n,x,!0);Tt(n,x,!0),d[c].type=176|s/4&15,d[c].contentSize=2,d[c].contents=new Array(2),d[c].contents[0]=102,d[c].contents[1]=j,c++,g.push(j)}else R==47&&(d[c].type=255,d[c].contentSize=2,d[c].contents=new Array(2),d[c].contents[0]=47,d[c].contents[1]=0,c++,E=!0);H||(f=V)}else if(V>=144&&V<160||H&&f>=144&&f<160){let R;H?(d[c].type=f,R=V):(d[c].type=V,R=Tt(n,x,!0));let j=Tt(n,x,!0),te=Ya(n,x,!0);d[c].durationTime=te,d[c].contentSize=2,d[c].contents=new Array(2),d[c].contents[0]=R,d[c].contents[1]=j,c++,H||(f=V)}else if(V>=176&&V<192||H&&f>=176&&f<192){let R;H?(R=V,d[c].type=f):(R=Tt(n,x,!0),d[c].type=V);let j=Tt(n,x,!0);d[c].contentSize=2,d[c].contents=new Array(2),d[c].contents[0]=R,d[c].contents[1]=j,c++,H||(f=V)}else if(V>=192&&V<208||H&&f>=192&&f<208){let R;H?(R=V,d[c].type=f):(R=Tt(n,x,!0),d[c].type=V),d[c].contentSize=1,d[c].contents=[R],c++,H||(f=V)}else if(V>=208&&V<224||H&&f>=208&&f<224){let R;H?(R=V,d[c].type=f):(R=Tt(n,x,!0),d[c].type=V),d[c].contentSize=1,d[c].contents=[R],c++,H||(f=V)}else if(V>=224&&V<240||H&&f>=224&&f<240){let R;H?(R=V,d[c].type=f):(R=Tt(n,x,!0),d[c].type=V);let j=Tt(n,x,!0);d[c].contentSize=2,d[c].contents=[R,j],c++,H||(f=V)}else V==254||console.error(`${V} ERROR MISSING PARSE OF TYPE`)}for(let D=0;D<c;D++){if(c>=196608){for(let H=0;H<c;H++)d[H].contents!==null&&(d[H].contents=null);return console.error("Overflow 2? trackEventCountSub >= 0x30000"),t}let V=d[D];if(V.type>=144&&V.type<160&&V.durationTime>0){let H=V.absoluteTime+V.durationTime;if(D!=c-1){for(let R=D+1;R<c;R++)if(d[R].absoluteTime>=H&&R!=c-1){for(let j=c-1;j>=R;j--){d[j+1].absoluteTime=d[j].absoluteTime,d[j+1].contentSize=d[j].contentSize,d[j+1].contents!==null&&(d[j+1].contents=null),d[j+1].contents=new Array(d[j].contentSize);for(let te=0;te<d[j].contentSize;te++)d[j+1].contents[te]=d[j].contents[te];d[j+1].deltaTime=d[j].deltaTime,d[j+1].durationTime=d[j].durationTime,d[j+1].obsoleteEvent=d[j].obsoleteEvent,d[j+1].type=d[j].type}d[R].type=d[D].type,d[R].absoluteTime=H,d[R].deltaTime=d[R].absoluteTime-d[R-1].absoluteTime,d[R].contentSize=d[D].contentSize,d[R].durationTime=0,d[R].contents=new Array(d[R].contentSize),d[R].contents[0]=d[D].contents[0],d[R].contents[1]=0,d[R+1].deltaTime=d[R+1].absoluteTime-d[R].absoluteTime,d[R].deltaTime>4278190080,c++;break}else if(R==c-1){d[R+1].absoluteTime=H,d[R+1].contentSize=d[R].contentSize,d[R+1].contents!==null&&(d[R+1].contents=null),d[R+1].contents=new Array(d[R].contentSize);for(let j=0;j<d[R].contentSize;j++)d[R+1].contents[j]=d[R].contents[j];d[R+1].deltaTime=d[R].deltaTime,d[R+1].durationTime=d[R].durationTime,d[R+1].obsoleteEvent=d[R].obsoleteEvent,d[R+1].type=d[R].type,d[R].type=d[D].type,d[R].absoluteTime=H,d[R].deltaTime=d[R].absoluteTime-d[R-1].absoluteTime,d[R].contentSize=d[D].contentSize,d[R].durationTime=0,d[R].contents=new Array(d[R].contentSize),d[R].contents[0]=d[D].contents[0],d[R].contents[1]=0,d[R+1].deltaTime=d[R+1].absoluteTime-d[R].absoluteTime,c++;break}}else{d[D+1].absoluteTime=H,d[D+1].contentSize=d[D].contentSize,d[D+1].contents!==null&&(d[D+1].contents=null),d[D+1].contents=new Array(d[D].contentSize);for(let R=0;R<d[D].contentSize;R++)d[D+1].contents[R]=d[D].contents[R];d[D+1].deltaTime=d[D].deltaTime,d[D+1].durationTime=d[D].durationTime,d[D+1].obsoleteEvent=d[D].obsoleteEvent,d[D+1].type=d[D].type,d[D].type=d[D].type,d[D].absoluteTime=H,d[D].absoluteTime-d[D-1].absoluteTime>4278190080,d[D].deltaTime=d[D].absoluteTime-d[D-1].absoluteTime,d[D].contentSize=d[D].contentSize,d[D].durationTime=0,d[D].contents=new Array(d[D].contentSize),d[D].contents[0]=d[D].contents[0],d[D].contents[1]=0,d[D+1].deltaTime=d[D+1].absoluteTime-d[D].absoluteTime,d[D].deltaTime>4278190080,c++}}}let _=0,v=0,C=0;for(let D=0;D<c;D++){let V=d[D];if(V.obsoleteEvent)_+=V.deltaTime;else{let[H,R]=N1(V.deltaTime+_);_=0,v+=R,(V.type!==C||V.type===255)&&(v+=1),v+=V.contentSize,C=V.type}}r.setUint32(o,v),o+=4,_=0,C=0;for(let D=0;D<c;D++){let V=d[D];if(V.obsoleteEvent)_+=V.deltaTime;else{let[H,R]=N1(V.deltaTime+_);_=0,o=d4(r,o,H,R),(V.type!=C||V.type==255)&&(r.setUint8(o,V.type),o++);for(let j=0;j<V.contentSize;j++)r.setUint8(o,V.contents[j]),o++;C=V.type}}}for(let f=0;f<c;f++)d[f].contents!==null&&(d[f].contents=null)}return t.slice(0,o)}function XC(n,e){const t=(e==null?void 0:e.loop)||!1,r=0;let i=[],a=[];for(let j=0;j<32;j++)a.push([]),i.push(0);const o=new DataView(n);if(o.getUint32(0)!==Wre)return null;o.getUint32(4);const s=o.getUint16(8);let l=o.getUint16(10);const c=o.getUint16(12);if(l>16&&(console.log("Too many tracks, truncating to 16."),l=16),s!==0&&s!==1)return console.log("Invalid midi type"),null;let d={altPattern:null,altOffset:0,altLength:0,position:14,original:0},h=!1,f=0,m=[];for(let j=0;j<16;j++)m[j]=0;for(let j=0;j<l;j++){let te=0;if(o.getUint32(d.position)!==WP)return console.log("Invalid track midi header"),null;o.getUint32(d.position+4),d.position+=8;let $=255,z=!1;for(;!z&&d.position<n.byteLength;){d.original=0;let I=Ya(o,d,!1);te+=I;let q=Tt(o,d,!1),P=q<=127;if(q===255){let ee=Tt(o,d,!1);if(ee===47)te-=I,z=!0,Tt(o,d,!1);else if(ee===81)Tt(o,d,!1),Tt(o,d,!1),Tt(o,d,!1),Tt(o,d,!1);else if(ee<127&&!(ee===81||ee===47)){let ce=Ya(o,d,!1);for(let U=0;U<ce;U++)Tt(o,d,!1)}else if(ee===127){let ce=Ya(o,d,!1);for(let U=0;U<ce;U++)Tt(o,d,!1)}$=q}else if(q>=128&&q<144||P&&$>=128&&$<144)P||Tt(o,d,!1),Tt(o,d,!1),P||($=q);else if(q>=144&&q<160||P&&$>=144&&$<160)P||Tt(o,d,!1),Tt(o,d,!1),P||($=q);else if(q>=176&&q<192||P&&$>=176&&$<192)P||Tt(o,d,!1),Tt(o,d,!1),P||($=q);else if(q>=192&&q<208||P&&$>=192&&$<208)P||Tt(o,d,!1),P||($=q);else if(q>=208&&q<224||P&&$>=208&&$<224)P||Tt(o,d,!1),P||($=q);else if(q>=224&&q<240||P&&$>=224&&$<240)P||Tt(o,d,!1),Tt(o,d,!1),P||($=q);else if(q==240||q==247){let ee=Ya(o,d,!1);for(let ce=0;ce<ee;ce++)Tt(o,d,!1)}else h||(console.warn("Invalid midi character found"),h=!0)}te>f&&(f=te),te>m[j]&&(m[j]=te)}d={altPattern:null,altOffset:0,altLength:0,position:14,original:0};for(let j=0;j<l;j++){let te=0;if(o.getUint32(d.position)!==WP)return console.log("Invalid track midi header"),null;o.getUint32(d.position+4),d.position+=8;let $=255,z=!1,I=!1;if(t&&r===0&&m[j]>0){const q=a[j][i[j]]=new v1;q.type=255,q.absoluteTime=0,q.contentSize=3,q.contents=[46,0,255],q.deltaTime=0,q.obsoleteEvent=!1,i[j]++,I=!0}for(;!z&&d.position<n.byteLength;){d.original=0;let q=Ya(o,d,!1);te+=q;let P=a[j][i[j]]=new v1;P.deltaTime=q,P.obsoleteEvent=!1,P.contents=null,P.absoluteTime=te,t&&!I&&m[j]>r&&(te==r?(P.type=255,P.absoluteTime=te,P.contentSize=3,P.contents=[46,0,255],P.deltaTime=q,P.obsoleteEvent=!1,i[j]++,P=a[j][i[j]]=new v1,P.deltaTime=q,P.obsoleteEvent=!1,P.contents=null,P.absoluteTime=te,I=!0):te>r&&(P.type=255,P.absoluteTime=r,P.contentSize=3,P.contents=[46,0,255],i[j]>0?P.deltaTime=r-a[j][i[j]-1].absoluteTime:P.deltaTime=r,P.obsoleteEvent=!1,i[j]++,P=a[j][i[j]]=new v1,P.deltaTime=te-r,P.obsoleteEvent=!1,P.contents=null,P.absoluteTime=te,I=!0));let ee=Tt(o,d,!1),ce=ee<=127;if(ee===255){let U=Tt(o,d,!1);if(U===47){if(z=!0,t&&m[j]>r){let O=a[j][i[j]-1];if(O.type===255&&O.contentSize>0&&O.contents[0]===46)P=O,P.type=255,P.contentSize=1,P.contents=[47];else{let G=a[j][i[j]+1]=new v1;G.absoluteTime=f,G.deltaTime=0,G.durationTime=P.durationTime,G.obsoleteEvent=P.obsoleteEvent,G.type=255,G.contentSize=1,G.contents=[47],P.type=255,f>O.absoluteTime+O.durationTime?(P.deltaTime=f-(O.absoluteTime+O.durationTime),P.absoluteTime=f):(P.deltaTime=0,P.absoluteTime=O.absoluteTime),P.contentSize=7,P.contents=[45,255,255,0,0,0,0],P.obsoleteEvent=!1,i[j]++}}else P.type=255,P.contentSize=1,P.contents=[47];Tt(o,d,!1)}else if(U===81)Tt(o,d,!1),P.type=255,P.contentSize=4,P.contents=[81,Tt(o,d,!1),Tt(o,d,!1),Tt(o,d,!1)];else if(U<127&&!(U==81||U==47)){P.type=255;let O=Ya(o,d,!1);for(let G=0;G<O;G++)Tt(o,d,!1);P.obsoleteEvent=!0}else if(U===127){P.type=255;let O=Ya(o,d,!1);for(let G=0;G<O;G++)Tt(o,d,!1);P.obsoleteEvent=!0}$=ee}else if(ee>=128&&ee<144||ce&&$>=128&&$<144){let U,O;ce?(P.type=$,O=ee,U=$):(P.type=ee,O=Tt(o,d,!1),U=ee);let G=Tt(o,d,!1);for(let re=i[j]-1;re>=0;re--)if(a[j][re].type==(144|U&15)&&!a[j][re].obsoleteEvent&&a[j][re].contents[0]==O){a[j][re].durationTime=te-a[j][re].absoluteTime;break}P.durationTime=0,P.contentSize=2,P.contents=[O,G],P.obsoleteEvent=!0,ce||($=ee)}else if(ee>=144&&ee<160||ce&&$>=144&&$<160){let U,O;ce?(P.type=$,O=ee,U=$):(P.type=ee,O=Tt(o,d,!1),U=ee);let G=Tt(o,d,!1);if(G===0){for(let re=i[j]-1;re>=0;re--)if(a[j][re].type==U&&!a[j][re].obsoleteEvent&&a[j][re].contents[0]==O){a[j][re].durationTime=te-a[j][re].absoluteTime;break}P.durationTime=0,P.contentSize=2,P.contents=[O,G],P.obsoleteEvent=!0}else{for(let re=i[j]-1;re>=0;re--)if(a[j][re].type==U&&!a[j][re].obsoleteEvent&&a[j][re].contents[0]==O){a[j][re].durationTime==0&&(a[j][re].durationTime=te-a[j][re].absoluteTime);break}P.durationTime=0,P.contentSize=2,P.contents=[O,G]}ce||($=ee)}else if(ee>=176&&ee<192||ce&&$>=176&&$<192){let U;ce?(U=ee,P.type=$):(U=Tt(o,d,!1),P.type=ee);let O=Tt(o,d,!1);P.contentSize=2,P.contents=[U,O],ce||($=ee)}else if(ee>=192&&ee<208||ce&&$>=192&&$<208){let U;ce?(U=ee,P.type=$):(U=Tt(o,d,!1),P.type=ee),ee&15,U=U,P.contentSize=1,P.contents=[U],ce||($=ee)}else if(ee>=208&&ee<224||ce&&$>=208&&$<224){P.type=ee;let U;ce?(U=ee,P.type=$):(U=Tt(o,d,!1),P.type=ee),P.contentSize=1,P.contents=[U],ce||($=ee)}else if(ee>=224&&ee<240||ce&&$>=224&&$<240){P.type=ee;let U;ce?(U=ee,P.type=$):(U=Tt(o,d,!1),P.type=ee);let O=Tt(o,d,!1);P.contentSize=2,P.contents=[U,O],ce||($=ee)}else if(ee==240||ee==247){P.type=ee;let U=Ya(o,d,!1);for(let O=0;O<U;O++)Tt(o,d,!1);P.obsoleteEvent=!0}else h||(console.error("Invalid midi character found"),h=!0);i[j]++}}let g=new ArrayBuffer(1048576),x=new DataView(g),E=0,_=0,v=68;for(let j=0;j<l;j++){let te=0,$=0,z=0;if(i[j]>0){x.setUint32(E,v),E+=4;for(let I=0;I<i[j];I++){const q=a[j][I];let[P,ee]=N1(q.deltaTime+_);if(q.obsoleteEvent)_+=q.deltaTime;else{if(q.type===255&&q.contents[0]===46&&($=v+te+1+q.contentSize+ee),_=0,te+=ee,q.type===255&&q.contents[0]===45){let ce=v+te-$+8;q.contents[3]=ce>>24&255,q.contents[4]=ce>>16&255,q.contents[5]=ce>>8&255,q.contents[6]=ce>>0&255}if((q.type!==z||q.type===255)&&(te+=1),te+=q.contentSize,q.type>=144&&q.type<160){let[ce,U]=N1(q.durationTime);te+=U}z=q.type}}v+=te}else x.setUint32(E,0),E+=4}for(let j=l;j<16;j++)x.setUint32(E,0),E+=4;x.setUint32(E,c),E+=4;for(let j=0;j<l;j++)if(i[j]>0){let te=0;for(let $=0;$<i[j];$++){let z=a[j][$];if(z.obsoleteEvent)_+=z.deltaTime;else{let[I,q]=N1(z.deltaTime+_);if(_=0,E=d4(x,E,I,q),(z.type!==te||z.type===255)&&(x.setUint8(E,z.type),E++),fr(x,z.contents,E,0,z.contentSize),E+=z.contentSize,z.type>=144&&z.type<160){let[P,ee]=N1(z.durationTime);E=d4(x,E,P,ee)}te=z.type}}}const C=g.slice(0,E),D=new DataView(C);let V=[],H=[];for(let j=0;j<64;j+=4)V[j/4]=((D.getUint8(j)<<8|D.getUint8(j+1))<<8|D.getUint8(j+2))<<8|D.getUint8(j+3),H[j/4]=0;for(let j=0;j<E;j++)if(j>68&&D.getUint8(j)===254)for(let te=0;te<l;te++)V[te]>j&&H[te]++;for(let j=0;j<16;j++)D.setUint32(j*4,V[j]+H[j]);let R=0;for(let j=0;j<E;j++)x.setUint8(R,D.getUint8(j)),R++,j>68&&D.getUint8(j)===254&&(x.setUint8(R,D.getUint8(j)),R++);return O0(R>=E),g.slice(0,R)}function Xre(n){let e=0;for(let t=0;t<c4-4;t+=4)n.getUint32(t)!==0&&e++;return e}function Kre(n,e,t){n.setUint32(0,1297377380),n.setUint32(4,6),n.setUint16(8,1),n.setUint16(10,e),n.setUint16(12,t)}function Ya(n,e,t){let r=0,i=0;for(;;){if(e.altPattern!==null)i=e.altPattern[e.altOffset],e.altOffset++,e.altOffset===e.altLength&&(e.altPattern=null,e.altOffset=0,e.altLength=0);else{i=n.getUint8(e.position),e.position++;const o=n.getUint8(e.position);if(t&&i===254){if(o!==254){let s=o;e.position++;const l=s<<8|n.getUint8(e.position);e.position++;const c=n.getUint8(e.position);e.position++,e.altPattern=new Array(c);const d=e.position-4-l,h=d+c;for(let f=d;f<h;f++)e.altPattern[f-d]=n.getUint8(f);e.altOffset=0,e.altLength=c,i=e.altPattern[e.altOffset],e.altOffset++}else e.position++;e.altOffset===e.altLength&&e.altPattern!==null&&(e.altPattern=null,e.altOffset=0,e.altLength=0)}}if(i>>7===1)r+=i,r=r<<8;else{r+=i;break}}e.original=r;let a=0;for(let o=0,s=0;a+=(r>>o&127)<<s,o!=24;o+=8,s+=7);return a}function Tt(n,e,t){let r;if(e.altPattern!==null)r=e.altPattern[e.altOffset],e.altOffset++;else if(r=n.getUint8(e.position),e.position++,t&&r===254){const i=n.getUint8(e.position);if(i!==254){let a=i;e.position++;const o=a<<8|n.getUint8(e.position);e.position++;const s=n.getUint8(e.position);e.position++,e.altPattern=new Array(s);const l=e.position-4-o,c=l+s;for(let d=l;d<c;d++)e.altPattern[d-l]=n.getUint8(d);e.altOffset=0,e.altLength=s,r=e.altPattern[e.altOffset],e.altOffset++}else e.position++}return e.altOffset===e.altLength&&e.altPattern!==null&&(e.altPattern=null,e.altOffset=0,e.altLength=0),r}function d4(n,e,t,r,i){let a;return r===1?(a=t&255,n.setUint8(e,a),e+=1):r===2?(a=t>>8&255,n.setUint8(e,a),e+=1,a=t&255,n.setUint8(e,a),e+=1):r===3?(a=t>>16&255,n.setUint8(e,a),e+=1,a=t>>8&255,n.setUint8(e,a),e+=1,a=t&255,n.setUint8(e,a),e+=1):(a=t>>24&255,n.setUint8(e,a),e+=1,a=t>>8&255,n.setUint8(e,a),e+=1,a=t&255,n.setUint8(e,a),e+=1),e}function N1(n){let e=n>>21&127,t=n>>14&127,r=n>>7&127,i=n>>0&127;if(e>0){let a=2155905024;return a|=e<<24,a|=t<<16,a|=r<<8,a|=i,[a,4]}else if(t>0){let a=8421376;return a|=t<<16,a|=r<<8,a|=i,[a,3]}else if(r>0){let a=32768;return a|=r<<8,a|=i,[a,2]}else return[n,1]}class v1{constructor(){this.obsoleteEvent=!1,this.deltaTime=0,this.durationTime=0,this.absoluteTime=0,this.type=0,this.contents=null,this.contentSize=0}}class KC{constructor(){this.EVENT_MEM_SIZE=327680,this.EVENT_RAM_LOC=(2147483648|8388608-this.EVENT_MEM_SIZE)>>>0,this.EVENT_HEADER_SIZE=16}loadBoards(){const e=[],t=bt.getROMGame(),r=J4(t);if(!r)return wt(`Game ${t} has no board infos defined in PP64`),[];for(let i=0;i<r.length;i++){Hn()&&console.group(`Board ${i}`);const a=r[i],o=a.bgDir,s=Z0.readBackground(o);let l;const c=this._pullBoardFromRom(a);if(c)l=c,l.bg=s,l.otherbg={};else{const d={game:this.gameVersion,type:a.type||G0.NORMAL,bg:s,otherbg:{},events:{}},h=dt.get(this.boardDefDirectory,a.boardDefFile);l=fz(h,d);const f=l._chains;delete l._chains,wt(`Board ${i} chains: `,f),this.onChangeBoardSpaceTypesFromGameSpaceTypes(l,f),this._applyPerspective(l),this._cleanLoadedBoard(l),this._parseAudio(l,a),this._findEventTableLocations(a),this._extractEvents(a,l,i,f),this._extractStarGuardians(l,a),this._extractBoos(l,a)}this.onParseStrings(l,a),l.name||(l.name=a.name||""),this.onParseBoardSelectImg(l,a),this.onParseBoardLogoImg(l,a),a.onLoad&&a.onLoad(l),this.onLoad&&this.onLoad(l,a,!!c),e.push(l),Hn()&&console.groupEnd()}if(Hn()){const i=Rr.getPatchInfo().length;for(let a=0;a<i;a++)Rr.getROMOffset(a)}return e}async overwriteBoard(e,t){const r=pu(t),i=JH(bt.getROMGame(),e),a=GM(r);vz(r,a),Sae(r),this.onChangeGameSpaceTypesFromBoardSpaceTypes(r),this._reversePerspective(r);const o=mz(r,a);dt.write(this.boardDefDirectory,i.boardDefFile,o),this._createGateEvents(r,i,a);const s=this.onWriteAudio(r,i,e),l=await this._writeNewBoardOverlay(r,i,e,s);this.onWriteStrings(r,i),this.onCreateChainEvents(r,a),this._createStarEvents(r),i.onWriteEvents&&i.onWriteEvents(r),this.onWriteEvents&&this.onWriteEvents(r),await this._writeEvents(r,i,e,a,l,s),this._clearOtherBoardNames(e),this._stashBoardIntoRom(t,i),Z0.updateMetadata(i.bgDir,r.bg),i.onAfterOverwrite&&i.onAfterOverwrite(r);const c=bt.getDataView();this.onAfterOverwrite&&this.onAfterOverwrite(c,r,i,e),await this.onOverwritePromises(t,i,e)}async _writeNewBoardOverlay(e,t,r,i){const a=await this.onCreateBoardOverlay(e,t,r,i),o=bt.getROMGame(),s=`
        ${Yw(o,!0).join(`
`)}
        ${qw(a).join(`
`)}

        ${a}
      `;wt(s);const l=Object.create(null),c=tl(s,{symbolOutputMap:l}),d=l0.getInfo(t.sceneIndex),h=this._makeSymbolsForEventAssembly(l,d);return l0.replace(t.sceneIndex,c.slice(0,l.bss),{code_end:d.code_start+l.rodata,rodata_start:d.code_start+l.rodata,rodata_end:d.code_start+l.bss,bss_start:d.code_start+l.bss,bss_end:d.code_start+c.byteLength}),h}async onCreateBoardOverlay(e,t,r,i){throw new Error("Adapter does not implement onCreateBoardOverlay")}onAfterSave(e){}onOverwritePromises(e,t,r){throw new Error("Adapter does not implement onOverwritePromises")}hydrateSpace(e,t,r){throw new Error("hydrateSpace not implemented")}onParseStrings(e,t){wt("Adapter does not implement onParseStrings")}onWriteStrings(e,t){wt("Adapter does not implement onWriteStrings")}_applyPerspective(e){const t=e.bg,[r,i]=[t.width,t.height],a=new mi(t.fov,r/i,1,1e4);e.game===1?a.position.set(t.cameraEyePosX,t.cameraEyePosY,t.cameraEyePosZ):a.position.set(t.cameraEyePosX/1.2,t.cameraEyePosY/1.2,t.cameraEyePosZ/1.2),a.lookAt(new Se(t.lookatPointX,t.lookatPointY,t.lookatPointZ)),a.scale.y=-1,a.updateMatrix(),a.updateMatrixWorld(!0),a.updateProjectionMatrix();for(let o=0;o<e.spaces.length;o++){const s=e.spaces[o],l=new Se(s.x,s.y,s.z||0);(e.game===2||e.game===3)&&(l.x*=t.scaleFactor/1.2,l.y*=t.scaleFactor/1.2,l.z*=t.scaleFactor/1.2);const c=l.project(a),d=r/2,h=i/2;s.x=Math.round(c.x*d+d),s.y=Math.round(-(c.y*h)+h),s.z=0}}_reversePerspective(e){const t=e.bg,[r,i]=[t.width,t.height],a=new mi(t.fov,r/i,1,1e4);e.game===1?a.position.set(t.cameraEyePosX,t.cameraEyePosY,t.cameraEyePosZ):a.position.set(t.cameraEyePosX/1.2,t.cameraEyePosY/1.2,t.cameraEyePosZ/1.2),a.lookAt(new Se(t.lookatPointX,t.lookatPointY,t.lookatPointZ)),a.scale.y=-1,a.updateMatrix(),a.updateMatrixWorld(!0),a.updateProjectionMatrix();for(let o=0;o<e.spaces.length;o++){const s=e.spaces[o],l=new Se(s.x/r*2-1,-(s.y/i)*2+1,.5);l.unproject(a),l.sub(a.position).normalize();const c=-a.position.z/l.z,d=new Se;d.copy(a.position).add(l.multiplyScalar(c)),(e.game===2||e.game===3)&&(d.x/=t.scaleFactor/1.2,d.y/=t.scaleFactor/1.2,d.z/=t.scaleFactor/1.2),s.x=d.x,s.y=d.y,s.z=d.z}}onGetGameCoordsFromBoardCoords(e,t,r,i){return wt("Adapter does not implement onGetGameCoordsFromBoardCoords"),[e,t,r]}onChangeBoardSpaceTypesFromGameSpaceTypes(e,t){wt("Adapter does not implement onChangeBoardSpaceTypesFromGameSpaceTypes")}onChangeGameSpaceTypesFromBoardSpaceTypes(e){wt("Adapter does not implement onChangeGameSpaceTypesFromBoardSpaceTypes")}_offsetToAddr(e,t){if(typeof t.sceneIndex=="number"&&t.sceneIndex>=0){const r=l0.getInfo(t.sceneIndex);return e<r.rom_start?(r.ram_start&2147483647)+e:(r.ram_start&2147483647)-(r.rom_start-e)}throw new Error("How do I _offsetToAddr?")}_offsetToAddrBase(e,t){return t+e>>>0}_addrToOffsetBase(e,t){return(e&2147483647)-(t&2147483647)>>>0}_stashBoardIntoRom(e,t){if(!t.mainfsBoardFile)return;const r=pu(e);delete r.bg,delete r.otherbg,delete r.animbg;const i=jW(JSON.stringify(r)),[a,o]=t.mainfsBoardFile;dt.write(a,o,i)}_pullBoardFromRom(e){if(!e.mainfsBoardFile)return null;const[t,r]=e.mainfsBoardFile;if(!dt.has(t,r))return null;const i=dt.get(t,r);return JSON.parse(GW(i))}_cleanLoadedBoard(e){const t=e.spaces.length-1,r=e.spaces[e.spaces.length-1];r&&r.x>e.bg.width+50&&r.y>e.bg.height+50&&(wt("Pruning dead space",r),e.spaces.splice(t,1))}_findEventTableLocations(e){if(typeof e.sceneIndex!="number"||e.sceneIndex<0)return;const t=bt.getROMGame(),r=to(t,"EventTableHydrate"),i=l0.getInfo(e.sceneIndex),a=l0.getCodeDataView(e.sceneIndex),o=NH(a,r),s=[];e.spaceEventTables||(e.spaceEventTables=s);for(let l=0;l<o.length;l++){const c=o[l],d=a.getUint32(c-4),h=a.getUint32(c+4),f=kc(d,h),m=this._addrToOffsetBase(f,i.ram_start);wt(`Found event table ${At(f)} (ROM ${At(m)})`),s.push({tableOffset:m})}}_extractEvents(e,t,r,i){if(!e.spaceEventTables||!e.sceneIndex)return;let a,o;const s=new F3;if(e.mainfsEventFile){const[c,d]=e.mainfsEventFile;dt.has(c,d)&&(a=dt.get(c,d),o=new DataView(a),s.parse(a,16))}const l=l0.getInfo(e.sceneIndex);a||(o=l0.getDataView(e.sceneIndex),a=o.buffer,e.spaceEventTables.forEach(c=>{let d;if(c.tableOffset)d=c.tableOffset;else{const h=o.getUint32(c.upper),f=o.getUint32(c.lower);if(!h&&!f)return;const m=kc(h,f);d=this._addrToOffsetBase(m,l.ram_start)}s.parse(a,d)})),s.forEach(c=>{const d=c.spaceIndex;d<0&&wt(`Space event on negative space ${d}`);const h=c.address&2147483647;let f;h>(this.EVENT_RAM_LOC&2147483647)?f=this._addrToOffsetBase(h,this.EVENT_RAM_LOC):f=this._addrToOffsetBase(h,l.ram_start);const m=new zd;m.parse(a,f),m.forEach(g=>{const x=g.address&2147483647;let E,_;x>(this.EVENT_RAM_LOC&2147483647)?(E=this._addrToOffsetBase(x,this.EVENT_RAM_LOC),_=o):(E=this._addrToOffsetBase(x,l.ram_start),_=l0.getDataView(e.sceneIndex));const v=Pie(_,{addr:x,offset:E,board:t,boardIndex:r,curSpace:d,curSpaceIndex:d,chains:i,game:bt.getROMGame(),gameVersion:this.gameVersion});v&&v!==!0&&(v.activationType=g.activationType,v.executionType=g.executionType,Sc(t,d,v,!1,Gn())),Hn()&&Object.values&&Object.values(JB).indexOf(g.activationType)===-1&&wt(`Unknown event activation type ${At(g.activationType)}, boardIndex: ${r}, spaceIndex: ${At(d)}`)})})}onCreateChainEvents(e,t){for(let i=0;i<t.length;i++){const a=t[i],o=a[a.length-1],s=Pa(o,e);let l;if(s.length>1){const c=[];if(s.forEach(d=>{c.push(r(d))}),s.length>2)throw new Error(`Encountered branch with ${s.length} directions, only 2 are supported currently`);l=fi(this.gameVersion===1?_k:wk,{parameterValues:{left_space:s[0],right_space:s[1],chains:c}})}else s.length>0&&(l=fi(zC,{parameterValues:{chain:r(s[0])}}));l&&Sc(e,o,l,!0,Gn())}function r(i){for(let a=0;a<t.length;a++)if(t[a].indexOf(i)>=0)return a}}_createStarEvents(e){for(let t=0;t<e.spaces.length;t++){const r=e.spaces[t];if(!r||!r.star)continue;(r.events||[]).some(o=>o.id==="STAR")||cs(e,r,fi(xk),!1,Gn())}}_createGateEvents(e,t,r){let i=0;for(let l=0;l<e.spaces.length;l++){const c=e.spaces[l];if(!c||c.subtype!==yt.GATE)continue;const d=a(l),h=e.spaces[d];if(!h)throw new Error("Gate did not have entry space");const f=a(d);if(!e.spaces[f])throw new Error("Gate did not have previous space");const g=s(f),x=r[g].indexOf(f),E=o(l),_=e.spaces[E];if(!_)throw new Error("Gate did not have exit space");const v=o(E);if(!e.spaces[v])throw new Error("Gate did not have next space");const D=s(v),V=r[D].indexOf(v),H=fi(z8,{parameterValues:{gatePrevChain:[g,x],gateEntryIndex:d,gateSpaceIndex:l,gateExitIndex:E,gateNextChain:[D,V]}});cs(e,h,H,!1,Gn()),cs(e,_,H,!1,Gn()),cs(e,c,fi(vk,{parameterValues:{gateIndex:i}}),!1,Gn()),i++}function a(l){for(const c in e.links){const d=Pa(parseInt(c),e);for(let h=0;h<d.length;h++)if(d[h]===l)return Number(c)}return-1}function o(l){return Pa(l,e)[0]}function s(l){for(let c=0;c<r.length;c++)if(r[c].indexOf(l)>=0)return c}}async _writeEvents(e,t,r,i,a,o){t.mainfsEventFile&&await this._writeEventsNew2(e,t,r,i,a,o)}async _writeEventsNew2(e,t,r,i,a,o){if(!t.mainfsEventFile)throw new Error(`No MainFS file specified to place board ASM for board ${r}.`);const s=bt.getROMGame(),l=new F3,c=[],d=[],h={},f={};for(let $=0;$<e.spaces.length;$++){const z=e.spaces[$];if(!z.events||!z.events.length)continue;l.add($,0);const I=new zd($);for(let q=0;q<z.events.length;q++){const P=z.events[q],ee=jw(P.activationType);I.add(ee,P.executionType||P.mystery,0);const ce=h[P.id]||{},U={boardIndex:r,board:e,boardInfo:t,audioIndices:o,curSpaceIndex:$,curSpace:z,chains:i,game:s,gameVersion:this.gameVersion},O=await YP(new ArrayBuffer(0),P,U,ce);if(h[P.id]=ce,typeof O!="string")throw new Error(`Event ${P.id} did not return a string to assemble`);const G=jo(P.id,e,Gn());O0(!!G),d.push(D3(O,G,P,U,!f[P.id],q)),f[P.id]=!0}c.push(I)}const m=new zd(-5),g=new zd(-4),x=new zd(-3),E=new zd(-2),_=[{index:-5,list:m,type:Yt.BEFORE_DICE_ROLL},{index:-4,list:g,type:Yt.BEFORE_PLAYER_TURN},{index:-3,list:x,type:Yt.AFTER_TURN},{index:-2,list:E,type:Yt.BEFORE_TURN}];for(const{index:$,list:z,type:I}of _){const q=Yre(e.boardevents||[],I),P=jw(I);for(let ee=0;ee<q.length;ee++){const ce=q[ee];z.add(P,ce.executionType,0);const U=h[ce.id]||{},O={boardIndex:r,board:e,boardInfo:t,audioIndices:o,curSpaceIndex:$,curSpace:null,chains:i,game:s,gameVersion:this.gameVersion},G=await YP(new ArrayBuffer(0),ce,O,U);if(h[ce.id]=U,typeof G!="string")throw new Error(`Event ${ce.id} did not return a string to assemble`);const re=jo(ce.id,e,Gn());O0(!!re),d.push(D3(G,re,ce,O,!f[ce.id],ee)),f[ce.id]=!0}this.onAddDefaultBoardEvents(I,z),z.count()>0&&(l.add($,0),c.push(z))}const v=d.join(`
`),C=qw(v),D=`
.org ${At(this.EVENT_RAM_LOC)}
.ascii "PP64"
.word ${At(this.EVENT_RAM_LOC)}
.word 0 // Populated with buffer size later
.align 16

${a}

${Yw(s,!1).join(`
`)}
${sE(t.bgDir,PA(e)).join(`
`)}
${uE(o).join(`
`)}
${C.join(`
`)}

${l.getAssembly()}
${c.map($=>$.getAssembly()).join(`
`)}
${v}
`;wt(D);let V;const H=Object.create(null);try{V=tl(D,{symbolOutputMap:H})}catch($){const z=`Error during board assembly: ${$}
Context: ${D}`;throw new Error(z)}wt("Overlay symbols: ",H);const R=new DataView(V);if(V.byteLength>this.EVENT_MEM_SIZE)throw new Error(`Event code exceeded available memory space (${V.byteLength}/${this.EVENT_MEM_SIZE})`);R.setUint32(8,V.byteLength);const[j,te]=t.mainfsEventFile;dt.write(j,te,V)}_makeSymbolsForEventAssembly(e,t){let r="";for(const i in e)i.indexOf("__PP64_INTERNAL_VAL_")===0?r+=`.definelabel ${i},${At(e[i])}
`:i.indexOf("__PP64_INTERNAL")===0&&(r+=`.definelabel ${i},${At(t.ram_start+e[i])}
`);return r}onWriteEventAsmHook(e,t,r){throw new Error("Adapter does not implement onWriteEventAsmHook")}onAddDefaultBoardEvents(e,t){}_extractStarGuardians(e,t){if(!t.sceneIndex)return;const r=l0.getDataView(t.sceneIndex);if(t.toadSpaceInst){const i=r.getUint16(t.toadSpaceInst+2);e.spaces[i]&&(e.spaces[i].subtype=yt.TOAD)}if(t.starSpaceCount){let i=t.starSpaceArrOffset;Array.isArray(i)&&(i=i[0]);for(let a=0;a<t.starSpaceCount;a++){const o=r.getUint16(i+a*2);e.spaces[o]&&(e.spaces[o].star=!0)}for(let a=0;a<t.starSpaceCount;a++){let o=t.toadSpaceArrOffset;Array.isArray(o)&&(o=o[0]);const s=r.getUint16(o+a*2);e.spaces[s]&&(e.spaces[s].subtype=yt.TOAD)}}}_writeStarInfo(e,t){const r=t.starSpaceCount;if(r){const i=l0.getDataView(t.sceneIndex),a=[];for(let c=0;c<e.spaces.length;c++)e.spaces[c].star&&a.push(c);let o=t.starSpaceArrOffset;Array.isArray(o)||(o=[o]);for(let c=0;c<o.length;c++){const d=o[c];for(let h=0;h<r;h++){const f=h<a.length?h:a.length-1;i.setUint16(d+h*2,a[f])}}const s=Mr(yt.TOAD,e);let l=t.toadSpaceArrOffset;Array.isArray(l)||(l=[l]);for(let c=0;c<l.length;c++){const d=l[c];for(let h=0;h<r;h++){const f=h<a.length?h:a.length-1,m=e.spaces[a[f]];let g=Number.MAX_VALUE,x=a[f];for(let E=0;E<s.length;E++){const _=s[E],v=e.spaces[_],C=Ro(m.x,m.y,v.x,v.y);C<g&&(g=C,x=_)}i.setUint16(d+h*2,x)}}}}_extractBoos(e,t){if(!t.sceneIndex)return;const r=l0.getDataView(t.sceneIndex);let i;if(t.boosLoopFnOffset){let a=t.boosLoopFnOffset,o=r.getUint16(a+42);if(r.getUint32(a+40)===436273148&&(o=1),o===0)return;a=t.boosReadbackFnOffset;let s=r.getInt16(a+210);s=1048576+s;const l=l0.getInfo(t.sceneIndex),c=this._addrToOffsetBase(s,l.ram_start);for(let d=0;d<o;d++)i=r.getUint16(c+2*d),e.spaces[i]&&(e.spaces[i].subtype=yt.BOO)}else if(t.booSpaceInst)i=r.getUint16(t.booSpaceInst+2),e.spaces[i]&&(e.spaces[i].subtype=yt.BOO);else if(t.booCount){const a=t.booArrOffset;for(let o=0;o<a.length;o++){let s=a[o];for(let l=0;l<t.booCount;l++){const c=r.getUint16(s);e.spaces[c]&&(e.spaces[c].subtype=yt.BOO),s+=2}}}}_writeBoos(e,t){if(!t.sceneIndex)return;const r=Mr(yt.BOO,e),i=l0.getDataView(t.sceneIndex);if(t.boosLoopFnOffset){let a=t.boosLoopFnOffset,o=i.getUint16(a+42);if(i.getUint32(a+40)===436273148?o=1:r.length&&o>r.length&&i.setUint16(a+42,r.length),o===0)return;a=t.boosReadbackFnOffset;let s=i.getInt16(a+210);s=1048576+s;const l=l0.getInfo(t.sceneIndex),c=this._addrToOffsetBase(s,l.ram_start);for(let d=0;d<o;d++){const h=r[d]===void 0?L0(e):r[d];i.setUint16(c+2*d,h)}}else if(t.booSpaceInst){const a=r[0]===void 0?L0(e):r[0];i.setUint16(t.booSpaceInst+2,a)}else if(t.booCount){const a=t.booArrOffset;for(let o=0;o<a.length;o++){let s=a[o];for(let l=0;l<t.booCount;l++){const c=r[l]===void 0?L0(e):r[l];i.setUint16(s,c),s+=2}}}}_extractBanks(e,t){if(!t.bankCount||!t.sceneIndex)return;const r=l0.getDataView(t.sceneIndex),i=t.bankArrOffset;for(let a=0;a<i.length;a++){let o=i[a];for(let s=0;s<t.bankCount;s++){const l=r.getUint16(o);e.spaces[l]&&(e.spaces[l].subtype=yt.BANK),o+=2}}for(let a=0;a<t.bankCoinArrOffset.length;a++){let o=t.bankCoinArrOffset[a];for(let s=0;s<t.bankCount;s++){const l=r.getUint16(o);e.spaces[l]&&(e.spaces[l].subtype=yt.BANKCOIN),o+=2}}}_writeBanks(e,t){if(!t.bankCount||!t.sceneIndex)return;const r=l0.getDataView(t.sceneIndex),i=Mr(yt.BANK,e),a=t.bankArrOffset;for(let s=0;s<a.length;s++){let l=a[s];for(let c=0;c<t.bankCount;c++){const d=i[c]===void 0?L0(e):i[c];r.setUint16(l,d),l+=2}}const o=Mr(yt.BANKCOIN,e);for(let s=0;s<t.bankCoinArrOffset.length;s++){let l=t.bankCoinArrOffset[s];for(let c=0;c<t.bankCount;c++){const d=o[c]===void 0?L0(e):o[c];r.setUint16(l,d),l+=2}}}_extractItemShops(e,t){if(!t.itemShopCount||!t.sceneIndex)return;const r=l0.getDataView(t.sceneIndex);for(let i=0;i<t.itemShopArrOffset.length;i++){let a=t.itemShopArrOffset[i];for(let o=0;o<t.itemShopCount;o++){const s=r.getUint16(a);e.spaces[s]&&(e.spaces[s].subtype=yt.ITEMSHOP),a+=2}}}_writeItemShops(e,t){if(!t.itemShopCount||!t.sceneIndex)return;const r=l0.getDataView(t.sceneIndex),i=Mr(yt.ITEMSHOP,e);for(let a=0;a<t.itemShopArrOffset.length;a++){let o=t.itemShopArrOffset[a];for(let s=0;s<t.itemShopCount;s++){const l=i[s]===void 0?L0(e):i[s];r.setUint16(o,l),o+=2}}}_writeGates(e,t){if(!t.gateCount||!t.sceneIndex)return;const r=l0.getDataView(t.sceneIndex),i=[];for(let o=0;o<e.spaces.length;o++)e.spaces[o].subtype===yt.GATE&&i.push(o);const a=t.gateArrOffset;for(let o=0;o<a.length;o++){let s=a[o];for(let l=0;l<t.gateCount;l++){const c=i[l]===void 0?L0(e):i[l];r.setUint16(s,c),s+=2}}}async _writeBackground(e,t,r,i){const a=await Ca(t,r,i);Z0.writeBackground(e,a,r,i)}async _writeAdditionalBackgrounds(e){const t=e.additionalbg;if(!t||!t.length)return;const{width:r,height:i}=e.bg,a=new Array(t.length),o=[];for(let s=0;s<t.length;s++){const l=new Promise(c=>{const d=s;Ca(t[s],r,i).then(h=>{a[d]=h,c()})});o.push(l)}await Promise.all(o);for(const s of a)Z0.writeBackground(Z0.getDirectoryCount(),s,r,i,e.bg)}onParseBoardSelectImg(e,t){wt("Adapter does not implement onParseBoardSelectImg")}onWriteBoardSelectImg(e,t){return wt("Adapter does not implement onWriteBoardSelectImg"),Promise.resolve()}onParseBoardLogoImg(e,t){wt("Adapter does not implement onParseBoardLogoImg")}onWriteBoardLogoImg(e,t){return wt("Adapter does not implement onWriteBoardLogoImg"),Promise.resolve()}_brandBootSplashscreen(){return new Promise((e,t)=>{if(!tr(In.writeBranding)){e();return}if(!this.nintendoLogoFSEntry||!this.hudsonLogoFSEntry){wt("Adapter cannot write branding"),e();return}const r=new Image,i=setTimeout(()=>t("Failed to overwrite boot logo"),45e3);r.onload=()=>{this._combineSplashcreenLogos();const a=bc(r,320,240),s=[{src:Ih(a,320,240),width:320,height:240,bpp:16}],l=Pr(s,16,8);dt.write(this.hudsonLogoFSEntry[0],this.hudsonLogoFSEntry[1],l),clearTimeout(i),e()},r.src=zre})}_combineSplashcreenLogos(){const e=dt.get(this.nintendoLogoFSEntry[0],this.nintendoLogoFSEntry[1]);if(new Uint8Array(e)[26]!==32)return;const t=dt.get(this.hudsonLogoFSEntry[0],this.hudsonLogoFSEntry[1]),r=xc(e)[0],i=xc(t)[0],a=new Uint8Array(r.src),o=new Uint8Array(i.src),s=ko(320,240);s.fillStyle="black",s.fillRect(0,0,320,240);const l=s.getImageData(0,0,320,240);for(let f=320*88*4;f<320*154*4;f++)l.data[f-320*40*4]=a[f];for(let f=320*88*4;f<320*154*4;f++)l.data[f+320*50*4]=o[f];const d=[{src:Ih(l.data.buffer,320,240),width:320,height:240,bpp:16}],h=Pr(d,16,8);dt.write(this.nintendoLogoFSEntry[0],this.nintendoLogoFSEntry[1],h)}_clearOtherBoardNames(e){wt("Adapter does not implement _clearOtherBoardNames")}_readPackedFromMainFS(e,t){const r=dt.get(e,t),i=xc(r);return!i||!i.length?void 0:i.map(o=>new DataView(o.src))}_readImgsFromMainFS(e,t){const r=dt.get(e,t),i=xc(r);if(!(!i||!i.length))return i}_readImgInfoFromMainFS(e,t,r){return this._readImgsFromMainFS(e,t)[r||0]}_readImgFromMainFS(e,t,r){const i=this._readImgInfoFromMainFS(e,t,r);return Ea(i.src,i.width,i.height)}_parseAudio(e,t){if(!t.audioIndexOffset||!t.sceneIndex)return;const r=l0.getDataView(t.sceneIndex);e.audioIndex=r.getUint16(t.audioIndexOffset)}onWriteAudio(e,t,r){let i=[];switch(e.audioType){case eo.Custom:{const a=Rr.getSequenceTable(0);O0(!!a);for(const o of e.audioData)i.push(a.midis.length),a.midis.push({buffer:XC(sM(o.data),{loop:!0}),soundbankIndex:o.soundbankIndex})}break;case eo.InGame:default:i=[e.audioIndex||0];break}return i}getAudioMap(e){return wt("Adapter does not implement getAudioMap"),[]}getSoundEffectMap(e){return wt("Adapter does not implement getSoundEffectMap"),[]}getCharacterMap(){return wt("Adapter does not implement getCharacterMap"),{}}}function Yre(n,e){return n.filter(t=>t.activationType===e)}const Or=class Tr{static unpack(e){if(e instanceof DataView||(e=new DataView(e)),!Tr.isForm(e))return null;let t=Object.create(null);t.entries=[];let r=8;for(;r<e.byteLength-2;){let i=e.getUint32(r);i=T3(i),i==="HBIN"&&(r+=4,i+=T3(e.getUint32(r))),t.entries.push(i),r+=4;let a=e.getUint32(r);r+=4;let o={raw:e.buffer.slice(r,r+a)},s=Tr.parseType(i,o.raw);s&&(o.parsed=s),t[i]=t[i]||[],t[i].push(o),r+=a+a%2}if(t.BMP1)for(let i=0;i<t.BMP1.length;i++){let a=t.BMP1[i];a.parsed=Tr.parseBMP(a.raw,t.PAL1)}return t}static pack(e){let t=new ArrayBuffer(Tr.getByteLength(e)),r=new DataView(t);r.setUint32(0,1179603533),r.setUint32(4,t.byteLength-8);let i={},a=8;for(let o=0;o<e.entries.length;o++){let s=e.entries[o],l=i[s]||0;i[s]=l+1;let c=UW(s);for(let f=0;f<c.length;f++)r.setUint8(a,c[f]),a++;let d=e[s][l],h=d.raw.byteLength;r.setUint32(a,h),a+=4,fr(r,d.raw,a,0,h),a+=h+h%2}return t}static isForm(e){return e?(e instanceof DataView||(e=new DataView(e)),e.getUint32(0)===1179603533):!1}static getByteLength(e){let t=0;for(let r in e)if(r!=="entries")for(let i=0;i<e[r].length;i++){let a=e[r][i].raw.byteLength;t+=a+a%2+r.length+4}return t+8}static parseType(e,t){switch(e){case"HBINMODE":return Tr.parseHBINMODE(t);case"OBJ1":return Tr.parseOBJ1(t);case"COL1":return Tr.parseCOL1(t);case"MAT1":return Tr.parseMAT1(t);case"ATR1":return Tr.parseATR1(t);case"VTX1":return Tr.parseVTX1(t);case"FAC1":return Tr.parseFAC1(t);case"PAL1":return Tr.parsePAL1(t);case"SKL1":return Tr.parseSKL1(t);case"STRG":return Tr.parseSTRG(t)}return null}static parseHBINMODE(e){let t=new DataView(e);const r={E:t.getUint8(20),F:t.getUint8(21),G:t.getUint8(22)};return(r.E!==69||r.F!==70||r.G!==71)&&console.warn("HBINMODE unexpected EFG => ",r),r}static parseOBJ1(e){let t=new DataView(e),r={objects:[],mystery1:t.getUint16(2)},i=t.getUint16(0),a=4;for(let o=0;o<i;o++){let s=t.getUint16(a),l=t.getUint8(a+2),c=t.getUint16(a+3);a+=5;let d;switch(l){case 61:d={children:[]};const h=t.getUint16(a);for(let f=0;f<h;f++)d.children.push(t.getUint16(a+2+2*f));Object.assign(d,Tr._parseOBJ1Transforms(t,a+2+2*h));break;case 58:d={mystery1:t.getUint8(a),faceIndex:t.getUint16(a+1),faceCount:t.getUint16(a+3)},Object.assign(d,Tr._parseOBJ1Transforms(t,a+5));break;case 16:d={skeletonGlobalIndex:t.getUint16(a)},Object.assign(d,Tr._parseOBJ1Transforms(t,a+2));break;case 59:d={},console.warn("Object type 0x3B");break;case 62:d={};break;case 97:d={},Object.assign(d,Tr._parseOBJ1Transforms(t,a));break;case 93:d={},console.warn("Object type 0x5D");break;default:console.warn(`Unrecognized object type ${At(l)}`),d={};break}d.objType=l,d.globalIndex=c,r.objects.push(d),a+=s-3}return r}static _parseOBJ1Transforms(e,t){return{posX:e.getFloat32(t),posY:e.getFloat32(t+4),posZ:e.getFloat32(t+8),rotX:e.getFloat32(t+12),rotY:e.getFloat32(t+16),rotZ:e.getFloat32(t+20),scaleX:e.getFloat32(t+24),scaleY:e.getFloat32(t+28),scaleZ:e.getFloat32(t+32)}}static parseCOL1(e){let t=new DataView(e),r=[],i=t.getUint16(0),a=2;for(let o=0;o<i;o++)r.push(t.getUint32(a)),a+=4;return r}static parseMAT1(e){let t=new DataView(e),r={materials:[]},i=t.getUint16(0),a=2;for(let o=0;o<i;o++){let s={mystery1:t.getUint16(a),colorIndex:t.getUint16(a+2),mystery3:t.getUint16(a+4),mystery4:t.getFloat32(a+6),mystery5:t.getUint16(a+10)};r.materials.push(s),a+=12}return r}static parseATR1(e){let t=new DataView(e),r={atrs:[]},i=t.getUint16(0),a=2;for(let o=0;o<i;o++){let s={size:t.getUint16(a),xBehavior:t.getUint8(a+5),yBehavior:t.getUint8(a+6),bmpGlobalIndex:t.getUint16(a+10)};r.atrs.push(s),a+=s.size+2}return r}static parseVTX1(e){let t=new DataView(e),r={vertices:[],scale:t.getFloat32(4)},i=t.getUint16(0),a=8;for(let o=0;o<i;o++){let s={x:t.getInt16(a),y:t.getInt16(a+2),z:t.getInt16(a+4),normalX:t.getInt8(a+6),normalY:t.getInt8(a+7),normalZ:t.getInt8(a+8)};r.vertices.push(s),a+=9}return r}static parseFAC1(e){let t=new DataView(e),r={faces:[]},i=t.getUint16(0),a=8;for(let o=0;o<i;o++){let s=t.getUint8(a);if(s!==53&&s!==22&&s!==48)throw new Error(`Unrecognized faceType in FAC1: ${At(s)}`);let l={vtxEntries:[]};if(r.faces.push(l),a+=1,s===48)console.warn("Unsupported face type 0x30"),a+=6;else{const c=s===53?4:3;for(let d=0;d<c;d++)l.vtxEntries[d]={vertexIndex:t.getUint16(a),materialIndex:t.getInt16(a+2),u:t.getFloat32(a+4),v:t.getFloat32(a+8)},a+=12}l.materialIndex=t.getInt16(a),l.atrIndex=t.getInt16(a+2),l.mystery3=t.getUint8(a+4),l.mystery3!==54&&console.warn("Unsupported FAC1 mystery3 ",At(l.mystery3)),a+=5}return r}static parsePAL1(e){let t=new DataView(e),r={colors:[],bpp:0,globalIndex:t.getUint16(0)},i=t.getUint16(2);r.bpp=Math.floor((e.byteLength-4)/i)*8;let a=4;for(let o=0;o<i;o++){if(r.bpp===32)r.colors.push(t.getUint32(a));else if(r.bpp===16)r.colors.push(t.getUint16(a));else if(r.bpp===8)r.colors.push(t.getUint8(a));else throw new Error(`FORM.parseType(PAL1): bpp: ${r.bpp}`);a+=r.bpp/8}return r}static parseSKL1(e){const t=new DataView(e),r=t.getUint8(2),i={globalIndex:t.getUint16(0),skls:[]};let a=3;for(let o=0;o<r;o++){const s={mystery1:t.getUint8(a),objGlobalIndex:t.getUint16(a+1),nextSiblingRelativeIndex:t.getUint16(a+51),isParentNode:t.getUint16(a+53),mystery2:t.getUint8(a+54)};Object.assign(s,Tr._parseOBJ1Transforms(t,a+3)),i.skls.push(s),a+=56}return i}static parseSTRG(e){let t=new DataView(e),r=[],i=t.getUint16(0),a=2+i;for(let o=0;o<i;o++){let s="",l=t.getUint8(2+o);for(let c=0;c<l;c++)s+=String.fromCharCode(t.getUint8(a+c));a+=l,r.push(s)}return r}static parseBMP(e,t){const r=new DataView(e),i=r.getUint16(2),a=r.getUint16(5),o=r.getUint16(7);if(i===296||i===552){if(!t)throw new Error(`Palette needed for BMP format ${At(i)}`);const s=r.getUint16(9),l=r.getUint16(15);let c;for(let m=0;m<t.length;m++)if(t[m].parsed.globalIndex===s){c=t[m].parsed;break}if(!c)throw new Error(`Could not locate palette at window index ${s}`);const d=8/(a*o/l),h=c.bpp,f=new DataView(e,17,l);return{globalIndex:r.getUint16(0),origFormat:i,paletteGlobalIndex:s,width:a,height:o,src:o8(f,c.colors,d,h)}}else if(i===295){const s=r.getUint8(4),l=r.getUint16(11);switch(s){case 16:return{globalIndex:r.getUint16(0),origFormat:i,width:a,height:o,src:Tp(e.slice(13,13+l),a,o)};case 32:return{globalIndex:r.getUint16(0),origFormat:i,width:a,height:o,src:e.slice(13,13+l)};default:console.warn(`BMP1 0x127 had unsupported bpp ${s}`)}}else if(i===294){const s=r.getUint16(11),l=new ArrayBuffer(a*o*4),c=new DataView(l);for(let d=0;d<s/3;d++){const h=r.getUint8(13+d),f=r.getUint8(13+d+1),m=r.getUint8(13+d+2),g=h<<24|f<<16|m<<8|255,x=d*4;c.setUint32(x,g)}return{globalIndex:r.getUint16(0),origFormat:i,width:a,height:o,src:l}}else if(i===293){const s=r.getUint16(11),l=new ArrayBuffer(s*4),c=new DataView(l);for(let d=0;d<s;d++){const h=r.getUint8(13+d),f=h&15|(h&15)<<4,m=h&240|(h&240)>>>4,g=m<<24|m<<16|m<<8|f,x=d*4;c.setUint32(x,g)}return{globalIndex:r.getUint16(0),origFormat:i,width:a,height:o,src:l}}else if(i===292){const s=r.getUint16(11),l=new ArrayBuffer(s*8),c=new DataView(l);let d=0;for(let h=0;h<s;h++){const f=r.getUint8(13+h);let m=(f&240)>>>4;m|=f&240,c.setUint32(d,m<<24|m<<16|m<<8|255),d+=4;let g=f&15;g|=g<<4,c.setUint32(d,g<<24|g<<16|g<<8|255),d+=4}return{globalIndex:r.getUint16(0),origFormat:i,width:a,height:o,src:l}}return console.warn(`Could not parse BMP format ${At(i)}`),{globalIndex:r.getUint16(0),origFormat:i,width:a,height:o,src:new ArrayBuffer(a*o*4)}}static replaceBMP(e,t,r,i){fr(e.BMP1[t].raw,r,17,0,r.byteLength),e.PAL1[t].parsed=i;let a=new DataView(e.PAL1[t].raw).getUint16(0),o=e.PAL1[t].raw=new ArrayBuffer(4+i.colors.length*4),s=new DataView(o);s.setUint16(0,a),s.setUint16(2,i.colors.length);let l=4;for(let c=0;c<i.colors.length;c++)s.setUint32(l,i.colors[c]),l+=4}static getByGlobalIndex(e,t,r){if(!e[t])return null;const i=[];for(var a=0;a<e[t].length;a++){const o=e[t][a].parsed;if(!o)throw new Error(`No parsed value for ${t}`);if(o.hasOwnProperty("globalIndex"))o.globalIndex===r&&i.push(o);else{let s=o;switch(t){case"OBJ1":s=o.objects;break}for(let l=0;l<s.length;l++){const c=s[l];if(!c.hasOwnProperty("globalIndex"))throw new Error(`globalIndex is not a property of the searched ${t} array in getByGlobalIndex`);c.globalIndex===r&&i.push(c)}}}return i.length?i.length===1?i[0]:i:null}static getObjectsByType(e,t){const r=e.OBJ1[0].parsed.objects,i=[];for(let a=0;a<r.length;a++)r[a].objType===t&&i.push(r[a]);return i}};function YC(n){switch(n){case 8:return{order:[1,2,3,0,4,5,6,7],bias:[0,0,0,1,1,1,1,2]};case 7:return{order:[3,5,6,0,1,2,4],bias:[0,0,0,1,1,1,3]};case 6:return{order:[0,1,2,3,4,5],bias:[0,0,0,1,1,1]};case 5:return{order:[0,1,2,3,4],bias:[0,0,0,1,1]};case 4:return{order:[0,1,2,3],bias:[0,0,0,1]};case 3:return{order:[0,1,2],bias:[0,0,1]};case 2:return{order:[0,1],bias:[0,0]};case 0:return{order:[0],bias:[0]}}return{order:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],bias:[0,0,0,1,1,1,1,2,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,4,5,6,6,6]}}async function qre(n,e,t,r){const[i,a]=e.mainfsEventFile,o=Mr(yt.BOO,n),s=Mr(yt.KOOPA,n),l=s.length?s[0]:L0(n),c=Mr(yt.BOWSER,n),d=c.length?c[0]:L0(n);let h=[];for(let C=0;C<n.spaces.length;C++)n.spaces[C].star&&h.push(C);const f=h.length?"show_next_star_spot":"show_next_star_no_op",m=YC(h.length);let g=Mr(yt.TOAD,n),x=[];for(let C=0;C<h.length;C++){let D=n.spaces[h[C]],V=Number.MAX_VALUE,H=h[C];for(let R=0;R<g.length;R++){let j=g[R],te=n.spaces[j],$=Ro(D.x,D.y,te.x,te.y);$<V&&(V=$,H=j)}x.push(H)}const E=PA(n),_=await oE(n,e.bgDir,E),v=await lE(n,r);return`
.org 0x800F65E0

.definelabel CORE_800C597A,0x800C597A
.definelabel CORE_800ED154,0x800ED154
.definelabel CORE_800ED156,0x800ED156
.definelabel CORE_800ED158,0x800ED158
.definelabel CORE_800ED172,0x800ED172
.definelabel CORE_800ED192,0x800ED192
.definelabel CORE_800ED5C0,0x800ED5C0
.definelabel CORE_800ED5C2,0x800ED5C2
.definelabel CORE_800ED5CA,0x800ED5CA
.definelabel CORE_800ED5CC,0x800ED5CC
.definelabel CORE_800ED5D8,0x800ED5D8
.definelabel CORE_800EE320,0x800EE320
.definelabel CORE_800F2B7C,0x800F2B7C

.definelabel STAR_COUNT,${h.length}
.definelabel BOO_COUNT,${o.length}

main:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   A0, hi(overlaycalls)
  addiu A0, A0, lo(overlaycalls)
  lui   A1, hi(CORE_800C597A)
  jal   ExecBoardScene
   lh    A1, lo(CORE_800C597A)(A1)
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18
  NOP
  NOP

__PP64_INTERNAL_GET_NEXT_TOAD_INDEX:
  lui   V0, hi(CORE_800ED5CA)
  addiu V0, V0, lo(CORE_800ED5CA)
  lh    V1, 0(V0)
  sll   V1, V1, 1
  addu  V0, V0, V1
  lh    V0, 2(V0) ; get next toad index?
  sll   V0, V0, 1
  lui   AT, hi(toad_space_indices)
  addu  AT, AT, V0
  jr    RA
   lh    V0, lo(toad_space_indices)(AT)

func_800F663C:
  addiu SP, SP, -0x30
  sw    RA, 0x28(SP)
  sw    S5, 0x24(SP)
  sw    S4, 0x20(SP)
  sw    S3, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   S5, hi(CORE_800ED5C0)
  addiu S5, S5, lo(CORE_800ED5C0)
  addu  S1, R0, R0
  lui   S3, hi(shuffle_bias)
  addiu S3, S3, lo(shuffle_bias)
  lui   S2, hi(shuffle_order)
  addiu S2, S2, lo(shuffle_order)

L800F6680:
  ; rand1 = GetRandomByte() % STAR_COUNT;
  jal	GetRandomByte
  nop
  li   S4, STAR_COUNT
  div  V0, S4
  nop
  mfhi S0
  nop
  andi  S0, S0, 0xff
  nop

  ; rand2 = GetRandomByte() % STAR_COUNT;
  jal	GetRandomByte
  nop
  li   S4, STAR_COUNT
  div  V0, S4
  nop
  mfhi A0
  nop
  andi  A0, A0, 0xff
  nop

  beq   S0, A0, L800F6740
   sll   V1, A0, 1
  addu  A3, V1, S3
  lh    V0, 0(A3)
  slt   V0, S0, V0
  bnel V0, R0, L800F6744
   addiu S1, S1, 1
  sll   A1, S0, 1
  addu  A2, A1, S3
  lh    V0, 0(A2)
  slt   V0, A0, V0
  bnel V0, R0, L800F6744
   addiu S1, S1, 1
  addu  A0, A1, S2
  lh    A1, 0(A0)
  addu  V1, V1, S2
  lhu   V0, 0(V1)
  sh    V0, 0(A0)
  sh    A1, 0(V1)
  lh    A1, 0(A2)
  lhu   V0, 0(A3)
  sh    V0, 0(A2)
  sh    A1, 0(A3)
L800F6740:
  addiu S1, S1, 1
L800F6744:
  slti  V0, S1, 0x1e
  bne  V0, R0, L800F6680
   NOP
  addu  S1, R0, R0
  lui   A0, hi(shuffle_order)
  addiu A0, A0, lo(shuffle_order)
  sll   V0, S1, 1
L800F6760:
  addu  V1, V0, S5
  addu  V0, V0, A0
  lhu   V0, 0(V0)
  sh    V0, 0xc(V1)
  addiu S1, S1, 1
  slti  V0, S1, STAR_COUNT
  bne  V0, R0, L800F6760
   sll   V0, S1, 1
  lw    RA, 0x28(SP)
  lw    S5, 0x24(SP)
  lw    S4, 0x20(SP)
  lw    S3, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x30

func_800F67A4:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   V0, hi(CORE_800ED5CA)
  lhu   V0, lo(CORE_800ED5CA)(V0)
  addiu V0, V0, 1
  lui   AT, hi(CORE_800ED5CA)
  sh    V0, lo(CORE_800ED5CA)(AT)
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  slti  V0, V0, STAR_COUNT
  bne  V0, R0, L800F6820
   NOP
  lui   S0, hi(CORE_800ED5D8)
  lh    S0, lo(CORE_800ED5D8)(S0)
  lui   AT, hi(CORE_800ED5CA)
  sh    R0, lo(CORE_800ED5CA)(AT)
  jal   SetBoardFeatureFlag
   addiu    A0, R0, 68
  jal   func_800F663C
   NOP
  lui   V1, hi(CORE_800ED5CC)
  lh    V1, lo(CORE_800ED5CC)(V1)
  bne   S0, V1, L800F6820
   NOP
  lui   V0, hi(CORE_800ED5D8)
  lhu   V0, lo(CORE_800ED5D8)(V0)
  lui   AT, hi(CORE_800ED5CC)
  sh    V0, lo(CORE_800ED5CC)(AT)
  lui   AT, hi(CORE_800ED5D8)
  sh    V1, lo(CORE_800ED5D8)(AT)
L800F6820:
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

; Ensures star space shows a star, past stars are chance time
draw_star_space_state:
  addiu SP, SP, -0x30
  sw    RA, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S2, hi(CORE_800ED5C0)
  addiu S2, S2, lo(CORE_800ED5C0)
  addu  S1, R0, R0
  lui   S4, hi(star_space_indices)
  addiu S4, S4, lo(star_space_indices)
  lui   S3, hi(data_mystery_40s_list)
  addiu S3, S3, lo(data_mystery_40s_list)
  sll   S0, S1, 1
L800F686C:
  addu  V0, S0, S4
  lh    A0, 0(V0)
  jal   SetSpaceType
   addiu    A1, R0, 1
  addu  S0, S0, S3
  lh    A0, 0(S0)
  jal   SetBoardFeatureFlag
   addiu S1, S1, 1
  slti  V0, S1, STAR_COUNT
  bnel V0, R0, L800F686C
   sll   S0, S1, 1
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 68
  bne  V0, R0, L800F68AC
   addiu    S0, R0, STAR_COUNT
  lh    S0, 0xa(S2)
L800F68AC:
  blez  S0, L800F68EC
   addu  S1, R0, R0
  lui   S3, hi(star_space_indices)
  addiu S3, S3, lo(star_space_indices)
  sll   V0, S1, 1
L800F68C0:
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  lh    A0, 0(V0)
  jal   SetSpaceType
   addiu    A1, R0, 6 ; Chance
  addiu S1, S1, 1
  slt   V0, S1, S0
  bne  V0, R0, L800F68C0
   sll   V0, S1, 1
L800F68EC:
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  lui   A0, hi(star_space_indices)
  addu  A0, A0, V0
  lh    A0, lo(star_space_indices)(A0)
  jal   SetSpaceType
   addiu    A1, R0, 5 ; Star
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  lui   A0, hi(data_mystery_40s_list)
  addu  A0, A0, V0
  jal   ClearBoardFeatureFlag
   lh    A0, lo(data_mystery_40s_list)(A0)
  lw    RA, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x30

__PP64_INTERNAL_STAR_SPACE:
  addiu SP, SP, -0x28
  sw    RA, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S1, hi(CORE_800ED5C0)
  addiu S1, S1, lo(CORE_800ED5C0)
  addu  S0, R0, R0
  lui   A1, hi(star_space_indices)
  addiu A1, A1, lo(star_space_indices)
  sll   A0, A0, 0x10
  sra   A0, A0, 0x10
  lui   A2, hi(data_mystery_40s_list)
  addiu A2, A2, lo(data_mystery_40s_list)
  sll   V1, S0, 1
L800F6990:
  addu  V0, V1, A1
  lh    V0, 0(V0)
  bnel  A0, V0, L800F6A14
   addiu S0, S0, 1
  lh    V0, 0xa(S1)
  sll   V0, V0, 1
  addu  V0, V0, S1
  lh    V0, 0xc(V0)
  bne   S0, V0, L800F69C8
   addu  V0, V1, A2
  lhu   V0, 0(V0)
  sh    V0, 0x1a(S1)
  j     L800F6A24
   addiu    V0, R0, 1
L800F69C8:
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 68
  bne  V0, R0, L800F69DC
   addiu    A0, R0, STAR_COUNT
  lh    A0, 0xa(S1)
L800F69DC:
  blez  A0, L800F6A20
   addu  V1, R0, R0
  sll   V0, V1, 1
L800F69E8:
  addu  V0, V0, S1
  lh    V0, 0xc(V0)
  bne   S0, V0, L800F6A00
   addiu V1, V1, 1
  j     L800F6A24
   addiu    V0, R0, 2
L800F6A00:
  slt   V0, V1, A0
  bne  V0, R0, L800F69E8
   sll   V0, V1, 1
  j     L800F6A24
   addu  V0, R0, R0
L800F6A14:
  slti  V0, S0, STAR_COUNT
  bne  V0, R0, L800F6990
   sll   V1, S0, 1
L800F6A20:
  addu  V0, R0, R0
L800F6A24:
  lw    RA, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

show_next_star_spot_process:
  addiu SP, SP, -0x50
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F30, 0x48(SP)
  sdc1  F28, 0x40(SP)
  sdc1  F26, 0x38(SP)
  sdc1  F24, 0x30(SP)
  sdc1  F22, 0x28(SP)
  jal   0x800633A8
   sdc1  F20, 0x20(SP)
  lw    S0, 0x8c(V0)
  jal   PlaySound
   addiu    A0, R0, 109
  addiu    A0, R0, 64
  jal   0x8003DBE0
   addu  A1, R0, R0
  addu  S1, V0, R0
  lhu   V0, 0xa(S1)
  ori   V0, V0, 4
  sh    V0, 0xa(S1)
  jal   0x8004CDCC
   addu  A0, S1, R0
  addiu A0, S1, 0xc
  jal   0x800A0D50 ; posmodel
   addiu A1, S0, 4
  lui    AT, 0x43FA ; 500.000000
  mtc1  AT, F0
  NOP
  swc1  F0, 0x30(S1)
  addu  A0, S1, R0
  jal   0x80042728
   addu  A1, R0, R0
  addu  S2, V0, R0
  mtc1  R0, F20
  addu  S0, R0, R0
  lui   AT, 0x3ECC
  ori   AT, AT, 0xCCCD
  mtc1  AT, F22
L800F6AD8:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  NOP
  jal   0x800A0D00
   addiu A0, S1, 0x24
  jal   SleepVProcess
   ADD.S F20, F20, F22
  addiu S0, S0, 1
  slti  V0, S0, 6
  bne  V0, R0, L800F6AD8
   NOP
  addu  S0, R0, R0
  lui   AT, 0x3ECC
  ori   AT, AT, 0xCCCD
  mtc1  AT, F22
L800F6B18:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  NOP
  jal   0x800A0D00
   addiu A0, S1, 0x24
  jal   SleepVProcess
   SUB.S F20, F20, F22
  addiu S0, S0, 1
  slti  V0, S0, 3
  bne  V0, R0, L800F6B18
   NOP
  jal   SleepProcess
   addiu    A0, R0, 30
  jal   PlaySound
   addiu    A0, R0, 68
  mtc1  R0, F22
  lui   AT, 0x41A0 ; 20.000000
  mtc1  AT, F30
  lui   AT, 0x3CA3
  ori AT, AT, 0xd70a
  mtc1  AT, F28
  mtc1  R0, F26
  lui   AT, 0x40C0 ; 6.000000
  mtc1  AT, F24
L800F6B7C:
  lw    V0, 0x3c(S1)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(CORE_800F2B7C)
  lw    V0, lo(CORE_800F2B7C)(V0)  ; gets a pointer
  addu  A0, A0, V0
  mfc1  A1, F22
  NOP
  jal   0x800A40D0
   addiu A0, A0, 0x7c
  SUB.S F20, F20, F28
  C.LT.S F20, F26
  NOP
  NOP
  bc1t  L800F6BF8
   ADD.S F22, F22, F30
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  NOP
  jal   0x800A0D00
   addiu A0, S1, 0x24
  lwc1  F0, 0x30(S1)
  SUB.S F0, F0, F24
  jal   SleepVProcess
   swc1  F0, 0x30(S1)
  j     L800F6B7C
   NOP
L800F6BF8:
  jal   0x800427D4
   addu  A0, S2, R0
  jal   SleepProcess
   addiu    A0, R0, 30
  jal   0x8003E694
   addu  A0, S1, R0
  jal   EndProcess
   addu  A0, R0, R0
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F30, 0x48(SP)
  ldc1  F28, 0x40(SP)
  ldc1  F26, 0x38(SP)
  ldc1  F24, 0x30(SP)
  ldc1  F22, 0x28(SP)
  ldc1  F20, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x50

show_next_star_spot_inner:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  addu  S0, A0, R0
  lw    V0, 0(S0)
  lui   AT, 0x41A0 ; 20.000000
  mtc1  AT, F0
  NOP
  swc1  F0, 0x34(V0)
  lui   AT, 0xC040 ; -3.000000
  mtc1  AT, F0
  NOP
  swc1  F0, 0x38(V0)
  lw    A0, 0(S0)
  addu  A1, R0, R0
  jal   0x8003E81C
   addu  A2, R0, R0
  jal   SleepProcess
   addiu    A0, R0, 3
L800F6C94:
  lw    A0, 0(S0)
  jal   0x8003E940
   NOP
  andi  V0, V0, 0xffff
  bne  V0, R0, L800F6CBC
   addiu    A1, R0, -1
  jal   SleepVProcess
   NOP
  j     L800F6C94
   NOP
L800F6CBC:
  lw    A0, 0(S0)
  jal   0x8003E81C
   addiu    A2, R0, 2
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

show_next_star_spot:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   S2, hi(CORE_800ED5C0)
  addiu S2, S2, lo(CORE_800ED5C0)
  jal   0x80060128
   addiu    A0, R0, 43
  lui   A0, hi(data_star_related_800F9920)
  jal   0x80048224
   addiu A0, A0, lo(data_star_related_800F9920)
  addu  S0, V0, R0
  addiu    A0, R0, 2
  jal   0x80072644
   addiu    A1, R0, 16
L800F6D18:
  jal   0x80072718
   NOP
  beq  V0, R0, L800F6D38
   NOP
  jal   SleepVProcess
   NOP
  j     L800F6D18
   NOP
L800F6D38:
  jal   0x8004A520
   NOP
  lui   AT, 0x4040  ; 3.000000
  mtc1  AT, F12
  jal   0x8004B5C4
   NOP
  jal   show_next_star_spot_inner
   addu  A0, S0, R0
  lh    V0, 0xa(S2)
  bne  V0, R0, L800F6D78
   addiu    A1, R0, 1258
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 68
  bnel V0, R0, L800F6D78
   addiu    A1, R0, 1258 ; "Let me show you where to find the next Star."
  addiu    A1, R0, 1256 ; "Let me show you where to find the first Star."
L800F6D78:
  lh    A0, 8(S0)
  addiu    A2, R0, -1
  jal   LoadStringIntoWindow
   addiu    A3, R0, -1
  lh    A0, 8(S0)
  jal   0x80071C8C
   addiu    A1, R0, 1
  jal   PlaySound
   addiu    A0, R0, 1125
  lh    A0, 8(S0)
  jal   WaitForTextConfirmation
   NOP
  lh    A0, 8(S0)
  jal   0x80071E80
   addiu    A1, R0, 1
  lh    A0, 8(S0)
  jal   0x8006EB40
   NOP
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  lui   A0, hi(toad_space_indices)
  addu  A0, A0, V0
  jal   GetSpaceData
   lh    A0, lo(toad_space_indices)(A0)
  addu  S1, V0, R0
  jal   0x8004B5DC
   addiu A0, S1, 4
  lui    AT, 0x40A0 ; 5.000000
  mtc1  AT, F12
  jal   0x8004B838
   NOP
  jal   SleepProcess
   addiu    A0, R0, 5
L800F6E08:
  jal   0x8004B850
   NOP
  beq  V0, R0, L800F6E28
   NOP
  jal   SleepVProcess
   NOP
  j     L800F6E08
   NOP
L800F6E28:
  jal   SleepProcess
   addiu    A0, R0, 5
  lui   A0, hi(show_next_star_spot_process)
  addiu A0, A0, lo(show_next_star_spot_process)
  addiu    A1, R0, 18432
  addu  A2, R0, R0
  jal   InitProcess
   addu  A3, R0, R0
  sw    S1, 0x8c(V0)
  jal   SleepProcess
   addiu    A0, R0, 30
  lh    V0, 0xa(S2)
  bne  V0, R0, L800F6E74
   addiu    A1, R0, 1259
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 68
  bnel V0, R0, L800F6E74
   addiu    A1, R0, 1259 ; "This is the star spot. Get the star by giving Toad 20 coins"
  addiu    A1, R0, 1257 ; same?: "This is the star spot. Get the star by giving Toad 20 coins"
L800F6E74:
  lh    A0, 8(S0)
  addiu    A2, R0, -1
  jal   LoadStringIntoWindow
   addiu    A3, R0, -1
  lh    A0, 8(S0)
  jal   0x80071C8C
   addiu    A1, R0, 1
  lh    A0, 8(S0)
  jal   WaitForTextConfirmation
   NOP
  lh    A0, 8(S0)
  jal   0x80071E80
   addiu    A1, R0, 1
  jal   0x800601D4
   addiu    A0, R0, 90
  jal   SleepProcess
   addiu    A0, R0, 30
  addiu    A0, R0, 2
  jal   0x800726AC
   addiu    A1, R0, 16
  jal   SleepProcess
   addiu    A0, R0, 17
  jal   0x8004847C
   addu  A0, S0, R0
  jal   0x80056AF4
   NOP
  jal   0x8005DFB8
   addiu    A0, R0, 1
  jal   0x8005E3A8
   NOP
  jal   SleepVProcess
   NOP
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

; This custom alternative is the minimum necessary to skip Toad's star showing.
show_next_star_no_op:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)

  ; Causes fade back in (star shaped fade in)
  addiu    A0, R0, 2
  jal   0x80072644
  addiu    A1, R0, 16

  ; One or more of these may be unnecessary...
  jal   0x800601D4
  addiu    A0, R0, 90
  jal   0x80056AF4
  NOP
  jal   0x8005DFB8
  addiu    A0, R0, 1
  jal   0x8005E3A8
  NOP

  jal SleepVProcess
  nop

  lw    RA, 0x10(SP)
  jr    RA
  addiu SP, SP, 0x18

overlaycall0:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   AT, hi(CORE_800ED5C2)
  sh    R0, lo(CORE_800ED5C2)(AT)
  addiu    A0, R0, 10 ; max_objects
  jal   InitObjectSystem
   addu  A1, R0, R0 ; max_processes
  addiu    A0, R0, 53
  addu  A1, R0, R0
  jal   0x8005E044
   addiu    A2, R0, 146
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

overlaycall1:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  addiu    A0, R0, 10
  jal   InitObjectSystem
   addu  A1, R0, R0
; Set players at starting chain
  addu  A0, R0, R0
  addu  A1, R0, R0
  jal   SetPlayerOntoChain
   addu  A2, R0, R0
  addiu    A0, R0, 1
  addu  A1, R0, R0
  jal   SetPlayerOntoChain
   addu  A2, R0, R0
  addiu    A0, R0, 2
  addu  A1, R0, R0
  jal   SetPlayerOntoChain
   addu  A2, R0, R0
  addiu    A0, R0, 3
  addu  A1, R0, R0
  jal   SetPlayerOntoChain
   addu  A2, R0, R0
  lui   V1, hi(CORE_800ED5C0)
  lh    V1, lo(CORE_800ED5C0)(V1)
  beq  V1, R0, L800F6FB8
   addiu    V0, R0, 1
  beq   V1, V0, L800F6FD8
   NOP
  j     L800F6FEC
   NOP
L800F6FB8:
  jal   SetBoardFeatureFlag
   addiu    A0, R0, 0x46
  jal   SetBoardFeatureFlag
   addiu    A0, R0, 0x47
  jal   SetBoardFeatureFlag
   addiu    A0, R0, 0x49
  j     L800F6FE4
   addiu    A0, R0, 0x4B
L800F6FD8:
  jal   SetBoardFeatureFlag
   addiu    A0, R0, 0x47
  addiu    A0, R0, 0x49
L800F6FE4:
  jal   SetBoardFeatureFlag
   NOP
L800F6FEC:
  jal   SetBoardFeatureFlag
   addiu    A0, R0, 0x43
  jal   func_800F663C
   NOP
  ; Clear board-specific persistent state values
  lui   V0, hi(CORE_800ED154)
  addiu V0, V0, lo(CORE_800ED154)
  sh    R0, 0(V0)
  sh    R0, 2(V0)
  sh    R0, 4(V0)
  jal   0x8005DFB8
   addiu    A0, R0, 1
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

; called from multiple places
setup_routine:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  addiu    A0, R0, 80
  jal   InitObjectSystem
   addiu    A1, R0, 40
  jal   0x80060088
   addu  S1, R0, R0
  jal   0x80023448
   addiu    A0, R0, 1
  addu  A0, R0, R0
  addiu    A1, R0, 120
  addiu    A2, R0, 120
  jal   0x800234B8
   addiu    A3, R0, 120
  addiu    A0, R0, 1
  addiu    A1, R0, 64
  addiu    A2, R0, 64
  jal   0x800234B8
   addiu    A3, R0, 96
  lui   A1, 0xc2c8 ; -100.0
  lui   A2, 0x42c8 ; 100.0
  lui   A3, 0x4396 ; 300.0
  jal   0x80023504
   addiu    A0, R0, 1

  JAL   __PP64_INTERNAL_ADDITIONAL_BG_CHOICE
   NOP
  move  A0, V0 ; Determined by user-customizable hook
  addiu  A1, R0, ${e.boardDefFile}
  addiu  A2, R0, ${e.pauseBgDir}
  jal   0x80056A08 ; setup board?
   addu  A3, R0, R0

  jal   0x80052E84 ; reset animations for characters?
   addu  A0, R0, R0
  jal   0x80052E84
   addiu    A0, R0, 1
  jal   0x80052E84
   addiu    A0, R0, 2
  jal   0x80052E84
   addiu    A0, R0, 3
L800F70C0:
  jal   GetPlayerStruct
   addu  A0, S1, R0
  addu  S0, V0, R0
  lw    A0, 0x20(S0)
  jal   0x8003E174
   addiu S1, S1, 1
  lw    V1, 0x20(S0)
  lhu   V0, 0xa(V1)
  ori   V0, V0, 2
  sh    V0, 0xa(V1)
  slti  V0, S1, 4
  bne  V0, R0, L800F70C0
   NOP
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 78
  beq  V0, R0, L800F7114
   NOP
  jal   ClearBoardFeatureFlag
   addiu    A0, R0, 78
  jal   func_800F67A4
   NOP
L800F7114:
.if STAR_COUNT
  jal   draw_star_space_state
   NOP
  jal   draw_toads_outer
   NOP
.endif
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 14
  bne  V0, R0, L800F714C
   NOP
  jal   koopa_draw_outer
   NOP
L800F714C:
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 15
  bne  V0, R0, L800F7164
   NOP
.if BOO_COUNT
  jal   boo_draw_outer
.endif
   NOP
L800F7164:
  jal   IsBoardFeatureFlagSet
   addiu    A0, R0, 13
  bne  V0, R0, L800F717C
   NOP
  jal   bowser_draw_outer
   NOP
L800F717C:
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

${_}

; A function that returns the audio index, to let custom events call to get the value.
${v}

overlaycall2:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)

  jal __PP64_INTERNAL_GET_BOARD_AUDIO_INDEX
   nop

  ; Start playing board audio.
  jal   0x80060128
   move A0, V0

  jal   0x8001D240
   addiu A0, R0, 2
  jal   setup_routine
   NOP
  JAL hydrate_events
   NOP

; TODO: Support the disabled koopa, boo, bowser setting with split event tables
;  jal   IsBoardFeatureFlagSet
;   addiu A0, R0, 14
;  bne  V0, R0, L800F71D8
;   NOP
;  lui   A0, hi(koopa_event_table)
;  jal   EventTableHydrate
;   addiu A0, A0, lo(koopa_event_table)
;L800F71D8:
;  jal   IsBoardFeatureFlagSet
;   addiu A0, R0, 15
;  bne  V0, R0, L800F71F4
;   NOP
;  lui   A0, hi(boo_event_table)
;  jal   EventTableHydrate
;   addiu A0, A0, lo(boo_event_table)
;L800F71F4:
;  jal   IsBoardFeatureFlagSet
;   addiu A0, R0, 13
;  bne  V0, R0, L800F7210
;   NOP
;  lui   A0, hi(bowser_event_table)
;  jal   EventTableHydrate
;   addiu A0, A0, lo(bowser_event_table)
L800F7210:
  jal   0x800584F0
   addu  A0, R0, R0
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

overlaycall3:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   0x8001D240
   addiu A0, R0, 1
  jal   setup_routine
   NOP
  jal   0x800584F0
   addiu A0, R0, 1
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

bowser_draw_inner:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   V0, hi(bss_bowser_model)
  lw    V0, lo(bss_bowser_model)(V0)
  bne  V0, R0, L800F72BC
   addiu A0, R0, 59 ; bowser model model_info index
  jal   0x8003DBE0
   addu  A1, R0, R0
  addu  S0, V0, R0
  jal   0x8003E174
   addu  A0, S0, R0
  lui   AT, hi(bss_bowser_model)
  sw    S0, lo(bss_bowser_model)(AT)
  lhu   V0, 0xa(S0)
  ori   V0, V0, 2
  sh    V0, 0xa(S0)
  jal   GetSpaceData
   addiu A0, R0, ${d}
  addiu A0, S0, 0xc
  jal   0x800A0D50 ; posmodel
   addiu A1, V0, 4
  addiu    A0, R0, 7
  addu  A1, S0, R0
  addiu    A2, R0, -2
  jal   0x8003C314
   addu  A3, R0, R0
L800F72BC:
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

bowser_draw_outer:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   AT, hi(bss_bowser_model)
  jal   bowser_draw_inner
   sw    R0, lo(bss_bowser_model)(AT)
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

koopa_draw_inner:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   V0, hi(bss_koopa_model)
  lw    V0, lo(bss_koopa_model)(V0)
  bne   V0, R0, L800F7358
   addiu A0, R0, 57 ; koopa model model_info index
  jal   0x8003DBE0 ; loads model
   addu  A1, R0, R0
  addu  S0, V0, R0
  jal   0x8003E174
   addu  A0, S0, R0
  lui   AT, hi(bss_koopa_model)
  sw    S0, lo(bss_koopa_model)(AT)
  lhu   V0, 0xa(S0)
  ori   V0, V0, 2
  sh    V0, 0xa(S0)
  jal   GetSpaceData
   addiu A0, R0, ${l}
  addiu A0, S0, 0xc
  jal   0x800A0D50 ; posmodel
   addiu A1, V0, 4
  addiu A0, R0, 9
  addu  A1, S0, R0
  addiu A2, R0, -1
  jal   0x8003C314
   addiu A3, R0, -3
L800F7358:
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

koopa_draw_outer:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   AT, hi(bss_koopa_model)
  jal   koopa_draw_inner
   sw    R0, lo(bss_koopa_model)(AT)
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

draw_toads_inner:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  addu  S0, A0, R0
  sll   A0, A0, 0x10
  sra   A0, A0, 0xe
  lui   V0, hi(bss_toad_instances)
  addu  V0, V0, A0
  lw    V0, lo(bss_toad_instances)(V0)
  bne  V0, R0, L800F7474
   NOP
  lui   V0, hi(bss_toad_model)
  lw    V0, lo(bss_toad_model)(V0)
  bne  V0, R0, L800F73F4
   NOP
  addiu    A0, R0, 58 ; Toads model_info index
  jal   0x8003DBE0
   addu  A1, R0, R0
  addu  S2, V0, R0
  jal   0x8003E174
   addu  A0, S2, R0
  lui   AT, hi(bss_toad_model)
  sw    S2, lo(bss_toad_model)(AT)
  j     L800F7408
   sll   S0, S0, 0x10
L800F73F4:
  lui   A0, hi(bss_toad_model)
  lw    A0, lo(bss_toad_model)(A0)
  jal   0x8003E320
   sll   S0, S0, 0x10
  addu  S2, V0, R0
L800F7408:
  sra   S0, S0, 0x10
  sll   S1, S0, 2
  lui   AT, hi(bss_toad_instances)
  addu  AT, AT, S1
  sw    S2, lo(bss_toad_instances)(AT)
  lhu   V0, 0xa(S2)
  ori   V0, V0, 2
  sh    V0, 0xa(S2)
  jal   0x8004CDCC
   addu  A0, S2, R0
  sll   S0, S0, 1
  lui   A0, hi(toad_space_indices_repeat)
  addu  A0, A0, S0
  jal   GetSpaceData
   lh    A0, lo(toad_space_indices_repeat)(A0)
  addiu A0, S2, 0xc
  jal   0x800A0D50 ; posmodel
   addiu A1, V0, 4
  addiu    A0, R0, 6
  lui   A2, hi(RO_800F9948)
  addu  A2, A2, S1
  lh    A2, lo(RO_800F9948)(A2)
  lui   A3, hi(RO_800F994A)
  addu  A3, A3, S1
  lh    A3, lo(RO_800F994A)(A3)
  jal   0x8003C314
   addu  A1, S2, R0
L800F7474:
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

draw_toads_outer:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   AT, hi(bss_toad_model)
  sw    R0, lo(bss_toad_model)(AT)
  addu  S0, R0, R0
  lui   S2, hi(bss_toad_instances)
  addiu S2, S2, lo(bss_toad_instances)
  lui   S1, hi(data_mystery_40s_list_2)
  addiu S1, S1, lo(data_mystery_40s_list_2)
  sll   V0, S0, 2
L800F74C0:
  addu  V0, V0, S2
  sw    R0, 0(V0)
  sll   V0, S0, 1
  addu  V0, V0, S1
  jal   IsBoardFeatureFlagSet
   lh    A0, 0(V0)
  bnel V0, R0, L800F74F0
   addiu S0, S0, 1
  sll   A0, S0, 0x10
  jal   draw_toads_inner
   sra   A0, A0, 0x10
  addiu S0, S0, 1
L800F74F0:
  slti  V0, S0, STAR_COUNT
  bne  V0, R0, L800F74C0
   sll   V0, S0, 2
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

.if BOO_COUNT
boo_draw_inner:
  ; A0 = index of boo to draw
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  addu  S0, A0, R0
  ; V0 = bss_boo_instances[A0]
  sll   A0, A0, 0x10
  sra   A0, A0, 0xe
  lui   V0, hi(bss_boo_instances)
  addu  V0, V0, A0
  lw    V0, lo(bss_boo_instances)(V0)
  ; If we have a non-zero in bss_boo_instances[A0], exit.
  bne  V0, R0, boo_draw_inner_exit
   NOP
  ; V0 = bss_boo_model
  lui   V0, hi(bss_boo_model)
  lw    V0, lo(bss_boo_model)(V0)
  ; If we have already loaded the boo model, jump ahead
  bne  V0, R0, L800F7714
   addiu    A0, R0, 106 ; Boo model_info index
  jal   0x8003DBE0
   addu  A1, R0, R0
  addu  S1, V0, R0
  jal   0x8003E174
   addu  A0, S1, R0
  lui   AT, hi(bss_boo_model)
  sw    S1, lo(bss_boo_model)(AT)
  j     L800F7728
   sll   S0, S0, 0x10
L800F7714:
  ; A0 = bss_boo_model
  lui   A0, hi(bss_boo_model)
  lw    A0, lo(bss_boo_model)(A0)
  jal   0x8003E320
   sll   S0, S0, 0x10
  addu  S1, V0, R0
L800F7728:
  sra   S0, S0, 0x10
  sll   V0, S0, 2
  ; bss_boo_instances[original index] = S1
  lui   AT, hi(bss_boo_instances)
  addu  AT, AT, V0
  sw    S1, lo(bss_boo_instances)(AT)
  lhu   V0, 0xa(S1)
  ori   V0, V0, 2
  sh    V0, 0xa(S1)
  addiu A0, S1, 0x24
  lui A1, 0x3f19
  ori A1, A1, 0x999a ; 0.6
  addu  A2, A1, R0 ; 0.6
  jal   0x800A0D00
   addu  A3, A1, R0 ; 0.6
  lui   AT, 0x42C8 ; 100.000000
  mtc1  AT, F0
  NOP
  swc1  F0, 0x30(S1)
  ; Get the space data for boo_space_indices[original index]
  sll   S0, S0, 1
  lui   A0, hi(boo_space_indices)
  addu  A0, A0, S0
  jal   GetSpaceData
   lh    A0, lo(boo_space_indices)(A0)
  addiu A0, S1, 0xc
  jal   0x800A0D50 ; posmodel
   addiu A1, V0, 4
  addiu    A0, R0, 8
  addu  A1, S1, R0
  addu  A2, R0, R0
  jal   0x8003C314
   addu  A3, R0, R0
boo_draw_inner_exit:
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

boo_draw_outer:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  ; bss_boo_model = 0
  lui   AT, hi(bss_boo_model)
  sw    R0, lo(bss_boo_model)(AT)
  addu  S0, R0, R0
  sll   A0, S0, 0x10
boo_draw_outer_loop:
  jal   boo_draw_inner
   sra   A0, A0, 0x10
  addiu S0, S0, 1
  slti  V0, S0, BOO_COUNT
  bne  V0, R0, boo_draw_outer_loop
   sll   A0, S0, 0x10
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18
.endif ; BOO_COUNT

overlaycall4:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   InitCameras
   addiu    A0, R0, 2 ; camera count
  lui   A1, hi(data_screen_dimensions)
  addiu A1, A1, lo(data_screen_dimensions)
  jal   0x8001D4D4
   addiu    A0, R0, 1
  jal   setup_routine
   NOP
  jal   0x800584F0
   addiu    A0, R0, 2
  lui   A0, hi(${f})
  addiu A0, A0, lo(${f})
  addiu    A1, R0, 4101
  addu  A2, R0, R0
  jal   InitProcess
   addu  A3, R0, R0
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

hydrate_events:
  ADDIU SP SP 0xFFE8
  SW RA, 0x0010(SP)

  // Call for the MainFS to read in the ASM blob.
  LUI A0 ${i}
  JAL ${to(Qe.MP1_USA,"ReadMainFS")}
  ADDIU A0 A0 ${a}

  // Now, V0 has the location that the MainFSRead put the blob... it isn't
  // where we want it, it is in the heap somewhere, so we will move it.

  // This is a pretty simple copy loop
  // T4 = Copy of V0, Current source RAM location
  // T0 = Current dest RAM location
  // T1 = Size of buffer remaining to copy
  // T2 = Temp word register to do the copy
  ADDU T4 V0 R0 // Copy V0 -> T4
  LW T0 0x4(T4) // LW T0, 0x4(T4) [RAM dest]
  LW T1 0x8(T4) // LW T1, 0x8(T4) [Buffer size]
hydrate_events_loop_start:
  LW T2 0(T4)
  SW T2 0(T0)
  ADDIU T4 T4 4
  ADDIU T0 T0 4
  ADDIU T1 T1 -4
  BGTZ T1 hydrate_events_loop_start
  NOP

  // Now we can hydrate the table.
  // T9 = V0 copy
  // T4 = Dest buffer addr + 0x10, where the table really starts
  ADDU T9 V0 R0 // Copy V0 -> T9
  LW T4 4(T9) // LW T4, 0x4(T9) [RAM dest]
  JAL ${to(Qe.MP1_USA,"EventTableHydrate")}
  ADDIU A0 T4 16 // ADDIU A0, T4, 16

  // Well, we copied the buffer... now we should "free" it with this magic JAL...
  // Free our T9 reference, which theoretically could be corrupted, but in practice not.
  JAL ${to(Qe.MP1_USA,"FreeMainFS")}
  ADDU A0 T9 R0

  LW RA 0x10(SP)
  JR RA
  ADDIU SP SP 0x18
.align 16

; 800F9890
rodata:
overlaycalls:
.word 0x00000000, overlaycall0
.word 0x00010000, overlaycall1
.word 0x00020000, overlaycall2
.word 0x00030000, overlaycall3
.word 0x00040000, overlaycall4
.word 0xFFFF0000, 0

data_screen_dimensions:
.word 0x00000000
.word 0x00000000
.word 0x43A00000 ; 320
.word 0x43700000 ; 240

shuffle_order:
.halfword ${m.order.join(",")}

.align 4
shuffle_bias:
.halfword ${m.bias.join(",")}

.align 4
data_mystery_40s_list:
.halfword 0x46, 0x47, 0x48, 0x49, 0x4A, 0x4B, 0x4C

.align 4
star_space_indices:
.halfword ${h.join(",")||0}

.align 4
toad_space_indices:
.halfword ${x.join(",")||0}

.align 4
data_star_related_800F9920:
.word 0x00000001, 0x00070003

.align 4
toad_space_indices_repeat:
.halfword ${x.join(",")||0}

.align 4
data_mystery_40s_list_2:
.halfword 0x46, 0x47, 0x48, 0x49, 0x4A, 0x4B, 0x4C, 0

RO_800F9948:
.halfword 6
RO_800F994A:
.halfword 0
.word 0x0000FFFD, 0x0000FFF8, 0xFFFD0000, 0xFFFE0000, 0xFFFE0000, 0xFFFD0000

.if BOO_COUNT
boo_space_indices:
.halfword ${o.join(",")}
.endif

.align 16

bss:
bss_bowser_model: .word 0

bss_koopa_model: .word 0

bss_toad_model: .word 0
bss_toad_instances: .word ${x.map(()=>0).join(",")||0}

.if BOO_COUNT
bss_boo_model: .word 0
bss_boo_instances: .word ${o.map(()=>0).join(",")}
.endif

.align 16

`}const Ek={id:"CHANCETIME",name:"Chance Time",activationType:Yt.LANDON,executionType:sn.DIRECT,supportedGames:[Qe.MP1_USA],parse(n,e){let t={METHOD:"18F44B4AA1F4AAAA839C100E3B0FD863"};return!!H0([n.buffer,e.offset,108],t.METHOD)},write(n,e,t,r){return`
      ADDIU SP SP 0xFFE0
      SW RA 0x18(SP)
      SW S1 0x14(SP)
      SW S0 0x10(SP)
      ADDU S1 R0 R0
    loop:
      JAL GetPlayerStruct
      ADDU A0 S1 R0
      JAL GetCurrentPlayerIndex
      ADDU S0 V0 R0
      SLL V0 V0 0x10
      SRA V0 V0 0x10
      XOR V0 S1 V0
      SLTU V0 R0 V0
      SB V0 0(S0)
      ADDIU S1 S1 1
      SLTI V0 S1 4
      BNE V0 R0 loop
      ADDIU A0 R0 1
      ADDU A1 R0 R0
      ADDIU A2 R0 5
      JAL 0x800587BC
      ADDIU A3 R0 1
      LW RA 0x18(SP)
      LW S1 0x14(SP)
      LW S0 0x10(SP)
      JR RA
      ADDIU SP SP 0x20
    `}};hr(Ek);const Ck={id:"STARCHANCE",name:"Chance Time from old star space",activationType:Yt.LANDON,executionType:sn.DIRECT,fakeEvent:!0,supportedGames:[Qe.MP1_USA],parse(n,e){let t={METHOD:"7E32BF9C855085A03CF3A8D208A6AB94"};return!!H0([n.buffer,e.offset,140],t.METHOD)},write(n,e,t,r){return`
      addiu SP, SP, -0x20
      sw    RA, 0x18(SP)
      sw    S1, 0x14(SP)
      jal   GetCurrentSpaceIndex
      sw    S0, 0x10(SP)
      sll   V0, V0, 0x10
      jal   __PP64_INTERNAL_STAR_SPACE
      sra   A0, V0, 0x10
      sll   V0, V0, 0x10
      sra   V0, V0, 0x10
      addiu  V1, R0, 2
      bne   V0, V1, L800F9784
      addu  S1, R0, R0
    L800F9740:
      jal   GetPlayerStruct
      addu  A0, S1, R0
      jal   GetCurrentPlayerIndex
      addu  S0, V0, R0
      sll   V0, V0, 0x10
      sra   V0, V0, 0x10
      xor   V0, S1, V0
      sltu  V0, R0, V0
      sb    V0, 0(S0)
      addiu S1, S1, 1
      slti  V0, S1, 4 ; total players
      bne  V0, R0, L800F9740
      addiu    A0, R0, 1
      addu  A1, R0, R0
      addiu    A2, R0, 5
      jal   0x800587BC
      addiu    A3, R0, 1
    L800F9784:
      lw    RA, 0x18(SP)
      lw    S1, 0x14(SP)
      lw    S0, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x20
    `}};hr(Ck);const Qre=[];function Jre(n){return Qre}const Zre=["","","Peaceful Mushroom Village","Traveling the Warp Pipe","Mushroom Bank","Option House Theme","Mushroom Shop Theme","Mini-Game House Theme","DK's Jungle Adventure Theme","Peach's Birthday Cake Theme","Yoshi's Tropical Island Theme","Wario's Battle Canyon Theme","Luigi's Engine Room Theme","Mario's Rainbow Castle Theme","Magma Mountain Theme","Eternal Star Theme","Outcome of Adventure","Adventure Begins","Bowser Meeting","Last 5 Turns","","Play A Mini-Game","Results","","Move to the Mambo","Wide, Wide Ocean","Mushroom Forest","Ducking and Dodging","Full of Danger","Coins of the World","Taking Coins","The Room Underground","Slowly, Slowly","Dodging Danger","Let's Limbo!","Let's Go Lightly","Chance Time","Can It Be Done","Faster Than All","Saving Courage","","","Playing the Game","Where Have The Stars Gone?","","","","The Stolen Star","Bowser's Chance Game","Mini-Game Stadium","","","","","","","","","","","","","","","After the Victory","Mini-Game Island","Mini-Game Island","Mini-Game Island","Mini-Game Island","Mini-Game Island","Mini-Game Island (Bowser)","Mini-Game Island","Mini-Game Island (Aquatic)","","","","","","","",""],$re=["","Mario Party Theme","Power of the Stars","After the Victory","","Everyone's a Superstar! (Credits)","Opening"];function eie(n){switch(n){case 1:return $re;default:return Zre}}const tie=new class extends KC{constructor(){super(...arguments),this.gameVersion=1,this.nintendoLogoFSEntry=[9,110],this.hudsonLogoFSEntry=[9,111],this.boardDefDirectory=10,this.MAINFS_READ_ADDR=83376,this.HEAP_FREE_ADDR=83760,this.TABLE_HYDRATE_ADDR=313600}hydrateSpace(e,t,r){e.type===de.STAR?e.star=!0:e.type===de.CHANCE&&cs(t,e,fi(Ek),!1,r)}onLoad(e,t,r){r||(this._extractKoopa(e,t),this._extractBowser(e,t),this._extractGoomba(e,t))}onCreateBoardOverlay(e,t,r,i){return qre(e,t,r,i)}onAfterOverwrite(e,t,r,i){e.setUint16(245602,32832),e.setUint16(245610,4194304-this.EVENT_MEM_SIZE>>>16),e.setUint16(245622,32),e.setUint16(390134,32);const a=835536,o=832464;e.setUint32(307156,en(`J ${o}`));const s=`
      .orga ${a}
      LW S5, 0x0(A0)
      LUI S6, 0x4856 // "HV"
      ADDIU S6, S6, 0x5120 // "Q "
      BEQ S5, S6, call_hvq_decode
      NOP
      ADDU S5, R0, A1
      ADDIU S6, S5, 0x1800 // (64 x 48 tile)
      ADDU S7, R0, A0
      LW GP, 0(S7)
      SW GP, 0(S5)
      ADDIU S5, S5, 4
      ADDIU S7, S7, 4
      BEQ S5, S6, ret_to_hook
      NOP
      J ${o+32} // J back to LW
      NOP
    call_hvq_decode:
      ADDU S5, R0, R0
      ADDU S6, R0, R0
      ADDU S7, R0, R0
      ADDU GP, R0, R0
      JAL 0x7F54C // JAL HVQDecode
      NOP
    ret_to_hook:
      ADDU S5, R0, R0
      ADDU S6, R0, R0
      ADDU S7, R0, R0
      ADDU GP, R0, R0
      J 0x4A3DC // J back into original function, skipping HVQDecode
      NOP
    `;tl(s,{buffer:e.buffer})}onOverwritePromises(e,t,r){const i=t.bgDir;let a=[this.onWriteBoardSelectImg(e,t),this.onWriteBoardLogoImg(e,t),this._brandBootSplashscreen(),this._writeBackground(i,e.bg.src,e.bg.width,e.bg.height),this._writeBackground(t.pauseBgDir,e.bg.src,320,240),this._writeAdditionalBackgrounds(e)];switch(r){case 0:a=a.concat([this._writeBackground(i+1,e.otherbg.largescene,320,240),this._writeBackground(i+2,e.otherbg.conversation,320,240),this._writeBackground(i+3,e.otherbg.conversation,320,240),this._writeBackground(i+5,e.bg.src,320,240),this._writeBackground(i+6,e.otherbg.splashscreen,320,240)]);break;case 1:a=a.concat([this._writeBackground(i+1,e.otherbg.largescene,320,240),this._writeBackground(i+2,e.otherbg.conversation,320,240),this._writeBackground(i+3,e.otherbg.conversation,320,240),this._writeBackground(i+4,e.otherbg.conversation,320,240),this._writeBackground(i+5,e.otherbg.conversation,320,240),this._writeBackground(i+6,e.otherbg.largescene,320,240),this._writeBackground(i+8,e.bg.src,320,240),this._writeBackground(i+9,e.bg.src,320,240),this._writeBackground(i+10,e.otherbg.splashscreen,320,240)]);break;case 2:a=a.concat([this._writeBackground(i+1,e.otherbg.largescene,320,240),this._writeBackground(i+2,e.otherbg.conversation,320,240),this._writeBackground(i+3,e.otherbg.conversation,320,240),this._writeBackground(i+4,e.otherbg.conversation,320,240),this._writeBackground(i+5,e.otherbg.conversation,320,240),this._writeBackground(i+6,e.bg.src,320,240),this._writeBackground(i+8,e.otherbg.splashscreen,320,240)]);break;case 3:a=a.concat([this._writeBackground(i+1,e.otherbg.largescene,320,240),this._writeBackground(i+2,e.otherbg.conversation,320,240),this._writeBackground(i+3,e.otherbg.conversation,320,240),this._writeBackground(i+4,e.otherbg.conversation,320,240),this._writeBackground(i+5,e.otherbg.conversation,320,240),this._writeBackground(i+6,e.bg.src,320,240),this._writeBackground(i+7,e.otherbg.conversation,320,240),this._writeBackground(i+8,e.otherbg.conversation,320,240),this._writeBackground(i+10,e.otherbg.conversation,320,240),this._writeBackground(i+11,e.otherbg.splashscreen,320,240)]);break}return Promise.all(a)}onWriteEvents(e){const t=e.spaces;for(let r=0;r<t.length;r++){const i=e.spaces[r];if(!i||!i.star)continue;(i.events||[]).some(s=>s.id==="STARCHANCE")||cs(e,i,fi(Ck),!1,Gn())}}onWriteEventAsmHook(e,t,r){}onParseStrings(e,t){const r=t.str||{};if(r.boardSelect){let i=r.boardSelect;Array.isArray(i)&&(i=i[0]);const a=Bt.read(i),o=a.split(`
`),s=o[0].indexOf(">")+1,l=o[0].indexOf("<",s);e.name=o[0].substring(s,l),e.description=[o[1],o[2]].join(`
`);let c=0,d=a.indexOf(this.getCharacterMap()[42],0);for(;d!==-1;)c++,d=a.indexOf(this.getCharacterMap()[42],d+1);e.difficulty=c}}onWriteStrings(e,t){const r=t.str||{};if(r.boardSelect){let i=[];i.push(11),i.push(5),i=i.concat(Bt._strToBytes(e.name||"")),i.push(2),i.push(10),i=i.concat(Bt._strToBytes(e.description||"")),i.push(10),i=i.concat([16,16,16,16,16,16]),i.push(6),i=i.concat(Bt._strToBytes("Map Difficulty  "));const a=42;if(e.difficulty>5||e.difficulty<1)i.push(a),i=i.concat(Bt._strToBytes(" ")),i.push(62),i=i.concat(Bt._strToBytes(" "+e.difficulty.toString()));else for(let l=0;l<e.difficulty;l++)i.push(a);i.push(2),i.push(0);const o=hi(i),s=r.boardSelect;if(Array.isArray(s))for(let l=0;l<s.length;l++)Bt.write(s[l],o);else Bt.write(s,o)}if(r.koopaIntro){let i=[];i=i.concat(Bt._strToBytes(`Welcome, everybody!
I am your guide,
Koopa Troopa.`)),i.push(255),i.push(11),i=i.concat(Bt._strToBytes(`Now then,
let's decide turn order.`)),i.push(255),i.push(0);const a=hi(i);Bt.write(r.koopaIntro,a)}if(r.starComments){let i=[];i=i.concat(Bt._strToBytes(`Good luck!
With enough stars, you
could be the superstar!`)),i.push(255),i.push(0);const a=hi(i);for(let o=0;o<r.starComments.length;o++)Bt.write(r.starComments[o],a)}}onChangeBoardSpaceTypesFromGameSpaceTypes(e,t){}onChangeGameSpaceTypesFromBoardSpaceTypes(e){}_extractKoopa(e,t){if(!t.koopaSpaceInst||!t.sceneIndex)return;const i=l0.getDataView(t.sceneIndex).getUint16(t.koopaSpaceInst+2);e.spaces[i]&&(e.spaces[i].subtype=yt.KOOPA)}_writeKoopa(e,t){if(!t.koopaSpaceInst||!t.sceneIndex)return;let r;for(let a=0;a<e.spaces.length;a++)if(e.spaces[a].subtype===yt.KOOPA){r=a;break}r=r===void 0?L0(e):r,l0.getDataView(t.sceneIndex).setUint16(t.koopaSpaceInst+2,r)}_extractBowser(e,t){if(!t.bowserSpaceInst||!t.sceneIndex)return;const i=l0.getDataView(t.sceneIndex).getUint16(t.bowserSpaceInst+2);e.spaces[i]&&(e.spaces[i].subtype=yt.BOWSER)}_writeBowser(e,t){if(!t.bowserSpaceInst||!t.sceneIndex)return;let r;for(let a=0;a<e.spaces.length;a++)if(e.spaces[a].subtype===yt.BOWSER){r=a;break}r=r===void 0?L0(e):r,l0.getDataView(t.sceneIndex).setUint16(t.bowserSpaceInst+2,r)}_extractGoomba(e,t){if(!t.goombaSpaceInst||!t.sceneIndex)return;const i=l0.getDataView(t.sceneIndex).getUint16(t.goombaSpaceInst+2);e.spaces[i]&&(e.spaces[i].subtype=yt.GOOMBA)}onParseBoardSelectImg(e,t){if(!t.img.boardSelectImg)return;const r=dt.get(9,t.img.boardSelectImg),i=Or.unpack(r),a=[new DataView(i.BMP1[0].parsed.src),new DataView(i.BMP1[1].parsed.src),new DataView(i.BMP1[2].parsed.src),new DataView(i.BMP1[3].parsed.src)],o=Mh(a,2,2,64*4,32);e.otherbg.boardselect=Ea(o,128,64)}async onWriteBoardSelectImg(e,t){const r=t.img.boardSelectImg;if(!r)return;const[i,a]=[128,64],o=await Ca(e.otherbg.boardselect,i,a),l=q4(o.data,2,2,i/2*4,a/2).map(f=>Q4(f,32,8)),c=dt.get(9,r),d=Or.unpack(c);for(let f=0;f<4;f++){const m=l[f][1];for(;m.colors.length<17;)m.colors.push(0);Or.replaceBMP(d,f,l[f][0],m)}const h=Or.pack(d);dt.write(9,r,h)}onParseBoardLogoImg(e,t){!t.img.pauseLogoImg||(e.otherbg.boardlogo=this._readImgFromMainFS(10,t.img.pauseLogoImg,0))}onWriteBoardLogoImg(e,t){return new Promise((r,i)=>{let a=t.img.introLogoImg;const o=t.img.pauseLogoImg;if(!a&&!o){r();return}const[s,l]=t.img.introLogoImgDimens,c=new Image,d=setTimeout(()=>i(`Failed to write logos for ${t.name}`),45e3);c.onload=()=>{if(a){const h=bc(c,s,l);Array.isArray(a)||(a=[a]);for(let f=0;f<a.length;f++){const m=a[f],g=dt.get(10,m),E=Pr([{src:h,width:s,height:l,bpp:32}],16,0,g);dt.write(10,m,E)}}if(o){const h=bc(c,200,82),f=dt.get(10,o),g=Pr([{src:h,width:200,height:82,bpp:32}],16,0,f);dt.write(10,o,g)}clearTimeout(d),r()},c.src=e.otherbg.boardlogo})}_clearOtherBoardNames(e){const t=dt.get(10,406+e);new Uint8Array(t).fill(0,44),dt.write(10,406+e,t)}getAudioMap(e){return eie(e)}getSoundEffectMap(e){return Jre()}getCharacterMap(){return{0:"",1:"<BLACK>",2:"<DEFAULT>",3:"<RED>",4:"<PURPLE>",5:"<GREEN>",6:"<BLUE>",7:"<YELLOW>",8:"<WHITE>",9:"<SEIZURE>",10:`
`,11:"\u3014",12:"\u25CB",13:"	",14:"	",16:" ",17:"{0}",18:"{1}",19:"{2}",20:"{3}",21:"{4}",22:"{5}",33:"\u3000",34:"\u3001",35:"\u3002",36:"\u3003",37:"\u3004",38:"\u3005",39:"\u3006",40:"\u3007",41:"\u3008",42:"\u3009",43:"\u3010",44:"\u3011",58:"\u3012",59:"\u3013",60:"+",61:"-",62:"x",63:"->",91:'"',92:"'",93:"(",94:")",95:"/",123:":",128:'"',129:"\xB0",130:",",131:"\xB0",133:".",192:"\u201C",193:"\u201D",194:"!",195:"?",255:"\u3015"}}},Vk={};Vk[Qe.MP2_USA]=[{upper:345798,lower:345802}];let dr;const W0={getROMOffset(){const n=bt.getDataView(),e=W0.getPatchOffsets();if(!e)return null;const t=e[0],r=n.getUint16(t.upper)<<16,i=n.getUint16(t.lower);let a=r|i;return i&32768&&(a=a-65536),wt(`AnimationFS.getROMOffset -> ${At(a)}`),a},setROMOffset(n,e){const t=new DataView(e),r=W0.getPatchOffsets();if(!r)return;let i=(n&4294901760)>>>16;const a=n&65535;a&32768&&(i+=1);for(let o=0;o<r.length;o++)t.setUint16(r[o].upper,i),t.setUint16(r[o].lower,a);wt(`AnimationFS.setROMOffset -> ${At(i<<16|a)}`)},getPatchOffsets(){return Vk[bt.getROMGame()]},get(n,e,t){return dr[n][e][t].decompressed},write(n,e,t,r){const i=fM(3,new DataView(t));dr[n]||(dr[n]=[]),dr[n][e]||(dr[n][e]={}),dr[n][e][r]={compressionType:3,decompressed:t,compressed:i}},_createOrderedTiles(n,e,t){const r=e/64,i=t/48,o=q4(n.data,r,i,64*4,48).map(l=>Ih(l,64,48)),s=[];for(let l=i-1;l>=0;l--)for(let c=0;c<r;c++)s.push(o[l*r+c]);return s},writeAnimationBackground(n,e,t,r,i,a){wt(`AnimationFS.writeAnimationBackground, set: ${n}, entry: ${e}, img is ${i}x${a}`);const o=W0._createOrderedTiles(t,i,a),s=W0._createOrderedTiles(r,i,a);W0.clearSetEntry(n,e);for(let l=0;l<s.length;l++)lM(o[l],s[l])||W0.write(n,e,s[l],l+1)},_unorderTiles(n,e,t){const r=[];for(let i=t-1;i>=0;i--)for(let a=0;a<e;a++)r.push(n[i*e+a]);return r},_readAnimationBackground(n,e,t,r,i){let a=[];for(let x=0;x<t.length;x++)dr[n][e].hasOwnProperty(x+1)?a.push(new DataView(dr[n][e][x+1].decompressed)):a.push(new DataView(t[x]));const o=64,s=48,l=r/64,c=i/48;a=W0._unorderTiles(a,l,c);const d=Mh(a,l,c,o*2,s),h=Tp(d,r,i),f=new Uint8Array(h),m=ko(r,i),g=m.createImageData(r,i);for(let x=0;x<f.byteLength;x++)g.data[x]=f[x];return m.putImageData(g,0,0),m.canvas.toDataURL()},readAnimationBackgrounds(n,e,t,r){const i=W0.getSetEntryCount(n),a=W0._createOrderedTiles(e,t,r),o=[];for(let s=0;s<i;s++)o.push(W0._readAnimationBackground(n,s,a,t,r));return o},clearCache(){dr=null},extract(){const n=W0.getROMOffset();if(n===null)return null;const e=bt.getDataView();return dr=W0._extractSets(e,n),dr},extractAsync(){return new Promise((n,e)=>{W0.extract(),n()})},_extractSets(n,e){const t=[],r=n.getUint32(e)-1;for(let i=0;i<r;i++){const a=n.getUint32(e+4+i*4);t.push(W0._extractSetEntries(n,e+a))}return t},_extractSetEntries(n,e){const t=[],r=n.getUint32(e);for(let i=0;i<r;i++){const a=n.getUint32(e+4+i*4);t.push(W0._extractTiles(n,e+a))}return t},_extractTiles(n,e){const t={},r=n.getUint32(e)-1;for(let i=0;i<r;i++){const a=n.getUint32(e+4+i*4),o=W0._readTile(n,e+a);t[o.index]={compressionType:o.compressionType,compressed:o.compressed,decompressed:o.decompressed}}return t},_readTile(n,e){const t=n.getUint32(e),r=n.getUint32(e+4),i=n.getUint32(e+8),a=n.buffer,o=e+12,s=new DataView(a,o),l=_G(r,s,i);return{index:t,compressionType:r,compressed:a.slice(o,o+l),decompressed:s_(r,s,i)}},pack(n,e=0){const t=new DataView(n,e),r=W0.getSetCount();t.setUint32(0,r+1);let i=4,a=4+(r+1)*4;for(let o=0;o<r;o++)t.setUint32(i,a),i+=4,a=W0._writeSet(o,t,a),a=_0(a,4);return t.setUint32(i,a),a},_writeSet(n,e,t){const r=W0.getSetEntryCount(n);e.setUint32(t,r);let i=t+4,a=t+4+r*4;for(let o=0;o<r;o++)e.setUint32(i,a-t),i+=4,a=W0._writeTiles(n,o,e,a),a=_0(a,4);return a},_writeTiles(n,e,t,r){const i=W0.getSetEntryTileCount(n,e);t.setUint32(r,i+1);let a=r+4,o=r+4+(i+1)*4;for(const s in dr[n][e])!dr[n][e].hasOwnProperty(s)||(t.setUint32(a,o-r),a+=4,o=W0._writeTile(n,e,s,t,o),o=_0(o,4));return t.setUint32(a,o-r),o},_writeTile(n,e,t,r,i){const a=dr[n][e][t];return r.setUint32(i,parseInt(t)),r.setUint32(i+4,3),r.setUint32(i+8,a.decompressed.byteLength),fr(r,a.compressed,i+12,0,a.compressed.byteLength),i+12+a.compressed.byteLength},getSetCount(){return dr.length},getSetEntryCount(n){return dr[n].length},setSetEntryCount(n,e){return dr[n].length=e},clearSetEntry(n,e){return dr[n][e]={}},getSetEntryTileCount(n,e){return Object.keys(dr[n][e]).length},getByteLength(){let n=0;const e=W0.getSetCount();n+=4,n+=4*(e+1);for(let t=0;t<e;t++){const r=W0.getSetEntryCount(t);n+=4,n+=4*r;for(let i=0;i<r;i++){const a=W0.getSetEntryTileCount(t,i);n+=4,n+=4*(a+1);for(const o in dr[t][i]){if(!dr[t][i].hasOwnProperty(o))continue;const s=dr[t][i][o];n+=4,n+=4,n+=4,n+=s.compressed.byteLength,n=_0(n,4)}}}return n}};async function nie(n,e,t,r){const[i,a]=e.mainfsEventFile,o=[];for(let I=0;I<n.spaces.length;I++)n.spaces[I].star&&o.push(I);const s=YC(o.length),l=Mr(yt.TOAD,n);let c=[];for(let I=0;I<o.length;I++){let q=n.spaces[o[I]],P=Number.MAX_VALUE,ee=o[I];for(let ce=0;ce<l.length;ce++){let U=l[ce],O=n.spaces[U],G=Ro(q.x,q.y,O.x,O.y);G<P&&(P=G,ee=U)}c.push(ee)}const d=Mr(yt.BANKCOIN,n);for(let I=0;I<2;I++)d.length<2&&d.push(L0(n));const h=Mr(yt.BANK,n),f=Vc(GA.id,n),m=[];f.forEach(I=>{const q=n.spaces[I];let P=Number.MAX_VALUE,ee=L0(n);for(let ce=0;ce<h.length;ce++){let U=h[ce],O=n.spaces[U],G=Ro(q.x,q.y,O.x,O.y);G<P&&(P=G,ee=U)}m.push(ee)}),h.length||h.push(L0(n));for(let I=0;I<2;I++)f.length<2&&f.push(L0(n));for(let I=0;I<2;I++)m.length<2&&m.push(L0(n));const g=Mr(yt.ITEMSHOP,n),x=Vc(l2.id,n),E=[];x.forEach(I=>{const q=n.spaces[I];let P=Number.MAX_VALUE,ee=L0(n);for(let ce=0;ce<g.length;ce++){let U=g[ce],O=n.spaces[U],G=Ro(q.x,q.y,O.x,O.y);G<P&&(P=G,ee=U)}E.push(ee)}),g.length||g.push(L0(n));for(let I=0;I<2;I++)x.length<2&&x.push(L0(n));for(let I=0;I<2;I++)E.length<2&&E.push(L0(n));const _=Mr(yt.BOO,n),v=Vc(WC.id,n),C=[];v.forEach(I=>{const q=n.spaces[I];let P=Number.MAX_VALUE,ee=L0(n);for(let ce=0;ce<_.length;ce++){let U=_[ce],O=n.spaces[U],G=Ro(q.x,q.y,O.x,O.y);G<P&&(P=G,ee=U)}C.push(ee)}),_.length||_.push(L0(n));for(let I=0;I<2;I++)v.length<2&&v.push(L0(n));for(let I=0;I<2;I++)C.length<2&&C.push(L0(n));const D=[];for(let I=0;I<n.spaces.length;I++)n.spaces[I].type===de.ARROW&&D.push(n.spaces[I].rotation||0);const V=to(Qe.MP2_USA,"AddArrowAngle"),H=f_();let R=[];const j=Math.min(H,D.length);for(let I=0;I<j;I++)R.push(`LUI A0 hi(${At(hM(D[I]))})`),R.push(`JAL ${V}`),R.push("MTC1 A0 F12");const te=PA(n),$=await oE(n,e.bgDir,te),z=await lE(n,r);return`
.org 0x80102800

.definelabel D_800C9B80,0x800C9B80
.definelabel D_800CAFD8,0x800CAFD8
.definelabel D_800CAFD9,0x800CAFD9
.definelabel D_800CC000,0x800CC000
.definelabel D_800CC001,0x800CC001
.definelabel D_800CC007,0x800CC007
.definelabel D_800CC1F0,0x800CC1F0
.definelabel D_800CC6A8,0x800CC6A8
.definelabel D_800CC6C4,0x800CC6C4
.definelabel D_800CCBDC,0x800CCBDC
.definelabel D_800CCC16,0x800CCC16
.definelabel D_800CCC18,0x800CCC18
.definelabel D_800CCD5C,0x800CCD5C
.definelabel D_800CD414,0x800CD414
.definelabel D_800D0032,0x800D0032
.definelabel D_800F6098,0x800F6098
.definelabel D_800F64B0,0x800F64B0
.definelabel D_800F64C8,0x800F64C8
.definelabel D_800F851A,0x800F851A
.definelabel D_800F8CE4,0x800F8CE4
.definelabel D_800F8D12,0x800F8D12
.definelabel D_800F8D16,0x800F8D16
.definelabel D_800F8D18,0x800F8D18
.definelabel D_800F8D1E,0x800F8D1E
.definelabel D_800F9052,0x800F9052
.definelabel D_800F920C,0x800F920C
.definelabel D_800F93A8,0x800F93A8
.definelabel D_800F93AA,0x800F93AA ; s16 board index to load
.definelabel D_800F93AE,0x800F93AE
.definelabel D_800F93B0,0x800F93B0
.definelabel D_800F93B2,0x800F93B2
.definelabel D_800F93B4,0x800F93B4
.definelabel D_800F93C0,0x800F93C0
.definelabel D_800F93C4,0x800F93C4
.definelabel D_800F93C6,0x800F93C6
.definelabel D_800FA188,0x800FA188
.definelabel D_800FA198,0x800FA198
.definelabel D_800FC734,0x800FC734
.definelabel D_800FC834,0x800FC834
.definelabel D_800FD2C0,0x800FD2C0
.definelabel D_800FD2C2,0x800FD2C2
.definelabel D_800FD2C6,0x800FD2C6
.definelabel D_800FD2D0,0x800FD2D0
.definelabel D_800FD2D2,0x800FD2D2
.definelabel D_800FD2E4,0x800FD2E4
.definelabel D_80100001,0x80100001
.definelabel D_80100009,0x80100009
.definelabel D_80100010,0x80100010
.definelabel D_80100012,0x80100012
.definelabel D_8010008C,0x8010008C
.definelabel D_80101058,0x80101058
.definelabel func_800114E8,0x800114E8
.definelabel func_800115B4,0x800115B4
.definelabel func_80017680,0x80017680
.definelabel func_80017800,0x80017800
.definelabel func_80020070,0x80020070
.definelabel func_80020324,0x80020324
.definelabel func_80026DAC,0x80026DAC
.definelabel func_80027154,0x80027154
.definelabel func_800297E8,0x800297E8
.definelabel func_80029E80,0x80029E80
.definelabel func_80029FE4,0x80029FE4
.definelabel func_8002D0A0,0x8002D0A0
.definelabel func_8002D124,0x8002D124
.definelabel func_8002D4A0,0x8002D4A0
.definelabel func_8004108C,0x8004108C
.definelabel func_80041610,0x80041610
.definelabel func_800417EC,0x800417EC
.definelabel func_800418D8,0x800418D8
.definelabel func_80041A74,0x80041A74
.definelabel func_80041AEC,0x80041AEC
.definelabel func_80041B40,0x80041B40
.definelabel func_80041B60,0x80041B60
.definelabel func_80042BE0,0x80042BE0
.definelabel func_80042D38,0x80042D38
.definelabel func_80043510,0x80043510
.definelabel func_800437F8,0x800437F8
.definelabel func_80043DAC,0x80043DAC
.definelabel func_80043F7C,0x80043F7C
.definelabel func_80044258,0x80044258
.definelabel func_800442DC,0x800442DC
.definelabel func_8004430C,0x8004430C
.definelabel func_80044494,0x80044494
.definelabel func_80044530,0x80044530
.definelabel func_800446B4,0x800446B4
.definelabel func_80044800,0x80044800
.definelabel func_80044D98,0x80044D98
.definelabel func_80045650,0x80045650
.definelabel func_8004655C,0x8004655C
.definelabel func_80046D2C,0x80046D2C
.definelabel func_80046EDC,0x80046EDC
.definelabel func_80046F98,0x80046F98
.definelabel func_80047A50,0x80047A50
.definelabel func_80047BB8,0x80047BB8
.definelabel func_80047D78,0x80047D78
.definelabel func_80047DE8,0x80047DE8
.definelabel func_80047E70,0x80047E70
.definelabel func_80048A48,0x80048A48
.definelabel func_800495A8,0x800495A8
.definelabel func_800495D8,0x800495D8
.definelabel func_80049ED4,0x80049ED4
.definelabel func_80049F90,0x80049F90
.definelabel func_8004B224,0x8004B224
.definelabel func_8004CA14,0x8004CA14
.definelabel func_8004CA34,0x8004CA34
.definelabel func_8004CC7C,0x8004CC7C
.definelabel func_8004CD70,0x8004CD70
.definelabel func_8004CDE0,0x8004CDE0
.definelabel func_8004CE80,0x8004CE80
.definelabel func_8004D5B0,0x8004D5B0
.definelabel func_8004D60C,0x8004D60C
.definelabel func_8004E484,0x8004E484
.definelabel func_80050304,0x80050304
.definelabel func_8005057C,0x8005057C
.definelabel func_8005070C,0x8005070C
.definelabel func_80050860,0x80050860
.definelabel func_800508E4,0x800508E4
.definelabel func_800509C4,0x800509C4
.definelabel func_800509FC,0x800509FC
.definelabel func_80051500,0x80051500
.definelabel func_80052F70,0x80052F70
.definelabel func_80053608,0x80053608
.definelabel func_80053620,0x80053620
.definelabel func_80053980,0x80053980
.definelabel func_80053998,0x80053998
.definelabel func_80053AA0,0x80053AA0
.definelabel func_80053F54,0x80053F54
.definelabel func_80053F7C,0x80053F7C
.definelabel func_800542B8,0x800542B8
.definelabel func_800542E8,0x800542E8
.definelabel func_80054B8C,0x80054B8C
.definelabel func_80054BB0,0x80054BB0
.definelabel func_80054BDC,0x80054BDC
.definelabel func_80054C78,0x80054C78
.definelabel func_80054D3C,0x80054D3C
.definelabel func_8005521C,0x8005521C
.definelabel func_800556F4,0x800556F4
.definelabel func_800558E8,0x800558E8
.definelabel func_800558F4,0x800558F4
.definelabel func_80055928,0x80055928
.definelabel func_80055980,0x80055980
.definelabel func_80055C88,0x80055C88
.definelabel func_80055E3C,0x80055E3C
.definelabel func_80055E60,0x80055E60
.definelabel func_80055E90,0x80055E90
.definelabel func_8005600C,0x8005600C
.definelabel func_800560A4,0x800560A4
.definelabel func_80056124,0x80056124
.definelabel func_80056144,0x80056144
.definelabel func_80056168,0x80056168
.definelabel func_80056368,0x80056368
.definelabel func_80056458,0x80056458
.definelabel func_80056524,0x80056524
.definelabel func_80056658,0x80056658
.definelabel func_8005670C,0x8005670C
.definelabel func_80056728,0x80056728
.definelabel func_80056754,0x80056754
.definelabel func_8005694C,0x8005694C
.definelabel func_80056B78,0x80056B78
.definelabel func_80056C30,0x80056C30
.definelabel func_80056D80,0x80056D80
.definelabel func_80056FD4,0x80056FD4
.definelabel func_80057150,0x80057150
.definelabel func_8005734C,0x8005734C
.definelabel func_800573AC,0x800573AC
.definelabel func_80057718,0x80057718
.definelabel func_80057DC0,0x80057DC0
.definelabel func_80059120,0x80059120
.definelabel func_80059158,0x80059158
.definelabel func_80059FD0,0x80059FD0
.definelabel func_8005A358,0x8005A358
.definelabel func_8005AB50,0x8005AB50
.definelabel func_8005AC6C,0x8005AC6C
.definelabel func_8005B338,0x8005B338
.definelabel func_8005DC30,0x8005DC30
.definelabel func_8005DC3C,0x8005DC3C
.definelabel func_8005DCA0,0x8005DCA0
.definelabel func_8005DD68,0x8005DD68
.definelabel func_8005DDEC,0x8005DDEC
.definelabel func_80060210,0x80060210
.definelabel func_800609D8,0x800609D8
.definelabel func_8006135C,0x8006135C
.definelabel func_800614B4,0x800614B4
.definelabel func_80061518,0x80061518
.definelabel func_80061584,0x80061584
.definelabel func_80062588,0x80062588
.definelabel func_80062824,0x80062824
.definelabel func_8006286C,0x8006286C
.definelabel func_800628C0,0x800628C0
.definelabel func_8006296C,0x8006296C
.definelabel func_800629AC,0x800629AC
.definelabel func_800629F0,0x800629F0
.definelabel func_80062A28,0x80062A28
.definelabel func_80062E10,0x80062E10
.definelabel func_80063178,0x80063178
.definelabel func_800632F0,0x800632F0
.definelabel func_800632FC,0x800632FC
.definelabel func_800636F8,0x800636F8
.definelabel func_80063710,0x80063710
.definelabel func_80063734,0x80063734
.definelabel func_80063C40,0x80063C40
.definelabel func_80064FF8,0x80064FF8
.definelabel func_800650BC,0x800650BC
.definelabel func_80066C34,0x80066C34
.definelabel func_80066F6C,0x80066F6C
.definelabel func_8006706C,0x8006706C
.definelabel func_800670B0,0x800670B0
.definelabel func_80067170,0x80067170
.definelabel func_800672BC,0x800672BC
.definelabel func_8006735C,0x8006735C
.definelabel func_80067558,0x80067558
.definelabel func_80067720,0x80067720
.definelabel func_80067C6C,0x80067C6C
.definelabel func_80068328,0x80068328
.definelabel func_8006836C,0x8006836C
.definelabel func_800683BC,0x800683BC
.definelabel func_80068480,0x80068480
.definelabel func_80076598,0x80076598
.definelabel func_8007695C,0x8007695C
.definelabel func_80076AFC,0x80076AFC
.definelabel func_80076B44,0x80076B44
.definelabel func_80076B70,0x80076B70
.definelabel func_80076FCC,0x80076FCC
.definelabel func_80077160,0x80077160
.definelabel func_800771EC,0x800771EC
.definelabel func_80077574,0x80077574
.definelabel func_80078EC8,0x80078EC8
.definelabel func_80078FF8,0x80078FF8
.definelabel func_80079390,0x80079390
.definelabel func_80079428,0x80079428
.definelabel func_80079464,0x80079464
.definelabel func_800794A8,0x800794A8
.definelabel func_8007959C,0x8007959C
.definelabel func_80079718,0x80079718
.definelabel func_80079798,0x80079798
.definelabel func_800797DC,0x800797DC
.definelabel func_80079848,0x80079848
.definelabel func_8007D700,0x8007D700
.definelabel func_8007D7E8,0x8007D7E8
.definelabel func_8007D838,0x8007D838
.definelabel func_8007D9E0,0x8007D9E0
.definelabel func_8007DA44,0x8007DA44
.definelabel func_8007F8B0,0x8007F8B0
.definelabel func_8007FA6C,0x8007FA6C
.definelabel func_80081AD0,0x80081AD0
.definelabel func_8008218C,0x8008218C
.definelabel func_8008225C,0x8008225C
.definelabel func_800822A8,0x800822A8
.definelabel func_80082384,0x80082384
.definelabel func_80082418,0x80082418
.definelabel func_80082488,0x80082488
.definelabel func_80082660,0x80082660
.definelabel func_80082800,0x80082800
.definelabel func_800890CC,0x800890CC
.definelabel func_80089284,0x80089284
.definelabel func_8008BB48,0x8008BB48
.definelabel func_8008CFD0,0x8008CFD0
.definelabel func_8008D07C,0x8008D07C
.definelabel func_8008D59C,0x8008D59C
.definelabel func_8008D854,0x8008D854
.definelabel func_8008DAC0,0x8008DAC0
.definelabel func_8008E2DC,0x8008E2DC
.definelabel func_8008E4D0,0x8008E4D0
.definelabel func_8008F544,0x8008F544
.definelabel func_8008F5AC,0x8008F5AC
.definelabel func_8008F618,0x8008F618
.definelabel func_8008F624,0x8008F624
.definelabel func_800A4FA0,0x800A4FA0
.definelabel func_800A5660,0x800A5660
.definelabel func_800B1870,0x800B1870
.definelabel func_800B3160,0x800B3160
.definelabel func_800B3170,0x800B3170
.definelabel func_800B31C0,0x800B31C0
.definelabel func_800B3200,0x800B3200
.definelabel func_800B3240,0x800B3240
.definelabel func_800B34B0,0x800B34B0
.definelabel func_800B39F0,0x800B39F0
.definelabel func_800B3B80,0x800B3B80
.definelabel func_800B7890,0x800B7890
.definelabel func_800B83C0,0x800B83C0

.definelabel BOARD_COUNT,6
.definelabel BANK_COUNT,${h.length}
.definelabel SHOP_COUNT,${g.length}
.definelabel STAR_COUNT,${o.length}
.definelabel BOO_COUNT,${_.length}

func_80102800:
/*  */  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   A0, hi(D_80111920)
  addiu A0, A0, lo(D_80111920)
  lui   A1, hi(D_800CD414)
  jal   func_80066F6C
   lh    A1, lo(D_800CD414)(A1)
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18
  nop
  nop

func_80102830:
  lui   V0, hi(D_800F93B2)
  addiu V0, V0, lo(D_800F93B2)
  lh    V1, 0(V0)
  sll   V1, V1, 1
  addu  V0, V0, V1
  lh    V0, 2(V0)
  sll   V0, V0, 1
  lui   AT, hi(D_80111994)
  addu  AT, AT, V0
  jr    RA
   lh    V0, lo(D_80111994)(AT)

func_8010285C:
  addiu SP, SP, -0x30
  sw    RA, 0x28(SP)
  sw    S5, 0x24(SP)
  sw    S4, 0x20(SP)
  sw    S3, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   S5, hi(D_800F93A8)
  addiu S5, S5, lo(D_800F93A8)
  move  S1, R0
  lui S4, 0x2492
  ori S4, S4, 0x4925
  lui   S3, hi(shuffle_bias)
  addiu S3, S3, lo(shuffle_bias)
  lui   S2, hi(shuffle_order)
  addiu S2, S2, lo(shuffle_order)
L801028A0:
  jal   GetRandomByte
   nop
  andi  V0, V0, 0xff
  multu V0, S4
  mfhi  A0
  subu  V1, V0, A0
  srl   V1, V1, 1
  addu  A0, A0, V1
  srl   A0, A0, 2
  sll   V1, A0, 3
  subu  V1, V1, A0
  subu  V0, V0, V1
  jal   GetRandomByte
   andi  S0, V0, 0xff
  andi  V0, V0, 0xff
  multu V0, S4
  mfhi  A0
  subu  V1, V0, A0
  srl   V1, V1, 1
  addu  A0, A0, V1
  srl   A0, A0, 2
  sll   V1, A0, 3
  subu  V1, V1, A0
  subu  V0, V0, V1
  andi  A0, V0, 0xff
  beq   S0, A0, L80102960
   sll   V1, A0, 1
  addu  A3, V1, S3
  lh    V0, 0(A3)
  slt   V0, S0, V0
  bnel  V0, R0, L80102964
   addiu S1, S1, 1
  sll   A1, S0, 1
  addu  A2, A1, S3
  lh    V0, 0(A2)
  slt   V0, A0, V0
  bnel  V0, R0, L80102964
   addiu S1, S1, 1
  addu  A0, A1, S2
  lh    A1, 0(A0)
  addu  V1, V1, S2
  lhu   V0, 0(V1)
  sh    V0, 0(A0)
  sh    A1, 0(V1)
  lh    A1, 0(A2)
  lhu   V0, 0(A3)
  sh    V0, 0(A2)
  sh    A1, 0(A3)
L80102960:
  addiu S1, S1, 1
L80102964:
  slti  V0, S1, 0x3c
  bnez  V0, L801028A0
   nop
  move  S1, R0
  lui   A0, hi(shuffle_order)
  addiu A0, A0, lo(shuffle_order)
  sll   V0, S1, 1
L80102980:
  addu  V1, V0, S5
  addu  V0, V0, A0
  lhu   V0, 0(V0)
  sh    V0, 0xc(V1)
  addiu S1, S1, 1
  slti  V0, S1, STAR_COUNT
  bnez  V0, L80102980
   sll   V0, S1, 1
  lh    V1, 0x1c(S5)
  li    V0, -1
  bne   V1, V0, L80102A20
   move  A1, R0
L801029B0:
  li    V0, 6
  subu  V0, V0, A1
  sll   V0, V0, 1
  addu  V0, V0, S5
  lhu   V0, 0xc(V0)
  sh    V0, 0x1c(S5)
  lui   V1, hi(D_80111970)
  lh    V1, lo(D_80111970)(V1)
  li    V0, -1
  beq   V1, V0, L80102A20
   move  S1, R0
  lui   A2, hi(D_80111970)
  addiu A2, A2, lo(D_80111970)
  lh    V1, 0x1c(S5)
  li    A0, -1
  sll   V0, S1, 1
L801029F0:
  addu  V0, V0, A2
  lh    V0, 0(V0)
  bnel  V1, V0, L80102A08
   addiu S1, S1, 1
  j     L801029B0
   addiu A1, A1, 1
L80102A08:
  sll   V0, S1, 1
  lui   AT, hi(D_80111970)
  addu  AT, AT, V0
  lh    V0, lo(D_80111970)(AT)
  bne   V0, A0, L801029F0
   sll   V0, S1, 1
L80102A20:
  lw    RA, 0x28(SP)
  lw    S5, 0x24(SP)
  lw    S4, 0x20(SP)
  lw    S3, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x30

func_80102A44:
  addiu SP, SP, -0x28
  sw    RA, 0x24(SP)
  sw    S0, 0x20(SP)
  lui   S0, hi(D_800F93A8)
  addiu S0, S0, lo(D_800F93A8)
  addiu A0, SP, 0x10
  jal   func_8004B224
   li    A1, 6
  lui   AT, hi(D_800F93B2)
  sh    R0, lo(D_800F93B2)(AT)
  move  A0, R0
  addiu A1, SP, 0x10
  sll   V1, A0, 1
L80102A78:
  addu  V1, V1, S0
  addu  V0, A1, A0
  lbu   V0, 0(V0)
  sh    V0, 0xc(V1)
  addiu A0, A0, 1
  slti  V0, A0, 7
  bnel  V0, R0, L80102A78
   sll   V1, A0, 1
  lhu   V0, 0x18(S0)
  sh    V0, 0x1c(S0)
  lw    RA, 0x24(SP)
  lw    S0, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x28

func_80102AB0:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   V0, hi(D_800F93B2)
  lh    V0, lo(D_800F93B2)(V0)
  sll   V1, V0, 1
  lui   AT, hi(D_800F93B4)
  addu  AT, AT, V1
  lhu   V1, lo(D_800F93B4)(AT)
  lui   AT, hi(D_800F93C4)
  sh    V1, lo(D_800F93C4)(AT)
  addiu V0, V0, 0x0001
  lui   AT, hi(D_800F93B2)
  sh    V0, lo(D_800F93B2)(AT)
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  slti  V0, V0, 7
  bnez  V0, L80102B44
   nop
  lui   S0, hi(D_800F93C0)
  lh    S0, lo(D_800F93C0)(S0)
  lui   AT, hi(D_800F93B2)
  sh    R0, lo(D_800F93B2)(AT)
  jal   func_8006836C
   li    A0, 68
  jal   func_8010285C
   nop
  lui   V1, hi(D_800F93B4)
  lh    V1, lo(D_800F93B4)(V1)
  bne   S0, V1, L80102B44
   nop
  lui   V0, hi(D_800F93C0)
  lhu   V0, lo(D_800F93C0)(V0)
  lui   AT, hi(D_800F93B4)
  sh    V0, lo(D_800F93B4)(AT)
  lui   AT, hi(D_800F93C0)
  sh    V1, lo(D_800F93C0)(AT)
L80102B44:
  lw    RA, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x20

func_80102B54:
  addiu SP, SP, -0x28
  sw    RA, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S2, hi(D_800F93A8)
  addiu S2, S2, lo(D_800F93A8)
  move  S0, R0
  lui   S1, hi(D_80111974)
  addiu S1, S1, lo(D_80111974)
  sll   V0, S0, 1
L80102B80:
  addu  V0, V0, S1
  lh    A0, 0(V0)
  jal   func_8006836C
   addiu S0, S0, 1
  slti  V0, S0, 7
  bnez  V0, L80102B80
   sll   V0, S0, 1
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  lui   S0, hi(D_80111984)
  addiu S0, S0, lo(D_80111984)
  lui   A0, hi(D_80111984)
  addu  A0, A0, V0
  lh    A0, lo(D_80111984)(A0)
  jal   func_8005521C
   li    A1, 14
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  lui   A0, hi(D_80111974)
  addu  A0, A0, V0
  jal   func_800683BC
   lh    A0, lo(D_80111974)(A0)
  lh    V1, 0x1c(S2)
  li    V0, -1
  beq   V1, V0, L80102C24
   sll   V0, V1, 1
  addu  V0, V0, S0
  lh    A0, 0(V0)
  jal   func_8005521C
   li    A1, 15
  lh    V0, 0x1c(S2)
  sll   V0, V0, 1
  addu  V0, V0, S0
  jal   func_800509C4
   lh    A0, 0(V0)
L80102C24:
  lw    RA, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

func_80102C3C:
  addiu SP, SP, -0x28
  sw    RA, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S1, hi(D_800F93A8)
  addiu S1, S1, lo(D_800F93A8)
  move  S0, R0
  lui   A1, hi(D_80111984)
  addiu A1, A1, lo(D_80111984)
  sll   A0, A0, 0x10
  sra   A0, A0, 0x10
  sll   V1, S0, 1
L80102C6C:
  addu  V0, V1, A1
  lh    V0, 0(V0)
  bnel  A0, V0, L80102D04
   addiu S0, S0, 1
  lh    V0, 0xa(S1)
  sll   V0, V0, 1
  addu  V0, V0, S1
  lh    V0, 0xc(V0)
  bne   S0, V0, L80102CAC
   nop
  lui   V0, hi(D_80111974)
  addu  V0, V0, V1
  lhu   V0, lo(D_80111974)(V0)
  sh    V0, 0x1a(S1)
  j     L80102D14
   li    V0, 1
L80102CAC:
  lh    V0, 0x1c(S1)
  beq   S0, V0, L80102D14
   li    V0, 2
  jal   func_80068328
   li    A0, 68
  bnez  V0, L80102CCC
   li    A0, 7
  lh    A0, 0xa(S1)
L80102CCC:
  blez  A0, L80102D10
   move  V1, R0
  sll   V0, V1, 1
L80102CD8:
  addu  V0, V0, S1
  lh    V0, 0xc(V0)
  bne   S0, V0, L80102CF0
   addiu V1, V1, 1
  j     L80102D14
   li    V0, 3
L80102CF0:
  slt   V0, V1, A0
  bnez  V0, L80102CD8
   sll   V0, V1, 1
  j     L80102D14
   move  V0, R0
L80102D04:
  slti  V0, S0, 7
  bnez  V0, L80102C6C
   sll   V1, S0, 1
L80102D10:
  move  V0, R0
L80102D14:
  lw    RA, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

func_80102D28:
  addiu SP, SP, -0x50
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F30, 0x48(SP)
  sdc1  F28, 0x40(SP)
  sdc1  F26, 0x38(SP)
  sdc1  F24, 0x30(SP)
  sdc1  F22, 0x28(SP)
  jal   func_8007D838
   sdc1  F20, 0x20(SP)
  lw    S0, 0x8c(V0)
  jal   func_8007959C
   li    A0, 846
  li    A0, 25
  jal   func_80043510
   move  A1, R0
  move  S1, V0
  lhu   V0, 0xa(S1)
  ori   V0, V0, 4
  sh    V0, 0xa(S1)
  jal   func_80056754
   move  A0, S1
  addiu A0, S1, 0xc
  jal   func_800B3170
   addiu A1, S0, 8
  li    AT, 0x42480000 ;50.0
  mtc1  AT, F0
  nop
  swc1  F0, 0x30(S1)
  move  A0, S1
  jal   func_80049ED4
   move  A1, R0
  move  S2, V0
  li    AT, 0x3DCC0000 ;0.099609
  ori   AT, AT, 0xcccd
  mtc1  AT, F0
  nop
  swc1  F0, 0x18(S2)
  mtc1  R0, F20
  move  S0, R0
  li    AT, 0x3F000000 ;0.500000
  mtc1  AT, F22
L80102DD8:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S1, 0x24
  jal   func_8007DA44
   add.s F20, F20, F22
  addiu S0, S0, 1
  slti  V0, S0, 6
  bnez  V0, L80102DD8
   nop
  move  S0, R0
  li    AT, 0x3ECC0000
  ori   AT, AT, 0xcccd
  mtc1  AT, F22
L80102E18:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S1, 0x24
  jal   func_8007DA44
   sub.s F20, F20, F22
  addiu S0, S0, 1
  slti  V0, S0, 3
  bnez  V0, L80102E18
   nop
  jal   func_8007D9E0
   li    A0, 30
  jal   func_8007959C
   li    A0, 812
  mtc1  R0, F22
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F30
  li    AT, 0x3D230000 ;0.039795
  ori   AT, AT, 0xd70a
  mtc1  AT, F28
  mtc1  R0, F26
  li    AT, 0x3F990000 ;1.195312
  ori   AT, AT, 0x999a
  mtc1  AT, F24
L80102E80:
  lw    V0, 0x3c(S1)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B39F0
   addiu A0, A0, 0x74
  sub.s F20, F20, F28
  c.lt.s F20, F26
  nop
  nop
  bc1t  L80102EFC
   add.s F22, F22, F30
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S1, 0x24
  lwc1  F0, 0x30(S1)
  sub.s F0, F0, F24
  jal   func_8007DA44
   swc1  F0, 0x30(S1)
  j     L80102E80
   nop
L80102EFC:
  jal   func_80049F90
   move  A0, S2
  jal   func_8004430C
   move  A0, S1
  lui   AT, hi(D_801136D0)
  sw    R0, lo(D_801136D0)(AT)
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F30, 0x48(SP)
  ldc1  F28, 0x40(SP)
  ldc1  F26, 0x38(SP)
  ldc1  F24, 0x30(SP)
  ldc1  F22, 0x28(SP)
  ldc1  F20, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x50

func_80102F4C:
  addiu SP, SP, -0x28
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F20, 0x20(SP)
  move  S1, A0
  lw    S0, 0(S1)
  li    AT, 0x40800000 ;4.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0x34(S0)
  li    AT, 0xBF190000 ;-0.597656
  ori   AT, AT, 0x999a
  mtc1  AT, F0
  nop
  swc1  F0, 0x38(S0)
  jal   func_8007D9E0
   li    A0, 3
  mtc1  R0, F2
  lwc1  F0, 0x38(S0)
  c.eq.s F0, F2
  nop
  bc1t  L80102FCC
   nop
  mtc1  R0, F20
L80102FB0:
  jal   func_8007DA44
   nop
  lwc1  F0, 0x38(S0)
  c.eq.s F0, F20
  nop
  bc1f  L80102FB0
   nop
L80102FCC:
  lw    A0, 0(S1)
  move  A1, R0
  jal   func_80044494
   li    A2, 2
  jal   func_8005B338
   move  A0, S1
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F20, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x28

; show_next_star_fn?
func_80102FFC:
  addiu SP, SP, -0x38
  sw    RA, 0x30(SP)
  sw    S3, 0x2c(SP)
  sw    S2, 0x28(SP)
  sw    S1, 0x24(SP)
  sw    S0, 0x20(SP)
  lui   S2, hi(D_800F93A8)
  addiu S2, S2, lo(D_800F93A8)
  move  S3, R0
  lui   AT, hi(D_800CCC18)
  sw    R0, lo(D_800CCC18)(AT)
  lui   V0, hi(D_800F93AA)
  lh    V0, lo(D_800F93AA)(V0)
  sll   V0, V0, 2
  lui   A0, hi(D_800CC6A8)
  addu  A0, A0, V0
  lw    A0, lo(D_800CC6A8)(A0)
  jal   func_80050304
   move  A1, R0
  move  S1, V0
  lui   V0, hi(D_800F93AA)
  lh    V0, lo(D_800F93AA)(V0)
  sll   V0, V0, 2
  lui   AT, hi(D_800CC6C4)
  addu  AT, AT, V0
  jal   func_800B83C0
   lwc1  F12, lo(D_800CC6C4)(AT)
  lw    V0, 0(S1)
  swc1  F0, 0x18(V0)
  lui   V0, hi(D_800F93AA)
  lh    V0, lo(D_800F93AA)(V0)
  sll   V0, V0, 2
  lui   AT, hi(D_800CC6C4)
  addu  AT, AT, V0
  jal   func_800B7890
   lwc1  F12, lo(D_800CC6C4)(AT)
  lw    V0, 0(S1)
  swc1  F0, 0x20(V0)
  jal   func_8005B338
   move  A0, S1
  jal   func_80079390
   li    A0, 17
  lw    A0, 0(S1)
  li    A1, 2
  lui   A3, hi(D_801119A4)
  lw    A3, lo(D_801119A4)(A3)
  jal   func_8005AB50
   li    A2, 8
  jal   func_80067558
   nop
  li    A0, 2
  jal   func_8008F544
   li    A1, 16
L801030D0:
  jal   func_8008F618
   nop
  beqz  V0, L801030F0
   nop
  jal   func_8007DA44
   nop
  j     L801030D0
   nop
L801030F0:
  jal   func_80051500
   nop
  li    AT, 0x40400000 ;3.000000
  mtc1  AT, F12
  jal   func_80053608
   nop
  jal   func_80102F4C
   move  A0, S1
  lh    V0, 0xa(S2)
  bnez  V0, L80103144
   nop
  jal   func_80068328
   li    A0, 68
  bnez  V0, L80103144
   nop
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beqz  V0, L8010315C
   li    A1, 1711
  j     L8010315C
   li    A1, 1713
L80103144:
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  sltu  V0, R0, V0
  subu V0, R0, V0
  andi  V0, V0, 0x6b1
  ori   A1, V0, 0x6b0
L8010315C:
  lh    A0, 8(S1)
  li    A2, -1
  jal   func_800890CC
   li    A3, -1
  lh    A0, 8(S1)
  jal   func_8008E2DC
   li    A1, 1
  jal   func_8007959C
   li    A0, 286
  lh    A0, 8(S1)
  jal   func_80057DC0
   nop
  li    V0, 2
  sw    V0, 0x10(SP)
  lw    A0, 0(S1)
  li    A1, -1
  move  A2, R0
  jal   func_80044530
   li    A3, 6
  jal   func_8005B338
   move  A0, S1
  lh    A0, 8(S1)
  jal   func_8008E4D0
   li    A1, 1
  lw    V0, 0(S1)
  lw    V0, 0x3c(V0)
  lw    V0, 0x40(V0)
  jal   func_8002D4A0
   lh    A0, 0(V0)
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beqz  V0, L80103204
   nop
  jal   GetRandomByte
   nop
  andi  S3, V0, 1
  andi  V0, S3, 0xff
  bnez  V0, L80103204
   nop
  lh    V0, 0x1c(S2)
  j     L80103218
   sll   V0, V0, 1
L80103204:
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
L80103218:
  lui   A0, hi(D_80111994)
  addu  A0, A0, V0
  jal   func_80054B8C
   lh    A0, lo(D_80111994)(A0)
  move  S0, V0
  jal   func_80053620
   addiu A0, S0, 8
  li    AT, 0x40600000 ;3.500000
  mtc1  AT, F12
  jal   func_80053980
   nop
  jal   func_8007D9E0
   li    A0, 5
L8010324C:
  jal   func_80053998
   nop
  beqz  V0, L8010326C
   nop
  jal   func_8007DA44
   nop
  j     L8010324C
   nop
L8010326C:
  jal   func_8007D9E0
   li    A0, 5
  lw    A0, 0(S1)
  move  A1, R0
  jal   func_80044494
   li    A2, 2
  jal   func_8005B338
   move  A0, S1
  lui   V0, hi(D_8010008C) ; TODO?
  lh    V0, lo(D_800F8D12)(V0)
  bnez  V0, L801032CC
   move  A2, R0
  lui   A0, hi(func_80102D28)
  addiu A0, A0, lo(func_80102D28)
  li    A1, 18432
  jal   InitProcess
   move  A3, R0
  lui   AT, hi(D_801136D0)
  sw    V0, lo(D_801136D0)(AT)
  sw    S0, lo(D_8010008C)(V0)
  jal   func_8007D9E0
   li    A0, 30
  j     L801032D4
   nop
L801032CC:
  lui   AT, hi(D_801136D0)
  sw    R0, lo(D_801136D0)(AT)
L801032D4:
  lh    V1, 8(S1)
  lui   A0, hi(D_800F920C)
  lw    A0, lo(D_800F920C)(A0)
  sll   V0, V1, 2
  addu  V0, V0, V1
  sll   V0, V0, 5
  subu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, A0
  li    V1, 1
  jal   func_8007DA44
   sb    V1, 0x20(V0)
  lh    A0, 8(S1)
  jal   func_8008E2DC
   li    A1, 1
  lh    A0, 8(S1)
  jal   func_80057DC0
   nop
  li    V0, 2
  sw    V0, 0x10(SP)
  lw    A0, 0(S1)
  li    A1, -1
  move  A2, R0
  jal   func_80044530
   li    A3, 6
  jal   func_8005B338
   move  A0, S1
  lh    A0, 8(S1)
  jal   func_8008E4D0
   li    A1, 1
  lw    V0, 0(S1)
  lw    V0, 0x3c(V0)
  lw    V0, 0x40(V0)
  jal   func_8002D4A0
   lh    A0, 0(V0)
  lh    V1, 0x1c(S2)
  li    V0, -1
  beq   V1, V0, L801034D0
   nop
  lui   V0, hi(D_801136D0)
  lw    V0, lo(D_801136D0)(V0)
  beqz  V0, L80103398
   nop
L80103380:
  jal   func_8007DA44
   nop
  lui   V0, hi(D_801136D0)
  lw    V0, lo(D_801136D0)(V0)
  bnez  V0, L80103380
   nop
L80103398:
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beqz  V0, L801033C8
   andi  V0, S3, 0xff
  bnez  V0, L801033C8
   nop
  lh    V0, 0xa(S2)
  sll   V0, V0, 1
  addu  V0, V0, S2
  lh    V0, 0xc(V0)
  j     L801033D0
   sll   V0, V0, 1
L801033C8:
  lh    V0, 0x1c(S2)
  sll   V0, V0, 1
L801033D0:
  lui   A0, hi(D_80111994)
  addu  A0, A0, V0
  jal   func_80054B8C
   lh    A0, lo(D_80111994)(A0)
  move  S0, V0
  jal   func_80053620
   addiu A0, S0, 8
  li    AT, 0x40600000 ;3.500000
  mtc1  AT, F12
  jal   func_80053980
   nop
  jal   func_8007D9E0
   li    A0, 5
L80103404:
  jal   func_80053998
   nop
  beqz  V0, L80103424
   nop
  jal   func_8007DA44
   nop
  j     L80103404
   nop
L80103424:
  jal   func_8007D9E0
   li    A0, 5
  lw    A0, 0(S1)
  move  A1, R0
  jal   func_80044494
   li    A2, 2
  lw    V0, 0(S1)
  lw    V0, 0x3c(V0)
  lw    V1, 0x40(V0)
  lh    V0, 2(S2)
  sll   V0, V0, 2
  lh    A0, 0(V1)
  lui   A1, hi(D_801119AC)
  addu  A1, A1, V0
  jal   func_80029FE4
   lw    A1, lo(D_801119AC)(A1)
  jal   func_8005B338
   move  A0, S1
  lw    A0, 0(S1)
  lui   A1, hi(D_801119A8)
  jal   func_8005AC6C
   lw    A1, lo(D_801119A8)(A1)
  lh    V1, 8(S1)
  lui   A0, hi(D_800F920C)
  lw    A0, lo(D_800F920C)(A0)
  sll   V0, V1, 2
  addu  V0, V0, V1
  sll   V0, V0, 5
  subu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, A0
  li    V1, 1
  jal   func_8007DA44
   sb    V1, 0x20(V0)
  lh    A0, 8(S1)
  jal   func_8008E2DC
   li    A1, 1
  lh    A0, 8(S1)
  jal   func_80057DC0
   nop
  lh    A0, 8(S1)
  jal   func_8008E4D0
   li    A1, 1
L801034D0:
  jal   func_800794A8
   li    A0, 90
  jal   func_8007D9E0
   li    A0, 30
  li    A0, 2
  jal   func_8008F5AC
   li    A1, 16
  jal   func_8007D9E0
   li    A0, 17
  li    V0, 1
  lui   AT, hi(D_800CCC18)
  jal   func_80067720
   sw    V0, lo(D_800CCC18)(AT)
  jal   func_8005057C
   move  A0, S1
  jal   func_80063178
   nop
  jal   func_80077160
   li    A0, 1
  jal   func_80077574
   nop
  jal   func_8007DA44
   nop
  lw    RA, 0x30(SP)
  lw    S3, 0x2c(SP)
  lw    S2, 0x28(SP)
  lw    S1, 0x24(SP)
  lw    S0, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x38

func_80103548:
  addiu SP, SP, -0x60
  sw    RA, 0x30(SP)
  sw    S3, 0x2c(SP)
  sw    S2, 0x28(SP)
  sw    S1, 0x24(SP)
  sw    S0, 0x20(SP)
  sdc1  F28, 0x58(SP)
  sdc1  F26, 0x50(SP)
  sdc1  F24, 0x48(SP)
  sdc1  F22, 0x40(SP)
  jal   func_8007D838
   sdc1  F20, 0x38(SP)
  lw    S0, 0x8c(V0)
  jal   func_8005DC3C
   li    A0, -1
  move  S3, V0
  lui   V0, hi(D_801119D0)
  lw    V0, lo(D_801119D0)(V0)
  bnez  V0, L8010359C
   li    A0, 846
  li    A0, 853
L8010359C:
  jal   func_8007959C
   nop
  lui   V0, hi(D_801136D4)
  lw    V0, lo(D_801136D4)(V0)
  bnez  V0, L801035B8
   li    A0, 13
  li    A0, 25
L801035B8:
  jal   func_80043510
   move  A1, R0
  move  S1, V0
  lhu   V0, 0xa(S1)
  ori   V0, V0, 4
  sh    V0, 0xa(S1)
  jal   func_80056754
   move  A0, S1
  lwc1  F2, 0x10(S0)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F0
  lw    A1, 0xc(S0)
  add.s F0, F2, F0
  mfc1  A2, F0
  lw    A3, 0x14(S0)
  jal   func_800B3160
   addiu A0, S1, 0xc
  lui   V0, hi(D_800C9B80)
  lw    V0, lo(D_800C9B80)(V0)
  lw    A1, 0xc(V0)
  lw    A2, 0x10(V0)
  lw    A3, 0x14(V0)
  jal   func_800B3160
   addiu A0, SP, 0x10
  li    AT, 0x41700000 ;15.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0x30(S1)
  move  A0, S1
  jal   func_80049ED4
   move  A1, R0
  move  S2, V0
  li    AT, 0x3DCC0000 ;0.099609
  ori AT, AT, 0xcccd
  mtc1  AT, F0
  nop
  swc1  F0, 0x18(S2)
  mtc1  R0, F20
  move  S0, R0
  li    AT, 0x3F000000 ;0.500000
  mtc1  AT, F22
L8010365C:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S1, 0x24
  jal   func_8007DA44
   add.s F20, F20, F22
  addiu S0, S0, 1
  slti  V0, S0, 6
  bnez  V0, L8010365C
   nop
  move  S0, R0
  li    AT, 0x3ECC0000 ;0.398438
  ori AT, AT, 0xcccd
  mtc1  AT, F22
L8010369C:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S1, 0x24
  jal   func_8007DA44
   sub.s F20, F20, F22
  addiu S0, S0, 1
  slti  V0, S0, 3
  bnez  V0, L8010369C
   nop
  jal   func_8007D9E0
   li    A0, 20
  jal   func_8007959C
   li    A0, 812
  mtc1  R0, F22
  lw    V0, 0x24(S3)
  lwc1  F2, 0x10(V0)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F0
  lw    A1, 0xc(V0)
  sub.s F0, F2, F0
  mfc1  A2, F0
  lw    A3, 0x14(V0)
  jal   func_800B3160
   addiu A0, SP, 0x10
  addiu A2, S1, 0xc
  move  A0, A2
  addiu A1, SP, 0x10
  jal   func_80056D80
   li    A3, 40
  move  S0, R0
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  li    AT, 0x3D4C0000 ;0.049805
  ori AT, AT, 0xcccd
  mtc1  AT, F26
  mtc1  R0, F24
L80103738:
  lw    V0, 0x3c(S1)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B39F0
   addiu A0, A0, 0x74
  sub.s F20, F20, F26
  c.lt.s F20, F24
  nop
  nop
  bc1f  L80103788
   add.s F22, F22, F28
  mov.s F20, F24
L80103788:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S1, 0x24
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0x28
  bnez  V0, L80103738
   nop
  jal   func_8004430C
   move  A0, S1
  jal   func_80049F90
   move  A0, S2
  lw    A0, 0x24(S3)
  jal   func_8005670C
   addiu A0, A0, 0x18
  lui   V0, hi(D_801136D4)
  lw    V0, lo(D_801136D4)(V0)
  bnez  V0, L801038D0
   li    A0, -1
  jal   func_80067170
   li    A1, 5
  lui   V0, hi(D_801119D0)
  lw    V0, lo(D_801119D0)(V0)
  beqz  V0, L80103808
   nop
  jal   func_80079428
   li    A0, 92
  j     L80103810
   nop
L80103808:
  jal   func_80079390
   li    A0, 92
L80103810:
  lui   A0, hi(D_800F93C6)
  addiu A0, A0, lo(D_800F93C6)
  lh    V1, 0(A0)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   V1, hi(p1_stars)
  addu  V1, V1, V0
  lhu   V1, lo(p1_stars)(V1)
  addiu V1, V1, 1
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  sh    V1, lo(p1_stars)(AT)
  lh    V1, 0(A0)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V1, V0, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  slti  V0, V0, 0x64
  bnez  V0, L8010388C
   li    A0, -1
  li    V0, 99
  lui   AT, hi(p1_stars)
  addu  AT, AT, V1
  sh    V0, lo(p1_stars)(AT)
L8010388C:
  li    A1, 6
  jal   func_8005DD68
   move  A2, R0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 245
  j     L80103928
   nop
L801038D0:
  jal   func_80067170
   li    A1, 5
  jal   func_80079428
   li    A0, 93
  li    A0, -1
  li    A1, 3
  jal   func_8005DD68
   move  A2, R0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 273
  jal   func_8007D9E0
   li    A0, 30
L80103928:
  jal   func_8007D9E0
   li    A0, 60
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x30(SP)
  lw    S3, 0x2c(SP)
  lw    S2, 0x28(SP)
  lw    S1, 0x24(SP)
  lw    S0, 0x20(SP)
  ldc1  F28, 0x58(SP)
  ldc1  F26, 0x50(SP)
  ldc1  F24, 0x48(SP)
  ldc1  F22, 0x40(SP)
  ldc1  F20, 0x38(SP)
  jr    RA
   addiu SP, SP, 0x60

func_80103968:
  addiu SP, SP, -0x20
/*  */  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S1, A0
  lui   AT, hi(D_800FC734)
  sh    R0, lo(D_800FC734)(AT)
  lui   AT, hi(D_801136D4)
  sw    R0, lo(D_801136D4)(AT)
  lui   A0, hi(func_80103548)
  addiu A0, A0, lo(func_80103548)
  li    A1, 18432
  move  A2, R0
  jal   InitProcess
   move  A3, R0
  move  S0, V0
  jal   func_8007D838
   sw    S1, 0x8c(S0)
  move  A0, V0
  jal   func_8007D700
   move  A1, S0
  jal   func_8007D7E8
   nop
  li    V0, 1
  lui   AT, hi(D_800FC734)
  sh    V0, lo(D_800FC734)(AT)
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_801039E4:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S1, A0
  lui   AT, hi(D_800FC734)
  sh    R0, lo(D_800FC734)(AT)
  li    V0, 1
  lui   AT, hi(D_801136D4)
  sw    V0, lo(D_801136D4)(AT)
  lui   A0, hi(func_80103548)
  addiu A0, A0, lo(func_80103548)
  li    A1, 18432
  move  A2, R0
  jal   InitProcess
   move  A3, R0
  move  S0, V0
  jal   func_8007D838
   sw    S1, 0x8c(S0)
  move  A0, V0
  jal   func_8007D700
   move  A1, S0
  jal   func_8007D7E8
   nop
  li    V0, 1
  lui   AT, hi(D_800FC734)
  sh    V0, lo(D_800FC734)(AT)
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

; View map?
__PP64_INTERNAL_VIEW_MAP:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  li    S0, 1
  lui   AT, hi(D_800FA198)
  sh    S0, lo(D_800FA198)(AT) ; set 1 to indicate map is being viewed?
  lui   AT, hi(D_800FC734)
  jal   func_8007D838
   sh    R0, lo(D_800FC734)(AT)
  move  A0, V0
  jal   func_80076B44
   li    A1, 128
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_controller)
  addu  A0, A0, V0
  jal   func_80067C6C
   lbu   A0, lo(p1_controller)(A0)
  jal   func_8007D838
   nop
  move  A0, V0
  jal   func_80076B70
   li    A1, 128
  lui   AT, hi(D_800FA198)
  sh    R0, lo(D_800FA198)(AT)
  lui   AT, hi(D_800FC734)
  sh    S0, lo(D_800FC734)(AT)
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80103AF4:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  li    S0, 1
  lui   AT, hi(D_800FA198)
  sh    S0, lo(D_800FA198)(AT)
  lui   AT, hi(D_800FC734)
  jal   func_8007D838
   sh    R0, lo(D_800FC734)(AT)
  move  A0, V0
  jal   func_80076B44
   li    A1, 128
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_controller)
  addu  A0, A0, V0
  jal   func_80067C6C
   lbu   A0, lo(p1_controller)(A0)
  lui   AT, hi(D_800FA198)
  sh    R0, lo(D_800FA198)(AT)
  lui   AT, hi(D_800FC734)
  sh    S0, lo(D_800FC734)(AT)
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80103B70:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   GetRandomByte
   nop
  andi  V0, V0, 0xff
  mtc1  V0, F0
  nop
  cvt.s.w F0, F0
  li    AT, 0x43800000 ;256.000000
  mtc1  AT, F2
  nop
  div.s F0, F0, F2
  li    AT, 0x42C80000 ;100.000000
  mtc1  AT, F2
  nop
  mul.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  V0, F2
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80103CF4:
  addiu SP, SP, -0x48
  sw    RA, 0x40(SP)
  sw    S5, 0x3c(SP)
  sw    S4, 0x38(SP)
  sw    S3, 0x34(SP)
  sw    S2, 0x30(SP)
  sw    S1, 0x2c(SP)
  sw    S0, 0x28(SP)
  move  S5, A0
  move  S2, R0
  lui   A1, hi(D_80113590)
  addiu A1, A1, lo(D_80113590)
  lwl   V0, 0(A1)
  lwr   V0, 3(A1)
  swl   V0, 0x20(SP)
  swr   V0, 0x23(SP)
  move  S1, R0
  lui   S4, hi(D_800F93C6)
  addiu S4, S4, lo(D_800F93C6)
  addiu S3, SP, 0x18
L80103D44:
  lh    V0, 0(S4)
  bne   S1, V0, L80103E10
   sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(D_800FD2C6)
  addu  AT, AT, V0
  lhu   V0, lo(D_800FD2C6)(AT)
  andi  V0, V0, 1
  beqz  V0, L80103DBC
   sll   S0, S1, 1
  jal   func_8011155C
   addiu S1, S1, 1
  move  S2, V0
  lh    V1, 0(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, 1024
  j     L80103E3C
   sh    V1, 0(V0)
L80103DBC:
  addu  S0, S0, S1
  sll   S0, S0, 2
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  addu  V0, SP, V0
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  lbu   A1, 0x20(V0)
  jal   func_8008D59C
   addiu S1, S1, 1
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, -1
  j     L80103E3C
   sh    V1, 0(V0)
L80103E10:
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S3
  sh    R0, 0(V0)
  addiu S1, S1, 1
L80103E3C:
  slti  V0, S1, 4
  bnez  V0, L80103D44
   nop
  beqz  S2, L80103EFC
   li    A1, 2
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_80089284
   li    A2, 2
  move  S0, R0
  addiu S1, SP, 0x18
L80103E68:
  addiu S2, S2, -1
  bnez  S2, L80103EAC
   nop
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S1
  li    V1, -32768
  sh    V1, 0(V0)
L80103EAC:
  bnez  S0, L80103ED4
   li    V0, 16
  jal   func_80057718
   nop
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  j     L80103EE4
   andi  V0, V0, 0xff
L80103ED4:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
L80103EE4:
  jal   func_8008CFD0
   sw    V0, 0x10(SP)
  bnez  S2, L80103E68
   addiu S0, S0, 1
  j     L80103F14
   move  S1, R0
L80103EFC:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  jal   func_8008D07C
   move  S1, R0
L80103F14:
  addu  V0, S5, S1
L80103F18:
  lbu   V0, 0(V0)
  bnel  V0, R0, L80103F3C
   addiu S1, S1, 1
  sll   A1, S1, 0x10
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_8008D854
   sra   A1, A1, 0x10
  addiu S1, S1, 1
L80103F3C:
  slti  V0, S1, 2
  bnez  V0, L80103F18
   addu  V0, S5, S1
  move  S1, R0
  li    S0, -1
  sll   A1, S1, 0x10
L80103F54:
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  sra   A1, A1, 0x10
  jal   func_8008BB48
   move  A2, R0
  move  S1, V0
  beq   S1, S0, L80103F88
   addu  V0, S5, S1
  lbu   V0, 0(V0)
  beqz  V0, L80103F54
   sll   A1, S1, 0x10
  j     L80103F8C
   move  V0, S1
L80103F88:
  li    V0, -1
L80103F8C:
  lw    RA, 0x40(SP)
  lw    S5, 0x3c(SP)
  lw    S4, 0x38(SP)
  lw    S3, 0x34(SP)
  lw    S2, 0x30(SP)
  lw    S1, 0x2c(SP)
  lw    S0, 0x28(SP)
  jr    RA
   addiu SP, SP, 0x48

__PP64_INTERNAL_RAND_MESSAGE_CHOICE:
func_80103FB0:
  addiu SP, SP, -0x40
  sw    RA, 0x38(SP)
  sw    S3, 0x34(SP)
  sw    S2, 0x30(SP)
  sw    S1, 0x2c(SP)
  sw    S0, 0x28(SP)
  move  S2, R0
  lui   A1, hi(D_80113590)
  addiu A1, A1, lo(D_80113590)
  lwl   V0, 0(A1)
  lwr   V0, 3(A1)
  swl   V0, 0x20(SP)
  swr   V0, 0x23(SP)
  move  S1, R0
  addiu S3, SP, 0x18
L80103FEC:
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  bne   S1, V0, L801040A4
   sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   S0, V0, 2
  lui   V0, hi(D_800FD2C6)
  addu  V0, V0, S0
  lhu   V0, lo(D_800FD2C6)(V0)
  andi  V0, V0, 1
  beql  V0, R0, L80104050
   sll   S0, S1, 1
  jal   func_801118D8
   addiu S1, S1, 1
  move  S2, V0
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, 1024
  j     L801040D0
   sh    V1, 0(V0)
L80104050:
  addu  S0, S0, S1
  sll   S0, S0, 2
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  addu  V0, SP, V0
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  lbu   A1, 0x20(V0)
  jal   func_8008D59C
   addiu S1, S1, 1
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, -1
  j     L801040D0
   sh    V1, 0(V0)
L801040A4:
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S3
  sh    R0, 0(V0)
  addiu S1, S1, 1
L801040D0:
  slti  V0, S1, 4
  bnez  V0, L80103FEC
   nop
  beqz  S2, L80104190
   li    A1, 2
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_80089284
   li    A2, 2
  move  S0, R0
  addiu S1, SP, 0x18
L801040FC:
  addiu S2, S2, -1
  bnez  S2, L80104140
   nop
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S1
  li    V1, -32768
  sh    V1, 0(V0)
L80104140:
  bnez  S0, L80104168
   li    V0, 16
  jal   func_80057718
   nop
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  j     L80104178
   andi  V0, V0, 0xff
L80104168:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
L80104178:
  jal   func_8008CFD0
   sw    V0, 0x10(SP)
  bnez  S2, L801040FC
   addiu S0, S0, 1
  j     L801041A4
   nop
L80104190:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  jal   func_8008D07C
   lh    A3, 0x1e(SP)
L801041A4:
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  move  A1, R0
  jal   func_8008BB48
   li    A2, 1
  lw    RA, 0x38(SP)
  lw    S3, 0x34(SP)
  lw    S2, 0x30(SP)
  lw    S1, 0x2c(SP)
  lw    S0, 0x28(SP)
  jr    RA
   addiu SP, SP, 0x40

func_801041D4:
  addiu SP, SP, -0x40
  sw    RA, 0x38(SP)
  sw    S3, 0x34(SP)
  sw    S2, 0x30(SP)
  sw    S1, 0x2c(SP)
  sw    S0, 0x28(SP)
  move  S3, R0
  lui   A1, hi(D_80113590)
  addiu A1, A1, lo(D_80113590)
  lwl   V0, 0(A1)
  lwr   V0, 3(A1)
  swl   V0, 0x20(SP)
  swr   V0, 0x23(SP)
  move  S1, R0
  addiu S2, SP, 0x18
L80104210:
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  bne   S1, V0, L801042C0
   sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V1, V0, 2
  lui   V0, hi(D_800FD2C6)
  addu  V0, V0, V1
  lhu   V0, lo(D_800FD2C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L8010426C
   sll   S0, S1, 1
  li    S3, 1
  lui   V0, hi(p1_controller)
  addu  V0, V0, V1
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S2
  li    V1, -32768
  j     L801042E8
   sh    V1, 0(V0)
L8010426C:
  addu  S0, S0, S1
  sll   S0, S0, 2
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  addu  V0, SP, V0
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  lbu   A1, 0x20(V0)
  jal   func_8008D59C
   addiu S1, S1, 1
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S2
  li    V1, -1
  j     L801042EC
   sh    V1, 0(V0)
L801042C0:
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S2
  sh    R0, 0(V0)
L801042E8:
  addiu S1, S1, 1
L801042EC:
  slti  V0, S1, 4
  bnez  V0, L80104210
   nop
  beqz  S3, L8010433C
   li    A1, 2
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_80089284
   li    A2, 2
  jal   func_80057718
   nop
  andi  V0, V0, 0xff
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  jal   func_8008CFD0
   sw    V0, 0x10(SP)
  j     L80104350
   nop
L8010433C:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  jal   func_8008D07C
   lh    A3, 0x1e(SP)
L80104350:
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  move  A1, R0
  jal   func_8008BB48
   li    A2, 1
  lw    RA, 0x38(SP)
  lw    S3, 0x34(SP)
  lw    S2, 0x30(SP)
  lw    S1, 0x2c(SP)
  lw    S0, 0x28(SP)
  jr    RA
   addiu SP, SP, 0x40

func_80104380:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  V1, R0
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
L8010439C:
  beq   V1, A0, L801043C8
   sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  bnez  V0, L801043D8
   li    V0, 4
L801043C8:
  addiu V1, V1, 1
  slti  V0, V1, 4
  bnez  V0, L8010439C
   li    V0, 4
L801043D8:
  beq   V1, V0, L80104534
   nop
  lui   A0, hi(D_800F93C6)
  addiu A0, A0, lo(D_800F93C6)
  lh    V0, 0(A0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0x32
  bnez  V0, L80104534
   nop
  lh    V1, -0x18(A0)
  lh    V0, -0x16(A0)
  beq   V1, V0, L801045A4
   li    V0, 1
  lui   V0, hi(D_800F93B0)
  lh    V0, lo(D_800F93B0)(V0)
  slti  V0, V0, 0xa
  beqz  V0, L80104444
   nop
  j     L8010445C
   move  S1, R0
L80104444:
  lui   V0, hi(D_800F93B0)
  lh    V0, lo(D_800F93B0)(V0)
  slti  V0, V0, 0x1e
  beqz  V0, L8010445C
   li    S1, 2
  li    S1, 1
L8010445C:
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0x3d
  bnez  V0, L80104500
   move  S0, R0
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0x47
  bnez  V0, L80104500
   li    S0, 1
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0x65
  xori  V0, V0, 1
  subu V0, R0, V0
  andi  V0, V0, 3
  ori   S0, V0, 2
L80104500:
  jal   func_80103B70
   nop
  lui   A0, hi(D_801119D4)
  addiu A0, A0, lo(D_801119D4)
  sll   V1, S1, 2
  addu  V1, V1, A0
  addu  V1, V1, S0
  lbu   V1, 0(V1)
  slt   V0, V0, V1
  beqz  V0, L80104548
   li    V0, 1
  lui   AT, hi(D_80113710)
  sw    V0, lo(D_80113710)(AT)
L80104534:
  lui   V1, hi(D_80113710)
  lw    V1, lo(D_80113710)(V1)
  li    V0, 1
  beq   V1, V0, L801045AC
   nop
L80104548:
  move  V1, R0
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
L80104554:
  beq   V1, A0, L80104580
   sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  bnez  V0, L80104590
   li    V0, 4
L80104580:
  addiu V1, V1, 1
  slti  V0, V1, 4
  bnez  V0, L80104554
   li    V0, 4
L80104590:
  beq   V1, V0, L801045A4
   li    V0, 2
  lui   AT, hi(D_80113710)
  j     L801045AC
   sw    R0, lo(D_80113710)(AT)
L801045A4:
  lui   AT, hi(D_80113710)
  sw    V0, lo(D_80113710)(AT)
L801045AC:
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_801045C0:
  addiu SP, SP, -0x38
  sw    RA, 0x34(SP)
  sw    S4, 0x30(SP)
  sw    S3, 0x2c(SP)
  sw    S2, 0x28(SP)
  sw    S1, 0x24(SP)
  sw    S0, 0x20(SP)
  lui   A1, hi(D_80113594)
  addiu A1, A1, lo(D_80113594)
  lw    V0, 0(A1)
  lw    V1, 4(A1)
  lw    A0, 8(A1)
  sw    V0, 0x10(SP)
  sw    V1, 0x14(SP)
  sw    A0, 0x18(SP)
  lw    V0, 0xc(A1)
  sw    V0, 0x1c(SP)
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  lui   V1, hi(D_80113700)
  lw    V1, lo(D_80113700)(V1)
  beq   V0, V1, L80104644
   sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A2, hi(p1_coins)
  addu  A2, A2, V0
  lh    A2, lo(p1_coins)(A2)
  li    S1, 1
  j     L80104678
   sw    S1, 0x10(SP)
L80104644:
  lui   V0, hi(D_80113704)
  lw    V0, lo(D_80113704)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   A2, hi(p1_coins)
  addu  A2, A2, V1
  lh    A2, lo(p1_coins)(A2)
  li    S1, 2
  li    V0, 1
  sw    V0, 0x14(SP)
L80104678:
  slti  V0, S1, 4
  beqz  V0, L801046F8
   li    S2, 4
  lui   T2, hi(D_800F93C6)
  addiu T2, T2, lo(D_800F93C6)
  lui   T1, hi(D_80113700)
  addiu T1, T1, lo(D_80113700)
  addiu A3, SP, 0x10
  li    T0, 1
L8010469C:
  lh    V1, 0(T2)
  sll   A1, S1, 2
  addu  V0, A1, T1
  lw    A0, 0(V0)
  beq   V1, A0, L801046E8
   sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  addiu V0, V0, 5
  slt   V0, V0, A2
  bnel  V0, R0, L801046EC
   addiu S1, S1, 1
  addu  V0, A1, A3
  sw    T0, 0(V0)
L801046E8:
  addiu S1, S1, 1
L801046EC:
  slti  V0, S1, 4
  bnez  V0, L8010469C
   li    S2, 4
L801046F8:
  move  S1, R0
  addiu S3, SP, 0x10
  lui   S4, hi(D_80113700)
  addiu S4, S4, lo(D_80113700)
  sll   A0, S1, 2
L8010470C:
  addu  V0, A0, S3
  lw    V0, 0(V0)
  beqz  V0, L80104744
   addu  S0, A0, S4
  lw    A0, 0(S0)
  jal   func_80059FD0
   nop
  slt   V0, V0, S2
  beql  V0, R0, L80104748
   addiu S1, S1, 1
  lw    A0, 0(S0)
  jal   func_80059FD0
   nop
  move  S2, V0
L80104744:
  addiu S1, S1, 1
L80104748:
  slti  V0, S1, 4
  bnez  V0, L8010470C
   sll   A0, S1, 2
  move  V0, S2
  lw    RA, 0x34(SP)
  lw    S4, 0x30(SP)
  lw    S3, 0x2c(SP)
  lw    S2, 0x28(SP)
  lw    S1, 0x24(SP)
  lw    S0, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x38

func_80104778:
  addiu SP, SP, -0x30
  sw    RA, 0x28(SP)
  sw    S1, 0x24(SP)
  jal   func_80103B70
/*  */   sw    S0, 0x20(SP)
  lui   S0, hi(D_80113710)
  lw    S0, lo(D_80113710)(S0)
  beqz  S0, L80104AD4
   move  S1, V0
  li    V0, 1
  bne   S0, V0, L80104F68
   nop
  lui   A0, hi(D_800F93AE)
  addiu A0, A0, lo(D_800F93AE)
  lh    V1, 0(A0)
  lh    V0, 2(A0)
  addiu V0, V0, 5
  slt   V1, V1, V0
  beqz  V1, L80104948
   nop
  jal   func_80059FD0
   lh    A0, 0x18(A0)
  move  V1, V0
  beq   V1, S0, L80104880
   slti  V0, V1, 2
  beql  V0, R0, L801047F4
   li    V0, 2
  beqz  V1, L8010480C
   slti  V0, S1, 0x5f
  j     L80104F68
   nop
L801047F4:
  beq   V1, V0, L801048C4
   li    V0, 3
  beq   V1, V0, L80104908
   slti  V0, S1, 0x5f
  j     L80104F68
   nop
L8010480C:
  bnez  V0, L80104DD8
   li    V0, 1
  lui   V0, hi(D_801136F8)
  lw    V0, lo(D_801136F8)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  slti  V0, V0, 2
  beqz  V0, L80104DD8
   li    V0, 1
  lui   V0, hi(D_801136F8)
  lw    V0, lo(D_801136F8)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104A44
   li    V0, 2
  j     L80104DD8
   li    V0, 1
L80104880:
  slti  V0, S1, 0x5f
  bnez  V0, L80104EF4
   nop
  lui   V0, hi(D_801136F8)
  lw    V0, lo(D_801136F8)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104A44
   li    V0, 2
  j     L80104EF4
   nop
L801048C4:
  slti  V0, S1, 0x5f
  bnez  V0, L80104EF4
   nop
  lui   V0, hi(D_801136F4)
  lw    V0, lo(D_801136F4)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104DD8
   li    V0, 1
  j     L80104EF4
   nop
L80104908:
  bnez  V0, L80104EF4
   nop
  lui   V0, hi(D_801136F4)
  lw    V0, lo(D_801136F4)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104DD8
   li    V0, 1
  j     L80104EF4
   nop
L80104948:
  lui   A0, hi(D_800F93C6)
  jal   func_80059FD0
   lh    A0, lo(D_800F93C6)(A0)
  move  V1, V0
  li    V0, 1
  beq   V1, V0, L80104A08
   slti  V0, V1, 2
  beql  V0, R0, L8010497C
   li    V0, 2
  beqz  V1, L80104994
   slti  V0, S1, 0x50
  j     L80104F68
   nop
L8010497C:
  beq   V1, V0, L80104A50
   li    V0, 3
  beq   V1, V0, L80104A94
   slti  V0, S1, 0x5f
  j     L80104F68
   nop
L80104994:
  bnez  V0, L80104DD8
   li    V0, 1
  lui   V0, hi(D_801136F8)
  lw    V0, lo(D_801136F8)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  slti  V0, V0, 2
  beqz  V0, L80104DD8
   li    V0, 1
  lui   V0, hi(D_801136F8)
  lw    V0, lo(D_801136F8)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104A44
   li    V0, 2
  j     L80104DD8
   li    V0, 1
L80104A08:
  slti  V0, S1, 0x5a
  bnez  V0, L80104EF4
   nop
  lui   V0, hi(D_801136F8)
  lw    V0, lo(D_801136F8)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  beqz  V0, L80104EF4
   li    V0, 2
L80104A44:
  lui   AT, hi(D_80113718)
  j     L80104F68
   sw    V0, lo(D_80113718)(AT)
L80104A50:
  slti  V0, S1, 0x5a
  bnez  V0, L80104EF4
   nop
  lui   V0, hi(D_801136F4)
  lw    V0, lo(D_801136F4)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104DD8
   li    V0, 1
  j     L80104EF4
   nop
L80104A94:
  bnez  V0, L80104EF4
   nop
  lui   V0, hi(D_801136F4)
  lw    V0, lo(D_801136F4)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  bnez  V0, L80104DD8
   li    V0, 1
  j     L80104EF4
   nop
L80104AD4:
  move  V1, R0
  move  S0, R0
  addiu A0, SP, 0x10
  sll   V0, V1, 2
L80104AE4:
  addu  V0, V0, A0
  sw    R0, 0(V0)
  addiu V1, V1, 1
  slti  V0, V1, 4
  bnel  V0, R0, L80104AE4
   sll   V0, V1, 2
  beqz  S0, L80104B50
   nop
  lui   V0, hi(D_800F93AE)
  addiu V0, V0, lo(D_800F93AE)
  lh    V1, 0(V0)
  lh    V0, 2(V0)
  beq   V1, V0, L80104B50
   addiu V0, V0, 5
  slt   V0, V1, V0
  beqz  V0, L80104B3C
   nop
  jal   func_80103B70
   nop
  slti  V0, V0, 0x50
  bnez  V0, L80104B50
   nop
L80104B3C:
  jal   func_80103B70
   nop
  slti  V0, V0, 0x28
  beqz  V0, L80104F20
   move  V1, R0
L80104B50:
  lui   A0, hi(D_800F93AE)
  addiu A0, A0, lo(D_800F93AE)
  lh    V1, 0(A0)
  lh    V0, 2(A0)
  addiu V0, V0, 5
  slt   V1, V1, V0
  beqz  V1, L80104D30
   nop
  jal   func_80059FD0
   lh    A0, 0x18(A0)
  bnez  V0, L80104C18
   nop
  lui   V0, hi(D_801136F4)
  lw    V0, lo(D_801136F4)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  beqz  V0, L80104F00
   nop
  lui   A0, hi(D_801136F0)
  addiu A0, A0, lo(D_801136F0)
  lw    V0, 0(A0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lw    A0, 4(A0)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V1
  lh    V1, lo(p1_stars)(AT)
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  beq   V1, V0, L80104DD4
   slti  V0, S1, 0x55
  bnez  V0, L80104DD8
   li    V0, 1
  j     L80104F00
   nop
L80104C18:
  lui   V0, hi(D_801136F0)
  lw    V0, lo(D_801136F0)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  beqz  V0, L80104F00
   nop
  lui   A1, hi(D_801136F0)
  addiu A1, A1, lo(D_801136F0)
  lw    V1, 0(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_stars)
  addu  A0, A0, V0
  lh    A0, lo(p1_stars)(A0)
  addiu A0, A0, -1
  lw    V1, 4(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  slt   V0, V0, A0
  bnez  V0, L80104CB8
   slti  V0, S1, 0x50
  beqz  V0, L80104F00
   nop
  j     L80104EF4
   nop
L80104CB8:
  lw    V1, 0(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_stars)
  addu  A0, A0, V0
  lh    A0, lo(p1_stars)(A0)
  addiu A0, A0, -2
  lw    V1, 4(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  bne   A0, V0, L80104D20
   slti  V0, S1, 0x5f
  slti  V0, S1, 0x55
  beqz  V0, L80104F00
   nop
  j     L80104EF4
   nop
L80104D20:
  beqz  V0, L80104F00
   nop
  j     L80104EF4
   nop
L80104D30:
  lui   A0, hi(D_800F93C6)
  jal   func_80059FD0
   lh    A0, lo(D_800F93C6)(A0)
  bnez  V0, L80104DE4
   nop
  lui   V0, hi(D_801136F4)
  lw    V0, lo(D_801136F4)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  beqz  V0, L80104F00
   nop
  lui   A0, hi(D_801136F0)
  addiu A0, A0, lo(D_801136F0)
  lw    V0, 0(A0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lw    A0, 4(A0)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V1
  lh    V1, lo(p1_stars)(AT)
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  beq   V1, V0, L80104DD4
   slti  V0, S1, 0x23
  beqz  V0, L80104F00
   nop
L80104DD4:
  li    V0, 1
L80104DD8:
  lui   AT, hi(D_80113718)
  j     L80104F68
   sw    V0, lo(D_80113718)(AT)
L80104DE4:
  lui   V0, hi(D_801136F0)
  lw    V0, lo(D_801136F0)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  beqz  V0, L80104F00
   nop
  lui   A1, hi(D_801136F0)
  addiu A1, A1, lo(D_801136F0)
  lw    V1, 0(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_stars)
  addu  A0, A0, V0
  lh    A0, lo(p1_stars)(A0)
  addiu A0, A0, -1
  lw    V1, 4(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  slt   V0, V0, A0
  bnez  V0, L80104E84
   slti  V0, S1, 0x3c
  beqz  V0, L80104F00
   nop
  j     L80104EF4
   nop
L80104E84:
  lw    V1, 0(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_stars)
  addu  A0, A0, V0
  lh    A0, lo(p1_stars)(A0)
  addiu A0, A0, -2
  lw    V1, 4(A1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  bne   A0, V0, L80104EEC
   slti  V0, S1, 0x50
  slti  V0, S1, 0x4b
  beqz  V0, L80104F00
   nop
  j     L80104EF4
   nop
L80104EEC:
  beqz  V0, L80104F00
   nop
L80104EF4:
  lui   AT, hi(D_80113718)
  j     L80104F68
   sw    R0, lo(D_80113718)(AT)
L80104F00:
  jal   func_801045C0
   nop
  lui   AT, hi(D_80113718)
  j     L80104F68
   sw    V0, lo(D_80113718)(AT)
L80104F14:
  lui   AT, hi(D_80113718)
  j     L80104F68
   sw    V1, lo(D_80113718)(AT)
L80104F20:
  lui   A1, hi(D_801136F0)
  addiu A1, A1, lo(D_801136F0)
  addiu A0, SP, 0x10
  sll   V0, V1, 2
L80104F30:
  addu  V0, V0, A1
  lw    V0, 0(V0)
  sll   V0, V0, 2
  addu  V0, V0, A0
  lw    V0, 0(V0)
  beql  V0, R0, L80104F5C
   addiu V1, V1, 1
  addiu S0, S0, -1
  beqz  S0, L80104F14
   nop
  addiu V1, V1, 1
L80104F5C:
  slti  V0, V1, 4
  bnez  V0, L80104F30
   sll   V0, V1, 2
L80104F68:
  lw    RA, 0x28(SP)
  lw    S1, 0x24(SP)
  lw    S0, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x30

func_80104F7C:
  addiu SP, SP, -0x48
  sw    RA, 0x44(SP)
  sw    S4, 0x40(SP)
  sw    S3, 0x3c(SP)
  sw    S2, 0x38(SP)
  sw    S1, 0x34(SP)
  sw    S0, 0x30(SP)
  move  S0, R0
  addiu V1, SP, 0x10
  sll   V0, S0, 2
L80104FA4:
  addu  V0, V0, V1
  sw    R0, 0(V0)
  sw    R0, 0x10(V0)
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L80104FA4
   sll   V0, S0, 2
  move  S0, R0
  addiu S2, SP, 0x10
L80104FC8:
  jal   func_80059FD0
   move  A0, S0
  sll   V0, V0, 2
  addu  V0, V0, S2
  lw    V1, 0(V0)
  addiu V1, V1, 1
  sw    V1, 0(V0)
  move  S1, R0
  move  A0, R0
  sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   A1, V0, 2
L80105000:
  beq   S0, A0, L80105038
   sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   V1, hi(p1_coins)
  addu  V1, V1, A1
  lh    V1, lo(p1_coins)(V1)
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V1, V1, V0
  addu  S1, S1, V1
L80105038:
  addiu A0, A0, 1
  slti  V0, A0, 4
  bnez  V0, L80105000
   sll   V0, S1, 2
  addu  V0, V0, S2
  lw    V1, 0x10(V0)
  addiu V1, V1, 1
  sw    V1, 0x10(V0)
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L80104FC8
   li    A0, -1
  move  S0, R0
  lui   A2, hi(D_801136F0)
  addiu A2, A2, lo(D_801136F0)
  lui   A1, hi(D_80113700)
  addiu A1, A1, lo(D_80113700)
  sll   V0, S0, 2
L80105080:
  addu  V1, V0, A2
  sw    A0, 0(V1)
  addu  V0, V0, A1
  sw    A0, 0(V0)
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L80105080
   sll   V0, S0, 2
  move  S0, R0
  lui   S4, hi(D_801136F0)
  addiu S4, S4, lo(D_801136F0)
  li    S2, -1
  lui   S3, hi(D_80113700)
  addiu S3, S3, lo(D_80113700)
L801050B8:
  jal   func_80059FD0
   move  A0, S0
  move  A0, V0
L801050C4:
  sll   V0, A0, 2
  addu  V0, V0, S4
  lw    V0, 0(V0)
  beq   V0, S2, L801050E0
   sll   V0, A0, 2
  j     L801050C4
   addiu A0, A0, 1
L801050E0:
  addu  V0, V0, S4
  sw    S0, 0(V0)
  move  S1, R0
  move  A0, R0
  sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   A1, V0, 2
L80105104:
  beq   S0, A0, L8010513C
   sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   V1, hi(p1_coins)
  addu  V1, V1, A1
  lh    V1, lo(p1_coins)(V1)
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V1, V1, V0
  addu  S1, S1, V1
L8010513C:
  addiu A0, A0, 1
  slti  V0, A0, 4
  bnez  V0, L80105104
   nop
L8010514C:
  sll   V0, S1, 2
  addu  V0, V0, S3
  lw    V0, 0(V0)
  beq   V0, S2, L80105168
   sll   V0, S1, 2
  j     L8010514C
   addiu S1, S1, 1
L80105168:
  addu  V0, V0, S3
  sw    S0, 0(V0)
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L801050B8
   nop
  li    S0, -1
  lui   AT, hi(D_80113718)
  sw    S0, lo(D_80113718)(AT)
  lui   AT, hi(D_80113714)
  sw    S0, lo(D_80113714)(AT)
  lui   AT, hi(D_80113710)
  jal   func_80104380
   sw    S0, lo(D_80113710)(AT)
  lui   V0, hi(D_80113718)
  lw    V0, lo(D_80113718)(V0)
  bne   V0, S0, L801051C4
   move  A0, V0
  jal   func_80104778
   nop
  lui   V0, hi(D_80113718)
  lw    V0, lo(D_80113718)(V0)
  move  A0, V0
L801051C4:
  sll   V0, V0, 2
  addiu V1, SP, 0x10
  addu  V0, V0, V1
  lw    V0, 0(V0)
  bnez  V0, L80105200
   move  A1, V1
  addiu V0, A0, -1
L801051E0:
  lui   AT, hi(D_80113718)
  sw    V0, lo(D_80113718)(AT)
  move  A0, V0
  sll   V0, V0, 2
  addu  V0, V0, A1
  lw    V0, 0(V0)
  beqz  V0, L801051E0
   addiu V0, A0, -1
L80105200:
  lui   A0, hi(D_800F93C6)
  jal   func_80059FD0
   lh    A0, lo(D_800F93C6)(A0)
  move  V1, V0
  lui   V0, hi(D_80113718)
  lw    V0, lo(D_80113718)(V0)
  bne   V1, V0, L80105234
   sll   V0, V1, 2
  addiu V1, SP, 0x10
  addu  V0, V0, V1
  lw    V1, 0(V0)
  addiu V1, V1, -1
  sw    V1, 0(V0)
L80105234:
  jal   GetRandomByte
   move  S0, R0
  andi  S1, V0, 0xff
  lui   V0, hi(D_80113718)
  lw    V0, lo(D_80113718)(V0)
  sll   V0, V0, 2
  addu  V0, SP, V0
  lw    V0, 0x10(V0)
  div   S1, V0
  bnez  V0, L80105264
   nop
  .word 0x0007000D ; break 7
L80105264:
  li    AT, -1
  bne   V0, AT, L8010527C
   lui   AT, 0x8000
  bne   S1, AT, L8010527C
   nop
  .word 0x0006000D ; break 6
L8010527C:
  mfhi  S1
L80105280:
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  beql  S0, V0, L801052C0
   addiu S0, S0, 1
  jal   func_80059FD0
   move  A0, S0
  lui   V1, hi(D_80113718)
  lw    V1, lo(D_80113718)(V1)
  bnel  V1, V0, L801052C0
   addiu S0, S0, 1
  bnel  S1, R0, L801052BC
   addiu S1, S1, -1
  lui   AT, hi(D_80113714)
  j     L801052CC
   sw    S0, lo(D_80113714)(AT)
L801052BC:
  addiu S0, S0, 1
L801052C0:
  slti  V0, S0, 4
  bnez  V0, L80105280
   nop
L801052CC:
  lui   V0, hi(D_80113710)
  lw    V0, lo(D_80113710)(V0)
  bnez  V0, L8010535C
   nop
  lui   V0, hi(D_80113714)
  lw    V0, lo(D_80113714)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  bnez  V0, L8010535C
   move  S0, R0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
L80105314:
  beq   S0, V1, L8010534C
   sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  beql  V0, R0, L80105350
   addiu S0, S0, 1
  lui   AT, hi(D_80113714)
  j     L8010535C
   sw    S0, lo(D_80113714)(AT)
L8010534C:
  addiu S0, S0, 1
L80105350:
  slti  V0, S0, 4
  bnez  V0, L80105314
   nop
L8010535C:
  lw    RA, 0x44(SP)
  lw    S4, 0x40(SP)
  lw    S3, 0x3c(SP)
  lw    S2, 0x38(SP)
  lw    S1, 0x34(SP)
  lw    S0, 0x30(SP)
  jr    RA
   addiu SP, SP, 0x48

func_8010537C:
  addiu SP, SP, -0x48
  sw    RA, 0x40(SP)
  sw    S5, 0x3c(SP)
  sw    S4, 0x38(SP)
  sw    S3, 0x34(SP)
  sw    S2, 0x30(SP)
  sw    S1, 0x2c(SP)
  sw    S0, 0x28(SP)
  move  S5, A0
  move  S2, R0
  lui   A1, hi(D_80113590)
  addiu A1, A1, lo(D_80113590)
  lwl   V0, 0(A1)
  lwr   V0, 3(A1)
  swl   V0, 0x20(SP)
  swr   V0, 0x23(SP)
  move  S1, R0
  lui   S4, hi(D_800F93C6)
  addiu S4, S4, lo(D_800F93C6)
  addiu S3, SP, 0x18
L801053CC:
  lh    V0, 0(S4)
  bne   S1, V0, L801054A0
   sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(D_800FD2C6)
  addu  AT, AT, V0
  lhu   V0, lo(D_800FD2C6)(AT)
  andi  V0, V0, 1
  beqz  V0, L8010544C
   sll   S0, S1, 1
  jal   func_80104F7C
   addiu S1, S1, 1
  lui   V0, hi(D_80113710)
  lw    V0, lo(D_80113710)(V0)
  addiu S2, V0, 1
  lh    V1, 0(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, 1024
  j     L801054CC
   sh    V1, 0(V0)
L8010544C:
  addu  S0, S0, S1
  sll   S0, S0, 2
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  addu  V0, SP, V0
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  lbu   A1, 0x20(V0)
  jal   func_8008D59C
   addiu S1, S1, 1
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, -1
  j     L801054CC
   sh    V1, 0(V0)
L801054A0:
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S3
  sh    R0, 0(V0)
  addiu S1, S1, 1
L801054CC:
  slti  V0, S1, 4
  bnez  V0, L801053CC
   nop
  beqz  S2, L8010558C
   li    A1, 2
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_80089284
   li    A2, 2
  move  S0, R0
  addiu S1, SP, 0x18
L801054F8:
  addiu S2, S2, -1
  bnez  S2, L8010553C
   nop
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S1
  li    V1, -32768
  sh    V1, 0(V0)
L8010553C:
  bnez  S0, L80105564
   li    V0, 16
  jal   func_80057718
   nop
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  j     L80105574
   andi  V0, V0, 0xff
L80105564:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
L80105574:
  jal   func_8008CFD0
   sw    V0, 0x10(SP)
  bnez  S2, L801054F8
   addiu S0, S0, 1
  j     L801055A4
   move  S1, R0
L8010558C:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  jal   func_8008D07C
   move  S1, R0
L801055A4:
  addu  V0, S5, S1
L801055A8:
  lbu   V0, 0(V0)
  bnel  V0, R0, L801055CC
   addiu S1, S1, 1
  sll   A1, S1, 0x10
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_8008D854
   sra   A1, A1, 0x10
  addiu S1, S1, 1
L801055CC:
  slti  V0, S1, 2
  bnez  V0, L801055A8
   addu  V0, S5, S1
  move  S1, R0
  sll   A1, S1, 0x10
L801055E0:
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  sra   A1, A1, 0x10
  jal   func_8008BB48
   li    A2, 1
  move  S1, V0
  addu  V0, S5, S1
  lbu   V0, 0(V0)
  beqz  V0, L801055E0
   sll   A1, S1, 0x10
  move  V0, S1
  lw    RA, 0x40(SP)
  lw    S5, 0x3c(SP)
  lw    S4, 0x38(SP)
  lw    S3, 0x34(SP)
  lw    S2, 0x30(SP)
  lw    S1, 0x2c(SP)
  lw    S0, 0x28(SP)
  jr    RA
   addiu SP, SP, 0x48

func_80105630:
  addiu SP, SP, -0x40
  sw    RA, 0x3c(SP)
  sw    S4, 0x38(SP)
/*  */  sw    S3, 0x34(SP)
  sw    S2, 0x30(SP)
  sw    S1, 0x2c(SP)
  sw    S0, 0x28(SP)
  move  S4, A1
  move  S2, R0
  lui   A1, hi(D_80113590)
  addiu A1, A1, lo(D_80113590)
  lwl   V0, 0(A1)
  lwr   V0, 3(A1)
  swl   V0, 0x20(SP)
  swr   V0, 0x23(SP)
  move  S1, R0
  addiu S3, SP, 0x18
L80105674:
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  bne   S1, V0, L80105730
   sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V1, V0, 2
  lui   V0, hi(D_800FD2C6)
  addu  V0, V0, V1
  lhu   V0, lo(D_800FD2C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L801056DC
   sll   S0, S1, 1
  lui   S2, hi(D_80113714)
  lw    S2, lo(D_80113714)(S2)
  slt   V0, S2, S1
  addu  S2, S2, V0
  lui   V0, hi(p1_controller)
  addu  V0, V0, V1
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, 1024
  j     L80105758
   sh    V1, 0(V0)
L801056DC:
  addu  S0, S0, S1
  sll   S0, S0, 2
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  addu  V0, SP, V0
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  lbu   A1, 0x20(V0)
  jal   func_8008D59C
   addiu S1, S1, 1
  lui   V0, hi(p1_controller)
  addu  V0, V0, S0
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S3
  li    V1, -1
  j     L8010575C
   sh    V1, 0(V0)
L80105730:
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  addu  V0, V0, S3
  sh    R0, 0(V0)
L80105758:
  addiu S1, S1, 1
L8010575C:
  slti  V0, S1, 4
  bnez  V0, L80105674
   nop
  beqz  S2, L801057F4
   li    A1, 2
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_80089284
   li    A2, 2
  addiu S0, SP, 0x18
  li    S3, -32768
  li    S1, 16
  addiu S2, S2, -1
L80105790:
  bnez  S2, L801057CC
   nop
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_controller)
  addu  V0, V0, V1
  lbu   V0, lo(p1_controller)(V0)
  sll   V0, V0, 1
  addu  V0, V0, S0
  sh    S3, 0(V0)
L801057CC:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  jal   func_8008CFD0
   sw    S1, 0x10(SP)
  bnez  S2, L80105790
   addiu S2, S2, -1
  j     L8010580C
   move  S1, R0
L801057F4:
  lh    A0, 0x18(SP)
  lh    A1, 0x1a(SP)
  lh    A2, 0x1c(SP)
  lh    A3, 0x1e(SP)
  jal   func_8008D07C
   move  S1, R0
L8010580C:
  addu  V0, S4, S1
L80105810:
  lbu   V0, 0(V0)
  bnel  V0, R0, L80105834
   addiu S1, S1, 1
  sll   A1, S1, 0x10
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  jal   func_8008D854
   sra   A1, A1, 0x10
  addiu S1, S1, 1
L80105834:
  slti  V0, S1, 3
  bnez  V0, L80105810
   addu  V0, S4, S1
  move  S1, R0
  li    S0, -1
  sll   A1, S1, 0x10
L8010584C:
  lui   A0, hi(D_800F9052)
  lh    A0, lo(D_800F9052)(A0)
  sra   A1, A1, 0x10
  jal   func_8008BB48
   move  A2, R0
  move  S1, V0
  beq   S1, S0, L80105880
   addu  V0, S4, S1
  lbu   V0, 0(V0)
  beqz  V0, L8010584C
   sll   A1, S1, 0x10
  j     L80105884
   move  V0, S1
L80105880:
  li    V0, -1
L80105884:
  lw    RA, 0x3c(SP)
  lw    S4, 0x38(SP)
  lw    S3, 0x34(SP)
  lw    S2, 0x30(SP)
  lw    S1, 0x2c(SP)
  lw    S0, 0x28(SP)
  jr    RA
   addiu SP, SP, 0x40

overlaycall0:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
; Declare which board index this is.
li    V0, ${t}
  lui   AT, hi(D_800F93AA)
  sh    V0, lo(D_800F93AA)(AT)
  li    A0, 10
  jal   InitObjSys
   move  A1, R0
  li    A0, 61
  move  A1, R0
  jal   func_800771EC
   li    A2, 402
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

overlaycall1:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  li    A0, 10
  jal   InitObjSys
   move  A1, R0
  move  A0, R0
  move  A1, R0
  jal   SetPlayerOntoChain
   move  A2, R0
  li    A0, 1
  move  A1, R0
  jal   SetPlayerOntoChain
   move  A2, R0
  li    A0, 2
  move  A1, R0
  jal   SetPlayerOntoChain
   move  A2, R0
  li    A0, 3
  move  A1, R0
  jal   SetPlayerOntoChain
   move  A2, R0
  jal   func_8006836C
   li    A0, 67
  jal   func_8010285C
   nop
  lui   V0, hi(D_800F8CE4)
  addiu V0, V0, lo(D_800F8CE4)
  sh    R0, 0(V0) ; clearing bank coins?
  sh    R0, 0x3c(V0)
  sh    R0, 0x3a(V0)
  sh    R0, 0x34(V0)
  sh    R0, 0x32(V0)
  sh    R0, 0x2e(V0)
  jal   func_80077160
   li    A0, 1
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

setup_routine:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  li    A0, 160
  jal   InitObjSys
   li    A1, 40
  li    A0, 1
  li    A1, 100
  li    A2, 100
  jal   func_80026DAC
   li    A3, 100
  li    A0, 2
  li    A1, 200
  li    A2, 200
  jal   func_80026DAC
   li    A3, 200
  JAL   __PP64_INTERNAL_ADDITIONAL_BG_CHOICE
   NOP
  move  A0, V0 ; Determined by user-customizable hook
  li    A1, ${e.boardDefFile}
  li    A2, 8 ; TODO: pauseBgDir?
  jal   func_80062E10 ; setup board?
   move  A3, R0

  lui   A0, hi(D_801119E4)
  addiu A0, A0, lo(D_801119E4)
  jal   func_80055928
   move  S0, R0
  lui   A0, hi(D_801119F4)
  jal   func_80055980
   addiu A0, A0, lo(D_801119F4)

  ; begin arrow rotation
  ${R.join(`
`)}
  ; end arrow rotation

  lui   A1, hi(func_8010BA48) ; boo event
  addiu A1, A1, lo(func_8010BA48)
  jal   func_8004D60C
   move  A0, R0
  lui   A1, hi(func_8010C6DC)
  addiu A1, A1, lo(func_8010C6DC)
  jal   func_8004D60C
   li    A0, 1
  lui   A1, hi(func_8010CA78)
  addiu A1, A1, lo(func_8010CA78)
  jal   func_8004D60C
   li    A0, 8
  lui   A1, hi(func_8010CAE8)
  addiu A1, A1, lo(func_8010CAE8)
  jal   func_8004D60C
   li    A0, 2
  lui   A1, hi(func_8010DE58)
  addiu A1, A1, lo(func_8010DE58)
  jal   func_8004D60C
   li    A0, 3
  lui   A1, hi(func_8010E3D0)
  addiu A1, A1, lo(func_8010E3D0)
  jal   func_8004D60C
   li    A0, 4
  lui   A1, hi(func_8010E640)
  addiu A1, A1, lo(func_8010E640)
  jal   func_8004D60C
   li    A0, 5
  lui   A1, hi(func_8010CFCC)
  addiu A1, A1, lo(func_8010CFCC)
  jal   func_8004D60C
   li    A0, 6
  lui   A1, hi(func_8010D9F4)
  addiu A1, A1, lo(func_8010D9F4)
  jal   func_8004D60C
   li    A0, 7
  lui   A1, hi(func_8010E874)
  addiu A1, A1, lo(func_8010E874)
  jal   func_8004D60C
   li    A0, 9
  lui   A1, hi(func_8010EB88)
  addiu A1, A1, lo(func_8010EB88)
  jal   func_8004D60C
   li    A0, 10
  lui   A1, hi(func_8010F1FC)
  addiu A1, A1, lo(func_8010F1FC)
  jal   func_8004D60C
   li    A0, 12
  lui   A1, hi(func_8010F430)
  addiu A1, A1, lo(func_8010F430)
  jal   func_8004D60C
   li    A0, 11
  lui   A1, hi(func_8010F940)
  addiu A1, A1, lo(func_8010F940)
  jal   func_8004D60C
   li    A0, 13
  lui   A0, hi(func_80111338)
  jal   func_80044D98
   addiu A0, A0, lo(func_80111338)
  lui   S1, hi(D_80111994)
  addiu S1, S1, lo(D_80111994)
  sll   V0, S0, 1
L80105AE0:
  addu  V0, V0, S1
  lh    A1, 0(V0)
  jal   func_800542E8
   move  A0, S0
  addiu S0, S0, 1
  slti  V0, S0, STAR_COUNT
  bnez  V0, L80105AE0
   sll   V0, S0, 1
  jal   func_80068328
   li    A0, 77
  beqz  V0, L80105B40
   nop
  jal   func_800683BC
   li    A0, 77
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beqz  V0, L80105B38
   nop
  jal   func_80102A44
   nop
  j     L80105B40
   nop
L80105B38:
  jal   func_80102AB0
   nop
L80105B40:
; drawing things (approximately starting around here)
  jal   func_80102B54
   nop
  jal   func_80105DDC ; baby bowser
   nop
  jal   func_80105D54 ; toad
   nop
  jal   func_8010602C ; boo
   nop
  jal   func_801062F4 ; bank coins
   nop
  ;jal   func_801064B8 ; gates
  ; nop
  jal   func_80106684 ; banks
   nop
  jal   func_801066FC
   nop
  ; jal   func_80106C44 ; train
  ; nop
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

${$}

; A function that returns the audio index, to let custom events call to get the value.
${z}

overlaycall2:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)

jal __PP64_INTERNAL_GET_BOARD_AUDIO_INDEX
 nop

; Start playing board audio.
  jal   func_80079390
   move  A0, V0
/*  */  jal   func_800632F0
   li    A0, 8 ; TODO also audio?
  jal   func_80020070
   li    A0, 2
  jal   setup_routine
   nop
  lui   V0, hi(func_80106944)
  addiu V0, V0, lo(func_80106944)
  sw    V0, 0x10(SP)
  li    A0, 1000
  move  A1, R0
  move  A2, R0
  jal   func_80076598
   li    A3, -1
  jal   func_80053AA0
   move  A0, R0

  jal hydrate_events
   nop

  jal func_randomize_minigames
   nop

  jal   func_80066C34
   move  A0, R0
  lw    RA, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x20

hydrate_events:
ADDIU SP SP 0xFFE8
SW RA, 0x0010(SP)

// Call for the MainFS to read in the ASM blob.
LUI A0 ${i}
JAL ReadMainFS
ADDIU A0 A0 ${a}

// Now, V0 has the location that the MainFSRead put the blob... it isn't
// where we want it, it is in the heap somewhere, so we will move it.

// This is a pretty simple copy loop
// T4 = Copy of V0, Current source RAM location
// T0 = Current dest RAM location
// T1 = Size of buffer remaining to copy
// T2 = Temp word register to do the copy
ADDU T4 V0 R0 // Copy V0 -> T4
LW T0 0x4(T4) // LW T0, 0x4(T4) [RAM dest]
LW T1 0x8(T4) // LW T1, 0x8(T4) [Buffer size]
hydrate_events_loop_start:
LW T2 0(T4)
SW T2 0(T0)
ADDIU T4 T4 4
ADDIU T0 T0 4
ADDIU T1 T1 -4
BGTZ T1 hydrate_events_loop_start
NOP

// Now we can hydrate the table.
// T9 = V0 copy
// T4 = Dest buffer addr + 0x10, where the table really starts
ADDU T9 V0 R0 // Copy V0 -> T9
LW T4 4(T9) // LW T4, 0x4(T9) [RAM dest]
JAL EventTableHydrate
ADDIU A0 T4 16 // ADDIU A0, T4, 16

// Well, we copied the buffer... now we should "free" it with this magic JAL...
// Free our T9 reference, which theoretically could be corrupted, but in practice not.
JAL FreeMainFS
ADDU A0 T9 R0

LW RA 0x10(SP)
JR RA
ADDIU SP SP 0x18

; Overwrite the static array entry for this board's duel mini-game.
func_randomize_minigames:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)

  ; T0 = GetRandomByte() % BOARD_COUNT;
  jal	GetRandomByte
  nop
  li   A0, BOARD_COUNT
  div  V0, A0
  nop
  mfhi T0
  nop
  andi T0, T0, 0xFF
  nop

  lui T1 hi(DuelMinigamesArray)
  addu T1 T1 T0
  lbu T1, lo(DuelMinigamesArray)(T1)

  lui T2 hi(D_800CCD5C)
  addiu T2 T2 ${t*4}
  sw T1 lo(D_800CCD5C)(T2)

  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

overlaycall3:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   func_80020070
   li    A0, 1
  jal   setup_routine
   nop
  jal   func_80066C34
   li    A0, 1
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80105C50:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S0, A0
  sll   A0, A0, 0x10
  sra   A0, A0, 0xe
  lui   V0, hi(D_80113720)
  addu  V0, V0, A0
  lw    V0, lo(D_80113720)(V0)
  bnez  V0, L80105D3C
   nop
  lui   V0, hi(D_8011371C)
  lw    V0, lo(D_8011371C)(V0)
  bnez  V0, L80105CBC
   nop
  li    A0, 23
  jal   func_80043510
   move  A1, R0
  move  S2, V0
  jal   func_80043DAC
   move  A0, S2
  lui   AT, hi(D_8011371C)
  sw    S2, lo(D_8011371C)(AT)
  j     L80105CD0
   sll   S0, S0, 0x10
L80105CBC:
  lui   A0, hi(D_8011371C)
  lw    A0, lo(D_8011371C)(A0)
  jal   func_80043F7C
   sll   S0, S0, 0x10
  move  S2, V0
L80105CD0:
  sra   S0, S0, 0x10
  sll   S1, S0, 2
  lui   AT, hi(D_80113720)
  addu  AT, AT, S1
  sw    S2, lo(D_80113720)(AT)
  lhu   V0, 0xa(S2)
  ori   V0, V0, 2
  sh    V0, 0xa(S2)
  jal   func_80056754
   move  A0, S2
  sll   S0, S0, 1
  lui   A0, hi(D_80111A44)
  addu  A0, A0, S0
  jal   func_80054B8C
   lh    A0, lo(D_80111A44)(A0)
  addiu A0, S2, 0xc
  jal   func_800B3170
   addiu A1, V0, 8
  li    A0, 6
  lui   A2, hi(D_80111A04)
  addu  A2, A2, S1
  lh    A2, lo(D_80111A04)(A2)
  lui   A3, hi(D_80111A06)
  addu  A3, A3, S1
  lh    A3, lo(D_80111A06)(A3)
  jal   func_80041AEC
   move  A1, S2
L80105D3C:
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_80105D54:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   AT, hi(D_8011371C)
  sw    R0, lo(D_8011371C)(AT)
  move  S0, R0
  lui   S2, hi(D_80113720)
  addiu S2, S2, lo(D_80113720)
  lui   S1, hi(D_80111A54)
  addiu S1, S1, lo(D_80111A54)
  sll   V0, S0, 2
L80105D88:
  addu  V0, V0, S2
  sw    R0, 0(V0)
  sll   V0, S0, 1
  addu  V0, V0, S1
  jal   func_80068328
   lh    A0, 0(V0)
  bnel  V0, R0, L80105DB8
   addiu S0, S0, 1
  sll   A0, S0, 0x10
  jal   func_80105C50
   sra   A0, A0, 0x10
  addiu S0, S0, 1
L80105DB8:
  slti  V0, S0, 7
  bnez  V0, L80105D88
   sll   V0, S0, 2
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_80105DDC:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   S1, hi(D_800F93A8)
  addiu S1, S1, lo(D_800F93A8)
  lui   V1, hi(D_800F93C4)
  lh    V1, lo(D_800F93C4)(V1)
  li    V0, -1
  beq   V1, V0, L80105EA8
   nop
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beqz  V0, L80105E1C
   li    A0, 29
  li    A0, 23
L80105E1C:
  jal   func_80043510
   move  A1, R0
  move  S0, V0
  jal   func_80043DAC
   move  A0, S0
  lui   AT, hi(D_800F64C8)
  sw    S0, lo(D_800F64C8)(AT)
  lhu   V0, 0xa(S0)
  ori V0, V0, 2
  sh    V0, 0xa(S0)
  jal   func_80056754
   move  A0, S0
  lh    V0, 0x1c(S1)
  sll   V0, V0, 1
  lui   A0, hi(D_80111A44)
  addu  A0, A0, V0
  jal   func_80054B8C
   lh    A0, lo(D_80111A44)(A0)
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, V0, 8
  lh    V0, 0x1c(S1)
  sll   V0, V0, 2
  li    A0, 11
  lui   A2, 0x8011
  addu  A2, A2, V0
  lh    A2, 0x1a04(A2)
  lui   A3, hi(D_80111A06)
  addu  A3, A3, V0
  lh    A3, lo(D_80111A06)(A3)
  jal   func_80041AEC
   move  A1, S0
  lui   AT, hi(D_80111A64)
  j     L80105EB0
   sw    V0, lo(D_80111A64)(AT)
L80105EA8:
  lui   AT, hi(D_800F64C8)
  sw    R0, lo(D_800F64C8)(AT)
L80105EB0:
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_80105EC4:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   A0, hi(D_800F64C8)
  lw    A0, lo(D_800F64C8)(A0)
  beqz  A0, L80105EE4
   nop
  jal   func_8004430C
   nop
L80105EE4:
  lui   A0, hi(D_80111A64)
  lw    A0, lo(D_80111A64)(A0)
  li    V0, -1
  beq   A0, V0, L80105F00
   nop
  jal   func_80041B40
   nop
L80105F00:
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80105F0C:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S0, A0
  sll   A0, A0, 0x10
  sra   A0, A0, 0xe
  lui   V0, hi(D_80113740)
  addu  V0, V0, A0
  lw    V0, lo(D_80113740)(V0)
  bnez  V0, L80106018
   nop
  lui   V0, hi(D_8011373C)
  lw    V0, lo(D_8011373C)(V0)
  bnez  V0, L80105F88
   nop
  li    A0, 8
  jal   func_80043510
   move  A1, R0
  move  S1, V0
  lw    V0, 0x3c(S1)
  lw    V0, 0x40(V0)
  jal   func_8002D124
   lh    A0, 0(V0)
  lw    V0, 0x40(S1)
  lw    V0, 0x40(V0)
  jal   func_8002D124
   lh    A0, 0(V0)
  lui   AT, hi(D_8011373C)
  j     L80105F98
   sw    S1, lo(D_8011373C)(AT)
L80105F88:
  lui   A0, hi(D_8011373C)
  jal   func_80043F7C
   lw    A0, lo(D_8011373C)(A0)
  move  S1, V0
L80105F98:
  jal   func_800442DC
   move  A0, S1
  sll   V1, S0, 0x10
  sra   V1, V1, 0x10
  sll   S0, V1, 2
  lui   AT, hi(D_80113740)
  addu  AT, AT, S0
  sw    S1, lo(D_80113740)(AT)
  lhu   V0, 0xa(S1)
  ori   V0, V0, 2
  sh    V0, 0xa(S1)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0x30(S1)
  sll   V1, V1, 1
  lui   A0, hi(D_80111A68)
  addu  A0, A0, V1
  jal   func_80054B8C
   lh    A0, lo(D_80111A68)(A0)
  addiu A0, S1, 0xc
  jal   func_800B3170
   addiu A1, V0, 8
  li    A0, 8
  lui   A2, hi(D_80111A20)
  addu  A2, A2, S0
  lh    A2, lo(D_80111A20)(A2)
  lui   A3, hi(D_80111A22)
  addu  A3, A3, S0
  lh    A3, lo(D_80111A22)(A3)
  jal   func_80041AEC
   move  A1, S1
L80106018:
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_8010602C:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   AT, hi(D_8011373C)
  sw    R0, lo(D_8011373C)(AT)
  move  S0, R0
  lui   S1, hi(D_80113740)
  addiu S1, S1, lo(D_80113740)
  sll   V0, S0, 2
L80106054:
  addu  V0, V0, S1
  sw    R0, 0(V0)
  sll   A0, S0, 0x10
  jal   func_80105F0C
   sra   A0, A0, 0x10
  addiu S0, S0, 1
  slti  V0, S0, 2
  bnez  V0, L80106054
   sll   V0, S0, 2
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_8010608C:
  addiu SP, SP, -0x38
  sw    RA, 0x30(SP)
  sw    S5, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  move  S3, R0
  lui S5, 0x6666
  ori S5, S5, 0x6667
  lui   S4, hi(D_80113750)
  addiu S4, S4, lo(D_80113750)
L801060C0:
  lui   V0, hi(D_800F8D1E)
  lh    V0, lo(D_800F8D1E)(V0)
  addiu V0, V0, 9
  mult  V0, S5
  mfhi  A1
  sra   V1, A1, 2
  sra   V0, V0, 0x1f
  subu  S1, V1, V0
  slti  V0, S1, 6
  beql  V0, R0, L801060EC
   li    S1, 5
L801060EC:
  blez  S1, L80106120
   move  S0, R0
  sll   V0, S3, 2
  addu  S2, V0, S3
  addu  V0, S2, S0
L80106100:
  sll   V0, V0, 2
  addu  V0, V0, S4
  lw    A0, 0(V0)
  jal   func_80044258
   addiu S0, S0, 1
  slt   V0, S0, S1
  bnez  V0, L80106100
   addu  V0, S2, S0
L80106120:
  slti  V0, S0, 5
  beqz  V0, L80106154
   sll   V0, S3, 2
  addu  S1, V0, S3
  addu  V0, S1, S0
L80106134:
  sll   V0, V0, 2
  addu  V0, V0, S4
  lw    A0, 0(V0)
  jal   func_800442DC
   addiu S0, S0, 1
  slti  V0, S0, 5
  bnez  V0, L80106134
   addu  V0, S1, S0
L80106154:
  addiu S3, S3, 1
  slti  V0, S3, 2
  bnez  V0, L801060C0
   nop
  lw    RA, 0x30(SP)
  lw    S5, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x38

func_80106188:
  addiu SP, SP, -0x28
  sw    RA, 0x20(SP)
  sw    S3, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S0, A0
  sll   A0, A0, 0x10
  sra   A0, A0, 0xe
  lui   V0, hi(D_80113750)
  addu  V0, V0, A0
  lw    V0, lo(D_80113750)(V0)
  bnez  V0, L801062D8
   nop
  lui   V0, hi(D_80113748)
  lw    V0, lo(D_80113748)(V0)
  bnez  V0, L801061F8
   nop
  li    A0, 108
  jal   func_80043510
   move  A1, R0
  move  S3, V0
  jal   func_80043DAC
   move  A0, S3
  lui   AT, hi(D_80113748)
  sw    S3, lo(D_80113748)(AT)
  j     L8010620C
   sll   V1, S0, 0x10
L801061F8:
  lui   A0, hi(D_80113748)
  jal   func_80043F7C
   lw    A0, lo(D_80113748)(A0)
  move  S3, V0
  sll   V1, S0, 0x10
L8010620C:
  sra   S1, V1, 0x10
  sll   V0, S1, 2
  lui   AT, hi(D_80113750)
  addu  AT, AT, V0
  sw    S3, lo(D_80113750)(AT)
  lhu   V0, 0xa(S3)
  ori   V0, V0, 2
  sh    V0, 0xa(S3)
  lui   V0, 0x6666
  ori   V0, V0, 0x6667
  mult  S1, V0
  mfhi  A3
  sra   S0, A3, 1
  sra   V1, V1, 0x1f
  subu  S0, S0, V1
  sll   V0, S0, 0x10
  sra   V0, V0, 0xf
  lui   A0, hi(D_80111A6C)
  addu  A0, A0, V0
  lh    A0, lo(D_80111A6C)(A0)
  jal   func_80054B8C
   addiu S2, S3, 0xc
  move  A0, S2
  jal   func_800B3170
   addiu A1, V0, 8
  sll   V0, S0, 2
  addu  V0, V0, S0
  subu  S1, S1, V0
  sll   S1, S1, 0x10
  sra   S1, S1, 0x10
  sll   S0, S1, 1
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   A1, hi(D_80111A70)
  addiu A1, A1, lo(D_80111A70)
  move  A0, S2
  addu  A1, S0, A1
  jal   func_800B31C0
   move  A2, S2
  lw    V0, 0x3c(S3)
  lui   AT, hi(D_80111AAC)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80111AAC)(AT)
  swc1  F0, 0x24(V0)
  lw    V0, 0x3c(S3)
  lui   AT, hi(D_80111AB4)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80111AB4)(AT)
  swc1  F0, 0x2c(V0)
  jal   func_800442DC
   move  A0, S3
L801062D8:
  lw    RA, 0x20(SP)
  lw    S3, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x28

func_801062F4:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   AT, hi(D_80113748)
  sw    R0, lo(D_80113748)(AT)
  move  S0, R0
  lui   S1, hi(D_80113750)
  addiu S1, S1, lo(D_80113750)
  sll   V0, S0, 2
L8010631C:
  addu  V0, V0, S1
  sw    R0, 0(V0)
  sll   A0, S0, 0x10
  jal   func_80106188
   sra   A0, A0, 0x10
  addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010631C
   sll   V0, S0, 2
  jal   func_8010608C
   nop
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_8010635C:
/*  */  addiu SP, SP, -0x28
  sw    RA, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  move  S0, A0
  sll   A0, A0, 0x10
  sra   A0, A0, 0xe
  lui   V0, hi(D_8011377C)
  addu  V0, V0, A0
  lw    V0, lo(D_8011377C)(V0)
  bnez  V0, L801064A0
   nop
  lui   V0, hi(D_80113778)
  lw    V0, lo(D_80113778)(V0)
  bnez  V0, L801063DC
   nop
  lui   V0, hi(D_800F93AA)
  lh    V0, lo(D_800F93AA)(V0)
  sll   V0, V0, 1
  lui   A0, hi(D_80111AED)
  addu  A0, A0, V0
  lbu   A0, lo(D_80111AED)(A0)
  jal   func_80043510
   move  A1, R0
  move  S2, V0
  jal   func_80043DAC
   move  A0, S2
  lui   AT, hi(D_80113778)
  sw    S2, lo(D_80113778)(AT)
  j     L801063F0
   sll   S0, S0, 0x10
L801063DC:
  lui   A0, hi(D_80113778)
  lw    A0, lo(D_80113778)(A0)
  jal   func_80043F7C
   sll   S0, S0, 0x10
  move  S2, V0
L801063F0:
  sra   S0, S0, 0x10
  sll   S1, S0, 2
  lui   AT, hi(D_8011377C)
  addu  AT, AT, S1
  sw    S2, lo(D_8011377C)(AT)
  lhu   V0, 0xa(S2)
  ori   V0, V0, 2
  sh    V0, 0xa(S2)
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  li    A1, 2
  jal   func_80029E80
   li    A2, 1
  sll   S0, S0, 1
  lui   A0, hi(D_80111AE8)
  addu  A0, A0, S0
  jal   func_80054B8C
   lh    A0, lo(D_80111AE8)(A0)
  addiu A0, S2, 0xc
  jal   func_800B3170
   addiu A1, V0, 8
  lui   A0, hi(D_80111A3C)
  addu  A0, A0, S1
  jal   func_80054B8C
   lh    A0, lo(D_80111A3C)(A0)
  lui   A0, hi(D_80111A3E)
  addu  A0, A0, S1
  lh    A0, lo(D_80111A3E)(A0)
  jal   func_80054B8C
   move  S0, V0
  addiu A0, V0, 8
  addiu A1, S0, 8
  jal   func_80056658
   addiu A2, S2, 0x18
  li    A0, 12
  lui   A2, hi(D_80111A34)
  addu  A2, A2, S1
  lh    A2, lo(D_80111A34)(A2)
  lui   A3, hi(D_80111A36)
  addu  A3, A3, S1
  lh    A3, lo(D_80111A36)(A3)
  jal   func_80041AEC
   move  A1, S2
L801064A0:
  lw    RA, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

func_801064B8:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   AT, hi(D_80113778)
  sw    R0, lo(D_80113778)(AT)
  move  S0, R0
  lui   S1, hi(D_8011377C)
  addiu S1, S1, lo(D_8011377C)
  sll   V0, S0, 2
L801064E0:
  addu  V0, V0, S1
  sw    R0, 0(V0)
  sll   A0, S0, 0x10
  jal   func_8010635C
   sra   A0, A0, 0x10
  addiu S0, S0, 1
  slti  V0, S0, 2
  bnez  V0, L801064E0
   sll   V0, S0, 2
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_80106518:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  lui   S0, hi(D_800F93AA)
  addiu S0, S0, lo(D_800F93AA)
  lh    V0, 0(S0)
  sll   V0, V0, 2
  lui   A0, hi(D_80111B40)
  addu  A0, A0, V0
  jal   func_8007D9E0
   lw    A0, lo(D_80111B40)(A0)
  lh    V0, 0(S0)
  sll   V0, V0, 2
  lui   A0, hi(D_80111B1E)
  addu  A0, A0, V0
  jal   func_8007959C
   lh    A0, lo(D_80111B1E)(A0)
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80106618:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  sll   A0, A0, 2
  lui   V0, hi(D_8011377C)
  addu  V0, V0, A0
  lw    V0, lo(D_8011377C)(V0)
  lw    V0, 0x3c(V0)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  li    A1, 1
  jal   func_80029E80
   li    A2, 4
  lui   V0, hi(D_800F93AA)
  lh    V0, lo(D_800F93AA)(V0)
  lui   V1, hi(D_80111B64)
  addiu V1, V1, lo(D_80111B64)
  sll   V0, V0, 2
  addu  A0, V0, V1
  lw    V1, 0(A0)
  li    V0, -1
  beq   V1, V0, L80106678
   nop
  jal   func_8007959C
   lh    A0, 2(A0)
L80106678:
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80106684:
  addiu SP, SP, -0x20
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S0, R0
  lui   S1, hi(D_80111B88)
  addiu S1, S1, lo(D_80111B88)
  sll   V0, S0, 1
L801066A4:
  addu  V0, V0, S1
  jal   func_80054B8C
   lh    A0, 0(V0)
  sll   V1, S0, 2
  li    A0, 10
  lui   A2, hi(D_80111A28)
  addu  A2, A2, V1
  lh    A2, lo(D_80111A28)(A2)
  lui   A3, hi(D_80111A2A)
  addu  A3, A3, V1
  lh    A3, lo(D_80111A2A)(A3)
  jal   func_80041B60
   addiu A1, V0, 8
  addiu S0, S0, 1
  slti  V0, S0, 2
  bnez  V0, L801066A4
   sll   V0, S0, 1
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_801066FC:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   A0, hi(D_80111B8C)
  jal   func_80054B8C
   lh    A0, lo(D_80111B8C)(A0)
  lui   V1, hi(D_80111A30)
  addiu V1, V1, lo(D_80111A30)
  li    A0, 9
  lh    A2, 0(V1)
  lh    A3, 2(V1)
  jal   func_80041B60
   addiu A1, V0, 8
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80106738:
  addiu SP, SP, -0x58
  sw    RA, 0x40(SP)
  sw    S3, 0x3c(SP)
  sw    S2, 0x38(SP)
  sw    S1, 0x34(SP)
  sw    S0, 0x30(SP)
  sdc1  F22, 0x50(SP)
  sdc1  F20, 0x48(SP)
  lui   A1, hi(D_80113784)
  lw    A1, lo(D_80113784)(A1)
  addiu A0, SP, 0x10
  jal   func_800B3170
   addiu A1, A1, 0xc
  lui   A0, hi(D_80113784)
  lw    A0, lo(D_80113784)(A0)
  jal   func_80042BE0
   addiu A0, A0, 0x18
  li    AT, 0x43340000 ;180.000000
  mtc1  AT, F2
  nop
  add.s F22, F0, F2
  jal   func_800B83C0
   mov.s F12, F22
  li    AT, 0x41C00000 ;24.000000
  mtc1  AT, F20
  nop
  mul.s F0, F0, F20
  lwc1  F2, 0x10(SP)
  add.s F0, F0, F2
  swc1  F0, 0x20(SP)
  lwc1  F0, 0x14(SP)
  swc1  F0, 0x24(SP)
  jal   func_800B7890
   mov.s F12, F22
  mul.s F0, F0, F20
  lwc1  F8, 0x18(SP)
  add.s F0, F0, F8
  swc1  F0, 0x28(SP)
  lwc1  F2, 0x10(SP)
  lwc1  F4, 0x20(SP)
  sub.s F2, F2, F4
  li    AT, 0x41400000 ;12.000000
  mtc1  AT, F6
  nop
  div.s F2, F2, F6
  swc1  F2, 0x10(SP)
  lwc1  F2, 0x14(SP)
  lwc1  F4, 0x24(SP)
  sub.s F2, F2, F4
  div.s F2, F2, F6
  swc1  F2, 0x14(SP)
  sub.s F8, F8, F0
  div.s F8, F8, F6
  swc1  F8, 0x18(SP)
  move  S1, R0
  lui   S3, hi(D_80113790)
  addiu S3, S3, lo(D_80113790)
  lui   S2, hi(D_80113820)
  addiu S2, S2, lo(D_80113820)
  sll   S0, S1, 1
L80106828:
  addu  S0, S0, S1
  sll   S0, S0, 2
  mtc1  S1, F4
  nop
  cvt.s.w F4, F4
  lwc1  F6, 0x10(SP)
  mul.s F6, F4, F6
  lwc1  F10, 0x20(SP)
  lwc1  F2, 0x14(SP)
  mul.s F2, F4, F2
  lwc1  F8, 0x24(SP)
  lwc1  F0, 0x18(SP)
  mul.s F4, F4, F0
  lwc1  F0, 0x28(SP)
  add.s F10, F6, F10
  mfc1  A1, F10
  add.s F8, F2, F8
  mfc1  A2, F8
  add.s F0, F4, F0
  mfc1  A3, F0
  nop
  jal   func_800B3160
   addu  A0, S0, S3
  lui   A1, hi(D_80113784)
  lw    A1, lo(D_80113784)(A1)
  addu  A0, S0, S2
  jal   func_800B3170
   addiu A1, A1, 0x18
  addiu S1, S1, 1
  slti  V0, S1, 0xc
  bnel  V0, R0, L80106828
   sll   S0, S1, 1
  lui   AT, hi(D_801138B0)
  sw    R0, lo(D_801138B0)(AT)
  lui   A0, hi(D_80113788)
  lw    A0, lo(D_80113788)(A0)
  lui   A1, hi(D_80113790)
  lw    A1, lo(D_80113790)(A1)
  lui   A2, hi(D_80113794)
  lw    A2, lo(D_80113794)(A2)
  lui   A3, hi(D_80113798)
  lw    A3, lo(D_80113798)(A3)
  jal   func_800B3160
   addiu A0, A0, 0xc
  lui   A0, hi(D_80113788)
  lw    A0, lo(D_80113788)(A0)
  lui   V1, hi(D_801138B0)
  lw    V1, lo(D_801138B0)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(D_80113820)
  addu  A1, A1, V0
  lw    A1, lo(D_80113820)(A1)
  lui   A2, hi(D_80113824)
  addu  A2, A2, V0
  lw    A2, lo(D_80113824)(A2)
  lui   A3, hi(D_80113828)
  addu  A3, A3, V0
  lw    A3, lo(D_80113828)(A3)
  jal   func_800B3160
   addiu A0, A0, 0x18
  lw    RA, 0x40(SP)
  lw    S3, 0x3c(SP)
  lw    S2, 0x38(SP)
  lw    S1, 0x34(SP)
  lw    S0, 0x30(SP)
  ldc1  F22, 0x50(SP)
  ldc1  F20, 0x48(SP)
  jr    RA
   addiu SP, SP, 0x58

func_80106944:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  jal   func_8005DC3C
   li    A0, -1
  move  S0, V0
  lui   V0, hi(D_8011378C)
  lw    V0, lo(D_8011378C)(V0)
  beqz  V0, L801069B8
   nop
  lw    A0, 0x24(S0)
  lui   A1, hi(D_80113788)
  lw    A1, lo(D_80113788)(A1)
  addiu A0, A0, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lw    V0, 0x24(S0)
  lwc1  F0, 0x10(V0)
  li    AT, 0x40E00000 ;7.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x10(V0)
  lw    A0, 0x24(S0)
  lui   A1, hi(D_80113788)
  lw    A1, lo(D_80113788)(A1)
  addiu A0, A0, 0x18
  jal   func_800B3170
   addiu A1, A1, 0x18
L801069B8:
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_801069C8:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   V1, hi(D_801138B0)
  lw    V1, lo(D_801138B0)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(D_80113784)
  lw    A0, lo(D_80113784)(A0)
  lwc1  F0, 0xc(A0)
  lui   AT, hi(D_80113790)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113790)(AT)
  lwc1  F0, 0x10(A0)
  lui   AT, hi(D_80113794)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113794)(AT)
  lwc1  F0, 0x14(A0)
  lui   AT, hi(D_80113798)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113798)(AT)
  lwc1  F0, 0x18(A0)
  lui   AT, hi(D_80113820)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113820)(AT)
  lwc1  F0, 0x1c(A0)
  lui   AT, hi(D_80113824)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113824)(AT)
  lwc1  F0, 0x20(A0)
  lui   AT, hi(D_80113828)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113828)(AT)
  addiu V1, V1, 1
  lui   AT, hi(D_801138B0)
  sw    V1, lo(D_801138B0)(AT)
  slti  V1, V1, 0xc
  bnez  V1, L80106A6C
   nop
  lui   AT, hi(D_801138B0)
  sw    R0, lo(D_801138B0)(AT)
L80106A6C:
  lui   A0, hi(D_80113788)
  lw    A0, lo(D_80113788)(A0)
  lui   V1, hi(D_801138B0)
  lw    V1, lo(D_801138B0)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(D_80113790)
  addu  A1, A1, V0
  lw    A1, lo(D_80113790)(A1)
  lui   A2, hi(D_80113794)
  addu  A2, A2, V0
  lw    A2, lo(D_80113794)(A2)
  lui   A3, hi(D_80113798)
  addu  A3, A3, V0
  lw    A3, lo(D_80113798)(A3)
  jal   func_800B3160
   addiu A0, A0, 0xc
  lui   A0, hi(D_80113788)
  lw    A0, lo(D_80113788)(A0)
  lui   V1, hi(D_801138B0)
  lw    V1, lo(D_801138B0)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(D_80113820)
  addu  A1, A1, V0
  lw    A1, lo(D_80113820)(A1)
  lui   A2, hi(D_80113824)
  addu  A2, A2, V0
  lw    A2, lo(D_80113824)(A2)
  lui   A3, hi(D_80113828)
  addu  A3, A3, V0
  lw    A3, lo(D_80113828)(A3)
  jal   func_800B3160
   addiu A0, A0, 0x18
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80106B08:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   A0, hi(D_801138B0)
  lw    A0, lo(D_801138B0)(A0)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   V1, hi(D_80113788)
  lw    V1, lo(D_80113788)(V1)
  lwc1  F0, 0xc(V1)
  lui   AT, hi(D_80113790)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113790)(AT)
  lwc1  F0, 0x10(V1)
  lui   AT, hi(D_80113794)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113794)(AT)
  lwc1  F0, 0x14(V1)
  lui   AT, hi(D_80113798)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113798)(AT)
  lwc1  F0, 0x18(V1)
  lui   AT, hi(D_80113820)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113820)(AT)
  lwc1  F0, 0x1c(V1)
  lui   AT, hi(D_80113824)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113824)(AT)
  lwc1  F0, 0x20(V1)
  lui   AT, hi(D_80113828)
  addu  AT, AT, V0
  swc1  F0, lo(D_80113828)(AT)
  addiu A0, A0, -1
  lui   AT, hi(D_801138B0)
  sw    A0, lo(D_801138B0)(AT)
  bgez  A0, L80106BA8
   li    V0, 11
  lui   AT, hi(D_801138B0)
  sw    V0, lo(D_801138B0)(AT)
L80106BA8:
  lui   A0, hi(D_80113784)
  lw    A0, lo(D_80113784)(A0)
  lui   V1, hi(D_801138B0)
  lw    V1, lo(D_801138B0)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(D_80113790)
  addu  A1, A1, V0
  lw    A1, lo(D_80113790)(A1)
  lui   A2, hi(D_80113794)
  addu  A2, A2, V0
  lw    A2, lo(D_80113794)(A2)
  lui   A3, hi(D_80113798)
  addu  A3, A3, V0
  lw    A3, lo(D_80113798)(A3)
  jal   func_800B3160
   addiu A0, A0, 0xc
  lui   A0, hi(D_80113784)
  lw    A0, lo(D_80113784)(A0)
  lui   V1, hi(D_801138B0)
  lw    V1, lo(D_801138B0)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(D_80113820)
  addu  A1, A1, V0
  lw    A1, lo(D_80113820)(A1)
  lui   A2, hi(D_80113824)
  addu  A2, A2, V0
  lw    A2, lo(D_80113824)(A2)
  lui   A3, hi(D_80113828)
  addu  A3, A3, V0
  lw    A3, lo(D_80113828)(A3)
  jal   func_800B3160
   addiu A0, A0, 0x18
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80106C44:
  addiu SP, SP, -0x28
  sw    RA, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  li    A0, 116
  jal   func_80043510
   move  A1, R0
  move  S2, V0
  jal   func_80043DAC
   move  A0, S2
  lui   AT, hi(D_80113784)
  sw    S2, lo(D_80113784)(AT)
  lhu   V0, 0xa(S2)
  ori   V0, V0, 2
  sh    V0, 0xa(S2)
  lui   S1, hi(D_800F8CE4)
  addiu S1, S1, lo(D_800F8CE4)
  lh    V0, 0(S1)
  sll   V0, V0, 1
  lui   A0, hi(D_80111B90)
  addu  A0, A0, V0
  lhu   A0, lo(D_80111B90)(A0)
  jal   func_80054BB0
   move  A1, R0
  sll   V0, V0, 0x10
  jal   func_80054B8C
   sra   A0, V0, 0x10
  move  S0, V0
  lh    V0, 0(S1)
  sll   V0, V0, 1
  lui   A0, hi(D_80111B90)
  addu  A0, A0, V0
  lhu   A0, lo(D_80111B90)(A0)
  jal   func_80054BB0
   li    A1, 1
  sll   V0, V0, 0x10
  jal   func_80054B8C
   sra   A0, V0, 0x10
  lwc1  F10, 8(V0)
  lwc1  F6, 8(S0)
  lwc1  F8, 0xc(V0)
  lwc1  F2, 0xc(S0)
  lwc1  F4, 0x10(V0)
  lwc1  F0, 0x10(S0)
  sub.s F6, F10, F6
  mfc1  A1, F6
  sub.s F2, F8, F2
  mfc1  A2, F2
  sub.s F0, F4, F0
  mfc1  A3, F0
  nop
  jal   func_800B3160
   addiu A0, S2, 0x18
  addiu A0, S2, 0xc
  jal   func_800B3170
   addiu A1, S0, 8
  li    A0, 117
  jal   func_80043510
   move  A1, R0
  move  S2, V0
  jal   func_80043DAC
   move  A0, S2
  lui   AT, hi(D_80113788)
  sw    S2, lo(D_80113788)(AT)
  lhu   V0, 0xa(S2)
  ori   V0, V0, 2
  jal   func_80106738
   sh    V0, 0xa(S2)
  lui   AT, hi(D_8011378C)
  sw    R0, lo(D_8011378C)(AT)
  lw    RA, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

func_80106D78:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S0, A0
  jal   func_8005DC3C
   lbu   A0, 0x4c(S0)
  move  V1, V0
  lbu   V0, 0x4d(S0)
  bnez  V0, L80106DB0
   nop
  jal   func_800442DC
   lw    A0, 0x24(V1)
  jal   func_8007695C
   move  A0, S0
L80106DB0:
  lbu   V0, 0x4d(S0)
  addiu V0, V0, -1
  sb    V0, 0x4d(S0)
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80106DCC:
  addiu SP, SP, -0x50
  sw    RA, 0x48(SP)
  sw    S3, 0x44(SP)
  sw    S2, 0x40(SP)
  sw    S1, 0x3c(SP)
  sw    S0, 0x38(SP)
  move  S1, A0
  jal   func_8005DC3C
   move  S2, A1
  move  S3, V0
  sll   S0, S1, 0x10
  sra   S0, S0, 0x10
  li    A0, 936
  jal   func_80079798
   move  A1, S0
  li    A0, 166
  jal   func_80079798
   move  A1, S0
  li    A0, 273
  jal   func_800797DC
   move  A1, S0
  move  A0, S0
  jal   func_80067170
   li    A1, 3
  lui   V0, hi(func_80106D78)
  addiu V0, V0, lo(func_80106D78)
  sw    V0, 0x10(SP)
  li    A0, 4096
  move  A1, R0
  move  A2, R0
  jal   func_80076598
   li    A3, -1
  move  S0, V0
  move  A0, S0
  jal   func_80076AFC
   li    A1, 160
  sb    S1, 0x4c(S0)
  li    V0, 30
  bnez  S2, L80106E78
   sb    V0, 0x4d(S0)
  lui   A0, hi(D_80113784)
  j     L80106E80
   lw    A0, lo(D_80113784)(A0)
L80106E78:
  lui   A0, hi(D_80113788)
  lw    A0, lo(D_80113788)(A0)
L80106E80:
  lw    A1, 0x24(S3)
  addiu A0, A0, 0xc
  addiu A1, A1, 0xc
  jal   func_80056658
   addiu A2, SP, 0x18
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0x1c(SP)
  addiu A0, SP, 0x18
  lui   A1, 0x42c8
  jal   func_800B3240
   move  A2, A0
  lw    A1, 0x24(S3)
  addiu A0, SP, 0x18
  addiu A1, A1, 0xc
  jal   func_800B31C0
   move  A2, A0
  lw    A0, 0x24(S3)
  addiu S0, SP, 0x28
  addiu A0, A0, 0xc
  addiu A1, SP, 0x18
  jal   func_80056658
   move  A2, S0
  jal   func_80042BE0
   move  A0, S0
  li    AT, 0x43960000 ;300.000000
  mtc1  AT, F2
  nop
  c.le.s F2, F0
  nop
  bc1t  L80106F28
   nop
  jal   func_80042BE0
   move  A0, S0
  li    AT, 0x42700000 ;60.000000
  mtc1  AT, F2
  nop
  c.le.s F0, F2
  nop
  bc1f  L80106F50
   nop
L80106F28:
  lw    V0, 0x24(S3)
  lwc1  F0, 0xc(V0)
  li    AT, 0x42480000 ;50.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x18(SP)
  lw    V0, 0x24(S3)
  lwc1  F0, 0x14(V0)
  swc1  F0, 0x20(SP)
L80106F50:
  lw    A2, 0x24(S3)
  addiu A2, A2, 0xc
  move  A0, A2
  addiu A1, SP, 0x18
  jal   func_80056D80
   li    A3, 30
  sh    R0, 0x10(S3)
  sh    R0, 0x12(S3)
  sh    R0, 0x14(S3)
  li    V0, 1
  sh    V0, 0x16(S3)
  lw    V1, 0x24(S3)
  lhu   V0, 0xa(V1)
  ori   V0, V0, 1
  sh    V0, 0xa(V1)
  lw    A0, 0x24(S3)
  li    A1, 4
  jal   func_80044494
   li    A2, 2
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
  li    V0, -1
  beq   A0, V0, L80106FC4
   li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  li    A0, -1
  jal   func_80067170
   move  A1, R0
L80106FC4:
  lw    RA, 0x48(SP)
  lw    S3, 0x44(SP)
  lw    S2, 0x40(SP)
  lw    S1, 0x3c(SP)
  lw    S0, 0x38(SP)
  jr    RA
   addiu SP, SP, 0x50

func_80108C0C:
  addiu SP, SP, -0x40
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F28, 0x38(SP)
  sdc1  F26, 0x30(SP)
  sdc1  F24, 0x28(SP)
  sdc1  F22, 0x20(SP)
  sdc1  F20, 0x18(SP)
  jal   func_8007959C
   li    A0, 876
  li    A0, 111
  jal   func_80043510
   move  A1, R0
  move  S0, V0
  lui   A1, hi(D_800F64C8)
  lw    A1, lo(D_800F64C8)(A1)
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lwc1  F0, 0x14(S0)
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x14(S0)
  lwc1  F0, 0x10(S0)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x10(S0)
  mtc1  R0, F22
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F20
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_801135B8)
  ldc1  F24, lo(D_801135B8)(AT)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F26
L80108CAC:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  add.d F0, F0, F24
  cvt.s.d F20, F0
  c.lt.s F20, F26
  nop
  bc1t  L80108CAC
   nop
  jal   func_80105EC4
   nop
  lui   AT, hi(D_800F8D12) ;AT, 0x8010
  sh    R0, lo(D_800F8D12)(AT)
  jal   func_800542B8
   move  A0, R0
  jal   func_80105DDC
   nop
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F0
  nop
  c.le.s F0, F20
  nop
  bc1f  L80108DE0
   nop
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_801135C0)
  ldc1  F24, lo(D_801135C0)(AT)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F26
L80108D70:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  sub.d F0, F0, F24
  cvt.s.d F20, F0
  c.le.s F26, F20
  nop
  bc1t  L80108D70
   nop
L80108DE0:
  jal   func_8004430C
   move  A0, S0
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F28, 0x38(SP)
  ldc1  F26, 0x30(SP)
  ldc1  F24, 0x28(SP)
  ldc1  F22, 0x20(SP)
  ldc1  F20, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x40

; Star space event
__PP64_INTERNAL_STAR_SPACE_EVENT:
func_80108E0C:
  addiu SP, SP, -0x40
  sw    RA, 0x3c(SP)
  sw    S2, 0x38(SP)
  sw    S1, 0x34(SP)
  jal   func_800558F4
   sw    S0, 0x30(SP)
  move  S0, V0
  lui   S1, hi(D_800F93A8)
  addiu S1, S1, lo(D_800F93A8)
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  li    V0, 4
  beq   V1, V0, L80109634
   move  S2, R0
  sll   A0, S0, 0x10
  jal   func_80102C3C
   sra   A0, A0, 0x10
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  li    V1, 1
  bne   V0, V1, L801091AC
   sll   A0, S0, 0x10
  lui   A0, hi(D_800F93C6)
  jal   func_80046D2C
   lh    A0, lo(D_800F93C6)(A0)
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  jal   func_80102830
   nop
  sll   V0, V0, 0x10
  li    A0, -1
  li    A1, 8
  jal   func_80056C30
   sra   A2, V0, 0x10
  jal   func_8007D838
   nop
  li    AT, 0x3FCC0000 ;1.593750
  ori AT, AT, 0xcccd
  mtc1  AT, F12
  nop
  jal   func_80052F70
   move  S0, V0
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V1, V0, 2
  lui   V0, hi(p1_turn_status)
  addu  V0, V0, V1
  lb    V0, lo(p1_turn_status)(V0)
  beqz  V0, L80108F58
   li    V0, 24
  sb    V0, 0x20(SP)
  lui   V0, hi(p1_char)
  addu  V0, V0, V1
  lbu   V0, lo(p1_char)(V0)
  sb    V0, 0x21(SP)
  sb    R0, 0x22(SP)
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 3
  li    A1, 561
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  jal   func_80056458
   nop
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  j     L80108F70
   nop
L80108F58:
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
L80108F60:
  beqz  V0, L80108F70
   li    A0, 3
  jal   func_8005600C
   li    A1, 556
L80108F70:
  lh    V0, 0x1e(S1)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  slti  V0, V0, 0x63
  bnez  V0, L80108FB4
   nop
  jal   func_8007959C
   li    A0, 288
  li    A0, 3
  j     L80109174
   li    A1, 555
L80108FB4:
  lh    V0, 0x1e(S1)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0x14
  bnez  V0, L80109164
   nop
  jal   func_8007959C
   li    A0, 286
  li    A0, 3
L80108FF0:
  jal   func_800560A4
   li    A1, 551
  jal   func_801041D4
   nop
  jal   func_80056144
   move  S0, V0
  jal   func_80056168
   sll   S0, S0, 0x10
  sra   S0, S0, 0x10
  li    V0, 1
  beq   S0, V0, L80109114
   slti  V0, S0, 2
  beql  V0, R0, L80109038
   li    V0, 2
  beqz  S0, L80109048
   nop
  j     L80109634
   nop
L80109038:
  beq   S0, V0, L80109154
   nop
  j     L80109634
   nop
L80109048:
  lh    A0, 0x1e(S1)
  jal   func_8004CA34
   li    A1, -20
  lh    A0, 0x1e(S1)
  jal   func_800614B4
   li    A1, -20
  jal   func_8007D9E0
   li    A0, 30
  bnez  S2, L801090DC
   li    A0, 3
  jal   func_8005600C
   li    A1, 553
  lui   V0, hi(D_800CCC16)
  lb    V0, lo(D_800CCC16)(V0)
  beqz  V0, L801090B0
   nop
  jal   func_80079464
   nop
  lui   A0, hi(D_800F64B0)
  lh    A0, lo(D_800F64B0)(A0)
  jal   func_800114E8
   li    A1, 60
  li    V0, -1
  lui   AT, hi(D_800F64B0)
  j     L801090B8
   sh    V0, lo(D_800F64B0)(AT)
L801090B0:
  jal   func_800794A8
   li    A0, 90
L801090B8:
  lui   A0, hi(D_8011371C)
  jal   func_80103968
   lw    A0, lo(D_8011371C)(A0)
  jal   func_800573AC
   nop
  jal   func_8006706C
   li    A0, 2
  j     L80109634
   nop
L801090DC:
  jal   func_8005600C
   li    A1, 557
  jal   func_80108C0C
   nop
  jal   func_8007D9E0
   li    A0, 30
  lui   A0, hi(D_800F64C8)
  jal   func_801039E4
   lw    A0, lo(D_800F64C8)(A0)
  li    A0, 5
  jal   func_8005600C
   li    A1, 558
  j     L801095F8
   nop
L80109114:
  lui   V0, hi(D_800CCC16)
  lb    V0, lo(D_800CCC16)(V0)
  beqz  V0, L80109144
   li    A0, 3
  lui   A0, hi(D_800F64B0)
  lh    A0, lo(D_800F64B0)(A0)
  jal   func_800114E8
   li    A1, 60
  li    V0, -1
  lui   AT, hi(D_800F64B0)
  sh    V0, lo(D_800F64B0)(AT)
  li    A0, 3
L80109144:
  jal   func_8005600C
   li    A1, 554
  j     L801095F8
   nop
L80109154:
  jal   __PP64_INTERNAL_VIEW_MAP
   nop
  j     L80108FF0
   li    A0, 3
L80109164:
  jal   func_8007959C
   li    A0, 288
  li    A0, 3
  li    A1, 552
L80109174:
  jal   func_8005600C
   nop
  lui   V0, hi(D_800CCC16)
  lb    V0, lo(D_800CCC16)(V0)
  beqz  V0, L801095F8
   nop
  lui   A0, hi(D_800F64B0)
  lh    A0, lo(D_800F64B0)(A0)
  jal   func_800114E8
   li    A1, 60
  li    V0, -1
  lui   AT, hi(D_800F64B0)
  j     L801095F8
   sh    V0, lo(D_800F64B0)(AT)
L801091AC:
  jal   func_80102C3C
   sra   A0, A0, 0x10
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  li    V1, 2
  bne   V0, V1, L80109634
   nop
  jal   func_80046D2C
   lh    A0, 0x1e(S1)
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  lh    V0, 0x1c(S1)
  sll   V0, V0, 1
  li    A0, -1
  lui   A2, hi(D_80111994)
  addu  A2, A2, V0
  lh    A2, lo(D_80111994)(A2)
  jal   func_80056C30
   li    A1, 8
  jal   func_8007D838
   nop
  li    AT, 0x3FCC0000 ;1.593750
  ori AT, AT, 0xcccd
  mtc1  AT, F12
  nop
  jal   func_80052F70
   move  S0, V0
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  bnez  V0, L8010924C
   nop
  jal   func_8007959C
   li    A0, 867
L8010924C:
  lh    V0, 0x1e(S1)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_turn_status)
  addu  V0, V0, V1
  lb    V0, lo(p1_turn_status)(V0)
  beqz  V0, L80109368
   nop
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beqz  V0, L801092C4
   li    A0, 3
  jal   func_8005600C
   li    A1, 559
  jal   func_80108C0C
   nop
  jal   func_8007D9E0
   li    A0, 30
  li    A0, 5
  jal   func_8005600C
   li    A1, 560
  lh    A0, 0x1e(S1)
  jal   func_8004CA34
   li    A1, 20
  lh    A0, 0x1e(S1)
  j     L8010957C
   li    A1, 20
L801092C4:
  lui   V0, hi(D_800F8D18)
  lh    V0, lo(D_800F8D18)(V0)
  bnez  V0, L801092F4
   li    A0, 5
  jal   func_8005600C
   li    A1, 1063
  lh    A0, 0x1e(S1)
  jal   func_8004CA34
   li    A1, 20
  lh    A0, 0x1e(S1)
  j     L8010957C
   li    A1, 20
L801092F4:
  lui   S0, hi(D_800F8D18)
  addiu S0, S0, lo(D_800F8D18)
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  lh    A2, 0(S0)
  jal   func_800A5660
   addiu A0, SP, 0x20
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 5
  li    A1, 1062
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  jal   func_80056458
   nop
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  lh    A0, 0x1e(S1)
  jal   func_8004CA34
   lh    A1, 0(S0)
  lh    A0, 0x1e(S1)
  jal   func_800614B4
   lh    A1, 0(S0)
  j     L80109584
   sh    R0, 0(S0)
L80109368:
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  bnez  V0, L80108F60
   li    S2, 1
  lh    V0, 0x1e(S1)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  bnez  V0, L801093B4
   li    A0, 5
  jal   func_8005600C
   li    A1, 1058
  j     L801095F8
   nop
L801093B4:
  jal   func_8005600C
   li    A1, 1057
  lui   A0, hi(D_800F64C8)
  lw    A0, lo(D_800F64C8)(A0)
  lui   A1, 0x4000
  jal   func_80059120
   lui   A2, 0xbf00
  lui   A0, hi(D_800F64C8)
  jal   func_80059158
   lw    A0, lo(D_800F64C8)(A0)
  lui   A0, hi(D_800F64C8)
  lw    A0, lo(D_800F64C8)(A0)
  lui   A1, 0x4000
  jal   func_80059120
   lui   A2, 0xbf00
  lui   A0, hi(D_800F64C8)
  jal   func_80059158
   lw    A0, lo(D_800F64C8)(A0)
  jal   func_80103B70
   nop
  lh    A0, 0x1e(S1)
  jal   func_80059FD0
   move  S0, V0
  lui   AT, hi(D_801122A4)
  addu  AT, AT, V0
  lbu   V0, lo(D_801122A4)(AT)
  slt   S0, S0, V0
  bnel  S0, R0, L80109594
   sw    R0, 0x10(SP)
  lh    V0, 0x1e(S1)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 5
  bnez  V0, L8010948C
   li    A0, 5
  jal   func_8005600C
   li    A1, 1059
  lui   V1, hi(D_800F8D18)
  addiu V1, V1, lo(D_800F8D18)
  lhu   V0, 0(V1)
  addiu V0, V0, 5
  sh    V0, 0(V1)
  lh    A0, 0x1e(S1)
  jal   func_8004CA34
   li    A1, -5
  lh    A0, 0x1e(S1)
  j     L8010957C
   li    A1, -5
L8010948C:
  lh    V1, 0x1e(S1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  lui   A2, hi(p1_coins)
  addu  A2, A2, V0
  lh    A2, lo(p1_coins)(A2)
  jal   func_800A5660
   addiu A0, SP, 0x20
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 5
  li    A1, 1061
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  lui   A0, hi(D_800F8D18)
  addiu A0, A0, lo(D_800F8D18)
  lh    V1, 0x1e(S1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lhu   V1, 0(A0)
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lhu   V0, lo(p1_coins)(AT)
  addu  V1, V1, V0
  sh    V1, 0(A0)
  lh    A0, 0x1e(S1)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   A1, hi(p1_coins)
  addu  A1, A1, V0
  lh    A1, lo(p1_coins)(A1)
  jal   func_8004CA34
   SUBU A1 R0 A1
  lh    A0, 0x1e(S1)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   A1, hi(p1_coins)
  addu  A1, A1, V0
  lh    A1, lo(p1_coins)(A1)
  SUBU  A1 R0 A1
L8010957C:
  jal   func_800614B4
   nop
L80109584:
  jal   func_8007D9E0
   li    A0, 30
  j     L801095F8
   nop
L80109594:
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 5
  li    A1, 1060
  move  A2, R0
  jal   func_80056368
   move  A3, R0
  jal   func_80056144
   nop
  lh    A0, 0x1e(S1)
  jal   func_8004CA34
   li    A1, 5
  lh    A0, 0x1e(S1)
  jal   func_800614B4
   li    A1, 5
  jal   func_8007D9E0
   li    A0, 30
  jal   func_80056124
   nop
  jal   func_80056458
   nop
  jal   func_80056144
   nop
  jal   func_80056168
   nop
L801095F8:
  jal   func_8004655C
   lh    A0, 0x1e(S1)
  jal   func_8007D838
   nop
  li    AT, 0x3FA60000 ;1.296875
  ori AT, AT, 0x6666
  mtc1  AT, F12
  nop
  jal   func_80052F70
   move  S0, V0
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
L80109634:
  lw    RA, 0x3c(SP)
  lw    S2, 0x38(SP)
  lw    S1, 0x34(SP)
  lw    S0, 0x30(SP)
  jr    RA
   addiu SP, SP, 0x40

; Bank event
__PP64_INTERNAL_BANK_SPACE_EVENT:
func_8010964C:
  addiu SP, SP, -0x50
  sw    RA, 0x4c(SP)
  sw    S2, 0x48(SP)
  sw    S1, 0x44(SP)
  jal   func_800558F4
   sw    S0, 0x40(SP)
  move  S0, V0
  lui   S2, hi(D_800F93A8)
  addiu S2, S2, lo(D_800F93A8)
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
  li    V0, 4
  beq   A0, V0, L80109A60
   nop
  jal   func_80047DE8
   nop
  bgtz  V0, L801096A0
   li    A0, -1
  jal   func_80067170
   li    A1, 3
  li    A0, -1
L801096A0:
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  sll   V0, S0, 0x10
  sra   V1, V0, 0x10
  li    V0, ${f[0]}
  beq   V1, V0, L801096D4
   li    V0, ${f[1]}
  bne   V1, V0, L801096E8
   li    A0, -1
  li    A1, 8
  j     L801096E0
   li    A2, ${m[1]}
L801096D4:
  li    A0, -1
  li    A1, 8
  li    A2, ${m[0]}
L801096E0:
  jal   func_80056C30
   nop
L801096E8:
  jal   func_8007D9E0
   li    A0, 8
  jal   func_8007959C
   li    A0, 230
  lh    A0, 0x1e(S2)
  jal   func_80047DE8
   nop
  blez  V0, L8010996C
   nop
  jal   func_80046D2C
   lh    A0, 0x1e(S2)
  lh    V1, 0x1e(S2)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A2, hi(p1_coins)
  addu  A2, A2, V0
  lh    A2, lo(p1_coins)(A2)
  sltu  V0, R0, A2
  slti  V1, A2, 5
  and   V0, V0, V1
  beqz  V0, L80109858
   nop
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  jal   func_800A5660
   addiu A0, SP, 0x20
  addiu S1, SP, 0x30
  lui   S0, hi(D_800F8D1E)
  addiu S0, S0, lo(D_800F8D1E)
  lh    A3, 0(S0)
  lh    V1, 0x1e(S2)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A2, hi(p1_coins)
  addu  A2, A2, V0
  lh    A2, lo(p1_coins)(A2)
  move  A0, S1
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  jal   func_800A5660
   addu  A2, A3, A2
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 2
  li    A1, 23
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, S1
  jal   func_80056144
   nop
  lh    V1, 0x1e(S2)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lhu   V1, 0(S0)
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lhu   V0, lo(p1_coins)(AT)
  addu  V1, V1, V0
  jal   func_8010608C
   sh    V1, 0(S0)
  lh    A0, 0x1e(S2)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   A1, hi(p1_coins)
  addu  A1, A1, V0
  lh    A1, lo(p1_coins)(A1)
  jal   func_8004CA34
   SUBU A1 R0 A1
  lh    A0, 0x1e(S2)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   A1, hi(p1_coins)
  addu  A1, A1, V0
  lh    A1, lo(p1_coins)(A1)
  j     L8010992C
   SUBU A1 R0 A1
L80109858:
  lh    V0, 0x1e(S2)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  bnez  V0, L801098C4
   addiu A0, SP, 0x20
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  lui   A2, hi(D_800F8D1E)
  lh    A2, lo(D_800F8D1E)(A2)
  jal   func_800A5660
   addiu A0, SP, 0x20
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 2
  li    A1, 24
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  j     L80109944
   nop
L801098C4:
  lui   S0, hi(D_800F8D1E)
  addiu S0, S0, lo(D_800F8D1E)
  lh    A2, 0(S0)
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  jal   func_800A5660
   addiu A2, A2, 5
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 2
  li    A1, 22
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  jal   func_80056144
   nop
  lhu   V0, 0(S0)
  addiu V0, V0, 5
  jal   func_8010608C
   sh    V0, 0(S0)
  lh    A0, 0x1e(S2)
  jal   func_8004CA34
   li    A1, -5
  lh    A0, 0x1e(S2)
  li    A1, -5
L8010992C:
  jal   func_800614B4
   nop
  jal   func_8007D9E0
   li    A0, 30
  jal   func_80056124
   nop
L80109944:
  jal   func_80056458
   nop
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  jal   func_8004655C
   lh    A0, 0x1e(S2)
  j     L80109A60
   nop
L8010996C:
  lui   S0, hi(D_800F8D1E)
  addiu S0, S0, lo(D_800F8D1E)
  lh    A2, 0(S0)
  beqz  A2, L80109A58
   li    A0, 2
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  jal   func_800A5660
   addiu A0, SP, 0x20
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 2
  li    A1, 25
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  jal   func_80056144
   nop
  lh    A0, 0x1e(S2)
  jal   func_8004CA34
   lh    A1, 0(S0)
  lh    A0, 0x1e(S2)
  jal   func_800614B4
   lh    A1, 0(S0)
  jal   func_8010608C
   sh    R0, 0(S0)
  jal   func_8005DC3C
   li    A0, -1
  lw    A0, 0x24(V0)
  jal   func_8005670C
   addiu A0, A0, 0x18
  li    A0, -1
  li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  lh    V1, 0x1e(S2)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 259
  jal   func_8007D9E0
   li    A0, 30
  jal   func_80056124
   nop
  jal   func_80056458
   nop
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  j     L80109A60
   nop
L80109A58:
  jal   func_8005600C
   li    A1, 26
L80109A60:
  lw    RA, 0x4c(SP)
  lw    S2, 0x48(SP)
  lw    S1, 0x44(SP)
  lw    S0, 0x40(SP)
  jr    RA
   addiu SP, SP, 0x50

func_80109A78:
  move  A3, A0
  move  A1, R0
  lui   A2, hi(D_801138B8)
  lw    A2, lo(D_801138B8)(A2)
  lui   V0, hi(D_801138B4)
  lw    V0, lo(D_801138B4)(V0)
  lui   A0, hi(D_801122E0)
  addiu A0, A0, lo(D_801122E0)
  sll   V1, V0, 2
  addu  V1, V1, V0
  addu  V1, V1, A0
  addu  V0, A2, A1
L80109AA8:
  lbu   V0, 0(V0)
  beqz  V0, L80109AC8
   addu  V0, V1, A1
  lb    V0, 0(V0)
  bnel  V0, A3, L80109ACC
   addiu A1, A1, 1
  j     L80109ADC
   move  V0, A1
L80109AC8:
  addiu A1, A1, 1
L80109ACC:
  slti  V0, A1, 5
  bnez  V0, L80109AA8
   addu  V0, A2, A1
  li    V0, -1
L80109ADC:
  jr    RA
   nop

func_80109AE4:
  move  A1, R0
  lui   V0, hi(D_801138B4)
  lw    V0, lo(D_801138B4)(V0)
  lui   A0, hi(D_801122E0)
  addiu A0, A0, lo(D_801122E0)
  sll   V1, V0, 2
  addu  V1, V1, V0
  addu  V1, V1, A0
  li    A0, -1
  addu  V0, V1, A1
L80109B0C:
  lb    V0, 0(V0)
  beq   V0, A0, L80109B28
   nop
  addiu A1, A1, 1
  slti  V0, A1, 5
  bnel  V0, R0, L80109B0C
   addu  V0, V1, A1
L80109B28:
  jr    RA
   move  V0, A1

; Item shop
__PP64_INTERNAL_ITEM_SHOP_EVENT:
func_80109B30:
  addiu SP, SP, -0x70
  sw    RA, 0x68(SP)
  sw    S5, 0x64(SP)
  sw    S4, 0x60(SP)
  sw    S3, 0x5c(SP)
  sw    S2, 0x58(SP)
  sw    S1, 0x54(SP)
  sw    S0, 0x50(SP)
  lui   S4, hi(D_800F93A8)
  addiu S4, S4, lo(D_800F93A8)
  jal   func_8005DC3C
   li    A0, -1
  move  S5, V0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  li    V0, 4
  beq   V1, V0, L8010A118
   li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  li    A0, -1
  li    A1, 8
  jal   func_80056C30
   li    A2, ${E[0]}
  jal   func_8007D9E0
   li    A0, 8
  lui   A0, hi(D_800F93C6)
  jal   func_80046D2C
   lh    A0, lo(D_800F93C6)(A0)
  jal   func_8007959C
   li    A0, 230
  lui   V1, hi(D_800F93B0)
  lh    V1, lo(D_800F93B0)(V1)
  lui   V0, hi(D_800F93AE)
  lh    V0, lo(D_800F93AE)(V0)
  bne   V1, V0, L80109BD8
   li    A0, 1
  jal   func_8005600C
   li    A1, 505
  j     L8010A10C
   nop
L80109BD8:
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   V1, hi(p1_item)
  addu  V1, V1, V0
  lb    V1, lo(p1_item)(V1)
  li    V0, -1
  beq   V1, V0, L80109C18
   nop
  jal   func_8005600C
   li    A1, 496
  j     L8010A10C
   nop
L80109C18:
  lh    V0, 0x1e(S4)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0xa
  beqz  V0, L80109C58
   li    A0, 1
  jal   func_8005600C
   li    A1, 495
  j     L8010A10C
   nop
L80109C58:
  jal   func_800560A4
   li    A1, 494
  jal   func_80103FB0
   nop
  jal   func_80056144
   move  S0, V0
  jal   func_80056168
   nop
  li    V0, 1
  beq   S0, V0, L8010A0E8
   slti  V0, S0, 2
  beql  V0, R0, L80109C9C
   li    V0, 2
  beqz  S0, L80109CAC
   move  S0, R0
  j     L8010A10C
   nop
L80109C9C:
  beq   S0, V0, L8010A0FC
   nop
  j     L8010A10C
   nop
L80109CAC:
  lh    A1, 8(S4)
  lh    V0, 4(S4)
  lui   A0, hi(D_801122D4)
  addiu A0, A0, lo(D_801122D4)
  sll   V1, V0, 1
  addu  V1, V1, V0
  addu  V1, V1, A0
  addu  A0, V1, S0
L80109CCC:
  lbu   V0, 0(A0)
  slt   V0, A1, V0
  bnel  V0, R0, L80109CF0
   addiu S0, S0, 1
  lbu   V0, 1(A0)
  slt   V0, A1, V0
  bnez  V0, L80109CFC
   nop
  addiu S0, S0, 1
L80109CF0:
  slti  V0, S0, 2
  bnez  V0, L80109CCC
   addu  A0, V1, S0
L80109CFC:
  lh    A0, 0x1e(S4)
  jal   func_80059FD0
   move  S2, R0
  lui   A0, hi(D_801122C8)
  addiu A0, A0, lo(D_801122C8)
  sll   V1, S0, 2
  addu  V1, V1, A0
  addu  V1, V1, V0
  lbu   S3, 0(V1)
  move  S0, R0
  addiu T2, SP, 0x20
  li    T0, 1
  addiu A3, SP, 0x28
  lui   V1, hi(D_801122E0)
  addiu V1, V1, lo(D_801122E0)
  sll   V0, S3, 2
  addu  V0, V0, S3
  addu  T1, V0, V1
  li    T3, -1
  addu  A2, T2, S0
L80109D4C:
  sb    T0, 0(A2)
  sll   V0, S0, 2
  addu  A1, A3, V0
  sb    R0, 0(A1)
  addu  V0, T1, S0
  lb    V0, 0(V0)
  beql  V0, T3, L80109DC0
   addiu S0, S0, 1
  lui   A0, hi(D_800CC000)
  addu  A0, A0, V0
  lbu   A0, lo(D_800CC000)(A0)
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V0, V0, A0
  beqz  V0, L80109DB0
   sll   V0, S0, 2
  sb    R0, 0(A2)
  sb    T0, 0(A1)
L80109DB0:
  addu  V0, A3, V0
  sb    R0, 1(V0)
  addiu S2, S2, 1
  addiu S0, S0, 1
L80109DC0:
  slti  V0, S0, 5
  bnez  V0, L80109D4C
   addu  A2, T2, S0
  slti  V0, S0, 8
  beqz  V0, L80109DF4
   addiu V1, SP, 0x20
  li    A0, 1
  addu  V0, V1, S0
L80109DE0:
  sb    A0, 0(V0)
  addiu S0, S0, 1
  slti  V0, S0, 8
  bnez  V0, L80109DE0
   addu  V0, V1, S0
L80109DF4:
  jal   func_8008DAC0
   li    A0, 40
  jal   func_80056524
   li    A0, 40
  sll   V1, S3, 2
  addiu V0, SP, 0x30
  sw    V0, 0x10(SP)
  addiu V0, SP, 0x34
  sw    V0, 0x14(SP)
  addiu V0, SP, 0x38
  sw    V0, 0x18(SP)
  li    A0, 1
  lui   A1, hi(D_80112304)
  addu  A1, A1, V1
  lw    A1, lo(D_80112304)(A1)
  addiu A2, SP, 0x28
  jal   func_80056368
   addiu A3, SP, 0x2c
  jal   func_80056524
   move  A0, R0
  lui   AT, hi(D_801138B4)
  sw    S3, lo(D_801138B4)(AT)
  addiu A0, SP, 0x20
  lui   AT, hi(D_801138B8)
  jal   func_80103CF4
   sw    A0, lo(D_801138B8)(AT)
  jal   func_80056144
   move  S1, V0
  jal   func_80056168
   nop
  bne   S1, S2, L80109E98
   addiu V0, S2, 1
  lui   AT, hi(D_800FC734)
  sh    R0, lo(D_800FC734)(AT)
  lh    A0, 0x1e(S4)
  jal   func_8004E484
   move  S0, R0
  li    V0, 1
  lui   AT, hi(D_800FC734)
  j     L80109CAC
   sh    V0, lo(D_800FC734)(AT)
L80109E98:
  xor   V0, S1, V0
  sltiu V0, V0, 1
  nor   V1, R0, S1
  sltiu V1, V1, 1
  or    V0, V0, V1
  bnel  V0, R0, L80109C58
   li    A0, 1
  lui   V0, hi(D_801122E0)
  addiu V0, V0, lo(D_801122E0)
  sll   S0, S3, 2
  addu  S0, S0, S3
  addu  S0, S0, V0
  addu  S0, S0, S1
  lb    V0, 0(S0)
  lui   A1, hi(D_800CC000)
  addu  A1, A1, V0
  lbu   A1, lo(D_800CC000)(A1)
  lh    A0, 0x1e(S4)
  jal   func_8004CA34
   SUBU A1 R0 A1
  lb    V0, 0(S0)
  lui   A1, hi(D_800CC000)
  addu  A1, A1, V0
  lbu   A1, lo(D_800CC000)(A1)
  lh    A0, 0x1e(S4)
  jal   func_800614B4
   SUBU A1 R0 A1
  jal   func_8007D9E0
   li    A0, 30
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lbu   V1, 0(S0)
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  sb    V1, lo(p1_item)(AT)
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  move  S2, V0
  lb    V0, 0(S0)
  sll   V0, V0, 2
  lui   A0, hi(D_800CCBDC)
  addu  A0, A0, V0
  lw    A0, lo(D_800CCBDC)(A0)
  jal   func_80017680
   sll   S1, S2, 0x10
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S3, V0
  jal   func_80017800
   move  A0, S0
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  sll   A2, S3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   move  A2, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082418
   li    A2, 4096
  move  A0, S0
  move  A1, R0
  li    A2, 160
  jal   func_80081AD0
   li    A3, 90
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  addiu S0, SP, 0x40
  jal   func_8005670C
   move  A0, S0
  lw    A2, 0x24(S5)
  addiu A2, A2, 0x18
  move  A0, A2
  move  A1, S0
  jal   func_80056B78
   li    A3, 10
  jal   func_8007959C
   li    A0, 25
  move  S0, R0
  sll   A2, S0, 1
L8010A020:
  addu  A2, A2, S0
  sll   A2, A2, 3
  addu  A2, A2, S0
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010A020
   sll   A2, S0, 1
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   li    A2, 256
  li    A0, -1
  li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 5
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 259
  jal   func_8007D9E0
   li    A0, 45
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  jal   func_8007D9E0
   li    A0, 10
  sll   A0, S3, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  jal   func_8007F8B0
   move  A0, S0
  j     L8010A10C
   nop
L8010A0E8:
  li    A0, 1
  jal   func_8005600C
   li    A1, 497
  j     L8010A10C
   nop
L8010A0FC:
  jal   __PP64_INTERNAL_VIEW_MAP
   nop
  j     L80109C58
   li    A0, 1
L8010A10C:
  lh    A0, 0x1e(S4)
  jal   func_8004655C
   nop
L8010A118:
  lw    RA, 0x68(SP)
  lw    S5, 0x64(SP)
  lw    S4, 0x60(SP)
  lw    S3, 0x5c(SP)
  lw    S2, 0x58(SP)
  lw    S1, 0x54(SP)
  lw    S0, 0x50(SP)
  jr    RA
   addiu SP, SP, 0x70

func_8010A13C:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  jal   func_80044258
   move  S2, A0
  move  S1, R0
L8010A15C:
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  andi  S0, S1, 0xff
  lh    A0, 0(V0)
  jal   func_8002D0A0
   move  A1, S0
  lw    V0, 0x40(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   move  A1, S0
  jal   func_8007DA44
   addiu S1, S1, 0xc
  slti  V0, S1, 0x100
  bnez  V0, L8010A15C
   nop
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   li    A1, 255
  lw    V0, 0x40(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   li    A1, 255
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_8010A1DC:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S2, A0
  li    S1, 255
L8010A1F8:
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  andi  S0, S1, 0xff
  lh    A0, 0(V0)
  jal   func_8002D0A0
   move  A1, S0
  lw    V0, 0x40(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   move  A1, S0
  jal   func_8007DA44
   addiu S1, S1, -0xc
  bgez  S1, L8010A1F8
   nop
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   move  A1, R0
  lw    V0, 0x40(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   move  A1, R0
  jal   func_800442DC
   move  A0, S2
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_8010A27C:
  addiu SP, SP, -0x58
  sw    RA, 0x3c(SP)
  sw    FP, 0x38(SP)
  sw    S7, 0x34(SP)
  sw    S6, 0x30(SP)
  sw    S5, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  sdc1  F24, 0x50(SP)
  sdc1  F22, 0x48(SP)
  sdc1  F20, 0x40(SP)
  move  S3, A0
  li    V0, -1
  bnel  S3, V0, L8010A784
   li    A0, 1
  lui A0, 0xa
  jal   func_80017680
   ori A0, A0, 0xb
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  FP, V0
  jal   func_80017800
   move  A0, S0
  move  S1, R0
  addiu S2, SP, 0x10
L8010A2F0:
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  beq   S1, V0, L8010A324
   sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  bnez  V0, L8010A338
   li    A0, 1
L8010A324:
  sll   V0, S1, 1
  addu  V0, V0, S2
  li    V1, -1
  j     L8010A3F8
   sh    V1, 0(V0)
L8010A338:
  jal   func_8007FA6C
   li    A1, 5
  sll   S0, S1, 1
  addu  S0, S0, S2
  sh    V0, 0(S0)
  sll   V0, V0, 0x10
  sll   A2, FP, 0x10
  sra   A0, V0, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  lh    A0, 0(S0)
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  lh    A0, 0(S0)
  move  A1, R0
  jal   func_8008225C
   move  A2, R0
  lh    A0, 0(S0)
  move  A1, R0
  jal   func_80082418
   li    A2, 4096
  sll   V0, S1, 3
  lui   AT, hi(D_8011233C)
  addu  AT, AT, V0
  lwc1  F0, lo(D_8011233C)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112340)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112340)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lh    A0, 0(S0)
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  lh    A0, 0(S0)
  move  A1, R0
  jal   func_80082488
   move  A2, R0
L8010A3F8:
  addiu S1, S1, 1
  slti  V0, S1, 4
  bnez  V0, L8010A2F0
   nop
  jal   func_8007959C
   li    A0, 887
  move  S2, R0
  addiu S4, SP, 0x10
  li    S5, -1
  move  S1, R0
L8010A420:
  sll   S3, S2, 4
  sll   V0, S1, 1
L8010A428:
  addu  S0, V0, S4
  lh    A0, 0(S0)
  beq   A0, S5, L8010A4C4
   sll   V0, S1, 3
  mtc1  S2, F4
  nop
  cvt.s.w F4, F4
  lui   AT, hi(D_8011235C)
  addu  AT, AT, V0
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F4, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, V0
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F4, F4, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112340)(AT)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  lh    A0, 0(S0)
  move  A1, R0
  jal   func_80082488
   andi  A2, S3, 0xffff
L8010A4C4:
  addiu S1, S1, 1
  slti  V0, S1, 4
  bnez  V0, L8010A428
   sll   V0, S1, 1
  jal   func_8007DA44
   addiu S2, S2, 1
  slti  V0, S2, 0x11
  bnez  V0, L8010A420
   move  S1, R0
  move  S6, R0
  addiu S2, SP, 0x10
  li    S4, -1
  lui   S3, hi(D_800FD2C0)
  addiu S3, S3, lo(D_800FD2C0)
  sll   S0, S1, 1
L8010A500:
  addu  V0, S0, S2
  lh    A0, 0(V0)
  beql  A0, S4, L8010A55C
   addiu S1, S1, 1
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  addu  V0, S0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V1, V0, S3
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lhu   V0, lo(p1_stars)(AT)
  addiu V0, V0, -1
  sh    V0, 0xe(V1)
  addiu S6, S6, 1
  sll   A0, S1, 0x10
  sra   A0, A0, 0x10
  jal   func_80067170
   li    A1, 5
  addiu S1, S1, 1
L8010A55C:
  slti  V0, S1, 4
  bnez  V0, L8010A500
   sll   S0, S1, 1
  jal   func_8007959C
   li    A0, 228
  move  S2, R0
  addiu S5, SP, 0x10
  li    S7, -1
  li    AT, 0x41800000 ;16.000000
  mtc1  AT, F22
  move  S1, R0
L8010A588:
  sll   V1, S2, 1
  addu  V1, V1, S2
  sll   V0, V1, 4
  subu  V0, V0, V1
  sll   S4, V0, 1
  sll   V0, S1, 1
L8010A5A0:
  addu  S3, V0, S5
  lh    V0, 0(S3)
  beq   V0, S7, L8010A64C
   sll   S0, S1, 3
  lui   AT,hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F20, lo(D_80112360)(AT)
  mul.s F20, F20, F22
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112340)(AT)
  add.s F20, F20, F0
  mtc1  S4, F12
  nop
  cvt.d.w F12, F12
  lui   AT, hi(D_801135D0)
  ldc1  F0, lo(D_801135D0)(AT)
  mul.d F12, F12, F0
  jal   func_800A4FA0
   cvt.s.d F12, F12
  add.s F0, F0, F0
  add.s F20, F20, F0
  trunc.w.s F0, F20
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S0
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F0, F22
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lh    A0, 0(S3)
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
L8010A64C:
  addiu S1, S1, 1
  slti  V0, S1, 4
  bnez  V0, L8010A5A0
   sll   V0, S1, 1
  jal   func_8007DA44
   addiu S2, S2, 1
  slti  V0, S2, 0x1e
  bnez  V0, L8010A588
   move  S1, R0
  li    S2, 16
  addiu S4, SP, 0x10
  li    S5, -1
L8010A67C:
  sll   S3, S2, 4
  sll   V0, S1, 1
L8010A684:
  addu  S0, V0, S4
  lh    A0, 0(S0)
  beq   A0, S5, L8010A720
   sll   V0, S1, 3
  mtc1  S2, F4
  nop
  cvt.s.w F4, F4
  lui   AT, hi(D_8011235C)
  addu  AT, AT, V0
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F4, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, V0
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F4, F4, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112340)(AT)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  lh    A0, 0(S0)
  move  A1, R0
  jal   func_80082488
   andi  A2, S3, 0xffff
L8010A720:
  addiu S1, S1, 1
  slti  V0, S1, 4
  bnez  V0, L8010A684
   sll   V0, S1, 1
  jal   func_8007DA44
   addiu S2, S2, -1
  bgez  S2, L8010A67C
   move  S1, R0
  addiu S0, SP, 0x10
  li    S2, -1
  sll   V0, S1, 1
L8010A74C:
  addu  V0, V0, S0
  lh    A0, 0(V0)
  beq   A0, S2, L8010A764
   addiu S1, S1, 1
  jal   func_8007F8B0
   nop
L8010A764:
  slti  V0, S1, 4
  bnez  V0, L8010A74C
   sll   V0, S1, 1
  sll   A0, FP, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  j     L8010AB1C
   move  V0, S6
L8010A784:
  jal   func_8007FA6C
   li    A1, 5
  move  S4, V0
  lui A0, 0xa
  jal   func_80017680
   ori A0, A0, 0xb
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S5, V0
  jal   func_80017800
   move  A0, S0
  sll   S0, S4, 0x10
  sra   S0, S0, 0x10
  sll   A2, S5, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   move  A2, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082418
   li    A2, 4096
  sll   V0, S3, 3
  lui   AT, hi(D_8011233C)
  addu  AT, AT, V0
  lwc1  F0, lo(D_8011233C)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112340)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112340)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  jal   func_8007959C
   li    A0, 887
  move  S0, R0
  sll   V0, S4, 0x10
  sra   S2, V0, 0x10
  sll   S1, S3, 3
L8010A87C:
  mtc1  S0, F4
  nop
  cvt.s.w F4, F4
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S1
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F4, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S1
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S1
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F4, F4, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, S1
  lwc1  F0, lo(D_80112340)(AT)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  move  A0, S2
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  sll   A2, S0, 4
  move  A0, S2
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0x11
  bnez  V0, L8010A87C
   sll   A0, S4, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  sll   V0, S3, 1
  addu  V0, V0, S3
  sll   V0, V0, 2
  addu  V0, V0, S3
  sll   V0, V0, 2
  lui   V1, hi(p1_stars)
  addu  V1, V1, V0
  lhu   V1, lo(p1_stars)(V1)
  addiu V1, V1, -1
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  sh    V1, lo(p1_stars)(AT)
  sll   A0, S3, 0x10
  sra   A0, A0, 0x10
  jal   func_80067170
   li    A1, 5
  jal   func_8007959C
   li    A0, 228
  move  S0, R0
  sll   S1, S3, 3
  li    AT, 0x41800000 ;16.000000
  mtc1  AT, F22
  lui   AT, hi(D_801135D8)
  ldc1  F24, lo(D_801135D8)(AT)
  sll   S2, S4, 0x10
L8010A998:
  lui   AT, hi(D_80112360)
  addu  AT, AT, S1
  lwc1  F20, lo(D_80112360)(AT)
  mul.s F20, F20, F22
  lui   AT, hi(D_80112340)
  addu  AT, AT, S1
  lwc1  F0, lo(D_80112340)(AT)
  add.s F20, F20, F0
  sll   V1, S0, 1
  addu  V1, V1, S0
  sll   V0, V1, 4
  subu  V0, V0, V1
  sll   V0, V0, 1
  mtc1  V0, F12
  nop
  cvt.d.w F12, F12
  mul.d F12, F12, F24
  jal   func_800A4FA0
   cvt.s.d F12, F12
  add.s F0, F0, F0
  add.s F20, F20, F0
  trunc.w.s F0, F20
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S1
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F0, F22
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S1
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  sra   A0, S2, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0x1e
  bnez  V0, L8010A998
   sll   V0, S4, 0x10
  li    S0, 16
  sra   S2, V0, 0x10
  sll   S1, S3, 3
L8010AA60:
  mtc1  S0, F4
  nop
  cvt.s.w F4, F4
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S1
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F4, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S1
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S1
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F4, F4, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, S1
  lwc1  F0, lo(D_80112340)(AT)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  move  A0, S2
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  sll   A2, S0, 4
  move  A0, S2
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, -1
  bgez  S0, L8010AA60
   sll   A0, S4, 0x10
  jal   func_8007F8B0
   sra   A0, A0, 0x10
  sll   A0, S5, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  li    V0, 1
L8010AB1C:
  lw    RA, 0x3c(SP)
  lw    FP, 0x38(SP)
  lw    S7, 0x34(SP)
  lw    S6, 0x30(SP)
  lw    S5, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  ldc1  F24, 0x50(SP)
  ldc1  F22, 0x48(SP)
  ldc1  F20, 0x40(SP)
  jr    RA
   addiu SP, SP, 0x58

func_8010AB58:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   func_80055E60
   nop
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_8010AB7C:
  addiu SP, SP, -0xb8
  sw    RA, 0x94(SP)
  sw    FP, 0x90(SP)
  sw    S7, 0x8c(SP)
  sw    S6, 0x88(SP)
  sw    S5, 0x84(SP)
  sw    S4, 0x80(SP)
  sw    S3, 0x7c(SP)
  sw    S2, 0x78(SP)
  sw    S1, 0x74(SP)
  sw    S0, 0x70(SP)
  sdc1  F26, 0xb0(SP)
  sdc1  F24, 0xa8(SP)
  sdc1  F22, 0xa0(SP)
  sdc1  F20, 0x98(SP)
  move  S4, A0
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  sh    V0, 0x2e(SP)
  lui A0, 0xa
  jal   func_80017680
   ori A0, A0, 0xb
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  sh    V0, 0x36(SP)
  jal   func_80017800
   move  A0, S0
  lhu   T0, 0x2e(SP)
  sll   S0, T0, 0x10
  sra   S0, S0, 0x10
  lhu   T0, 0x36(SP)
  sll   A2, T0, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   move  A2, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082418
   li    A2, 4096
  sll   V0, S4, 3
  lui   AT, hi(D_8011233C)
  addu  AT, AT, V0
  lwc1  F0, lo(D_8011233C)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112340)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112340)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  sh    V0, 0x3e(SP)
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  addu  V0, V0, S4
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sll   V0, V0, 2
  lui   A0, hi(D_8011237C)
  addu  A0, A0, V0
  lw    A0, lo(D_8011237C)(A0)
  jal   func_80017680
   move  S7, R0
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  sh    V0, 0x46(SP)
  jal   func_80017800
   move  A0, S0
  lhu   T0, 0x3e(SP)
  sll   V0, T0, 0x10
  sra   S0, V0, 0x10
  lhu   T0, 0x46(SP)
  sll   A2, T0, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  andi  V0, S4, 1
  beqz  V0, L8010AD68
   move  A0, S0
  move  A1, R0
  j     L8010AD7C
   li    A2, 4097
L8010AD68:
  lhu   T0, 0x3e(SP)
  sll   A0, T0, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  li    A2, 4096
L8010AD7C:
  jal   func_80082418
   move  S1, R0
  lhu   T0, 0x3e(SP)
  sll   S0, T0, 0x10
  sra   S0, S0, 0x10
  sll   V0, S4, 3
  lui   AT, hi(D_8011235C)
  addu  AT, AT, V0
  lwc1  F2, lo(D_8011235C)(AT)
  li    AT, 0x41800000 ;16.000000
  mtc1  AT, F4
  nop
  mul.s F2, F2, F4
  lui   AT, hi(D_8011233C)
  addu  AT, AT, V0
  lwc1  F0, lo(D_8011233C)(AT)
  sub.s F0, F0, F2
  li    AT, 0x41000000 ;8.000000
  mtc1  AT, F2
  nop
  sub.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F0, F0, F4
  lui   AT, hi(D_80112340)
  addu  AT, AT, V0
  lwc1  F2, lo(D_80112340)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  lhu   T0, 0x2e(SP)
  sll   V0, T0, 0x10
  sra   S3, V0, 0x10
  sll   S2, S4, 3
  lhu   T0, 0x3e(SP)
  sll   S5, T0, 0x10
L8010AE4C:
  mtc1  S1, F4
  nop
  cvt.s.w F4, F4
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S2
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F4, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S2
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S2
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F4, F4, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, S2
  lwc1  F0, lo(D_80112340)(AT)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  move  A0, S3
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  sll   S0, S1, 4
  andi  S0, S0, 0xffff
  move  A0, S3
  move  A1, R0
  jal   func_80082488
   move  A2, S0
  sra   A0, S5, 0x10
  move  A1, R0
  jal   func_80082488
   move  A2, S0
  jal   func_8007DA44
   addiu S1, S1, 1
  slti  V0, S1, 0x11
  bnez  V0, L8010AE4C
   move  A1, R0
  lhu   T0, 0x2e(SP)
  sll   A0, T0, 0x10
  sra   A0, A0, 0x10
  jal   func_80082488
   li    A2, 255
  lhu   T0, 0x3e(SP)
  sll   A0, T0, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  li    V0, 24
  sb    V0, 0x18(SP)
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  addu  V0, V0, S4
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sb    V0, 0x19(SP)
  sb    R0, 0x1a(SP)
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  li    A0, 1722
  addiu A1, SP, 0x18
  move  A2, R0
  jal   func_80055C88
   move  A3, R0
  sll   S0, S4, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  jal   func_80067170
   li    A1, 2
  jal   func_80055E3C
   move  A0, S4
  move  FP, R0
  move  S2, R0
  jal   func_8007959C
   li    A0, 886
  move  A0, S0
  li    A1, 3
  jal   func_800672BC
   li    A2, 5
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F12
  nop
  jal   func_8005A358
   sw    V0, 0x4c(SP)
  addiu S5, V0, 1
  move  S1, R0
  move  S6, R0
  sll   S0, S4, 3
  li    AT, 0x41800000 ;16.000000
  mtc1  AT, F24
  li    AT, 0x41000000 ;8.000000
  mtc1  AT, F26
  lhu   T0, 0x3e(SP)
  sll   T0, T0, 0x10
  sw    T0, 0x54(SP)
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  addu  V0, V0, S4
  sll   V0, V0, 2
  sw    V0, 0x5c(SP)
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  sw    V0, 0x64(SP)
  move  T0, V0
  addu  T0, T0, S4
  sw    T0, 0x64(SP)
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  sw    V0, 0x6c(SP)
  move  T0, V0
  addu  T0, T0, S4
  sw    T0, 0x6c(SP)
  lw    T0, 0x54(SP)
  sra   S3, T0, 0x10
L8010B054:
  sll   V0, S5, 0x10
  bnez  V0, L8010B080
   slti  V0, S2, 2
  jal   func_8007959C
   li    A0, 228
  li    AT, 0x41700000 ;15.000000
  mtc1  AT, F12
  jal   func_8005A358
   nop
  addiu S5, V0, 0x1e
  slti  V0, S2, 2
L8010B080:
  xori  V0, V0, 1
  subu  S2, S2, V0
  bnez  S2, L8010B150
   li    V0, 9
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F20, lo(D_80112360)(AT)
  mul.s F20, F20, F24
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112340)(AT)
  add.s F20, F20, F0
  sll   V1, S1, 1
  addu  V1, V1, S1
  sll   V0, V1, 4
  subu  V0, V0, V1
  sll   V0, V0, 1
  mtc1  V0, F12
  nop
  cvt.d.w F12, F12
  lui   AT, hi(D_801135E0)
  ldc1  F0, lo(D_801135E0)(AT)
  mul.d F12, F12, F0
  jal   func_800A4FA0
   cvt.s.d F12, F12
  add.s F0, F0, F0
  add.s F20, F20, F0
  trunc.w.s F0, F20
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  lhu   T0, 0x2e(SP)
  sll   A0, T0, 0x10
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S0
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F0, F24
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
/*  */  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  j     L8010B28C
   nop
L8010B150:
  bne   S2, V0, L8010B28C
   sll   V1, S6, 1
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S0
  lwc1  F20, lo(D_8011235C)(AT)
  mul.s F20, F20, F24
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F0, lo(D_8011233C)(AT)
  add.s F20, F20, F0
  addu  V1, V1, S6
  sll   V0, V1, 4
  subu  V0, V0, V1
  sll   V0, V0, 1
  mtc1  V0, F22
  nop
  cvt.d.w F22, F22
  lui   AT, hi(D_801135E8)
  ldc1  F0, lo(D_801135E8)(AT)
  mul.d F22, F22, F0
  cvt.s.d F22, F22
  jal   func_800A4FA0
   mov.s F12, F22
  add.s F0, F0, F0
  add.s F20, F20, F0
  trunc.w.s F0, F20
  mfc1  A2, F0
  nop
  sll   A2, A2, 0x10
  lhu   T0, 0x2e(SP)
  sll   A0, T0, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F0, F0, F24
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F2, lo(D_80112340)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F20, lo(D_8011233C)(AT)
  sub.s F20, F20, F26
  jal   func_800A4FA0
   mov.s F12, F22
  add.s F0, F0, F0
  add.s F20, F20, F0
  trunc.w.s F0, F20
  mfc1  A2, F0
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F0, F0, F24
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F2, lo(D_80112340)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lw    T0, 0x54(SP)
  sra   A0, T0, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  addiu S6, S6, 1
L8010B28C:
  lw    T0, 0x5c(SP)
  lui   V0, hi(D_800FD2C6)
  addu  V0, V0, T0
  lhu   V0, lo(D_800FD2C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L8010B318
   nop
  beql  S2, R0, L8010B34C
   addiu FP, FP, 1
  lui   V0, hi(D_800FD2C2)
  addu  V0, V0, T0
  lbu   V0, lo(D_800FD2C2)(V0)
  bnez  V0, L8010B2D4
   slti  V0, S2, 7
  bnel  V0, R0, L8010B34C
   addiu FP, FP, 1
  j     L8010B3E4
   sltiu V1, S2, 1
L8010B2D4:
  lw    T0, 0x64(SP)
  sll   V0, T0, 2
  lui   V1, hi(D_800FD2C2)
  addu  V1, V1, V0
  lbu   V1, lo(D_800FD2C2)(V1)
  li    V0, 1
  bne   V1, V0, L8010B308
   slti  V0, S2, 0xa
  slti  V0, S2, 8
  bnel  V0, R0, L8010B34C
   addiu FP, FP, 1
  j     L8010B3E4
   sltiu V1, S2, 1
L8010B308:
  bnel  V0, R0, L8010B34C
   addiu FP, FP, 1
  j     L8010B3E4
   sltiu V1, S2, 1
L8010B318:
  lw    T0, 0x6c(SP)
  sll   V0, T0, 2
  lui   AT, hi(p1_controller)
  addu  AT, AT, V0
  lbu   V0, lo(p1_controller)(AT)
  sll   V0, V0, 1
  lui   AT, hi(D_800F6098)
  addu  AT, AT, V0
  lhu   V0, lo(D_800F6098)(AT)
  andi  V0, V0, 0x8000
  beqz  V0, L8010B3E4
   sltiu V1, S2, 1
  addiu FP, FP, 1
L8010B34C:
  bnez  S7, L8010B3E0
   li    S2, 10
  move  A0, S3
  move  A1, R0
  li    A2, 1
  jal   func_800822A8
   move  A3, R0
  move  A0, S3
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  li    S7, 1
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F0, lo(D_8011233C)(AT)
  sub.s F0, F0, F26
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F0, F0, F24
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F2, lo(D_80112340)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S3
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
L8010B3E0:
  sltiu V1, S2, 1
L8010B3E4:
  xori  V0, S7, 1
  sltiu V0, V0, 1
  and   V1, V1, V0
  beqz  V1, L8010B494
   move  A0, S3
  move  A1, R0
  move  A2, R0
  jal   func_800822A8
   move  A3, R0
  move  A0, S3
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  move  S7, R0
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S0
  lwc1  F2, lo(D_8011235C)(AT)
  mul.s F2, F2, F24
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F0, lo(D_8011233C)(AT)
  sub.s F0, F0, F2
  sub.s F0, F0, F26
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F0, F0, F24
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F2, lo(D_80112340)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S3
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
L8010B494:
  jal   func_8007DA44
   addiu S1, S1, 1
  slti  V0, S1, 0x96
  bnez  V0, L8010B054
   addiu S5, S5, -1
  lw    A0, 0x4c(SP)
  jal   func_8006735C
   nop
  lui   A0, hi(func_8010AB58)
  addiu A0, A0, lo(func_8010AB58)
  li    A1, 4096
  move  A2, R0
  jal   InitProcess
   move  A3, R0
  bnez  FP, L8010B5AC
   li    S1, 16
  lhu   T0, 0x2e(SP)
  sll   V0, T0, 0x10
  sra   S3, V0, 0x10
  sll   S2, S4, 3
  lhu   T0, 0x3e(SP)
  sll   S5, T0, 0x10
L8010B4EC:
  mtc1  S1, F4
  nop
  cvt.s.w F4, F4
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S2
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F4, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S2
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S2
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F4, F4, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, S2
  lwc1  F0, lo(D_80112340)(AT)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  move  A0, S3
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  sll   S0, S1, 4
  andi  S0, S0, 0xffff
  move  A0, S3
  move  A1, R0
  jal   func_80082488
   move  A2, S0
  sra   A0, S5, 0x10
  move  A1, R0
  jal   func_80082488
   move  A2, S0
  jal   func_8007DA44
   addiu S1, S1, -2
  bltz  S1, L8010B744
   nop
  j     L8010B4EC
   nop
L8010B5AC:
  lhu   T0, 0x2e(SP)
  sll   S2, T0, 0x10
  sll   S0, S4, 3
L8010B5B8:
  mtc1  S1, F20
  nop
  cvt.s.w F20, F20
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S0
  lwc1  F0, lo(D_8011235C)(AT)
  mul.s F0, F20, F0
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F0, F20, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F2, lo(D_80112340)(AT)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  sra   A0, S2, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  lhu   T0, 0x3e(SP)
  sll   A0, T0, 0x10
  addiu V0, S1, -0x10
  mtc1  V0, F0
  nop
  cvt.s.w F0, F0
  lui   AT, hi(D_8011235C)
  addu  AT, AT, S0
  lwc1  F2, lo(D_8011235C)(AT)
  mul.s F0, F0, F2
  lui   AT, hi(D_8011233C)
  addu  AT, AT, S0
  lwc1  F2, lo(D_8011233C)(AT)
  add.s F0, F0, F2
  li    AT, 0x41000000 ;8.000000
  mtc1  AT, F2
  nop
  sub.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112360)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112360)(AT)
  mul.s F20, F20, F0
  lui   AT, hi(D_80112340)
  addu  AT, AT, S0
  lwc1  F0, lo(D_80112340)(AT)
  add.s F20, F20, F0
  trunc.w.s F0, F20
  mfc1  A3, F0
  nop
  sll   A3, A3, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  jal   func_8007DA44
   addiu S1, S1, -2
  slti  V0, S1, -0x10
  beqz  V0, L8010B5B8
   move  A1, R0
  lhu   T0, 0x3e(SP)
  sll   S0, T0, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A2, R0
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  li    S1, 16
  lhu   T0, 0x2e(SP)
  sll   S0, T0, 0x10
  sll   A2, S1, 4
L8010B724:
  sra   A0, S0, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S1, S1, -2
  bgez  S1, L8010B724
   sll   A2, S1, 4
L8010B744:
  lhu   T0, 0x2e(SP)
  sll   A0, T0, 0x10
  jal   func_8007F8B0
   sra   A0, A0, 0x10
  lhu   T0, 0x36(SP)
  sll   A0, T0, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  lhu   T0, 0x3e(SP)
  sll   A0, T0, 0x10
  jal   func_8007F8B0
   sra   A0, A0, 0x10
  lhu   T0, 0x46(SP)
  sll   A0, T0, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  move  S1, R0
  lui   A0, hi(D_800F93B0)
  lh    A0, lo(D_800F93B0)(A0)
  sll   V0, S1, 1
L8010B794:
  addu  V1, V0, S1
  lui   V0, hi(D_80112394)
  addu  V0, V0, V1
  lbu   V0, lo(D_80112394)(V0)
  slt   V0, A0, V0
  bnel  V0, R0, L8010B7CC
   addiu S1, S1, 1
  lui   V0, hi(D_80112395)
  addu  V0, V0, V1
  lbu   V0, lo(D_80112395)(V0)
  slt   V0, V0, A0
  beqz  V0, L8010B7D8
   sll   V0, S1, 1
  addiu S1, S1, 1
L8010B7CC:
  sltiu V0, S1, 6
  bnez  V0, L8010B794
   sll   V0, S1, 1
L8010B7D8:
  addu  V0, V0, S1
  lui   S7, hi(D_80112396)
  addu  S7, S7, V0
  lbu   S7, lo(D_80112396)(S7)
  move  S1, R0
  sll   V0, S1, 1
L8010B7F0:
  addu  V1, V0, S1
  lui   V0, hi(D_801123A8)
  addu  V0, V0, V1
  lbu   V0, lo(D_801123A8)(V0)
  slt   V0, FP, V0
  bnel  V0, R0, L8010B828
   addiu S1, S1, 1
  lui   V0, hi(D_801123A9)
  addu  V0, V0, V1
  lbu   V0, lo(D_801123A9)(V0)
  slt   V0, V0, FP
  beqz  V0, L8010B834
   sll   V0, S1, 1
  addiu S1, S1, 1
L8010B828:
  sltiu V0, S1, 0xe
  bnez  V0, L8010B7F0
   sll   V0, S1, 1
L8010B834:
  addu  V0, V0, S1
  lui   AT, hi(D_801123AA)
  addu  AT, AT, V0
  lbu   V0, lo(D_801123AA)(AT)
  subu  S7, S7, V0
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  addu  V0, V0, S4
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V0, S7, V0
  beql  V0, R0, L8010B874
   li    S7, -1
L8010B874:
  move  V0, S7
  lw    RA, 0x94(SP)
  lw    FP, 0x90(SP)
  lw    S7, 0x8c(SP)
  lw    S6, 0x88(SP)
  lw    S5, 0x84(SP)
  lw    S4, 0x80(SP)
  lw    S3, 0x7c(SP)
  lw    S2, 0x78(SP)
  lw    S1, 0x74(SP)
  lw    S0, 0x70(SP)
  ldc1  F26, 0xb0(SP)
  ldc1  F24, 0xa8(SP)
  ldc1  F22, 0xa0(SP)
  ldc1  F20, 0x98(SP)
  jr    RA
   addiu SP, SP, 0xb8

func_8010B8B8:
  addiu SP, SP, -0x40
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F26, 0x38(SP)
  sdc1  F24, 0x30(SP)
  sdc1  F22, 0x28(SP)
  jal   func_8007D838
   sdc1  F20, 0x20(SP)
  lw    S1, 0x8c(V0)
  lui   A0, hi(D_801138BC)
  jal   func_80043F7C
   lw    A0, lo(D_801138BC)(A0)
  move  S0, V0
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, S1, 0xc
  addiu A0, S0, 0x24
  lui   A1, 0x4000
  move  A2, A1
  jal   func_800B3160
   move  A3, A1
  lwc1  F0, 0x30(S1)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x30(S0)
  jal   func_80044258
   move  A0, S0
  li    AT, 0x43B40000 ;360.000000
  mtc1  AT, F12
  jal   func_8005A358
   nop
  mtc1  V0, F20
  nop
  cvt.s.w F20, F20
  lui   AT, hi(D_801135F0)
  ldc1  F22, lo(D_801135F0)(AT)
  li    AT, 0x420C0000 ;35.000000
  mtc1  AT, F26
  li    AT, 0x42200000 ;40.000000
  mtc1  AT, F24
L8010B964:
  jal   func_8007DA44
   nop
  lwc1  F0, 0x30(S0)
  cvt.d.s F0, F0
  add.d F0, F0, F22
  cvt.s.d F0, F0
  swc1  F0, 0x30(S0)
  lwc1  F2, 0x30(S1)
  add.s F2, F2, F26
  c.le.s F2, F0
  nop
  bc1t  L8010B9D8
   nop
  add.s F20, F20, F24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F20
  nop
  jal   func_800B39F0
   addiu A0, A0, 0x74
  j     L8010B964
   nop
L8010B9D8:
  jal   func_8004430C
   move  A0, S0
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F26, 0x38(SP)
  ldc1  F24, 0x30(SP)
  ldc1  F22, 0x28(SP)
  ldc1  F20, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x40

func_8010BA0C:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S0, A0
  lui   A0, hi(func_8010B8B8)
  addiu A0, A0, lo(func_8010B8B8)
  li    A1, 4096
  move  A2, R0
  jal   InitProcess
   move  A3, R0
  sw    S0, 0x8c(V0)
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

; Boo event
__PP64_INTERNAL_BOO_SPACE_EVENT:
func_8010BA48:
  addiu SP, SP, -0xb0
  sw    RA, 0x94(SP)
  sw    FP, 0x90(SP)
  sw    S7, 0x8c(SP)
  sw    S6, 0x88(SP)
  sw    S5, 0x84(SP)
  sw    S4, 0x80(SP)
  sw    S3, 0x7c(SP)
  sw    S2, 0x78(SP)
  sw    S1, 0x74(SP)
  sw    S0, 0x70(SP)
  sdc1  F24, 0xa8(SP)
  sdc1  F22, 0xa0(SP)
  jal   func_800558F4
   sdc1  F20, 0x98(SP)
  move  S1, V0
  lui   S3, hi(D_800F93A8)
  addiu S3, S3, lo(D_800F93A8)
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
  li    V0, 4
  beq   A0, V0, L8010C410
   nop
  jal   func_80046D2C
   move  FP, R0
  sw    V0, 0x6c(SP)
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  sll   V0, S1, 0x10
  sra   V1, V0, 0x10
  li    V0, ${v[0]}
  beq   V1, V0, L8010BAE4
   li    V0, ${v[0]}
  beq   V1, V0, L8010BAF0
   li    S7, 1
  j     L8010BAF8
   li    S7, -1
L8010BAE4:
  move  S7, R0
  j     L8010BB58
   li    S0, ${C[0]}
L8010BAF0:
  j     L8010BB58
   li    S0, ${C[1]}
L8010BAF8:
  lui   A0, hi(D_8011373C)
  lw    A0, lo(D_8011373C)(A0)
  jal   func_80043F7C
   li    S0, -1
  move  S2, V0
  jal   func_800442DC
   move  A0, S2
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F20
  nop
  swc1  F20, 0x30(S2)
  sll   A0, S1, 0x10
  jal   func_80054B8C
   sra   A0, A0, 0x10
  move  V1, V0
  lwc1  F0, 0xc(V1)
  lw    A1, 8(V1)
  add.s F20, F0, F20
  mfc1  A2, F20
  lw    A3, 0x10(V1)
  jal   func_800B3160
   addiu A0, S2, 0xc
  j     L8010BB68
   nop
L8010BB58:
  sll   V0, S7, 2
  lui   S2, hi(D_80113740)
  addu  S2, S2, V0
  lw    S2, lo(D_80113740)(S2)
L8010BB68:
  jal   func_8007959C
   li    A0, 235
  jal   func_8010A13C
   move  A0, S2
  sll   A0, S1, 0x10
  jal   func_80054B8C
   sra   A0, A0, 0x10
  move  V1, V0
  sll   V0, S0, 0x10
  sra   S0, V0, 0x10
  li    V0, -1
  beq   S0, V0, L8010BBF4
   move  A0, S2
  addiu A1, V1, 8
  jal   func_800446B4
   li    A2, 10
  li    A0, -1
  li    A1, 8
  jal   func_80056C30
   move  A2, S0
  jal   func_8007D9E0
   li    A0, 10
  jal   func_8007D838
   nop
  li    AT, 0x3FCC0000 ;1.593750
  ori AT, AT, 0xcccd
  mtc1  AT, F12
  nop
  jal   func_80052F70
   move  S0, V0
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
L8010BBF4:
  lh    V0, 0x1e(S3)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 5
  beqz  V0, L8010BC34
   li    A0, 7
  jal   func_8005600C
   li    A1, 1718
  j     L8010C384
   sll   V0, FP, 0x10
L8010BC34:
  move  S0, R0
L8010BC38:
  lh    V1, 0x1e(S3)
L8010BC3C:
  beq   S0, V1, L8010BC68
   sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  bnez  V0, L8010BC78
   li    V0, 4
L8010BC68:
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L8010BC3C
   li    V0, 4
L8010BC78:
  bne   S0, V0, L8010BC90
   li    V0, 8
  li    V0, 1
  sb    V0, 0x20(SP)
  j     L8010BC9C
   sb    R0, 0x60(SP)
L8010BC90:
  sb    V0, 0x20(SP)
  li    V0, 1
  sb    V0, 0x60(SP)
L8010BC9C:
  sb    R0, 0x21(SP)
  move  S0, R0
  lh    V1, 0x1e(S3)
L8010BCA8:
  beq   S0, V1, L8010BCD4
   sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  bnez  V0, L8010BCE4
   li    V0, 4
L8010BCD4:
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L8010BCA8
   li    V0, 4
L8010BCE4:
  beq   S0, V0, L8010BD38
   li    V0, 1
  lh    V0, 0x1e(S3)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  lui   V0, hi(p1_coins)
  addu  V0, V0, V1
  lh    V0, lo(p1_coins)(V0)
  slti  V0, V0, 0x32
  bnez  V0, L8010BD38
   li    V0, 1
  lui   V0, hi(p1_stars)
  addu  V0, V0, V1
  lh    V0, lo(p1_stars)(V0)
  slti  V0, V0, 0x63
  bnez  V0, L8010BD44
   li    V0, 8
  li    V0, 1
L8010BD38:
  sb    V0, 0x30(SP)
  j     L8010BD50
   sb    R0, 0x61(SP)
L8010BD44:
  sb    V0, 0x30(SP)
  li    V0, 1
  sb    V0, 0x61(SP)
L8010BD50:
  sb    R0, 0x31(SP)
  li    V0, 1
  sb    V0, 0x63(SP)
  sb    V0, 0x62(SP)
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 7
  li    A1, 1717
  addiu A2, SP, 0x20
  jal   func_80056368
   addiu A3, SP, 0x30
  jal   func_8010537C
   addiu A0, SP, 0x60
  move  S0, V0
  jal   func_80056144
   move  FP, S0
  jal   func_80056168
   sll   S0, S0, 0x10
  sra   S0, S0, 0x10
  li    V0, 2
  beq   S0, V0, L8010C32C
   slti  V0, S0, 3
  bnez  V0, L8010BDC4
   li    V0, 3
  beq   S0, V0, L8010C348
   li    V0, -1
  j     L8010C384
   sll   V0, FP, 0x10
L8010BDC4:
  bltz  S0, L8010C380
   move  S0, R0
  move  A0, R0
L8010BDD0:
  sll   V0, FP, 0x10
  sra   T1, V0, 0x10
  addiu A2, SP, 0x60
  addiu A1, SP, 0x20
  li    A3, 1
  li    T0, 8
  li    T2, 24
L8010BDEC:
  lh    V0, 0x1e(S3)
  beql  S0, V0, L8010BEB0
   addiu S0, S0, 1
  bnez  T1, L8010BE2C
   sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  beqz  V0, L8010BE50
   addu  V0, A2, A0
  j     L8010BE68
   sb    A3, 0(V0)
L8010BE2C:
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_stars)
  addu  AT, AT, V0
  lh    V0, lo(p1_stars)(AT)
  bnez  V0, L8010BE64
   addu  V0, A2, A0
L8010BE50:
  sb    R0, 0(V0)
  sll   V0, A0, 4
  addu  V0, A1, V0
  j     L8010BE74
   sb    A3, 0(V0)
L8010BE64:
  sb    A3, 0(V0)
L8010BE68:
  sll   V0, A0, 4
  addu  V0, A1, V0
  sb    T0, 0(V0)
L8010BE74:
  sll   V0, A0, 4
  addu  V0, A1, V0
  sb    T2, 1(V0)
  sll   V1, S0, 1
  addu  V1, V1, S0
  sll   V1, V1, 2
  addu  V1, V1, S0
  sll   V1, V1, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V1
  lbu   V1, lo(p1_char)(AT)
  sb    V1, 2(V0)
  sb    R0, 3(V0)
  addiu A0, A0, 1
  addiu S0, S0, 1
L8010BEB0:
  slti  V0, S0, 4
  bnez  V0, L8010BDEC
   li    S1, 1
  sb    S1, 0x63(SP)
  addiu V0, SP, 0x40
  sw    V0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 7
  li    A1, 1720
  addiu A2, SP, 0x20
  jal   func_80056368
   addiu A3, SP, 0x30
  sll   A0, FP, 0x10
  sra   A0, A0, 0x10
  jal   func_80105630
   addiu A1, SP, 0x60
  move  S0, V0
  jal   func_80056144
   move  S5, S0
  jal   func_80056168
   sll   S0, S0, 0x10
  sra   S0, S0, 0x10
  li    V1, -1
  beq   S0, V1, L8010BC34
   li    V0, 3
  bnel  S0, V0, L8010BF54
   sll   V0, FP, 0x10
  bne   S7, V1, L8010BF44
   nop
  jal   func_80103AF4
   move  S0, R0
  lui   AT, hi(D_800F851A)
  jal   func_80078EC8
   sb    S1, lo(D_800F851A)(AT)
  j     L8010BDD0
   move  A0, R0
L8010BF44:
  jal   __PP64_INTERNAL_VIEW_MAP
   move  S0, R0
  j     L8010BDD0
   move  A0, R0
L8010BF54:
  bnez  V0, L8010BF74
   nop
  lh    A0, 0x1e(S3)
  jal   func_8004CA34
   li    A1, -5
  lh    A0, 0x1e(S3)
  j     L8010BF88
   li    A1, -5
L8010BF74:
  lh    A0, 0x1e(S3)
  jal   func_8004CA34
   li    A1, -50
  lh    A0, 0x1e(S3)
  li    A1, -50
L8010BF88:
  jal   func_800614B4
   nop
  jal   func_8007D9E0
   li    A0, 30
  jal   func_8010A1DC
   move  A0, S2
  sll   V0, FP, 0x10
  bnez  V0, L8010C2B8
   nop
  lh    V1, 0x1e(S3)
  lui   S4, hi(D_80112330)
  addiu S4, S4, lo(D_80112330)
  sll   V0, V1, 1
  addu  V0, V0, V1
  addu  V0, V0, S4
  sll   V1, S5, 0x10
  sra   S0, V1, 0x10
  addu  V0, V0, S0
  jal   func_8010AB7C
   lbu   A0, 0(V0)
  move  S1, V0
  jal   func_8010A13C
   move  A0, S2
  li    V0, -1
  bnel  S1, V0, L8010C054
   move  S0, R0
  lh    V1, 0x1e(S3)
  sll   V0, V1, 1
  addu  V0, V0, V1
  addu  V0, V0, S4
  addu  V0, V0, S0
  lbu   V1, 0(V0)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   S1, hi(p1_coins)
  addu  S1, S1, V0
  lh    S1, lo(p1_coins)(S1)
  addiu A0, SP, 0x20
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  jal   func_800A5660
   move  A2, S1
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 7
  j     L8010C118
   li    A1, 1727
L8010C054:
  lh    A0, 8(S3)
  sll   V0, S0, 2
L8010C05C:
  addu  V1, V0, S0
  lui   V0, hi(D_801123D4)
  addu  V0, V0, V1
  lbu   V0, lo(D_801123D4)(V0)
  slt   V0, A0, V0
  bnel  V0, R0, L8010C0C4
   addiu S0, S0, 1
  lui   V0, hi(D_801123D5)
  addu  V0, V0, V1
  lbu   V0, lo(D_801123D5)(V0)
  slt   V0, V0, A0
  bnel  V0, R0, L8010C0C4
   addiu S0, S0, 1
  lui   V0, hi(D_801123D6)
  addu  V0, V0, V1
  lbu   V0, lo(D_801123D6)(V0)
  slt   V0, S1, V0
  bnel  V0, R0, L8010C0C4
   addiu S0, S0, 1
  lui   V0, hi(D_801123D7)
  addu  V0, V0, V1
  lbu   V0, lo(D_801123D7)(V0)
  slt   V0, V0, S1
  beql  V0, R0, L8010C0D4
   addiu A0, SP, 0x20
  addiu S0, S0, 1
L8010C0C4:
  sltiu V0, S0, 0x18
  bnez  V0, L8010C05C
   sll   V0, S0, 2
  addiu A0, SP, 0x20
L8010C0D4:
  lui   A1, hi(D_801135C8)
  addiu A1, A1, lo(D_801135C8)
  jal   func_800A5660
   move  A2, S1
  sll   V0, S0, 2
  addu  V0, V0, S0
  lui   AT, hi(D_801123D8)
  addu  AT, AT, V0
  lbu   V0, lo(D_801123D8)(AT)
  sll   V0, V0, 1
  lui   A1, hi(D_8011243E)
  addu  A1, A1, V0
  lh    A1, lo(D_8011243E)(A1)
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, 7
L8010C118:
  addiu A2, SP, 0x20
  jal   func_80056368
   move  A3, R0
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  mtc1  S1, F24
  nop
  cvt.s.w F24, F24
  li    AT, 0x42B40000 ;90.000000
  mtc1  AT, F0
  nop
  div.s F24, F24, F0
  mtc1  R0, F20
  li    A0, 24
  jal   func_80043510
   move  A1, R0
  lui   AT, hi(D_801138BC)
  sw    V0, lo(D_801138BC)(AT)
  jal   func_80043DAC
   move  A0, V0
  lui   A0, hi(D_801138BC)
  jal   func_800442DC
   lw    A0, lo(D_801138BC)(A0)
  lh    V1, 0x1e(S3)
  lui   A0, hi(D_80112330)
  addiu A0, A0, lo(D_80112330)
  sll   V0, V1, 1
  addu  V0, V0, V1
  addu  V0, V0, A0
  sll   V1, S5, 0x10
  sra   V1, V1, 0x10
  addu  V0, V0, V1
  lbu   A0, 0(V0)
  li    A1, 3
  jal   func_800672BC
   li    A2, 5
  beqz  S1, L8010C234
   move  S4, V0
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F22
  lui   S6, hi(D_80112330)
  addiu S6, S6, lo(D_80112330)
  sll   V0, S5, 0x10
  sra   S0, V0, 0x10
  add.s F20, F20, F24
L8010C1D4:
  c.le.s F22, F20
  nop
  bc1f  L8010C224
   nop
  sub.s F20, F20, F22
  jal   func_8010BA0C
   move  A0, S2
  lh    A0, 0x1e(S3)
  jal   func_800614B4
   li    A1, 1
  lh    V1, 0x1e(S3)
  sll   V0, V1, 1
  addu  V0, V0, V1
  addu  V0, V0, S6
  addu  V0, V0, S0
  lbu   A0, 0(V0)
  li    A1, -1
  jal   func_8006135C
   move  A2, R0
  addiu S1, S1, -1
L8010C224:
  jal   func_8007DA44
   nop
  bnel  S1, R0, L8010C1D4
   add.s F20, F20, F24
L8010C234:
  jal   func_8006735C
   move  A0, S4
  jal   func_8007D9E0
   li    A0, 20
  lui   A0, hi(D_801138BC)
  jal   func_8004430C
   lw    A0, lo(D_801138BC)(A0)
  jal   func_8005DC3C
   li    A0, -1
  lw    A0, 0x24(V0)
  jal   func_8005670C
   addiu A0, A0, 0x18
  li    A0, -1
  li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 5
  lh    V1, 0x1e(S3)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 259
  jal   func_8007D9E0
   li    A0, 45
  j     L8010C30C
   li    V0, -1
L8010C2B8:
  lh    V1, 0x1e(S3)
  lui   A0, hi(D_80112330)
  addiu A0, A0, lo(D_80112330)
  sll   V0, V1, 1
  addu  V0, V0, V1
  addu  V0, V0, A0
  sll   V1, S5, 0x10
  sra   V1, V1, 0x10
  addu  V0, V0, V1
  jal   func_8010A27C
   lbu   A0, 0(V0)
  jal   func_8010A13C
   move  A0, S2
  li    V0, 1
  lui   AT, hi(D_801119D0)
  sw    V0, lo(D_801119D0)(AT)
  jal   func_80103968
   move  A0, S2
  lui   AT, hi(D_801119D0)
  sw    R0, lo(D_801119D0)(AT)
  li    V0, -1
L8010C30C:
  bne   S7, V0, L8010C384
   sll   V0, FP, 0x10
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  j     L8010C384
   sll   V0, FP, 0x10
L8010C32C:
  jal   func_8010A1DC
   move  A0, S2
  li    A0, 7
  jal   func_8005600C
   li    A1, 1719
  j     L8010C384
   sll   V0, FP, 0x10
L8010C348:
  bne   S7, V0, L8010C370
   nop
  jal   func_80103AF4
   move  S0, R0
  li    V0, 1
  lui   AT, hi(D_800F851A)
  jal   func_80078EC8
   sb    V0, lo(D_800F851A)(AT)
  j     L8010BC38
   nop
L8010C370:
  jal   __PP64_INTERNAL_VIEW_MAP
   move  S0, R0
  j     L8010BC38
   nop
L8010C380:
  sll   V0, FP, 0x10
L8010C384:
  sra   V0, V0, 0x10
  li    V1, 2
  beq   V0, V1, L8010C39C
   nop
  jal   func_8010A1DC
   move  A0, S2
L8010C39C:
  jal   func_8005670C
   addiu A0, S2, 0x18
  li    V0, -1
  bne   S7, V0, L8010C3B8
   nop
  jal   func_8004430C
   move  A0, S2
L8010C3B8:
  lw    T3, 0x6c(SP)
  beqz  T3, L8010C3D4
   li    V0, -1
  lh    A0, 0x1e(S3)
  jal   func_8004655C
   nop
  li    V0, -1
L8010C3D4:
  beq   S7, V0, L8010C410
   nop
  jal   func_8007D838
   nop
  li    AT, 0x3FA60000 ;1.296875
  ori AT, AT, 0x6666
  mtc1  AT, F12
  nop
  jal   func_80052F70
   move  S0, V0
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
L8010C410:
  lw    RA, 0x94(SP)
  lw    FP, 0x90(SP)
  lw    S7, 0x8c(SP)
  lw    S6, 0x88(SP)
  lw    S5, 0x84(SP)
  lw    S4, 0x80(SP)
  lw    S3, 0x7c(SP)
  lw    S2, 0x78(SP)
  lw    S1, 0x74(SP)
  lw    S0, 0x70(SP)
  ldc1  F24, 0xa8(SP)
  ldc1  F22, 0xa0(SP)
  ldc1  F20, 0x98(SP)
  jr    RA
   addiu SP, SP, 0xb0

; Gate event
func_8010C44C:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   func_80106618
   move  A0, R0
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

; Gate event
func_8010C468:
/*  */  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   func_80106618
   li    A0, 1
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_8010C484:
  addiu SP, SP, -0x40
  sw    RA, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  sdc1  F22, 0x38(SP)
  sdc1  F20, 0x30(SP)
  move  S2, A0
  mtc1  A1, F20
  mtc1  A2, F22
  lw    S0, 0x50(SP)
  move  S4, A3
  lui   V0, hi(func_8010C5C4)
  addiu V0, V0, lo(func_8010C5C4)
  sw    V0, 0x10(SP)
  li    A0, 500
  move  A1, R0
  move  A2, R0
  jal   func_80076598
   li    A3, -1
  move  S3, V0
  li    A0, 32
  jal   func_80027154
   li    A1, 31000
  move  S1, V0
  sw    S1, 0x50(S3)
  li    AT, 0x437F0000 ;255.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0xc(S1)
  swc1  F20, 0x10(S1)
  swc1  F22, 0x14(S1)
  move  A0, S1
  jal   func_800B3170
   move  A1, S0
  sw    R0, 0x10(SP)
  lui A0, 0xa
  ori A0, A0, 0x15c
  move  A1, R0
  lui   A2, 0x3f80
  jal   func_800437F8
   move  A3, R0
  move  S0, V0
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  move  A1, R0
  move  A2, A1
  jal   func_800297E8
   move  A3, A1
  lwc1  F0, 0(S2)
  swc1  F0, 0xc(S0)
  lwc1  F0, 4(S2)
  swc1  F0, 0x10(S0)
  lwc1  F0, 8(S2)
  swc1  F0, 0x14(S0)
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  jal   func_8002D124
   lh    A0, 0(V0)
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  jal   func_8002D0A0
   li    A1, 255
  sw    S0, 0x18(S1)
  sh    S4, 0x1c(S1)
  move  V0, S3
  lw    RA, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  ldc1  F22, 0x38(SP)
  ldc1  F20, 0x30(SP)
  jr    RA
   addiu SP, SP, 0x40

func_8010C5C4:
  addiu SP, SP, -0x20
  sw    RA, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S2, A0
  lw    S0, 0x50(S2)
  lw    S1, 0x18(S0)
  addiu A1, S1, 0xc
  move  A0, A1
  jal   func_800B31C0
   move  A2, S0
  lwc1  F0, 0x2c(S1)
  lwc1  F2, 0x10(S0)
  add.s F0, F0, F2
  swc1  F0, 0x2c(S1)
  swc1  F0, 0x28(S1)
  swc1  F0, 0x24(S1)
  lwc1  F0, 0xc(S0)
  lwc1  F2, 0x14(S0)
  sub.s F0, F0, F2
  mtc1  R0, F2
  nop
  c.lt.s F0, F2
  nop
  nop
  bc1f  L8010C668
   swc1  F0, 0xc(S0)
  swc1  F2, 0xc(S0)
  lhu   V0, 0x1c(S0)
  beqz  V0, L8010C660
   move  A0, S2
  lw    A0, 0x18(S0)
  jal   func_8004430C
   nop
  jal   func_8007695C
   move  A0, S2
  j     L8010C6C4
   nop
L8010C660:
  jal   func_80076AFC
   li    A1, 8
L8010C668:
  lw    V0, 0x3c(S1)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  lwc1  F2, 0xc(S0)
  li    AT, 0x4F000000 ;2147483648.000000
  mtc1  AT, F0
  nop
  c.le.s F0, F2
  nop
  nop
  bc1tl L8010C6A8
   sub.s F0, F2, F0
  trunc.w.s F0, F2
  mfc1  A1, F0
  j     L8010C6BC
   nop
L8010C6A8:
  lui   V0, 0x8000
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  or    A1, A1, V0
L8010C6BC:
  jal   func_8002D0A0
   andi  A1, A1, 0xff
L8010C6C4:
  lw    RA, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x20

func_8010C6DC:
  addiu SP, SP, -0x128
  sw    RA, 0x110(SP)
  sw    S7, 0x10c(SP)
  sw    S6, 0x108(SP)
  sw    S5, 0x104(SP)
  sw    S4, 0x100(SP)
  sw    S3, 0xfc(SP)
  sw    S2, 0xf8(SP)
  sw    S1, 0xf4(SP)
  sw    S0, 0xf0(SP)
  sdc1  F22, 0x120(SP)
  sdc1  F20, 0x118(SP)
  lui   S7, hi(D_800F93A8)
  addiu S7, S7, lo(D_800F93A8)
  jal   func_8005DC3C
   li    A0, -1
  jal   func_8010D37C
   move  S3, V0
  li    A0, 113
  jal   func_80043510
   move  A1, R0
  move  S1, V0
  lw    V0, 0x3c(S1)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  move  A1, R0
  move  A2, A1
  jal   func_800297E8
   move  A3, A1
  lw    A1, 0x24(S3)
  addiu A0, S1, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  li    AT, 0x42C80000 ;100.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0x10(S1)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F22
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F20
  lwc1  F0, 0x10(S1)
  sub.s F0, F0, F22
L8010C788:
  jal   func_8007DA44
   swc1  F0, 0x10(S1)
  lwc1  F0, 0x10(S1)
  c.lt.s F20, F0
  nop
  nop
  bc1tl L8010C788
   sub.s F0, F0, F22
  jal   func_8007959C
   li    A0, 870
  lui   A0, hi(D_800FA188)
  lh    A0, lo(D_800FA188)(A0)
  jal   func_800114E8
   li    A1, 180
  li    A0, -1
  li    A1, 3
  jal   func_800672BC
   li    A2, 5
  move  S5, V0
  li    S2, 180
  move  S0, R0
  lui   S6, hi(D_80113658)
  addiu S6, S6, lo(D_80113658)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F22
  li    AT, 0x41700000 ;15.000000
  mtc1  AT, F20
  addiu S4, SP, 0x28
L8010C7F8:
  addiu A3, SP, 0x28
  lui   A2, hi(D_801135F8)
  addiu A2, A2, lo(D_801135F8)
L8010C804:
  lw    V0, 0(A2)
  lw    V1, 4(A2)
  lw    A0, 8(A2)
  lw    A1, 0xc(A2)
  sw    V0, 0(A3)
  sw    V1, 4(A3)
  sw    A0, 8(A3)
  sw    A1, 0xc(A3)
  addiu A2, A2, 0x10
  bne   A2, S6, L8010C804
   addiu A3, A3, 0x10
  mtc1  S2, F12
  nop
  jal   func_800B83C0
   cvt.s.w F12, F12
  add.s F0, F0, F0
  add.s F0, F0, F22
  andi  V0, S0, 1
  beqz  V0, L8010C8BC
   swc1  F0, 0x10(S1)
  lw    A1, 0xc(S1)
  mfc1  A2, F0
  lw    A3, 0x14(S1)
  jal   func_800B3160
   addiu A0, SP, 0x18
  lwc1  F0, 0x18(SP)
  sub.s F0, F0, F20
  swc1  F0, 0x18(SP)
  lwc1  F0, 0x1c(SP)
  add.s F0, F0, F20
  swc1  F0, 0x1c(SP)
  srl   V1, S0, 0x1f
  addu  V1, S0, V1
  sra   V1, V1, 1
  andi  V1, V1, 7
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, S4, V0
  sw    V0, 0x10(SP)
  addiu A0, SP, 0x18
  lui A1, 0x3dcc
  ori A1, A1, 0xcccd
  lui   A2, 0x4000
  jal   func_8010C484
   li    A3, 1
L8010C8BC:
  jal   func_8007DA44
   addiu S2, S2, 0x14
  slti  V0, S2, 0x438
  bnez  V0, L8010C7F8
   addiu S0, S0, 1
  jal   func_8006735C
   move  A0, S5
  li    A0, 255
  li    A1, 255
  jal   func_8008F624
   li    A2, 255
  lh    V0, 0xa(S7)
  sll   V0, V0, 1
  addu  V0, V0, S7
  lh    V0, 0xc(V0)
  sll   V0, V0, 1
  lui   A0, hi(D_80111984)
  addu  A0, A0, V0
  lh    A0, lo(D_80111984)(A0)
  addiu A1, SP, 0x88
  jal   func_80054C78
   addiu A2, SP, 0x8a
  lhu   V1, 0x88(SP)
  sh    V1, 0x10(S3)
  lhu   V0, 0x8a(SP)
  sh    V0, 0x12(S3)
  sh    V1, 0x14(S3)
  addiu V0, V0, 1
  jal   func_800650BC
   sh    V0, 0x16(S3)
  jal   func_80078FF8
   nop
  lui   S4, hi(D_80113658)
  addiu S4, S4, lo(D_80113658)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F22
  li    AT, 0x41700000 ;15.000000
  mtc1  AT, F20
  addiu S3, SP, 0x90
  addiu A3, SP, 0x90
L8010C95C:
  lui   A2, hi(D_801135F8)
  addiu A2, A2, lo(D_801135F8)
L8010C964:
  lw    V0, 0(A2)
  lw    V1, 4(A2)
  lw    A0, 8(A2)
  lw    A1, 0xc(A2)
  sw    V0, 0(A3)
  sw    V1, 4(A3)
  sw    A0, 8(A3)
  sw    A1, 0xc(A3)
  addiu A2, A2, 0x10
  bne   A2, S4, L8010C964
   addiu A3, A3, 0x10
  mtc1  S2, F12
  nop
  jal   func_800B83C0
   cvt.s.w F12, F12
  add.s F0, F0, F0
  add.s F0, F0, F22
  andi  V0, S0, 1
  beqz  V0, L8010CA1C
   swc1  F0, 0x10(S1)
  lw    A1, 0xc(S1)
  mfc1  A2, F0
  lw    A3, 0x14(S1)
  jal   func_800B3160
   addiu A0, SP, 0x18
  lwc1  F0, 0x18(SP)
  sub.s F0, F0, F20
  swc1  F0, 0x18(SP)
  lwc1  F0, 0x1c(SP)
  add.s F0, F0, F20
  swc1  F0, 0x1c(SP)
  srl   V1, S0, 0x1f
  addu  V1, S0, V1
  sra   V1, V1, 1
  andi  V1, V1, 7
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, S3, V0
  sw    V0, 0x10(SP)
  addiu A0, SP, 0x18
  lui   A1, 0x3dcc
  ori   A1, A1, 0xcccd
  lui   A2, 0x4000
  jal   func_8010C484
   li    A3, 1
L8010CA1C:
  jal   func_8007DA44
   addiu S0, S0, 1
  addiu S2, S2, 0x14
  li    V0, 1280
  bnel  S2, V0, L8010C95C
   addiu A3, SP, 0x90
  jal   func_800115B4
   move  A0, R0
  j     L8010C95C
   addiu A3, SP, 0x90
  lw    RA, 0x110(SP)
  lw    S7, 0x10c(SP)
  lw    S6, 0x108(SP)
  lw    S5, 0x104(SP)
  lw    S4, 0x100(SP)
  lw    S3, 0xfc(SP)
  lw    S2, 0xf8(SP)
  lw    S1, 0xf4(SP)
  lw    S0, 0xf0(SP)
  ldc1  F22, 0x120(SP)
  ldc1  F20, 0x118(SP)
  jr    RA
   addiu SP, SP, 0x128

func_8010CA78:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  li    V0, 1
  lui   AT, hi(D_800CCC16)
  sb    V0, lo(D_800CCC16)(AT)
  lui   V0, hi(D_800F93B2)
  lh    V0, lo(D_800F93B2)(V0)
  sll   V0, V0, 1
  lui   AT, hi(D_800F93B4)
  addu  AT, AT, V0
  lh    V0, lo(D_800F93B4)(AT)
  sll   V0, V0, 1
  lui   A0, hi(D_80111984)
  addu  A0, A0, V0
  lh    A0, lo(D_80111984)(A0)
  jal   func_800556F4
   li    A1, 1
  lui   AT, hi(D_800CCC16)
  jal   func_800670B0
   sb    R0, lo(D_800CCC16)(AT)
  sll   V0, V0, 0x10
  bltz  V0, L8010CADC
   nop
  jal   func_8007D9E0
   li    A0, -1
L8010CADC:
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_8010CAE8:
  addiu SP, SP, -0x28
  sw    RA, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S1, hi(D_800F93C6)
  lh    S1, lo(D_800F93C6)(S1)
  jal   func_8005DC3C
   li    A0, -1
  jal   func_8010D37C
   move  S0, V0
  jal   func_80047A50
   move  A0, S1
  jal   func_8006836C
   li    A0, 4
  jal   func_80046F98
   move  A0, S1
  jal   func_80078FF8
   nop
  jal   func_80064FF8
   nop
  jal   func_8007D9E0
   li    A0, 5
  li    A0, -1
  jal   func_80067170
   li    A1, 3
  jal   func_8007D9E0
   li    A0, 25
  move  A0, S1
  li    A1, 2
  jal   func_8005DD68
   move  A2, R0
  sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   A0, hi(D_800FD2E4)
  addu  A0, A0, V0
  lw    A0, lo(D_800FD2E4)(A0)
  lui   A1, 0x4000
  lui A2, 0xbe99
  jal   func_80059120
   ori A2, A2, 0x999a
  jal   func_8007D9E0
   li    A0, 5
  jal   func_80047BB8
   move  A0, S1
  li    V0, 2
  sw    V0, 0x10(SP)
  move  A0, S1
  li    A1, -1
  move  A2, R0
  jal   func_8005DDEC
   li    A3, 10
  jal   func_8007D9E0
   li    A0, 20
  jal   func_80053F7C
   nop
  jal   func_8004CDE0
   nop
  jal   func_8004CE80
   nop
  jal   func_8004D5B0
   nop
  jal   func_80053F54
   nop
  jal   func_800683BC
   li    A0, 4
  jal   func_80046F98
   move  A0, S1
  sll   V0, V0, 0x10
  jal   func_80079848
   sra   A0, V0, 0x10
  jal   func_80046EDC
   move  A0, S1
  jal   func_80060210
   li    A0, 25
L8010CC1C:
  jal   func_800609D8
   nop
  beqz  V0, L8010CC3C
   nop
  jal   func_8007DA44
   nop
  j     L8010CC1C
   nop
L8010CC3C:
  jal   func_80062824
   move  A0, R0
  jal   func_80060210
   li    A0, 26
L8010CC4C:
  jal   func_800609D8
   nop
  beqz  V0, L8010CC6C
   move  A0, S1
  jal   func_8007DA44
   nop
  j     L8010CC4C
   nop
L8010CC6C:
  jal   func_80047D78
   li    A1, -1
  lhu   A0, 0x10(S0)
  jal   func_80054BB0
   lhu   A1, 0x12(S0)
  sll   S0, V0, 0x10
  sra   S0, S0, 0x10
  jal   func_800558E8
   move  A0, S0
  move  A0, S0
  jal   func_800556F4
   li    A1, 1
  jal   func_800670B0
   nop
  sll   V0, V0, 0x10
  bltz  V0, L8010CCB8
   nop
  jal   func_8007D9E0
   li    A0, -1
L8010CCB8:
  jal   func_80045650
   move  A0, S1
  lw    RA, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

func_8010CCD4:
  addiu SP, SP, -0x38
  sw    RA, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  sdc1  F22, 0x30(SP)
  sdc1  F20, 0x28(SP)
  jal   func_8007D838
   li    S1, 1
  lw    S0, 0x8c(V0)
  lh    V0, 4(S0)
  lh    V1, 0(S0)
  subu  V0, V0, V1
  mtc1  V0, F22
  nop
  cvt.s.w F22, F22
  lh    V0, 8(S0)
  mtc1  V0, F0
  nop
  cvt.s.w F0, F0
  div.s F22, F22, F0
  lh    V0, 6(S0)
  lh    V1, 2(S0)
  subu  V0, V0, V1
  mtc1  V0, F20
  nop
  cvt.s.w F20, F20
  div.s F20, F20, F0
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
  addiu A1, SP, 0x10
  jal   func_8006296C
   addiu A2, SP, 0x14
  lh    V0, 8(S0)
  blez  V0, L8010CE4C
   nop
  li    S2, -1
L8010CD68:
  lh    A0, 0xa(S0)
  beq   A0, S2, L8010CDDC
   move  A1, R0
  lh    V0, 0(S0)
  mtc1  V0, F2
  nop
  cvt.s.w F2, F2
  mtc1  S1, F4
  nop
  cvt.s.w F4, F4
  mul.s F0, F22, F4
  add.s F2, F2, F0
  trunc.w.s F0, F2
  mfc1  A2, F0
  nop
  sll   A2, A2, 0x10
  lh    V0, 2(S0)
  mtc1  V0, F0
  nop
  cvt.s.w F0, F0
  mul.s F4, F20, F4
  add.s F0, F0, F4
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
L8010CDDC:
  mtc1  S1, F4
  nop
  cvt.s.w F4, F4
  mul.s F0, F22, F4
  lwc1  F2, 0x10(SP)
  add.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  mul.s F4, F20, F4
  lwc1  F0, 0x14(SP)
  add.s F4, F4, F0
  trunc.w.s F0, F4
  mfc1  A2, F0
  nop
  sll   A2, A2, 0x10
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
  sra   A1, A1, 0x10
  jal   func_800629AC
   sra   A2, A2, 0x10
  jal   func_8007DA44
   addiu S1, S1, 1
  lh    V0, 8(S0)
  slt   V0, V0, S1
  beqz  V0, L8010CD68
   nop
L8010CE4C:
  lh    A0, 0xa(S0)
  li    V0, -1
  beq   A0, V0, L8010CE6C
   nop
  lh    A2, 4(S0)
  lh    A3, 6(S0)
  jal   func_80081AD0
   move  A1, R0
L8010CE6C:
  lh    V0, 4(S0)
  mtc1  V0, F0
  nop
  cvt.s.w F0, F0
  lwc1  F2, 0x10(SP)
  add.s F0, F0, F2
  lh    V0, 0(S0)
  mtc1  V0, F2
  nop
  cvt.s.w F2, F2
  sub.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lh    V0, 6(S0)
  mtc1  V0, F0
  nop
  cvt.s.w F0, F0
  lwc1  F2, 0x14(SP)
  add.s F0, F0, F2
  lh    V0, 2(S0)
  mtc1  V0, F2
  nop
  cvt.s.w F2, F2
  sub.s F0, F0, F2
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   A0, hi(D_800F93C6)
  lh    A0, lo(D_800F93C6)(A0)
  sra   A1, A1, 0x10
  jal   func_800629AC
   sra   A2, A2, 0x10
  jal   func_80076FCC
   move  A0, R0
  lw    RA, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  ldc1  F22, 0x30(SP)
  ldc1  F20, 0x28(SP)
  jr    RA
   addiu SP, SP, 0x38

func_8010CF20:
  addiu SP, SP, -0x30
  sw    RA, 0x2c(SP)
  sw    S6, 0x28(SP)
  sw    S5, 0x24(SP)
  sw    S4, 0x20(SP)
  sw    S3, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  move  S6, A0
  move  S1, A1
  move  S2, A2
  move  S3, A3
  lhu   S4, 0x42(SP)
  lhu   S5, 0x46(SP)
  lui   A0, hi(func_8010CCD4)
  addiu A0, A0, lo(func_8010CCD4)
  li    A1, 16385
  move  A2, R0
  jal   InitProcess
   li    A3, 64
  move  S0, V0
  lw    A0, 0x18(S0)
  jal   func_80068480
   li    A1, 16
  sw    V0, 0x8c(S0)
  sh    S1, 0(V0)
  sh    S2, 2(V0)
  sh    S3, 4(V0)
  sh    S4, 6(V0)
  sh    S5, 8(V0)
  sh    S6, 0xa(V0)
  move  V0, S0
  lw    RA, 0x2c(SP)
  lw    S6, 0x28(SP)
  lw    S5, 0x24(SP)
  lw    S4, 0x20(SP)
  lw    S3, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x30

func_8010CFCC:
  addiu SP, SP, -0x30
  sw    RA, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S2, hi(D_800F93A8)
  addiu S2, S2, lo(D_800F93A8)
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  move  S3, V0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sll   V0, V0, 2
  lui   A0, hi(D_8011237C)
  addu  A0, A0, V0
  jal   func_80017680
   lw    A0, lo(D_8011237C)(A0)
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S4, V0
  jal   func_80017800
   move  A0, S0
  sll   V0, S3, 0x10
  sra   S0, V0, 0x10
  sll   A2, S4, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  lui   V0, hi(D_800F93C6)
  lhu   V0, lo(D_800F93C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L8010D0B4
   move  A0, S0
  move  A1, R0
  j     L8010D0C4
   li    A2, 4097
L8010D0B4:
  sll   A0, S3, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  li    A2, 4096
L8010D0C4:
  jal   func_80082418
   sll   S0, S3, 0x10
  sra   S0, S0, 0x10
  lh    V0, 0x1e(S2)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  move  S0, R0
  sll   S1, S3, 0x10
  sll   A2, S0, 4
L8010D140:
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0x11
  bnel  V0, R0, L8010D140
   sll   A2, S0, 4
  sll   S0, S3, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  move  A0, S0
  move  A1, R0
  li    A2, 1
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  jal   func_8007D9E0
   li    A0, 20
  jal   func_8007959C
   li    A0, 885
  jal   func_8007D838
   nop
  move  S1, V0
  lh    V0, 0x1e(S2)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 30
  sw    V0, 0x14(SP)
  move  A0, S0
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S1
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   li    S1, 255
  jal   func_8007D9E0
   li    A0, 10
  move  A0, S0
  move  A1, R0
  move  A2, R0
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  li    S0, 1
  sll   A1, S0, 1
L8010D2A0:
  addu  A1, A1, S0
  sll   A1, A1, 3
  addu  A1, A1, S0
  subu  A1, S1, A1
  sll   A1, A1, 0x10
  lh    A0, 0x1e(S2)
  jal   func_800629F0
   sra   A1, A1, 0x10
  lh    A0, 0x1e(S2)
  lui   A2, 0x4000
  jal   func_800628C0
   move  A1, R0
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010D2A0
   sll   A1, S0, 1
  lh    A0, 0x1e(S2)
  jal   func_800629F0
   move  A1, R0
  li    A0, -1
  li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  lh    V1, 0x1e(S2)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 259
  jal   func_8007D9E0
   li    A0, 50
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  sll   A0, S3, 0x10
  jal   func_8007F8B0
   sra   A0, A0, 0x10
  sll   A0, S4, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  lw    RA, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x30

func_8010D37C:
  addiu SP, SP, -0x38
  sw    RA, 0x34(SP)
  sw    S6, 0x30(SP)
  sw    S5, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S5, hi(D_800F93A8)
  addiu S5, S5, lo(D_800F93A8)
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  move  S2, V0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sll   V0, V0, 2
  lui   A0, hi(D_8011237C)
  addu  A0, A0, V0
  jal   func_80017680
   lw    A0, lo(D_8011237C)(A0)
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S6, V0
  jal   func_80017800
   move  A0, S0
  sll   V0, S2, 0x10
  sra   S0, V0, 0x10
  sll   A2, S6, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  lui   V0, hi(D_800F93C6)
  lhu   V0, lo(D_800F93C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L8010D46C
   move  A0, S0
  move  A1, R0
  j     L8010D47C
   li    A2, 4097
L8010D46C:
  sll   A0, S2, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  li    A2, 4096
L8010D47C:
  jal   func_80082418
   sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  lh    V0, 0x1e(S5)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  move  S1, R0
  sll   S0, S2, 0x10
  sll   A2, S1, 4
L8010D4F8:
  sra   A0, S0, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S1, S1, 1
  slti  V0, S1, 0x11
  bnel  V0, R0, L8010D4F8
   sll   A2, S1, 4
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  move  A0, S0
  move  A1, R0
  li    A2, 1
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  jal   func_8007D9E0
   li    A0, 20
  jal   func_8007959C
   li    A0, 885
  lh    V0, 0x1e(S5)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112544)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112544)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112548)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112548)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 30
  sw    V0, 0x14(SP)
  move  A0, S0
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  jal   func_8007D9E0
   li    A0, 20
  li    S1, 1
  li    S4, 255
  sll   S3, S2, 0x10
  sll   S0, S1, 1
L8010D61C:
  addu  S0, S0, S1
  sll   S0, S0, 3
  addu  S0, S0, S1
  subu  S0, S4, S0
  sll   A1, S0, 0x10
  lh    A0, 0x1e(S5)
  jal   func_800629F0
   sra   A1, A1, 0x10
  sra   A0, S3, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, S0, 0xffff
  jal   func_8007DA44
   addiu S1, S1, 1
  slti  V0, S1, 0xa
  bnez  V0, L8010D61C
   sll   S0, S1, 1
  lh    A0, 0x1e(S5)
  jal   func_800629F0
   move  A1, R0
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 2
  jal   func_8007F8B0
   move  A0, S0
  sll   A0, S6, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  lw    RA, 0x34(SP)
  lw    S6, 0x30(SP)
  lw    S5, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x38

func_8010D6C8:
  addiu SP, SP, -0x30
/*  */  sw    RA, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S3, hi(D_800F93A8)
  addiu S3, S3, lo(D_800F93A8)
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  move  S2, V0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sll   V0, V0, 2
  lui   A0, hi(D_8011237C)
  addu  A0, A0, V0
  jal   func_80017680
   lw    A0, lo(D_8011237C)(A0)
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S4, V0
  jal   func_80017800
   move  A0, S0
  sll   V0, S2, 0x10
  sra   S0, V0, 0x10
  sll   A2, S4, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  lui   V0, hi(D_800F93C6)
  lhu   V0, lo(D_800F93C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L8010D7B0
   move  A0, S0
  move  A1, R0
  j     L8010D7C0
   li    A2, 4097
L8010D7B0:
  sll   A0, S2, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  li    A2, 4096
L8010D7C0:
  jal   func_80082418
   sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  lh    V0, 0x1e(S3)
  sll   V0, V0, 3
  lui   AT, hi(D_80112564)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112564)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112568)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112568)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  move  S0, R0
  sll   S1, S2, 0x10
  sll   A2, S0, 4
L8010D83C:
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0x11
  bnel  V0, R0, L8010D83C
   sll   A2, S0, 4
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  move  A0, S0
  move  A1, R0
  li    A2, 1
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  jal   func_8007D9E0
   li    A0, 20
  jal   func_8007959C
   li    A0, 885
  jal   func_8007D838
   nop
  move  S1, V0
  lh    V0, 0x1e(S3)
  sll   V0, V0, 3
  lui   AT, hi(D_80112564)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112564)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112568)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112568)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 30
  sw    V0, 0x14(SP)
  move  A0, S0
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S1
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   li    S0, 1
  sll   S1, S2, 0x10
  li    S3, 255
  sll   A2, S0, 1
L8010D974:
  addu  A2, A2, S0
  sll   A2, A2, 3
  addu  A2, A2, S0
  subu  A2, S3, A2
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010D974
   sll   A2, S0, 1
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  jal   func_8007F8B0
   move  A0, S0
  sll   A0, S4, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  lw    RA, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x30

func_8010D9F4:
  addiu SP, SP, -0x40
  sw    RA, 0x30(SP)
  sw    S5, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  sdc1  F20, 0x38(SP)
  lui   S4, hi(D_800F93A8)
  addiu S4, S4, lo(D_800F93A8)
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  move  S2, V0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sll   V0, V0, 2
  lui   A0, hi(D_8011237C)
  addu  A0, A0, V0
  jal   func_80017680
   lw    A0, lo(D_8011237C)(A0)
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S5, V0
  jal   func_80017800
   move  A0, S0
  sll   V0, S2, 0x10
  sra   S0, V0, 0x10
  sll   A2, S5, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  lui   V0, hi(D_800F93C6)
  lhu   V0, lo(D_800F93C6)(V0)
  andi  V0, V0, 1
  beqz  V0, L8010DAE4
   move  A0, S0
  move  A1, R0
  j     L8010DAF4
   li    A2, 4097
L8010DAE4:
  sll   A0, S2, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  li    A2, 4096
L8010DAF4:
  jal   func_80082418
   sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  lh    V0, 0x1e(S4)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_80081AD0
   sra   A3, A3, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  move  S0, R0
  sll   S1, S2, 0x10
  sll   A2, S0, 4
L8010DB70:
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0x11
  bnel  V0, R0, L8010DB70
   sll   A2, S0, 4
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   li    A2, 255
  move  A0, S0
  move  A1, R0
  li    A2, 1
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  jal   func_8007D9E0
   li    A0, 20
  jal   func_8007959C
   li    A0, 885
  jal   func_8007D838
   li    S3, 255
  move  S1, V0
  lh    V0, 0x1e(S4)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 30
  sw    V0, 0x14(SP)
  move  A0, S0
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S1
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   sll   S1, S2, 0x10
  jal   func_8007D9E0
   li    A0, 10
  move  A0, S0
  move  A1, R0
  move  A2, R0
  jal   func_800822A8
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   li    A2, 1
  li    S0, 1
  sll   A2, S0, 1
L8010DCD0:
  addu  A2, A2, S0
  sll   A2, A2, 3
  addu  A2, A2, S0
  subu  A2, S3, A2
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010DCD0
   sll   A2, S0, 1
  sll   A0, S2, 0x10
  sra   A0, A0, 0x10
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   V1, hi(p1_item)
  addu  V1, V1, V0
  lb    V1, lo(p1_item)(V1)
  li    V0, 7
  bne   V1, V0, L8010DD54
   move  S0, R0
  jal   func_8007959C
   li    A0, 873
  move  S0, R0
L8010DD54:
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F20
L8010DD5C:
  mtc1  S0, F12
  nop
  cvt.s.w F12, F12
  jal   func_800B83C0
   addiu S0, S0, 0x1e
  lh    A0, 0x1e(S4)
  mul.s F0, F0, F20
  mfc1  A1, F0
  jal   func_80062A28
   nop
  jal   func_8007DA44
   nop
  slti  V0, S0, 0x439
  bnez  V0, L8010DD5C
   nop
  li    S1, 1
  li    S3, 255
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F20
  sll   A1, S1, 1
L8010DDAC:
  addu  A1, A1, S1
  sll   A1, A1, 3
  addu  A1, A1, S1
  subu  A1, S3, A1
  sll   A1, A1, 0x10
  lh    A0, 0x1e(S4)
  jal   func_800629F0
   sra   A1, A1, 0x10
  mtc1  S0, F12
  nop
  cvt.s.w F12, F12
  jal   func_800B83C0
   addiu S0, S0, 0x1e
  lh    A0, 0x1e(S4)
  mul.s F0, F0, F20
  mfc1  A1, F0
  nop
  jal   func_80062A28
   addiu S1, S1, 1
  jal   func_8007DA44
   nop
  slti  V0, S1, 0xa
  bnez  V0, L8010DDAC
   sll   A1, S1, 1
  lh    A0, 0x1e(S4)
  jal   func_800629F0
   move  A1, R0
  sll   A0, S2, 0x10
  jal   func_8007F8B0
   sra   A0, A0, 0x10
  sll   A0, S5, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  lw    RA, 0x30(SP)
  lw    S5, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  ldc1  F20, 0x38(SP)
  jr    RA
   addiu SP, SP, 0x40

func_8010DE58:
  addiu SP, SP, -0x88
  sw    RA, 0x58(SP)
  sw    S3, 0x54(SP)
  sw    S2, 0x50(SP)
  sw    S1, 0x4c(SP)
  sw    S0, 0x48(SP)
  sdc1  F28, 0x80(SP)
  sdc1  F26, 0x78(SP)
  sdc1  F24, 0x70(SP)
  sdc1  F22, 0x68(SP)
  sdc1  F20, 0x60(SP)
  lui   S3, hi(D_800F93A8)
  addiu S3, S3, lo(D_800F93A8)
  jal   func_8010D37C
   move  S1, R0
  jal   func_8007D838
   nop
  move  S0, V0
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  sll   V0, V0, 3
  lui   AT, hi(D_80112544)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112544)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112548)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112548)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 1
  sw    V0, 0x14(SP)
  li    A0, -1
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   move  S0, R0
  li    A0, -1
  addiu V1, SP, 0x20
L8010DF5C:
  lh    V0, 0x1e(S3)
  beq   S0, V0, L8010DF94
   sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  lb    V0, lo(p1_item)(AT)
  beq   V0, A0, L8010DF94
   addu  V0, V1, S1
  sb    S0, 0(V0)
  addiu S1, S1, 1
L8010DF94:
  addiu S0, S0, 1
  slti  V0, S0, 4
  bnez  V0, L8010DF5C
   nop
  li    A0, 110
  jal   func_80043510
   move  A1, R0
  move  S2, V0
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  move  A1, R0
  move  A2, A1
  jal   func_800297E8
   move  A3, A1
  jal   func_8005DC3C
   li    A0, -1
  lw    A1, 0x24(V0)
  addiu A0, S2, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  li    A1, 2
  jal   func_80029E80
   li    A2, 1
  li    AT, 0x42C80000 ;100.000000
  mtc1  AT, F0
  nop
  swc1  F0, 0x30(S2)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F22
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F20
  lwc1  F0, 0x30(S2)
  sub.s F0, F0, F22
L8010E028:
  jal   func_8007DA44
   swc1  F0, 0x30(S2)
  lwc1  F0, 0x30(S2)
  c.lt.s F20, F0
  nop
  nop
  bc1tl L8010E028
   sub.s F0, F0, F22
  beqz  S1, L8010E0D4
   nop
  jal   func_8007959C
   li    A0, 875
  move  S0, R0
  li    AT, 0x40000000 ;2.000000
  mtc1  AT, F28
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F26
L8010E06C:
  mtc1  S0, F22
  nop
  cvt.s.w F22, F22
  jal   func_800B83C0
   mov.s F12, F22
  div.s F24, F0, F28
  add.s F24, F24, F26
  jal   func_800B83C0
   mov.s F12, F22
  div.s F20, F0, F28
  add.s F20, F20, F26
  jal   func_800B83C0
   mov.s F12, F22
  div.s F0, F0, F28
  mfc1  A1, F24
  mfc1  A2, F20
  add.s F0, F0, F26
  mfc1  A3, F0
  nop
  jal   func_800B3160
   addiu A0, S2, 0x24
  jal   func_8007DA44
   addiu S0, S0, 0x1e
  slti  V0, S0, 0x439
  bnez  V0, L8010E06C
   nop
L8010E0D4:
  lw    V0, 0x3c(S2)
  lw    V0, 0x40(V0)
  lh    A0, 0(V0)
  li    A1, 1
  jal   func_80029E80
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 20
  bnez  S1, L8010E160
   nop
  li    A0, -1
  li    A1, 3
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 20
  jal   func_80055E90
   li    A0, 483
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  jal   func_8004430C
   move  A0, S2
  lh    V0, 0x1e(S3)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  li    V0, -1
  lui   AT, hi(p1_item)
  addu  AT, AT, V1
  j     L8010E3A0
   sb    V0, lo(p1_item)(AT)
L8010E160:
  mtc1  S1, F12
  nop
  jal   func_8005A358
   cvt.s.w F12, F12
  addu  V0, SP, V0
  lb    S1, 0x20(V0)
  lh    V1, 0x1e(S3)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  sll   S0, S1, 1
  addu  S0, S0, S1
  sll   S0, S0, 2
  addu  S0, S0, S1
  sll   S0, S0, 2
  lui   V1, hi(p1_item)
  addu  V1, V1, S0
  lbu   V1, lo(p1_item)(V1)
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  sb    V1, lo(p1_item)(AT)
  li    V0, -1
  lui   AT, hi(p1_item)
  addu  AT, AT, S0
  sb    V0, lo(p1_item)(AT)
  move  A0, S1
  jal   func_80067170
   li    A1, 3
  move  A0, S1
  jal   func_800629F0
   move  A1, R0
  lh    A0, 0x1e(S3)
  jal   func_80062588
   nop
  lh    A0, 0x1e(S3)
  jal   func_800629F0
   li    A1, 256
  jal   func_8007959C
   li    A0, 25
  jal   func_8007D838
   nop
  move  S1, V0
  lh    V0, 0x1e(S3)
  sll   V0, V0, 3
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112564)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112564)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112568)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112568)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 5
  sw    V0, 0x14(SP)
  li    A0, -1
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S1
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
  lh    V1, 0x1e(S3)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A1, hi(p1_char)
  addu  A1, A1, V0
  lbu   A1, lo(p1_char)(A1)
  jal   func_80079718
   li    A0, 245
  li    A0, -1
  li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 50
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  jal   func_8004430C
   move  A0, S2
  li    V1, 24
  sb    V1, 0x28(SP)
  lui   V0, hi(p1_char)
  addu  V0, V0, S0
  lbu   V0, lo(p1_char)(V0)
  sb    V0, 0x29(SP)
  sb    R0, 0x2a(SP)
  sb    V1, 0x38(SP)
  lh    V1, 0x1e(S3)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sb    V0, 0x39(SP)
  sb    R0, 0x3a(SP)
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  li    A0, -1
  li    A1, 482
  addiu A2, SP, 0x28
  jal   func_80056368
   addiu A3, SP, 0x38
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  jal   func_8010D6C8
   nop
L8010E3A0:
  lw    RA, 0x58(SP)
  lw    S3, 0x54(SP)
  lw    S2, 0x50(SP)
  lw    S1, 0x4c(SP)
  lw    S0, 0x48(SP)
  ldc1  F28, 0x80(SP)
  ldc1  F26, 0x78(SP)
  ldc1  F24, 0x70(SP)
  ldc1  F22, 0x68(SP)
  ldc1  F20, 0x60(SP)
  jr    RA
   addiu SP, SP, 0x88

func_8010E3D0:
  addiu SP, SP, -0x48
  sw    RA, 0x18(SP)
  sw    S1, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F28, 0x40(SP)
  sdc1  F26, 0x38(SP)
  sdc1  F24, 0x30(SP)
  sdc1  F22, 0x28(SP)
  sdc1  F20, 0x20(SP)
  jal   func_8005DC3C
   li    A0, -1
  jal   func_8005070C
   move  S1, V0
  lui   A0, hi(D_800CC1F0)
  jal   func_800442DC
   lw    A0, lo(D_800CC1F0)(A0)
  lui   V1, hi(D_800CC1F0)
  lw    V1, lo(D_800CC1F0)(V1)
  lw    V0, 0x3c(V1)
  sw    R0, 0x30(V0)
  lw    V0, 0x3c(V1)
  sw    R0, 0x34(V0)
  lw    V0, 0x3c(V1)
  sw    R0, 0x38(V0)
  li    A0, -1
  jal   func_80067170
   li    A1, 3
  jal   func_8007959C
   li    A0, 876
  li    A0, 111
  jal   func_80043510
   move  A1, R0
  move  S0, V0
  lw    A1, 0x24(S1)
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lwc1  F0, 0x14(S0)
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x14(S0)
  lwc1  F0, 0x10(S0)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x10(S0)
  mtc1  R0, F22
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F20
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113658)
  ldc1  F24, lo(D_80113658)(AT)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F26
L8010E4B8:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  add.d F0, F0, F24
  cvt.s.d F20, F0
  c.lt.s F20, F26
  nop
  bc1t  L8010E4B8
   nop
  jal   func_800442DC
   lw    A0, 0x24(S1)
  lui   A0, hi(D_800CC1F0)
  jal   func_80044258
   lw    A0, lo(D_800CC1F0)(A0)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F0
  nop
  c.le.s F0, F20
  nop
  bc1f  L8010E5E0
   nop
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113660)
  ldc1  F24, lo(D_80113660)(AT)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F26
L8010E570:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  sub.d F0, F0, F24
  cvt.s.d F20, F0
  c.le.s F26, F20
  nop
  bc1t  L8010E570
   nop
L8010E5E0:
  jal   func_8004430C
   move  A0, S0
  jal   func_8007D9E0
   li    A0, 20
  li    A0, 5
  jal   func_800508E4
   li    A1, 2
  jal   func_8007D9E0
   li    A0, 40
  li    A0, -1
  jal   func_800508E4
   li    A1, 2
  jal   func_80055E90
   li    A0, 486
  lw    RA, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F28, 0x40(SP)
  ldc1  F26, 0x38(SP)
  ldc1  F24, 0x30(SP)
  ldc1  F22, 0x28(SP)
  ldc1  F20, 0x20(SP)
  jr    RA
   addiu SP, SP, 0x48

func_8010E640:
/*  */  addiu SP, SP, -0x58
  sw    RA, 0x28(SP)
  sw    S1, 0x24(SP)
  sw    S0, 0x20(SP)
  sdc1  F28, 0x50(SP)
  sdc1  F26, 0x48(SP)
  sdc1  F24, 0x40(SP)
  sdc1  F22, 0x38(SP)
  sdc1  F20, 0x30(SP)
  jal   func_8005DC3C
   li    A0, -1
  move  S1, V0
  li    A0, -1
  jal   func_800508E4
   li    A1, 2
  jal   func_8005670C
   addiu A0, SP, 0x10
  lw    A2, 0x24(S1)
  addiu A2, A2, 0x18
  move  A0, A2
  addiu A1, SP, 0x10
  jal   func_80056B78
   li    A3, 8
  jal   func_8007D9E0
   li    A0, 8
  jal   func_8007959C
   li    A0, 876
  li    A0, 111
  jal   func_80043510
   move  A1, R0
  move  S0, V0
  lw    A1, 0x24(S1)
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lwc1  F0, 0x14(S0)
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x14(S0)
  lwc1  F0, 0x10(S0)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x10(S0)
  mtc1  R0, F22
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F20
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113668)
  ldc1  F24, lo(D_80113668)(AT)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F26
L8010E720:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  add.d F0, F0, F24
  cvt.s.d F20, F0
  c.lt.s F20, F26
  nop
  bc1t  L8010E720
   nop
  jal   func_80044258
   lw    A0, 0x24(S1)
  jal   func_80050860
   nop
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F0
  nop
  c.le.s F0, F20
  nop
  bc1f  L8010E844
   nop
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113670)
  ldc1  F24, lo(D_80113670)(AT)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F26
L8010E7D4:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  sub.d F0, F0, F24
  cvt.s.d F20, F0
  c.le.s F26, F20
  nop
  bc1t  L8010E7D4
   nop
L8010E844:
  jal   func_8004430C
   move  A0, S0
  lw    RA, 0x28(SP)
  lw    S1, 0x24(SP)
  lw    S0, 0x20(SP)
  ldc1  F28, 0x50(SP)
  ldc1  F26, 0x48(SP)
  ldc1  F24, 0x40(SP)
  ldc1  F22, 0x38(SP)
  ldc1  F20, 0x30(SP)
  jr    RA
   addiu SP, SP, 0x58

func_8010E874:
  addiu SP, SP, -0x28
  sw    RA, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S1, hi(D_800F93A8)
  addiu S1, S1, lo(D_800F93A8)
  lui   V0, hi(D_800F93C6)
  lh    V0, lo(D_800F93C6)(V0)
  sll   V1, V0, 1
  addu  V1, V1, V0
  sll   V1, V1, 2
  addu  V1, V1, V0
  sll   V1, V1, 2
  li    V0, 3
  lui   AT, hi(p1_item)
  addu  AT, AT, V1
  sb    V0, lo(p1_item)(AT)
  jal   func_80060210
   li    A0, 25
L8010E8C0:
  jal   func_800609D8
   nop
  beqz  V0, L8010E8E0
   nop
  jal   func_8007DA44
   nop
  j     L8010E8C0
   nop
L8010E8E0:
  jal   func_80062824
   li    A0, 1
  lh    A0, 0x1e(S1)
  jal   func_800629F0
   move  A1, R0
  jal   func_80060210
   li    A0, 26
L8010E8FC:
  jal   func_800609D8
   nop
  beqz  V0, L8010E91C
   nop
  jal   func_8007DA44
   nop
  j     L8010E8FC
   nop
L8010E91C:
  jal   func_8007D838
   nop
  move  S0, V0
  lh    V0, 0x1e(S1)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 1
  sw    V0, 0x14(SP)
  li    A0, -1
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   li    S0, 1
  jal   func_8007959C
   li    A0, 25
  sll   A1, S0, 1
L8010E9E4:
  addu  A1, A1, S0
  sll   A1, A1, 3
  addu  A1, A1, S0
  sll   A1, A1, 0x10
  lh    A0, 0x1e(S1)
  jal   func_800629F0
   sra   A1, A1, 0x10
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnel  V0, R0, L8010E9E4
   sll   A1, S0, 1
  lh    A0, 0x1e(S1)
  jal   func_800629F0
   li    A1, 256
  li    A0, -1
  li    A1, 3
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 30
  lh    V0, 2(S1)
  sll   V0, V0, 2
  lui   A0, hi(D_80112584)
  addu  A0, A0, V0
  jal   func_80055E90
   lw    A0, lo(D_80112584)(A0)
  jal   func_8007959C
   li    A0, 885
  jal   func_8007D838
   nop
  move  S0, V0
  lh    V0, 0x1e(S1)
  sll   V0, V0, 3
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 30
  sw    V0, 0x14(SP)
  li    A0, -1
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   nop
  jal   func_8007D9E0
   li    A0, 10
  jal   func_80060210
   li    A0, 25
L8010EB24:
  jal   func_800609D8
   nop
  beqz  V0, L8010EB44
   nop
  jal   func_8007DA44
   nop
  j     L8010EB24
   nop
L8010EB44:
  jal   func_80062824
   move  A0, R0
  jal   func_80060210
   li    A0, 26
L8010EB54:
  jal   func_800609D8
   nop
  beqz  V0, L8010EB74
   nop
  jal   func_8007DA44
   nop
  j     L8010EB54
   nop
L8010EB74:
  lw    RA, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x28

func_8010EB88:
  addiu SP, SP, -0x78
  sw    RA, 0x48(SP)
  sw    S5, 0x44(SP)
  sw    S4, 0x40(SP)
  sw    S3, 0x3c(SP)
  sw    S2, 0x38(SP)
  sw    S1, 0x34(SP)
  sw    S0, 0x30(SP)
  sdc1  F28, 0x70(SP)
  sdc1  F26, 0x68(SP)
  sdc1  F24, 0x60(SP)
  sdc1  F22, 0x58(SP)
  sdc1  F20, 0x50(SP)
  jal   func_8005DC3C
   li    A0, -1
  lui   S4, hi(D_800F93A8)
  addiu S4, S4, lo(D_800F93A8)
  jal   func_8007D838
   move  S3, V0
  li    AT, 0x3FA60000 ;1.296875
  ori AT, AT, 0x6666
  mtc1  AT, F12
  nop
  jal   func_80052F70
   move  S0, V0
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   move  S1, R0
  li    S5, 255
  sll   V0, S1, 1
L8010EC08:
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   V1, hi(p1_item)
  addu  V1, V1, V0
  lb    V1, lo(p1_item)(V1)
  li    V0, 3
  bnel  V1, V0, L8010EE04
   addiu S1, S1, 1
  jal   func_80060210
   li    A0, 25
L8010EC38:
  jal   func_800609D8
   nop
  beqz  V0, L8010EC58
   nop
  jal   func_8007DA44
   nop
  j     L8010EC38
   nop
L8010EC58:
  jal   func_80062824
   li    A0, 1
  move  A0, S1
  jal   func_800629F0
   li    A1, 256
  jal   func_80060210
   li    A0, 26
L8010EC74:
  jal   func_800609D8
   nop
  beqz  V0, L8010EC94
   nop
  jal   func_8007DA44
   nop
  j     L8010EC74
   nop
L8010EC94:
  jal   func_8007D9E0
   li    A0, 20
  jal   func_800636F8
   li    A0, 3
  lh    S2, 0x1e(S4)
  sh    S1, 0x1e(S4)
  jal   func_8007959C
   li    A0, 885
  jal   func_8007D838
   nop
  move  S0, V0
  lh    V0, 0x1e(S4)
  sll   V0, V0, 3
  lui   AT, hi(D_80112504)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112504)(AT)
  trunc.w.s F2, F0
  mfc1  A1, F2
  nop
  sll   A1, A1, 0x10
  lui   AT, hi(D_80112508)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112508)(AT)
  trunc.w.s F2, F0
  mfc1  A2, F2
  nop
  sll   A2, A2, 0x10
  lui   AT, hi(D_80112524)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112524)(AT)
  trunc.w.s F2, F0
  mfc1  A3, F2
  nop
  sll   A3, A3, 0x10
  lui   AT, hi(D_80112528)
  addu  AT, AT, V0
  lwc1  F0, lo(D_80112528)(AT)
  trunc.w.s F2, F0
  mfc1  V0, F2
  nop
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  sw    V0, 0x10(SP)
  li    V0, 30
  sw    V0, 0x14(SP)
  li    A0, -1
  sra   A1, A1, 0x10
  sra   A2, A2, 0x10
  jal   func_8010CF20
   sra   A3, A3, 0x10
  move  A0, S0
  jal   func_8007D700
   move  A1, V0
  jal   func_8007D7E8
   li    S0, 1
  jal   func_8007D9E0
   li    A0, 20
  sll   A1, S0, 1
L8010ED7C:
  addu  A1, A1, S0
  sll   A1, A1, 3
  addu  A1, A1, S0
  subu  A1, S5, A1
  sll   A1, A1, 0x10
  move  A0, S1
  jal   func_800629F0
   sra   A1, A1, 0x10
  move  A0, S1
  lui   A2, 0x4000
  jal   func_800628C0
   move  A1, R0
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010ED7C
   sll   A1, S0, 1
  move  A0, S1
  jal   func_800629F0
   move  A1, R0
  sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  li    V1, -1
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  sb    V1, lo(p1_item)(AT)
  sh    S2, 0x1e(S4)
  jal   func_800636F8
   li    A0, 1
  j     L8010EE10
   nop
L8010EE04:
  slti  V0, S1, 4
  bnez  V0, L8010EC08
   sll   V0, S1, 1
L8010EE10:
  lui   V0, hi(D_800F8D12)
  lh    V0, lo(D_800F8D12)(V0)
  beql  V0, R0, L8010EE34
   move  A0, R0
  jal   func_80108C0C
   nop
  jal   func_8007D9E0
   li    A0, 30
  move  A0, R0
L8010EE34:
  jal   func_80067170
   li    A1, 4
  li    A0, 1
  jal   func_80067170
   li    A1, 4
  li    A0, 2
  jal   func_80067170
   li    A1, 4
  li    A0, 3
  jal   func_80067170
   li    A1, 4
  jal   func_8007959C
   li    A0, 876
  li    A0, 111
  jal   func_80043510
   move  A1, R0
  move  S0, V0
  lui   A1, hi(D_800F64C8)
  lw    A1, lo(D_800F64C8)(A1)
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lwc1  F0, 0x14(S0)
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x14(S0)
  lwc1  F0, 0x10(S0)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x10(S0)
  mtc1  R0, F22
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F20
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113678)
  ldc1  F24, lo(D_80113678)(AT)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F26
L8010EEE0:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  add.d F0, F0, F24
  cvt.s.d F20, F0
  c.lt.s F20, F26
  nop
  bc1t  L8010EEE0
   nop
  jal   func_800509FC
   nop
  lui   A0, hi(D_800F64C8)
  jal   func_800442DC
   lw    A0, lo(D_800F64C8)(A0)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F0
  nop
  c.le.s F0, F20
  nop
  bc1f  L8010F008
   nop
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113680)
  ldc1  F24, lo(D_80113680)(AT)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F26
L8010EF98:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  sub.d F0, F0, F24
  cvt.s.d F20, F0
  c.le.s F26, F20
  nop
  bc1t  L8010EF98
   nop
L8010F008:
  jal   func_8004430C
   move  A0, S0
  lh    V0, 0x1c(S4)
  sll   V0, V0, 1
  lui   A0, hi(D_80111984)
  addu  A0, A0, V0
  lh    A0, lo(D_80111984)(A0)
  addiu A1, S3, 0x10
  jal   func_80054C78
   addiu A2, S3, 0x12
  lhu   V0, 0x10(S3)
  sh    V0, 0x14(S3)
  lhu   V0, 0x12(S3)
  addiu V0, V0, 1
  sh    V0, 0x16(S3)
  lh    V0, 0x1c(S4)
  sll   V0, V0, 1
  lui   A0, hi(D_80111984)
  addu  A0, A0, V0
  jal   func_80054B8C
   lh    A0, lo(D_80111984)(A0)
  lw    A0, 0x24(S3)
  addiu S0, V0, 8
  addiu A0, A0, 0xc
  move  A1, S0
  jal   func_80056658
   addiu A2, SP, 0x18
  lw    A2, 0x24(S3)
  addiu A2, A2, 0x18
  move  A0, A2
  addiu A1, SP, 0x18
  jal   func_80056B78
   li    A3, 8
  jal   func_8007D9E0
   li    A0, 8
  move  A0, R0
  jal   func_800508E4
   li    A1, 2
  lw    A2, 0x24(S3)
  addiu A2, A2, 0xc
  move  A0, A2
  move  A1, S0
  jal   func_80056D80
   li    A3, 10
  jal   func_8007D9E0
   li    A0, 10
  li    A0, -1
  jal   func_800508E4
   li    A1, 2
  jal   func_8006286C
   move  A0, R0
  beqz  V0, L8010F134
   nop
  jal   func_80060210
   li    A0, 25
L8010F0E4:
  jal   func_800609D8
   nop
  beqz  V0, L8010F104
   nop
  jal   func_8007DA44
   nop
  j     L8010F0E4
   nop
L8010F104:
  jal   func_80062824
   move  A0, R0
  jal   func_80060210
   li    A0, 26
L8010F114:
  jal   func_800609D8
   nop
  beqz  V0, L8010F134
   nop
  jal   func_8007DA44
   nop
  j     L8010F114
   nop
L8010F134:
  jal   func_8005670C
   addiu A0, SP, 0x18
  lw    A2, 0x24(S3)
  addiu A2, A2, 0x18
  move  A0, A2
  addiu A1, SP, 0x18
  jal   func_80056B78
   li    A3, 8
  jal   func_8007D9E0
   li    A0, 8
  li    A0, 5
  jal   func_800508E4
   li    A1, 2
  jal   func_8007D9E0
   li    A0, 30
  jal   func_8007959C
   li    A0, 291
  lh    V0, 2(S4)
  sll   V1, V0, 1
  sll   V0, V0, 2
  lui   A1, hi(D_80112584)
  addu  A1, A1, V0
  lw    A1, lo(D_80112584)(A1)
  lui   A0, hi(D_8011259C)
  addu  A0, A0, V1
  lh    A0, lo(D_8011259C)(A0)
  jal   func_8005600C
   addiu A1, A1, 1
  li    A0, -1
  jal   func_800508E4
   li    A1, 2
  jal   func_8007DA44
   nop
  lh    A0, 0x1e(S4)
  jal   func_800495D8
   li    A1, 3
  lw    RA, 0x48(SP)
  lw    S5, 0x44(SP)
  lw    S4, 0x40(SP)
  lw    S3, 0x3c(SP)
  lw    S2, 0x38(SP)
  lw    S1, 0x34(SP)
  lw    S0, 0x30(SP)
  ldc1  F28, 0x70(SP)
  ldc1  F26, 0x68(SP)
  ldc1  F24, 0x60(SP)
  ldc1  F22, 0x58(SP)
  ldc1  F20, 0x50(SP)
  jr    RA
   addiu SP, SP, 0x78

func_8010F1FC:
  addiu SP, SP, -0x40
  sw    RA, 0x14(SP)
  sw    S0, 0x10(SP)
  sdc1  F28, 0x38(SP)
  sdc1  F26, 0x30(SP)
  sdc1  F24, 0x28(SP)
  sdc1  F22, 0x20(SP)
  sdc1  F20, 0x18(SP)
  jal   func_800794A8
   li    A0, 60
  jal   func_8007959C
   li    A0, 876
  li    A0, 111
  jal   func_80043510
   move  A1, R0
  move  S0, V0
  lui   A1, hi(D_800CC1F0)
  lw    A1, lo(D_800CC1F0)(A1)
  addiu A0, S0, 0xc
  jal   func_800B3170
   addiu A1, A1, 0xc
  lwc1  F0, 0x14(S0)
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x14(S0)
  lwc1  F0, 0x10(S0)
  li    AT, 0x41F00000 ;30.000000
  mtc1  AT, F2
  nop
  add.s F0, F0, F2
  swc1  F0, 0x10(S0)
  mtc1  R0, F22
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F20
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113688)
  ldc1  F24, lo(D_80113688)(AT)
  li    AT, 0x41200000 ;10.000000
  mtc1  AT, F26
L8010F2A4:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  add.d F0, F0, F24
  cvt.s.d F20, F0
  c.lt.s F20, F26
  nop
  bc1t  L8010F2A4
   nop
  jal   func_800636F8
   li    A0, 3
  jal   func_80050860
   nop
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F0
  nop
  c.le.s F0, F20
  nop
  bc1f  L8010F3C8
   nop
  li    AT, 0x41A00000 ;20.000000
  mtc1  AT, F28
  lui   AT, hi(D_80113690)
  ldc1  F24, lo(D_80113690)(AT)
  li    AT, 0x3F800000 ;1.000000
  mtc1  AT, F26
L8010F358:
  mfc1  A1, F20
  mfc1  A2, F20
  mfc1  A3, F20
  nop
  jal   func_800B3160
   addiu A0, S0, 0x24
  lw    V0, 0x3c(S0)
  lw    V0, 0x40(V0)
  lh    V0, 0(V0)
  sll   A0, V0, 1
  addu  A0, A0, V0
  sll   A0, A0, 6
  lui   V0, hi(D_800FC834)
  lw    V0, lo(D_800FC834)(V0)
  addu  A0, A0, V0
  mfc1  A1, F22
  nop
  jal   func_800B3B80
   addiu A0, A0, 0x74
  jal   func_8007DA44
   add.s F22, F22, F28
  cvt.d.s F0, F20
  sub.d F0, F0, F24
  cvt.s.d F20, F0
  c.le.s F26, F20
  nop
  bc1t  L8010F358
   nop
L8010F3C8:
  jal   func_8004430C
   move  A0, S0
  jal   func_800632FC
   nop
  sll   V0, V0, 0x10
  jal   func_80079390
   sra   A0, V0, 0x10
  lui   V0, hi(D_800F93AA)
  lh    V0, lo(D_800F93AA)(V0)
  sll   V0, V0, 2
  lui   A0, hi(D_80112584)
  addu  A0, A0, V0
  lw    A0, lo(D_80112584)(A0)
  jal   func_80055E90
   addiu A0, A0, 8
  lui   AT, hi(D_800F8D16)
  sh    R0, lo(D_800F8D16)(AT)
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  ldc1  F28, 0x38(SP)
  ldc1  F26, 0x30(SP)
  ldc1  F24, 0x28(SP)
  ldc1  F22, 0x20(SP)
  ldc1  F20, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x40

func_8010F430:
  addiu SP, SP, -0x90
  sw    RA, 0x8c(SP)
  sw    FP, 0x88(SP)
  sw    S7, 0x84(SP)
  sw    S6, 0x80(SP)
  sw    S5, 0x7c(SP)
  sw    S4, 0x78(SP)
  sw    S3, 0x74(SP)
  sw    S2, 0x70(SP)
  sw    S1, 0x6c(SP)
  sw    S0, 0x68(SP)
  lui   S0, hi(D_800F93C6)
  addiu S0, S0, lo(D_800F93C6)
  lh    S4, 0(S0)
  jal   func_8005DC3C
   li    A0, -1
  move  S6, V0
  addiu S7, S0, -0x1e
  move  S2, R0
  move  S1, R0
  sll   V0, S4, 1
  addu  V0, V0, S4
  sll   V0, V0, 2
  addu  V0, V0, S4
  sll   S3, V0, 2
  addiu S5, SP, 0x20
L8010F498:
  lui   A0, hi(D_800FD2D0)
  addu  A0, A0, S3
  lhu   A0, lo(D_800FD2D0)(A0)
  lui   A1, hi(D_800FD2D2)
  addu  A1, A1, S3
  jal   func_80054BB0
   lhu   A1, lo(D_800FD2D2)(A1)
  move  S0, V0
  sll   V0, S1, 1
  addu  V0, V0, S1
  sll   V0, V0, 2
  addu  V0, V0, S1
  sll   V0, V0, 2
  lui   A0, hi(D_800FD2D0)
  addu  A0, A0, V0
  lhu   A0, lo(D_800FD2D0)(A0)
  lui   A1, hi(D_800FD2D2)
  addu  A1, A1, V0
  lhu   A1, lo(D_800FD2D2)(A1)
  jal   func_80054BB0
   sll   S0, S0, 0x10
  sra   S0, S0, 0x10
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  bnel  S0, V0, L8010F520
   addiu S1, S1, 1
  addu  V0, S5, S2
  sb    S1, 0(V0)
  addiu S2, S2, 1
  sll   A0, S1, 0x10
  sra   A0, A0, 0x10
  jal   func_80067170
   li    A1, 4
  addiu S1, S1, 1
L8010F520:
  slti  V0, S1, 4
  bnez  V0, L8010F498
   nop
  beqz  S2, L8010F910
   nop
  jal   func_80046D2C
   move  A0, S4
  move  FP, V0
  li    A0, -1
  jal   func_800508E4
   li    A1, 2
  addiu S0, SP, 0x28
  jal   func_8005670C
   move  A0, S0
  lw    A2, 0x24(S6)
  addiu A2, A2, 0x18
  move  A0, A2
  move  A1, S0
  jal   func_80056B78
   li    A3, 8
  jal   func_8007D9E0
   li    A0, 8
  jal   func_8007959C
   li    A0, 291
  move  A0, R0
  blez  S2, L8010F5CC
   move  S1, R0
  addiu A1, SP, 0x20
  addu  V0, A1, S1
L8010F594:
  lb    V1, 0(V0)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  addu  A0, A0, V0
  addiu S1, S1, 1
  slt   V0, S1, S2
  bnez  V0, L8010F594
   addu  V0, A1, S1
L8010F5CC:
  bnel  A0, R0, L8010F6A4
   sb    R0, 0x44(SP)
  li    V0, 1
  bne   S2, V0, L8010F670
   li    V0, 24
  sb    V0, 0x38(SP)
  lb    V1, 0x20(SP)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sb    V0, 0x39(SP)
  sb    R0, 0x3a(SP)
  lh    V0, 2(S7)
  sll   V1, V0, 1
  lui   A0, hi(D_8011259C)
  addu  A0, A0, V1
  lh    A0, lo(D_8011259C)(A0)
  sll   V0, V0, 2
  lui   A1, hi(D_80112584)
  addu  A1, A1, V0
  lw    A1, lo(D_80112584)(A1)
  sw    R0, 0x10(SP)
  sw    R0, 0x14(SP)
  sw    R0, 0x18(SP)
  addiu A1, A1, 6
  addiu A2, SP, 0x38
  jal   func_80056368
   move  A3, R0
  jal   func_80056458
   nop
  jal   func_80056144
   nop
  jal   func_80056168
   nop
  j     L8010F8F0
   nop
L8010F670:
  lh    V0, 2(S7)
  sll   V1, V0, 1
  sll   V0, V0, 2
  lui   A1, hi(D_80112584)
  addu  A1, A1, V0
  lw    A1, lo(D_80112584)(A1)
  lui   A0, hi(D_8011259C)
  addu  A0, A0, V1
  lh    A0, lo(D_8011259C)(A0)
  jal   func_8005600C
   addiu A1, A1, 7
  j     L8010F8F0
   nop
L8010F6A4:
  sb    R0, 0x40(SP)
  sb    R0, 0x3c(SP)
  sb    R0, 0x38(SP)
  blez  S2, L8010F70C
   move  S1, R0
  addiu A2, SP, 0x38
  li    A3, 24
  addiu A1, SP, 0x20
L8010F6C4:
  sll   A0, S1, 2
  addu  A0, A2, A0
  sb    A3, 0(A0)
  addu  V0, A1, S1
  lb    V1, 0(V0)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_char)
  addu  AT, AT, V0
  lbu   V0, lo(p1_char)(AT)
  sb    V0, 1(A0)
  addiu S1, S1, 1
  slt   V0, S1, S2
  bnez  V0, L8010F6C4
   sb    R0, 2(A0)
L8010F70C:
  lh    V0, 2(S7)
  sll   V1, V0, 1
  lui   A0, hi(D_8011259C)
  addu  A0, A0, V1
  lh    A0, lo(D_8011259C)(A0)
  sll   V0, V0, 2
  addiu V1, S2, 1
  lui   A1, hi(D_80112584)
  addu  A1, A1, V0
  lw    A1, lo(D_80112584)(A1)
  addiu V0, SP, 0x40
  sw    V0, 0x10(SP)
  addiu V0, SP, 0x44
  sw    V0, 0x14(SP)
  sw    R0, 0x18(SP)
  addu  A1, V1, A1
  addiu A2, SP, 0x38
  jal   func_80056368
   addiu A3, SP, 0x3c
  jal   func_80056458
   nop
  lh    V1, 2(S7)
  li    V0, 4
  bne   V1, V0, L8010F778
   nop
  jal   func_80056458
   nop
L8010F778:
  jal   func_80056144
   li    S3, -1
  jal   func_80056168
   move  S1, R0
  blez  S2, L8010F7DC
   move  A1, R0
  addiu A2, SP, 0x20
  addu  V0, A2, S1
L8010F798:
  lb    V1, 0(V0)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   A0, hi(p1_coins)
  addu  A0, A0, V0
  lh    A0, lo(p1_coins)(A0)
  slt   V0, A1, A0
  beqz  V0, L8010F7D0
   addiu S1, S1, 1
  move  S3, V1
  move  A1, A0
L8010F7D0:
  slt   V0, S1, S2
  bnez  V0, L8010F798
   addu  V0, A2, S1
L8010F7DC:
  blez  S2, L8010F8DC
   move  S1, R0
  addiu S4, SP, 0x20
  sll   V0, S3, 1
  addu  V0, V0, S3
  sll   V0, V0, 2
  addu  V0, V0, S3
  sll   S5, V0, 2
  addu  V0, S4, S1
L8010F800:
  lb    A1, 0(V0)
  sll   V0, A1, 1
  addu  V0, V0, A1
  sll   V0, V0, 2
  addu  V0, V0, A1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slti  V0, V0, 5
  bnez  V0, L8010F83C
   addu  S0, S4, S1
  jal   func_800797DC
   li    A0, 252
  addu  S0, S4, S1
L8010F83C:
  lb    A0, 0(S0)
  jal   func_80067170
   li    A1, 3
  lb    A0, 0(S0)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   A1, hi(p1_coins)
  addu  A1, A1, V0
  lh    A1, lo(p1_coins)(A1)
  jal   func_8004CA14
   SUBU A1 R0 A1
  lb    V0, 0(S0)
  bne   S3, V0, L8010F89C
   addu  V0, S4, S1
  lui   A1, hi(p1_coins)
  addu  A1, A1, S5
  lh    A1, lo(p1_coins)(A1)
  move  A0, S3
  SUBU  A1 R0 A1
  j     L8010F8C8
   li    A2, 1
L8010F89C:
  lb    A0, 0(V0)
  sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   A1, hi(p1_coins)
  addu  A1, A1, V0
  lh    A1, lo(p1_coins)(A1)
  SUBU  A1 R0 A1
  move  A2, R0
L8010F8C8:
  jal   func_8006135C
   addiu S1, S1, 1
  slt   V0, S1, S2
  bnez  V0, L8010F800
   addu  V0, S4, S1
L8010F8DC:
  li    A0, 5
  jal   func_800508E4
   li    A1, 2
  jal   func_8007D9E0
   li    A0, 30
L8010F8F0:
  beqz  FP, L8010F908
   move  A0, R0
  lui   A0, hi(D_800F93C6)
  jal   func_8004655C
   lh    A0, lo(D_800F93C6)(A0)
  move  A0, R0
L8010F908:
  jal   func_800508E4
   li    A1, 2
L8010F910:
  lw    RA, 0x8c(SP)
  lw    FP, 0x88(SP)
  lw    S7, 0x84(SP)
  lw    S6, 0x80(SP)
  lw    S5, 0x7c(SP)
  lw    S4, 0x78(SP)
  lw    S3, 0x74(SP)
  lw    S2, 0x70(SP)
  lw    S1, 0x6c(SP)
  lw    S0, 0x68(SP)
  jr    RA
   addiu SP, SP, 0x90

func_8010F940:
  addiu SP, SP, -0x28
  sw    RA, 0x24(SP)
/*  */  sw    S4, 0x20(SP)
  sw    S3, 0x1c(SP)
  sw    S2, 0x18(SP)
  sw    S1, 0x14(SP)
  li    AT, 0x40C00000 ;6.000000
  mtc1  AT, F12
  nop
  jal   func_8005A358
   sw    S0, 0x10(SP)
  move  S3, V0
  slti  V0, S3, 5
  beql  V0, R0, L8010F97C
   li    S3, -1
L8010F97C:
  li    V0, -1
  beql  S3, V0, L8010FB1C
   li    A0, -1
  li    A0, 1
  jal   func_8007FA6C
   li    A1, 5
  move  S2, V0
  sll   V0, S3, 1
  lui   AT, hi(D_800CAFD8)
  addu  AT, AT, V0
  lhu   V0, lo(D_800CAFD8)(AT)
  sll   V0, V0, 2
  lui   A0, hi(D_800CCBDC)
  addu  A0, A0, V0
  lw    A0, lo(D_800CCBDC)(A0)
  jal   func_80017680
   sll   S1, S2, 0x10
  move  S0, V0
  jal   func_80082800
   move  A0, S0
  move  S4, V0
  jal   func_80017800
   move  A0, S0
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  sll   A2, S4, 0x10
  move  A0, S0
  move  A1, R0
  sra   A2, A2, 0x10
  jal   func_8008218C
   move  A3, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082384
   li    A2, 10
  move  A0, S0
  move  A1, R0
  jal   func_8008225C
   move  A2, R0
  move  A0, S0
  move  A1, R0
  jal   func_80082418
   li    A2, 4096
  move  A0, S0
  move  A1, R0
  li    A2, 160
  jal   func_80081AD0
   li    A3, 90
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   move  A2, R0
  move  S0, R0
  sll   A2, S0, 1
L8010FA54:
  addu  A2, A2, S0
  sll   A2, A2, 3
  addu  A2, A2, S0
  sra   A0, S1, 0x10
  move  A1, R0
  jal   func_80082488
   andi  A2, A2, 0xffff
  jal   func_8007DA44
   addiu S0, S0, 1
  slti  V0, S0, 0xa
  bnez  V0, L8010FA54
   sll   A2, S0, 1
  sll   S0, S2, 0x10
  sra   S0, S0, 0x10
  move  A0, S0
  move  A1, R0
  jal   func_80082488
   li    A2, 256
  li    A0, -1
  li    A1, 5
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 50
  li    A0, -1
  li    A1, -1
  jal   func_8005DD68
   li    A2, 2
  jal   func_8007D9E0
   li    A0, 10
  sll   A0, S4, 0x10
  jal   func_80082660
   sra   A0, A0, 0x10
  jal   func_8007F8B0
   move  A0, S0
  lui   V1, hi(D_800F93C6)
  lh    V1, lo(D_800F93C6)(V1)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  sll   V1, S3, 1
  lui   AT, hi(D_800CAFD9)
  addu  AT, AT, V1
  lbu   V1, lo(D_800CAFD9)(AT)
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  j     L8010FB30
   sb    V1, lo(p1_item)(AT)
L8010FB1C:
  li    A1, 3
  jal   func_8005DD68
   move  A2, R0
  jal   func_8007D9E0
   li    A0, 50
L8010FB30:
  lw    RA, 0x24(SP)
  lw    S4, 0x20(SP)
  lw    S3, 0x1c(SP)
  lw    S2, 0x18(SP)
  lw    S1, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x28

overlaycall4:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  jal   func_80020070
   li    A0, 2
  lui   A1, hi(D_80112914)
  addiu A1, A1, lo(D_80112914)
  jal   func_80020324
   li    A0, 1
  jal   setup_routine
   nop
  jal   func_80066C34
   li    A0, 2
  lui   A0, hi(func_80102FFC)
  addiu A0, A0, lo(func_80102FFC)
  li    A1, 4101
  li    A2, 4096
  jal   InitProcess
   move  A3, R0
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_80111338:
  addiu SP, SP, -0x18
  sw    RA, 0x14(SP)
  jal   func_8005DC30
   sw    S0, 0x10(SP)
  sll   V0, V0, 0x10
  sra   S0, V0, 0x10
  lui   A0, hi(D_800F93A8)
  addiu A0, A0, lo(D_800F93A8)
  sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  lbu   V0, lo(p1_item)(AT)
  addiu V0, V0, 1
  sll   V0, V0, 0x18
  sra   V1, V0, 0x18
  sltiu V0, V1, 0xb
  beqz  V0, L80111548
   sll   V0, V1, 2
  lui   AT, hi(D_80113698)
  addu  AT, AT, V0
  lw    V0, lo(D_80113698)(AT)
  jr    V0
   nop
D_801113A4:
  lh    V1, 6(A0)
  lh    V0, 8(A0)
  beq   V1, V0, L8011154C
   li    V0, 1
  jal   func_8005694C
   li    A0, 80
  sll   V0, V0, 0x10
  bnez  V0, L8011154C
   li    V0, 1
D_801113C8:
  j     L8011154C
   move  V0, R0
D_801113D0:
  lh    V1, 6(A0)
  lh    V0, 8(A0)
  beql  V1, V0, L8011154C
   li    V0, 1
  lui   A0, hi(D_80112F24)
  jal   func_80044800
   addiu A0, A0, lo(D_80112F24)
  j     func_801114F4
   sll   V0, V0, 0x10
D_801113F4:
  lh    V1, 6(A0)
  lh    V0, 8(A0)
  beql  V1, V0, L8011154C
   li    V0, 1
  lui   A0, hi(D_80112F84)
  jal   func_80044800
   addiu A0, A0, lo(D_80112F84)
  j     func_801114F4
   sll   V0, V0, 0x10
D_80111418:
  lui   A0, hi(D_80113248)
  jal   func_80044800
   addiu A0, A0, lo(D_80113248)
  j     func_801114F4
   sll   V0, V0, 0x10
D_8011142C:
  move  A0, R0
L80111430:
  beq   A0, S0, L80111470
   sll   V0, A0, 1
  addu  V0, V0, A0
  sll   V0, V0, 2
  addu  V0, V0, A0
  sll   V0, V0, 2
  lui   AT, hi(p1_item)
  addu  AT, AT, V0
  lb    V0, lo(p1_item)(AT)
  nor   V1, R0, V0
  sltu  V1, R0, V1
  xori  V0, V0, 3
  sltu  V0, R0, V0
  and   V1, V1, V0
  bnez  V1, L80111480
   li    V0, 4
L80111470:
  addiu A0, A0, 1
  slti  V0, A0, 4
  bnez  V0, L80111430
   li    V0, 4
L80111480:
  bne   A0, V0, L8011154C
   li    V0, 1
  j     L8011154C
   move  V0, R0
D_80111490:
  sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  j     func_801114F4
   slti  V0, V0, 5
D_801114B8:
  lui   A0, hi(D_801133BC)
  jal   func_80044800
   addiu A0, A0, lo(D_801133BC)
  sll   V0, V0, 0x10
  bnez  V0, L8011154C
   move  V0, R0
  sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slti  V0, V0, 0x14
func_801114F4:
  beqz  V0, L8011154C
   li    V0, 1
  j     L8011154C
   move  V0, R0
D_80111504:
  sll   V0, S0, 1
  addu  V0, V0, S0
  sll   V0, V0, 2
  addu  V0, V0, S0
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slti  V0, V0, 0xa
  beqz  V0, L8011154C
   li    V0, 1
  lui   V0, hi(D_800F93AE)
  addiu V0, V0, lo(D_800F93AE)
  lh    V1, 0(V0)
  lh    V0, 2(V0)
  bne   V1, V0, L8011154C
   move  V0, R0
L80111548:
  li    V0, 1
L8011154C:
  lw    RA, 0x14(SP)
  lw    S0, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

func_8011155C:
  addiu SP, SP, -0x40
  sw    RA, 0x38(SP)
  sw    S7, 0x34(SP)
  sw    S6, 0x30(SP)
  sw    S5, 0x2c(SP)
  sw    S4, 0x28(SP)
  sw    S3, 0x24(SP)
  sw    S2, 0x20(SP)
  sw    S1, 0x1c(SP)
  sw    S0, 0x18(SP)
  lui   S4, hi(D_800F93A8)
  addiu S4, S4, lo(D_800F93A8)
  jal   func_8005DC3C
   li    A0, -1
  move  S3, V0
  li    S2, -1
  lbu   V0, 4(S3)
  move  V1, V0
  lui   AT, hi(D_80113588)
  addu  AT, AT, V0
  lbu   V0, lo(D_80113588)(AT)
  blez  V0, L8011167C
   move  S1, R0
  lui   S7, hi(D_80113510)
  addiu S7, S7, lo(D_80113510)
  li    S6, -1
  lui   S5, hi(D_80113570)
  addiu S5, S5, lo(D_80113570)
  sll   V0, V1, 2
L801115D0:
  addu  V0, V0, S7
  lw    V0, 0(V0)
  addu  V0, V0, S1
  lbu   S0, 0(V0)
  jal   func_80109A78
   move  A0, S0
  move  S2, V0
  beql  S2, S6, L80111660
   addiu S1, S1, 1
  lui   A0, hi(D_800CC000)
  addu  A0, A0, S0
  lbu   A0, lo(D_800CC000)(A0)
  addiu A0, A0, 0x14
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V0, V0, A0
  bnel  V0, R0, L80111660
   addiu S1, S1, 1
  lbu   V0, 4(S3)
  sll   V0, V0, 2
  addu  V0, V0, S5
  lw    V0, 0(V0)
  addu  V0, V0, S1
  jal   func_8005694C
   lb    A0, 0(V0)
  sll   V0, V0, 0x10
  bnez  V0, L8011167C
   nop
  addiu S1, S1, 1
L80111660:
  lbu   V1, 4(S3)
  lui   V0, hi(D_80113588)
  addu  V0, V0, V1
  lbu   V0, lo(D_80113588)(V0)
  slt   V0, S1, V0
  bnez  V0, L801115D0
   sll   V0, V1, 2
L8011167C:
  lbu   V0, 4(S3)
  lui   AT, hi(D_80113588)
  addu  AT, AT, V0
  lbu   V0, lo(D_80113588)(AT)
  beql  S1, V0, L80111694
   li    S2, -1
L80111694:
  li    V0, -1
  beq   S2, V0, L801116FC
   nop
  jal   func_80109A78
   li    A0, 9
  beq   V0, S2, L801118AC
   addiu V0, S2, 1
  jal   func_80109A78
   li    A0, 7
  bne   V0, S2, L801116FC
   nop
  lui   A0, hi(D_800CC007)
  lbu   A0, lo(D_800CC007)(A0)
  addiu A0, A0, 0x32
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V0, V0, A0
  beqz  V0, L801118AC
   addiu V0, S2, 1
L801116FC:
  lui   A0, hi(D_8011341C)
  jal   func_80044800
   addiu A0, A0, lo(D_8011341C)
  sll   V0, V0, 0x10
  bnez  V0, L80111768
   li    V0, -1
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  lui   V1, hi(D_800CC001)
  lbu   V1, lo(D_800CC001)(V1)
  slt   V0, V0, V1
  bnez  V0, L80111768
   li    V0, -1
  jal   func_80109A78
   li    A0, 1
  move  V1, V0
  li    V0, -1
  bne   V1, V0, L801118AC
   addiu V0, V1, 1
  li    V0, -1
L80111768:
  bne   S2, V0, L801118AC
   addiu V0, S2, 1
  lui   A0, hi(D_80113434)
  jal   func_80044800
   addiu A0, A0, lo(D_80113434)
  sll   V0, V0, 0x10
  sra   S1, V0, 0x10
  bnez  S1, L80111864
   nop
  lbu   V0, 4(S3)
  move  V1, V0
  lui   AT, hi(D_80113588)
  addu  AT, AT, V0
  lbu   V0, lo(D_80113588)(AT)
  slt   V0, S1, V0
  beqz  V0, L80111864
   sll   V0, V1, 2
  lui   S7, hi(D_80113510)
  addiu S7, S7, lo(D_80113510)
  li    S6, -1
  lui   S5, hi(D_80113570)
  addiu S5, S5, lo(D_80113570)
L801117C0:
  addu  V0, V0, S7
  lw    V0, 0(V0)
  addu  V0, V0, S1
  lbu   S0, 0(V0)
  jal   func_80109A78
   move  A0, S0
  move  S2, V0
  beql  S2, S6, L80111848
   addiu S1, S1, 1
  lui   A0, hi(D_800CC000)
  addu  A0, A0, S0
  lbu   A0, lo(D_800CC000)(A0)
  lh    V1, 0x1e(S4)
  sll   V0, V1, 1
  addu  V0, V0, V1
  sll   V0, V0, 2
  addu  V0, V0, V1
  sll   V0, V0, 2
  lui   AT, hi(p1_coins)
  addu  AT, AT, V0
  lh    V0, lo(p1_coins)(AT)
  slt   V0, V0, A0
  bnel  V0, R0, L80111848
   addiu S1, S1, 1
  lbu   V0, 4(S3)
  sll   V0, V0, 2
  addu  V0, V0, S5
  lw    V0, 0(V0)
  addu  V0, V0, S1
  jal   func_8005694C
   lb    A0, 0(V0)
  sll   V0, V0, 0x10
  bnez  V0, L801118A8
   addiu S1, S1, 1
L80111848:
  lbu   V1, 4(S3)
  lui   V0, hi(D_80113588)
  addu  V0, V0, V1
  lbu   V0, lo(D_80113588)(V0)
  slt   V0, S1, V0
  bnez  V0, L801117C0
   sll   V0, V1, 2
L80111864:
  lh    V1, 2(S4)
  li    V0, 4
  bne   V1, V0, L80111888
   li    V0, 1
  lui   AT, hi(D_801134C4)
  jal   func_80109AE4
   sw    V0, lo(D_801134C4)(AT)
  j     L801118AC
   addiu V0, V0, 2
L80111888:
  jal   func_80109A78
   move  A0, R0
  move  S2, V0
  li    V0, -1
  bne   S2, V0, L801118AC
   addiu V0, S2, 1
  j     L801118AC
   li    V0, 1
L801118A8:
  addiu V0, S2, 1
L801118AC:
  lw    RA, 0x38(SP)
  lw    S7, 0x34(SP)
  lw    S6, 0x30(SP)
  lw    S5, 0x2c(SP)
  lw    S4, 0x28(SP)
  lw    S3, 0x24(SP)
  lw    S2, 0x20(SP)
  lw    S1, 0x1c(SP)
  lw    S0, 0x18(SP)
  jr    RA
   addiu SP, SP, 0x40

func_801118D8:
  addiu SP, SP, -0x18
  sw    RA, 0x10(SP)
  lui   V0, hi(D_801134C4)
  lw    V0, lo(D_801134C4)(V0)
  bnel  V0, R0, L8011190C
   li    V0, 2
  lui   A0, hi(D_801134A0)
  jal   func_80044800
   addiu A0, A0, lo(D_801134A0)
  sll   V0, V0, 0x10
  sra   V0, V0, 0x10
  j     L80111914
   addiu V0, V0, 1
L8011190C:
  lui   AT, hi(D_801134C4)
  sw    R0, lo(D_801134C4)(AT)
L80111914:
  lw    RA, 0x10(SP)
  jr    RA
   addiu SP, SP, 0x18

.align 16

; data

D_80111920:
.halfword 0, 0
.word overlaycall0
.halfword 1, 0
.word overlaycall1
.halfword 2, 0
.word overlaycall2
.halfword 3, 0
.word overlaycall3
.halfword 4, 0
.word overlaycall4
.halfword -1, 0

.align 16

; probably relates to star selection order.
shuffle_order:
.halfword ${s.order.join(",")}
.align 4

shuffle_bias:
.halfword ${s.bias.join(",")}
.align 4

D_80111970:
.halfword 0x0006 0xFFFF
.align 4

D_80111974:
.halfword 0x0046 0x0047 0x0048 0x0049 0x004A 0x004B 0x004C 0x0000
.align 4

D_80111984:
.halfword ${o.join(",")||0}
.align 4

; Toads stand on these spaces
D_80111994:
.halfword ${c.join(",")||0}
.align 4

; Toad faces
D_801119A4: .halfword 0x0008 0x0039

D_801119A8: .halfword 0x0008 0x003A

;toad animation speed "By the way, Baby Bowser is over here..."
D_801119AC:
.word 0x40A00000
.word 0x40A00000
.word 0x40000000
.word 0x40000000
.word 0x40400000
.word 0x40A00000
.word 0x40A00000
.word 0x40A00000
.word 0x40A00000

D_801119D0: .word 0x00000000

D_801119D4:
.word 0x3C465055
.word 0x46505A5F
.word 0x505A5F5F

D_801119E0: .word 0x00000000

; hidden blocks cant spawn on these blue spaces
D_801119E4: .halfword -1
.align 4

; star spaces that you walk over
D_801119F4:
.halfword ${o.join(",")||0} 0xFFFF
.align 4

D_80111A04: .halfword 0x0003
D_80111A06: .halfword 0xFFFC
D_80111A08: .halfword 0xFFFE
D_80111A0A: .halfword 0xFFFE
D_80111A0C: .halfword 0x0002
D_80111A0E: .halfword 0xFFFA
D_80111A10: .halfword 0x0000
D_80111A12: .halfword 0x0000
D_80111A14: .halfword 0x0000
D_80111A16: .halfword 0xFFFC
D_80111A18: .halfword 0x0004
D_80111A1A: .halfword 0x0000
D_80111A1C: .halfword 0x0001
D_80111A1E: .halfword 0xFFFA

D_80111A20: .halfword 0xFFFE
D_80111A22: .halfword 0x0000
D_80111A24: .halfword 0x0002
D_80111A26: .halfword 0x0000

D_80111A28: .halfword 0x0000
D_80111A2A: .halfword 0xFFFE
D_80111A2C: .halfword 0x0004
D_80111A2E: .halfword 0x0000

D_80111A30: .halfword 0x0000
D_80111A32: .halfword 0xFFFC

D_80111A34: .halfword 0x0000
D_80111A36: .halfword 0x0000
D_80111A38: .halfword 0x0000
D_80111A3A: .halfword 0xFFFD

; gate related
D_80111A3C: .halfword 0x00A9

D_80111A3E: .halfword 0x0031
D_80111A40: .halfword 0x00AA
D_80111A42: .halfword 0x0029

D_80111A44:
.halfword ${c.join(",")||0}
.align 4

D_80111A54:
.halfword 0x0046 0x0047 0x0048 0x0049 0x004A 0x004B 0x004C 0x0000

D_80111A64: .word 0xFFFFFFFF

D_80111A68:
.halfword ${_.join(",")}
.align 4

D_80111A6C:
.halfword ${d.join(",")}
.align 4

; bank coin coordinates?
D_80111A70:
.word 0x00000000 0x00000000 0x00000000 0xC0400000
.word 0x40000000 0xC0000000 0x3F800000 0x40B00000
.word 0xC0400000 0x40600000 0x41000000 0x40800000
.word 0xBF800000 0x41400000 0x41300000

D_80111AAC: .word 0x00000000 0x00000000

D_80111AB4:
.word 0x00000000 0x00000000 0x00000000 0x00000000
.word 0xC1700000 0x00000000 0x00000000 0x41A00000
.word 0x00000000 0xC1F00000 0x42340000 0x00000000 0x42340000

; gate spaces
D_80111AE8:
.halfword 0x0094 0x0095

D_80111AEC: .byte 0x00
D_80111AED: .byte 0x73
D_80111AEE: .halfword 0x007C
D_80111AF0: .halfword 0x0080
D_80111AF2: .halfword 0x0081
D_80111AF4: .halfword 0x0082
D_80111AF6: .halfword 0x0083

D_80111AF8: .word 0x0000039B
D_80111AFC: .word 0x000003B0
D_80111B00: .word 0x000003CF
D_80111B04: .word 0x000003CA
D_80111B08: .word 0x000003F0
D_80111B0C: .word 0x00000405
D_80111B10: .word 0xFFFFFFFF
D_80111B14: .word 0xFFFFFFFF
D_80111B18: .word 0xFFFFFFFF

D_80111B1C: .halfword 0xFFFF

D_80111B1E: .halfword 0xFFFF

D_80111B20: .word 0xFFFFFFFF
D_80111B24: .word 0xFFFFFFFF
D_80111B28: .word 0xFFFFFFFF
D_80111B2C: .word 0x000003F1
D_80111B30: .word 0xFFFFFFFF
D_80111B34: .word 0xFFFFFFFF
D_80111B38: .word 0xFFFFFFFF
D_80111B3C: .word 0xFFFFFFFF

D_80111B40: .word 0xFFFFFFFF
D_80111B44: .word 0xFFFFFFFF
D_80111B48: .word 0xFFFFFFFF
D_80111B4C: .word 0xFFFFFFFF
D_80111B50: .word 0x00000028
D_80111B54: .word 0xFFFFFFFF
D_80111B58: .word 0xFFFFFFFF
D_80111B5C: .word 0xFFFFFFFF
D_80111B60: .word 0xFFFFFFFF

D_80111B64: .word 0x0000039C
D_80111B68: .word 0xFFFFFFFF
D_80111B6C: .word 0x000003D0
D_80111B70: .word 0xFFFFFFFF
D_80111B74: .word 0xFFFFFFFF
D_80111B78: .word 0xFFFFFFFF
D_80111B7C: .word 0xFFFFFFFF
D_80111B80: .word 0xFFFFFFFF
D_80111B84: .word 0xFFFFFFFF

; bank model spaces
D_80111B88:
.halfword ${h.join(",")}
.align 4

; shop model spaces
D_80111B8C:
.halfword ${g.join(",")}
.align 4

; train related somehow
D_80111B90:
.halfword 0x0013, 0x0014, 0x0015, 0
.align 4

D_80111B98: .word 0x002D0034 0x00350036 0x00370038 0x0039003A 0x003B003D 0x003E003F 0x00400041
.align 4

D_80111BB4: .word 0x00440045 0x00460048 0x0049004A 0x004B004C 0x004D004E 0x004F0050 0x00520000
.align 4

D_80111BD0: .word 0x00550056 0x00570058 0x0059005A 0x005B005D 0x005E005F 0x00600061 0x0065005C 0x00670072 0x007D0000
.align 4

D_80111BF4:
.word D_80111B98
.word D_80111BB4
.word D_80111BD0

D_80111C00: .word 0x41A00000

D_80111C04: .word 0x00000000

D_80111C08: .word 0x00000000
D_80111C0C: .word 0x00000000
D_80111C10: .word 0x00000000
D_80111C14: .word 0x41A00000
D_80111C18: .word 0xC1A00000
D_80111C1C: .word 0x00000000
D_80111C20: .word 0x00000000

; AI table(s)
D_80111C24: .word 0x04000000 0x00000000 0x00006446
D_80111C30: .word 0x00000000 0x00000000 0x00003232
D_80111C3C: .word 0x02000000 0x00000001 0x00006446
D_80111C48: .word 0x02000000 0x00000054 0x00016446
D_80111C54: .word 0x02000000 0x0000000A D_80111C24
D_80111C60: .word 0x00000000 0x00000000 0x00003232
D_80111C6C: .word 0x02000000 0x00000008 0x00016446
D_80111C78: .word 0x09000000 0x00000008 0x00006446
D_80111C84: .word 0x00000000 0x00000000 0x00003232

; an AI decision tree
D_80111F60:
.word 0x00000000 0x00000000 0x00003232

; an AI decision tree
D_80111F6C:
.word 0x0E000000 0x00080007 0x00003232
.word 0x00000000 0x00000000 0x00004646
D_80111F84:
.word 0x0E000000 0x00020012 D_80111F6C
.word 0x00000000 0x00000000 0x00014646

D_80112160: .word 0x02000000 0x0000000E 0x00016464
D_8011216C: .word 0x00000000 0x00000000 0x00006464
D_80112178: .word 0x02000000 0x00000040 0x00016464
D_80112184: .word 0x10000000 0x00000001 D_80112160
D_80112190: .word 0x00000000 0x00000000 0x00006464

D_801122A4: .byte 0x02 0x05 0x0F 0x14

D_801122A8:
.word 0x00010001 func_80108E0C
.word 0 0

D_801122B8:
.word 0x00010001 func_8010964C
.word 0 0

D_801122C8: .word 0x00000101
D_801122CC: .word 0x01020303
D_801122D0: .word 0x04050606

D_801122D4: .word 0x01061001
D_801122D8: .word 0x0B150110
D_801122DC: .word 0x24000000

D_801122E0: .word 0x0001FFFF
D_801122E4: .word 0xFF000106
D_801122E8: .word 0xFFFF0001
D_801122EC: .word 0x0206FF00
D_801122F0: .word 0x010406FF
D_801122F4: .word 0x00010204
D_801122F8: .word 0x06000104
D_801122FC: .word 0x05060001
D_80112300: .word 0x05060900

D_80112304: .word 0x000001F2
D_80112308: .word 0x000001F3
D_8011230C: .word 0x000001F4
D_80112310: .word 0x000001F5
D_80112314: .word 0x000001F6
D_80112318: .word 0x000001F7
D_8011231C: .word 0x000001F8

D_80112320: .word 0x00010001 func_80109B30
D_80112328: .word 0x00000000 0x00000000

D_80112330: .word 0x01020300
D_80112334: .word 0x02030001
D_80112338: .word 0x03000102

D_8011233C: .word 0x42980000

D_80112340: .word 0x42500000
D_80112344: .word 0x43740000
D_80112348: .word 0x42500000
D_8011234C: .word 0x42980000
D_80112350: .word 0x43400000
D_80112354: .word 0x43740000
D_80112358: .word 0x43400000

D_8011235C: .word 0xBF800000
D_80112360: .word 0xBF800000
D_80112364: .word 0x3F800000
D_80112368: .word 0xBF800000
D_8011236C: .word 0xBF800000
D_80112370: .word 0x3F800000
D_80112374: .word 0x3F800000
D_80112378: .word 0x3F800000

D_8011237C: .word 0x00000086
D_80112380: .word 0x00000087
D_80112384: .word 0x00000088
D_80112388: .word 0x00000089
D_8011238C: .word 0x0000008A
D_80112390: .word 0x0000008B

D_80112394: .byte 0x01
D_80112395: .byte 0x05
D_80112396: .byte 0x0F
D_80112397: .byte 0x06
D_80112398: .word 0x0F191019
D_8011239C: .word 0x1B1A231E
D_801123A0: .word 0x242D202E
D_801123A4: .word 0x32230000

D_801123A8: .byte 0
D_801123A9: .byte 0
D_801123AA: .byte 0
D_801123AB: .byte 1
D_801123AC: .word 0x0A010B0B
D_801123B0: .word 0x040C1402
D_801123B4: .word 0x15150416
D_801123B8: .word 0x1E031F28
D_801123BC: .word 0x04292C05
D_801123C0: .word 0x2D2E0233
D_801123C4: .word 0x3806393D
D_801123C8: .word 0x053E4607
D_801123CC: .word 0x47470848
D_801123D0: .word 0xFF090000

D_801123D4: .byte 0x01
D_801123D5: .byte 0x05
D_801123D6: .byte 0x06
D_801123D7: .byte 0x09

D_801123D8: .word 0x0701050A
D_801123DC: .word 0x0C080105
D_801123E0: .word 0x0D0E0901
D_801123E4: .word 0x050F0F0A
D_801123E8: .word 0x060F1013
D_801123EC: .word 0x07060F14
D_801123F0: .word 0x1608060F
D_801123F4: .word 0x17180906
D_801123F8: .word 0x0F19190A
D_801123FC: .word 0x10191215
D_80112400: .word 0x07101916
D_80112404: .word 0x18081019
D_80112408: .word 0x191A0910
D_8011240C: .word 0x191B1B0A
D_80112410: .word 0x1A231518
D_80112414: .word 0x071A2319
D_80112418: .word 0x1B081A23
D_8011241C: .word 0x1C1D091A
D_80112420: .word 0x231E1E0A
D_80112424: .word 0x242D171A
D_80112428: .word 0x07242D1B
D_8011242C: .word 0x1D08242D
D_80112430: .word 0x1E1F0924
D_80112434: .word 0x2D20200A
D_80112438: .word 0x2E321A1D

D_8011243C: .byte 0x07
D_8011243D: .byte 0x2E

D_8011243E: .byte 0x32
D_8011243F: .byte 0x1E
D_80112440: .word 0x20082E32
D_80112444: .word 0x2122092E
D_80112448: .word 0x3223230A
D_8011244C: .word 0x06BB06BC
D_80112450: .word 0x06BD06BE

;D_80112454:
;.word 0x00010001 func_8010BA48
;.word 0 0

;D_80112464:
;.word 0x00010001 func_8010C44C
;.word 0 0

;D_80112474:
;.word 0x00010001 func_8010C468
;.word 0 0

; An event table
; D_80112484:
; .word 0x00370000 D_801122A8 ; star spaces
; .word 0x00480000 D_801122A8
; .word 0x00870000 D_801122A8
; .word 0x008E0000 D_801122A8
; .word 0x007E0000 D_801122A8
; .word 0x005A0000 D_801122A8
; .word 0x002F0000 D_801122A8
; .word 0x008A0000 D_801122B8 ; bank spaces
; .word 0x005E0000 D_801122B8
; .word 0x00A70000 D_80112320 ; item space
; .word 0x00940000 D_80112464 ; gate
; .word 0x00950000 D_80112474 ; gate
; .word 0xFFFF0000 0

; An event table
; D_801124EC:
; .word 0x00AF0000 D_80112454 ; boos
; .word 0x00B40000 D_80112454
; .word 0xFFFF0000 0

.align 8
D_80112504: .word 0x42D80000
D_80112508: .word 0x42240000
.word 0x43740000
.word 0x42240000
.word 0x42D80000
.word 0x43510000
.word 0x43740000
.word 0x43510000

D_80112524: .word 0x43240000
D_80112528: .word 0x42980000
.word 0x430C0000
.word 0x42980000
.word 0x43240000
.word 0x42980000
.word 0x430C0000
.word 0x42980000

D_80112544: .word 0x43040000
D_80112548: .word 0x42780000
.word 0x435C0000
.word 0x42780000
.word 0x43040000
.word 0x43340000
.word 0x435C0000
.word 0x43340000

D_80112564: .word 0x43240000
D_80112568: .word 0x42840000
.word 0x430C0000
.word 0x42840000
.word 0x43240000
.word 0x42840000
.word 0x430C0000
.word 0x42840000

D_80112584:
.word 0x000002C5
.word 0x000002DC
.word 0x000002FA
.word 0x00000317
.word 0x00000337
.word 0x00000357

D_8011259C:
.word 0x001A001B
.word 0x0024001E
.word 0x00230025

D_801125A8: .word 0x0F000000 0x00000028 0x00003214
D_801125B4: .word 0x00000000 0x00000000 0x00003C1E
D_801125C0: .word 0x0E000000 0x0002000A D_801125A8
D_801125CC: .word 0x00000000 0x00000000 0x00000514
D_801125D8: .word 0x0E000000 0x00040002 D_801125A8
D_801125E4: .word 0x0E000000 0x00030005 D_801125A8
D_801125F0: .word 0x0E000000 0x000E0006 D_801125A8
D_801125FC: .word 0x00000000 0x00000000 0x00000514
D_80112608: .word 0x0E000000 0x000E0002 D_801125A8
D_80112614: .word 0x0E000000 0x000C0002 D_801125A8
D_80112620: .word 0x0E000000 0x000B0007 D_801125A8
D_8011262C: .word 0x0E000000 0x00090004 D_801125A8
D_80112638: .word 0x00000000 0x00000000 0x00000514
D_80112644: .word 0x00000000 0x00000000 0x0000000A
D_80112650: .word 0x0E000000 0x000B0004 D_801125A8
D_8011265C: .word 0x0E000000 0x00080007 D_801125A8
D_80112668: .word 0x00000000 0x00000000 0x00000514
D_80112674: .word 0x0E000000 0x00160304 D_801125A8
D_80112680: .word 0x0E000000 0x00110001 D_801125A8
D_8011268C: .word 0x0E000000 0x00100004 D_801125A8
D_80112698: .word 0x00000000 0x00000000 0x00000514
D_801126A4: .word 0x0E000000 0x00120005 D_801125A8
D_801126B0: .word 0x00000000 0x00000000 0x00000514
D_801126BC: .word 0x02000000 0x00000001 D_801125C0
D_801126C8: .word 0x02000000 0x00000002 D_801125D8
D_801126D4: .word 0x02000000 0x00000004 D_80112608
D_801126E0: .word 0x02000000 0x00000008 D_80112644
D_801126EC: .word 0x02000000 0x00000010 D_80112650
D_801126F8: .word 0x02000000 0x00000020 D_80112674
D_80112704: .word 0x02000000 0x00000040 D_801126A4
D_80112710: .word 0x00000000 0x00000000 0x00003232

D_80112760: .word 0x41A00000
D_80112764: .word 0xC0A00000
.word 0x41F00000
.word 0xC0A00000
.word 0x41A00000
.word 0x40A00000
.word 0x41F00000
.word 0x40A00000

D_80112780: .word 0x02000000 0x0000006A 0x00006446
D_8011278C: .word 0x02000000 0x00000001 0x0001645A
D_80112798: .word 0x00000000 0x00000000 0x00003232
D_801127A4: .word 0x02000000 0x00000075 0x00006446
D_801127B0: .word 0x02000000 0x00000008 0x0001645A
D_801127BC: .word 0x00000000 0x00000000 0x00003232
D_801127C8: .word 0x02000000 0x00000001 0x00006446
D_801127D4: .word 0x02000000 0x00000060 0x0001645A
D_801127E0: .word 0x00000000 0x00000000 0x00003232

D_80112914: .word 0x00000000
.word 0x00000000
.word 0x43A00000
.word 0x43700000

D_80112924: .word 0x0F000000 0x00000019 0x0000001E
D_80112930: .word 0x04000000 0x00000002 0x00005A3C
D_8011293C: .word 0x00000000 0x00000000 0x00000A1E
D_80112948: .word 0x0D000000 0x00170206 D_80112924
D_80112954: .word 0x0D000000 0x00050004 D_80112924
D_80112960: .word 0x0D000000 0x00060002 D_80112924
D_8011296C: .word 0x0F000000 0x00000014 0x0000001E
D_80112978: .word 0x0D000000 0x00020004 0x00005A3C
D_80112984: .word 0x0D000000 0x00010003 0x00005A3C
D_80112990: .word 0x0D000000 0x00070005 0x00005A3C
D_8011299C: .word 0x0D000000 0x00000001 0x00005A3C
D_801129A8: .word 0x00000000 0x00000000 0x00000A1E
D_801129B4: .word 0x0F000000 0x00000019 0x0000001E
D_801129C0: .word 0x04000000 0x00000000 0x00005A3C
D_801129CC: .word 0x00000000 0x00000000 0x00000A1E
D_801129D8: .word 0x0F000000 0x0000001E 0x0000001E
D_801129E4: .word 0x0D000000 0x000E0002 0x00005A3C
D_801129F0: .word 0x0D000000 0x000C0002 0x00005A3C
D_801129FC: .word 0x0D000000 0x000B0007 0x00005A3C
D_80112A08: .word 0x00000000 0x00000000 0x00000A1E
D_80112A14: .word 0x0F000000 0x0000001E 0x0000001E
D_80112A20: .word 0x0D000000 0x000B0004 0x00005A3C
D_80112A2C: .word 0x00000000 0x00000000 0x00000A1E
D_80112A38: .word 0x0D000000 0x00020004 D_801129B4
D_80112A44: .word 0x0D000000 0x00010004 D_801129B4
D_80112A50: .word 0x0D000000 0x00000001 D_801129B4
D_80112A5C: .word 0x0D000000 0x00070205 D_801129B4
D_80112A68: .word 0x0F000000 0x00000005 0x00000000
D_80112A74: .word 0x0D000000 0x00020610 0x00005A3C
D_80112A80: .word 0x0F000000 0x00000014 0x0000001E
D_80112A8C: .word 0x0D000000 0x00030003 0x00005A3C
D_80112A98: .word 0x0D000000 0x00021112 0x00005A3C
D_80112AA4: .word 0x0D000000 0x000A0005 0x00005A3C
D_80112AB0: .word 0x0F000000 0x00000019 0x0000001E
D_80112ABC: .word 0x0D000000 0x000E0304 0x00005A3C
D_80112AC8: .word 0x0D000000 0x00090004 0x00005A3C
D_80112AD4: .word 0x09000000 0x00000004 D_801129D8
D_80112AE0: .word 0x0D000000 0x000E0002 0x00005A3C
D_80112AEC: .word 0x0D000000 0x000C0002 0x00005A3C
D_80112AF8: .word 0x0D000000 0x000B0507 0x00005A3C
D_80112B04: .word 0x09000000 0x00000010 D_80112A14
D_80112B10: .word 0x0D000000 0x000B0004 0x00005A3C
D_80112B1C: .word 0x00000000 0x00000000 0x00000A1E
D_80112B28: .word 0x0F000000 0x00000019 0x0000001E
D_80112B34: .word 0x0D000000 0x000B0004 0x00005A3C
D_80112B40: .word 0x00000000 0x00000000 0x00000A1E
D_80112B4C: .word 0x0F000000 0x00000014 0x0000001E
D_80112B58: .word 0x0D000000 0x00090004 0x00005A3C
D_80112B64: .word 0x0D000000 0x00080007 0x00005A3C
D_80112B70: .word 0x09000000 0x00000010 D_80112B28
D_80112B7C: .word 0x0D000000 0x000B0004 0x00005A3C
D_80112B88: .word 0x00000000 0x00000000 0x00000A1E
D_80112B94: .word 0x0F000000 0x0000001E 0x0000001E
D_80112BA0: .word 0x04000000 0x00000000 0x00005A3C
D_80112BAC: .word 0x00000000 0x00000000 0x00000A1E
D_80112BB8: .word 0x09000000 0x00000002 D_80112B94
D_80112BC4: .word 0x0F000000 0x00000019 0x0000001E
D_80112BD0: .word 0x04000000 0x00000000 0x00005A3C
D_80112BDC: .word 0x00000000 0x00000000 0x00000A1E
D_80112BE8: .word 0x0F000000 0x00000023 0x0000001E
D_80112BF4: .word 0x0D000000 0x000E0002 0x00005A3C
D_80112C00: .word 0x0D000000 0x000C0002 0x00005A3C
D_80112C0C: .word 0x0D000000 0x000B0507 0x00005A3C
D_80112C18: .word 0x00000000 0x00000000 0x00000A1E
D_80112C24: .word 0x0F000000 0x0000001E 0x0000001E
D_80112C30: .word 0x0D000000 0x000E0002 0x00005A3C
D_80112C3C: .word 0x0D000000 0x000C0002 0x00005A3C
D_80112C48: .word 0x0D000000 0x000B0507 0x00005A3C
D_80112C54: .word 0x00000000 0x00000000 0x00000A1E
D_80112C60: .word 0x0F000000 0x00000019 0x0000001E
D_80112C6C: .word 0x0D000000 0x00030005 0x00005A3C
D_80112C78: .word 0x0D000000 0x00040002 0x00005A3C
D_80112C84: .word 0x0D000000 0x000A0005 0x00005A3C
D_80112C90: .word 0x0D000000 0x00021112 0x00005A3C
D_80112C9C: .word 0x0D000000 0x000E0506 0x00005A3C
D_80112CA8: .word 0x0F000000 0x0000001E 0x0000001E
D_80112CB4: .word 0x0D000000 0x000E0304 0x00005A3C
D_80112CC0: .word 0x09000000 0x00000004 D_80112BE8
D_80112CCC: .word 0x0D000000 0x000E0002 0x00005A3C
D_80112CD8: .word 0x0D000000 0x000C0002 0x00005A3C
D_80112CE4: .word 0x0D000000 0x000B0507 0x00005A3C
D_80112CF0: .word 0x00000000 0x00000000 0x00000A1E
D_80112CFC: .word 0x0D000000 0x00020004 D_80112BB8
D_80112D08: .word 0x0D000000 0x00010004 D_80112BB8
D_80112D14: .word 0x0F000000 0x00000005 0x00000000
D_80112D20: .word 0x0D000000 0x00020C10 0x00005A3C
D_80112D2C: .word 0x0F000000 0x00000014 0x0000001E
D_80112D38: .word 0x09000000 0x00000002 D_80112C60
D_80112D44: .word 0x0D000000 0x00030005 0x00005A3C
D_80112D50: .word 0x0D000000 0x00040002 0x00005A3C
D_80112D5C: .word 0x0D000000 0x000A0005 0x00005A3C
D_80112D68: .word 0x0D000000 0x00021112 0x00005A3C
D_80112D74: .word 0x0D000000 0x000E0506 0x00005A3C
D_80112D80: .word 0x0F000000 0x00000019 0x0000001E
D_80112D8C: .word 0x0D000000 0x000E0304 0x00005A3C
D_80112D98: .word 0x09000000 0x00000004 D_80112C24
D_80112DA4: .word 0x0D000000 0x000E0002 0x00005A3C
D_80112DB0: .word 0x0D000000 0x000C0002 0x00005A3C
D_80112DBC: .word 0x0D000000 0x000B0507 0x00005A3C
D_80112DC8: .word 0x00000000 0x00000000 0x00000A1E
D_80112DD4: .word 0x0F000000 0x00000014 0x0000001E
D_80112DE0: .word 0x0D000000 0x00080007 0x00005A3C
D_80112DEC: .word 0x0D000000 0x00010003 0x00005A3C
D_80112DF8: .word 0x0D000000 0x00000001 0x00005A3C
D_80112E04: .word 0x0D000000 0x00070005 0x00005A3C
D_80112E10: .word 0x00000000 0x00000000 0x00000A1E
D_80112E1C: .word 0x0F000000 0x00000019 0x0000001E
D_80112E28: .word 0x04000000 0x00000001 0x00005A3C
D_80112E34: .word 0x00000000 0x00000000 0x00000A1E
D_80112E40: .word 0x0F000000 0x0000000A 0x00000000
D_80112E4C: .word 0x0D000000 0x00170001 0x00005A3C
D_80112E58: .word 0x00000000 0x00000000 0x00000A1E
D_80112E64: .word 0x0D000000 0x00030003 D_80112E1C
D_80112E70: .word 0x0D000000 0x000A0005 D_80112E1C
D_80112E7C: .word 0x0D000000 0x00020B12 D_80112E1C
D_80112E88: .word 0x0F000000 0x00000005 0x00000000
D_80112E94: .word 0x0D000000 0x00060006 0x00005A3C
D_80112EA0: .word 0x0D000000 0x00050004 0x00005A3C
D_80112EAC: .word 0x0D000000 0x00040307 0x00005A3C
D_80112EB8: .word 0x0D000000 0x00170206 0x00005A3C
D_80112EC4: .word 0x09000000 0x00000008 D_80112E40
D_80112ED0: .word 0x0D000000 0x00170001 0x00005A3C
D_80112EDC: .word 0x0F000000 0x00000014 0x0000001E
D_80112EE8: .word 0x0D000000 0x00100003 0x00005A3C
D_80112EF4: .word 0x00000000 0x00000000 0x00000A1E
D_80112F00: .word 0x0D000000 0x00090001 0x00005A3C
D_80112F0C: .word 0x0D000000 0x00080007 0x00005A3C
D_80112F18: .word 0x00000000 0x00000000 0x00000A1E
D_80112F24: .word 0x02000000 0x00000001 D_80112948
D_80112F30: .word 0x02000000 0x00000002 D_80112A38
D_80112F3C: .word 0x02000000 0x00000004 D_80112B4C
D_80112F48: .word 0x02000000 0x00000008 D_80112CFC
D_80112F54: .word 0x02000000 0x00000010 D_80112DD4
D_80112F60: .word 0x02000000 0x00000020 D_80112E64
D_80112F6C: .word 0x02000000 0x00000040 D_80112F00
D_80112F78: .word 0x00000000 0x00000000 0x00000000

D_80112F84: .word 0x00000000 0x00000000 0x00005032
D_80112F90: .word 0x0E000000 0x0002000A 0x00005A3C
D_80112F9C: .word 0x00000000 0x00000000 0x0000001E

D_80112FA8: .word 0x0E000000 0x0002000A 0x00005A3C
D_80112FB4: .word 0x0E000000 0x00010004 0x00005A3C
D_80112FC0: .word 0x00000000 0x00000000 0x0000001E
D_80112FCC: .word 0x0D000000 0x0002000A 0x0000000A
D_80112FD8: .word 0x0D000000 0x00010004 D_80112F90
D_80112FE4: .word 0x0D000000 0x00070005 D_80112FA8
D_80112FF0: .word 0x0D000000 0x00000001 D_80112FA8
D_80112FFC: .word 0x0E000000 0x0002000A 0x00005A3C
D_80113008: .word 0x0E000000 0x00010004 0x00005A3C
D_80113014: .word 0x0E000000 0x00070005 0x00005A3C
D_80113020: .word 0x00000000 0x00000000 0x00001E1E
D_8011302C: .word 0x0D000000 0x00040002 0x0000000A
D_80113038: .word 0x0D000000 0x00030005 0x0000000A
D_80113044: .word 0x0D000000 0x000E0006 0x0000000A
D_80113050: .word 0x0E000000 0x00040002 0x00005A3C
D_8011305C: .word 0x0E000000 0x00030005 0x00005A3C
D_80113068: .word 0x0E000000 0x000E0006 0x00005A3C
D_80113074: .word 0x00000000 0x00000000 0x00001E1E
D_80113080: .word 0x0D000000 0x000E0002 0x0000000A
D_8011308C: .word 0x0D000000 0x000C0002 0x0000000A
D_80113098: .word 0x0D000000 0x000B0107 0x0000000A
D_801130A4: .word 0x0D000000 0x00090004 0x0000000A
D_801130B0: .word 0x0E000000 0x000E0002 0x00005A3C
D_801130BC: .word 0x0E000000 0x000C0002 0x00005A3C
D_801130C8: .word 0x0E000000 0x000B0107 0x00005A3C
D_801130D4: .word 0x0E000000 0x00090004 0x00005A3C
D_801130E0: .word 0x00000000 0x00000000 0x00001E1E
D_801130EC: .word 0x0E000000 0x00170001 0x00005A3C
D_801130F8: .word 0x0E000000 0x00040007 0x00005A3C
D_80113104: .word 0x00000000 0x00000000 0x00001E1E
D_80113110: .word 0x0D000000 0x00170001 0x0000000A
D_8011311C: .word 0x0D000000 0x00040007 0x0000000A
D_80113128: .word 0x0D000000 0x00030005 D_801130EC
D_80113134: .word 0x0D000000 0x000E0006 D_801130EC
D_80113140: .word 0x0E000000 0x00170001 0x00005A3C
D_8011314C: .word 0x0E000000 0x00040007 0x00005A3C
D_80113158: .word 0x0E000000 0x00030005 0x00005A3C
D_80113164: .word 0x0E000000 0x000E0006 0x00005A3C
D_80113170: .word 0x00000000 0x00000000 0x00001E1E
D_8011317C: .word 0x0E000000 0x000B0004 0x00005A3C
D_80113188: .word 0x00000000 0x00000000 0x00001E1E
D_80113194: .word 0x0D000000 0x000B0004 0x0000000A
D_801131A0: .word 0x0D000000 0x00080007 D_8011317C
D_801131AC: .word 0x00000000 0x00000000 0x00001E1E
D_801131B8: .word 0x0D000000 0x00160004 0x0000000A
D_801131C4: .word 0x0D000000 0x00110001 0x0000000A
D_801131D0: .word 0x0D000000 0x00100004 0x0000000A
D_801131DC: .word 0x0D000000 0x00060006 0x0000000A
D_801131E8: .word 0x0E000000 0x00160004 0x00005A3C
D_801131F4: .word 0x0E000000 0x00110001 0x00005A3C
D_80113200: .word 0x0E000000 0x00100004 0x00005A3C
D_8011320C: .word 0x0E000000 0x00060006 0x00005A3C
D_80113218: .word 0x00000000 0x00000000 0x00001E1E
D_80113224: .word 0x0D000000 0x00120005 0x0000000A
D_80113230: .word 0x0E000000 0x00120005 0x00005A3C
D_8011323C: .word 0x00000000 0x00000000 0x00003C1E
D_80113248: .word 0x02000000 0x00000001 D_80112FCC
D_80113254: .word 0x02000000 0x00000002 D_8011302C
D_80113260: .word 0x02000000 0x00000004 D_80113080
D_8011326C: .word 0x02000000 0x00000008 D_80113110
D_80113278: .word 0x02000000 0x00000010 D_80113194
D_80113284: .word 0x02000000 0x00000020 D_801131B8
D_80113290: .word 0x02000000 0x00000040 D_80113224
D_8011329C: .word 0x00000000 0x00000000 0x00000000
D_801132A8: .word 0x0D000000 0x0002040A 0x00000000
D_801132B4: .word 0x00000000 0x00000000 0x00006464
D_801132C0: .word 0x0D000000 0x00040002 0x00000000
D_801132CC: .word 0x0D000000 0x00030205 0x00000000
D_801132D8: .word 0x0D000000 0x000E0406 0x00000000
D_801132E4: .word 0x00000000 0x00000000 0x00006464
D_801132F0: .word 0x0D000000 0x000E0002 0x00000000
D_801132FC: .word 0x0D000000 0x000C0002 0x00000000
D_80113308: .word 0x0D000000 0x000B0507 0x00000000
D_80113314: .word 0x00000000 0x00000000 0x00006464
D_80113320: .word 0x0D000000 0x00170001 0x00000000
D_8011332C: .word 0x0D000000 0x00040207 0x00000000
D_80113338: .word 0x00000000 0x00000000 0x00006464
D_80113344: .word 0x0D000000 0x000B0004 0x00000000
D_80113350: .word 0x0D000000 0x00080607 0x00000000
D_8011335C: .word 0x00000000 0x00000000 0x00006464
D_80113368: .word 0x0D000000 0x00160004 0x00000000
D_80113374: .word 0x0D000000 0x00060406 0x00000000
D_80113380: .word 0x0D000000 0x00110001 0x00000000
D_8011338C: .word 0x0D000000 0x00100204 0x00000000
D_80113398: .word 0x00000000 0x00000000 0x00006464
D_801133A4: .word 0x0D000000 0x00120005 0x00000000
D_801133B0: .word 0x00000000 0x00000000 0x00006464
D_801133BC: .word 0x02000000 0x00000001 D_801132A8
D_801133C8: .word 0x02000000 0x00000002 D_801132C0
D_801133D4: .word 0x02000000 0x00000004 D_801132F0
D_801133E0: .word 0x02000000 0x00000008 D_80113320
D_801133EC: .word 0x02000000 0x00000010 D_80113344
D_801133F8: .word 0x02000000 0x00000020 D_80113368
D_80113404: .word 0x02000000 0x00000040 D_801133A4
D_80113410: .word 0x00000000 0x00000000 0x00000000
D_8011341C: .word 0x02000000 0x00000040 0x00005A3C
D_80113428: .word 0x00000000 0x00000000 0x00000000
D_80113434: .word 0x02000000 0x00000071 0x00005A3C
D_80113440: .word 0x00000000 0x00000000 0x00000000
D_8011344C: .word 0x01000000 0x0000001E 0x00006446
D_80113458: .word 0x00000000 0x00000000 0x0000001E
D_80113464: .word 0x0A000000 0x00000009 D_8011344C
D_80113470: .word 0x01000000 0x00000032 0x00006446
D_8011347C: .word 0x01000000 0x00000028 0x0000503C
D_80113488: .word 0x01000000 0x0000001E 0x00003232
D_80113494: .word 0x00000000 0x00000000 0x00001432
D_801134A0: .word 0x02000000 0x00000004 D_80113464
D_801134AC: .word 0x01000000 0x0000001E 0x00006446
D_801134B8: .word 0x00000000 0x00000000 0x00005A3C

D_801134C4: .word 0x00000000

D_801134C8: .word 0x09060007 0x04080205 0x01000000
D_801134D4: .word 0x09010607 0x04080002 0x05000000
D_801134E0: .word 0x09070206 0x04080005 0x01000000
D_801134EC: .word 0x09050706 0x04080002 0x01000000
D_801134F8: .word 0x09040807 0x06000205 0x01000000
D_80113504: .word 0x09070604 0x08000205 0x01000000
D_80113510: .word D_801134C8
D_80113514: .word D_801134D4
D_80113518: .word D_801134E0
D_8011351C: .word D_801134EC
D_80113520: .word D_801134F8
D_80113524: .word D_80113504

D_80113528: .word 0x64463C00 0x32001E1E 0x0A000000
D_80113534: .word 0x64463C00 0x3200141E 0x1E000000
D_80113540: .word 0x64463C3C 0x3200141E 0x0A000000
D_8011354C: .word 0x64463C3C 0x3200141E 0x0A000000
D_80113558: .word 0x64463C00 0x3C141E1E 0x0A000000
D_80113564: .word 0x64463C32 0x00141E1E 0x0A000000
D_80113570: .word D_80113528
D_80113574: .word D_80113534
D_80113578: .word D_80113540
D_8011357C: .word D_8011354C
D_80113580: .word D_80113558
D_80113584: .word D_80113564

D_80113588: .word 0x09090909 0x09090000

D_80113590: .word 0x01020408

D_80113594: .word 0x00000000

D_80113598: .word 0x00000000
D_8011359C: .word 0x00000000
D_801135A0: .word 0x00000000

D_801135A4: .word 0x000E000D 0x00110000

D_801135AC: .word 0x00000000
D_801135B0: .word 0x00000000
D_801135B4: .word 0x00000000

.align 8
; Doubles
D_801135B8: .word 0x3FF00000
D_801135BC: .word 0x00000000

D_801135C0: .word 0x3FF00000
D_801135C4: .word 0x00000000

D_801135C8: .word 0x25640000
D_801135CC: .word 0x00000000

D_801135D0: .word 0x3F91DF46
D_801135D4: .word 0xA2529D39

D_801135D8: .word 0x3F91DF46
D_801135DC: .word 0xA2529D39

D_801135E0: .word 0x3F91DF46
D_801135E4: .word 0xA2529D39

D_801135E8: .word 0x3F91DF46
D_801135EC: .word 0xA2529D39

D_801135F0: .word 0x3FF80000
D_801135F4: .word 0x00000000

D_801135F8:
.word 0x3F800000
.word 0x3F800000
.word 0x3F800000
.word 0x3F800000
.word 0x40000000
.word 0x3F800000
.word 0x00000000
.word 0x40000000
.word 0x3F800000
.word 0xBF800000
.word 0x3F800000
.word 0x3F800000
.word 0xBF800000
.word 0xBF800000
.word 0x3F800000
.word 0x00000000
.word 0xBF800000
.word 0x3F800000
.word 0xBF800000
.word 0x40000000
.word 0x3F800000
.word 0x3F800000
.word 0xBF800000
.word 0x3F800000

.align 8
D_80113658: .word 0x3FE00000
D_8011365C: .word 0x00000000

D_80113660: .word 0x3FE00000
D_80113664: .word 0x00000000

D_80113668: .word 0x3FE00000
D_8011366C: .word 0x00000000

D_80113670: .word 0x3FE00000
D_80113674: .word 0x00000000

D_80113678: .word 0x3FF00000
D_8011367C: .word 0x00000000

D_80113680: .word 0x3FF00000
D_80113684: .word 0x00000000

D_80113688: .word 0x3FF00000
D_8011368C: .word 0x00000000

D_80113690: .word 0x3FF00000
D_80113694: .word 0x00000000

DuelMinigamesArray:
.byte 0x3F ; Western Land minigame index
.byte 0x42 ; Pirate Land minigame index
.byte 0x44 ; Horror Land minigame index
.byte 0x46 ; Space Land minigame index
.byte 0x48 ; Mystery Land minigame index
.byte 0x4A ; Bowser Land minigame index
.align 4

; jump table
D_80113698:
.word D_801113C8
.word D_801113A4
.word D_801113C8
.word D_8011142C
.word D_801113C8
.word D_80111504
.word D_80111418
.word D_801113D0
.word D_80111490
.word D_801113F4
.word D_801114B8

.align 16

; bss
D_801136D0: .word 0
D_801136D4: .word 0
D_801136D8: .word 0
D_801136DC: .word 0
D_801136E0: .word 0
D_801136E4: .word 0
D_801136E8: .word 0
D_801136EC: .word 0
D_801136F0: .word 0
D_801136F4: .word 0
D_801136F8: .word 0
D_801136FC: .word 0
D_80113700: .word 0
D_80113704: .word 0
D_80113708: .word 0
D_8011370C: .word 0
D_80113710: .word 0
D_80113714: .word 0
D_80113718: .word 0
D_8011371C: .word 0
D_80113720: .word 0
D_80113724: .word 0
D_80113728: .word 0
D_8011372C: .word 0
D_80113730: .word 0
D_80113734: .word 0
D_80113738: .word 0
D_8011373C: .word 0
D_80113740: .word 0
D_80113744: .word 0
D_80113748: .word 0
D_8011374C: .word 0
D_80113750: .word 0
D_80113754: .word 0
D_80113758: .word 0
D_8011375C: .word 0
D_80113760: .word 0
D_80113764: .word 0
D_80113768: .word 0
D_8011376C: .word 0
D_80113770: .word 0
D_80113774: .word 0
D_80113778: .word 0
D_8011377C: .word 0
D_80113780: .word 0
D_80113784: .word 0
D_80113788: .word 0
D_8011378C: .word 0
D_80113790: .word 0
D_80113794: .word 0
D_80113798: .word 0
D_8011379C: .word 0
D_801137A0: .word 0
D_801137A4: .word 0
D_801137A8: .word 0
D_801137AC: .word 0
D_801137B0: .word 0
D_801137B4: .word 0
D_801137B8: .word 0
D_801137BC: .word 0
D_801137C0: .word 0
D_801137C4: .word 0
D_801137C8: .word 0
D_801137CC: .word 0
D_801137D0: .word 0
D_801137D4: .word 0
D_801137D8: .word 0
D_801137DC: .word 0
D_801137E0: .word 0
D_801137E4: .word 0
D_801137E8: .word 0
D_801137EC: .word 0
D_801137F0: .word 0
D_801137F4: .word 0
D_801137F8: .word 0
D_801137FC: .word 0
D_80113800: .word 0
D_80113804: .word 0
D_80113808: .word 0
D_8011380C: .word 0
D_80113810: .word 0
D_80113814: .word 0
D_80113818: .word 0
D_8011381C: .word 0
D_80113820: .word 0
D_80113824: .word 0
D_80113828: .word 0
D_8011382C: .word 0
D_80113830: .word 0
D_80113834: .word 0
D_80113838: .word 0
D_8011383C: .word 0
D_80113840: .word 0
D_80113844: .word 0
D_80113848: .word 0
D_8011384C: .word 0
D_80113850: .word 0
D_80113854: .word 0
D_80113858: .word 0
D_8011385C: .word 0
D_80113860: .word 0
D_80113864: .word 0
D_80113868: .word 0
D_8011386C: .word 0
D_80113870: .word 0
D_80113874: .word 0
D_80113878: .word 0
D_8011387C: .word 0
D_80113880: .word 0
D_80113884: .word 0
D_80113888: .word 0
D_8011388C: .word 0
D_80113890: .word 0
D_80113894: .word 0
D_80113898: .word 0
D_8011389C: .word 0
D_801138A0: .word 0
D_801138A4: .word 0
D_801138A8: .word 0
D_801138AC: .word 0
D_801138B0: .word 0
D_801138B4: .word 0
D_801138B8: .word 0
D_801138BC: .word 0
`}const rie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkREREurc4EMQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAGfklEQVRYw32XvY4dOQ6Fv0NKVdUejOGwwwn30fcRNpzQ4T7ChgYGBozZaXf9SOQGUnVfG4Ot4EK3pCIp6vAcSgD//v2f+Y/ffiPXlf7LL1xfv3K+vnK0RkRAAASogAIQkEAFLv7/swH73//foQBs28bOxvL6SlwX+974/vKClUr0RmtCSkoJIDgvY9tWkiQ6uE97+866bkiw78Puz8/O/kM85X3mG/vyEfMGiFJ/JXrHvLJVIxMgyYSPH8f4PE/cNwrQ6GzbOrMDnz69BwXb3PfOBmyfNvZ9Z2NDv3/+nM984fn5mVoLx5//5eWvF/bXV+QirWJKIp1ExHRQObm0UDnoLBiNmQgOxs5Xdg5WVg4OVnj7HbMA2vdv+Z/P/xoB9M7ZO1+/fqVnx9YnihnXQ6r0kM7MRGa0iQam8fXnvAvOhIUH+MzHYOP5+ZkN0NMT1GGqeMF173Z89+icTESiB+f8nfNxWsM5D87P887AnrDD/o3+8pX9jz/4a//OuR9QK4oYyA+BDGpBPUAjoKBDFxRHvYGC7IbMYKnoaiPCLBCNLCL3TvlQ4QJ7D/MThzZMhiIpJmRCpaA0BCwCN8fWFSsVyVFLSrQRUKkoDGmsNXO0PeHdkITqgjVhxYnvFwjKrBfYdraXnT9JdkBWUE8OEmRUE00iW+MCJJERdMFqFfVkJ5E5VWMt1zVsAWvvtD4oxRHphiUU+PJel5twidWMrnHOWyY5Hd4YWm4sZYA5soH/p5/W3rTDfFfyAX0ayS/7ly+DNSaqzx50GUt0yKBn0hACHDCSjkAiZcSsEBtc+caLj8C8pu0C9BENNvFYvn379kAYsK7CTjhLIVuH6IQ7ktEEycQGkBJkcmVCDpK6S+X8KRMA7aGU42bCO0WDNsXlRo+Gx0W6QSlUNySjNyieZCQtEwdceleDDCKnY2mUr0Q+ZGZ5qMYGFLaNfYdlA2tA2+nVWKICxunCMa4rwS9e01AEZhBopPTGxMRNziO73ly94+e6saSxpux7kHby127EeVCfDK6NphMtgZ8bXQfuotpCJwlBZGKZPwbwQHOb4PjpCBxomW9ZkUQxa1SrLA5ZnnAzsgjxAQhym+N+clhlIwl3MkEJlRiATFH64APMURNbHqPE77R3KP2E9Z0vy+LObgsfSILOzsIHLq7snDibgp6N0wxXcGZyBZgSmYBBUh3AhDIxkms1KhsCzpy5cVF9wSZIDVFe3Cl0vgMtjMLOCxAh3Pr4OIXL8EhaBh5JZiD3kU7NspPIWWIWSdM4jiWhS1gmwRhvwElSRMUzOdQoOVoE5RBYpb2dcOYAmIXI6MNROoaNef0gfiiTZOAkJMq0ZdIswQHVkufOGQ0jCRxkZBqXTtyc80qqGrKFnqC8II0UhDrX1alqoBWUSMnZkkpDqoSM1IW7cZ7JooZso3shIyhLXIMYujjilZZJxDjP1QU5zysb2ZO0QT7Rg6UIcvKAGtGDOt+dAHERLcDEVoRSnAnKF/IMqIVSb1JQx86LhcF8FoZJeIcegRUGGR2BfAiUdVESeu/IbwELSkDrgVnOozIshq3W+7DlBY5jHvvk7vK00c6LxR25E5m4QWigmwh8rdgUnZRwoJfxDiDMcEu8TMzAD7a8zu8jyHWlHHeNlgLWIZzLfXQ6Ms7JZOWW2AmiIKmIQyBEZhKZVBtphlEN1ySmxYzj5shMmkRFGOsKc8dj5YrKQPYFUB0ETfdYZHHkRjNDZcyHA+5cCZRhKwDqKI8zE6qT5LBVCm2Q/TkIRWJ2GjP2W8Iml+eDhKExnkRETiaKGELU4r0k20N9nn2sTUarBxQyyCspmcN/77N27/ofqtcZGACovXNloh4o+2TCwfFM1rv5nkz0YOvWwsw3LXAg6T2xKR4pYRGECUlEBHaznBlEUCVijhPwuTNfhuDqOIgQUqclpPkAshJDGImZUUTiMbvcWySOA/yJ4BzoNnsXkPOk+4JnG9+NLmYEfp4oDCyIWqENxrerAYltTyML+yuUDbNCieMV6kJb1rf+jXUdC7OQCYfZ+9yyouz0MNwLh2ncBSS0LHSgY/RIMKcuK/hJM2Oz0YjF9oTVSjYo66+f+H7s6OEOK0aLZTn6QzTm7hbL5dBO9jKuK2+6/yA4qwmvGx24lg2is2usVxkK4gXKReHDuj3cXmFFo3vAuZnS3uYG4H1ZZpM65t+uZBp3JfNrZIJkZRzjvcnHO/P/AOh7mPvGIpA7AAAAAElFTkSuQmCC",iie=new class extends KC{constructor(){super(...arguments),this.gameVersion=2,this.nintendoLogoFSEntry=[9,1],this.hudsonLogoFSEntry=[9,2],this.boardDefDirectory=10,this.MAINFS_READ_ADDR=95872,this.HEAP_FREE_ADDR=96256,this.TABLE_HYDRATE_ADDR=349836}onLoad(e,t,r){r||(this._extractCostumeType(e,t),this._extractBanks(e,t),this._extractItemShops(e,t)),this._parseBoardSelectIcon(e,t),this._readAnimationBackgrounds(e,t)}onCreateBoardOverlay(e,t,r,i){return nie(e,t,r,i)}onAfterOverwrite(e,t,r,i){e.setUint16(267778,32832),e.setUint16(267786,4194304-this.EVENT_MEM_SIZE>>>16),e.setUint16(267798,26),e.setUint16(493214,26),this._writeCostumeType(e,t,i),typeof r.animBgSet=="number"&&W0.setSetEntryCount(r.animBgSet,0)}onOverwritePromises(e,t,r){const i=t.bgDir,a=[this._writeBackground(i,e.bg.src,e.bg.width,e.bg.height),this._writeAnimationBackgrounds(t.animBgSet,e.bg.width,e.bg.height,e.bg.src,e.animbg),this._writeBackground(i+2,e.otherbg.largescene,320,240),this._writeOverviewBackground(i+6,e.bg.src),this.onWriteBoardSelectImg(e,t),this._writeBoardSelectIcon(e,t),this.onWriteBoardLogoImg(e,t),this._brandBootSplashscreen()];return Promise.all(a)}onWriteEvents(e){}hydrateSpace(e,t,r){e.type===de.BANK&&cs(t,e,fi(GA),!1,r)}onParseStrings(e,t){const r=t.str||{};if(r.boardSelect){const i=r.boardSelect,a=Bt.read(i),o=a.split(`
`),s=o[0].indexOf(">")+1,l=o[0].indexOf("",s);e.name=o[0].substring(s,l),e.description=[o[1],o[2]].join(`
`);let c=0,d=a.indexOf(this.getCharacterMap()[59],0);for(;d!==-1;)c++,d=a.indexOf(this.getCharacterMap()[59],d+1);e.difficulty=c}}onWriteStrings(e,t){const r=t.str||{};if(r.boardSelect){let i=[];i.push(11),i.push(6),i=i.concat(Bt._strToBytes(e.name||"")),i.push(25),i.push(4),i=i.concat([14,14]),i=i.concat(Bt._strToBytes("Difficulty")),i.push(25),i=i.concat(Bt._strToBytes(" : "));const a=59;if(e.difficulty>5||e.difficulty<1)i.push(a),i=i.concat(Bt._strToBytes(" ")),i.push(62),i=i.concat(Bt._strToBytes(" "+e.difficulty.toString()));else for(let l=0;l<e.difficulty;l++)i.push(a);i.push(10),i=i.concat(Bt._strToBytes(e.description||"")),i.push(0);const o=hi(i),s=r.boardSelect;Bt.write(s,o)}if(r.boardNames&&r.boardNames.length){let i=[];i.push(11),i.push(6),i=i.concat(Bt._strToBytes(e.name||"")),i.push(25),i.push(0);const a=hi(i);for(let o=0;o<r.boardNames.length;o++){const s=r.boardNames[o];Bt.write(s,a)}}if(r.boardGreeting&&r.boardGreeting.length){let i=[];i.push(11),i=i.concat(Bt._strToBytes("We're here, everyone!")),i.push(10),i=i.concat(Bt._strToBytes("This is ")),i.push(6),i.push(15),i=i.concat(Bt._strToBytes((e.name||"")+"!!!")),i.push(22),i.push(25),i.push(255),i.push(0);let a=hi(i);Bt.write(r.boardGreeting[0],a),i=[],i.push(11),i=i.concat(Bt._strToBytes("Now, before this adventure begins,")),i.push(10),i=i.concat(Bt._strToBytes("we must decide turn order.")),i.push(255),i.push(0),a=hi(i),Bt.write(r.boardGreeting[1],a)}if(r.boardWinner){let i=[];i.push(11),i=i.concat(Bt._strToBytes("Well done, ")),i.push(17),i=i.concat(Bt._strToBytes("!")),i.push(10),i=i.concat(Bt._strToBytes("You are the ")),i.push(7),i.push(15),i=i.concat(Bt._strToBytes("Super Star")),i.push(22),i.push(25),i.push(10),i=i.concat(Bt._strToBytes("of ")),i.push(6),i.push(15),i=i.concat(Bt._strToBytes((e.name||"")+"!!!")),i.push(22),i.push(25),i.push(0);const a=hi(i);Bt.write(r.boardWinner,a)}if(r.boardPlayCount){let i=[];i.push(11),i=i.concat(Bt._strToBytes(e.name||"")),i=i.concat([14,14,14,14,14,14]),i.push(17),i=i.concat(Bt._strToBytes(" Time(s)")),i.push(0);const a=hi(i);Bt.write(r.boardPlayCount,a)}}onChangeBoardSpaceTypesFromGameSpaceTypes(e,t){const r={0:de.OTHER,3:de.OTHER,5:de.CHANCE,6:de.ITEM,7:de.BANK,8:de.OTHER,9:de.BATTLE,12:de.BOWSER,14:de.STAR,15:de.BLACKSTAR,16:de.OTHER,17:de.OTHER};if(e.spaces.forEach(i=>{const a=i.type,o=r[a];o!==void 0&&(i.type=o)}),t.length){const i=t[0][0];isNaN(i)||(e.spaces[i].type=de.START)}}onChangeGameSpaceTypesFromBoardSpaceTypes(e){const t={[de.OTHER]:0,[de.BLUE]:1,[de.RED]:2,[de.MINIGAME]:0,[de.HAPPENING]:4,[de.STAR]:14,[de.CHANCE]:5,[de.START]:0,[de.SHROOM]:0,[de.BOWSER]:12,[de.ITEM]:6,[de.BATTLE]:9,[de.BANK]:7,[de.ARROW]:13,[de.BLACKSTAR]:15,[de.GAMEGUY]:0,[de.DUEL_BASIC]:0,[de.DUEL_START_BLUE]:0,[de.DUEL_START_RED]:0,[de.DUEL_POWERUP]:0,[de.DUEL_REVERSE]:0};e.spaces.forEach(r=>{const i=t[r.type];i!==void 0&&(r.type=i)})}_extractCostumeType(e,t){e.costumeTypeIndex=t.costumeType}_writeCostumeType(e,t,r){var l;const a={[dn.NORMAL]:{small:211,big:209,toad:524288,player2d:[656002,656003,656005,656006,656004,656007],bowser2d:[656026,656027,656029,656030,656028,656031]},[dn.WESTERN]:{small:212,big:213,toad:524302,player2d:[655972,655973,655975,655976,655974,655977],bowser2d:[656008,656009,656011,656012,656010,656013]},[dn.PIRATE]:{small:214,big:215,toad:524310,player2d:[655978,655979,655981,655982,655980,655983],bowser2d:[656014,656015,656017,656018,656016,656019]},[dn.HORROR]:{small:216,big:217,toad:524328,player2d:[655984,655985,655987,655988,655986,655989],bowser2d:[656020,656021,656023,656024,656022,656025]},[dn.SPACE]:{small:218,big:219,toad:524316,player2d:[655990,655991,655993,655994,655992,655995],bowser2d:[656026,656027,656029,656030,656028,656031]},[dn.MYSTERY]:{small:220,big:221,toad:524323,player2d:[655996,655997,655999,656e3,655998,656001],bowser2d:[656032,656033,656035,656036,656034,656037]}}[(l=t.costumeTypeIndex)!=null?l:dn.NORMAL],o=835392+r*(16*12),s=6;for(let c=0;c<s;c++)e.setUint16(o+c*16+2,a.small),e.setUint16(o+96+c*16+2,a.big),e.setUint32(842280+r*6*4+c*4,a.player2d[c]),e.setUint32(842472+r*6*4+c*4,a.bowser2d[c])}_readAnimationBackgrounds(e,t){if(typeof t.animBgSet!="number"||!t.bgDir)return;const r=Z0.readBackgroundImgData(t.bgDir),i=W0.readAnimationBackgrounds(t.animBgSet,r,e.bg.width,e.bg.height);i&&i.length&&(e.animbg=i)}async _writeAnimationBackgrounds(e,t,r,i,a){if(isNaN(e)||!a||!a.length)return;const o=setTimeout(()=>{throw new Error("Failed to write animations")},45e3);let s;const l=new Array(a.length),d=[new Promise(h=>{Ca(i,t,r).then(f=>{s=f,h()})})];for(let h=0;h<a.length;h++){const f=new Promise(m=>{const g=h;Ca(a[h],t,r).then(x=>{l[g]=x,m()})});d.push(f)}await Promise.all(d);for(let h=0;h<l.length;h++)W0.writeAnimationBackground(e,h,s,l[h],t,r);wt("Wrote animations"),clearTimeout(o)}onParseBoardSelectImg(e,t){!t.img.boardSelectImg||(e.otherbg.boardselect=this._readImgFromMainFS(9,t.img.boardSelectImg,0))}onWriteBoardSelectImg(e,t){return new Promise((r,i)=>{const a=t.img.boardSelectImg;if(!a){r();return}const o=new Image,s=setTimeout(()=>i(`Failed to write board select for ${t.name}`),45e3);o.onload=()=>{const l=bc(o,64,48),c=dt.get(9,a),h=Pr([{src:l,width:64,height:48,bpp:32}],16,0,c);dt.write(9,a,h),clearTimeout(s),r()},o.src=e.otherbg.boardselect})}_parseBoardSelectIcon(e,t){if(!t.img.boardSelectIconCoords)return;const r=this._readImgInfoFromMainFS(9,15,0),[i,a]=t.img.boardSelectIconCoords,o=YW(r.src,r.width,r.height,32,i,a,32,32),s=Ea(o,32,32);e.otherbg.boardselecticon=s}_writeBoardSelectIcon(e,t){return new Promise((r,i)=>{if(!t.img.boardSelectIconCoords){r();return}const a=e.otherbg.boardselecticon;if(!a){r();return}const o=setTimeout(()=>i(`Failed to write board select icon for ${t.name}`),45e3);let s,l;const c=new Promise(function(f,m){s=new Image,s.onload=function(){f()},s.src=rie}),d=new Promise(function(f,m){l=new Image,l.onload=function(){f()},l.src=a}),h=[c,d];Promise.all(h).then(f=>{const m=this._readImgInfoFromMainFS(9,15,0),g=ko(m.width,m.height),x=oM(m.src,m.width,m.height);g.putImageData(x,0,0);const[E,_]=t.img.boardSelectIconCoords;g.drawImage(s,E,_,32,32),g.drawImage(l,E,_,32,32);const v=g.getImageData(0,0,m.width,m.height).data.buffer,C=dt.get(9,15),D=[{src:v,width:m.width,height:m.height,bpp:32}],V=Pr(D,16,0,C);if(dt.write(9,15,V),t.img.boardSelectIconMask){const H=this._createBoardSelectIconHoverMask(l),R=dt.get(9,t.img.boardSelectIconMask),te=Pr([{src:H,width:32,height:32,bpp:32}],16,0,R);dt.write(9,t.img.boardSelectIconMask,te)}wt("Wrote board select icon"),clearTimeout(o),r()},f=>{wt(`Error writing board select icon: ${f}`),i()})})}_createBoardSelectIconHoverMask(e){const t=bc(e,32,32),r=new ArrayBuffer(t.byteLength),i=new DataView(t),a=new DataView(r);let o=!1;for(let s=0;s<r.byteLength;s+=4)i.getUint32(s)===0?(a.setUint32(s,0),o=!0):a.setUint32(s,3149642751);return o?r:new ArrayBuffer(t.byteLength)}onParseBoardLogoImg(e,t){!t.img.introLogoImg||(e.otherbg.boardlogo=this._readImgFromMainFS(10,t.img.introLogoImg,0))}onWriteBoardLogoImg(e,t){return new Promise((r,i)=>{const a=t.img.introLogoImg;if(!a){r();return}const o=new Image,s=setTimeout(()=>i(`Failed to write logos for ${t.name}`),45e3);o.onload=()=>{const c=bc(o,260,120),d=dt.get(10,a),f=Pr([{src:c,width:260,height:120,bpp:32}],16,0,d);dt.write(10,a,f),clearTimeout(s),r()},o.src=e.otherbg.boardlogo;const l=t.img.pauseLogoImg;if(l){const c=dt.get(10,l),d=[{src:new ArrayBuffer(130*60*4),width:130,height:60,bpp:32}],h=Pr(d,16,0,c);dt.write(10,l,h)}})}async _writeOverviewBackground(e,t){const r=await Ca(t,320,240),i=setTimeout(()=>{throw new Error(`Failed to write bg ${e}`)},45e3),a=ko(320,240);a.putImageData(r,0,-10);const o=a.getImageData(0,0,320,240);Z0.writeBackground(e,o,320,240),clearTimeout(i)}getAudioMap(e){return["","Story One","Go Lucky","Welcome to Mario Land","Laboratory","Rules Land","Credits","In the Pipe","Western Land","Pirate Land","Space Land","Horror Land","Mystery Land","Bowser Land","Adventure Begins","The Adventure Ends","Ending","Star Spot","Bowser's Theme","A Ways to Go","How Many","Take the Coin","Let the Game Begin","","","","","Going for the Coins","Not Gonna Lose","Keepin' on the Path","Couldn't be Better","Know What I Mean?","That's All of It","Let's Have Some Fun","The Blue Skies Yonder","Chance Time","Going Somewhere","Duel!","No Fright, No Fear","Don't Look Back","Got an Item","This Way That","Walking Underwater","Spinning Polka","Spinning Polka 2","Spinning Polka 3","","","","","Mini-Game Land","Woody","Mini-Game Park","Battle Start","Mini-Game Stadium","","Coaster","","The Way to Play","The Star Appears","Bowser Appears","I Can Do It!","Bowser's Parade","Ending","Story Intro 2","Story Intro 3","Mini-Game Coaster Results","Drum Roll","Win (One Winner)","Lose","","Know What I Mean","Instant Replay","Coaster (Double Mix)","Coaster (Single Mix)","Coaster (Hip Hip Mix)","Coaster (Duo Mix)","Coaster (Hermit Mix)","Coaster (Speed Mix)","Coaster (Survival Mix)"]}getCharacterMap(){return{0:"",1:"<BLACK>",2:"<DEFAULT>",3:"<RED>",4:"<PURPLE>",5:"<GREEN>",6:"<BLUE>",7:"<YELLOW>",8:"<WHITE>",9:"<SEIZURE>",10:`
`,11:"\u3014",12:"\u25CB",13:"	",14:"	",16:" ",17:"{0}",18:"{1}",19:"{2}",20:"{3}",21:"{4}",22:"{5}",33:"\u3000",34:"\u3001",35:"\u3002",36:"\u3003",37:"\u3004",38:"\u3005",39:"\u3006",40:"\u3007",41:"\u3008",42:"\u3009",43:"\u3010",44:"\u3011",58:"\u3012",59:"\u3013",60:"+",61:"-",62:"x",63:"->",91:'"',92:"'",93:"(",94:")",95:"/",123:":",128:'"',129:"\xB0",130:",",131:"\xB0",133:".",192:"\u201C",193:"\u201D",194:"!",195:"?",255:"\u3015"}}};let W8={};W8[Qe.MP3_USA]={jp:[{upper:61762,lower:61770},{upper:373706,lower:373714}],en:[{upper:373778,lower:373786}],de:[{upper:373802,lower:373810}],es:[{upper:373814,lower:373822}],it:[{upper:373826,lower:373830}],fr:[{upper:373790,lower:373798}]};W8[Qe.MP3_JPN]={jp:[{upper:61762,lower:61770},{upper:373346,lower:373354}]};var Vo;class aie{constructor(e){this.dirs=this._extract(e)}_extract(e){let t=this._getDirectoryCountFromView(e),r=new Array(t);for(let i=0;i<t;i++)r[i]=this._readDirFromView(e,i);return r}_getDirectoryCountFromView(e){return e.getUint32(0)}_readDirFromView(e,t){let r=this._getDirOffsetFromView(e,t),i=new DataView(e.buffer,e.byteOffset+r),a=this._decompressDir(i);return new Bt.StringTable(new DataView(a))}_decompressDir(e){let t=e.getUint32(0),r=e.getUint32(4),i=new DataView(e.buffer,e.byteOffset+8);return s_(r,i,t)}_getDirOffsetFromView(e,t){return e.getUint32(4*(1+t))}read(e,t,r=!1){if(e<0||e>=this.getDirectoryCount())throw new Error("Requesting non-existent string directory");return this.dirs[e].read(t,r)}write(e,t,r){this.dirs[e].write(t,r)}getDirectoryCount(){return this.dirs.length}getStringCount(e){return this.dirs[e].getStringCount()}getByteLength(){let e=0,t=this.dirs.length;e+=4,e+=4*t;for(let r=0;r<t;r++)e+=4,e+=4,e+=this.dirs[r].getByteLength(),e=_0(e,2);return e}pack(e,t=0){let r=new DataView(e,t),i=this.getDirectoryCount();r.setUint32(0,i);let a=4,o=4+i*4;for(let s=0;s<i;s++)r.setUint32(a,o),a+=4,r.setUint32(o,this.dirs[s].getByteLength()),o+=4,r.setUint32(o,0),o+=4,o=this._packDir(s,r,o),o=_0(o,2);return o}_packDir(e,t,r){const i=this.dirs[e].getByteLength();let a=new ArrayBuffer(i);return this.dirs[e].pack(a,0),fr(t,a,r,0,i),r+i}}const Ln={getROMOffset(n="en"){let e=bt.getDataView();const t=Ln.getPatchOffsets(n);if(!t)return null;let r=t[0];if(!r)return null;let i=e.getUint16(r.upper)<<16,a=e.getUint16(r.lower),o=i|a;return a&32768&&(o=o-65536),wt(`Strings3.getROMOffset[${n}] -> ${At(o)}`),o},setROMOffset(n,e){let t=new DataView(e),r=n,i=Ln.getLocales(bt.getROMGame());for(let a=0;a<i.length;a++){let o=i[a],s=Ln.getPatchOffsets(o),l=(r&4294901760)>>>16,c=r&65535;c&32768&&(l+=1);for(let d=0;d<s.length;d++)t.setUint16(s[d].upper,l),t.setUint16(s[d].lower,c);wt(`Strings3.setROMOffset[${o}] -> ${At(l<<16|c)}`),r+=_0(Vo[o].getByteLength(),16)}},getPatchOffsets(n="en"){return W8[bt.getROMGame()][n]},clear(){Vo=null},extract(){Vo={};let n=Ln.getLocales(bt.getROMGame());for(let e=0;e<n.length;e++){let t=n[e],r=bt.getDataView(Ln.getROMOffset(t));Vo[t]=new aie(r)}return Vo},extractAsync(){return new Promise((n,e)=>{Ln.extract(),n()})},pack(n,e=0){let t=e,r=Ln.getLocales(bt.getROMGame());for(let i=0;i<r.length;i++){let a=r[i],o=Vo[a];t=t+o.pack(n,t),t=_0(t,16)}return t},read(n,e,t,r=!1){return Vo[n].read(e,t,r)},write(n,e,t,r){Vo[n].write(e,t,r)},getLocales(n){return Object.keys(W8[n])},getDirectoryCount(n){return Vo[n].getDirectoryCount()},getStringCount(n,e){return Vo[n].getStringCount(e)},getByteLength(){let n=0,e=Ln.getLocales(bt.getROMGame());for(let t=0;t<e.length;t++){let r=e[t];n+=_0(Vo[r].getByteLength(),16)}return n}},Xg={id:"CHAINSPLIT3",name:"",activationType:Yt.WALKOVER,executionType:sn.PROCESS,parameters:[{name:"spaceIndexArgs",type:i0.NumberArray},{name:"chainArgs",type:i0.NumberArray},{name:"reverse",type:i0.Boolean},{name:"hasgate",type:i0.Boolean},{name:"prevSpace",type:i0.Number},{name:"altChain",type:i0.NumberArray}],fakeEvent:!0,supportedGames:[Qe.MP3_USA],parse(n,e){let t={METHOD_START:"16092DD153432852C141C78807ECCBF0",METHOD_END:"6FF6DF70CDC85862F8F129303009A544"};if(H0([n.buffer,e.offset,8],t.METHOD_START)&&H0([n.buffer,e.offset+36,20],t.METHOD_END)){let r=n.getUint16(e.offset+10)<<16,i=n.getUint16(e.offset+14),a=(r|i)&2147483647;a&32768&&(a=a-65536);let o=e.offset-(e.addr-a),s=n.getUint16(o);for(;s!==65535;)Go(e.curSpace,s,e.board),o+=2,s=n.getUint16(o);return!0}return!1},write(n,e,t,r){const i=e.parameterValues.spaceIndexArgs,a=e.parameterValues.chainArgs,o=e.parameterValues.altChain||[];return`
        addiu SP, SP, -0x18
        sw    RA, 0x14(SP)
        sw    S0, 0x10(SP)

    .if reverse
        jal   GetPlayerStruct
        li    A0, -1
        lbu   V0, 0x17(V0)
        andi  V0, V0, 0x80
        beq   V0, R0, exit_chain_split
        NOP
        lui   V0, hi(cur_player_spaces_remaining)
        lw    V0, lo(cur_player_spaces_remaining)(V0)
        beq   V0, R0, exit_chain_split
        NOP
        j   do_chain_split
        NOP
    .endif

    .if hasgate
      jal   GetPlayerStruct
      li    A0, -1
      move  S0, V0
      lbu   A0, 0x15(S0)
      lbu   A1, 0x16(S0)
      jal   GetAbsSpaceIndexFromChainSpaceIndex
      NOP
      sll   V0, V0, 0x10
      sra   V0, V0, 0x10
      ; Check for the previous space being the gate chain's first space.
      li    V1, ${e.parameterValues.prevSpace||0}
      bne   V0, V1, do_chain_split
      NOP
      lbu   V0, 0x17(S0)
      andi  V0, V0, 0x80
      bnez  V0, do_chain_split
      ; Send player to other chain if coming from gate.
      li    A1, ${o[0]||0} ; Chain index
      li    A0, -1
      jal   SetNextChainAndSpace
      li   A2, ${o[1]||0} ; Index in chain
      lbu   V0, 0x17(S0)
      andi  V0, V0, 0xFE
      j     exit_chain_split
      sb    V0, 0x17(S0)
    .endif

    do_chain_split:
      lui   A0, hi(space_index_args)
      addiu A0, A0, lo(space_index_args)
      lui   A1, hi(chain_args)
      addiu A1, A1, lo(chain_args)
      lui   A2, hi(ai_logic)
      jal   chain_split_3_helper
       addiu A2, A2, lo(ai_logic)
    .if reverse
    exit_chain_split:
    .else
    exit_chain_split:
      jal   EndProcess
       move  A0, R0
    .endif

      lw    RA, 0x14(SP)
      lw    S0, 0x10(SP)
      jr    RA
       addiu SP, SP, 0x18

    space_index_args:
      .halfword ${i.join(", ")}

    chain_args:
      .halfword ${a.join(", ")}

    ; Choose randomly
    ai_logic:
      .word ai_random_choice, ai_random_choice, ai_random_choice
    ai_random_choice:
      .word 0x00000000, 0x00000000, 0x064C9932

  .beginstatic
    chain_split_3_helper:
      addiu SP, SP, -0x38
      sw    RA, 0x30(SP)
      sw    S5, 0x2c(SP)
      sw    S4, 0x28(SP)
      sw    S3, 0x24(SP)
      sw    S2, 0x20(SP)
      sw    S1, 0x1c(SP)
      sw    S0, 0x18(SP)
      move  S2, A0
      move  S3, A1
      move  S5, A2
      li    A0, -1
      li    A1, -1
      jal   0x800F2304
       li    A2, 2
      jal   SleepVProcess
       move  S1, R0
      jal   chainsplit_setup_arrows
       NOP
      lui   A0, hi(current_player_index)
      jal   GetPlayerStruct
       lb    A0, lo(current_player_index)(A0)
      move  S4, V0
      lbu   A0, 0x15(S4)
      lbu   A1, 0x16(S4)
      jal   GetAbsSpaceIndexFromChainSpaceIndex
       NOP
      sll   V0, V0, 0x10
      sra   A1, V0, 0x10
      li    A2, 2
      move  V1, R0
    L80116514:
      sll   V0, S1, 1
      addu  V0, V0, S1
      sll   V0, V0, 1
      addu  A0, V0, S2
      sll   V0, V1, 1
    L80116528:
      addu  V0, V0, A0
      lh    V0, 0(V0)
      beq   V0, A1, L80116548
       NOP
      addiu V1, V1, 1
      slti  V0, V1, 2
      bnez  V0, L80116528
       sll   V0, V1, 1
    L80116548:
      beq   V1, A2, L80116564
       sll   V0, S1, 1
      addiu S1, S1, 1
      slti  V0, S1, 3
      bnez  V0, L80116514
       move  V1, R0
      sll   V0, S1, 1
    L80116564:
      addu  V0, V0, S1
      sll   A1, V0, 1
      sll   V0, V0, 2
      addu  S3, S3, V0
      lui   S0, hi(current_player_index)
      addiu S0, S0, lo(current_player_index)
      lb    A0, 0(S0)
      jal   0x800D76A0
       addu  A1, S2, A1
      move  S2, V0
      move  A0, S2
      lb    A1, 0(S0)
      jal   0x800D742C
       move  A2, R0
      jal   PlayerIsCPU
       li    A0, -1
      beq  V0, R0, L801165EC
       sll   V0, S1, 2
      addu  V0, V0, S5
      lw    A0, 0(V0)
      jal   0x800DA190
        move  S0, R0
      sll   V0, V0, 0x10
      sra   S1, V0, 0x10
      blez  S1, L801165E4
       move  A0, S2
    L801165CC:
      jal   0x800D7250
       li    A1, -2
      addiu S0, S0, 1
      slt   V0, S0, S1
      bnez  V0, L801165CC
        move  A0, S2
    L801165E4:
      jal   0x800D7250
        li    A1, -4
    L801165EC:
      jal   0x800D7518
       move  A0, S2
      move  S0, V0
      jal   0x800D6CA0
       move  A0, S2
      jal   chainsplit_hide_arrows
       NOP
      bnezl S0, L80116610
       addiu S3, S3, 6
    L80116610:
      lh    A1, 0(S3)
      lh    A2, 2(S3)
      jal   SetNextChainAndSpace
       li    A0, -1
      lh    A1, 4(S3)
      beq  A1, R0, L80116640
       NOP
      li    V0, 1
      beq   A1, V0, L8011664C
       NOP
      j     L80116658
       NOP
    L80116640:
      lbu   V0, 0x17(S4)
      j     L80116654
       andi  V0, V0, 0xfe
    L8011664C:
      lbu   V0, 0x17(S4)
      ori   V0, V0, 1
    L80116654:
      sb    V0, 0x17(S4)
    L80116658:
      lw    RA, 0x30(SP)
      lw    S5, 0x2c(SP)
      lw    S4, 0x28(SP)
      lw    S3, 0x24(SP)
      lw    S2, 0x20(SP)
      lw    S1, 0x1c(SP)
      lw    S0, 0x18(SP)
      jr    RA
       addiu SP, SP, 0x38

    .definelabel CORE_800CDD58,0x800CDD58
    .definelabel CORE_800D51F8,0x800D51F8

    chainsplit_setup_arrows:
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)
    L8010704C:
      jal   0x800E9AE0
       NOP
      beq  V0, R0, L8010706C
       NOP
      jal   SleepVProcess
       NOP
      j     L8010704C
       NOP
    L8010706C:
      jal   SleepVProcess
       NOP
      move  A0, R0
      li    A1, 146
      jal   0x800E210C
       li    A2, 1
      lui   AT, hi(chainsplit_arrow_memval1)
      sw    V0, lo(chainsplit_arrow_memval1)(AT)
      li    A0, 1
      li    A1, 160
      jal   0x800E210C
       li    A2, 1
      lui   AT, hi(chainsplit_arrow_memval2)
      sw    V0, lo(chainsplit_arrow_memval2)(AT)
      li    A0, 13
      li    A1, 174
      jal   0x800E210C
       li    A2, 1
      lui   AT, hi(chainsplit_arrow_memval3)
      sw    V0, lo(chainsplit_arrow_memval3)(AT)
      li    A0, 3
      li    A1, 188
      jal   0x800E210C
       li    A2, 1
      lui   AT, hi(chainsplit_arrow_memval4)
      sw    V0, lo(chainsplit_arrow_memval4)(AT)
      li    A0, 11
      li    A1, 202
      jal   0x800E210C
       li    A2, 1
      lui   AT, hi(chainsplit_arrow_memval5)
      sw    V0, lo(chainsplit_arrow_memval5)(AT)
      jal   SleepProcess
       li    A0, 3
      li    V0, 1
      lui   AT, hi(CORE_800CDD58)
      sh    V0, lo(CORE_800CDD58)(AT)
      lui   AT, hi(CORE_800D51F8)
      sh    V0, lo(CORE_800D51F8)(AT)
      lw    RA, 0x10(SP)
      jr    RA
       addiu SP, SP, 0x18

    chainsplit_hide_arrows:
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)
      lui   AT, hi(CORE_800CDD58)
      sh    R0, lo(CORE_800CDD58)(AT)
      lui   AT, hi(CORE_800D51F8)
      sh    R0, lo(CORE_800D51F8)(AT)
      lui   A0, hi(chainsplit_arrow_memval1)
      jal   0x800E21F4
       lw    A0, lo(chainsplit_arrow_memval1)(A0)
      lui   A0, hi(chainsplit_arrow_memval2)
      jal   0x800E21F4
       lw    A0, lo(chainsplit_arrow_memval2)(A0)
      lui   A0, hi(chainsplit_arrow_memval3)
      jal   0x800E21F4
       lw    A0, lo(chainsplit_arrow_memval3)(A0)
      lui   A0, hi(chainsplit_arrow_memval4)
      jal   0x800E21F4
       lw    A0, lo(chainsplit_arrow_memval4)(A0)
      lui   A0, hi(chainsplit_arrow_memval5)
      jal   0x800E21F4
       lw    A0, lo(chainsplit_arrow_memval5)(A0)
      lw    RA, 0x10(SP)
      jr    RA
       addiu SP, SP, 0x18

      .align 4
      chainsplit_arrow_memval1:
        .word 0
      chainsplit_arrow_memval2:
        .word 0
      chainsplit_arrow_memval3:
        .word 0
      chainsplit_arrow_memval4:
        .word 0
      chainsplit_arrow_memval5:
        .word 0
  .endstatic
    `}};hr(Xg);const A4={id:"CHAINMERGE3",name:"",activationType:Yt.WALKOVER,executionType:sn.DIRECT,parameters:[{name:"prevSpace",type:i0.Number},{name:"chain",type:i0.Number},{name:"spaceIndex",type:i0.Number}],fakeEvent:!0,supportedGames:[Qe.MP3_USA],parse(n,e){const t={START:"16092DD153432852C141C78807ECCBF0",END:"0855E7309F121915D7A762AB85A7FDB6"},r=[201569894,201597703];let i,a;if(H0([n.buffer,e.offset,8],t.START)&&r.indexOf(n.getUint32(e.offset+16))>=0&&H0([n.buffer,e.offset+24,8],t.END)){if(i=n.getUint16(e.offset+14),i=i>1e3?0:i,n.getUint16(e.offset+20)===0?a=e.chains[i][0]:a=e.chains[i][n.getUint16(e.offset+22)],!isNaN(a)){if(e.board.links.hasOwnProperty(e.curSpace))return!1;Go(e.curSpace,a,e.board)}return!0}return!1},write(n,e,t,r){return`
      ADDIU SP, SP, -0x18
      SW    RA, 0x10(SP)
      ADDIU A0, R0, ${e.parameterValues.prevSpace||0}
      ADDIU A1, R0, ${e.parameterValues.chain||0}
      JAL   chainmerge_3_helper
      ADDIU A2, R0, ${e.parameterValues.spaceIndex||0}
      LW    RA, 0x10(SP)
      JR    RA
      ADDIU SP, SP, 0x18

  .beginstatic
    chainmerge_3_helper:
      addiu SP, SP, -0x20
      sw    RA, 0x1c(SP)
      sw    S2, 0x18(SP)
      sw    S1, 0x14(SP)
      sw    S0, 0x10(SP)
      move  S0, A0
      move  S1, A1
      move  S2, A2
      jal   GetPlayerStruct
        li    A0, -1
      lbu   A0, 0x15(V0)
      sll   A0, A0, 0x18
      sra   A0, A0, 0x18
      lbu   A1, 0x16(V0)
      sll   A1, A1, 0x18
      sra   A1, A1, 0x18
      andi  A0, A0, 0xffff
      jal   GetAbsSpaceIndexFromChainSpaceIndex
        andi  A1, A1, 0xffff
      sll   V0, V0, 0x10
      sra   V0, V0, 0x10
      bne   V0, S0, chainmerge_3_helper_exit
        sll   A1, S1, 0x10
      sll   A2, S2, 0x10
      li    A0, -1
      sra   A1, A1, 0x10
      jal   SetNextChainAndSpace
        sra   A2, A2, 0x10
      chainmerge_3_helper_exit:
      lw    RA, 0x1c(SP)
      lw    S2, 0x18(SP)
      lw    S1, 0x14(SP)
      lw    S0, 0x10(SP)
      jr    RA
        addiu SP, SP, 0x20
  .endstatic
    `}};hr(A4);async function oie(n,e,t,r){const[i,a]=e.mainfsEventFile,o=Mr(yt.BOO,n),s=o.length?o[0]:L0(n);let l=Vc(WC.id,n),c=-1;if(!l.length)l=[L0(n)];else{let U=Number.MAX_VALUE;const O=n.spaces[s];if(O)for(const G of l){const re=n.spaces[G],oe=Ro(re.x,re.y,O.x,O.y);oe<U&&(U=oe,c=G)}}const d=[];for(let U=0;U<n.spaces.length;U++)n.spaces[U].star&&d.push(U);const h=d.length?"show_next_star_spot":"show_next_star_no_op",f=YC(d.length),m=Mr(yt.TOAD,n);let g=[];for(let U=0;U<d.length;U++){let O=n.spaces[d[U]],G=Number.MAX_VALUE,re=d[U];for(let oe=0;oe<m.length;oe++){let se=m[oe],be=n.spaces[se],Be=Ro(O.x,O.y,be.x,be.y);Be<G&&(G=Be,re=se)}g.push(re)}const x=Mr(yt.BANKCOIN,n);for(let U=0;U<2;U++)x.length<2&&x.push(L0(n));const E=Mr(yt.BANK,n),_=Vc(GA.id,n),v=[];_.forEach(U=>{const O=n.spaces[U];let G=Number.MAX_VALUE,re=L0(n);for(let oe=0;oe<E.length;oe++){let se=E[oe],be=n.spaces[se],Be=Ro(O.x,O.y,be.x,be.y);Be<G&&(G=Be,re=se)}v.push(re)}),E.length||E.push(L0(n));for(let U=0;U<2;U++)_.length<2&&_.push(L0(n));for(let U=0;U<2;U++)v.length<2&&v.push(L0(n));const C=Mr(yt.ITEMSHOP,n),D=Vc(l2.id,n),V=[];D.forEach(U=>{const O=n.spaces[U];let G=Number.MAX_VALUE,re=L0(n);for(let oe=0;oe<C.length;oe++){let se=C[oe],be=n.spaces[se],Be=Ro(O.x,O.y,be.x,be.y);Be<G&&(G=Be,re=se)}V.push(re)}),C.length||C.push(L0(n));for(let U=0;U<2;U++)D.length<2&&D.push(L0(n));for(let U=0;U<2;U++)V.length<2&&V.push(L0(n));const H=Vc(z8.id,n),R=[];function j(U){let O=!1;return R.forEach(G=>{G.gateSpaceIndex===U&&(O=!0)}),O}H.forEach(U=>{const O=n.spaces[U];Zp(n,(G,re,oe)=>{if(G.id!==z8.id||oe!==O)return;const se=G.parameterValues.gateSpaceIndex;if(!j(se)){const{gateEntryIndex:be,gateSpaceIndex:Be,gateExitIndex:Te,gatePrevChain:ye,gateNextChain:We}=G.parameterValues;R.push({gateEntryIndex:be,gateSpaceIndex:Be,gateExitIndex:Te,gatePrevChain:ye,gateNextChain:We})}})});for(let U=0;U<2;U++)R.length<2&&R.push({gateEntryIndex:L0(n),gateSpaceIndex:L0(n),gateExitIndex:L0(n),gatePrevChain:[0,0],gateNextChain:[0,0]});const te=[];for(let U=0;U<n.spaces.length;U++)n.spaces[U].type===de.ARROW&&te.push(n.spaces[U].rotation||0);const $=to(Qe.MP3_USA,"AddArrowAngle"),z=f_();let I=[];const q=Math.min(z,te.length);for(let U=0;U<q;U++)I.push(`LUI A0 hi(${At(hM(te[U]))})`),I.push(`JAL ${$}`),I.push("MTC1 A0 F12");const P=PA(n),ee=await oE(n,e.bgDir,P),ce=await lE(n,r);return`
.org 0x801059A0

; Symbols that are used, but unknown
.definelabel CORE_800A0550,0x800A0550
.definelabel CORE_800A12D0,0x800A12D0
.definelabel CORE_800A12D4,0x800A12D4
.definelabel CORE_800A12D8,0x800A12D8
.definelabel CORE_800A1764,0x800A1764
.definelabel CORE_800C9520,0x800C9520
.definelabel CORE_800C9930,0x800C9930
.definelabel CORE_800CB99C,0x800CB99C
.definelabel CORE_800CCF58,0x800CCF58
.definelabel CORE_800CD058,0x800CD058
.definelabel CORE_800CD059,0x800CD059
.definelabel CORE_800CD05D,0x800CD05D
.definelabel CORE_800CD05E,0x800CD05E
.definelabel CORE_800CD065,0x800CD065
.definelabel CORE_800CD06D,0x800CD06D
.definelabel CORE_800CD096,0x800CD096
.definelabel CORE_800CD098,0x800CD098
.definelabel CORE_800CD0A8,0x800CD0A8
.definelabel CORE_800CD0AA,0x800CD0AA
.definelabel CORE_800CD0AC,0x800CD0AC
.definelabel CORE_800CD0AE,0x800CD0AE
.definelabel CORE_800CD0B2,0x800CD0B2
.definelabel CORE_800CDBC8,0x800CDBC8
.definelabel CORE_800CDD58,0x800CDD58
.definelabel CORE_800CE198,0x800CE198
.definelabel CORE_800D037C,0x800D037C
.definelabel CORE_800D03F8,0x800D03F8
.definelabel CORE_800D110C,0x800D110C ; v & 1 == player is CPU, holds other bits?
.definelabel CORE_800D110E,0x800D110E ; u16, holds coins temporarily
.definelabel CORE_800D1123,0x800D1123 ; bool bowser suit. set at 800E3234
.definelabel CORE_800D112C,0x800D112C ; points to player "object"
.definelabel CORE_800D51F8,0x800D51F8
.definelabel CORE_80100F94,0x80100F94
.definelabel CORE_80100F95,0x80100F95
.definelabel CORE_80100F9F,0x80100F9F
.definelabel CORE_80100FA8,0x80100FA8
.definelabel CORE_80100FF4,0x80100FF4
.definelabel CORE_80101040,0x80101040
.definelabel CORE_801011FC,0x801011FC
.definelabel CORE_801014A0,0x801014A0
.definelabel CORE_80101734,0x80101734
.definelabel CORE_8010197C,0x8010197C
.definelabel CORE_80101980,0x80101980
.definelabel CORE_801019C4,0x801019C4
.definelabel CORE_80105702_window_id,0x80105702
.definelabel CORE_8010570C,0x8010570C

; Item constants
.definelabel ITEM_SKELETON_KEY,0x1
.definelabel ITEM_CELLULAR_SHOPPER,0x4
.definelabel ITEM_LUCKY_LAMP,0x9
.definelabel ITEM_BOO_REPELLANT,0xC
.definelabel ITEM_KOOPA_CARD,0xF
.definelabel ITEM_LUCKY_CHARM,0x11

.definelabel MAX_PLAYER_STAR_COUNT,0x63

; CORE_800CD096
; CORE_800CD098 ; persistent storage area?

.definelabel BANK_COUNT,${E.length}
.definelabel SHOP_COUNT,${C.length}
.definelabel GATE_COUNT,${R.length}
.definelabel STAR_COUNT,${d.length}
.definelabel BOO_COUNT,${o.length}

main:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
lui   A0, hi(overlaycalls)
addiu A0, A0, lo(overlaycalls)
lui   A1, hi(CORE_800A1764)
jal   0x800359E0
 lh    A1, lo(CORE_800A1764)(A1)
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18
      NOP
      NOP

func_80105E80:
lui   V0, hi(CORE_800CD05D)
lb    V0, lo(CORE_800CD05D)(V0)
lui   AT, hi(CORE_800CD05E)
addu  AT, AT, V0
lb    V0, lo(CORE_800CD05E)(AT)
sll   V0, V0, 1
lui   AT, hi(D_8011D2C0)
addu  AT, AT, V0
jr    RA
 lh    V0, lo(D_8011D2C0)(AT)

func_80105EA8:
addiu SP, SP, -0x28
sw    RA, 0x24(SP)
sw    S4, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   S4, hi(CORE_800CD058)
addiu S4, S4, lo(CORE_800CD058)
move  S1, R0
lui   S3, hi(shuffle_bias)
addiu S3, S3, lo(shuffle_bias)
lui   S2, hi(shuffle_order)
addiu S2, S2, lo(shuffle_order)

L80105EE0:
; rand1 = GetRandomByte() % STAR_COUNT;
jal	GetRandomByte
nop
li   A0, STAR_COUNT
div  V0, A0
nop
mfhi S0
nop
andi  S0, S0, 0xff
nop

; rand2 = GetRandomByte() % STAR_COUNT;
jal	GetRandomByte
nop
li   A0, STAR_COUNT
div  V0, A0
nop
mfhi A0
nop
andi  A0, A0, 0xff
nop

beq   S0, A0, L80105F50
 sll   V1, A0, 1
addu  A3, V1, S3
lh    V0, 0(A3)
slt   V0, S0, V0
bnezl V0, L80105F54
 addiu S1, S1, 1
sll   A1, S0, 1
addu  A2, A1, S3
lh    V0, 0(A2)
slt   V0, A0, V0
bnezl V0, L80105F54
 addiu S1, S1, 1
addu  A0, A1, S2
lh    A1, 0(A0)
addu  V1, V1, S2
lhu   V0, 0(V1)
sh    V0, 0(A0)
sh    A1, 0(V1)
lh    A1, 0(A2)
lhu   V0, 0(A3)
sh    V0, 0(A2)
sh    A1, 0(A3)
L80105F50:
addiu S1, S1, 1
L80105F54:
slti  V0, S1, 0x3c
bnez  V0, L80105EE0
       NOP
move  S1, R0
lui   A0, hi(shuffle_order)
addiu A0, A0, lo(shuffle_order)
addu  V1, S4, S1
L80105F70:
sll   V0, S1, 1
addu  V0, V0, A0
lbu   V0, 1(V0)
sb    V0, 6(V1)
addiu S1, S1, 1
slti  V0, S1, STAR_COUNT
bnez  V0, L80105F70
 addu  V1, S4, S1
lw    RA, 0x24(SP)
lw    S4, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x28

func_80105FB0:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
lui   V0, hi(CORE_800CD05D)
lbu   V0, lo(CORE_800CD05D)(V0)
addiu V0, V0, 1
lui   AT, hi(CORE_800CD05D)
sb    V0, lo(CORE_800CD05D)(AT)
sll   V0, V0, 0x18
sra   V0, V0, 0x18
slti  V0, V0, STAR_COUNT
bnez  V0, L8010602C
       NOP
lui   S0, hi(CORE_800CD065)
lb    S0, lo(CORE_800CD065)(S0)
lui   AT, hi(CORE_800CD05D)
sb    R0, lo(CORE_800CD05D)(AT)
jal   0x80035FDC
 li    A0, 4
jal   func_80105EA8
       NOP
lui   V1, hi(CORE_800CD05E)
lb    V1, lo(CORE_800CD05E)(V1)
bne   S0, V1, L8010602C
       NOP
lui   V0, hi(CORE_800CD065)
lbu   V0, lo(CORE_800CD065)(V0)
lui   AT, hi(CORE_800CD05E)
sb    V0, lo(CORE_800CD05E)(AT)
lui   AT, hi(CORE_800CD065)
sb    V1, lo(CORE_800CD065)(AT)
L8010602C:
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

draw_star_space_state:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
move  S0, R0
lui   S2, hi(D_8011D2A0)
addiu S2, S2, lo(D_8011D2A0)
sll   V0, S0, 1
L80106068:
addu  V0, V0, S2
lh    A0, 0(V0)
jal   0x80035FDC
 addiu S0, S0, 1
slti  V0, S0, STAR_COUNT
bnez  V0, L80106068
 sll   V0, S0, 1
lb    V0, 5(S1)
addu  V0, S1, V0
lb    V0, 6(V0)
sll   V0, V0, 1
lui   A0, hi(star_space_indices)
addu  A0, A0, V0
lh    A0, lo(star_space_indices)(A0)
jal   SetSpaceType
 li    A1, 14 ; Star space type
lb    V0, 5(S1)
addu  V0, S1, V0
lb    V0, 6(V0)
sll   V0, V0, 1
lui   A0, hi(D_8011D2A0)
addu  A0, A0, V0
jal   0x8003602C ; board feature enabled?
 lh    A0, lo(D_8011D2A0)(A0)
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_801060E0:
lui   A2, hi(CORE_800CD058)
addiu A2, A2, lo(CORE_800CD058)
move  V1, R0
lui   A3, hi(star_space_indices)
addiu A3, A3, lo(star_space_indices)
sll   A0, A0, 0x10
sra   A0, A0, 0x10
lui   T0, hi(D_8011D2A0)
addiu T0, T0, lo(D_8011D2A0)
sll   A1, V1, 1
L80106108:
addu  V0, A1, A3
lh    V0, 0(V0)
bnel  A0, V0, L8010613C
 addiu V1, V1, 1
lb    V0, 5(A2)
addu  V0, A2, V0
lb    V0, 6(V0)
bne   V1, V0, L80106148
 addu  V0, A1, T0
lbu   V0, 1(V0)
sb    V0, 0xe(A2)
j     L8010614C
 li    V0, 1
L8010613C:
slti  V0, V1, STAR_COUNT
bnez  V0, L80106108
 sll   A1, V1, 1
L80106148:
move  V0, R0
L8010614C:
jr    RA
       NOP

func_80106154:
addiu SP, SP, -0x50
sw    RA, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F28, 0x48(SP)
sdc1  F26, 0x40(SP)
sdc1  F24, 0x38(SP)
sdc1  F22, 0x30(SP)
jal   0x8004EE68
 sdc1  F20, 0x28(SP)
lw    S0, 0x8c(V0)
jal   PlaySound
 li    A0, 283
li    A0, 58
jal   0x800D90C8
 move  A1, R0
lui   AT, hi(D_8011FABC)
sw    V0, lo(D_8011FABC)(AT)
move  S1, V0
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
jal   0x800461B4
 lh    A0, 0(V0)
lhu   V0, 0xa(S1)
ori   V0, V0, 4
sh    V0, 0xa(S1)
jal   0x800ECC54
 move  A0, S1
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, S0, 8
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S1)
lui A0, 0xB
ori A0, A0, 4
jal   0x8000CED8
 li    A1, 2729
sll   V0, V0, 0x10
sra   S3, V0, 0x10
move  S0, S3
lui   A1, 0x4000
lui   A2, 0x41a0
lui   A3, 0x3f80
jal   0x8000CD00
 move  A0, S0
lui   A1, 0x41f0
jal   0x8000D018
 move  A0, S0
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 move  A0, S0
move  A0, S0
jal   0x8001C8A8
 li    A1, 1
mtc1  R0, F20
move  S0, R0
li    AT, 0x3F000000 ; 0.500000
mtc1  AT, F24
sll   S2, S3, 0x10
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F22
L8010626C:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S1, 0x24
add.s F20, F20, F24
mul.s F4, F20, F22
mfc1  A1, F4
      NOP
jal   0x8000D018
 sra   A0, S2, 0x10
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 6
bnez  V0, L8010626C
       NOP
move  S0, R0
li    AT, 0x3ECC0000 ; 0.398438
ori   AT, AT, 0xcccd
mtc1  AT, F24
sll   S2, S3, 0x10
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F22
L801062CC:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S1, 0x24
sub.s F20, F20, F24
mul.s F4, F20, F22
mfc1  A1, F4
      NOP
jal   0x8000D018
 sra   A0, S2, 0x10
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 3
bnez  V0, L801062CC
       NOP
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F0
      NOP
mul.s F0, F20, F0
mfc1  A1, F0
      NOP
jal   0x8000D018
 move  A0, S3
jal   SleepProcess
 li    A0, 30
jal   PlaySound
 li    A0, 306
mtc1  R0, F22
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F28
li    AT, 0x3F190000 ; 0.597656
ori   AT, AT, 0x999a
mtc1  AT, F26
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F24
move  S0, S3
func_80106364:
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A2A0
 addiu A0, A0, 0x74
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F0
      NOP
add.s F22, F22, F0
c.le.s F28, F22
      NOP
      NOP
bc1tl L801063BC
 sub.s F22, F22, F28
L801063BC:
c.lt.s F26, F20
      NOP
bc1f  L801063E0
       NOP
li    AT, 0x3D230000 ; 0.039795
ori   AT, AT, 0xd70a
mtc1  AT, F0
      NOP
sub.s F20, F20, F0
L801063E0:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S1, 0x24
lwc1  F2, 0x30(S1)
c.lt.s F24, F2
      NOP
bc1f  L80106424
       NOP
li    AT, 0x3F990000 ; 1.195312
ori   AT, AT, 0x999a
mtc1  AT, F0
      NOP
sub.s F0, F2, F0
swc1  F0, 0x30(S1)
L80106424:
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F0
      NOP
mul.s F0, F20, F0
mfc1  A1, F0
      NOP
jal   0x8000D018
 move  A0, S0
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 move  A0, S0
lwc1  F0, 0x30(S1)
c.le.s F0, F24
      NOP
      NOP
bc1t  L80106480
 li    V0, 1
move  V0, R0
L80106480:
c.le.s F20, F26
      NOP
      NOP
bc1t  L80106498
 li    V1, 1
move  V1, R0
L80106498:
and   V0, V0, V1
beqz  V0, L801064BC
       NOP
mtc1  R0, F0
      NOP
c.eq.s F22, F0
      NOP
bc1t  L801064CC
       NOP
L801064BC:
jal   SleepVProcess
       NOP
j     func_80106364
       NOP
L801064CC:
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
addiu A0, A0, 0x74
jal   0x8008A2A0
 move  A1, R0
jal   0x8000D044
 move  A0, S3
lui   AT, hi(D_8011FAB8)
sw    R0, lo(D_8011FAB8)(AT)
jal   EndProcess
 move  A0, R0
lw    RA, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F28, 0x48(SP)
ldc1  F26, 0x40(SP)
ldc1  F24, 0x38(SP)
ldc1  F22, 0x30(SP)
ldc1  F20, 0x28(SP)
jr    RA
 addiu SP, SP, 0x50

func_80106544:
addiu SP, SP, -0x20
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F20, 0x18(SP)
lw    S0, 0(A0)
li    AT, 0x40800000 ; 4.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x34(S0)
li    AT, 0xBF190000 ; -0.597656
ori   AT, AT, 0x999a
mtc1  AT, F0
      NOP
swc1  F0, 0x38(S0)
jal   SleepProcess
 li    A0, 3
mtc1  R0, F2
lwc1  F0, 0x38(S0)
c.eq.s F0, F2
      NOP
bc1t  L801065BC
       NOP
mtc1  R0, F20
L801065A0:
jal   SleepVProcess
       NOP
lwc1  F0, 0x38(S0)
c.eq.s F0, F20
      NOP
bc1f  L801065A0
       NOP
L801065BC:
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F20, 0x18(SP)
jr    RA
 addiu SP, SP, 0x20

show_next_star_spot:
addiu SP, SP, -0x30
sw    RA, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
lui   S2, hi(CORE_800CD058)
addiu S2, S2, lo(CORE_800CD058)
lui   AT, hi(CORE_800A12D4)
sw    R0, lo(CORE_800A12D4)(AT)
move  A0, R0
jal   0x800E5DD4
 move  A1, R0
move  S1, V0
jal   0x8004A520
 li    A0, 18 ; Here's the Star audio track
lw    A0, 0(S1)
li    A1, 2
lui   A3, hi(tumble_face_tex_grin)
lw    A3, lo(tumble_face_tex_grin)(A3)
jal   0x800EEFEC
 li    A2, 15
jal   0x800FFF44
       NOP
lb    V0, 5(S2)
lui   AT, hi(CORE_800CD05E)
addu  AT, AT, V0
lb    V0, lo(CORE_800CD05E)(AT)
sll   V0, V0, 2
lui   A0, hi(D_8011FA78)
addu  A0, A0, V0
jal   0x800D9B24
 lw    A0, lo(D_8011FA78)(A0)
li    A0, 2
jal   InitFadeIn
 li    A1, 16
L80106660:
jal   GetFadeStatus
       NOP
beqz  V0, L80106680
       NOP
jal   SleepVProcess
       NOP
j     L80106660
       NOP
L80106680:
jal   0x800E6FCC
       NOP
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F12
jal   0x800E9730
       NOP
jal   func_80106544
 move  A0, S1
lb    V0, 5(S2)
bnez  V0, L801066D8
       NOP
jal   0x80035F98
 li    A0, 4
bnez  V0, L801066D8
       NOP
li    V0, ${0}
subu  V0, R0, V0
andi  V0, V0, 0x5e09
j     L801066F0
 ori   A1, V0, 0x5e00
L801066D8:
li    V0, ${0}
subu  V0, R0, V0
andi  V0, V0, 0x5e09 ; I'll show you where the first star your after is. Theres another star here! One is a mirage.
ori   A1, V0, 0x5e01 ; OK! The next star youre after is over this way!
L801066F0:
lh    A0, 8(S1)
li    A2, -1
jal   0x8005B43C
 li    A3, -1
lh    A0, 8(S1)
jal   0x80060C14
 li    A1, 1
jal   PlaySound
 li    A0, 679
lh    A0, 8(S1)
jal   0x800EE2C0
 li    S0, 2        ; TODO: Is this Spiny Desert's index, or just coincidence?
sw    S0, 0x10(SP)
lw    A0, 0(S1)
li    A1, -1
move  A2, R0
jal   0x800D9D84
 li    A3, 6
lh    A0, 8(S1)
jal   0x80060EA8
 li    A1, 1
lw    V0, 0(S1)
lw    V0, 0x3c(V0)
lw    V0, 0x40(V0)
jal   0x8001FDE8
 lh    A0, 0(V0)
li    V0, ${0}
beqz  V0, L80106778
       NOP
jal   GetRandomByte
       NOP
andi  V0, V0, 1
beqz  V0, L8010679C
       NOP
L80106778:
lb    V0, 5(S2)
addu  V0, S2, V0
lb    V0, 6(V0)
sll   V0, V0, 1
lui   A0, hi(D_8011D2C0)
addu  A0, A0, V0
jal   GetSpaceData
 lh    A0, lo(D_8011D2C0)(A0)
move  S3, V0
L8010679C:
jal   0x800E9748
 addiu A0, S3, 8
li    AT, 0x40A00000 ; 5.000000
mtc1  AT, F12
jal   0x800E9AC8
       NOP
jal   SleepProcess
 li    A0, 5
L801067BC:
jal   0x800E9AE0
       NOP
beqz  V0, L801067DC
       NOP
jal   SleepVProcess
       NOP
j     L801067BC
       NOP
L801067DC:
jal   SleepProcess
 li    A0, 5
li    AT, 0x40E00000 ; 7.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
move  S0, V0
sll   V0, S0, 2
lw    A0, 0(S1)
lui   A1, hi(D_8011D2D0)
addu  A1, A1, V0
jal   0x800EF070
 lw    A1, lo(D_8011D2D0)(A1)
lw    A0, 0(S1)
li    A1, -1
jal   0x800D9CE8
 li    A2, 2
li    V0, ${0}
bnez   V0, L80106860
 move  A2, R0
lui   A0, hi(func_80106154)
addiu A0, A0, lo(func_80106154)
li    A1, 18432
jal   InitProcess
 move  A3, R0
lui   AT, hi(D_8011FAB8)
sw    V0, lo(D_8011FAB8)(AT)
sw    S3, 0x8c(V0)
jal   SleepProcess
 li    A0, 30
j     L8010686C
 sll   V0, S0, 2
L80106860:
lui   AT, hi(D_8011FAB8)
sw    R0, lo(D_8011FAB8)(AT)
sll   V0, S0, 2
L8010686C:
lh    A0, 8(S1)
lui   A1, hi(D_8011D2EC)
addu  A1, A1, V0
lw    A1, lo(D_8011D2EC)(A1)
li    A2, -1
jal   0x8005B43C
 li    A3, -1
lh    A0, 8(S1)
jal   0x80060C14
 li    A1, 1
lh    A0, 8(S1)
jal   0x800EE2C0
       NOP
li    V0, 2
sw    V0, 0x10(SP)
lw    A0, 0(S1)
li    A1, -1
move  A2, R0
jal   0x800D9D84
 li    A3, 6
lh    A0, 8(S1)
jal   0x80060EA8
 li    A1, 1
jal   0x8004A994
 li    A0, 90
jal   SleepProcess
 li    A0, 30
li    A0, 2
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 17
li    V0, 1
lui   AT, hi(CORE_800A12D4)
jal   0x80100130
 sw    V0, lo(CORE_800A12D4)(AT)
lui   V0, hi(D_8011FABC)
lw    V0, lo(D_8011FABC)(V0)
lw    V0, 0x3c(V0)
lw    V0, 0x40(V0)
jal   0x80046558
 lh    A0, 0(V0)
lui   A0, hi(D_8011FABC)
jal   0x800D9B54
 lw    A0, lo(D_8011FABC)(A0)
lui   V0, hi(CORE_800CD05D)
lb    V0, lo(CORE_800CD05D)(V0)
lui   AT, hi(CORE_800CD05E)
addu  AT, AT, V0
lb    V0, lo(CORE_800CD05E)(AT)
sll   V0, V0, 2
lui   A0, hi(D_8011FA78)
addu  A0, A0, V0
jal   0x800D9AA4
 lw    A0, lo(D_8011FA78)(A0)
jal   0x800E60D8
 move  A0, S1
jal   0x800F8C74
       NOP
jal   0x8004819C
 li    A0, 1
jal   0x8004849C
       NOP
jal   SleepVProcess
       NOP
lw    RA, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x30

; This custom alternative is the minimum necessary to skip the star showing.
show_next_star_no_op:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)

; Causes fade back in (star shaped fade in)
li    A0, 2
jal   InitFadeIn
 li    A1, 16

; One or more of these may be unnecessary...
jal   0x800F8C74
 nop
jal   0x8004819C
 li    A0, 1
jal   0x8004849C
 nop

jal SleepVProcess
nop

lw    RA, 0x10(SP)
jr    RA
addiu SP, SP, 0x18

; separate process that does "star get" celebration.
func_8010698C:
addiu SP, SP, -0x60
sw    RA, 0x34(SP)
sw    S4, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F28, 0x58(SP)
sdc1  F26, 0x50(SP)
sdc1  F24, 0x48(SP)
sdc1  F22, 0x40(SP)
jal   0x8004EE68
 sdc1  F20, 0x38(SP)
lw    S2, 0x8c(V0)
jal   GetPlayerStruct
 li    A0, -1
move  S4, V0
jal   PlaySound
 li    A0, 283
li    A0, 26
jal   0x800D90C8
 move  A1, R0
move  S1, V0
lhu   V0, 0xa(S1)
ori   V0, V0, 4
sh    V0, 0xa(S1)
jal   0x800ECC54
 move  A0, S1
jal   GetPlayerStruct
 li    A0, -1
lbu   S0, 0xf(V0)
sll   S0, S0, 0x18
sra   S0, S0, 0x18
andi  S0, S0, 0xffff
jal   GetPlayerStruct
 li    A0, -1
lbu   A1, 0x10(V0)
sll   A1, A1, 0x18
sra   A1, A1, 0x18
move  A0, S0
jal   GetAbsSpaceIndexFromChainSpaceIndex
 andi  A1, A1, 0xffff
sll   V0, V0, 0x10
sra   V0, V0, 0x10
li    V1, 146
bne   V0, V1, L80106A9C
       NOP
lwc1  F2, 0x10(S2)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F0
lw    A1, 0xc(S2)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S2)
jal   0x80089A10
 addiu A0, S1, 0xc
lui   V0, hi(CORE_800A0550)
lw    V0, lo(CORE_800A0550)(V0)
lw    A1, 0x10(V0)
lw    A2, 0x14(V0)
lw    A3, 0x18(V0)
jal   0x80089A10
 addiu A0, SP, 0x10
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F0
      NOP
j     L80106B00
 swc1  F0, 0x30(S1)
L80106A9C:
lwc1  F6, 0x10(S2)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F2
lwc1  F4, 0x14(S2)
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F0
lw    A1, 0xc(S2)
add.s F2, F6, F2
mfc1  A2, F2
add.s F0, F4, F0
mfc1  A3, F0
      NOP
jal   0x80089A10
 addiu A0, S1, 0xc
lui   V0, hi(CORE_800A0550)
lw    V0, lo(CORE_800A0550)(V0)
lw    A1, 0x10(V0)
lw    A2, 0x14(V0)
lw    A3, 0x18(V0)
jal   0x80089A10
 addiu A0, SP, 0x10
li    AT, 0x420C0000 ; 35.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S1)
L80106B00:
lui A0, 0xb
ori A0, A0, 4
jal   0x8000CED8
 li    A1, 2729
sll   V0, V0, 0x10
sra   S3, V0, 0x10
move  S0, S3
move  A0, S0
lui   A1, 0x3f80
lui   A2, 0x41a0
jal   0x8000CD00
 move  A3, A1
lui   A1, 0x4170
jal   0x8000D018
 move  A0, S0
move  A0, S0
jal   0x8001C8A8
 li    A1, 1
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 move  A0, S0
mtc1  R0, F20
move  S0, R0
li    AT, 0x3F000000 ; 0.500000
mtc1  AT, F24
sll   S2, S3, 0x10
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F22
L80106B84:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S1, 0x24
add.s F20, F20, F24
mul.s F8, F20, F22
mfc1  A1, F8
      NOP
jal   0x8000D018
 sra   A0, S2, 0x10
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 6
bnez  V0, L80106B84
       NOP
move  S0, R0
li    AT, 0x3ECC0000 ; 0.398438
ori   AT, AT, 0xcccd
mtc1  AT, F24
sll   S2, S3, 0x10
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F22
L80106BE4:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S1, 0x24
sub.s F20, F20, F24
mul.s F8, F20, F22
mfc1  A1, F8
      NOP
jal   0x8000D018
 sra   A0, S2, 0x10
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 3
bnez  V0, L80106BE4
       NOP
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F0
      NOP
mul.s F0, F20, F0
mfc1  A1, F0
      NOP
jal   0x8000D018
 move  A0, S3
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 306
mtc1  R0, F22
lw    V0, 0x24(S4)
lwc1  F2, 0x10(V0)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F0
lw    A1, 0xc(V0)
sub.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(V0)
jal   0x80089A10
 addiu A0, SP, 0x10
addiu A2, S1, 0xc
move  A0, A2
addiu A1, SP, 0x10
jal   0x800ED35C
 li    A3, 40
move  S0, R0
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
li    AT, 0x3D4C0000 ; 0.049805
ori   AT, AT, 0xcccd
mtc1  AT, F26
mtc1  R0, F24
move  S2, S3
L80106CB8:
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A2A0
 addiu A0, A0, 0x74
sub.s F20, F20, F26
c.lt.s F20, F24
      NOP
      NOP
bc1f  L80106D08
 add.s F22, F22, F28
mov.s F20, F24
L80106D08:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S1, 0x24
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F0
      NOP
mul.s F0, F20, F0
mfc1  A1, F0
      NOP
jal   0x8000D018
 move  A0, S2
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 move  A0, S2
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0x28
bnez  V0, L80106CB8
       NOP
jal   0x800D9B54
 move  A0, S1
jal   0x8000D044
 move  A0, S3
lw    A0, 0x24(S4)
jal   0x800ECC0C
 addiu A0, A0, 0x18
li    A0, -1
jal   0x800FF900
 li    A1, 5
lui   V0, hi(D_8011D308)
lw    V0, lo(D_8011D308)(V0)
beqz  V0, L80106DBC
       NOP
jal   0x8004A670
 li    A0, 14
j     L80106DC4
       NOP
L80106DBC:
jal   0x8004A520
 li    A0, 111 ; Fanfare audio track
L80106DC4:
lui   A0, hi(current_player_index)
addiu A0, A0, lo(current_player_index)
lb    V0, 0(A0)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_stars)
addu  V0, V0, V1
lbu   V0, lo(p1_stars)(V0)
addiu V0, V0, 1 ; add 1 star
lui   AT, hi(p1_stars)
addu  AT, AT, V1
sb    V0, lo(p1_stars)(AT)
lb    V1, 0(A0)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V1, V0, 3
lui   V0, hi(p1_stars)
addu  V0, V0, V1
lb    V0, lo(p1_stars)(V0)
slti  V0, V0, 0x64
bnez  V0, L80106E30
 li    A0, -1
li    V0, 99
lui   AT, hi(p1_stars)
addu  AT, AT, V1
sb    V0, lo(p1_stars)(AT)
L80106E30:
li    A1, 6
jal   0x800F2304
 move  A2, R0
lui   A1, hi(current_player_index)
lb    A1, lo(current_player_index)(A1)
jal   0x8004ACE0
 li    A0, 610
lui   V0, hi(D_8011D308)
lw    V0, lo(D_8011D308)(V0)
beqz  V0, L80106EA8
       NOP
jal   SleepProcess
 li    A0, 16
lui   A0, hi(CORE_800CDBC8)
jal   0x80003A70
 lh    A0, lo(CORE_800CDBC8)(A0)
jal   0x8004A918
 li    A0, 111
jal   0x8004A880
 move  A0, R0
jal   SleepProcess
 li    A0, 110
lui   A0, hi(CORE_800CDBC8)
lh    A0, lo(CORE_800CDBC8)(A0)
jal   0x80003B70
 move  A1, R0
jal   0x8004A72C
 li    A0, 15
j     L80106EB0
       NOP
L80106EA8:
jal   SleepProcess
 li    A0, 60
L80106EB0:
jal   EndProcess
 move  A0, R0
lw    RA, 0x34(SP)
lw    S4, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F28, 0x58(SP)
ldc1  F26, 0x50(SP)
ldc1  F24, 0x48(SP)
ldc1  F22, 0x40(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x60

func_80106EEC:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S1, A0
lui   AT, hi(CORE_800D037C)
sh    R0, lo(CORE_800D037C)(AT)
lui   A0, hi(func_8010698C)
addiu A0, A0, lo(func_8010698C)
li    A1, 18432
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
jal   0x8004EE68
 sw    S1, 0x8c(S0)
move  A0, V0
jal   0x8004ED30
 move  A1, S0
jal   0x8004EE18
       NOP
li    V0, 1
lui   AT, hi(CORE_800D037C)
sh    V0, lo(CORE_800D037C)(AT)
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

; View map handling?
__PP64_INTERNAL_VIEW_MAP:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
li    S0, 1
lui   AT, hi(CORE_800CDD58)
sh    S0, lo(CORE_800CDD58)(AT) ; set 1 to indicate map is being viewed?
lui   AT, hi(CORE_800D037C)
jal   0x8004EE68
 sh    R0, lo(CORE_800D037C)(AT)
move  A0, V0
jal   0x80047B80
 li    A1, 128
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   A0, hi(p1_controller)
addu  A0, A0, V0
jal   0x8010067C
 lbu   A0, lo(p1_controller)(A0)
jal   0x8004EE68
       NOP
move  A0, V0
jal   0x80047BAC
 li    A1, 128
lui   AT, hi(CORE_800CDD58)
sh    R0, lo(CORE_800CDD58)(AT)
lui   AT, hi(CORE_800D037C)
sh    S0, lo(CORE_800D037C)(AT)
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

; Could this be executed when returning to the board, from "view map" or other modes?
func_80106FE8:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
lui   AT, hi(CORE_800D037C)
jal   0x8004EE68
 sh    R0, lo(CORE_800D037C)(AT)
move  A0, V0
jal   0x80047B80
 li    A1, 128
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   A0, hi(p1_controller)
addu  A0, A0, V1
jal   0x8010067C
 lbu   A0, lo(p1_controller)(A0)
li    V0, 1
lui   AT, hi(CORE_800D037C)
sh    V0, lo(CORE_800D037C)(AT)
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

; Helper for choosing an item from the item shop message box
func_80107174:
addiu SP, SP, -0x48
sw    RA, 0x40(SP)
sw    S5, 0x3c(SP)
sw    S4, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
move  S5, A0
move  S2, R0
lui   A1, hi(D_8011F8D0)
addiu A1, A1, lo(D_8011F8D0)
lwl   V0, 0(A1)
lwr   V0, 3(A1)
swl   V0, 0x20(SP)
swr   V0, 0x23(SP)
move  S1, R0
lui   S4, hi(current_player_index)
addiu S4, S4, lo(current_player_index)
addiu S3, SP, 0x18
L801071C4:
lb    V0, 0(S4)
bne   S1, V0, L80107278
 sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(CORE_800D110C)
addu  AT, AT, V0
lbu   V0, lo(CORE_800D110C)(AT)
andi  V0, V0, 1
beqz  V0, L8010722C
 sll   S0, S1, 3
jal   func_8011CE94
 addiu S1, S1, 1
move  S2, V0
lb    V1, 0(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, 1024
j     L8010729C
 sh    V1, 0(V0)
L8010722C:
subu  S0, S0, S1
sll   S0, S0, 3
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
addu  V0, SP, V0
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
lbu   A1, 0x20(V0)
jal   0x8005FE54
 addiu S1, S1, 1
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, -1
j     L8010729C
 sh    V1, 0(V0)
L80107278:
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
sh    R0, 0(V0)
addiu S1, S1, 1
L8010729C:
slti  V0, S1, 4
bnez  V0, L801071C4
       NOP
beqz  S2, L80107354
 li    A1, 2
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8005B63C
 li    A2, 2
move  S0, R0
addiu S1, SP, 0x18
L801072C8:
addiu S2, S2, -1
bnez  S2, L80107304
       NOP
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S1
li    V1, -32768
sh    V1, 0(V0)
L80107304:
bnez  S0, L8010732C
 li    V0, 5
jal   0x800EDC40
       NOP
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
j     L8010733C
 andi  V0, V0, 0xff
L8010732C:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
L8010733C:
jal   0x8005F698
 sw    V0, 0x10(SP)
bnez  S2, L801072C8
 addiu S0, S0, 1
j     L8010736C
 move  S1, R0
L80107354:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
jal   0x8005F744
 move  S1, R0
L8010736C:
addu  V0, S5, S1
L80107370:
lbu   V0, 0(V0)
bnezl V0, L80107394
 addiu S1, S1, 1
sll   A1, S1, 0x10
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8006010C
 sra   A1, A1, 0x10
addiu S1, S1, 1
L80107394:
slti  V0, S1, 9
bnez  V0, L80107370
 addu  V0, S5, S1
move  S1, R0
li    S0, -1
sll   A1, S1, 0x10
L801073AC:
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
sra   A1, A1, 0x10
jal   0x8005E1D8
 move  A2, R0
move  S1, V0
beq   S1, S0, L801073E0
 addu  V0, S5, S1
lbu   V0, 0(V0)
beqz  V0, L801073AC
 sll   A1, S1, 0x10
j     L801073E4
 move  V0, S1
L801073E0:
li    V0, -1
L801073E4:
lw    RA, 0x40(SP)
lw    S5, 0x3c(SP)
lw    S4, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
jr    RA
 addiu SP, SP, 0x48

; Helper for choosing an item from the item shop message box
func_80107408:
addiu SP, SP, -0x48
sw    RA, 0x40(SP)
sw    S5, 0x3c(SP)
sw    S4, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
move  S2, R0
lui   A1, hi(D_8011F8D0)
addiu A1, A1, lo(D_8011F8D0)
lwl   V0, 0(A1)
lwr   V0, 3(A1)
swl   V0, 0x20(SP)
swr   V0, 0x23(SP)
move  S1, R0
addiu S3, SP, 0x18
li    S5, 1024
addiu S4, SP, 0x20
L80107454:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
bne   S1, V0, L801074F8
 sll   V0, S1, 3
subu  V0, V0, S1
sll   S0, V0, 3
lui   V0, hi(CORE_800D110C)
addu  V0, V0, S0
lbu   V0, lo(CORE_800D110C)(V0)
andi  V0, V0, 1
beql  V0, R0, L801074AC
 sll   S0, S1, 3
jal   func_8011D1F8
 addiu S1, S1, 1
move  S2, V0
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
sll   V0, V0, 1
addu  V0, V0, S3
j     L8010751C
 sh    S5, 0(V0)
L801074AC:
subu  S0, S0, S1
sll   S0, S0, 3
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
addu  V0, S4, V0
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
lbu   A1, 0(V0)
jal   0x8005FE54
 addiu S1, S1, 1
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, -1
j     L8010751C
 sh    V1, 0(V0)
L801074F8:
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
sh    R0, 0(V0)
addiu S1, S1, 1
L8010751C:
slti  V0, S1, 4
bnez  V0, L80107454
       NOP
beqz  S2, L801075D4
 li    A1, 2
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8005B63C
 li    A2, 2
move  S0, R0
addiu S1, SP, 0x18
L80107548:
addiu S2, S2, -1
bnez  S2, L80107584
       NOP
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S1
li    V1, -32768
sh    V1, 0(V0)
L80107584:
bnez  S0, L801075AC
 li    V0, 5
jal   0x800EDC40
       NOP
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
j     L801075BC
 andi  V0, V0, 0xff
L801075AC:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
L801075BC:
jal   0x8005F698
 sw    V0, 0x10(SP)
bnez  S2, L80107548
 addiu S0, S0, 1
j     L801075E8
       NOP
L801075D4:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
jal   0x8005F744
 lh    A3, 0x1e(SP)
L801075E8:
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
move  A1, R0
jal   0x8005E1D8
 li    A2, 1
lw    RA, 0x40(SP)
lw    S5, 0x3c(SP)
lw    S4, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
jr    RA
 addiu SP, SP, 0x48

func_80107620:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   S1, hi(current_player_index)
lb    S1, lo(current_player_index)(S1)
move  V1, R0
L8010763C:
beq   V1, S1, L80107660
 sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_stars)
addu  AT, AT, V0
lb    V0, lo(p1_stars)(AT)
bnez  V0, L80107670
 li    V0, 4
L80107660:
addiu V1, V1, 1
slti  V0, V1, 4
bnez  V0, L8010763C
 li    V0, 4
L80107670:
beq   V1, V0, L801076E4
 sll   V0, S1, 3
subu  V0, V0, S1
sll   S0, V0, 3
lui   V0, hi(p1_coins)
addu  V0, V0, S0
lh    V0, lo(p1_coins)(V0)
slti  V0, V0, 0x32
bnez  V0, L801076E8
 move  V1, R0
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
lui   V1, hi(p1_coins)
addu  V1, V1, S0
lh    V1, lo(p1_coins)(V1)
addiu V1, V1, 0xa
slt   V0, V0, V1
beqz  V0, L801076E4
 li    V0, 1
lui   AT, hi(D_8011FAD4)
sw    V0, lo(D_8011FAD4)(AT)
lui   V0, hi(p1_stars)
addu  V0, V0, S0
lb    V0, lo(p1_stars)(V0)
slti  V0, V0, MAX_PLAYER_STAR_COUNT
bnez  V0, L8010773C
       NOP
L801076E4:
move  V1, R0
L801076E8:
beq   V1, S1, L80107710
 sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slti  V0, V0, 5
beqz  V0, L80107720
 li    V0, 4
L80107710:
addiu V1, V1, 1
slti  V0, V1, 4
bnez  V0, L801076E8
 li    V0, 4
L80107720:
beq   V1, V0, L80107734
 li    V0, 2
lui   AT, hi(D_8011FAD4)
j     L8010773C
 sw    R0, lo(D_8011FAD4)(AT)
L80107734:
lui   AT, hi(D_8011FAD4)
sw    V0, lo(D_8011FAD4)(AT)
L8010773C:
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_80107750:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
lui   S3, hi(current_player_index)
lb    S3, lo(current_player_index)(S3)
move  S0, R0
addiu V1, SP, 0x10
li    A0, -1
sll   V0, S0, 2
L80107780:
addu  V0, V0, V1
sw    A0, 0(V0)
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L80107780
 sll   V0, S0, 2
move  S0, R0
addiu S1, SP, 0x10
li    S2, -1
L801077A4:
jal   0x800EEA58
 move  A0, S0
move  V1, V0
L801077B0:
sll   V0, V1, 2
addu  V0, V0, S1
lw    V0, 0(V0)
beq   V0, S2, L801077CC
 sll   V0, V1, 2
j     L801077B0
 addiu V1, V1, 1
L801077CC:
addu  V0, V0, S1
sw    S0, 0(V0)
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L801077A4
       NOP
jal   func_80107620
       NOP
lui   V1, hi(D_8011FAD4)
lw    V1, lo(D_8011FAD4)(V1)
li    V0, 1
bne   V1, V0, L8010785C
 addiu A0, SP, 0x10
move  S0, R0
sll   V0, S0, 2
L80107808:
addu  V0, V0, A0
lw    V1, 0(V0)
beq   V1, S3, L80107834
 sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_stars)
addu  AT, AT, V0
lb    V0, lo(p1_stars)(AT)
bnez  V0, L8010784C
       NOP
L80107834:
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L80107808
 sll   V0, S0, 2
j     L801078BC
 li    V0, 4
L8010784C:
lui   AT, hi(D_8011FAD8)
sw    V1, lo(D_8011FAD8)(AT)
j     L801078BC
 li    V0, 4
L8010785C:
lui   V0, hi(D_8011FAD4)
lw    V0, lo(D_8011FAD4)(V0)
bnez  V0, L801078BC
 li    V0, 4
move  S0, R0
addiu A0, SP, 0x10
sll   V0, S0, 2
L80107878:
addu  V0, V0, A0
lw    V1, 0(V0)
beq   V1, S3, L801078A8
 sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slti  V0, V0, 5
beqz  V0, L8010784C
       NOP
L801078A8:
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L80107878
 sll   V0, S0, 2
li    V0, 4
L801078BC:
bne   S0, V0, L801078CC
 li    V0, 2
lui   AT, hi(D_8011FAD4)
sw    V0, lo(D_8011FAD4)(AT)
L801078CC:
lw    RA, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

func_801078E8:
addiu SP, SP, -0x48
sw    RA, 0x44(SP)
sw    S6, 0x40(SP)
sw    S5, 0x3c(SP)
sw    S4, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
move  S5, A0
move  S6, A1
move  S4, A2
move  S2, R0
lui   A1, hi(D_8011F8D0)
addiu A1, A1, lo(D_8011F8D0)
lwl   V0, 0(A1)
lwr   V0, 3(A1)
swl   V0, 0x20(SP)
swr   V0, 0x23(SP)
move  S1, R0
addiu S3, SP, 0x18
L8010793C:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
bne   S1, V0, L80107A18
 sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(CORE_800D110C)
addu  AT, AT, V0
lbu   V0, lo(CORE_800D110C)(AT)
andi  V0, V0, 1
beqz  V0, L801079CC
 sll   S0, S1, 3
bnez  S6, L8010798C
       NOP
jal   func_80107750
       NOP
lui   V0, hi(D_8011FAD4)
lw    V0, lo(D_8011FAD4)(V0)
j     L80107998
 addiu S2, V0, 1
L8010798C:
lui   V0, hi(D_8011FAD8)
lw    V0, lo(D_8011FAD8)(V0)
addiu S2, V0, 1
L80107998:
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, 1024
j     L80107A38
 sh    V1, 0(V0)
L801079CC:
subu  S0, S0, S1
sll   S0, S0, 3
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
addu  V0, SP, V0
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
lbu   A1, 0x20(V0)
jal   0x8005FE54
 addiu S1, S1, 1
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, -1
j     L80107A3C
 sh    V1, 0(V0)
L80107A18:
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
sh    R0, 0(V0)
L80107A38:
addiu S1, S1, 1
L80107A3C:
slti  V0, S1, 4
bnez  V0, L8010793C
       NOP
beqz  S2, L80107AF4
 li    A1, 2
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8005B63C
 li    A2, 2
move  S0, R0
addiu S1, SP, 0x18
L80107A68:
addiu S2, S2, -1
bnez  S2, L80107AA4
       NOP
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S1
li    V1, -32768
sh    V1, 0(V0)
L80107AA4:
bnez  S0, L80107ACC
 li    V0, 5
jal   0x800EDC40
       NOP
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
j     L80107ADC
 andi  V0, V0, 0xff
L80107ACC:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
L80107ADC:
jal   0x8005F698
 sw    V0, 0x10(SP)
bnez  S2, L80107A68
 addiu S0, S0, 1
j     L80107B0C
 move  S1, R0
L80107AF4:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
jal   0x8005F744
 move  S1, R0
L80107B0C:
addu  V0, S5, S1
L80107B10:
lbu   V0, 0(V0)
bnezl V0, L80107B34
 addiu S1, S1, 1
sll   A1, S1, 0x10
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8006010C
 sra   A1, A1, 0x10
addiu S1, S1, 1
L80107B34:
slti  V0, S1, 4
bnez  V0, L80107B10
 addu  V0, S5, S1
move  S1, R0
li    S0, -1
sll   A1, S1, 0x10
L80107B4C:
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
sra   A1, A1, 0x10
jal   0x8005E1D8
 move  A2, S4
bnez  S4, L80107B78
 move  S1, V0
bne   S1, S0, L80107B7C
 addu  V0, S5, S1
j     L80107B8C
 li    V0, -1
L80107B78:
addu  V0, S5, S1
L80107B7C:
lbu   V0, 0(V0)
beqz  V0, L80107B4C
 sll   A1, S1, 0x10
move  V0, S1
L80107B8C:
lw    RA, 0x44(SP)
lw    S6, 0x40(SP)
lw    S5, 0x3c(SP)
lw    S4, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
jr    RA
 addiu SP, SP, 0x48

func_80107BB4:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
move  A1, R0
jal   func_801078E8
 li    A2, 1
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

func_80107BD4:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
li    A1, 1
jal   func_801078E8
 move  A2, R0
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

overlaycall0:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
; Declare which board index this is.
li    V0, ${t}
lui   AT, hi(CORE_800CD059)
sb    V0, lo(CORE_800CD059)(AT)
li    A0, 10
jal   InitObjSys
 move  A1, R0
li    A0, 71
move  A1, R0
jal   0x80048228
 li    A2, 402
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

; does setup that only occurs once per board game
overlaycall1:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
li    A0, 10
jal   InitObjSys
 move  A1, R0
; set players onto the 0 chain
move  A0, R0
move  A1, R0
jal   SetPlayerOntoChain
 move  A2, R0
li    A0, 1
move  A1, R0
jal   SetPlayerOntoChain
 move  A2, R0
li    A0, 2
move  A1, R0
jal   SetPlayerOntoChain
 move  A2, R0
li    A0, 3
move  A1, R0
jal   SetPlayerOntoChain
 move  A2, R0
jal   0x80035FDC
 li    A0, 3
jal   func_80105EA8
       NOP
jal   0x8003602C
 li    A0, 18
lui   V0, hi(bank_coin_total)
addiu V0, V0, lo(bank_coin_total)
sh    R0, 0(V0) ; clear the bank coins
sh    R0, -6(V0)
sh    R0, -8(V0)
sh    R0, -0x1c(V0) ; 800CD098
jal   0x8004819C
 li    A0, 1
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

setup_routine:
addiu SP, SP, -0x38
sw    RA, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F20, 0x30(SP)
li    A0, 160
jal   InitObjSys
 li    A1, 40
li    A0, 1
li    A1, 255
li    A2, 255
jal   0x80019514
 li    A3, 255
li    A0, 2
li    A1, 200
li    A2, 200
jal   0x80019514
 li    A3, 200
JAL   __PP64_INTERNAL_ADDITIONAL_BG_CHOICE
 NOP
move  A0, V0 ; Determined by user-customizable hook
li    A1, ${e.boardDefFile}
li    A2, ${e.pauseBgDir}
jal   0x800F89D0 ; setup board?
 move  A3, R0
lui   A0, hi(D_8011D31C)
jal   0x800EBCFC
 addiu A0, A0, lo(D_8011D31C)
lui   A0, hi(D_8011D320)
jal   0x800EBD54
 addiu A0, A0, lo(D_8011D320)

; begin arrow rotation
${I.join(`
`)}
; end arrow rotation

lui   A1, hi(boo_event)
addiu A1, A1, lo(boo_event)
jal   0x800E2960
 move  A0, R0
lui   A1, hi(func_8010F2FC)
addiu A1, A1, lo(func_8010F2FC)
jal   0x800E2960
 li    A0, 1
lui   A1, hi(func_8010F6C4)
addiu A1, A1, lo(func_8010F6C4)
jal   0x800E2960
 li    A0, 9
lui   A1, hi(func_8010F730)
addiu A1, A1, lo(func_8010F730)
jal   0x800E2960
 li    A0, 2
lui   A1, hi(D_80117C60)
addiu A1, A1, lo(D_80117C60)
jal   0x800E2960
 li    A0, 3
lui   A1, hi(D_8011093C)
addiu A1, A1, lo(D_8011093C)
jal   0x800E2960
 li    A0, 4
lui   A1, hi(D_80110BC8)
addiu A1, A1, lo(D_80110BC8)
jal   0x800E2960
 li    A0, 5
lui   A1, hi(D_8010FC24)
addiu A1, A1, lo(D_8010FC24)
jal   0x800E2960
 li    A0, 6
lui   A1, hi(D_80110194)
addiu A1, A1, lo(D_80110194)
jal   0x800E2960
 li    A0, 7
lui   A1, hi(D_801104E0)
addiu A1, A1, lo(D_801104E0)
jal   0x800E2960
 li    A0, 8
lui   A1, hi(D_80116F5C)
addiu A1, A1, lo(D_80116F5C)
jal   0x800E2960
 li    A0, 10
lui   A1, hi(D_801177DC)
addiu A1, A1, lo(D_801177DC)
jal   0x800E2960
 li    A0, 11
lui   A1, hi(D_80111018)
addiu A1, A1, lo(D_80111018)
jal   0x800E2960
 li    A0, 14
lui   A1, hi(D_801112D8)
addiu A1, A1, lo(D_801112D8)
jal   0x800E2960
 li    A0, 15
lui   A1, hi(D_80111678)
addiu A1, A1, lo(D_80111678)
jal   0x800E2960
 li    A0, 16
lui   A1, hi(D_80112074)
addiu A1, A1, lo(D_80112074)
jal   0x800E2960
 li    A0, 17
lui   A1, hi(D_80112BCC)
addiu A1, A1, lo(D_80112BCC)
jal   0x800E2960
 li    A0, 18
lui   A1, hi(barter_box_item_code)
addiu A1, A1, lo(barter_box_item_code)
jal   0x800E2960
 li    A0, 19
lui   A1, hi(game_guy_lucky_charm)
addiu A1, A1, lo(game_guy_lucky_charm)
jal   0x800E2960
 li    A0, 20
lui   A1, hi(D_80115B80)
addiu A1, A1, lo(D_80115B80)
jal   0x800E2960
 li    A0, 21
lui   A1, hi(D_80116DAC)
addiu A1, A1, lo(D_80116DAC)
jal   0x800E2960
 li    A0, 12
lui   A1, hi(D_801176A4)
addiu A1, A1, lo(D_801176A4)
jal   0x800E2960
 li    A0, 13
lui   A0, hi(D_8011C88C)
addiu A0, A0, lo(D_8011C88C)
jal   0x800DA748
 move  S0, R0
lui   S1, hi(D_8011D2C0)
addiu S1, S1, lo(D_8011D2C0)
sll   V0, S0, 1
L80107F5C:
addu  V0, V0, S1
lh    A1, 0(V0)
jal   0x800EA6E0
 move  A0, S0
addiu S0, S0, 1
slti  V0, S0, STAR_COUNT
bnez  V0, L80107F5C
 sll   V0, S0, 1
jal   0x80035F98
 li    A0, 14
beqz  V0, L80107F9C
       NOP
jal   0x8003602C
 li    A0, 14
jal   func_80105FB0
       NOP
; drawing things
L80107F9C:
.if STAR_COUNT
jal   draw_star_space_state
       NOP
jal   draw_millenium_stars
       NOP
.endif
jal   draw_boo
       NOP
jal   draw_bank_coins
       NOP
jal   draw_gates_outer
       NOP
jal   func_80108B24 ; bank?
       NOP
jal   func_80108BA4
       NOP
jal   func_80116AA0
       NOP
jal   0x800EBDAC
       NOP
lw    RA, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F20, 0x30(SP)
jr    RA
 addiu SP, SP, 0x38

${ee}

; A function that returns the audio index, to let custom events call to get the value.
${ce}

overlaycall2:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)

jal __PP64_INTERNAL_GET_BOARD_AUDIO_INDEX
 nop

; Start playing board audio.
jal   0x8004A520
 move    A0, V0

; On the chance that there are side effects of reordering this code, just call again.
jal __PP64_INTERNAL_GET_BOARD_AUDIO_INDEX
nop

lui   AT, hi(CORE_800CE198)
sh    V0, lo(CORE_800CE198)(AT)
jal   0x800F8D6C
 move  A0, V0

jal   InitCameras
 li    A0, 2
jal   setup_routine
       NOP

JAL hydrate_events
 NOP

; Sets up shared happening space code.
lui   A0, hi(shared_happening_event)
jal   0x800F8D48
addiu A0, A0, lo(shared_happening_event)

jal   0x800FF41C
 move  A0, R0
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

hydrate_events:
ADDIU SP SP 0xFFE8
SW RA, 0x0010(SP)

// Call for the MainFS to read in the ASM blob.
LUI A0 ${i}
JAL ${to(Qe.MP3_USA,"ReadMainFS")}
ADDIU A0 A0 ${a}

// Now, V0 has the location that the MainFSRead put the blob... it isn't
// where we want it, it is in the heap somewhere, so we will move it.

// This is a pretty simple copy loop
// T4 = Copy of V0, Current source RAM location
// T0 = Current dest RAM location
// T1 = Size of buffer remaining to copy
// T2 = Temp word register to do the copy
ADDU T4 V0 R0 // Copy V0 -> T4
LW T0 0x4(T4) // LW T0, 0x4(T4) [RAM dest]
LW T1 0x8(T4) // LW T1, 0x8(T4) [Buffer size]
hydrate_events_loop_start:
LW T2 0(T4)
SW T2 0(T0)
ADDIU T4 T4 4
ADDIU T0 T0 4
ADDIU T1 T1 -4
BGTZ T1 hydrate_events_loop_start
NOP

// Now we can hydrate the table.
// T9 = V0 copy
// T4 = Dest buffer addr + 0x10, where the table really starts
ADDU T9 V0 R0 // Copy V0 -> T9
LW T4 4(T9) // LW T4, 0x4(T9) [RAM dest]
JAL ${to(Qe.MP3_USA,"EventTableHydrate")}
ADDIU A0 T4 16 // ADDIU A0, T4, 16

// Well, we copied the buffer... now we should "free" it with this magic JAL...
// Free our T9 reference, which theoretically could be corrupted, but in practice not.
JAL ${to(Qe.MP3_USA,"FreeMainFS")}
ADDU A0 T9 R0

LW RA 0x10(SP)
JR RA
ADDIU SP SP 0x18

overlaycall3:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
jal   InitCameras
 li    A0, 1
jal   setup_routine
       NOP
jal   0x800FF41C
 li    A0, 1
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

draw_millenium_star_inner:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
sll   A0, A0, 0x10
sra   A0, A0, 0xe
lui   V0, hi(D_8011FA78)
addu  V0, V0, A0
lw    V0, lo(D_8011FA78)(V0)
bnez  V0, L801081D4
 li    A0, 58
jal   0x800D90C8
 move  A1, R0
move  S2, V0
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
jal   0x800461B4
 lh    A0, 0(V0)
lui   V0, hi(D_8011FA70)
lw    V0, lo(D_8011FA70)(V0)
bnez  V0, L8010812C
 sll   S0, S0, 0x10
lui   AT, hi(D_8011FA70)
sw    S2, lo(D_8011FA70)(AT)
L8010812C:
sra   S0, S0, 0x10
sll   S1, S0, 2
lui   AT, hi(D_8011FA78)
addu  AT, AT, S1
sw    S2, lo(D_8011FA78)(AT)
lhu   V0, 0xa(S2)
ori   V0, V0, 2
sh    V0, 0xa(S2)
addiu A0, S2, 0x24
lui   A1, 0x3f19
ori   A1, A1, 0x999a
move  A2, A1
jal   0x80089A10
 move  A3, A1
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S2)
lui   A1, 0x40c0
lui   A2, 0x4000
jal   0x800EDB98
 move  A0, S2
lui   AT, hi(D_8011FA98)
addu  AT, AT, S1
sw    V0, lo(D_8011FA98)(AT)
sll   S0, S0, 1
lui   A0, hi(D_8011D37C)
addu  A0, A0, S0
jal   GetSpaceData
 lh    A0, lo(D_8011D37C)(A0)
addiu A0, S2, 0xc
jal   0x80089A20
 addiu A1, V0, 8
li    A0, 11
lui   A2, hi(D_8011D334)
addu  A2, A2, S1
lh    A2, lo(D_8011D334)(A2)
lui   A3, hi(D_8011D336)
addu  A3, A3, S1
lh    A3, lo(D_8011D336)(A3)
jal   0x800D771C
 move  A1, S2
L801081D4:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_801081EC:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, R0
lui   S2, hi(D_8011FA98)
addiu S2, S2, lo(D_8011FA98)
sll   V0, S0, 2
L80108210:
addu  S1, V0, S2
lw    A0, 0(S1)
beqz  A0, L8010822C
 addiu S0, S0, 1
jal   EndProcess
       NOP
sw    R0, 0(S1)
L8010822C:
slti  V0, S0, STAR_COUNT
bnez  V0, L80108210
 sll   V0, S0, 2
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

draw_millenium_stars:
addiu SP, SP, -0x28
sw    RA, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   AT, hi(D_8011FA70)
sw    R0, lo(D_8011FA70)(AT)
move  S0, R0
lui   S3, hi(D_8011FA78)
addiu S3, S3, lo(D_8011FA78)
lui   S2, hi(D_8011FA98)
addiu S2, S2, lo(D_8011FA98)
lui   S1, hi(D_8011D38C)
addiu S1, S1, lo(D_8011D38C)
sll   V1, S0, 2
L80108290:
addu  V0, V1, S3
sw    R0, 0(V0)
addu  V1, V1, S2
lui   A0, hi(func_801081EC)
addiu A0, A0, lo(func_801081EC)
jal   0x800F8D60
 sw    R0, 0(V1)
sll   V0, S0, 1
addu  V0, V0, S1
jal   0x80035F98
 lh    A0, 0(V0)
bnezl V0, L801082D4
 addiu S0, S0, 1
sll   A0, S0, 0x10
jal   draw_millenium_star_inner
 sra   A0, A0, 0x10
addiu S0, S0, 1
L801082D4:
slti  V0, S0, STAR_COUNT ; or M-star count?
bnez  V0, L80108290
 sll   V1, S0, 2
lw    RA, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x28

draw_boo_inner:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
sll   A0, A0, 0x10
sra   A0, A0, 0xe
lui   V0, hi(D_8011FB0C)
addu  V0, V0, A0
lw    V0, lo(D_8011FB0C)(V0)
bnez  V0, L80108408
       NOP
lui   V0, hi(D_8011FB08)
lw    V0, lo(D_8011FB08)(V0)
bnez  V0, L80108378
       NOP
li    A0, 10
jal   0x800D90C8
 move  A1, R0
move  S1, V0
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
jal   0x8001FA68
 lh    A0, 0(V0)
lw    V0, 0x40(S1)
lw    V0, 0x40(V0)
jal   0x8001FA68
 lh    A0, 0(V0)
lui   AT, hi(D_8011FB08)
j     L80108388
 sw    S1, lo(D_8011FB08)(AT)
L80108378:
lui   A0, hi(D_8011FB08)
jal   0x800D975C
 lw    A0, lo(D_8011FB08)(A0)
move  S1, V0
L80108388:
jal   0x800D9B24
 move  A0, S1
sll   V1, S0, 0x10
sra   V1, V1, 0x10
sll   S0, V1, 2
lui   AT, hi(D_8011FB0C)
addu  AT, AT, S0
sw    S1, lo(D_8011FB0C)(AT)
lhu   V0, 0xa(S1)
ori   V0, V0, 2
sh    V0, 0xa(S1)
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S1)
sll   V1, V1, 1
lui   A0, hi(boo_space_indices)
addu  A0, A0, V1
jal   GetSpaceData
 lh    A0, lo(boo_space_indices)(A0)
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, V0, 8
li    A0, 10
lui   A2, hi(D_8011D354)
addu  A2, A2, S0
lh    A2, lo(D_8011D354)(A2)
lui   A3, hi(D_8011D356)
addu  A3, A3, S0
lh    A3, lo(D_8011D356)(A3)
jal   0x800D771C
 move  A1, S1
L80108408:
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

draw_boo:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   AT, hi(D_8011FB08)
sw    R0, lo(D_8011FB08)(AT)
move  S0, R0
lui   S1, hi(D_8011FB0C)
addiu S1, S1, lo(D_8011FB0C)
sll   V0, S0, 2
L80108444:
addu  V0, V0, S1
sw    R0, 0(V0)
sll   A0, S0, 0x10
jal   draw_boo_inner
 sra   A0, A0, 0x10
addiu S0, S0, 1
blez  S0, L80108444 ; TODO: Consider BOO_COUNT here
 sll   V0, S0, 2
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_80108478:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
move  S3, R0
lui S5, 0x6666
ori S5, S5, 0x6667
lui   S4, hi(D_8011FB18)
addiu S4, S4, lo(D_8011FB18)
L801084AC:
lui   V0, hi(bank_coin_total)
lh    V0, lo(bank_coin_total)(V0)
addiu V0, V0, 9
mult  V0, S5
mfhi  A1
sra   V1, A1, 2
sra   V0, V0, 0x1f
subu  S1, V1, V0
slti  V0, S1, 6
beql  V0, R0, L801084D8
 li    S1, 5
L801084D8:
blez  S1, L8010850C
 move  S0, R0
sll   V0, S3, 2
addu  S2, V0, S3
addu  V0, S2, S0
L801084EC:
sll   V0, V0, 2
addu  V0, V0, S4
lw    A0, 0(V0)
jal   0x800D9AA4
 addiu S0, S0, 1
slt   V0, S0, S1
bnez  V0, L801084EC
 addu  V0, S2, S0
L8010850C:
slti  V0, S0, 5
beqz  V0, L80108540
 sll   V0, S3, 2
addu  S1, V0, S3
addu  V0, S1, S0
L80108520:
sll   V0, V0, 2
addu  V0, V0, S4
lw    A0, 0(V0)
jal   0x800D9B24
 addiu S0, S0, 1
slti  V0, S0, 5
bnez  V0, L80108520
 addu  V0, S1, S0
L80108540:
addiu S3, S3, 1
slti  V0, S3, 2
bnez  V0, L801084AC
       NOP
lw    RA, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x38

draw_bank_coins_inner:
addiu SP, SP, -0x28
sw    RA, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
sll   A0, A0, 0x10
sra   A0, A0, 0xe
lui   V0, hi(D_8011FB18)
addu  V0, V0, A0
lw    V0, lo(D_8011FB18)(V0)
bnez  V0, L801086C4
       NOP
lui   V0, hi(D_8011FB10)
lw    V0, lo(D_8011FB10)(V0)
bnez  V0, L801085E4
       NOP
li    A0, 30
jal   0x800D90C8
 move  A1, R0
move  S3, V0
jal   0x800D9714
 move  A0, S3
lui   AT, hi(D_8011FB10)
sw    S3, lo(D_8011FB10)(AT)
j     L801085F8
 sll   V1, S0, 0x10
L801085E4:
lui   A0, hi(D_8011FB10)
jal   0x800D975C
 lw    A0, lo(D_8011FB10)(A0)
move  S3, V0
sll   V1, S0, 0x10
L801085F8:
sra   S1, V1, 0x10
sll   V0, S1, 2
lui   AT, hi(D_8011FB18)
addu  AT, AT, V0
sw    S3, lo(D_8011FB18)(AT)
lhu   V0, 0xa(S3)
ori   V0, V0, 2
sh    V0, 0xa(S3)
lui V0, 0x6666
ori V0, V0, 0x6667
mult  S1, V0
mfhi  A3
sra   S0, A3, 1
sra   V1, V1, 0x1f
subu  S0, S0, V1
sll   V0, S0, 0x10
sra   V0, V0, 0xf
lui   A0, hi(bank_coin_space_indices)
addu  A0, A0, V0
lh    A0, lo(bank_coin_space_indices)(A0)
jal   GetSpaceData
 addiu S2, S3, 0xc
move  A0, S2
jal   0x80089A20
 addiu A1, V0, 8
sll   V0, S0, 2
addu  V0, V0, S0
subu  S1, S1, V0
sll   S1, S1, 0x10
sra   S1, S1, 0x10
sll   S0, S1, 1
addu  S0, S0, S1
sll   S0, S0, 2
lui   A1, hi(D_8011D3A4)
addiu A1, A1, lo(D_8011D3A4)
move  A0, S2
addu  A1, S0, A1
jal   0x80089A70
 move  A2, S2
lw    V0, 0x3c(S3)
lui   AT, hi(D_8011D3E0)
addu  AT, AT, S0
lwc1  F0, lo(D_8011D3E0)(AT)
swc1  F0, 0x24(V0)
lw    V0, 0x3c(S3)
lui   AT, hi(D_8011D3E8)
addu  AT, AT, S0
lwc1  F0, lo(D_8011D3E8)(AT)
swc1  F0, 0x2c(V0)
jal   0x800D9B24
 move  A0, S3
L801086C4:
lw    RA, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x28

draw_bank_coins:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   AT, hi(D_8011FB10)
sw    R0, lo(D_8011FB10)(AT)
move  S0, R0
lui   S1, hi(D_8011FB18)
addiu S1, S1, lo(D_8011FB18)
sll   V0, S0, 2
L80108708:
addu  V0, V0, S1
sw    R0, 0(V0)
sll   A0, S0, 0x10
jal   draw_bank_coins_inner
 sra   A0, A0, 0x10
addiu S0, S0, 1
slti  V0, S0, 0xa
bnez  V0, L80108708
 sll   V0, S0, 2
jal   func_80108478
       NOP
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

;draw gates inner
func_80108748:
addiu SP, SP, -0x28
sw    RA, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
move  S0, A0
sll   A0, A0, 0x10
sra   A0, A0, 0xe
lui   V0, hi(D_8011FB44)
addu  V0, V0, A0
lw    V0, lo(D_8011FB44)(V0)
bnez  V0, L8010889C
       NOP
lui   V0, hi(D_8011FB40)
lw    V0, lo(D_8011FB40)(V0)
bnez  V0, L801087D8
       NOP
lui   V0, hi(CORE_800CD059)
lb    V0, lo(CORE_800CD059)(V0) ; getting board index?
sll   V1, V0, 1
sll   V0, V0, 2
;li    V0, 0 ; TODO: Hard code board index to 0, so we always use the same gate animation/sound/file.
lui   A0, hi(D_8011D421)
addu  A0, A0, V1
lbu   A0, lo(D_8011D421)(A0)
lui   A1, hi(D_8011D45C)
addu  A1, A1, V0
lw    A1, lo(D_8011D45C)(A1)
jal   0x800D90C8
 sll   S0, S0, 0x10
move  S2, V0
jal   0x800D9714
 move  A0, S2
lui   AT, hi(D_8011FB40)
sw    S2, lo(D_8011FB40)(AT)
j     L801087F0
 sra   S0, S0, 0x10
L801087D8:
lui   A0, hi(D_8011FB40)
lw    A0, lo(D_8011FB40)(A0)
jal   0x800D975C
 sll   S0, S0, 0x10
move  S2, V0
sra   S0, S0, 0x10
L801087F0:
sll   S1, S0, 2
lui   AT, hi(D_8011FB44)
addu  AT, AT, S1
sw    S2, lo(D_8011FB44)(AT)
lhu   V0, 0xa(S2)
ori   V0, V0, 2
sh    V0, 0xa(S2)
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 2
jal   0x8001C814
 li    A2, 1
sll   S0, S0, 1
lui   A0, hi(gate_spaces)
addu  A0, A0, S0
jal   GetSpaceData
 lh    A0, lo(gate_spaces)(A0)
addiu A0, S2, 0xc
jal   0x80089A20
 addiu A1, V0, 8
lui   A0, hi(gate_entrance_spaces)
addu  A0, A0, S1
jal   GetSpaceData
 lh    A0, lo(gate_entrance_spaces)(A0)
lui   A0, hi(gate_exit_spaces)
addu  A0, A0, S1
lh    A0, lo(gate_exit_spaces)(A0)
jal   GetSpaceData
 move  S0, V0
addiu A0, V0, 8
addiu A1, S0, 8
jal   GetAngleBetweenSpaces
 addiu A2, S2, 0x18
li    A0, 12
lui   A2, hi(D_8011D36C)
addu  A2, A2, S1
lh    A2, lo(D_8011D36C)(A2)
lui   A3, hi(D_8011D36E)
addu  A3, A3, S1
lh    A3, lo(D_8011D36E)(A3)
jal   0x800D771C
 move  A1, S2
L8010889C:
lw    RA, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x28

draw_gates_outer:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   AT, hi(D_8011FB40)
sw    R0, lo(D_8011FB40)(AT)
move  S0, R0
lui   S1, hi(D_8011FB44)
addiu S1, S1, lo(D_8011FB44)
sll   V0, S0, 2
__draw_gates_outer_loop:
addu  V0, V0, S1
sw    R0, 0(V0)
sll   A0, S0, 0x10
jal   func_80108748
 sra   A0, A0, 0x10
addiu S0, S0, 1
slti  V0, S0, GATE_COUNT
bnez  V0, __draw_gates_outer_loop
 sll   V0, S0, 2
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

D_80108914:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
lui   S0, hi(CORE_800CD059)
addiu S0, S0, lo(CORE_800CD059)
lb    V0, 0(S0)
sll   V0, V0, 2
lui   A0, hi(D_8011D4BC)
addu  A0, A0, V0
jal   SleepProcess
 lw    A0, lo(D_8011D4BC)(A0)
lb    V0, 0(S0)
sll   V0, V0, 2
lui   A0, hi(D_8011D49A)
addu  A0, A0, V0
jal   PlaySound
 lh    A0, lo(D_8011D49A)(A0)
jal   EndProcess
 move  A0, R0
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

func_gate_80108970:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
lui   V0, hi(D_8011FB44)
addiu V0, V0, lo(D_8011FB44)
sll   S0, A0, 2
addu  S0, S0, V0
addiu A1, A1, -1
sll   A1, A1, 0x10
lw    A0, 0(S0)
sra   A1, A1, 0x10
jal   0x800D9CE8
 move  A2, R0
lw    V0, 0(S0)
lw    V0, 0x3c(V0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 5
jal   0x8001C814
 move  A2, R0
lui   V0, hi(CORE_800CD059)
lb    V0, lo(CORE_800CD059)(V0)
lui   V1, hi(D_8011D474)
addiu V1, V1, lo(D_8011D474)
sll   V0, V0, 2
addu  A0, V0, V1
lw    V1, 0(A0)
li    V0, -1
beq   V1, V0, L801089F0
       NOP
jal   PlaySound
 lh    A0, 2(A0)
L801089F0:
lui   V0, hi(CORE_800CD059)
lb    V0, lo(CORE_800CD059)(V0)
sll   V0, V0, 2
lui   V1, hi(D_8011D498)
addu  V1, V1, V0
lw    V1, lo(D_8011D498)(V1)
li    V0, -1
beq   V1, V0, L80108A28
 li    A1, 4096
lui   A0, hi(D_80108914)
addiu A0, A0, lo(D_80108914)
move  A2, R0
jal   InitProcess
 move  A3, R0
L80108A28:
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

gate_spaces_event_process:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
jal   0x8004EE68
 sw    S0, 0x10(SP)
lw    S0, 0x8c(V0)
lui   V1, hi(CORE_800CD06D)
lb    V1, lo(CORE_800CD06D)(V1)
beqz  V1, L80108A6C
 li    V0, 1
beq   V1, V0, L80108A70
 li    A0, 10
j     L80108A70
 li    A0, 15
L80108A6C:
li    A0, 5
L80108A70:
jal   SleepProcess
       NOP
sll   V0, S0, 2
lui   AT, hi(D_8011FB44)
addu  AT, AT, V0
lw    V0, lo(D_8011FB44)(AT)
lw    V0, 0x3c(V0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 1
jal   0x8001C814
 li    A2, 4
lui   V0, hi(CORE_800CD059)
lb    V0, lo(CORE_800CD059)(V0)
lui   V1, hi(D_8011D4E0)
addiu V1, V1, lo(D_8011D4E0)
sll   V0, V0, 2
addu  A0, V0, V1
lw    V1, 0(A0)
li    V0, -1
beq   V1, V0, L80108AD0
       NOP
jal   PlaySound
 lh    A0, 2(A0)
L80108AD0:
jal   EndProcess
 move  A0, R0
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

__PP64_INTERNAL_GATE_CLOSE_EVENT:
gate_spaces_event:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
lui   A0, hi(gate_spaces_event_process)
addiu A0, A0, lo(gate_spaces_event_process)
li    A1, 4096
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S0, 0x8c(V0)
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

; draw bank outer?
func_80108B24:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
lui   AT, hi(D_8011FB40)
sw    R0, lo(D_8011FB40)(AT)
move  S0, R0
lui   S1, hi(bank_model_space_indices)
addiu S1, S1, lo(bank_model_space_indices)
sll   V0, S0, 1
L80108B4C:
addu  V0, V0, S1
jal   GetSpaceData
 lh    A0, 0(V0)
sll   V1, S0, 2
li    A0, 8
lui   A2, hi(D_8011D35C)
addu  A2, A2, V1
lh    A2, lo(D_8011D35C)(A2)
lui   A3, hi(D_8011D35E)
addu  A3, A3, V1
lh    A3, lo(D_8011D35E)(A3)
jal   0x800D7790
 addiu A1, V0, 8
addiu S0, S0, 1
slti  V0, S0, BANK_COUNT
bnez  V0, L80108B4C
 sll   V0, S0, 1
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_80108BA4:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, R0
lui   S1, hi(item_shop_model_space_indices)
addiu S1, S1, lo(item_shop_model_space_indices)
sll   V0, S0, 1
L80108BC4:
addu  V0, V0, S1
jal   GetSpaceData
 lh    A0, 0(V0)
sll   V1, S0, 2
li    A0, 9
lui   A2, hi(D_8011D364)
addu  A2, A2, V1
lh    A2, lo(D_8011D364)(A2)
lui   A3, hi(D_8011D366)
addu  A3, A3, V1
lh    A3, lo(D_8011D366)(A3)
jal   0x800D7790
 addiu A1, V0, 8
addiu S0, S0, 1
slti  V0, S0, SHOP_COUNT
bnez  V0, L80108BC4
 sll   V0, S0, 1
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

__PP64_INTERNAL_GATE_EVENT:
gate_event:
addiu SP, SP, -0x28
sw    RA, 0x24(SP)
sw    S4, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
li    S4, 1
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S2, V0
lbu   A0, 0xf(S2)
sll   A0, A0, 0x18
sra   A0, A0, 0x18
lbu   A1, 0x10(S2)
sll   A1, A1, 0x18
sra   A1, A1, 0x18
andi  A0, A0, 0xffff
jal   GetAbsSpaceIndexFromChainSpaceIndex
 andi  A1, A1, 0xffff
sll   V0, V0, 0x10
sra   S1, V0, 0x10
xori  V1, S1, ${R[0].gateEntryIndex}
sltiu V1, V1, 1
xori  V0, S1, ${R[1].gateEntryIndex}
sltiu V0, V0, 1
or    V1, V1, V0
beqz  V1, L80109B64
 xori  V1, S1, ${R[0].gateExitIndex}
lbu   V0, 0x17(S2)
andi  V0, V0, 1
bnez  V0, L80109E5C
       NOP
L80109B64:
sltiu V1, V1, 1
xori  V0, S1, ${R[1].gateExitIndex}
sltiu V0, V0, 1
or    V1, V1, V0
beqz  V1, L80109B8C
 li    A0, -1
lbu   V0, 0x17(S2) ; testing player flag bit
andi  V0, V0, 1
beqz  V0, L80109E5C
       NOP
L80109B8C:
li    A1, -1
jal   0x800F2304
 li    A2, 2
lb    A0, 0xf(S3)
jal   PlayerHasItem
 li    A1, ITEM_SKELETON_KEY
li    V1, -1
beq   V0, V1, L80109DC8
 li    A0, -1
lb    A0, 0xf(S3)
jal   0x800DBEC0
       NOP
li    V0, ${R[0].gateExitIndex}
beq   S1, V0, L80109BD0
 li    V0, ${R[0].gateEntryIndex}
bne   S1, V0, L80109BE0
 li    A0, -1
L80109BD0:
li    A0, -1
li    A1, 8
j     L80109BE8
 li    A2, ${R[0].gateSpaceIndex}
L80109BE0:
li    A1, 8
li    A2, ${R[1].gateSpaceIndex}
L80109BE8:
jal   0x800ED20C
       NOP
jal   0x8004EE68
       NOP
li    AT, 0x3FCC0000
ori   AT, AT, 0xcccd
mtc1  AT, F12
      NOP
jal   0x800E8EDC
 move  S0, V0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
       NOP
li    A0, -1
jal   0x800FF900
 li    A1, 1
li    A0, 56
L80109C34:
jal   0x800EC628
 li    A1, 0x4103 ; "Hi I'm the Skeleton Key! Shall I use my skills..."
li    A0, 2
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 move  A1, R0
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
li    V0, 1
beq   S0, V0, L80109D5C
 slti  V0, S0, 2
beql  V0, R0, L80109C7C
 li    V0, 2
beqz  S0, L80109C8C
 li    A0, 56
j     L80109D80
       NOP
L80109C7C:
beq   S0, V0, L80109D70
       NOP
j     L80109D80
       NOP
L80109C8C:
jal   0x800EC590
 li    A1, 16644
lb    A0, 0xf(S3)
jal   PlayerHasItem
 li    A1, ITEM_SKELETON_KEY
lb    A0, 0xf(S3)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1) ; p1_item1, reaching into items...
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1) ; clearing item?
lui   A0, hi(current_player_index)
jal   FixUpPlayerItemSlots
 lb    A0, lo(current_player_index)(A0)
jal   0x800F63F0
 li    A0, -1
li    V0, ${R[1].gateEntryIndex}
beq   S1, V0, L80109D18
 ADDIU V0 R0 ${R[0].gateEntryIndex} ; slti  V0, S1, gateEntryIndex
beq   S1, V0, L80109D00 ; was beqz
 li    V0, ${R[0].gateExitIndex}
beq   S1, V0, L80109D24
 move  A0, R0
j     L80109D24
 li    A0, 1
L80109D00:
li    V0, ${R[0].gateEntryIndex}
bnel  S1, V0, L80109D24
 li    A0, 1
move  A0, R0
j     L80109D28
 move  A1, R0
L80109D18:
li    A0, 1
j     L80109D28
 move  A1, R0
L80109D24:
li    A1, 1
L80109D28:
jal   func_gate_80108970
 move  S4, R0
li    A0, -1
li    A1, 2
jal   0x800FFA4C
 li    A2, 5
move  S0, V0
jal   SleepProcess
 li    A0, 20
jal   0x800FFAEC
 move  A0, S0
j     L80109D80
       NOP
L80109D5C:
li    A0, 56
jal   0x800EC590
 li    A1, 16645
j     L80109D80
       NOP
L80109D70:
jal   __PP64_INTERNAL_VIEW_MAP
       NOP
j     L80109C34
 li    A0, 56
L80109D80:
lb    A0, 0xf(S3)
jal   0x800DB884
       NOP
jal   0x8004EE68
       NOP
li    AT, 0x3FA60000 ; 1.296875
ori   AT, AT, 0x6666
mtc1  AT, F12
      NOP
jal   0x800E8EDC
 move  S0, V0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
       NOP
j     L80109DD0
       NOP
L80109DC8:
jal   0x800EC590
 li    A1, 0x4106 ; "You don't have a Skeleton Key, ..."
L80109DD0:
beqz  S4, L80109E5C
 li    V0, ${R[1].gateEntryIndex}
beq   S1, V0, L80109E28
 li    A0, -1
ADDIU V0 R0 ${R[0].gateEntryIndex} ; slti  V0, S1, 0x7a
beq   S1, V0, L80109DFC
 li    V0, ${R[0].gateExitIndex}
beq   S1, V0, L80109E20
 li    A1, ${R[0].gateNextChain[0]}
j     L80109E44
 li    A1, ${R[1].gateNextChain[0]}
L80109DFC:
li    V0, ${R[0].gateEntryIndex}
bne   S1, V0, L80109E40
 li    A0, -1
li    A1, ${R[0].gatePrevChain[0]}
jal   SetNextChainAndSpace
 li  A2, ${R[0].gatePrevChain[1]}
lbu   V0, 0x17(S2)
j     L80109E58
 ori   V0, V0, 1
L80109E20:
j     L80109E48
 li    A2, ${R[0].gateNextChain[1]}
L80109E28:
li    A1, ${R[1].gatePrevChain[0]}
jal   SetNextChainAndSpace
 li    A2, ${R[1].gatePrevChain[1]}
lbu   V0, 0x17(S2)
j     L80109E58
 ori   V0, V0, 1
L80109E40:
li    A1, ${R[1].gateNextChain[0]}
L80109E44:
li    A2, ${R[1].gateNextChain[1]}
L80109E48:
jal   SetNextChainAndSpace
       NOP
lbu   V0, 0x17(S2)
andi  V0, V0, 0xfe
L80109E58:
sb    V0, 0x17(S2)
L80109E5C:
jal   EndProcess
 move  A0, R0
lw    RA, 0x24(SP)
lw    S4, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x28

; Helper used when prompted between textbox options.
; If A0 is a pointer to AI data, the AI logic is ran to pick for CPUs.
; If A0 is 0 or 1, the 0th or 1st option is chosen by CPUs.
; If A0 is 2, then the value of A1 is the CPUs option index choice.
__PP64_INTERNAL_BASIC_MESSAGE_CHOICE:
addiu SP, SP, -0x48
sw    RA, 0x40(SP)
sw    S5, 0x3c(SP)
sw    S4, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
move  S3, A0
move  S5, A1
move  S2, R0
lui   A1, hi(D_8011F8D0)
addiu A1, A1, lo(D_8011F8D0)
lwl   V0, 0(A1)
lwr   V0, 3(A1)
swl   V0, 0x20(SP)
swr   V0, 0x23(SP)
move  S1, R0
addiu S4, SP, 0x18
; begin looping over each player
L8010A180:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
bne   S1, V0, L8010A290 ; if S1 != current player index
 sll   V0, S1, 3
; procesing when S1 == current player
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(CORE_800D110C)
addu  AT, AT, V0
lbu   V0, lo(CORE_800D110C)(AT)
andi  V0, V0, 1
beqz  V0, L8010A240 ; if (value at 800D110C & 0x01) == 0
 li    V0, 1
beq   S3, V0, L8010A1F0 ; Is A0 == 1?
 slti  V0, S3, 2
beql  V0, R0, L8010A1D0 ; Is A0 >= 2?
 li    V0, 2
beqz  S3, L8010A1E0 ; Is A0 == 0?
       NOP
j     L8010A200
       NOP
L8010A1D0:
beq   S3, V0, L8010A214 ; Is A0 == 2?
 addiu S2, S5, 1
j     L8010A200
       NOP
L8010A1E0:
jal   0x800EF0D8
 move  A0, R0
j     L8010A214
 addiu S2, V0, 1
L8010A1F0:
jal   0x800EF0D8
 li    A0, 1
j     L8010A214
 addiu S2, V0, 1
L8010A200:
jal   0x800DA190
 move  A0, S3
sll   V0, V0, 0x10
sra   V0, V0, 0x10
addiu S2, V0, 1
L8010A214:
sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S4
li    V1, 1024
j     L8010A2B0
 sh    V1, 0(V0)
L8010A240:
sll   S0, S1, 3
subu  S0, S0, S1
sll   S0, S0, 3
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
addu  V0, SP, V0
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
lbu   A1, 0x20(V0)
jal   0x8005FE54
 addiu S1, S1, 1
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
sll   V0, V0, 1
addu  V0, V0, S4
li    V1, -1
j     L8010A2B4
 sh    V1, 0(V0)
L8010A290:
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S4
sh    R0, 0(V0) ; mutate a player's controller index?
L8010A2B0:
addiu S1, S1, 1
L8010A2B4:
slti  V0, S1, 4
bnez  V0, L8010A180
       NOP
beqz  S2, L8010A36C
 li    A1, 2
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8005B63C
 li    A2, 2
move  S0, R0
addiu S1, SP, 0x18
L8010A2E0:
addiu S2, S2, -1
bnez  S2, L8010A31C
       NOP
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S1
li    V1, -32768
sh    V1, 0(V0)
L8010A31C:
bnez  S0, L8010A344
 li    V0, 5
jal   0x800EDC40
       NOP
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
j     L8010A354
 andi  V0, V0, 0xff
L8010A344:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
L8010A354:
jal   0x8005F698
 sw    V0, 0x10(SP)
bnez  S2, L8010A2E0
 addiu S0, S0, 1
j     L8010A380
       NOP
L8010A36C:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
jal   0x8005F744
 lh    A3, 0x1e(SP)
L8010A380:
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
move  A1, R0
jal   0x8005E1D8
 li    A2, 1
lw    RA, 0x40(SP)
lw    S5, 0x3c(SP)
lw    S4, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
jr    RA
 addiu SP, SP, 0x48

func_8010A3B8:
addiu SP, SP, -0x30
sw    RA, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
move  S0, A0
move  S2, A1
move  S1, A2
move  S3, A3
li    A0, 1
addiu A1, SP, 0x10
jal   0x80060394
 move  A2, S2
sll   S0, S0, 0x10
sll   S1, S1, 0x10
sra   A0, S0, 0x10
addiu A1, SP, 0x10
jal   0x800EBFE8
 sra   A2, S1, 0x10
move  S0, V0
lui   AT, hi(CORE_80105702_window_id)
sh    S0, lo(CORE_80105702_window_id)(AT)
sll   S0, S0, 0x10
sra   S0, S0, 0x10
move  A0, S0
move  A1, S2
li    A2, -1
jal   0x8005B43C
 li    A3, -1
jal   0x80061388
 move  A0, S0
move  A0, S0
jal   0x800EBF98
 move  A1, S3
move  A0, S0
jal   0x80061A5C
 move  A1, R0
jal   0x8005F364
 move  A0, S0
lw    RA, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x30

func_8010A474:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
L8010A47C:
jal   0x800E4A7C
       NOP
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
jal   0x800F69F8
 li    A2, 32768
jal   SleepVProcess
       NOP
j     L8010A47C
       NOP
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

__PP64_INTERNAL_STAR_SPACE_EVENT:
star_space_event:
addiu SP, SP, -0x30
sw    RA, 0x28(SP)
sw    S1, 0x24(SP)
jal   GetCurrentSpaceIndex
 sw    S0, 0x20(SP)
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
sll   V0, V0, 0x10
jal   func_801060E0
 sra   A0, V0, 0x10
sll   V0, V0, 0x10
sra   V0, V0, 0x10
li    V1, 1
bne   V0, V1, L8010A844
       NOP
lui   A0, hi(current_player_index)
jal   0x800DBEC0
 lb    A0, lo(current_player_index)(A0)
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
jal   func_80105E80
       NOP
sll   V0, V0, 0x10
li    A0, -1
li    A1, 8
jal   0x800ED20C
 sra   A2, V0, 0x10
jal   0x8004EE68
       NOP
li    AT, 0x3FCC0000 ; 1.593750
ori   AT, AT, 0xcccd
mtc1  AT, F12
      NOP
jal   0x800E8EDC
 move  S0, V0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
       NOP
jal   PlaySound
 li    A0, 345
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V1, V0, 3
lui   V0, hi(CORE_800D1123)
addu  V0, V0, V1
lb    V0, lo(CORE_800D1123)(V0)
beqz  V0, L8010A5CC
 li    A0, 22
lui   A2, hi(p1_char)
addu  A2, A2, V1
lbu   A2, lo(p1_char)(A2)
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A1, 0x4805
addiu A2, A2, 0x1c00
jal   0x800EC8EC ; ShowMessage: "WAHH! Buh-Bowser! Oh, pardon me. Please, take this! ..."
 move  A3, R0
jal   0x800EC9DC
       NOP
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
L8010A5CC:
lb    V0, 0xf(S1)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_stars)
addu  V0, V0, V1
lb    V0, lo(p1_stars)(V0)
slti  V0, V0, MAX_PLAYER_STAR_COUNT
bnez  V0, L8010A5FC
 li    A0, 22
j     L8010A7B8
 li    A1, 0x4804 ; "You can't carry any more stars"
L8010A5FC:
lb    V0, 0xf(S1)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
slti  V0, V0, 0x14
bnezl V0, L8010A7B8
 li    A1, 0x4801 ; "Oh dear, you don't have 20 coins"
L8010A624:
lb    V1, 0xf(S1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   A2, hi(p1_char)
addu  A2, A2, V0
lbu   A2, lo(p1_char)(A2)
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 22
li    A1, 0x4800
addiu A2, A2, 0x1c00
jal   0x800EC8EC ; ShowMessage: "You made it! So you want to trade coins for a star?"
 move  A3, R0
li    A0, 2
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 move  A1, R0
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
 sll   S0, S0, 0x10
sra   S0, S0, 0x10
li    V0, 1
beq   S0, V0, L8010A74C ; Did they choose No?
 slti  V0, S0, 2
beql  V0, R0, L8010A6A4 ; is choice >= 2?
 li    V0, 2
beqz  S0, L8010A6B4 ; Did they choose yes?
       NOP
j     L8010A844
       NOP
L8010A6A4:
beq   S0, V0, L8010A7A8 ; Did they choose View Map?
       NOP
j     L8010A844
       NOP
L8010A6B4:
lb    A0, 0xf(S1)
jal   ShowPlayerCoinChange
 li    A1, -20
lb    A0, 0xf(S1)
jal   AdjustPlayerCoinsGradual
 li    A1, -20
jal   SleepProcess
 li    A0, 30
li    A0, 22
jal   0x800EC590 ; update existing window with new message?
 li    A1, 0x4802  ; "Then take this star"
lui   V0, hi(CORE_800A12D0)
lb    V0, lo(CORE_800A12D0)(V0)
beqz  V0, L8010A718
       NOP
jal   0x8004A950
       NOP
lui   A0, hi(CORE_800C9930)
lh    A0, lo(CORE_800C9930)(A0)
jal   0x800039A4
 li    A1, 60
li    V0, -1
lui   AT, hi(CORE_800C9930)
j     L8010A720
 sh    V0, lo(CORE_800C9930)(AT)
L8010A718:
jal   0x8004A994
 li    A0, 90
L8010A720:
lui   A0, hi(D_8011FA70)
jal   func_80106EEC
 lw    A0, lo(D_8011FA70)(A0)
jal   SleepProcess
 li    A0, 30
jal   0x800EDA58
       NOP
jal   0x800FF7F0
 li    A0, 2
j     L8010A844
       NOP
L8010A74C:
lui   V0, hi(CORE_800A12D0)
lb    V0, lo(CORE_800A12D0)(V0)
beqz  V0, L8010A798
 li    A0, 22
lui   A0, hi(CORE_800C9930)
lh    A0, lo(CORE_800C9930)(A0)
jal   0x800039A4
 li    A1, 60
lui   A0, hi(CORE_800CE198)
jal   0x80003310
 lh    A0, lo(CORE_800CE198)(A0)
jal   0x8004A670
 move  A0, R0
jal   0x8004A72C
 li    A0, 90
li    V0, -1
lui   AT, hi(CORE_800C9930)
sh    V0, lo(CORE_800C9930)(AT)
li    A0, 22
L8010A798:
jal   0x800EC590
 li    A1, 0x4803 ; "What?!? You don't need a star? ..."
j     L8010A808
       NOP
L8010A7A8:
jal   __PP64_INTERNAL_VIEW_MAP
       NOP
j     L8010A624
       NOP
L8010A7B8:
jal   0x800EC590
       NOP
lui   V0, hi(CORE_800A12D0)
lb    V0, lo(CORE_800A12D0)(V0)
beqz  V0, L8010A808
       NOP
lui   A0, hi(CORE_800C9930)
lh    A0, lo(CORE_800C9930)(A0)
jal   0x800039A4
 li    A1, 60
lui   A0, hi(CORE_800CE198)
jal   0x80003310
 lh    A0, lo(CORE_800CE198)(A0)
jal   0x8004A670
 move  A0, R0
jal   0x8004A72C
 li    A0, 90
li    V0, -1
lui   AT, hi(CORE_800C9930)
sh    V0, lo(CORE_800C9930)(AT)
L8010A808:
jal   0x800DB884
 lb    A0, 0xf(S1)
jal   0x8004EE68
       NOP
li    AT, 0x3FA60000 ; 1.296875
ori   AT, AT, 0x6666
mtc1  AT, F12
      NOP
jal   0x800E8EDC
 move  S0, V0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
       NOP
L8010A844:
lw    RA, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x30

__PP64_INTERNAL_BANK_SPACE_EVENT:
bank_space_event:
addiu SP, SP, -0xa0
sw    RA, 0x68(SP)
sw    S5, 0x64(SP)
sw    S4, 0x60(SP)
sw    S3, 0x5c(SP)
sw    S2, 0x58(SP)
sw    S1, 0x54(SP)
sw    S0, 0x50(SP)
sdc1  F30, 0x98(SP)
sdc1  F28, 0x90(SP)
sdc1  F26, 0x88(SP)
sdc1  F24, 0x80(SP)
sdc1  F22, 0x78(SP)
sdc1  F20, 0x70(SP)
jal   GetCurrentSpaceIndex
 move  S5, R0
move  S0, V0
lui   S4, hi(CORE_800CD058)
addiu S4, S4, lo(CORE_800CD058)
move  S1, R0
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   0x800DCD9C
 move  S3, R0
bgtz  V0, L8010A8D4
 li    A0, -1
jal   0x800FF900
 li    A1, 3
li    A0, -1
L8010A8D4:
li    A1, -1
jal   0x800F2304
 li    A2, 2
sll   V0, S0, 0x10
sra   V1, V0, 0x10
li    V0, ${_[0]}
beq   V1, V0, L8010A91C
 li    V0, ${_[1]}
bne   V1, V0, L8010A948
 li    A0, -1
li    A1, 8
jal   0x800ED20C
 li    A2, ${v[1]}
jal   GetSpaceData
 li    A0, ${v[1]}
move  S1, V0
j     L8010A93C
 li    A0, ${_[1]}
L8010A91C:
li    A0, -1
li    A1, 8
jal   0x800ED20C
 li    A2, ${v[0]}
jal   GetSpaceData
 li    A0, ${v[0]}
move  S1, V0
li    A0, ${_[0]}
L8010A93C:
jal   GetSpaceData
       NOP
move  S3, V0
L8010A948:
jal   SleepProcess
 li    A0, 8
lb    A0, 0xf(S4)
jal   0x800DCD9C
       NOP
blez  V0, L8010A96C
       NOP
jal   0x800DBEC0
 lb    A0, 0xf(S4)
L8010A96C:
jal   PlaySound
 li    A0, 276
li    A0, 50
jal   0x800D90C8
 move  A1, R0
move  S2, V0
jal   0x800D9714
 move  A0, S2
addiu S0, SP, 0x40
addiu S1, S1, 8
move  A0, S0
addiu A1, S3, 8
jal   midpoint
 move  A2, S1
jal   0x800D88E8
 move  A0, S0
addiu A0, S2, 0x18
jal   0x80089A20
 move  A1, S0
sw    R0, 0x28(S2)
addiu A0, S2, 0xc
jal   0x80089A20
 move  A1, S1
move  A0, S2
li    A1, -1
jal   0x800D9CE8
 li    A2, 1
jal   0x800D9A40
 move  A0, S2
lui   A1, hi(D_8011E070)
addiu A1, A1, lo(D_8011E070)
jal   0x800D90C8
 li    A0, 53
move  S3, V0
jal   0x800D9714
 move  A0, S3
addiu A0, S3, 0x18
jal   0x80089A20
 move  A1, S0
addiu A0, S3, 0xc
jal   0x80089A20
 move  A1, S1
li    AT, 0x3F990000 ; 1.195312
ori   AT, AT, 0x999a
mtc1  AT, F0
      NOP
swc1  F0, 0x2c(S3)
swc1  F0, 0x24(S3)
swc1  F0, 0x28(S3)
jal   0x800D9B24
 move  A0, S3
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F12
jal   0x8008EF20
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
div.s F22, F2, F0
mtc1  R0, F20
li    AT, 0x3E4C0000 ; 0.199219
ori   AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori   AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F28
      NOP
L8010AA88:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S2)
add.s F20, F20, F30
c.lt.s F20, F28
      NOP
bc1t  L8010AA88
       NOP
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F0
      NOP
c.lt.s F0, F20
      NOP
bc1f  L8010AB90
       NOP
li    AT, 0x3E4C0000 ; 0.199219
ori   AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori   AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F28
      NOP
L8010AB30:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S2)
sub.s F20, F20, F30
c.lt.s F28, F20
      NOP
bc1t  L8010AB30
       NOP
L8010AB90:
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x28(S2)
swc1  F0, 0x24(S2)
swc1  F0, 0x2c(S2)
jal   0x800D9A40
 move  A0, S3
li    A0, -1
jal   PlayerHasItem
 li    A1, ITEM_KOOPA_CARD
li    V1, -1
beq   V0, V1, L8010AC3C
 move  A0, S2
sw    R0, 0x10(SP)
L8010ABCC:
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x3A1D ; "Would you like to use your Koopa Kard at this bank?"
move  A2, R0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
lui   A0, hi(D_8011E058)
addiu A0, A0, lo(D_8011E058)
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 move  A1, R0
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
beqz  S0, L8010AC20
 li    V0, 2
beq   S0, V0, L8010AC28
 move  A0, S2
j     L8010AC3C
       NOP
L8010AC20:
j     L8010AC38
 li    S5, 1
L8010AC28:
jal   __PP64_INTERNAL_VIEW_MAP
       NOP
j     L8010ABCC
 sw    R0, 0x10(SP)
L8010AC38:
move  A0, S2
L8010AC3C:
li    A1, -1
jal   0x800D9CE8
 move  A2, R0
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui A1, 0x3f99
jal   0x8001C92C
 ori A1, A1, 0x999a
L8010AC60:
jal   0x800D9E0C
 move  A0, S2
andi  V0, V0, 0xffff
bnez  V0, L8010AC84
       NOP
jal   SleepVProcess
       NOP
j     L8010AC60
       NOP
L8010AC84:
jal   PlaySound
 li    A0, 601
move  A0, S3
move  A1, R0
jal   0x800D9CE8
 move  A2, R0
L8010AC9C:
jal   0x800D9E0C
 move  A0, S3
andi  V0, V0, 0xffff
bnez  V0, L8010ACC0
 move  A0, S3
jal   SleepVProcess
       NOP
j     L8010AC9C
       NOP
L8010ACC0:
li    A1, -1
jal   0x800D9CE8
 li    A2, 2
beqz  S5, L8010AE0C
       NOP
lui   S0, hi(bank_coin_total)
addiu S0, S0, lo(bank_coin_total)
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
lh    A2, 0(S0)
jal   sprintf
 addiu A0, SP, 0x20
lh    V0, 0(S0)
beqz  V0, L8010AD14
 li    A0, 2
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A1, 14878
j     L8010AD28
 addiu A2, SP, 0x20
L8010AD14:
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A1, 0x3A1F ; "So you'd like to use your card today?"
move  A2, R0
L8010AD28:
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
jal   0x800EC9DC
       NOP
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
lui   V0, hi(bank_coin_total)
lh    V0, lo(bank_coin_total)(V0)
beql  V0, R0, L8010AD74
 sw    R0, 0x10(SP)
lui   AT, hi(CORE_800D037C)
jal   func_80112FA8
 sh    R0, lo(CORE_800D037C)(AT)
li    V0, 1
lui   AT, hi(CORE_800D037C)
j     func_8010ADEC
 sh    V0, lo(CORE_800D037C)(AT)
L8010AD74:
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 2
li    A1, 14881
move  A2, R0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
jal   0x800EC9DC
       NOP
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
li    A0, -1
jal   PlayerHasItem
 li    A1, ITEM_KOOPA_CARD
lb    A0, 0xf(S4)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S4)
jal   0x800F63F0
 lb    A0, 0xf(S4)
func_8010ADEC:
jal   0x800DCD9C
 lb    A0, 0xf(S4)
blez  V0, L8010B138
       NOP
jal   0x800DB884
 lb    A0, 0xf(S4)
j     L8010B138
       NOP
L8010AE0C:
jal   0x800DCD9C
 lb    A0, 0xf(S4)
blez  V0, L8010B04C
       NOP
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   A2, hi(p1_coins)
addu  A2, A2, V0
lh    A2, lo(p1_coins)(A2)
sltu  V0, R0, A2
slti  V1, A2, 5
and   V0, V0, V1
beqz  V0, L8010AF38
       NOP
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 addiu A0, SP, 0x20
addiu S1, SP, 0x30
lui   S0, hi(bank_coin_total)
addiu S0, S0, lo(bank_coin_total)
lh    A3, 0(S0)
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   A2, hi(p1_coins)
addu  A2, A2, V0
lh    A2, lo(p1_coins)(A2)
move  A0, S1
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 addu  A2, A3, A2
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 2
li    A1, 0x1201
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage: "Welcome to the Koopa Bank."
 move  A3, S1
jal   0x800EC6C8
       NOP
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lhu   V1, 0(S0)
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lhu   V0, lo(p1_coins)(AT)
addu  V1, V1, V0
jal   func_80108478
 sh    V1, 0(S0)
lb    A0, 0xf(S4)
sll   V0, A0, 3
subu  V0, V0, A0
sll   V0, V0, 3
lui   A1, hi(p1_coins)
addu  A1, A1, V0
lh    A1, lo(p1_coins)(A1)
jal   ShowPlayerCoinChange
 subu  A1, R0, A1
lb    A0, 0xf(S4)
sll   V0, A0, 3
subu  V0, V0, A0
sll   V0, V0, 3
lui   A1, hi(p1_coins)
addu  A1, A1, V0
lh    A1, lo(p1_coins)(A1)
j     func_8010B004
 subu  A1, R0, A1
L8010AF38:
lb    V0, 0xf(S4)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
bnezl V0, L8010AF9C
 addiu A0, SP, 0x20
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
lui   A2, hi(bank_coin_total)
lh    A2, lo(bank_coin_total)(A2)
jal   sprintf
 addiu A0, SP, 0x20
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 2
li    A1, 4610
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
j     func_8010B01C
       NOP
L8010AF9C:
lui   S0, hi(bank_coin_total)
addiu S0, S0, lo(bank_coin_total)
lh    A2, 0(S0)
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 addiu A2, A2, 5
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 2
li    A1, 0x1200
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage "I must ask for a deposit..."
 move  A3, R0
jal   0x800EC6C8
       NOP
lhu   V0, 0(S0)
addiu V0, V0, 5
jal   func_80108478
 sh    V0, 0(S0)
lb    A0, 0xf(S4)
jal   ShowPlayerCoinChange
 li    A1, -5
lb    A0, 0xf(S4)
li    A1, -5
func_8010B004:
jal   AdjustPlayerCoinsGradual
       NOP
jal   SleepProcess
 li    A0, 30
jal   0x800EC6A8
       NOP
func_8010B01C:
jal   0x800EC9DC
       NOP
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
jal   0x800DB884
 lb    A0, 0xf(S4)
jal   SleepProcess
 li    A0, 10
j     L8010B138
       NOP
L8010B04C:
lui   S0, hi(bank_coin_total)
addiu S0, S0, lo(bank_coin_total)
lh    A2, 0(S0)
beql  A2, R0, L8010B130
 li    A0, 2
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 addiu A0, SP, 0x20
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 2
li    A1, 0x1203
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage "Hooray! ... you get all the coins we've collected! ..."
 move  A3, R0
jal   0x800EC9DC
       NOP
jal   0x800EC6C8
       NOP
lb    A0, 0xf(S4)
jal   ShowPlayerCoinChange
 lh    A1, 0(S0)
lb    A0, 0xf(S4)
jal   AdjustPlayerCoinsGradual
 lh    A1, 0(S0)
jal   func_80108478
 sh    R0, 0(S0)
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800ECC0C
 addiu A0, A0, 0x18
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
lb    A1, 0xf(S4)
jal   0x8004ACE0
 li    A0, 628
jal   SleepProcess
 li    A0, 30
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
jal   0x800EC6A8
       NOP
jal   0x800EC9DC
       NOP
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
j     L8010B138
       NOP
L8010B130:
jal   0x800EC590
 li    A1, 0x1204 ; "You won ... we don't have even 1 coin"
L8010B138:
jal   PlaySound
 li    A0, 277
move  A0, S2
li    A1, -1
jal   0x800D9CE8
 li    A2, 4
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui A1, 0x3f99
jal   0x8001C92C
 ori A1, A1, 0x999a
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   V1, hi(CORE_800D03F8)
lw    V1, lo(CORE_800D03F8)(V1)
sll   V0, A0, 1
addu  V0, V0, A0
sll   V0, V0, 6
addu  V0, V0, V1
lbu   V1, 2(V0)
lui   A1, hi(CORE_800CCF58)
lw    A1, lo(CORE_800CCF58)(A1)
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 3
addu  V0, V0, A1
lh    V0, 2(V0)
mtc1  V0, F4
      NOP
cvt.s.w F4, F4
mfc1  A1, F4
jal   0x8001C6A8
       NOP
L8010B1C4:
jal   0x800D9E80
 move  A0, S2
andi  V0, V0, 0xffff
bnez  V0, L8010B1E8
       NOP
jal   SleepVProcess
       NOP
j     L8010B1C4
       NOP
L8010B1E8:
jal   0x800D9B24
 move  A0, S3
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F12
jal   0x8008EF20
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
div.s F22, F2, F0
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F20
li    AT, 0x3E4C0000 ; 0.199219
ori AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F28
      NOP
L8010B244:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S2)
add.s F20, F20, F30
c.lt.s F20, F28
      NOP
bc1t  L8010B244
       NOP
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F20
li    AT, 0x3E4C0000 ; 0.199219
ori AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
mtc1  R0, F28
      NOP
L8010B2D4:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S2)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S2)
sub.s F20, F20, F30
c.lt.s F28, F20
      NOP
bc1t  L8010B2D4
       NOP
sw    R0, 0x28(S2)
sw    R0, 0x24(S2)
sw    R0, 0x2c(S2)
jal   0x800D9B54
 move  A0, S2
jal   0x800D9B54
 move  A0, S3
lw    RA, 0x68(SP)
lw    S5, 0x64(SP)
lw    S4, 0x60(SP)
lw    S3, 0x5c(SP)
lw    S2, 0x58(SP)
lw    S1, 0x54(SP)
lw    S0, 0x50(SP)
ldc1  F30, 0x98(SP)
ldc1  F28, 0x90(SP)
ldc1  F26, 0x88(SP)
ldc1  F24, 0x80(SP)
ldc1  F22, 0x78(SP)
ldc1  F20, 0x70(SP)
jr    RA
 addiu SP, SP, 0xa0

func_8010B394:
move  A3, A0
move  A1, R0
lui   A2, hi(D_8011FB54)
lw    A2, lo(D_8011FB54)(A2)
lui   V0, hi(D_8011FB4C)
lw    V0, lo(D_8011FB4C)(V0)
lui   A0, hi(D_8011E0A0)
addiu A0, A0, lo(D_8011E0A0)
sll   V1, V0, 3
addu  V1, V1, V0
sll   V1, V1, 2
subu  V1, V1, V0
addu  V1, V1, A0
lui   A0, hi(D_8011FB50)
lw    A0, lo(D_8011FB50)(A0)
sll   V0, A0, 3
subu  V0, V0, A0
addu  V1, V0, V1
addu  V0, A2, A1
L8010B3E0:
lbu   V0, 0(V0)
beqz  V0, L8010B400
 addu  V0, V1, A1
lb    V0, 0(V0)
bnel  V0, A3, L8010B404
 addiu A1, A1, 1
j     L8010B414
 move  V0, A1
L8010B400:
addiu A1, A1, 1
L8010B404:
slti  V0, A1, 7
bnez  V0, L8010B3E0
 addu  V0, A2, A1
li    V0, -1
L8010B414:
jr    RA
       NOP

func_8010B41C:
move  A1, R0
lui   V0, hi(D_8011FB4C)
lw    V0, lo(D_8011FB4C)(V0)
lui   A0, hi(D_8011E0A0)
addiu A0, A0, lo(D_8011E0A0)
sll   V1, V0, 3
addu  V1, V1, V0
sll   V1, V1, 2
subu  V1, V1, V0
addu  V1, V1, A0
lui   A0, hi(D_8011FB50)
lw    A0, lo(D_8011FB50)(A0)
sll   V0, A0, 3
subu  V0, V0, A0
addu  V1, V0, V1
li    A0, -1
addu  V0, V1, A1
L8010B460:
lb    V0, 0(V0)
beq   V0, A0, L8010B47C
       NOP
addiu A1, A1, 1
slti  V0, A1, 7
bnezl V0, L8010B460
 addu  V0, V1, A1
L8010B47C:
jr    RA
 move  V0, A1

D_8010B484:
addiu SP, SP, -0x50
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F30, 0x48(SP)
sdc1  F28, 0x40(SP)
sdc1  F26, 0x38(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
jal   0x8004EE68
 sdc1  F20, 0x20(SP)
lw    S1, 0x8c(V0)
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   GetPlayerStruct
 sll   S0, S1, 0x10
li    A0, -1
jal   0x800FF900
 li    A1, 2
jal   PlaySound
 li    A0, 346
mtc1  R0, F20
li    S2, 0x3FC00000 ; 1.500000
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F24
li    AT, 0x3F000000 ; 0.500000
mtc1  AT, F30
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
li    AT, 0x43340000 ; 180.000000
mtc1  AT, F26
      NOP
L8010B508:
jal   0x8008EF20
 mov.s F12, F20
mtc1  S2, F2
      NOP
mul.s F0, F0, F2
add.s F22, F0, F24
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F30
sra   A0, S0, 0x10
mfc1  A2, F22
sub.s F0, F24, F0
mfc1  A3, F0
      NOP
jal   0x800551D8
 move  A1, R0
jal   SleepVProcess
       NOP
add.s F20, F20, F28
c.lt.s F20, F26
      NOP
bc1t  L8010B508
       NOP
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F0
      NOP
c.lt.s F20, F0
      NOP
      NOP
bc1f  L8010B610
 sll   A0, S1, 0x10
li    S2, 0x3F000000 ; 0.500000
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F24
li    AT, 0x3E800000 ; 0.250000
mtc1  AT, F30
sll   S0, S1, 0x10
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F26
      NOP
L8010B5B0:
jal   0x8008EF20
 mov.s F12, F20
mtc1  S2, F2
      NOP
mul.s F0, F0, F2
add.s F22, F0, F24
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F30
sra   A0, S0, 0x10
mfc1  A2, F22
sub.s F0, F24, F0
mfc1  A3, F0
      NOP
jal   0x800551D8
 move  A1, R0
jal   SleepVProcess
       NOP
add.s F20, F20, F28
c.lt.s F20, F26
      NOP
      NOP
bc1t  L8010B5B0
 sll   A0, S1, 0x10
L8010B610:
sra   A0, A0, 0x10
move  A1, R0
lui   A2, 0x3f80
jal   0x800551D8
 move  A3, A2
jal   EndProcess
 move  A0, R0
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F30, 0x48(SP)
ldc1  F28, 0x40(SP)
ldc1  F26, 0x38(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x50

__PP64_INTERNAL_ITEM_SHOP_EVENT:
item_shop_event:
addiu SP, SP, -0xe8
sw    RA, 0xb4(SP)
sw    FP, 0xb0(SP)
sw    S7, 0xac(SP)
sw    S6, 0xa8(SP)
sw    S5, 0xa4(SP)
sw    S4, 0xa0(SP)
sw    S3, 0x9c(SP)
sw    S2, 0x98(SP)
sw    S1, 0x94(SP)
sw    S0, 0x90(SP)
sdc1  F30, 0xe0(SP)
sdc1  F28, 0xd8(SP)
sdc1  F26, 0xd0(SP)
sdc1  F24, 0xc8(SP)
sdc1  F22, 0xc0(SP)
sdc1  F20, 0xb8(SP)
jal   GetPlayerStruct
 li    A0, -1
sw    V0, 0x74(SP)
move  S5, R0
move  S3, R0
move  S4, R0
sw    R0, 0x7c(SP)
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
lw    T5, 0x74(SP)
lbu   A0, 0xf(T5)
sll   A0, A0, 0x18
sra   A0, A0, 0x18
lbu   A1, 0x10(T5)
sll   A1, A1, 0x18
sra   A1, A1, 0x18
andi  A0, A0, 0xffff
jal   GetAbsSpaceIndexFromChainSpaceIndex
 andi  A1, A1, 0xffff
sll   V0, V0, 0x10
sra   V1, V0, 0x10
li    V0, ${D[0]}
beq   V1, V0, L8010B718
 li    V0, ${D[1]}
beq   V1, V0, L8010B744
 li    T5, ${V[1]}
j     L8010B770
 li    T5, -1
L8010B718:
li    T5, ${V[0]}
sh    T5, 0x6e(SP)
jal   GetSpaceData
 li    A0, ${V[0]}
move  S5, V0
jal   GetSpaceData
 li    A0, ${D[0]}
lui   AT, hi(D_8011E1D8)
sw    R0, lo(D_8011E1D8)(AT)
j     L8010B774
 move  S3, V0
L8010B744:
sh    T5, 0x6e(SP)
jal   GetSpaceData
 li    A0, ${V[1]}
move  S5, V0
jal   GetSpaceData
 li    A0, ${D[1]}
move  S3, V0
li    V0, 1
lui   AT, hi(D_8011E1D8)
j     L8010B774
 sw    V0, lo(D_8011E1D8)(AT)
L8010B770:
sh    T5, 0x6e(SP)
L8010B774:
lhu   T5, 0x6e(SP)
sll   V0, T5, 0x10
sra   A2, V0, 0x10
li    V0, -1
beq   A2, V0, L8010B79C
 li    A0, -1
jal   0x800ED20C
 li    A1, 8
jal   SleepProcess
 li    A0, 8
L8010B79C:
lui   A0, hi(current_player_index)
jal   0x800DBEC0
 lb    A0, lo(current_player_index)(A0)
lui   V1, hi(CORE_800CD0AC)
lh    V1, lo(CORE_800CD0AC)(V1)
beqz  V1, L8010B7C8
 li    V0, 1
beq   V1, V0, L8010B7DC
 move  S6, R0
j     L8010B7DC
 li    S6, 1
L8010B7C8:
jal   RNGPercentChance
 li    A0, 66
sll   V0, V0, 0x10
sltiu V0, V0, 1
move  S6, V0
L8010B7DC:
move  V0, S6
beqz  V0, L8010B7EC
 li    FP, 3
li    FP, 5
L8010B7EC:
lhu   T5, 0x6e(SP)
sll   V0, T5, 0x10
sra   V0, V0, 0x10
li    V1, -1
beq   V0, V1, L8010BB6C
 move  S2, S6
subu  S0, R0, S6
andi  S0, S0, 0x31
ori   S0, S0, 0x30
jal   PlaySound
 li    A0, 276 ; raw 0x50, shop appearing noise
andi  A0, S0, 0xff
jal   0x800D90C8
 move  A1, R0
move  S4, V0
jal   0x800D9714
 move  A0, S4
addiu S0, SP, 0x48
addiu S1, S5, 8
move  A0, S0
addiu A1, S3, 8
jal   midpoint
 move  A2, S1
jal   0x800D88E8
 move  A0, S0
addiu A0, S4, 0x18
jal   0x80089A20
 move  A1, S0
sw    R0, 0x28(S4)
move  A0, S4
li    A1, -1
jal   0x800D9CE8
 li    A2, 1
jal   0x800D9A40
 move  A0, S4
addiu A0, S4, 0xc
jal   0x80089A20
 move  A1, S1
beqz  S2, L8010B898
 li    A0, 57
lui   A1, hi(D_8011E1D0)
j     L8010B8A4
 addiu A1, A1, lo(D_8011E1D0)
L8010B898:
li    A0, 27
lui   A1, hi(D_8011E1C8)
addiu A1, A1, lo(D_8011E1C8)
L8010B8A4:
jal   0x800D90C8
       NOP
sw    V0, 0x7c(SP)
jal   0x800D9714
 lw    A0, 0x7c(SP)
lw    T5, 0x7c(SP)
addiu A0, T5, 0x18
jal   0x80089A20
 addiu A1, SP, 0x48
lw    T5, 0x7c(SP)
addiu A0, T5, 0xc
jal   0x80089A20
 addiu A1, S5, 8
li    AT, 0x3F990000 ; 1.195312
ori   AT, AT, 0x999a
mtc1  AT, F0
lw    T5, 0x7c(SP)
swc1  F0, 0x2c(T5)
swc1  F0, 0x24(T5)
swc1  F0, 0x28(T5)
jal   0x800D9B24
 lw    A0, 0x7c(SP)
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F12
jal   0x8008EF20
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
div.s F22, F2, F0
mtc1  R0, F20
li    AT, 0x3E4C0000 ; 0.199219
ori   AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori   AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F28
      NOP
L8010B94C:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S4)
add.s F20, F20, F30
c.lt.s F20, F28
      NOP
bc1t  L8010B94C
       NOP
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F0
      NOP
c.lt.s F0, F20
      NOP
bc1f  L8010BA54
       NOP
li    AT, 0x3E4C0000 ; 0.199219
ori   AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori   AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F28
      NOP
L8010B9F4:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S4)
sub.s F20, F20, F30
c.lt.s F28, F20
      NOP
bc1t  L8010B9F4
       NOP
L8010BA54:
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x2c(S4)
swc1  F0, 0x24(S4)
swc1  F0, 0x28(S4)
jal   0x800D9A40
 lw    A0, 0x7c(SP)
move  A0, S4
li    A1, -1
jal   0x800D9CE8
 move  A2, R0
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   A1, 0x3f99
jal   0x8001C92C
 ori   A1, A1, 0x999a
L8010BA9C:
jal   0x800D9E0C
 move  A0, S4
andi  V0, V0, 0xffff
bnez  V0, L8010BAC0
 move  A1, R0
jal   SleepVProcess
       NOP
j     L8010BA9C
       NOP
L8010BAC0:
lw    A0, 0x7c(SP)
jal   0x800D9CE8
 move  A2, R0
move  V0, S6
bnez  V0, L8010BB34
 li    A0, 672
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
sll   V0, A0, 3
subu  V0, V0, A0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slti  V0, V0, 5
bnezl V0, L8010BB34
 li    A0, 666
jal   PlayerHasEmptyItemSlot
       NOP
li    V1, -1
beq   V0, V1, L8010BB34
 li    A0, 666
lui   V1, hi(current_turn)
lb    V1, lo(current_turn)(V1)
lui   V0, hi(total_turns)
lb    V0, lo(total_turns)(V0)
bne   V1, V0, L8010BB34
 li    A0, 664
li    A0, 666
L8010BB34:
jal   PlaySound
       NOP
L8010BB3C:
jal   0x800D9E0C
 lw    A0, 0x7c(SP)
andi  V0, V0, 0xffff
bnez  V0, L8010BB60
 li    A1, -1
jal   SleepVProcess
       NOP
j     L8010BB3C
       NOP
L8010BB60:
lw    A0, 0x7c(SP)
jal   0x800D9CE8
 li    A2, 2
L8010BB6C:
lui   V1, hi(current_turn)
lb    V1, lo(current_turn)(V1)
lui   V0, hi(total_turns)
lb    V0, lo(total_turns)(V0)
bne   V1, V0, L8010BBA0
 sll   V0, S6, 2
lui   A1, hi(item_shop_closed_messages)
addu  A1, A1, V0
lw    A1, lo(item_shop_closed_messages)(A1)
jal   0x800EC590
 move  A0, FP
j     L8010C684
       NOP
L8010BBA0:
lui   A0, hi(current_player_index)
jal   PlayerHasEmptyItemSlot
 lb    A0, lo(current_player_index)(A0)
li    V1, -1
bne   V0, V1, L8010BBD4
 sll   V0, S6, 2
lui   A1, hi(item_shop_already_have_three_items_messages)
addu  A1, A1, V0
lw    A1, lo(item_shop_already_have_three_items_messages)(A1)
jal   0x800EC590
 move  A0, FP
j     L8010C684
       NOP
L8010BBD4:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
slti  V0, V0, 5
beqz  V0, L8010BC1C
 sll   V0, S6, 2
lui   A1, hi(item_shop_not_enough_coins_messages)
addu  A1, A1, V0
lw    A1, lo(item_shop_not_enough_coins_messages)(A1)
jal   0x800EC590
 move  A0, FP
j     L8010C684
       NOP
L8010BC1C:
lui   A1, hi(item_shop_prompt_to_buy_messages)
addu  A1, A1, V0
lw    A1, lo(item_shop_prompt_to_buy_messages)(A1)
jal   0x800EC628
 move  A0, FP
jal   func_80107408
       NOP
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
li    V0, 1
beq   S0, V0, L8010C620
 slti  V0, S0, 2
beql  V0, R0, L8010BC6C
 li    V0, 2
beqz  S0, L8010BC7C
       NOP
j     L8010C684
       NOP
L8010BC6C:
beq   S0, V0, L8010C640
 li    V1, -1
j     L8010C684
       NOP
L8010BC7C:
jal   0x800FB578
 li    A0, -1
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   0x800EE9C0
 move  S1, V0
move  A0, S6
lui   A1, hi(D_8011E088)
addiu A1, A1, lo(D_8011E088)
sll   V1, A0, 1
addu  V1, V1, A0
sll   V1, V1, 2
addu  V1, V1, A1
sll   A0, S1, 2
addu  A0, A0, V1
addu  A0, A0, V0
lbu   S3, 0(A0)
move  S2, R0
move  A1, R0
move  V1, S6
lui   A0, hi(D_8011E0A0)
addiu A0, A0, lo(D_8011E0A0)
sll   V0, V1, 3
addu  V0, V0, V1
sll   V0, V0, 2
subu  V0, V0, V1
addu  V0, V0, A0
sll   V1, S3, 3
subu  V1, V1, S3
addu  V1, V1, V0
li    A3, -1
addiu A0, SP, 0x20
li    A2, 1
addu  V0, V1, A1
L8010BD04:
lb    V0, 0(V0)
beq   V0, A3, L8010BD20
 slti  V0, V0, 6
beqz  V0, L8010BD30
 addu  V0, A0, A1
sb    A2, 0(V0)
addiu S2, S2, 1
L8010BD20:
addiu A1, A1, 1
slti  V0, A1, 7
bnez  V0, L8010BD04
 addu  V0, V1, A1
L8010BD30:
slti  V0, A1, 7
beqz  V0, L8010BDF8
 move  S1, R0
addiu T3, SP, 0x20
li    T1, 1
addiu T0, SP, 0x30
move  V1, S6
lui   A0, hi(D_8011E0A0)
addiu A0, A0, lo(D_8011E0A0)
sll   V0, V1, 3
addu  V0, V0, V1
sll   V0, V0, 2
subu  V0, V0, V1
addu  V0, V0, A0
sll   V1, S3, 3
subu  V1, V1, S3
addu  T2, V1, V0
li    T4, -1
L8010BD78:
addu  A3, T3, A1
sb    T1, 0(A3)
sll   V0, S1, 2
addu  A2, T0, V0
sb    R0, 0(A2)
addu  V0, T2, A1
lb    V0, 0(V0)
beql  V0, T4, L8010BDEC
 addiu A1, A1, 1
lui   A0, hi(CORE_80100F94)
addu  A0, A0, V0
lbu   A0, lo(CORE_80100F94)(A0)
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slt   V0, V0, A0
beqz  V0, L8010BDDC
 sll   V0, S1, 2
sb    R0, 0(A3)
sb    T1, 0(A2)
L8010BDDC:
addu  V0, T0, V0
sb    R0, 1(V0)
addiu S2, S2, 1
addiu A1, A1, 1
L8010BDEC:
slti  V0, A1, 7
bnez  V0, L8010BD78
 addiu S1, S1, 1
L8010BDF8:
slti  V0, A1, 9
beqz  V0, L8010BE20
 addiu V1, SP, 0x20
li    A0, 1
addu  V0, V1, A1
L8010BE0C:
sb    A0, 0(V0)
addiu A1, A1, 1
slti  V0, A1, 9
bnez  V0, L8010BE0C
 addu  V0, V1, A1
L8010BE20:
lui   V1, hi(item_shop_purchase_selection_messages)
addiu V1, V1, lo(item_shop_purchase_selection_messages)
sll   V0, S3, 3
addu  V0, V0, V1
move  S0, S6
sll   V1, S0, 2
addu  V1, V1, V0
addiu V0, SP, 0x38
sw    V0, 0x10(SP)
addiu V0, SP, 0x3c
sw    V0, 0x14(SP)
addiu V0, SP, 0x40
sw    V0, 0x18(SP)
move  A0, FP
lw    A1, 0(V1)
addiu A2, SP, 0x30
jal   0x800EC8EC ; ShowMessage to select item to buy
 addiu A3, SP, 0x34
jal   0x800ECAA8
 move  A0, R0
lui   AT, hi(D_8011FB4C)
sw    S0, lo(D_8011FB4C)(AT)
lui   AT, hi(D_8011FB50)
sw    S3, lo(D_8011FB50)(AT)
addiu A0, SP, 0x20
lui   AT, hi(D_8011FB54)
jal   func_80107174
 sw    A0, lo(D_8011FB54)(AT)
jal   0x800EC6C8
 move  S7, V0
jal   0x800EC6EC
       NOP
bne   S7, S2, L8010BED0
 addiu V0, S2, 1
lui   AT, hi(CORE_800D037C)
jal   0x800E4A6C
 sh    R0, lo(CORE_800D037C)(AT)
lui   A0, hi(current_player_index)
jal   0x800E44E4
 lb    A0, lo(current_player_index)(A0)
li    V0, 1
lui   AT, hi(CORE_800D037C)
j     L8010BC7C
 sh    V0, lo(CORE_800D037C)(AT)
L8010BED0:
xor   V0, S7, V0
sltiu V0, V0, 1
nor   V1, R0, S7
sltiu V1, V1, 1
or    V0, V0, V1
bnez  V0, L8010BC1C
 sll   V0, S6, 2
lw    T5, 0x74(SP)
lw    FP, 0x24(T5)
move  S1, S6
lui   V1, hi(D_8011E0A0)
addiu V1, V1, lo(D_8011E0A0)
sll   V0, S1, 3
addu  V0, V0, S1
sll   V0, V0, 2
subu  V0, V0, S1
addu  V0, V0, V1
sll   S0, S3, 3
subu  S0, S0, S3
addu  S0, S0, V0
addu  S0, S0, S7
lb    V0, 0(S0)
lui   A1, hi(CORE_80100F94)
addu  A1, A1, V0
lbu   A1, lo(CORE_80100F94)(A1)
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   ShowPlayerCoinChange
 subu  A1, R0, A1
lb    V0, 0(S0)
lui   A1, hi(CORE_80100F94)
addu  A1, A1, V0
lbu   A1, lo(CORE_80100F94)(A1)
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   AdjustPlayerCoinsGradual
 subu  A1, R0, A1
jal   SleepProcess
 li    A0, 30
lb    V1, 0(S0)
li    V0, 19
beq   V1, V0, L8010BFE8
 addiu S5, S1, 0x13
lui   A0, hi(current_player_index)
jal   PlayerHasEmptyItemSlot
 lb    A0, lo(current_player_index)(A0)
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   A0, V1, 3
subu  A0, A0, V1
sll   A0, A0, 3
lui   V1, hi(p1_item1)
addiu V1, V1, lo(p1_item1)
addu  A0, A0, V1
addu  A0, A0, V0
move  V0, S6
lui   A1, hi(D_8011E0A0)
addiu A1, A1, lo(D_8011E0A0)
sll   V1, V0, 3
addu  V1, V1, V0
sll   V1, V1, 2
subu  V1, V1, V0
addu  V1, V1, A1
sll   V0, S3, 3
subu  V0, V0, S3
addu  V0, V0, V1
addu  V0, V0, S7
lbu   V1, 0(V0)
sb    V1, 0(A0)
lb    S5, 0(V0)
L8010BFE8:
li    A0, 1
jal   0x8005279C
 li    A1, 5
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x5c(SP)
sll   V0, S5, 2
lui   A0, hi(CORE_8010197C)
addu  A0, A0, V0
lw    A0, lo(CORE_8010197C)(A0)
jal   ReadMainFS
 move  S1, R0
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sh    V0, 0x66(SP)
jal   FreeMainFS
 move  A0, S0
lw    S0, 0x5c(SP)
lhu   T5, 0x66(SP)
sll   A2, T5, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 10
move  A0, S0
move  A1, R0
jal   0x800550F4
 move  A2, R0
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 6156
move  A0, S0
move  A1, R0
li    A2, 160
jal   0x80054904
 li    A3, 90
move  A0, S0
move  A1, R0
jal   0x80055458
 move  A2, R0
addiu S0, SP, 0x48
jal   0x800ECC0C
 move  A0, S0
lw    T5, 0x74(SP)
lw    A2, 0x24(T5)
addiu A2, A2, 0x18
move  A0, A2
move  A1, S0
jal   0x800ED128
 li    A3, 10
jal   PlaySound
 li    A0, 25
lw    T5, 0x5c(SP)
sll   S0, T5, 0x10
sll   A2, S1, 1
L8010C0E0:
addu  A2, A2, S1
sll   A2, A2, 3
addu  A2, A2, S1
sra   A0, S0, 0x10
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S1, S1, 1
slti  V0, S1, 0xa
bnez  V0, L8010C0E0
 sll   A2, S1, 1
lw    A0, 0x5c(SP)
move  A1, R0
jal   0x80055458
 li    A2, 256
move  V0, S6
lui   A0, hi(D_8011E0A0)
addiu A0, A0, lo(D_8011E0A0)
sll   V1, V0, 3
addu  V1, V1, V0
sll   V1, V1, 2
subu  V1, V1, V0
addu  V1, V1, A0
sll   V0, S3, 3
subu  V0, V0, S3
addu  V0, V0, V1
addu  V0, V0, S7
lb    V1, 0(V0)
li    V0, 19
bne   V1, V0, L8010C598
 move  S7, S6
lui   V0, hi(D_8011E0E8)
addiu V0, V0, lo(D_8011E0E8)
sll   V1, S7, 1
addu  V1, V1, S7
sw    V1, 0x84(SP)
sll   V1, V1, 2
addu  V1, V1, V0
sw    V1, 0x8c(SP)
L8010C180:
lui   A0, hi(current_player_index)
jal   PlayerHasEmptyItemSlot
 lb    A0, lo(current_player_index)(A0)
li    T5, -1
beq   V0, T5, L8010C578
 li    V1, -1
jal   0x800FB578
 li    A0, -1
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   0x800EE9C0
 move  S0, V0
sll   S0, S0, 2
lw    T5, 0x8c(SP)
addu  S0, S0, T5
addu  S0, S0, V0
lbu   S0, 0(S0)
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F12
      NOP
jal   0x800EEF80
 move  S1, R0
move  A0, V0
lw    T5, 0x84(SP)
sll   V1, T5, 3
addu  V1, V1, S7
sll   V1, V1, 1
lui   T5, hi(D_8011E100)
addiu T5, T5, lo(D_8011E100)
addu  V1, V1, T5
sll   V0, S0, 2
addu  V0, V0, S0
sll   V0, V0, 1
addu  V1, V0, V1
addu  V0, V1, S1
L8010C20C:
lb    V0, 0(V0)
slt   V0, A0, V0
bnez  V0, L8010C22C
       NOP
addiu S1, S1, 1
slti  V0, S1, 0xa
bnez  V0, L8010C20C
 addu  V0, V1, S1
L8010C22C:
lui   V0, hi(D_8011E164)
addiu V0, V0, lo(D_8011E164)
sll   V1, S7, 2
addu  V1, V1, S7
sll   V1, V1, 1
addu  V1, V1, V0
addu  V1, V1, S1
lbu   S5, 0(V1)
lhu   T5, 0x6e(SP)
sll   V0, T5, 0x10
sra   V0, V0, 0x10
li    T5, -1
beq   V0, T5, L8010C270
 li    A0, 21
li    A1, 160
j     L8010C284
 li    A2, 1
L8010C270:
lhu   V0, 0xa(FP)
ori   V0, V0, 0x10
sh    V0, 0xa(FP)
li    A1, 160
move  A2, R0
L8010C284:
jal   0x800E210C
 li    S0, 30
move  S1, V0
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
lui   AT, hi(CORE_800C9520)
addu  AT, AT, V0
lhu   V0, lo(CORE_800C9520)(AT)
andi  V0, V0, 0x8000
bnez  V0, L8010C330
       NOP
lui   S3, hi(CORE_800C9520)
addiu S3, S3, lo(CORE_800C9520)
L8010C2D4:
jal   PlayerIsCPU
 li    A0, -1
beqz  V0, L8010C2F0
 li    T5, -1
addiu S0, S0, -1
beq   S0, T5, L8010C330
       NOP
L8010C2F0:
jal   SleepVProcess
       NOP
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
lhu   V0, 0(V0)
andi  V0, V0, 0x8000
beqz  V0, L8010C2D4
       NOP
L8010C330:
jal   0x800E21F4
 move  A0, S1
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
li    A1, 2
jal   0x800F2304
 move  A2, R0
lui   A1, 0x4000
lui   A2, 0xbe99
ori   A2, A2, 0x999a
jal   0x800EE688
 move  A0, FP
jal   SleepProcess
 li    A0, 5
lui   A0, hi(D_8010B484)
addiu A0, A0, lo(D_8010B484)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
lw    T5, 0x5c(SP)
sw    T5, 0x8c(V0)
jal   0x800EE6C0
 move  A0, FP
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
li    A0, 1
jal   0x8005279C
 li    A1, 5
sll   V0, V0, 0x10
sra   S3, V0, 0x10
sll   V0, S5, 2
lui   A0, hi(CORE_8010197C)
addu  A0, A0, V0
lw    A0, lo(CORE_8010197C)(A0)
jal   ReadMainFS
 move  S1, R0
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   S6, V0, 0x10
jal   FreeMainFS
 move  A0, S0
move  S0, S3
move  A0, S0
move  A1, R0
move  A2, S6
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 11
move  A0, S0
move  A1, R0
jal   0x800550F4
 move  A2, R0
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 4096
move  A0, S0
move  A1, R0
li    A2, 160
jal   0x80054904
 li    A3, 90
move  A0, S0
move  A1, R0
jal   0x80055458
 move  A2, R0
addiu S0, SP, 0x48
jal   0x800ECC0C
 move  A0, S0
lw    T5, 0x74(SP)
lw    A2, 0x24(T5)
addiu A2, A2, 0x18
move  A0, A2
move  A1, S0
jal   0x800ED128
 li    A3, 10
li    S2, 90
mtc1  R0, F20
move  S0, S3
li    AT, 0x3DCC0000 ; 0.099609
ori   AT, AT, 0xcccd
mtc1  AT, F22
L8010C494:
sll   A3, S2, 0x10
move  A0, S0
move  A1, R0
li    A2, 160
jal   0x80054904
 sra   A3, A3, 0x10
sll   A2, S1, 1
addu  A2, A2, S1
sll   A2, A2, 3
addu  A2, A2, S1
move  A0, S0
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
move  A0, S0
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x800551D8
 move  A1, R0
jal   SleepVProcess
 addiu S1, S1, 1
addiu S2, S2, -3
slti  V0, S1, 0xa
bnez  V0, L8010C494
 add.s F20, F20, F22
move  S0, S3
move  A0, S0
move  A1, R0
lui   A2, 0x3f80
jal   0x800551D8
 move  A3, A2
move  A0, S0
move  A1, R0
jal   0x80055458
 li    A2, 256
jal   SleepProcess
 li    A0, 10
lui   A0, hi(current_player_index)
jal   PlayerHasEmptyItemSlot
 lb    A0, lo(current_player_index)(A0)
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
sb    S5, 0(V1)
jal   0x800525C8
 move  A0, S0
jal   FreeGraphics
 move  A0, S6
j     L8010C180
       NOP
L8010C578:
lhu   T5, 0x6e(SP)
sll   V0, T5, 0x10
sra   V0, V0, 0x10
bne   V0, V1, L8010C598
       NOP
lhu   V0, 0xa(FP)
andi  V0, V0, 0xffef
sh    V0, 0xa(FP)
L8010C598:
jal   SleepProcess
 li    A0, 5
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
jal   SleepProcess
 li    A0, 5
lui   A1, hi(current_player_index)
lb    A1, lo(current_player_index)(A1)
jal   0x8004ACE0
 li    A0, 628
jal   SleepProcess
 li    A0, 20
jal   SleepVProcess
       NOP
li    V0, 2
sw    V0, 0x10(SP)
li    A0, -1
li    A1, -1
move  A2, R0
jal   0x800F2388
 li    A3, 5
jal   SleepProcess
 li    A0, 10
lw    A0, 0x5c(SP)
jal   0x800525C8
       NOP
lhu   T5, 0x66(SP)
sll   A0, T5, 0x10
jal   FreeGraphics
 sra   A0, A0, 0x10
j     L8010C684
       NOP
L8010C620:
sll   V0, S6, 2
lui   A1, hi(item_shop_cancelled_purchase_messages)
addu  A1, A1, V0
lw    A1, lo(item_shop_cancelled_purchase_messages)(A1)
jal   0x800EC590
 move  A0, FP
j     L8010C684
       NOP
L8010C640:
lhu   T5, 0x6e(SP)
sll   V0, T5, 0x10
sra   V0, V0, 0x10
bne   V0, V1, L8010C674
       NOP
jal   func_80106FE8
       NOP
li    V0, 1
lui   AT, hi(CORE_800CB99C)
jal   0x80049FB8
 sb    V0, lo(CORE_800CB99C)(AT)
j     L8010BC1C
 sll   V0, S6, 2
L8010C674:
jal   __PP64_INTERNAL_VIEW_MAP
       NOP
j     L8010BC1C
 sll   V0, S6, 2
L8010C684:
lhu   T5, 0x6e(SP)
sll   V0, T5, 0x10
sra   V0, V0, 0x10
li    V1, -1
beq   V0, V1, L8010C8B8
       NOP
jal   PlaySound
 li    A0, 277
move  A0, S4
li    A1, -1
jal   0x800D9CE8
 li    A2, 4
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   A1, 0x3f99
jal   0x8001C92C
 ori  A1, A1, 0x999a
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   V1, hi(CORE_800D03F8)
lw    V1, lo(CORE_800D03F8)(V1)
sll   V0, A0, 1
addu  V0, V0, A0
sll   V0, V0, 6
addu  V0, V0, V1
lbu   V1, 2(V0)
lui   A1, hi(CORE_800CCF58)
lw    A1, lo(CORE_800CCF58)(A1)
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 3
addu  V0, V0, A1
lh    V0, 2(V0)
mtc1  V0, F4
      NOP
cvt.s.w F4, F4
mfc1  A1, F4
jal   0x8001C6A8
       NOP
L8010C728:
jal   0x800D9E80
 move  A0, S4
andi  V0, V0, 0xffff
bnez  V0, L8010C74C
       NOP
jal   SleepVProcess
       NOP
j     L8010C728
       NOP
L8010C74C:
jal   0x800D9B24
 lw    A0, 0x7c(SP)
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F12
jal   0x8008EF20
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
div.s F22, F2, F0
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F20
li    AT, 0x3E4C0000 ; 0.199219
ori AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F28
      NOP
L8010C7A8:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S4)
add.s F20, F20, F30
c.lt.s F20, F28
      NOP
bc1t  L8010C7A8
       NOP
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F20
li    AT, 0x3E4C0000 ; 0.199219
ori AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori AT, AT, 0xcccd
mtc1  AT, F24
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
mtc1  R0, F28
      NOP
L8010C838:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
jal   SleepVProcess
 swc1  F0, 0x2c(S4)
sub.s F20, F20, F30
c.lt.s F28, F20
      NOP
bc1t  L8010C838
       NOP
sw    R0, 0x28(S4)
sw    R0, 0x24(S4)
sw    R0, 0x2c(S4)
jal   0x800D9B54
 move  A0, S4
lw    A0, 0x7c(SP)
jal   0x800D9B54
       NOP
L8010C8B8:
lui   A0, hi(current_player_index)
jal   0x800DB884
 lb    A0, lo(current_player_index)(A0)
jal   SleepProcess
 li    A0, 10
lw    RA, 0xb4(SP)
lw    FP, 0xb0(SP)
lw    S7, 0xac(SP)
lw    S6, 0xa8(SP)
lw    S5, 0xa4(SP)
lw    S4, 0xa0(SP)
lw    S3, 0x9c(SP)
lw    S2, 0x98(SP)
lw    S1, 0x94(SP)
lw    S0, 0x90(SP)
ldc1  F30, 0xe0(SP)
ldc1  F28, 0xd8(SP)
ldc1  F26, 0xd0(SP)
ldc1  F24, 0xc8(SP)
ldc1  F22, 0xc0(SP)
ldc1  F20, 0xb8(SP)
jr    RA
 addiu SP, SP, 0xe8

func_8010C914:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
jal   0x800D9AA4
 move  S2, A0
move  S1, R0
L8010C934:
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
andi  S0, S1, 0xff
lh    A0, 0(V0)
jal   0x8001F9E4
 move  A1, S0
lw    V0, 0x40(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 move  A1, S0
jal   SleepVProcess
 addiu S1, S1, 0xc
slti  V0, S1, 0x100
bnez  V0, L8010C934
       NOP
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 li    A1, 255
lw    V0, 0x40(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 li    A1, 255
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_8010C9B4:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S2, A0
li    S1, 255
L8010C9D0:
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
andi  S0, S1, 0xff
lh    A0, 0(V0)
jal   0x8001F9E4
 move  A1, S0
lw    V0, 0x40(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 move  A1, S0
jal   SleepVProcess
 addiu S1, S1, -0xc
bgez  S1, L8010C9D0
       NOP
lw    V0, 0x3c(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 move  A1, R0
lw    V0, 0x40(S2)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 move  A1, R0
jal   0x800D9B24
 move  A0, S2
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_8010CA54:
addiu SP, SP, -0x50
sw    RA, 0x38(SP)
sw    S7, 0x34(SP)
sw    S6, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
sdc1  F22, 0x48(SP)
sdc1  F20, 0x40(SP)
move  S3, A0
move  S6, R0
li    A0, 1
jal   0x8005279C
 li    A1, 5
move  S5, V0
lui A0, 0x13
jal   ReadMainFS
 ori A0, A0, 0x20e
move  S0, V0
jal   ImgPackParse
 move  A0, S0
move  S7, V0
jal   FreeMainFS
 move  A0, S0
sll   S0, S5, 0x10
sra   S0, S0, 0x10
sll   A2, S7, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 10
move  A0, S0
move  A1, R0
jal   0x800550F4
 move  A2, R0
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 4096
sll   V0, S3, 3
lui   AT, hi(D_8011E1EC)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E1EC)(AT)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E1F0)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E1F0)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
move  A0, S0
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   PlaySound
 li    A0, 308
move  S0, R0
sll   V0, S5, 0x10
sra   S2, V0, 0x10
sll   S1, S3, 3
L8010CB88:
mtc1  S0, F4
      NOP
cvt.s.w F4, F4
lui   AT, hi(D_8011E20C)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F4, F0
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S1
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E210)(AT)
mul.s F4, F4, F0
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E1F0)(AT)
add.s F4, F4, F0
trunc.w.s F0, F4
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S2
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
sll   A2, S0, 4
move  A0, S2
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0x11
bnez  V0, L8010CB88
 sll   A0, S5, 0x10
sra   A0, A0, 0x10
move  A1, R0
jal   0x80055458
 li    A2, 255
move  A0, S3
jal   PlayerHasItem
 li    A1, ITEM_BOO_REPELLANT
li    V1, -1
beq   V0, V1, L8010CC74
 li    A1, 16386
li    S6, 1
lui   A0, hi(D_801127D8)
addiu A0, A0, lo(D_801127D8)
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S3, 0x8c(V0)
L8010CC74:
bnez  S6, L8010CCA4
 sll   A0, S3, 0x10
sll   V1, S3, 3
subu  V1, V1, S3
sll   V1, V1, 3
lui   V0, hi(p1_stars)
addu  V0, V0, V1
lbu   V0, lo(p1_stars)(V0)
addiu V0, V0, -1
lui   AT, hi(p1_stars)
addu  AT, AT, V1
sb    V0, lo(p1_stars)(AT)
L8010CCA4:
sra   A0, A0, 0x10
jal   0x800FF900
 li    A1, 5
jal   PlaySound
 li    A0, 599
beqz  S6, L8010CCC4
 li    S2, 30
li    S2, 120
L8010CCC4:
beqz  S2, L8010CD9C
 move  S0, R0
sll   S1, S3, 3
li    AT, 0x41800000 ; 16.000000
mtc1  AT, F20
li    AT, 0x40800000 ; 4.000000
mtc1  AT, F22
sll   S4, S5, 0x10
sll   V1, S0, 1
L8010CCE8:
addu  V1, V1, S0
sll   V0, V1, 4
subu  V0, V0, V1
sll   V0, V0, 1
mtc1  V0, F12
      NOP
cvt.s.w F12, F12
jal   0x8008EF20
 addiu S0, S0, 1
lui   AT, hi(D_8011E210)
addu  AT, AT, S1
lwc1  F2, lo(D_8011E210)(AT)
mul.s F2, F2, F20
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S1
lwc1  F4, lo(D_8011E1F0)(AT)
add.s F2, F2, F4
mul.s F0, F0, F22
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E20C)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F0, F20
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S1
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
sra   A0, S4, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
jal   SleepVProcess
       NOP
slt   V0, S0, S2
bnez  V0, L8010CCE8
 sll   V1, S0, 1
L8010CD9C:
li    S0, 16
sll   V0, S5, 0x10
sra   S2, V0, 0x10
sll   S1, S3, 3
L8010CDAC:
mtc1  S0, F4
      NOP
cvt.s.w F4, F4
lui   AT, hi(D_8011E20C)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F4, F0
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S1
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E210)(AT)
mul.s F4, F4, F0
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S1
lwc1  F0, lo(D_8011E1F0)(AT)
add.s F4, F4, F0
trunc.w.s F0, F4
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S2
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
sll   A2, S0, 4
move  A0, S2
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S0, S0, -1
bgez  S0, L8010CDAC
 sll   A0, S5, 0x10
jal   0x800525C8
 sra   A0, A0, 0x10
sll   A0, S7, 0x10
jal   FreeGraphics
 sra   A0, A0, 0x10
sltiu V0, S6, 1
lw    RA, 0x38(SP)
lw    S7, 0x34(SP)
lw    S6, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
ldc1  F22, 0x48(SP)
ldc1  F20, 0x40(SP)
jr    RA
 addiu SP, SP, 0x50

D_8010CE9C:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
jal   0x800EC3E4
       NOP
jal   EndProcess
 move  A0, R0
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

func_8010CEC0:
addiu SP, SP, -0xb0
sw    RA, 0x94(SP)
sw    FP, 0x90(SP)
sw    S7, 0x8c(SP)
sw    S6, 0x88(SP)
sw    S5, 0x84(SP)
sw    S4, 0x80(SP)
sw    S3, 0x7c(SP)
sw    S2, 0x78(SP)
sw    S1, 0x74(SP)
sw    S0, 0x70(SP)
sdc1  F24, 0xa8(SP)
sdc1  F22, 0xa0(SP)
sdc1  F20, 0x98(SP)
move  S4, A0
sw    R0, 0x1c(SP)
li    A0, 1
jal   0x8005279C
 li    A1, 5
sh    V0, 0x26(SP)
lui A0, 0x13
jal   ReadMainFS
 ori A0, A0, 0x20e
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sh    V0, 0x2e(SP)
jal   FreeMainFS
 move  A0, S0
lhu   T0, 0x26(SP)
sll   S1, T0, 0x10
sra   S1, S1, 0x10
lhu   T0, 0x2e(SP)
sll   A2, T0, 0x10
move  A0, S1
move  A1, R0
sra   A2, A2, 0x10
jal   0x80055024
 move  A3, R0
move  A0, S1
move  A1, R0
jal   0x80055294
 li    A2, 10
move  A0, S1
move  A1, R0
jal   0x800550F4
 move  A2, R0
move  A0, S1
move  A1, R0
jal   0x800553A8
 li    A2, 4096
sll   S0, S4, 3
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E1EC)(AT)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E1F0)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S1
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
move  A0, S1
move  A1, R0
jal   0x80055458
 move  A2, R0
li    A0, 1
jal   0x8005279C
 li    A1, 5
sh    V0, 0x36(SP)
subu  S0, S0, S4
sll   S0, S0, 3
lui   V0, hi(p1_char)
addu  V0, V0, S0
lbu   V0, lo(p1_char)(V0)
sll   V0, V0, 2
lui   A0, hi(CORE_80101040)
addu  A0, A0, V0
lw    A0, lo(CORE_80101040)(A0)
jal   ReadMainFS
 move  S5, R0
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sh    V0, 0x3e(SP)
jal   FreeMainFS
 move  A0, S0
lhu   T0, 0x36(SP)
sll   V0, T0, 0x10
sra   S0, V0, 0x10
lhu   T0, 0x3e(SP)
sll   A2, T0, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 10
move  A0, S0
move  A1, R0
jal   0x800550F4
 li    A2, 1
andi  V0, S4, 1
beqz  V0, L8010D0A0
 move  A0, S0
move  A1, R0
j     L8010D0B4
 li    A2, 4097
L8010D0A0:
lhu   T0, 0x36(SP)
sll   A0, T0, 0x10
sra   A0, A0, 0x10
move  A1, R0
li    A2, 4096
L8010D0B4:
jal   0x800553A8
       NOP
move  A0, S4
jal   PlayerHasItem
 li    A1, ITEM_BOO_REPELLANT
li    V1, -1
beq   V0, V1, L8010D0E8
 move  A1, R0
lhu   T0, 0x36(SP)
sll   A0, T0, 0x10
sra   A0, A0, 0x10
jal   0x800553A8
 li    A2, 32768
L8010D0E8:
lhu   T0, 0x36(SP)
sll   S0, T0, 0x10
sra   S0, S0, 0x10
sll   V0, S4, 3
lui   AT, hi(D_8011E20C)
addu  AT, AT, V0
lwc1  F2, lo(D_8011E20C)(AT)
li    AT, 0x41800000 ; 16.000000
mtc1  AT, F4
      NOP
mul.s F2, F2, F4
lui   AT, hi(D_8011E1EC)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E1EC)(AT)
sub.s F0, F0, F2
li    AT, 0x41000000 ; 8.000000
mtc1  AT, F2
      NOP
sub.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F0, F4
lui   AT, hi(D_8011E1F0)
addu  AT, AT, V0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
move  A0, S0
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   PlaySound
 li    A0, 307
move  S1, R0
lhu   T0, 0x26(SP)
sll   V0, T0, 0x10
sra   S3, V0, 0x10
sll   S2, S4, 3
lhu   T0, 0x36(SP)
sll   S6, T0, 0x10
L8010D1BC:
mtc1  S1, F4
      NOP
cvt.s.w F4, F4
lui   AT, hi(D_8011E20C)
addu  AT, AT, S2
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F4, F0
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S2
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S2
lwc1  F0, lo(D_8011E210)(AT)
mul.s F4, F4, F0
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S2
lwc1  F0, lo(D_8011E1F0)(AT)
add.s F4, F4, F0
trunc.w.s F0, F4
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S3
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
sll   S0, S1, 4
andi  S0, S0, 0xffff
move  A0, S3
move  A1, R0
jal   0x80055458
 move  A2, S0
sra   A0, S6, 0x10
move  A1, R0
jal   0x80055458
 move  A2, S0
jal   SleepVProcess
 addiu S1, S1, 1
slti  V0, S1, 0x11
bnez  V0, L8010D1BC
 move  A1, R0
lhu   T0, 0x26(SP)
sll   A0, T0, 0x10
sra   A0, A0, 0x10
jal   0x80055458
 li    A2, 255
lhu   T0, 0x36(SP)
sll   A0, T0, 0x10
sra   A0, A0, 0x10
move  A1, R0
jal   0x80055458
 li    A2, 255
move  A0, S4
jal   PlayerHasItem
 li    A1, ITEM_BOO_REPELLANT
li    S0, -1
nor   V0, R0, V0
sltu  V0, R0, V0
subu  V0, R0, V0
andi  V0, V0, 0x620f
sll   V1, S4, 3
subu  V1, V1, S4
sll   V1, V1, 3
lui   AT, hi(p1_char)
addu  AT, AT, V1
lbu   V1, lo(p1_char)(AT)
sll   V1, V1, 2
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
ori   A0, V0, 0x620e
lui   A1, hi(CORE_801014A0)
addu  A1, A1, V1
lw    A1, lo(CORE_801014A0)(A1)
move  A2, R0
jal   0x800EC1E8
 move  A3, R0
sll   A0, S4, 0x10
sra   A0, A0, 0x10
jal   0x800FF900
 li    A1, 2
jal   0x800EC3C0
 move  A0, S4
move  A0, S4
jal   PlayerHasItem
 li    A1, ITEM_BOO_REPELLANT
beq   V0, S0, L8010D34C
 li    A1, 4096
lui   A0, hi(D_8010CE9C)
addiu A0, A0, lo(D_8010CE9C)
move  A2, R0
jal   InitProcess
 move  A3, R0
jal   SleepProcess
 li    A0, 20
L8010D34C:
move  FP, R0
move  S2, R0
move  A0, S4
jal   PlayerHasItem
 li    A1, ITEM_BOO_REPELLANT
li    V1, -1
beq   V0, V1, L8010D390
 li    T0, 1
li    FP, 1
sw    T0, 0x1c(SP)
lui   A0, hi(D_801127D8)
addiu A0, A0, lo(D_801127D8)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S4, 0x8c(V0)
L8010D390:
jal   PlaySound
 li    A0, 307
sll   A0, S4, 0x10
sra   A0, A0, 0x10
li    A1, 3
jal   0x800FFA4C
 li    A2, 5
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F12
      NOP
jal   0x800EEF80
 sw    V0, 0x44(SP)
addiu S6, V0, 1
move  S1, R0
move  S7, R0
sll   S0, S4, 3
li    AT, 0x41800000 ; 16.000000
mtc1  AT, F22
li    AT, 0x41000000 ; 8.000000
mtc1  AT, F24
lhu   T0, 0x36(SP)
sll   T0, T0, 0x10
sw    T0, 0x4c(SP)
sll   V0, S4, 3
subu  V0, V0, S4
sll   V0, V0, 3
sw    V0, 0x54(SP)
sll   T0, S4, 3
subu  T0, T0, S4
sw    T0, 0x5c(SP)
sll   T0, S4, 3
subu  T0, T0, S4
sw    T0, 0x64(SP)
sll   T0, S4, 3
subu  T0, T0, S4
sw    T0, 0x6c(SP)
lw    T0, 0x4c(SP)
sra   S3, T0, 0x10
L8010D428:
sll   V0, S6, 0x10
bnez  V0, L8010D454
 slti  V0, S2, 2
jal   PlaySound
 li    A0, 599
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
addiu S6, V0, 0x1e
slti  V0, S2, 2
L8010D454:
xori  V0, V0, 1
subu  S2, S2, V0
bnez  S2, L8010D514
 li    V0, 9
sll   V1, S1, 1
addu  V1, V1, S1
sll   V0, V1, 4
subu  V0, V0, V1
sll   V0, V0, 1
mtc1  V0, F12
      NOP
jal   0x8008EF20
 cvt.s.w F12, F12
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E210)(AT)
mul.s F2, F2, F22
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F4, lo(D_8011E1F0)(AT)
add.s F2, F2, F4
add.s F0, F0, F0
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
lhu   T0, 0x26(SP)
sll   A0, T0, 0x10
lui   AT, hi(D_8011E20C)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F0, F22
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
sra   A0, A0, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
j     L8010D640
       NOP
L8010D514:
bne   S2, V0, L8010D640
 sll   V1, S7, 1
addu  V1, V1, S7
sll   V0, V1, 4
subu  V0, V0, V1
sll   V0, V0, 1
mtc1  V0, F20
      NOP
cvt.s.w F20, F20
jal   0x8008EF20
 mov.s F12, F20
lui   AT, hi(D_8011E20C)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E20C)(AT)
mul.s F2, F2, F22
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F4, lo(D_8011E1EC)(AT)
add.s F2, F2, F4
add.s F0, F0, F0
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A2, F0
      NOP
sll   A2, A2, 0x10
lhu   T0, 0x26(SP)
sll   A0, T0, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F0, F22
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
sra   A0, A0, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
jal   0x8008EF20
 mov.s F12, F20
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1EC)(AT)
sub.s F2, F2, F24
add.s F0, F0, F0
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A2, F0
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F0, F22
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lw    T0, 0x4c(SP)
sra   A0, T0, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
addiu S7, S7, 1
L8010D640:
lw    T0, 0x54(SP)
lui   V0, hi(CORE_800D110C)
addu  V0, V0, T0
lbu   V0, lo(CORE_800D110C)(V0)
andi  V0, V0, 1
beqz  V0, L8010D72C
       NOP
beqz  S2, L8010D75C
       NOP
lui   V0, hi(p1_cpu_difficulty)
addu  V0, V0, T0
lbu   V0, lo(p1_cpu_difficulty)(V0)
bnez  V0, L8010D690
       NOP
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
j     L8010D714
 li    V1, 6
L8010D690:
lw    T0, 0x5c(SP)
sll   V0, T0, 3
lui   V1, hi(p1_cpu_difficulty)
addu  V1, V1, V0
lbu   V1, lo(p1_cpu_difficulty)(V1)
li    V0, 1
bne   V1, V0, L8010D6C8
       NOP
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
j     L8010D714
 li    V1, 7
L8010D6C8:
lw    T0, 0x64(SP)
sll   V0, T0, 3
lui   V1, hi(p1_cpu_difficulty)
addu  V1, V1, V0
lbu   V1, lo(p1_cpu_difficulty)(V1)
li    V0, 2
bne   V1, V0, L8010D700
       NOP
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
j     L8010D714
 li    V1, 8
L8010D700:
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
li    V1, 9
L8010D714:
subu  V1, V1, V0
slt   V1, V1, S2
beqz  V1, L8010D75C
 sltiu V1, S2, 1
j     L8010D804
       NOP
L8010D72C:
lw    T0, 0x6c(SP)
sll   V0, T0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
lui   AT, hi(CORE_800C9520)
addu  AT, AT, V0
lhu   V0, lo(CORE_800C9520)(AT)
andi  V0, V0, 0x8000
beqz  V0, L8010D804
 sltiu V1, S2, 1
L8010D75C:
lw    T0, 0x1c(SP)
bnez  T0, L8010D804
 sltiu V1, S2, 1
addiu FP, FP, 1
bnez  S5, L8010D800
 li    S2, 10
move  A0, S3
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
move  A0, S3
move  A1, R0
jal   0x800550F4
 li    A2, 1
li    S5, 1
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E1EC)(AT)
sub.s F0, F0, F24
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F0, F22
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S3
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
L8010D800:
sltiu V1, S2, 1
L8010D804:
xori  V0, S5, 1
sltiu V0, V0, 1
and   V1, V1, V0
beqz  V1, L8010D8B4
 move  A0, S3
move  A1, R0
move  A2, R0
jal   0x80055140
 move  A3, R0
move  A0, S3
move  A1, R0
jal   0x800550F4
 li    A2, 1
move  S5, R0
lui   AT, hi(D_8011E20C)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E20C)(AT)
mul.s F2, F2, F22
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E1EC)(AT)
sub.s F0, F0, F2
sub.s F0, F0, F24
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F0, F22
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S3
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
L8010D8B4:
jal   SleepVProcess
 addiu S1, S1, 1
slti  V0, S1, 0x78
bnez  V0, L8010D428
 addiu S6, S6, -1
lw    A0, 0x44(SP)
jal   0x800FFAEC
       NOP
lw    T0, 0x1c(SP)
bnez  T0, L8010D8F4
 li    A1, 4096
lui   A0, hi(D_8010CE9C)
addiu A0, A0, lo(D_8010CE9C)
move  A2, R0
jal   InitProcess
 move  A3, R0
L8010D8F4:
bnez  FP, L8010D9D4
 li    S1, 16
lhu   T0, 0x26(SP)
sll   V0, T0, 0x10
sra   S3, V0, 0x10
sll   S2, S4, 3
lhu   T0, 0x36(SP)
sll   S5, T0, 0x10
L8010D914:
mtc1  S1, F4
      NOP
cvt.s.w F4, F4
lui   AT, hi(D_8011E20C)
addu  AT, AT, S2
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F4, F0
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S2
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S2
lwc1  F0, lo(D_8011E210)(AT)
mul.s F4, F4, F0
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S2
lwc1  F0, lo(D_8011E1F0)(AT)
add.s F4, F4, F0
trunc.w.s F0, F4
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S3
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
sll   S0, S1, 4
andi  S0, S0, 0xffff
move  A0, S3
move  A1, R0
jal   0x80055458
 move  A2, S0
sra   A0, S5, 0x10
move  A1, R0
jal   0x80055458
 move  A2, S0
jal   SleepVProcess
 addiu S1, S1, -2
bltz  S1, L8010DB78
       NOP
j     L8010D914
       NOP
L8010D9D4:
lhu   T0, 0x26(SP)
sll   S2, T0, 0x10
sll   S0, S4, 3
L8010D9E0:
mtc1  S1, F20
      NOP
cvt.s.w F20, F20
lui   AT, hi(D_8011E20C)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E20C)(AT)
mul.s F0, F20, F0
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F20, F0
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
sra   A0, S2, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
lhu   T0, 0x36(SP)
sll   A0, T0, 0x10
addiu V0, S1, -0x10
mtc1  V0, F0
      NOP
cvt.s.w F0, F0
lui   AT, hi(D_8011E20C)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E20C)(AT)
mul.s F0, F0, F2
lui   AT, hi(D_8011E1EC)
addu  AT, AT, S0
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
li    AT, 0x41000000 ; 8.000000
mtc1  AT, F2
      NOP
sub.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E210)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F20, F20, F0
lui   AT, hi(D_8011E1F0)
addu  AT, AT, S0
lwc1  F0, lo(D_8011E1F0)(AT)
add.s F20, F20, F0
trunc.w.s F0, F20
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
sra   A0, A0, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
lw    T0, 0x1c(SP)
bnezl T0, L8010DB08
 addiu S1, S1, -2
L8010DB08:
jal   SleepVProcess
 addiu S1, S1, -2
slti  V0, S1, -0x10
beqz  V0, L8010D9E0
 move  A1, R0
lhu   T0, 0x36(SP)
sll   S0, T0, 0x10
sra   S0, S0, 0x10
move  A0, S0
move  A2, R0
jal   0x80055140
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x800550F4
 li    A2, 1
li    S1, 16
lhu   T0, 0x26(SP)
sll   S0, T0, 0x10
sll   A2, S1, 4
L8010DB58:
sra   A0, S0, 0x10
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S1, S1, -2
bgez  S1, L8010DB58
 sll   A2, S1, 4
L8010DB78:
lhu   T0, 0x26(SP)
sll   A0, T0, 0x10
jal   0x800525C8
 sra   A0, A0, 0x10
lhu   T0, 0x2e(SP)
sll   A0, T0, 0x10
jal   FreeGraphics
 sra   A0, A0, 0x10
lhu   T0, 0x36(SP)
sll   A0, T0, 0x10
jal   0x800525C8
 sra   A0, A0, 0x10
lhu   T0, 0x3e(SP)
sll   A0, T0, 0x10
jal   FreeGraphics
 sra   A0, A0, 0x10
lw    T0, 0x1c(SP)
bnez  T0, L8010DCAC
 li    S5, -2
move  S1, R0
lui   A0, hi(current_turn)
lb    A0, lo(current_turn)(A0)
sll   V0, S1, 1
L8010DBD4:
addu  V1, V0, S1
lui   V0, hi(D_8011E22C)
addu  V0, V0, V1
lbu   V0, lo(D_8011E22C)(V0)
slt   V0, A0, V0
bnezl V0, L8010DC0C
 addiu S1, S1, 1
lui   V0, hi(D_8011E22D)
addu  V0, V0, V1
lbu   V0, lo(D_8011E22D)(V0)
slt   V0, V0, A0
beqz  V0, L8010DC18
 sll   V0, S1, 1
addiu S1, S1, 1
L8010DC0C:
sltiu V0, S1, 6
bnez  V0, L8010DBD4
 sll   V0, S1, 1
L8010DC18:
addu  V0, V0, S1
lui   S5, hi(D_8011E22E)
addu  S5, S5, V0
lbu   S5, lo(D_8011E22E)(S5)
move  S1, R0
sll   V0, S1, 1
L8010DC30:
addu  V1, V0, S1
lui   V0, hi(D_8011E240)
addu  V0, V0, V1
lbu   V0, lo(D_8011E240)(V0)
slt   V0, FP, V0
bnezl V0, L8010DC68
 addiu S1, S1, 1
lui   V0, hi(D_8011E241)
addu  V0, V0, V1
lbu   V0, lo(D_8011E241)(V0)
slt   V0, V0, FP
beqz  V0, L8010DC74
 sll   V0, S1, 1
addiu S1, S1, 1
L8010DC68:
sltiu V0, S1, 0xe
bnez  V0, L8010DC30
 sll   V0, S1, 1
L8010DC74:
addu  V0, V0, S1
lui   AT, hi(D_8011E242)
addu  AT, AT, V0
lbu   V0, lo(D_8011E242)(AT)
subu  S5, S5, V0
sll   V0, S4, 3
subu  V0, V0, S4
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slt   V0, S5, V0
beql  V0, R0, L8010DCAC
 li    S5, -1
L8010DCAC:
move  V0, S5
lw    RA, 0x94(SP)
lw    FP, 0x90(SP)
lw    S7, 0x8c(SP)
lw    S6, 0x88(SP)
lw    S5, 0x84(SP)
lw    S4, 0x80(SP)
lw    S3, 0x7c(SP)
lw    S2, 0x78(SP)
lw    S1, 0x74(SP)
lw    S0, 0x70(SP)
ldc1  F24, 0xa8(SP)
ldc1  F22, 0xa0(SP)
ldc1  F20, 0x98(SP)
jr    RA
 addiu SP, SP, 0xb0

boo_event_helper_process:
addiu SP, SP, -0x40
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F26, 0x38(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
jal   0x8004EE68
 sdc1  F20, 0x20(SP)
lw    S1, 0x8c(V0)
lui   A0, hi(D_8011FB58)
jal   0x800D975C
 lw    A0, lo(D_8011FB58)(A0)
move  S0, V0
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, S1, 0xc
addiu A0, S0, 0x24
lui   A1, 0x4000
move  A2, A1
jal   0x80089A10
 move  A3, A1
lwc1  F0, 0x30(S1)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F2
      NOP
add.s F0, F0, F2
swc1  F0, 0x30(S0)
jal   0x800D9AA4
 move  A0, S0
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
mtc1  V0, F20
      NOP
cvt.s.w F20, F20
lui   AT, hi(D_8011F8D8)
ldc1  F22, lo(D_8011F8D8)(AT)
li    AT, 0x420C0000 ; 35.000000
mtc1  AT, F26
li    AT, 0x42200000 ; 40.000000
mtc1  AT, F24
L8010DD98:
jal   SleepVProcess
       NOP
lwc1  F0, 0x30(S0)
cvt.d.s F0, F0
add.d F0, F0, F22
cvt.s.d F0, F0
swc1  F0, 0x30(S0)
lwc1  F2, 0x30(S1)
add.s F2, F2, F26
c.le.s F2, F0
      NOP
bc1t  L8010DE0C
       NOP
add.s F20, F20, F24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F20
      NOP
jal   0x8008A2A0
 addiu A0, A0, 0x74
j     L8010DD98
       NOP
L8010DE0C:
jal   0x800D9B54
 move  A0, S0
jal   EndProcess
 move  A0, R0
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F26, 0x38(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x40

boo_event_helper:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
lui   A0, hi(boo_event_helper_process)
addiu A0, A0, lo(boo_event_helper_process)
li    A1, 4096
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S0, 0x8c(V0)
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

__PP64_INTERNAL_BOO_SPACE_EVENT:
boo_event:
addiu SP, SP, -0x118
sw    RA, 0xe4(SP)
sw    FP, 0xe0(SP)
sw    S7, 0xdc(SP)
sw    S6, 0xd8(SP)
sw    S5, 0xd4(SP)
sw    S4, 0xd0(SP)
sw    S3, 0xcc(SP)
sw    S2, 0xc8(SP)
sw    S1, 0xc4(SP)
sw    S0, 0xc0(SP)
sdc1  F30, 0x110(SP)
sdc1  F28, 0x108(SP)
sdc1  F26, 0x100(SP)
sdc1  F24, 0xf8(SP)
sdc1  F22, 0xf0(SP)
sdc1  F20, 0xe8(SP)
move  S4, R0
move  S6, R0
jal   GetCurrentSpaceIndex
 sw    R0, 0x9c(SP)
lui   S7, hi(CORE_800CD058)
addiu S7, S7, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
jal   0x800DBEC0
 move  S0, V0
sw    V0, 0xb4(SP)
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
sh    R0, 0xae(SP)
lbu   A0, 0xf(S0)
sll   A0, A0, 0x18
sra   A0, A0, 0x18
lbu   A1, 0x10(S0)
sll   A1, A1, 0x18
sra   A1, A1, 0x18
andi  A0, A0, 0xffff
jal   GetAbsSpaceIndexFromChainSpaceIndex
 andi  A1, A1, 0xffff
move  S2, V0
sll   V0, S2, 0x10
sra   S0, V0, 0x10
li    V0, ${c}
beq   S0, V0, L8010DFB4
 li    T0, -1
sw    T0, 0x94(SP)
li    T0, -1
sh    T0, 0xa6(SP)
lui   A0, hi(D_8011FB08)
jal   0x800D975C
 lw    A0, lo(D_8011FB08)(A0)
sw    V0, 0x8c(SP)
jal   0x800D9B24
 lw    A0, 0x8c(SP)
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F0
lw    T0, 0x8c(SP)
swc1  F0, 0x30(T0)
jal   GetSpaceData
 move  A0, S0
move  S1, V0
lwc1  F2, 0xc(S1)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F0
lw    T0, 0x8c(SP)
lw    A1, 8(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x10(S1)
jal   0x80089A10
 addiu A0, T0, 0xc
j     L8010E2D8
       NOP
L8010DFB4:
sw    R0, 0x94(SP)
li    T0, ${s}
sh    T0, 0xa6(SP)
jal   GetSpaceData
 li    A0, ${s}
move  S1, V0
lui   T0, hi(D_8011FB0C)
lw    T0, lo(D_8011FB0C)(T0)
sw    T0, 0x8c(SP)
jal   PlaySound
 li    A0, 293
li    A0, 51
jal   0x800D90C8
 move  A1, R0
move  S4, V0
lb    V0, 1(S7)
sll   V0, V0, 2
lui   AT, hi(D_8011E280)
addu  AT, AT, V0
lw    V0, lo(D_8011E280)(AT)
beqz  V0, L8010E01C
       NOP
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
jal   0x8001ED54
 lh    A0, 0(V0)
L8010E01C:
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001C448
 addiu S1, S1, 8
jal   0x800D9714
 move  A0, S4
sll   A0, S2, 0x10
jal   GetSpaceData
 sra   A0, A0, 0x10
addiu S0, SP, 0x68
move  A0, S0
addiu A1, V0, 8
jal   midpoint
 move  A2, S1
jal   0x800D88E8
 move  A0, S0
addiu A0, S4, 0x18
jal   0x80089A20
 move  A1, S0
sw    R0, 0x28(S4)
addiu A0, S4, 0xc
jal   0x80089A20
 move  A1, S1
move  A0, S4
li    A1, -1
jal   0x800D9CE8
 li    A2, 1
jal   0x800D9AA4
 move  A0, S4
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F12
jal   0x8008EF20
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
div.s F22, F2, F0
mtc1  R0, F20
li    AT, 0x3F7D0000 ; 0.988281
ori AT, AT, 0x70a4
mtc1  AT, F26
li    AT, 0x3C230000 ; 0.009949
ori AT, AT, 0xd70a
mtc1  AT, F24
lui   S0, hi(D_8011E280)
addiu S0, S0, lo(D_8011E280)
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F28
      NOP
L8010E0EC:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x2c(S4)
lb    V0, 1(S7)
sll   V0, V0, 2
addu  V0, V0, S0
lw    V0, 0(V0)
beqz  V0, L8010E158
       NOP
lwc1  F0, 0x24(S4)
neg.s F0, F0
swc1  F0, 0x24(S4)
L8010E158:
jal   SleepVProcess
       NOP
add.s F20, F20, F30
c.lt.s F20, F28
      NOP
bc1t  L8010E0EC
       NOP
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F0
      NOP
c.lt.s F0, F20
      NOP
bc1f  L8010E24C
       NOP
li    AT, 0x3F7D0000 ; 0.988281
ori AT, AT, 0x70a4
mtc1  AT, F26
li    AT, 0x3C230000 ; 0.009949
ori AT, AT, 0xd70a
mtc1  AT, F24
lui   S0, hi(D_8011E280)
addiu S0, S0, lo(D_8011E280)
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F28
      NOP
L8010E1C4:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x2c(S4)
lb    V0, 1(S7)
sll   V0, V0, 2
addu  V0, V0, S0
lw    V0, 0(V0)
beqz  V0, L8010E230
       NOP
lwc1  F0, 0x24(S4)
neg.s F0, F0
swc1  F0, 0x24(S4)
L8010E230:
jal   SleepVProcess
       NOP
sub.s F20, F20, F30
c.lt.s F28, F20
      NOP
bc1t  L8010E1C4
       NOP
L8010E24C:
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x28(S4)
swc1  F0, 0x24(S4)
swc1  F0, 0x2c(S4)
lb    V0, 1(S7)
sll   V0, V0, 2
lui   AT, hi(D_8011E280)
addu  AT, AT, V0
lw    V0, lo(D_8011E280)(AT)
beqz  V0, L8010E290
 move  A0, S4
li    AT, 0xBF800000 ; -1.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x24(S4)
L8010E290:
li    A1, -1
jal   0x800D9CE8
 move  A2, R0
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui A1, 0x3f99
jal   0x8001C92C
 ori A1, A1, 0x999a
L8010E2B4:
jal   0x800D9E0C
 move  A0, S4
andi  V0, V0, 0xffff
bnez  V0, L8010E2D8
       NOP
jal   SleepVProcess
       NOP
j     L8010E2B4
       NOP
L8010E2D8:
jal   PlaySound
 li    A0, 599
lw    A0, 0x8c(SP)
jal   func_8010C914
       NOP
sll   A0, S2, 0x10
jal   GetSpaceData
 sra   A0, A0, 0x10
move  S1, V0
lhu   T0, 0xa6(SP)
sll   V0, T0, 0x10
sra   S0, V0, 0x10
li    V0, -1
beq   S0, V0, L8010E36C
 addiu A1, S1, 8
lw    A0, 0x8c(SP)
jal   0x800D9F5C
 li    A2, 5
li    A0, -1
li    A1, 5
jal   0x800ED20C
 move  A2, S0
jal   SleepProcess
 li    A0, 5
jal   0x8004EE68
       NOP
li    AT, 0x3FCC0000 ; 1.593750
ori AT, AT, 0xcccd
mtc1  AT, F12
      NOP
jal   0x800E8EDC
 move  S0, V0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
       NOP
L8010E36C:
lb    V0, 0xf(S7)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
slti  V0, V0, 5
beqz  V0, L8010E3A4
 li    A0, 7
jal   0x800EC590
 li    A1, 0x6201 ; "Don't trouble me if you have no coins! Shoo! Shoo!"
j     L8010ECE0
       NOP
L8010E3A4:
move  S0, R0
L8010E3A8:
lb    A0, 0xf(S7)
L8010E3AC:
beq   S0, A0, L8010E3E4
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V1, V0, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
bnez  V0, L8010E3F4
 slti  V0, S0, 4
lui   V0, hi(p1_stars)
addu  V0, V0, V1
lb    V0, lo(p1_stars)(V0)
bnez  V0, L8010E3F4
 slti  V0, S0, 4 ; total players
L8010E3E4:
addiu S0, S0, 1
slti  V0, S0, 4 ; total players
bnez  V0, L8010E3AC
       NOP
L8010E3F4:
bnez  V0, L8010E410
 move  S0, R0
li    A0, 7
jal   0x800EC590
 li    A1, 0x6202 ; "There isn't a soul with coins or stars ..."
j     L8010ECE0
       NOP
L8010E410:
lb    V1, 0xf(S7)
L8010E414:
beq   S0, V1, L8010E438
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
bnez  V0, L8010E448
 li    V0, 4
L8010E438:
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L8010E414
 li    V0, 4
L8010E448:
bne   S0, V0, L8010E460
 li    V0, 8
li    V0, 1
sb    V0, 0x20(SP)
j     L8010E46C
 sb    R0, 0x60(SP)
L8010E460:
sb    V0, 0x20(SP)
li    V0, 1
sb    V0, 0x60(SP)
L8010E46C:
sb    R0, 0x21(SP)
move  S0, R0
lb    V1, 0xf(S7)
L8010E478:
beq   S0, V1, L8010E49C
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_stars)
addu  AT, AT, V0
lb    V0, lo(p1_stars)(AT)
bnez  V0, L8010E4AC
 li    V0, 4
L8010E49C:
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L8010E478
 li    V0, 4
L8010E4AC:
beq   S0, V0, L8010E4F8
 li    V0, 1
lb    V0, 0xf(S7)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
slti  V0, V0, 0x32
bnez  V0, L8010E4F8
 li    V0, 1
lui   V0, hi(p1_stars)
addu  V0, V0, V1
lb    V0, lo(p1_stars)(V0)
slti  V0, V0, MAX_PLAYER_STAR_COUNT
bnez  V0, L8010E504
 li    V0, 8
li    V0, 1
L8010E4F8:
sb    V0, 0x30(SP)
j     L8010E510
 sb    R0, 0x61(SP)
L8010E504:
sb    V0, 0x30(SP)
li    V0, 1
sb    V0, 0x61(SP)
L8010E510:
sb    R0, 0x31(SP)
li    V0, 1
sb    V0, 0x63(SP)
sb    V0, 0x62(SP)
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 7
li    A1, 0x6200 ; "Ooo, hoo, hoo! Which shall I steal? ..."
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage
 addiu A3, SP, 0x30
jal   func_80107BB4
 addiu A0, SP, 0x60
move  S0, V0
jal   0x800EC6C8
 sh    S0, 0xae(SP)
jal   0x800EC6EC
 sll   S0, S0, 0x10
sra   S0, S0, 0x10
li    V0, 2
beq   S0, V0, L8010EC88
 slti  V0, S0, 3
bnez  V0, L8010E584
 li    V0, 3
beq   S0, V0, L8010ECA4
 li    V0, -1
j     L8010ECE0
       NOP
L8010E584:
bltz  S0, L8010ECE0
 move  S0, R0
move  S1, R0
L8010E590:
addiu S3, SP, 0x60
L8010E594:
addiu S2, SP, 0x20
li    S5, 1
lhu   T0, 0xae(SP)
sll   V0, T0, 0x10
sra   V0, V0, 0x10
sw    V0, 0xbc(SP)
li    FP, 8
L8010E5B0:
lb    V0, 0xf(S7)
beql  S0, V0, L8010E608
 addu  V0, S3, S1
lw    T0, 0xbc(SP)
bnez  T0, L8010E5EC
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
beqz  V0, L8010E608
 addu  V0, S3, S1
j     L8010E620
 sb    S5, 0(V0)
L8010E5EC:
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_stars)
addu  AT, AT, V0
lb    V0, lo(p1_stars)(AT)
bnez  V0, L8010E61C
 addu  V0, S3, S1
L8010E608:
sb    R0, 0(V0)
sll   V0, S1, 4
addu  V0, S2, V0
j     L8010E62C
 sb    S5, 0(V0)
L8010E61C:
sb    S5, 0(V0)
L8010E620:
sll   V0, S1, 4
addu  V0, S2, V0
sb    FP, 0(V0)
L8010E62C:
sll   A1, S1, 4
addu  A1, S2, A1
move  A0, S0
jal   0x800E2260
 addiu A1, A1, 1
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L8010E5B0
 addiu S1, S1, 1
li    V0, 1
sb    V0, 0x64(SP)
sb    V0, 0x65(SP)
addiu V0, SP, 0x40
sw    V0, 0x10(SP)
addiu V0, SP, 0x50
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 7
li    A1, 0x5C02
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage "Who's your opponent?"
 addiu A3, SP, 0x30
jal   func_80107BD4
 addiu A0, SP, 0x60
move  S0, V0
jal   0x800EC6C8
 move  S2, S0
jal   0x800EC6EC
 move  S1, R0
sll   S0, S0, 0x10
sra   S0, S0, 0x10
li    V0, 4
beq   S0, V0, L8010E718 ; Your Choice
 slti  V0, S0, 5
beqz  V0, L8010E6CC
 li    V0, -1
beq   S0, V0, L8010E3A8
 move  S0, R0
j     L8010E8A4
       NOP
L8010E6CC:
li    V0, 5
bne   S0, V0, L8010E8A4
 li    V0, -1
lw    T0, 0x94(SP)
bne   T0, V0, L8010E708
       NOP
jal   func_80106FE8
 move  S0, R0
li    V0, 1
lui   AT, hi(CORE_800CB99C)
sb    V0, lo(CORE_800CB99C)(AT)
jal   0x80049FB8
 move  S1, R0
j     L8010E594
 addiu S3, SP, 0x60
L8010E708:
jal   __PP64_INTERNAL_VIEW_MAP
 move  S0, R0
j     L8010E590
 move  S1, R0
L8010E718:
move  S0, R0
move  S2, R0
addiu S3, SP, 0x20
move  S1, R0
L8010E728:
jal   0x800EE9C0
 move  A0, S1
bnel  S0, V0, L8010E754
 addiu S1, S1, 1
lb    V0, 0xf(S7)
beq   V0, S1, L8010E750
 sll   V0, S2, 2
addu  V0, V0, S3
sw    S1, 0x58(V0)
addiu S2, S2, 1
L8010E750:
addiu S1, S1, 1
L8010E754:
slti  V0, S1, 4
bnez  V0, L8010E728
       NOP
addiu S0, S0, 1
slti  V0, S0, 4
bnezl V0, L8010E728
 move  S1, R0
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F12
      NOP
jal   0x800EEF80
 move  S0, R0
move  V1, V0
lui   A0, hi(D_8011E274)
addiu A0, A0, lo(D_8011E274)
sll   V0, S0, 2
L8010E794:
addu  V0, V0, A0
lw    V0, 0(V0)
slt   V0, V1, V0
bnez  V0, L8010E7B8
       NOP
addiu S0, S0, 1
slti  V0, S0, 3
bnez  V0, L8010E794
 sll   V0, S0, 2
L8010E7B8:
lhu   T0, 0xae(SP)
sll   V0, T0, 0x10
beqz  V0, L8010E808
 addiu A0, SP, 0x20
L8010E7C8:
sll   V0, S0, 2
addu  V0, V0, A0
lw    V1, 0x58(V0)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_stars)
addu  AT, AT, V0
lb    V0, lo(p1_stars)(AT)
beql  V0, R0, L8010E7C8
 addiu S0, S0, -1
lb    V0, 0xf(S7)
beql  V1, V0, L8010E7C8
 addiu S0, S0, -1
j     L8010E898
 sll   V0, S0, 2
L8010E808:
bltz  S0, L8010E84C
 sll   V0, S0, 2
L8010E810:
addu  V0, V0, A0
lw    V1, 0x58(V0)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
beqz  V0, L8010E844
 addiu S0, S0, -1
lb    V0, 0xf(S7)
bnel  V1, V0, L8010E850
 li    S0, 2
L8010E844:
bgez  S0, L8010E810
 sll   V0, S0, 2
L8010E84C:
li    S0, 2
L8010E850:
addiu A0, SP, 0x20
sll   V0, S0, 2
L8010E858:
addu  V0, V0, A0
lw    V1, 0x58(V0)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
beql  V0, R0, L8010E890
 addiu S0, S0, -1
lb    V0, 0xf(S7)
bne   V1, V0, L8010E898
 sll   V0, S0, 2
addiu S0, S0, -1
L8010E890:
bgez  S0, L8010E858
 sll   V0, S0, 2
L8010E898:
addu  V0, SP, V0
lhu   S2, 0x7a(V0)
li    S1, 1
L8010E8A4:
lhu   T0, 0xae(SP)
sll   V0, T0, 0x10
bnez  V0, L8010E8CC
       NOP
; paying to steal coins
lb    A0, 0xf(S7)
jal   ShowPlayerCoinChange
 li    A1, -5
lb    A0, 0xf(S7)
j     L8010E8E0
 li    A1, -5
L8010E8CC: ; paying to steal a star
lb    A0, 0xf(S7)
jal   ShowPlayerCoinChange
 li    A1, -50
lb    A0, 0xf(S7)
li    A1, -50
L8010E8E0:
jal   AdjustPlayerCoinsGradual
       NOP
jal   SleepProcess
 li    A0, 30
lhu   T0, 0xae(SP)
sll   V0, T0, 0x10
sra   V0, V0, 0x10
li    V1, 1
bne   V0, V1, L8010E918
 move  S0, R0
beqz  S1, L8010E9AC
 li    A0, 7
j     L8010E9A4
 li    A1, 25094
L8010E918:
lui   A0, hi(current_turn)
lb    A0, lo(current_turn)(A0)
sll   V0, S0, 1
L8010E924:
addu  V1, V0, S0
lui   V0, hi(D_8011E22C)
addu  V0, V0, V1
lbu   V0, lo(D_8011E22C)(V0)
slt   V0, A0, V0
bnezl V0, L8010E95C
 addiu S0, S0, 1
lui   V0, hi(D_8011E22D)
addu  V0, V0, V1
lbu   V0, lo(D_8011E22D)(V0)
slt   V0, V0, A0
beqz  V0, L8010E968
 sll   V0, S0, 1
addiu S0, S0, 1
L8010E95C:
sltiu V0, S0, 6
bnez  V0, L8010E924
 sll   V0, S0, 1
L8010E968:
addu  V0, V0, S0
lui   AT, hi(D_8011E22E)
addu  AT, AT, V0
lbu   V0, lo(D_8011E22E)(AT)
bnez  S1, L8010E99C
 sw    V0, 0x9c(SP)
li    AT, 0x40C00000 ; 6.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
li    A0, 7
j     L8010E9A4
 addiu A1, V0, 0x6207 ; "Good! Here I go... I feel great! Great! Leave it to me!"
L8010E99C:
li    A0, 7
li    A1, 0x620D ; "Good, good... I'll steal coins from that no-good fool..."
L8010E9A4:
jal   0x800EC590
       NOP
L8010E9AC:
jal   func_8010C9B4
 lw    A0, 0x8c(SP)
lhu   T0, 0xae(SP)
sll   V0, T0, 0x10
bnez  V0, L8010EBEC
 sll   A0, S2, 0x10
sll   V0, S2, 0x10
sra   S0, V0, 0x10
jal   func_8010CEC0
 move  A0, S0
lw    A0, 0x8c(SP)
jal   func_8010C914
 move  S6, V0
li    V0, -2
beq   S6, V0, L8010EC38
 li    V0, -1
bne   S6, V0, L8010EA34
 addiu A0, SP, 0x20
sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   S6, hi(p1_coins)
addu  S6, S6, V0
lh    S6, lo(p1_coins)(S6)
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 move  A2, S6
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 7
j     L8010EA8C
 li    A1, 25108
L8010EA34:
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 move  A2, S6
lw    T0, 0x9c(SP)
subu  V1, T0, S6
move  S0, R0
L8010EA50:
lui   V0, hi(D_8011E26C)
addu  V0, V0, S0
lbu   V0, lo(D_8011E26C)(V0)
slt   V0, V1, V0
beql  V0, R0, L8010EA7C
 sw    R0, 0x10(SP)
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L8010EA50
       NOP
sw    R0, 0x10(SP)
L8010EA7C:
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 7
addiu A1, S0, 0x6210
L8010EA8C:
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage: "That's rediculous! I only got _ coins!"
 move  A3, R0
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
li    V0, -2
beq   S6, V0, L8010EC38
 li    A0, 25
lui   AT, hi(CORE_800D037C)
sh    R0, lo(CORE_800D037C)(AT)
mtc1  S6, F24
      NOP
cvt.s.w F24, F24
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F0
      NOP
div.s F24, F24, F0
mtc1  R0, F20
      NOP
jal   0x800D90C8
 move  A1, R0
lui   AT, hi(D_8011FB58)
sw    V0, lo(D_8011FB58)(AT)
jal   0x800D9714
 move  A0, V0
lui   A0, hi(D_8011FB58)
jal   0x800D9B24
 lw    A0, lo(D_8011FB58)(A0)
sll   A0, S2, 0x10
sra   A0, A0, 0x10
li    A1, 3
jal   0x800FFA4C
 li    A2, 5
beqz  S6, L8010EB7C
 move  S1, V0
li    AT, 0x3F800000
mtc1  AT, F22
sll   S0, S2, 0x10
add.s F20, F20, F24
L8010EB30:
c.le.s F22, F20
      NOP
bc1f  L8010EB6C
       NOP
lw    A0, 0x8c(SP)
jal   boo_event_helper
 sub.s F20, F20, F22
lb    A0, 0xf(S7)
jal   AdjustPlayerCoinsGradual
 li    A1, 1
sra   A0, S0, 0x10
li    A1, -1
jal   0x800F5BF4
 move  A2, R0
addiu S6, S6, -1
L8010EB6C:
jal   SleepVProcess
       NOP
bnezl S6, L8010EB30
 add.s F20, F20, F24
L8010EB7C:
jal   0x800FFAEC
 move  A0, S1
jal   SleepProcess
 li    A0, 20
lui   A0, hi(D_8011FB58)
jal   0x800D9B54
 lw    A0, lo(D_8011FB58)(A0)
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800ECC0C
 addiu A0, A0, 0x18
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
jal   SleepProcess
 li    A0, 5
lb    A1, 0xf(S7)
jal   0x8004ACE0
 li    A0, 628
jal   SleepProcess
 li    A0, 45
li    V0, 1
lui   AT, hi(CORE_800D037C)
sh    V0, lo(CORE_800D037C)(AT)
j     L8010EC3C
 li    V0, -1
L8010EBEC:
jal   func_8010CA54
 sra   A0, A0, 0x10
lw    A0, 0x8c(SP)
jal   func_8010C914
 move  S0, V0
beqz  S0, L8010EC34
 li    A0, 7
jal   0x800EC590
 li    A1, 0x6205 ; "I got a star! ..."
li    V0, 1
lui   AT, hi(D_8011D308)
sw    V0, lo(D_8011D308)(AT)
jal   func_80106EEC
 lw    A0, 0x8c(SP)
lui   AT, hi(D_8011D308)
sw    R0, lo(D_8011D308)(AT)
j     L8010EC3C
 li    V0, -1
L8010EC34:
li    S6, -2
L8010EC38:
li    V0, -1
L8010EC3C:
lw    T0, 0x94(SP)
bne   T0, V0, L8010EC64
 li    V0, -2
jal   SleepProcess
 li    A0, 20
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
li    V0, -2
L8010EC64:
bne   S6, V0, L8010ECE0
       NOP
jal   SleepProcess
 li    A0, 30
li    A0, 7
jal   0x800EC590
 li    A1, 0x6215 ; "There was weird gas all over the place! I feel awful!"
j     L8010ECE0
       NOP
L8010EC88:
jal   func_8010C9B4
 lw    A0, 0x8c(SP)
li    A0, 7
jal   0x800EC590
 li    A1, 0x6203 ; "What are you thinking? I can't believe it! Ooo, hoo, hoo!"
j     L8010ECE0
       NOP
L8010ECA4:
lw    T0, 0x94(SP)
bne   T0, V0, L8010ECD0
       NOP
jal   func_80106FE8
 move  S0, R0
li    V0, 1
lui   AT, hi(CORE_800CB99C)
jal   0x80049FB8
 sb    V0, lo(CORE_800CB99C)(AT)
j     L8010E3A8
       NOP
L8010ECD0:
jal   __PP64_INTERNAL_VIEW_MAP
 move  S0, R0
j     L8010E3A8
       NOP
L8010ECE0:
lhu   T0, 0xae(SP)
sll   V0, T0, 0x10
sra   V0, V0, 0x10
li    V1, 2
beq   V0, V1, L8010ED00
       NOP
jal   func_8010C9B4
 lw    A0, 0x8c(SP)
L8010ED00:
lw    T0, 0x8c(SP)
jal   0x800ECC0C
 addiu A0, T0, 0x18
li    V0, -1
lw    T0, 0x94(SP)
bne   T0, V0, L8010ED24
       NOP
jal   0x800D9B54
 lw    A0, 0x8c(SP)
L8010ED24:
lhu   T0, 0xa6(SP)
sll   V0, T0, 0x10
sra   V0, V0, 0x10
li    V1, -1
beq   V0, V1, L8010EFA4
       NOP
jal   PlaySound
 li    A0, 294
move  A0, S4
li    A1, -1
jal   0x800D9CE8
 li    A2, 4
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   A1, 0x3f99
jal   0x8001C92C
 ori A1, A1, 0x999a
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   V1, hi(CORE_800D03F8)
lw    V1, lo(CORE_800D03F8)(V1)
sll   V0, A0, 1
addu  V0, V0, A0
sll   V0, V0, 6
addu  V0, V0, V1
lbu   V1, 2(V0)
lui   A1, hi(CORE_800CCF58)
lw    A1, lo(CORE_800CCF58)(A1)
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 3
addu  V0, V0, A1
lh    V0, 2(V0)
mtc1  V0, F4
      NOP
cvt.s.w F4, F4
mfc1  A1, F4
jal   0x8001C6A8
       NOP
L8010EDC8:
jal   0x800D9E80
 move  A0, S4
andi  V0, V0, 0xffff
bnez  V0, L8010EDEC
       NOP
jal   SleepVProcess
       NOP
j     L8010EDC8
       NOP
L8010EDEC:
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F12
jal   0x8008EF20
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
div.s F22, F2, F0
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F20
li    AT, 0x3E4C0000 ; 0.199219
ori   AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori   AT, AT, 0xcccd
mtc1  AT, F24
lui   S0, hi(D_8011E280)
addiu S0, S0, lo(D_8011E280)
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F28
      NOP
L8010EE48:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x2c(S4)
lb    V0, 1(S7)
sll   V0, V0, 2
addu  V0, V0, S0
lw    V0, 0(V0)
beqz  V0, L8010EEB4
       NOP
lwc1  F0, 0x24(S4)
neg.s F0, F0
swc1  F0, 0x24(S4)
L8010EEB4:
jal   SleepVProcess
       NOP
add.s F20, F20, F30
c.lt.s F20, F28
      NOP
bc1t  L8010EE48
       NOP
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F20
li    AT, 0x3E4C0000 ; 0.199219
ori   AT, AT, 0xcccd
mtc1  AT, F26
li    AT, 0x3F4C0000 ; 0.796875
ori   AT, AT, 0xcccd
mtc1  AT, F24
lui   S0, hi(D_8011E280)
addiu S0, S0, lo(D_8011E280)
li    AT, 0x41340000 ; 11.250000
mtc1  AT, F30
mtc1  R0, F28
      NOP
L8010EF08:
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
swc1  F0, 0x28(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x24(S4)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
      NOP
mul.s F0, F0, F26
add.s F0, F0, F24
swc1  F0, 0x2c(S4)
lb    V0, 1(S7)
sll   V0, V0, 2
addu  V0, V0, S0
lw    V0, 0(V0)
beqz  V0, L8010EF74
       NOP
lwc1  F0, 0x24(S4)
neg.s F0, F0
swc1  F0, 0x24(S4)
L8010EF74:
jal   SleepVProcess
       NOP
sub.s F20, F20, F30
c.lt.s F28, F20
      NOP
bc1t  L8010EF08
       NOP
sw    R0, 0x28(S4)
sw    R0, 0x24(S4)
sw    R0, 0x2c(S4)
jal   0x800D9B54
 move  A0, S4
L8010EFA4:
lw    T0, 0xb4(SP)
beqz  T0, L8010EFC0
 li    V0, -1
lb    A0, 0xf(S7)
jal   0x800DB884
       NOP
li    V0, -1
L8010EFC0:
lw    T0, 0x94(SP)
beq   T0, V0, L8010F000
       NOP
jal   0x8004EE68
       NOP
li    AT, 0x3FA60000 ; 1.296875
ori   AT, AT, 0x6666
mtc1  AT, F12
      NOP
jal   0x800E8EDC
 move  S0, V0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
       NOP
L8010F000:
lw    RA, 0xe4(SP)
lw    FP, 0xe0(SP)
lw    S7, 0xdc(SP)
lw    S6, 0xd8(SP)
lw    S5, 0xd4(SP)
lw    S4, 0xd0(SP)
lw    S3, 0xcc(SP)
lw    S2, 0xc8(SP)
lw    S1, 0xc4(SP)
lw    S0, 0xc0(SP)
ldc1  F30, 0x110(SP)
ldc1  F28, 0x108(SP)
ldc1  F26, 0x100(SP)
ldc1  F24, 0xf8(SP)
ldc1  F22, 0xf0(SP)
ldc1  F20, 0xe8(SP)
jr    RA
 addiu SP, SP, 0x118

func_8010F088:
addiu SP, SP, -0x48
sw    RA, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
sdc1  F22, 0x40(SP)
sdc1  F20, 0x38(SP)
move  S3, A0
mtc1  A1, F20
mtc1  A2, F22
lw    S0, 0x58(SP)
lw    S1, 0x5c(SP)
move  S5, A3
lui   V0, hi(D_8010F1E4)
addiu V0, V0, lo(D_8010F1E4)
sw    V0, 0x10(SP)
li    A0, 500
move  A1, R0
move  A2, R0
jal   0x80047620
 li    A3, -1
move  S4, V0
li    A0, 32
jal   0x80019A14
 li    A1, 31000
sw    V0, 0x5c(S4)
move  S2, V0
li    AT, 0x437F0000 ; 255.000000
mtc1  AT, F0
      NOP
swc1  F0, 0xc(S2)
swc1  F20, 0x10(S2)
swc1  F22, 0x14(S2)
move  A0, S2
jal   0x80089A20
 move  A1, S0
beqz  S1, L8010F138
 lui A0, 0x13
sw    R0, 0x10(SP)
j     L8010F140
 ori A0, A0, 0x1f8
L8010F138:
sw    R0, 0x10(SP)
ori   A0, A0, 0x1f7
L8010F140:
move  A1, R0
lui   A2, 0x3f80
jal   0x800D912C
 move  A3, R0
move  S0, V0
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
lwc1  F0, 0(S3)
swc1  F0, 0xc(S0)
lwc1  F0, 4(S3)
swc1  F0, 0x10(S0)
lwc1  F0, 8(S3)
swc1  F0, 0x14(S0)
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
jal   0x8001FA68
 lh    A0, 0(V0)
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 li    A1, 255
sw    S0, 0x18(S2)
sh    S5, 0x1c(S2)
move  V0, S4
lw    RA, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
ldc1  F22, 0x40(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x48

D_8010F1E4:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S2, A0
lw    S0, 0x5c(S2)
lw    S1, 0x18(S0)
addiu A1, S1, 0xc
move  A0, A1
jal   0x80089A70
 move  A2, S0
lwc1  F0, 0x2c(S1)
lwc1  F2, 0x10(S0)
add.s F0, F0, F2
swc1  F0, 0x2c(S1)
swc1  F0, 0x28(S1)
swc1  F0, 0x24(S1)
lwc1  F0, 0xc(S0)
lwc1  F2, 0x14(S0)
sub.s F0, F0, F2
mtc1  R0, F2
      NOP
c.lt.s F0, F2
      NOP
      NOP
bc1f  L8010F288
 swc1  F0, 0xc(S0)
swc1  F2, 0xc(S0)
lhu   V0, 0x1c(S0)
beqz  V0, L8010F280
 move  A0, S2
lw    A0, 0x18(S0)
jal   0x800D9B54
       NOP
jal   0x800479AC
 move  A0, S2
j     L8010F2E4
       NOP
L8010F280:
jal   0x80047B38
 li    A1, 8
L8010F288:
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lwc1  F2, 0xc(S0)
li    AT, 0x4F000000 ; 2147483648.000000
mtc1  AT, F0
      NOP
c.le.s F0, F2
      NOP
      NOP
bc1tl L8010F2C8
 sub.s F0, F2, F0
trunc.w.s F0, F2
mfc1  A1, F0
j     L8010F2DC
       NOP
L8010F2C8:
lui   V0, 0x8000
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
or    A1, A1, V0
L8010F2DC:
jal   0x8001F9E4
 andi  A1, A1, 0xff
L8010F2E4:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_8010F2FC:
addiu SP, SP, -0x128
sw    RA, 0x110(SP)
sw    S7, 0x10c(SP)
sw    S6, 0x108(SP)
sw    S5, 0x104(SP)
sw    S4, 0x100(SP)
sw    S3, 0xfc(SP)
sw    S2, 0xf8(SP)
sw    S1, 0xf4(SP)
sw    S0, 0xf0(SP)
sdc1  F22, 0x120(SP)
sdc1  F20, 0x118(SP)
lui   S7, hi(CORE_800CD058)
addiu S7, S7, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
jal   func_8010FE54
 move  S3, V0
li    A0, 36
jal   0x800D90C8
 move  A1, R0
move  S1, V0
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
lw    A1, 0x24(S3)
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x10(S1)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
lwc1  F0, 0x10(S1)
sub.s F0, F0, F22
L8010F3A8:
jal   SleepVProcess
 swc1  F0, 0x10(S1)
lwc1  F0, 0x10(S1)
c.lt.s F20, F0
      NOP
      NOP
bc1tl L8010F3A8
 sub.s F0, F0, F22
jal   PlaySound
 li    A0, 295
jal   0x8004A7C4
 li    A0, 180
li    A0, -1
li    A1, 4
jal   0x800FFA4C
 li    A2, 5
move  S5, V0
li    S2, 180
move  S0, R0
lui   S6, hi(D_8011F940)
addiu S6, S6, lo(D_8011F940)
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F22
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F20
addiu S4, SP, 0x28
L8010F410:
addiu A3, SP, 0x28
lui   A2, hi(D_8011F8E0)
addiu A2, A2, lo(D_8011F8E0)
L8010F41C:
lw    V0, 0(A2)
lw    V1, 4(A2)
lw    A0, 8(A2)
lw    A1, 0xc(A2)
sw    V0, 0(A3)
sw    V1, 4(A3)
sw    A0, 8(A3)
sw    A1, 0xc(A3)
addiu A2, A2, 0x10
bne   A2, S6, L8010F41C
 addiu A3, A3, 0x10
mtc1  S2, F12
      NOP
jal   0x8008EF20
 cvt.s.w F12, F12
add.s F0, F0, F0
add.s F0, F0, F22
andi  V0, S0, 1
beqz  V0, L8010F4D8
 swc1  F0, 0x10(S1)
lw    A1, 0xc(S1)
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x80089A10
 addiu A0, SP, 0x18
lwc1  F0, 0x18(SP)
sub.s F0, F0, F20
swc1  F0, 0x18(SP)
lwc1  F0, 0x1c(SP)
add.s F0, F0, F20
swc1  F0, 0x1c(SP)
srl   V1, S0, 0x1f
addu  V1, S0, V1
sra   V1, V1, 1
andi  V1, V1, 7
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 2
addu  V0, S4, V0
sw    V0, 0x10(SP)
sw    R0, 0x14(SP)
addiu A0, SP, 0x18
lui A1, 0x3dcc
ori A1, A1, 0xcccd
lui   A2, 0x4000
jal   func_8010F088
 li    A3, 1
L8010F4D8:
jal   SleepVProcess
 addiu S2, S2, 0x14
slti  V0, S2, 0x438
bnez  V0, L8010F410
 addiu S0, S0, 1
jal   0x800FFAEC
 move  A0, S5
li    A0, 255
li    A1, 255
jal   0x800620C8
 li    A2, 255
lb    V0, 5(S7)
addu  V0, S7, V0
lb    V0, 6(V0)
sll   V0, V0, 1
lui   A0, hi(star_space_indices)
addu  A0, A0, V0
lh    A0, lo(star_space_indices)(A0)
addiu A1, SP, 0x88
jal   0x800EB24C
 addiu A2, SP, 0x89
lbu   V0, 0x88(SP)
sb    V0, 0xf(S3)
lbu   V0, 0x89(SP)
sb    V0, 0x10(S3)
lbu   V0, 0x88(SP)
sb    V0, 0x11(S3)
lbu   V0, 0x89(SP)
addiu V0, V0, 1
sb    V0, 0x12(S3)
lbu   V0, 0x88(SP)
sb    V0, 0x15(S3)
lbu   V0, 0x89(SP)
addiu V0, V0, -1
sb    V0, 0x16(S3)
lbu   V0, 0x17(S3)
andi  V0, V0, 0xfe
jal   0x800FC9E0
 sb    V0, 0x17(S3)
jal   PlaySound
 li    A0, 296
jal   0x8004A0E0
       NOP
lui   S4, hi(D_8011F940)
addiu S4, S4, lo(D_8011F940)
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F22
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F20
addiu S3, SP, 0x90
addiu A3, SP, 0x90
L8010F5A4:
lui   A2, hi(D_8011F8E0)
addiu A2, A2, lo(D_8011F8E0)
L8010F5AC:
lw    V0, 0(A2)
lw    V1, 4(A2)
lw    A0, 8(A2)
lw    A1, 0xc(A2)
sw    V0, 0(A3)
sw    V1, 4(A3)
sw    A0, 8(A3)
sw    A1, 0xc(A3)
addiu A2, A2, 0x10
bne   A2, S4, L8010F5AC
 addiu A3, A3, 0x10
mtc1  S2, F12
      NOP
jal   0x8008EF20
 cvt.s.w F12, F12
add.s F0, F0, F0
add.s F0, F0, F22
andi  V0, S0, 1
beqz  V0, L8010F668
 swc1  F0, 0x10(S1)
lw    A1, 0xc(S1)
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x80089A10
 addiu A0, SP, 0x18
lwc1  F0, 0x18(SP)
sub.s F0, F0, F20
swc1  F0, 0x18(SP)
lwc1  F0, 0x1c(SP)
add.s F0, F0, F20
swc1  F0, 0x1c(SP)
srl   V1, S0, 0x1f
addu  V1, S0, V1
sra   V1, V1, 1
andi  V1, V1, 7
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 2
addu  V0, S3, V0
sw    V0, 0x10(SP)
sw    R0, 0x14(SP)
addiu A0, SP, 0x18
lui   A1, 0x3dcc
ori   A1, A1, 0xcccd
lui   A2, 0x4000
jal   func_8010F088
 li    A3, 1
L8010F668:
jal   SleepVProcess
 addiu S0, S0, 1
addiu S2, S2, 0x14
li    V0, 1280
bnel  S2, V0, L8010F5A4
 addiu A3, SP, 0x90
jal   0x80003A70
 move  A0, R0
j     L8010F5A4
 addiu A3, SP, 0x90
lw    RA, 0x110(SP)
lw    S7, 0x10c(SP)
lw    S6, 0x108(SP)
lw    S5, 0x104(SP)
lw    S4, 0x100(SP)
lw    S3, 0xfc(SP)
lw    S2, 0xf8(SP)
lw    S1, 0xf4(SP)
lw    S0, 0xf0(SP)
ldc1  F22, 0x120(SP)
ldc1  F20, 0x118(SP)
jr    RA
 addiu SP, SP, 0x128

func_8010F6C4:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
li    V0, 1
lui   AT, hi(CORE_800A12D0)
sb    V0, lo(CORE_800A12D0)(AT)
lui   V0, hi(CORE_800CD05D)
lb    V0, lo(CORE_800CD05D)(V0)
lui   AT, hi(CORE_800CD05E)
addu  AT, AT, V0
lb    V0, lo(CORE_800CD05E)(AT)
sll   V0, V0, 1
lui   A0, hi(star_space_indices)
addu  A0, A0, V0
lh    A0, lo(star_space_indices)(A0)
jal   0x800EBAC8
 li    A1, 1
lui   AT, hi(CORE_800A12D0)
jal   0x800FF834
 sb    R0, lo(CORE_800A12D0)(AT)
sll   V0, V0, 0x10
bltz  V0, L8010F724
       NOP
jal   SleepProcess
 li    A0, -1
L8010F724:
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

func_8010F730:
addiu SP, SP, -0x28
sw    RA, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
lui   S2, hi(current_player_index)
lb    S2, lo(current_player_index)(S2)
jal   GetPlayerStruct
 li    A0, -1
jal   func_8010FE54
 move  S1, V0
jal   0x800DCA64
 move  A0, S2
li    A0, -1
jal   0x800FF900
 li    A1, 3
jal   0x80035FDC
 li    A0, 17
jal   0x800DC128
 move  A0, S2
jal   0x800EF0D8
 li    A0, 1
jal   0x8004A0E0
 move  S0, V0
jal   0x800FC8A4
 sll   S0, S0, 0x10
jal   SleepProcess
 li    A0, 5
jal   SleepProcess
 li    A0, 25
move  A0, S2
li    A1, 2
jal   0x800F2304
 move  A2, R0
sll   V0, S2, 3
subu  V0, V0, S2
sll   V0, V0, 3
lui   A0, hi(CORE_800D112C)
addu  A0, A0, V0
lw    A0, lo(CORE_800D112C)(A0)
lui   A1, 0x4000
lui   A2, 0xbe99
jal   0x800EE688
 ori A2, A2, 0x999a
jal   SleepProcess
 li    A0, 5
jal   0x800DCBCC
 move  A0, S2
li    V0, 2
sw    V0, 0x10(SP)
move  A0, S2
li    A1, -1
move  A2, R0
jal   0x800F2388
 li    A3, 10
jal   SleepProcess
 li    A0, 20
jal   0x800E22B4
       NOP
jal   0x800E2354
 sra   A0, S0, 0x10
jal   0x800E2904
       NOP
jal   0x8003602C
 li    A0, 17
jal   0x800DC128
 move  A0, S2
sll   V0, V0, 0x10
jal   0x8004AD50
 sra   A0, V0, 0x10
jal   0x800DC06C
 move  A0, S2
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
move  A0, S2
jal   0x800DCD2C
 li    A1, -1
lbu   A0, 0xf(S1)
sll   A0, A0, 0x18
sra   A0, A0, 0x18
lbu   A1, 0x10(S1)
sll   A1, A1, 0x18
sra   A1, A1, 0x18
andi  A0, A0, 0xffff
jal   GetAbsSpaceIndexFromChainSpaceIndex
 andi  A1, A1, 0xffff
sll   S0, V0, 0x10
sra   S0, S0, 0x10
jal   0x800EBCBC
 move  A0, S0
move  A0, S0
jal   0x800EBAC8
 li    A1, 1
jal   0x800FF834
       NOP
sll   V0, V0, 0x10
bltz  V0, L8010F8D0
       NOP
jal   SleepProcess
 li    A0, -1
L8010F8D0:
jal   0x800DAA40
 move  A0, S2
lw    RA, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x28

func_8010F8F0:
addiu SP, SP, -0x38
sw    RA, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
sdc1  F22, 0x30(SP)
sdc1  F20, 0x28(SP)
jal   0x8004EE68
 li    S1, 1
lw    S0, 0x8c(V0)
lh    V0, 4(S0)
lh    V1, 0(S0)
subu  V0, V0, V1
mtc1  V0, F22
      NOP
cvt.s.w F22, F22
lh    V0, 8(S0)
mtc1  V0, F0
      NOP
cvt.s.w F0, F0
div.s F22, F22, F0
lh    V0, 6(S0)
lh    V1, 2(S0)
subu  V0, V0, V1
mtc1  V0, F20
      NOP
cvt.s.w F20, F20
jal   0x800E4A7C
 div.s F20, F20, F0
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
addiu A2, SP, 0x10
jal   0x800F6848
 addiu A3, SP, 0x14
lh    V0, 8(S0)
blez  V0, L8010FA78
       NOP
L8010F984:
lh    A0, 0xa(S0)
li    V0, -1
beq   A0, V0, L8010F9FC
 move  A1, R0
lh    V0, 0(S0)
mtc1  V0, F2
      NOP
cvt.s.w F2, F2
mtc1  S1, F4
      NOP
cvt.s.w F4, F4
mul.s F0, F22, F4
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A2, F0
      NOP
sll   A2, A2, 0x10
lh    V0, 2(S0)
mtc1  V0, F0
      NOP
cvt.s.w F0, F0
mul.s F4, F20, F4
add.s F0, F0, F4
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
L8010F9FC:
jal   0x800E4A7C
       NOP
mtc1  S1, F4
      NOP
cvt.s.w F4, F4
mul.s F0, F22, F4
lwc1  F2, 0x10(SP)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
mul.s F4, F20, F4
lwc1  F0, 0x14(SP)
add.s F4, F4, F0
trunc.w.s F0, F4
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
sra   A2, A2, 0x10
jal   0x800F688C
 sra   A3, A3, 0x10
jal   SleepVProcess
 addiu S1, S1, 1
lh    V0, 8(S0)
slt   V0, V0, S1
beqz  V0, L8010F984
       NOP
L8010FA78:
lh    A0, 0xa(S0)
li    V0, -1
beq   A0, V0, L8010FA98
       NOP
lh    A2, 4(S0)
lh    A3, 6(S0)
jal   0x80054904
 move  A1, R0
L8010FA98:
jal   0x800E4A7C
       NOP
lh    V1, 4(S0)
mtc1  V1, F0
      NOP
cvt.s.w F0, F0
lwc1  F2, 0x10(SP)
add.s F0, F0, F2
lh    V1, 0(S0)
mtc1  V1, F2
      NOP
cvt.s.w F2, F2
sub.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lh    V1, 6(S0)
mtc1  V1, F0
      NOP
cvt.s.w F0, F0
lwc1  F2, 0x14(SP)
add.s F0, F0, F2
lh    V1, 2(S0)
mtc1  V1, F2
      NOP
cvt.s.w F2, F2
sub.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
sra   A2, A2, 0x10
jal   0x800F688C
 sra   A3, A3, 0x10
jal   EndProcess
 move  A0, R0
lw    RA, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
ldc1  F22, 0x30(SP)
ldc1  F20, 0x28(SP)
jr    RA
 addiu SP, SP, 0x38

func_8010FB54:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S7, 0x2c(SP)
sw    S6, 0x28(SP)
sw    S5, 0x24(SP)
sw    S4, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S7, A0
lw    S0, 0x4c(SP)
move  S1, A1
move  S2, A2
move  S3, A3
lhu   S4, 0x4a(SP)
move  S6, S0
lui   A0, hi(func_8010F8F0)
addiu A0, A0, lo(func_8010F8F0)
li    A1, 16386
move  A2, R0
jal   InitProcess
 li    A3, 64
move  S5, V0
lw    A0, 0x18(S5)
jal   0x800360F0
 li    A1, 16
move  V1, V0
sw    V1, 0x8c(S5)
sh    S1, 0(V1)
sh    S2, 2(V1)
sh    S3, 4(V1)
sll   S0, S0, 0x10
sra   S0, S0, 0x10
li    V0, -1
bne   S0, V0, L8010FBEC
 sh    S4, 6(V1)
li    S6, 25
L8010FBEC:
sh    S6, 8(V1)
sh    S7, 0xa(V1)
move  V0, S5
lw    RA, 0x30(SP)
lw    S7, 0x2c(SP)
lw    S6, 0x28(SP)
lw    S5, 0x24(SP)
lw    S4, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x38

D_8010FC24:
addiu SP, SP, -0x30
sw    RA, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 325
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
addiu A2, SP, 0x18
jal   0x800F6748
 addiu A3, SP, 0x1c
jal   0x8004EE68
 li    S2, 255
move  S0, V0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lwc1  F0, 0x18(SP)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lwc1  F0, 0x1c(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V0, V0, 3
lui   AT, hi(D_8011E354)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E354)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E358)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E358)(AT)
trunc.w.s F2, F0
mfc1  V0, F2
      NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x10(SP)
li    V0, -1
sw    V0, 0x14(SP)
sra   A1, A1, 0x10
sra   A2, A2, 0x10
jal   func_8010FB54
 sra   A3, A3, 0x10
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 li    S0, 1
jal   SleepProcess
 li    A0, 10
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
move  A2, R0
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
L8010FD7C:
jal   0x800E4A7C
       NOP
sll   A2, S0, 1
addu  A2, A2, S0
sll   A2, A2, 3
addu  A2, A2, S0
subu  A2, S2, A2
sll   A2, A2, 0x10
lb    A0, 0xf(S1)
move  A1, V0
jal   0x800F68E0
 sra   A2, A2, 0x10
jal   0x800E4A7C
 addiu S0, S0, 1
lb    A0, 0xf(S1)
move  A1, V0
lui   A3, 0x4000
jal   0x800F6780
 move  A2, R0
jal   SleepVProcess
       NOP
slti  V0, S0, 0xa
bnez  V0, L8010FD7C
       NOP
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S1)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
lb    A1, 0xf(S1)
jal   0x8004ACE0
 li    A0, 628
jal   SleepProcess
 li    A0, 50
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
lw    RA, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x30

func_8010FE54:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 325
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
addiu A2, SP, 0x18
jal   0x800F6748
 addiu A3, SP, 0x1c
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lwc1  F0, 0x18(SP)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lwc1  F0, 0x1c(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V0, V0, 3
lui   AT, hi(D_8011E374)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E374)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E378)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E378)(AT)
trunc.w.s F2, F0
mfc1  V0, F2
      NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x10(SP)
li    V0, -1
sw    V0, 0x14(SP)
sra   A1, A1, 0x10
sra   A2, A2, 0x10
jal   func_8010FB54
 sra   A3, A3, 0x10
jal   SleepProcess
 li    A0, 20
li    S1, 1
li    S2, 255
L8010FF6C:
jal   0x800E4A7C
 sll   S0, S1, 1
addu  S0, S0, S1
sll   S0, S0, 3
addu  S0, S0, S1
subu  S0, S2, S0
sll   A2, S0, 0x10
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 sra   A2, A2, 0x10
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 andi  A2, S0, 0xffff
jal   SleepVProcess
 addiu S1, S1, 1
slti  V0, S1, 0xa
bnez  V0, L8010FF6C
       NOP
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   SleepProcess
 li    A0, 2
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
lw    RA, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

func_80110024:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 325
jal   0x800E4A7C
 li    S1, 255
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
addiu A2, SP, 0x18
jal   0x800F6848
 addiu A3, SP, 0x1c
jal   0x800E4A7C
       NOP
li    A0, -1
move  A1, V0
addiu A2, SP, 0x20
jal   0x800F6E4C
 addiu A3, SP, 0x24
jal   0x8004EE68
       NOP
move  S0, V0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lwc1  F0, 0x18(SP)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lwc1  F0, 0x1c(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lh    A3, 0x22(SP)
lh    V0, 0x26(SP)
sw    V0, 0x10(SP)
li    V0, -1
sw    V0, 0x14(SP)
sra   A1, A1, 0x10
jal   func_8010FB54
 sra   A2, A2, 0x10
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 li    S0, 1
sll   A2, S0, 1
L80110120:
addu  A2, A2, S0
sll   A2, A2, 3
addu  A2, A2, S0
subu  A2, S1, A2
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0xa
bnez  V0, L80110120
 sll   A2, S0, 1
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 move  A2, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
lw    RA, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
jr    RA
 addiu SP, SP, 0x38

D_80110194:
addiu SP, SP, -0x40
sw    RA, 0x34(SP)
sw    S4, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F20, 0x38(SP)
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 325
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
addiu A2, SP, 0x18
jal   0x800F6748
 addiu A3, SP, 0x1c
jal   0x8004EE68
 li    S1, 1
move  S0, V0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lwc1  F0, 0x18(SP)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lwc1  F0, 0x1c(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V0, V0, 3
lui   AT, hi(D_8011E354)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E354)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E358)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E358)(AT)
trunc.w.s F2, F0
mfc1  V0, F2
      NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x10(SP)
li    V0, -1
sw    V0, 0x14(SP)
sra   A1, A1, 0x10
sra   A2, A2, 0x10
jal   func_8010FB54
 sra   A3, A3, 0x10
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 li    S0, 255
jal   SleepProcess
 li    A0, 10
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
move  A2, R0
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
sll   A2, S1, 1
L801102FC:
addu  A2, A2, S1
sll   A2, A2, 3
addu  A2, A2, S1
subu  A2, S0, A2
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S1, S1, 1
slti  V0, S1, 0xa
bnez  V0, L801102FC
 sll   A2, S1, 1
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   S0, hi(p1_item1)
addiu S0, S0, lo(p1_item1)
addu  V1, V1, S0
addu  V1, V1, V0
lb    V1, 0(V1)
li    V0, 11
beq   V1, V0, L801103B0
       NOP
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
addu  V1, V1, S0
addu  V1, V1, V0
lb    V1, 0(V1)
li    V0, 8
bne   V1, V0, L801103BC
 move  S1, R0
L801103B0:
jal   PlaySound
 li    A0, 321
move  S1, R0
L801103BC:
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
L801103C4:
jal   0x800E4A7C
       NOP
mtc1  S1, F12
      NOP
cvt.s.w F12, F12
jal   0x8008EF20
 move  S0, V0
lb    A0, 0xf(S3)
mul.s F0, F0, F20
mfc1  A2, F0
      NOP
jal   0x800F6928
 move  A1, S0
jal   SleepVProcess
 addiu S1, S1, 0x1e
slti  V0, S1, 0x439
bnez  V0, L801103C4
 li    S2, 1
li    S4, 255
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
L80110418:
jal   0x800E4A7C
       NOP
sll   A2, S2, 1
addu  A2, A2, S2
sll   A2, A2, 3
addu  A2, A2, S2
subu  A2, S4, A2
sll   A2, A2, 0x10
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 sra   A2, A2, 0x10
jal   0x800E4A7C
 addiu S2, S2, 1
mtc1  S1, F12
      NOP
cvt.s.w F12, F12
jal   0x8008EF20
 move  S0, V0
lb    A0, 0xf(S3)
mul.s F0, F0, F20
mfc1  A2, F0
      NOP
jal   0x800F6928
 move  A1, S0
jal   SleepVProcess
 addiu S1, S1, 0x1e
slti  V0, S2, 0xa
bnez  V0, L80110418
       NOP
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
lw    RA, 0x34(SP)
lw    S4, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x40

D_801104E0:
addiu SP, SP, -0x30
sw    RA, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 325
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
addiu A2, SP, 0x18
jal   0x800F6748
 addiu A3, SP, 0x1c
jal   0x8004EE68
 li    S1, 255
move  S0, V0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lwc1  F0, 0x18(SP)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lwc1  F0, 0x1c(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V0, V0, 3
lui   AT, hi(D_8011E354)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E354)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E358)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E358)(AT)
trunc.w.s F2, F0
mfc1  V0, F2
      NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x10(SP)
li    V0, -1
sw    V0, 0x14(SP)
sra   A1, A1, 0x10
sra   A2, A2, 0x10
jal   func_8010FB54
 sra   A3, A3, 0x10
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 li    S0, 1
jal   SleepProcess
 li    A0, 10
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
move  A2, R0
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
sll   A2, S0, 1
L80110630:
addu  A2, A2, S0
sll   A2, A2, 3
addu  A2, A2, S0
subu  A2, S1, A2
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0xa
bnez  V0, L80110630
 sll   A2, S0, 1
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 move  A2, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
lw    RA, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x30

func_801106A4:
addiu SP, SP, -0x58
sw    RA, 0x34(SP)
sw    S6, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
sdc1  F26, 0x50(SP)
sdc1  F24, 0x48(SP)
sdc1  F22, 0x40(SP)
sdc1  F20, 0x38(SP)
move  S2, A0
move  S3, A1
move  S1, A2
lw    S6, 0x68(SP)
li    V0, 2
bne   S6, V0, L801106FC
 move  S4, A3
jal   PlaySound
 li    A0, 325
L801106FC:
move  A0, S2
move  A1, S3
addiu A2, SP, 0x10
jal   0x800F6848
 addiu A3, SP, 0x14
lwc1  F2, 0(S4)
lwc1  F0, 0x10(SP)
sub.s F22, F2, F0
mtc1  S1, F4
      NOP
cvt.s.w F4, F4
div.s F22, F22, F4
lwc1  F2, 4(S4)
lwc1  F0, 0x14(SP)
sub.s F20, F2, F0
div.s F20, F20, F4
beqz  S1, L80110830
 li    S0, 2
xori  V0, S6, 1
sltiu S5, V0, 1
li    AT, 0x3D8F0000 ; 0.069824
ori AT, AT, 0x5c29
mtc1  AT, F26
li    AT, 0x3E990000 ; 0.298828
ori AT, AT, 0x999a
mtc1  AT, F24
L80110764:
lwc1  F2, 0x10(SP)
add.s F2, F22, F2
swc1  F2, 0x10(SP)
lwc1  F0, 0x14(SP)
add.s F0, F20, F0
swc1  F0, 0x14(SP)
trunc.w.s F4, F2
mfc1  A2, F4
      NOP
sll   A2, A2, 0x10
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S2
move  A1, S3
sra   A2, A2, 0x10
jal   0x800F688C
 sra   A3, A3, 0x10
slti  V0, S0, 0xb
and   V0, S5, V0
beqz  V0, L80110820
 sll   A2, S0, 1
addu  A2, A2, S0
sll   A2, A2, 3
addu  A2, A2, S0
sll   A2, A2, 0x10
move  A0, S2
move  A1, S3
jal   0x800F68E0
 sra   A2, A2, 0x10
mtc1  S0, F4
      NOP
cvt.s.w F4, F4
mul.s F4, F4, F26
cvt.d.s F2, F4
lui   AT, hi(D_8011F940)
ldc1  F0, lo(D_8011F940)(AT)
add.d F2, F2, F0
move  A0, S2
add.s F4, F4, F24
mfc1  A2, F4
cvt.s.d F2, F2
mfc1  A3, F2
      NOP
jal   0x800F696C
 move  A1, S3
L80110820:
jal   SleepVProcess
 addiu S1, S1, -1
bnez  S1, L80110764
 addiu S0, S0, 1
L80110830:
lwc1  F0, 0(S4)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lwc1  F0, 4(S4)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S2
move  A1, S3
sra   A2, A2, 0x10
jal   0x800F688C
 sra   A3, A3, 0x10
bnez  S6, L80110904
 li    S0, 1
li    S1, 255
li    AT, 0x3DCC0000 ; 0.099609
ori   AT, AT, 0xcccd
mtc1  AT, F22
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
sll   A2, S0, 1
L80110890:
addu  A2, A2, S0
sll   A2, A2, 3
addu  A2, A2, S0
subu  A2, S1, A2
sll   A2, A2, 0x10
move  A0, S2
move  A1, S3
jal   0x800F68E0
 sra   A2, A2, 0x10
mtc1  S0, F0
      NOP
cvt.s.w F0, F0
mul.s F0, F0, F22
sub.s F0, F20, F0
move  A0, S2
mfc1  A2, F0
mfc1  A3, F0
      NOP
jal   0x800F696C
 move  A1, S3
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0xa
bnez  V0, L80110890
 sll   A2, S0, 1
move  A0, S2
move  A1, S3
jal   0x800F68E0
 move  A2, R0
L80110904:
lw    RA, 0x34(SP)
lw    S6, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
ldc1  F26, 0x50(SP)
ldc1  F24, 0x48(SP)
ldc1  F22, 0x40(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x58

D_8011093C:
addiu SP, SP, -0x48
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F28, 0x40(SP)
sdc1  F26, 0x38(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
sdc1  F20, 0x20(SP)
jal   GetPlayerStruct
 li    A0, -1
jal   0x800E6264
 move  S1, V0
lui   A0, hi(CORE_801011FC)
jal   0x800D9B24
 lw    A0, lo(CORE_801011FC)(A0)
lui   V1, hi(CORE_801011FC)
lw    V1, lo(CORE_801011FC)(V1)
lw    V0, 0x3c(V1)
sw    R0, 0x30(V0)
lw    V0, 0x3c(V1)
sw    R0, 0x34(V0)
lw    V0, 0x3c(V1)
sw    R0, 0x38(V0)
li    A0, -1
jal   0x800FF900
 li    A1, 3
jal   PlaySound
 li    A0, 323
li    A0, 34
jal   0x800D90C8
 move  A1, R0
move  S0, V0
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 384
jal   0x8001C258
 move  A2, R0
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001C8E4
 li    A1, 6144
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
jal   0x8001C448
 lh    A0, 0(V0)
lw    A1, 0x24(S1)
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
mtc1  R0, F22
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
lui   AT, hi(D_8011F948)
ldc1  F24, lo(D_8011F948)(AT)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F26
L80110A30:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S0, 0x24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F28
cvt.d.s F0, F20
add.d F0, F0, F24
cvt.s.d F20, F0
c.lt.s F20, F26
      NOP
bc1t  L80110A30
       NOP
jal   0x800D9B24
 lw    A0, 0x24(S1)
lui   A0, hi(CORE_801011FC)
jal   0x800D9AA4
 lw    A0, lo(CORE_801011FC)(A0)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
c.le.s F0, F20
      NOP
bc1f  L80110B58
       NOP
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
lui   AT, hi(D_8011F950)
ldc1  F24, lo(D_8011F950)(AT)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F26
L80110AE8:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S0, 0x24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F28
cvt.d.s F0, F20
sub.d F0, F0, F24
cvt.s.d F20, F0
c.le.s F26, F20
      NOP
bc1t  L80110AE8
       NOP
L80110B58:
jal   0x800D9B54
 move  A0, S0
jal   SleepProcess
 li    A0, 20
lui   A1, hi(current_player_index)
lb    A1, lo(current_player_index)(A1)
jal   0x8004ACE0
 li    A0, 628
li    A0, 5
jal   0x800E6420
 li    A1, 2
jal   SleepProcess
 li    A0, 40
li    A0, -1
jal   0x800E6420
 li    A1, 2
jal   0x800EC414
 li    A0, 14868
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F28, 0x40(SP)
ldc1  F26, 0x38(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x48

D_80110BC8:
addiu SP, SP, -0x58
sw    RA, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F28, 0x50(SP)
sdc1  F26, 0x48(SP)
sdc1  F24, 0x40(SP)
sdc1  F22, 0x38(SP)
sdc1  F20, 0x30(SP)
jal   GetPlayerStruct
 li    A0, -1
move  S1, V0
li    A0, -1
jal   0x800E6420
 li    A1, 2
jal   0x800ECC0C
 addiu A0, SP, 0x10
lw    A2, 0x24(S1)
addiu A2, A2, 0x18
move  A0, A2
addiu A1, SP, 0x10
jal   0x800ED128
 li    A3, 8
jal   SleepProcess
 li    A0, 8
jal   PlaySound
 li    A0, 323
li    A0, 34
jal   0x800D90C8
 move  A1, R0
move  S0, V0
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 384
jal   0x8001C258
 move  A2, R0
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001C8E4
 li    A1, 6144
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
jal   0x8001C448
 lh    A0, 0(V0)
lw    A1, 0x24(S1)
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
mtc1  R0, F22
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
lui   AT, hi(D_8011F958)
ldc1  F24, lo(D_8011F958)(AT)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F26
L80110CB4:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S0, 0x24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F28
cvt.d.s F0, F20
add.d F0, F0, F24
cvt.s.d F20, F0
c.lt.s F20, F26
      NOP
bc1t  L80110CB4
       NOP
jal   0x800D9AA4
 lw    A0, 0x24(S1)
jal   0x800E639C
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
c.le.s F0, F20
      NOP
bc1f  L80110DD8
       NOP
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
lui   AT, hi(D_8011F960)
ldc1  F24, lo(D_8011F960)(AT)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F26
L80110D68:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S0, 0x24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F28
cvt.d.s F0, F20
sub.d F0, F0, F24
cvt.s.d F20, F0
c.le.s F26, F20
      NOP
bc1t  L80110D68
       NOP
L80110DD8:
jal   0x800D9B54
 move  A0, S0
lw    RA, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F28, 0x50(SP)
ldc1  F26, 0x48(SP)
ldc1  F24, 0x40(SP)
ldc1  F22, 0x38(SP)
ldc1  F20, 0x30(SP)
jr    RA
 addiu SP, SP, 0x58

D_80110E08:
addiu SP, SP, -0x48
sw    RA, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F22, 0x40(SP)
jal   0x8004EE68
 sdc1  F20, 0x38(SP)
lw    S1, 0x8c(V0)
li    A0, -1
li    A1, 1
jal   0x800FFA4C
 li    A2, 5
move  S3, V0
li    A0, 1
jal   0x8005279C
 move  A1, R0
sll   V0, V0, 0x10
sra   S2, V0, 0x10
move  S0, S2
move  A0, S0
move  A1, R0
lui   A2, hi(D_8011FB5E)
lh    A2, lo(D_8011FB5E)(A2)
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 18304
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 4096
jal   0x800E4A7C
 sll   S1, S1, 2
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
addiu A2, SP, 0x18
jal   0x800F6848
 addiu A3, SP, 0x1c
lwc1  F2, 0x18(SP)
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F4
      NOP
add.s F2, F2, F4
swc1  F2, 0x18(SP)
lwc1  F0, 0x1c(SP)
sub.s F0, F0, F4
swc1  F0, 0x1c(SP)
trunc.w.s F4, F2
mfc1  A2, F4
      NOP
sll   A2, A2, 0x10
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
sw    R0, 0x10(SP)
move  A0, S0
move  A1, R0
li    A2, 255
jal   0x80055420
 li    A3, 255
li    S0, 255
lui   AT, hi(D_8011E440)
addu  AT, AT, S1
lwc1  F20, lo(D_8011E440)(AT)
cvt.s.w F20, F20
li    AT, 0x40A00000 ; 5.000000
mtc1  AT, F22
move  S1, S2
L80110F44:
jal   0x8008E3F0
 mov.s F12, F20
mul.s F0, F0, F22
lwc1  F2, 0x18(SP)
add.s F0, F0, F2
swc1  F0, 0x18(SP)
jal   0x8008EF20
 mov.s F12, F20
mul.s F0, F0, F22
lwc1  F2, 0x1c(SP)
sub.s F2, F2, F0
swc1  F2, 0x1c(SP)
lwc1  F0, 0x18(SP)
trunc.w.s F4, F0
mfc1  A2, F4
      NOP
sll   A2, A2, 0x10
trunc.w.s F0, F2
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S1
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
move  A0, S1
move  A1, R0
jal   0x80055458
 andi  A2, S0, 0xffff
jal   SleepVProcess
 addiu S0, S0, -0x14
bgez  S0, L80110F44
 move  A0, S2
move  S0, S2
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   0x800FFAEC
 move  A0, S3
jal   0x800525C8
 move  A0, S0
jal   EndProcess
 move  A0, R0
lw    RA, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F22, 0x40(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x48

D_80111018:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
lui A0, 0x13
jal   ReadMainFS
 ori A0, A0, 0x1b8
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   V0, V0, 0x10
lui   AT, hi(D_8011FB5C)
sw    V0, lo(D_8011FB5C)(AT)
jal   FreeMainFS
 move  A0, S0
jal   D_801104E0
       NOP
sw    R0, 0x10(SP)
func_80111074:
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x3A01 ; "Which shop will you call?"
move  A2, R0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
lui   A0, hi(D_8011E3D4)
addiu A0, A0, lo(D_8011E3D4)
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 move  A1, R0
jal   0x800EC6C8
 move  S2, V0
jal   0x800EC6EC
       NOP
slti  V0, S2, 2
beqz  V0, L801110D0
       NOP
bltz  S2, L801110D0
 addiu V0, S2, 1
lui   AT, hi(CORE_800CD0AC)
j     L80111128
 sh    V0, lo(CORE_800CD0AC)(AT)
L801110D0:
lui   A0, hi(func_8010A474)
addiu A0, A0, lo(func_8010A474)
move  A1, R0
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
move  A0, S0
jal   0x80047B80
 li    A1, 128
jal   func_80106FE8
       NOP
li    V0, 1
lui   AT, hi(CORE_800CB99C)
jal   0x80049FB8
 sb    V0, lo(CORE_800CB99C)(AT)
jal   EndProcess
 move  A0, S0
jal   0x800FC8A4
       NOP
j     func_80111074
 sw    R0, 0x10(SP)
L80111128:
jal   SleepProcess
 li    A0, 30
jal   PlaySound
 li    A0, 327
move  S1, R0
L8011113C:
lui   A0, hi(D_80110E08)
addiu A0, A0, lo(D_80110E08)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
jal   0x8004EE68
 sw    S1, 0x8c(S0)
move  A0, V0
jal   0x8004ED30
 move  A1, S0
jal   SleepProcess
 li    A0, 3
addiu S1, S1, 1
slti  V0, S1, 5
bnez  V0, L8011113C
       NOP
jal   0x8004EE18
 move  S1, R0
jal   SleepProcess
 li    A0, 20
L80111194:
lui   A0, hi(D_80110E08)
addiu A0, A0, lo(D_80110E08)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
jal   0x8004EE68
 sw    S1, 0x8c(S0)
move  A0, V0
jal   0x8004ED30
 move  A1, S0
jal   SleepProcess
 li    A0, 3
addiu S1, S1, 1
slti  V0, S1, 5
bnez  V0, L80111194
       NOP
jal   0x8004EE18
       NOP
jal   SleepProcess
 li    A0, 20
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S3)
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
lui   A0, hi(D_8011FB5E)
jal   FreeGraphics
 lh    A0, lo(D_8011FB5E)(A0)
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
bnez  S2, L801112A4
 li    A0, 672
lb    V0, 0xf(S3)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_coins)
addu  V0, V0, V1
lh    V0, lo(p1_coins)(V0)
slti  V0, V0, 5
bnez  V0, L801112A4
 li    A0, 666
lb    V1, 3(S3)
lb    V0, 2(S3)
bne   V1, V0, L801112A4
 li    A0, 664
li    A0, 666
L801112A4:
jal   PlaySound
       NOP
jal   item_shop_event
       NOP
lui   AT, hi(CORE_800CD0AC)
sh    R0, lo(CORE_800CD0AC)(AT)
lw    RA, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

; Item that calls bowser
D_801112D8:
addiu SP, SP, -0x30
sw    RA, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
lui   S2, hi(CORE_800CD058)
addiu S2, S2, lo(CORE_800CD058)
lui A0, 0x13
jal   ReadMainFS
 ori A0, A0, 0x1b8
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   V0, V0, 0x10
lui   AT, hi(D_8011FB5C)
sw    V0, lo(D_8011FB5C)(AT)
jal   FreeMainFS
 move  A0, S0
jal   D_801104E0
 move  S1, R0
jal   SleepProcess
 li    A0, 30
jal   PlaySound
 li    A0, 327
L8011133C:
lui   A0, hi(D_80110E08)
addiu A0, A0, lo(D_80110E08)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
jal   0x8004EE68
 sw    S1, 0x8c(S0)
move  A0, V0
jal   0x8004ED30
 move  A1, S0
jal   SleepProcess
 li    A0, 3
addiu S1, S1, 1
slti  V0, S1, 5
bnez  V0, L8011133C
       NOP
jal   0x8004EE18
 move  S1, R0
jal   SleepProcess
 li    A0, 20
L80111394:
lui   A0, hi(D_80110E08)
addiu A0, A0, lo(D_80110E08)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
jal   0x8004EE68
 sw    S1, 0x8c(S0)
move  A0, V0
jal   0x8004ED30
 move  A1, S0
jal   SleepProcess
 li    A0, 3
addiu S1, S1, 1
slti  V0, S1, 5
bnez  V0, L80111394
       NOP
jal   0x8004EE18
       NOP
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 671
func_801113F4:
lui   V1, hi(p1_char)
addiu V1, V1, lo(p1_char)
lbu   A2, 0(V1)
lui   A0, hi(CORE_801014A0)
addiu A0, A0, lo(CORE_801014A0)
sll   A2, A2, 2
addu  A2, A2, A0
lbu   A3, 0x38(V1)
sll   A3, A3, 2
addu  A3, A3, A0
lbu   V0, 0x70(V1)
sll   V0, V0, 2
addu  V0, V0, A0
lw    V0, 0(V0)
sw    V0, 0x10(SP)
lbu   V0, 0xa8(V1)
sll   V0, V0, 2
addu  V0, V0, A0
lw    V0, 0(V0)
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 4
lw    A2, 0(A2)
lw    A3, 0(A3)
jal   0x800EC8EC ; ShowMessage
 li    A1, 0x3A0A ; "Hello? Yeah, this is Bowser. Who are you???"
lb    V1, 0xf(S2)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
beqz  V0, L80111488
 li    A0, 1
j     L80111490
 move  A1, R0
L80111488:
li    A0, 2
lb    A1, 0xf(S2)
L80111490:
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
       NOP
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
li    V0, 4
beq   S0, V0, L801114C4
 li    V0, 5
beq   S0, V0, L801114EC
 move  A1, R0
j     L80111540
 sll   V0, S0, 3

L801114C4:
jal   0x800EF0D8
 move  A0, R0
move  S0, V0
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 4
li    A1, 14860
j     func_80111578
 move  A2, R0

L801114EC:
lui   A0, hi(func_8010A474)
addiu A0, A0, lo(func_8010A474)
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S0, V0
move  A0, S0
jal   0x80047B80
 li    A1, 128
jal   func_80106FE8
       NOP
li    V0, 1
lui   AT, hi(CORE_800CB99C)
jal   0x80049FB8
 sb    V0, lo(CORE_800CB99C)(AT)
jal   EndProcess
 move  A0, S0
jal   0x800FC8A4
       NOP
j     func_801113F4
       NOP
L80111540:
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_char)
addu  AT, AT, V0
lbu   V0, lo(p1_char)(AT)
sll   V0, V0, 2
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 4
li    A1, 14859
lui   A2, hi(CORE_801014A0)
addu  A2, A2, V0
lw    A2, lo(CORE_801014A0)(A2)
func_80111578:
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
jal   PlaySound
 li    A0, 668
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S2)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S2)
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S2)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
lui   A0, hi(D_8011FB5E)
jal   FreeGraphics
 lh    A0, lo(D_8011FB5E)(A0)
jal   0x800DEB2C
 lb    A0, 0xf(S2)
li    V1, 3
bne   V0, V1, L80111618
       NOP
jal   0x80035FDC
 li    A0, 23
j     L80111620
       NOP
L80111618:
jal   0x8003602C
 li    A0, 23
L80111620:
lui   AT, hi(CORE_800CD0B2)
jal   0x800FCA4C
 sh    S0, lo(CORE_800CD0B2)(AT)
li    A0, 80
move  A1, R0
li    A2, 3
jal   0x800FF794
 li    A3, 1
jal   0x800FC8A4
       NOP
jal   0x800FF7F0
 li    A0, 2
jal   0x8004A0E0
       NOP
jal   SleepProcess
 li    A0, -1
lw    RA, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x30

 ; Jeanie?
D_80111678:
addiu SP, SP, -0x160
sw    RA, 0x134(SP)
sw    FP, 0x130(SP)
sw    S7, 0x12c(SP)
sw    S6, 0x128(SP)
sw    S5, 0x124(SP)
sw    S4, 0x120(SP)
sw    S3, 0x11c(SP)
sw    S2, 0x118(SP)
sw    S1, 0x114(SP)
sw    S0, 0x110(SP)
sdc1  F28, 0x158(SP)
sdc1  F26, 0x150(SP)
sdc1  F24, 0x148(SP)
sdc1  F22, 0x140(SP)
sdc1  F20, 0x138(SP)
lui   S7, hi(CORE_800CD058)
addiu S7, S7, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S0, V0
li    A0, 60
jal   0x800D90C8
 move  A1, R0
move  S3, V0
move  A0, S3
li    A1, -1
jal   0x800D9CE8
 li    A2, 1
lw    V0, 0x3c(S3)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
lw    A1, 0x24(S0)
addiu A0, S3, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S3)
lhu   V0, 0xa(S3)
ori   V0, V0, 1
sh    V0, 0xa(S3)
addiu A0, S3, 0x24
move  A1, R0
move  A2, A1
jal   0x80089A10
 move  A3, A1
jal   0x800D9B24
 move  A0, S3
jal   func_8010FE54
       NOP
li    A0, -1
jal   PlayerHasItem
 li    A1, ITEM_LUCKY_LAMP
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
lui   A0, hi(current_player_index)
jal   FixUpPlayerItemSlots
 lb    A0, lo(current_player_index)(A0)
li    A0, 61
jal   0x800D90C8
 move  A1, R0
move  S1, V0
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
jal   0x8001FA68
 lh    A0, 0(V0)
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 li    A1, 255
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
lw    A1, 0x24(S0)
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x10(S1)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
lwc1  F0, 0x10(S1)
sub.s F0, F0, F22
L80111824:
jal   SleepVProcess
 swc1  F0, 0x10(S1)
lwc1  F0, 0x10(S1)
c.lt.s F20, F0
      NOP
      NOP
bc1tl L80111824
 sub.s F0, F0, F22
jal   PlaySound
 li    A0, 295
lui   A0, hi(CORE_800CDBC8)
lh    A0, lo(CORE_800CDBC8)(A0)
jal   0x800039A4
 li    A1, 180
li    A0, -1
li    A1, 3
jal   0x800FFA4C
 li    A2, 5
sw    V0, 0x10c(SP)
li    S4, 180
move  S0, R0
lui   S6, hi(D_8011F940)
addiu S6, S6, lo(D_8011F940)
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F22
addiu S2, SP, 0x28
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F20
addiu S5, SP, 0x48
L80111898:
addiu A3, SP, 0x48
lui   A2, hi(D_8011F8E0)
addiu A2, A2, lo(D_8011F8E0)
L801118A4:
lw    V0, 0(A2)
lw    V1, 4(A2)
lw    A0, 8(A2)
lw    A1, 0xc(A2)
sw    V0, 0(A3)
sw    V1, 4(A3)
sw    A0, 8(A3)
sw    A1, 0xc(A3)
addiu A2, A2, 0x10
bne   A2, S6, L801118A4
 addiu A3, A3, 0x10
mtc1  S4, F12
      NOP
jal   0x8008EF20
 cvt.s.w F12, F12
add.s F0, F0, F0
add.s F0, F0, F22
andi  V0, S0, 1
beqz  V0, L80111964
 swc1  F0, 0x10(S1)
lw    A1, 0xc(S1)
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x80089A10
 move  A0, S2
lwc1  F0, 0x28(SP)
sub.s F0, F0, F20
swc1  F0, 0x28(SP)
lwc1  F0, 0x2c(SP)
add.s F0, F0, F20
swc1  F0, 0x2c(SP)
srl   V1, S0, 0x1f
addu  V1, S0, V1
sra   V1, V1, 1
andi  V1, V1, 7
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 2
addu  V0, S5, V0
sw    V0, 0x10(SP)
li    V0, 1
sw    V0, 0x14(SP)
move  A0, S2
lui A1, 0x3dcc
ori A1, A1, 0xcccd
lui   A2, 0x4000
jal   func_8010F088
 li    A3, 1
L80111964:
jal   SleepVProcess
 addiu S4, S4, 0x14
slti  V0, S4, 0x438
bnez  V0, L80111898
 addiu S0, S0, 1
li    S2, 255
mtc1  R0, F20
lui   FP, hi(D_8011F940)
addiu FP, FP, lo(D_8011F940)
addiu S5, SP, 0x28
li    AT, 0x41700000 ; 15.000000
mtc1  AT, F22
addiu S6, SP, 0xa8
addiu A3, SP, 0xa8
func_8011199C:
lui   A2, hi(D_8011F8E0)
addiu A2, A2, lo(D_8011F8E0)
L801119A4:
lw    V0, 0(A2)
lw    V1, 4(A2)
lw    A0, 8(A2)
lw    A1, 0xc(A2)
sw    V0, 0(A3)
sw    V1, 4(A3)
sw    A0, 8(A3)
sw    A1, 0xc(A3)
addiu A2, A2, 0x10
bne   A2, FP, L801119A4
 addiu A3, A3, 0x10
mtc1  S4, F12
      NOP
jal   0x8008EF20
 cvt.s.w F12, F12
add.s F0, F0, F0
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F2
      NOP
add.s F0, F0, F2
andi  V0, S0, 1
beqz  V0, L80111A70
 swc1  F0, 0x10(S1)
lw    A1, 0xc(S1)
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x80089A10
 move  A0, S5
lwc1  F0, 0x28(SP)
sub.s F0, F0, F22
swc1  F0, 0x28(SP)
lwc1  F0, 0x2c(SP)
add.s F0, F0, F22
swc1  F0, 0x2c(SP)
srl   V1, S0, 0x1f
addu  V1, S0, V1
sra   V1, V1, 1
andi  V1, V1, 7
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 2
addu  V0, S6, V0
sw    V0, 0x10(SP)
li    V0, 1
sw    V0, 0x14(SP)
move  A0, S5
lui A1, 0x3dcc
ori A1, A1, 0xcccd
lui   A2, 0x4000
jal   func_8010F088
 li    A3, 1
L80111A70:
bgtz  S2, L80111AD4
       NOP
jal   0x800D9B24
 move  A0, S1
jal   0x800D9A40
 move  A0, S3
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F0
      NOP
add.s F20, F20, F0
swc1  F20, 0x2c(S3)
swc1  F20, 0x28(S3)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
c.lt.s F0, F20
      NOP
      NOP
bc1f  L80111AEC
 swc1  F20, 0x24(S3)
jal   0x8004A520
 li    A0, 61 ; Jeanie's Theme
j     func_80111AFC
       NOP
L80111AD4:
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001F9E4
 andi  A1, S2, 0xff
addiu S2, S2, -0xc
L80111AEC:
jal   SleepVProcess
 addiu S0, S0, 1
j     func_8011199C
 addiu A3, SP, 0xa8
func_80111AFC:
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x2c(S3)
swc1  F0, 0x28(S3)
swc1  F0, 0x24(S3)
lui   A1, 0x4040
lui   A2, 0x4000
jal   0x800EDB98
 move  A0, S3
lw    A0, 0x10c(SP)
jal   0x800FFAEC
 move  S4, V0
jal   SleepProcess
 li    A0, 30
li    A0, 60
jal   0x800EC590
 li    A1, 0x3A2F ; "What do you want? I'm the Mushroom Jeanie who lives in the Lucky Lamp..."
jal   EndProcess
 move  A0, S4
li    S0, 1
lwc1  F0, 0x10(S3)
lwc1  F2, 0x30(S3)
sub.s F0, F0, F2
swc1  F0, 0x10(S3)
lui   A1, hi(CORE_800A0550)
lw    A1, lo(CORE_800A0550)(A1)
addiu A0, SP, 0x18
addiu A1, A1, 0x10
jal   midpoint
 addiu A2, S3, 0xc
jal   0x800D88E8
 addiu A0, SP, 0x18
lwc1  F0, 0x10(S3)
lwc1  F2, 0x30(S3)
add.s F0, F0, F2
swc1  F0, 0x10(S3)
li    AT, 0x44E10000 ; 1800.000000
mtc1  AT, F2
lwc1  F0, 0x30(S3)
c.lt.s F0, F2
      NOP
bc1f  L80111C78
       NOP
li    AT, 0x42200000 ; 40.000000
ori AT, AT, 0xcccd
mtc1  AT, F20
li    AT, 0x42200000 ; 40.000000
mtc1  AT, F26
li    AT, 0x43960000 ; 300.000000
mtc1  AT, F24
li    AT, 0x44E10000 ; 1800.000000
mtc1  AT, F22
L80111BD0:
lwc1  F0, 0x18(SP)
mul.s F0, F0, F20
lwc1  F2, 0xc(S3)
add.s F0, F0, F2
swc1  F0, 0xc(S3)
lwc1  F0, 0x1c(SP)
mul.s F0, F0, F26
lwc1  F2, 0x30(S3)
add.s F0, F0, F2
swc1  F0, 0x30(S3)
lwc1  F0, 0x20(SP)
mul.s F0, F0, F20
lwc1  F2, 0x14(S3)
add.s F0, F0, F2
swc1  F0, 0x14(S3)
lwc1  F0, 0x30(S3)
c.lt.s F24, F0
      NOP
      NOP
bc1t  L80111C28
 li    V1, 1
move  V1, R0
L80111C28:
sltu  V0, R0, S0
and   V0, V1, V0
beqz  V0, L80111C5C
 li    A0, 255
move  S0, R0
li    A1, 255
jal   0x800620C8
 li    A2, 255
li    A0, 11
jal   InitFadeOut
 li    A1, 50
jal   PlaySound
 li    A0, 296
L80111C5C:
jal   SleepVProcess
       NOP
lwc1  F0, 0x30(S3)
c.lt.s F0, F22
      NOP
bc1t  L80111BD0
       NOP
L80111C78:
jal   GetFadeStatus
       NOP
beqz  V0, L80111C98
       NOP
jal   SleepVProcess
       NOP
j     L80111C78
       NOP
L80111C98:
lb    V0, 5(S7)
addu  V0, S7, V0
lb    V0, 6(V0)
sll   V0, V0, 1
lui   A0, hi(star_space_indices)
addu  A0, A0, V0
jal   GetSpaceData
 lh    A0, lo(star_space_indices)(A0)
move  S1, V0
lb    V0, 5(S7)
addu  V0, S7, V0
lb    V0, 6(V0)
sll   V0, V0, 1
lui   A0, hi(D_8011D2C0)
addu  A0, A0, V0
lh    A0, lo(D_8011D2C0)(A0)
jal   GetSpaceData
 addiu S1, S1, 8
move  S2, V0
addiu S0, SP, 0x38
move  A0, S0
jal   0x80089A20
 move  A1, S1
jal   0x800E9748
 move  A0, S0
jal   0x800F915C
 li    A0, 4
jal   0x800F9198
 move  A0, S0
lhu   V0, 0xa(S3)
andi  V0, V0, 0xfffe
sh    V0, 0xa(S3)
addiu A0, S3, 0xc
jal   0x80089A20
 move  A1, S1
addiu A0, SP, 0x18
addiu A1, S2, 8
jal   midpoint
 move  A2, S1
jal   0x800D88E8
 addiu A0, SP, 0x18
lwc1  F2, 0x18(SP)
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F4
      NOP
mul.s F2, F2, F4
lwc1  F0, 0xc(S3)
sub.s F0, F0, F2
swc1  F0, 0xc(S3)
lwc1  F2, 0x20(SP)
mul.s F2, F2, F4
lwc1  F0, 0x14(S3)
sub.s F0, F0, F2
swc1  F0, 0x14(S3)
jal   PlaySound
 li    A0, 297
li    A0, 11
jal   InitFadeIn
 li    A1, 50
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S3)
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F22
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
L80111DA4:
jal   SleepVProcess
       NOP
lwc1  F0, 0x30(S3)
sub.s F0, F0, F22
c.lt.s F20, F0
      NOP
      NOP
bc1t  L80111DA4
 swc1  F0, 0x30(S3)
L80111DC8:
jal   GetFadeStatus
       NOP
beqz  V0, L80111DE8
       NOP
jal   SleepVProcess
       NOP
j     L80111DC8
       NOP
L80111DE8:
jal   0x8004EE68
       NOP
move  S0, V0
addiu A2, S3, 0x18
move  A0, A2
addiu A1, SP, 0x18
jal   0x800ED128
 li    A3, 16
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 move  S0, R0
lui   A1, 0x4040
lui   A2, 0x4000
jal   0x800EDB98
 move  A0, S3
move  S4, V0
li    A0, 60
jal   0x800EC590
 li    A1, 14896
jal   PlaySound
 li    A0, 300
move  A0, S3
li    A1, -1
jal   0x800D9CE8
 move  A2, R0
jal   SleepProcess
 li    A0, 20
li    S3, 1
lui   S2, hi(D_8011FA98)
addiu S2, S2, lo(D_8011FA98)
sll   V0, S0, 2
L80111E6C:
addu  S1, V0, S2
lw    A0, 0(S1)
beqz  A0, L80111E88
 addiu S0, S0, 1
jal   EndProcess
       NOP
sw    R0, 0(S1)
L80111E88:
slti  V0, S0, STAR_COUNT
bnez  V0, L80111E6C
 sll   V0, S0, 2
lb    V0, 5(S7)
addu  V0, S7, V0
lb    V0, 6(V0)
sll   V0, V0, 2
lui   S0, hi(D_8011FA78)
addu  S0, S0, V0
lw    S0, lo(D_8011FA78)(S0)
jal   0x8004A994
 li    A0, 90
mtc1  R0, F20
li    AT, 0x43C80000 ; 400.000000
mtc1  AT, F2
lwc1  F0, 0x30(S0)
c.lt.s F0, F2
      NOP
      NOP
bc1f  L80112028
 mov.s F4, F0
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F22
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F24
li    AT, 0x42480000 ; 50.000000
mtc1  AT, F28
li    AT, 0x43C80000 ; 400.000000
mtc1  AT, F26
add.s F0, F4, F22
L80111F00:
swc1  F0, 0x30(S0)
lwc1  F0, 0x18(SP)
mul.s F0, F0, F22
lwc1  F2, 0xc(S0)
add.s F0, F0, F2
swc1  F0, 0xc(S0)
lwc1  F0, 0x20(SP)
mul.s F0, F0, F22
lwc1  F2, 0x14(S0)
add.s F0, F0, F2
swc1  F0, 0x14(S0)
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S0)
jal   0x8008E3F0
 mov.s F12, F20
swc1  F0, 0x20(S0)
li    AT, 0x42340000 ; 45.000000
mtc1  AT, F0
      NOP
add.s F20, F20, F0
c.lt.s F24, F20
      NOP
      NOP
bc1tl L80111F6C
 sub.s F20, F20, F24
L80111F6C:
lwc1  F0, 0x30(S0)
c.lt.s F28, F0
      NOP
      NOP
bc1t  L80111F88
 li    V1, 1
move  V1, R0
L80111F88:
sltu  V0, R0, S3
and   V0, V1, V0
beqz  V0, L80112008
       NOP
jal   0x800DEB2C
 lb    A0, 0xf(S7)
li    V1, 3
bne   V0, V1, L80111FBC
       NOP
jal   0x80035FDC
 li    A0, 23
j     L80111FC8
 move  S3, R0
L80111FBC:
jal   0x8003602C
 li    A0, 23
move  S3, R0
L80111FC8:
move  A0, R0
move  A1, R0
jal   0x800620C8
 move  A2, R0
jal   EndProcess
 move  A0, S4
jal   0x800EDA58
       NOP
jal   0x800FC8A4
       NOP
jal   0x800FF7F0
 li    A0, 2
jal   0x800FCA14
       NOP
jal   0x8004A0E0
       NOP
L80112008:
jal   SleepVProcess
       NOP
lwc1  F4, 0x30(S0)
c.lt.s F4, F26
      NOP
      NOP
bc1tl L80111F00
 add.s F0, F4, F22
L80112028:
jal   SleepProcess
 li    A0, -1
lw    RA, 0x134(SP)
lw    FP, 0x130(SP)
lw    S7, 0x12c(SP)
lw    S6, 0x128(SP)
lw    S5, 0x124(SP)
lw    S4, 0x120(SP)
lw    S3, 0x11c(SP)
lw    S2, 0x118(SP)
lw    S1, 0x114(SP)
lw    S0, 0x110(SP)
ldc1  F28, 0x158(SP)
ldc1  F26, 0x150(SP)
ldc1  F24, 0x148(SP)
ldc1  F22, 0x140(SP)
ldc1  F20, 0x138(SP)
jr    RA
 addiu SP, SP, 0x160

; item 17?
D_80112074:
addiu SP, SP, -0x58
sw    RA, 0x3c(SP)
sw    S4, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
sdc1  F24, 0x50(SP)
sdc1  F22, 0x48(SP)
sdc1  F20, 0x40(SP)
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
lb    S2, 0xf(S1)
li    A0, 1
jal   0x8005279C
 move  A1, R0
sll   V0, V0, 0x10
lui   A0, hi(CORE_80101980)
lw    A0, lo(CORE_80101980)(A0)
jal   ReadMainFS
 sra   S3, V0, 0x10
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   S4, V0, 0x10
jal   FreeMainFS
 move  A0, S0
move  S0, S3
move  A0, S0
move  A1, R0
move  A2, S4
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 18304
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 36864
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
li    A2, 1
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
jal   SleepProcess
 li    A0, 20
jal   PlaySound
 li    A0, 325
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
addiu A2, SP, 0x20
jal   0x800F6748
 addiu A3, SP, 0x24
jal   0x8004EE68
       NOP
move  S0, V0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lwc1  F0, 0x20(SP)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lwc1  F0, 0x24(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lb    V0, 0xf(S1)
sll   V0, V0, 3
lui   AT, hi(D_8011E354)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E354)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E358)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E358)(AT)
trunc.w.s F2, F0
mfc1  V0, F2
      NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x10(SP)
li    V0, -1
sw    V0, 0x14(SP)
sra   A1, A1, 0x10
sra   A2, A2, 0x10
jal   func_8010FB54
 sra   A3, A3, 0x10
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 li    S0, 1
jal   SleepProcess
 li    A0, 10
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
move  A2, R0
jal   0x80055140
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
li    S1, 255
sll   A2, S0, 1
L8011225C:
addu  A2, A2, S0
sll   A2, A2, 3
addu  A2, A2, S0
subu  A2, S1, A2
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0xa
bnezl V0, L8011225C
 sll   A2, S0, 1
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055458
 move  A2, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
jal   0x800E4A7C
 move  S0, S3
sll   V1, S2, 3
subu  V1, V1, S2
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
jal   0x800E4A7C
 sb    V0, 0(V1)
move  A0, S2
move  A1, V0
jal   0x800F68E0
 move  A2, R0
jal   0x800E4A7C
       NOP
move  A0, S2
move  A1, V0
addiu A2, SP, 0x20
jal   0x800F6848
 addiu A3, SP, 0x24
lwc1  F0, 0x20(SP)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lwc1  F0, 0x24(SP)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
move  A0, S0
move  A1, R0
jal   0x8005532C
 li    A2, 32768
jal   FixUpPlayerItemSlots
 move  A0, S2
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
sw    R0, 0x10(SP)
func_80112388:
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 56
li    A1, 0x4100 ; "Hey Im the skeleton key. Youre not throwing me away right?"
move  A2, R0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
lui   A0, hi(D_8011E454)
addiu A0, A0, lo(D_8011E454)
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 move  A1, R0
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
beqz  S0, L801123DC
 li    V0, 1
beql  S0, V0, L80112404
 sw    R0, 0x10(SP)
j     L8011247C
 move  S0, S3
L801123DC:
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 56
li    A1, 16641
move  A2, R0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
j     L801124BC
       NOP
L80112404:
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, 56
li    A1, 16642
move  A2, R0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
move  A0, S3
move  A1, R0
jal   0x800553A8
 li    A2, 32768
jal   PlayerHasEmptyItemSlot
 move  A0, S2
sll   V1, S2, 3
subu  V1, V1, S2
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, 1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 move  A0, S2
lui   V1, hi(CORE_800CD0A8)
addiu V1, V1, lo(CORE_800CD0A8)
lhu   V0, 0(V1)
andi  V0, V0, 0xfffe
j     L801124BC
 sh    V0, 0(V1)
L8011247C:
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 32768
jal   func_80106FE8
       NOP
li    V0, 1
lui   AT, hi(CORE_800CB99C)
jal   0x80049FB8
 sb    V0, lo(CORE_800CB99C)(AT)
move  A0, S0
move  A1, R0
jal   0x8005532C
 li    A2, 32768
j     func_80112388
 sw    R0, 0x10(SP)
L801124BC:
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
bnez  S0, L80112580
       NOP
jal   SleepProcess
 li    A0, 10
li    S0, 1
move  S1, S3
li    AT, 0x407E0000 ; 3.968750
ori AT, AT, 0xf9db
mtc1  AT, F24
li    AT, 0x437F0000 ; 255.000000
mtc1  AT, F22
li    AT, 0x4F000000 ; 2147483648.000000
mtc1  AT, F20
lui   S2, 0x8000
L80112504:
mtc1  S0, F0
      NOP
cvt.s.w F0, F0
mul.s F0, F0, F24
sub.s F2, F22, F0
c.le.s F20, F2
      NOP
      NOP
bc1tl L80112540
 sub.s F0, F2, F20
trunc.w.s F0, F2
mfc1  A2, F0
      NOP
j     L80112554
 move  A0, S1
L80112540:
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
or    A2, A2, S2
move  A0, S1
L80112554:
move  A1, R0
jal   0x80055458
 andi  A2, A2, 0xffff
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0x40
bnez  V0, L80112504
 move  A1, R0
move  A0, S3
jal   0x80055458
 move  A2, R0
L80112580:
jal   0x800525C8
 move  A0, S3
jal   FreeGraphics
 move  A0, S4
lw    RA, 0x3c(SP)
lw    S4, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
ldc1  F24, 0x50(SP)
ldc1  F22, 0x48(SP)
ldc1  F20, 0x40(SP)
jr    RA
 addiu SP, SP, 0x58

D_801125BC:
addiu SP, SP, -0x40
sw    RA, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F22, 0x38(SP)
jal   0x8004EE68
 sdc1  F20, 0x30(SP)
lw    S1, 0x8c(V0)
li    A0, 1
jal   0x8005279C
 move  A1, R0
sll   V0, V0, 0x10
sra   S2, V0, 0x10
move  S0, S2
move  A0, S0
move  A1, R0
lui   A2, hi(D_8011FB66)
lh    A2, lo(D_8011FB66)(A2)
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 9
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 4096
lui   A0, hi(D_8011FB60)
lw    A0, lo(D_8011FB60)(A0)
move  A1, R0
addiu A2, SP, 0x18
jal   0x800F6E4C
 addiu A3, SP, 0x1c
lui   V0, hi(D_8011FB60)
lw    V0, lo(D_8011FB60)(V0)
sll   V0, V0, 3
lui   AT, hi(D_8011E20C)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E20C)(AT)
li    AT, 0x41800000 ; 16.000000
mtc1  AT, F4
      NOP
mul.s F0, F0, F4
lui   AT, hi(D_8011E1EC)
addu  AT, AT, V0
lwc1  F2, lo(D_8011E1EC)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
swc1  F2, 0x18(SP)
lui   AT, hi(D_8011E210)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E210)(AT)
mul.s F0, F0, F4
lui   AT, hi(D_8011E1F0)
addu  AT, AT, V0
lwc1  F2, lo(D_8011E1F0)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
swc1  F2, 0x1c(SP)
lwc1  F0, 0x18(SP)
cvt.s.w F0, F0
sll   S1, S1, 3
lui   AT, hi(D_8011E460)
addu  AT, AT, S1
lwc1  F2, lo(D_8011E460)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lwc1  F0, 0x1c(SP)
cvt.s.w F0, F0
lui   AT, hi(D_8011E464)
addu  AT, AT, S1
lwc1  F2, lo(D_8011E464)(AT)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A0, S0
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
li    V0, 255
sw    V0, 0x10(SP)
move  A0, S0
move  A1, R0
li    A2, 255
jal   0x80055420
 li    A3, 255
move  A0, S0
move  A1, R0
jal   0x80055458
 li    A2, 255
mtc1  R0, F20
li    S0, 255
move  S1, S2
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F22
L8011275C:
move  A0, S1
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x800551D8
 move  A1, R0
move  A0, S1
move  A1, R0
jal   0x80055458
 andi  A2, S0, 0xffff
jal   SleepVProcess
 addiu S0, S0, -0xa
bgez  S0, L8011275C
 add.s F20, F20, F22
move  S0, S2
move  A0, S0
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   0x800525C8
 move  A0, S0
jal   EndProcess
 move  A0, R0
lw    RA, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F22, 0x38(SP)
ldc1  F20, 0x30(SP)
jr    RA
 addiu SP, SP, 0x40

D_801127D8:
addiu SP, SP, -0x38
sw    RA, 0x34(SP)
sw    S6, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
jal   0x8004EE68
 sw    S0, 0x18(SP)
lw    S1, 0x8c(V0)
lui A0, 0x21
jal   ReadMainFS
 ori A0, A0, 0x2c
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   S6, V0, 0x10
jal   FreeMainFS
 move  A0, S0
lui A0, 0x13
jal   ReadMainFS
 ori A0, A0, 0x1ba
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   S5, V0, 0x10
jal   FreeMainFS
 move  A0, S0
lui A0, 0x13
jal   ReadMainFS
 ori A0, A0, 0x1b9
move  S0, V0
jal   ImgPackParse
 move  A0, S0
sll   V0, V0, 0x10
sra   V0, V0, 0x10
lui   AT, hi(D_8011FB64)
sw    V0, lo(D_8011FB64)(AT)
jal   FreeMainFS
 move  A0, S0
li    A0, 2
jal   0x8005279C
 li    A1, 2
sll   V0, V0, 0x10
sra   S3, V0, 0x10
move  S0, S3
move  A0, S0
move  A1, R0
jal   0x800550F4
 li    A2, 1
move  A0, S0
move  A1, R0
move  A2, S6
jal   0x80055024
 li    A3, 12
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 9
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 4096
move  A0, S0
move  A1, R0
jal   0x800554C4
 li    A2, -1
move  A0, S0
li    A1, 1
move  A2, S5
jal   0x80055024
 move  A3, R0
move  A0, S0
li    A1, 1
jal   0x80055294
 li    A2, 9
move  A0, S0
li    A1, 1
jal   0x800553A8
 li    A2, 36864
li    V0, 255
sw    V0, 0x10(SP)
move  A0, S0
li    A1, 1
li    A2, 255
jal   0x80055420
 li    A3, 255
move  A0, S0
li    A1, 1
jal   0x80055458
 li    A2, 255
move  A0, S0
li    A1, 1
lui   A2, 0x4000
jal   0x800551D8
 move  A3, A2
move  A0, S0
li    A1, 1
jal   0x800554C4
 move  A2, R0
andi  V0, S1, 1
beqz  V0, L801129B0
 li    S2, 200
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 1
move  A0, S0
li    A1, 1
jal   0x800553A8
 li    A2, 1
move  A0, S0
li    A1, 1
j     L801129C0
 li    A2, 20
L801129B0:
li    S2, 120
move  A0, S3
li    A1, 1
li    A2, -20
L801129C0:
jal   0x80054904
 li    A3, -5
slti  V0, S1, 2
beqz  V0, L801129D8
 li    S0, 272
li    S0, -32
L801129D8:
jal   SleepProcess
 li    A0, 20
move  A0, S1
jal   PlayerHasItem
 li    A1, ITEM_BOO_REPELLANT
sll   V1, S1, 3
subu  V1, V1, S1
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 move  A0, S1
jal   0x800F63F0
 move  A0, S1
slti  V0, S1, 2
beql  V0, R0, L80112A44
 addiu S0, S0, -5
addiu S0, S0, 5
slti  V0, S0, 0x33
beqz  V0, L80112A88
 sll   A3, S0, 0x10
j     L80112A50
       NOP
L80112A44:
slti  V0, S0, 0xd2
bnez  V0, L80112A88
 sll   A3, S0, 0x10
L80112A50:
move  A0, S3
move  A1, R0
move  A2, S2
jal   0x80054904
 sra   A3, A3, 0x10
jal   SleepVProcess
       NOP
slti  V0, S1, 2
beql  V0, R0, L80112A44
 addiu S0, S0, -5
addiu S0, S0, 5
slti  V0, S0, 0x33
bnez  V0, L80112A50
 sll   A3, S0, 0x10
L80112A88:
jal   SleepProcess
 li    A0, 10
move  A0, S3
li    A1, 1
jal   0x8005532C
 li    A2, 32768
jal   PlaySound
 li    A0, 332
sll   V0, V0, 0x10
sra   S4, V0, 0x10
lui   AT, hi(D_8011FB60)
sw    S1, lo(D_8011FB60)(AT)
move  S2, R0
move  S0, R0
L80112AC0:
lui   A0, hi(D_801125BC)
addiu A0, A0, lo(D_801125BC)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S1, V0
sw    S0, 0x8c(S1)
jal   SleepProcess
 li    A0, 2
addiu S0, S0, 1
slti  V0, S0, 6
bnez  V0, L80112AC0
       NOP
jal   SleepProcess
 li    A0, 5
addiu S2, S2, 1
slti  V0, S2, 4
bnez  V0, L80112AC0
 move  S0, R0
jal   0x8004EE68
 li    S0, 255
move  A0, V0
jal   0x8004ED30
 move  A1, S1
jal   0x8004EE18
 sll   S1, S3, 0x10
jal   0x8004AD50
 move  A0, S4
move  A0, S3
li    A1, 1
jal   0x80055458
 move  A2, R0
sra   A0, S1, 0x10
L80112B48:
move  A1, R0
jal   0x80055458
 andi  A2, S0, 0xffff
jal   SleepVProcess
 addiu S0, S0, -0x1e
bgezl S0, L80112B48
 sra   A0, S1, 0x10
move  S0, S3
move  A0, S0
move  A1, R0
jal   0x80055458
 move  A2, R0
jal   0x800525C8
 move  A0, S0
lui   A0, hi(D_8011FB66)
jal   FreeGraphics
 lh    A0, lo(D_8011FB66)(A0)
jal   FreeGraphics
 move  A0, S5
jal   FreeGraphics
 move  A0, S6
jal   EndProcess
 move  A0, R0
lw    RA, 0x34(SP)
lw    S6, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x38

D_80112BCC:
addiu SP, SP, -0x28
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F22, 0x20(SP)
sdc1  F20, 0x18(SP)
jal   SleepProcess
 li    A0, 10
li    S0, 1
li    AT, 0x407E0000 ; 3.968750
ori   AT, AT, 0xf9db
mtc1  AT, F22
li    AT, 0x437F0000 ; 255.000000
mtc1  AT, F20
L80112C00:
jal   0x800E4A7C
       NOP
mtc1  S0, F0
      NOP
cvt.s.w F0, F0
mul.s F0, F0, F22
sub.s F0, F20, F0
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
jal   0x800F68E0
 sra   A2, A2, 0x10
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0x40
bnez  V0, L80112C00
       NOP
jal   0x800E4A7C
       NOP
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F22, 0x20(SP)
ldc1  F20, 0x18(SP)
jr    RA
 addiu SP, SP, 0x28

D_80112C88:
addiu SP, SP, -0x40
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F26, 0x38(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
jal   0x8004EE68
 sdc1  F20, 0x20(SP)
lw    S1, 0x8c(V0)
lui   A0, hi(D_8011FB68)
jal   0x800D975C
 lw    A0, lo(D_8011FB68)(A0)
move  S0, V0
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, S1, 0xc
addiu A0, S0, 0x24
lui   A1, 0x4000
move  A2, A1
jal   0x80089A10
 move  A3, A1
lwc1  F0, 0x30(S1)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F2
      NOP
add.s F0, F0, F2
swc1  F0, 0x30(S0)
jal   0x800D9AA4
 move  A0, S0
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
mtc1  V0, F20
      NOP
cvt.s.w F20, F20
lui   AT, hi(D_8011F968)
ldc1  F22, lo(D_8011F968)(AT)
li    AT, 0x420C0000 ; 35.000000
mtc1  AT, F26
li    AT, 0x42200000 ; 40.000000
mtc1  AT, F24
func_80112D34:
jal   SleepVProcess
       NOP
lwc1  F0, 0x30(S0)
cvt.d.s F0, F0
add.d F0, F0, F22
cvt.s.d F0, F0
swc1  F0, 0x30(S0)
lwc1  F2, 0x30(S1)
add.s F2, F2, F26
c.le.s F2, F0
      NOP
bc1t  L80112DA8
       NOP
add.s F20, F20, F24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F20
      NOP
jal   0x8008A2A0
 addiu A0, A0, 0x74
j     func_80112D34
       NOP
L80112DA8:
jal   0x800D9B54
 move  A0, S0
jal   EndProcess
 move  A0, R0
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F26, 0x38(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x40

func_80112DDC:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
lui   A0, hi(D_80112C88)
addiu A0, A0, lo(D_80112C88)
li    A1, 4096
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S0, 0x8c(V0)
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

D_80112E18:
addiu SP, SP, -0x50
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F30, 0x48(SP)
sdc1  F28, 0x40(SP)
sdc1  F26, 0x38(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
jal   0x8004EE68
 sdc1  F20, 0x20(SP)
lw    S0, 0x8c(V0)
mtc1  R0, F20
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F30
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F24
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F28
mtc1  R0, F26
      NOP
func_80112E80:
jal   0x8008EF20
 mov.s F12, F20
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
neg.s F0, F0
swc1  F0, 0x18(V0)
jal   0x8008E3F0
 mov.s F12, F20
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
add.s F20, F20, F30
c.lt.s F24, F20
      NOP
      NOP
bc1f  L80112EC4
 swc1  F0, 0x20(V0)
sub.s F20, F20, F24
L80112EC4:
lw    V0, 0(S0)
beqz  V0, L80112EFC
       NOP
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
swc1  F22, 0x2c(V0)
swc1  F22, 0x28(V0)
swc1  F22, 0x24(V0)
sub.s F22, F22, F28
c.le.s F22, F26
      NOP
      NOP
bc1t  L80112F0C
 li    A0, -1
L80112EFC:
jal   SleepVProcess
       NOP
j     func_80112E80
       NOP
L80112F0C:
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
mtc1  R0, F0
      NOP
swc1  F0, 0x2c(V0)
swc1  F0, 0x28(V0)
swc1  F0, 0x24(V0)
jal   PlayerHasItem
 li    A1, ITEM_KOOPA_CARD
lb    A0, 0xf(S1)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S1)
jal   0x800F63F0
 lb    A0, 0xf(S1)
lui   A0, hi(D_8011FB6C)
jal   0x800D9B54
 lw    A0, lo(D_8011FB6C)(A0)
jal   EndProcess
 move  A0, R0
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F30, 0x48(SP)
ldc1  F28, 0x40(SP)
ldc1  F26, 0x38(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x50

func_80112FA8:
addiu SP, SP, -0x50
sw    RA, 0x34(SP)
sw    S4, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F24, 0x48(SP)
sdc1  F22, 0x40(SP)
sdc1  F20, 0x38(SP)
sw    R0, 0x18(SP)
lui   S4, hi(CORE_800CD058)
addiu S4, S4, lo(CORE_800CD058)
li    A0, 1
jal   0x8005279C
 li    A1, 5
lui   AT, hi(CORE_8010570C)
sh    V0, lo(CORE_8010570C)(AT)
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_char)
addu  AT, AT, V0
lbu   V0, lo(p1_char)(AT)
sll   V0, V0, 2
lui   A0, hi(CORE_80101040)
addu  A0, A0, V0
jal   ReadMainFS
 lw    A0, lo(CORE_80101040)(A0)
move  S1, V0
jal   ImgPackParse
 move  A0, S1
sll   S0, V0, 0x10
sra   S0, S0, 0x10
jal   FreeMainFS
 move  A0, S1
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
move  A2, S0
jal   0x80055024
 move  A3, R0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x80055294
 li    A2, 10
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800550F4
 li    A2, 1
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
li    A0, -1
move  A1, R0
addiu A2, SP, 0x10
jal   0x800F6E4C
 addiu A3, SP, 0x14
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
lh    A2, 0x12(SP)
lh    A3, 0x16(SP)
jal   0x80054904
 move  A1, R0
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 li    A0, 1
jal   0x800F6ECC
 li    A0, -1
li    A0, -1
jal   PlayerHasItem
 li    A1, ITEM_KOOPA_CARD
jal   0x800E4A88
 move  A0, V0
jal   func_8010FE54
       NOP
li    A0, 68
jal   0x800D90C8
 move  A1, R0
lui   AT, hi(D_8011FB6C)
sw    V0, lo(D_8011FB6C)(AT)
jal   GetPlayerStruct
 li    A0, -1
lw    A1, 0x24(V0)
lui   A0, hi(D_8011FB6C)
lw    A0, lo(D_8011FB6C)(A0)
addiu A0, A0, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(V0)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
lwc1  F0, 0x30(V0)
sub.s F0, F0, F22
L80113160:
jal   SleepVProcess
 swc1  F0, 0x30(V0)
lui   V0, hi(D_8011FB6C)
lw    V0, lo(D_8011FB6C)(V0)
lwc1  F0, 0x30(V0)
c.lt.s F20, F0
      NOP
      NOP
bc1tl L80113160
 sub.s F0, F0, F22
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
lui   A0, hi(D_80112E18)
addiu A0, A0, lo(D_80112E18)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
addiu V1, SP, 0x18
sw    V1, 0x8c(V0)
li    A0, -1
li    A1, 4
jal   0x800FFA4C
 li    A2, 5
move  S3, V0
lui   S1, hi(bank_coin_total)
lh    S1, lo(bank_coin_total)(S1)
mtc1  S1, F24
      NOP
cvt.s.w F24, F24
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F0
      NOP
div.s F24, F24, F0
mtc1  R0, F20
li    A0, 25
jal   0x800D90C8
 move  A1, R0
lui   AT, hi(D_8011FB68)
sw    V0, lo(D_8011FB68)(AT)
jal   0x800D9714
 move  A0, V0
lui   A0, hi(D_8011FB68)
jal   0x800D9B24
 lw    A0, lo(D_8011FB68)(A0)
beqz  S1, L801132C4
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
lui   S2, hi(bank_coin_total)
addiu S2, S2, lo(bank_coin_total)
add.s F20, F20, F24
L80113240:
c.le.s F22, F20
      NOP
      NOP
bc1f  L8011326C
 move  S0, R0
L80113254:
sub.s F20, F20, F22
c.le.s F22, F20
      NOP
      NOP
bc1t  L80113254
 addiu S0, S0, 1
L8011326C:
beqz  S0, L801132BC
       NOP
lui   A0, hi(D_8011FB6C)
jal   func_80112DDC
 lw    A0, lo(D_8011FB6C)(A0)
subu  V0, S1, S0
bltzl V0, L8011328C
 move  S0, S1
L8011328C:
subu  S1, S1, S0
lb    A0, 0xf(S4)
jal   AdjustPlayerCoins
 move  A1, S0
jal   PlaySound
 li    A0, 262
lhu   V0, 0(S2)
subu  V0, V0, S0
jal   func_80108478
 sh    V0, 0(S2)
jal   SleepProcess
 li    A0, 5
L801132BC:
bnezl S1, L80113240
 add.s F20, F20, F24
L801132C4:
jal   0x800FFAEC
 move  A0, S3
li    V0, 1
sw    V0, 0x18(SP)
jal   SleepProcess
 li    A0, 20
lui   A0, hi(D_8011FB68)
jal   0x800D9B54
 lw    A0, lo(D_8011FB68)(A0)
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800ECC0C
 addiu A0, A0, 0x18
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
jal   SleepProcess
 li    A0, 5
lb    A1, 0xf(S4)
jal   0x8004ACE0
 li    A0, 628
jal   SleepProcess
 li    A0, 45
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
lw    RA, 0x34(SP)
lw    S4, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F24, 0x48(SP)
ldc1  F22, 0x40(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x50

; Called after "Who's your opponent" textbox
func_80113364:
addiu SP, SP, -0x48
sw    RA, 0x40(SP)
sw    S5, 0x3c(SP)
sw    S4, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
move  S4, A0
move  S5, A1
move  S2, R0
lui   A1, hi(D_8011F8D0)
addiu A1, A1, lo(D_8011F8D0)
lwl   V0, 0(A1)
lwr   V0, 3(A1)
swl   V0, 0x20(SP)
swr   V0, 0x23(SP)
move  S1, R0
addiu S3, SP, 0x18
L801133B0:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
bne   S1, V0, L8011347C
 sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(CORE_800D110C)
addu  AT, AT, V0
lbu   V0, lo(CORE_800D110C)(AT)
andi  V0, V0, 1
beqz  V0, L80113430
 sll   S0, S1, 3
beqz  S5, L801133F8
       NOP
lui   V0, hi(D_8011FB70)
lw    V0, lo(D_8011FB70)(V0)
j     L80113404
 addiu S2, V0, 1
L801133F8:
lui   V0, hi(D_8011FB74)
lw    V0, lo(D_8011FB74)(V0)
addiu S2, V0, 1
L80113404:
sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, 1024
j     L8011349C
 sh    V1, 0(V0)
L80113430:
subu  S0, S0, S1
sll   S0, S0, 3
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
addu  V0, SP, V0
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
lbu   A1, 0x20(V0)
jal   0x8005FE54
 addiu S1, S1, 1
lui   V0, hi(p1_controller)
addu  V0, V0, S0
lbu   V0, lo(p1_controller)(V0)
sll   V0, V0, 1
addu  V0, V0, S3
li    V1, -1
j     L801134A0
 sh    V1, 0(V0)
L8011347C:
subu  V0, V0, S1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S3
sh    R0, 0(V0)
L8011349C:
addiu S1, S1, 1
L801134A0:
slti  V0, S1, 4
bnez  V0, L801133B0
       NOP
beqz  S2, L80113558
 li    A1, 2
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8005B63C
 li    A2, 2
move  S0, R0
addiu S1, SP, 0x18
L801134CC:
addiu S2, S2, -1
bnez  S2, L80113508
       NOP
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_controller)
addu  AT, AT, V0
lbu   V0, lo(p1_controller)(AT)
sll   V0, V0, 1
addu  V0, V0, S1
li    V1, -32768
sh    V1, 0(V0)
L80113508:
bnez  S0, L80113530
 li    V0, 5
jal   0x800EDC40
       NOP
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
j     func_80113540
 andi  V0, V0, 0xff
L80113530:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
func_80113540:
jal   0x8005F698
 sw    V0, 0x10(SP)
bnez  S2, L801134CC
 addiu S0, S0, 1
j     func_80113570
 move  S1, R0
L80113558:
lh    A0, 0x18(SP)
lh    A1, 0x1a(SP)
lh    A2, 0x1c(SP)
lh    A3, 0x1e(SP)
jal   0x8005F744
 move  S1, R0
func_80113570:
addu  V0, S4, S1
L80113574:
lbu   V0, 0(V0)
bnezl V0, L80113598
 addiu S1, S1, 1
sll   A1, S1, 0x10
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
jal   0x8006010C
 sra   A1, A1, 0x10
addiu S1, S1, 1
L80113598:
slti  V0, S1, 4
bnez  V0, L80113574
 addu  V0, S4, S1
move  S1, R0
sll   A1, S1, 0x10
L801135AC:
lui   A0, hi(CORE_80105702_window_id)
lh    A0, lo(CORE_80105702_window_id)(A0)
sra   A1, A1, 0x10
jal   0x8005E1D8
 li    A2, 1
move  S1, V0
addu  V0, S4, S1
lbu   V0, 0(V0)
beqz  V0, L801135AC
 sll   A1, S1, 0x10
move  V0, S1
lw    RA, 0x40(SP)
lw    S5, 0x3c(SP)
lw    S4, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
jr    RA
 addiu SP, SP, 0x48

func_801135FC:
addiu SP, SP, -0x38
sw    RA, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
jal   0x8004EE68
 sw    S0, 0x18(SP)
lw    S3, 0x8c(V0)
lh    A0, 0x8e(V0)
jal   0x800FF900
 li    A1, 4
li    S1, 128
sll   V0, S3, 3
subu  V0, V0, S3
sll   V0, V0, 3
lui   V1, hi(p1_item1)
addiu V1, V1, lo(p1_item1)
addu  S4, V0, V1
move  S0, R0
L80113650:
li    S5, -1
sll   S2, S1, 0x10
addu  V0, S4, S0
L8011365C:
lb    V0, 0(V0)
beq   V0, S5, L80113674
 move  A0, S3
move  A1, S0
jal   0x800F68E0
 sra   A2, S2, 0x10
L80113674:
addiu S0, S0, 1
slti  V0, S0, 3
bnez  V0, L8011365C
 addu  V0, S4, S0
jal   SleepVProcess
 addiu S1, S1, -0xa
bgtz  S1, L80113650
 move  S0, R0
sll   V0, S3, 3
subu  V0, V0, S3
sll   V0, V0, 3
lui   V1, hi(p1_item1)
addiu V1, V1, lo(p1_item1)
addu  S1, V0, V1
li    S2, -1
addu  V0, S1, S0
L801136B4:
lb    V0, 0(V0)
beq   V0, S2, L801136CC
 move  A0, S3
move  A1, S0
jal   0x800F68E0
 move  A2, R0
L801136CC:
addiu S0, S0, 1
slti  V0, S0, 3
bnez  V0, L801136B4
 addu  V0, S1, S0
jal   EndProcess
 move  A0, R0
lw    RA, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x38

func_80113708:
addiu SP, SP, -0x40
sw    RA, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
sdc1  F20, 0x38(SP)
jal   0x8004EE68
 move  S0, R0
lw    S2, 0x8c(V0)
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
move  S1, R0
lui   S5, hi(p1_item1)
addiu S5, S5, lo(p1_item1)
li    S4, -1
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
L80113758:
lb    A0, 0xf(S3)
sll   V0, A0, 3
subu  V0, V0, A0
sll   V0, V0, 3
addu  V0, V0, S5
addu  V0, V0, S0
lb    V0, 0(V0)
beql  V0, S4, L801137D0
 addiu S0, S0, 1
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x800F696C
 move  A1, S0
move  A0, S2
move  A1, S1
addiu A2, SP, 0x10
jal   0x800F6E4C
 addiu A3, SP, 0x14
lb    A0, 0xf(S3)
lh    A2, 0x12(SP)
lh    A3, 0x16(SP)
jal   0x800F688C
 move  A1, S0
jal   0x800E4A7C
       NOP
xor   V0, S0, V0
sltu  V0, R0, V0
addu  S1, S1, V0
addiu S0, S0, 1
L801137D0:
slti  V0, S0, 3
bnez  V0, L80113758
       NOP
move  S1, R0
lui   S5, hi(p1_item1)
addiu S5, S5, lo(p1_item1)
li    S4, -1
move  S0, R0
L801137F0:
sll   S2, S1, 0x10
L801137F4:
lb    V0, 0xf(S3)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
addu  V1, V1, S5
addu  V1, V1, S0
lb    V0, 0(V1)
beql  V0, S4, L80113838
 addiu S0, S0, 1
jal   0x800E4A7C
       NOP
beq   S0, V0, L80113834
 move  A1, S0
lb    A0, 0xf(S3)
jal   0x800F68E0
 sra   A2, S2, 0x10
L80113834:
addiu S0, S0, 1
L80113838:
slti  V0, S0, 3
bnez  V0, L801137F4
       NOP
jal   SleepVProcess
 addiu S1, S1, 0x14
slti  V0, S1, 0x80
bnez  V0, L801137F0
 move  S0, R0
lui   S2, hi(p1_item1)
addiu S2, S2, lo(p1_item1)
li    S1, -1
L80113864:
lb    V0, 0xf(S3)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
addu  V1, V1, S2
addu  V1, V1, S0
lb    V0, 0(V1)
beql  V0, S1, L801138A8
 addiu S0, S0, 1
jal   0x800E4A7C
       NOP
beq   S0, V0, L801138A4
 move  A1, S0
lb    A0, 0xf(S3)
jal   0x800F68E0
 li    A2, 128
L801138A4:
addiu S0, S0, 1
L801138A8:
slti  V0, S0, 3
bnez  V0, L80113864
       NOP
jal   EndProcess
 move  A0, R0
lw    RA, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x40

; Trade items
barter_box_item_code:
func_801138E4:
addiu SP, SP, -0xd8
sw    RA, 0xa8(SP)
sw    S7, 0xa4(SP)
sw    S6, 0xa0(SP)
sw    S5, 0x9c(SP)
sw    S4, 0x98(SP)
sw    S3, 0x94(SP)
sw    S2, 0x90(SP)
sw    S1, 0x8c(SP)
sw    S0, 0x88(SP)
sdc1  F28, 0xd0(SP)
sdc1  F26, 0xc8(SP)
sdc1  F24, 0xc0(SP)
sdc1  F22, 0xb8(SP)
sdc1  F20, 0xb0(SP)
lui   S6, hi(CORE_800CD058)
addiu S6, S6, lo(CORE_800CD058)
jal   func_8010FE54
 move  S7, R0
li    A0, 32
jal   0x800D90C8
 move  A1, R0
move  S5, V0
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   A1, 2
jal   0x8001C2FC
 lui   A2, 2
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
jal   0x8001C448
 lh    A0, 0(V0)
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
jal   0x8001C954
 lh    A0, 0(V0)
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
jal   0x8001C514
 lh    A0, 0(V0)
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
jal   GetPlayerStruct
 li    A0, -1
lw    A1, 0x24(V0)
addiu A0, S5, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 2
jal   0x8001C814
 li    A2, 1
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S5)
jal   PlaySound
 li    A0, 322
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F2
lwc1  F0, 0x30(S5)
c.lt.s F2, F0
      NOP
      NOP
bc1f  L80113A40
 mov.s F4, F0
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
sub.s F0, F4, F22
L80113A20:
jal   SleepVProcess
 swc1  F0, 0x30(S5)
lwc1  F4, 0x30(S5)
c.lt.s F20, F4
      NOP
      NOP
bc1tl L80113A20
 sub.s F0, F4, F22
L80113A40:
move  S1, R0
addiu S0, SP, 0x20
li    S3, 1
addiu S2, SP, 0x60
li    S4, 8
L80113A54:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
bne   V0, S1, L80113A78
 sll   V0, S1, 4
addu  V0, S0, V0
sb    S3, 0(V0)
addu  V0, S2, S1
j     L80113A88
 sb    R0, 0(V0)
L80113A78:
addu  V0, S0, V0
sb    S4, 0(V0)
addu  V0, S2, S1
sb    S3, 0(V0)
L80113A88:
sll   A1, S1, 4
addu  A1, S0, A1
move  A0, S1
jal   0x800E2260
 addiu A1, A1, 1
addiu S1, S1, 1
slti  V0, S1, 4
bnez  V0, L80113A54
 li    V0, 1
sb    V0, 0x64(SP)
sb    V0, 0x65(SP)
addiu V0, SP, 0x40
sw    V0, 0x10(SP)
addiu V0, SP, 0x50
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x5C01 ; "Who's your opponent?"
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage
 addiu A3, SP, 0x30
addiu A0, SP, 0x60
jal   func_80113364
 li    A1, 1
jal   0x800EC6C8
 move  S4, V0
jal   0x800EC6EC
       NOP
li    V0, 4
bne   S4, V0, L80113B10
       NOP
jal   0x800EF0D8
 li    A0, 1
move  S4, V0
L80113B10:
jal   0x800E4A7C
       NOP
lui   A1, hi(current_player_index)
lb    A1, lo(current_player_index)(A1)
sll   V1, A1, 3
subu  V1, V1, A1
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
lb    V1, 0(V1)
li    V0, 16
bne   V1, V0, L80113B70
       NOP
jal   PlayerHasEmptyItemSlot
 move  A0, A1
li    V1, 1
bne   V0, V1, L80113B70
       NOP
jal   PlayerHasEmptyItemSlot
 move  A0, S4
beql  V0, R0, L80113B70
 li    S7, 1
L80113B70:
bnez  S7, L80114328
       NOP
jal   PlaySound
 li    A0, 329
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 1
jal   0x8001C814
 move  A2, R0
jal   SleepProcess
 li    A0, 20
li    AT, 0x43200000 ; 160.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x70(SP)
li    AT, 0x42A80000 ; 84.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x74(SP)
move  S1, R0
lui   S3, hi(p1_item1)
addiu S3, S3, lo(p1_item1)
li    S2, -1
move  S0, R0
L80113BD4:
bne   S0, S1, L80113BE0
 li    A2, 18320
li    A2, 18310
L80113BE0:
lb    A0, 0xf(S6)
move  A1, S0
jal   0x800F69B0
 andi  A2, A2, 0xffff
addiu S0, S0, 1
slti  V0, S0, 3
bnez  V0, L80113BD4
       NOP
lb    V0, 0xf(S6)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
addu  V1, V1, S3
addu  V1, V1, S1
lb    V0, 0(V1)
beql  V0, S2, L80113C54
 addiu S1, S1, 1
jal   0x800E4A7C
       NOP
beq   S1, V0, L80113C50
 move  A1, S1
lb    A0, 0xf(S6)
sw    R0, 0x10(SP)
li    A2, 10
jal   func_801106A4
 addiu A3, SP, 0x70
jal   SleepProcess
 li    A0, 2
L80113C50:
addiu S1, S1, 1
L80113C54:
slti  V0, S1, 3
bnezl V0, L80113BD4
 move  S0, R0
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 4
jal   0x8001C814
 li    A2, 4
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    V1, 0(V0)
lui   A0, hi(CORE_800D03F8)
lw    A0, lo(CORE_800D03F8)(A0)
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 6
addu  V0, V0, A0
mtc1  R0, F2
lwc1  F0, 0x40(V0)
c.eq.s F0, F2
      NOP
bc1t  L80113CF8
       NOP
mtc1  R0, F20
L80113CB8:
jal   SleepVProcess
       NOP
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    V1, 0(V0)
lui   A0, hi(CORE_800D03F8)
lw    A0, lo(CORE_800D03F8)(A0)
sll   V0, V1, 1
addu  V0, V0, V1
sll   V0, V0, 6
addu  V0, V0, A0
lwc1  F0, 0x40(V0)
c.eq.s F0, F20
      NOP
bc1f  L80113CB8
       NOP
L80113CF8:
jal   PlaySound
 li    A0, 336
jal   SleepProcess
 li    A0, 20
lui   A0, hi(func_801135FC)
addiu A0, A0, lo(func_801135FC)
li    A1, 18432
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S4, 0x8c(V0)
jal   PlaySound
 li    A0, 337
mtc1  R0, F20
li    AT, 0x40A00000 ; 5.000000
mtc1  AT, F22
move  S0, R0
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F26
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F28
li    AT, 0x42340000 ; 45.000000
mtc1  AT, F24
      NOP
L80113D58:
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S5)
jal   0x8008E3F0
 mov.s F12, F20
add.s F20, F20, F22
c.lt.s F26, F20
      NOP
      NOP
bc1f  L80113D8C
 swc1  F0, 0x20(S5)
sub.s F20, F20, F26
L80113D8C:
add.s F22, F22, F28
c.lt.s F24, F22
      NOP
      NOP
bc1f  L80113DB4
 move  V0, S0
mov.s F22, F24
slti  V0, V0, 0x1f
beqz  V0, L80113DC4
 addiu S0, S0, 1
L80113DB4:
jal   SleepVProcess
       NOP
j     L80113D58
       NOP
L80113DC4:
move  S0, R0
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F26
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F28
li    AT, 0x40A00000 ; 5.000000
mtc1  AT, F24
      NOP
L80113DE4:
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S5)
jal   0x8008E3F0
 mov.s F12, F20
add.s F20, F20, F22
c.lt.s F26, F20
      NOP
      NOP
bc1f  L80113E24
 swc1  F0, 0x20(S5)
addiu S0, S0, 1
slti  V0, S0, 2
beqz  V0, L80113E4C
 sub.s F20, F20, F26
L80113E24:
sub.s F22, F22, F28
c.lt.s F22, F24
      NOP
      NOP
bc1tl L80113E3C
 mov.s F22, F24
L80113E3C:
jal   SleepVProcess
       NOP
j     L80113DE4
       NOP
L80113E4C:
sw    R0, 0x18(S5)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x20(S5)
jal   PlaySound
 li    A0, 338
move  S1, R0
li    AT, 0x3FC00000 ; 1.500000
mtc1  AT, F28
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F26
L80113E7C:
mtc1  S1, F22
      NOP
cvt.s.w F22, F22
jal   0x8008EF20
 mov.s F12, F22
div.s F24, F0, F28
add.s F24, F24, F26
jal   0x8008EF20
 mov.s F12, F22
div.s F20, F0, F28
add.s F20, F20, F26
jal   0x8008EF20
 mov.s F12, F22
div.s F0, F0, F28
mfc1  A1, F24
mfc1  A2, F20
add.s F0, F0, F26
mfc1  A3, F0
      NOP
jal   0x80089A10
 addiu A0, S5, 0x24
jal   SleepVProcess
 addiu S1, S1, 0x28
slti  V0, S1, 0x5a1
bnez  V0, L80113E7C
       NOP
jal   PlaySound
 li    A0, 329
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 4
jal   0x8001C814
 move  A2, R0
jal   SleepProcess
 li    A0, 20
lui   A0, hi(func_80113708)
addiu A0, A0, lo(func_80113708)
li    A1, 18432
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S4, 0x8c(V0)
jal   PlayerHasEmptyItemSlot
 move  A0, S4
move  V1, V0
li    AT, 0x428C0000 ; 70.000000
mtc1  AT, F0
li    V0, 1
beq   V1, V0, L80113F74
 swc1  F0, 0x7c(SP)
slti  V0, V1, 2
beql  V0, R0, L80113F64
 li    V0, 2
beqz  V1, L80114320
       NOP
j     L80114150
       NOP
L80113F64:
beql  V1, V0, L80114018
 move  A0, S4
j     L80114150
       NOP
L80113F74:
li    AT, 0x43200000 ; 160.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x78(SP)
move  A0, S4
move  A1, R0
li    A2, 160
jal   0x800F688C
 li    A3, 84
addiu S0, SP, 0x78
li    V0, 1
sw    V0, 0x10(SP)
move  A0, S4
move  A1, R0
li    A2, 10
jal   func_801106A4
 move  A3, S0
jal   SleepProcess
 li    A0, 20
lb    A0, 0xf(S6)
move  A1, R0
addiu A2, SP, 0x80
jal   0x800F6E4C
 addiu A3, SP, 0x84
lwc1  F0, 0x80(SP)
cvt.s.w F0, F0
swc1  F0, 0x78(SP)
lwc1  F0, 0x84(SP)
cvt.s.w F0, F0
swc1  F0, 0x7c(SP)
move  A0, S4
move  A1, R0
jal   0x800F69B0
 li    A2, 18320
li    V0, 2
sw    V0, 0x10(SP)
move  A0, S4
move  A1, R0
li    A2, 7
j     L80114318
 move  A3, S0
L80114018:
li    AT, 0x43020000 ; 130.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x78(SP)
move  A1, R0
li    A2, 160
jal   0x800F688C
 li    A3, 84
addiu S1, SP, 0x78
li    S0, 1
sw    S0, 0x10(SP)
move  A0, S4
move  A1, R0
li    A2, 10
jal   func_801106A4
 move  A3, S1
li    AT, 0x433E0000 ; 190.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x78(SP)
move  A0, S4
li    A1, 1
li    A2, 160
jal   0x800F688C
 li    A3, 84
sw    S0, 0x10(SP)
move  A0, S4
li    A1, 1
li    A2, 10
jal   func_801106A4
 move  A3, S1
jal   SleepProcess
 li    A0, 20
addiu S2, SP, 0x80
addiu S3, SP, 0x84
lb    A0, 0xf(S6)
move  A1, R0
move  A2, S2
jal   0x800F6E4C
 move  A3, S3
lwc1  F0, 0x80(SP)
cvt.s.w F0, F0
swc1  F0, 0x78(SP)
lwc1  F0, 0x84(SP)
cvt.s.w F0, F0
swc1  F0, 0x7c(SP)
move  A0, S4
move  A1, R0
jal   0x800F69B0
 li    A2, 18320
li    S0, 2
sw    S0, 0x10(SP)
move  A0, S4
move  A1, R0
li    A2, 7
jal   func_801106A4
 move  A3, S1
lb    A0, 0xf(S6)
li    A1, 1
move  A2, S2
jal   0x800F6E4C
 move  A3, S3
lwc1  F0, 0x80(SP)
cvt.s.w F0, F0
swc1  F0, 0x78(SP)
lwc1  F0, 0x84(SP)
cvt.s.w F0, F0
swc1  F0, 0x7c(SP)
move  A0, S4
li    A1, 1
jal   0x800F69B0
 li    A2, 18319
sw    S0, 0x10(SP)
move  A0, S4
li    A1, 1
li    A2, 7
j     L80114318
 move  A3, S1
L80114150:
li    AT, 0x42DC0000 ; 110.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x78(SP)
move  A0, S4
move  A1, R0
li    A2, 160
jal   0x800F688C
 li    A3, 84
addiu S3, SP, 0x78
li    S0, 1
sw    S0, 0x10(SP)
move  A0, S4
move  A1, R0
li    A2, 10
jal   func_801106A4
 move  A3, S3
li    AT, 0x43520000 ; 210.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x78(SP)
move  A0, S4
li    A1, 1
li    A2, 160
jal   0x800F688C
 li    A3, 84
sw    S0, 0x10(SP)
move  A0, S4
li    A1, 1
li    A2, 10
jal   func_801106A4
 move  A3, S3
li    AT, 0x43200000 ; 160.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x78(SP)
move  A0, S4
li    A1, 2
li    A2, 160
jal   0x800F688C
 li    A3, 84
sw    S0, 0x10(SP)
move  A0, S4
li    A1, 2
li    A2, 10
jal   func_801106A4
 move  A3, S3
jal   SleepProcess
 li    A0, 20
addiu S1, SP, 0x80
addiu S2, SP, 0x84
lb    A0, 0xf(S6)
move  A1, R0
move  A2, S1
jal   0x800F6E4C
 move  A3, S2
lwc1  F0, 0x80(SP)
cvt.s.w F0, F0
swc1  F0, 0x78(SP)
lwc1  F0, 0x84(SP)
cvt.s.w F0, F0
swc1  F0, 0x7c(SP)
move  A0, S4
move  A1, R0
jal   0x800F69B0
 li    A2, 18320
li    S0, 2
sw    S0, 0x10(SP)
move  A0, S4
move  A1, R0
li    A2, 7
jal   func_801106A4
 move  A3, S3
lb    A0, 0xf(S6)
li    A1, 1
move  A2, S1
jal   0x800F6E4C
 move  A3, S2
lwc1  F0, 0x80(SP)
cvt.s.w F0, F0
swc1  F0, 0x78(SP)
lwc1  F0, 0x84(SP)
cvt.s.w F0, F0
swc1  F0, 0x7c(SP)
move  A0, S4
li    A1, 1
jal   0x800F69B0
 li    A2, 18319
sw    S0, 0x10(SP)
move  A0, S4
li    A1, 1
li    A2, 7
jal   func_801106A4
 move  A3, S3
lb    A0, 0xf(S6)
li    A1, 2
move  A2, S1
jal   0x800F6E4C
 move  A3, S2
lwc1  F0, 0x80(SP)
cvt.s.w F0, F0
swc1  F0, 0x78(SP)
lwc1  F0, 0x84(SP)
cvt.s.w F0, F0
swc1  F0, 0x7c(SP)
move  A0, S4
li    A1, 2
jal   0x800F69B0
 li    A2, 18318
sw    S0, 0x10(SP)
move  A0, S4
li    A1, 2
li    A2, 7
move  A3, S3
L80114318:
jal   func_801106A4
       NOP
L80114320:
jal   SleepProcess
 li    A0, 2
L80114328:
jal   0x800E4A7C
 move  S1, R0
lb    A0, 0xf(S6)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S6)
sll   V0, S4, 3
subu  V0, V0, S4
sll   V0, V0, 3
lui   A2, hi(p1_item1)
addiu A2, A2, lo(p1_item1)
addu  A3, V0, A2
addu  A0, A3, S1
L8011437C:
lb    A1, 0(A0)
lb    V1, 0xf(S6)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
addu  V0, V0, A2
addu  V0, V0, S1
lbu   V0, 0(V0)
sb    V0, 0(A0)
lb    V1, 0xf(S6)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
addu  V0, V0, A2
addu  V0, V0, S1
sb    A1, 0(V0)
addiu S1, S1, 1
slti  V0, S1, 3
bnezl V0, L8011437C
 addu  A0, A3, S1
bnezl S7, L801143E8
 li    A0, 20
jal   0x800F641C
 li    A0, -1
jal   0x800F641C
 move  A0, S4
li    A0, 10
L801143E8:
jal   SleepProcess
 move  S0, R0
jal   PlaySound
 li    A0, 347
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F20
li    AT, 0x3D380000 ; 0.044922
ori AT, AT, 0x51eb
mtc1  AT, F24
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F22
add.s F20, F20, F24
L8011441C:
lw    V0, 0x3c(S5)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
mfc1  A1, F20
mul.s F6, F20, F22
mfc1  A2, F6
      NOP
jal   0x8001D558
 li    A3, 1
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0x14
bnezl V0, L8011441C
 add.s F20, F20, F24
jal   0x800D9B54
 move  A0, S5
beqz  S7, L80114488
       NOP
lb    A1, 0xf(S6)
jal   0x8004ACE0
 li    A0, 646
li    A0, -1
li    A1, 3
jal   0x800F2304
 move  A2, R0
j     L801144A8
 li    A0, 70
L80114488:
lb    A1, 0xf(S6)
jal   0x8004ACE0
 li    A0, 628
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
li    A0, 50
L801144A8:
jal   SleepProcess
       NOP
li    V0, 2
sw    V0, 0x10(SP)
li    A0, -1
li    A1, -1
move  A2, R0
jal   0x800F2388
 li    A3, 10
beqz  S7, L801144D8
 li    A1, 0x3a2d ; "{0} and {1} traded items!"
li    A1, 0x3a2e ; "Neither {0} nor {1} have any items to trade!"
L801144D8:
lb    V1, 0xf(S6)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   V1, hi(p1_char)
addu  V1, V1, V0
lbu   V1, lo(p1_char)(V1)
lui   A0, hi(CORE_801014A0)
addiu A0, A0, lo(CORE_801014A0)
sll   V1, V1, 2
addu  V1, V1, A0
sll   V0, S4, 3
subu  V0, V0, S4
sll   V0, V0, 3
lui   AT, hi(p1_char)
addu  AT, AT, V0
lbu   V0, lo(p1_char)(AT)
sll   V0, V0, 2
addu  V0, V0, A0
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
lw    A2, 0(V1)
lw    A3, 0(V0)
jal   0x800EC8EC ; ShowMessage
 li    A0, -1
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
lw    RA, 0xa8(SP)
lw    S7, 0xa4(SP)
lw    S6, 0xa0(SP)
lw    S5, 0x9c(SP)
lw    S4, 0x98(SP)
lw    S3, 0x94(SP)
lw    S2, 0x90(SP)
lw    S1, 0x8c(SP)
lw    S0, 0x88(SP)
ldc1  F28, 0xd0(SP)
ldc1  F26, 0xc8(SP)
ldc1  F24, 0xc0(SP)
ldc1  F22, 0xb8(SP)
ldc1  F20, 0xb0(SP)
jr    RA
 addiu SP, SP, 0xd8

D_80114590:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
jal   0x8004EE68
 sw    S0, 0x10(SP)
lw    S2, 0x8c(V0)
lw    S1, 0(S2)
lw    S0, 4(S2)
move  A0, S1
lhu   A2, 0xa(S2)
jal   0x800D9CE8
 li    A1, -1
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, S0, 0xc
lwc1  F0, 0x30(S0)
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F2
      NOP
sub.s F0, F0, F2
lwc1  F2, 0x10(S1)
add.s F0, F0, F2
swc1  F0, 0x10(S1)
jal   0x800D9A40
 move  A0, S1
func_801145F8:
jal   0x800D9E0C
 move  A0, S1
andi  V0, V0, 0xffff
bnez  V0, L80114628
       NOP
lw    V0, 0xc(S2)
bnez  V0, L80114628
       NOP
jal   SleepVProcess
       NOP
j     func_801145F8
       NOP
L80114628:
jal   0x800D9B54
 move  A0, S1
jal   EndProcess
 move  A0, R0
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

D_80114650:
addiu SP, SP, -0x60
sw    RA, 0x28(SP)
sw    S5, 0x24(SP)
sw    S4, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F30, 0x58(SP)
sdc1  F28, 0x50(SP)
sdc1  F26, 0x48(SP)
sdc1  F24, 0x40(SP)
sdc1  F22, 0x38(SP)
jal   0x8004EE68
 sdc1  F20, 0x30(SP)
lw    S4, 0x8c(V0)
lui   S1, hi(D_8011FB78)
lw    S1, lo(D_8011FB78)(S1)
li    A0, 69
jal   0x800D90C8
 move  A1, R0
move  S5, V0
jal   0x800D9B24
 move  A0, S5
lui A0, 0xb
ori A0, A0, 4
jal   0x8000CED8
 li    A1, 2729
sll   V0, V0, 0x10
sra   S2, V0, 0x10
move  S0, S2
move  A0, S0
lui   A1, 0x3f80
lui   A2, 0x41a0
jal   0x8000CD00
 move  A3, A1
lui   A1, 0x4120
jal   0x8000D018
 move  A0, S0
move  A0, S0
jal   0x8001C8A8
 li    A1, 1
jal   PlaySound
 li    A0, 588
mtc1  R0, F20
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F22
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F26
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F28
li    AT, 0x42A00000 ; 80.000000
mtc1  AT, F24
sll   S0, S2, 0x10
L80114728:
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S1)
jal   0x8008E3F0
 mov.s F12, F20
add.s F20, F20, F22
c.lt.s F26, F20
      NOP
      NOP
bc1f  L8011475C
 swc1  F0, 0x20(S1)
sub.s F20, F20, F26
L8011475C:
add.s F22, F22, F28
c.lt.s F24, F22
      NOP
      NOP
bc1tl L80114774
 mov.s F22, F24
L80114774:
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 sra   A0, S0, 0x10
jal   SleepVProcess
       NOP
c.lt.s F22, F24
      NOP
bc1t  L80114728
       NOP
jal   PlaySound
 li    A0, 330
li    AT, 0x42DC0000 ; 110.000000
mtc1  AT, F2
lwc1  F0, 0x30(S1)
c.lt.s F0, F2
      NOP
      NOP
bc1f  L8011486C
 mov.s F4, F0
li    AT, 0x40E00000 ; 7.000000
mtc1  AT, F28
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F24
sll   S0, S2, 0x10
li    AT, 0x42DC0000 ; 110.000000
mtc1  AT, F26
add.s F0, F4, F28
L801147F4:
swc1  F0, 0x30(S1)
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S1)
jal   0x8008E3F0
 mov.s F12, F20
add.s F20, F20, F22
c.lt.s F24, F20
      NOP
      NOP
bc1f  L8011482C
 swc1  F0, 0x20(S1)
sub.s F20, F20, F24
L8011482C:
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 sra   A0, S0, 0x10
jal   SleepVProcess
       NOP
lwc1  F4, 0x30(S1)
c.lt.s F4, F26
      NOP
      NOP
bc1tl L801147F4
 add.s F0, F4, F28
L8011486C:
sw    R0, 0(S4)
li    S3, -1
sll   S0, S2, 0x10
L80114878:
lui   A0, hi(D_8011E490)
lw    A0, lo(D_8011E490)(A0)
beq   A0, S3, L801148C0
       NOP
jal   GetPlayerStruct
       NOP
lw    A1, 0x24(V0)
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 sra   A0, S0, 0x10
L801148C0:
jal   SleepVProcess
       NOP
lw    V0, 0(S4)
beqz  V0, L80114878
       NOP
jal   PlaySound
 li    A0, 331
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F24
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F2
lwc1  F0, 0x30(S1)
c.lt.s F2, F0
      NOP
      NOP
bc1f  L801149C0
 mov.s F4, F0
li    S3, 0x3F800000 ; 1.000000
li    AT, 0x3E4C0000 ; 0.199219
ori AT, AT, 0xcccd
mtc1  AT, F30
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F26
sll   S0, S2, 0x10
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F28
sub.s F0, F4, F24
L8011492C:
mtc1  S3, F6
      NOP
c.lt.s F6, F24
      NOP
      NOP
bc1f  L8011494C
 swc1  F0, 0x30(S1)
sub.s F24, F24, F30
L8011494C:
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S1)
jal   0x8008E3F0
 mov.s F12, F20
add.s F20, F20, F22
c.lt.s F26, F20
      NOP
      NOP
bc1f  L80114980
 swc1  F0, 0x20(S1)
sub.s F20, F20, F26
L80114980:
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 sra   A0, S0, 0x10
jal   SleepVProcess
       NOP
lwc1  F4, 0x30(S1)
c.lt.s F28, F4
      NOP
      NOP
bc1tl L8011492C
 sub.s F0, F4, F24
L801149C0:
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F24
li    S3, 0x41700000 ; 15.000000
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F30
li    AT, 0x3F000000 ; 0.500000
mtc1  AT, F28
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F26
sll   S0, S2, 0x10
func_801149E8:
jal   0x8008EF20
 mov.s F12, F20
neg.s F0, F0
swc1  F0, 0x18(S1)
jal   0x8008E3F0
 mov.s F12, F20
add.s F20, F20, F22
c.lt.s F24, F20
      NOP
      NOP
bc1f  L80114A1C
 swc1  F0, 0x20(S1)
sub.s F20, F20, F24
L80114A1C:
mtc1  S3, F6
      NOP
c.lt.s F6, F22
      NOP
      NOP
bc1fl L80114A3C
 sub.s F22, F22, F28
sub.s F22, F22, F30
L80114A3C:
c.lt.s F22, F26
      NOP
bc1t  L80114A7C
       NOP
lwc1  F2, 0x10(S1)
lwc1  F0, 0x30(S1)
lw    A1, 0xc(S1)
add.s F0, F2, F0
mfc1  A2, F0
lw    A3, 0x14(S1)
jal   0x8000CFA4
 sra   A0, S0, 0x10
jal   SleepVProcess
       NOP
j     func_801149E8
       NOP
L80114A7C:
jal   0x8000D044
 move  A0, S2
lui   A0, hi(D_80114590)
addiu A0, A0, lo(D_80114590)
li    A1, 18432
move  A2, R0
jal   InitProcess
 li    A3, 64
move  S0, V0
lw    A0, 0x18(S0)
jal   0x800360F0
 li    A1, 32
sw    V0, 0x8c(S0)
sw    S5, 0(V0)
sw    S1, 4(V0)
sw    R0, 8(V0)
sw    R0, 0xc(V0)
jal   SleepProcess
 li    A0, 3
sw    R0, 0(S4)
jal   PlaySound
 li    A0, 589
move  S0, R0
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F20
li    AT, 0x3D380000 ; 0.044922
ori AT, AT, 0x51eb
mtc1  AT, F24
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F22
add.s F20, F20, F24
L80114AFC:
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
mfc1  A1, F20
mul.s F6, F20, F22
mfc1  A2, F6
      NOP
jal   0x8001D558
 li    A3, 1
jal   SleepVProcess
 addiu S0, S0, 1
slti  V0, S0, 0x14
bnezl V0, L80114AFC
 add.s F20, F20, F24
jal   0x800D9B54
 move  A0, S1
jal   EndProcess
 move  A0, R0
lw    RA, 0x28(SP)
lw    S5, 0x24(SP)
lw    S4, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F30, 0x58(SP)
ldc1  F28, 0x50(SP)
ldc1  F26, 0x48(SP)
ldc1  F24, 0x40(SP)
ldc1  F22, 0x38(SP)
ldc1  F20, 0x30(SP)
jr    RA
 addiu SP, SP, 0x60

game_guy_lucky_charm:
addiu SP, SP, -0x68
sw    RA, 0x50(SP)
sw    S5, 0x4c(SP)
sw    S4, 0x48(SP)
sw    S3, 0x44(SP)
sw    S2, 0x40(SP)
sw    S1, 0x3c(SP)
sw    S0, 0x38(SP)
sdc1  F22, 0x60(SP)
sdc1  F20, 0x58(SP)
lui   S5, hi(CORE_800CD058)
jal   func_8010FE54
 addiu S5, S5, lo(CORE_800CD058)
li    A0, -1
jal   PlayerHasItem
 li    A1, ITEM_LUCKY_CHARM
lui   A0, hi(current_player_index)
lb    A0, lo(current_player_index)(A0)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1) ; Clear the lucky charm item slot
lui   A0, hi(current_player_index)
jal   FixUpPlayerItemSlots
 lb    A0, lo(current_player_index)(A0)
lui   A0, hi(current_player_index)
jal   0x800F63F0
 lb    A0, lo(current_player_index)(A0)
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
li    A0, 62
jal   0x800D90C8
 move  A1, R0
move  S1, V0
lw    V0, 0x3c(S1)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
jal   0x800D9714
 move  A0, S1
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
      NOP
swc1  F20, 0x30(S1)
jal   0x800D9B24
 move  A0, S1
li    A0, 67
jal   0x800D90C8
 move  A1, R0
move  S0, V0
lui   AT, hi(D_8011FB78)
sw    S0, lo(D_8011FB78)(AT)
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
lui   A1, 2
jal   0x8001C2FC
 lui   A2, 2
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
jal   0x8001C448
 lh    A0, 0(V0)
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
jal   0x8001C954
 lh    A0, 0(V0)
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
jal   0x8001C514
 lh    A0, 0(V0)
jal   GetPlayerStruct
 li    A0, -1
lw    A1, 0x24(V0)
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 2
jal   0x8001C814
 li    A2, 1
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S0)
jal   PlaySound
 li    A0, 331
lwc1  F0, 0x30(S0)
c.lt.s F20, F0
      NOP
      NOP
bc1f  L80114D58
 mov.s F2, F0
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
      NOP
sub.s F0, F2, F22
L80114D38:
jal   SleepVProcess
 swc1  F0, 0x30(S0)
lwc1  F2, 0x30(S0)
c.lt.s F20, F2
      NOP
      NOP
bc1tl L80114D38
 sub.s F0, F2, F22
L80114D58:
lui   V1, hi(p1_char)
addiu V1, V1, lo(p1_char)
lbu   A2, 0(V1)
lbu   A3, 0x38(V1)
lbu   V0, 0x70(V1)
addiu V0, V0, 0x1c00
sw    V0, 0x10(SP)
lbu   V0, 0xa8(V1)
addiu V0, V0, 0x1c00
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x5C00 ; "Who's your opponent?"
addiu A2, A2, 0x1c00
jal   0x800EC8EC ; ShowMessage
 addiu A3, A3, 0x1c00
move  A0, R0
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 move  A1, R0
jal   0x800EC6C8
 move  S2, V0
jal   0x800EC6EC
       NOP
bltz  S2, L80114DE0
 slti  V0, S2, 4
bnez  V0, L80114E04
 li    V0, 1
li    V0, 4
bne   S2, V0, L80114DE0
       NOP
jal   0x800EF0D8
 move  A0, R0
j     L80114E00
 move  S2, V0
L80114DE0:
jal   func_80106FE8
       NOP
li    V0, 1
lui   AT, hi(CORE_800CB99C)
jal   0x80049FB8
 sb    V0, lo(CORE_800CB99C)(AT)
j     L80114D58
       NOP
L80114E00:
li    V0, 1
L80114E04:
sw    V0, 0x20(SP)
lui   A0, hi(D_80114650)
addiu A0, A0, lo(D_80114650)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
addiu V1, SP, 0x20
sw    V1, 0x8c(V0)
lw    V0, 0x20(SP)
beqz  V0, L80114E48
       NOP
L80114E34:
jal   SleepVProcess
       NOP
lw    V0, 0x20(SP)
bnez  V0, L80114E34
       NOP
L80114E48:
lb    V0, 0xf(S5)
beq   S2, V0, L80114EC8
 move  A0, R0
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 16
lui   AT, hi(D_8011E490)
sw    S2, lo(D_8011E490)(AT)
jal   0x800F915C
 li    A0, 2
jal   GetPlayerStruct
 move  A0, S2
lw    A0, 0x24(V0)
jal   0x800F9174
 addiu A0, A0, 0xc
jal   GetPlayerStruct
 move  A0, S2
lw    A0, 0x24(V0)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepVProcess
       NOP
jal   SleepProcess
 li    A0, 10
move  A0, R0
jal   InitFadeIn
 li    A1, 16
jal   SleepProcess
 li    A0, 16
j     L80114EDC
 li    V0, 1
L80114EC8:
jal   SleepProcess
 li    A0, 30
lui   AT, hi(D_8011E490)
sw    S2, lo(D_8011E490)(AT)
li    V0, 1
L80114EDC:
sw    V0, 0x20(SP)
L80114EE0:
jal   SleepVProcess
       NOP
lw    V0, 0x20(SP)
bnez  V0, L80114EE0
       NOP
jal   GetPlayerStruct
 move  A0, S2
lw    S3, 0x24(V0)
lui   A1, 0x40a0
lui   A2, 0x4000
jal   0x800EDB98
 move  A0, S1
move  S4, V0
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, S3, 0xc
jal   0x800D9A40
 move  A0, S1
mtc1  R0, F0
      NOP
swc1  F0, 0x2c(S1)
swc1  F0, 0x28(S1)
swc1  F0, 0x24(S1)
li    AT, 0x3E4C0000 ; 0.199219
ori AT, AT, 0xcccd
mtc1  AT, F22
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
L80114F50:
lwc1  F0, 0x2c(S1)
add.s F0, F0, F22
swc1  F0, 0x2c(S1)
swc1  F0, 0x28(S1)
jal   SleepVProcess
 swc1  F0, 0x24(S1)
lwc1  F0, 0x24(S1)
c.lt.s F0, F20
      NOP
      NOP
bc1t  L80114F50
 sll   A0, S2, 0x10
sra   A0, A0, 0x10
jal   0x800FF900
 li    A1, 4
jal   PlaySound
 li    A0, 673
sll   V0, S2, 3
subu  V0, V0, S2
sll   S0, V0, 3
lui   V0, hi(p1_coins)
addu  V0, V0, S0
lh    V0, lo(p1_coins)(V0)
beqz  V0, L801150F4
 li    A1, 0x2F00 ; "It's time for a Game Guy Mini-Game! First I'll take all your coins"
li    A0, 10
li    A2, -1
jal   func_8010A3B8
 move  A3, S2
lui   V0, hi(p1_coins)
addu  V0, V0, S0
lhu   V0, lo(p1_coins)(V0)
lui   AT, hi(CORE_800D110E)
addu  AT, AT, S0
sh    V0, lo(CORE_800D110E)(AT)
lui   A1, hi(p1_coins)
addu  A1, A1, S0
lh    A1, lo(p1_coins)(A1)
move  A0, S2
jal   ShowPlayerCoinChange
 subu  A1, R0, A1
lui   A1, hi(p1_coins)
addu  A1, A1, S0
lh    A1, lo(p1_coins)(A1)
move  A0, S2
jal   AdjustPlayerCoinsGradual
 subu  A1, R0, A1
jal   SleepProcess
 li    A0, 30
li    A0, 10
li    A1, 0x2F02 ; "We're off to Game Guy's Game Room"
li    A2, -1
jal   func_8010A3B8
 move  A3, S2
jal   EndProcess
 move  A0, S4
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F2
lwc1  F0, 0x30(S1)
c.le.s F2, F0
      NOP
      NOP
bc1f  L80115084
 mov.s F4, F0
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F22
li    AT, 0x41200000 ; 10.000000
mtc1  AT, F20
sub.s F0, F4, F22
L80115064:
jal   SleepVProcess
 swc1  F0, 0x30(S1)
lwc1  F4, 0x30(S1)
c.le.s F20, F4
      NOP
      NOP
bc1tl L80115064
 sub.s F0, F4, F22
L80115084:
jal   SleepProcess
 li    A0, 30
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F2
lwc1  F0, 0x30(S1)
c.lt.s F0, F2
      NOP
      NOP
bc1f  L801151B8
 mov.s F4, F0
li    AT, 0x40800000 ; 4.000000
mtc1  AT, F20
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F22
add.s F0, F4, F20
L801150C0:
swc1  F0, 0x30(S1)
lwc1  F0, 0x30(S3)
add.s F0, F0, F20
jal   SleepVProcess
 swc1  F0, 0x30(S3)
lwc1  F4, 0x30(S1)
c.lt.s F4, F22
      NOP
      NOP
bc1tl L801150C0
 add.s F0, F4, F20
j     L801151BC
 sll   A0, S2, 0x10
L801150F4:
li    A0, 10
li    A1, 12033
li    A2, -1
jal   func_8010A3B8
 move  A3, S2
jal   EndProcess
 move  A0, S4
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F2
lwc1  F0, 0x30(S1)
c.le.s F0, F2
      NOP
      NOP
bc1f  L80115164
 mov.s F4, F0
li    AT, 0x40800000 ; 4.000000
mtc1  AT, F22
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F20
add.s F0, F4, F22
L80115144:
jal   SleepVProcess
 swc1  F0, 0x30(S1)
lwc1  F4, 0x30(S1)
c.le.s F4, F20
      NOP
      NOP
bc1tl L80115144
 add.s F0, F4, F22
L80115164:
jal   0x800D9B54
 move  A0, S1
li    A0, 9
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 17
jal   0x800F915C
 li    A0, 1
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepProcess
 li    A0, 5
li    A0, 9
jal   InitFadeIn
 li    A1, 16
j     L80115458
 li    A0, 17
L801151B8:
sll   A0, S2, 0x10
L801151BC:
jal   PlayerIsCPU
 sra   A0, A0, 0x10
beqz  V0, L80115374
       NOP
lb    V0, 0x16(S5)
beqz  V0, L80115374
 li    A0, 9
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 17
jal   0x800D9B54
 move  A0, S1
move  A0, S3
move  A1, R0
jal   0x800EE688
 move  A2, A1
sw    R0, 0x30(S3)
jal   SleepProcess
 li    A0, 5
li    A0, 9
jal   InitFadeIn
 li    A1, 16
jal   SleepProcess
 li    A0, 17
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F12
jal   0x800EEF80
       NOP
addiu A0, V0, 1
move  V1, R0
sll   V0, V1, 2
L8011523C:
lui   AT, hi(D_8011E49E)
addu  AT, AT, V0
lhu   V0, lo(D_8011E49E)(AT)
slt   V0, V0, A0
beqz  V0, L80115264
 sll   V0, V1, 2
addiu V1, V1, 1
slti  V0, V1, 7
bnez  V0, L8011523C
 sll   V0, V1, 2
L80115264:
lui   V1, hi(D_8011E49C)
addu  V1, V1, V0
lhu   V1, lo(D_8011E49C)(V1)
beqz  V1, L80115314
 sll   V0, S2, 3
subu  V0, V0, S2
sll   V0, V0, 3
lui   S1, hi(CORE_800D110E)
addu  S1, S1, V0
lh    S1, lo(CORE_800D110E)(S1)
mult  S1, V1
mflo  S1
slti  V0, S1, 0x3e8
      NOP
beql  V0, R0, L801152A4
 li    S1, 999
L801152A4:
addiu S0, SP, 0x28
move  A0, S0
lui   A1, hi(percent_d_str_format)
addiu A1, A1, lo(percent_d_str_format)
jal   sprintf
 move  A2, S1
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x2F03 ; "Wow you earned X coins playing my Mini-Game!"
move  A2, S0
jal   0x800EC8EC ; ShowMessage
 move  A3, R0
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
move  A0, S2
jal   ShowPlayerCoinChange
 move  A1, S1
move  A0, S2
jal   AdjustPlayerCoinsGradual
 move  A1, S1
jal   SleepProcess
 li    A0, 20
j     L80115320
       NOP
L80115314:
li    A0, -1
jal   0x800EC590
 li    A1, 12036
L80115320:
jal   SleepProcess
 li    A0, 10
li    A0, 9
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 17
jal   0x800F915C
 li    A0, 1
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepProcess
 li    A0, 5
li    A0, 9
jal   InitFadeIn
 li    A1, 16
j     L80115458
 li    A0, 17
L80115374:
lb    A0, 0xf(S5)
jal   0x800DEB2C
       NOP
li    V1, 3
bne   V0, V1, L8011539C
       NOP
jal   0x80035FDC
 li    A0, 23
j     L801153A8
 move  V1, R0
L8011539C:
jal   0x8003602C
 li    A0, 23
move  V1, R0
L801153A8:
li    A0, 1
sll   V0, V1, 3
L801153B0:
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(player_structs)
addu  AT, AT, V0
sb    A0, lo(player_structs)(AT)
addiu V1, V1, 1
slti  V0, V1, 4
bnez  V0, L801153B0
 sll   V0, V1, 3
jal   GetPlayerStruct
 move  A0, S2
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F12
      NOP
jal   0x800EEF80
 sb    R0, 0(V0)
move  A0, V0
move  V1, R0
L801153F8:
lui   V0, hi(D_8011E498)
addu  V0, V0, V1
lbu   V0, lo(D_8011E498)(V0)
slt   V0, A0, V0
bnez  V0, L80115420
 li    V0, 3
addiu V1, V1, 1
sltiu V0, V1, 3
bnez  V0, L801153F8
 li    V0, 3
L80115420:
beql  V1, V0, L80115428
 li    V1, 2
L80115428:
lui   V0, hi(D_8011E494)
addu  V0, V0, V1
lbu   V0, lo(D_8011E494)(V0)
sb    V0, 0x10(S5)
lui   AT, hi(CORE_800CD0B2)
jal   0x800FC998
 sh    S2, lo(CORE_800CD0B2)(AT)
jal   0x8004A0E0
       NOP
jal   0x800FF7F0
 li    A0, 2
li    A0, -1
L80115458:
jal   SleepProcess
       NOP
lw    RA, 0x50(SP)
lw    S5, 0x4c(SP)
lw    S4, 0x48(SP)
lw    S3, 0x44(SP)
lw    S2, 0x40(SP)
lw    S1, 0x3c(SP)
lw    S0, 0x38(SP)
ldc1  F22, 0x60(SP)
ldc1  F20, 0x58(SP)
jr    RA
 addiu SP, SP, 0x68

func_8011548C:
addiu SP, SP, -0x40
sw    RA, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
sdc1  F22, 0x38(SP)
sdc1  F20, 0x30(SP)
move  S2, A0
move  S0, A1
move  S1, A2
sll   A0, S2, 0x10
sra   A0, A0, 0x10
move  A1, R0
addiu A2, SP, 0x10
jal   0x800F6748
 addiu A3, SP, 0x14
lwc1  F2, 0(S1)
lwc1  F0, 0x10(SP)
sub.s F22, F2, F0
mtc1  S0, F4
      NOP
cvt.s.w F4, F4
div.s F22, F22, F4
lwc1  F2, 4(S1)
lwc1  F0, 0x14(SP)
sub.s F20, F2, F0
beqz  S0, L80115560
 div.s F20, F20, F4
sll   S3, S2, 0x10
L80115504:
lwc1  F2, 0x10(SP)
add.s F2, F22, F2
swc1  F2, 0x10(SP)
lwc1  F0, 0x14(SP)
add.s F0, F20, F0
swc1  F0, 0x14(SP)
trunc.w.s F4, F2
mfc1  A2, F4
      NOP
sll   A2, A2, 0x10
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
sra   A0, S3, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
jal   SleepVProcess
 addiu S0, S0, -1
bnez  S0, L80115504
       NOP
L80115560:
sll   A0, S2, 0x10
lwc1  F0, 0(S1)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lwc1  F0, 4(S1)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
sra   A0, A0, 0x10
move  A1, R0
sra   A2, A2, 0x10
jal   0x80054904
 sra   A3, A3, 0x10
lw    RA, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
ldc1  F22, 0x38(SP)
ldc1  F20, 0x30(SP)
jr    RA
 addiu SP, SP, 0x40

func_801155C4:
addiu SP, SP, -0x28
sw    RA, 0x24(SP)
sw    S4, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
jal   0x8004EE68
 sw    S0, 0x10(SP)
lw    S1, 0x8c(V0)
beqz  S1, L80115604
 li    S3, 10
li    V0, 1
beq   S1, V0, L8011562C
 sll   V0, S1, 2
j     L80115650
 move  A1, R0
L80115604:
sll   V0, S1, 2
lui   A0, hi(D_8011FB82)
addu  A0, A0, V0
lh    A0, lo(D_8011FB82)(A0)
move  A1, R0
li    A2, 177
jal   0x80054904
 li    A3, 44
j     L80115670
 sll   V0, S1, 2
L8011562C:
lui   A0, hi(D_8011FB82)
addu  A0, A0, V0
lh    A0, lo(D_8011FB82)(A0)
move  A1, R0
li    A2, 122
jal   0x80054904
 li    A3, 57
j     L80115670
 sll   V0, S1, 2
L80115650:
lui   A0, hi(D_8011FB82)
addu  A0, A0, V0
lh    A0, lo(D_8011FB82)(A0)
li    A2, 160
jal   0x80054904
 li    A3, 152
li    S3, 30
sll   V0, S1, 2
L80115670:
lui   A0, hi(D_8011FB82)
addu  A0, A0, V0
lh    A0, lo(D_8011FB82)(A0)
move  A1, R0
jal   0x8005532C
 li    A2, 32768
move  S0, R0
lui   V1, hi(D_8011FB80)
addiu V1, V1, lo(D_8011FB80)
sll   V0, S1, 2
addu  S4, V0, V1
li    S2, 255
L801156A0:
lh    A0, 2(S4)
move  A1, R0
jal   0x80055458
 andi  A2, S0, 0xffff
jal   SleepVProcess
       NOP
div   S2, S3
bnez  S3, L801156C8
       NOP
.word 0x0007000D ; break 7
L801156C8:
li    AT, -1
bne   S3, AT, L801156E0
 lui   AT, 0x8000
bne   S2, AT, L801156E0
       NOP
.word 0x0006000D; break 6
L801156E0:
mflo  V0
addu  S0, S0, V0
slti  V0, S0, 0xff
bnez  V0, L801156A0
 sll   V0, S1, 2
lui   A0, hi(D_8011FB82)
addu  A0, A0, V0
lh    A0, lo(D_8011FB82)(A0)
move  A1, R0
jal   0x80055458
 li    A2, 255
jal   EndProcess
 move  A0, R0
lw    RA, 0x24(SP)
lw    S4, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x28

func_80115734:
addiu SP, SP, -0x48
sw    RA, 0x44(SP)
sw    S2, 0x40(SP)
sw    S1, 0x3c(SP)
sw    S0, 0x38(SP)
move  S1, R0
lui S2, 0x8888
ori S2, S2, 0x8889
sll   V0, S1, 1
L80115758:
addu  V0, V0, S1
lui   V1, hi(D_8011E4B8)
addu  V1, V1, V0
lbu   V1, lo(D_8011E4B8)(V1)
sw    V1, 0x18(SP)
lui   A1, hi(D_8011E4B9)
addu  A1, A1, V0
lbu   A1, lo(D_8011E4B9)(A1)
sw    A1, 0x1c(SP)
lui   A2, hi(D_8011E4BA)
addu  A2, A2, V0
lbu   A2, lo(D_8011E4BA)(A2)
sw    A2, 0x20(SP)
addiu V0, S1, 1
sll   A0, V0, 1
addu  A0, A0, V0
lui   V0, hi(D_8011E4B8)
addu  V0, V0, A0
lbu   V0, lo(D_8011E4B8)(V0)
subu  V0, V0, V1
mult  V0, S2
mfhi  T0
addu  V1, T0, V0
sra   V1, V1, 4
sra   V0, V0, 0x1f
subu  V1, V1, V0
sw    V1, 0x28(SP)
lui   V0, hi(D_8011E4B9)
addu  V0, V0, A0
lbu   V0, lo(D_8011E4B9)(V0)
subu  V0, V0, A1
mult  V0, S2
mfhi  T0
addu  V1, T0, V0
sra   V1, V1, 4
sra   V0, V0, 0x1f
subu  V1, V1, V0
sw    V1, 0x2c(SP)
lui   V0, hi(D_8011E4BA)
addu  V0, V0, A0
lbu   V0, lo(D_8011E4BA)(V0)
subu  V0, V0, A2
mult  V0, S2
mfhi  T0
addu  V1, T0, V0
sra   V1, V1, 4
sra   V0, V0, 0x1f
subu  V1, V1, V0
sw    V1, 0x30(SP)
move  S0, R0
L80115820:
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
lbu   A2, 0x1b(SP)
lbu   A3, 0x1f(SP)
lbu   V0, 0x23(SP)
sw    V0, 0x10(SP)
jal   0x80055420
 move  A1, R0
lw    V0, 0x18(SP)
lw    V1, 0x28(SP)
addu  V0, V0, V1
sw    V0, 0x18(SP)
lw    V0, 0x1c(SP)
lw    V1, 0x2c(SP)
addu  V0, V0, V1
sw    V0, 0x1c(SP)
lw    V0, 0x20(SP)
lw    V1, 0x30(SP)
addu  V0, V0, V1
jal   SleepVProcess
 sw    V0, 0x20(SP)
addiu S0, S0, 1
slti  V0, S0, 0x1e
bnez  V0, L80115820
       NOP
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
addiu S0, S1, 1
sll   V0, S0, 1
addu  V0, V0, S0
lui   A2, hi(D_8011E4B8)
addu  A2, A2, V0
lbu   A2, lo(D_8011E4B8)(A2)
lui   A3, hi(D_8011E4B9)
addu  A3, A3, V0
lbu   A3, lo(D_8011E4B9)(A3)
lui   AT, hi(D_8011E4BA)
addu  AT, AT, V0
lbu   V0, lo(D_8011E4BA)(AT)
sw    V0, 0x10(SP)
jal   0x80055420
 move  A1, R0
jal   SleepProcess
 li    A0, 10
move  S1, S0
blez  S1, L80115758
 sll   V0, S1, 1
jal   EndProcess
 move  A0, R0
lw    RA, 0x44(SP)
lw    S2, 0x40(SP)
lw    S1, 0x3c(SP)
lw    S0, 0x38(SP)
jr    RA
 addiu SP, SP, 0x48

D_801158FC:
addiu SP, SP, -0x48
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F28, 0x40(SP)
sdc1  F26, 0x38(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
jal   0x8004EE68
 sdc1  F20, 0x20(SP)
lw    S1, 0x8c(V0)
jal   PlaySound
 li    A0, 323
lui   S0, hi(D_8011FB90)
lw    S0, lo(D_8011FB90)(S0)
jal   0x800D9A40
 move  A0, S0
mtc1  R0, F22
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
lui   AT, hi(D_8011F970)
ldc1  F24, lo(D_8011F970)(AT)
li    AT, 0x41900000 ; 18.000000
mtc1  AT, F26
L80115968:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S0, 0x24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F28
cvt.d.s F0, F20
add.d F0, F0, F24
cvt.s.d F20, F0
c.lt.s F20, F26
      NOP
      NOP
bc1t  L80115968
 li    V0, 1
lw    V1, 0(S1)
beq   V1, V0, L80115A3C
       NOP
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F24
li    S2, 1
L801159F4:
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F24
lw    V0, 0(S1)
bne   V0, S2, L801159F4
       NOP
L80115A3C:
li    AT, 0x42200000 ; 40.000000
mtc1  AT, F0
      NOP
c.lt.s F20, F0
      NOP
bc1f  L80115AE0
       NOP
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F28
lui   AT, hi(D_8011F978)
ldc1  F24, lo(D_8011F978)(AT)
li    AT, 0x42200000 ; 40.000000
mtc1  AT, F26
L80115A70:
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, S0, 0x24
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F28
cvt.d.s F0, F20
add.d F0, F0, F24
cvt.s.d F20, F0
c.lt.s F20, F26
      NOP
bc1t  L80115A70
       NOP
L80115AE0:
lw    V1, 0(S1)
li    V0, 2
beq   V1, V0, L80115B44
       NOP
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F20
li    S2, 2
L80115AFC:
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    V0, 0(V0)
sll   A0, V0, 1
addu  A0, A0, V0
sll   A0, A0, 6
lui   V0, hi(CORE_800D03F8)
lw    V0, lo(CORE_800D03F8)(V0)
addu  A0, A0, V0
mfc1  A1, F22
      NOP
jal   0x8008A430
 addiu A0, A0, 0x74
jal   SleepVProcess
 add.s F22, F22, F20
lw    V0, 0(S1)
bne   V0, S2, L80115AFC
       NOP
L80115B44:
jal   0x800D9B54
 move  A0, S0
jal   EndProcess
 move  A0, R0
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F28, 0x40(SP)
ldc1  F26, 0x38(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x48

D_80115B80:
addiu SP, SP, -0x98
sw    RA, 0x68(SP)
sw    S7, 0x64(SP)
sw    S6, 0x60(SP)
sw    S5, 0x5c(SP)
sw    S4, 0x58(SP)
sw    S3, 0x54(SP)
sw    S2, 0x50(SP)
sw    S1, 0x4c(SP)
sw    S0, 0x48(SP)
sdc1  F28, 0x90(SP)
sdc1  F26, 0x88(SP)
sdc1  F24, 0x80(SP)
sdc1  F22, 0x78(SP)
sdc1  F20, 0x70(SP)
lui   S5, hi(CORE_800CD058)
addiu S5, S5, lo(CORE_800CD058)
li    A0, 1
jal   0x8005279C
 move  A1, R0
sll   V0, V0, 0x10
lui   A0, hi(CORE_801019C4)
lw    A0, lo(CORE_801019C4)(A0)
jal   ReadMainFS
 sra   S4, V0, 0x10
move  S2, V0
jal   ImgPackParse
 move  A0, S2
sll   V0, V0, 0x10
sra   S7, V0, 0x10
jal   FreeMainFS
 move  A0, S2
move  S0, S4
move  A0, S0
move  A1, R0
move  A2, S7
jal   0x80055024
 move  A3, R0
move  A0, S0
move  A1, R0
jal   0x80055294
 li    A2, 18294
move  A0, S0
move  A1, R0
jal   0x800553A8
 li    A2, 4096
move  S3, R0
lui   S6, hi(D_8011FB80)
addiu S6, S6, lo(D_8011FB80)
li    A0, 1
L80115C48:
jal   0x8005279C
 move  A1, R0
sll   S0, S3, 2
addu  S1, S0, S6
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0(S1)
addiu V0, S3, 0x1bb
lui   A0, 0x13
jal   ReadMainFS
 or    A0, V0, A0
move  S2, V0
jal   ImgPackParse
 move  A0, S2
addiu V1, SP, 0x18
addu  S0, S0, V1
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0(S0)
jal   FreeMainFS
 move  A0, S2
lh    A0, 2(S1)
move  A1, R0
lh    A2, 2(S0)
jal   0x80055024
 move  A3, R0
lh    A0, 2(S1)
move  A1, R0
jal   0x80055294
 li    A2, 18304
lh    A0, 2(S1)
move  A1, R0
jal   0x800553A8
 li    A2, 38924
lh    A0, 2(S1)
move  A1, R0
jal   0x80055458
 move  A2, R0
lh    A0, 2(S1)
sw    R0, 0x10(SP)
move  A1, R0
li    A2, 255
jal   0x80055420
 li    A3, 255
addiu S3, S3, 1
slti  V0, S3, 4
bnezl V0, L80115C48
 li    A0, 1
li    A0, 70
jal   0x800D90C8
 move  A1, R0
move  S0, V0
lui   AT, hi(D_8011FB90)
sw    S0, lo(D_8011FB90)(AT)
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 384
jal   0x8001C258
 move  A2, R0
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001C8E4
 li    A1, 0x1800
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
jal   0x8001C448
 move  S1, S4
lw    V0, 0x3c(S0)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
jal   GetPlayerStruct
 li    A0, -1
lw    A1, 0x24(V0)
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
jal   0x800D9714
 move  A0, S0
jal   0x800D9B24
 move  A0, S0
lui   A0, hi(CORE_8010570C)
lh    A0, lo(CORE_8010570C)(A0)
move  A1, R0
jal   0x800553A8
 li    A2, 0x8000
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S5)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S5)
move  A1, V0
addiu A2, SP, 0x30
jal   0x800F6E4C
 addiu A3, SP, 0x34
move  A0, S1
lh    A2, 0x32(SP)
lh    A3, 0x36(SP)
jal   0x80054904
 move  A1, R0
li    AT, 0x43200000 ; 160.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x28(SP)
li    AT, 0x42980000 ; 76.000000
mtc1  AT, F20
      NOP
swc1  F20, 0x2c(SP)
jal   PlaySound
 li    A0, 325
addiu S0, SP, 0x28
move  A0, S4
li    A1, 30
jal   func_8011548C
 move  A2, S0
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S5)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S5)
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
jal   SleepProcess
 li    A0, 30
li    AT, 0x434B0000 ; 203.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x28(SP)
li    AT, 0x42300000 ; 44.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x2c(SP)
move  A0, S4
li    A1, 10
jal   func_8011548C
 move  A2, S0
lui   A0, hi(func_801155C4)
addiu A0, A0, lo(func_801155C4)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S2, V0
jal   0x8004EE68
 sw    R0, 0x8c(S2)
move  A0, V0
jal   0x8004ED30
 move  A1, S2
lwc1  F0, 0x28(SP)
sub.s F0, F0, F20
swc1  F0, 0x28(SP)
jal   PlaySound
 li    A0, 333
move  A0, S4
li    A1, 10
jal   func_8011548C
 move  A2, S0
jal   0x8004EE18
       NOP
jal   SleepProcess
 li    A0, 10
lui   A0, hi(func_801155C4)
addiu A0, A0, lo(func_801155C4)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S2, V0
li    V0, 1
jal   0x8004EE68
 sw    V0, 0x8c(S2)
move  A0, V0
jal   0x8004ED30
 move  A1, S2
lwc1  F0, 0x2c(SP)
li    AT, 0x42800000 ; 64.000000
mtc1  AT, F2
      NOP
add.s F0, F0, F2
swc1  F0, 0x2c(SP)
jal   PlaySound
 li    A0, 333
move  A0, S4
li    A1, 10
jal   func_8011548C
 move  A2, S0
jal   0x8004EE18
       NOP
jal   SleepProcess
 li    A0, 10
jal   PlaySound
 li    A0, 334
move  A0, S1
move  A1, R0
addiu A2, SP, 0x38
jal   0x800F6748
 addiu A3, SP, 0x3c
mtc1  R0, F20
move  S1, R0
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F22
add.s F0, F20, F20
L80115FCC:
li    AT, 0x43870000 ; 270.000000
mtc1  AT, F12
      NOP
jal   0x8008E3F0
 add.s F12, F0, F12
li    AT, 0x42A00000 ; 80.000000
mtc1  AT, F2
      NOP
mul.s F0, F0, F2
lwc1  F2, 0x38(SP)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  S0, F2
      NOP
sll   S0, S0, 0x10
sra   S0, S0, 0x10
jal   0x8008E3F0
 mov.s F12, F20
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
sub.s F2, F2, F0
mul.s F2, F2, F22
lwc1  F0, 0x3c(SP)
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S4
move  A1, R0
move  A2, S0
jal   0x80054904
 sra   A3, A3, 0x10
li    AT, 0x42580000 ; 54.000000
mtc1  AT, F0
      NOP
c.lt.s F0, F20
      NOP
      NOP
bc1t  L80116078
 li    V1, 1
move  V1, R0
L80116078:
sltiu V0, S1, 1
and   V0, V1, V0
beqz  V0, L801160BC
 li    A1, 16386
li    S1, 1
lui   A0, hi(func_801155C4)
addiu A0, A0, lo(func_801155C4)
move  A2, R0
jal   InitProcess
 move  A3, R0
move  S2, V0
li    V0, 2
jal   0x8004EE68
 sw    V0, 0x8c(S2)
move  A0, V0
jal   0x8004ED30
 move  A1, S2
L801160BC:
jal   SleepVProcess
       NOP
li   AT, 0x40660000 ; 3.593750
ori  AT, AT, 0x6666
mtc1 AT, F0
      NOP
add.s F20, F20, F0
c.lt.s F20, F22
      NOP
      NOP
bc1tl L80115FCC
 add.s F0, F20, F20
li    AT, 0x43E10000 ; 450.000000
mtc1  AT, F12
      NOP
jal   0x8008E3F0
 sll   S1, S4, 0x10
li    AT, 0x42A00000 ; 80.000000
mtc1  AT, F2
      NOP
mul.s F0, F0, F2
lwc1  F2, 0x38(SP)
add.s F0, F0, F2
trunc.w.s F2, F0
mfc1  S0, F2
      NOP
sll   S0, S0, 0x10
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F12
      NOP
jal   0x8008E3F0
 sra   S0, S0, 0x10
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F2
      NOP
sub.s F2, F2, F0
li    AT, 0x42B40000 ; 90.000000
mtc1  AT, F0
      NOP
mul.s F2, F2, F0
lwc1  F0, 0x3c(SP)
add.s F2, F2, F0
trunc.w.s F0, F2
mfc1  A3, F0
      NOP
sll   A3, A3, 0x10
move  A0, S4
move  A1, R0
move  A2, S0
jal   0x80054904
 sra   A3, A3, 0x10
li    S0, 255
sra   A0, S1, 0x10
L80116190:
move  A1, R0
jal   0x80055458
 andi  A2, S0, 0xffff
jal   SleepVProcess
 addiu S0, S0, -0x19
bgtz  S0, L80116190
 sra   A0, S1, 0x10
jal   0x800525C8
 move  A0, S4
jal   FreeGraphics
 move  A0, S7
jal   0x8004EE18
 move  S3, R0
lui   S0, hi(D_8011FB80)
addiu S0, S0, lo(D_8011FB80)
sll   V0, S3, 2
L801161D0:
addu  V0, V0, S0
lh    A0, 2(V0)
move  A1, R0
jal   0x800553A8
 li    A2, 32768
addiu S3, S3, 1
slti  V0, S3, 3
bnez  V0, L801161D0
 sll   V0, S3, 2
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
move  A1, R0
jal   0x8005532C
 li    A2, 32768
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
move  A1, R0
jal   0x80055458
 li    A2, 255
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
move  A1, R0
li    A2, 160
jal   0x80054904
 li    A3, 120
jal   0x8004EE68
 move  S3, R0
move  S0, V0
lui   A0, hi(func_80115734)
addiu A0, A0, lo(func_80115734)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
move  A0, S0
jal   0x8004ED30
 move  A1, V0
sw    R0, 0x40(SP)
lui   A0, hi(D_801158FC)
addiu A0, A0, lo(D_801158FC)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
addiu V1, SP, 0x40
jal   0x8004EE18
 sw    V1, 0x8c(V0)
jal   PlaySound
 li    A0, 335
li    A0, -1
li    A1, 4
jal   0x800FFA4C
 li    A2, 5
move  S1, V0
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F28
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F24
li    AT, 0x40400000 ; 3.000000
mtc1  AT, F26
li    S0, 1
L801162C4:
mtc1  S3, F22
      NOP
cvt.s.w F22, F22
jal   0x8008EF20
 mov.s F12, F22
div.s F20, F0, F28
add.s F20, F20, F24
jal   0x8008EF20
 mov.s F12, F22
div.s F0, F0, F26
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
mfc1  A2, F20
add.s F0, F0, F24
mfc1  A3, F0
      NOP
jal   0x800551D8
 move  A1, R0
slti  V0, S3, 0x5a1
beql  V0, R0, L80116318
 sw    S0, 0x40(SP)
L80116318:
jal   SleepVProcess
 addiu S3, S3, 0x32
slti  V0, S3, 0xb41
bnez  V0, L801162C4
       NOP
jal   PlaySound
 li    A0, 297
li    A0, 255
li    A1, 255
jal   0x800620C8
 li    A2, 255
li    A0, 11
jal   InitFadeOut
 li    A1, 50
jal   0x800FFAEC
 move  A0, S1
mtc1  R0, F20
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F22
func_80116368:
jal   GetFadeStatus
       NOP
beqz  V0, L801163A4
       NOP
lui   A0, hi(D_8011FB8E)
lh    A0, lo(D_8011FB8E)(A0)
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x800551D8
 move  A1, R0
jal   SleepVProcess
       NOP
j     func_80116368
 add.s F20, F20, F22
L801163A4:
jal   GetFadeStatus
       NOP
beqz  V0, L801163C4
 li    V0, 2
jal   SleepVProcess
       NOP
j     L801163A4
       NOP
L801163C4:
sw    V0, 0x40(SP)
move  S3, R0
lui   S2, hi(D_8011FB80)
addiu S2, S2, lo(D_8011FB80)
addiu S1, SP, 0x18
sll   S0, S3, 2
L801163DC:
addu  V0, S0, S2
lh    A0, 2(V0)
jal   0x800525C8
 addu  S0, S0, S1
lh    A0, 2(S0)
jal   FreeGraphics
 addiu S3, S3, 1
slti  V0, S3, 4
bnez  V0, L801163DC
 sll   S0, S3, 2
li    A0, 11
jal   InitFadeIn
 li    A1, 90
L80116410:
jal   GetFadeStatus
       NOP
beqz  V0, L80116430
       NOP
jal   SleepVProcess
       NOP
j     L80116410
       NOP
L80116430:
jal   0x800EC414
 li    A0, 14883
li    V0, 2
lui   AT, hi(CORE_800CD0AA)
sh    V0, lo(CORE_800CD0AA)(AT)
lw    RA, 0x68(SP)
lw    S7, 0x64(SP)
lw    S6, 0x60(SP)
lw    S5, 0x5c(SP)
lw    S4, 0x58(SP)
lw    S3, 0x54(SP)
lw    S2, 0x50(SP)
lw    S1, 0x4c(SP)
lw    S0, 0x48(SP)
ldc1  F28, 0x90(SP)
ldc1  F26, 0x88(SP)
ldc1  F24, 0x80(SP)
ldc1  F22, 0x78(SP)
ldc1  F20, 0x70(SP)
jr    RA
 addiu SP, SP, 0x98

func_8011667C:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S1, A0
lui   V1, hi(D_8011FBA8)
addiu V1, V1, lo(D_8011FBA8)
sll   V0, S1, 2
addu  S0, V0, V1
lw    A0, 0(S0)
beqz  A0, L801166B8
       NOP
jal   0x800479AC
       NOP
sw    R0, 0(S0)
L801166B8:
lui   V1, hi(D_8011FB98)
addiu V1, V1, lo(D_8011FB98)
sll   V0, S1, 2
addu  S0, V0, V1
lw    A0, 0(S0)
beqz  A0, L801166E0
       NOP
jal   0x800D9B54
       NOP
sw    R0, 0(S0)
L801166E0:
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

D_801166F4:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, R0
lui   S2, hi(D_8011FBA8)
addiu S2, S2, lo(D_8011FBA8)
sll   V0, S0, 2
L80116718:
addu  S1, V0, S2
lw    A0, 0(S1)
beqz  A0, L80116734
 addiu S0, S0, 1
jal   0x800479AC
       NOP
sw    R0, 0(S1)
L80116734:
slti  V0, S0, 4
bnez  V0, L80116718
 sll   V0, S0, 2
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

D_80116758:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, A0
lw    S1, 0x4c(S0)
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
li    V0, 4
bne   V1, V0, L801167BC
       NOP
lw    V0, 0x54(S0)
bnez  V0, L801167BC
       NOP
lw    V0, 0x50(S0)
bnez  V0, L801167AC
 addiu V0, V0, -1
li    V0, 40
j     L801168EC
 sw    V0, 0x50(S0)
L801167AC:
bnez  V0, L801168EC
 sw    V0, 0x50(S0)
li    V0, 1
sw    V0, 0x54(S0)
L801167BC:
jal   GetPlayerStruct
 move  A0, S1
move  S2, V0
sll   V0, S1, 2
lui   S1, hi(D_8011FB98)
addu  S1, S1, V0
lw    S1, lo(D_8011FB98)(S1)
lw    A1, 0x24(S2)
addiu A0, S1, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
lw    V0, 0x24(S2)
lwc1  F0, 0x30(V0)
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F2
      NOP
add.s F0, F0, F2
swc1  F0, 0x30(S1)
lw    A1, 0x24(S2)
addiu A0, S1, 0x18
jal   0x80089A20
 addiu A1, A1, 0x18
lwc1  F12, 0x24(S0)
jal   0x8008EF20
       NOP
lwc1  F2, 0x18(S0)
mul.s F0, F0, F2
lwc1  F2, 0xc(S1)
add.s F0, F0, F2
swc1  F0, 0xc(S1)
jal   0x8008E3F0
 lwc1  F12, 0x24(S0)
lwc1  F2, 0x18(S0)
mul.s F0, F0, F2
lwc1  F2, 0x14(S1)
add.s F0, F0, F2
swc1  F0, 0x14(S1)
lwc1  F2, 0x24(S0)
li    AT, 0x40A00000 ; 5.000000
mtc1  AT, F0
      NOP
add.s F0, F2, F0
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F2
      NOP
c.le.s F2, F0
      NOP
      NOP
bc1f  L8011688C
 swc1  F0, 0x24(S0)
sub.s F0, F0, F2
swc1  F0, 0x24(S0)
L8011688C:
lwc1  F2, 0x18(S0)
li    AT, 0x40A00000 ; 5.000000
mtc1  AT, F0
      NOP
c.le.s F2, F0
      NOP
bc1f  L801168C0
       NOP
li    AT, 0x3E800000 ; 0.250000
mtc1  AT, F0
      NOP
add.s F0, F2, F0
swc1  F0, 0x18(S0)
L801168C0:
lw    V0, 0x24(S2)
lhu   V0, 0xa(V0)
andi  V0, V0, 8
beqz  V0, L801168E4
       NOP
jal   0x800D9A40
 move  A0, S1
j     L801168EC
       NOP
L801168E4:
jal   0x800D9B24
 move  A0, S1
L801168EC:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_80116904:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S1, A0
jal   GetPlayerStruct
 move  S0, A1
move  S2, V0
sll   V0, S1, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
bnez  V0, L801169DC
 sll   V0, S1, 2
li    V0, 1
beq   S0, V0, L80116974
 slti  V0, S0, 2
beql  V0, R0, L80116964
 li    V0, 2
beqz  S0, L80116978
 li    A0, 63
j     L80116978
 li    A0, 66
L80116964:
beq   S0, V0, L80116978
 li    A0, 65
j     L80116978
 li    A0, 66
L80116974:
li    A0, 64
L80116978:
andi  A0, A0, 0xff
jal   0x800D90C8
 move  A1, R0
move  S0, V0
jal   0x800D9714
 move  A0, S0
sll   V0, S1, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
sw    S0, lo(D_8011FB98)(AT)
lhu   V0, 0xa(S0)
ori   V0, V0, 2
sh    V0, 0xa(S0)
lw    A1, 0x24(S2)
addiu A0, S0, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
li    AT, 0x41A00000 ; 20.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S0)
jal   0x800ECC0C
 addiu A0, S0, 0x18
j     L801169EC
       NOP
L801169DC:
lui   A0, hi(D_8011FB98)
addu  A0, A0, V0
jal   0x800D9A40
 lw    A0, lo(D_8011FB98)(A0)
L801169EC:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_80116A04:
addiu SP, SP, -0x28
sw    RA, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
move  S1, A0
lui   V0, hi(D_80116758)
addiu V0, V0, lo(D_80116758)
sw    V0, 0x10(SP)
li    A0, 16383
move  A1, R0
move  A2, R0
jal   0x80047620
 li    A3, -1
lui   V1, hi(D_8011FBA8)
addiu V1, V1, lo(D_8011FBA8)
sll   S0, S1, 2
addu  S0, S0, V1
sw    V0, 0(S0)
sw    S1, 0x4c(V0)
lw    V0, 0(S0)
sw    R0, 0x50(V0)
lw    V0, 0(S0)
li    AT, 0x43B40000 ; 360.000000
mtc1  AT, F12
      NOP
jal   0x800EEF80
 sw    R0, 0x54(V0)
lw    V1, 0(S0)
mtc1  V0, F0
      NOP
cvt.s.w F0, F0
swc1  F0, 0x24(V1)
lw    V0, 0(S0)
sw    R0, 0x18(V0)
lw    RA, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x28

func_80116AA0:
addiu SP, SP, -0x28
sw    RA, 0x24(SP)
sw    S4, 0x20(SP)
sw    S3, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, R0
lui   S4, hi(D_8011FBA8)
addiu S4, S4, lo(D_8011FBA8)
lui   S3, hi(D_8011FB98)
addiu S3, S3, lo(D_8011FB98)
li    S2, -1
sll   V1, S0, 2
L80116AD8:
addu  V0, V1, S4
sw    R0, 0(V0)
addu  V1, V1, S3
sw    R0, 0(V1)
jal   GetPlayerStruct
 move  A0, S0
lbu   V0, 0x17(V0)
andi  V0, V0, 2
sltiu V0, V0, 1
subu  S1, R0, V0
jal   GetPlayerStruct
 move  A0, S0
lbu   V0, 0x17(V0)
andi  V0, V0, 4
bnezl V0, L80116B18
 li    S1, 1
L80116B18:
jal   GetPlayerStruct
 move  A0, S0
lbu   V0, 0x17(V0)
andi  V0, V0, 0x20
bnezl V0, L80116B30
 li    S1, 2
L80116B30:
jal   GetPlayerStruct
 move  A0, S0
lbu   V0, 0x17(V0)
andi  V0, V0, 0x40
bnezl V0, L80116B48
 li    S1, 3
L80116B48:
beql  S1, S2, L80116B68
 addiu S0, S0, 1
move  A0, S0
jal   func_80116904
 move  A1, S1
jal   func_80116A04
 move  A0, S0
addiu S0, S0, 1
L80116B68:
slti  V0, S0, 4
bnez  V0, L80116AD8
 sll   V1, S0, 2
lui   A0, hi(D_801166F4)
jal   0x800F8D54
 addiu A0, A0, lo(D_801166F4)
lw    RA, 0x24(SP)
lw    S4, 0x20(SP)
lw    S3, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x28

; runs from 0xFFFB event table entry
; Poison / Bowser Curse, reduce movement to 3 spaces.
__PP64_INTERNAL_CURSE_POISON_DICEROLL_EVENT:
addiu SP, SP, -0x38
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
sdc1  F20, 0x20(SP)
lui   S0, hi(CORE_800CD058)
addiu S0, S0, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S1, V0
lh    V0, 0x56(S0)
lui   V1, hi(current_player_index)
lb    V1, lo(current_player_index)(V1)
srav  V0, V0, V1
andi  V0, V0, 1
beqz  V0, L80116D88
       NOP
jal   0x80035FDC
 li    A0, 16
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
li    V1, 1
sllv  V1, V1, V0
nor   V1, R0, V1
lhu   V0, 0x56(S0)
and   V0, V0, V1
sh    V0, 0x56(S0)
lbu   V0, 0x17(S1)
andi  V0, V0, 0x20
bnez  V0, L80116C40
 li    A0, -1
lw    V0, 0x14(S1)
andi  V0, V0, 0xa
li    V1, 8
bne   V0, V1, L80116C44
 li    A1, 0x3A07 ; "A poison mushroom is limiting your move to three spaces or less"
li    A0, -1
L80116C40:
li    A1, 0x4219 ; "Because of Bowser's Curse, you can move up to only three spaces."
L80116C44:
jal   0x800EC590
       NOP
lbu   V0, 0x17(S1)
andi  V0, V0, 2
beqz  V0, L80116CE4
       NOP
lb    V0, 0xf(S0)
sll   V0, V0, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
beqz  V0, L80116CDC
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
lui   S2, hi(D_8011FB98)
addiu S2, S2, lo(D_8011FB98)
li    AT, 0x3DA30000 ; 0.079590
ori AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L80116C98:
lb    V0, 0xf(S0)
sll   V0, V0, 2
addu  V0, V0, S2
lw    A0, 0(V0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
bc1t  L80116C98
       NOP
L80116CDC:
jal   func_8011667C
 lb    A0, 0xf(S0)
L80116CE4:
lbu   V0, 0x17(S1)
andi  V0, V0, 8
beqz  V0, L80116D7C
       NOP
lb    V0, 0xf(S0)
sll   V0, V0, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
beqz  V0, L80116D74
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
lui   S2, hi(D_8011FB98)
addiu S2, S2, lo(D_8011FB98)
li    AT, 0x3DA30000 ; 0.079590
ori AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L80116D30:
lb    V0, 0xf(S0)
sll   V0, V0, 2
addu  V0, V0, S2
lw    A0, 0(V0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
bc1t  L80116D30
       NOP
L80116D74:
jal   func_8011667C
 lb    A0, 0xf(S0)
L80116D7C:
lbu   V0, 0x17(S1)
andi  V0, V0, 0xd5
sb    V0, 0x17(S1)
L80116D88:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

D_80116DAC:
addiu SP, SP, -0x38
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
sdc1  F20, 0x20(SP)
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S0, V0
lbu   V0, 0x17(S0)
andi  V0, V0, 8
beqz  V0, L80116EE8
       NOP
lui   A0, hi(current_player_index)
jal   0x800DCA64
 lb    A0, lo(current_player_index)(A0)
jal   0x80035FDC
 li    A0, 16
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
li    V1, 1
sllv  V1, V1, V0
nor   V1, R0, V1
lhu   V0, 0x56(S1)
and   V0, V0, V1
sh    V0, 0x56(S1)
li    A0, -1
jal   0x800EC590
 li    A1, 16921
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V0, V0, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
beqz  V0, L80116EB4
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
lui   S2, hi(D_8011FB98)
addiu S2, S2, lo(D_8011FB98)
li    AT, 0x3DA30000 ; 0.079590
ori AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L80116E70:
lb    V0, 0xf(S1)
sll   V0, V0, 2
addu  V0, V0, S2
lw    A0, 0(V0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
bc1t  L80116E70
       NOP
L80116EB4:
jal   func_8011667C
 lb    A0, 0xf(S1)
lbu   V0, 0x17(S0)
andi  V0, V0, 0xd7
sb    V0, 0x17(S0)
li    A0, -1
jal   0x800FF900
 li    A1, 2
lb    A0, 0xf(S1)
jal   0x800DC128
       NOP
jal   SleepProcess
 li    A0, 15
L80116EE8:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

D_80116F0C:
addiu SP, SP, -0x20
sw    RA, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
jal   0x8004EE68
 li    S0, 60
lw    S1, 0x8c(V0)
L80116F28:
jal   SleepVProcess
 addiu S0, S0, -1
bnez  S0, L80116F28
       NOP
jal   0x800FFAEC
 move  A0, S1
jal   EndProcess
 move  A0, R0
lw    RA, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

D_80116F5C:
addiu SP, SP, -0x60
sw    RA, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
sw    S0, 0x20(SP)
sdc1  F28, 0x58(SP)
sdc1  F26, 0x50(SP)
sdc1  F24, 0x48(SP)
sdc1  F22, 0x40(SP)
sdc1  F20, 0x38(SP)
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
lui   V1, hi(p1_char)
addiu V1, V1, lo(p1_char)
lbu   A2, 0(V1)
lbu   A3, 0x38(V1)
lbu   V0, 0x70(V1)
addiu V0, V0, 0x1c00
sw    V0, 0x10(SP)
lbu   V0, 0xa8(V1)
addiu V0, V0, 0x1c00
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x5C01
addiu A2, A2, 0x1c00
jal   0x800EC8EC ; ShowMessage ; "Who's your opponent?"
 addiu A3, A3, 0x1c00
lui   A1, hi(D_8011FBBC)
lw    A1, lo(D_8011FBBC)(A1)
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 li    A0, 2
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
slti  V0, S0, 4
beqz  V0, L80117004
       NOP
bgez  S0, L80117010
 move  S1, S0
L80117004:
jal   0x800EF0D8
 move  A0, R0
move  S1, V0
L80117010:
lui   A1, hi(CORE_800CD0AE)
addiu A1, A1, lo(CORE_800CD0AE)
sll   A0, S1, 0x10
sra   A0, A0, 0x10
li    V1, 1
sllv  V1, V1, A0
lhu   V0, 0(A1)
or    V0, V0, V1
jal   GetPlayerStruct
 sh    V0, 0(A1)
move  S2, V0
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
      NOP
mov.s F22, F20
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F28
li    AT, 0x3D8F0000 ; 0.069824
ori AT, AT, 0x5c29
mtc1  AT, F26
mtc1  R0, F24
sub.s F20, F20, F28
L8011706C:
jal   0x800E4A7C
 add.s F22, F22, F26
lb    A0, 0xf(S3)
mfc1  A2, F20
mfc1  A3, F22
      NOP
jal   0x800F696C
 move  A1, V0
jal   SleepVProcess
       NOP
c.lt.s F24, F20
      NOP
      NOP
bc1tl L8011706C
 sub.s F20, F20, F28
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
jal   0x800F6BC4
 li    A0, -1
jal   0x800F66DC
 move  A0, R0
jal   0x800F6ECC
 li    A0, -1
sll   V0, S1, 0x10
sra   V0, V0, 0x10
lb    V1, 0xf(S3)
beq   V0, V1, L80117148
 sll   S0, S1, 0x10
move  A0, R0
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 16
jal   0x800F915C
 li    A0, 2
lw    A0, 0x24(S2)
jal   0x800F9174
 addiu A0, A0, 0xc
lw    A0, 0x24(S2)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepVProcess
 sll   S0, S1, 0x10
move  A0, R0
jal   InitFadeIn
 li    A1, 16
li    V0, 1
lui   AT, hi(CORE_800A12D8)
sw    V0, lo(CORE_800A12D8)(AT)
jal   SleepProcess
 li    A0, 16
L80117148:
sra   S0, S0, 0x10
jal   func_8011667C
 move  A0, S0
lbu   V0, 0x17(S2)
andi  V0, V0, 0x99
ori   V0, V0, 2
sb    V0, 0x17(S2)
move  A0, S0
jal   func_80116904
 move  A1, R0
mtc1  R0, F20
sll   V0, S1, 0x10
lui   V1, hi(D_8011FB98)
addiu V1, V1, lo(D_8011FB98)
sra   V0, V0, 0xe
addu  S0, V0, V1
li    AT, 0x3DA30000 ; 0.079590
ori   AT, AT, 0xd70a
mtc1  AT, F24
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
L8011719C:
lw    A0, 0(S0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
add.s F20, F20, F24
c.le.s F20, F22
      NOP
      NOP
bc1t  L8011719C
 sll   V0, S1, 0x10
sra   S0, V0, 0x10
sll   V0, S0, 2
lui   A0, hi(D_8011FB98)
addu  A0, A0, V0
lw    A0, lo(D_8011FB98)(A0)
addiu A0, A0, 0x24
lui   A1, 0x3f80
move  A2, A1
jal   0x80089A10
 move  A3, A1
lb    V0, 0xf(S3)
bnel  S0, V0, L80117224
 sll   A0, S1, 0x10
move  A0, S0
li    A1, 4
jal   0x800F2304
 li    A2, 2
j     L80117240
 sll   S0, S1, 0x10
L80117224:
jal   GetPlayerStruct
 sra   A0, A0, 0x10
lw    A0, 0x24(V0)
li    A1, 4
jal   0x800D9CE8
 li    A2, 2
sll   S0, S1, 0x10
L80117240:
sra   S0, S0, 0x10
sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   A1, hi(p1_char)
addu  A1, A1, V0
lbu   A1, lo(p1_char)(A1)
jal   0x8004AC10
 li    A0, 646
jal   func_80116A04
 move  A0, S0
move  A0, S0
li    A1, 1
jal   0x800FFA4C
 li    A2, 5
move  S0, V0
lui   A0, hi(D_80116F0C)
addiu A0, A0, lo(D_80116F0C)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S0, 0x8c(V0)
jal   SleepProcess
 li    A0, 20
lbu   V0, 0xf(S3)
sll   V0, V0, 0x18
sra   S0, V0, 0x18
sb    S1, 0xf(S3)
lbu   V0, 0x17(S2)
andi  V0, V0, 0x80
beqz  V0, L801172CC
 li    A0, -1
jal   0x800EC590
 li    A1, 14857
L801172CC:
li    A0, -1
jal   0x800EC590
 li    A1, 14854
sll   V1, S0, 0x18
sll   V0, S1, 0x10
sra   V0, V0, 0x10
sra   V1, V1, 0x18
bne   V0, V1, L80117308
 sb    S0, 0xf(S3)
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
j     L80117330
 sll   V0, S1, 0x10
L80117308:
sll   A0, S1, 0x10
jal   GetPlayerStruct
 sra   A0, A0, 0x10
lw    A0, 0x24(V0)
li    A1, -1
jal   0x800D9CE8
 li    A2, 2
lui   AT, hi(CORE_800A12D8)
sw    R0, lo(CORE_800A12D8)(AT)
sll   V0, S1, 0x10
L80117330:
sra   V0, V0, 0x10
lb    V1, 0xf(S3)
beq   V0, V1, L80117390
 sll   V0, S1, 0x10
move  A0, R0
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 16
jal   0x800F915C
 li    A0, 1
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepVProcess
       NOP
move  A0, R0
jal   InitFadeIn
 li    A1, 16
jal   SleepProcess
 li    A0, 16
sll   V0, S1, 0x10
L80117390:
sra   V0, V0, 0x10
lb    V1, 0xf(S3)
bne   V0, V1, L801174A4
       NOP
jal   0x80035FDC
 li    A0, 16
li    A0, -1
jal   0x800EC590
 li    A1, 14855
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
sll   V0, S1, 0x10
lui   V1, hi(D_8011FB98)
addiu V1, V1, lo(D_8011FB98)
sra   V0, V0, 0xe
addu  S0, V0, V1
li    AT, 0x3DA30000 ; 0.079590
ori   AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L801173E0:
lw    A0, 0(S0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
      NOP
bc1t  L801173E0
 sll   V0, S1, 0x10
sra   V0, V0, 0xe
lui   A0, hi(D_8011FB98)
addu  A0, A0, V0
lw    A0, lo(D_8011FB98)(A0)
addiu A0, A0, 0x24
move  A1, R0
move  A2, A1
jal   0x80089A10
 move  A3, A1
lb    A0, 0xf(S3)
jal   func_8011667C
       NOP
lui   S0, hi(current_player_index)
addiu S0, S0, lo(current_player_index)
jal   0x800DCA64
 lb    A0, 0(S0)
li    A0, -1
jal   0x800FF900
 li    A1, 2
lb    A0, 0(S0)
jal   0x800DC128
       NOP
jal   SleepProcess
 li    A0, 15
lb    V0, 0(S0)
li    V1, 1
sllv  V1, V1, V0
nor   V1, R0, V1
lhu   V0, 0x47(S0)
and   V0, V0, V1
sh    V0, 0x47(S0)
lbu   V0, 0x17(S2)
andi  V0, V0, 0xfd
sb    V0, 0x17(S2)
L801174A4:
lw    RA, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
ldc1  F28, 0x58(SP)
ldc1  F26, 0x50(SP)
ldc1  F24, 0x48(SP)
ldc1  F22, 0x40(SP)
ldc1  F20, 0x38(SP)
jr    RA
 addiu SP, SP, 0x60

; Runs from 0xFFFB event table entry
; Reversal (mushroom, curse)
__PP64_INTERNAL_REVERSAL_DICEROLL_EVENT:
addiu SP, SP, -0x38
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
sdc1  F20, 0x20(SP)
lui   S0, hi(CORE_800CD058)
addiu S0, S0, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S1, V0
lbu   V1, 0x17(S1)
andi  V0, V1, 0x80
beqz  V0, L80117680
 andi  V0, V1, 0x40
bnez  V0, L80117538
 li    A0, -1
lw    V0, 0x14(S1)
andi  V0, V0, 0x14
li    V1, 16
bne   V0, V1, L8011753C
 li    A1, 0x3A03 ; "A Reverse Mushroom is forcing you to move in the opposite direction"
li    A0, -1
L80117538:
li    A1, 0x421C ; "Because of the "Reverse Curse", you'll now move in the opposite direction."
L8011753C:
jal   0x800EC590
       NOP
lbu   V0, 0x17(S1)
andi  V0, V0, 4
beqz  V0, L801175DC
       NOP
lb    V0, 0xf(S0)
sll   V0, V0, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
beqz  V0, L801175D4
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
lui   S2, hi(D_8011FB98)
addiu S2, S2, lo(D_8011FB98)
li    AT, 0x3DA30000 ; 0.079590
ori   AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L80117590:
lb    V0, 0xf(S0)
sll   V0, V0, 2
addu  V0, V0, S2
lw    A0, 0(V0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
bc1t  L80117590
       NOP
L801175D4:
jal   func_8011667C
 lb    A0, 0xf(S0)
L801175DC:
lbu   V0, 0x17(S1)
andi  V0, V0, 0x10
beqz  V0, L80117674
       NOP
lb    V0, 0xf(S0)
sll   V0, V0, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
beqz  V0, L8011766C
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
lui   S2, hi(D_8011FB98)
addiu S2, S2, lo(D_8011FB98)
li    AT, 0x3DA30000 ; 0.079590
ori   AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L80117628:
lb    V0, 0xf(S0)
sll   V0, V0, 2
addu  V0, V0, S2
lw    A0, 0(V0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
bc1t  L80117628
       NOP
L8011766C:
jal   func_8011667C
 lb    A0, 0xf(S0)
L80117674:
lbu   V0, 0x17(S1)
andi  V0, V0, 0xab
sb    V0, 0x17(S1)
L80117680:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

D_801176A4:
addiu SP, SP, -0x38
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
sdc1  F24, 0x30(SP)
sdc1  F22, 0x28(SP)
sdc1  F20, 0x20(SP)
lui   S1, hi(CORE_800CD058)
addiu S1, S1, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S0, V0
lbu   V0, 0x17(S0)
andi  V0, V0, 0x10
beqz  V0, L801177B8
       NOP
lui   A0, hi(current_player_index)
jal   0x800DCA64
 lb    A0, lo(current_player_index)(A0)
li    A0, -1
jal   0x800EC590
 li    A1, 16924
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
sll   V0, V0, 2
lui   AT, hi(D_8011FB98)
addu  AT, AT, V0
lw    V0, lo(D_8011FB98)(AT)
beqz  V0, L80117784
       NOP
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
lui   S2, hi(D_8011FB98)
addiu S2, S2, lo(D_8011FB98)
li    AT, 0x3DA30000 ; 0.079590
ori   AT, AT, 0xd70a
mtc1  AT, F24
mtc1  R0, F22
L80117740:
lb    V0, 0xf(S1)
sll   V0, V0, 2
addu  V0, V0, S2
lw    A0, 0(V0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
sub.s F20, F20, F24
c.le.s F22, F20
      NOP
bc1t  L80117740
       NOP
L80117784:
jal   func_8011667C
 lb    A0, 0xf(S1)
lbu   V0, 0x17(S0)
andi  V0, V0, 0xaf
sb    V0, 0x17(S0)
li    A0, -1
jal   0x800FF900
 li    A1, 2
lb    A0, 0xf(S1)
jal   0x800DC128
       NOP
jal   SleepProcess
 li    A0, 15
L801177B8:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
ldc1  F24, 0x30(SP)
ldc1  F22, 0x28(SP)
ldc1  F20, 0x20(SP)
jr    RA
 addiu SP, SP, 0x38

D_801177DC:
addiu SP, SP, -0x68
sw    RA, 0x38(SP)
sw    S3, 0x34(SP)
sw    S2, 0x30(SP)
sw    S1, 0x2c(SP)
sw    S0, 0x28(SP)
sdc1  F28, 0x60(SP)
sdc1  F26, 0x58(SP)
sdc1  F24, 0x50(SP)
sdc1  F22, 0x48(SP)
sdc1  F20, 0x40(SP)
lui   S3, hi(CORE_800CD058)
addiu S3, S3, lo(CORE_800CD058)
lui   V1, hi(p1_char)
addiu V1, V1, lo(p1_char)
lbu   A2, 0(V1)
lbu   A3, 0x38(V1)
lbu   V0, 0x70(V1)
addiu V0, V0, 0x1c00
sw    V0, 0x10(SP)
lbu   V0, 0xa8(V1)
addiu V0, V0, 0x1c00
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x5C01
addiu A2, A2, 0x1c00
jal   0x800EC8EC ; ShowMessage: "Who's your opponent?"
 addiu A3, A3, 0x1c00
lui   A1, hi(D_8011FBB8)
lw    A1, lo(D_8011FBB8)(A1)
jal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE
 li    A0, 2
jal   0x800EC6C8
 move  S0, V0
jal   0x800EC6EC
       NOP
slti  V0, S0, 4
beqz  V0, L80117884
       NOP
bgez  S0, L80117890
 move  S2, S0
L80117884:
jal   0x800EF0D8
 move  A0, R0
move  S2, V0
L80117890:
sll   A0, S2, 0x10
jal   GetPlayerStruct
 sra   A0, A0, 0x10
move  S1, V0
lbu   V0, 0x17(S1)
ori   V0, V0, 0x80
sb    V0, 0x17(S1)
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F20
      NOP
mov.s F22, F20
li    AT, 0x3DCC0000 ; 0.099609
ori AT, AT, 0xcccd
mtc1  AT, F28
li    AT, 0x3D8F0000 ; 0.069824
ori AT, AT, 0x5c29
mtc1  AT, F26
mtc1  R0, F24
sub.s F20, F20, F28
L801178DC:
jal   0x800E4A7C
 add.s F22, F22, F26
lb    A0, 0xf(S3)
mfc1  A2, F20
mfc1  A3, F22
      NOP
jal   0x800F696C
 move  A1, V0
jal   SleepVProcess
       NOP
c.lt.s F24, F20
      NOP
      NOP
bc1tl L801178DC
 sub.s F20, F20, F28
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S3)
move  A1, V0
jal   0x800F68E0
 move  A2, R0
sll   V0, S2, 0x10
sra   V0, V0, 0x10
lb    V1, 0xf(S3)
beq   V0, V1, L801179A0
 sll   S0, S2, 0x10
move  A0, R0
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 16
jal   0x800F915C
 li    A0, 2
lw    A0, 0x24(S1)
jal   0x800F9174
 addiu A0, A0, 0xc
lw    A0, 0x24(S1)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepVProcess
 sll   S0, S2, 0x10
move  A0, R0
jal   InitFadeIn
 li    A1, 16
li    V0, 1
lui   AT, hi(CORE_800A12D8)
sw    V0, lo(CORE_800A12D8)(AT)
jal   SleepProcess
 li    A0, 16
L801179A0:
sra   S0, S0, 0x10
jal   func_8011667C
 move  A0, S0
lbu   V0, 0x17(S1)
andi  V0, V0, 0x99
ori   V0, V0, 4
sb    V0, 0x17(S1)
move  A0, S0
jal   0x800FF900
 li    A1, 3
move  A0, S0
jal   func_80116904
 li    A1, 1
mtc1  R0, F20
sll   V0, S2, 0x10
lui   V1, hi(D_8011FB98)
addiu V1, V1, lo(D_8011FB98)
sra   V0, V0, 0xe
addu  S0, V0, V1
li    AT, 0x3DA30000 ; 0.079590
ori   AT, AT, 0xd70a
mtc1  AT, F24
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
L80117A00:
lw    A0, 0(S0)
mfc1  A1, F20
mfc1  A2, F20
mfc1  A3, F20
      NOP
jal   0x80089A10
 addiu A0, A0, 0x24
jal   SleepVProcess
       NOP
add.s F20, F20, F24
c.le.s F20, F22
      NOP
      NOP
bc1t  L80117A00
 sll   V0, S2, 0x10
sra   S0, V0, 0x10
sll   V0, S0, 2
lui   A0, hi(D_8011FB98)
addu  A0, A0, V0
lw    A0, lo(D_8011FB98)(A0)
addiu A0, A0, 0x24
lui   A1, 0x3f80
move  A2, A1
jal   0x80089A10
 move  A3, A1
lb    V0, 0xf(S3)
bnel  S0, V0, L80117A88
 sll   A0, S2, 0x10
move  A0, S0
li    A1, 4
jal   0x800F2304
 li    A2, 2
j     L80117AA4
 sll   S0, S2, 0x10
L80117A88:
jal   GetPlayerStruct
 sra   A0, A0, 0x10
lw    A0, 0x24(V0)
li    A1, 4
jal   0x800D9CE8
 li    A2, 2
sll   S0, S2, 0x10
L80117AA4:
sra   S0, S0, 0x10
sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   A1, hi(p1_char)
addu  A1, A1, V0
lbu   A1, lo(p1_char)(A1)
jal   0x8004AC10
 li    A0, 646
move  A0, S0
li    A1, 1
jal   0x800FFA4C
 li    A2, 5
move  S1, V0
jal   func_80116A04
 move  A0, S0
lui   A0, hi(D_80116F0C)
addiu A0, A0, lo(D_80116F0C)
li    A1, 16386
move  A2, R0
jal   InitProcess
 move  A3, R0
sw    S1, 0x8c(V0)
jal   SleepProcess
 li    A0, 20
lbu   V0, 0xf(S3)
sll   V0, V0, 0x18
sb    S2, 0xf(S3)
sra   A0, V0, 0x18
bne   A0, S0, L80117B34
 sra   S1, V0, 0x18
jal   0x800DEB2C
       NOP
li    V1, 3
beq   V0, V1, L80117B4C
 li    A0, -1
L80117B34:
lui   V0, hi(CORE_800CD0AE)
lh    V0, lo(CORE_800CD0AE)(V0)
srav  V0, V0, S2
andi  V0, V0, 1
beqz  V0, L80117B54
 li    A0, -1
L80117B4C:
jal   0x800EC590
 li    A1, 14853
L80117B54:
li    A0, -1
jal   0x800EC590
 li    A1, 14850
sll   V1, S1, 0x18
sll   V0, S2, 0x10
sra   V0, V0, 0x10
sra   V1, V1, 0x18
bne   V0, V1, L80117B90
 sb    S1, 0xf(S3)
li    A0, -1
li    A1, -1
jal   0x800F2304
 li    A2, 2
j     L80117BB8
 sll   V0, S2, 0x10
L80117B90:
sll   A0, S2, 0x10
jal   GetPlayerStruct
 sra   A0, A0, 0x10
lw    A0, 0x24(V0)
li    A1, -1
jal   0x800D9CE8
 li    A2, 2
lui   AT, hi(CORE_800A12D8)
sw    R0, lo(CORE_800A12D8)(AT)
sll   V0, S2, 0x10
L80117BB8:
sra   V0, V0, 0x10
lb    V1, 0xf(S3)
beq   V0, V1, L80117C18
 sll   V0, S2, 0x10
move  A0, R0
jal   InitFadeOut
 li    A1, 16
jal   SleepProcess
 li    A0, 16
jal   0x800F915C
 li    A0, 1
jal   GetPlayerStruct
 li    A0, -1
lw    A0, 0x24(V0)
jal   0x800E9748
 addiu A0, A0, 0xc
jal   SleepVProcess
       NOP
move  A0, R0
jal   InitFadeIn
 li    A1, 16
jal   SleepProcess
 li    A0, 16
sll   V0, S2, 0x10
L80117C18:
sra   V0, V0, 0x10
lb    V1, 0xf(S3)
bne   V0, V1, L80117C30
       NOP
jal   __PP64_INTERNAL_REVERSAL_DICEROLL_EVENT
       NOP
L80117C30:
lw    RA, 0x38(SP)
lw    S3, 0x34(SP)
lw    S2, 0x30(SP)
lw    S1, 0x2c(SP)
lw    S0, 0x28(SP)
ldc1  F28, 0x60(SP)
ldc1  F26, 0x58(SP)
ldc1  F24, 0x50(SP)
ldc1  F22, 0x48(SP)
ldc1  F20, 0x40(SP)
jr    RA
 addiu SP, SP, 0x68

; Plunder chest?
D_80117C60:
addiu SP, SP, -0xb8
sw    RA, 0x8c(SP)
sw    S6, 0x88(SP)
sw    S5, 0x84(SP)
sw    S4, 0x80(SP)
sw    S3, 0x7c(SP)
sw    S2, 0x78(SP)
sw    S1, 0x74(SP)
sw    S0, 0x70(SP)
sdc1  F28, 0xb0(SP)
sdc1  F26, 0xa8(SP)
sdc1  F24, 0xa0(SP)
sdc1  F22, 0x98(SP)
sdc1  F20, 0x90(SP)
lui   S6, hi(CORE_800CD058)
addiu S6, S6, lo(CORE_800CD058)
jal   func_8010FE54
 move  S1, R0
li    A0, 33
jal   0x800D90C8
 move  A1, R0
move  S4, V0
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
move  A1, R0
move  A2, A1
jal   0x8001C1A0
 move  A3, A1
jal   GetPlayerStruct
 li    A0, -1
lw    A1, 0x24(V0)
addiu A0, S4, 0xc
jal   0x80089A20
 addiu A1, A1, 0xc
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 2
jal   0x8001C814
 li    A2, 1
li    AT, 0x42C80000 ; 100.000000
mtc1  AT, F0
      NOP
swc1  F0, 0x30(S4)
jal   PlaySound
 li    A0, 322
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F2
lwc1  F0, 0x30(S4)
c.lt.s F2, F0
      NOP
      NOP
bc1f  L80117D70
 mov.s F4, F0
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F22
li    AT, 0x41F00000 ; 30.000000
mtc1  AT, F20
sub.s F0, F4, F22
L80117D50:
jal   SleepVProcess
 swc1  F0, 0x30(S4)
lwc1  F4, 0x30(S4)
c.lt.s F20, F4
      NOP
      NOP
bc1tl L80117D50
 sub.s F0, F4, F22
L80117D70:
beqz  S1, L80117DF0
 move  S0, R0
li    AT, 0x40000000 ; 2.000000
mtc1  AT, F28
li    AT, 0x3F800000 ; 1.000000
mtc1  AT, F26
L80117D88:
mtc1  S0, F22
      NOP
cvt.s.w F22, F22
jal   0x8008EF20
 mov.s F12, F22
div.s F24, F0, F28
add.s F24, F24, F26
jal   0x8008EF20
 mov.s F12, F22
div.s F20, F0, F28
add.s F20, F20, F26
jal   0x8008EF20
 mov.s F12, F22
div.s F0, F0, F28
mfc1  A1, F24
mfc1  A2, F20
add.s F0, F0, F26
mfc1  A3, F0
      NOP
jal   0x80089A10
 addiu A0, S4, 0x24
jal   SleepVProcess
 addiu S0, S0, 0x1e
slti  V0, S0, 0x439
bnez  V0, L80117D88
       NOP
L80117DF0:
jal   PlaySound
 li    A0, 329
lw    V0, 0x3c(S4)
lw    V0, 0x40(V0)
lh    A0, 0(V0)
li    A1, 1
jal   0x8001C814
 move  A2, R0
jal   SleepProcess
 li    A0, 20
move  S0, R0
addiu S1, SP, 0x20
li    S3, 1
addiu S2, SP, 0x60
li    S5, 8
L80117E2C:
lui   V0, hi(current_player_index)
lb    V0, lo(current_player_index)(V0)
bne   V0, S0, L80117E50
 sll   V0, S0, 4
addu  V0, S1, V0
sb    S3, 0(V0)
addu  V0, S2, S0
j     L80117E60
 sb    R0, 0(V0)
L80117E50:
addu  V0, S1, V0
sb    S5, 0(V0)
addu  V0, S2, S0
sb    S3, 0(V0)
L80117E60:
sll   A1, S0, 4
addu  A1, S1, A1
move  A0, S0
jal   0x800E2260
 addiu A1, A1, 1
addiu S0, S0, 1
slti  V0, S0, 4
bnez  V0, L80117E2C
 li    V0, 1
sb    V0, 0x64(SP)
sb    V0, 0x65(SP)
addiu V0, SP, 0x40
sw    V0, 0x10(SP)
addiu V0, SP, 0x50
sw    V0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x5C01
addiu A2, SP, 0x20
jal   0x800EC8EC ; ShowMessage: "Who's your opponent?"
 addiu A3, SP, 0x30
addiu A0, SP, 0x60
jal   func_80113364
 move  A1, R0
jal   0x800EC6C8
 move  S1, V0
jal   0x800EC6EC
       NOP
li    V0, 4
bne   S1, V0, L80117EEC
 sll   V0, S1, 3
jal   0x800EF0D8
 li    A0, 1
move  S1, V0
sll   V0, S1, 3
L80117EEC:
subu  V0, V0, S1
sll   V0, V0, 3
lui   V1, hi(p1_item1)
addu  V1, V1, V0
lb    V1, lo(p1_item1)(V1)
li    V0, -1
bne   V1, V0, L80117FCC
 li    A0, -1
li    A1, 3
jal   0x800F2304
 move  A2, R0
lb    A1, 0xf(S6)
jal   0x8004ACE0
 li    A0, 646
jal   SleepProcess
 li    A0, 60
move  A0, S1
jal   0x800E2260
 addiu A1, SP, 0x20
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
li    A0, 14863
addiu A1, SP, 0x20
move  A2, R0
jal   0x800EC1E8
 move  A3, R0
lb    A0, 0xf(S6)
jal   0x800EC3C0
       NOP
jal   0x800EC3E4
       NOP
li    V0, 2
sw    V0, 0x10(SP)
li    A0, -1
li    A1, -1
move  A2, R0
jal   0x800F2388
 li    A3, 10
jal   0x800D9B54
 move  A0, S4
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S6)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
li    V0, -1
sb    V0, 0(V1)
jal   FixUpPlayerItemSlots
 lb    A0, 0xf(S6)
j     L801182CC
       NOP
L80117FCC:
jal   PlayerHasEmptyItemSlot
 move  A0, S1
move  S0, V0
li    V0, -1
beql  S0, V0, L80117FE4
 li    S0, 3
L80117FE4:
mtc1  S0, F12
      NOP
jal   0x800EEF80
 cvt.s.w F12, F12
jal   0x800E4A7C
 move  S0, V0
lb    A0, 0xf(S6)
sll   V1, A0, 3
subu  V1, V1, A0
sll   V1, V1, 3
lui   A0, hi(p1_item1)
addiu A0, A0, lo(p1_item1)
addu  V1, V1, A0
addu  V1, V1, V0
sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
addu  V0, V0, A0
addu  V0, V0, S0
lbu   A0, 0(V0)
sb    A0, 0(V1)
li    V1, -1
sb    V1, 0(V0)
jal   FixUpPlayerItemSlots
 move  A0, S1
sll   A0, S1, 0x10
sra   A0, A0, 0x10
jal   0x800FF900
 li    A1, 3
jal   0x800E4A7C
       NOP
bne   V0, S0, L80118080
       NOP
jal   0x800E4A7C
       NOP
move  A0, S1
move  A1, V0
jal   0x800F68E0
 move  A2, R0
L80118080:
jal   0x800F641C
 li    A0, -1
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S6)
sll   V1, A0, 3
lui   AT, hi(D_8011E3B4)
addu  AT, AT, V1
lwc1  F0, lo(D_8011E3B4)(AT)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E3B8)
addu  AT, AT, V1
lwc1  F0, lo(D_8011E3B8)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
move  A1, V0
sra   A2, A2, 0x10
jal   0x800F688C
 sra   A3, A3, 0x10
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S6)
move  A1, V0
jal   0x800F68E0
 li    A2, 256
move  A0, S1
move  A1, S0
jal   0x800F68E0
 move  A2, R0
jal   0x800E4A7C
       NOP
lb    A0, 0xf(S6)
move  A1, V0
jal   0x800F69B0
 li    A2, 18310
jal   0x8004EE68
       NOP
move  S0, V0
lb    V0, 0xf(S6)
sll   V0, V0, 3
lui   AT, hi(D_8011E3B4)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E3B4)(AT)
trunc.w.s F2, F0
mfc1  A1, F2
      NOP
sll   A1, A1, 0x10
lui   AT, hi(D_8011E3B8)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E3B8)(AT)
trunc.w.s F2, F0
mfc1  A2, F2
      NOP
sll   A2, A2, 0x10
lui   AT, hi(D_8011E394)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E394)(AT)
trunc.w.s F2, F0
mfc1  A3, F2
      NOP
sll   A3, A3, 0x10
lui   AT, hi(D_8011E398)
addu  AT, AT, V0
lwc1  F0, lo(D_8011E398)(AT)
trunc.w.s F2, F0
mfc1  V0, F2
      NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
sw    V0, 0x10(SP)
li    V0, 5
sw    V0, 0x14(SP)
li    A0, -1
sra   A1, A1, 0x10
sra   A2, A2, 0x10
jal   func_8010FB54
 sra   A3, A3, 0x10
move  A0, S0
jal   0x8004ED30
 move  A1, V0
jal   0x8004EE18
 li    S0, 6
lb    A1, 0xf(S6)
jal   0x8004ACE0
 li    A0, 628
lb    A0, 0xf(S6)
li    A1, 5
jal   0x800DA09C
 li    A2, 49
li    A0, -1
li    A1, 5
jal   0x800F2304
 move  A2, R0
jal   SleepProcess
 li    A0, 50
lb    A0, 0xf(S6)
li    V0, 2
sw    V0, 0x10(SP)
li    A1, -1
move  A2, R0
jal   0x800F2388
 li    A3, 10
jal   SleepProcess
 li    A0, 11
lui   V0, hi(CORE_80101734)
lw    V0, lo(CORE_80101734)(V0)
L8011823C:
addiu S0, S0, -1
bnez  S0, L8011823C
 addiu V0, V0, 4
lb    A0, 0xf(S6)
lhu   A2, 2(V0)
jal   0x800DA09C
 li    A1, 5
jal   0x800D9B54
 move  A0, S4
sll   V0, S1, 3
subu  V0, V0, S1
sll   V0, V0, 3
lui   A2, hi(p1_char)
addu  A2, A2, V0
lbu   A2, lo(p1_char)(A2)
lb    V1, 0xf(S6)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   A3, hi(p1_char)
addu  A3, A3, V0
lbu   A3, lo(p1_char)(A3)
sw    R0, 0x10(SP)
sw    R0, 0x14(SP)
sw    R0, 0x18(SP)
li    A0, -1
li    A1, 0x3A0D
addiu A2, A2, 0x1c00
jal   0x800EC8EC ; ShowMessage: "_s item now belongs to _"
 addiu A3, A3, 0x1c00
jal   0x800EC6C8
       NOP
jal   0x800EC6EC
       NOP
jal   func_80110024
       NOP
L801182CC:
lw    RA, 0x8c(SP)
lw    S6, 0x88(SP)
lw    S5, 0x84(SP)
lw    S4, 0x80(SP)
lw    S3, 0x7c(SP)
lw    S2, 0x78(SP)
lw    S1, 0x74(SP)
lw    S0, 0x70(SP)
ldc1  F28, 0xb0(SP)
ldc1  F26, 0xa8(SP)
ldc1  F24, 0xa0(SP)
ldc1  F22, 0x98(SP)
ldc1  F20, 0x90(SP)
jr    RA
 addiu SP, SP, 0xb8

; Shared happening space event.
; Needs to exist and end the process, so that duels on happenings work.
shared_happening_event:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
jal   EndProcess
move  A0, R0
jr    RA
addiu SP, SP, 0x18

overlaycall4:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
jal   InitCameras
 li    A0, 2
lui   A1, hi(data_screen_dimensions)
addiu A1, A1, lo(data_screen_dimensions)
jal   0x800124BC
 li    A0, 1
jal   setup_routine
       NOP
jal   0x800FF41C
 li    A0, 2
lui   A0, hi(${h})
addiu A0, A0, lo(${h})
li    A1, 4101
li    A2, 4096
jal   InitProcess
 move  A3, R0
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

func_8011C5E0:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
sw    S0, 0x10(SP)
move  S0, R0
jal   GetCurrentPlayerIndex
 li    S1, 99
sll   V0, V0, 0x10
sra   S2, V0, 0x10
L8011C608:
jal   GetCurrentPlayerIndex
       NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
beql  S0, V0, L8011C668
 addiu S0, S0, 1
jal   0x800DA778
 move  A0, S0
lui   A0, hi(D_8011F0E4)
jal   0x800DA190
 addiu A0, A0, lo(D_8011F0E4)
sll   V0, V0, 0x10
bnezl V0, L8011C668
 addiu S0, S0, 1
jal   0x800EE9C0
 move  A0, S0
slt   V0, V0, S1
beql  V0, R0, L8011C668
 addiu S0, S0, 1
jal   0x800EE9C0
 move  A0, S0
move  S1, V0
move  S2, S0
addiu S0, S0, 1
L8011C668:
slti  V0, S0, 4
bnez  V0, L8011C608
 move  V0, S2
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_8011C68C:
addiu SP, SP, -0x20
sw    RA, 0x1c(SP)
sw    S2, 0x18(SP)
sw    S1, 0x14(SP)
jal   GetCurrentPlayerIndex
 sw    S0, 0x10(SP)
sll   V0, V0, 0x10
lui   A0, hi(D_8011F2F4)
addiu A0, A0, lo(D_8011F2F4)
jal   0x800DA190
 sra   S2, V0, 0x10
sll   V0, V0, 0x10
beqz  V0, L8011C738
 move  V0, S2
move  S0, R0
li    S1, 99
L8011C6CC:
jal   GetCurrentPlayerIndex
       NOP
sll   V0, V0, 0x10
sra   V0, V0, 0x10
beql  S0, V0, L8011C72C
 addiu S0, S0, 1
jal   0x800DA778
 move  A0, S0
lui   A0, hi(D_8011F600)
jal   0x800DA190
 addiu A0, A0, lo(D_8011F600)
sll   V0, V0, 0x10
bnezl V0, L8011C72C
 addiu S0, S0, 1
jal   0x800EE9C0
 move  A0, S0
slt   V0, V0, S1
beql  V0, R0, L8011C72C
 addiu S0, S0, 1
jal   0x800EE9C0
 move  A0, S0
move  S1, V0
move  S2, S0
addiu S0, S0, 1
L8011C72C:
slti  V0, S0, 4
bnez  V0, L8011C6CC
 move  V0, S2
L8011C738:
lw    RA, 0x1c(SP)
lw    S2, 0x18(SP)
lw    S1, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x20

func_8011C750:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
lui   S0, hi(total_turns)
lb    S0, lo(total_turns)(S0)
lui   V0, hi(current_turn)
lb    V0, lo(current_turn)(V0)
subu  S0, S0, V0
addiu S0, S0, 1
jal   PlayerHasEmptyItemSlot
 li    A0, -1
move  V1, V0
li    V0, -1
beql  V1, V0, L8011C78C
 li    V1, 3
L8011C78C:
slt   V0, V1, S0
xori  V0, V0, 1
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

func_8011C7A4:
addiu SP, SP, -0x18
sw    RA, 0x14(SP)
sw    S0, 0x10(SP)
move  T2, A0
li    S0, 1
move  A2, R0
lui   T0, hi(current_player_index)
lb    T0, lo(current_player_index)(T0)
lui   T1, hi(p1_item1)
addiu T1, T1, lo(p1_item1)
L8011C7CC:
beq   A2, T0, L8011C824
 move  A0, R0
sll   V0, A2, 3
subu  V0, V0, A2
sll   V0, V0, 3
addu  A3, V0, T1
addu  V0, A3, A0
L8011C7E8:
lb    V0, 0(V0)
xori  V1, V0, 6
sltiu V1, V1, 1
xori  V0, V0, 0x10
sltiu V0, V0, 1
or    V1, V1, V0
bnez  V1, L8011C81C
 slti  V0, A0, 3
addiu A0, A0, 1
slti  V0, A0, 3
bnez  V0, L8011C7E8
 addu  V0, A3, A0
slti  V0, A0, 3
L8011C81C:
bnez  V0, L8011C834
 slti  V0, A2, 4
L8011C824:
addiu A2, A2, 1
slti  V0, A2, 4
bnez  V0, L8011C7CC
       NOP
L8011C834:
beqz  V0, L8011C878
 sll   V0, A2, 3
subu  V0, V0, A2
sll   V0, V0, 3
lui   A0, hi(p1_cpu_difficulty)
addu  A0, A0, V0
lbu   A0, lo(p1_cpu_difficulty)(A0)
mult  A1, A0
mflo  A0
addu  A0, T2, A0
sll   A0, A0, 0x18
jal   RNGPercentChance
 sra   A0, A0, 0x18
sll   V0, V0, 0x10
sltiu V0, V0, 1
subu  V0, R0, V0
and   S0, V0, S0
L8011C878:
move  V0, S0
lw    RA, 0x14(SP)
lw    S0, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

D_8011C88C:
addiu SP, SP, -0x48
sw    RA, 0x40(SP)
sw    S7, 0x3c(SP)
sw    S6, 0x38(SP)
sw    S5, 0x34(SP)
sw    S4, 0x30(SP)
sw    S3, 0x2c(SP)
sw    S2, 0x28(SP)
sw    S1, 0x24(SP)
jal   GetCurrentPlayerIndex
 sw    S0, 0x20(SP)
sll   V0, V0, 0x10
sra   S0, V0, 0x10
lui   S2, hi(CORE_800CD058)
addiu S2, S2, lo(CORE_800CD058)
lhu   V0, 0x50(S2)
andi  V0, V0, 1
bnez  V0, L8011CE68
 li    V0, -1
move  S1, R0
li    S3, -1
sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   S4, hi(p1_item1)
addiu S4, S4, lo(p1_item1)
addu  S6, V0, S4
sll   S7, S0, 3
subu  S7, S7, S0
lui   S5, hi(CORE_80100FA8)
addiu S5, S5, lo(CORE_80100FA8)
sll   V0, S1, 2
L8011C90C:
addiu V1, SP, 0x10
addu  V0, V0, V1
sw    S3, 0(V0)
addu  V0, S6, S1
lb    A2, 0(V0)
addiu V1, A2, 1
sltiu V0, V1, 0x14
beqz  V0, L8011CDA0
 sll   V0, V1, 2
lui   AT, hi(D_8011FA20_jump_table)
addu  AT, AT, V0
lw    V0, lo(D_8011FA20_jump_table)(AT)
jr    V0
       NOP
L8011C944:
move  A0, R0
move  V1, R0
addu  V0, S6, A0
L8011C950:
lb    V0, 0(V0)
xor   V0, V0, A2
sltiu V0, V0, 1
addu  V1, V1, V0
addiu A0, A0, 1
slti  V0, A0, 3
bnez  V0, L8011C950
 addu  V0, S6, A0
j     L8011CD98
 slti  V0, V1, 2
L8011C978:
lb    V1, 2(S2)
lb    V0, 3(S2)
bne   V1, V0, L8011C998
       NOP
jal   0x800EEA58
 lb    A0, 0xf(S2)
bnez  V0, L8011CDA4
 sll   V1, S1, 2
L8011C998:
lb    V0, 2(S2)
lb    V1, 3(S2)
subu  V0, V0, V1
slti  V0, V0, 6
bnezl V0, L8011CDCC
 addiu S1, S1, 1
lb    A0, 0xf(S2)
jal   0x800EEA58
       NOP
beqz  V0, L8011CDA4
 sll   V1, S1, 2
j     L8011CDCC
 addiu S1, S1, 1
L8011C9CC:
jal   func_8011C750
       NOP
bnez  V0, L8011CDA4
 sll   V1, S1, 2
j     L8011CBAC
 li    A0, 80
L8011C9E4:
sll   V0, S7, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
beqz  V0, L8011CDA0
 move  A0, R0
L8011C9FC:
beq   A0, S0, L8011CA20
 sll   V0, A0, 3
subu  V0, V0, A0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
beqz  V0, L8011CA30
 slti  V0, A0, 4
L8011CA20:
addiu A0, A0, 1
slti  V0, A0, 4
bnez  V0, L8011C9FC
       NOP
L8011CA30:
beqz  V0, L8011CDA4
 sll   V1, S1, 2
jal   RNGPercentChance
 li    A0, 70
j     L8011CD64
 sll   V0, V0, 0x10
L8011CA48:
jal   func_8011C750
       NOP
bnez  V0, L8011CDA4
 sll   V1, S1, 2
lui   A0, hi(D_8011EB98)
j     L8011CD8C
 addiu A0, A0, lo(D_8011EB98)
L8011CA64:
jal   func_8011C750
       NOP
bnez  V0, L8011CDA4
 sll   V1, S1, 2
lui   A0, hi(D_8011EBEC)
j     L8011CD8C
 addiu A0, A0, lo(D_8011EBEC)
L8011CA80:
lui   A0, hi(D_8011EE38)
j     L8011CD8C
 addiu A0, A0, lo(D_8011EE38)
L8011CA8C:
lui   A0, hi(D_8011F18C)
jal   0x800DA190
 addiu A0, A0, lo(D_8011F18C)
sll   V0, V0, 0x10
bnezl V0, L8011CDCC
 addiu S1, S1, 1
jal   func_8011C5E0
       NOP
lui   AT, hi(D_8011FBBC)
sw    V0, lo(D_8011FBBC)(AT)
lui   V1, hi(CORE_800CD0AE)
lh    V1, lo(CORE_800CD0AE)(V1)
srav  V1, V1, V0
andi  V1, V1, 1
bnezl V1, L8011CDCC
 addiu S1, S1, 1
j     L8011CDA4
 sll   V1, S1, 2
L8011CAD4:
lui   A0, hi(D_8011F4EC)
jal   0x800DA190
 addiu A0, A0, lo(D_8011F4EC)
sll   V0, V0, 0x10
bnezl V0, L8011CDCC
 addiu S1, S1, 1
jal   func_8011C68C
       NOP
lui   AT, hi(D_8011FBB8)
sw    V0, lo(D_8011FBB8)(AT)
sll   V1, V0, 3
subu  V1, V1, V0
sll   V1, V1, 3
lui   V0, hi(p1_status_flags)
addu  V0, V0, V1
lbu   V0, lo(p1_status_flags)(V0)
j     L8011CD98
 andi  V0, V0, 0x80
L8011CB1C:
move  A0, R0
move  A2, R0
lui   AT, hi(D_8011FB74)
sw    S3, lo(D_8011FB74)(AT)
L8011CB2C:
beq   A0, S0, L8011CB84
 sll   V0, A0, 3
move  A1, R0
subu  V0, V0, A0
sll   V0, V0, 3
addu  A3, V0, S4
addu  V0, A3, A1
L8011CB48:
lb    V0, 0(V0)
beq   V0, S3, L8011CB74
 sll   V0, V0, 2
addu  V0, V0, S5
lw    V1, 0(V0)
slt   V0, A2, V1
beql  V0, R0, L8011CB78
 addiu A1, A1, 1
move  A2, V1
lui   AT, hi(D_8011FB74)
sw    A0, lo(D_8011FB74)(AT)
L8011CB74:
addiu A1, A1, 1
L8011CB78:
slti  V0, A1, 3
bnez  V0, L8011CB48
 addu  V0, A3, A1
L8011CB84:
addiu A0, A0, 1
slti  V0, A0, 4
bnez  V0, L8011CB2C
       NOP
lui   V0, hi(D_8011FB74)
lw    V0, lo(D_8011FB74)(V0)
beq   V0, S3, L8011CDC8
 slti  V0, A2, 4
beqz  V0, L8011CDA0
 li    A0, 5
L8011CBAC:
jal   RNGPercentChance
       NOP
sll   V0, V0, 0x10
beql  V0, R0, L8011CDCC
 addiu S1, S1, 1
j     L8011CDA4
 sll   V1, S1, 2
L8011CBC8:
move  A0, R0
move  A2, R0
L8011CBD0:
beql  A0, S1, L8011CC0C
 addiu A0, A0, 1
lb    V1, 0xf(S2)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
addu  V0, V0, S4
addu  V0, V0, A0
lb    V0, 0(V0)
beq   V0, S3, L8011CC08
 sll   V0, V0, 2
addu  V0, V0, S5
lw    V0, 0(V0)
addu  A2, A2, V0
L8011CC08:
addiu A0, A0, 1
L8011CC0C:
slti  V0, A0, 3
bnez  V0, L8011CBD0
       NOP
move  A0, R0
lui   AT, hi(D_8011FB70)
sw    S3, lo(D_8011FB70)(AT)
L8011CC24:
beq   A0, S0, L8011CC84
 move  V1, R0
move  A1, R0
sll   V0, A0, 3
subu  V0, V0, A0
sll   V0, V0, 3
addu  A3, V0, S4
addu  V0, A3, A1
L8011CC44:
lb    V0, 0(V0)
beq   V0, S3, L8011CC5C
 sll   V0, V0, 2
addu  V0, V0, S5
lw    V0, 0(V0)
addu  V1, V1, V0
L8011CC5C:
addiu A1, A1, 1
slti  V0, A1, 3
bnez  V0, L8011CC44
 addu  V0, A3, A1
slt   V0, A2, V1
beql  V0, R0, L8011CC88
 addiu A0, A0, 1
lui   AT, hi(D_8011FB70)
sw    A0, lo(D_8011FB70)(AT)
move  A2, V1
L8011CC84:
addiu A0, A0, 1
L8011CC88:
slti  V0, A0, 4
bnez  V0, L8011CC24
       NOP
lui   V0, hi(D_8011FB70)
lw    V0, lo(D_8011FB70)(V0)
beql  V0, S3, L8011CDCC
 addiu S1, S1, 1
j     L8011CDA4
 sll   V1, S1, 2
L8011CCAC:
li    A0, 50
jal   func_8011C7A4
 li    A1, 10
beqz  V0, L8011CDA0
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
j     L8011CD98
 slti  V0, V0, 5
L8011CCDC:
lb    V1, 2(S2)
lb    V0, 3(S2)
beq   V1, V0, L8011CDC8
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
j     L8011CD98
 slti  V0, V0, 5
L8011CD08:
li    A0, 60
jal   func_8011C7A4
 li    A1, 10
beqz  V0, L8011CDA0
 sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slti  V0, V0, 0x14
bnezl V0, L8011CDCC
 addiu S1, S1, 1
lui   A0, hi(D_8011EFA0)
j     L8011CD8C
 addiu A0, A0, lo(D_8011EFA0)
L8011CD48:
sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slti  V0, V0, 0xa
L8011CD64:
beqz  V0, L8011CDA4
 sll   V1, S1, 2
jal   func_8011C750
       NOP
beql  V0, R0, L8011CDCC
 addiu S1, S1, 1
j     L8011CDA4
 sll   V1, S1, 2
L8011CD84:
lui   A0, hi(D_8011F66C)
addiu A0, A0, lo(D_8011F66C)
L8011CD8C:
jal   0x800DA190
       NOP
sll   V0, V0, 0x10
L8011CD98:
bnezl V0, L8011CDCC
 addiu S1, S1, 1
L8011CDA0:
sll   V1, S1, 2
L8011CDA4:
addiu V0, SP, 0x10
addu  V1, V1, V0
sll   V0, S0, 3
subu  V0, V0, S0
sll   V0, V0, 3
addu  V0, V0, S4
addu  V0, V0, S1
lb    V0, 0(V0)
sw    V0, 0(V1)
L8011CDC8:
addiu S1, S1, 1
L8011CDCC:
slti  V0, S1, 3
bnez  V0, L8011C90C
 sll   V0, S1, 2
move  S1, R0
move  A0, R0
move  A1, R0
addiu A3, SP, 0x10
li    T2, -1
li    T1, 18
lui   T0, hi(CORE_80100FF4)
addiu T0, T0, lo(CORE_80100FF4)
sll   V0, A1, 2
L8011CDFC:
addu  V0, V0, A3
lw    A2, 0(V0)
beql  A2, T2, L8011CE50
 addiu A1, A1, 1
lb    V1, 2(S2)
lb    V0, 3(S2)
bne   V1, V0, L8011CE24
 sll   V0, A1, 2
beql  A2, T1, L8011CE68
 move  V0, A1
L8011CE24:
addu  V0, V0, A3
lw    V0, 0(V0)
sll   V0, V0, 2
addu  V0, V0, T0
lw    V1, 0(V0)
slt   V0, S1, V1
beql  V0, R0, L8011CE50
 addiu A1, A1, 1
move  A0, A1
move  S1, V1
addiu A1, A1, 1
L8011CE50:
slti  V0, A1, 3
bnezl V0, L8011CDFC
 sll   V0, A1, 2
beqz  S1, L8011CE68
 li    V0, -1
move  V0, A0
L8011CE68:
lw    RA, 0x40(SP)
lw    S7, 0x3c(SP)
lw    S6, 0x38(SP)
lw    S5, 0x34(SP)
lw    S4, 0x30(SP)
lw    S3, 0x2c(SP)
lw    S2, 0x28(SP)
lw    S1, 0x24(SP)
lw    S0, 0x20(SP)
jr    RA
 addiu SP, SP, 0x48

func_8011CE94:
addiu SP, SP, -0x40
sw    RA, 0x3c(SP)
sw    FP, 0x38(SP)
sw    S7, 0x34(SP)
sw    S6, 0x30(SP)
sw    S5, 0x2c(SP)
sw    S4, 0x28(SP)
sw    S3, 0x24(SP)
sw    S2, 0x20(SP)
sw    S1, 0x1c(SP)
sw    S0, 0x18(SP)
lui   S4, hi(CORE_800CD058)
addiu S4, S4, lo(CORE_800CD058)
jal   GetPlayerStruct
 li    A0, -1
move  S3, V0
li    A2, 1
sw    A2, 0x14(SP)
move  S1, R0
lui   S7, hi(D_8011F7E0)
addiu S7, S7, lo(D_8011F7E0)
li    S6, -1
lui   S5, hi(D_8011F880)
addiu S5, S5, lo(D_8011F880)
L8011CEF4:
lbu   V0, 3(S3)
sll   V0, V0, 2
addu  V0, V0, S7
lw    V0, 0(V0)
addu  V0, V0, S1
lbu   S0, 0(V0)
jal   func_8010B394
 move  A0, S0
move  S2, V0
beql  S2, S6, L8011CF84
 addiu S1, S1, 1
lui   A0, hi(CORE_80100F94)
addu  A0, A0, S0
lbu   A0, lo(CORE_80100F94)(A0)
addiu A0, A0, 0x14
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slt   V0, V0, A0
bnezl V0, L8011CF84
 addiu S1, S1, 1
lbu   V0, 3(S3)
sll   V0, V0, 2
addu  V0, V0, S5
lw    V0, 0(V0)
addu  V0, V0, S1
jal   RNGPercentChance
 lb    A0, 0(V0)
sll   V0, V0, 0x10
bnez  V0, L8011CF90
 li    V0, 16
addiu S1, S1, 1
L8011CF84:
slti  V0, S1, 0x10
bnez  V0, L8011CEF4
 li    V0, 16
L8011CF90:
beql  S1, V0, L8011CF98
 li    S2, -1
L8011CF98:
li    V0, -1
beq   S2, V0, L8011D028
       NOP
jal   func_8010B394
 li    A0, 14
beq   V0, S2, L8011D1C8
 addiu V0, S2, 1
jal   func_8010B394
 li    A0, 11
bne   V0, S2, L8011CFF8
       NOP
lui   A0, hi(CORE_80100F9F)
lbu   A0, lo(CORE_80100F9F)(A0)
addiu A0, A0, 0x32
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slt   V0, V0, A0
beqz  V0, L8011D1C8
 addiu V0, S2, 1
L8011CFF8:
jal   func_8010B394
 li    A0, 4
bne   V0, S2, L8011D028
       NOP
lb    A0, 0xf(S4)
jal   PlayerHasItem
 li    A1, ITEM_CELLULAR_SHOPPER
li    V1, -1
beq   V0, V1, L8011D028
       NOP
li    S2, -1
sw    R0, 0x14(SP)
L8011D028:
lui   V0, hi(D_8011E1D8)
lw    V0, lo(D_8011E1D8)(V0)
sll   V0, V0, 2
lui   A0, hi(D_8011F8A0)
addu  A0, A0, V0
jal   0x800DA190
 lw    A0, lo(D_8011F8A0)(A0)
sll   V0, V0, 0x10
bnez  V0, L8011D09C
 li    V0, -1
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
lui   V1, hi(CORE_80100F95)
lbu   V1, lo(CORE_80100F95)(V1)
slt   V0, V0, V1
bnez  V0, L8011D09C
 li    V0, -1
jal   func_8010B394
 li    A0, 1
move  V1, V0
li    V0, -1
bne   V1, V0, L8011D1C8
 addiu V0, V1, 1
li    V0, -1
L8011D09C:
bne   S2, V0, L8011D1C8
 addiu V0, S2, 1
lui   V0, hi(D_8011E1D8)
lw    V0, lo(D_8011E1D8)(V0)
sll   V0, V0, 2
lui   A0, hi(D_8011F8A8)
addu  A0, A0, V0
jal   0x800DA190
 lw    A0, lo(D_8011F8A8)(A0)
sll   V0, V0, 0x10
sra   S1, V0, 0x10
bnez  S1, L8011D194
       NOP
lui   FP, hi(D_8011F7E0)
addiu FP, FP, lo(D_8011F7E0)
lw    A2, 0x14(SP)
sltiu S5, A2, 1
li    S7, -1
lui   S6, hi(D_8011F880)
addiu S6, S6, lo(D_8011F880)
L8011D0EC:
lbu   V0, 3(S3)
sll   V0, V0, 2
addu  V0, V0, FP
lw    V0, 0(V0)
addu  V0, V0, S1
lbu   S0, 0(V0)
xori  V0, S0, 4
sltiu V0, V0, 1
and   V0, V0, S5
bnezl V0, L8011D188
 addiu S1, S1, 1
jal   func_8010B394
 move  A0, S0
move  S2, V0
beql  S2, S7, L8011D188
 addiu S1, S1, 1
lui   A0, hi(CORE_80100F94)
addu  A0, A0, S0
lbu   A0, lo(CORE_80100F94)(A0)
lb    V1, 0xf(S4)
sll   V0, V1, 3
subu  V0, V0, V1
sll   V0, V0, 3
lui   AT, hi(p1_coins)
addu  AT, AT, V0
lh    V0, lo(p1_coins)(AT)
slt   V0, V0, A0
bnezl V0, L8011D188
 addiu S1, S1, 1
lbu   V0, 3(S3)
sll   V0, V0, 2
addu  V0, V0, S6
lw    V0, 0(V0)
addu  V0, V0, S1
jal   RNGPercentChance
 lb    A0, 0(V0)
sll   V0, V0, 0x10
bnez  V0, L8011D1C4
 addiu S1, S1, 1
L8011D188:
slti  V0, S1, 0x10
bnez  V0, L8011D0EC
       NOP
L8011D194:
jal   func_8010B394
 move  A0, R0
move  S2, V0
li    V0, -1
bnel  S2, V0, L8011D1C8
 addiu V0, S2, 1
li    V0, 1
lui   AT, hi(D_8011F75C)
jal   func_8010B41C
 sw    V0, lo(D_8011F75C)(AT)
j     L8011D1C8
 addiu V0, V0, 2
L8011D1C4:
addiu V0, S2, 1
L8011D1C8:
lw    RA, 0x3c(SP)
lw    FP, 0x38(SP)
lw    S7, 0x34(SP)
lw    S6, 0x30(SP)
lw    S5, 0x2c(SP)
lw    S4, 0x28(SP)
lw    S3, 0x24(SP)
lw    S2, 0x20(SP)
lw    S1, 0x1c(SP)
lw    S0, 0x18(SP)
jr    RA
 addiu SP, SP, 0x40

func_8011D1F8:
addiu SP, SP, -0x18
sw    RA, 0x10(SP)
lui   V0, hi(D_8011F75C)
lw    V0, lo(D_8011F75C)(V0)
bnezl V0, L8011D23C
 li    V0, 2
lui   V0, hi(D_8011E1D8)
lw    V0, lo(D_8011E1D8)(V0)
sll   V0, V0, 2
lui   A0, hi(D_8011F8B0)
addu  A0, A0, V0
jal   0x800DA190
 lw    A0, lo(D_8011F8B0)(A0)
sll   V0, V0, 0x10
sra   V0, V0, 0x10
j     L8011D244
 addiu V0, V0, 1
L8011D23C:
lui   AT, hi(D_8011F75C)
sw    R0, lo(D_8011F75C)(AT)
L8011D244:
lw    RA, 0x10(SP)
jr    RA
 addiu SP, SP, 0x18

.align 16

; 8011D250
rodata:
overlaycalls:
.word 0x00000000, overlaycall0
.word 0x00010000, overlaycall1
.word 0x00020000, overlaycall2
.word 0x00030000, overlaycall3
.word 0x00040000, overlaycall4
.word 0xFFFF0000, 0x00000000

.align 4
shuffle_order:
.halfword ${f.order.join(",")}

.align 4
shuffle_bias:
.halfword ${f.bias.join(",")}

.align 4
D_8011D2A0:
.halfword 0x6 0x7 0x8 0x9 0xA 0xB 0xC 0xD

.align 4
star_space_indices:
.halfword ${d.join(",")||0}

.align 4
; toad spaces
D_8011D2C0:
.halfword ${g.join(",")||0}

.align 4
; dir/file of various tumble face textures
D_8011D2D0:
tumble_face_tex_grin:
.halfword 0xA 0x7E
tumble_face_tex_frown:
.halfword 0xA 0x7F
tumble_face_tex_sad:
.halfword 0xA 0x80
tumble_face_tex_smile:
.halfword 0xA 0x81
tumble_face_tex_despair:
.halfword 0xA 0x82
tumble_face_tex_gasp:
.halfword 0xA 0x83
tumble_face_tex_beaming:
.halfword 0xA 0x84

D_8011D2EC:
.word 0x00005E02
.word 0x00005E03
.word 0x00005E04
.word 0x00005E05
.word 0x00005E06
.word 0x00005E07
.word 0x00005E08

; used in star celebration?
D_8011D308:
.word 0x00000000

D_8011D30C:
.word 0x00000000

D_8011D310:
.word 0xBF800000

D_8011D314:
.word 0x00000000

D_8011D318:
.word 0x00000000

; passed as addr, may be u16
; is this the array of hidden block banned spaces?
D_8011D31C:
.word 0xFFFF0000

.align 4
; star spaces 2
D_8011D320:
.halfword ${d.join(",")} 0xFFFF

.align 4
; interleaving array?
D_8011D334: .halfword 0x7
D_8011D336: .halfword 0xFFFF
.halfword 0x0001 0xFFFA
.halfword 0x0001 0xFFF9
.halfword 0x0001 0xFFF9
.halfword 0xFFFB 0xFFFB
.halfword 0x0002 0xFFF9
.halfword 0x0001 0xFFF9
.halfword 0xFFFC 0xFFF7

; boo
D_8011D354: .halfword 2
D_8011D356: .halfword 0
D_8011D358: .halfword 2
.align 4

; used with bank, interleaving arrays?
D_8011D35C: .halfword 0x0001
D_8011D35E: .halfword 0xFFFE
.halfword 0x0000 0xFFFC

D_8011D364: .halfword 0x0001
D_8011D366: .halfword 0xFFFC
.halfword 0x0005 0x0000

D_8011D36C: .halfword 0x0000
D_8011D36E: .halfword 0x0000
.halfword 0x00000 0xFFFD

; gate neighbors
gate_entrance_spaces:
.halfword ${R[0].gateEntryIndex}
gate_exit_spaces:
.halfword ${R[0].gateExitIndex}
.halfword ${R[1].gateEntryIndex}
.halfword ${R[1].gateExitIndex}

.align 4
; toad spaces 2
D_8011D37C:
.halfword ${g.join(",")||0}

.align 4
D_8011D38C:
.halfword 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D

.align 4
boo_space_indices:
.halfword ${s}

.align 4
bank_coin_space_indices:
.halfword ${x.join(",")}

.align 4
; bank coin coordinates?
D_8011D3A4: .word 0xC0400000
D_8011D3A8: .word 0x00000000
D_8011D3AC: .word 0xC0000000
D_8011D3B0: .word 0x00000000
D_8011D3B4: .word 0x40000000
D_8011D3B8: .word 0x40000000
D_8011D3BC: .word 0x3F800000
D_8011D3C0: .word 0x40B00000
D_8011D3C4: .word 0xC0400000
D_8011D3C8: .word 0x40600000
D_8011D3CC: .word 0x41000000
D_8011D3D0: .word 0x40800000
D_8011D3D4: .word 0xBF800000
D_8011D3D8: .word 0x41400000
D_8011D3DC: .word 0x41300000

D_8011D3E0: .word 0x00000000
D_8011D3E4: .word 0x00000000

D_8011D3E8: .word 0x00000000
D_8011D3EC: .word 0x00000000
D_8011D3F0: .word 0x00000000
D_8011D3F4: .word 0x00000000
D_8011D3F8: .word 0xC1700000
D_8011D3FC: .word 0x00000000
D_8011D400: .word 0x00000000
D_8011D404: .word 0x41A00000
D_8011D408: .word 0x00000000
D_8011D40C: .word 0xC1F00000
D_8011D410: .word 0x42340000
D_8011D414: .word 0x00000000
D_8011D418: .word 0x42340000

.align 4
gate_spaces:
.halfword ${R.map(U=>U.gateSpaceIndex).join(",")}

.align 16
; indices into a list of main fs models
; for the gate graphics. Don't change.
D_8011D420: .byte 0x00
D_8011D421: .byte 0x26
.halfword 0x27
D_8011D424: .halfword 0x28 0x29
D_8011D428: .halfword 0x2A 0x2B

; MTNX files for each gate type.
D_8011D42C:
.word 0x00000001 0x00130163
D_8011D434:
.word 0x00000001 0x00130168
D_8011D43C:
.word 0x00000001 0x0013016F
D_8011D444:
.word 0x00000001 0x00130176
D_8011D44C:
.word 0x00000001 0x00130180
D_8011D454:
.word 0x00000001 0x00130184

D_8011D45C:
.word D_8011D42C
.word D_8011D434
.word D_8011D43C
.word D_8011D444
.word D_8011D44C
.word D_8011D454

; sound that plays when the gate opens. 0x148 is raw sound 0x7E.
D_8011D474:
.word 0x00000148
.word 0x00000148
.word 0x00000148
.word 0x00000148
.word 0x00000148
.word 0x00000148

D_8011D48C: .word 0xFFFFFFFF
D_8011D490: .word 0xFFFFFFFF
D_8011D494: .word 0xFFFFFFFF
D_8011D498: .halfword 0xFFFF
D_8011D49A: .halfword 0xFFFF
D_8011D49C: .word 0xFFFFFFFF
D_8011D4A0: .word 0xFFFFFFFF
D_8011D4A4: .word 0xFFFFFFFF
D_8011D4A8: .word 0xFFFFFFFF
D_8011D4AC: .word 0xFFFFFFFF
D_8011D4B0: .word 0xFFFFFFFF
D_8011D4B4: .word 0xFFFFFFFF
D_8011D4B8: .word 0xFFFFFFFF

D_8011D4BC: .word 0xFFFFFFFF
D_8011D4C0: .word 0xFFFFFFFF
D_8011D4C4: .word 0xFFFFFFFF
D_8011D4C8: .word 0xFFFFFFFF
D_8011D4CC: .word 0xFFFFFFFF
D_8011D4D0: .word 0xFFFFFFFF
D_8011D4D4: .word 0xFFFFFFFF
D_8011D4D8: .word 0xFFFFFFFF
D_8011D4DC: .word 0xFFFFFFFF

D_8011D4E0: .word 0xFFFFFFFF
D_8011D4E4: .word 0xFFFFFFFF
D_8011D4E8: .word 0xFFFFFFFF
D_8011D4EC: .word 0xFFFFFFFF
D_8011D4F0: .word 0xFFFFFFFF
D_8011D4F4: .word 0xFFFFFFFF
D_8011D4F8: .word 0xFFFFFFFF
D_8011D4FC: .word 0xFFFFFFFF
D_8011D500: .word 0xFFFFFFFF

.align 4
bank_model_space_indices:
.halfword ${E.join(",")}

.align 4
item_shop_model_space_indices:
.halfword ${C.join(",")}

.align 4
; Koopa Kard usage AI
D_8011E058:
.word 0x04000000 0x00F50014 0x0B541E1E
.word 0x00000000 0x00000000 0x1B541E1E

; bank main fs something
D_8011E070:
.word 0x00000001 0x000A009D

D_8011E088: .word 0x00000000
D_8011E08C: .word 0x01000000
D_8011E090: .word 0x02030404
D_8011E094: .word 0x00000000
D_8011E098: .word 0x01000000
D_8011E09C: .word 0x02030404

D_8011E0A0:
.byte 0x00 0x01 0x04 0x05 0x0A 0x0E 0x13
.byte 0x00 0x01 0x04 0x05 0x0A 0x0C 0x13
.byte 0x00 0x01 0x04 0x05 0x0A 0x13 0xFF
.byte 0x00 0x01 0x04 0x08 0x0A 0x0C 0x13
.byte 0x00 0x01 0x08 0x0A 0x0C 0x0E 0x13
.byte 0x01 0x02 0x03 0x06 0x0D 0x0B 0x13
.byte 0x01 0x02 0x03 0x06 0x09 0x0D 0x13
.byte 0x01 0x02 0x03 0x07 0x0D 0x13 0xFF
.byte 0x01 0x03 0x06 0x07 0x09 0x0D 0x13
.byte 0x01 0x03 0x06 0x07 0x09 0x0B 0x13
.byte 0x00 0x00 ; align 4

D_8011E0E8: .word 0x00000101
D_8011E0EC: .word 0x01020203
D_8011E0F0: .word 0x02030304
D_8011E0F4: .word 0x00000101
D_8011E0F8: .word 0x01020203
D_8011E0FC: .word 0x02030304

D_8011E100: .word 0x1937414C
D_8011E104: .word 0x51565B60
D_8011E108: .word 0x62641E32
D_8011E10C: .word 0x3C464B55
D_8011E110: .word 0x5A5F6164
D_8011E114: .word 0x192D343E
D_8011E118: .word 0x4352585F
D_8011E11C: .word 0x61641423
D_8011E120: .word 0x282D374B
D_8011E124: .word 0x555F6164
D_8011E128: .word 0x0F191E28
D_8011E12C: .word 0x2D46505C
D_8011E130: .word 0x5F642135
D_8011E134: .word 0x44494E53
D_8011E138: .word 0x5D626400
D_8011E13C: .word 0x1928373F
D_8011E140: .word 0x49515B62
D_8011E144: .word 0x64001426
D_8011E148: .word 0x3A444B52
D_8011E14C: .word 0x5A626400
D_8011E150: .word 0x0F233741
D_8011E154: .word 0x484F5561
D_8011E158: .word 0x64000F19
D_8011E15C: .word 0x2D37414B
D_8011E160: .word 0x505F6400

D_8011E164: .word 0x00010405
D_8011E168: .word 0x080A0C0E
D_8011E16C: .word 0x0F100102
D_8011E170: .word 0x03060709
D_8011E174: .word 0x0D0B1101

; 3B is toad, 3D is baby bowser
item_shop_purchase_selection_messages:
.word 0x00003B05
.word 0x00003D05
.word 0x00003B06
.word 0x00003D06
.word 0x00003B07
.word 0x00003D07
.word 0x00003B08
.word 0x00003D08
.word 0x00003B09
.word 0x00003D09

D_8011E1A0:
item_shop_prompt_to_buy_messages:
.word 0x00003B00
.word 0x00003D00

D_8011E1A8:
item_shop_not_enough_coins_messages:
.word 0x00003B01
.word 0x00003D01

D_8011E1B0:
item_shop_already_have_three_items_messages:
.word 0x00003B02
.word 0x00003D02

D_8011E1B8:
item_shop_closed_messages:
.word 0x00003B03
.word 0x00003D03

D_8011E1C0:
item_shop_cancelled_purchase_messages:
.word 0x00003B04
.word 0x00003D04

D_8011E1C8:
.word 0x00000001 0x000A0017

D_8011E1D0:
.word 0x00000001 0x000A00F0

D_8011E1D8:
.word 0

D_8011E1EC: .word 0x42980000
D_8011E1F0: .word 0x42500000
D_8011E1F4: .word 0x43740000
D_8011E1F8: .word 0x42500000
D_8011E1FC: .word 0x42980000
D_8011E200: .word 0x43400000
D_8011E204: .word 0x43740000
D_8011E208: .word 0x43400000
D_8011E20C: .word 0xBF800000

D_8011E210: .word 0xBF800000
D_8011E214: .word 0x3F800000
D_8011E218: .word 0xBF800000
D_8011E21C: .word 0xBF800000
D_8011E220: .word 0x3F800000
D_8011E224: .word 0x3F800000
D_8011E228: .word 0x3F800000

D_8011E22C: .byte 0x01
D_8011E22D: .byte 0x05
D_8011E22E: .byte 0x0F 0x06
D_8011E230: .word 0x0F191019
D_8011E234: .word 0x1B1A231E
D_8011E238: .word 0x242D202E
D_8011E23C: .word 0x32230000

D_8011E240: .byte 0x00
D_8011E241: .byte 0x00
D_8011E242: .byte 0x00 0x01
D_8011E244: .word 0x0A010B0B
D_8011E248: .word 0x040C0E02
D_8011E24C: .word 0x0F0F0410
D_8011E250: .word 0x17031821
D_8011E254: .word 0x04222505
D_8011E258: .word 0x26270228
D_8011E25C: .word 0x31063236
D_8011E260: .word 0x05373F07
D_8011E264: .word 0x40400841
D_8011E268: .word 0xFF090000
D_8011E26C: .word 0x09070401
D_8011E270: .word 0x00000000

D_8011E274: .word 0x00000032
D_8011E278: .word 0x00000050
D_8011E27C: .word 0x00000064

D_8011E280: .word 0x00000001
D_8011E284: .word 0x00000000
D_8011E288: .word 0x00000001
D_8011E28C: .word 0x00000000
D_8011E290: .word 0x00000000
D_8011E294: .word 0x00000001
D_8011E298: .word 0x00000000

D_8011E354: .word 0x43240000
D_8011E358: .word 0x42980000
D_8011E35C: .word 0x430C0000
D_8011E360: .word 0x42980000
D_8011E364: .word 0x43240000
D_8011E368: .word 0x42980000
D_8011E36C: .word 0x430C0000
D_8011E370: .word 0x42980000
D_8011E374: .word 0x43040000
D_8011E378: .word 0x42780000
D_8011E37C: .word 0x435C0000
D_8011E380: .word 0x42780000
D_8011E384: .word 0x43040000
D_8011E388: .word 0x43340000
D_8011E38C: .word 0x435C0000
D_8011E390: .word 0x43340000

D_8011E394: .word 0x43240000
D_8011E398: .word 0x42840000
D_8011E39C: .word 0x43240000
D_8011E3A0: .word 0x42840000
D_8011E3A4: .word 0x43240000
D_8011E3A8: .word 0x42840000
D_8011E3AC: .word 0x43240000
D_8011E3B0: .word 0x42840000

D_8011E3B4: .word 0x43240000

D_8011E3B8: .word 0x42980000
D_8011E3BC: .word 0x43240000
D_8011E3C0: .word 0x42980000
D_8011E3C4: .word 0x43240000
D_8011E3C8: .word 0x42980000
D_8011E3CC: .word 0x43240000
D_8011E3D0: .word 0x42980000

; Message box AI - which shop will you choose?
D_8011E3D4:
.word 0x0D000000 0x00000000 0x0A142850
.word 0x0D000000 0x00000001 0x064C9932
.word 0x0D000000 0x00000002 0x03C78F1E
.word 0x0D000000 0x00000003 0x08D1A346
.word 0x0D000000 0x00000004 0x078F1E3C
.word 0x0D000000 0x00000005 0x064C9932
.word 0x0D000000 0x00000006 0x03C78F1E
.word 0x0D000000 0x00000007 0x078F1E3C
.word 0x00000000 0x00000000 0x064C9932

D_8011E440: .word 0x00000014
D_8011E444: .word 0x0000003C
D_8011E448: .word 0x0000001E
D_8011E44C: .word 0x00000032
D_8011E450: .word 0x00000046

; ai tree for throwing away skeleton key
D_8011E454:
.word 0x00000000 00000000 0x0C993264

D_8011E460: .word 0xC1200000
D_8011E464: .word 0x00000000
D_8011E468: .word 0x41200000
D_8011E46C: .word 0xC0A00000
D_8011E470: .word 0x41200000
D_8011E474: .word 0x40A00000
D_8011E478: .word 0xC0A00000
D_8011E47C: .word 0xC0A00000
D_8011E480: .word 0x41200000
D_8011E484: .word 0x00000000
D_8011E488: .word 0xC0A00000
D_8011E48C: .word 0x40A00000

D_8011E490: .word 0xFFFFFFFF

D_8011E494: .byte 0x43 0x44 0x45 0x00

D_8011E498: .byte 0x14 0x3C 0x64 0x00

D_8011E49C: .halfword 0
D_8011E49E: .halfword 0x32
D_8011E4A0: .word 0x00020050
D_8011E4A4: .word 0x0004005A
D_8011E4A8: .word 0x0008005E
D_8011E4AC: .word 0x00100061
D_8011E4B0: .word 0x00200063
D_8011E4B4: .word 0x00400064

D_8011E4B8: .byte 0xF0
D_8011E4B9: .byte 0xDE
D_8011E4BA: .byte 0x35 0xF7
D_8011E4BC: .byte 0x1A 0x42 0x00 0x00

.align 16
data_screen_dimensions:
.word 00000000
.word 00000000
.word 0x43A00000 ; 320
.word 0x43700000 ; 240

D_8011E8C8:
.word 0x0A000000 0x000C0004 0x0C96A846
.word 0x0A000000 0x000D0002 0x0C96A846
.word 0x0A000000 0x000E0003 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011E8F8:
.word 0x0C000000 0x0000000A 0x0000001E
.word 0x10000000 0x0000000A D_8011E8C8
.word 0x0C000000 0x00000019 0x0000001E
.word 0x0A000000 0x00010008 0x0C96A846
.word 0x0A000000 0x00100004 0x0C96A846
.word 0x0C000000 0x0000001E 0x0000001E
.word 0x0A000000 0x000A0204 0x0C96A846
.word 0x0C000000 0x00000023 0x0000001E
.word 0x0A000000 0x0005080A 0x0C96A846
.word 0x0A000000 0x00080006 0x0C96A846
.word 0x0A000000 0x000A0001 0x0C96A846
.word 0x0A000000 0x00060000 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011E994:
.word 0x0C000000 0x00000014 0x0000001E
.word 0x0A000000 0x00010B0C 0x0C96A846
.word 0x0A000000 0x000F0006 0x0C96A846
.word 0x0A000000 0x00030305 0x0C96A846
.word 0x0A000000 0x00040001 0x0C96A846
.word 0x0C000000 0x00000019 0x0000001E
.word 0x0A000000 0x0001040A 0x0C96A846
.word 0x0A000000 0x00100104 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011EA00:
.word 0x0C000000 0x00000014 0x0000001E
.word 0x0A000000 0x00010B0C 0x0C96A846
.word 0x0A000000 0x000F0609 0x0C96A846
.word 0x0A000000 0x00020006 0x0C96A846
.word 0x0A000000 0x00030005 0x0C96A846
.word 0x0C000000 0x00000019 0x0000001E
.word 0x0A000000 0x0001060A 0x0C96A846
.word 0x0A000000 0x00100304 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011EA6C:
.word 0x0C000000 0x00000014 0x0000001E
.word 0x0A000000 0x000F0009 0x0C96A846
.word 0x0A000000 0x00020006 0x0C96A846
.word 0x0A000000 0x00030305 0x0C96A846
.word 0x0A000000 0x00040001 0x0C96A846
.word 0x0A000000 0x00050003 0x0C96A846
.word 0x0A000000 0x00070007 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011EACC:
.word 0x0C000000 0x00000014 0x0000001E
.word 0x0A000000 0x000A0208 0x0C96A846
.word 0x0C000000 0x00000019 0x0000001E
.word 0x0A000000 0x00020206 0x0C96A846
.word 0x0A000000 0x0005030A 0x0C96A846
.word 0x0A000000 0x00080006 0x0C96A846
.word 0x0A000000 0x000A0001 0x0C96A846
.word 0x0A000000 0x000B0307 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011EB38:
.word 0x0C000000 0x00000005 0x0000001E
.word 0x0A000000 0x000A020A 0x0C96A846
.word 0x0A000000 0x000C0003 0x0C96A846
.word 0x0A000000 0x000E0001 0x0C96A846
.word 0x0C000000 0x0000000A 0x0000001E
.word 0x0A000000 0x00080406 0x0C96A846
.word 0x0A000000 0x000A0001 0x0C96A846
.word 0x00000000 0x00000000 0x00000000
D_8011EB98:
.word 0x02000000 0x00000041 D_8011E8F8
.word 0x02000000 0x00000002 D_8011E994
.word 0x02000000 0x00000004 D_8011EA00
.word 0x02000000 0x00000008 D_8011EA6C
.word 0x02000000 0x00000030 D_8011EACC
.word 0x02000000 0x00000080 D_8011EB38
.word 0x00000000 0x00000000 0x00000000

D_8011EBEC:
.word 0x00000000 0x00000000 0x0A119E32

D_8011EBF8:
.word 0x0A000000 0x0001090C 0x0000028A
.word 0x0A000000 0x00020000 0x0000028A
.word 0x0B000000 0x0001090C 0x0B54233C
.word 0x0B000000 0x00020000 0x0B54233C
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000E0002 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011EC4C:
.word 0x0A000000 0x000F0709 0x0000028A
.word 0x0A000000 0x00030001 0x0000028A
.word 0x0B000000 0x000F0709 0x0B54233C
.word 0x0B000000 0x00030001 0x0B54233C
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000E0002 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011ECA0:
.word 0x0A000000 0x00070106 0x0000028A
.word 0x0B000000 0x00070106 0x0B54233C
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000E0002 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011ECDC:
.word 0x0A000000 0x00050408 0x0000028A
.word 0x0B000000 0x00050408 0x0B54233C
.word 0x0A000000 0x000A0004 0x0000028A
.word 0x0B000000 0x000A0004 0x0B54233C
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000E0002 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011ED30:
.word 0x0A000000 0x000A080A 0x0000028A
.word 0x0A000000 0x000B0001 0x0000028A
.word 0x0B000000 0x000A080A 0x0B54233C
.word 0x0B000000 0x000B0001 0x0B54233C
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000E0002 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011ED84:
.word 0x0A000000 0x000C0103 0x0000028A
.word 0x0A000000 0x000D0000 0x0000028A
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000D0000 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011EDC0:
.word 0x0A000000 0x0001080C 0x0000028A
.word 0x0B000000 0x0001080C 0x0B54233C
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000E0002 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011EDFC:
.word 0x0A000000 0x00010002 0x0000028A
.word 0x0A000000 0x000E0102 0x0000028A
.word 0x0B000000 0x0001080C 0x0B54233C
.word 0x0B000000 0x000E0102 0x0B54233C
.word 0x00000000 0x00000000 0x02878F1E
D_8011EE38:
.word 0x02000000 0x00000001 D_8011EBF8
.word 0x02000000 0x00000002 D_8011EC4C
.word 0x02000000 0x00000004 D_8011ECA0
.word 0x02000000 0x00000008 D_8011ECDC
.word 0x02000000 0x00000010 D_8011ED30
.word 0x02000000 0x00000020 D_8011ED84
.word 0x02000000 0x00000040 D_8011EDC0
.word 0x02000000 0x00000080 D_8011EDFC
.word 0x00000000 0x00000000 0x00000000

D_8011EEA4:
.word 0x0A000000 0x0001090C 0x0000028A
.word 0x0A000000 0x00020000 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EEC8:
.word 0x0A000000 0x000F0709 0x0000028A
.word 0x0A000000 0x00030001 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EEEC:
.word 0x0A000000 0x00070106 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EF04:
.word 0x0A000000 0x00050408 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EF1C:
.word 0x0A000000 0x000A080A 0x0000028A
.word 0x0A000000 0x000B0001 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EF40:
.word 0x0A000000 0x000C0103 0x0000028A
.word 0x0A000000 0x000D0000 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EF64:
.word 0x0A000000 0x0001080C 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EF7C:
.word 0x0A000000 0x00010002 0x0000028A
.word 0x0A000000 0x000E0102 0x0000028A
.word 0x00000000 0x00000000 0x0BF6A83C
D_8011EFA0:
.word 0x02000000 0x00000001 D_8011EEA4
.word 0x02000000 0x00000002 D_8011EEC8
.word 0x02000000 0x00000004 D_8011EEEC
.word 0x02000000 0x00000008 D_8011EF04
.word 0x02000000 0x00000010 D_8011EF1C
.word 0x02000000 0x00000020 D_8011EF40
.word 0x02000000 0x00000040 D_8011EF64
.word 0x02000000 0x00000080 D_8011EF7C
.word 0x00000000 0x00000000 0x00000000

D_8011F00C:
.word 0x0B000000 0x0001090B 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F024:
.word 0x0B000000 0x000F0709 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F03C:
.word 0x0B000000 0x00070104 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F054:
.word 0x0B000000 0x00050406 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F06C:
.word 0x0B000000 0x000A080A 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F084:
.word 0x0B000000 0x000C0102 0x0B54233C
.word 0x0B000000 0x000A0A0A 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F0A8:
.word 0x0B000000 0x0001080A 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F0C0:
.word 0x0B000000 0x00010000 0x0B54233C
.word 0x0B000000 0x000E0102 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F0E4:
.word 0x02000000 0x00000001 D_8011F00C
.word 0x02000000 0x00000002 D_8011F024
.word 0x02000000 0x00000004 D_8011F03C
.word 0x02000000 0x00000008 D_8011F054
.word 0x02000000 0x00000010 D_8011F06C
.word 0x02000000 0x00000020 D_8011F084
.word 0x02000000 0x00000040 D_8011F0A8
.word 0x02000000 0x00000080 D_8011F0C0
.word 0x00000000 0x00000000 0x00000000

D_8011F150:
.word 0x0A000000 0x0001080A 0x0B54233C
.word 0x0A000000 0x000A0001 0x0B54233C
.word 0x0A000000 0x00050A0A 0x0B54233C
.word 0x0A000000 0x00040000 0x0B54233C
.word 0x00000000 0x00000000 0x00000000

D_8011F18C:
.word 0x00000000 0x00000000 D_8011F0E4

D_8011F198:
.word 0x00000000 0x00000000 D_8011F150

D_8011F1A4: .word 0x00000000 ; align 16?
D_8011F1A8: .word 0x00000000
D_8011F1AC: .word 0x00000000

D_8011F1B0:
.word 0x0A000000 0x00020206 0x0B54233C
.word 0x0A000000 0x000F0003 0x0B54233C
.word 0x0A000000 0x00030305 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F1E0:
.word 0x0A000000 0x00020404 0x0B54233C
.word 0x0A000000 0x00030305 0x0B54233C
.word 0x0A000000 0x00040001 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F210:
.word 0x0A000000 0x00050407 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F228:
.word 0x0A000000 0x00050A0A 0x0B54233C
.word 0x0A000000 0x00060000 0x0B54233C
.word 0x0A000000 0x000A0001 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F258:
.word 0x0A000000 0x000D0000 0x0B54233C
.word 0x0A000000 0x000C0103 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F27C:
.word 0x0A000000 0x000B0001 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F294:
.word 0x0A000000 0x000F0106 0x0B54233C
.word 0x0A000000 0x00020006 0x0B54233C
.word 0x0A000000 0x00040001 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F2C4:
.word 0x0A000000 0x00010405 0x0B54233C
.word 0x0C000000 0x0000000A 0x00028A1E
.word 0x0A000000 0x00010607 0x0B54233C
.word 0x00000000 0x00000000 0x00000000
D_8011F2F4:
.word 0x02000000 0x00000080 D_8011F2C4
.word 0x0C000000 0x00000005 0x00000A1E
.word 0x0A000000 0x00010004 0x0BF6A33C
.word 0x0C000000 0x00000014 0x00028A1E
.word 0x02000000 0x00000001 D_8011F1B0
.word 0x02000000 0x00000002 D_8011F1E0
.word 0x02000000 0x00000004 D_8011F210
.word 0x02000000 0x00000008 D_8011F228
.word 0x02000000 0x00000010 D_8011F258
.word 0x02000000 0x00000020 D_8011F27C
.word 0x02000000 0x00000040 D_8011F294
.word 0x00000000 0x00000000 0x00000000

D_8011F384:
.word 0x0B000000 0x0001090C 0x0B54233C
.word 0x0B000000 0x00020000 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F3A8:
.word 0x0B000000 0x000F0709 0x0B54233C
.word 0x0B000000 0x00030001 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F3CC:
.word 0x0B000000 0x00070106 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F3E4:
.word 0x0B000000 0x00050408 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F3FC:
.word 0x0B000000 0x000A080A 0x0B54233C
.word 0x0B000000 0x000B0001 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F420:
.word 0x0B000000 0x000C0103 0x0B54233C
.word 0x0B000000 0x000D0000 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F444:
.word 0x0B000000 0x0001080C 0x0C94233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F45C:
.word 0x0B000000 0x00010002 0x0B54233C
.word 0x0B000000 0x000E0102 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F480:
.word 0x02000000 0x00000001 D_8011F384
.word 0x02000000 0x00000002 D_8011F3A8
.word 0x02000000 0x00000004 D_8011F3CC
.word 0x02000000 0x00000008 D_8011F3E4
.word 0x02000000 0x00000010 D_8011F3FC
.word 0x02000000 0x00000020 D_8011F420
.word 0x02000000 0x00000040 D_8011F444
.word 0x02000000 0x00000080 D_8011F45C
.word 0x00000000 0x00000000 0x00000000

D_8011F4EC:
.word 0x00000000 0x00000000 D_8011F2F4
.word 0x00000000 0x00000000 0x00000000

D_8011F504:
.word 0x0F000000 0x0001090C 0x0B54233C
.word 0x0F000000 0x00020000 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F528:
.word 0x0F000000 0x000F0709 0x0B54233C
.word 0x0F000000 0x00030001 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F54C:
.word 0x0F000000 0x00070106 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F564:
.word 0x0F000000 0x00050408 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F57C:
.word 0x0F000000 0x000A080A 0x0B54233C
.word 0x0F000000 0x000B0001 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F5A0:
.word 0x0F000000 0x000C0103 0x0B54233C
.word 0x0F000000 0x000D0000 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F5C4:
.word 0x0F000000 0x0001080C 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F5DC:
.word 0x0F000000 0x00010002 0x0B54233C
.word 0x0F000000 0x000E0102 0x0B54233C
.word 0x00000000 0x00000000 0x00000A1E
D_8011F600:
.word 0x02000000 0x00000001 D_8011F504
.word 0x02000000 0x00000002 D_8011F528
.word 0x02000000 0x00000004 D_8011F54C
.word 0x02000000 0x00000008 D_8011F564
.word 0x02000000 0x00000010 D_8011F57C
.word 0x02000000 0x00000020 D_8011F5A0
.word 0x02000000 0x00000040 D_8011F5C4
.word 0x02000000 0x00000080 D_8011F5DC
.word 0x00000000 0x00000000 0x00000000

D_8011F66C: .word 0x00000000 ; nullptr
D_8011F670: .word 0x00000000 ; nullptr
D_8011F674: .word D_8011F480
D_8011F678: .word 0x00000000
D_8011F67C: .word 0x00000000
D_8011F680: .word 0x00000000

D_8011F684:
.word 0x08000000 0x00000001 0x00000514
.word 0x02000000 0x00000004 0x0B54233C
.word 0x00000000 0x00000000 0x00000000

D_8011F6A8:
.word 0x00000000 0x00000000 0x00000000

D_8011F6B4:
.word 0x02000000 0x000000B0 0x08CF1932
.word 0x00000000 0x00000000 0x00000000

D_8011F6CC:
.word 0x02000000 0x00000041 0x08CF1932
.word 0x00000000 0x00000000 0x00000000

D_8011F6E4:
.word 0x01000000 0x00000019 0x0C96A846
.word 0x00000000 0x00000000 0x0000051E
D_8011F6FC:
.word 0x02000000 0x00000002 D_8011F6E4
.word 0x01000000 0x00000019 0x0C96A846
.word 0x00000000 0x00000000 0x0B54233C
D_8011F720:
.word 0x01000000 0x0000001E 0x0C96A846
.word 0x00000000 0x00000000 0x0000051E
D_8011F738:
.word 0x02000000 0x00000030 D_8011F720
.word 0x01000000 0x00000019 0x0C96A846
.word 0x00000000 0x00000000 0x0B54233C

D_8011F75C:
.word 0x00000000

D_8011F760:
.word 0x0E0A0003
.word 0x0204130B
.word 0x05060C0D
.word 0x09070801

D_8011F770:
.word 0x0E010B0A
.word 0x130C0006
.word 0x09030D04
.word 0x08070205

D_8011F780:
.word 0x0E0B0609
.word 0x0C07030D
.word 0x02040A13
.word 0x00080501

D_8011F790:
.word 0x0E05090A
.word 0x0B07130C
.word 0x0006030D
.word 0x04080201

D_8011F7A0:
.word 0x0E080D0B
.word 0x0A130607
.word 0x0C000903
.word 0x04020501

D_8011F7B0:
.word 0x0E030B0A
.word 0x130C0006
.word 0x090D0408
.word 0x07020501

D_8011F7C0:
.word 0x0E020903
.word 0x06070805
.word 0x04130B0D
.word 0x0A0C0001

D_8011F7D0:
.word 0x0E041309
.word 0x0B0A030C
.word 0x07000106
.word 0x0D080205

D_8011F7E0:
.word D_8011F760
.word D_8011F770
.word D_8011F780
.word D_8011F790
.word D_8011F7A0
.word D_8011F7B0
.word D_8011F7C0
.word D_8011F7D0

D_8011F800:
.word 0x5A463C1E
.word 0x14141414
.word 0x0A0A0A0A
.word 0x0A0A0A0A

D_8011F810:
.word 0x50321414
.word 0x140A140A
.word 0x0A0A140A
.word 0x0A0A0A00

D_8011F820:
.word 0x501E321E
.word 0x1E141414
.word 0x14141E14
.word 0x1E0A0A0A

D_8011F830:
.word 0x5A32141E
.word 0x140A140A
.word 0x1E0A0A0A
.word 0x0A0A0A0A

D_8011F840:
.word 0x5A321E1E
.word 0x1E141414
.word 0x0A1E0A0A
.word 0x0A0A0A0A

D_8011F850:
.word 0x5A321E3C
.word 0x14141E14
.word 0x0A0A0A0A
.word 0x0A0A0A0A

D_8011F860:
.word 0x46282828
.word 0x1E141E1E
.word 0x1428281E
.word 0x280A280A

D_8011F870:
.word 0x50323C14
.word 0x141E141E
.word 0x0A1E140A
.word 0x0A0A0A0A

D_8011F880:
.word D_8011F800
.word D_8011F810
.word D_8011F820
.word D_8011F830
.word D_8011F840
.word D_8011F850
.word D_8011F860
.word D_8011F870

D_8011F8A0: .word D_8011F684
D_8011F8A4: .word D_8011F6A8

D_8011F8A8: .word D_8011F6B4
D_8011F8AC: .word D_8011F6CC

D_8011F8B0: .word D_8011F6FC
D_8011F8B4: .word D_8011F738

D_8011F8B8: .word 0x00000000 ; align 16?
D_8011F8BC: .word 0x00000000

D_8011F8C0: .word 0x02021006
D_8011F8C4: .word 0x08061404
D_8011F8C8: .word 0x00000000
D_8011F8CC: .word 0x00000000
D_8011F8D0: .word 0x01020408

percent_d_str_format:
.asciiz "%d" ; 0x25640000
.align 4

.align 8
D_8011F8D8: .word 0x3FF80000
D_8011F8DC: .word 0x00000000

D_8011F8E0: .word 0x3F800000
D_8011F8E4: .word 0x3F800000
D_8011F8E8: .word 0x3F800000
D_8011F8EC: .word 0x3F800000
D_8011F8F0: .word 0x40000000
D_8011F8F4: .word 0x3F800000
D_8011F8F8: .word 0x00000000
D_8011F8FC: .word 0x40000000
D_8011F900: .word 0x3F800000
D_8011F904: .word 0xBF800000
D_8011F908: .word 0x3F800000
D_8011F90C: .word 0x3F800000
D_8011F910: .word 0xBF800000
D_8011F914: .word 0xBF800000
D_8011F918: .word 0x3F800000
D_8011F91C: .word 0x00000000
D_8011F920: .word 0xBF800000
D_8011F924: .word 0x3F800000
D_8011F928: .word 0xBF800000
D_8011F92C: .word 0x40000000
D_8011F930: .word 0x3F800000
D_8011F934: .word 0x3F800000
D_8011F938: .word 0xBF800000
D_8011F93C: .word 0x3F800000

.align 8
D_8011F940: .word 0x3FD33333
D_8011F944: .word 0x33333333

.align 8
D_8011F948: .word 0x3FE00000
D_8011F94C: .word 0x00000000

.align 8
D_8011F950: .word 0x3FE00000
D_8011F954: .word 0x00000000

.align 8
D_8011F958: .word 0x3FE00000
D_8011F95C: .word 0x00000000

.align 8
D_8011F960: .word 0x3FE00000
D_8011F964: .word 0x00000000

.align 8
D_8011F968: .word 0x3FF80000
D_8011F96C: .word 0x00000000

.align 8
D_8011F970: .word 0x3FE99999
D_8011F974: .word 0x9999999A

.align 8
D_8011F978: .word 0x3FE99999
D_8011F97C: .word 0x9999999A

.align 8

D_8011FA20_jump_table:
.word L8011CDC8
.word L8011C9CC
.word L8011C944
.word L8011CA8C
.word L8011CAD4
.word L8011CCDC
.word L8011CA80
.word L8011CB1C
.word L8011C9E4
.word L8011CD48
.word L8011CD84
.word L8011CA48
.word L8011CCAC
.word L8011C944
.word L8011CA64
.word L8011CD08
.word L8011C944
.word L8011CBC8
.word L8011C9CC
.word L8011C978

.align 16

bss:
D_8011FA70:
.word 0
.word 0

D_8011FA78:
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0

; holds millenium star object pointers?
D_8011FA98:
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0

.align 8
D_8011FAB8: .word 0

D_8011FABC: .word 0

D_8011FAC0: .word 0

D_8011FAC4: .word 0

D_8011FAD4: .word 0

D_8011FAD8: .word 0

D_8011FAF0:
.word 0
.word 0

D_8011FAF8:
.word 0
.word 0
.word 0
.word 0

; boo
D_8011FB08: .word 0
; boo
D_8011FB0C: .word 0

D_8011FB10:
.word 0
.word 0

D_8011FB18:
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0
.word 0

bank_model_bss:
D_8011FB40: .word 0

; gates bss entries (probably 2 words for 2 gates)
D_8011FB44:
.word 0
.word 0

D_8011FB4C: .word 0

D_8011FB50: .word 0

D_8011FB54: .word 0

D_8011FB58: .word 0

D_8011FB5C: .halfword 0

D_8011FB5E: .halfword 0

D_8011FB60: .word 0

D_8011FB64: .halfword 0

D_8011FB66: .halfword 0

D_8011FB68: .word 0

D_8011FB6C: .word 0

D_8011FB70: .word 0

D_8011FB74: .word 0

D_8011FB78:
.word 0
.word 0

D_8011FB80:
.halfword 0
D_8011FB82:
.halfword 0
.word 0
.word 0

D_8011FB8C: .halfword 0
D_8011FB8E: .halfword 0

D_8011FB90:
.word 0
.word 0

D_8011FB98:
.word 0
.word 0
.word 0
.word 0

D_8011FBA8:
.word 0
.word 0
.word 0
.word 0

; Player index of player that is in the lead (or something)?
D_8011FBB8: .word 0

; Player index of player that is in the lead (or something)?
D_8011FBBC: .word 0

.align 16
  `}const sie=["","","","","","","","","","","Mushroom Growth (Toadstool Titan)","","Cursed Shroom block (Mario Party 1)","","","","","","","","","Train Whistle (End of the Line)","Train Whistle (End of the Line)","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Dizzy sound (Birds)","","Dice Roll shuffling","","Dice Roll hit","Mini-Game hand moving through selection","Mini-Game selected on the roulette","Warp Block warp sound","","","","Turn Start sound","","Hidden Block appears","","","","Entering Mini-Game","","","Item Shop opening","Item Shop closing","","","","","","","","Landed on Blue Space","Landed on Red Space","Stepped on Star Space","","","","","","","","","","","","","","","","","","","","","","","","","Bowser Fleeing Sound","","","Item Obtained on Shop?","Rare Item obtained from Toad?","","","Cellular Shopper Ringtone","Cellphone ring","","","","","","","","Ho ho ho! (Millennium Star)","","","","","","Cannon explosion (Award Ceremony)","","Firework launch","Firework explosion","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Warp Pipe sound","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Mario Party 3 (laughter)","Mario Party 3 (laughter)","Game Over","Start!","New Record!","Finish!","MISS!","DRAW!","Bob-omb voice","Boo laugh","Thwomp cry","Metal! (Koopa Troopa)","Koopa cry","Goomba cry","Metal! (Koopa Troopa)","Whomp cry","Boo cry","Got Item!","Chance Time!","Mario: Hoo hoo! I got it!","Mario: Oh, I lost!","Mario: I'm the best!","Mario: Yahoo! Mario's the superstar!","Mario cry","Mario: Yahoo! Mario's the winner!","Luigi cry","Luigi: Ahaha! I'm-a got it!","Luigi: Oh, I lost!","Luigi: I'm the best!","Luigi: Yes! Luigi's the superstar!","Luigi cry","Luigi: Yes! Luigi's the winner!","Luigi: Ohhh...","Peach: Yeah! I got it!","Peach: Oh, I lost!","Peach: I'm the best!","Peach: Yeah! Peach is the superstar!","Peach cry","Peach: Yeah! Peach is the winner!","Peach cry","Yoshi cry","Yoshi cry","Yoshi cry","DK cry","DK cry","DK cry","DK cry","DK cry","Wario: Hehehehe! I got it!","Wario: Oh, I lost!","Wario: I'm-a the best!","Wario: Yeah, Wario is the superstar!","Wario cry","Wario: Oh yeah! Wario is the winner!","Wario cry","Waluigi: Heheh! I got it!","Waluigi: Oh, I lost!","Waluigi: I'm the best!","Waluigi: Yeah! Waluigi's the superstar!","Waluigi cry","Waluigi: Yeah! Waluigi's the winner!","Waluigi cry","Daisy: Yay! I got it!","Daisy: Oh, I lost!","Daisy: I'm the best!","Daisy: Yeah! Daisy's the superstar!","Daisy cry","Daisy: Yeah! Daisy's the winner!","Toad: Yooo!","Toad: Yahoo!","Toad: Ohhh...","Toad: OK!","Bowser laughs","Bowser roars","Bowser growls","Bowser barks","Baby Bowser barks","","Chain Chomp cry","Tumble: OK!","Tumble: Yay!","Tumble: Hi!","Tumble: Ohhh (Sad)","Tumble: Owowowow","Mario: Good choice!","Luigi: Good choice!","Peach: Good choice!","Wario: Good choice!","Waluigi: Good choice!","Daisy: Good choice!","Mario's taunt","Luigi's taunt","Peach's taunt","Wario's Taunt","Waluigi's Taunt","Daisy's Taunt","","","","","","","","","","","","","","","","","","","","","","","","Crowd noises","Crowd noises","Crowd noises","Crowds cheering","Crowds clapping","","Bird chirping","","Bird chirping","Cow mooing","","","","Waterdrop","Waterdrop","","","","","","","","","","","","","","","","","","","","","","","","","Thwomp cry (Thwomp Pull)","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Warp Pipe sound","Block break (Toadstool Titan)","Blasting off (Toadstool Titan)","","","","","","","","","","","","","","","","Door Opening (Locked Out)","Door Closing (Locked Out)","","","","","","","","","","","Drumroll","Drumroll end","","","","","","","","","Drum hit (The Beat Goes On)","Drum hit (The Beat Goes On)","Drum hit (The Beat Goes On)","Spear Guy cries (The Beat Goes On)","Wrong Answer (M.P.I.Q)","Hit by block (M.P.I.Q)","","","Fanfare (Curtain Call)","Stoplight (when starting racing Mini-Games)","","","","","","","","","","","","Horse cry (Rocking Raceway?)","Horse Steps (Rocking Raceway)","Horse Steps (Rocking Raceway)","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Screw Spinning (Silly Screws)","","Chicken flapping wings (Fowl Play)","Chicken Noises (Fowl Play)","Chicken Noises (Fowl Play)","Chicken Noises (Fowl Play)","Chicken Noises (Fowl Play)","Chicken Noises (Fowl Play)","","","","","","","Arrow bounce off tower (Bobbing Bow-loons)","","Balloon Pop (Bobbing Bow-loons)","Arrow bounce off tower (Bobbinb Bow-loons)","","Dorrie's cry (Dorrie Dip)","","","","","","","","","","","","","","","","","","","","","","","","","","Crowd sounds","",""];function lie(n){return sie}const uie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AsPASwNs2HtQQAAA0RJREFUeNrtm8tPE1EUh7/CxEIopOAjI2o0RoMkxoXEhSaGxJWPf4A/wEWXuDAmxsSVC3csuzMxManRGGNUwEbiK7owSHwgIUIBLUjQUCw19CXj4jKAoaWVzm3nznBWbTOZued3v3vmnHN7PSxZDRhIsCR4ZN6/VNPMwQW75Dwg0IlhimBH86x2viMwbenNQ0HdFMG2VmV+sNp50OkIYHvT8g1eNdvoEtZUd77U5auhoK2e7VKXrua82dadJUDxs607iwAZs217AWTPtm0FKNds206ASjoOkEhUQIDiMNelOfx1AkZHIPoNfv4oswDBrsrMdiIBA/3wrA8GP8LMDMRikFwoswCiKNJziCAP88gIPLgPT3pgLALxX5DJQDYLhlHRGCA/5e5/C48fwtMwjEcgHofFxQoHwRUK5D4nMgIvnwvnvwzD798FymEnWSIB7/qh+9H6zldMgEAnhILy7j88BG9ew8Q4LCwU2RBxkk1NwacPEJtdu+ZtI4AsChIJ8Y6PzYpIX8gcR8DMNHyfzB3xbSeA7FhQjDkyBiglgNUU7NBh5y5oaICqKhcS4PPB7j3Q2ASapogAVlPQ3AyHjwgRClHgyBjQ0grHT8DefVBb60IBfD442gZnzsHBFqiry3+tbXqC5v6hVUXS/gNwsh3m58V321SD5bS2Y9DYCPX1a/sBmYwNBbCaApOE8wEhhtkRevUC0mkXJUI+n1gOFy5C01ZRL9g2CMpMjyejcO+Oi1PhoUFIJhUQQBYFuapDVxEQuqWQAFZT0BeGcK+LCYhGxT6AUgJYRcHYKFy/5uKGSCotMkAlBSiVglQK3g/kb487ngCPR+wO5esQKyHARikwDOjthru3XdYPMC2bFanveu1xZQTYCAWfByHcs/41jiUgHoerl/+t/JQX4H8omBgXBAB4vS4jYG4Obt4Q/wGCle5PLlOuJVZs10irhupq2LZdvArTaUinxG9bvJBJKypAMeb3w6Ur0H4KDrWKJMgwBAleL9R44c+iwgIUQ4HfD6fPFr7X5uaoqgO3qlLcJEDlwVtBwSYBqjtQKgWuJ8ARiVApJ1OXBQgFdQlHZ+0vwvLJbomHp0kunVG2Iz3Lp7rdenz+L41GNnhWZNGsAAAAAElFTkSuQmCC",cie=new class extends KC{constructor(){super(...arguments),this.gameVersion=3,this.nintendoLogoFSEntry=[17,1],this.hudsonLogoFSEntry=[17,2],this.boardDefDirectory=19,this.MAINFS_READ_ADDR=39952,this.HEAP_FREE_ADDR=40556,this.TABLE_HYDRATE_ADDR=965216}onLoad(e,t,r){r||(this._extractBanks(e,t),this._extractItemShops(e,t))}onCreateBoardOverlay(e,t,r,i){return oie(e,t,r,i)}onAfterOverwrite(e,t,r,i){e.setUint16(221422,32832),e.setUint16(221430,4194304-this.EVENT_MEM_SIZE>>>16),e.setUint16(221442,26),e.setUint16(300502,26);const a=l0.getDataView(120);a.setUint32(48736,604110849),a.setUint32(48768,604110849);const o=l0.getDataView(128);let s=0,l=0;for(let c=0;c<t.spaces.length;c++){const d=t.spaces[c];d.type===de.BLUE&&s++,d.type===de.RED&&l++}(s<14||l<1)&&(o.setUint32(154164,268435589),wt("Patching for low space count."))}onOverwritePromises(e,t,r){const i=t.bgDir,a=[this._writeBackground(i,e.bg.src,e.bg.width,e.bg.height),this._writeBackground(i+1,e.otherbg.largescene,320,240),this._writeBackground(i+2,e.bg.src,320,240),this._writeAdditionalBackgrounds(e),this.onWriteBoardSelectImg(e,t),this.onWriteBoardLogoImg(e,t),this._onWriteGateImg(e,t),this._brandBootSplashscreen()];return Promise.all(a)}onAfterSave(e){e.setUint32(52928,0),e.setUint32(523352,0),e.setUint32(523360,0)}onWriteEvents(e){}onAddDefaultBoardEvents(e,t){if(e===Yt.BEFORE_DICE_ROLL){const r=jw(e);t.add(r,sn.DIRECT,"__PP64_INTERNAL_CURSE_POISON_DICEROLL_EVENT"),t.add(r,sn.DIRECT,"__PP64_INTERNAL_REVERSAL_DICEROLL_EVENT")}}hydrateSpace(e,t,r){e.type===de.BANK&&cs(t,e,fi(GA),!1,r)}onChangeBoardSpaceTypesFromGameSpaceTypes(e,t){let r;const i=!e.type||e.type===G0.NORMAL;if(i)r={0:de.OTHER,3:de.OTHER,5:de.CHANCE,6:de.ITEM,7:de.BANK,8:de.OTHER,9:de.BATTLE,12:de.BOWSER,14:de.STAR,15:de.GAMEGUY,16:de.OTHER,17:de.OTHER};else if(e.type===G0.DUEL)r={1:de.OTHER,2:de.HAPPENING,3:de.GAMEGUY,4:de.OTHER,5:de.DUEL_REVERSE,6:de.DUEL_BASIC,7:de.DUEL_START_RED,8:de.MINIGAME,9:de.DUEL_START_BLUE,10:de.DUEL_POWERUP};else throw new Error(`Unrecongized board type: ${e.type}`);if(e.spaces.forEach(a=>{const o=r[a.type];o!==void 0&&(a.type=o)}),i&&t.length){const a=t[0][0];isNaN(a)||(e.spaces[a].type=de.START)}}onChangeGameSpaceTypesFromBoardSpaceTypes(e){const t={[de.OTHER]:0,[de.BLUE]:1,[de.RED]:2,[de.MINIGAME]:0,[de.HAPPENING]:4,[de.STAR]:14,[de.CHANCE]:5,[de.START]:0,[de.SHROOM]:0,[de.BOWSER]:12,[de.ITEM]:6,[de.BATTLE]:9,[de.BANK]:7,[de.ARROW]:13,[de.GAMEGUY]:15,[de.BLACKSTAR]:0,[de.DUEL_BASIC]:0,[de.DUEL_START_BLUE]:0,[de.DUEL_START_RED]:0,[de.DUEL_POWERUP]:0,[de.DUEL_REVERSE]:0};e.spaces.forEach(r=>{const i=t[r.type];i!==void 0&&(r.type=i)})}onCreateChainEvents(e,t){for(let s=0;s<t.length;s++){const l=t[s],c=l[0],d=l[1],h=l[l.length-1],f=l[l.length-2],m=Pa(h,e);let g;if(m.length>1){if(m.length>2)throw new Error("MP3 cannot support more than 2 split directions");const E=[];m.forEach(D=>{E.push(r(D))});const _=[];_.push(m[0]),_.push(m[1]),_.push(65535),_.push(f),_.push(m[1]),_.push(65535),_.push(f),_.push(m[0]),_.push(65535),_.push(0);const v=[];v.push(E[0]),v.push(0),v.push(0),v.push(E[1]),v.push(0),v.push(0),v.push(s),v.push(l.length-2),v.push(1),v.push(E[1]),v.push(0),v.push(0),v.push(s),v.push(l.length-2),v.push(1),v.push(E[0]),v.push(0),v.push(0);const C=o(E);C!=null?g=fi(Xg,{parameterValues:{spaceIndexArgs:_,chainArgs:v,hasgate:!0,prevSpace:t[C][0],altChain:[E.find(D=>D!==C),0]}}):g=fi(Xg,{parameterValues:{spaceIndexArgs:_,chainArgs:v}}),Sc(e,h,g,!0,Gn())}else m.length>0&&(g=fi(A4,{parameterValues:{chain:r(m[0]),prevSpace:f}}),Sc(e,h,g,!0,Gn()));const x=i(c);if(x.length){const E=[];x.forEach(v=>{E.push(r(v))});const _=[];if(E.forEach(v=>{_.push(t[v])}),x.length>=2){const v=[];v.push(d),v.push(x[0]),v.push(65535),v.push(x[1]),v.push(x[0]),v.push(65535),v.push(x[1]),v.push(d),v.push(65535),v.push(0);const C=[];C.push(s),C.push(1),C.push(0),C.push(E[0]),C.push(_[0].length-1),C.push(1),C.push(E[1]),C.push(_[1].length-1),C.push(1),C.push(E[0]),C.push(_[0].length-1),C.push(1),C.push(E[1]),C.push(_[1].length-1),C.push(1),C.push(s),C.push(1),C.push(0),g=fi(Xg,{parameterValues:{spaceIndexArgs:v,chainArgs:C,reverse:!0},executionType:sn.DIRECT}),Sc(e,c,g,!0,Gn())}else x.length===1&&(g=fi(A4,{parameterValues:{chain:E[0],spaceIndex:_[0].length-1,prevSpace:d}}),Sc(e,c,g,!0,Gn()))}else{const E=Pa(c,e);E.length>1?wt("FIXME: branching isolated chain?"):E.length>0&&(g=fi(zC,{parameterValues:{chain:s,spaceIndex:1}}),g.activationType=Yt.BEGINORWALKOVER,Sc(e,c,g,!0,Gn()))}}function r(s){for(let l=0;l<t.length;l++)if(t[l].indexOf(s)>=0)return l}function i(s){const l=[];for(let c=0;c<e.spaces.length;c++)Pa(c,e).indexOf(s)>=0&&l.push(c);return l}function a(s){return s.find(l=>e.spaces[l].subtype===yt.GATE)}function o(s){let l=null;return s.forEach(c=>{typeof a(t[c])=="number"&&(l=c)}),l}}onParseStrings(e,t){const r=t.str||{};if(r.boardSelect){if(!Array.isArray(r.boardSelect))throw new Error("Expected number[][]");const i=r.boardSelect[0],a=Ln.read("en",i[0],i[1]),o=a.split(`
`),s=o[0].indexOf(">")+2,l=o[0].indexOf("{",s);e.name=o[0].substring(s,l),e.description=[o[1],o[2]].join(`
`);let c=0,d=a.indexOf(this.getCharacterMap()[59],0);for(;d!==-1;)c++,d=a.indexOf(this.getCharacterMap()[59],d+1);e.difficulty=c}}onWriteStrings(e,t){const r=t.str||{},i=r.boardSelect;if(i&&i.length){let a=[];a.push(11),a.push(5),a.push(15),a=a.concat(Bt._strToBytes(e.name||"")),a.push(22),a.push(25),a.push(15),a=a.concat([32,32,32,32]),a.push(22),a.push(3),a.push(15),a=a.concat(Bt._strToBytes("Difficulty: "));const o=59;if(e.difficulty>5||e.difficulty<1)a.push(o),a=a.concat(Bt._strToBytes(" ")),a.push(62),a=a.concat(Bt._strToBytes(" "+e.difficulty.toString()));else for(let c=0;c<e.difficulty;c++)a.push(o);a.push(22),a.push(25),a.push(10),a=a.concat(Bt._strToBytes(e.description||"")),a.push(0);let s=hi(a),l=i[0];Ln.write("en",l[0],l[1],s),a.pop(),a.push(25),a.push(255),a.push(0),s=hi(a),l=i[1],Ln.write("en",l[0],l[1],s)}if(r.boardGreeting){let a=[];a.push(11),a=a.concat(Bt._strToBytes("You're all here!")),a.push(10),a=a.concat(this._createBoardGreetingBase(e.name)),a.push(11),a=a.concat(Bt._strToBytes(`Now, before we begin, we need
to determine the turn order.`)),a.push(25),a.push(255),a.push(0);const o=hi(a);Ln.write("en",r.boardGreeting[0],r.boardGreeting[1],o)}if(r.boardGreetingDuel){let a=[];a.push(11),a=a.concat(Bt._strToBytes("I've been waiting for you, ")),a.push(17),a.push(194),a.push(10),a=a.concat(this._createBoardGreetingBase(e.name)),a.push(11),a=a.concat(Bt._strToBytes("And just as promised, if you win here...")),a.push(25),a.push(255),a.push(0);const o=hi(a);Ln.write("en",r.boardGreetingDuel[0],r.boardGreetingDuel[1],o)}if(r.boardNames&&r.boardNames.length){let a=[];a.push(11),a=a.concat(Bt._strToBytes(e.name)),a.push(0);const o=hi(a);for(let s=0;s<r.boardNames.length;s++){const l=r.boardNames[s];Ln.write("en",l[0],l[1],o)}}}_createBoardGreetingBase(e){let t=Bt._strToBytes("Welcome to the legendary ");return t.push(5),t.push(15),t=t.concat(Bt._strToBytes(e)),t.push(22),t.push(25),t.push(194),t.push(25),t.push(255),t.push(11),t=t.concat(Bt._strToBytes(`Here, you'll battle to become
the Superstar.`)),t.push(25),t.push(255),t}onParseBoardSelectImg(e,t){!t.img||!t.img.boardSelectImg||(e.otherbg.boardselect=this._readImgFromMainFS(20,t.img.boardSelectImg,0))}onWriteBoardSelectImg(e,t){return new Promise((r,i)=>{const a=t.img&&t.img.boardSelectImg;if(!a){r();return}const o=new Image,s=setTimeout(()=>i(`Failed to write board select for ${t.name}`),45e3);o.onload=()=>{const l=bc(o,64,64),c=dt.get(20,a),h=Pr([{src:l,width:64,height:64,bpp:32}],16,0,c);dt.write(20,a,h),clearTimeout(s),r()},o.src=e.otherbg.boardselect})}onParseBoardLogoImg(e,t){!t.img||!t.img.splashLogoImg||(e.otherbg.boardlogo=this._readImgFromMainFS(19,t.img.splashLogoImg,0),e.otherbg.boardlogotext=this._readImgFromMainFS(19,t.img.splashLogoTextImg,0))}async onWriteBoardLogoImg(e,t){await Promise.all([this._writeBoardLogoLarge(e,t),this._writeBoardLogoTextImg(e,t),this._writeBoardLogoMedium(e,t),this._writeBoardLogoSmall(e,t)])}async _writeBoardLogoLarge(e,t){const r=t.img&&t.img.splashLogoImg;if(!r)return;const i=e.otherbg.boardlogo,[a,o]=[226,110],s=i?(await Ca(i,a,o)).data:new ArrayBuffer(a*o*4),l=dt.get(19,r),d=Pr([{src:s,width:a,height:o,bpp:32}],16,0,l);dt.write(19,r,d)}async _writeBoardLogoTextImg(e,t){const r=t.img&&t.img.splashLogoTextImg;if(!r)return;const[i,a]=[226,36],o=e.otherbg.boardlogotext,s=o?(await Ca(o,i,a)).data:new ArrayBuffer(i*a*4),l=dt.get(19,r),d=Pr([{src:s,width:i,height:a,bpp:32}],16,0,l);dt.write(19,r,d)}async _writeBoardLogoMedium(e,t){const r=t.img.pauseLogoImg;if(!r)return;const[i,a]=[150,50],o=e.otherbg.boardlogomedium,s=o?(await Ca(o,i,a)).data:new ArrayBuffer(i*a*4),l=dt.get(19,r),d=Pr([{src:s,width:i,height:a,bpp:32}],16,0,l);dt.write(19,r,d)}async _writeBoardLogoSmall(e,t){const r=t.img.statsLogoImg;if(!r)return;const[i,a]=[100,46],o=e.otherbg.boardlogosmall,s=o?(await Ca(o,i,a)).data:new ArrayBuffer(i*a*4),l=dt.get(r[0],r[1]),d=Pr([{src:s,width:i,height:a,bpp:32}],16,0,l);dt.write(r[0],r[1],d)}async _onWriteGateImg(e,t){const r=t.img&&t.img.gateImg;if(!r)return;const[i,a]=[64,64],o=setTimeout(()=>{throw new Error(`Failed to write gate image for ${t.name}`)},45e3),s=await Ca(uie,i,a),l=Q4(s.data.buffer,32,8),c=dt.get(19,366),d=Or.unpack(c);Or.replaceBMP(d,0,l[0],l[1]);const h=Or.pack(d);dt.write(19,r,h),clearTimeout(o)}getAudioMap(e){return["Opening","Opening Demo","Title Screen","Select File","Castle Grounds","","Staff Roll","Inside the Castle","Free-Play Room","Star Lift","Preparations","Rules Map","","The Adventure Begins","","The Adventure Ends","Begin Mini-Game","","Here's the Star","Still Going","Mini-Game End 1","Mini-Game End 2","Mini-Game End 3","Commence Attack!","Chilly Waters","Deep Bloober Sea","Spiny Desert","Woody Woods","Creepy Cavern","Waluigi","Good Luck!","The Winner is... Me!","A Winner is ME!","Foolish Bowser","","","Bowser Event","","Bring it On!","","Waluigi Appears!","VS Millennium Star!","Peaceful song, bells","","Defeat...","Aim","Don't Hurry","Panic!","Fighting Spirit","Got It?","Let's Get a Move On","Looking Ahead","Big Trouble!","What To Do!?!","Mustn't Panic","Nice and Easy","On Your Toes","Prologue 1","Prologue 2","Prologue 3","Genie's Theme","Jeanie's Theme","Start Battle","Bang Out a Drum Intro","Bang Out a Drum Fill","Stardust Battle","Chance Time","Game Guy Mini-Game","Item Mini-Game","Mushroom Power-Up!","Game Guy Winner!","Game Guy Loser!","Game Guy Dance","Drum Roll","Sound Config","","Battle Room","Gamble Room","Murmur","Tension Drums","","","","","",""]}getSoundEffectMap(e){return lie()}getCharacterMap(){return{0:"",1:"<BLACK>",2:"<DEFAULT>",3:"<RED>",4:"<PURPLE>",5:"<GREEN>",6:"<BLUE>",7:"<YELLOW>",8:"<WHITE>",9:"<SEIZURE>",10:`
`,11:"\u3014",12:"\u25CB",13:"	",14:"	",17:"{0}",18:"{1}",19:"{2}",20:"{3}",21:"{4}",22:"{5}",32:" ",33:"\u3000",34:"\u3001",35:"\u3002",36:"\u3003",37:"\u3004",38:"\u3005",39:"\u3006",40:"\u3007",41:"\u3008",42:"\u3009",43:"\u3010",44:"\u3011",58:"\u3012",59:"\u3013",60:"+",61:"-",62:"x",63:"->",91:'"',92:"'",93:"(",94:")",95:"/",123:":",126:"&",128:'"',129:"\xB0",130:",",131:"\xB0",133:".",192:"\u201C",193:"\u201D",194:"!",195:"?",255:"\u3015"}}};function HA(){let n=bt.getGameVersion();return n?u2(n):null}function u2(n){switch(n){case 1:return tie;case 2:return iie;case 3:return cie}return null}let ic,Xp={};Xp[Qe.MP1_USA]=[{upper:110190,lower:110198}];Xp[Qe.MP1_JPN]=[{upper:109982,lower:109990}];Xp[Qe.MP1_PAL]=[{upper:113202,lower:113206}];Xp[Qe.MP2_USA]=[{upper:119338,lower:119346},{upper:562006,lower:562014},{upper:562026,lower:562034}];class die{constructor(e){this.strs=this._extract(e)}_extract(e){let t=this._getStringCountFromView(e),r=new Array(t);for(let i=0;i<t;i++)r[i]=this._readFromView(e,i);return r}_getStringCountFromView(e){return e.getUint32(0)}_readFromView(e,t){let r=this._getStringOffsetFromView(e,t),a=new DataView(e.buffer,e.byteOffset+r).getUint16(0);return e.buffer.slice(e.byteOffset+r+2,e.byteOffset+r+2+a)}_getStringOffsetFromView(e,t){return e.getUint32(4*(1+t))}read(e,t=!1){if(e>=this.getStringCount())throw new Error("Requesting non-existent string entry");let r=this.strs[e];if(t)return r;let i=new DataView(r),a="";for(let o=0;o<r.byteLength;o++)a+=this._byteToStr(i.getUint8(o));return a}_byteToStr(e){let t=HA().getCharacterMap();return t.hasOwnProperty(e)?t[e]:String.fromCharCode(e)}write(e,t){this.strs[e]=t.slice(0)}getStringCount(){return this.strs.length}getByteLength(e=!1){let t=0,r=this.strs.length;t+=4,t+=4*r;for(let i=0;i<r;i++)t+=2,t+=this.strs[i].byteLength,t=_0(t,2);return e&&(t+=t/8+16),t}pack(e,t=0){let r=new DataView(e,t),i=this.getStringCount();r.setUint32(0,i);let a=4,o=4+i*4;for(let s=0;s<i;s++)r.setUint32(a,o),a+=4,o=this._packStr(s,r,o),o=_0(o,2);return o}_packStr(e,t,r){let i=this.strs[e];return t.setUint16(r,i.byteLength),fr(t,i,r+2,0,i.byteLength),r+2+i.byteLength}}const Bt={getROMOffset(){let n=bt.getDataView(),e=Bt.getPatchOffsets();if(!e)return null;let t=e[0];if(!t)return null;let r=n.getUint16(t.upper)<<16,i=n.getUint16(t.lower),a=r|i;if(i&32768&&(a=a-65536),wt(`Strings.getROMOffset -> ${At(a)}`),Hn())for(let o=1;o<e.length;o++){let s=n.getUint16(e[o].upper)<<16,l=n.getUint16(e[o].lower);if(s!==r||l!==i)throw new Error(`Strings.getROMOffset patch offset ${o} seems wrong`)}return a},setROMOffset(n,e){let t=new DataView(e),r=Bt.getPatchOffsets(),i=(n&4294901760)>>>16,a=n&65535;a&32768&&(i+=1);for(let o=0;o<r.length;o++)t.setUint16(r[o].upper,i),t.setUint16(r[o].lower,a);wt(`Strings.setROMOffset -> ${At(i<<16|a)}`)},getPatchOffsets(){return Xp[bt.getROMGame()]},StringTable:die,_strToBytes(n){let e=HA().getCharacterMap(),t=[],[r,i]=[0,n.length];for(;r<i;){let a=0,o;for(let s in e){if(!e.hasOwnProperty(s))continue;let l=e[s];n.substr(r,l.length)===l&&l.length>a&&(a=l.length,o=s)}a===0&&(a=1,o=n.charCodeAt(r)),typeof o=="string"&&(o=parseInt(o)),t.push(o),r+=a}return t},extract(){const n=Bt.getROMOffset();if(n===null)return;let e=bt.getDataView(n);return ic=new Bt.StringTable(e)},extractAsync(){return new Promise((n,e)=>{Bt.extract(),n()})},pack(n,e=0){return ic.pack(n,e)},read(n,e=!1){return ic.read(n,e)},write(n,e){ic.write(n,e)},clear(){ic=null},getStringCount(){return ic.getStringCount()},getByteLength(){return ic.getByteLength()}};class qC{apply(e){throw new Error("apply not implemented, is that OK?")}writeHookCode(e){const t=HA(),r=t&&t.MAINFS_READ_ADDR;if(!r)throw new Error("Cheats were being applied, but the ROM adapter had no MAINFS_READ_ADDR");let i=this.HOOK_ROM_START_OFFSET+4;const a=A_(this.HOOK_RAM_START_OFFSET);e.setUint32(i,en(`LUI A1 ${32768|a[0]}`)),e.setUint32(i+=4,en(`ADDIU A1 A1 ${a[1]}`)),e.setUint32(i+=4,en("LW A1 0(A1)")),e.setUint32(i+=4,en(`LUI A2 ${this.HOOK_CACHE_DEFAULT_VALUE>>>16}`)),e.setUint32(i+=4,en(`ADDIU A2 A2 ${this.HOOK_CACHE_DEFAULT_VALUE&65535}`)),e.setUint32(i+=4,en("BNE A1 A2 11")),e.setUint32(i+=4,en("ADDU T9 V0 R0")),e.setUint32(i+=4,en("ADDU S7 RA R0")),e.setUint32(i+=4,en(`LUI A0 ${this.MAINFS_CHEAT_FILE[0]}`)),e.setUint32(i+=4,en(`JAL ${r}`)),e.setUint32(i+=4,en(`ADDIU A0 A0 ${this.MAINFS_CHEAT_FILE[1]}`)),e.setUint32(i+=4,en(`LUI A1 ${32768|a[0]}`)),e.setUint32(i+=4,en(`ADDIU A1 A1 ${a[1]}`)),e.setUint32(i+=4,en("SW V0 0(A1)")),e.setUint32(i+=4,en("ADDU A1 V0 R0")),e.setUint32(i+=4,en("ADDU V0 T9 R0")),e.setUint32(i+=4,en("ADDU RA S7 R0")),e.setUint32(i+=4,en("JR A1")),e.setUint32(i+=4,0)}}const Aie={WRITE8:128,WRITE16:129,IF8:208,IF16:209,IFNOT8:210,IFNOT16:211};class U1{static parse(e){const t=U1.splitInput(e);if(!t.length)return wt("Gameshark code string was empty"),null;if(t.length%2)return wt("Gameshark code string was malformed"),null;const r=[];for(let i=0;i<t.length;i+=2){let a=parseInt(t[i],16),o=parseInt(t[i+1],16);if(!a)return wt(`Invalid code instruction: ${t[i]}`),null;const s=U1.getCode(a,o);if(!s)return wt(`Could not parse code: ${At(a)} ${At(o)}`),null;r.push(s)}return r}static getCode(e,t){const r=U1.getOpcode(e);if(r===null)return null;const i=e&16777215|2147483648;return U1.opcodeHas8BitValue(r)&&(t=t&255),{opcode:r,addr:i,value:t}}static getOpcode(e){const t=(e&4278190080)>>>24;if(!t)return null;const r=Aie;for(let i in r)if(!!r.hasOwnProperty(i)&&r[i]===t)return i;return null}static opcodeHas8BitValue(e){return e==="WRITE8"||e==="IF8"||e==="IFNOT8"}static splitInput(e){return e?e.match(/\S+/g)||[]:[]}static printCodes(e){for(let t=0;t<e.length;t++)console.log(`${e[t].opcode} ${At(e[t].addr)} ${At(e[t].value)}`)}}class fie{constructor(){this.REG1="A3",this.REG2="AT"}compile(e){let t=[];for(let a=0;a<e.length;a++){const o=e[a];let s;const l="compile"+o.opcode;if(typeof this[l]=="function"&&(s=this[l](o)),!s)return wt("Error compiling code",o),null;t=t.concat(s)}const r=new ArrayBuffer(t.length*4),i=new DataView(r);for(let a=0;a<t.length;a++)i.setUint32(a*4,t[a]);return r}compileWRITE8(e){return en(`
      LUI ${this.REG1} ${this.getAddrUpper(e.addr)}
      ORI ${this.REG1} ${this.REG1} ${this.getAddrLower(e.addr)}
      ADDIU ${this.REG2} R0 ${e.value}
      SB ${this.REG2} 0(${this.REG1})
    `)}compileWRITE16(e){return en(`
      LUI ${this.REG1} ${this.getAddrUpper(e.addr)}
      ORI ${this.REG1} ${this.REG1} ${this.getAddrLower(e.addr)}
      ADDIU ${this.REG2} R0 ${e.value}
      SH ${this.REG2} 0(${this.REG1})
    `)}compileIF8(e){return en(`
      LUI ${this.REG1} ${this.getAddrUpper(e.addr)}
      ORI ${this.REG1} ${this.REG1} ${this.getAddrLower(e.addr)}
      LB ${this.REG1} 0(${this.REG1})
      ADDIU ${this.REG2} R0 ${e.value}
      BNE ${this.REG1} ${this.REG2} 4
    `)}compileIF16(e){return en(`
      LUI ${this.REG1} ${this.getAddrUpper(e.addr)}
      ORI ${this.REG1} ${this.REG1} ${this.getAddrLower(e.addr)}
      LH ${this.REG1} 0(${this.REG1})
      ADDIU ${this.REG2} R0 ${e.value}
      BNE ${this.REG1} ${this.REG2} 4
    `)}compileIFNOT8(e){return en(`
      LUI ${this.REG1} ${this.getAddrUpper(e.addr)}
      ORI ${this.REG1} ${this.REG1} ${this.getAddrLower(e.addr)}
      LB ${this.REG1} 0(${this.REG1})
      ADDIU ${this.REG2} R0 ${e.value}
      BEQ ${this.REG1} ${this.REG2} 4
    `)}compileIFNOT16(e){return en(`
      LUI ${this.REG1} ${this.getAddrUpper(e.addr)}
      ORI ${this.REG1} ${this.REG1} ${this.getAddrLower(e.addr)}
      LH ${this.REG1} 0(${this.REG1})
      ADDIU ${this.REG2} R0 ${e.value}
      BEQ ${this.REG1} ${this.REG2} 4
    `)}getAddrUpper(e){return(e&4294901760)>>>16}getAddrLower(e){return e&65535}}function Kp(){return window._PP64instance}function vr(n){vt.dispatch(hre(n)),Qp()}function Dk(){QC(ue.MOVE),_A(null),Kp().setState({aiTree:null}),Qp()}function Yp(){Kp().setState({aiTree:null})}function Fk(){vt.dispatch(_re(bt.romIsLoaded())),Qp()}function QC(n){vt.dispatch(pre(n))}function qp(){return vt.getState().app.currentAction}function $a(){vt.dispatch(YI())}function f4(n){vt.dispatch(KI(n))}function Tk(){return Up(vt.getState())}function ms(){const n=vt.getState(),e=rl(n),t=Tk(),r=[];for(let i in t)e.spaces[i]&&r.push(parseInt(i,10));return r}function JC(){const n=vt.getState(),e=rl(n),t=ms(),r=[];for(let i of t){let a=e.spaces[i];r.push(a)}return r}function bk(n){vt.dispatch(_8({spaceIndices:n}))}function X8(n,e,t,r){vt.dispatch(zE({connections:[[n,e,t,r]]}))}function h4(n,e){let t=gh.None;n&&(t=e?gh.Board:gh.Library),vt.dispatch(Cee({id:n,type:t}))}function Pk(){return Hee(vt.getState())}function hie(){return zee(vt.getState())===gh.Board}function XP(n){vt.dispatch(qI({eventIndex:n}))}function _A(n){vt.dispatch(gre(n))}function io(n){vt.dispatch(Fre(n))}function tn(n){vt.dispatch(Tre(n))}function Zl(n){let e;const t=new Promise(r=>{e=r});return vt.dispatch(bre({message:n,onConfirmed:r=>{e(r!==void 0)}})),t}function c2(n){let e;const t=new Promise(r=>{e=r});return vt.dispatch(Pre({message:n,onSubmit:e})),t}function KP(){Kp().forceUpdate()}function pie(n){vt.dispatch(mre({notification:n}))}function mie(n){vt.dispatch(Sre({notificationKey:n}))}function Rk(n){Kp().setState({aiTree:n})}function Sie(){vt.dispatch(Kc.ActionCreators.undo())}function gie(){vt.dispatch(Kc.ActionCreators.redo())}function Qp(){vt.dispatch(Kc.ActionCreators.clearHistory())}let d2=[];function Lk(){d2=[]}Lk();function _ie(){return d2.reduce(rG)}function ZC(n){n=n||{};const e=n.endInsts,t=_ie();let r=t.byteLength+(e?e.length*4:0);const i=new ArrayBuffer(r),a=new DataView(i);let o=0;if(fr(i,t,o,0,t.byteLength),o+=t.byteLength,e)for(let s=0;s<e.length;s++)a.setUint32(o,e[s]),o+=4;return i}class xie extends Ne.exports.Component{constructor(){super(...arguments),this.inputEl=null,this.state={showApplied:!1},this.applyCheat=()=>{const e=this.inputEl.value,t=U1.parse(e);if(!t){tn("There was an error parsing the entered cheats");return}const i=new fie().compile(t);if(!i){tn("There was an error compiling the entered cheats");return}d2.push(i),this.inputEl.value="",this.setState({showApplied:!0}),setTimeout(()=>{this.setState({showApplied:!1})},3e3)}}render(){const e=Cie();let t;return this.state.showApplied&&(t=B("span",{className:"gsApplied",children:"Applied!"})),Xe("div",{id:"gamesharkView",children:[B("h3",{children:"Gameshark Cheats"}),!e&&B("p",{children:"Embeddable Gameshark cheats are not supported with this ROM."}),e&&Xe(Aa,{children:[B("p",{children:"Paste cheats in the box below to embed them in the ROM."}),B("textarea",{ref:r=>{this.inputEl=r},rows:10}),B("button",{className:"patchBtn",onClick:this.applyCheat,children:"Apply"}),t]})]})}}const vie=new class extends qC{constructor(){super(...arguments),this.MAINFS_CHEAT_FILE=[0,137],this.HOOK_ROM_START_OFFSET=832768,this.HOOK_RAM_START_OFFSET=829696,this.HOOK_JUMP_ROM_OFFSET=84596,this.HOOK_CACHE_DEFAULT_VALUE=1986359841}apply(e){const t=new DataView(e);this.applyHook(t),this.writeHookCode(t)}applyHook(e){const t=en(`J ${this.HOOK_RAM_START_OFFSET+4}`),r=[e.getUint32(this.HOOK_JUMP_ROM_OFFSET),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+4),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+8),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+12)];e.setUint32(this.HOOK_JUMP_ROM_OFFSET,t),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+4,0),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+8,0),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+12,0);const i=ZC({endInsts:r});dt.write(this.MAINFS_CHEAT_FILE[0],this.MAINFS_CHEAT_FILE[1],i)}},wie=new class extends qC{constructor(){super(...arguments),this.MAINFS_CHEAT_FILE=[0,140],this.HOOK_ROM_START_OFFSET=863168,this.HOOK_RAM_START_OFFSET=860096,this.HOOK_JUMP_ROM_OFFSET=666680,this.HOOK_CACHE_DEFAULT_VALUE=1180792172}apply(e){const t=new DataView(e);this.applyHook(t),this.writeHookCode(t)}applyHook(e){const t=en(`J ${this.HOOK_RAM_START_OFFSET+4}`),r=[e.getUint32(this.HOOK_JUMP_ROM_OFFSET),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+4),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+8)];e.setUint32(this.HOOK_JUMP_ROM_OFFSET,t),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+4,0),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+8,0);const i=ZC({endInsts:r});dt.write(this.MAINFS_CHEAT_FILE[0],this.MAINFS_CHEAT_FILE[1],i)}},yie=new class extends qC{constructor(){super(...arguments),this.MAINFS_CHEAT_FILE=[0,149],this.HOOK_ROM_START_OFFSET=686128,this.HOOK_RAM_START_OFFSET=683056,this.HOOK_JUMP_ROM_OFFSET=498328,this.HOOK_CACHE_DEFAULT_VALUE=1986359841}apply(e){const t=new DataView(e);this.applyHook(t),this.writeHookCode(t)}applyHook(e){const t=en(`J ${this.HOOK_RAM_START_OFFSET+4}`),r=[e.getUint32(this.HOOK_JUMP_ROM_OFFSET),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+4),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+8)];e.setUint32(this.HOOK_JUMP_ROM_OFFSET,t),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+4,0),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+8,0);const i=ZC({endInsts:r});dt.write(this.MAINFS_CHEAT_FILE[0],this.MAINFS_CHEAT_FILE[1],i)}};function Eie(n){const e=d2.length;if(!e)return;switch(bt.getROMGame()){case Qe.MP1_USA:vie.apply(n);break;case Qe.MP2_USA:wie.apply(n);break;case Qe.MP3_USA:yie.apply(n);break;case Qe.MP1_JPN:default:console.warn("Cannot write cheats for this game");return}wt(`Applied ${e} Gameshark cheats`)}function Cie(){switch(bt.getROMGame()){case Qe.MP1_USA:case Qe.MP2_USA:case Qe.MP3_USA:return!0;case Qe.MP1_JPN:default:return!1}}const A1={6101:6101,6102:6102,6103:6103,6105:6105,6106:6106},Bk=new Array(256);(function(){let n=Bk,e=3988292384;for(let t=0;t<256;t++){let r=t;for(let i=8;i>0;i--)r&1?r=(r>>>1^e)>>>0:r>>>=1;n[t]=r>>>0}})();function Vie(n){function e(_,v){return _<<v|_>>>32-v}const t=Fie(n),r=Die(t);let[i,a,o,s,l,c]=[r,r,r,r,r,r];wt(`CIC.fixChecksum -> Bootcode: ${t}, seed: ${At(r)}`);let d=new DataView(n),h=64,f=4096,m=1048576,g=f;for(;g<f+m;){let _=d.getUint32(g);c+_>>>0<c&&s++,s>>>=0,c+=_,c>>>=0,o^=_,o>>>=0;let v=e(_,_&31)>>>0;l+=v,l>>>=0,a>_?a^=v:a^=(c^_)>>>0,a>>>=0,t===6105?i+=d.getUint32(h+1808+(g&255))^_:i+=(l^_)>>>0,i>>>=0,g+=4}let x,E;t===6103?(x=c^s,x>>>=0,x+=o,x>>>=0,E=l^a,E>>>=0,E+=i,E>>>=0):t===6106?(x=c*s,x>>>=0,x+=o,x>>>=0,E=l*a,E>>>=0,E+=i,E>>>=0):(x=c^s,x>>>=0,x^=o,x>>>=0,E=l^a,E>>>=0,E^=i,E>>>=0),d.setUint32(16,x),d.setUint32(20,E),wt(`CIC.fixChecksum -> CRC1: ${At(x)}, CRC2: ${At(E)}`)}function Die(n){switch(n){case 6101:case 6102:return 4174007772;case 6103:return 2743625561;case 6105:return 3743872054;case 6106:return 535454074}throw new Error(`CIC._getChecksumSeed: Bad bootcode ${n}`)}function Fie(n){let e=64,t=4096-e,r=new Uint8Array(n,e,t);switch(Tie(r)){case 1634772129:return A1[6101];case 2428202165:return A1[6102];case 184880864:return A1[6103];case 2562468998:return A1[6105];case 2898810890:return A1[6106]}return A1[6105]}function Tie(n){let e=n.byteLength,t=4294967295,r=Bk;for(let i=0;i<e;i++)t=(t>>>8^r[(t^n[i])>>>0&255])>>>0;return~t>>>0}var uo={exports:{}};(function(n,e){(function(t,r){r()})(wA,function(){function t(c,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,d,h){var f=new XMLHttpRequest;f.open("GET",c),f.responseType="blob",f.onload=function(){l(f.response,d,h)},f.onerror=function(){console.error("could not download file")},f.send()}function i(c){var d=new XMLHttpRequest;d.open("HEAD",c,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function a(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(c,d,h){var f=o.URL||o.webkitURL,m=document.createElement("a");d=d||c.name||"download",m.download=d,m.rel="noopener",typeof c=="string"?(m.href=c,m.origin===location.origin?a(m):i(m.href)?r(c,d,h):a(m,m.target="_blank")):(m.href=f.createObjectURL(c),setTimeout(function(){f.revokeObjectURL(m.href)},4e4),setTimeout(function(){a(m)},0))}:"msSaveOrOpenBlob"in navigator?function(c,d,h){if(d=d||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(t(c,h),d);else if(i(c))r(c,d,h);else{var f=document.createElement("a");f.href=c,f.target="_blank",setTimeout(function(){a(f)})}}:function(c,d,h,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof c=="string")return r(c,d,h);var m=c.type==="application/octet-stream",g=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||m&&g||s)&&typeof FileReader<"u"){var E=new FileReader;E.onloadend=function(){var C=E.result;C=x?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=C:location=C,f=null},E.readAsDataURL(c)}else{var _=o.URL||o.webkitURL,v=_.createObjectURL(c);f?f.location=v:location.href=v,f=null,setTimeout(function(){_.revokeObjectURL(v)},4e4)}});o.saveAs=l.saveAs=l,n.exports=l})})(uo);const bt=new class{constructor(){this._rom=null,this._u8array=null,this._gameId=null,this._gameVersion=null}getROMGame(){return this._rom?this._gameId?this._gameId:this._rom.byteLength<64?null:(this._gameId=String.fromCharCode(this._u8array[59],this._u8array[60],this._u8array[61],this._u8array[62]),this._gameId):null}getROMBuffer(){return this._rom}clear(){this._rom=null,this._u8array=null,this._gameId=null,this._gameVersion=null,l0.clearCache(),dt.clearCache(),Bt.clear(),Ln.clear(),Z0.clearCache(),Rr.clearCache(),W0.clearCache()}setROMBuffer(e){if(!e)return this.clear(),!1;if(this._rom=e,this._u8array=new Uint8Array(this._rom),this.byteSwapIfNeeded(),!this.romRecognized())return tn("File is not recognized as any valid ROM."),this.clear(),!1;if(!this.romSupported())return tn("This ROM is not supported right now."),this.clear(),!1;Lk();let t=this.getGameVersion(),r=[];return r.push(l0.extractAsync()),r.push(dt.extractAsync()),t===3?r.push(Ln.extractAsync()):r.push(Bt.extractAsync()),r.push(Z0.extractAsync()),r.push(Rr.extractAsync()),t===2&&r.push(W0.extractAsync()),Promise.all(r).then(()=>{const i=l0.getInfo(0);this._rom=this._rom.slice(0,i.rom_start)})}saveROM(){if(!this._rom)throw new Error("Cannot save ROM, buffer was not present");let e=this.getGameVersion(),t=this._rom.byteLength,r=_0(l0.getByteLength(),16),i=_0(dt.getByteLength(),16),a;e===3?a=_0(Ln.getByteLength(),16):a=_0(Bt.getByteLength(),16);let o=_0(Z0.getByteLength(),16),s=_0(Rr.getByteLength(),16),l=0;for(e===2&&(l=_0(W0.getByteLength(),16));t+r+i+a&32768;)a+=4096;let c=new ArrayBuffer(t+r+i+a+o+l+s);fr(c,this._rom,0,0,t),Eie(c),dt.pack(c,t+r),dt.setROMOffset(t+r,c),e===3?(Ln.pack(c,t+r+i),Ln.setROMOffset(t+r+i,c)):(Bt.pack(c,t+r+i),Bt.setROMOffset(t+r+i,c)),Z0.pack(c,t+r+i+a),Z0.setROMOffset(t+i+r+a,c),e===2&&(W0.pack(c,t+r+i+a+o),W0.setROMOffset(t+r+i+a+o,c)),Rr.pack(c,t+r+i+a+o+l),Rr.setROMOffset(t+r+i+a+o+l,c),l0.pack(c,t);let d=HA();d.onAfterSave&&d.onAfterSave(new DataView(c)),Vie(c),this._rom=c.slice(0,t),this._u8array=new Uint8Array(this._rom);const h=new Blob([c]);uo.exports.saveAs(h,`MyMarioParty${e}.z64`)}romIsLoaded(){return!!this._rom}getDataView(e=0,t=0){if(!this._rom)throw new Error("ROM not loaded, cannot get DataView.");return t?new DataView(this._rom,e,t-e):new DataView(this._rom,e)}getGameVersion(){if(this._gameVersion!==null)return this._gameVersion;let e=this.getROMGame();if(!e)return null;switch(e){case Qe.MP1_USA:case Qe.MP1_JPN:case Qe.MP1_PAL:return this._gameVersion=1,1;case Qe.MP2_USA:case Qe.MP2_JPN:return this._gameVersion=2,2;case Qe.MP3_USA:case Qe.MP3_JPN:return this._gameVersion=3,3}return null}romRecognized(){return this.getGameVersion()!==null}romSupported(){let e=!1;switch(this.getROMGame()){case Qe.MP1_USA:case Qe.MP2_USA:case Qe.MP3_USA:e=!0}return e||!!tr(In.uiAllowAllRoms)}byteSwapIfNeeded(){if(!this._rom||this._rom.byteLength<4||!this._u8array)return;let e=this.getDataView(),t=e.getUint32(0);if(t===2151092800)return;wt("Byteswapping ROM...");let r=this._rom.byteLength-this._rom.byteLength%2,i=this._rom.byteLength-this._rom.byteLength%4;if(t===931151890)for(let a=0;a<r;a+=2)[this._u8array[a],this._u8array[a+1]]=[this._u8array[a+1],this._u8array[a]];else if(t===1074935680)for(let a=0;a<i;a+=4)[this._u8array[a],this._u8array[a+1],this._u8array[a+2],this._u8array[a+3]]=[this._u8array[a+3],this._u8array[a+2],this._u8array[a+1],this._u8array[a]];else if(t===306217015)for(let a=0;a<i;a+=4){let o=e.getUint16(a+2);e.setUint16(a+2,e.getUint16(a)),e.setUint16(a,o)}}};function bie(n,e){for(let t=0;t<n.length;t++)switch(n[t]){case Qe.MP1_USA:case Qe.MP1_JPN:case Qe.MP1_PAL:if(e===1)return!0;break;case Qe.MP2_USA:case Qe.MP2_JPN:case Qe.MP2_PAL:if(e===2)return!0;break;case Qe.MP3_USA:case Qe.MP3_JPN:case Qe.MP3_PAL:if(e===3)return!0;break}return!1}function jo(n,e,t){if(e&&e.events&&!!Ss(e,n)){const r=Ss(e,n);return oo(r.language,r.code)}return t[n]}function fi(n,e){const t=Object.assign({id:n.id,activationType:n.activationType,executionType:n.executionType},e);return n.custom&&(t.custom=!0),t}function Pie(n,e){let t=bt.getROMGame();const r=Gn();for(let i in r){const a=r[i];if(!a.parse||a.supportedGames.indexOf(t)===-1)continue;let o=a.parse(n,e);if(o){if(a.fakeEvent)return!0;let s={id:i};return o!==!0&&(s.args=o),s}}return!1}function Rie(){let n=[];const e=Gn();let t=P0().game||1;for(let r in e){let i=e[r];bie(i.supportedGames,t)&&!i.fakeEvent&&n.push(i)}return n}function Lie(){let n=[];const e=Gn();for(let t in e){let r=e[t];r.custom&&n.push(pu(r))}return n}function Bie(){const n=jre();return Ne.exports.useMemo(()=>{const e=[];for(let t in n){let r=n[t];r.custom&&e.push(pu(r))}return e},[n])}async function YP(n,e,t,r){let i=new DataView(n,t.offset),a;if(e.custom){const o=Ss(t.board,e.id);if(!o)throw new Error(`A space had the ${e.id} custom event, but its code wasn't in the board file`);a=await Z$(i,e,t,o.language,o.code)}else a=Wp(e.id).write(i,e,t,r);if(a===!1)throw new Error(`Could not write ${e.id} for game ${t.gameVersion}`);return a}function Mie(n,e){return n.supportedGames.indexOf(e)===-1}const Iie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAABACAMAAADlCI9NAAAC+lBMVEUAewAAfQAHgAIAggMAgwAAhAAAhAcAhQAAhQgAhgAAhwAAhgoCiAAAiA4FiQAAjAEJigAAjQMAjgAAjgUAjwAAjwcAkAAOjAMAkQApeIYAkQoDkgAoeJlmZaRhZqpuZJlXaLdyZJQjfI8seokAlQAHkwAme5UgfosbgIaYXmiBYoVeaLIAlgAzeJOOYHdsZqB6ZItLbb8qfYRTa75iaacxeo8weKYAlwELlAAnf4AufIp9ZYYse5xNbcYmfpGIY3w7dqUAmAN4ZpEpfZemX1cve6E6eKBwaZcsf4ZHcM4AmgA2e5Y4eps/ctaXY2u5XjpPcMONZXo6e52RZnCQZnWjY11BdNi0YUZScculZFmsY1VDddnDYDOYaGiuZFDFYS5EdtqqZlBQdtZGede0Z0m8ZkBIeti+ZzpJe9m6a0GFdIhLfdvGbTNXftiycU2vdE7QbiqtdFnFcTVRg9tagdrbcBXOcyvRdCXXcx9chdi1eVOAhJNfiNvQeSfSeiDXeSFiit7pewfcfRymhmJrjNpkjtvffxPtfQChim/bgR5nkd5wk9vriAB0lt7liR70iQB2meHwjADkjhTxjQt+mt3hkRTkkwPxkgB6n+HklCTtlQ+Cod2FpOH1mwflnxOHpuPsnwPaojKOqN/mpQT3ogCRquLsqQDxqACTreT4qAHqrQDprROcsOKVsuOYteWfs+X0sQmft+L5tACguOTrugyiuuXuvAD5ugCkvOj2uCSrvuStwefwxAb2wwuvwui1xOX3yQC3x+e5yerAy+bBzejDzun60iHz1wzEz+rF0ez72BXL0uj52Cb62TTN1evP1+3K2u763zjR2e/V2enX2+vS3uzZ3e3a3u746TTV4vDc4PDa4uvg4ev560Hb5Ozi4u386lzj4+7d5e7k5e/e5/D87G3771f671/m5/Hg6fHk6ez68Gj58G/l6u3r6e3m7O7+8X/t6+/n7e/p7vD+84/q7/L69Yjw7vLr8PP99Zfs8fTv8e7t8vXw8u/sQzplAAAAAXRSTlMAQObYZgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+AGBwI1KFwHwhkAAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAAAB5JREFUaN7twQEBAAAAgiD/r25IQAEAAAAAAAAA7wYgQAABv4PgLgAAAABJRU5ErkJggg==",Oie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AYHAwgS8SE5IgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABBElEQVRYw+2XvQ3CMBCFv0SIghWoIJQUTAEtNCmAASgZhRn4K9KQFqZIQQmiYgUKCqAxKLLsBBNwpJAnWbqcnqMn3/meDP8O5xnM+h0HGAF1iXMDNtMwOsSTGfgAq2kY3QEqMc4YmGuETgBPymXhO8ACwLV42p4qjp/AErgDbWnjBVgrfmjKV+IlQNRk+e5GU74Obt63wKaAqyq2KSAATmIFqjnQAnbisyvfYxsl8IGGWH4ePVDVxIVpwuQ58Gu84wW/RqoXHDWxdS8AWFnvgW/N9tILSi8ovaC4XiB6ZKAQfY7PdlO+iRdsgWbCA2fxCd+mF6SWIM0LesAQqEn5/Zf4f4oHrZpgBbrOefMAAAAASUVORK5CYII=",kie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAABkCAYAAACvgC0OAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIVESUAMoBcTwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAd0lEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM8GhxMAAVx5XvcAAAAASUVORK5CYII=",Nie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOIAAAAkCAYAAACUoeZ+AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoIFwUvmlv9hQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAANklEQVR42u3BMQEAAADCoPVPbQlPoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgY39EAAEijVlTAAAAAElFTkSuQmCC",Uie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAyCAQAAAAUheqRAAAAWklEQVR42u3QgQAAAAACoPeXXmGAQqjhVgWyZMmSJUuWAlmyZMmSJUuBLFmyZMmSpUCWLFmyZMlSIEuWLFmyZCmQJUuWLFmyFMiSJUuWLFkKZMmSJUuWLAW/ARZDADMgQmY+AAAAAElFTkSuQmCC",jie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAuCAQAAAB0KHTVAAAAPklEQVR42u3PQREAAAwCoNm/9N5W8KABuREREREREREREREREREREREREREREREREREREREREREREREREWkPdQwALzYIU8AAAAAASUVORK5CYII=",Gie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAADwCAYAAABxLb1rAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AYHAjYGq/ycFQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACdUlEQVR42u3UQREAAAjDsIF/z6CDI5HQRyvJBOChlgAwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBAxQAsAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBAwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQMEAJAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEDBDBAAAMEMEAAAwQwQAADBDBAAAMEuGMBVV0C3yrcQ0UAAAAASUVORK5CYII=",Hie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAADwCAYAAABxLb1rAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AYHAjUz1mIL9QAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACdUlEQVR42u3UQREAAAjDsIF/z6CDI5HQRyvJBOChlgAwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBAxQAsAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBAwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQMEAJAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEDBDBAAAMEMEAAAwQwQAADBDBAAAMEuGMBVV0C3yrcQ0UAAAAASUVORK5CYII=",zie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAADwCAYAAABxLb1rAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AYHAjYUWEXtXQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACdUlEQVR42u3UQREAAAjDsIF/z6CDI5HQRyvJBOChlgAwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBAxQAsAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBAwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQMEAJAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQAADBDBAAAMEMEAAAwQwQMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEMEMAAAQwQwAABDBDAAAEDBDBAAAMEMEAAAwQwQAADBDBAAAMEuGMBVV0C3yrcQ0UAAAAASUVORK5CYII=",Wie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA8AAAALQCAYAAABfdxm0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woNAgQc5I+JAwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAOdUlEQVR42u3XMREAAAjEsAf/nkEDK5dI6NZKMgEAAIDnWgIAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAAAZYAgAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAABlgCAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAADDAAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAADDAAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAAADDAAAAAYYAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAACAAQYAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAwAADAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAAGCAAQAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAwwAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAAAGGAAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAAAAAwwAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAgAEGAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAABggAEAAMAAAwAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAABhgAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAAAMMAAAABhgAAAAMMAAAAAYYAAAADDAAAAAYYAAAADDAAAAAYIABAADAAAMAAIABBgAAgJsFIskGn8IwzvgAAAAASUVORK5CYII=",Xie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABIAAAANgCAIAAADbKYQBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AYHARAotrKspwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAALZElEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8GZYDAAHxit3TAAAAAElFTkSuQmCC",Kie={default:{boardselect:Iie,boardselecticon:Oie,boardlogo:kie,boardlogotext:Nie,boardlogomedium:Uie,boardlogosmall:jie,largescene:Gie,conversation:Hie,splashscreen:zie,bg:Wie,bg2:Xie}};var eo=(n=>(n[n.InGame=0]="InGame",n[n.Custom=1]="Custom",n))(eo||{});function K8(n=1,e=G0.NORMAL){const t={name:"Untitled",description:`Use your Star Power to finish
this board.`,game:n,type:e,difficulty:3,spaces:[],links:{},events:{},audioType:0};switch(n){case 1:t.bg={width:960,height:720,src:!0,fov:17,scaleFactor:1,cameraEyePosX:0,cameraEyePosY:1355,cameraEyePosZ:1780,lookatPointX:0,lookatPointY:0,lookatPointZ:0},t.otherbg={boardselect:!0,boardlogo:!0,largescene:!0,conversation:!0,splashscreen:!0},t.audioIndex=24;break;case 2:t.bg={width:1152,height:864,src:!0,fov:3,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:1570,cameraEyePosZ:1577,lookatPointX:0,lookatPointY:0,lookatPointZ:0},t.animbg=[],t.otherbg={boardselect:!0,boardselecticon:!0,boardlogo:!0,largescene:!0},t.audioIndex=54,t.costumeTypeIndex=dn.NORMAL;break;case 3:switch(e){case G0.NORMAL:t.bg={width:1152,height:864,src:!0,fov:15,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:300,cameraEyePosZ:300,lookatPointX:0,lookatPointY:0,lookatPointZ:0},t.audioIndex=41;break;case G0.DUEL:t.bg={width:896,height:672,src:!0,fov:15,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:210,cameraEyePosZ:210,lookatPointX:0,lookatPointY:0,lookatPointZ:0},t.audioIndex=0;break}t.otherbg={boardselect:!0,boardlogo:!0,boardlogotext:!0,boardlogomedium:!0,boardlogosmall:!0,largescene:!0};break}return e===G0.DUEL?(t.spaces.push({x:200,y:200,type:de.DUEL_START_BLUE}),t.spaces.push({x:t.bg.width-200,y:t.bg.height-200,type:de.DUEL_START_RED})):t.spaces.push({x:t.bg.width-200,y:t.bg.height-200,type:de.START}),Yie(t),t}function Yie(n,e="default"){const t=Kie[e];switch(n.otherbg.boardselect&&(n.otherbg.boardselect=t.boardselect),n.otherbg.boardselecticon&&(n.otherbg.boardselecticon=t.boardselecticon),n.otherbg.boardlogo&&(n.otherbg.boardlogo=t.boardlogo),n.otherbg.boardlogotext&&(n.otherbg.boardlogotext=t.boardlogotext),n.otherbg.boardlogomedium&&(n.otherbg.boardlogomedium=t.boardlogomedium),n.otherbg.boardlogosmall&&(n.otherbg.boardlogosmall=t.boardlogosmall),n.otherbg.largescene&&(n.otherbg.largescene=t.largescene),n.otherbg.conversation&&(n.otherbg.conversation=t.conversation),n.otherbg.splashscreen&&(n.otherbg.splashscreen=t.splashscreen),n.game){case 1:n.bg.src=t.bg;break;case 2:case 3:n.bg.src=t.bg2;break}}function Mk(n,e={}){n||(n=K8(e.game||1,e.type||G0.NORMAL)),e.rom&&(n._rom=!0),kk(n),vt.dispatch(HI({board:n,rom:e.rom})),Kp()&&Yp();const r=Oee(vt.getState());return(e.rom?r.romBoards:r.boards).length-1}function P0(){return rl(vt.getState())}function qie(n){return KE(vt.getState()).indexOf(n)}function Jp(n,e){vt.dispatch(nee({index:n,rom:!!e})),Dk()}function Ys(n){return!!n._rom}function $C(n,e,t=P0()){return Array.isArray(t.links[n])?e==="*"||e===void 0?!0:t.links[n].indexOf(e)>=0:t.links[n]!==void 0&&t.links[n]!==null?e==="*"||e===void 0?!0:t.links[n]===e:!1}function Zp(n,e){if(n.boardevents)for(let r=n.boardevents.length-1;r>=0;r--){const i=n.boardevents[r];e(i,r)}const t=n.spaces;if(t&&t.length)for(let r=0;r<t.length;r++){const i=t[r];if(i.events&&i.events.length)for(let a=i.events.length-1;a>=0;a--){const o=i.events[a];e(o,a,i,r)}}}function eV(n,e,t){Zp(n,(r,i,a,o)=>{const s=jo(r.id,n,e);if(O0(!!s),s.parameters)for(let l=0;l<s.parameters.length;l++){const c=s.parameters[l];t(c,r,i,a,o)}})}function Qie(n){vt.dispatch(Dee({event:n}))}function Jie(n){vt.dispatch(Fee({eventIndex:n}))}function Zie(n,e){vt.dispatch(Lee({event:n,toStart:e}))}function cs(n,e,t,r,i){if(e.events=e.events||[],t&&(r?e.events.unshift(t):e.events.push(t),t.custom)){const a=jo(t.id,n,i);p4(n,a)}}function $ie(n){vt.dispatch(Bee({eventIndex:n}))}function Ss(n,e){if(n.events){const t=n.events[e];return typeof t=="string"?{language:y0.MIPS,code:t}:t||null}return null}function Ik(n){vt.dispatch(Tee({event:n}))}function p4(n,e){if(!e.asm)throw new Error(`Attempting to add event ${e.name} but it doesn't have code`);n.events[e.name]={language:e.language,code:e.asm}}function eae(n){vt.dispatch(bee({eventId:n}))}function tV(n){if(n.additionalbgcode){const e=n.additionalbgcode;return typeof e=="string"?{language:y0.MIPS,code:e}:e||null}return null}function tae(n,e){vt.dispatch(pee({code:n,language:e}))}function nV(n){return n.audioSelectCode||null}function nae(n,e){vt.dispatch(mee({code:n,language:e}))}function Ok(n){const e=[],t=r(n);function r(l){return pu(l.spaces)}function i(l){if(t[l]._seen)return!1;if(!n.links.hasOwnProperty(l))return e.push(l),!0;t[l]._seen=!0;const c=n.links[l];let d;if(Array.isArray(c)){for(let h=0;h<c.length;h++)if(d=i(c[h]),d)return d}else if(d=i(c),d)return d}const a={};for(let l=0;l<t.length;l++)t[l]&&(a[l]=[]);for(const l in n.links)Pa(parseInt(l),n).forEach(d=>{a[d].push(Number(l))});function o(l,c){return c===void 0?!!a[l].length:a[l].length?a[l].indexOf(Number(c))===-1||a[l].length>1:!1}const s=A2(n);s>=0&&i(s);for(let l=0;l<t.length;l++)!t[l]||t[l]._seen||!o(l)&&$C(l,null,n)&&i(l);return e}function kk(n){"game"in n||(n.game=1),"type"in n||(n.type=G0.NORMAL),"events"in n||(n.events={});for(const e in n.events){const t=n.events[e];typeof t=="string"&&(n.events[e]={code:t,language:y0.MIPS})}if(typeof n.audioType>"u"&&(n.audioType=0),n.audioData&&!Array.isArray(n.audioData)&&(n.audioData=[n.audioData]),n.game===2&&typeof n.costumeTypeIndex!="number"&&(n.costumeTypeIndex=dn.NORMAL),rae(n),!("fov"in n.bg))switch(n.game){case 3:n.type===G0.DUEL?Object.assign(n.bg,{fov:15,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:210,cameraEyePosZ:210,lookatPointX:0,lookatPointY:0,lookatPointZ:0}):Object.assign(n.bg,{fov:15,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:300,cameraEyePosZ:300,lookatPointX:0,lookatPointY:0,lookatPointZ:0});break;case 2:Object.assign(n.bg,{fov:3,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:1570,cameraEyePosZ:1577,lookatPointX:0,lookatPointY:0,lookatPointZ:0});break;case 1:Object.assign(n.bg,{fov:17,scaleFactor:1,cameraEyePosX:0,cameraEyePosY:1355,cameraEyePosZ:1780,lookatPointX:0,lookatPointY:0,lookatPointZ:0});break}return n}function rae(n){Zp(n,e=>{"parameters"in e&&delete e.parameters,"supportedGames"in e&&delete e.supportedGames,e.asm&&(e.id=e.name,n.events[e.id]&&n.events[e.id]!==e.asm&&console.warn(`When updating the format of ${n.name}, event ${e.id} had multiple versions. Only one will be kept.`),n.events[e.id]=e.asm,delete e.asm)})}function Mu(){return Nee(vt.getState())}function iae(){return KE(vt.getState())}function Nk(){return kee(vt.getState())}function Uk(n){vt.dispatch(uee({bg:n}))}function aae(n){vt.dispatch(dee({bg:n}))}function oae(n){vt.dispatch(Aee({index:n}))}function sae(n){return n.game===2}function lae(n){vt.dispatch(fee({bg:n}))}function uae(n){vt.dispatch(hee({index:n}))}function cae(n){return n.game!==2}function qP(n){vt.dispatch(tee({boardIndex:n})),Yp(),Dk()}function rV(n){vt.dispatch(iee({makeCurrent:n})),Yp()}function dae(n){vt.dispatch(aee({name:n}))}function Aae(n){vt.dispatch(oee({description:n}))}function fae(n){vt.dispatch(see({difficulty:n}))}function hae(n){vt.dispatch(lee({costumeType:n}))}function Os(n,e){vt.dispatch(cee({name:n,value:e}))}function jk(n,e){vt.dispatch(yee({spaceIndices:n,hostsStar:e}))}function pae(n){vt.dispatch(See({audioChanges:n}))}function iV(n,e,t,r,i){if(i)return Gk(n,e,t,r,i,Gn());{const a=P0().spaces.length;return vt.dispatch(xee({x:n,y:e,type:t,subtype:r})),a}}function Gk(n,e,t,r,i,a){const o={x:n,y:e,z:0,type:t};r!==void 0&&(o.subtype=r);const s=u2(i.game||1);return s&&s.hydrateSpace(o,i,a),i.spaces.push(o),i.spaces.length-1}function Hk(n){vt.dispatch(vee({index:n}))}function m4(n,e=P0()){return e.spaces.indexOf(n)}function A2(n){const e=n.spaces;for(let t=0;t<e.length;t++)if(!!e[t]&&e[t].type===de.START)return t;return-1}function mae(n,e=P0()){const t=e.spaces,r=[];for(let i=0;i<t.length;i++)!t[i]||t[i].type===n&&r.push(i);return r}function Mr(n,e=P0()){const t=e.spaces,r=[];for(let i=0;i<t.length;i++)!t[i]||t[i].subtype===n&&r.push(i);return r}function Vc(n,e=P0()){const t=[];return Zp(e,(r,i,a,o)=>{a&&r.id===n&&t.push(o)}),t}function L0(n){if(typeof n._deadSpace=="number")return n._deadSpace;const e=iV(n.bg.width+150,n.bg.height+100,de.OTHER,void 0,n);return n._deadSpace=e,e}function Sae(n){return n.spaces[L0(n)]}function Pa(n,e=P0()){return n<0?null:e.links?Array.isArray(e.links[n])?e.links[n].slice(0):typeof e.links[n]=="number"?[e.links[n]]:[]:[]}function zk(n,e,t){n===e||$C(n,e,t)||(t.links=t.links||{},Array.isArray(t.links[n])?t.links[n].push(e):typeof t.links[n]=="number"?t.links[n]=[t.links[n],e]:e>=0&&(t.links[n]=e))}function Go(n,e,t){t?zk(n,e,t):vt.dispatch(gee({startSpaceIndex:n,endSpaceIndex:e}))}function gae(n,e){vt.dispatch(WI({spaceIndex:n,angleYAxisDeg:e}))}function Sc(n,e,t,r,i){const a=n.spaces[e];cs(n,a,t,r,i)}function Wk(){const n=HA();if(!n)return;const e=n.loadBoards();for(const t of e)t._rom=!0,vt.dispatch(HI({board:t,rom:!0}));Yp(),Qp()}function Xk(){vt.dispatch(ree())}var Kk,QP=ls.exports;Kk=QP.createRoot,QP.hydrateRoot;const _ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAaCAYAAAC6nQw6AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AUIFDcJJTAFgQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAC8ElEQVQ4y62UW0hUURSGvz1Ok8ZUo441GUZQWjN4IbU6RRBhZUEQQRcxkh5SJKWCLnSB6CFpAnuREUQosGiK6IIEZZiUgXIKogulRoFJqGOZjhcmnbLdyzlDes4EQgsOLPb+17/3+ve/DvynEGaLUkp3q9fbBtBXUQnA/DPHAFh78qRHCNH+TyIp5QLgGpAHcG+2cxJ4x0i/njYB+4QQvaa3kCbRUFYmG8rKZJRwT7qRlHImMADMmqY0ISBBCDFu0RZKW73e6ZKg1ZRGFu7aE+Vde+K/WjBtWa8DsEY77cfAAK9qa2m/7gfAvbeQFSUlxCUkmOJNiUYDARpT0wHQy/oqKmmoqGTTx3fYXS5DjUV71iMA+T4fAC3nz0fVRd/TsXqtLnaNbjiA0as3oxL9vafV1ERaE0KMSyk9QBuAvaiAUJ05mb2oIJJrLh+P6uzRQCBP12hqaBoZnG06a28b/e1zHMnLvzxs5sOt2wAs272TlK3rGQ72dGRuKnSbvlo4qF4BFgF7bQ6lLzTUPxYa6meGJ570c8URcKDrLcCYVpMPVAN+m0M5q4u9QhvUwGBPa0GVP+FJNLE7Om2nwkF1G9AALNF1FRq7FTgMVLaoYXbtHyQn00qNdxbfuz8BkLhwKQdP/+D1+18/O98kzbBYBMANrQs56bRwUJ174vgz1emql5nZjwxjsXFLs3S66uWD+y+bwkF1tcGQetgcytDNO8M5AKtyjaOQt2EeABcuDWXbHMrzqEROV/2SUGjCCpCRMddAlJ0dD0B7x4jD6apPikoEHNCTtNTZBqK0VLsp1owoTk9SUuIMRPPnxUZyh7UvxaeY+xCAo1np/nU5dfLrtzHT/9DmNZdlRW6i9ClIn8ILn0KMwdk+hWSgGyB+sYesPYekZ3vxgBAWCdwBqqrXiPdTznaXq3RMbW2xngx+buPpxdJTFkuMUwiRJIQoFUK0ARf/wvcCXWY3sgArgVjte1yuMjG1fZ9CuoarK1f5DfAHsaqBy6LXGC8AAAAASUVORK5CYII=",xae="data:image/png;base64,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",vae="data:image/png;base64,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",wae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAbCAYAAACJISRoAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AUIFDUny9BqzAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFLklEQVRIx7WVWWxUVRjHf+cus3W2zjBYaOmCZcoi0JYpDIuOaKJCVAQToyiEEMUljhoxuL3JgxEyYkyUGME9RBLxQTT4YhQIWJiyCEKQta0tLS3ThWlnprPc44MttrVUIPFLbnK/c8/5/++3/Y/gJiwcDqvAdOC1R/Vox/x3a58bbb+4QfAiYLXP53tjxYqV5sLCIo69PhdgcSAS3XWtc9p1ANuAZXa7fcPy5U+MS6TmEKiOD9+2HXDeEEk4HNaAgNPp3LhkydIFVVVVKIpC3WEHAHWHHcOJHKP9qDYIWAATXS5XeMmSh16orKwSiqJcBR1uA2uBDXGOrJs9ajZEOBz2OByOxxctWvxOMDjXOgB8LdDBNhBNP8m3gUj04RFJksm+nMlkUq6n8IOJBqern0QGItERcRSr1ay2trZ4Ozpib6VSqRbDMORoBAPggwmrNhy84U6lufmiqbGx6YGOjs5oOp3N5HJSHojaZS4nrz7D/bq1NbJubc0dI0Yy0mJh4fh0cXHRTo8nv8Zk0nRVFUJhd0VLS8vn8Xi8U0o5JF09PVffv7mpORmwmppZp4FVA/7WrVtd8+YteNbnG7NGCKUI0AEf/6fVvjynqG5tjbxpWQkF/XnAS0AlkAUMENt21/7xw5Dm+Jvko0Ak+swNkYSC/ruBLZqqlUopDUDRdZ1UXypTUlr2lNfr277pg69S/SQGIAKRqLjumoSC/gpge3FhqdfmsdHm7lKshgVzQiPRkdAbG+o/TvT2znxy5YPrtnzxXRbYA4SuO12hoL9YUZQDtxZPKjg7tZmD5cf/+WhAyaUCJtcV09UQk3l59lfi8SubIvNdVqAXKAlEoo2jtnAo6LcDe8onVhRcmtjFr/aj5FpzyG4D2W2Qu5jlvGzi8NwzuAryRTrdt36Mb+wtgUg0MUiVrz0noaBfADvLSstLOsfH+WlaLQgDOgwApJSQlGAWtHs7uVDdjhTSlkmnv3nw3tm39Ecy57+GcbnZZL4z3+vhl8lREKDkqWATCJeCsCkIq0D1qiDgTFkDlmo3mXRmfjKZfD9ryMjwMgxxFs6bfJ8Q4vsZU2ep+Y+VcKjvCOl0H16zh6ZEE6pQMWsWLKoFv6uCC5fP4nC76bx8Gcd+labas4Yh5fMb59o/BFYHItFPh3TXsvsXOGOX276cMbVaXf3Mi0yZWYlhGBi5HJquk0olkRjomglN01EVFcPIoSgKmUyGA9697Or7Wtlft3d9X05iVsV7wFASq9U6C/CW+6cwrbKaU7//RjLRy7gJJWQzGZobGnDl5+P2eIi1tVFQNAEpJSaTjsPpZlYgyKF9exCKYjckMcD7r3Qtu3++80p317mp5dPHTJk+k8b680jDwCLiZLJgNWtYzDq6WaenJ0FvwsCkS1TrWAqLJ9Ld3cGf9Re40HzuxJtTsm8DXwF5gUg0MaQm9y2sXJjJZLYhZcGksgp8dgPZdYxsDkJzxuHI00BCbyLLT7WtaCrYfNNojZs5U38ak8XaXlRYFNz8yY7z/RKzKxCJLh7SXT/+fPRnd777NkVTPz117qTsSmoUFJdzV3AcHqeGroKmgtupsej2AuYFxmMoKqfOnQAhYl6vZ8bmT3ac74eTwL0jysqOnftioaD/aZPJpJ84e3K5rk1XssJGtkVgMWdIpzXs1gw9KZ1Yj87B4ydRNL1N1bRln23b1ToIqh4oG1VW1qxaauvu7nwk1t6+3uVwFg5cyqL/iAR6eq9kEWIv8Go63Xd4d+1pY5Ai3wHsBu75C02TFjHiU24WAAAAAElFTkSuQmCC",yae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAATCAYAAACORR0GAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AUIFCUsFsChFQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABoUlEQVQ4y83VP2tTcRTG8c+91/wpCcEK9Q4GUy5cO2WQ4iauCi73TTi4C06+A8F3Ir/JRQRXoZk6KBZDA0VwcUgjIkkTlzvEGpvEBvFZfst5zpfnHDi/yBKFECKkeITHaKGHV3iD90VRfFvWJ7qgeQP38AR30IRmswk/RqPRpCz/jgO8wDucFkUxXQoqIU9xH7fRaLVaye7ubtTpdMRxDKbTqcFg4Pj42HA4HOMUH/AWz87DFoHq+FqpVGp5nsdZlkmS5MKxnJ2d6ff7jo6OpuPx+AtuFkUxma+JF/iq2ErTNM7zfCkEkiSR57k0TWPs4DfTItBVqFQq1lXpuYLaKqAmVKvVtUFznuq/SAT1VUDbUKvV1gbNeVZKdG0Do1tpRzsbSFT/r0DXNwDaWhkURdHaoDlP40JQCKGNhy6v5yGE2kJQCGEbHxHt7e39NaH03sJBCKH6y1EtD+lnbHe7XVmWXSpOv993eHio/DbuFkUxiUIICQa4sb+/r91u24ROTk70ej14jQdRCOETsnPLnGFSvlF5KKPZbPan5S/UXP3Ln1wicL3HHXm6AAAAAElFTkSuQmCC",Eae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wgIFDAK/sSzNQAAAOlJREFUOMulUisOwkAQfUMQKOzWowhqb9EL9BAkHAHJETbhEAhQhFtUkSp8a1G4QTTTnf0BCS/ZZH7vze5rCQXs12CdHzpQbo5K5GoR1vpXXoR+IX8Syd2AAcDZsLhr8xzKkQUiosgJj7Rh1QJobgMA4FSbiehsWO9f3th56c3NbQBq42MFmd+vwbNDBxJF2QAAxpipJrH0tKH0zfkSki+yXYGdBZ8vVyaACWPuLKb8fLmys+DtKjQ7EJDh0okFKBaReLMMF9yfPj4+PG+uhzRJE3KCyQ2cTd+1a8f+p94Mf4KiX5fjDd96bzdmbCX2Hz2VAAAAAElFTkSuQmCC",Cae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wcbAS4QDfZ7qwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAUklEQVQY02NkYGBgOO8p/Z8BBzDc/pSR5byn9H/p6jm41DCcZ0j5z4IsUBLuC2f3rNwMZ7MgK0CWQObjNAkZoChCNgmrop6Vmwm7CZ9JjMSEEwDdJSCFKylBwAAAAABJRU5ErkJggg==",Vae="/assets/eventerrors.dd87e65b.png",Dae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wkKACgsIpREBgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAXElEQVQY02NkYGBgsLVS+M+AAxw+9oCR0dZK4f+lSw9xqWHQ05NnYEIX/HDPHEMhEwMRgAWbCTC2gNJJVJNgAtj4GNahK8ZQBFOArpDx/1M2BrtQKZzhdGj1M0YAeUwag5E1WdYAAAAASUVORK5CYII=",Fae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAPCAYAAADphp8SAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoJEC0vevUizwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADM0lEQVQ4y3XTzU9cZRTH8e/z3HvnzgwzzFyGlylDhwHpQCFtJxR1xAUSFzYxMdFFk3ZlTNq4MLGJC/8AdiZqXLgxjTFqGt361o0kbbEV24LWmlYKlqFQQoEpHRnm5d65z+NCmxK1Z/s7+eQszk/wmBnLZ5uAU0AOaAAKxJnz03Pf7t67+taTAIjHIM8Dp03DzGitFSAty6JWr3ndmZ4TiUTbl+9/+HltN2T8D9IPnE2nMp0d6SR+1hROVytO3MG2Q8bqneUXG54XHc3nJmevzamToykAzH8haSnluSfS+xILg3e53Hf9Uaig+16SAZm2ikubp2q12spYPvvew1juQiLAhb7e/uS93gf8GPkFf81HlxS6pPBXG9zWK8w+M08s6QjXrU+0trUz8u6VR9BYPiuAr3syfd1bndtMDk2DUHBfAaC1hqoGW7CR2GJxeAMtdNhz3R9eeuGpFqDp4UXH7YD9nJNo4dzAFRAgmwwIC0RMIsISERIYCQMEzPcsERyO47nes9Vq9URD6YoYHx04IoT45uDgYcM51s1M/Wdct07CbmGlsoIhDGwzSNAIko31s7i5QDQeZ2tzk+glg5XpBaW0fsNUSn12cHDYeO31N9l/KIdSCuX7mJZFrVZFo7DMAKZpYUgDpXyklHiex0+JKc7Wv5CXrk5NmECiL7ufodwwv/92jWplhz17u2l4HneXlog5DvGWForr6yS79qK1JhCwiDbHOTySZ+biBYSUEdOyrOIfczdbP/rgHe4UbqOVIii28RoQsk2CtoVlW5TLFXYqioClMULtpNK9lEr3WS4s4sSdBXFkPDfued4ZtE7u6+mnLaLQD36l4cPY03uINpmgYafSYHJ6DdOAcNsQa9s284VbBIKhja5UV95YKKwVhg9lP3E9r219cy0XiyVFJtXEyICN02xiSJACQkFJpjNMsqOZ1e0IMzduIg2z2N7RfuD0p18ti10PaQUCgY993z+eGzgg0611Gr4gaHu4rkkk5FGuWRTLFpev30AY5rppWq989/3Mxf+U9uSrL4dLpa2jxY2NiVi0OaU0/zT77zUNlHf+bCDEFPC269Znz0/fUgB/AcTfQEpIAfiTAAAAAElFTkSuQmCC",Tae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAhCAYAAAC803lsAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AYOAhw74fdTpgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAGXElEQVRYw82Yf1DT5x3HX98EEoIJCRgiCWBjqpCAY05FncUe1axaj1ZEPL3e6datnXM7u117u+F19ZwdhbNczys7Xa8d1x3d1XbT2unWrutx7Qq3LpeuziqE3pRAIfFHgGDQgOTH/iDfGOI3Edp/9rl77vnm+fH5vJ/P8/n1BP5PSEg3aW0w5wP3JgzdBKbmKGPE1ey+crdFGWlAZKmVml6r0ZbrdDu+0ilXmldNfzSw2tWcnoksBQgBOAHkAlRbN8wZRN2K7VSV3I/L2wPQZW0wm+YMBNgDbB6fDOB0OxAEgb3r92HUmu4KwKg1sXf9PkZvjnLk/RbGJwOi5j+3NpjVs7YRa4O5FHBJCahdsY0eTzc2U1m8z5Rn8kfHcbxjHqqtG7CZyjj16Qm8Yx4peWeBSlezO5Q8IU8CoQTOA9nJC8cnAwyNDLLngZ8wcSuIZ8xD5xf/oLxwKSUFpTzyra1osjRcGDrP+aFzqQ5eAHxTX6V709fpT2usrwP6VFy8Yx5Gb45w+N3n42Mv/f1FAI7ufpXDf3levIp0tAX4FXBA0kasDebHgPp0HJ78zlN0dH8gOfdZv5PWXb+drS0/a20w195xNRtfqLYsWVDSUV+5g4HhfslTHaprYvGCkrgGkunf/U5MukKGRgZnoxWAnfoq3Ulfp/9qHEjufRqXXp0/r3j+QkoKSqlctBq1UoPb14daqeHZLYc4cHI/f/7s7bSc1UoNek0+bl9fWq2qFNk8VFGDs8/xmL5K97Kv038zA2B8ImBwuh2IgcuoNVFqtHGoronhcR+dX3yEKlPFonwLS4sqKC/8BqUFVoryitGqdACMBf0MjnyJRpWDIcfA+cFz9F27hC47l1KjDQCbqWzaVQWBU5+eAMiKeVKREAteESl3vXzdS03FFn74wI9ZvGDJV4quntEh/uR8k16vix7PBUm3djW7hYzkWGLUmti+aidalY76yh0oMhQIwvSSaDR6OwAJQvy31LfYF+YVEY1GuR68zndf2ZkqviATPceoNVFt3UDtim3kaww8+u1dKDIU8YUi82RhicDSUY4qh7ef/CtLiypSA1lpXsWO1Y8iCALHOlrjdzkjBCecetapXWLPwdpfp8y+EUEQAq9+9LImndslqltKA8kaktoDoM7SICbSXm9P/KpkrmZ3aKNGuWi5Lu826lO/vOtp56odkY5/8gcO1TUBULtiG0BbPOl90vZ9vWGh8VrX1QEaz308HWmNNn7/xHFyVDl3GGuyQaYzVrEXjTVWFpApkxG+FXq4u2XgTDzEy+QyGcB9hoW0r9vKgqx5uLw9rHluGY+37cbZ55ihAfE7uZcac/Y5eLxtN2ueWxYHsUpfyPF19aObzgy8N6MMcL6+x5hXoI/7VTgS4TcuB3/zXIwLUGWq2F9zAEOOgSvXr6QMaIGJAP3Dbk4636Lv2iWCU8EZNcfT5WtZb1xEJBy5uHhj0+IZ2Vcmk80oB+QyGT8tW8NaQzEHz35IFAhOBfGOeTjW0ZoyFiTWLd2eCzPGbVo9B5dVo8lUiqiG78i+OkOepOVV6gtpX1dHgUodr87SgUhFTyxZTsvKB2+DmLYln1Q9Ik/FJE+p4pW1D9M+8N9ZCRWBGrUmMkLjNC23k6dUScUYv1Q9Mgx8mYq5XJDxvXtKGD7TjurGVLwJEWkXPtbRyqZ8A8fW1EiCiNHoHRqx2BtvXPrgGUs4HG6Vy+U/SrXTJtdEx989mzKWi7AKzIWR7fZyWRrFTQBvSFZoFntjaMnG5r3BwI37o9FoUGq3QqlIlCdZiQsQUWQpImlAHAZyLfbGrrTPifKtRz7udXxeHJoKdSXPZU4LEFtUooWBCZU6e0QCwHtAscXe+AuLvXFiVu+azc+cHj599I3qcX/g54njKnX2DcAP3IoJjSQAmALGgEHNfF2/uCcSDvffmpisstgbH7LYGwfn+sDi6dMDoYr6l1ou/qe3LBwKeQE0uTm+WEXVB1wGRmLtCtAPdAMfzjfm90cj0Qn/1eF977/2Tom1pqXraz3CRXphc1Huph9sOyrIhPK2/Ud+B5gBAzAv5vqBmDYGgItrt6wXXP8698+Ryz7Piy5CX/vfgER6ykpW3c92rT55pN0DzAfyYzWnDAjGwFyLuaUfmJwtiDkBSQCUAWQCqoSrDcVsZAqIzAWASP8DYeONZ5tnFGIAAAAASUVORK5CYII=",bae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AYOAhMCOWrHYQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABeklEQVQ4y9WSu0qcURSFv/3/DjI4hkS8DaPGJggGLG2sLJ3Cx9AH8B1EQbAVtBTMExhtU4RIsAjqKGI7OoroiOJlZs5ZFnPxGvP7d1mwyv2ddfbaxhuSCIAk0CmQQR6omCGiSsIkMhIjTkx5kXNCTsiLdYlxiV6JMAqsSWLCiY065Ll91ZtOTDvR8S9gujYgF8G+wpxE6nWYJ/TXfHNRYTVLDL0K9CITNdkTcJk9f0dbnRM0iLcsEkdNDCjBWO0iMAAV+OS7OCOmzIGFpM0oVBMuE5iIrxD0iy8PhYC57ffvr+GfSLP0NHZoIMuxETvhb5Y45+RJKXbMQizYHwjambUZStWO6t8usm6noATQXLO9ASqDCfSDVe1W0/F4RJOEKrJGL0kG6dEAfaQwUsBHwAEXwA1YCXRI0fa5sDxZmyf3AtgAj5KilSEChtVCN/18VpqvOEqWZ4cjClxxaZ49X2Er+MCBreD+CnzxQJZWEnQDjhIF+841/7XuAeg3RZ8rEsomAAAAAElFTkSuQmCC",Pae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAPCAYAAADphp8SAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoJEC83W6/YGwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADGklEQVQ4y3WTTUxcZRSGn+9+9373XuYfLlBmEFqFYawzLUUbibXBJqSpmmqqSReuutLElYsmxrgxcenCha6NLmziyoURN7gotKYxysL/ghRaYkIZJpTL/N1/F0RipJ7tec6TnOR9Bf8zs5XRAeFHn4soqSCIgTg25GfzK/feexgvHyoZf+SqbAVzdsiYiJKsHiW5NFo+7AbPna+Vh184VV28vnyn++8bcUhSHrmgN/25Sioj+kyTHikRgBfHbHkev7suRwYKS4X+3jMffnvzQKb/RzKtmsHX1UxOlGybglIHuzhJyOj7+O2tnalWFH4BvHxINDsxMiibweKpbE7rtyy8OGaz28XUNACaYYgUgvFUCi+KuO92Xjr02mxlVNPaQeOknckPWRaOaXK/26Xh+wxZFgANzyOvFI5psu15fNdooHpMN0ibU2+MZfY0ABHGH6cjkR+yLHKGAUBKSmwpKShFSkpMKXFMEwDHNHmqUCBoe9luq/NRGCfb8nxl9Kry4ndOF4vi2WdOkxExvUKnVCxSAvKmiZPNctRxKFUqpDyPwWNH6ZUxmpLcdffGbzTaRT2w5LvV2glx6c23eOzEJFG3Q7i3h6ZJAteFJEEohW6aCMOAJEbaPcQCsjcWaH/1JQu//HBZi02ZG516ksrZGe5srPPH2iotpdjxOqytLFPfrtMJfDb+XKEd+LSEoCsFZp9D9fkXyU+USSzDErNnn6gfH6s5j9dOcm9tlSSOscQeQQi2IbGVjqEMmq02zW6CUiDtAUojj7Lr7rCxvsbaX6u/igvnJs8FQXCNJDkyfmyC/nRM8uAnwghmnh4i3aNDAu12yPytTXQJqf7jbDYtVtaXUZZdHy4NTwuAVy+e6XNd94PA96/UylUxMehSHmyRy+zHLElACGh3Qlq+xtKGw8LSbaSuGkPFYvXTa99sHlRkZrpsKKU+iaLotclKTRtxPMJIYJkBvq+TtgOaXYNG0+D7n39DSH1L141X5uZ/vHmoa69fudSzu7tzuVGvv5/LZEtx8k9q97EEaLbcECEWgbd931u6fms5Bvgbl1M4Ei1dt9kAAAAASUVORK5CYII=",Rae="data:image/png;base64,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",Lae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AsMFC0SLyofgAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAByUlEQVQoz52SzU4TARSFv5lph6mN0hCs02orf1pr1ESDqYWUSAxEaToxbprIY7BgbXwAw0ZfQxsJLjQxaaz1D5OWatRICwJaoMNoQ610nLohE0vZ6F3e3O+em3uOABAb6mnyD5XOlAQhNtTTTGdKdrOrUyKeuIDn8FnGRnRkYZ2HsyVm59YprpjsCiHu3ZZMBpmaOkW9tkH2pUnwxDkmrkeJXuojeMRhz7WA/X0Kk5Nn+FYWebfwHlVtMvdok5mZFUxcRM67EIU9oCDAzWQvkWg/uv6D0dGjJLQQC/lVIhc7uH0rQO9xBWv3G7a2X3Wixf04nE60xACaJlOp1DjUaTI27sejbPHiVbX9VMNo8DH3Fau2htv9G7cbAgEn09ODDMeC5Od1ch/qNmgrbv+Eu/c+47AaxG+c5oBXRRAlfD4Ja8cg+7yCsU07CPAs/wtvqkw43M3B4io4nHi8CkufDJ483eRvs1tASYThET/h6DH0RZ10xiCVKvC2UCNfNFtsa7EjNCBz9ZqKZegsLe8weNlP06W0QW2K41e6ORnqoLr4newbg8d3cryer+4bOxt0SODrkigXytx/UKEhyyx/qbNWsfYFhf8N+R87/Z8lqf2EpQAAAABJRU5ErkJggg==",Bae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AodFw0F7v4Z9gAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADzElEQVQ4y2WTb2hVZRzHP89zzrn3nHvPNu/dPW3TYWttK1uhzHBIGpF/kGAGBvoiqRyEEYkSIRQU6pvAVlEhCGUziNELmUJ/DCzfFEb0oiY0dc7NFkq3cx3bvXf3nnv+Pb2Yuwz7vXp4eL6f7+/fIwBecJyEDpsF+BFcOu260YuOo9XiWAckIBTEhhDxl4WCvzeXE0khnlLQHME3X7iuJzY2NvJIMjno6PqpCNxbQbAxJcRMAAfu07QnNCG6BWQUTBTj2J2LorcCpe50JBJnJGy9E4avF+P4I70nmezJatrQy9ksF8pl54rnWaGUb/anUke32TaNUmJKSTGK2qeDgNH5+bW3g+A1R9PMLbbN96XSB1O+P6YnhXipP53OdFoWKyoVLCmPrjPNZ/dns6Q1DQCUosUw6DZNUkI8PFosnsrpenqtaVKJY2aCYL8u4bGHkkmIY7baNr2mueuBRGIRohT1uHvetPjmfgloUtIgJQJ0GcL4b5UKAM2GwUytxqVSiWoU8b8Qguuex9dzc9hSAvBdqYSv1FlZieO3Ly0sXDw3Pw/AyUKB7VNTbLh2jX/DEISoc47cvk3P+Djv5vPc9H3OF4vcDIKznlJfyZFCwc+H4aFp3w/COGZo1SoeNU2ueB4js7OLICG4XK1yPJ8no2kcdBwetCymfZ98GL43UiiE2vO5XEOzrp/YnE6v6UkmaTYMOhMJHF3nndZWhBCLzU4kSEvJk7bNgZYWAIpRxN9B0N5tWaNav22/st6yDu5ZsYKlIrpMkw7D4BPXZVM6jSYlJ/J5tjU0MJDN1pvfmUjwVxB0zUbRdanBwMZUatEZmIsiVBzjGAYK6hn9Xq0iAC8MmQ2CesmPWxYabJe+UufOzs9Tvjul3VNT9F29Sk0pjqxciX7X4OTq1WQNg97xcXZPT9fX4Q/PI1QqL4dd98SE77963HXJhyEZXScfBDw9MVGHKyACBm7coKYUa0yTSCk+LhT4pVIZqSl1uD7bXdnsnu5k8sPnGhvbGqRkx+Qkm2ybnU1NRMBkrcaPpRLH2tqoKsWY55V/rVSGgGOjs7OKfY5T35NnMpnBzzs6iqqvT/3Q1aV2NjWpdZal+ixL9Zqm+qm7W6m+PnWms3NhRyZzeEm3z3HQh12XfY7DsOtiCfHzn55XueX7DVuamlifSjHueUjAlJJ1qRTlKGLM8xbSQlxcggy7LuLeX7A3lxts1fVPN6RSst0w6vcSmPJ9Lnse+TB8f9h131iu05enN+y6JIQ4/U8YfnuhXD6k3WMSQaUax5/pQrjLNQD/AToWsEsMdZoIAAAAAElFTkSuQmCC",Mae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AkWAwEWTXvhWQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADWElEQVQ4y62UT2hcVRTGf+e9+96beTOTzCRlGko6pRSrUk3QRJmoJGo3FcUuug4FsSRQ8A+0axWsy26CtINUitkpFhSkLgRtV6N0ipmFYii0nRY60YmZZCbz570777qYJDZ26wcHDpx7vns4fN8RgLH5HOWLFbZyhSGHMIeQNzABIFDCUMRQQKiUL1b0w72yi2Qud1AMH2nXzGq3R9fXdJIagFhT4bUUKrBRgSwa4YNyoXJ7m0zYwvhcbtrAZ+2B8HB9pEM9s0loacRsPRGQHqTXEgyvJIhvOMsCp5YKletb5f4kwPeNPd3DtQMtGtLgmT3PMuqPEhFt/4UgLNWX+HOtyr57GVI1bxk4Vi5UbsvYfE5JxOetwXC2+liTRq/BwvQCV+9d5cujX7EZNvmXSVhpVTn+w3Gq9Sqjt9L4686isXhLYchp18zWRzo0rAbnp85z+snT1IN1EsonoXweRtpNMzPyMpebl6mPdHDbatYO5UMLYU67PZrDXehBPptHRLDFBkBHmqAXEET96BndrxloDnfRbg+EOYWQ7/qayDIo5XDm5zMUXirgWA4AF36/wO3GHWIqTiPY4LX9x/BsDwxElqHra7y2yisDE52kRgxoHXJu8hMu/XGJO8276Cjkxwc/8cb+1zmSeYrFW1+w8NundHQbZSnEQCepSa0yYe1agIEhL8O5yY8JoxADZGNZThw8wav7XmEq+wK2WBgM/4UlUIo1Fdty8WwPXyWYGZnh3SPvUOvWeO6b53n6yhhnfzlLPptnfGgcHWmM9IUqUFIYil5LTVuRoByHk9dOUnyziDYaX/lcOfo1oQmRLe0KwnvF90HAigSvpcBQtDAUVGCTXPVQyuFG7SZT307tjBxXcQacAVJOipSTwrM9eqYHQr8nsMFQUAgVFchiuhqbbadCxHUo1W7y699LPDH4OIcGDqEjvUPcibpcr14jrmOkq7G+7ywqj1jkrwObfW0Y6ARtHtmrBb6Js7cysMsiNsBKab0+MjlYdlvqxdimGjY2hH4P21U4ykE5Drbr4NoumXqSbCVJYs1dFjhVLlSWAOyx+RwrN9ZZKa3f3Ts5+J3bsYfiDXc8VfOIbziowCbWdMg8iDN83ye1GsNr2YsIb2+T7JyR/+Ow/QPGU3wz8jXdngAAAABJRU5ErkJggg==",Iae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoEAgYVJ0Gp1wAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADk0lEQVRIx72WbUxTVxzGn/+9tw4UzAKlty19iYwCmihYdGXLtkiWmOyLiZ9M3IQaY6LBqoUggq+ED1P34oBF3VxYeTG4L9tXF9wys8wsUzTWd8WE0pbeFgtG5E3oPX4AbJFKi7L+P957zvmd5//cc89DiFFksDLMo1iPg6C3Am5H1PdC1KfTEzJLzxi06eNfH9oUItDkgozR0tRkRfI7iwgI7+X5eAibbWcQYNYjcDtqXwel125VvcWel5v57d2/voTOYof3oRQhgwFMnjFcl6tD9+UTMBZVwusJboXU6ogGpajKtCWOlSsMpc6OOoiFNgT8gwBHc/dSlqFRv4veq/UwWMrh9g0ch9ux/1Xo7FU0W44UrFp29PqFWqjMu/A4OAzG4rORiCBmpMJ3tR7Gogr0uALbIbX9FDmGe6lsso2/WNaYjl6/cAii2Ya+wLO4YVP+QpKeQLNmD1z/foOsLPVZ6Eq/i2SEFWpLTnz4fk7lP78dQIa5DMHgyLxgrypVKVMgdTYg++N9eNQllUFqPQUAlJS9nR99Ovzrp8X5Gy6eL4PKXIm+wFBsz2KVzCCKSyF1NsD0URW6XP5T8DSXERmsrPiD5fjjfAWUq23o7x99Y2VzKTUWVUy4ff0CBwC15RuZsnAXgn3DCwab9tTvfwqdxY6G2i/k8EcDhuCj4Nu3MVpxBO8DH3iBKAL4fxeDwPOJBAICz3GJAzJAEHgktKU8R1xiW5pQhQzgeS6BwMExKBQRCokIokkEZLbwsOcT+Pv2QTjveMLAHdXNJF1phEqVAqKFPfymPA0e3BhlVvuP/Swkp3Gsx0G37rpbC9Yfhv/a98hIX7wwSmUZy4zpuHiuCjtqmkcEhVAAb8vApIe9LSU3bnVX509B31YpgZD1nhLtDTtZ9idVw+MjY5aJ7iY39Nap+zAcLX5eucJgdXbUQV1ogz+eaBFFWWZmGrouHYdq9e7Q0Mj4Z7KrqWPmjT+dOXpbtt687dq3vLgGUmcjRDF1XkqJCHpDGpy/10E07wkNDgytl11NHS8TxaxjobcCvtav7j3s/SFvXTWkzkaolEvi81SWoRZT0XP5JPLW1WBwaGwv/G1/xg5R4TC1O8ekrb9/6VhcMVGbo4H3v3ro1trh9TzeDKmtPXZMnB2ETxv1ym2zgnBKsiI5aWYQZgwosZ8llyd4Eh5H+fyD8HSpPs+lJMW9uP5goxP5CLQ55xrzAsn3fS8FSjOcAAAAAElFTkSuQmCC",Oae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoEAgktiNsNhgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACgklEQVRIx+2WS2gTURSG/zt5tdPUltKOpDVzp7gQsmuzqhQECQhuxG2hWBEqCOLCBwgiuFDRhdAuG5UQsUJRV4III4IKbpy4suvOTNNKktIHbdpMzBwXbdLQpNM0KQWhB+5mLtz/fPfcOedn2CM0LhP2EWHdYASA7bLvrvo1OAKYMXwWW+MAEFJVkO2sywSG35EIvjeLL9h69krxjJpjytN6R5NPEBGRpnD6BjguTeFERPRTDtJHl+86AFRLUaggA/BJPPb6ZKDtSb9uQuMycslZuH1ex5VLzkLjMsK6ga4eafyr2PKSlZ1ZuomdGUR9nQ/6jzfdL4rlUymAaiwjY/BIEsK6AY0HkUqmb5wv5MYrCbey+NDSPlUuZs3P1S4GAESw5ue2SE1IPV1jX0R/rFyjRDjWFHg6KLlu10XmQJrgQRhzizcv/l17tik4Sq73k53vlI7mC31lZExwoZEguwBvoLskupxZip/Nrl5ixf+sf0ZvnMyJVOHbNQypKhK9yv5rVmNNE70KQqq6LUg2ITujN3yN1RuCC9kZvdQ4BBxyHAkeCf4ngkxgEBUOsgsHLkB2AaLCwYTNtn1orU1TOBgAIawbLJNeepPgQYR1Ax5JOhBSsgtls1FGPpWKhnWDCQBwLrsyNP1n7V5R1BvoBhhriKw4KTQuwzLN0YH1jdEfPu/2AB62Fh8uZFYmGyWtIEuno6cJUQAYyFmVFmPS03b3VKD1UeMWQ8aGaV4dJEz88gros+zqJmoov/x4KbP8ar+kO8msdOb5IGECwZGSmGO8dftv1WsTVcF9DQCoyjNgzkbYH2/v6hiu1QhPRyJYTS/EzmTXLu9mhPd8ivVYfaf9fxQPf4DeQh5lAAAAAElFTkSuQmCC",kae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoEAg0CR2b12wAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEhklEQVRIx6WWXWxURRTHfzO33Y92u8jWbWl1qSCIJIrEEhMDsWKNITYpwQcTMMUuBHgg2EaFBGtMjBIUX7ryIAqyhFbjRzQBAyaGNOILUVkx8UUpATal290uXWBrlbZ7Z3y43Xa33NuWOMnkJnPn3t/8zzlzzhHMMmrq2zR3MQZiEUGoFfqO2b4vsV2d+EDWhY9r4OyXe1F6gjsdr60lKQRPb9yPrAt/quLRrU5Q4XjUBS17qmvnv5+MRVi07jWuXu631ueNF0OlxlVm8ujDNZw/dIgF9W2kEplXSHYftIMKB2WfBSsrNiVjEWqf2s1AIguGsFc4qVSxskFy4YgFTQ8NR1U8umU6VNgoe7u6NvBWMtZJ6JnX6e8fQTNHN44ZPNE8xs+Rw3mlbSS7PyzcIieVAbIu/FUetqS5jWt92bnDAFwmv3wvaHxnM8lYhOraQETWhY8VMgwAsr9DTcuBqqp7tiVjnSx/cRe9f+Tyx3EwoYONhODKuTJ+ld1ciB7ho66elSN66TCJ4+es7aFWQ0rxTbDSvz4Z66R+xw5+69EgbWi3DShVGB4TT8U4pV6T4ZQHM2d3MpMNe27y7dav8z49ruLRl0X+niXOd9LwZis/dfnAk7tDjduXo/HVi5RXjk2qG7paTs8Hy8Cl7K0wUkL44zhHm76jdlX7lA/PdHWw5XQz5csv4bt/BJQoNp3UrG3vxV1uMv6vQW7UYPCSj57IUmeYKXhsU5zM6HW2nF7Pma6OKaAyNX3ZK7i9moadlyirHLVAGkrLTNbt/ROPL4fWIATcHHBz9sAyZ/+agsVr0jy4egiBpC97GWXqgigtDDSvYu2uXtwV1gVvbL+I15/LxwO3Btz8eHAplJuOsBUvXGPlhgTKFLOnNq2h1KtobO9FKfBUmJPKsoMuet5bDl5n2KLVaZasHrKFOedSwOUzi8JfSE3si4UzwlZsuMaSNc6wGYG29104++yBJ6/PCpsZONehBI80J3ioIT0rzDZoZhzC3hKBhSNzgt01UBrKoVCIuf/D+pEg5F+M0moWoLaSQn5q66lnyO9KK0L+xciJ8lYC8GzLPhLnTxA+1cyt0YxthdBaEHr8Br7gKEJY12f8HwNlSlxlpoMHBAFPkKPPn6BmVTsi7xVZF/48WFmxMRmLED7VTOZ2GimkrUIhCv2pQYAal3eoVFoR8ASJNp3MJ+/DKh7dLgoKb0d17fx381A7pYbLBG2ZUJnCChQF0igOKIFgnjswCUv1Z7aT6j5MqHVim01rMV2pNDQ/HFjG331lxVK8Js/t/ouywNiMyoqjdKLnUPHoS6nEjTcW1LcRbTpJwBNEFBy9xK2sTFMwS70mQuoinxUo26Hi0e35an/ntQi1QrJrf3pouCsPnecOTEWvdpjCUlZoxvTQ8BFS3Z9Mb6KKgVNKN6cSmd15aKW3iuHRLEYwheu+AZg/CP40+NNof5oR8xaV3qopZYnMThWPbpu9TbRphKvv9bec6epA5TSyVCOktj4SU9XFHJNIQ9DYso/B69ljKh4N330j/H9a/RnGf2IjJKXG/KwbAAAAAElFTkSuQmCC",Nae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoEAhEmnRJMVwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADb0lEQVRIx72WP2xbRRzHP3fv+W9jN7XjOCGyIoWhM3LFCBIIFot0QCwQpDiSLTZ3QCzpCkMHiFdb4EoJAwtDpAYJKTMD8VrBUohMlbgmluJQsF3fHYP/JMb3nBYiTrrB7+m+3/v8/H13P4HXSK1D7T6L6YLhBcZRtSiGa21DTFssl7Ol+blobn97EyE1iElvMVAwWvLGB5/x5PdWWR9W8l6arhcZybVcIh7JHR1ssfHdO3zzBaiewBgx2qrqSlRbQk+QWQ9wdPA1C+lCrt5e+5H6TtlGKrzIEvFI7rhaJLu3Sksf8+1Hr0K4Z992x+G1jx/S/WWFHz7/koV0gcbJmZVUjpHBiOy4WiT7YJXTdhPHkeBX/e3ZJjBzQ7H89kNev5vluFokEY/kSK7lxrTHDGv3kcvZUnIpVhqaNdsNDAajBZGlv8ArPgZ8IUXnT8nsKz+R2Xqf42qR5FKsJJezpYtllZ5knSZSyEEgYPalNhjvjLl+1RcUkvDLv/LuV+9ZSeU0shGAFlxLtL3jbEA65z97zwRq9jeyD1YnSN3FdMEY4Ohga4JspGcgPPvMu6RBNRE/geS00xyY7rJ4605OzBVyEmB/e5ONvdsTZOeGguBMz5MustDGaGF5ZWi2G2zs3WZ/e/M8NFoZaq1HE2QXRd2A9qxoJNHBeLyWQlJrPUIr84+UXjKk61FPIwjHu+cHwmU6z2vo+jXSgzIUnfL//mvDgMINKGu5AzO9qyd0/BrXZyf0h9XVEzquQfrsqo5PY67aULoG6dhVvZ7/J0MhDUJahB3jnWAvQ+kIUtEVtPH+1oQYkIjBpasEKIF0DK7fe502mlR0Ben0QyVsR5vttEHA0xM/qitBgO4NBIQhkuxYyyoQXA/EqGR2Wbx15/w2G7twB4e356nznEMbTSyYoJLZHbuQJal19GElX3/czC+kC1Qyu8SCCYSlGXCDCn9ofPpCatTXXCS7aFZ/3Mzrw0qe1Pq46jRS6Ri+v3eTP2rhiZvirU9+5lqsO5XM2mJcRuoGNITU2PSFFXKQ3mlk1hYDgPpOuXFyVh6aXg/ExtNrLFP0yYYBGZJR3ymPaVu/QwtpPDTPWbeFM1fHv3QEN55AtAHRBiba4Kk6JR6an0r2wo2w6hkcX//jFxdWGtPvT6UjePPDTy9thMX/3er/DTkg465PytpyAAAAAElFTkSuQmCC",Uae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoEAh8w90XUiAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAE60lEQVRIx72WW4hWVRTHf2vv851p1NHxm8v5yi5CUBFes6JGIiwsiiToRhEGPcxQYERE9dBTEAjSg1FEjU8VQtkVCrO8DAmpQRYkMXZ5qaxmPnXUnLzMePa/h29/35yZ0VF7aMPm7LMva+3/Xmv91zLO3sT5NZtqMZlq0TnX29nRyuaNrxDC1HqdM5bf+QTV/Yd7Qwg9/IfW3dlZltSvOVlZEekZ+8VZWSH/QZ2dZQHd56XJOddbU7ZX76WpVpqbpOBas3H/l4DeSVNJe9XZWZZzrve8kb2fptrmE60wpysxrTSnC0CPmNMWn6gNlIAcqB30sU/0USmV1H9GpMlEZO3trd2Dgzv4KF1Am8QI8LUCTzvP9c4xJxhLzHDAQ84xF2OnxCYFRoF2iQ+bFjJ48nuyrKv3wIHD1xVtahOQ9Q78uZ21Ldcyb+QUJast/y6RAm1AEueChIvjnyVOIuaZA2BE4qdSwqrj35FlS6lWh3qAdQ2FRWSvTFvE3JFTtJhxRGKWjd3puESzGdKYx44CHvCFfaMSx4HtzSkvHf2WLOviwIHD60IIPQaokpX5a+ArLsu6ePLg3yzGCMCakHOpGVdgLDZroJOEmZFLeDNGJYaBbySGEXeao8mMExJPlGfwc3UnF1aWMjA4VDu/Z/d6VSptAnSfOfUlJW3yieZR80QHeiDOb/OJtvpE23zS2LfMTLOjt3aAPo1rfUlJt5ipUmnTnt3r67IgBDEwcJBLgEddzQ5NZix1hgEB2KDAZyFgVptTtOP6EOiTOFTwwtH4rACPO8/RgYMN4mh4aSvwok9IC170oPMkwMYQmInRVve0aMe/4jNeDuTAEnPc5IwWwMW9ZeAx5yeHxd3mmDPB+EHiXnMs964mxIxDEiVghhmpxFpfExaACwoebHHszLirILN+EbyNV1bfDDCjMNenwB+IIxLrQk4JSM1oOs2507JYfXAkerokRiU+CDm/xJuqIOQe57kcoxlY5XwDSf17TOLLEBiJNiyG0DiFuxQYjgp2SLwaAhtCXnt3M0YkTsbDiRkJMDOGBMCp+H0p5LwRcobPhvAo8E8c3+wcZWCzxCch1IIeWBty9kkMShwDNoXAXkSQ2Ae8nuf0SYToHHVbbo0yJnFpEfwd5livwGshZ54ZFwHfS2zPT5ECTcAg8LA55nvH7pDzrmqCl5ljphlBIpfYqMD9RYTOGdMqbbwdnxDgdueYBZwAXg45v8XbHQMOR2UAvyL2KPB+RNEM3Bpj2ZnxB/B3x2ycG3MkVbJaOsqysla4GqNs9Yne9IkWmSkFXTMh/xX7QjM1x/GzzjdY5gufaH57q6R+VcaS+PiEm2VlPeXGaOwtn2i189riE13BZKXLzNSXlNTtnHriuS98oo0+0WMt06dMyI3Em2VlPVO46eeRGz/1ia6OSueCVpjTZz7RFp/okwK/Pue8rupoPW3JYWdKwFd23sALQ8NUChmizihHgPKE4K5nkCGJ52fPoH//rnFpaVJY1Eg89FSrQz1Z1sWP1Z183dzUoKoAHIrUV1QmaVxwr2mdTv/+nWRZF9XqUM/ECs7OVETVkX7QtIC2IPZLOGAI+FUiM+jA6Cjw7+dNJVYPf3taZOdVTG1IU232iW400zSQgUqgFtDy6DTvpek5lYl2DoVw97kUwuaM22qF8JTI7P8u9f8Feq7PzQpE8XMAAAAASUVORK5CYII=",jae="data:image/png;base64,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",Gae="data:image/png;base64,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",Hae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoEAg8xyoD2TwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFDUlEQVRIx72WX0zTVxTHP/f2R/nbSoG2ICkk4DYSNTPCls1kcdMZ55wozmRmgQm4sjcxy7YsmmxLFvaiS+TBh4ECC2QzezFiMBrjxl7MnGK2RRceBoqdo7RQhU7+/vq7e/hBKdCCvOwmN01+ved+z/ecc8/5ChItTzX42sgrrVesYg32NIo523hLLGcsC2uaXDl2b/e5Y4CR+LQApUtee/crAsNjzcZAa93Tu+ipNn/dlV735iNKKaVeOnJIsXafIm92uysUOfvnd8YBtevkQaWUUu7NRxTuSu+Cu1ZiKAtrmpzZNq+/p5HaS3sIjI7Q9WEJpEXiOzkhefvMn9iUm9bdneSW1hMcCcdlKuMxmwOr6Srn8eQj0tYokl1TEC+bhqB45whKtzA6FaKmqxx/TyPObJs3HlORiFlNVzmhySBSSISAf+6kceNsPlgWoUYEW48+wFEwZeIrg6wUZ0KmMhGz0akQUpgBUAoynDoiyVhCMMUxQ3q2Pu+0kMsylfjakIU1Te78rKZYZmpR/GzOaWyumSWAybYIKXZ9wTeFIjQZjIK687OaZGFNE742RF5pvVLA4K1TUWYqTrKkRdF9OpdnMjYRMYzZ8FgYst2g9EAIIyLiVKRgTXIWrbs7ySs7igA0gGvtx6m9tDeas3hr6l8Lod/C/BL4bOGlzh1s2GUhKWVpuOeY1l7ay7X2M7xe1WACGhGFb6yfDKs9fgPQFH/fSeZ8+wlu/nEPMUtGKTjfcYLPf/qIdVvGMfSlLKWQ+Mb6MSJm1LSV+oCQip7vXfhu26n47qSJsuCAQKasZXRgjM3vBFDGss1reUAhFb+fdzJwPRM0BZol7jlDh4HrmVisiucrgsuCyoR/WBQ959z0dztMsIXJgenFriv6ux30nHMjLWr1gOOPNPx30+OCbVynOPWxiuYyFtR/N53xR9rqAIWEYF8q0+H4hl8chspd8FzBUibTYY1gXyoJij0+oNQUvls2kAoUSGGmLyMNXlwPL280zx17DywyZlsAadpKTT190UiLItCbDobigwPwyibwD4N/BLz7IEkDw4CKV+HuPYU/ZAI6bPD1t4JAbzrSoojEGUaaCSDw2IsYmQgsfPia4JsfwOVQ1LwFrkwYn5p/GRNTcOwQWJNgKAT7PwWSWDBVDGXgsRchLWI+pNurGmh58wJZKU4EAiMicJU8MQ2t8GWzYItXcPUmyEVJmNbhk9PwQq3gdq95qavkCUZEIBBkpThpefMC26saTMDBnkYRGB5rzi2tp3V3J2uSs9BnFJ6yMMy9Jw38ARgcWTqxH/ih5aIg+HjWfUPgKQujz6hoH80trScwPNY82NMoJJ5qjIHWuqGHobo5UIfViat4EqstZuxYYWMxCGGG0J5uFlNeDuS75h2w2nRcxZM4rPMzcehhqM4YaK2LjicAhjqagyPhKNO8XDvu9WGY7Y/PeiA1GVouQuY2yNgGV341iyfbPps0XeBeHyYv175gADPU0QyAry0mQnPSzl3pnZuNhy/v4edzFvp+zKSo0EBKwV/3Y2pbh6ICQCj670uKtz1m68EIZ9+4GGXGUEdzrGxcUUQdvryHq22SwTs29LBmSgwR0+IMgZahk7chzI5qIwqWSESJRAI4lun7V8rpHfAx3JfCg1s2JnrTAUgteUJBWZic4klKCj2c2dmZkNmqhPC19uMYEbN3Sk1Fu4ihCwxdoJT5lrdXNawohMX/LfX/A/xwVlxY0R9hAAAAAElFTkSuQmCC",zae="data:image/png;base64,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",Wae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gYKESkYPWvLFwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAI6SURBVEjHvZY7ktswEERfg9wqX0GBy7XHcKoL+JNu6HBTH8OpQ4cK/TmBruKqTfYQK047AECCWv1VFhKAIMGe6emZgXj/aG44egCvH24CpuUqAwJ8/f78X8G+PS4mD+tYLhd7D/xY/T34wy8P93vfrdfPc0pPGV0SAiSNe3YO/2CfF8ODvANI9EkkiQYPWxiTLCSNBlwMWL0R0He7AMFkoGoYNr4EUMoUQgbpu0TSnFIMxgxR9g0W6ABov5fGBkyILomueFgx7UyrZIRAGdEqL0/2UEINmAR3XY5T3csOGhsUxQhX0PyPXTHtt6XfJXHXib5L47pL4vPHd0WlLQcucTQ/fz+xCTOE2QzBy5DnMNwv3uz3UBSvgCSKUKaU0PbXyrFMSXQGy0iiE4REbHnZ7xRLiVNdt6A0oCYLhPH7fCbJxCiwOWCaPYiixHpwiiENmFoDqrjGmB8eaXvj2tbhcwDDVeq5bIUnJY55UEraXIHekVInejirIp5U6JLM49yuDWETkefW6KN5GMWzVGwNG0VTrEv5agv4BJ7PRln7WOLXFqM28cv6158nlOYiqp7Z5tOHtw0bEytntCdDKcwINhGlK/hVpYmG+rp/VmlrqattZwgTQEqTSMbYtWBVWOd2i3m8xMtgkow8b8A2o3Aq7KG+eLAfjqDkupgrjreUXKgtNPrajl+t3QwuZW6iqzoSr/LyCsA6NpGzL2mSlC8oS/2+29X2aFvMsZvZSYD13niTm7eWq5td9f8BgQVfnR04AMwAAAAASUVORK5CYII=",Xae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA7wDOADmX89gzAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4gYKEiMvfX84ywAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAL9SURBVEjHvZZBixxVEMd/9brHD+BNg8JmhWTwIE7PHrwJfgA9b7wYPQgGjSisupPbRCOIhwSiJ3PKfgOPglfN9C6iMFHcVRCCJ89ud78qD/V61mxmZnsWsgXNTL9+1f/6V/2r+slTxXvGGVoO8GDyxZmAPT380AEBvvv+j8cK9srLa0cMW/vmn7eXOu2M+nPXN8fTpX6Xn/z64ZR2sZ1Rn98/KpHQrghgmMJzo+JE0NZCV7CDj0tCDiEIIYOQWfqFg0/KhezniqZL+iQHEQ9REAwDAxHBoj3is4hxvgjs16slWQ9CJpy/MUASszYngoABBia+tr9VYhFiAxcWpDnMA7v/bomIR4949JKBtGnspSv3dbIURCaYeHXvX5nMTfNchqKeQsRmIgkZSP4/lomdNr4fQIIRBJQUbFfRmCQRAmvXCwCe2R4gectMyHoegGTw7DXfszYuTpTifNGYo65/PuDPayXhCSH04NwHA/6+tUfoGQZIbZy7OuCvz3bRCrQy1q4X/PZ+iemqbWGwv7WLtcIAHny56zUNggRX7WxNDETY39p1d1uFoXIEZIIZBANTv7Tyl2tjWART8WcRNO3BOjLcHE+5eLvAzNzZQCNoY2gDWkGsBP033UewBogpyOjTp//V/LbIF83GC6Nidn+wXRIRj06ZtUrLODYGCus3itM1/nGH86OC/e1Um2hpijojTymsf9ptnnYe3rEyLKQBgKQS2Qywq4Uug3t6pcRqb3I9dHA9tFRP0Bqm73Qb4OEksJ/fKtHaiJURKwdrKoi1/7bPtIZf3pycCBqWge1dmmC1v0xriIdGU0P/ZsHFm0O0MmKdWDYe0N7ry0GX1lCb9CmIhmTe7C/cGc7E8fxoyE9vTLyGqR1UT5HSnVGfH1+7hzYuee8/84Z/REye1qb2z5LW8MOr9xayXJjSWHOUrvT/xbsbD0l/czxlcHeIVmA1xEPfp/EUbfHStxudDkub4ynD0cZq59Ljp6vLt1c7Aq6yPz9+bnzcJmd91P8PUtKe+tH5VcoAAAAASUVORK5CYII=",Kae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4gYKEykwC1q3gwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAKXSURBVEjHvVbPT9RAFP5mpp22CxHjj0V2o8RgTNxlT8BBSdDoxcTEg/wHnLgYL/4NnvgDPPknePaykRN6UEk4QAJkIYKisqsCu90f03Y8NLjtTku7CfCSOcz05X3zvfe9ziMjEy8kztE0APj+aeFcwHKTL31AACgvbp0p2KMHN7sMj+3N7/mQ05/dG9j4cB37exwdQSADyScE0JgE5xJWxsPY5D7y42uRYHOXXodTGmVfl8exunQFdpOGzgkBpPSXcAiEQ9CwKarvRmAtXsPE4x1kb23GMqVRh6vlKSy/z/4HI6T7TUZITGP+YbNF8GPjMjr2hfSAuysF7KwPwPX8PaPdgMf7XnO97o1q30zsrY2erNKgNQ8N2DYNBANyo21MzS5FBthdKeBLeRiO64P+PWA4rFrpGXLLUZxEi8YGaB4ZoT2jEuag6KOGpL//ALcEaCAKpQA3nfSAoqUrwiDxBFGvWeiIbg2FQ9Cq8/SAuuGEVOmfebEBXKHepnHA04vG6TDFSTfd0P7twsPYgFIC2+sWtgM+c68S+rA3pe1G+F5Pn39ExvKSf9RM4sn855NTqnFXSSll4Rtoho07d2uJgKXpGozBgwTRtDWFIaWqcnOFCkwjXtEGl8iXttKolCkMXYdE1LWB4r1qPLuZX+DWUTIg0zyFoTkY3Ve5YjTLgQEPuUIlXVu4DlUYturRj0ocy9LMT2i8mQ6Q6ekZRrEcGnIxfLuSvvFJj0AIAZgeLw7dbKAQYFm8vwemt9MDGhmh9KQryInyzxe2YHCJq1mB7FgleYjqbYt+GAKAbtUxPbsJzeiAMqc/wI6tKQw9lyQ2+cX8TqrXJbKGwVedEEB6ODXTlOnqGfylzl6nC3g8N561kfMe9f8BZozikr7J5GUAAAAASUVORK5CYII=",Yae="/assets/gameguyduel.4a69a0f2.png",qae="data:image/png;base64,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",Qae="/assets/happeningduel3.def78fe2.png",Yk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAADC3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZZRcuQoDIbfOcUcAUkIieNgMFVzgz3+/GDc6SSz2UztPDZUA5ZlSehDdofzn58j/ECjXHJIao45R7RUUuGKhcer1TVSTGvcF/FevJOHeOwbDJFgluvS85afkDP0ecvbtlMh1ydD5dw3jvc36jbEvh3coWxHQpeDuA2Hug0Jb8/puj6ubcVc3J630Lb+2PdXGnxuDUMS46yZLGFMHM1ywdo5JkPe+gxUbPl/OPp4HW5VRkx8CknEmGeEgvDFpWIua0TQkMy1rjGJX5GCFodoWJc7r1+3ryIPd+gb+Tukj9UH1DfoZ9JhJfRWkQ+E8mP+rZz0TR6ekS5uT55z3it+LxdZB+Wt3dTmb4zuY5zX7mrK2HLem7q3uFbQO2a21lMZ3fDT6DPZsxd0R0k04Ow4ZAd6o0IMjIMSdao06Fxzo4YQE59smJkbC7UAoQNG4bZwp9lpsAFwB3yWhuMgkPIjFlpuy3LXyOG4kwecHoIxwiP/q4fvKI0xC4po5vK4coW4eJ5sRDHJEYVIUAMRGjupuhJ8949tchUQ1JVmxwZrPKYF4D+U3g6XLNATr2K+6oisbwNIESJQBEMCAjGTKGWKxhyMCIl0AKoInSXxASykyh1BchLJgIMqgG88Y7RUWfkS40UIECo5iIENShCwUlKcH0uOM1RVNKlqVlPXojVLnhWWs+X5Rq0mlkwtm5lbsRpcPLl6dnP34rVwEbxxtaAei5dSaoXTCssVT1co1HrwIUc69MiHHX6UozYOTVpq2nKz5q202rlLRx333K17L72edOIonenUM592+lnOOnDUhow0dORhw0cJoz6obayf+h9Qo02NF6mpaA9qkJrdJmi+TnQyAzFOBOA2CZAE5sksOqXEk9xkFgujKpQRpE44nSYxEEwnsQ56sHsjp0Hy3+EWAIL/Brkw0X2D3Gduv6PW6/rQySI0y3AmNQqqb5RxemWv80v55Rz+S+G788vQy9DL0MvQy9C/Gxp4Z+MPe/gFUIoYlgj0gc0AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfiCQQAOzAPQTqbAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAADZJREFUKM9jYCAM/uOTZCRBMyMDieA/DpokzfjY5PkZXZ6RgGZGIuXIdwFNwoCkWKBpOiDK2QBwAxXyAqQmnwAAAABJRU5ErkJggg==",$p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wUCFgYtRntnkAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAC5klEQVRYw9WZMUhbURSGv9wgGtFKbG0kFDN0aCmVFErRwcWtnSrFtau7e8NDLLSbu6trEduljg4OSihUFKngEimitebRRo0iSod7zXvn5VmNMcnNP4X7kryPc+497/znRahG3RN3gTQwBAwA/UDCXN0FVoFlYBFYIe/s3/RWkRvAdQIjwCSQqvDXOSADzJF3CrUB1YDjwAS3IweYui5w5JqQr4G58gsKWnsg1gftKWjthZYufen0D5zswFEOiltwsgech/37CHnnc3Wg3RNtwDTwVqy3xCE+CPEXlcXQzYK7BKdu8MoMMEbeOa4cVB+Ub2IfRjsg8RI6n1SX9MI67M7D2UFw/z6/7MBF/gP5E2grrXU+heQbblXbs1BY868cAw/CYCOXpPuHiOT9V5WnuZLt8OtrMLKPg9tAhfx0WkAmR2sHCfq/k6P+lZRhEIqGnO4PIpJdz6i5Wnsg2g6HmxcraWLD3ykubJSnXtfJvzXdk5Xv2TsXddaf+nFxuusNCfqe0Q7CmCKh0UyOVl+Cqild25/KoqpKTwd/MW8UJOh7t8Tlk8uX+knvFA7ScEmGSZ16Xdx/l6rVo3dYoY33/t7gnjL9pFcmbJFkSSvT9GrF+uwBlSxDynTmWu0pe0Aly4Ay9sGEu9ei1AuWfuXzOF7Ta4MkS0LRJFLGLXr2wRZJll1lLK3WyY49oJJlVRnfrXWUswdUsiwrMxzQKm7ZAypZFhWw4oV7z6LUC5YVZYyUifO59jCNlpv1P+dz5J39i/KU8b60ZAGoYMj42zxvCnLq6ua1USqsBwcUcx6o9iWOV7XmGwcq7+2Eeaap0qezA2206q3t2eD0ZKrc12tyz5IU1up7sNxs0IGO+Cd90tcXFzaIDT8sNdOHm7qBrXVDXViHnS/+lRnyzserJiVjXrlCO8JaRtbNBl1nzjBcMXvS9rkJhmQS1vKxowfbBINcCWz5aFzCNsHLhnJgi1/fXH7g6vJC7B/OGhhMMLwmAgAAAABJRU5ErkJggg==",aV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAowBLAGWP06nPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AcBATg5mVRUkwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEa0lEQVRYw93ZW0xTdxzA8W9PD73RllJKucyD0VEgMnQZmTGR4B7YfNjDEt0eTPZwXmSXRKMuG33YnIshFMhilpkQJ2znwUSTJexhmTFZ2ARdnInsZsroKYhwhOkYqEztJUD3AAyItsAol+73ek5PP/2d/y/9/35/SJHQLeluSc4GzgJinDvyE1ybGwPAbjQlknyoJLuBQLbT5jh78k1EUXiyNMeBqNfHFw6NsPv1j4lEx7uAcjQlnDyoJOcAqjvLZg9c9KEzRXB4jiT4QCzu10X7ThHsHab85WOEI+N9QBma8nD5UEmWgO4cl92itvuYTAuTWXR4yatm7o+I9J1icHCMshff52Eo2g+ULoQVFkAWAKqU57Tc+KGBybTQMpFTuTFueoO8fCv+tlrSzYaNgB9Jtv43qCQXAb0F+U6T2u7jUewemUVHlomcxZo3v0VObjr+tlqsFuNGoCsRVoiDLAH8RZtyxN7LDfw9OUJ2SU2SkPOx7lwLXd/VYrUYJaAXSXYsDirJWwB/ydO5or+tljuhQdwl3iQjZ7GWzW/jcpvpvdyAw252AwEkOTMxVJLLgetbPPmCv62W26FbbCg9ukLI+dh0u47ARR+ZGRY3oCLJzidDJXk7cK28bKNw/dvjDD7oRyr9cIWRs1hr4QEsdlDbfTgz0l3TmXXOh0pyBXB1+7ZNXPvmGH33VQqe+WiVkLNYW+FBjNYYgfa6GWwQSc6am9EzFc97uPr1UdTRLgq31a8ychZrn8YGL/nIcqQ7gdZ5r/7MJ9V0/fUrxc82rvn2w154ENE8QevpAwCGx4qp9LkT62avlOE5hCFNBNAv/M+0xqHX65jZja1r6PQubL1nNIZeL6RKRlMFKupTpJgE4V/juoYKQqpUvZgyxZQqazR1qj61Xv36hv7+8zvxM3qn25dgeLB64XSaKMkqo2pf4+PQXa/5cIgu/lxjrMmsZ+SXJvZWn+TKT70AFXOhu/oHR6KeyhpsQtaaYQ1GgVCgmf3vfUHrhU6AvWjKlVmopvQDnoGh0XDxC15sQhbD3fWrijUYBSLBFrx1X9J8rgNgP5rS+ngXqikDQPHA0Gi4aJcXq+BkuLthVbAmi46w2kxD03nqm84DeNGU5sRDsqmhmLohN9MUaK8jxBiu4ndXrNnT6WDi5ue0nOugukYhBg1oSs3CkxJN0QDPrdt3HxVVejFj5656YkUya7TA+M0WvrrQOYNsBrxP7qLiD8meYmomagl21BMzhHF4Dicts6IBwuppOn4MUrWvkclYrBV4FU2JLQ06hXUDwWynzd5zKXlYQR8j3PMZv/mH2PHKccYnJr8HqtCUyfh96UIxNbfvyXba7Gq7D8EUJcNziOUMckM3mhgYuM/Wlz4gEh3vBHagKeOJG+jFxBRWdWVaHcGO+mWMxuFBz6eM3Z3AU1nDw1BUBbYu5tBhKYcNrullkPCwIc/tIE2Mf9gQCkfZuaeWe2OhPwDPYub3kPzjmzwgbRFPCgE70ZR7/N/iHz3TcliI4oAIAAAAAElFTkSuQmCC",em="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wUCFggUh/3CFgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADMElEQVRYw9WZv0tbURTHP7nRqPlRHkmDoIJDEbsUkSJ2cBNcm7UtHRwa7OgfIFIc2s2xYocMQl3tKrg5KKGg2KHBKSCCvCY+msczJkQ7eF94uYk/Yoy5PVPeeSTvk3PvOfd8z/PRgs3G4zFgDJgCJoEXQL+8fQIcALvANrCfMs3cfZ/luwdcBEgAS8Bwk1/PAgvARso0C20BlYDzwCcexhaB5bsC++4I+RrYUP1+YKC7m5FAgNGeHoYDAaJ+PwD5SoVsqUTm/JzDUonjcplK459PpEzzR0ugs/F4L7AKvPf6434/M5EI0+FwUyHcsm02CwXMSh3yGpBMmWaxaVCZKD+9+9AQgjeGwUQw2NKapx2HdcvCurhQ9+/L6xLOdwPkEdDr+l719ZGMxXhIW83l2Dk787qKwFAjWN81y/3bjaQPeGsYTS9zM9vhu2VxWRvZ5+o2EI3+qBdyLhptGyTAdDjMXDTqjdiwZKhLXDW7P7vX7wyDqVCIdttgdzdhITgoVoM4Nh4K7e05TqZu6WWd/NvOPXmPPfvErbPepZ/3ZvdjQwIkYzEMUbMb52siqkbzYzTacglqpXR9zefrouriJ7zFvFOQABPBIHF/TeokvEu/5HpnIhE6bQrDEoBPFvc/bgn4NjSEDvbh6MjbGzwVsp8E2WDoYgrLmJBNLwAjgYA2oArLlJCdOQCjPT3agCosk0LKh6uzS6OIKiwvhEfjVJteHUxh6Rf8JyakWqzKB11MYTkRUtJeNYKlkjagCsuBkLobgMz5uTagCsuukMMBAA41iqjCsi2AfffquFzWBlRh2RdSSGUBKlLDdNq2bNt7zmdTpplzy9OC690sFDoOqjAseNu86hTErFRIO07HINOOow4oNqqgUpcsunfWLatjoMqzFxtppmX3g3VxwWou9+iQq7mcOj1ZrtP1krwqSXbOzh41sbZsW1WgCe+kr+bk33OczHgo9Mxtpn8Viwx0dTHY5oY67TikTk+9rrWUaX65bVKSdMvVJbCSz7c1slu2zUo+r450krfOnqR81n9IpsDqPXb0wOo/yFWA9R6NK7D6v2xoAKzv65sbEu5RXoj9A2ffecywqU5qAAAAAElFTkSuQmCC",oV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AcBAhIifhzvDgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABq0lEQVRYw+3ZT0vDMBQA8LeKa2E7OP/EgzzxJOJVEAt+kp7y0XLKV3kKXkU8ajxoxD+gghOxHupG3dK0W9N1075rm+SXkCbpC8CCRGuit5FvkJbaRcMhiwJQou++S8gZ+e2Y/HZcNgb1APLA7Ygi3yQtbwEAjt6TQTgJ/Kn6O1o+ZFEXlHjLK+cVQKIrZLrsoC7S8hWQd8pBkW+TlteukDnY7nRQ5Luk5ZVrpAX7YsN6Gcg90vKyKmQOdqUYFPk+aXlRNdKCfQLkPTsU+QFpeT4rpAX7CMhXzVDkh6Tl2ayRFuxDGuv9II9Jy9O6kDnYteGCT347rhtp3RT6Hy0v62GdMTqyYx/TPCCzLB4sSDTQBtpAG2gDbaAN9B9B08equmPU4tnOgPNycB5CQxbtzAvWdLof/oqksiKVJRzKIH9Da8bakOPQBItV5JvKIM3LkxIqZBHOas4a0pDGJTM7P4p8i7S8qXJkjUgl4smgCZaRlndVYA3IJVDia7qdSQkdsoi5ngYG5LINWWwLVeLeJdaADECJT3cTCvl6BZcNnaLN13l90wMlnuGvxTcwSZ5+GLmLYwAAAABJRU5ErkJggg==",tm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QACQCfAAriyc/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wUCFhQn3lr+XQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFa0lEQVRYw9WZS2wUdRzHPzO7M/vug+1jwdpFLIREC1FCUQImRCOBgzQxxkSCNw1RY9KbB7GYXrzhSRsuxmAwBg8lJkQDB0DQVHzEokklRbql0G3LSh/7np0dD8yUmelu2dldDf0ffzP///87v/fvOwI1rC2HO8PAVmAXsAPoBtr1x9PAVWAYuAT8PjI4kaj2LqEKcCGgFxgAog63x4AjwNDI4MTifwJUB9gHfEh9Vj9wrFLAQoUgDwBDdrkmaOR9KpmQQiakkAsUUOQiAFJexJNy41uU8C1KyBkXglbyut6RwYnTNQHdcrjTCxwHDpnleY/KXCTDfCTrSIWNcS9NcR9yzmV/dAJ4c2RwIusYqB4ov5j9sCCpzEZTJMP5mmweTMi0xgK4FZfdf7eVCzhhBZCTgNeQLYSzTHclqedqHwvSkPCaRVmgoxRYoYy5Rw1NamjMRlMlzSzJa9jZ6edgdJanm9JEPAX8YpKQuoAndZ3wzGmka6e4nZgCQSjrDq2xAMJ9KDFgs90N3CX2HjeDjHctljR118bdfL39Ao+7l2s5K4ahKQxNPUgb32fD9HHmLg+QTi0/Zz6SRZWKRMZCBtiojuF183tiieheCpxy/qihsSN6tyRI+1IEH39F3kXa+ynNIbnkO8lwntloyiw6pGNZDlTPk0Nmnywf1SJFs1k0Fa8yxz85mZTqQSsRCpPBl2l99g3colbyxPlIloWw5b4hHdMyjfaZo3ulwBHQuJ0KEl48z1PDB1h7ah3Sl51Ev/ISOemn+9seTs6tR7V93B9tb7Ovo7XsudNdSQqSZVefJZh05AuGcKpr4cEpSBAQtCJamQwn+op8sq+Zg8GbJqnKCzdeY/jimbLBFUzIrB1rMIsaRgYnFg2N9pqTeUV5UtPKggQoZkQG/95OxiJ1MdW4FdlV/thkOE/eY9Fqr9n0A4Z0LpKpW568cec8C5pkzQjuNajiyvtsGAYARD25R43a7bQsrryWI5LUNIK28q75SBbt/kvRLYc7w6LeT94zu0+ta+V5rOU5GgTFktjC6VHUCq6xYdkq6k0vAJmQUjeQLn87b224gs+SxubpmBxe0bfLYNkl6p153YBKbj9Pdmzi871ZXrVEPDyS/IbvYuMVnWPDssOtjw8A5AKFqsBposg7e9bzwbo/8QsLpdNOYZQXrxzlbFar6Ewblm7RNOMsNb2OtRhYx/62cfxCKYsUaU1/z84LL3F2crbiM21Y2t318cjism6gOTuKZ/Yyzde/oHDrN35UtZpucOvT4qPG+KB4nWtVVW+TK5obDoWdsT4uDv9Aqlpfz1tS27Soj7QAeFLVKVgr+slZcmYRVyFXkwZtWK6K+twNgG9Rqg6omiZbdFlquqzUVjhsWIZFnRyoCSiayN2Cx5QvFaRsqp5ALwl6Cb1jlNCxnurIDL9HosW9FhgnRjuu1AxF5/zG/Qnip7B5vG4x2rxxo97PRJN1rvfOV2PcS1ssuDRDjQxOrDci4IghbYr7nFteg47IJj5+XubC/nM07H4PMeSrGqgNwxHzcLc0gsg5F8GE7Gh29zS38dmeazwj3atKt1p62NzkZfpMPwXVmfmDCdlOUAwt9WE6/9NvPGmNBRwdHmqcosudtsjiwW20+Z2nO9vd/QY3ZU5+x5aiVnHRPhasvGqIryAKBVttktAE0TEhYWNPji3rbHXkSyNJQ8JLY9xb0QXJ9DkSRatPBpSbzOUURwFkY016zUyf5ZN1Vu2E2QzBhPxgoDMpjl7rZiIfQNXyNKd/5olfPyJTYadkcFFm0szO8NVE6dQrFVVC6axekmxV0Y6rishdVdS4DezD/7OhBOCH9/fNCgH3v/wQ+xf86GOxP2y1UQAAAABJRU5ErkJggg==",sV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AcBAhco477yVQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEEElEQVRYw93Zz2/bZBjA8e9rJ87SlHUd/TGxuBOgtR0/VLShbaIMGKRMQkKiMCZAFMwkVgmxy1Z24MQfMMG4wQV8ggMwfkhISLRIY+IC7AASmvoD1Nad6IrCQkpZSmObQ9rKcRzHTtxN4z1Zid/XH9l+n+fRY7hBhgh1tqq1AwsRXXsThr4cPVTVOoDLAPbs+43dna6X1g6TGHohOqiqdQLzTmRq/9GyU5ItKyBsz+lK0kRWLBIpk6n3PnZjmzH0pcahqqYCs06k6B0GW9R1N7ftyvP7Zx+Exko1kF1upHznsbqRAPMXN7PjuSO4XqG/UbXm+qCq1g3MOBdU+l7GKkoN76LZC1vpPvaUG7voh5WqIHuBcedCTfuOslKQIws3k+fa6XvtcS/slmBQVbsDuOhcoOXBF7maUyKPjT9/sZ29bzzmxl5B1Vr9oaq2B/jFObHt0BD5+eSGBfIfPuzigbcG3Ng/UbWt3lBV2wv86Jyw/fCzZKdTG551zr97G5l3HnZjs06sWEXeD5x3nnjr0NNMf39z4IvJcYtEc7GUcjavICSbeMIiO50K9G4L2eLRU+N8pZ1zh642DD27BrWdyN5XBhkf6wwEbFX/4cDwr0gelsWFBGNndgYOZ7JicujUOF8OfVuONXSx/ujXkE980k8hHw+08JZ0dEiAmGIhZJvBs/3u16B8Mw2e7UcIuGfwEuruK76L3tRZ4MDwb57IpazCN2+HQypNRR45MUl8k7VuqRlHhYDdh+dI9+W8kR0FHnp1CjlWmduv/hVj7MxObCscMjMygZI0w2cmIWDPEYNtu/Jlvze3+yDzMb4+3RMqewVB1sz1QoJ9z8/Q2VPCptqWOXh8CjleiSzkY4xuELJ2UbKK3f/CDOm+HAePT3oil5dkRt/sxlwJjowni2ROBkMCxAIVrRLc+4xR9f/R0z0Ul+VQyIGRCZQmM/Cchksh2yZUsVIPMhKoCFGaxhImmRPhkZFAA6dYxWRgZJxEs1nX/GsGzZycqBt5TaGJVLGh+ZFAhWQH2HTi+kMl2Q4QHrgxoHaU0E+f/K6+RWJW5I/ebfEsnN0lVq0x91MLhcXyJGf+K5Vlq97MZc/064d0Fs5r0B3AdCPYqIYXsrylU+qKzFxPbDVkZe+pTqxlgm2J0oaxBZZZWtYsCrBLm61WsPdDejfJPJpifljbhs9fv9sXke7L+VZftZDe4cnQDUB1TvSNBgH2h/AJXxXIKiHTO44a+hyQDoytFb6qZC5PpKHb4QK+oV8COqPAeqVYD6RcDVk7Mxn6AtDRKFZINZFxDN03awRtja9/ZHBvMNuCCx+lV49FReAHuOWuPLffl62GDPTRIczHhjbgD3cHo65XIWT/PhzUdWcjGK0Yeo7/2/gPg765gTtV6VkAAAAASUVORK5CYII=",lV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoGAyE4E5DlewAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADj0lEQVRYw92ZQUwTURBA335aoZUKLUFMQ2iMBw3RcFCDiVz0pMZEo1y9Ge5cTcim4eINz1418UJI9SLxojGYiMQDwRBNTEzREBBpQwoiKbQe/tL9fylIf1tanFN3tv37On9m/sysRTkSibcBPUAf0AucAzqcu4vADDAJTADTpOxl00dZBnAh4DYwDMRK/HUSGAISpOxMdUAl4CAQpzJiAyP7Bbb2CXkLSOy8IaCxHQJdEIxB4wnwt8hb2RXYWIDfSVifg40lIFds9duk7OflgUbiTcBj4J6m94chfAnCF0uzYXoK0u8hm/beeQIMkLL/lA4qA+Wj5ocNzdBxDULd5W16ZhYWx2Fr1eu/53cLOGsPyB9AU0EXOgvRO1RU5scg80nV/AE6i8Fau2z3Z82Sx6+Xvs2luMPPl17LnvG6gSjy08caZLS/epAg1472q5qYw7CHRb3RXYIlL2Sf8nprhICia0UQPvKU7+K0iWW1bCA8eTKh+WQ1LVnMsqGzqibhMO3Y+kEtuisdOPuR6B357CJMQrGme+J0XKNmoj87vm1VUfAHNZmXmyfLkVC3ZFB9VQEddn3lEjUXnWFYgsrkHit4wkEG0F6B5YZPjEi8TTj1pJTGdupGdJYe4RS9UgJd9QOqs/QJpzKXEowZr7vGMTY9Ol9esMBRswV1ll7htA+OuU8Ygy6JTtbz+kF31AqyZYUMt15jOSeUHscteg1knQi/aNR0LVYrOY9u36KzdIhKudSG1cJPS4XK00IYTEF39hIsFq6yK8YLbdLMPEENtNmKgmWZLaizLAqnpXXMsmD+ly0f32jXQIOis4wt0lhmfE7ffQOQjZjx8ZnnXcNlxvOyqLiZz+G3LpiD/k6qV5M+ZzjgRMRcGRYVvPLf55W6e+U4pc4y4QOmXXMvGa97cvMtj3LPlCYL7uIn4H/AkmWQ9nSWaR8pe5lIPCnP+5ystA3O+7b8HFdzH7QKHwRN+RUoFTQ9pc4AkqTs5e30NOR+6X3tj0+dYUgt89wWJJuWfXetJDPrHVAkXFA5/7HdrDVeO1D92fb2bEo9mUYKn7ZW5XDgoGV+zDs9Gal4u1yFQYTWLjfouevNFwJXThWK6bWvsoCtdkGdmYWFF/rQLGU//NekZMAZqzjbMeqkiypacn7UO9IZ+I+GZDpsnY8dXdhDMMjdKxuoLl4Xo3Ed9hC8bNgJXMevb3YPuAN5IfYX3AU4elYvVkwAAAAASUVORK5CYII=",uV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AYFACcbMq7POQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFGElEQVRYw9WZTWwUVRzAf2/2o7N0ty1Z2l3LxxKsgpEChgioBD1I1MSExosXuZKeTDAxXiQEazyYGK6NV4yJB5OScDEmhGg11tAoxWCUQmhB2W6z/drZ7uzs7I4H3izT6Wy7M10MvNPuezv/99v3/t8j2MDYN7gjCewHjgKHgX4gJZdngOvAGDAKXJsYns4H3UsEgEsAA8AQkPH5+BRwBhiZGJ4uPBJQCXgaOEdrxlngfLPAoknIE8CIe94SFkasSilRoZSoUG43qURrAEQMhbZimFghQqwQIVoKISzP7QYmhqcvbgh03+AOFfgSOOmcN9qqLKRLLKZ1X0fYmVXpysaIlkPupQvAqYnhad03qDSUcacempEqs5kiWtLY0J3H81G6p9oJV0Ju/T3YyODEGpD3ANWeW0rqzPRptHKkJuN05FXnlA5s84JVGlz3uA1pYZHLaOtDKgpvHHiayycEd9/9m+ibX/FCby9YVsNHZvo0chkNi/pvVGBcMqwNKnUyY0Nm+wrr6qIlwrx3bA9f7x3nYGKejkgPs1ve5pfXvuP1XdvXfHYxrZPtKzhhM5KhMai07rrhNNJHh1AAtu08zsdbrxJ2/U5XtvN7//vEI9aasFrSYDZTdE6dlCyrQaWfHHHqZKOTFC7V3rs1R0p4G1hu0yHUhLquvi6mdZaSK/YbkUyrTvS007qbNRwLQTxieOoQgKF0oUeiTcma6dMwI1W8mBTHaZ5zXnnzoc1i0VCpNVgPWTrhWrVpea69z9mnah/EgNOZ+/WT2aUOGpmbWs0SX24+MGhJA6NtxR8bcIIO2bML6ZJvf3hv7grzlvf19hTHyelVX/JcDEMAinTuGTt2+w2LANpSitvmJo+VKtsXxiib/uQtpnUs8dBd7RvckVRkPvng2mNVgoxKaYYb+mavv0Aq9xdC+M4m3Sz7FZn0AlBKVILFQrPGeKEXt7dUxGZ+nM8FEuliOarIzHxDoAKLm/PdqwyqZ/lb9EKpFaCHFVk+AFBuNwk6pvNdaK4jfUq7imFYgeS5WPoVR41TT3qDjEJhlKlqxwpD6lm6Qc0SwfR+JUtKaVXKphd1bhsJx8wym+fvtiwlVGS1WC8fAg/T4Jbe5YitRb4vzAYW52KZUWRJC0BbMRwctGZyp9zpSE97SZTLgcW5WK4rsu4GIFaIBBYsqHF/OYHTBNrLlcDyXCxjimwObBgUIK/FcZ7hnFFtFehoGLhmf4uWQhsCvT+rMzo7RheCd/RLLJtWkB6HF8s1IdO8O3a8z2W0QPG+laMzq9IzFa9XpxPD0ztt0zpjz3ZlY4E3iKopju/qxjj0AVtSz6IQzNm7GM4A9TKnXoJEyyHi+ajvnDS97RjfvPwDB6ILDyae+Yj+3Odkr3yB4cOm4vmou0ExUs9HZf/nrL3SPdXuzxlvSvPZoasPIQFEG9dTH3Kk/0Vfslx7n7V7U06vet7+EK6ESE3Gmxfec4RXY/965ffc7H2LUKg5FUhNxt3dk/OrijtJXi9JOvIqnVm1qQ3CoRrhBsZdDnVgiuYMyNU1GXB2+lbEKdlVu+C8hnh+/QoyP/8Tt8xEgwz/Z4TZXC/K2TRzd/i8gvsp2bBCIEhPJtY92dLcHJ/cegXddcPd+mX++e3Smr60M6uSnkw4ewVTkuHRNMksEeKl3c/x6e4/2NP2J8/PXaTw6xC1pWJLmmRPdtvxiWrkejTPHt/WuAv28X/Z4AH8+L6+WcPg/pcXYv8BRb071XbQeyEAAAAASUVORK5CYII=",cV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AcBAhg74JivRAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAChUlEQVRYw9XZz2sTQRQH8O+83STbTVLTVitotWDBi9WCVNEq3gQRevAHoh5EL/0PeuhF/Q/8E/QketEehJ567KHgwatHG0QvFX+Axt3NxkObYDb7472ZTZcOBJJshv1k9r03s7PAPmlK3OPYw04uZ26+UMOD7iI7W8/NRuf4IzFW6SIXX13Gx/XD8FuEwKPYLv4fq+/YzMI2Nh+vaWGVDvLGm0sIPIV3T2ZFI3nu3haaHxr4svpSjCUdJABYtjxUy9UAFx58wvT9O+gLIUbckw4SABQBimTYstsGAJy9/Rknl26JsKSD7DZ33BNBbafde3/q2lfMLS+ysaSLBIDRyZYMWg77Pp+4+A3nn15nYUkXCQC1g7IRtUrhwHdHz/zAlWdXM7GkiwQAd0wGJSv+yk5M/+6dKwlLukgAcA74skKfUWPSsKSLBACnFoguu2JU7SRs7z9KkTt1sc3+raRCDGCjMSpBAkCpwodWhaUsaiEYNKsc8ke04ZmcygyalMXxiRcUB1UEkM0bVafuFwcFgPqhv6zfVapBsdAaE9pdkBQGrU7wkqTkFAzlTqO2ExYLHRnlJUncgmRPoRXmNKpzR5ArlJsk0ruB3KGs2FOdzJXT0KGc2HMbvulpzKGcaVS6IMmEvr25IZ9GFVCfbMEd83qvaDyOaCxIohZlsnAeVusi/9+gUCa3InuFHNzSKRibhIzfeyoIm4ZM3iQTYldXTqcen5r7jvm7TW1kcnnqxsVuR51q0DcaKSWMg0yvozliKWH65CKzC35O2Lh5XoLkzUw5YKPzvBSZnEzCBHv/empnwyBUaP2yB7oemf2JmYVtbaQMGoPVTq6hPmyIYI2b8PHNvmn/APiMNtZk8R+/AAAAAElFTkSuQmCC",nm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AodFwwZ4+R0+AAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAJ40lEQVRYw82ZfYwU5R3HP8/Mzsve7N4rc68C4gsoYssZq/ISa9VqYuMLiqT+0TRnauiLpVix9RVqmoIVrdoqVhu7CfUlbdNWG02bWElFLVqJHoqAQrkAB3e7c3vcLbezrzPTP25mb9nbhYNq21+yyezM8/ye7zzP7+X7+w38H0mPaaq1nokqg8PAV4BlwKnAPcBrMctyP0OA5wHPAPOBtcCamGUVawLtMU0BvAksrNC1MGZZW2osIoAI0AXMAy4CLgTe93+7gANAEsjGLMuromMT8KWyW68AV5ePDVXMWRqAPD8c5rDj8K98HuBzwJYK5YuBdcDiGhtV7b7dY5qnxSwrXnF/AcD19fX8MZXCP9H7gdXBAKls4SjwfADy2y0tnKIoweNFFSA7gdfLwehC0B4KcX44zLKGBhbX1XG6qtIkyygTU+uAHT2m2VBhlzrAldEo19XXB4/u6zHNq6vt6HNASBeC5c3NAJypqryeTgNcUaZYA7YCUqMk8c2WFmZr2nHtcMx1+eHAABnPawY+6jHN2THLsoFGABlQhOCa+nr68nm2ZbMAf+4xzbNjlrVL+ItfCfwVYEVLC/PDYQBGHYfbBgaCtRTAAV4FLgsBD3Z00CjLU3aaw47DXYOD5D0PYDtwHnAO8H5Ukniss7M09u7BQQaLRYAU0Cz1mKYMvAhwjqaVQAI0yPKEbUATsAa4DGDltGknBBKgSZa5t7UVf9Y8YBNwpQyTdN3X2hp4ej3QJgEdgC6AFdOmTVJuSFIA9gUfKNfW1zNX108qFJ2iKNxhmsjjx71Yhgc6FYV5FfrCkkSDVNqmuSE/dtEoyyhiUlhleXMzTw0PE+zkpZEI104Y/EnJbE3jDtMM7BCAGxsaJo3rVBRGcjmA7hBwFkBHKFRV6VxdLzlX8P/TkNmadlwnHHGc4LIvBPQCgeHWBPvflqzrkpjAtFMCPgk8cv94cK8qGcfh3XSaVLGI53n/EYiC67I1nWYgn8d1q2fmBy0LH+YYsEfuNowjwLVA+xvpNPN1nYYKD8y4Lk8NDXH7wYO8mU6TKBRIuS7TFQW5il3XkrzrsnlsjLfSaW7t72erbdMoy8zSNKQyPa+kUmzJZErJJmZZB0RZdngHmC8Da9rayrMSH2QyLOvrY3cuh+uns4gksaa9nVtNE1WSjgsy57o8lEiwPh7H8zwy/qnMVlWenTWL+XV1AAwUCtwbj+Of2bqYZd0dJAR6bdvpNowYsMSD1jfTaS4Ih4n4O5v3PN4ZG6Mvn8cBPKDgefwjnaYILDAMQjV21vM8hopFHkgkeCAex/Y8cv7LtoVC3N/RwaX19UhC4Hoeq+NxcuMvsQtY2mvb3lG5PmZZeeACYHcB+OfE1tOlKHyvrY2ZqlrK266fFtfH47w8TiSqyhHX5aF4nPXxOIUy2xbAueEwF0ejpZc84JuUr/6Scmp51JnFLCsD/LZyMUkIvhiJsGH6dC4wjCCzIJft7rHkYLFI0R+rCYEhBOfqOne2tdFVZmJlsq2SYUlVCOy91WaGhOBsXec0VWWGqtImy7SGQtzT3s51VYJ1IFFJ4jbTZJ6uowmBLgS6JHF3RweLI5GjnKhMuntM85ryG3IZSAP4CFBnKArLW1omzY5IEnPDYVxgWyZDkw+0S61ZQSCEoF6WUYXg41yOBlnmp11dLGlsnGTXjbLMvnw+iOk3dhvGz3ttO1di+D5L/ztwsSoEj3Z0oNfwZM/zGHEc3stkmCbLnBMO13Sk8jlHXJd9+TwCOEvXa85xPI8Vhw4FUWGzb6ueDNBtGHcBNwOsMk3aq9tNaYfCksRpmsY0IdibzyN5HrokIaosXiwW2VMo0CZJdGgarYpS67hL/nCGpvGWbQPMBLb32vYOyT/ytQBXRaPMmQIJLo+vN+3dyy39/QyURYlAXNflpdFRrtq9m3fGF56SzNE0zp+gm7/pMU0hBaxIFYKlx3CKavJSKsV7+Tx/Gh1l4+jopOd7sllWDQywt1jkZ4nECem+ZYII6UBzCLg4KDuOZ2cZzyMsROmIv2+a7M/necO2WVRGuAMZKBRwgTohuKGx8Zi6KkURAkOSSI/H1fkhv7S4/UChUBNk0fN4z7bZkc0yS1VZGImgCEGDqvLUzJlsz2YnEV+ABZEIz0yfju26XBGJlHjDs8PDJIpFljQ0cJau17RZpTw69phmGzAYcNLVra1oFR7/oW3z1b4+BvN5XODHXV0sN82qRPt41O3O/n4eTyYRwELDYOOppzKzymnuyGZ5eGgoyPldkp8BlgEMFIusGhxkqIKb2p5H0nEYBrLAqoMHWXXgAOkJYjslUrJ2cJAnk0k8oAhstW12VHHCl1MpHpoAOQDEJT91/h6YC9hp1+WuwUE+KisT2kIhztQ0JB9oHngimeQnFfn7WKbzdDLJI4kErh+8BXBdYyMXGcZRY381PBw0IQBeA2bFLMspJyU7gRnAPgd4eGiIv42NlQy7yTeHbkWhFQgDv7QsXhgepngMsK7n8WoqxSOJxDgR0TRafFa20DBK1aft1/1bJsLYWuDLMcvKHZVCfbqX6TaMDX7/6PQPs1lGHIdFhsG5dXU0yTJLmpuZo+tsTqeRhOCtdJoFhsF0VaXoefRmMhQ8j6ifAA4WCqwZHGR7JoOpKHzLNPk4lyMqSXzXNDlFVenL51kdj3Nkgu1/LWZZj/aWxd5JhbnPTZ8FmoEL9xUK7MzluL6hgS8YBmdqGh7w4sgIWc9j2HGokyQur69nWybDN/bv59VUijm6TqeisK9Q4HHL4rDj8B3TZGVrKwsMg6WNjZxXV8emdJoNySS+tY8A82KW9XolrqodhF7bpte2/9JtGAPA1cOOw85cjsujUTRJYrqi0KYovG3bjLkufbkckhAkHYeXR0fZkc2yJ5fjDE1jfSLB2+k088Jh1nV2YioKXapKl6qyKZ3m+ZGRYNl3gc9XaaBV749WaQkuBt4AeLKzsxS6Uo7DxmSSjcPD7M7lKPpcM+U4FIEWWaZdUdjlO+Xazk5ub209Kmbe3N8fXP4CWHmsHuyUAmGPaaaBukc6OkqFn+d5jLkuQ8UiG4aGeCyRQJckIpJEwWdYISFokmXm6Dq/njGDWRU8IgAas6zj4ghNMQweAeqOuG4JqBCCqCwTlWV+1N7OPF1nWihEkyzjAZ/kcjTKMh2KQqeiHFUsnoxMFagFtD2RTLKuvX1yf0qW+XoF0V7kp8xa8tzhwycEVJriuBsA4sUiKw8dYs94P+ikOyDPj4zw2njfFWDFVOZNOVn3mOZNQUc64IwrWloIS1N71758nt+NjvJJLkdZevgAmF+tr3/SQH2w7cAfqnyMOFEZ84vIp/3Kl08VaBngS4CX/Cbrici7wA+AzZ/l56D/qfwbutHtsvRZRoAAAAAASUVORK5CYII=",dV="data:image/png;base64,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",AV="data:image/png;base64,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",fV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wYNEwwrTP+CQgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFIklEQVRYw+2YW2wUVRiAv73Q7bQFtrOUFIHahUJpMIJQi6nloSmXJioiUaKJlPDSBCWEBxMiUYdNDERjeDM1RFNBHoyiAprQRDANYIXaKhKlQKD04kpL2WmhlynL0vVhTqdddpbOXlQS+V92/3PO/Oc7/7n9/4GH8j8VW8Jfyr4MoAB4AigBFgNzAY9oEQCuAGeBRuBX4DKqMvTPg8q+KUAl8AbwZIJD/Bn4AKhDVW6lFlT2zQTeBF5P8Yx+COxGVfzJgco+CXgL2GFa75wK6TNAmqX/TvKAM1OvCw3CnQAMXwPtT/03dDNWT7uAd1EVLX5Q2bcUaIoqT5sG7qWQvSwxH/aegb5mCN4wqy1GVZqtg8q+V4HPIsrSZ0LuGnDlpGbSb/dA1xEYjpr1DajKgXsLHSaQm4FPDN2eDjPWwvTVY9OaCnFmgnuJPvDBVgiHRmvWIZVfR6tviu1R2fcS8IWhu3Ihv9pSv3PzNCpKe1lcNADA2ZYsjjdkc6VDsgbethdud40vWY+qfBkNKvvmAxcNXXoU8jZa6qPqhS5WlPaZ1h1rcLP/m1xrsB37QGsfX1KIqlwCsAtIG1A3tmFyLEMuL+6LCQmworSP5cV91kDzNup9j0mdYBOg8Bzg1X3sAO9my0ttTUUgJW0M8W7WGYQm2AzQWqNh9lP//cUeyVCrg8q+AkDWvTkJcirisnnkuCclbSIkp0JnEbsH2VdgB1YaDTLy4x78ySY3xxrcMeuPNbg52eSO36uRLCsdSOXvAIUAeMogPTdum79dyOLcxUyczjCy+w7BOzYaz02m9qtc6s9kJzb94bswYBxCI04Ropl6tOTxW7xY2QPAwbocGs9NiWn3Sodk/cy0Yj+SpcSBVL7b2FQ5K8FmM4xs2fAXWZkjZGWOULKoH393Gv5uV0r2y4T27WkQOGFc4HYR4IqIZyw8HB3peDErS1QmtB+KCFUDdhF96zLU9uDkHpEsjXbgqKH2txh/D9ZFR0lmZYnKhPbHsQBHHUjlfcBW3d394FkOgL/bhb87jbxHhhkYcvDp17n33UzxyoT2u74DRka1bTZx1weMQ19+Ou5Df7onyNLH+lmycID5+XqQfqlN4pc/smj+fTLXA2nxjaLnOKg/jmoqquJxCmUTcFiPwE9bBp2WHaT65WssmBOdQRR6NQq9Gq8828OFVom9n8/gRq9F4N7T47VN4+/6b4GrxkF7tWZCWwvnDbJnR6sp5L2yYI7Gnh2tLJw3ODHk1RqdQWiCTYCqSlikwboEe/TYMFaAM0tje3Vn3Otye3Un3lna/ePRYMSxVSnYDI8iAtT1hq6161H3PWK3h9m5tT3hTbRzazt2e9g8wo8MmtePBs3ROZNWfx6p/DrwDAB3B/SsMS3bSOoWLRikdMmthEFtNmjtlOi6IdZr/3noqIVQRHD9GqqyL6ks9KP3VTLSw0kdTepNB9vedseVhdrNLSkHgOKIsmE/tNXgIJT0GZrpCkJbjRlksRlkbFAdthnIEK8YY+mUy540qImNXUBGrMcH87w+cs2G0Op/QCr/GHABJbPz3cycndwN1fSTn8ZTnaNvT+tQlUNo9fedKmvuURU/qrIFmBroGXovWY8KG1NRlS1WHsgSeh/df6rFCdy2PMhoGQFcVWVFcS32uDsTHSxLwqHL4oUkUa9UlRU1AasS+HSV+JZ/BVTAfi8eCE5YaH4C8IpvErsoUhFb7j/VUgCsBZ5Hf8sH/e3+MHCoqqzoMg/lAZO/ASb0veqrL/2hAAAAAElFTkSuQmCC",dl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wYOEywpJcBoIgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADu0lEQVRYw83Z24tVZRgG8N/aMzo5qGmjlaRpBJpJKBgVZkgH0BDKgs4FIRQUdFsWWTdBEOQf0Ak63VQXJkTQhQVZGSRkReZ0UtSsTDtMM03qOF30LFoN23HOez+wYa9vr7XXs97vfZ/3sAqjQw3zcRNW4SKcld9+wuf4GNuwE4dNIKZhDS7GZFyBj3AM/YN8/sJLmD2Sm7YMk+AGvIO1+A1f4tcQvhDTUdS59ig+w/P4FgtwGX7Ib6dEMUSS12Nz5bgvW/kgvsDZcYHWWK90izZ0YCa+wXYcx224H/NwA94cLdHT8AzuGrD+aizbNcwdPBDiT2JJHgxexr3oHQnRDuyIpUpswWvoGaWfT8EtuK6ythfLTxZwxSAk98eiJR7G7jEOzEWxbolezK1Htlbn4sl4P/4FB7F+HEjKf67Hjzluix+3DSXql+K8BMDPCZiecZS7XmyNBh9BJ34faJiiju+0xfxr83RnTJA+l8bYHwMdxol6Fm3HA8ko+/BdLDtRmJRMdiBclsUl+gYSfQj34dwI+WITjznR5DtxTxLIh9Wtn4Y/ItY9uH2YWWssMRnPxqotIdtVRv26is9ubiDJMt1uqXBYV7Xonoqwr08ebyRm4IVKIlhQi7iXJDubgKRw6Mz3+eioRTdLvKt5UOWytIaVlYVdTUS0ymVlKy6tLBxqIqKHokJ9WN6KWRHZlsHKrAagF1+H8J8Frop2TU1RWzQJ0f7k/h4cLWLJIkXs6pNUVI3ACbwVXkWRYKqhO43XlCYh+nf8czqOF3gxAfULnm4iH52ETdnxrbV0hQtDdm4TEZ2Dc1Kk7K5lOFD66JImIlqt3rbV0vaWuLKJiFa57Kylkt6bhYUpCBqNGeFSFiWHSynaWDnp6iYgWuWw8WSFczfurvYrE4x2vFI5/l/h3IXH01S9XnGFRuCaZEjh1DWwZ9qBC6Klu1JpnznBJL9Pmz49lr21HKIVdbSrP8XqGnw11GnbGGBfiuWpOD/dcOdgI51VeCRzoN50pz3jTLIlu7kDn6ZiOn6qScnBEJ2XLViBD8axBJyBp2KgZdnR7f4bXzblkKw7c4UjA09s1NixHTcbg7FjiXqD3G48EXeYNUyCp0d+7hiwPqpBbhXlaLzbv5PmTZGw2QmCmbnJ0UqiKHL+/mjhajwa36/ed50hjMaHg2mxxOWx9OJo7h7134gcwye4MQ+yCM+FdD8ey3+OG4qowYZoX5/BX9m8jUvSl63AtSMhONpGriMDjJUpvOu9EHsPbyRYRlw//ANBO/GuZrPHWgAAAABJRU5ErkJggg==",id="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wkQAjIkoEJVegAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAE/klEQVRYw82ZS0xUVxiAP+4Mj+mAw2uGAQmOIiWEEnkkpFarRO2DRaFxR6IrGzemi5JoStKERdOVGxckDalJk2ow1UV1hSskcQUxSm1qk5ZK1fJ+hOcwDHPndtFzzeHOfQkT8E9OMnPueXz3/8/5z/n/m8HOxAv4gVzgHSBH1AEkgBgQBVaBNVG3LcnYRh8PUAiEgUzjw5s3aT53jmGLvpvAFLAAqG866Zu0LQMqgYBV374+eouLGbl/n1mLMQLiJRWhbS2dGi0EIib1MWBZmDX24AGVLS38pqqMhkI0LSywKZaDH9gnfhvlH6HhHYEqAjDfUD8vyhZtRKN86/PxFcDoKKeqqlKWQAZQJIosiwI4uR1QL1BjWIeLwKR4gS3S3IxnaIhZIAtAVfm7tJT62VlT0yaBUoMCNoE/rDacYgNZZ4B8CUxb9blzh2YdEsDjofLRI47aWGpajKlLppjT61ajClArQW4CY06LPh7nl8xMPtqitiT/hsPUWGhVZjhomO934zIw007E0GnUCbKnhzwjJICiUP74MScc9oEm5tiUNBtxMn2hYd2M2SyP19LRwWdWz8rK+LG62nEMRcylS75gMQX1GN7kpVsfl5/PN5YECqGBAU65GEYzrNmI7Ktl0LBhd6+7gXz4kIiiUGHXJhzmBxdaRcy5aMakSNoskRpMuj2umpq44NRGUQgODvKpyyHluUt0rXoBDhwgGIv9/zsvj/naWrLdjHj8OFk+H1+6aRsK0fv0KR/PzrKSTJovqaUlNtbXUQcGUCcmKAAoKqK8r48XALS382E8zpKmob1NJRZjoqmJZtm5N7a0cDIeZ+5tgdzYYPzIEY4BjbrlA+JP4/nz1Kgq03sNqaq8aG3lXZ1LMLJfqijo7aVUVZncS8jubkJAgcS1H6BKqvAB/p4ewnsBK0H6BYvOVYW4COgVeaKRDju+R5B+waJz1QE0SBV+uVy7RsluwJpA6kXnarAFBfxdXQQTCZ7vAWQKqKnpdwPWATLF9Cmbyax0dlKcSDC6S5ApmylDbP0S6VoXtzoG790j1NbGc9IgT55Q39jIqE2TLHGhBphWRHJAF7/d4A0NVJMmiUT4wKGJzLKqiFBXl312PUtL6UoXaCDA1w5NZJY1RUR9ehiQYxWZXr9OwOt1DCtci6JQcft2Stgsx1E5UjiU0O+jU1Ij085nz/I5aZbTpy3vqDLDlHxxXjA02hIBBoNkBAJ0u5k8mWRNVW03iWz+KxYxvwy6IIOqIs5+vRzlnv39HFQUQo5xxDo9Fy9S4fVS/+oVrckkK7bJLA+Vt25tDeIMc0+bJdM8kt9qBIp1nxaN0mPnExMJRoaHec/oC9vbyV9Z4Tu7vvPzfCH1KTYweOySYXLD3DNnCGgamxYTrc/M0BEMkmvjuP03blAej9Nv8ZJ/STlWee5CJwseko+u8XE+MZsgGuX7S5cosgM0lmfPOGp2ybl7lzLDUX7IleeQOy0tMWTQwK9mZnZbqqvJm5vjgmylwUGuGM51xa3n8AINLS2clM7mmBszuy3d3YSWl/lJ09DW1hiTbkne7eTn6zQNbWyMnw8f5n1hEl8aQH36EuvspG11lT9bWzlmB+mYyL16lROXL7PsJpHrMsOdksjNzmZpZISZmhprd5bW1LjQSFJa64ndSo0b/WzYkPrZiUyL41F1a4q0fr5xkG1/vsnYoVZ27YPYf++gNbW1nipNAAAAAElFTkSuQmCC",hV="data:image/png;base64,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",rm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoPEDIgAntuHAAAAAxpVFh0Q29tbWVudAAAAAAAvK6ymQAABA1JREFUWMPVmN1PW2Ucxz/POac9fYFSyttGO2rmszmtMSpmbmNuDBmyNRsT8/wB3vIfeOmN8c548yTeGC+NTUxMrC5IdjcDcTqNWIOrxsjY3JxlYxTG6MCL9pBCmNDXwffqPD3n9Pc5z8vv+f4eQRWlpVLAZ0U/fQMMjqQTK5X+t1FFyLMbIAFOA59qqcSOANVSnQGSABFfO28fOEfvnm7ntgI+qjSGWQXIAeAiQNjXzkD4VQCa7UZ8lofp7C2A7ngo5k1mUmNPBFRL1Q+MAnT62ngjfGTd/VZPEFOY3Fy8A3A8HootJDOpb+sKqqXqA8YA9npbGYwc3fS5Dm+I3Mojbj+YBTgdD8Wmk5nU1bqAaql6gUt5yBYGI8f+9/mwv41sbpHM0hzAUDwUG09mUr+XElOUAXkYmADY423hzBaQxRqdGWdm4R+neXQknRivyarXUr3iQLbawZIgAQbCR2jzBJ3mZS3Vc1UH1VJ1A98BtNhNnOt6ray5HY8cp8nd4MT+SUvVVTVQLdVLwBUH8nzXibIzhRCCC10n8VteAAv4VUvVXjGolupF4AeAkB2oCHItqDAYjvbiMd0AvgJssGxQLdUh4HuAkDvAUNfJqvkCy7AYjp7CbVgAIWBSS+UrGVRL9QzwC2A0uRqq0pMbZZtuLkR7MYUJEAauaqnsbYNqqQ4Ck4ARcPl5M9qLEIJayG95Geo6gSEMgIOFbGBtCaqlOlDoSavWkI6a3A3EIz2IfFrvBi5qqYzHgmqpngZSxZCFL625Wj3BNUMDvA4kiu2hWQS5D5gCXI0uH8PRU3WDdNTo8tNsB/hz/gbAs0A4Hop9mcyk8qBaqghwDbD9lofhp/ow6wzpKOjO28PreXv4MtAeD8W+EoWdYQrw+CwPb0X7sAyTJ62b2TuM3ZggxwrAJQP4eadBAuz1t7I/EMFr2HgMd58B5ADORnp2DKSjY+0vsD8QptHlxwDuAfz47xQ7UcuPctx9eB8LeBf4JH3/Om7Thc/0rDMQXnP9RhGyAzTbgYqCzy7N8dvc9GN9gC1M7j3Msph7wOzyPMuruXyG1VK9A7y3nSD7/B10txwqG9aBTN39Y7uvrAKXna3qfWAB6NxQpnQUtXuA5unsrSBAf+fhskCns7cdyEng4628C/A1cM0CGEknVoEPt2H5zgNfVGn6JUfSiQ9qdQBRzU2/pBRTKqhRKW2RvxG1BDUr7ViBqEuPCidtVQHU2C1DX4cerc7Q12OO7pZVX8kcFWLXDb2xo4d+96QnsVvSU5mjY5UD+tf834zmJtYKwM0qA9twITYUiAbCOSYv+XtLBR0FlpZWlu2ZhduVTtfPa+qGtFQtQD/wPNBI4ThyY9ULuDZZiG2F68RIOnGllLj/AdIE9v4Gt7WiAAAAAElFTkSuQmCC",ad="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoGAi4JxBSTuQAAAAxpVFh0Q29tbWVudAAAAAAAvK6ymQAABIFJREFUWMPtmF9MU1ccxz+313AZ4ECWiFgFMYY90GRlG3Gw+bBpMiFsvphQyFYzCYIhhAeeZli28eiWQIhLMEozN98MExJHE0I2E4HEBI1NChNnZOmYtaVhw4HFtvS3h92SWqCgInTTb/J7uPf8+9zfOed3zv3BCz2nUp6yfQpgAvYB7wCvAUa97A/AAQwAVwAn8GC9P7AIuAjIY9pFve0z1xvArScAjLVbel9rLg1oXQPAWGvV+14TZQETzwAyYhP6GE+l7c8QMNa2Pynky0BwHUGD+piPrUvrCBmxS48LeXgDICN2eLUB/6WNCMxLHCT+6BeGJSpVJsCJWbmSRxVgDkjaYNAAkKwvhSU9uisBINEZdsWb+n0JdGHaFw/0QAKBHogHujeBQPfG20x+fREngub0ULlseEpIxYK6EojNFQ/0agKBXo0H2p9AoHFZ8jbwMhJref+LI1SA4wkw7cejIf+T17wkoBn4BbgLzG4w6IOY9boAfcVsNg/b7fa/Jycnw36/P3z79u3w2bNnRdM0iadgMLjQ4YkTJ0RExGq1Ltocdrt9oc3s7KzcuHFDKioqVtu/P+JVuXPnjthsNjEajdOapv1VUFBwv7GxMQyIpmkL1tXVJTabbeE5KSlJAFEURcbHx8Xn88nAwMCSoG1tbaKqqmzevFmampokGAxKfn7+avr/F3Tr1q0iImI2mwX4BsgBXgfejx3wwoULcubMmUUgBw8elEAgIGVlZSIiUlBQsAi0tbV14VlRFAkGg1JRURH9u9zkcDgcg4ODVwHrojXq9XpxOp20t7djsVg+2bNnzwjwM/Al8K6e8IqrY8eOYbfb6e3txeFwUFtbG7e+xWJh06ZNjI2NAbyp740VdXHbtm0/dnR03BweHg75/X5xuVxSX18/r/9vGyMpnaU8mp2dLYFAQA4dOiSANDQ0yNTUlCQnJz/i0ZmZGXG73TI9PS1zc3NSU1MTKU/ROZb1aHSYeg/4FpjWNG26urp6PhQKSWlpaQh4W6/X2t3dPRcL2tzcLPfu3RNVVQWQLVu2iN/vlyNHjjwCevr0acnKyhKTyTTf398f6urqCgC/RWVJ4k69AfgASAN+ALY/fPiwuLOzM+xyuaSwsDA61k7k5eWN5ebmjgDXABRFobq6moyMDCYmJnC73YyOjqKq6lLT/6fH4/nM6XR+XVVV5d6/f79aWVmZAnSu6ppXWFiYfe7cubaioqLv09LSfk9PTx+oq6sjJydHGRoaCsc2Sk1NnQXagc9LS0tDO3fupKSkJGw2m0U3ysvLKS4uxmQyAdiMRuP4jh07ftUTup96vd75U6dO3W9packwGAy7gVdXBPX5fIGUlBT1/PnzqV6vN8PlcmUcPXpUtVqtocuXL4eBkWXaB2traw09PT3h69evhzweT6rH41E9Hs8rfX19DA0NRbx612AwRH9wGPj45MmTvszMTEN9fX36alLjCmABPgLeiiqbBX4CvtDXEUBTVPlkVBocIAR8FfXcEVM3omtAtz7uzaj3HwLlMW2+44Wed/0DIPwsE1bJN5kAAAAASUVORK5CYII=",pV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AkWAwU7bMh4KAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEPUlEQVRYw92ZPWhbVxSAv/esX0uyA8+uVCgWpip0iWNTtVlCvGTqUrdobZLJeE07GxO8dPMqMuVnNYkKGbsEMjStS1tlaanASBQqNX4QW5YlS1bUoe8qV1fvPf0btweM7fPe1f049/zcc6QxgixtLBjAFeAacBW4DEStxyXgJfACeA78mk0XzGH30oaAiwBrwDYQH3B5HtgEMtl0oTwRUAvwDnCX8cgWsNMvsNYn5GdARtW3tBb1YJNqpEE10uA0dEbD9wYAb13HX/EQLHsJlr34qlNoLdvt1rLpwrcjgS5tLASAe8CXsr7ub/I6VuUwVhvIhLPFAJeKQXynU+qjR8B6Nl2oDQxqBcpPsh+eeZu8ilc4NuojnXnY9DGfD+FpTKn++5FTwGkukH8CAaE7MmqUEseMU6K5MDNmQFbVgPfsYDWH4/5NWLJFi1fxysDHPIg7zOdDaG9R8sCHqhvoNmvvyZDFRHlikACHsRrFRJkWLaGKWwzOFlWj++/4sSvkye3KUHDXn66yd7DXZdl38mHHbKAreTIj+6QdpBEw2oDqZv3KkxuPMQJGl2WPjI79MhZT19HfkaPbLnCMgMEvaz8DkJxL8tX3Xw8FagQMntx43KUvJY458zaxY9Ikax4J5V+Jo64UJCCFJfYO9rj+dHXo4weYvh+yTV3v5mZk1Uw2XSgLi67JydwuT6rHlZxLTiS4jo06dX+HVdfko98W2texqu0HTArMThSGbQDdSu5xUbudonzYwBk2ZbW0t+lqaWPB0K375L/HHmw6Lv78uy8wa+a5wSosVzzWpReAaqThuNCsmSxnVjoCSpWbz26xu7/rCpBaTPFw9UFP0Gqkgf/EI/69pls3856gIrqXMyuOlu0F2e87NixXdat9AOA0dOa6WOTQ5cxK18YywMPVB5zcrnT8yFbc3d/tCaywXNaWNhZOAR/AHx8f2Fd/yaLCBdz81Sm32uVNR3kDH/w413ZZfZiq4uankxLd6hbb7cOgJVAccz8BIrtGr/cVlpJutbQA+CuevjcTBSC1mOr47RQwsi61mOp4304Ulpceq+/+FCBY9o7cZog0dfPZrZE+I1j2yv++0K3hgN3DgStTLyv1+44Ny3PNKqEHooTmPjH7DqLp+6Gx356EJH4w5PZ6TrcaqTyA1tKYLQZcK9N5lNHZYkCGzGfTBVOE1qbQXioGe5bRScMqDJvyNa/dgvhOpwibvp6wk5Kw6VMHFJk2qDX/2RJP5vPuFcSsmW3/Gvb657RO2XtLzKbkrLoj/vA0pojmwn1tOGzfZLcumgur05OdsbTL4w4gt3a5A7+0d/h7NDn7vrhMTx96qQeb1KebE4UMmz6i+2F5WvIomy5802tSst5OV2jEchHHlDUuS8ZyEXWks/7/GZL9p8aOymTvYg9y3bKBkAszGldgL/6XDTbAF/frG5eAO5cvxP4BRvwfIIZhm1cAAAAASUVORK5CYII=",mV="data:image/png;base64,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",SV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AkWAwYaC4w7tQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAD0UlEQVRYw9WZv28aZxjHP3f8OgLEkUgKQ20WOsYeailL1P4DlcLYpVKmyGv+AMuyPHT0ijpVylJ1olL/gUZZItlSTaZKXqAdIOlJIUCAw+Q65H3Jy+s7fHc+iPts9x7wfnh+3ft8z+Aatr23VQR2gIfAA+A+UBK3u8Ar4CXwAjhr1tt21L2MCHAFoAYcAZWQX28B+0CjWW/3VwIqAJ8Ch8RjB8BxUGAjIOQjoKGvu4aLk50xKkwZFaZMchdM0x8ASDkmmWGSbD9Ftp8iPUpguJ7b1Zr19m/XAt3e27KAn4Af1HUnM+NteUSvPA7lwo2OxZ1OlvQkod96Bjxp1tvj0KCiUE7VPLxIzXhTGTIoOteKed5Oc6+VIzlN6Pn7tV/BGUsg/wEsufauOKZbHUQCe/94CMCtn3ML66XzPLdtS10aA196wZo+4T6VkC4uryuDyJB/f9/2vdetDnhdGeDiyiULOBUMy0FFTlYkZKfaD52LKmTRKgJw8u+J52d65TGdal+FrQiGBUt4VPeP8vpNZUj/i8mlH3dxMa5oGCokQPXXr3w/69yaMUu65HppubRT2t34s3vS++uSR0WfbKg56efJsJBBrFce8664sF9DMF0K/VO1uq+Tk2Eh1Zy9SM3wYjIVbx6qIb/6UWFgfMqrpZB++ell2t6H0qvSozW1mQfqk+7HTA3iyW9+/zYw6KDo4GQWvFpTQY/k6tvyaK3h9jKN4QjAFM29Ip/dYVtR3JCysFzjU7va3tsqmuI8+THs2VnskGHyc6FlLbLsmOLQC8CoMI3dk2HyUzWN5aEpTuahQFcR7itAHyTF+ADAJHcRO6Q8kOimH1B001jum8qMMz/0rtKT9ti+EtKDpWSus7rtsc3mL1uRvpsU0+KmHB+m1ofA4VslZMpZ8GE3KUbaTYDMMMnUckLlU5A/EcWTmWFSvXxlirkbgGw/FXv1Rg23xvLSFOJAJNDn3/2xspzUWF6YwJm8So8SoX5s9+7uSiA9WM5MMUi1AAzXYKNjfbZwq2O1ogG0mvW2LUtrX67e6WQ/K6QHw756zJuPIOlJgrydjpSfcUDm7bQuUDTmoEL/OZB37rVyofMzDkiPvQ+kNqV21eP5U2CaoHSeX2u4pSChqSfHl4Y7QT4fSW7blm9hqWGPC3KjY+mqSU1V+haeU0JVe6aGwStfZdglpGskfOeqMFqUKprpCp/XoeTJvF1hUD4v+HpWetJwZ76TahBPls8LqlbQEgzrF8mW5WRQkez/LTtqyt7NFnI9xLObK41rsDf/ZYMH8M19fbOk4NbyQuw/OoL3NjoRsVMAAAAASUVORK5CYII=",gV="data:image/png;base64,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",_V="data:image/png;base64,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",xV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AcBAiIT8ITZxwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEXUlEQVRYw9WZXWgcVRTHfzOzH/loWtM024jZbtOSWGMhFAppbUtTVDCCwqZ+tdDYilSkhLz4JioEQaW+BM2DItSKUPpg4oPFioQGSot9sFjBoA3BNKtN3GRNk7XLdpOd68N+xNmd3b13diP0wMDM7N3//c09Z+459w7cJ6Yp/8N/XFSk59Dn2tqBpiHF9JnyRmfLCWVYzSlk8+Ee5ierMZetEskVDWFa72Wu27sj/PLxN45gdSeQweF91Pvj3Iu6WI4blsNc0RGmZjkyFuhcJDi8D4tXJENJdwIJsLVzScndLq+Jt9a0aKjA6k4gUx0LvOtWpEG37b9juVaF1Z1AZqz10II0aMvexbx7KrC6U0gV9+suk+oNSdvfZGF1p5Aq7i/1QDKwulNIFfdvz4lPJ7B6OZAyo6XpgtpNci9dMVi9HEgZ929+5K7SNFYI1pXNHg4gU1kHEjEDMXnW/kVq7UWYoOlqsCM9VxDTZ7IZTLd7GhUbv7gxL2Xmps/xixuVdXNZdMqw5LLGxKX6gqMJICbPMnGpnpWEVk5Xq65XNTMJP57bDGho218uWftcP+9j99G/0I3/ETQadjM26CeZkHfI7Z/ruPBrLV39Iep8y8p9Krs+MlXF6OmAEmQ2VBI6o6cDRKaq1hY0GnZzeai57OL+8lAz0bB7bUDNJIwN+iu2Bhob9GMm1wD01rX1Uu5+eIvg/dcFHpcoGQa3rq2vLKiZhBsjPinBN4/DK89Ab3fptjdGfNKjKgW6EJIL/kCT4OCu1PnASfC6RcW0pUBnx2ukxD7sg2pvet4z4NhTldOWmkfnblrFHmpcHalHW9Llnp/saGZs4CTMRAQ/TeRr/jmnrWo//XdlQKNhTyq/aIKXnoC+5yGegH9iMD2bOn/xSRtxA549ALvawEw/W20VLN2FD760alc0Mwmhce57GLsuGH4Pdm6DPTtLFBcHrdd3ovB4n/p0ZonRkZ4rto3qfAnL9UxE47HX4I2P1Dr77gfYcQRCYa2gdiEWPXebxQ62sS1mO7pffKvRfgR+my4OODMPna/CsQENM6cktNPOMGR3U7Kg6W2VQrBN7bGCEPOLGtFYcdC3P4Pfb9uXebnaeZBpNj13d80Ott4fLwjhdQt27ygOurdIHP9XuxBk/jxaAFY3oCMYtu2ovSVnhoiBaVrvde+xh+wIhrP1aTFI+wm/AGygcwnDY+Y1P3V4NQ5PvAutL0AgCG99utrmwU3gMqxZyvCYBNIr2FKQhTOTDaxuQFd/yBpfDYL9HXD0HejohQtXUy/LvWWNT77WaOmBoa9SbRs2WLvo6g+hG3KQpfdHbZbRkamqbE1q6ILnDsH50eIyD6wTeNwQXki1O3DqDxq2xqUh5TZybWCdLEUy7s4sRVQg5XecbWDNZKpGlS3/OoJhAp1LSu5WBy2ym2ImU6Xa7HgNczdrsrm7zpegsS1GU3uMen9c+u0uH9QG1qmt7ceGHNiyTfHzzX1j/wKxDhh8cgm7FgAAAABJRU5ErkJggg==",vV="data:image/png;base64,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",wV="data:image/png;base64,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",yV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoJEDU1BYxD7AAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEkUlEQVRYw+2Y3W9TZRzHP8956cte23VjhY2ug1EGCBsDceIFGi8wMQGVhChXxgTihYkkXvgHcEHihcYLQ2KIMWgI3hnfSIjEIYIV2MgYL25M2GDg2NbNua5re9rn8YIzqc2YW0cXov0mT85zzun5/T7n/J7v8zwpFFRQQf8viVwfVEoF7W4TUG33K7J+Nmof7wGdAEKIvryD2nBNQCvwNLDChnPNEFNlXIvb0DeAn4Ew0DkfaDEPwFeBl4AnbDCRQ0WU3eLAZeBL4FiuXzkbcqdSqk0pFVNKpZVScjphpjLPZ+pnHaUdK2bH3vkoIMNKqdQ05DToLBAq80VmAZ2GTdk5ZoXV/qXcu+xSZ5ZZ2Kbgft55GOLBM5mxhJ1jV4ZB5w5qqwQwHvIiCCH+ATHb/Ydds2XYucgVtBuYnOMwWcgom7Rz5T5XKqWOKKWi2WN0DoaZ6xiN2jmCCzVUUCl1UCl1QyllZQLbba6SWYCWHfPggiFnAN5nO3Q8YybIBp+ppTMcPm7H2DcfQJErdMYKtREI2YuAM8N8KSBhT+49wMVcVqSCCirocdk4Z2tba6gY2A80246XII6eCnd/+9iAbmsNPQ8cNnQjaK9cmmmaxBNxqy5Yv9fnq/rig48+jy8kh/4IIFcDxwM1wWXVAT/pkCG8tZV4PV6cTrd+99btF1OWVbq1tflkR2e3zDWPsUDIgKZpbSsDq3y9a+9wrqHrwU0Jdff8NGoBM9I/sj8ejw8A7y966be1hkqAy6GGNXWDgVFOVJ65vx1z3w8pJyRo4HdUsbFtJbFINHbiVFdxrvm0HCEF8HV9sKFubNkEJ9eFQUgYlQ+2fFMKnIJh3xg3W4ZRQhXt2L7lpx3bt1RceOfJ4kUBBfY4Hc5nvb4K2hrPgwCtWIcigSjXEEUawi3QfToIuF7fj6vFg5W0npmamtqbkiqW99I/t7XxBSHENxvWbtK9r9XRnrhIMpnA56xgIDaALnSchguX7iJUvpqbI72UejyMjYxQelZnINwrpVJv/XD22qG8mklK+dmGtS36G2++zZqmZqSUyHQawzSJx6dQSEzDgWGY6JqOlGk0TcOyLH7xneZ44ph29sLpA8ChfLve1xBaw7rmFn693MlUbJKly+tIWRZ3+vsp93rxVFQQGRrCX7scpRQOh0lpmYdNm1tpP/MjQtNK8j49maYZ+a37WuXHH77Hrb4bKClxiQmsFLidBi6niek0iUZjTMYkDlOhu5dQE1jB+Pgot/tu4vV4e/MOahjm7ivXu45e6bnkX1W/mqoSSeqPS6TTsOmppZQWG6BgMpbiZHgQdCiqWkfH+d+53teDw+Uerq2p3ZH3lam3b7CvpSn0adKyqoZGBpvLy/0iWFPM5kYn3jIDXQNNgNulEVxWhL+6jLsTJbRfvYamG5El1UvWHz7y1e3FnPBNh8PxSTqd3tPcuF4LVCZIpQUup0UyaVDitojGTSJRk3NdVxG6MWQY5ivffd9+ZtE3Jftef7lofHxsd2R4+EB5aVmNVNNBxd//iEUn/0whxGng3WQy0XEq3CMpqKD/oP4C3HApLBAJZbIAAAAASUVORK5CYII=",im="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoIFCAmCTIrnwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABoUlEQVRYw+2Wz0obURSHvzOTIGKUKvVPMGo3Iii47MaVy7rwMeoD9B2kgUK3BbsU2ieodeuiVMSFqFFKt6lRpEYqaRtz768L00JdlGQ0GSj3g99yZr575p7DgUAgEAgEAv8zdl8vkoiAXmBEIIMy0DBDqZ9SwiTGJRaceOZFyQk5IS82JZYlJiTiNCUzEk+d2P4tdzv+JrtOrDoxnJZoviki10J8gxcSue5KemJf461rVbIZifmuinox3mol/xK+5tj/ZCjJN6NEpj9YS/RchhlledKcEJ0dT6ow6Ef5mngeOrCYvBmVzlZ0ncjuMhlj0EemO99IYO6g/fv5Jx+QihQ6fkcNZCW2E590h9dccNaVZrJTXiWS3IPoIUV7Tr39Pkzy+6ts2jkoC/Q086+2vAYTaIt3Omq/momXEq0Qq8p7JuhlloJmmCSHkQMeAA64BL6D1UFfqNonLq3Mkr2k1PXtSYvk6GeeiMfqY4xHTCnPHI66lTnkhApXfDPPsW+wHw3w2d7gUl3zALREP1nGAEedim1QC5t0IBAIBAKBQBr8AnHFRZ9mvpokAAAAAElFTkSuQmCC",EV="data:image/png;base64,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",CV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoJEDQ6jChvPAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEkElEQVRYw+2YTWxUVRTHf3fe10w7nXbaaQstlvLR6YRM+ZSAosEFIagRRGJjWLHqwpULEmPcmLhgwcJE3ZkYNZHoSiMRNzXhMzYGa/hSaGkpdFMopXY6M52Z93Fc8MBhUpBOaTU6/+Tm3jfz3rm/ueece+4bqKiiiv5fUuU+KCLt/nAd0OyP60tuu+P3N4FzAEqpkQUH9eHWAVuBZ4CVPlxwFptS9FnOhx4GfgL6gHNzgVZzAHwDeBVI+mCqDI+I33LAReBb4KtyV7kUco+IHBeRrIi4IuIVtbmq+FnXt3lcRPY8Ccg+EXGKIYtWRkREHnZ9b1ws/7oY1vHneCRs4G/cvc93dbGb1d354GF96Vgp9UBfbMtvSWBfUYI+PqivMKCXlaV/QSEiKKUegC+R7s9FuaBXgMwsq/04YTOX35Xx5yp/rxSRL0Qk/agYLY3F2WIUEM/zZovRtD9H+3wTql1EDonIsIjY88j80oy3fZuH5g05C3CPn6FTRTtBKfhszS3K8CnfRs9cAFW50EUVagMQ94uAVZR8DpD3N/cB4NdyKlJFFVX0bzk4l2pHYnmTKrhfKlcSKDzA8wzt897BG+89CfvaE4HseOqglrGPhRxWK1ciuiu1YQJ1Ts5+YWdXfNlLG5KnTgwM5/7RFd0Rb9ulpwvHEtU1qsGyqNI0FJD3PG7l8/yeSrGkKdofbazf9sGPZ8qG1ecJudVM298na2pVayhE1DTvf+eJUKPfNX/l1uTGjOt8DexZdNAdnW3NWto+tSFSG2gMBsl7HmO5HFbg7oEs7ThoStFRXU3edbmZmtk9n0UJlJk4gcCMc3ltOKI3WBb1pokC7hQK9+/Juy5mIEDYMFgdDqME9sdXTb2+cc2q3u4tTYsCqhzv47Cr6pYGg9QaBgDVmkZI04iaJtWahqVpxCwLgJhl8XQ0ip3NR3KZmY8cT24veNbvTCw/aOa9dza3tKjnnt1MjfKoVzqtLS20AnWWRSwSoT0WozWRoDqfp3lFO/WaR8DUuJ6a7jg9kW0Zmpg6uqAxage1d5Nda9XeN99i1dr1uLkZnOlpAgENO5UCEZRpolsWyjBAPLRQFZ6CyOmTZI9+w8mLZ7uBngV1vWdptcs3biLx/HaGR0e4fG2IjGkymZ/h2uAA47fHmbELjF4dJGsXyChFTlNYDTGSL75MXWccCRrBBc96wzQnhgYuxz758DA3rg0hnkdQTWM7EDI0QqaOYRqkM1nS3wmmCVqoida2lUylJhm9PkI0Wn91wUF13ei+NHjhyKWB80s6VnTSGPZw/jiP68KmLUsJV+kgkM069PaNIRpUN66h/+wYgyMDmMHQ+LLWZbsXpTLte2VbQyqVOmwXCge64knV2Zwi3pyhtkb33wBAKcjOOGQKAfpHY5zsv4KmmxNLW1qSnx35YWzRSuj2rXHDNM1PXdfdvz7RFWiL5XFcRdCyKRR0wiGbdM5gIm3w84XfUJp+S9eN1471/nJm0Wt9z4G9VVNTk90T4+Pv19ZEWj25Z1Td/0csnUk5KHUKeLtQyPef6BvwKofWiv6L+hO3lkLSl9n4+gAAAABJRU5ErkJggg==",am="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AUIFBkAV+u0CQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADIklEQVRYw+2Ye0hTcRTHP7+1lsaqOWetwgjKasOMtMc1ggh7QhBFDymK/kiRkAp60AOiP4otsH9igQQFFq2IHkjQA4seoNyC6EGpUVAS5izTmbJ0PX79syvmZuEmd390v3DhwPmee773d86553LBgAEDBgz8FxCDcRMppavG660FaD5aBsCYg7sBmLdvn1sIUZdUoVLKscA5oADg2gjHH/5VHS2aeRfYJIRo0r0UUkqXjIFqj0dWezyyH7h0PVEp5TCgFRg+wNAQYBdCdA80pynOByyp8XoHKpJITIluZb9qTZdXrel/K3HMltDidCt972TawHxrbeXpqVPUnfcD4Nq4gZnFxaTa7fQdtNWdX0RShHYGAlRlZcfkLn7zEqvTmbDQuHp0VUfLzt6nWX3kSL9czadxtVi9hqlce6EDdJ692C+xty8SUx5PQnNcjS1Et5TSDdQCWDcXEqqILda6ubDHjmypbt2Gqe9m6gwECv7RowlvpkHZ9S+q/HUjbeOmfbj5gNeXLgMwdd0aMpcv4GvwY33O4g2uRHPEVfpwUD0DTAA2WmxKc6i9pSvU3sJQdxrZh4t6eIGGFwBdkZilwEnAb7Eph/QappmRD5FA28eawhN++73+iPXvLPvDQXUFcAuYpPW1LqUPB1UzsAMoq1bDrN3SRl6OmXLvcL40vgUgffxkth34xrNXP76/e54x1GQSABciVZDoiXBQHbV3z0PV4ayUObm3o9bmomUPpMNZKW9cf3I3HFTnJpLLlEiwxaa0X7zyNQ9gzix7lL9g4WgAPMfbcy025VHShDqclZNCoZ9mgOnTR0X5c3PTAKir77A5nJUZSRMKbNWMKVkjopxTsqwxuckQmqoZmZmpUc4xo1N6bJu5OdOnDM57Oy7smpHtn59XIT997or5Hbok/7Q8Oitd+hSkT+GxT2GI7pvJpzAOaARIm+hmxvrt0r2yqFUIkwSuACdO5otXfcJcpSr1epd+oma0va/l/rGS/SbTEIcQIkMIUSKEqAWO9eI3AQ3JOFETMBtIiVx3SlV+xuBlR3gVpSq/jN8pBgwYMKA/fgMMao6Gt7O38gAAAABJRU5ErkJggg==",VV="data:image/png;base64,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",od="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AUIFCQxbN38jQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAB3ElEQVRYw+2WMavTUBiGn5Nzk/TSUKxwzWCxJRI7dZDiJq4KLmfwLzi4C07+A8F/ImdyEcFVuJ06KFZCC+WCi0NvRaRt4pIhyL02J6YR8TxLlu8758l3csILFovFYrFUQWvtHWJdUYOYAELgMfAE6AAT4DXwFviglPr2V0RzuTZwD3gK3AECgCAIAH6s1+ttXv4dOAVeAu+Bc6VUenDRXPIZcB+4DbQ7nY4cDAai3+/jOA4AaZqyWCyYz+esVqsNcA58BN4Bz01lq4i2gK+u6/pxHDtRFCGl/G3PbrcjSRJms1m62Wy+ADeUUluTfZ0KJ+8Bx2EYOnEc75UEkFISxzFhGDrACSBNN60iegXAdV3jxrznCPCbEA0APM/8L1To8f6FiQK0mhDtAvi+8ekVexqZ6NUajr6Rb/Skhom2rGiBazWIHjcmKoR5TCj0tA8qqrXuAQ9rSG0vtNb+QUS11l3gEyCGw2Flw7z3FnBqkl1FSckWcAZ0R6MRURT90TiTJGE6nZLHvrtlAoooISmBBXB9PB7T6/VqSezL5ZLJZALwBniwL/aJEtnzMxD9chkyYJs/RR40RJZll12eCynUvwIeKaWyy2qP9rx4Bty8YOFSmNZbLBaLxWL5f/kJlv9+JMvAZfsAAAAASUVORK5CYII=",DV="data:image/png;base64,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",FV="data:image/png;base64,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",qk={blueImage:$p,blue3Image:aV,redImage:em,red3Image:oV,happeningImage:tm,happening3Image:sV,chanceImage:lV,chance2Image:uV,chance3Image:cV,bowserImage:nm,bowser3Image:dV,minigameImage:AV,shroomImage:fV,otherImage:dl,starImage:id,blackstarImage:hV,arrowImage:rm,startImage:ad,itemImage:pV,item3Image:mV,battleImage:SV,battle3Image:gV,bankImage:_V,bank3Image:xV,gameguyImage:vV,banksubtypeImage:wV,banksubtype2Image:yV,bankcoinsubtypeImage:im,itemshopsubtypeImage:EV,itemshopsubtype2Image:CV,toadImage:am,mstarImage:VV,booImage:od,bowsercharacterImage:DV,koopaImage:FV},Y8={};let Fh={},Th=0;Y0("toadImg",_ae);Y0("mstarImg",xae);Y0("bowserImg",vae);Y0("koopaImg",wae);Y0("booImg",yae);Y0("goombaImg",Eae);Y0("eventImg",Cae);Y0("eventErrorImg",Vae);Y0("starImg",Dae);Y0("bank2Img",Fae);Y0("bank3Img",Tae);Y0("bankcoinImg",bae);Y0("itemShop2Img",Pae);Y0("itemShop3Img",Rae);Y0("gateImg",Lae);Y0("spaceBowser",Bae);Y0("spaceItem2",Mae);Y0("spaceBlue3",Iae);Y0("spaceRed3",Oae);Y0("spaceHappening3",kae);Y0("spaceChance3",Nae);Y0("spaceBowser3",Uae);Y0("spaceItem3",jae);Y0("spaceBattle3",Gae);Y0("spaceBank3",Hae);Y0("spaceGameGuy3",zae);Y0("spaceDuelBasic3",Wae);Y0("spaceDuelPowerup3",Xae);Y0("spaceDuelReverse3",Kae);Y0("spaceGameGuyDuel3",Yae);Y0("spaceMiniGameDuel3",qae);Y0("spaceHappeningDuel3",Qae);Y0("targetImg",Yk);function Y0(n,e){Fh[n]=e,Y8[n]=new Image,Th=Th+1,Y8[n].onload=Jae}function Jae(){Th=Th-1,Th||vt.dispatch(vre(!0))}for(let n in Fh){if(!Fh.hasOwnProperty(n))continue;let e=Fh[n];Y8[n].src=e}Fh=null;function U0(n){return Y8[n]}class h0{static drawUnknown(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.fillStyle="orange",e.lineWidth=2,e.stroke(),e.fill(),e.restore()}static drawOther(e,t,r){h0._drawOther(e,t,r,8)}static drawOther3(e,t,r){h0._drawOther(e,t,r,12)}static _drawOther(e,t,r,i){e.save(),e.beginPath(),e.arc(t,r,i,0,2*Math.PI),e.lineWidth=i/6,e.strokeStyle="rgba(255, 255, 255, 0.4)",e.stroke(),e.lineWidth=i/4,e.fillStyle="rgba(255, 255, 255, 0.2)",e.strokeStyle="black",e.setLineDash([i/2,3]),e.stroke(),e.fill(),e.restore()}static drawBlue(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#0039ff",e.strokeStyle="#001281",e.stroke(),e.fill(),e.restore()}static drawBlue3(e,t,r){e.save(),e.drawImage(U0("spaceBlue3"),t-14,r-14),e.restore()}static drawRed(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#ff3131",e.strokeStyle="#611515",e.stroke(),e.fill(),e.restore()}static drawRed3(e,t,r){e.save(),e.drawImage(U0("spaceRed3"),t-14,r-14),e.restore()}static drawMiniGame(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#0039ff",e.strokeStyle="#001281",e.stroke(),e.fill(),e.fillStyle="#A4FFFF",h0._drawStar(e,t,r,8,5,.45),e.restore()}static drawMiniGameDuel3(e,t,r){e.save(),e.drawImage(U0("spaceMiniGameDuel3"),t-14,r-14),e.restore()}static drawHappening(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#099f0a",e.strokeStyle="#2e681e",e.stroke(),e.fill(),e.fillStyle="white",e.font="bold 19px monospace",e.fillText("?",t-6,r+6),e.restore()}static drawHappening3(e,t,r){e.save(),e.drawImage(U0("spaceHappening3"),t-14,r-14),e.restore()}static drawHappeningDuel3(e,t,r){e.save(),e.drawImage(U0("spaceHappeningDuel3"),t-14,r-14),e.restore()}static drawStar(e,t,r){h0._drawStarSpace(e,t,r,8)}static drawStar3(e,t,r){h0._drawStarSpace(e,t,r,12)}static _drawStarSpace(e,t,r,i){e.save(),e.beginPath(),e.arc(t,r,i,0,2*Math.PI),e.lineWidth=i/8,e.fillStyle="rgba(0, 0, 0, 0.2)",e.strokeStyle="rgba(0, 0, 0, 0.3)",e.stroke(),e.fill(),e.fillStyle="yellow",h0._drawStar(e,t,r,i+1,5,.45),e.restore()}static drawChance(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#0039ff",e.strokeStyle="#001281",e.stroke(),e.fill(),e.fillStyle="#ff3131",e.font="bold 19px monospace",e.fillText("!",t-6,r+6),e.restore()}static drawChance2(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#099f0a",e.strokeStyle="#2e681e",e.stroke(),e.fill(),e.fillStyle="white",e.font="bold 19px monospace",e.fillText("!",t-6,r+6),e.restore()}static drawChance3(e,t,r){e.save(),e.drawImage(U0("spaceChance3"),t-14,r-14),e.restore()}static drawStart(e,t,r){h0._drawStart(e,t,r,8,"black")}static drawStart3(e,t,r){h0._drawStart(e,t,r,12,"black")}static drawStartDuelRed(e,t,r){h0._drawStart(e,t,r,12,"red")}static drawStartDuelBlue(e,t,r){h0._drawStart(e,t,r,12,"blue")}static _drawStart(e,t,r,i,a){e.save(),e.beginPath(),e.arc(t,r,i,0,2*Math.PI),e.lineWidth=1,e.fillStyle=a,e.strokeStyle="rgba(255, 255, 255, 0.5)",e.stroke(),e.fill(),e.fillStyle="white",e.strokeStyle="black",e.lineWidth=2,e.font="bold 12px monospace",e.textAlign="center",e.strokeText("START",t,r+12),e.fillText("START",t,r+12),e.restore()}static drawShroom(e,t,r){e.save(),e.beginPath(),e.ellipse?e.ellipse(t,r,8,6,0,0,2*Math.PI):e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#0039ff",e.strokeStyle="#001281",e.stroke(),e.fill(),e.beginPath(),e.fillStyle="#D3FDFC",e.arc(t,r+5,4,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(t-5,r,2,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(t+5,r,2,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(t,r-2,3,0,2*Math.PI),e.fill(),e.restore()}static drawBowser(e,t,r){e.save(),e.drawImage(U0("spaceBowser"),t-9,r-9),e.restore()}static drawBowser3(e,t,r){e.save(),e.drawImage(U0("spaceBowser3"),t-14,r-14),e.restore()}static drawItem2(e,t,r){e.save(),e.drawImage(U0("spaceItem2"),t-9,r-9),e.restore()}static drawItem3(e,t,r){e.save(),e.drawImage(U0("spaceItem3"),t-14,r-14),e.restore()}static drawBattle2(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#099f0a",e.strokeStyle="#2e681e",e.stroke(),e.fill(),e.beginPath(),e.fillStyle="white",e.translate(t-10,r-10),e.moveTo(14,3),e.lineTo(4,11),e.lineTo(9,11),e.lineTo(7,18),e.lineTo(16,9),e.lineTo(12,9),e.lineTo(14,3),e.fill(),e.restore()}static drawBattle3(e,t,r){e.save(),e.drawImage(U0("spaceBattle3"),t-14,r-14),e.restore()}static drawBank2(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#099f0a",e.strokeStyle="#2e681e",e.stroke(),e.fill(),e.fillStyle="#EEF700",e.translate(t-10,r-10),e.beginPath(),e.arc(10,12,5,0,2*Math.PI),e.fill(),e.beginPath(),e.moveTo(8,7),e.lineTo(7,5),e.lineTo(8,4),e.lineTo(12,4),e.lineTo(13,5),e.lineTo(12,7),e.fill(),e.fillStyle="#099f0a",h0._drawStar(e,10,12,4,5,.45),e.restore()}static drawBank3(e,t,r){e.save(),e.drawImage(U0("spaceBank3"),t-14,r-14),e.restore()}static drawArrow(e,t,r,i){e.save(),e.beginPath(),e.fillStyle="#F647A0",e.strokeStyle="#94305B",i===3?(e.translate(t-12,r-12),e.scale(1.25,1.25)):e.translate(t-10,r-10),e.moveTo(10,1),e.lineTo(1,10),e.lineTo(5,10),e.lineTo(5,18),e.lineTo(15,18),e.lineTo(15,10),e.lineTo(19,10),e.lineTo(10,1),e.stroke(),e.fill(),e.restore()}static drawBlackStar2(e,t,r){e.save(),e.beginPath(),e.arc(t,r,8,0,2*Math.PI),e.lineWidth=1,e.fillStyle="rgba(0, 0, 0, 0.2)",e.strokeStyle="rgba(0, 0, 0, 0.3)",e.stroke(),e.fill(),e.fillStyle="black",h0._drawStar(e,t,r,9,5,.45),e.restore()}static drawGameGuy3(e,t,r){e.save(),e.drawImage(U0("spaceGameGuy3"),t-14,r-14),e.restore()}static drawGameGuyDuel3(e,t,r){e.save(),e.drawImage(U0("spaceGameGuyDuel3"),t-14,r-14),e.restore()}static drawDuelBasic(e,t,r){e.save(),e.drawImage(U0("spaceDuelBasic3"),t-14,r-14),e.restore()}static drawDuelPowerup(e,t,r){e.save(),e.drawImage(U0("spaceDuelPowerup3"),t-14,r-14),e.restore()}static drawDuelReverse(e,t,r){e.save(),e.drawImage(U0("spaceDuelReverse3"),t-14,r-14),e.restore()}static _drawStar(e,t,r,i,a,o){e.save(),e.beginPath(),e.translate(t,r),e.moveTo(0,0-i);for(let s=0;s<a;s++)e.rotate(Math.PI/a),e.lineTo(0,0-i*o),e.rotate(Math.PI/a),e.lineTo(0,0-i);e.fill(),e.restore()}}const TV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4gYKERoFqgbC/gAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAASNSURBVFjD7Zk9ciRFEIXfy6qR2BsgvD0GROCIY6yJuS7HwF0Tc6+h2MDhGHjLEUCaqUyMrKzK7hmknpGWEBG0YtSj7pnqr17+Vgn4jxwEAHz73l415W8fWOO93b17nUrefgQA1Hzxpw9/vCrIn9/fjPd1ffP29mbzQL98/P2sB//47u3mz97dLUWrL62CkCABM0Dt5Vz/2aC7QggJEXbQeU/Ngc3s2dD14lRB4s1VgRCoImAHlESq6nBmwEEVQsLg4F8clCTYz9dVICRqIch/UtTVLFYgFBjMYc8ErudDsvshcVUFRfy90NWMiQSIqg3gmAzBAbzVJep5QeKgDNCdoIhAiAF7BGrz7KZ3SJj7kGyErZuVZCg3Ya+q+2jpPhoRvza9GdCyjwLQLMIG2LoFUk5AColdcdO7yTMoexB186qhKIeP6oDrVdFj81GfrU9FN9c/CbwWohYBye6rGH44QA1oNDTqDLiu6OLcIe0i0LXJ05kkdrUMRU+DOqx0RfO9gOQQZVphE2iURSHx5kpwvSvYFcH1TlCL4Kr6uRbB7Q/fzMnE47gcz1V1F/h09xlNFfuD4tAM+6Z42Dfsm+F+37Bvij8fFGqGtzdfbVN0V4jaI7oWV2z9YsoE4skVmbMHNoz0XFoIQGAFMFOYEa0I1BS1EE19XG223fQRIFVmrsxmLuU4wHIgAQDNYD1X+YQFZgoxH0fMx2riFizifr9vG31UFgnc/a52wKjrRTiDjRM0a2ojJL3ox/fMCC2Ean8O09gEinAbaJEl7EjkXJk84OiKBXQ2u5oBBAzdrEJQwwqzkGBpjPPz6KkgZKpAWKWuWSYnLAwr9bGYfK5sIdAZpg8zYw4uOUXlpOJEObhsGN5zKccEcTJfkk+U8EvaPDu9RDy6aWbj79kxvWA/qr01015ZosKoGkxs/O0dEEELkO6PicYyu52e24u3ebMbmjA2jNyvJ/9ET/bxqWZzkrlXDRHUQqSNoE3nF2KApooiZVSapn5mEkrDJ8M7zQFHdYr+VJNVhvXmiuBM0x9DagcsaiBnp55+YWH07h4ak2s6JtjUX6FigB+aX38SNJa0swmRo4Ykrv366TNqkZ5rZ46dqIbWumJq+O77r7uCOuBmLCyvb14ux9LBUhk0RuB4T9mat8DFCBOBxnKjO2oOwkPThU/CZsOC5B7Y2j0tojWqinE+mPMDh6ZQ82ojYssqg+R/Gmun5KuLRR6GZ1/Uj+bIRlpCRPI9NEWB9J4zNyYzC2haiiwgM3R6f1F6suRrsGVXTgL7gwfHrP99XW8zKCOyPXB0WGoNaI+oubHWz0Fkpei+uX9GH0kSbLZsSICl2YEV4Exhz074aoYhlM18+XDQ0UQ3PW4mIssEqI68mpL9BsizKpP25C59A4xw0x9ip2S1nZO3dDwXr0H1rN2SC0po7HgQ93tFKURTHEX8chPCcGjT/CMdfcm9p3g4Afy1b6g6W8JTrZoZUlLXf2+TLKt7f1DsG+eKQLhotsl1s3H51mN9aqf3sWO9pD13F/li0Lxn/tqOuv7vw//HM4+/AUUPqKA+d1JYAAAAAElFTkSuQmCC",bV="data:image/png;base64,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",PV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4gYKFR4eQwZmygAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAO1SURBVFjD7ZnNb9tkHMc/j98SN42dpO36xro30MaUgYCtGmMSAokD2wCJEyp3LlyQ2F/AeUhc+AOQEBeEkBASLxIHLr0wCRAghiq0wRAdFW3TvDlxbD8corTJbCdpZ9YU8ZMiK/Zj55Pv7/n9nq9tsfTRsxyE0AA+uPawHGXIpas/C63zRS6/M5KQ4sIbO4p24urbn4wU5LU3X+xNfXesHns39sTl945x64YWe1xVQTcknifwfZBB73ErJyk+U+Xo4p2BkLM3Xw/P0UHx2/VpvvsiS60q+o4LJLRcQSDDkADlkuCPH03mzxjoprsrdZVBA258Nc/yx9ZASGjDdZQUCmh6e9sdv69ofPjWEVa+nksOtOUY/PVrKlKdu1Ouqr1QMgCvRey533ye4afPDu+uPcWFbro0ncFKxqW6X6TSEtUIkgFdWymwvtZ/dmg6aJpEKKCIXmgpwWu1C+vuaDYEbl1NBjSdbWHZkq3NaFVPnXU5c2k1tjB8T+WHT+f55XoqEtZzRTJz1Ckb1GvRF5tb8PtCAqiaz4kLGzz0eHhMYTLg0INOMqDSFwR+9LH8vDdUi0lnXcZsL5xKA1RNJgPqNRV0I3wxoYCq31970BdUqBI1Yr4rAoQyQqCqKiOLQDckmbw3OqC+J9CNKFDQ0/7ogI6ccU4ybn97iO+/tCiXxHbhdbbdq9fanwpr7+eA3Pa+zLjk0eei3VXiipp2C3vC7/EBMmh/oqZRTyszJfZM4/6kfvL4JunxnY7gtXZUbbnhNtcdJy/WyC+U9gbaiDAllS1BKhNfTOdeucVTL1fITwTbTiqqF3fvz9oSK0bNoUDTZrhfZm1JszbYULT6rOXdkEKBi0t/U4hR81+t+tnTm0w9EK96d9pVFVTD35/2ZGSazJ5ySKVl37QXJgOefnUDa6ayf3306OIdzl6qMp6VkWm3cpLHrpSYPrm+/w1/rODi1KPnqlMXWDP1e1+ZslMN9AiXVNkSmHZrqB+YOrHB+ZcqZMZ7r5MrBJy7XMG0nXsHDQJBeSs8ZGIqQMrh3Xn+cI1ms3f8QtEd6v5+KNDaegpzLKyo6woa5eFXX2umwvGi22MZi8/fTtDmGcl5zkeurHL6yXZDP/9CNVlTIoSkWhGRRbDbP2GMuRx5okRuzmSuuJ4sqFPW0bTwGm3ngj350UzBwZqugCBZ0KRDNfZ+V3BgjPN/A1TVgtD8BFB10FPe/4oOVUzdT3pnc7D4WpyjBm7uE2j3M/ORVbTz9mFUQxyUF2L/AI4MPBB5eCU4AAAAAElFTkSuQmCC",RV="/assets/happeningduel3.7fda1347.png",LV="/assets/gameguyduel.6d7be631.png",BV="data:image/png;base64,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",MV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gYKFQM5GWC/vQAABQtJREFUWMPtmX9IlHccx1+Pj3rmJjsMQnMai3BsCp1hbeEfEW1DW62YsDujuU1RA7FEiY3YxmqDQdEPzYZgCoX9IdFa5XowxmbLZJELpSsLItel6Z03y0zO7rz77A+fM3fVZb/stvrAG+75fp/P5/t6Pt/n+X6+fA9e2HNqyuO5yzzgHWA+8AaQAMTonUNAD9AJnAZ+AeXMFD6bRIGsBzkLIg+ps7pv1NOGLANxPgJgoJxjsZ484JsgzU8AMFDNY7GfDORykMGnAOnX4NgYjweZ/RQBA5X9qJAZIN4pBPWOjflwkJEgnVMI6Vfn2NiTB935DCD92jlZSNMzhPTLFEgVdg/StSFQMdc+oIRKDHDjPg8wleYDjKAM3S+jK0MA0s+1MtjULwqhDdOiYKCmEAI1BQOdFUKgs4J9TKOAGiKgXlDCgy1PIWmBoNdDiO16MNArIQR6JRhoewiBtgcDPR5CoMf/DyVUGQL2hEA290yE/E9t8/wWCXypHxZch1Q3IGP6Qe78vp8qdE1s+16gW8ArUBnEdzLxcflBT5hMpjZN04b6+/t9LpfLd+nSJdm9e7cYDAYJZh6PZzzghg0bREQkNzdXbzsh4BJANE0b9xkeHpb29nYxm82Tje/yv6dy+fJlqaurk4SEhEGDwXAjJWX+8Lp1pQKIwWAY14EDB6Surk6/fk8iIr4SKBFFUaSrq0ucTqe0tLTooA0CznHQHTt2iKqqEhMTI+Xl5eLxeCQ5OTlIfINERkbeAZ0xY4aIiJhMJgF2AUnAPGj8dmwK9wqUCCD79++XmpoaHeS4wEGBEsnMzBS32y1Lly4VEZGUlBSBMoE+gU9F0zTZvn37ePYVRRGPxyNms1lv6yoAyjs6OjpOnjx5Csi9ax11OBxYrVYqKyuxWCyfzZkz5xzwGyx7F9K/gL9H7/1q3wSOADspLCxE0zSOHj1KR0cHRUVFwFn9rCz2Lk+LxUJ4eDgXL14ETpTBazWTWQ4OxsXF/VxdXX2hra1t1OVyic1mk+LiYi/ggVOLof7q3Rk9IpAn8fHx4na7ZcWKFQJISUmJDAwMSFRUlJ7xT0TTNLl165b09vbK4OCgjIyMSEFBgT/D0TpH8IwCH/b19W1ds2bNH+np6cNGo/Hmxo0bfRUVFWFZWVkKvOWG1Ymw5XdVjZI77kagmfz8fAYGBmhsbASgvr6eadOmYTab9W3ldAD27duHyWQiI2MxLS0tvszMTI9e042T2T2FAcuBl4EfgZm3b99eWFtb67PZbJKWljaheq0/PHt2kjUuLtkO5S6oRVG6yM/Px2g00t3dTW9vL+fPn0dVVX365wHbABgdjfLa7d81Wa2ebatWrbq2ZMkSNScnJxqofRBoOEBaWlp8aWnp51VVVdM7Ozu9qqqSk5NDUlKS0tra6v1X7VKQ2NjwK7B1F5QtzMpaXpiYmBi2YEEGPT3X9LvczJ07l6amJlJTU7FaPzodF/fqTJ/P1wPvVwOHHQ6yq6qqbm7atMnY0NAw2+fzvf7A/ajT6XRHR0er9fX1LzkcDqPNZjPm5eWpubm5o83NzT7g3L3dt9mKivI5dOiQ78yZU267/Wq03X41zG63Tz927Bitra16Vr9uiohQRgJq+cebN292xsbGhhUXF78ymaNxBbAAq4G3J/QNA78C3wB/+V/2Cf39+lG430aBLROuqwPu9dufwE/6uBcmtH8ALAvw2fvi34vn3v4BZgGY1GBOBDsAAAAASUVORK5CYII=",IV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gYKFQUDiTbBiQAABTVJREFUWMPtmX9I1Gccx19fz/ymUzuUBWbpFuXWLzqjWtEgqCxtLlgMTsO5puRZLpIKBq1ByUbg2ErnfkB5jlC2Vm61wqOi4TBlrS0UL50VWpeid2fNM5zp5X32h3d2uLx+6436wJuH7/d5Ps/zuufz/Po+B8/tGTXlcZwF5gAJwGvADGAyEO7O7gZagUbgHHBagfpR/XUCmwTOC8hD6rzAptEAzBBoeQTA4WoRyHgagJECR54A4HAdEYh8UpDzBC49BUiPLgnMe1zIBQL2pwjpkV1gwaNCTha4OgqQHl2VwVXjoUFNowjpkelhIbeOAaRHWx9owReYAFxjMB0LcwCxymA6ZAH3KJg7hpC42859kB69CsSO8dZ+TYGXRuxRgWV+AAkQ62YZMfTL/ejAtNwX6AI/Al3gC3S6H4FOH3EyCfwDBPsJaK8CISOBuh73MP0kD22KV8SHh/62H4X+tq8xavUjUKsv0Mt+BHrZF+h5PwI97wv0jB+Bnvn/7/VuK/GD3hyRIQjYCTSGQdfiwfVUAPnKnfpSgVve7/aAtIIMgBT68H2Q+oFeD2iVTqf7w2Qy3bLb7a7e3l7XlStX5MCBA6Kqqvgyp9M5VOGOHTtERCQ9PV0AqQLpdeeZTKYhn56eHqmtrRW9Xv+g9fd6wi/Nzc1iNBolOjraoapq18qZM525W7YIIKqqDqm8vFyMRqOoqiorVVU+GjdONoMoiiItLS3S2dkpZ8+eFUAOgXR6ge7bt080Go2EhYXJtm3bxOl0Slxc3Ij1q6oqQUFBd0EnTpwoIiI6nU6AL4GYryGpCax7QA6CbHY3ePjwYdm/f78A8ivIT+68xMRE6e/vl9WrV4uIyKxZs2QrSAfIejfo3r17h3pfURRxOp2i1+sFkG64vh7y6urq6qqrq88B6f+ZTDabDbPZTGFhISkpKe9Nmzbt4kb4fiPY1oGja4SB3Q0cB74AsrKyMJlMVFRUUFdXh8FgoB64BUTcwzclJYXAwECamppog64wWPvtsO+k4aAu4GhCQkJFQ0ND0/bt24Pq6+tDLRZL+IycnJkzIPRdaFnhY4pGRUWRnJyM0WgEoLi4mLS0NKrGj8cM3HCX27BhA+3t7TgcDkpKSsjKyqK2tpYgeEO5z2bjWZ7WdnR0fJadnf3b/Pnze7Rabffu3btdBQUFAUuTksiH99dA+TFgvEYz5KwFKoHMzExu3rzJiRMnACgtLSU4OBi9Xk8sdy+XysrK0Ol0LFuyhOqqKpJWrXJNgusvDq7d3A80AHgTCAV+BCb19fUtLi4udlksFomPj1c+AYcCb3fAD3GRkf1ztFp2AsVAi6KQmZmJVqultbWV9vZ2Ghoa0Gg0GAwG5gGfuxsLcTr5zmplp9ns+Hjdur+XrVjB0tTU8e6qfFogQHx8fFRubu4HRUVFkY2NjQMajYbU1FRiYmKUmpqaAU9hA/xep9W+Guh0hieD9MDLjsREpkyZwusLF9LW1gZAPzB37lxOnjzJ7Nmz+dBsZmp4OOERET3dUPYWbMRuby4qKlLy8vK0hw4dmupyuV65b+g7Ozv7Q0JCNKWlpS/YbDatxWLRZmRkaNLT0+9UVla6gIveTn3BwbZFsOs4FK7Pzpafjx2TmxcuSLPV2mWxWgeuWq0Dp06doqamBoPBwA04fSc09HrXhAkXkwavbVzAO/n5+Z0REREBOTk5971HUNxKAdKARV55PcAvwC7ujqFtXvl2INrr+Q7wqdfzN8PKeuxP4Ki73b+83q8Bkof5HHz+78Uzb/8CsYX5GOjbIQ8AAAAASUVORK5CYII=",{blueImage:Qk,blue3Image:Zae,redImage:Jk,red3Image:$ae,happeningImage:Zk,happening3Image:eoe,chanceImage:toe,chance2Image:noe,chance3Image:roe,bowserImage:$k,bowser3Image:ioe,minigameImage:aoe,shroomImage:ooe,otherImage:f2,starImage:OV,blackstarImage:soe,arrowImage:eN,startImage:kV,itemImage:loe,item3Image:uoe,battleImage:coe,battle3Image:doe,bankImage:Aoe,bank3Image:foe,gameguyImage:hoe,banksubtypeImage:poe,banksubtype2Image:moe,bankcoinsubtypeImage:tN,itemshopsubtypeImage:Soe,itemshopsubtype2Image:goe,toadImage:nN,mstarImage:_oe,booImage:NV,bowsercharacterImage:xoe,koopaImage:voe}=qk;let eg;class woe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.globalClickHandler=e=>{this.elementIsWithin(e.target)||e.target.tagName.toUpperCase()==="CANVAS"||qc(-1)},this.handleClick=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},this.onContextMenu=e=>{e.preventDefault()},this.onTypeChanged=(e,t)=>{const r=ms();vt.dispatch(zI({spaceIndices:r,type:e,subtype:t})),this.forceUpdate()},this.onChangeX=e=>{let t=parseInt(e.target.value,10),r=e.target.value==="",i=P0().bg.width;!r&&isNaN(t)||t<0||t>i||(this.state.oldX||this.setState({oldX:this.props.space.x}),vt.dispatch(qs({spaceIndices:[this.props.spaceIndex],coords:[{x:r?0:t}]})),this.forceUpdate())},this.onChangeY=e=>{let t=parseInt(e.target.value,10),r=e.target.value==="",i=P0().bg.height;!r&&isNaN(t)||t<0||t>i||(this.state.oldY||this.setState({oldY:this.props.space.y}),vt.dispatch(qs({spaceIndices:[this.props.spaceIndex],coords:[{y:r?0:t}]})),this.forceUpdate())},this.onCoordSet=e=>{vt.dispatch(qs({spaceIndices:[this.props.spaceIndex],coords:[{x:this.props.space.x||0,y:this.props.space.y||0}]})),this.setState({oldX:void 0,oldY:void 0}),this.forceUpdate()},this.onKeyUp=e=>{e.key==="Enter"&&this.onCoordSet()}}componentDidMount(){eg=this.globalClickHandler.bind(this),document.addEventListener("click",eg)}componentWillUnmount(){document.removeEventListener("click",eg),eg=null}getPlacement(e){let t=(isNaN(this.state.oldX)?e.x:this.state.oldX)-8,r=(isNaN(this.state.oldY)?e.y:this.state.oldY)+15;return"translateX("+t+"px) translateY("+r+"px)"}elementIsWithin(e){return!e||!this.refs||!this.rcMenu?!0:this.rcMenu.contains(e)}render(){let e=this.props.space;if(!e)return null;let t={transform:this.getPlacement(e)};return Xe("div",{ref:r=>this.rcMenu=r,className:"rcMenu",style:t,onClick:this.handleClick,onContextMenu:this.onContextMenu,children:["\xA0\xA0",B("span",{children:"X:"}),B("input",{type:"text",value:e.x,onChange:this.onChangeX,onBlur:this.onCoordSet,onKeyUp:this.onKeyUp}),B("span",{children:"Y:"}),B("input",{type:"text",value:e.y,onChange:this.onChangeY,onBlur:this.onCoordSet,onKeyUp:this.onKeyUp}),B(Roe,{type:e.type,subtype:e.subtype,typeChanged:this.onTypeChanged})]})}}const yoe=[{name:"Change to blue space",icon:Qk,type:de.BLUE},{name:"Change to red space",icon:Jk,type:de.RED},{name:"Change to happening space",icon:Zk,type:de.HAPPENING},{name:"Change to chance time space",icon:toe,type:de.CHANCE},{name:"Change to minigame space",icon:aoe,type:de.MINIGAME},{name:"Change to shroom space",icon:ooe,type:de.SHROOM},{name:"Change to Bowser space",icon:$k,type:de.BOWSER},{name:"Change to invisible space",icon:f2,type:de.OTHER},{name:"Change to star space",icon:OV,type:de.STAR,advanced:!0},{name:"Change to start space",icon:kV,type:de.START,advanced:!0}],Eoe=[{name:"Show Toad",icon:nN,subtype:yt.TOAD},{name:"Show Boo",icon:NV,subtype:yt.BOO},{name:"Show Bowser",icon:xoe,subtype:yt.BOWSER},{name:"Show Koopa Troopa",icon:voe,subtype:yt.KOOPA}],Coe=[{name:"Change to blue space",icon:Qk,type:de.BLUE},{name:"Change to red space",icon:Jk,type:de.RED},{name:"Change to happening space",icon:Zk,type:de.HAPPENING},{name:"Change to chance time space",icon:noe,type:de.CHANCE},{name:"Change to Bowser space",icon:$k,type:de.BOWSER},{name:"Change to item space",icon:loe,type:de.ITEM},{name:"Change to battle space",icon:coe,type:de.BATTLE},{name:"Change to bank space",icon:Aoe,type:de.BANK},{name:"Change to invisible space",icon:f2,type:de.OTHER},{name:"Change to star space",icon:OV,type:de.STAR,advanced:!0},{name:"Change to black star space",icon:soe,type:de.BLACKSTAR,advanced:!0},{name:"Change to start space",icon:kV,type:de.START,advanced:!0},{name:"Change to arrow space",icon:eN,type:de.ARROW}],Voe=[{name:"Show Toad",icon:nN,subtype:yt.TOAD},{name:"Show Boo",icon:NV,subtype:yt.BOO},{name:"Show bank",icon:moe,subtype:yt.BANK},{name:"Show bank coin stack",icon:tN,subtype:yt.BANKCOIN},{name:"Show item shop",icon:goe,subtype:yt.ITEMSHOP}],Doe=[{name:"Change to blue space",icon:Zae,type:de.BLUE},{name:"Change to red space",icon:$ae,type:de.RED},{name:"Change to happening space",icon:eoe,type:de.HAPPENING},{name:"Change to chance time space",icon:roe,type:de.CHANCE},{name:"Change to Bowser space",icon:ioe,type:de.BOWSER},{name:"Change to item space",icon:uoe,type:de.ITEM},{name:"Change to battle space",icon:doe,type:de.BATTLE},{name:"Change to bank space",icon:foe,type:de.BANK},{name:"Change to Game Guy space",icon:hoe,type:de.GAMEGUY},{name:"Change to invisible space",icon:f2,type:de.OTHER},{name:"Change to star space",icon:OV,type:de.STAR,advanced:!0},{name:"Change to start space",icon:kV,type:de.START,advanced:!0},{name:"Change to arrow space",icon:eN,type:de.ARROW}],Foe=[{name:"Show Millenium Star",icon:_oe,subtype:yt.TOAD},{name:"Show Boo",icon:NV,subtype:yt.BOO},{name:"Show bank",icon:poe,subtype:yt.BANK},{name:"Show bank coin stack",icon:tN,subtype:yt.BANKCOIN},{name:"Show item shop",icon:Soe,subtype:yt.ITEMSHOP}],Toe=[{name:"Change to basic space",icon:TV,type:de.DUEL_BASIC},{name:"Change to Mini-Game space",icon:bV,type:de.MINIGAME},{name:"Change to reverse space",icon:PV,type:de.DUEL_REVERSE},{name:"Change to happening space",icon:RV,type:de.HAPPENING},{name:"Change to Game Guy space",icon:LV,type:de.GAMEGUY},{name:"Change to power-up space",icon:BV,type:de.DUEL_POWERUP},{name:"Change to invisible space",icon:f2,type:de.OTHER},{name:"Change to blue start space",icon:MV,type:de.DUEL_START_BLUE,advanced:!0},{name:"Change to red start space",icon:IV,type:de.DUEL_START_RED,advanced:!0}];function boe(){const n=P0();let e=[];switch(n.game){case 1:e=yoe;break;case 2:e=Coe;break;case 3:switch(n.type){case G0.DUEL:e=Toe;break;case G0.NORMAL:default:e=Doe;break}break}return tr(In.uiAdvanced)||(e=e.filter(t=>!t.advanced)),e}function Poe(){const n=P0();let e=[];switch(n.game){case 1:e=Eoe;break;case 2:e=Voe;break;case 3:switch(n.type){case G0.DUEL:e=[];break;default:e=Foe;break}break}return tr(In.uiAdvanced)||(e=e.filter(t=>!t.advanced)),e}const Roe=class extends Ne.exports.Component{constructor(){super(...arguments),this.onTypeChanged=(e,t)=>{this.props.typeChanged(e,t)}}render(){let e=this.props.type;if(e===de.START&&!tr(In.uiAdvanced))return null;let t=this.props.subtype,r=this.onTypeChanged,i=s=>{let l=s.type+"-"+s.subtype,c=e===s.type||e===de.OTHER&&t!==void 0&&t===s.subtype;return B(Loe,{type:s.type,subtype:s.subtype,icon:s.icon,title:s.name,selected:c,typeChanged:r},l)},a=boe().map(i),o=Poe().map(i);return Xe("div",{className:"rcSpaceToggleContainer",children:[a,B("br",{}),o]})}},Loe=class extends Ne.exports.Component{constructor(){super(...arguments),this.onTypeChanged=()=>{this.props.subtype!==void 0&&this.props.selected?this.props.typeChanged(this.props.type,void 0):this.props.typeChanged(this.props.type,this.props.subtype)}}render(){let e="rcSpaceToggleButton";this.props.selected&&(e+=" selected");let t=this.props.subtype!==void 0?25:20;return B("div",{className:e,title:this.props.title,onClick:this.onTypeChanged,children:B("img",{src:this.props.icon,height:t,width:t,alt:""})})}};function Boe(){var n=document.getElementById("dragZone");n.style.display="inline-block",n.ondragover||(n.ondragover=e=>{e.preventDefault()}),n.ondragenter||(n.ondragenter=e=>{n.className="hover"}),n.ondragleave||(n.ondragleave=e=>{n.className=""})}function JP(){let n=document.getElementById("dragZone");n.style.display="none",n.className="",Ioe()}function Moe(n){document.getElementById("dragZone").ondrop=n}function Ioe(){document.getElementById("dragZone").ondrop=null}let rN;function ZP(n){rN=n}function Ooe(){return rN}let xA=!1,fu=-1,hu=-1,Js=-1,Zs=-1,$s=null;function iN(n){const e=n.currentTarget;oN(e,n.clientX,n.clientY,n.ctrlKey)}function aN(n){if(n.touches.length!==1)return;const e=n.touches[0],t=n.currentTarget;oN(t,e.clientX,e.clientY,n.ctrlKey)}function oN(n,e,t,r){$s=n.getBoundingClientRect();const[i,a]=j4(n,e,t);fu=Js=i,hu=Zs=a;const o=om(Js,Zs);wt(`Clicked space: ${At(o)} (${o})`,P0().spaces[o]);const s=o!==-1;Mu()&&s&&(QC(ue.MOVE),$a(),rV(!0));const l=qp();switch(l){case ue.MOVE:s?r?S4(o):$P(o)||Dc(o):$a();break;case ue.ADD_OTHER:case ue.ADD_BLUE:case ue.ADD_RED:case ue.ADD_MINIGAME:case ue.ADD_HAPPENING:case ue.ADD_STAR:case ue.ADD_BLACKSTAR:case ue.ADD_START:case ue.ADD_CHANCE:case ue.ADD_SHROOM:case ue.ADD_BOWSER:case ue.ADD_ITEM:case ue.ADD_BATTLE:case ue.ADD_BANK:case ue.ADD_GAMEGUY:case ue.ADD_ARROW:case ue.MARK_STAR:case ue.MARK_GATE:case ue.ADD_TOAD_CHARACTER:case ue.ADD_BOWSER_CHARACTER:case ue.ADD_KOOPA_CHARACTER:case ue.ADD_BOO_CHARACTER:case ue.ADD_BANK_SUBTYPE:case ue.ADD_BANKCOIN_SUBTYPE:case ue.ADD_ITEMSHOP_SUBTYPE:case ue.ADD_DUEL_BASIC:case ue.ADD_DUEL_REVERSE:case ue.ADD_DUEL_POWERUP:case ue.ADD_DUEL_START_BLUE:case ue.ADD_DUEL_START_RED:s?r?S4(o):$P(o)||Dc(o):r||$a();break;case ue.LINE:case ue.LINE_STICKY:case ue.ROTATE:s?Dc(o):$a();break;case ue.ERASE:$a();break}const c=JC(),d=P0(),h=d.spaces[o];switch(l){case ue.LINE:if(c.length===1){let f=c[0];X8(f.x,f.y,i,a),xp()&&qc(-1)}break;case ue.LINE_STICKY:if(c.length===1){let f=c[0];if(h&&h!==f){const m=m4(f,d);Go(m,o),Dc(o)}else X8(f.x,f.y,i,a)}break;case ue.ROTATE:break;case ue.ERASE:o!==-1&&UV(d,o)?(Hk(o),$a()):gN(i,a);break;case ue.ADD_OTHER:case ue.ADD_BLUE:case ue.ADD_RED:case ue.ADD_MINIGAME:case ue.ADD_HAPPENING:case ue.ADD_STAR:case ue.ADD_BLACKSTAR:case ue.ADD_START:case ue.ADD_CHANCE:case ue.ADD_SHROOM:case ue.ADD_BOWSER:case ue.ADD_ITEM:case ue.ADD_BATTLE:case ue.ADD_BANK:case ue.ADD_GAMEGUY:case ue.ADD_ARROW:case ue.ADD_DUEL_BASIC:case ue.ADD_DUEL_REVERSE:case ue.ADD_DUEL_POWERUP:case ue.ADD_DUEL_START_BLUE:case ue.ADD_DUEL_START_RED:q8(l,i,a,o,!1,r);break;case ue.MARK_STAR:case ue.MARK_GATE:case ue.ADD_TOAD_CHARACTER:case ue.ADD_BOWSER_CHARACTER:case ue.ADD_KOOPA_CHARACTER:case ue.ADD_BOO_CHARACTER:case ue.ADD_BANK_SUBTYPE:case ue.ADD_BANKCOIN_SUBTYPE:case ue.ADD_ITEMSHOP_SUBTYPE:o===-1&&q8(l,i,a,o,!1,r);break;case ue.MOVE:default:xp()&&qc(ms()[0]);break}xA=s}function sN(n){let e,t;if(n.touches.length!==1||!koe())return;n.preventDefault();let r=n.touches[0];e=r.clientX-$s.left,t=r.clientY-$s.top,uN(e,t)}function lN(n){let e,t;!$s||n.buttons!==1||(e=n.clientX-$s.left,t=n.clientY-$s.top,uN(e,t))}function uN(n,e){if(Mu())return;n=Math.round(n),e=Math.round(e);const t=qp(),r=ms(),i=JC(),a=P0(),o=om(n,e);switch(t){case ue.LINE:if(i.length===1){let l=i[0];X8(l.x,l.y,n,e),xp()&&qc(-1)}break;case ue.LINE_STICKY:if(i.length===1){const l=i[0],c=a.spaces[o];if(c&&c!==l){const d=m4(l,a);Go(d,o),Dc(o)}else X8(l.x,l.y,n,e)}break;case ue.ROTATE:if(i.length===1){const l=i[0];if(l.type===de.ARROW){const c=yG(l.x,l.y,n,e),d=(Math.PI*1.5+c)%(Math.PI*2),h=wG(d),f=m4(l,a);gae(f,h)}}break;case ue.ERASE:o!==-1&&UV(a,o)?(Hk(o),$a()):gN(n,e);break;case ue.MOVE:case ue.ADD_OTHER:case ue.ADD_BLUE:case ue.ADD_RED:case ue.ADD_MINIGAME:case ue.ADD_HAPPENING:case ue.ADD_STAR:case ue.ADD_BLACKSTAR:case ue.ADD_START:case ue.ADD_CHANCE:case ue.ADD_SHROOM:case ue.ADD_BOWSER:case ue.ADD_ITEM:case ue.ADD_BATTLE:case ue.ADD_BANK:case ue.ADD_GAMEGUY:case ue.ADD_ARROW:case ue.MARK_STAR:case ue.MARK_GATE:case ue.ADD_TOAD_CHARACTER:case ue.ADD_BOWSER_CHARACTER:case ue.ADD_KOOPA_CHARACTER:case ue.ADD_BOO_CHARACTER:case ue.ADD_BANK_SUBTYPE:case ue.ADD_BANKCOIN_SUBTYPE:case ue.ADD_ITEMSHOP_SUBTYPE:case ue.ADD_DUEL_BASIC:case ue.ADD_DUEL_REVERSE:case ue.ADD_DUEL_POWERUP:case ue.ADD_DUEL_START_BLUE:case ue.ADD_DUEL_START_RED:default:const s=!xA&&t===ue.MOVE;if(!s&&i.length){const l=n-Js,c=e-Zs,d=[],h=[];for(const f of r){const m=a.spaces[f];if(m){d.push(f);const g=Math.round(m.x)+l,x=Math.round(m.y)+c;h.push({x:Math.max(0,Math.min(g,a.bg.width)),y:Math.max(0,Math.min(x,a.bg.height))})}}d.length&&vt.dispatch(qs({spaceIndices:d,coords:h})),xp()&&qc(r[0])}s&&zoe(n,e);break}Js=n,Zs=e}function cN(n){n.button===0&&AN()}function dN(n){n.touches.length===1&&AN()}function AN(){if(Mu())return;switch(qp()){case ue.MOVE:xA||_N();break;case ue.LINE:const e=ms(),t=om(Js,Zs);if(t!==-1)for(let r of e)Go(r,t);g4();break;case ue.LINE_STICKY:g4();break}}function fN(n){if(Mu())return;const e=Math.abs(fu-Js)>5||Math.abs(hu-Zs)>5,t=Math.abs(fu-Js)>0||Math.abs(hu-Zs)>0;fu=Js=-1,hu=Zs=-1;const r=n.ctrlKey,i=Math.round(n.clientX),a=Math.round(n.clientY),o=i-Math.round($s.left),s=a-Math.round($s.top);let l=om(o,s);const c=P0(),d=l===-1?null:c.spaces[l];if(n.button!==0)return;const h=qp();switch(h){case ue.MOVE:case ue.ADD_OTHER:case ue.ADD_BLUE:case ue.ADD_RED:case ue.ADD_MINIGAME:case ue.ADD_HAPPENING:case ue.ADD_STAR:case ue.ADD_BLACKSTAR:case ue.ADD_START:case ue.ADD_CHANCE:case ue.ADD_SHROOM:case ue.ADD_BOWSER:case ue.ADD_ITEM:case ue.ADD_BATTLE:case ue.ADD_BANK:case ue.ADD_GAMEGUY:case ue.ADD_ARROW:case ue.ADD_DUEL_BASIC:case ue.ADD_DUEL_REVERSE:case ue.ADD_DUEL_POWERUP:case ue.ADD_DUEL_START_BLUE:case ue.ADD_DUEL_START_RED:!t&&!r&&(d?Dc(l):$a());break;case ue.MARK_GATE:case ue.ADD_TOAD_CHARACTER:case ue.ADD_BOWSER_CHARACTER:case ue.ADD_KOOPA_CHARACTER:case ue.ADD_BOO_CHARACTER:case ue.ADD_BANK_SUBTYPE:case ue.ADD_BANKCOIN_SUBTYPE:case ue.ADD_ITEMSHOP_SUBTYPE:xA&&q8(h,o,s,l,e,r),!t&&!r&&(d?Dc(l):$a());break;case ue.MARK_STAR:e||joe(ms());break;case ue.LINE:case ue.LINE_STICKY:g4();break;case ue.ERASE:case ue.ROTATE:break}xA=!1}function hN(n){n.preventDefault(),n.stopPropagation();const e=ms(),t=e.length!==1?-1:e[0];qc(t)}function pN(n){if(n.preventDefault(),Mu()||(xp()&&qc(-1),!n.dataTransfer))return;let e;try{e=JSON.parse(n.dataTransfer.getData("text"))}catch{return}const t=n.currentTarget,[r,i]=j4(t,n.clientX,n.clientY);$s=t.getBoundingClientRect();const a=om(r,i);if(typeof e=="object"){if(e.action)$a(),q8(e.action.type,r,i,a,!1,!1);else if(e.isEventParamDrop){const o=Ooe();o&&o(a)}}}function mN(n){const e=JC();if(!e||!e.length)return;const t=ms(),r=P0();switch(n.key){case"Up":case"ArrowUp":tg(t,r,a=>({y:Math.max(a.y-1,0)}));break;case"Down":case"ArrowDown":tg(t,r,a=>({y:Math.min(a.y+1,r.bg.height)}));break;case"Left":case"ArrowLeft":tg(t,r,a=>({x:Math.max(a.x-1,0)}));break;case"Right":case"ArrowRight":tg(t,r,a=>({x:Math.min(a.x+1,r.bg.width)}));break;case"Delete":let i=!1;if(e.forEach(a=>{a.subtype!==void 0&&(i=!0)}),i)vt.dispatch(py({spaceIndices:t,subtype:void 0}));else{const a=[];t.forEach(o=>{UV(r,o)&&a.push(o)}),a.length>0&&vt.dispatch(wee({spaceIndices:a})),$a()}break}}function SN(n){if(n.button!==0||Mu())return;const e=qp();!xA&&e===ue.MOVE&&(_N(),fu=Js=-1,hu=Zs=-1)}function koe(){return!eM(Tk())}function $P(n){return!!Up(vt.getState())[n]}function S4(n){vt.dispatch(Eee(n))}function Dc(n){vt.dispatch(XI(n))}function Noe(){return P0().game===3?14:8}function om(n,e){const t=P0(),r=Noe();let i=-1;for(let a=0;a<t.spaces.length;a++){let o=t.spaces[a];!o||Math.abs(o.x-n)<=r&&Math.abs(o.y-e)<=r&&(i=a)}return i}function UV(n,e){const t=n.spaces[e];return t?t.type===de.START?mae(de.START,n).length>1:!0:!1}function q8(n,e,t,r,i,a){const o=P0().spaces[r];let s=Goe(n),l=Hoe(n),c=!1;if(o)l!==void 0&&!i&&(o.subtype===l?vt.dispatch(py({spaceIndices:[r],subtype:void 0})):Uoe(o.type,l)&&vt.dispatch(py({spaceIndices:[r],subtype:l})),f4([r]),c=!0);else{const d=iV(e,t,s,l);a?S4(d):f4([d]),c=!0}return c}function Uoe(n,e){return!(n!==de.OTHER&&e===yt.GATE)}function tg(n,e,t){const r=[],i=[];for(const a of n){const o=e.spaces[a];o&&(r.push(a),i.push(t(o)))}r.length&&vt.dispatch(qs({spaceIndices:r,coords:i}))}function joe(n){if(!n.length)return;let e=!1;const t=P0();for(const r of n)if(!t.spaces[r].star){e=!0;break}jk(n,e)}function g4(){vt.dispatch(zE({connections:null}))}function gN(n,e){vt.dispatch(_ee({x:n,y:e}))}function Goe(n){switch(n){case ue.ADD_BLUE:return de.BLUE;case ue.ADD_RED:return de.RED;case ue.ADD_HAPPENING:return de.HAPPENING;case ue.ADD_STAR:return de.STAR;case ue.ADD_BLACKSTAR:return de.BLACKSTAR;case ue.ADD_MINIGAME:return de.MINIGAME;case ue.ADD_CHANCE:return de.CHANCE;case ue.ADD_START:return de.START;case ue.ADD_SHROOM:return de.SHROOM;case ue.ADD_BOWSER:return de.BOWSER;case ue.ADD_ITEM:return de.ITEM;case ue.ADD_BATTLE:return de.BATTLE;case ue.ADD_BANK:return de.BANK;case ue.ADD_ARROW:return de.ARROW;case ue.ADD_GAMEGUY:return de.GAMEGUY;case ue.ADD_DUEL_BASIC:return de.DUEL_BASIC;case ue.ADD_DUEL_REVERSE:return de.DUEL_REVERSE;case ue.ADD_DUEL_POWERUP:return de.DUEL_POWERUP;case ue.ADD_DUEL_START_BLUE:return de.DUEL_START_BLUE;case ue.ADD_DUEL_START_RED:return de.DUEL_START_RED;default:return de.OTHER}}function Hoe(n){switch(n){case ue.ADD_TOAD_CHARACTER:return yt.TOAD;case ue.ADD_BOWSER_CHARACTER:return yt.BOWSER;case ue.ADD_KOOPA_CHARACTER:return yt.KOOPA;case ue.ADD_BOO_CHARACTER:return yt.BOO;case ue.ADD_BANK_SUBTYPE:return yt.BANK;case ue.ADD_BANKCOIN_SUBTYPE:return yt.BANKCOIN;case ue.ADD_ITEMSHOP_SUBTYPE:return yt.ITEMSHOP;case ue.MARK_GATE:return yt.GATE;default:return}}function zoe(n,e){if(fu===-1||hu===-1)return;$a();const r=P0().spaces,i=[];for(let a=0;a<r.length;a++){const o=r[a];vG(o.x,o.y,fu,hu,n,e)&&i.push(a)}f4(i),Woe(fu,hu,n,e)}function Woe(n,e,t,r){vt.dispatch(WE({selectionCoords:[n,e,t,r]}))}function _N(){vt.dispatch(WE({selectionCoords:null}))}function xN(n){n.preventDefault()}function vN(n){n.addEventListener("contextmenu",hN,!1),n.addEventListener("click",fN,!1),n.addEventListener("mousedown",iN,!1),n.addEventListener("mousemove",lN,!1),n.addEventListener("mouseup",cN,!1),n.addEventListener("mouseout",SN,!1),n.addEventListener("touchstart",aN,!1),n.addEventListener("touchmove",sN,!1),n.addEventListener("touchend",dN,!1),n.addEventListener("drop",pN,!1),n.addEventListener("dragover",xN,!1),n.addEventListener("keydown",mN,!1)}function wN(n){n.removeEventListener("contextmenu",hN),n.removeEventListener("click",fN),n.removeEventListener("mousedown",iN),n.removeEventListener("mousemove",lN),n.removeEventListener("mouseup",cN),n.removeEventListener("mouseout",SN),n.removeEventListener("touchstart",aN),n.removeEventListener("touchmove",sN),n.removeEventListener("touchend",dN),n.removeEventListener("drop",pN),n.removeEventListener("dragover",xN),n.removeEventListener("keydown",mN)}const eR=[[166,189,215],[128,62,117],[255,179,0],[0,83,138],[255,104,0],[129,112,102],[193,0,32],[206,162,98],[0,125,52],[246,118,142],[255,122,92],[83,55,122],[255,142,0],[179,40,81],[244,200,0],[127,24,13],[147,170,0],[89,51,21],[241,58,19],[35,44,22]];function jV(n){return eR[n%eR.length]}function Xoe(){let n=0;return{next(){return jV(n++)}}}async function yN(n={}){const e=P0(),t=ko(e.bg.width,e.bg.height);t.fillStyle="black",t.fillRect(0,0,e.bg.width,e.bg.height);const r=Yoe(),i=await Ca(r,e.bg.width,e.bg.height);t.putImageData(i,0,0);let a=Hn();return Zg(!1),n.renderConnections&&tR.renderConnections(t.canvas,t,e,!1),tR.renderSpaces(t.canvas,t,e,!1,{skipCharacters:!n.renderCharacters,skipHiddenSpaces:!n.renderHiddenSpaces,skipBadges:!n.renderBadges}),Zg(a),{canvas:t.canvas,dataUri:t.canvas.toDataURL(),blobPromise:new Promise(o=>{t.canvas.toBlob(o)})}}const Koe=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={renderConnections:!0,renderCharacters:!0,renderHiddenSpaces:!0,renderBadges:!0},this.takeScreenshot=async()=>{const{dataUri:e,blobPromise:t}=await yN({renderConnections:this.state.renderConnections,renderCharacters:this.state.renderCharacters,renderHiddenSpaces:this.state.renderHiddenSpaces,renderBadges:this.state.renderBadges});this.props.onAccept&&this.props.onAccept(e,t)},this.onCheckChanged=e=>{let t={};t[e]=!this.state[e],this.setState(t)}}render(){return Xe("div",{className:"screenshotContainer",children:[B("label",{className:"nbLabel",children:"Screenshot Options"}),B("br",{}),B(ng,{id:"renderConnections",text:"Render connections",checked:this.state.renderConnections,onChange:this.onCheckChanged}),B(ng,{id:"renderCharacters",text:"Render characters",checked:this.state.renderCharacters,onChange:this.onCheckChanged}),B(ng,{id:"renderHiddenSpaces",text:"Render hidden spaces",checked:this.state.renderHiddenSpaces,onChange:this.onCheckChanged}),B(ng,{id:"renderBadges",text:"Render badges",checked:this.state.renderBadges,onChange:this.onCheckChanged}),B("br",{}),B(ir,{onClick:this.takeScreenshot,css:"ssCreate",children:"Take Screenshot"})]})}},ng=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onChange=()=>{this.props.onChange(this.props.id)}}render(){let e="ssCheck";return this.props.css&&(e+=" "+this.props.css),Xe("label",{className:e,title:"",children:[B("input",{type:"checkbox",onChange:this.onChange,checked:this.props.checked}),this.props.text]})}};function Yoe(){return vt.getState().app.overrideBg||P0().bg.src}function EN(n,e,t,r=!0){r&&e.clearRect(0,0,n.width,n.height);const i=t.links;if(i)for(const a in i){const o=t.spaces[a].x,s=t.spaces[a].y,l=Pa(parseInt(a),t);let c,d,h=!1;for(let f=0;f<l.length;f++)c=t.spaces[l[f]].x,d=t.spaces[l[f]].y,h=Qoe(i,l[f],a),!(h&&parseInt(a)>l[f])&&VN(e,o,s,c,d,h)}}function qoe(n,e,t,r){if(e.clearRect(0,0,n.width,n.height),!r)return;const i=Object.keys(r).map(c=>parseInt(c,10));if(i.length!==1)return;const a=i[0],o=Gn();let s,l=0;eV(t,o,(c,d,h,f,m)=>{if(a!==m)return;s!==d&&(l=0),s=d;let g;switch(c.type){case i0.Space:{const x=d.parameterValues&&d.parameterValues[c.name];typeof x=="number"&&(g=[x])}break;case i0.SpaceArray:g=d.parameterValues&&d.parameterValues[c.name];break}g&&g.forEach(x=>{const E=t.spaces[x];if(!E)return;const _=`rgba(${jV(l).join(", ")}, 0.9)`;ese(e,f.x,f.y,E.x,E.y,_),l++})})}function Qoe(n,e,t){const r=n[e];return Array.isArray(r)?r.indexOf(parseInt(t))>=0:r==t}function CN(n,e,t,r=!0,i={}){r&&e.clearRect(0,0,n.width,n.height);for(let a=0;a<t.spaces.length;a++){const o=t.spaces[a];o!==null&&Joe(e,t,o,a,i)}}function Joe(n,e,t,r,i={}){const a=e.game||1,o=e.type||G0.NORMAL,s=t.x,l=t.y,c=t.rotation,d=t.type,h=t.subtype;if(typeof c=="number"){n.save(),n.translate(s,l);const f=-c;n.rotate(j1(f)),n.translate(-s,-l)}switch(d){case de.OTHER:if(i.skipHiddenSpaces)break;a===3?h0.drawOther3(n,s,l):h0.drawOther(n,s,l);break;case de.BLUE:a===3?h0.drawBlue3(n,s,l):h0.drawBlue(n,s,l);break;case de.RED:a===3?h0.drawRed3(n,s,l):h0.drawRed(n,s,l);break;case de.MINIGAME:o===G0.DUEL?h0.drawMiniGameDuel3(n,s,l):h0.drawMiniGame(n,s,l);break;case de.HAPPENING:a===3?o===G0.DUEL?h0.drawHappeningDuel3(n,s,l):h0.drawHappening3(n,s,l):h0.drawHappening(n,s,l);break;case de.STAR:a===3?h0.drawStar3(n,s,l):h0.drawStar(n,s,l);break;case de.CHANCE:a===3?h0.drawChance3(n,s,l):a===2?h0.drawChance2(n,s,l):h0.drawChance(n,s,l);break;case de.START:if(i.skipHiddenSpaces)break;a===3?h0.drawStart3(n,s,l):h0.drawStart(n,s,l);break;case de.SHROOM:h0.drawShroom(n,s,l);break;case de.BOWSER:a===3?h0.drawBowser3(n,s,l):h0.drawBowser(n,s,l);break;case de.ITEM:a===3?h0.drawItem3(n,s,l):h0.drawItem2(n,s,l);break;case de.BATTLE:a===3?h0.drawBattle3(n,s,l):h0.drawBattle2(n,s,l);break;case de.BANK:a===3?h0.drawBank3(n,s,l):h0.drawBank2(n,s,l);break;case de.ARROW:h0.drawArrow(n,s,l,a);break;case de.BLACKSTAR:h0.drawBlackStar2(n,s,l);break;case de.GAMEGUY:o===G0.DUEL?h0.drawGameGuyDuel3(n,s,l):h0.drawGameGuy3(n,s,l);break;case de.DUEL_BASIC:h0.drawDuelBasic(n,s,l);break;case de.DUEL_START_BLUE:if(i.skipHiddenSpaces)break;h0.drawStartDuelBlue(n,s,l);break;case de.DUEL_START_RED:if(i.skipHiddenSpaces)break;h0.drawStartDuelRed(n,s,l);break;case de.DUEL_POWERUP:h0.drawDuelPowerup(n,s,l);break;case de.DUEL_REVERSE:h0.drawDuelReverse(n,s,l);break;default:h0.drawUnknown(n,s,l);break}if(typeof c=="number"&&n.restore(),i.skipCharacters||Zoe(n,s,l,h,a),!i.skipBadges){const f=a===3?5:2,m=a===3?16:12;if(t.events&&t.events.length){let g=l+f;d===de.START&&(g-=m),n.drawImage(ise(t,e),s+f,g)}if(t.star){let g=l+f;d===de.START&&(g-=m),n.drawImage(U0("starImg"),s-f-9,g)}if(t.subtype===yt.GATE){const g=s-f-9,x=l+f-5;n.drawImage(U0("gateImg"),g,x)}}if(Hn()){n.save(),n.fillStyle="white",n.strokeStyle="black",n.lineWidth=2,n.font="bold 6pt Courier New",n.textAlign="center";let f=r.toString();n.strokeText(f,s,l-2),n.fillText(f,s,l-2),f=At(r),n.strokeText(f,s,l+8),n.fillText(f,s,l+8),n.restore()}}function Zoe(n,e,t,r,i){r===yt.TOAD&&(i===3?n.drawImage(U0("mstarImg"),e-15,t-22):n.drawImage(U0("toadImg"),e-9,t-22)),r===yt.BOWSER&&n.drawImage(U0("bowserImg"),e-27,t-45),r===yt.KOOPA&&n.drawImage(U0("koopaImg"),e-12,t-22),r===yt.BOO&&n.drawImage(U0("booImg"),e-13,t-17),r===yt.GOOMBA&&n.drawImage(U0("goombaImg"),e-8,t-12),r===yt.BANK&&(i===2?n.drawImage(U0("bank2Img"),e-9,t-10):n.drawImage(U0("bank3Img"),e-17,t-20)),r===yt.BANKCOIN&&n.drawImage(U0("bankcoinImg"),e-10,t-9),r===yt.ITEMSHOP&&(i===2?n.drawImage(U0("itemShop2Img"),e-9,t-10):n.drawImage(U0("itemShop3Img"),e-16,t-20))}const $oe=Math.PI/1;function VN(n,e,t,r,i,a){n.save(),n.beginPath(),n.strokeStyle="rgba(255, 185, 105, 0.75)",n.lineCap="round",n.lineWidth=8,n.moveTo(e,t),n.lineTo(r,i),n.stroke();const o=(e+r)/2,s=(t+i)/2;n.translate(o,s),n.rotate(-Math.atan2(e-o,t-s)+$oe),n.fillStyle="#A15000";const l=a?3:0;n.moveTo(-4,-2+l),n.lineTo(0,2+l),n.lineTo(4,-2+l),n.fill(),a&&(n.moveTo(-4,2-l),n.lineTo(0,-2-l),n.lineTo(4,2-l),n.fill()),n.restore()}function ese(n,e,t,r,i,a){n.save(),n.beginPath(),n.strokeStyle="rgba(0, 0, 0, 0.5)",n.setLineDash([1,8]),n.lineCap="round",n.lineWidth=6,n.moveTo(e,t),n.lineTo(r,i),n.stroke(),n.restore(),n.save(),n.beginPath(),n.strokeStyle=a,n.setLineDash([1,8]),n.lineCap="round",n.lineWidth=4,n.moveTo(e,t),n.lineTo(r,i),n.stroke(),n.restore()}function tse(n,e,t,r){if(e.clearRect(0,0,n.width,n.height),!(!r||eM(r)))for(const i in r){const a=t.spaces[parseInt(i,10)];if(a){e.save(),e.beginPath();const o=P0().game===3?18:12;e.arc(a.x,a.y,o,0,2*Math.PI),e.setLineDash([2,2]),e.lineWidth=2,e.fillStyle="rgba(47, 70, 95, 0.35)",e.strokeStyle="rgba(47, 70, 95, 1)",e.fill(),e.stroke(),e.restore()}}}function nse(n,e,t){const r=P0(),i=r.game===3?18:12;for(let a=0;a<t.length;a++){const o=r.spaces[t[a]];o&&(e.save(),e.beginPath(),e.arc(o.x,o.y,i,0,2*Math.PI),e.shadowColor="rgba(225, 225, 225, 1)",e.shadowBlur=2,e.fillStyle="rgba(255, 0, 0, 0.85)",e.fill(),e.restore())}}function rse(n,e,t){var s,l;const r=P0(),i=Gn(),a=r.game===3?18:12,o=jo(t.id,r,i);if(O0(!!o),o.parameters){let c=0;for(const d of o.parameters){let h;switch(d.type){case i0.Space:{const f=(s=t.parameterValues)==null?void 0:s[d.name];typeof f=="number"&&(h=[f])}break;case i0.SpaceArray:{const f=(l=t.parameterValues)==null?void 0:l[d.name];Array.isArray(f)&&(h=f)}break}if(h)for(const f of h){const m=r.spaces[f];m&&(e.save(),e.beginPath(),e.arc(m.x,m.y,a,0,2*Math.PI),e.shadowColor="rgba(225, 225, 225, 1)",e.shadowBlur=2,e.fillStyle=`rgba(${jV(c).join(", ")}, 0.9)`,e.fill(),e.restore(),c++)}}}}function ise(n,e){if(n.events&&n.events.length)for(let t=0;t<n.events.length;t++){const r=n.events[t],i=jo(r.id,e,Gn());if(!i)return U0("eventErrorImg");if(i.parameters)for(let a=0;a<i.parameters.length;a++){const o=i.parameters[a];if(!$B(o.type)&&(!r.parameterValues||!r.parameterValues.hasOwnProperty(o.name)))return U0("eventErrorImg")}}return U0("eventImg")}const ase=()=>{const[n,e]=Iu(),[t,r]=Ne.exports.useContext(h2),i=j0(l=>rl(l).bg.src),a=j0(l=>l.app.overrideBg),o=Ne.exports.useRef(null);return Ne.exports.useEffect(()=>{const l=o.current,c=GV(n,e,t,r);l.style.transform=c,l.width=n,l.height=e},[n,e,t,r]),B("img",{ref:o,className:"editor_bg",alt:"Board Background",src:a||i})};let tA,jl=-1;function ose(){tA||(tA=setInterval(sse,800),_A(null))}function _4(){tA&&clearInterval(tA),tA=null,jl=-1,_A(null)}function sse(){const n=P0(),e=n.animbg;if(!e||!e.length){_4();return}else jl>=0&&jl<e.length?(_A(e[jl]),jl++):jl=-1;jl===-1&&(_A(n.bg.src),jl++)}const lse=()=>{const n=Ne.exports.useRef(null),e=xs(),[t,r]=Iu(),i=j0(Gee);return zA(n,t,r),Ne.exports.useEffect(()=>{const a=n.current,o=a.getContext("2d");if(EN(a,o,e,!0),i)for(const s of i){const[l,c,d,h]=s;VN(o,l,c,d,h,!1)}},[e,i]),B("canvas",{ref:n,className:"editor_line_canvas"})},use=()=>{const n=Ne.exports.useRef(null),e=xs(),[t,r]=Iu(),i=j0(Up);return zA(n,t,r),Ne.exports.useEffect(()=>{const a=n.current;qoe(a,a.getContext("2d"),e,i)},[e,i]),B("canvas",{ref:n,className:"editor_association_canvas"})},cse=()=>{const n=Ne.exports.useRef(null),e=xs(),[t,r]=Iu(),i=j0(Up),a=j0(QI),o=j0(jee);return zA(n,t,r),Ne.exports.useEffect(()=>{var c;const s=n.current,l=s.getContext("2d");if(tse(s,l,e,i),a&&nse(s,l,a),o>=0){const d=(c=e.boardevents)==null?void 0:c[o];d&&rse(s,l,d)}},[e,i,a,o]),B("canvas",{ref:n,className:"editor_current_space_canvas"})},dse=()=>{const n=Ne.exports.useRef(null),e=xs(),[t,r]=Iu(),i=j0(a=>a.app.imagesLoaded);return zA(n,t,r),Ne.exports.useEffect(()=>{const a=n.current;i&&CN(a,a.getContext("2d"),e)},[e,i]),Ne.exports.useEffect(()=>{const a=n.current;if(a)return vN(a),()=>wN(a)},[]),B("canvas",{className:"editor_space_canvas",tabIndex:-1,ref:n,onDragOver:void 0})},Ase=()=>{const n=Ne.exports.useRef(null),e=Ne.exports.useRef(!1),t=j0(Uee);Ne.exports.useEffect(()=>{const a=n.current,o=a.getContext("2d");if((t||!t&&e.current)&&(o.clearRect(0,0,a.width,a.height),e.current=!1),t){const[s,l,c,d]=t;o.save(),o.beginPath(),o.fillStyle="rgba(47, 70, 95, 0.5)",o.strokeStyle="rgba(47, 70, 95, 1)",o.fillRect(Math.min(s,c),Math.min(l,d),Math.abs(s-c),Math.abs(l-d)),o.strokeRect(Math.min(s,c),Math.min(l,d),Math.abs(s-c),Math.abs(l-d)),o.restore(),e.current=!0}},[t]);const[r,i]=Iu();return zA(n,r,i),Ne.exports.useEffect(()=>{const a=n.current;if(a)return vN(a),()=>wN(a)},[]),B("canvas",{className:"editor_space_canvas",tabIndex:-1,ref:n,onDragOver:void 0})},DN=Ne.exports.forwardRef((n,e)=>{const[t,r]=Ne.exports.useState(-1),i=Ne.exports.useRef(null),[a,o]=Iu(),[s,l]=Ne.exports.useContext(h2),c=Ne.exports.useCallback(()=>{const g=i.current,x=GV(a,o,s,l);g.style.transform=x},[a,o,s,l]),d=Ne.exports.useCallback(g=>{r(g)},[]),h=Ne.exports.useCallback(()=>t>=0,[t]);Ne.exports.useImperativeHandle(e,()=>({renderContent:c,setRightClickMenu:d,rightClickOpen:h}),[c,d,h]),Ne.exports.useEffect(()=>{c()});const m=xs().spaces[t]||null;return B("div",{ref:i,className:"editor_menu_overlay",children:h()&&B(woe,{space:m,spaceIndex:t})})});DN.displayName="BoardOverlay";const FN=320,TN=240;function bN(n){let e=1,t=1;switch(n){case 1:case 2:break;case 3:e=.785,t=.805;break}const r=FN*e,i=TN*t;return{N64_WIDTH_ZOOMED:r,N64_HEIGHT_ZOOMED:i}}function Kv(n,e){const t=e.getContext("2d");t.lineWidth=1,t.strokeStyle="rgba(0, 0, 0, 0.5)";const{width:r,height:i}=n.bg,{N64_WIDTH_ZOOMED:a,N64_HEIGHT_ZOOMED:o}=bN(n.game);t.strokeRect(a/2,o/2,r-a,i-o)}const fse=()=>{const n=Ne.exports.useRef(null),e=Ne.exports.useRef(null),t=xs(),[r,i]=Iu();zA(n,r,i),Ne.exports.useEffect(()=>{const s=n.current;Kv(t,s)},[t]),Ne.exports.useEffect(()=>{(async()=>{const s=await yN({renderCharacters:!0});e.current=s.canvas,Kv(t,e.current)})()},[t]);const a=Ne.exports.useCallback(s=>{const l=n.current,c=l.getContext("2d"),d=e.current;if(!d)return;const[h,f]=j4(l,s.clientX,s.clientY),{width:m,height:g}=t.bg,{N64_WIDTH_ZOOMED:x,N64_HEIGHT_ZOOMED:E}=bN(t.game);let _=Math.max(0,h-x/2),v=Math.max(0,f-E/2);const C=x,D=E;m-_<x&&(_=m-x),g-v<E&&(v=g-E),wt(`Viewing (${_}, ${v}) - (${_+C}, ${v+D})
Mouse: (${h}, ${f}`),c.drawImage(d,_,v,C,D,0,0,m,g);const V=m/FN,H=g/TN,R=12*H,j=16*V;c.fillStyle="black",c.fillRect(0,0,m,R),c.fillRect(m-j,0,j,g),c.fillRect(0,g-R,m,R),c.fillRect(0,0,j,g)},[t]),o=Ne.exports.useCallback(()=>{const s=n.current;s.getContext("2d").clearRect(0,0,s.width,s.height),Kv(t,s)},[t]);return B("canvas",{ref:n,className:"editor_telescope_viewer",onMouseMove:a,onMouseLeave:o})};let _p;const h2=Ne.exports.createContext([0,0]),hse=()=>{const n=Ne.exports.useRef(null),[e,t]=Ne.exports.useState(0),[r,i]=Ne.exports.useState(0),a=Ne.exports.useMemo(()=>[e,r],[e,r]),o=Ne.exports.useCallback(()=>{const l=n.current;l&&(t(l.offsetWidth),i(l.offsetHeight))},[]);Ne.exports.useEffect(()=>(window.addEventListener("resize",o,!1),o(),()=>window.removeEventListener("resize",o)),[o]);const s=j0(l=>l.app.currentAction===ue.TELESCOPE);return B("div",{ref:n,className:"editor",children:Xe(h2.Provider,{value:a,children:[B(ase,{}),B(lse,{}),B(use,{}),B(cse,{}),B(dse,{}),B(Ase,{}),B(DN,{ref:l=>_p=l}),s&&B(fse,{})]})})};function qc(n){_p&&_p.setRightClickMenu(n)}function xp(){return _p?_p.rightClickOpen():!1}function PN(){return!!tA}const tR={renderConnections:EN,renderSpaces:CN};function GV(n,e,t,r){let i=Math.floor((t-n)/2);i=Math.max(0,i);let a=Math.floor((r-e)/2);return a=Math.max(0,a),`translateX(${i}px) translateY(${a}px)`}function zA(n,e,t){const[r,i]=Ne.exports.useContext(h2);Ne.exports.useLayoutEffect(()=>{const a=n.current,o=GV(e,t,r,i);a.style.transform=o,(a.width!==e||a.height!==t)&&(a.width=e,a.height=t)},[n,e,t,r,i])}function Iu(){const n=j0(t=>rl(t).bg.width),e=j0(t=>rl(t).bg.height);return Ne.exports.useMemo(()=>[n,e],[n,e])}function pse(n,e,t){for(let r=0;r<e*t;r++){let i=n[r];i=i&3233857728,i|=i>>>2,i|=i>>>2,i|=i>>>2,n[r]=i}}var q0={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(wA,function(){var t=Array.prototype.slice;function r(y,T){T&&(y.prototype=Object.create(T.prototype)),y.prototype.constructor=y}function i(y){return l(y)?y:Ue(y)}r(a,i);function a(y){return c(y)?y:k(y)}r(o,i);function o(y){return d(y)?y:De(y)}r(s,i);function s(y){return l(y)&&!h(y)?y:we(y)}function l(y){return!!(y&&y[m])}function c(y){return!!(y&&y[g])}function d(y){return!!(y&&y[x])}function h(y){return c(y)||d(y)}function f(y){return!!(y&&y[E])}i.isIterable=l,i.isKeyed=c,i.isIndexed=d,i.isAssociative=h,i.isOrdered=f,i.Keyed=a,i.Indexed=o,i.Set=s;var m="@@__IMMUTABLE_ITERABLE__@@",g="@@__IMMUTABLE_KEYED__@@",x="@@__IMMUTABLE_INDEXED__@@",E="@@__IMMUTABLE_ORDERED__@@",_="delete",v=5,C=1<<v,D=C-1,V={},H={value:!1},R={value:!1};function j(y){return y.value=!1,y}function te(y){y&&(y.value=!0)}function $(){}function z(y,T){T=T||0;for(var W=Math.max(0,y.length-T),J=new Array(W),ie=0;ie<W;ie++)J[ie]=y[ie+T];return J}function I(y){return y.size===void 0&&(y.size=y.__iterate(P)),y.size}function q(y,T){if(typeof T!="number"){var W=T>>>0;if(""+W!==T||W===4294967295)return NaN;T=W}return T<0?I(y)+T:T}function P(){return!0}function ee(y,T,W){return(y===0||W!==void 0&&y<=-W)&&(T===void 0||W!==void 0&&T>=W)}function ce(y,T){return O(y,T,0)}function U(y,T){return O(y,T,T)}function O(y,T,W){return y===void 0?W:y<0?Math.max(0,T+y):T===void 0?y:Math.min(T,y)}var G=0,re=1,oe=2,se=typeof Symbol=="function"&&Symbol.iterator,be="@@iterator",Be=se||be;function Te(y){this.next=y}Te.prototype.toString=function(){return"[Iterator]"},Te.KEYS=G,Te.VALUES=re,Te.ENTRIES=oe,Te.prototype.inspect=Te.prototype.toSource=function(){return this.toString()},Te.prototype[Be]=function(){return this};function ye(y,T,W,J){var ie=y===0?T:y===1?W:[T,W];return J?J.value=ie:J={value:ie,done:!1},J}function We(){return{value:void 0,done:!0}}function at(y){return!!lt(y)}function Ke(y){return y&&typeof y.next=="function"}function tt(y){var T=lt(y);return T&&T.call(y)}function lt(y){var T=y&&(se&&y[se]||y[be]);if(typeof T=="function")return T}function Ie(y){return y&&typeof y.length=="number"}r(Ue,i);function Ue(y){return y==null?Fe():l(y)?y.toSeq():rt(y)}Ue.of=function(){return Ue(arguments)},Ue.prototype.toSeq=function(){return this},Ue.prototype.toString=function(){return this.__toString("Seq {","}")},Ue.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Ue.prototype.__iterate=function(y,T){return ve(this,y,T,!0)},Ue.prototype.__iterator=function(y,T){return $e(this,y,T,!0)},r(k,Ue);function k(y){return y==null?Fe().toKeyedSeq():l(y)?c(y)?y.toSeq():y.fromEntrySeq():Le(y)}k.prototype.toKeyedSeq=function(){return this},r(De,Ue);function De(y){return y==null?Fe():l(y)?c(y)?y.entrySeq():y.toIndexedSeq():Re(y)}De.of=function(){return De(arguments)},De.prototype.toIndexedSeq=function(){return this},De.prototype.toString=function(){return this.__toString("Seq [","]")},De.prototype.__iterate=function(y,T){return ve(this,y,T,!1)},De.prototype.__iterator=function(y,T){return $e(this,y,T,!1)},r(we,Ue);function we(y){return(y==null?Fe():l(y)?c(y)?y.entrySeq():y:Re(y)).toSetSeq()}we.of=function(){return we(arguments)},we.prototype.toSetSeq=function(){return this},Ue.isSeq=Y,Ue.Keyed=k,Ue.Set=we,Ue.Indexed=De;var le="@@__IMMUTABLE_SEQ__@@";Ue.prototype[le]=!0,r(ne,De);function ne(y){this._array=y,this.size=y.length}ne.prototype.get=function(y,T){return this.has(y)?this._array[q(this,y)]:T},ne.prototype.__iterate=function(y,T){for(var W=this._array,J=W.length-1,ie=0;ie<=J;ie++)if(y(W[T?J-ie:ie],ie,this)===!1)return ie+1;return ie},ne.prototype.__iterator=function(y,T){var W=this._array,J=W.length-1,ie=0;return new Te(function(){return ie>J?We():ye(y,ie,W[T?J-ie++:ie++])})},r(fe,k);function fe(y){var T=Object.keys(y);this._object=y,this._keys=T,this.size=T.length}fe.prototype.get=function(y,T){return T!==void 0&&!this.has(y)?T:this._object[y]},fe.prototype.has=function(y){return this._object.hasOwnProperty(y)},fe.prototype.__iterate=function(y,T){for(var W=this._object,J=this._keys,ie=J.length-1,me=0;me<=ie;me++){var Ve=J[T?ie-me:me];if(y(W[Ve],Ve,this)===!1)return me+1}return me},fe.prototype.__iterator=function(y,T){var W=this._object,J=this._keys,ie=J.length-1,me=0;return new Te(function(){var Ve=J[T?ie-me:me];return me++>ie?We():ye(y,Ve,W[Ve])})},fe.prototype[E]=!0,r(He,De);function He(y){this._iterable=y,this.size=y.length||y.size}He.prototype.__iterateUncached=function(y,T){if(T)return this.cacheResult().__iterate(y,T);var W=this._iterable,J=tt(W),ie=0;if(Ke(J))for(var me;!(me=J.next()).done&&y(me.value,ie++,this)!==!1;);return ie},He.prototype.__iteratorUncached=function(y,T){if(T)return this.cacheResult().__iterator(y,T);var W=this._iterable,J=tt(W);if(!Ke(J))return new Te(We);var ie=0;return new Te(function(){var me=J.next();return me.done?me:ye(y,ie++,me.value)})},r(ae,De);function ae(y){this._iterator=y,this._iteratorCache=[]}ae.prototype.__iterateUncached=function(y,T){if(T)return this.cacheResult().__iterate(y,T);for(var W=this._iterator,J=this._iteratorCache,ie=0;ie<J.length;)if(y(J[ie],ie++,this)===!1)return ie;for(var me;!(me=W.next()).done;){var Ve=me.value;if(J[ie]=Ve,y(Ve,ie++,this)===!1)break}return ie},ae.prototype.__iteratorUncached=function(y,T){if(T)return this.cacheResult().__iterator(y,T);var W=this._iterator,J=this._iteratorCache,ie=0;return new Te(function(){if(ie>=J.length){var me=W.next();if(me.done)return me;J[ie]=me.value}return ye(y,ie,J[ie++])})};function Y(y){return!!(y&&y[le])}var _e;function Fe(){return _e||(_e=new ne([]))}function Le(y){var T=Array.isArray(y)?new ne(y).fromEntrySeq():Ke(y)?new ae(y).fromEntrySeq():at(y)?new He(y).fromEntrySeq():typeof y=="object"?new fe(y):void 0;if(!T)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+y);return T}function Re(y){var T=Ee(y);if(!T)throw new TypeError("Expected Array or iterable object of values: "+y);return T}function rt(y){var T=Ee(y)||typeof y=="object"&&new fe(y);if(!T)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+y);return T}function Ee(y){return Ie(y)?new ne(y):Ke(y)?new ae(y):at(y)?new He(y):void 0}function ve(y,T,W,J){var ie=y._cache;if(ie){for(var me=ie.length-1,Ve=0;Ve<=me;Ve++){var je=ie[W?me-Ve:Ve];if(T(je[1],J?je[0]:Ve,y)===!1)return Ve+1}return Ve}return y.__iterateUncached(T,W)}function $e(y,T,W,J){var ie=y._cache;if(ie){var me=ie.length-1,Ve=0;return new Te(function(){var je=ie[W?me-Ve:Ve];return Ve++>me?We():ye(T,J?je[0]:Ve-1,je[1])})}return y.__iteratorUncached(T,W)}function gt(y,T){return T?St(T,y,"",{"":y}):Ce(y)}function St(y,T,W,J){return Array.isArray(T)?y.call(J,W,De(T).map(function(ie,me){return St(y,ie,me,T)})):Ft(T)?y.call(J,W,k(T).map(function(ie,me){return St(y,ie,me,T)})):T}function Ce(y){return Array.isArray(y)?De(y).map(Ce).toList():Ft(y)?k(y).map(Ce).toMap():y}function Ft(y){return y&&(y.constructor===Object||y.constructor===void 0)}function ht(y,T){if(y===T||y!==y&&T!==T)return!0;if(!y||!T)return!1;if(typeof y.valueOf=="function"&&typeof T.valueOf=="function"){if(y=y.valueOf(),T=T.valueOf(),y===T||y!==y&&T!==T)return!0;if(!y||!T)return!1}return!!(typeof y.equals=="function"&&typeof T.equals=="function"&&y.equals(T))}function Nt(y,T){if(y===T)return!0;if(!l(T)||y.size!==void 0&&T.size!==void 0&&y.size!==T.size||y.__hash!==void 0&&T.__hash!==void 0&&y.__hash!==T.__hash||c(y)!==c(T)||d(y)!==d(T)||f(y)!==f(T))return!1;if(y.size===0&&T.size===0)return!0;var W=!h(y);if(f(y)){var J=y.entries();return T.every(function(et,ot){var ut=J.next().value;return ut&&ht(ut[1],et)&&(W||ht(ut[0],ot))})&&J.next().done}var ie=!1;if(y.size===void 0)if(T.size===void 0)typeof y.cacheResult=="function"&&y.cacheResult();else{ie=!0;var me=y;y=T,T=me}var Ve=!0,je=T.__iterate(function(et,ot){if(W?!y.has(et):ie?!ht(et,y.get(ot,V)):!ht(y.get(ot,V),et))return Ve=!1,!1});return Ve&&y.size===je}r(Je,De);function Je(y,T){if(!(this instanceof Je))return new Je(y,T);if(this._value=y,this.size=T===void 0?1/0:Math.max(0,T),this.size===0){if(mt)return mt;mt=this}}Je.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Je.prototype.get=function(y,T){return this.has(y)?this._value:T},Je.prototype.includes=function(y){return ht(this._value,y)},Je.prototype.slice=function(y,T){var W=this.size;return ee(y,T,W)?this:new Je(this._value,U(T,W)-ce(y,W))},Je.prototype.reverse=function(){return this},Je.prototype.indexOf=function(y){return ht(this._value,y)?0:-1},Je.prototype.lastIndexOf=function(y){return ht(this._value,y)?this.size:-1},Je.prototype.__iterate=function(y,T){for(var W=0;W<this.size;W++)if(y(this._value,W,this)===!1)return W+1;return W},Je.prototype.__iterator=function(y,T){var W=this,J=0;return new Te(function(){return J<W.size?ye(y,J++,W._value):We()})},Je.prototype.equals=function(y){return y instanceof Je?ht(this._value,y._value):Nt(y)};var mt;function Wt(y,T){if(!y)throw new Error(T)}r(_t,De);function _t(y,T,W){if(!(this instanceof _t))return new _t(y,T,W);if(Wt(W!==0,"Cannot step a Range by 0"),y=y||0,T===void 0&&(T=1/0),W=W===void 0?1:Math.abs(W),T<y&&(W=-W),this._start=y,this._end=T,this._step=W,this.size=Math.max(0,Math.ceil((T-y)/W-1)+1),this.size===0){if(a0)return a0;a0=this}}_t.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},_t.prototype.get=function(y,T){return this.has(y)?this._start+q(this,y)*this._step:T},_t.prototype.includes=function(y){var T=(y-this._start)/this._step;return T>=0&&T<this.size&&T===Math.floor(T)},_t.prototype.slice=function(y,T){return ee(y,T,this.size)?this:(y=ce(y,this.size),T=U(T,this.size),T<=y?new _t(0,0):new _t(this.get(y,this._end),this.get(T,this._end),this._step))},_t.prototype.indexOf=function(y){var T=y-this._start;if(T%this._step===0){var W=T/this._step;if(W>=0&&W<this.size)return W}return-1},_t.prototype.lastIndexOf=function(y){return this.indexOf(y)},_t.prototype.__iterate=function(y,T){for(var W=this.size-1,J=this._step,ie=T?this._start+W*J:this._start,me=0;me<=W;me++){if(y(ie,me,this)===!1)return me+1;ie+=T?-J:J}return me},_t.prototype.__iterator=function(y,T){var W=this.size-1,J=this._step,ie=T?this._start+W*J:this._start,me=0;return new Te(function(){var Ve=ie;return ie+=T?-J:J,me>W?We():ye(y,me++,Ve)})},_t.prototype.equals=function(y){return y instanceof _t?this._start===y._start&&this._end===y._end&&this._step===y._step:Nt(this,y)};var a0;r(v0,i);function v0(){throw TypeError("Abstract")}r(M0,v0);function M0(){}r(Vn,v0);function Vn(){}r(Xn,v0);function Xn(){}v0.Keyed=M0,v0.Indexed=Vn,v0.Set=Xn;var ki=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(T,W){T=T|0,W=W|0;var J=T&65535,ie=W&65535;return J*ie+((T>>>16)*ie+J*(W>>>16)<<16>>>0)|0};function ta(y){return y>>>1&1073741824|y&3221225471}function $t(y){if(y===!1||y===null||y===void 0||typeof y.valueOf=="function"&&(y=y.valueOf(),y===!1||y===null||y===void 0))return 0;if(y===!0)return 1;var T=typeof y;if(T==="number"){var W=y|0;for(W!==y&&(W^=y*4294967295);y>4294967295;)y/=4294967295,W^=y;return ta(W)}if(T==="string")return y.length>p0?Nr(y):xi(y);if(typeof y.hashCode=="function")return y.hashCode();if(T==="object")return S0(y);if(typeof y.toString=="function")return xi(y.toString());throw new Error("Value type "+T+" cannot be hashed.")}function Nr(y){var T=D0[y];return T===void 0&&(T=xi(y),m0===E0&&(m0=0,D0={}),m0++,D0[y]=T),T}function xi(y){for(var T=0,W=0;W<y.length;W++)T=31*T+y.charCodeAt(W)|0;return ta(T)}function S0(y){var T;if(st&&(T=Ze.get(y),T!==void 0)||(T=y[t0],T!==void 0)||!he&&(T=y.propertyIsEnumerable&&y.propertyIsEnumerable[t0],T!==void 0||(T=qe(y),T!==void 0)))return T;if(T=++ft,ft&1073741824&&(ft=0),st)Ze.set(y,T);else{if(Q!==void 0&&Q(y)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(he)Object.defineProperty(y,t0,{enumerable:!1,configurable:!1,writable:!1,value:T});else if(y.propertyIsEnumerable!==void 0&&y.propertyIsEnumerable===y.constructor.prototype.propertyIsEnumerable)y.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},y.propertyIsEnumerable[t0]=T;else if(y.nodeType!==void 0)y[t0]=T;else throw new Error("Unable to set a non-enumerable property on object.")}return T}var Q=Object.isExtensible,he=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function qe(y){if(y&&y.nodeType>0)switch(y.nodeType){case 1:return y.uniqueID;case 9:return y.documentElement&&y.documentElement.uniqueID}}var st=typeof WeakMap=="function",Ze;st&&(Ze=new WeakMap);var ft=0,t0="__immutablehash__";typeof Symbol=="function"&&(t0=Symbol(t0));var p0=16,E0=255,m0=0,D0={};function f0(y){Wt(y!==1/0,"Cannot perform this action with an infinite size.")}r(jt,M0);function jt(y){return y==null?En():z0(y)&&!f(y)?y:En().withMutations(function(T){var W=a(y);f0(W.size),W.forEach(function(J,ie){return T.set(ie,J)})})}jt.prototype.toString=function(){return this.__toString("Map {","}")},jt.prototype.get=function(y,T){return this._root?this._root.get(0,void 0,y,T):T},jt.prototype.set=function(y,T){return Ni(this,y,T)},jt.prototype.setIn=function(y,T){return this.updateIn(y,V,function(){return T})},jt.prototype.remove=function(y){return Ni(this,y,V)},jt.prototype.deleteIn=function(y){return this.updateIn(y,function(){return V})},jt.prototype.update=function(y,T,W){return arguments.length===1?y(this):this.updateIn([y],T,W)},jt.prototype.updateIn=function(y,T,W){W||(W=T,T=void 0);var J=Zt(this,nf(y),T,W);return J===V?void 0:J},jt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):En()},jt.prototype.merge=function(){return ze(this,void 0,arguments)},jt.prototype.mergeWith=function(y){var T=t.call(arguments,1);return ze(this,y,T)},jt.prototype.mergeIn=function(y){var T=t.call(arguments,1);return this.updateIn(y,En(),function(W){return typeof W.merge=="function"?W.merge.apply(W,T):T[T.length-1]})},jt.prototype.mergeDeep=function(){return ze(this,Ye,arguments)},jt.prototype.mergeDeepWith=function(y){var T=t.call(arguments,1);return ze(this,it(y),T)},jt.prototype.mergeDeepIn=function(y){var T=t.call(arguments,1);return this.updateIn(y,En(),function(W){return typeof W.mergeDeep=="function"?W.mergeDeep.apply(W,T):T[T.length-1]})},jt.prototype.sort=function(y){return Nn(ma(this,y))},jt.prototype.sortBy=function(y,T){return Nn(ma(this,T,y))},jt.prototype.withMutations=function(y){var T=this.asMutable();return y(T),T.wasAltered()?T.__ensureOwner(this.__ownerID):this},jt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new $)},jt.prototype.asImmutable=function(){return this.__ensureOwner()},jt.prototype.wasAltered=function(){return this.__altered},jt.prototype.__iterator=function(y,T){return new Rt(this,y,T)},jt.prototype.__iterate=function(y,T){var W=this,J=0;return this._root&&this._root.iterate(function(ie){return J++,y(ie[1],ie[0],W)},T),J},jt.prototype.__ensureOwner=function(y){return y===this.__ownerID?this:y?Vr(this.size,this._root,y,this.__hash):(this.__ownerID=y,this.__altered=!1,this)};function z0(y){return!!(y&&y[Jr])}jt.isMap=z0;var Jr="@@__IMMUTABLE_MAP__@@",c0=jt.prototype;c0[Jr]=!0,c0[_]=c0.remove,c0.removeIn=c0.deleteIn;function ai(y,T){this.ownerID=y,this.entries=T}ai.prototype.get=function(y,T,W,J){for(var ie=this.entries,me=0,Ve=ie.length;me<Ve;me++)if(ht(W,ie[me][0]))return ie[me][1];return J},ai.prototype.update=function(y,T,W,J,ie,me,Ve){for(var je=ie===V,et=this.entries,ot=0,ut=et.length;ot<ut&&!ht(J,et[ot][0]);ot++);var Ot=ot<ut;if(Ot?et[ot][1]===ie:je)return this;if(te(Ve),(je||!Ot)&&te(me),!(je&&et.length===1)){if(!Ot&&!je&&et.length>=Kn)return Ae(y,et,J,ie);var Ht=y&&y===this.ownerID,g0=Ht?et:z(et);return Ot?je?ot===ut-1?g0.pop():g0[ot]=g0.pop():g0[ot]=[J,ie]:g0.push([J,ie]),Ht?(this.entries=g0,this):new ai(y,g0)}};function mn(y,T,W){this.ownerID=y,this.bitmap=T,this.nodes=W}mn.prototype.get=function(y,T,W,J){T===void 0&&(T=$t(W));var ie=1<<((y===0?T:T>>>y)&D),me=this.bitmap;return(me&ie)===0?J:this.nodes[x0(me&ie-1)].get(y+v,T,W,J)},mn.prototype.update=function(y,T,W,J,ie,me,Ve){W===void 0&&(W=$t(J));var je=(T===0?W:W>>>T)&D,et=1<<je,ot=this.bitmap,ut=(ot&et)!==0;if(!ut&&ie===V)return this;var Ot=x0(ot&et-1),Ht=this.nodes,g0=ut?Ht[Ot]:void 0,R0=b(g0,y,T+v,W,J,ie,me,Ve);if(R0===g0)return this;if(!ut&&R0&&Ht.length>=ka)return Me(y,Ht,ot,je,R0);if(ut&&!R0&&Ht.length===2&&M(Ht[Ot^1]))return Ht[Ot^1];if(ut&&R0&&Ht.length===1&&M(R0))return R0;var Cn=y&&y===this.ownerID,Gi=ut?R0?ot:ot^et:ot|et,za=ut?R0?zt(Ht,Ot,R0,Cn):w0(Ht,Ot,Cn):qt(Ht,Ot,R0,Cn);return Cn?(this.bitmap=Gi,this.nodes=za,this):new mn(y,Gi,za)};function C0(y,T,W){this.ownerID=y,this.count=T,this.nodes=W}C0.prototype.get=function(y,T,W,J){T===void 0&&(T=$t(W));var ie=(y===0?T:T>>>y)&D,me=this.nodes[ie];return me?me.get(y+v,T,W,J):J},C0.prototype.update=function(y,T,W,J,ie,me,Ve){W===void 0&&(W=$t(J));var je=(T===0?W:W>>>T)&D,et=ie===V,ot=this.nodes,ut=ot[je];if(et&&!ut)return this;var Ot=b(ut,y,T+v,W,J,ie,me,Ve);if(Ot===ut)return this;var Ht=this.count;if(!ut)Ht++;else if(!Ot&&(Ht--,Ht<Zr))return xe(y,ot,Ht,je);var g0=y&&y===this.ownerID,R0=zt(ot,je,Ot,g0);return g0?(this.count=Ht,this.nodes=R0,this):new C0(y,Ht,R0)};function Ur(y,T,W){this.ownerID=y,this.keyHash=T,this.entries=W}Ur.prototype.get=function(y,T,W,J){for(var ie=this.entries,me=0,Ve=ie.length;me<Ve;me++)if(ht(W,ie[me][0]))return ie[me][1];return J},Ur.prototype.update=function(y,T,W,J,ie,me,Ve){W===void 0&&(W=$t(J));var je=ie===V;if(W!==this.keyHash)return je?this:(te(Ve),te(me),X(this,y,T,W,[J,ie]));for(var et=this.entries,ot=0,ut=et.length;ot<ut&&!ht(J,et[ot][0]);ot++);var Ot=ot<ut;if(Ot?et[ot][1]===ie:je)return this;if(te(Ve),(je||!Ot)&&te(me),je&&ut===2)return new e0(y,this.keyHash,et[ot^1]);var Ht=y&&y===this.ownerID,g0=Ht?et:z(et);return Ot?je?ot===ut-1?g0.pop():g0[ot]=g0.pop():g0[ot]=[J,ie]:g0.push([J,ie]),Ht?(this.entries=g0,this):new Ur(y,this.keyHash,g0)};function e0(y,T,W){this.ownerID=y,this.keyHash=T,this.entry=W}e0.prototype.get=function(y,T,W,J){return ht(W,this.entry[0])?this.entry[1]:J},e0.prototype.update=function(y,T,W,J,ie,me,Ve){var je=ie===V,et=ht(J,this.entry[0]);if(et?ie===this.entry[1]:je)return this;if(te(Ve),je){te(me);return}return et?y&&y===this.ownerID?(this.entry[1]=ie,this):new e0(y,this.keyHash,[J,ie]):(te(me),X(this,y,T,$t(J),[J,ie]))},ai.prototype.iterate=Ur.prototype.iterate=function(y,T){for(var W=this.entries,J=0,ie=W.length-1;J<=ie;J++)if(y(W[T?ie-J:J])===!1)return!1},mn.prototype.iterate=C0.prototype.iterate=function(y,T){for(var W=this.nodes,J=0,ie=W.length-1;J<=ie;J++){var me=W[T?ie-J:J];if(me&&me.iterate(y,T)===!1)return!1}},e0.prototype.iterate=function(y,T){return y(this.entry)},r(Rt,Te);function Rt(y,T,W){this._type=T,this._reverse=W,this._stack=y._root&&vi(y._root)}Rt.prototype.next=function(){for(var y=this._type,T=this._stack;T;){var W=T.node,J=T.index++,ie;if(W.entry){if(J===0)return Dn(y,W.entry)}else if(W.entries){if(ie=W.entries.length-1,J<=ie)return Dn(y,W.entries[this._reverse?ie-J:J])}else if(ie=W.nodes.length-1,J<=ie){var me=W.nodes[this._reverse?ie-J:J];if(me){if(me.entry)return Dn(y,me.entry);T=this._stack=vi(me,T)}continue}T=this._stack=this._stack.__prev}return We()};function Dn(y,T){return ye(y,T[0],T[1])}function vi(y,T){return{node:y,index:0,__prev:T}}function Vr(y,T,W,J){var ie=Object.create(c0);return ie.size=y,ie._root=T,ie.__ownerID=W,ie.__hash=J,ie.__altered=!1,ie}var o0;function En(){return o0||(o0=Vr(0))}function Ni(y,T,W){var J,ie;if(y._root){var me=j(H),Ve=j(R);if(J=b(y._root,y.__ownerID,0,void 0,T,W,me,Ve),!Ve.value)return y;ie=y.size+(me.value?W===V?-1:1:0)}else{if(W===V)return y;ie=1,J=new ai(y.__ownerID,[[T,W]])}return y.__ownerID?(y.size=ie,y._root=J,y.__hash=void 0,y.__altered=!0,y):J?Vr(ie,J):En()}function b(y,T,W,J,ie,me,Ve,je){return y?y.update(T,W,J,ie,me,Ve,je):me===V?y:(te(je),te(Ve),new e0(T,J,[ie,me]))}function M(y){return y.constructor===e0||y.constructor===Ur}function X(y,T,W,J,ie){if(y.keyHash===J)return new Ur(T,J,[y.entry,ie]);var me=(W===0?y.keyHash:y.keyHash>>>W)&D,Ve=(W===0?J:J>>>W)&D,je,et=me===Ve?[X(y,T,W+v,J,ie)]:(je=new e0(T,J,ie),me<Ve?[y,je]:[je,y]);return new mn(T,1<<me|1<<Ve,et)}function Ae(y,T,W,J){y||(y=new $);for(var ie=new e0(y,$t(W),[W,J]),me=0;me<T.length;me++){var Ve=T[me];ie=ie.update(y,0,void 0,Ve[0],Ve[1])}return ie}function xe(y,T,W,J){for(var ie=0,me=0,Ve=new Array(W),je=0,et=1,ot=T.length;je<ot;je++,et<<=1){var ut=T[je];ut!==void 0&&je!==J&&(ie|=et,Ve[me++]=ut)}return new mn(y,ie,Ve)}function Me(y,T,W,J,ie){for(var me=0,Ve=new Array(C),je=0;W!==0;je++,W>>>=1)Ve[je]=W&1?T[me++]:void 0;return Ve[J]=ie,new C0(y,me+1,Ve)}function ze(y,T,W){for(var J=[],ie=0;ie<W.length;ie++){var me=W[ie],Ve=a(me);l(me)||(Ve=Ve.map(function(je){return gt(je)})),J.push(Ve)}return Gt(y,T,J)}function Ye(y,T,W){return y&&y.mergeDeep&&l(T)?y.mergeDeep(T):ht(y,T)?y:T}function it(y){return function(T,W,J){if(T&&T.mergeDeepWith&&l(W))return T.mergeDeepWith(y,W);var ie=y(T,W,J);return ht(T,ie)?T:ie}}function Gt(y,T,W){return W=W.filter(function(J){return J.size!==0}),W.length===0?y:y.size===0&&!y.__ownerID&&W.length===1?y.constructor(W[0]):y.withMutations(function(J){for(var ie=T?function(Ve,je){J.update(je,V,function(et){return et===V?Ve:T(et,Ve,je)})}:function(Ve,je){J.set(je,Ve)},me=0;me<W.length;me++)W[me].forEach(ie)})}function Zt(y,T,W,J){var ie=y===V,me=T.next();if(me.done){var Ve=ie?W:y,je=J(Ve);return je===Ve?y:je}Wt(ie||y&&y.set,"invalid keyPath");var et=me.value,ot=ie?V:y.get(et,V),ut=Zt(ot,T,W,J);return ut===ot?y:ut===V?y.remove(et):(ie?En():y).set(et,ut)}function x0(y){return y=y-(y>>1&1431655765),y=(y&858993459)+(y>>2&858993459),y=y+(y>>4)&252645135,y=y+(y>>8),y=y+(y>>16),y&127}function zt(y,T,W,J){var ie=J?y:z(y);return ie[T]=W,ie}function qt(y,T,W,J){var ie=y.length+1;if(J&&T+1===ie)return y[T]=W,y;for(var me=new Array(ie),Ve=0,je=0;je<ie;je++)je===T?(me[je]=W,Ve=-1):me[je]=y[je+Ve];return me}function w0(y,T,W){var J=y.length-1;if(W&&T===J)return y.pop(),y;for(var ie=new Array(J),me=0,Ve=0;Ve<J;Ve++)Ve===T&&(me=1),ie[Ve]=y[Ve+me];return ie}var Kn=C/4,ka=C/2,Zr=C/4;r(N0,Vn);function N0(y){var T=XA();if(y==null)return T;if(mr(y))return y;var W=o(y),J=W.size;return J===0?T:(f0(J),J>0&&J<C?fl(0,J,v,null,new un(W.toArray())):T.withMutations(function(ie){ie.setSize(J),W.forEach(function(me,Ve){return ie.set(Ve,me)})}))}N0.of=function(){return this(arguments)},N0.prototype.toString=function(){return this.__toString("List [","]")},N0.prototype.get=function(y,T){if(y=q(this,y),y>=0&&y<this.size){y+=this._origin;var W=Sm(this,y);return W&&W.array[y&D]}return T},N0.prototype.set=function(y,T){return M2(this,y,T)},N0.prototype.remove=function(y){return this.has(y)?y===0?this.shift():y===this.size-1?this.pop():this.splice(y,1):this},N0.prototype.insert=function(y,T){return this.splice(y,0,T)},N0.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=v,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):XA()},N0.prototype.push=function(){var y=arguments,T=this.size;return this.withMutations(function(W){Xo(W,0,T+y.length);for(var J=0;J<y.length;J++)W.set(T+J,y[J])})},N0.prototype.pop=function(){return Xo(this,0,-1)},N0.prototype.unshift=function(){var y=arguments;return this.withMutations(function(T){Xo(T,-y.length);for(var W=0;W<y.length;W++)T.set(W,y[W])})},N0.prototype.shift=function(){return Xo(this,1)},N0.prototype.merge=function(){return Ad(this,void 0,arguments)},N0.prototype.mergeWith=function(y){var T=t.call(arguments,1);return Ad(this,y,T)},N0.prototype.mergeDeep=function(){return Ad(this,Ye,arguments)},N0.prototype.mergeDeepWith=function(y){var T=t.call(arguments,1);return Ad(this,it(y),T)},N0.prototype.setSize=function(y){return Xo(this,0,y)},N0.prototype.slice=function(y,T){var W=this.size;return ee(y,T,W)?this:Xo(this,ce(y,W),U(T,W))},N0.prototype.__iterator=function(y,T){var W=0,J=mm(this,T);return new Te(function(){var ie=J();return ie===ku?We():ye(y,W++,ie)})},N0.prototype.__iterate=function(y,T){for(var W=0,J=mm(this,T),ie;(ie=J())!==ku&&y(ie,W++,this)!==!1;);return W},N0.prototype.__ensureOwner=function(y){return y===this.__ownerID?this:y?fl(this._origin,this._capacity,this._level,this._root,this._tail,y,this.__hash):(this.__ownerID=y,this)};function mr(y){return!!(y&&y[wi])}N0.isList=mr;var wi="@@__IMMUTABLE_LIST__@@",kn=N0.prototype;kn[wi]=!0,kn[_]=kn.remove,kn.setIn=c0.setIn,kn.deleteIn=kn.removeIn=c0.removeIn,kn.update=c0.update,kn.updateIn=c0.updateIn,kn.mergeIn=c0.mergeIn,kn.mergeDeepIn=c0.mergeDeepIn,kn.withMutations=c0.withMutations,kn.asMutable=c0.asMutable,kn.asImmutable=c0.asImmutable,kn.wasAltered=c0.wasAltered;function un(y,T){this.array=y,this.ownerID=T}un.prototype.removeBefore=function(y,T,W){if(W===T?1<<T:this.array.length===0)return this;var J=W>>>T&D;if(J>=this.array.length)return new un([],y);var ie=J===0,me;if(T>0){var Ve=this.array[J];if(me=Ve&&Ve.removeBefore(y,T-v,W),me===Ve&&ie)return this}if(ie&&!me)return this;var je=Ua(this,y);if(!ie)for(var et=0;et<J;et++)je.array[et]=void 0;return me&&(je.array[J]=me),je},un.prototype.removeAfter=function(y,T,W){if(W===(T?1<<T:0)||this.array.length===0)return this;var J=W-1>>>T&D;if(J>=this.array.length)return this;var ie;if(T>0){var me=this.array[J];if(ie=me&&me.removeAfter(y,T-v,W),ie===me&&J===this.array.length-1)return this}var Ve=Ua(this,y);return Ve.array.splice(J+1),ie&&(Ve.array[J]=ie),Ve};var ku={};function mm(y,T){var W=y._origin,J=y._capacity,ie=Nu(J),me=y._tail;return Ve(y._root,y._level,0);function Ve(ot,ut,Ot){return ut===0?je(ot,Ot):et(ot,ut,Ot)}function je(ot,ut){var Ot=ut===ie?me&&me.array:ot&&ot.array,Ht=ut>W?0:W-ut,g0=J-ut;return g0>C&&(g0=C),function(){if(Ht===g0)return ku;var R0=T?--g0:Ht++;return Ot&&Ot[R0]}}function et(ot,ut,Ot){var Ht,g0=ot&&ot.array,R0=Ot>W?0:W-Ot>>ut,Cn=(J-Ot>>ut)+1;return Cn>C&&(Cn=C),function(){do{if(Ht){var Gi=Ht();if(Gi!==ku)return Gi;Ht=null}if(R0===Cn)return ku;var za=T?--Cn:R0++;Ht=Ve(g0&&g0[za],ut-v,Ot+(za<<ut))}while(!0)}}}function fl(y,T,W,J,ie,me,Ve){var je=Object.create(kn);return je.size=T-y,je._origin=y,je._capacity=T,je._level=W,je._root=J,je._tail=ie,je.__ownerID=me,je.__hash=Ve,je.__altered=!1,je}var Na;function XA(){return Na||(Na=fl(0,0,v))}function M2(y,T,W){if(T=q(y,T),T!==T)return y;if(T>=y.size||T<0)return y.withMutations(function(Ve){T<0?Xo(Ve,T).set(0,W):Xo(Ve,0,T+1).set(T,W)});T+=y._origin;var J=y._tail,ie=y._root,me=j(R);return T>=Nu(y._capacity)?J=hl(J,y.__ownerID,0,T,W,me):ie=hl(ie,y.__ownerID,y._level,T,W,me),me.value?y.__ownerID?(y._root=ie,y._tail=J,y.__hash=void 0,y.__altered=!0,y):fl(y._origin,y._capacity,y._level,ie,J):y}function hl(y,T,W,J,ie,me){var Ve=J>>>W&D,je=y&&Ve<y.array.length;if(!je&&ie===void 0)return y;var et;if(W>0){var ot=y&&y.array[Ve],ut=hl(ot,T,W-v,J,ie,me);return ut===ot?y:(et=Ua(y,T),et.array[Ve]=ut,et)}return je&&y.array[Ve]===ie?y:(te(me),et=Ua(y,T),ie===void 0&&Ve===et.array.length-1?et.array.pop():et.array[Ve]=ie,et)}function Ua(y,T){return T&&y&&T===y.ownerID?y:new un(y?y.array.slice():[],T)}function Sm(y,T){if(T>=Nu(y._capacity))return y._tail;if(T<1<<y._level+v){for(var W=y._root,J=y._level;W&&J>0;)W=W.array[T>>>J&D],J-=v;return W}}function Xo(y,T,W){T!==void 0&&(T=T|0),W!==void 0&&(W=W|0);var J=y.__ownerID||new $,ie=y._origin,me=y._capacity,Ve=ie+T,je=W===void 0?me:W<0?me+W:ie+W;if(Ve===ie&&je===me)return y;if(Ve>=je)return y.clear();for(var et=y._level,ot=y._root,ut=0;Ve+ut<0;)ot=new un(ot&&ot.array.length?[void 0,ot]:[],J),et+=v,ut+=1<<et;ut&&(Ve+=ut,ie+=ut,je+=ut,me+=ut);for(var Ot=Nu(me),Ht=Nu(je);Ht>=1<<et+v;)ot=new un(ot&&ot.array.length?[ot]:[],J),et+=v;var g0=y._tail,R0=Ht<Ot?Sm(y,je-1):Ht>Ot?new un([],J):g0;if(g0&&Ht>Ot&&Ve<me&&g0.array.length){ot=Ua(ot,J);for(var Cn=ot,Gi=et;Gi>v;Gi-=v){var za=Ot>>>Gi&D;Cn=Cn.array[za]=Ua(Cn.array[za],J)}Cn.array[Ot>>>v&D]=g0}if(je<me&&(R0=R0&&R0.removeAfter(J,0,je)),Ve>=Ht)Ve-=Ht,je-=Ht,et=v,ot=null,R0=R0&&R0.removeBefore(J,0,Ve);else if(Ve>ie||Ht<Ot){for(ut=0;ot;){var Ed=Ve>>>et&D;if(Ed!==Ht>>>et&D)break;Ed&&(ut+=(1<<et)*Ed),et-=v,ot=ot.array[Ed]}ot&&Ve>ie&&(ot=ot.removeBefore(J,et,Ve-ut)),ot&&Ht<Ot&&(ot=ot.removeAfter(J,et,Ht-ut)),ut&&(Ve-=ut,je-=ut)}return y.__ownerID?(y.size=je-Ve,y._origin=Ve,y._capacity=je,y._level=et,y._root=ot,y._tail=R0,y.__hash=void 0,y.__altered=!0,y):fl(Ve,je,et,ot,R0)}function Ad(y,T,W){for(var J=[],ie=0,me=0;me<W.length;me++){var Ve=W[me],je=o(Ve);je.size>ie&&(ie=je.size),l(Ve)||(je=je.map(function(et){return gt(et)})),J.push(je)}return ie>y.size&&(y=y.setSize(ie)),Gt(y,T,J)}function Nu(y){return y<C?0:y-1>>>v<<v}r(Nn,jt);function Nn(y){return y==null?Uu():KA(y)?y:Uu().withMutations(function(T){var W=a(y);f0(W.size),W.forEach(function(J,ie){return T.set(ie,J)})})}Nn.of=function(){return this(arguments)},Nn.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Nn.prototype.get=function(y,T){var W=this._map.get(y);return W!==void 0?this._list.get(W)[1]:T},Nn.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Uu()},Nn.prototype.set=function(y,T){return ju(this,y,T)},Nn.prototype.remove=function(y){return ju(this,y,V)},Nn.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Nn.prototype.__iterate=function(y,T){var W=this;return this._list.__iterate(function(J){return J&&y(J[1],J[0],W)},T)},Nn.prototype.__iterator=function(y,T){return this._list.fromEntrySeq().__iterator(y,T)},Nn.prototype.__ensureOwner=function(y){if(y===this.__ownerID)return this;var T=this._map.__ensureOwner(y),W=this._list.__ensureOwner(y);return y?YA(T,W,y,this.__hash):(this.__ownerID=y,this._map=T,this._list=W,this)};function KA(y){return z0(y)&&f(y)}Nn.isOrderedMap=KA,Nn.prototype[E]=!0,Nn.prototype[_]=Nn.prototype.remove;function YA(y,T,W,J){var ie=Object.create(Nn.prototype);return ie.size=y?y.size:0,ie._map=y,ie._list=T,ie.__ownerID=W,ie.__hash=J,ie}var qA;function Uu(){return qA||(qA=YA(En(),XA()))}function ju(y,T,W){var J=y._map,ie=y._list,me=J.get(T),Ve=me!==void 0,je,et;if(W===V){if(!Ve)return y;ie.size>=C&&ie.size>=J.size*2?(et=ie.filter(function(ot,ut){return ot!==void 0&&me!==ut}),je=et.toKeyedSeq().map(function(ot){return ot[0]}).flip().toMap(),y.__ownerID&&(je.__ownerID=et.__ownerID=y.__ownerID)):(je=J.remove(T),et=me===ie.size-1?ie.pop():ie.set(me,void 0))}else if(Ve){if(W===ie.get(me)[1])return y;je=J,et=ie.set(me,[T,W])}else je=J.set(T,ie.size),et=ie.set(ie.size,[T,W]);return y.__ownerID?(y.size=je.size,y._map=je,y._list=et,y.__hash=void 0,y):YA(je,et)}r(oi,k);function oi(y,T){this._iter=y,this._useKeys=T,this.size=y.size}oi.prototype.get=function(y,T){return this._iter.get(y,T)},oi.prototype.has=function(y){return this._iter.has(y)},oi.prototype.valueSeq=function(){return this._iter.valueSeq()},oi.prototype.reverse=function(){var y=this,T=fd(this,!0);return this._useKeys||(T.valueSeq=function(){return y._iter.toSeq().reverse()}),T},oi.prototype.map=function(y,T){var W=this,J=gm(this,y,T);return this._useKeys||(J.valueSeq=function(){return W._iter.toSeq().map(y,T)}),J},oi.prototype.__iterate=function(y,T){var W=this,J;return this._iter.__iterate(this._useKeys?function(ie,me){return y(ie,me,W)}:(J=T?ef(this):0,function(ie){return y(ie,T?--J:J++,W)}),T)},oi.prototype.__iterator=function(y,T){if(this._useKeys)return this._iter.__iterator(y,T);var W=this._iter.__iterator(re,T),J=T?ef(this):0;return new Te(function(){var ie=W.next();return ie.done?ie:ye(y,T?--J:J++,ie.value,ie)})},oi.prototype[E]=!0,r(Ko,De);function Ko(y){this._iter=y,this.size=y.size}Ko.prototype.includes=function(y){return this._iter.includes(y)},Ko.prototype.__iterate=function(y,T){var W=this,J=0;return this._iter.__iterate(function(ie){return y(ie,J++,W)},T)},Ko.prototype.__iterator=function(y,T){var W=this._iter.__iterator(re,T),J=0;return new Te(function(){var ie=W.next();return ie.done?ie:ye(y,J++,ie.value,ie)})},r(ys,we);function ys(y){this._iter=y,this.size=y.size}ys.prototype.has=function(y){return this._iter.includes(y)},ys.prototype.__iterate=function(y,T){var W=this;return this._iter.__iterate(function(J){return y(J,J,W)},T)},ys.prototype.__iterator=function(y,T){var W=this._iter.__iterator(re,T);return new Te(function(){var J=W.next();return J.done?J:ye(y,J.value,J.value,J)})},r(Es,k);function Es(y){this._iter=y,this.size=y.size}Es.prototype.entrySeq=function(){return this._iter.toSeq()},Es.prototype.__iterate=function(y,T){var W=this;return this._iter.__iterate(function(J){if(J){$A(J);var ie=l(J);return y(ie?J.get(1):J[1],ie?J.get(0):J[0],W)}},T)},Es.prototype.__iterator=function(y,T){var W=this._iter.__iterator(re,T);return new Te(function(){for(;;){var J=W.next();if(J.done)return J;var ie=J.value;if(ie){$A(ie);var me=l(ie);return ye(y,me?ie.get(0):ie[0],me?ie.get(1):ie[1],J)}}})},Ko.prototype.cacheResult=oi.prototype.cacheResult=ys.prototype.cacheResult=Es.prototype.cacheResult=tf;function Gu(y){var T=Ga(y);return T._iter=y,T.size=y.size,T.flip=function(){return y},T.reverse=function(){var W=y.reverse.apply(this);return W.flip=function(){return y.reverse()},W},T.has=function(W){return y.includes(W)},T.includes=function(W){return y.has(W)},T.cacheResult=tf,T.__iterateUncached=function(W,J){var ie=this;return y.__iterate(function(me,Ve){return W(Ve,me,ie)!==!1},J)},T.__iteratorUncached=function(W,J){if(W===oe){var ie=y.__iterator(W,J);return new Te(function(){var me=ie.next();if(!me.done){var Ve=me.value[0];me.value[0]=me.value[1],me.value[1]=Ve}return me})}return y.__iterator(W===re?G:re,J)},T}function gm(y,T,W){var J=Ga(y);return J.size=y.size,J.has=function(ie){return y.has(ie)},J.get=function(ie,me){var Ve=y.get(ie,V);return Ve===V?me:T.call(W,Ve,ie,y)},J.__iterateUncached=function(ie,me){var Ve=this;return y.__iterate(function(je,et,ot){return ie(T.call(W,je,et,ot),et,Ve)!==!1},me)},J.__iteratorUncached=function(ie,me){var Ve=y.__iterator(oe,me);return new Te(function(){var je=Ve.next();if(je.done)return je;var et=je.value,ot=et[0];return ye(ie,ot,T.call(W,et[1],ot,y),je)})},J}function fd(y,T){var W=Ga(y);return W._iter=y,W.size=y.size,W.reverse=function(){return y},y.flip&&(W.flip=function(){var J=Gu(y);return J.reverse=function(){return y.flip()},J}),W.get=function(J,ie){return y.get(T?J:-1-J,ie)},W.has=function(J){return y.has(T?J:-1-J)},W.includes=function(J){return y.includes(J)},W.cacheResult=tf,W.__iterate=function(J,ie){var me=this;return y.__iterate(function(Ve,je){return J(Ve,je,me)},!ie)},W.__iterator=function(J,ie){return y.__iterator(J,!ie)},W}function na(y,T,W,J){var ie=Ga(y);return J&&(ie.has=function(me){var Ve=y.get(me,V);return Ve!==V&&!!T.call(W,Ve,me,y)},ie.get=function(me,Ve){var je=y.get(me,V);return je!==V&&T.call(W,je,me,y)?je:Ve}),ie.__iterateUncached=function(me,Ve){var je=this,et=0;return y.__iterate(function(ot,ut,Ot){if(T.call(W,ot,ut,Ot))return et++,me(ot,J?ut:et-1,je)},Ve),et},ie.__iteratorUncached=function(me,Ve){var je=y.__iterator(oe,Ve),et=0;return new Te(function(){for(;;){var ot=je.next();if(ot.done)return ot;var ut=ot.value,Ot=ut[0],Ht=ut[1];if(T.call(W,Ht,Ot,y))return ye(me,J?Ot:et++,Ht,ot)}})},ie}function I2(y,T,W){var J=jt().asMutable();return y.__iterate(function(ie,me){J.update(T.call(W,ie,me,y),0,function(Ve){return Ve+1})}),J.asImmutable()}function O2(y,T,W){var J=c(y),ie=(f(y)?Nn():jt()).asMutable();y.__iterate(function(Ve,je){ie.update(T.call(W,Ve,je,y),function(et){return et=et||[],et.push(J?[je,Ve]:Ve),et})});var me=vm(y);return ie.map(function(Ve){return cn(y,me(Ve))})}function Hu(y,T,W,J){var ie=y.size;if(T!==void 0&&(T=T|0),W!==void 0&&(W=W|0),ee(T,W,ie))return y;var me=ce(T,ie),Ve=U(W,ie);if(me!==me||Ve!==Ve)return Hu(y.toSeq().cacheResult(),T,W,J);var je=Ve-me,et;je===je&&(et=je<0?0:je);var ot=Ga(y);return ot.size=et===0?et:y.size&&et||void 0,!J&&Y(y)&&et>=0&&(ot.get=function(ut,Ot){return ut=q(this,ut),ut>=0&&ut<et?y.get(ut+me,Ot):Ot}),ot.__iterateUncached=function(ut,Ot){var Ht=this;if(et===0)return 0;if(Ot)return this.cacheResult().__iterate(ut,Ot);var g0=0,R0=!0,Cn=0;return y.__iterate(function(Gi,za){if(!(R0&&(R0=g0++<me)))return Cn++,ut(Gi,J?za:Cn-1,Ht)!==!1&&Cn!==et}),Cn},ot.__iteratorUncached=function(ut,Ot){if(et!==0&&Ot)return this.cacheResult().__iterator(ut,Ot);var Ht=et!==0&&y.__iterator(ut,Ot),g0=0,R0=0;return new Te(function(){for(;g0++<me;)Ht.next();if(++R0>et)return We();var Cn=Ht.next();return J||ut===re?Cn:ut===G?ye(ut,R0-1,void 0,Cn):ye(ut,R0-1,Cn.value[1],Cn)})},ot}function _m(y,T,W){var J=Ga(y);return J.__iterateUncached=function(ie,me){var Ve=this;if(me)return this.cacheResult().__iterate(ie,me);var je=0;return y.__iterate(function(et,ot,ut){return T.call(W,et,ot,ut)&&++je&&ie(et,ot,Ve)}),je},J.__iteratorUncached=function(ie,me){var Ve=this;if(me)return this.cacheResult().__iterator(ie,me);var je=y.__iterator(oe,me),et=!0;return new Te(function(){if(!et)return We();var ot=je.next();if(ot.done)return ot;var ut=ot.value,Ot=ut[0],Ht=ut[1];return T.call(W,Ht,Ot,Ve)?ie===oe?ot:ye(ie,Ot,Ht,ot):(et=!1,We())})},J}function go(y,T,W,J){var ie=Ga(y);return ie.__iterateUncached=function(me,Ve){var je=this;if(Ve)return this.cacheResult().__iterate(me,Ve);var et=!0,ot=0;return y.__iterate(function(ut,Ot,Ht){if(!(et&&(et=T.call(W,ut,Ot,Ht))))return ot++,me(ut,J?Ot:ot-1,je)}),ot},ie.__iteratorUncached=function(me,Ve){var je=this;if(Ve)return this.cacheResult().__iterator(me,Ve);var et=y.__iterator(oe,Ve),ot=!0,ut=0;return new Te(function(){var Ot,Ht,g0;do{if(Ot=et.next(),Ot.done)return J||me===re?Ot:me===G?ye(me,ut++,void 0,Ot):ye(me,ut++,Ot.value[1],Ot);var R0=Ot.value;Ht=R0[0],g0=R0[1],ot&&(ot=T.call(W,g0,Ht,je))}while(ot);return me===oe?Ot:ye(me,Ht,g0,Ot)})},ie}function QA(y,T){var W=c(y),J=[y].concat(T).map(function(Ve){return l(Ve)?W&&(Ve=a(Ve)):Ve=W?Le(Ve):Re(Array.isArray(Ve)?Ve:[Ve]),Ve}).filter(function(Ve){return Ve.size!==0});if(J.length===0)return y;if(J.length===1){var ie=J[0];if(ie===y||W&&c(ie)||d(y)&&d(ie))return ie}var me=new ne(J);return W?me=me.toKeyedSeq():d(y)||(me=me.toSetSeq()),me=me.flatten(!0),me.size=J.reduce(function(Ve,je){if(Ve!==void 0){var et=je.size;if(et!==void 0)return Ve+et}},0),me}function ja(y,T,W){var J=Ga(y);return J.__iterateUncached=function(ie,me){var Ve=0,je=!1;function et(ot,ut){var Ot=this;ot.__iterate(function(Ht,g0){return(!T||ut<T)&&l(Ht)?et(Ht,ut+1):ie(Ht,W?g0:Ve++,Ot)===!1&&(je=!0),!je},me)}return et(y,0),Ve},J.__iteratorUncached=function(ie,me){var Ve=y.__iterator(ie,me),je=[],et=0;return new Te(function(){for(;Ve;){var ot=Ve.next();if(ot.done!==!1){Ve=je.pop();continue}var ut=ot.value;if(ie===oe&&(ut=ut[1]),(!T||je.length<T)&&l(ut))je.push(Ve),Ve=ut.__iterator(ie,me);else return W?ot:ye(ie,et++,ut,ot)}return We()})},J}function hd(y,T,W){var J=vm(y);return y.toSeq().map(function(ie,me){return J(T.call(W,ie,me,y))}).flatten(!0)}function JA(y,T){var W=Ga(y);return W.size=y.size&&y.size*2-1,W.__iterateUncached=function(J,ie){var me=this,Ve=0;return y.__iterate(function(je,et){return(!Ve||J(T,Ve++,me)!==!1)&&J(je,Ve++,me)!==!1},ie),Ve},W.__iteratorUncached=function(J,ie){var me=y.__iterator(re,ie),Ve=0,je;return new Te(function(){return(!je||Ve%2)&&(je=me.next(),je.done)?je:Ve%2?ye(J,Ve++,T):ye(J,Ve++,je.value,je)})},W}function ma(y,T,W){T||(T=wm);var J=c(y),ie=0,me=y.toSeq().map(function(Ve,je){return[je,Ve,ie++,W?W(Ve,je,y):Ve]}).toArray();return me.sort(function(Ve,je){return T(Ve[3],je[3])||Ve[2]-je[2]}).forEach(J?function(Ve,je){me[je].length=2}:function(Ve,je){me[je]=Ve[1]}),J?k(me):d(y)?De(me):we(me)}function pd(y,T,W){if(T||(T=wm),W){var J=y.toSeq().map(function(ie,me){return[ie,W(ie,me,y)]}).reduce(function(ie,me){return xm(T,ie[1],me[1])?me:ie});return J&&J[0]}else return y.reduce(function(ie,me){return xm(T,ie,me)?me:ie})}function xm(y,T,W){var J=y(W,T);return J===0&&W!==T&&(W==null||W!==W)||J>0}function ZA(y,T,W){var J=Ga(y);return J.size=new ne(W).map(function(ie){return ie.size}).min(),J.__iterate=function(ie,me){for(var Ve=this.__iterator(re,me),je,et=0;!(je=Ve.next()).done&&ie(je.value,et++,this)!==!1;);return et},J.__iteratorUncached=function(ie,me){var Ve=W.map(function(ot){return ot=i(ot),tt(me?ot.reverse():ot)}),je=0,et=!1;return new Te(function(){var ot;return et||(ot=Ve.map(function(ut){return ut.next()}),et=ot.some(function(ut){return ut.done})),et?We():ye(ie,je++,T.apply(null,ot.map(function(ut){return ut.value})))})},J}function cn(y,T){return Y(y)?T:y.constructor(T)}function $A(y){if(y!==Object(y))throw new TypeError("Expected [K, V] tuple: "+y)}function ef(y){return f0(y.size),I(y)}function vm(y){return c(y)?a:d(y)?o:s}function Ga(y){return Object.create((c(y)?k:d(y)?De:we).prototype)}function tf(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Ue.prototype.cacheResult.call(this)}function wm(y,T){return y>T?1:y<T?-1:0}function nf(y){var T=tt(y);if(!T){if(!Ie(y))throw new TypeError("Expected iterable or array-like: "+y);T=tt(i(y))}return T}r(Ui,M0);function Ui(y,T){var W,J=function(Ve){if(Ve instanceof J)return Ve;if(!(this instanceof J))return new J(Ve);if(!W){W=!0;var je=Object.keys(y);k2(ie,je),ie.size=je.length,ie._name=T,ie._keys=je,ie._defaultValues=y}this._map=jt(Ve)},ie=J.prototype=Object.create(Dr);return ie.constructor=J,J}Ui.prototype.toString=function(){return this.__toString(Vs(this)+" {","}")},Ui.prototype.has=function(y){return this._defaultValues.hasOwnProperty(y)},Ui.prototype.get=function(y,T){if(!this.has(y))return T;var W=this._defaultValues[y];return this._map?this._map.get(y,W):W},Ui.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var y=this.constructor;return y._empty||(y._empty=Cs(this,En()))},Ui.prototype.set=function(y,T){if(!this.has(y))throw new Error('Cannot set unknown key "'+y+'" on '+Vs(this));var W=this._map&&this._map.set(y,T);return this.__ownerID||W===this._map?this:Cs(this,W)},Ui.prototype.remove=function(y){if(!this.has(y))return this;var T=this._map&&this._map.remove(y);return this.__ownerID||T===this._map?this:Cs(this,T)},Ui.prototype.wasAltered=function(){return this._map.wasAltered()},Ui.prototype.__iterator=function(y,T){var W=this;return a(this._defaultValues).map(function(J,ie){return W.get(ie)}).__iterator(y,T)},Ui.prototype.__iterate=function(y,T){var W=this;return a(this._defaultValues).map(function(J,ie){return W.get(ie)}).__iterate(y,T)},Ui.prototype.__ensureOwner=function(y){if(y===this.__ownerID)return this;var T=this._map&&this._map.__ensureOwner(y);return y?Cs(this,T,y):(this.__ownerID=y,this._map=T,this)};var Dr=Ui.prototype;Dr[_]=Dr.remove,Dr.deleteIn=Dr.removeIn=c0.removeIn,Dr.merge=c0.merge,Dr.mergeWith=c0.mergeWith,Dr.mergeIn=c0.mergeIn,Dr.mergeDeep=c0.mergeDeep,Dr.mergeDeepWith=c0.mergeDeepWith,Dr.mergeDeepIn=c0.mergeDeepIn,Dr.setIn=c0.setIn,Dr.update=c0.update,Dr.updateIn=c0.updateIn,Dr.withMutations=c0.withMutations,Dr.asMutable=c0.asMutable,Dr.asImmutable=c0.asImmutable;function Cs(y,T,W){var J=Object.create(Object.getPrototypeOf(y));return J._map=T,J.__ownerID=W,J}function Vs(y){return y._name||y.constructor.name||"Record"}function k2(y,T){try{T.forEach(N2.bind(void 0,y))}catch{}}function N2(y,T){Object.defineProperty(y,T,{get:function(){return this.get(T)},set:function(W){Wt(this.__ownerID,"Cannot set on an immutable record."),this.set(T,W)}})}r(Fn,Xn);function Fn(y){return y==null?Sd():Ds(y)&&!f(y)?y:Sd().withMutations(function(T){var W=s(y);f0(W.size),W.forEach(function(J){return T.add(J)})})}Fn.of=function(){return this(arguments)},Fn.fromKeys=function(y){return this(a(y).keySeq())},Fn.prototype.toString=function(){return this.__toString("Set {","}")},Fn.prototype.has=function(y){return this._map.has(y)},Fn.prototype.add=function(y){return md(this,this._map.set(y,!0))},Fn.prototype.remove=function(y){return md(this,this._map.remove(y))},Fn.prototype.clear=function(){return md(this,this._map.clear())},Fn.prototype.union=function(){var y=t.call(arguments,0);return y=y.filter(function(T){return T.size!==0}),y.length===0?this:this.size===0&&!this.__ownerID&&y.length===1?this.constructor(y[0]):this.withMutations(function(T){for(var W=0;W<y.length;W++)s(y[W]).forEach(function(J){return T.add(J)})})},Fn.prototype.intersect=function(){var y=t.call(arguments,0);if(y.length===0)return this;y=y.map(function(W){return s(W)});var T=this;return this.withMutations(function(W){T.forEach(function(J){y.every(function(ie){return ie.includes(J)})||W.remove(J)})})},Fn.prototype.subtract=function(){var y=t.call(arguments,0);if(y.length===0)return this;y=y.map(function(W){return s(W)});var T=this;return this.withMutations(function(W){T.forEach(function(J){y.some(function(ie){return ie.includes(J)})&&W.remove(J)})})},Fn.prototype.merge=function(){return this.union.apply(this,arguments)},Fn.prototype.mergeWith=function(y){var T=t.call(arguments,1);return this.union.apply(this,T)},Fn.prototype.sort=function(y){return Ha(ma(this,y))},Fn.prototype.sortBy=function(y,T){return Ha(ma(this,T,y))},Fn.prototype.wasAltered=function(){return this._map.wasAltered()},Fn.prototype.__iterate=function(y,T){var W=this;return this._map.__iterate(function(J,ie){return y(ie,ie,W)},T)},Fn.prototype.__iterator=function(y,T){return this._map.map(function(W,J){return J}).__iterator(y,T)},Fn.prototype.__ensureOwner=function(y){if(y===this.__ownerID)return this;var T=this._map.__ensureOwner(y);return y?this.__make(T,y):(this.__ownerID=y,this._map=T,this)};function Ds(y){return!!(y&&y[ur])}Fn.isSet=Ds;var ur="@@__IMMUTABLE_SET__@@",ji=Fn.prototype;ji[ur]=!0,ji[_]=ji.remove,ji.mergeDeep=ji.merge,ji.mergeDeepWith=ji.mergeWith,ji.withMutations=c0.withMutations,ji.asMutable=c0.asMutable,ji.asImmutable=c0.asImmutable,ji.__empty=Sd,ji.__make=pl;function md(y,T){return y.__ownerID?(y.size=T.size,y._map=T,y):T===y._map?y:T.size===0?y.__empty():y.__make(T)}function pl(y,T){var W=Object.create(ji);return W.size=y?y.size:0,W._map=y,W.__ownerID=T,W}var ym;function Sd(){return ym||(ym=pl(En()))}r(Ha,Fn);function Ha(y){return y==null?_d():gd(y)?y:_d().withMutations(function(T){var W=s(y);f0(W.size),W.forEach(function(J){return T.add(J)})})}Ha.of=function(){return this(arguments)},Ha.fromKeys=function(y){return this(a(y).keySeq())},Ha.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function gd(y){return Ds(y)&&f(y)}Ha.isOrderedSet=gd;var zu=Ha.prototype;zu[E]=!0,zu.__empty=_d,zu.__make=Em;function Em(y,T){var W=Object.create(zu);return W.size=y?y.size:0,W._map=y,W.__ownerID=T,W}var Cm;function _d(){return Cm||(Cm=Em(Uu()))}r(nr,Vn);function nr(y){return y==null?vd():Vm(y)?y:vd().unshiftAll(y)}nr.of=function(){return this(arguments)},nr.prototype.toString=function(){return this.__toString("Stack [","]")},nr.prototype.get=function(y,T){var W=this._head;for(y=q(this,y);W&&y--;)W=W.next;return W?W.value:T},nr.prototype.peek=function(){return this._head&&this._head.value},nr.prototype.push=function(){if(arguments.length===0)return this;for(var y=this.size+arguments.length,T=this._head,W=arguments.length-1;W>=0;W--)T={value:arguments[W],next:T};return this.__ownerID?(this.size=y,this._head=T,this.__hash=void 0,this.__altered=!0,this):Yo(y,T)},nr.prototype.pushAll=function(y){if(y=o(y),y.size===0)return this;f0(y.size);var T=this.size,W=this._head;return y.reverse().forEach(function(J){T++,W={value:J,next:W}}),this.__ownerID?(this.size=T,this._head=W,this.__hash=void 0,this.__altered=!0,this):Yo(T,W)},nr.prototype.pop=function(){return this.slice(1)},nr.prototype.unshift=function(){return this.push.apply(this,arguments)},nr.prototype.unshiftAll=function(y){return this.pushAll(y)},nr.prototype.shift=function(){return this.pop.apply(this,arguments)},nr.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):vd()},nr.prototype.slice=function(y,T){if(ee(y,T,this.size))return this;var W=ce(y,this.size),J=U(T,this.size);if(J!==this.size)return Vn.prototype.slice.call(this,y,T);for(var ie=this.size-W,me=this._head;W--;)me=me.next;return this.__ownerID?(this.size=ie,this._head=me,this.__hash=void 0,this.__altered=!0,this):Yo(ie,me)},nr.prototype.__ensureOwner=function(y){return y===this.__ownerID?this:y?Yo(this.size,this._head,y,this.__hash):(this.__ownerID=y,this.__altered=!1,this)},nr.prototype.__iterate=function(y,T){if(T)return this.reverse().__iterate(y);for(var W=0,J=this._head;J&&y(J.value,W++,this)!==!1;)J=J.next;return W},nr.prototype.__iterator=function(y,T){if(T)return this.reverse().__iterator(y);var W=0,J=this._head;return new Te(function(){if(J){var ie=J.value;return J=J.next,ye(y,W++,ie)}return We()})};function Vm(y){return!!(y&&y[ml])}nr.isStack=Vm;var ml="@@__IMMUTABLE_STACK__@@",yi=nr.prototype;yi[ml]=!0,yi.withMutations=c0.withMutations,yi.asMutable=c0.asMutable,yi.asImmutable=c0.asImmutable,yi.wasAltered=c0.wasAltered;function Yo(y,T,W,J){var ie=Object.create(yi);return ie.size=y,ie._head=T,ie.__ownerID=W,ie.__hash=J,ie.__altered=!1,ie}var xd;function vd(){return xd||(xd=Yo(0))}function Sr(y,T){var W=function(J){y.prototype[J]=T[J]};return Object.keys(T).forEach(W),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(T).forEach(W),y}i.Iterator=Te,Sr(i,{toArray:function(){f0(this.size);var y=new Array(this.size||0);return this.valueSeq().__iterate(function(T,W){y[W]=T}),y},toIndexedSeq:function(){return new Ko(this)},toJS:function(){return this.toSeq().map(function(y){return y&&typeof y.toJS=="function"?y.toJS():y}).__toJS()},toJSON:function(){return this.toSeq().map(function(y){return y&&typeof y.toJSON=="function"?y.toJSON():y}).__toJS()},toKeyedSeq:function(){return new oi(this,!0)},toMap:function(){return jt(this.toKeyedSeq())},toObject:function(){f0(this.size);var y={};return this.__iterate(function(T,W){y[W]=T}),y},toOrderedMap:function(){return Nn(this.toKeyedSeq())},toOrderedSet:function(){return Ha(c(this)?this.valueSeq():this)},toSet:function(){return Fn(c(this)?this.valueSeq():this)},toSetSeq:function(){return new ys(this)},toSeq:function(){return d(this)?this.toIndexedSeq():c(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return nr(c(this)?this.valueSeq():this)},toList:function(){return N0(c(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(y,T){return this.size===0?y+T:y+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+T},concat:function(){var y=t.call(arguments,0);return cn(this,QA(this,y))},includes:function(y){return this.some(function(T){return ht(T,y)})},entries:function(){return this.__iterator(oe)},every:function(y,T){f0(this.size);var W=!0;return this.__iterate(function(J,ie,me){if(!y.call(T,J,ie,me))return W=!1,!1}),W},filter:function(y,T){return cn(this,na(this,y,T,!0))},find:function(y,T,W){var J=this.findEntry(y,T);return J?J[1]:W},findEntry:function(y,T){var W;return this.__iterate(function(J,ie,me){if(y.call(T,J,ie,me))return W=[ie,J],!1}),W},findLastEntry:function(y,T){return this.toSeq().reverse().findEntry(y,T)},forEach:function(y,T){return f0(this.size),this.__iterate(T?y.bind(T):y)},join:function(y){f0(this.size),y=y!==void 0?""+y:",";var T="",W=!0;return this.__iterate(function(J){W?W=!1:T+=y,T+=J!=null?J.toString():""}),T},keys:function(){return this.__iterator(G)},map:function(y,T){return cn(this,gm(this,y,T))},reduce:function(y,T,W){f0(this.size);var J,ie;return arguments.length<2?ie=!0:J=T,this.__iterate(function(me,Ve,je){ie?(ie=!1,J=me):J=y.call(W,J,me,Ve,je)}),J},reduceRight:function(y,T,W){var J=this.toKeyedSeq().reverse();return J.reduce.apply(J,arguments)},reverse:function(){return cn(this,fd(this,!0))},slice:function(y,T){return cn(this,Hu(this,y,T,!0))},some:function(y,T){return!this.every(wd(y),T)},sort:function(y){return cn(this,ma(this,y))},values:function(){return this.__iterator(re)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(y,T){return I(y?this.toSeq().filter(y,T):this)},countBy:function(y,T){return I2(this,y,T)},equals:function(y){return Nt(this,y)},entrySeq:function(){var y=this;if(y._cache)return new ne(y._cache);var T=y.toSeq().map(Dm).toIndexedSeq();return T.fromEntrySeq=function(){return y.toSeq()},T},filterNot:function(y,T){return this.filter(wd(y),T)},findLast:function(y,T,W){return this.toKeyedSeq().reverse().find(y,T,W)},first:function(){return this.find(P)},flatMap:function(y,T){return cn(this,hd(this,y,T))},flatten:function(y){return cn(this,ja(this,y,!0))},fromEntrySeq:function(){return new Es(this)},get:function(y,T){return this.find(function(W,J){return ht(J,y)},void 0,T)},getIn:function(y,T){for(var W=this,J=nf(y),ie;!(ie=J.next()).done;){var me=ie.value;if(W=W&&W.get?W.get(me,V):V,W===V)return T}return W},groupBy:function(y,T){return O2(this,y,T)},has:function(y){return this.get(y,V)!==V},hasIn:function(y){return this.getIn(y,V)!==V},isSubset:function(y){return y=typeof y.includes=="function"?y:i(y),this.every(function(T){return y.includes(T)})},isSuperset:function(y){return y=typeof y.isSubset=="function"?y:i(y),y.isSubset(this)},keySeq:function(){return this.toSeq().map(U2).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(y){return pd(this,y)},maxBy:function(y,T){return pd(this,T,y)},min:function(y){return pd(this,y?rf(y):Sa)},minBy:function(y,T){return pd(this,T?rf(T):Sa,y)},rest:function(){return this.slice(1)},skip:function(y){return this.slice(Math.max(0,y))},skipLast:function(y){return cn(this,this.toSeq().reverse().skip(y).reverse())},skipWhile:function(y,T){return cn(this,go(this,y,T,!0))},skipUntil:function(y,T){return this.skipWhile(wd(y),T)},sortBy:function(y,T){return cn(this,ma(this,T,y))},take:function(y){return this.slice(0,Math.max(0,y))},takeLast:function(y){return cn(this,this.toSeq().reverse().take(y).reverse())},takeWhile:function(y,T){return cn(this,_m(this,y,T))},takeUntil:function(y,T){return this.takeWhile(wd(y),T)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Fm(this))}});var Yn=i.prototype;Yn[m]=!0,Yn[Be]=Yn.values,Yn.__toJS=Yn.toArray,Yn.__toStringMapper=yd,Yn.inspect=Yn.toSource=function(){return this.toString()},Yn.chain=Yn.flatMap,Yn.contains=Yn.includes,function(){try{Object.defineProperty(Yn,"length",{get:function(){if(!i.noLengthWarning){var y;try{throw new Error}catch(T){y=T.stack}if(y.indexOf("_wrapObject")===-1)return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+y),this.size}}})}catch{}}(),Sr(a,{flip:function(){return cn(this,Gu(this))},findKey:function(y,T){var W=this.findEntry(y,T);return W&&W[0]},findLastKey:function(y,T){return this.toSeq().reverse().findKey(y,T)},keyOf:function(y){return this.findKey(function(T){return ht(T,y)})},lastKeyOf:function(y){return this.findLastKey(function(T){return ht(T,y)})},mapEntries:function(y,T){var W=this,J=0;return cn(this,this.toSeq().map(function(ie,me){return y.call(T,[me,ie],J++,W)}).fromEntrySeq())},mapKeys:function(y,T){var W=this;return cn(this,this.toSeq().flip().map(function(J,ie){return y.call(T,J,ie,W)}).flip())}});var Sl=a.prototype;Sl[g]=!0,Sl[Be]=Yn.entries,Sl.__toJS=Yn.toObject,Sl.__toStringMapper=function(y,T){return JSON.stringify(T)+": "+yd(y)},Sr(o,{toKeyedSeq:function(){return new oi(this,!1)},filter:function(y,T){return cn(this,na(this,y,T,!1))},findIndex:function(y,T){var W=this.findEntry(y,T);return W?W[0]:-1},indexOf:function(y){var T=this.toKeyedSeq().keyOf(y);return T===void 0?-1:T},lastIndexOf:function(y){var T=this.toKeyedSeq().reverse().keyOf(y);return T===void 0?-1:T},reverse:function(){return cn(this,fd(this,!1))},slice:function(y,T){return cn(this,Hu(this,y,T,!1))},splice:function(y,T){var W=arguments.length;if(T=Math.max(T|0,0),W===0||W===2&&!T)return this;y=ce(y,y<0?this.count():this.size);var J=this.slice(0,y);return cn(this,W===1?J:J.concat(z(arguments,2),this.slice(y+T)))},findLastIndex:function(y,T){var W=this.toKeyedSeq().findLastKey(y,T);return W===void 0?-1:W},first:function(){return this.get(0)},flatten:function(y){return cn(this,ja(this,y,!1))},get:function(y,T){return y=q(this,y),y<0||this.size===1/0||this.size!==void 0&&y>this.size?T:this.find(function(W,J){return J===y},void 0,T)},has:function(y){return y=q(this,y),y>=0&&(this.size!==void 0?this.size===1/0||y<this.size:this.indexOf(y)!==-1)},interpose:function(y){return cn(this,JA(this,y))},interleave:function(){var y=[this].concat(z(arguments)),T=ZA(this.toSeq(),De.of,y),W=T.flatten(!0);return T.size&&(W.size=T.size*y.length),cn(this,W)},last:function(){return this.get(-1)},skipWhile:function(y,T){return cn(this,go(this,y,T,!1))},zip:function(){var y=[this].concat(z(arguments));return cn(this,ZA(this,gl,y))},zipWith:function(y){var T=z(arguments);return T[0]=this,cn(this,ZA(this,y,T))}}),o.prototype[x]=!0,o.prototype[E]=!0,Sr(s,{get:function(y,T){return this.has(y)?y:T},includes:function(y){return this.has(y)},keySeq:function(){return this.valueSeq()}}),s.prototype.has=Yn.includes,Sr(k,a.prototype),Sr(De,o.prototype),Sr(we,s.prototype),Sr(M0,a.prototype),Sr(Vn,o.prototype),Sr(Xn,s.prototype);function U2(y,T){return T}function Dm(y,T){return[T,y]}function wd(y){return function(){return!y.apply(this,arguments)}}function rf(y){return function(){return-y.apply(this,arguments)}}function yd(y){return typeof y=="string"?JSON.stringify(y):y}function gl(){return z(arguments)}function Sa(y,T){return y<T?1:y>T?-1:0}function Fm(y){if(y.size===1/0)return 0;var T=f(y),W=c(y),J=T?1:0,ie=y.__iterate(W?T?function(me,Ve){J=31*J+bm($t(me),$t(Ve))|0}:function(me,Ve){J=J+bm($t(me),$t(Ve))|0}:T?function(me){J=31*J+$t(me)|0}:function(me){J=J+$t(me)|0});return Tm(ie,J)}function Tm(y,T){return T=ki(T,3432918353),T=ki(T<<15|T>>>-15,461845907),T=ki(T<<13|T>>>-13,5),T=(T+3864292196|0)^y,T=ki(T^T>>>16,2246822507),T=ki(T^T>>>13,3266489909),T=ta(T^T>>>16),T}function bm(y,T){return y^T+2654435769+(y<<6)+(y>>2)|0}var j2={Iterable:i,Seq:Ue,Collection:v0,Map:jt,OrderedMap:Nn,List:N0,Stack:nr,Set:Fn,OrderedSet:Ha,Record:Ui,Range:_t,Repeat:Je,is:ht,fromJS:gt};return j2})})(q0);var mse=q0.exports,Sse=mse.OrderedMap,gse={createFromArray:function(e){return Sse(e.map(function(t){return[t.getKey(),t]}))}},sm=gse;function _se(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var HV=q0.exports,x4=HV.Map,v4=HV.OrderedSet,xse=HV.Record,RN=v4(),LN={style:RN,entity:null},vse=xse(LN),zV=function(n){_se(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.getStyle=function(){return this.get("style")},t.getEntity=function(){return this.get("entity")},t.hasStyle=function(i){return this.getStyle().includes(i)},e.applyStyle=function(i,a){var o=i.set("style",i.getStyle().add(a));return e.create(o)},e.removeStyle=function(i,a){var o=i.set("style",i.getStyle().remove(a));return e.create(o)},e.applyEntity=function(i,a){var o=i.getEntity()===a?i:i.set("entity",a);return e.create(o)},e.create=function(i){if(!i)return WV;var a={style:RN,entity:null},o=x4(a).merge(i),s=Yv.get(o);if(s)return s;var l=new e(o);return Yv=Yv.set(o,l),l},e.fromJS=function(i){var a=i.style,o=i.entity;return new e({style:Array.isArray(a)?v4(a):a,entity:Array.isArray(o)?v4(o):o})},e}(vse),WV=new zV,Yv=x4([[x4(LN),WV]]);zV.EMPTY=WV;var mo=zV;function wse(n,e,t,r){if(!!n.size){var i=0;n.reduce(function(a,o,s){return e(a,o)||(t(a)&&r(i,s),i=s),o}),t(n.last())&&r(i,n.count())}}var lm=wse;function yse(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Ese=mo,nR=lm,um=q0.exports,BN=um.List,Cse=um.Map,Vse=um.OrderedSet,Dse=um.Record,Fse=um.Repeat,Tse=Vse(),bse={key:"",type:"unstyled",text:"",characterList:BN(),depth:0,data:Cse()},Pse=Dse(bse),Rse=function(e){if(!e)return e;var t=e.characterList,r=e.text;return r&&!t&&(e.characterList=BN(Fse(Ese.EMPTY,r.length))),e},Lse=function(n){yse(e,n);function e(r){return n.call(this,Rse(r))||this}var t=e.prototype;return t.getKey=function(){return this.get("key")},t.getType=function(){return this.get("type")},t.getText=function(){return this.get("text")},t.getCharacterList=function(){return this.get("characterList")},t.getLength=function(){return this.getText().length},t.getDepth=function(){return this.get("depth")},t.getData=function(){return this.get("data")},t.getInlineStyleAt=function(i){var a=this.getCharacterList().get(i);return a?a.getStyle():Tse},t.getEntityAt=function(i){var a=this.getCharacterList().get(i);return a?a.getEntity():null},t.findStyleRanges=function(i,a){nR(this.getCharacterList(),Bse,i,a)},t.findEntityRanges=function(i,a){nR(this.getCharacterList(),Mse,i,a)},e}(Pse);function Bse(n,e){return n.getStyle()===e.getStyle()}function Mse(n,e){return n.getEntity()===e.getEntity()}var sd=Lse;function Ise(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Ose=mo,rR=lm,cm=q0.exports,w4=cm.List,kse=cm.Map,Nse=cm.OrderedSet,Use=cm.Record,jse=cm.Repeat,Gse=Nse(),iR={parent:null,characterList:w4(),data:kse(),depth:0,key:"",text:"",type:"unstyled",children:w4(),prevSibling:null,nextSibling:null},Hse=function(e,t){return e.getStyle()===t.getStyle()},zse=function(e,t){return e.getEntity()===t.getEntity()},Wse=function(e){if(!e)return e;var t=e.characterList,r=e.text;return r&&!t&&(e.characterList=w4(jse(Ose.EMPTY,r.length))),e},Xse=function(n){Ise(e,n);function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:iR;return n.call(this,Wse(r))||this}var t=e.prototype;return t.getKey=function(){return this.get("key")},t.getType=function(){return this.get("type")},t.getText=function(){return this.get("text")},t.getCharacterList=function(){return this.get("characterList")},t.getLength=function(){return this.getText().length},t.getDepth=function(){return this.get("depth")},t.getData=function(){return this.get("data")},t.getInlineStyleAt=function(i){var a=this.getCharacterList().get(i);return a?a.getStyle():Gse},t.getEntityAt=function(i){var a=this.getCharacterList().get(i);return a?a.getEntity():null},t.getChildKeys=function(){return this.get("children")},t.getParentKey=function(){return this.get("parent")},t.getPrevSiblingKey=function(){return this.get("prevSibling")},t.getNextSiblingKey=function(){return this.get("nextSibling")},t.findStyleRanges=function(i,a){rR(this.getCharacterList(),Hse,i,a)},t.findEntityRanges=function(i,a){rR(this.getCharacterList(),zse,i,a)},e}(Use(iR)),So=Xse,aR=mo,Kse=q0.exports,Yse=Kse.Map,qse={add:function(e,t,r){return oR(e,t,r,!0)},remove:function(e,t,r){return oR(e,t,r,!1)}};function oR(n,e,t,r){var i=n.getBlockMap(),a=e.getStartKey(),o=e.getStartOffset(),s=e.getEndKey(),l=e.getEndOffset(),c=i.skipUntil(function(d,h){return h===a}).takeUntil(function(d,h){return h===s}).concat(Yse([[s,i.get(s)]])).map(function(d,h){var f,m;a===s?(f=o,m=l):(f=h===a?o:0,m=h===s?l:d.getLength());for(var g=d.getCharacterList(),x;f<m;)x=g.get(f),g=g.set(f,r?aR.applyStyle(x,t):aR.removeStyle(x,t)),f++;return d.set("characterList",g)});return n.merge({blockMap:i.merge(c),selectionBefore:e,selectionAfter:e})}var Qse=qse,Jse=mo;function Zse(n,e,t,r){for(var i=e,a=n.getCharacterList();i<t;)a=a.set(i,Jse.applyEntity(a.get(i),r)),i++;return n.set("characterList",a)}var $se=Zse,ele=$se,tle=q0.exports;function nle(n,e,t){var r=n.getBlockMap(),i=e.getStartKey(),a=e.getStartOffset(),o=e.getEndKey(),s=e.getEndOffset(),l=r.skipUntil(function(c,d){return d===i}).takeUntil(function(c,d){return d===o}).toOrderedMap().merge(tle.OrderedMap([[o,r.get(o)]])).map(function(c,d){var h=d===i?a:0,f=d===o?s:c.getLength();return ele(c,h,f,t)});return n.merge({blockMap:r.merge(l),selectionBefore:e,selectionAfter:e})}var rle=nle,ile={getRemovalRange:function(e,t,r,i,a){var o=r.split(" ");o=o.map(function(E,_){if(a==="forward"){if(_>0)return" "+E}else if(_<o.length-1)return E+" ";return E});for(var s=i,l,c,d=null,h=null,f=0;f<o.length;f++){if(c=o[f],l=s+c.length,e<l&&s<t)d!==null||(d=s),h=l;else if(d!==null)break;s=l}var m=i+r.length,g=d===i,x=h===m;return(!g&&x||g&&!x)&&(a==="forward"?h!==m&&h++:d!==i&&d--),{start:d,end:h}}},ale=ile;function ole(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];if(!n){var a;if(e===void 0)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;a=new Error(e.replace(/%s/g,function(){return String(r[o++])})),a.name="Invariant Violation"}throw a.framesToPop=1,a}}var rn=ole,sle=rn;function lle(n,e){var t=[];return n.findEntityRanges(function(r){return r.getEntity()===e},function(r,i){t.push({start:r,end:i})}),t.length||sle(!1),t}var ule=lle,cle=ale,dle=ule,Ale=rn;function fle(n,e,t,r,i){var a=r.getStartOffset(),o=r.getEndOffset(),s=e.getEntityAt(a),l=t.getEntityAt(o-1);if(!s&&!l)return r;var c=r;if(s&&s===l)c=zf(n,e,c,i,s,!0,!0);else if(s&&l){var d=zf(n,e,c,i,s,!1,!0),h=zf(n,t,c,i,l,!1,!1);c=c.merge({anchorOffset:d.getAnchorOffset(),focusOffset:h.getFocusOffset(),isBackward:!1})}else if(s){var f=zf(n,e,c,i,s,!1,!0);c=c.merge({anchorOffset:f.getStartOffset(),isBackward:!1})}else if(l){var m=zf(n,t,c,i,l,!1,!1);c=c.merge({focusOffset:m.getEndOffset(),isBackward:!1})}return c}function zf(n,e,t,r,i,a,o){var s=t.getStartOffset(),l=t.getEndOffset(),c=n.__get(i),d=c.getMutability(),h=o?s:l;if(d==="MUTABLE")return t;var f=dle(e,i).filter(function(x){return h<=x.end&&h>=x.start});f.length!=1&&Ale(!1);var m=f[0];if(d==="IMMUTABLE")return t.merge({anchorOffset:m.start,focusOffset:m.end,isBackward:!1});a||(o?l=m.end:s=m.start);var g=cle.getRemovalRange(s,l,e.getText().slice(m.start,m.end),m.start,r);return t.merge({anchorOffset:g.start,focusOffset:g.end,isBackward:!1})}var hle=fle,sR={},ple=Math.pow(2,24);function mle(){for(var n;n===void 0||sR.hasOwnProperty(n)||!isNaN(+n);)n=Math.floor(Math.random()*ple).toString(32);return sR[n]=!0,n}var ws=mle,Sle=So,MN=ws,gle=q0.exports,IN=gle.OrderedMap,_le=function(e){var t={},r;return IN(e.withMutations(function(i){i.forEach(function(a,o){var s=a.getKey(),l=a.getNextSiblingKey(),c=a.getPrevSiblingKey(),d=a.getChildKeys(),h=a.getParentKey(),f=MN();if(t[s]=f,l){var m=i.get(l);m?i.setIn([l,"prevSibling"],f):i.setIn([s,"nextSibling"],null)}if(c){var g=i.get(c);g?i.setIn([c,"nextSibling"],f):i.setIn([s,"prevSibling"],null)}if(h&&i.get(h)){var x=i.get(h),E=x.getChildKeys();i.setIn([h,"children"],E.set(E.indexOf(a.getKey()),f))}else i.setIn([s,"parent"],null),r&&(i.setIn([r.getKey(),"nextSibling"],f),i.setIn([s,"prevSibling"],t[r.getKey()])),r=i.get(s);d.forEach(function(_){var v=i.get(_);v?i.setIn([_,"parent"],f):i.setIn([s,"children"],a.getChildKeys().filter(function(C){return C!==_}))})})}).toArray().map(function(i){return[t[i.getKey()],i.set("key",t[i.getKey()])]}))},xle=function(e){return IN(e.toArray().map(function(t){var r=MN();return[r,t.set("key",r)]}))},vle=function(e){var t=e.first()instanceof Sle;return t?_le(e):xle(e)},ON=vle,wle=mo,yle=lm,Ele=rn;function Cle(n,e){var t=n.getBlockMap(),r=n.getEntityMap(),i={},a=e.getStartKey(),o=e.getStartOffset(),s=t.get(a),l=lR(r,s,o);l!==s&&(i[a]=l);var c=e.getEndKey(),d=e.getEndOffset(),h=t.get(c);a===c&&(h=l);var f=lR(r,h,d);return f!==h&&(i[c]=f),Object.keys(i).length?n.merge({blockMap:t.merge(i),selectionAfter:e}):n.set("selectionAfter",e)}function Vle(n,e,t){var r;return yle(n,function(i,a){return i.getEntity()===a.getEntity()},function(i){return i.getEntity()===e},function(i,a){i<=t&&a>=t&&(r={start:i,end:a})}),typeof r!="object"&&Ele(!1),r}function lR(n,e,t){var r=e.getCharacterList(),i=t>0?r.get(t-1):void 0,a=t<r.count()?r.get(t):void 0,o=i?i.getEntity():void 0,s=a?a.getEntity():void 0;if(s&&s===o){var l=n.__get(s);if(l.getMutability()!=="MUTABLE"){for(var c=Vle(r,s,t),d=c.start,h=c.end,f;d<h;)f=r.get(d),r=r.set(d,wle.applyEntity(f,null)),d++;return e.set("characterList",r)}}return e}var kN=Cle,Dle=ON,Fle=kN,Tle=function(e,t){var r=t.getStartKey(),i=t.getStartOffset(),a=t.getEndKey(),o=t.getEndOffset(),s=Fle(e,t),l=s.getBlockMap(),c=l.keySeq(),d=c.indexOf(r),h=c.indexOf(a)+1;return Dle(l.slice(d,h).map(function(f,m){var g=f.getText(),x=f.getCharacterList();return r===a?f.merge({text:g.slice(i,o),characterList:x.slice(i,o)}):m===r?f.merge({text:g.slice(i),characterList:x.slice(i)}):m===a?f.merge({text:g.slice(0,o),characterList:x.slice(0,o)}):f}))},p2=Tle;function ble(n,e,t){var r=n;if(t===r.count())e.forEach(function(o){r=r.push(o)});else if(t===0)e.reverse().forEach(function(o){r=r.unshift(o)});else{var i=r.slice(0,t),a=r.slice(t);r=i.concat(e,a).toList()}return r}var NN=ble,Ple=sm,UN=So,Rle=q0.exports,Lle=NN,uR=rn,Ble=ON,Mle=Rle.List,Ile=function(e,t,r,i,a,o){var s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:"REPLACE_WITH_NEW_DATA",l=r.get(a),c=l.getText(),d=l.getCharacterList(),h=a,f=o+i.getText().length,m=null;switch(s){case"MERGE_OLD_DATA_TO_NEW_DATA":m=i.getData().merge(l.getData());break;case"REPLACE_WITH_NEW_DATA":m=i.getData();break}var g=l.getType();c&&g==="unstyled"&&(g=i.getType());var x=l.merge({text:c.slice(0,o)+i.getText()+c.slice(o),characterList:Lle(d,i.getCharacterList(),o),type:g,data:m});return e.merge({blockMap:r.set(a,x),selectionBefore:t,selectionAfter:t.merge({anchorKey:h,anchorOffset:f,focusKey:h,focusOffset:f,isBackward:!1})})},Ole=function(e,t,r){var i=e.getText(),a=e.getCharacterList(),o=i.slice(0,t),s=a.slice(0,t),l=r.first();return e.merge({text:o+l.getText(),characterList:s.concat(l.getCharacterList()),type:o?e.getType():l.getType(),data:l.getData()})},kle=function(e,t,r){var i=e.getText(),a=e.getCharacterList(),o=i.length,s=i.slice(t,o),l=a.slice(t,o),c=r.last();return c.merge({text:c.getText()+s,characterList:c.getCharacterList().concat(l),data:c.getData()})},Nle=function(e,t){var r=e.getKey(),i=e,a=[];for(t.get(r)&&a.push(r);i&&i.getNextSiblingKey();){var o=i.getNextSiblingKey();if(!o)break;a.push(o),i=t.get(o)}return a},Ule=function(e,t,r,i){return e.withMutations(function(a){var o=r.getKey(),s=i.getKey(),l=r.getNextSiblingKey(),c=r.getParentKey(),d=Nle(i,e),h=d[d.length-1];if(a.get(s)?(a.setIn([o,"nextSibling"],s),a.setIn([s,"prevSibling"],o)):(a.setIn([o,"nextSibling"],i.getNextSiblingKey()),a.setIn([i.getNextSiblingKey(),"prevSibling"],o)),a.setIn([h,"nextSibling"],l),l&&a.setIn([l,"prevSibling"],h),d.forEach(function(_){return a.setIn([_,"parent"],c)}),c){var f=e.get(c),m=f.getChildKeys(),g=m.indexOf(o),x=g+1,E=m.toArray();E.splice.apply(E,[x,0].concat(d)),a.setIn([c,"children"],Mle(E))}})},jle=function(e,t,r,i,a,o){var s=r.first()instanceof UN,l=[],c=i.size,d=r.get(a),h=i.first(),f=i.last(),m=f.getLength(),g=f.getKey(),x=s&&(!d.getChildKeys().isEmpty()||!h.getChildKeys().isEmpty());r.forEach(function(_,v){if(v!==a){l.push(_);return}x?l.push(_):l.push(Ole(_,o,i)),i.slice(x?0:1,c-1).forEach(function(C){return l.push(C)}),l.push(kle(_,o,i))});var E=Ple.createFromArray(l);return s&&(E=Ule(E,r,d,h)),e.merge({blockMap:E,selectionBefore:t,selectionAfter:t.merge({anchorKey:g,anchorOffset:m,focusKey:g,focusOffset:m,isBackward:!1})})},Gle=function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"REPLACE_WITH_NEW_DATA";t.isCollapsed()||uR(!1);var a=e.getBlockMap(),o=Ble(r),s=t.getStartKey(),l=t.getStartOffset(),c=a.get(s);return c instanceof UN&&(c.getChildKeys().isEmpty()||uR(!1)),o.size===1?Ile(e,t,a,o.first(),s,l,i):jle(e,t,a,o,s,l)},Hle=Gle,zle=q0.exports,Wle=NN,Xle=rn,Kle=zle.Repeat;function Yle(n,e,t,r){e.isCollapsed()||Xle(!1);var i=null;if(t!=null&&(i=t.length),i==null||i===0)return n;var a=n.getBlockMap(),o=e.getStartKey(),s=e.getStartOffset(),l=a.get(o),c=l.getText(),d=l.merge({text:c.slice(0,s)+t+c.slice(s,l.getLength()),characterList:Wle(l.getCharacterList(),Kle(r,i).toList(),s)}),h=s+i;return n.merge({blockMap:a.set(o,d),selectionAfter:e.merge({anchorOffset:h,focusOffset:h})})}var qle=Yle,Qle=q0.exports,Jle=Qle.Map;function Zle(n,e,t){var r=e.getStartKey(),i=e.getEndKey(),a=n.getBlockMap(),o=a.toSeq().skipUntil(function(s,l){return l===r}).takeUntil(function(s,l){return l===i}).concat(Jle([[i,a.get(i)]])).map(t);return n.merge({blockMap:a.merge(o),selectionBefore:e,selectionAfter:e})}var jN=Zle,$le=So,eue=function(e,t){var r=e instanceof $le;if(!r)return null;var i=e.getNextSiblingKey();if(i)return i;var a=e.getParentKey();if(!a)return null;for(var o=t.get(a);o&&!o.getNextSiblingKey();){var s=o.getParentKey();o=s?t.get(s):null}return o?o.getNextSiblingKey():null},GN=eue,tue=So,y4=GN,HN=q0.exports;HN.List;var cR=HN.Map,aa=function(e,t,r){if(!!e){var i=t.get(e);!i||t.set(e,r(i))}},Q8=function(e,t){var r=[];if(!e)return r;for(var i=t.get(e);i&&i.getParentKey();){var a=i.getParentKey();a&&r.push(a),i=a?t.get(a):null}return r},nue=function(e,t){var r=[];if(!e)return r;for(var i=y4(e,t);i&&t.get(i);){var a=t.get(i);r.push(i),i=a.getParentKey()?y4(a,t):null}return r},f1=function(e,t,r){if(!e)return null;for(var i=r.get(e.getKey()).getNextSiblingKey();i&&!t.get(i);)i=r.get(i).getNextSiblingKey()||null;return i},h1=function(e,t,r){if(!e)return null;for(var i=r.get(e.getKey()).getPrevSiblingKey();i&&!t.get(i);)i=r.get(i).getPrevSiblingKey()||null;return i},rue=function(e,t,r,i){return e.withMutations(function(a){if(aa(t.getKey(),a,function(d){return d.merge({nextSibling:f1(d,a,i),prevSibling:h1(d,a,i)})}),aa(r.getKey(),a,function(d){return d.merge({nextSibling:f1(d,a,i),prevSibling:h1(d,a,i)})}),Q8(t.getKey(),i).forEach(function(d){return aa(d,a,function(h){return h.merge({children:h.getChildKeys().filter(function(f){return a.get(f)}),nextSibling:f1(h,a,i),prevSibling:h1(h,a,i)})})}),aa(t.getNextSiblingKey(),a,function(d){return d.merge({prevSibling:t.getPrevSiblingKey()})}),aa(t.getPrevSiblingKey(),a,function(d){return d.merge({nextSibling:f1(d,a,i)})}),aa(r.getNextSiblingKey(),a,function(d){return d.merge({prevSibling:h1(d,a,i)})}),aa(r.getPrevSiblingKey(),a,function(d){return d.merge({nextSibling:r.getNextSiblingKey()})}),Q8(r.getKey(),i).forEach(function(d){aa(d,a,function(h){return h.merge({children:h.getChildKeys().filter(function(f){return a.get(f)}),nextSibling:f1(h,a,i),prevSibling:h1(h,a,i)})})}),nue(r,i).forEach(function(d){return aa(d,a,function(h){return h.merge({nextSibling:f1(h,a,i),prevSibling:h1(h,a,i)})})}),e.get(t.getKey())==null&&e.get(r.getKey())!=null&&r.getParentKey()===t.getKey()&&r.getPrevSiblingKey()==null){var o=t.getPrevSiblingKey();aa(r.getKey(),a,function(d){return d.merge({prevSibling:o})}),aa(o,a,function(d){return d.merge({nextSibling:r.getKey()})});var s=o?e.get(o):null,l=s?s.getParentKey():null;if(t.getChildKeys().forEach(function(d){aa(d,a,function(h){return h.merge({parent:l})})}),l!=null){var c=e.get(l);aa(l,a,function(d){return d.merge({children:c.getChildKeys().concat(t.getChildKeys())})})}aa(t.getChildKeys().find(function(d){var h=e.get(d);return h.getNextSiblingKey()===null}),a,function(d){return d.merge({nextSibling:t.getNextSiblingKey()})})}})},iue=function(e,t){if(t.isCollapsed())return e;var r=e.getBlockMap(),i=t.getStartKey(),a=t.getStartOffset(),o=t.getEndKey(),s=t.getEndOffset(),l=r.get(i),c=r.get(o),d=l instanceof tue,h=[];if(d){var f=c.getChildKeys(),m=Q8(o,r);c.getNextSiblingKey()&&(h=h.concat(m)),f.isEmpty()||(h=h.concat(m.concat([o]))),h=h.concat(Q8(y4(c,r),r))}var g;l===c?g=aue(l.getCharacterList(),a,s):g=l.getCharacterList().slice(0,a).concat(c.getCharacterList().slice(s));var x=l.merge({text:l.getText().slice(0,a)+c.getText().slice(s),characterList:g}),E=d&&a===0&&s===0&&c.getParentKey()===i&&c.getPrevSiblingKey()==null,_=E?cR([[i,null]]):r.toSeq().skipUntil(function(C,D){return D===i}).takeUntil(function(C,D){return D===o}).filter(function(C,D){return h.indexOf(D)===-1}).concat(cR([[o,null]])).map(function(C,D){return D===i?x:null}),v=r.merge(_).filter(function(C){return!!C});return d&&l!==c&&(v=rue(v,l,c,r)),e.merge({blockMap:v,selectionBefore:t,selectionAfter:t.merge({anchorKey:i,anchorOffset:a,focusKey:i,focusOffset:a,isBackward:!1})})},aue=function(e,t,r){if(t===0)for(;t<r;)e=e.shift(),t++;else if(r===e.count())for(;r>t;)e=e.pop(),r--;else{var i=e.slice(0,t),a=e.slice(r);e=i.concat(a).toList()}return e},oue=iue,sue=So,lue=ws,zN=q0.exports,dR=rn,uue=jN,cue=zN.List,due=zN.Map,rg=function(e,t,r){if(!!e){var i=t.get(e);!i||t.set(e,r(i))}},Aue=function(e,t,r){return e.withMutations(function(i){var a=t.getKey(),o=r.getKey();rg(t.getParentKey(),i,function(s){var l=s.getChildKeys(),c=l.indexOf(a)+1,d=l.toArray();return d.splice(c,0,o),s.merge({children:cue(d)})}),rg(t.getNextSiblingKey(),i,function(s){return s.merge({prevSibling:o})}),rg(a,i,function(s){return s.merge({nextSibling:o})}),rg(o,i,function(s){return s.merge({prevSibling:a})})})},fue=function(e,t){t.isCollapsed()||dR(!1);var r=t.getAnchorKey(),i=e.getBlockMap(),a=i.get(r),o=a.getText();if(!o){var s=a.getType();if(s==="unordered-list-item"||s==="ordered-list-item")return uue(e,t,function(_){return _.merge({type:"unstyled",depth:0})})}var l=t.getAnchorOffset(),c=a.getCharacterList(),d=lue(),h=a instanceof sue,f=a.merge({text:o.slice(0,l),characterList:c.slice(0,l)}),m=f.merge({key:d,text:o.slice(l),characterList:c.slice(l),data:due()}),g=i.toSeq().takeUntil(function(_){return _===a}),x=i.toSeq().skipUntil(function(_){return _===a}).rest(),E=g.concat([[r,f],[d,m]],x).toOrderedMap();return h&&(a.getChildKeys().isEmpty()||dR(!1),E=Aue(E,f,m)),e.merge({blockMap:E,selectionBefore:t,selectionAfter:t.merge({anchorKey:d,anchorOffset:0,focusKey:d,focusOffset:0,isBackward:!1})})},hue=fue,pue=mo,AR=Qse,mue=rle,Sue=hle,gue=p2,_ue=q0.exports,xue=Hle,vue=qle,wue=rn,qv=jN,Wf=kN,Xf=oue,yue=hue,Eue=_ue.OrderedSet,Kg={replaceText:function(e,t,r,i,a){var o=Wf(e,t),s=Xf(o,t),l=pue.create({style:i||Eue(),entity:a||null});return vue(s,s.getSelectionAfter(),r,l)},insertText:function(e,t,r,i,a){return t.isCollapsed()||wue(!1),Kg.replaceText(e,t,r,i,a)},moveText:function(e,t,r){var i=gue(e,t),a=Kg.removeRange(e,t,"backward");return Kg.replaceWithFragment(a,r,i)},replaceWithFragment:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"REPLACE_WITH_NEW_DATA",a=Wf(e,t),o=Xf(a,t);return xue(o,o.getSelectionAfter(),r,i)},removeRange:function(e,t,r){var i,a,o,s;t.getIsBackward()&&(t=t.merge({anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset(),isBackward:!1})),i=t.getAnchorKey(),a=t.getFocusKey(),o=e.getBlockForKey(i),s=e.getBlockForKey(a);var l=t.getStartOffset(),c=t.getEndOffset(),d=o.getEntityAt(l),h=s.getEntityAt(c-1);if(i===a&&d&&d===h){var f=Sue(e.getEntityMap(),o,s,t,r);return Xf(e,f)}var m=Wf(e,t);return Xf(m,t)},splitBlock:function(e,t){var r=Wf(e,t),i=Xf(r,t);return yue(i,i.getSelectionAfter())},applyInlineStyle:function(e,t,r){return AR.add(e,t,r)},removeInlineStyle:function(e,t,r){return AR.remove(e,t,r)},setBlockType:function(e,t,r){return qv(e,t,function(i){return i.merge({type:r,depth:0})})},setBlockData:function(e,t,r){return qv(e,t,function(i){return i.merge({data:r})})},mergeBlockData:function(e,t,r){return qv(e,t,function(i){return i.merge({data:i.getData().merge(r)})})},applyEntity:function(e,t,r){var i=Wf(e,t);return mue(i,t,r)}},fa=Kg;function Cue(n){return Object.keys(n).map(function(e){return n[e]})}var WN=Cue;function Vue(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){Due(n,i,t[i])})}return n}function Due(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fue(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var XN=lm,Tue=WN,XV=q0.exports,w1=XV.List,bue=XV.Repeat,KN=XV.Record,YN=function(){return!0},Pue={start:null,end:null},E4=KN(Pue),Rue={start:null,end:null,decoratorKey:null,leaves:null},Qv=KN(Rue),Lue={generate:function(e,t,r){var i=t.getLength();if(!i)return w1.of(new Qv({start:0,end:0,decoratorKey:null,leaves:w1.of(new E4({start:0,end:0}))}));var a=[],o=r?r.getDecorations(t,e):w1(bue(null,i)),s=t.getCharacterList();return XN(o,qN,YN,function(l,c){a.push(new Qv({start:l,end:c,decoratorKey:o.get(l),leaves:Bue(s.slice(l,c).toList(),l)}))}),w1(a)},fromJS:function(e){var t=e.leaves,r=Fue(e,["leaves"]);return new Qv(Vue({},r,{leaves:t!=null?w1(Array.isArray(t)?t:Tue(t)).map(function(i){return E4(i)}):null}))}};function Bue(n,e){var t=[],r=n.map(function(i){return i.getStyle()}).toList();return XN(r,qN,YN,function(i,a){t.push(new E4({start:i+e,end:a+e}))}),w1(t)}function qN(n,e){return n===e}var Mue=Lue;function Iue(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Oue=q0.exports,kue=Oue.Record,Nue=kue({type:"TOKEN",mutability:"IMMUTABLE",data:Object}),Uue=function(n){Iue(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.getType=function(){return this.get("type")},t.getMutability=function(){return this.get("mutability")},t.getData=function(){return this.get("data")},e}(Nue),QN=Uue;function jue(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=Math.random()*16|0,t=n=="x"?e:e&3|8;return t.toString(16)})}var Gue=jue;function Hue(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){zue(n,i,t[i])})}return n}function zue(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Wue=QN,Xue=q0.exports,Kue=rn,C4=Gue,Yue=Xue.Map,ks=Yue(),Kf=C4();function p1(n,e){console.warn("WARNING: "+n+` will be deprecated soon!
Please use "`+e+'" instead.')}var ns={getLastCreatedEntityKey:function(){return p1("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey"),ns.__getLastCreatedEntityKey()},create:function(e,t,r){return p1("DraftEntity.create","contentState.createEntity"),ns.__create(e,t,r)},add:function(e){return p1("DraftEntity.add","contentState.addEntity"),ns.__add(e)},get:function(e){return p1("DraftEntity.get","contentState.getEntity"),ns.__get(e)},__getAll:function(){return ks},__loadWithEntities:function(e){ks=e,Kf=C4()},mergeData:function(e,t){return p1("DraftEntity.mergeData","contentState.mergeEntityData"),ns.__mergeData(e,t)},replaceData:function(e,t){return p1("DraftEntity.replaceData","contentState.replaceEntityData"),ns.__replaceData(e,t)},__getLastCreatedEntityKey:function(){return Kf},__create:function(e,t,r){return ns.__add(new Wue({type:e,mutability:t,data:r||{}}))},__add:function(e){return Kf=C4(),ks=ks.set(Kf,e),Kf},__get:function(e){var t=ks.get(e);return t||Kue(!1),t},__mergeData:function(e,t){var r=ns.__get(e),i=Hue({},r.getData(),t),a=r.set("data",i);return ks=ks.set(e,a),a},__replaceData:function(e,t){var r=ns.__get(e),i=r.set("data",t);return ks=ks.set(e,i),i}},m2=ns;function que(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Que=q0.exports,Jue=Que.Record,Zue={anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1},$ue=Jue(Zue),ece=function(n){que(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},t.getAnchorKey=function(){return this.get("anchorKey")},t.getAnchorOffset=function(){return this.get("anchorOffset")},t.getFocusKey=function(){return this.get("focusKey")},t.getFocusOffset=function(){return this.get("focusOffset")},t.getIsBackward=function(){return this.get("isBackward")},t.getHasFocus=function(){return this.get("hasFocus")},t.hasEdgeWithin=function(i,a,o){var s=this.getAnchorKey(),l=this.getFocusKey();if(s===l&&s===i){var c=this.getStartOffset(),d=this.getEndOffset();return a<=c&&c<=o||a<=d&&d<=o}if(i!==s&&i!==l)return!1;var h=i===s?this.getAnchorOffset():this.getFocusOffset();return a<=h&&o>=h},t.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},t.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},t.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},t.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},t.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},e.createEmpty=function(i){return new e({anchorKey:i,anchorOffset:0,focusKey:i,focusOffset:0,isBackward:!1,hasFocus:!1})},e}($ue),S2=ece,Ou=function(n){return typeof window<"u"&&window.__DRAFT_GKX?!!window.__DRAFT_GKX[n]:!1},tce=new RegExp("\r","g");function nce(n){return n.replace(tce,"")}var JN=nce;function fR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){rce(n,i,t[i])})}return n}function rce(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ice(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var ace=sm,hR=mo,oce=sd,sce=So,Zo=m2,ig=S2,lce=ws,uce=WN,cce=Ou,dm=q0.exports,dce=JN,pR=dm.List,Ace=dm.Record,fce=dm.Repeat,hce=dm.Map,pce=dm.OrderedMap,mce={entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null},Sce=Ace(mce),mR=cce("draft_tree_data_support")?sce:oce,gce=function(n){ice(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.getEntityMap=function(){return Zo},t.getBlockMap=function(){return this.get("blockMap")},t.getSelectionBefore=function(){return this.get("selectionBefore")},t.getSelectionAfter=function(){return this.get("selectionAfter")},t.getBlockForKey=function(i){var a=this.getBlockMap().get(i);return a},t.getKeyBefore=function(i){return this.getBlockMap().reverse().keySeq().skipUntil(function(a){return a===i}).skip(1).first()},t.getKeyAfter=function(i){return this.getBlockMap().keySeq().skipUntil(function(a){return a===i}).skip(1).first()},t.getBlockAfter=function(i){return this.getBlockMap().skipUntil(function(a,o){return o===i}).skip(1).first()},t.getBlockBefore=function(i){return this.getBlockMap().reverse().skipUntil(function(a,o){return o===i}).skip(1).first()},t.getBlocksAsArray=function(){return this.getBlockMap().toArray()},t.getFirstBlock=function(){return this.getBlockMap().first()},t.getLastBlock=function(){return this.getBlockMap().last()},t.getPlainText=function(i){return this.getBlockMap().map(function(a){return a?a.getText():""}).join(i||`
`)},t.getLastCreatedEntityKey=function(){return Zo.__getLastCreatedEntityKey()},t.hasText=function(){var i=this.getBlockMap();return i.size>1||escape(i.first().getText()).replace(/%u200B/g,"").length>0},t.createEntity=function(i,a,o){return Zo.__create(i,a,o),this},t.mergeEntityData=function(i,a){return Zo.__mergeData(i,a),this},t.replaceEntityData=function(i,a){return Zo.__replaceData(i,a),this},t.addEntity=function(i){return Zo.__add(i),this},t.getEntity=function(i){return Zo.__get(i)},t.getAllEntities=function(){return Zo.__getAll()},t.loadWithEntities=function(i){return Zo.__loadWithEntities(i)},e.createFromBlockArray=function(i,a){var o=Array.isArray(i)?i:i.contentBlocks,s=ace.createFromArray(o),l=s.isEmpty()?new ig:ig.createEmpty(s.first().getKey());return new e({blockMap:s,entityMap:a||Zo,selectionBefore:l,selectionAfter:l})},e.createFromText=function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:/\r\n?|\n/g,o=i.split(a),s=o.map(function(l){return l=dce(l),new mR({key:lce(),text:l,type:"unstyled",characterList:pR(fce(hR.EMPTY,l.length))})});return e.createFromBlockArray(s)},e.fromJS=function(i){return new e(fR({},i,{blockMap:pce(i.blockMap).map(e.createContentBlockFromJS),selectionBefore:new ig(i.selectionBefore),selectionAfter:new ig(i.selectionAfter)}))},e.createContentBlockFromJS=function(i){var a=i.characterList;return new mR(fR({},i,{data:hce(i.data),characterList:a!=null?pR((Array.isArray(a)?a:uce(a)).map(function(o){return hR.fromJS(o)})):void 0}))},e}(Sce),KV=gce,J8=rn,_ce="NEUTRAL",g2="LTR",ZN="RTL",Yg=null;function Z8(n){return n===g2||n===ZN}function $N(n){return Z8(n)||J8(!1),n===g2?"ltr":"rtl"}function xce(n,e){return Z8(n)||J8(!1),Z8(e)||J8(!1),n===e?null:$N(n)}function e7(n){Yg=n}function vce(){e7(g2)}function wce(){return Yg||this.initGlobalDir(),Yg||J8(!1),Yg}var yce={NEUTRAL:_ce,LTR:g2,RTL:ZN,isStrong:Z8,getHTMLDir:$N,getHTMLDirIfDifferent:xce,setGlobalDir:e7,initGlobalDir:vce,getGlobalDir:wce},_2=yce,el=_2,Ece=rn,bh={L:"A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u01BA\u01BB\u01BC-\u01BF\u01C0-\u01C3\u01C4-\u0293\u0294\u0295-\u02AF\u02B0-\u02B8\u02BB-\u02C1\u02D0-\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376-\u0377\u037A\u037B-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0482\u048A-\u052F\u0531-\u0556\u0559\u055A-\u055F\u0561-\u0587\u0589\u0903\u0904-\u0939\u093B\u093D\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0950\u0958-\u0961\u0964-\u0965\u0966-\u096F\u0970\u0971\u0972-\u0980\u0982-\u0983\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09CE\u09D7\u09DC-\u09DD\u09DF-\u09E1\u09E6-\u09EF\u09F0-\u09F1\u09F4-\u09F9\u09FA\u0A03\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0AD0\u0AE0-\u0AE1\u0AE6-\u0AEF\u0AF0\u0B02-\u0B03\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0B5C-\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B70\u0B71\u0B72-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BEF\u0BF0-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C59\u0C60-\u0C61\u0C66-\u0C6F\u0C7F\u0C82-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CBE\u0CBF\u0CC0-\u0CC4\u0CC6\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0CDE\u0CE0-\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF2\u0D02-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D57\u0D60-\u0D61\u0D66-\u0D6F\u0D70-\u0D75\u0D79\u0D7A-\u0D7F\u0D82-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF3\u0DF4\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E46\u0E4F\u0E50-\u0E59\u0E5A-\u0E5B\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F01-\u0F03\u0F04-\u0F12\u0F13\u0F14\u0F15-\u0F17\u0F1A-\u0F1F\u0F20-\u0F29\u0F2A-\u0F33\u0F34\u0F36\u0F38\u0F3E-\u0F3F\u0F40-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FCF\u0FD0-\u0FD4\u0FD5-\u0FD8\u0FD9-\u0FDA\u1000-\u102A\u102B-\u102C\u1031\u1038\u103B-\u103C\u103F\u1040-\u1049\u104A-\u104F\u1050-\u1055\u1056-\u1057\u105A-\u105D\u1061\u1062-\u1064\u1065-\u1066\u1067-\u106D\u106E-\u1070\u1075-\u1081\u1083-\u1084\u1087-\u108C\u108E\u108F\u1090-\u1099\u109A-\u109C\u109E-\u109F\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FB\u10FC\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u1368\u1369-\u137C\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166D-\u166E\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EB-\u16ED\u16EE-\u16F0\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1735-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7-\u17C8\u17D4-\u17D6\u17D7\u17D8-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1842\u1843\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1946-\u194F\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C0\u19C1-\u19C7\u19C8-\u19C9\u19D0-\u19D9\u19DA\u1A00-\u1A16\u1A19-\u1A1A\u1A1E-\u1A1F\u1A20-\u1A54\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AA6\u1AA7\u1AA8-\u1AAD\u1B04\u1B05-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B45-\u1B4B\u1B50-\u1B59\u1B5A-\u1B60\u1B61-\u1B6A\u1B74-\u1B7C\u1B82\u1B83-\u1BA0\u1BA1\u1BA6-\u1BA7\u1BAA\u1BAE-\u1BAF\u1BB0-\u1BB9\u1BBA-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1BFC-\u1BFF\u1C00-\u1C23\u1C24-\u1C2B\u1C34-\u1C35\u1C3B-\u1C3F\u1C40-\u1C49\u1C4D-\u1C4F\u1C50-\u1C59\u1C5A-\u1C77\u1C78-\u1C7D\u1C7E-\u1C7F\u1CC0-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF2-\u1CF3\u1CF5-\u1CF6\u1D00-\u1D2B\u1D2C-\u1D6A\u1D6B-\u1D77\u1D78\u1D79-\u1D9A\u1D9B-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2134\u2135-\u2138\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2182\u2183-\u2184\u2185-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2C7B\u2C7C-\u2C7D\u2C7E-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005\u3006\u3007\u3021-\u3029\u302E-\u302F\u3031-\u3035\u3038-\u303A\u303B\u303C\u3041-\u3096\u309D-\u309E\u309F\u30A1-\u30FA\u30FC-\u30FE\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u3191\u3192-\u3195\u3196-\u319F\u31A0-\u31BA\u31F0-\u31FF\u3200-\u321C\u3220-\u3229\u322A-\u3247\u3248-\u324F\u3260-\u327B\u327F\u3280-\u3289\u328A-\u32B0\u32C0-\u32CB\u32D0-\u32FE\u3300-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA014\uA015\uA016-\uA48C\uA4D0-\uA4F7\uA4F8-\uA4FD\uA4FE-\uA4FF\uA500-\uA60B\uA60C\uA610-\uA61F\uA620-\uA629\uA62A-\uA62B\uA640-\uA66D\uA66E\uA680-\uA69B\uA69C-\uA69D\uA6A0-\uA6E5\uA6E6-\uA6EF\uA6F2-\uA6F7\uA722-\uA76F\uA770\uA771-\uA787\uA789-\uA78A\uA78B-\uA78E\uA790-\uA7AD\uA7B0-\uA7B1\uA7F7\uA7F8-\uA7F9\uA7FA\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA823-\uA824\uA827\uA830-\uA835\uA836-\uA837\uA840-\uA873\uA880-\uA881\uA882-\uA8B3\uA8B4-\uA8C3\uA8CE-\uA8CF\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8F8-\uA8FA\uA8FB\uA900-\uA909\uA90A-\uA925\uA92E-\uA92F\uA930-\uA946\uA952-\uA953\uA95F\uA960-\uA97C\uA983\uA984-\uA9B2\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uA9C1-\uA9CD\uA9CF\uA9D0-\uA9D9\uA9DE-\uA9DF\uA9E0-\uA9E4\uA9E6\uA9E7-\uA9EF\uA9F0-\uA9F9\uA9FA-\uA9FE\uAA00-\uAA28\uAA2F-\uAA30\uAA33-\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA5F\uAA60-\uAA6F\uAA70\uAA71-\uAA76\uAA77-\uAA79\uAA7A\uAA7B\uAA7D\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAADD\uAADE-\uAADF\uAAE0-\uAAEA\uAAEB\uAAEE-\uAAEF\uAAF0-\uAAF1\uAAF2\uAAF3-\uAAF4\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5B\uAB5C-\uAB5F\uAB64-\uAB65\uABC0-\uABE2\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEB\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uE000-\uF8FF\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFF6F\uFF70\uFF71-\uFF9D\uFF9E-\uFF9F\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",R:"\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F",AL:"\u0608\u060B\u060D\u061B\u061C\u061D\u061E-\u061F\u0620-\u063F\u0640\u0641-\u064A\u066D\u066E-\u066F\u0671-\u06D3\u06D4\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FD-\u06FE\u06FF\u0700-\u070D\u070E\u070F\u0710\u0712-\u072F\u074B-\u074C\u074D-\u07A5\u07B1\u07B2-\u07BF\u08A0-\u08B2\u08B3-\u08E3\uFB50-\uFBB1\uFBB2-\uFBC1\uFBC2-\uFBD2\uFBD3-\uFD3D\uFD40-\uFD4F\uFD50-\uFD8F\uFD90-\uFD91\uFD92-\uFDC7\uFDC8-\uFDCF\uFDF0-\uFDFB\uFDFC\uFDFE-\uFDFF\uFE70-\uFE74\uFE75\uFE76-\uFEFC\uFEFD-\uFEFE"},Cce=new RegExp("["+bh.L+bh.R+bh.AL+"]"),Vce=new RegExp("["+bh.R+bh.AL+"]");function t7(n){var e=Cce.exec(n);return e==null?null:e[0]}function n7(n){var e=t7(n);return e==null?el.NEUTRAL:Vce.exec(e)?el.RTL:el.LTR}function r7(n,e){if(e=e||el.NEUTRAL,!n.length)return e;var t=n7(n);return t===el.NEUTRAL?e:t}function YV(n,e){return e||(e=el.getGlobalDir()),el.isStrong(e)||Ece(!1),r7(n,e)}function Dce(n,e){return YV(n,e)===el.LTR}function Fce(n,e){return YV(n,e)===el.RTL}var Tce={firstStrongChar:t7,firstStrongCharDir:n7,resolveBlockDir:r7,getDirection:YV,isDirectionLTR:Dce,isDirectionRTL:Fce},qV=Tce;function SR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var bce=qV,gR=_2,Pce=rn,Rce=function(){function n(t){SR(this,"_defaultDir",void 0),SR(this,"_lastDir",void 0),t?gR.isStrong(t)||Pce(!1):t=gR.getGlobalDir(),this._defaultDir=t,this.reset()}var e=n.prototype;return e.reset=function(){this._lastDir=this._defaultDir},e.getDirection=function(r){return this._lastDir=bce.getDirection(r,this._lastDir),this._lastDir},n}(),Lce=Rce,Bce=function(e){if(e!=null)return e;throw new Error("Got unexpected null or undefined")},ha=Bce,Mce=Lce,i7=q0.exports,Ice=ha,Oce=i7.OrderedMap,ag,kce={getDirectionMap:function(e,t){ag?ag.reset():ag=new Mce;var r=e.getBlockMap(),i=r.valueSeq().map(function(o){return Ice(ag).getDirection(o.getText())}),a=Oce(r.keySeq().zip(i));return t!=null&&i7.is(t,a)?t:a}},Nce=kce;function _R(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){a7(n,i,t[i])})}return n}function a7(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var x2=Mue,Yf=KV,og=Nce,Jv=S2,Am=q0.exports,o7=Am.OrderedSet,Uce=Am.Record,gc=Am.Stack,xR=Am.OrderedMap,jce=Am.List,Gce={allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:gc(),selection:null,treeMap:null,undoStack:gc()},vR=Uce(Gce),s7=function(){e.createEmpty=function(r){return this.createWithText("",r)},e.createWithText=function(r,i){return e.createWithContent(Yf.createFromText(r),i)},e.createWithContent=function(r,i){if(r.getBlockMap().count()===0)return e.createEmpty(i);var a=r.getBlockMap().first().getKey();return e.create({currentContent:r,undoStack:gc(),redoStack:gc(),decorator:i||null,selection:Jv.createEmpty(a)})},e.create=function(r){var i=r.currentContent,a=r.decorator,o=_R({},r,{treeMap:yR(i,a),directionMap:og.getDirectionMap(i)});return new e(new vR(o))},e.fromJS=function(r){return new e(new vR(_R({},r,{directionMap:r.directionMap!=null?xR(r.directionMap):r.directionMap,inlineStyleOverride:r.inlineStyleOverride!=null?o7(r.inlineStyleOverride):r.inlineStyleOverride,nativelyRenderedContent:r.nativelyRenderedContent!=null?Yf.fromJS(r.nativelyRenderedContent):r.nativelyRenderedContent,redoStack:r.redoStack!=null?gc(r.redoStack.map(function(i){return Yf.fromJS(i)})):r.redoStack,selection:r.selection!=null?new Jv(r.selection):r.selection,treeMap:r.treeMap!=null?xR(r.treeMap).map(function(i){return jce(i).map(function(a){return x2.fromJS(a)})}):r.treeMap,undoStack:r.undoStack!=null?gc(r.undoStack.map(function(i){return Yf.fromJS(i)})):r.undoStack,currentContent:Yf.fromJS(r.currentContent)})))},e.set=function(r,i){var a=r.getImmutable().withMutations(function(o){var s=o.get("decorator"),l=s;i.decorator===null?l=null:i.decorator&&(l=i.decorator);var c=i.currentContent||r.getCurrentContent();if(l!==s){var d=o.get("treeMap"),h;l&&s?h=zce(c,c.getBlockMap(),d,l,s):h=yR(c,l),o.merge({decorator:l,treeMap:h,nativelyRenderedContent:null});return}var f=r.getCurrentContent();c!==f&&o.set("treeMap",Hce(r,c.getBlockMap(),c.getEntityMap(),l)),o.merge(i)});return new e(a)};var n=e.prototype;n.toJS=function(){return this.getImmutable().toJS()},n.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},n.getCurrentContent=function(){return this.getImmutable().get("currentContent")},n.getUndoStack=function(){return this.getImmutable().get("undoStack")},n.getRedoStack=function(){return this.getImmutable().get("redoStack")},n.getSelection=function(){return this.getImmutable().get("selection")},n.getDecorator=function(){return this.getImmutable().get("decorator")},n.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},n.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},n.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},n.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},n.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},e.setInlineStyleOverride=function(r,i){return e.set(r,{inlineStyleOverride:i})},n.getCurrentInlineStyle=function(){var r=this.getInlineStyleOverride();if(r!=null)return r;var i=this.getCurrentContent(),a=this.getSelection();return a.isCollapsed()?Xce(i,a):Kce(i,a)},n.getBlockTree=function(r){return this.getImmutable().getIn(["treeMap",r])},n.isSelectionAtStartOfContent=function(){var r=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(r,0,0)},n.isSelectionAtEndOfContent=function(){var r=this.getCurrentContent(),i=r.getBlockMap(),a=i.last(),o=a.getLength();return this.getSelection().hasEdgeWithin(a.getKey(),o,o)},n.getDirectionMap=function(){return this.getImmutable().get("directionMap")},e.acceptSelection=function(r,i){return wR(r,i,!1)},e.forceSelection=function(r,i){return i.getHasFocus()||(i=i.set("hasFocus",!0)),wR(r,i,!0)},e.moveSelectionToEnd=function(r){var i=r.getCurrentContent(),a=i.getLastBlock(),o=a.getKey(),s=a.getLength();return e.acceptSelection(r,new Jv({anchorKey:o,anchorOffset:s,focusKey:o,focusOffset:s,isBackward:!1}))},e.moveFocusToEnd=function(r){var i=e.moveSelectionToEnd(r);return e.forceSelection(i,i.getSelection())},e.push=function(r,i,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(r.getCurrentContent()===i)return r;var s=og.getDirectionMap(i,r.getDirectionMap());if(!r.getAllowUndo())return e.set(r,{currentContent:i,directionMap:s,lastChangeType:a,selection:i.getSelectionAfter(),forceSelection:o,inlineStyleOverride:null});var l=r.getSelection(),c=r.getCurrentContent(),d=r.getUndoStack(),h=i;l!==c.getSelectionAfter()||Wce(r,a)?(d=d.push(c),h=h.set("selectionBefore",l)):(a==="insert-characters"||a==="backspace-character"||a==="delete-character")&&(h=h.set("selectionBefore",c.getSelectionBefore()));var f=r.getInlineStyleOverride(),m=["adjust-depth","change-block-type","split-block"];m.indexOf(a)===-1&&(f=null);var g={currentContent:h,directionMap:s,undoStack:d,redoStack:gc(),lastChangeType:a,selection:i.getSelectionAfter(),forceSelection:o,inlineStyleOverride:f};return e.set(r,g)},e.undo=function(r){if(!r.getAllowUndo())return r;var i=r.getUndoStack(),a=i.peek();if(!a)return r;var o=r.getCurrentContent(),s=og.getDirectionMap(a,r.getDirectionMap());return e.set(r,{currentContent:a,directionMap:s,undoStack:i.shift(),redoStack:r.getRedoStack().push(o),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:o.getSelectionBefore()})},e.redo=function(r){if(!r.getAllowUndo())return r;var i=r.getRedoStack(),a=i.peek();if(!a)return r;var o=r.getCurrentContent(),s=og.getDirectionMap(a,r.getDirectionMap());return e.set(r,{currentContent:a,directionMap:s,undoStack:r.getUndoStack().push(o),redoStack:i.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:a.getSelectionAfter()})};function e(t){a7(this,"_immutable",void 0),this._immutable=t}return n.getImmutable=function(){return this._immutable},e}();function wR(n,e,t){return s7.set(n,{selection:e,forceSelection:t,nativelyRenderedContent:null,inlineStyleOverride:null})}function yR(n,e){return n.getBlockMap().map(function(t){return x2.generate(n,t,e)}).toOrderedMap()}function Hce(n,e,t,r){var i=n.getCurrentContent().set("entityMap",t),a=i.getBlockMap(),o=n.getImmutable().get("treeMap");return o.merge(e.toSeq().filter(function(s,l){return s!==a.get(l)}).map(function(s){return x2.generate(i,s,r)}))}function zce(n,e,t,r,i){return t.merge(e.toSeq().filter(function(a){return r.getDecorations(a,n)!==i.getDecorations(a,n)}).map(function(a){return x2.generate(n,a,r)}))}function Wce(n,e){var t=n.getLastChangeType();return e!==t||e!=="insert-characters"&&e!=="backspace-character"&&e!=="delete-character"}function Xce(n,e){var t=e.getStartKey(),r=e.getStartOffset(),i=n.getBlockForKey(t);return r>0?i.getInlineStyleAt(r-1):i.getLength()?i.getInlineStyleAt(0):l7(n,t)}function Kce(n,e){var t=e.getStartKey(),r=e.getStartOffset(),i=n.getBlockForKey(t);return r<i.getLength()?i.getInlineStyleAt(r):r>0?i.getInlineStyleAt(r-1):l7(n,t)}function l7(n,e){var t=n.getBlockMap().reverse().skipUntil(function(r,i){return i===e}).skip(1).skipUntil(function(r,i){return r.getLength()}).first();return t?t.getInlineStyleAt(t.getLength()-1):o7()}var On=s7,Yce=So,qce=GN,u7=q0.exports,sg=rn,Qce=u7.OrderedMap,Jce=u7.List,ac=function(e,t,r){if(!!e){var i=t.get(e);!i||t.set(e,r(i))}},Zce=function(e,t,r,i,a){if(!a)return e;var o=i==="after",s=t.getKey(),l=r.getKey(),c=t.getParentKey(),d=t.getNextSiblingKey(),h=t.getPrevSiblingKey(),f=r.getParentKey(),m=o?r.getNextSiblingKey():l,g=o?l:r.getPrevSiblingKey();return e.withMutations(function(x){ac(c,x,function(E){var _=E.getChildKeys();return E.merge({children:_.delete(_.indexOf(s))})}),ac(h,x,function(E){return E.merge({nextSibling:d})}),ac(d,x,function(E){return E.merge({prevSibling:h})}),ac(m,x,function(E){return E.merge({prevSibling:s})}),ac(g,x,function(E){return E.merge({nextSibling:s})}),ac(f,x,function(E){var _=E.getChildKeys(),v=_.indexOf(l),C=o?v+1:v!==0?v-1:0,D=_.toArray();return D.splice(C,0,s),E.merge({children:Jce(D)})}),ac(s,x,function(E){return E.merge({nextSibling:m,prevSibling:g,parent:f})})})},$ce=function(e,t,r,i){i==="replace"&&sg(!1);var a=r.getKey(),o=t.getKey();o===a&&sg(!1);var s=e.getBlockMap(),l=t instanceof Yce,c=[t],d=s.delete(o);l&&(c=[],d=s.withMutations(function(_){var v=t.getNextSiblingKey(),C=qce(t,_);_.toSeq().skipUntil(function(D){return D.getKey()===o}).takeWhile(function(D){var V=D.getKey(),H=V===o,R=v&&V!==v,j=!v&&D.getParentKey()&&(!C||V!==C);return!!(H||R||j)}).forEach(function(D){c.push(D),_.delete(D.getKey())})}));var h=d.toSeq().takeUntil(function(_){return _===r}),f=d.toSeq().skipUntil(function(_){return _===r}).skip(1),m=c.map(function(_){return[_.getKey(),_]}),g=Qce();if(i==="before"){var x=e.getBlockBefore(a);!x||x.getKey()!==t.getKey()||sg(!1),g=h.concat([].concat(m,[[a,r]]),f).toOrderedMap()}else if(i==="after"){var E=e.getBlockAfter(a);!E||E.getKey()!==o||sg(!1),g=h.concat([[a,r]].concat(m),f).toOrderedMap()}return e.merge({blockMap:Zce(g,t,r,i,l),selectionBefore:e.getSelectionAfter(),selectionAfter:e.getSelectionAfter().merge({anchorKey:o,focusKey:o})})},ede=$ce;function ER(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){tde(n,i,t[i])})}return n}function tde(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var nde=sm,rde=mo,ide=sd,ade=So,m1=fa,CR=On,VR=ws,ode=Ou,c7=q0.exports,lg=ede,d7=ode("draft_tree_data_support"),DR=d7?ade:ide,sde=c7.List,lde=c7.Repeat,ude={insertAtomicBlock:function(e,t,r){var i=e.getCurrentContent(),a=e.getSelection(),o=m1.removeRange(i,a,"backward"),s=o.getSelectionAfter(),l=m1.splitBlock(o,s),c=l.getSelectionAfter(),d=m1.setBlockType(l,c,"atomic"),h=rde.create({entity:t}),f={key:VR(),type:"atomic",text:r,characterList:sde(lde(h,r.length))},m={key:VR(),type:"unstyled"};d7&&(f=ER({},f,{nextSibling:m.key}),m=ER({},m,{prevSibling:f.key}));var g=[new DR(f),new DR(m)],x=nde.createFromArray(g),E=m1.replaceWithFragment(d,c,x),_=E.merge({selectionBefore:a,selectionAfter:E.getSelectionAfter().set("hasFocus",!0)});return CR.push(e,_,"insert-fragment")},moveAtomicBlock:function(e,t,r,i){var a=e.getCurrentContent(),o=e.getSelection(),s;if(i==="before"||i==="after"){var l=a.getBlockForKey(i==="before"?r.getStartKey():r.getEndKey());s=lg(a,t,l,i)}else{var c=m1.removeRange(a,r,"backward"),d=c.getSelectionAfter(),h=c.getBlockForKey(d.getFocusKey());if(d.getStartOffset()===0)s=lg(c,t,h,"before");else if(d.getEndOffset()===h.getLength())s=lg(c,t,h,"after");else{var f=m1.splitBlock(c,d),m=f.getSelectionAfter(),g=f.getBlockForKey(m.getFocusKey());s=lg(f,t,g,"before")}}var x=s.merge({selectionBefore:o,selectionAfter:s.getSelectionAfter().set("hasFocus",!0)});return CR.push(e,x,"move-block")}},cde=ude;function dde(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Ade=q0.exports,fde=Ade.List,Zv=".",hde=function(){function n(t){dde(this,"_decorators",void 0),this._decorators=t.slice()}var e=n.prototype;return e.getDecorations=function(r,i){var a=Array(r.getText().length).fill(null);return this._decorators.forEach(function(o,s){var l=0,c=o.strategy,d=function(f,m){pde(a,f,m)&&(mde(a,f,m,s+Zv+l),l++)};c(r,d,i)}),fde(a)},e.getComponentForKey=function(r){var i=parseInt(r.split(Zv)[0],10);return this._decorators[i].component},e.getPropsForKey=function(r){var i=parseInt(r.split(Zv)[0],10);return this._decorators[i].props},n}();function pde(n,e,t){for(var r=e;r<t;r++)if(n[r]!=null)return!1;return!0}function mde(n,e,t,r){for(var i=e;i<t;i++)n[i]=r}var Sde=hde;const Wo=EG(qG);function gde(n){return typeof n=="object"?Object.keys(n).filter(function(e){return n[e]}).map(FR).join(" "):Array.prototype.map.call(arguments,FR).join(" ")}function FR(n){return n.replace(/\//g,"-")}var ld=gde,QV=Wo.jsx,JV=ld,_de=q0.exports,xde=_de.Map,vde=QV("ul",{className:JV("public/DraftStyleDefault/ul")}),wde=QV("ol",{className:JV("public/DraftStyleDefault/ol")}),yde=QV("pre",{className:JV("public/DraftStyleDefault/pre")}),Ede=xde({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},section:{element:"section"},article:{element:"article"},"unordered-list-item":{element:"li",wrapper:vde},"ordered-list-item":{element:"li",wrapper:wde},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:yde},unstyled:{element:"div",aliasedElements:["p"]}}),ZV=Ede,A7={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var TR=Object.getOwnPropertySymbols,Cde=Object.prototype.hasOwnProperty,Vde=Object.prototype.propertyIsEnumerable;function Dde(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function Fde(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(e).map(function(a){return e[a]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Tde=Fde()?Object.assign:function(n,e){for(var t,r=Dde(n),i,a=1;a<arguments.length;a++){t=Object(arguments[a]);for(var o in t)Cde.call(t,o)&&(r[o]=t[o]);if(TR){i=TR(t);for(var s=0;s<i.length;s++)Vde.call(t,i[s])&&(r[i[s]]=t[i[s]])}}return r},V4={exports:{}};(function(n,e){(function(t,r){var i="0.7.31",a="",o="?",s="function",l="undefined",c="object",d="string",h="major",f="model",m="name",g="type",x="vendor",E="version",_="architecture",v="console",C="mobile",D="tablet",V="smarttv",H="wearable",R="embedded",j=255,te="Amazon",$="Apple",z="ASUS",I="BlackBerry",q="Browser",P="Chrome",ee="Edge",ce="Firefox",U="Google",O="Huawei",G="LG",re="Microsoft",oe="Motorola",se="Opera",be="Samsung",Be="Sony",Te="Xiaomi",ye="Zebra",We="Facebook",at=function(Y,_e){var Fe={};for(var Le in Y)_e[Le]&&_e[Le].length%2===0?Fe[Le]=_e[Le].concat(Y[Le]):Fe[Le]=Y[Le];return Fe},Ke=function(Y){for(var _e={},Fe=0;Fe<Y.length;Fe++)_e[Y[Fe].toUpperCase()]=Y[Fe];return _e},tt=function(Y,_e){return typeof Y===d?lt(_e).indexOf(lt(Y))!==-1:!1},lt=function(Y){return Y.toLowerCase()},Ie=function(Y){return typeof Y===d?Y.replace(/[^\d\.]/g,a).split(".")[0]:r},Ue=function(Y,_e){if(typeof Y===d)return Y=Y.replace(/^\s\s*/,a).replace(/\s\s*$/,a),typeof _e===l?Y:Y.substring(0,j)},k=function(Y,_e){for(var Fe=0,Le,Re,rt,Ee,ve,$e;Fe<_e.length&&!ve;){var gt=_e[Fe],St=_e[Fe+1];for(Le=Re=0;Le<gt.length&&!ve;)if(ve=gt[Le++].exec(Y),ve)for(rt=0;rt<St.length;rt++)$e=ve[++Re],Ee=St[rt],typeof Ee===c&&Ee.length>0?Ee.length===2?typeof Ee[1]==s?this[Ee[0]]=Ee[1].call(this,$e):this[Ee[0]]=Ee[1]:Ee.length===3?typeof Ee[1]===s&&!(Ee[1].exec&&Ee[1].test)?this[Ee[0]]=$e?Ee[1].call(this,$e,Ee[2]):r:this[Ee[0]]=$e?$e.replace(Ee[1],Ee[2]):r:Ee.length===4&&(this[Ee[0]]=$e?Ee[3].call(this,$e.replace(Ee[1],Ee[2])):r):this[Ee]=$e||r;Fe+=2}},De=function(Y,_e){for(var Fe in _e)if(typeof _e[Fe]===c&&_e[Fe].length>0){for(var Le=0;Le<_e[Fe].length;Le++)if(tt(_e[Fe][Le],Y))return Fe===o?r:Fe}else if(tt(_e[Fe],Y))return Fe===o?r:Fe;return Y},we={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},le={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ne={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[E,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[E,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,E],[/opios[\/ ]+([\w\.]+)/i],[E,[m,se+" Mini"]],[/\bopr\/([\w\.]+)/i],[E,[m,se]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[m,E],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[E,[m,"UC"+q]],[/\bqbcore\/([\w\.]+)/i],[E,[m,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[E,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[E,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[E,[m,"IE"]],[/yabrowser\/([\w\.]+)/i],[E,[m,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+q],E],[/\bfocus\/([\w\.]+)/i],[E,[m,ce+" Focus"]],[/\bopt\/([\w\.]+)/i],[E,[m,se+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[E,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[E,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[E,[m,se+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[E,[m,"MIUI "+q]],[/fxios\/([-\w\.]+)/i],[E,[m,ce]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+q]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+q],E],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],E],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[m,E],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,We],E],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[m,E],[/\bgsa\/([\w\.]+) .*safari\//i],[E,[m,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[E,[m,P+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,P+" WebView"],E],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[E,[m,"Android "+q]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,E],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[E,[m,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[E,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[E,De,we]],[/(webkit|khtml)\/([\w\.]+)/i],[m,E],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],E],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[E,[m,ce+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[m,E]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,lt]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,a,lt]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,lt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[x,be],[g,D]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[x,be],[g,C]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[x,$],[g,C]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[x,$],[g,D]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[x,O],[g,D]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[f,[x,O],[g,C]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[x,Te],[g,C]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[x,Te],[g,D]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[x,"OPPO"],[g,C]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[x,"Vivo"],[g,C]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[x,"Realme"],[g,C]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[x,oe],[g,C]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[x,oe],[g,D]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[x,G],[g,D]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[x,G],[g,C]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[x,"Lenovo"],[g,D]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[x,"Nokia"],[g,C]],[/(pixel c)\b/i],[f,[x,U],[g,D]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[x,U],[g,C]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[x,Be],[g,C]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[x,Be],[g,D]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[x,"OnePlus"],[g,C]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[x,te],[g,D]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[x,te],[g,C]],[/(playbook);[-\w\),; ]+(rim)/i],[f,x,[g,D]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[x,I],[g,C]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[x,z],[g,D]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[x,z],[g,C]],[/(nexus 9)/i],[f,[x,"HTC"],[g,D]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[x,[f,/_/g," "],[g,C]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[x,"Acer"],[g,D]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[x,"Meizu"],[g,C]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[x,"Sharp"],[g,C]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[x,f,[g,C]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[x,f,[g,D]],[/(surface duo)/i],[f,[x,re],[g,D]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[x,"Fairphone"],[g,C]],[/(u304aa)/i],[f,[x,"AT&T"],[g,C]],[/\bsie-(\w*)/i],[f,[x,"Siemens"],[g,C]],[/\b(rct\w+) b/i],[f,[x,"RCA"],[g,D]],[/\b(venue[\d ]{2,7}) b/i],[f,[x,"Dell"],[g,D]],[/\b(q(?:mv|ta)\w+) b/i],[f,[x,"Verizon"],[g,D]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[x,"Barnes & Noble"],[g,D]],[/\b(tm\d{3}\w+) b/i],[f,[x,"NuVision"],[g,D]],[/\b(k88) b/i],[f,[x,"ZTE"],[g,D]],[/\b(nx\d{3}j) b/i],[f,[x,"ZTE"],[g,C]],[/\b(gen\d{3}) b.+49h/i],[f,[x,"Swiss"],[g,C]],[/\b(zur\d{3}) b/i],[f,[x,"Swiss"],[g,D]],[/\b((zeki)?tb.*\b) b/i],[f,[x,"Zeki"],[g,D]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[x,"Dragon Touch"],f,[g,D]],[/\b(ns-?\w{0,9}) b/i],[f,[x,"Insignia"],[g,D]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[x,"NextBook"],[g,D]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[x,"Voice"],f,[g,C]],[/\b(lvtel\-)?(v1[12]) b/i],[[x,"LvTel"],f,[g,C]],[/\b(ph-1) /i],[f,[x,"Essential"],[g,C]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[x,"Envizen"],[g,D]],[/\b(trio[-\w\. ]+) b/i],[f,[x,"MachSpeed"],[g,D]],[/\btu_(1491) b/i],[f,[x,"Rotor"],[g,D]],[/(shield[\w ]+) b/i],[f,[x,"Nvidia"],[g,D]],[/(sprint) (\w+)/i],[x,f,[g,C]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[x,re],[g,C]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[x,ye],[g,D]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[x,ye],[g,C]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[x,f,[g,v]],[/droid.+; (shield) bui/i],[f,[x,"Nvidia"],[g,v]],[/(playstation [345portablevi]+)/i],[f,[x,Be],[g,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[x,re],[g,v]],[/smart-tv.+(samsung)/i],[x,[g,V]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[x,be],[g,V]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[x,G],[g,V]],[/(apple) ?tv/i],[x,[f,$+" TV"],[g,V]],[/crkey/i],[[f,P+"cast"],[x,U],[g,V]],[/droid.+aft(\w)( bui|\))/i],[f,[x,te],[g,V]],[/\(dtv[\);].+(aquos)/i],[f,[x,"Sharp"],[g,V]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[x,Ue],[f,Ue],[g,V]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[g,V]],[/((pebble))app/i],[x,f,[g,H]],[/droid.+; (glass) \d/i],[f,[x,U],[g,H]],[/droid.+; (wt63?0{2,3})\)/i],[f,[x,ye],[g,H]],[/(quest( 2)?)/i],[f,[x,We],[g,H]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[x,[g,R]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[g,C]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[g,D]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[g,D]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[g,C]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[x,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[E,[m,ee+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[E,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[m,E],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[E,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,E],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[m,[E,De,le]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,"Windows"],[E,De,le]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[E,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,"Mac OS"],[E,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[E,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,E],[/\(bb(10);/i],[E,[m,I]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[E,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[E,[m,ce+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[E,[m,"webOS"]],[/crkey\/([\d\.]+)/i],[E,[m,P+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[m,"Chromium OS"],E],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,E],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],E],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[m,E]]},fe=function(Y,_e){if(typeof Y===c&&(_e=Y,Y=r),!(this instanceof fe))return new fe(Y,_e).getResult();var Fe=Y||(typeof t!==l&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:a),Le=_e?at(ne,_e):ne;return this.getBrowser=function(){var Re={};return Re[m]=r,Re[E]=r,k.call(Re,Fe,Le.browser),Re.major=Ie(Re.version),Re},this.getCPU=function(){var Re={};return Re[_]=r,k.call(Re,Fe,Le.cpu),Re},this.getDevice=function(){var Re={};return Re[x]=r,Re[f]=r,Re[g]=r,k.call(Re,Fe,Le.device),Re},this.getEngine=function(){var Re={};return Re[m]=r,Re[E]=r,k.call(Re,Fe,Le.engine),Re},this.getOS=function(){var Re={};return Re[m]=r,Re[E]=r,k.call(Re,Fe,Le.os),Re},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Fe},this.setUA=function(Re){return Fe=typeof Re===d&&Re.length>j?Ue(Re,j):Re,this},this.setUA(Fe),this};fe.VERSION=i,fe.BROWSER=Ke([m,E,h]),fe.CPU=Ke([_]),fe.DEVICE=Ke([f,x,g,v,C,V,D,H,R]),fe.ENGINE=fe.OS=Ke([m,E]),n.exports&&(e=n.exports=fe),e.UAParser=fe;var He=typeof t!==l&&(t.jQuery||t.Zepto);if(He&&!He.ua){var ae=new fe;He.ua=ae.getResult(),He.ua.get=function(){return ae.getUA()},He.ua.set=function(Y){ae.setUA(Y);var _e=ae.getResult();for(var Fe in _e)He.ua[Fe]=_e[Fe]}}})(typeof window=="object"?window:wA)})(V4,V4.exports);var bde=V4.exports,Xa="Unknown",Pde={"Mac OS":"Mac OS X"};function Rde(n){return Pde[n]||n}function Lde(n){if(!n)return{major:"",minor:""};var e=n.split(".");return{major:e[0],minor:e[1]}}var Bde=new bde,Ka=Bde.getResult(),Mde=Lde(Ka.browser.version),Ide={browserArchitecture:Ka.cpu.architecture||Xa,browserFullVersion:Ka.browser.version||Xa,browserMinorVersion:Mde.minor||Xa,browserName:Ka.browser.name||Xa,browserVersion:Ka.browser.major||Xa,deviceName:Ka.device.model||Xa,engineName:Ka.engine.name||Xa,engineVersion:Ka.engine.version||Xa,platformArchitecture:Ka.cpu.architecture||Xa,platformName:Rde(Ka.os.name)||Xa,platformVersion:Ka.os.version||Xa,platformFullVersion:Ka.os.version||Xa},Ode=Ide,$8=rn,f7=/\./,kde=/\|\|/,Nde=/\s+\-\s+/,Ude=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,bR=/^(\d*)(.*)/;function jde(n,e){var t=n.split(kde);return t.length>1?t.some(function(r){return S7.contains(r,e)}):(n=t[0].trim(),Gde(n,e))}function Gde(n,e){var t=n.split(Nde);if(t.length>0&&t.length<=2||$8(!1),t.length===1)return $v(t[0],e);var r=t[0],i=t[1];return PR(r)&&PR(i)||$8(!1),$v(">="+r,e)&&$v("<="+i,e)}function $v(n,e){if(n=n.trim(),n==="")return!0;var t=e.split(f7),r=m7(n),i=r.modifier,a=r.rangeComponents;switch(i){case"<":return h7(t,a);case"<=":return Hde(t,a);case">=":return p7(t,a);case">":return Wde(t,a);case"~":case"~>":return Xde(t,a);default:return zde(t,a)}}function h7(n,e){return fm(n,e)===-1}function Hde(n,e){var t=fm(n,e);return t===-1||t===0}function zde(n,e){return fm(n,e)===0}function p7(n,e){var t=fm(n,e);return t===1||t===0}function Wde(n,e){return fm(n,e)===1}function Xde(n,e){var t=e.slice(),r=e.slice();r.length>1&&r.pop();var i=r.length-1,a=parseInt(r[i],10);return D4(a)&&(r[i]=a+1+""),p7(n,t)&&h7(n,r)}function m7(n){var e=n.split(f7),t=e[0].match(Ude);return t||$8(!1),{modifier:t[1],rangeComponents:[t[2]].concat(e.slice(1))}}function D4(n){return!isNaN(n)&&isFinite(n)}function PR(n){return!m7(n).modifier}function RR(n,e){for(var t=n.length;t<e;t++)n[t]="0"}function Kde(n,e){n=n.slice(),e=e.slice(),RR(n,e.length);for(var t=0;t<e.length;t++){var r=e[t].match(/^[x*]$/i);if(r&&(e[t]=n[t]="0",r[0]==="*"&&t===e.length-1))for(var i=t;i<n.length;i++)n[i]="0"}return RR(e,n.length),[n,e]}function Yde(n,e){var t=n.match(bR)[1],r=e.match(bR)[1],i=parseInt(t,10),a=parseInt(r,10);return D4(i)&&D4(a)&&i!==a?LR(i,a):LR(n,e)}function LR(n,e){return typeof n!=typeof e&&$8(!1),n>e?1:n<e?-1:0}function fm(n,e){for(var t=Kde(n,e),r=t[0],i=t[1],a=0;a<i.length;a++){var o=Yde(r[a],i[a]);if(o)return o}return 0}var S7={contains:function(e,t){return jde(e.trim(),t.trim())}},qde=S7,Qde=Object.prototype.hasOwnProperty;function Jde(n,e,t){if(!n)return null;var r={};for(var i in n)Qde.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}var Zde=Jde;function $de(n){var e={};return function(t){return e.hasOwnProperty(t)||(e[t]=n.call(this,t)),e[t]}}var e1e=$de,rs=Ode,t1e=qde,n1e=Zde,r1e=e1e;function S1(n,e,t,r){if(n===t)return!0;if(!t.startsWith(n))return!1;var i=t.slice(n.length);return e?(i=r?r(i):i,t1e.contains(i,e)):!1}function i1e(n){return rs.platformName==="Windows"?n.replace(/^\s*NT/,""):n}var a1e={isBrowser:function(e){return S1(rs.browserName,rs.browserFullVersion,e)},isBrowserArchitecture:function(e){return S1(rs.browserArchitecture,null,e)},isDevice:function(e){return S1(rs.deviceName,null,e)},isEngine:function(e){return S1(rs.engineName,rs.engineVersion,e)},isPlatform:function(e){return S1(rs.platformName,rs.platformFullVersion,e,i1e)},isPlatformArchitecture:function(e){return S1(rs.platformArchitecture,null,e)}},pa=n1e(a1e,r1e);function o1e(n){return!n||!n.ownerDocument?document:n.ownerDocument}var v2=o1e;function s1e(n){return!n||!n.ownerDocument?!1:n.nodeType===Node.ELEMENT_NODE}var ud=s1e,l1e=ud;function g7(n){if(l1e(n)){var e=n,t=e.getAttribute("data-offset-key");if(t)return t;for(var r=0;r<e.childNodes.length;r++){var i=g7(e.childNodes[r]);if(i)return i}}return null}var _7=g7,u1e=v2,c1e=_7;function d1e(n){for(var e=n;e&&e!==u1e(n).documentElement;){var t=c1e(e);if(t!=null)return t;e=e.parentNode}return null}var w2=d1e;function A1e(n){return!n||!n.ownerDocument||!n.ownerDocument.defaultView?window:n.ownerDocument.defaultView}var x7=A1e;function ug(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var f1e=pa,h1e=w2,p1e=x7,m1e=q0.exports,S1e=rn,g1e=ha,BR=m1e.Map,_1e={subtree:!0,characterData:!0,childList:!0,characterDataOldValue:!1,attributes:!1},MR=f1e.isBrowser("IE <= 11"),x1e=function(){function n(t){var r=this;ug(this,"observer",void 0),ug(this,"container",void 0),ug(this,"mutations",void 0),ug(this,"onCharData",void 0),this.container=t,this.mutations=BR();var i=p1e(t);i.MutationObserver&&!MR?this.observer=new i.MutationObserver(function(a){return r.registerMutations(a)}):this.onCharData=function(a){a.target instanceof Node||S1e(!1),r.registerMutation({type:"characterData",target:a.target})}}var e=n.prototype;return e.start=function(){this.observer?this.observer.observe(this.container,_1e):this.container.addEventListener("DOMCharacterDataModified",this.onCharData)},e.stopAndFlushMutations=function(){var r=this.observer;r?(this.registerMutations(r.takeRecords()),r.disconnect()):this.container.removeEventListener("DOMCharacterDataModified",this.onCharData);var i=this.mutations;return this.mutations=BR(),i},e.registerMutations=function(r){for(var i=0;i<r.length;i++)this.registerMutation(r[i])},e.getMutationTextContent=function(r){var i=r.type,a=r.target,o=r.removedNodes;if(i==="characterData"){if(a.textContent!=="")return MR?a.textContent.replace(`
`,""):a.textContent}else if(i==="childList"){if(o&&o.length)return"";if(a.textContent!=="")return a.textContent}return null},e.registerMutation=function(r){var i=this.getMutationTextContent(r);if(i!=null){var a=g1e(h1e(r.target));this.mutations=this.mutations.set(a,i)}},n}(),v1e=x1e,cg="-",w1e={encode:function(e,t,r){return e+cg+t+cg+r},decode:function(e){var t=e.split(cg).reverse(),r=t[0],i=t[1],a=t.slice(2);return{blockKey:a.reverse().join(cg),decoratorKey:parseInt(i,10),leafKey:parseInt(r,10)}}},Al=w1e,y2={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105},v7={logBlockedSelectionEvent:function(){return null},logSelectionStateFailure:function(){return null}};function y1e(n){return!n||!n.ownerDocument?!1:n.ownerDocument.defaultView?n instanceof n.ownerDocument.defaultView.HTMLElement:n instanceof HTMLElement}var hm=y1e,IR=rn,E1e=hm;function C1e(n){var e=n.editorContainer;e||IR(!1),E1e(e.firstChild)||IR(!1);var t=e.firstChild;return t}var w7=C1e,OR=Al,V1e=ha;function D1e(n,e,t,r,i){var a=V1e(n.getSelection());if(!e||!r)return a;var o=OR.decode(e),s=o.blockKey,l=n.getBlockTree(s),c=l&&l.getIn([o.decoratorKey,"leaves",o.leafKey]),d=OR.decode(r),h=d.blockKey,f=n.getBlockTree(h),m=f&&f.getIn([d.decoratorKey,"leaves",d.leafKey]);if(!c||!m)return a;var g=c.get("start"),x=m.get("start"),E=c?g+t:null,_=m?x+i:null,v=a.getAnchorKey()===s&&a.getAnchorOffset()===E&&a.getFocusKey()===h&&a.getFocusOffset()===_;if(v)return a;var C=!1;if(s===h){var D=c.get("end"),V=m.get("end");x===g&&V===D?C=i<t:C=x<g}else{var H=n.getCurrentContent().getBlockMap().keySeq().skipUntil(function(R){return R===s||R===h}).first();C=H===h}return a.merge({anchorKey:s,anchorOffset:E,focusKey:h,focusOffset:_,isBackward:C})}var y7=D1e,Ah=w2,Ph=_7,kR=y7,ew=rn,$V=ud,Fc=ha;function F1e(n,e,t,r,i,a){var o=t.nodeType===Node.TEXT_NODE,s=i.nodeType===Node.TEXT_NODE;if(o&&s)return{selectionState:kR(n,Fc(Ah(t)),r,Fc(Ah(i)),a),needsRecovery:!1};var l=null,c=null,d=!0;return o?(l={key:Fc(Ah(t)),offset:r},c=dg(e,i,a)):s?(c={key:Fc(Ah(i)),offset:a},l=dg(e,t,r)):(l=dg(e,t,r),c=dg(e,i,a),t===i&&r===a&&(d=!!t.firstChild&&t.firstChild.nodeName!=="BR")),{selectionState:kR(n,l.key,l.offset,c.key,c.offset),needsRecovery:d}}function T1e(n){for(;n.firstChild&&($V(n.firstChild)&&n.firstChild.getAttribute("data-blocks")==="true"||Ph(n.firstChild));)n=n.firstChild;return n}function b1e(n){for(;n.lastChild&&($V(n.lastChild)&&n.lastChild.getAttribute("data-blocks")==="true"||Ph(n.lastChild));)n=n.lastChild;return n}function dg(n,e,t){var r=e,i=Ah(r);if(i!=null||n&&(n===r||n.firstChild===r)||ew(!1),n===r){r=r.firstChild,$V(r)||ew(!1);var a=r;r=a,r.getAttribute("data-contents")!=="true"&&ew(!1),t>0&&(t=r.childNodes.length)}if(t===0){var o=null;if(i!=null)o=i;else{var s=T1e(r);o=Fc(Ph(s))}return{key:o,offset:0}}var l=r.childNodes[t-1],c=null,d=null;if(!Ph(l))c=Fc(i),d=NR(l);else{var h=b1e(l);c=Fc(Ph(h)),d=NR(h)}return{key:c,offset:d}}function NR(n){var e=n.textContent;return e===`
`?0:e.length}var E7=F1e,P1e=E7;function R1e(n,e){var t=e.ownerDocument.defaultView.getSelection(),r=t.anchorNode,i=t.anchorOffset,a=t.focusNode,o=t.focusOffset,s=t.rangeCount;return s===0||r==null||a==null?{selectionState:n.getSelection().set("hasFocus",!1),needsRecovery:!1}:P1e(n,e,r,i,a,o)}var C7=R1e,L1e=v7,UR=On,B1e=w7,M1e=C7;function I1e(n){if(n._blockSelectEvents||n._latestEditorState!==n.props.editorState){if(n._blockSelectEvents){var e=n.props.editorState,t=e.getSelection();L1e.logBlockedSelectionEvent({anonymizedDom:"N/A",extraParams:JSON.stringify({stacktrace:new Error().stack}),selectionState:JSON.stringify(t.toJS())})}return}var r=n.props.editorState,i=M1e(r,B1e(n)),a=i.selectionState;a!==r.getSelection()&&(i.needsRecovery?r=UR.forceSelection(r,a):r=UR.acceptSelection(r,a),n.update(r))}var V7=I1e;function O1e(n){return n!=null&&n!=""}var D7={notEmptyKey:O1e},k1e=D7,N1e=k1e.notEmptyKey;function U1e(n,e){var t;if(e.isCollapsed()){var r=e.getAnchorKey(),i=e.getAnchorOffset();return i>0?(t=n.getBlockForKey(r).getEntityAt(i-1),t!==n.getBlockForKey(r).getEntityAt(i)?null:jR(n.getEntityMap(),t)):null}var a=e.getStartKey(),o=e.getStartOffset(),s=n.getBlockForKey(a);return t=o===s.getLength()?null:s.getEntityAt(o),jR(n.getEntityMap(),t)}function jR(n,e){if(N1e(e)){var t=n.__get(e);return t.getMutability()==="MUTABLE"?e:null}return null}var eD=U1e,j1e=v1e,G1e=fa,H1e=Al,qf=On,tw=y2,z1e=pa,W1e=V7,F7=w7,X1e=C7,K1e=eD,Y1e=ha,q1e=z1e.isBrowser("IE"),Q1e=20,nw=!1,Ag=!1,Rh=null;function J1e(n){Rh||(Rh=new j1e(F7(n)),Rh.start())}var F4={onCompositionStart:function(e){Ag=!0,J1e(e)},onCompositionEnd:function(e){nw=!1,Ag=!1,setTimeout(function(){nw||F4.resolveComposition(e)},Q1e)},onSelect:W1e,onKeyDown:function(e,t){if(!Ag){F4.resolveComposition(e),e._onKeyDown(t);return}(t.which===tw.RIGHT||t.which===tw.LEFT)&&t.preventDefault()},onKeyPress:function(e,t){t.which===tw.RETURN&&t.preventDefault()},resolveComposition:function(e){if(!Ag){var t=Y1e(Rh).stopAndFlushMutations();Rh=null,nw=!0;var r=qf.set(e._latestEditorState,{inCompositionMode:!1});if(e.exitCurrentMode(),!t.size){e.update(r);return}var i=r.getCurrentContent();t.forEach(function(l,c){var d=H1e.decode(c),h=d.blockKey,f=d.decoratorKey,m=d.leafKey,g=r.getBlockTree(h).getIn([f,"leaves",m]),x=g.start,E=g.end,_=r.getSelection().merge({anchorKey:h,focusKey:h,anchorOffset:x,focusOffset:E,isBackward:!1}),v=K1e(i,_),C=i.getBlockForKey(h).getInlineStyleAt(x);i=G1e.replaceText(i,_,l,C,v),r=qf.set(r,{currentContent:i})});var a=X1e(r,F7(e)),o=a.selectionState;e.restoreEditorDOM();var s=q1e?qf.forceSelection(r,o):qf.acceptSelection(r,o);e.update(qf.push(s,i,"insert-characters"))}}},Z1e=F4,rw,GR;function $1e(){if(GR)return rw;GR=1;var n=Ne.exports.createElement;function e(s,l){s.prototype=Object.create(l.prototype),s.prototype.constructor=s,s.__proto__=l}var t=Al,r=Ne.exports,i=qV,a=_2,o=function(s){e(l,s);function l(){return s.apply(this,arguments)||this}var c=l.prototype;return c.render=function(){var h=this.props,f=h.block,m=h.children,g=h.contentState,x=h.decorator,E=h.decoratorKey,_=h.direction,v=h.leafSet,C=h.text,D=f.getKey(),V=v.get("leaves"),H=x.getComponentForKey(E),R=x.getPropsForKey(E),j=t.encode(D,parseInt(E,10),0),te=C.slice(V.first().get("start"),V.last().get("end")),$=a.getHTMLDirIfDifferent(i.getDirection(te),_);return n(H,{...R,contentState:g,decoratedText:te,dir:$,key:j,entityKey:f.getEntityAt(v.get("start")),offsetKey:j},m)},l}(r.Component);return rw=o,rw}var vp=Wo.jsx;function HR(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function eAe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function zR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var tAe=Ne.exports,nAe=pa,rAe=rn,iAe=ud,tD=nAe.isBrowser("IE <= 11");function aAe(n){return tD?n.textContent===`
`:n.tagName==="BR"}var oAe=function(e){return tD?vp("span",{"data-text":"true",ref:e},"A"):vp("br",{"data-text":"true",ref:e},"A")},sAe=function(e){return tD?vp("span",{"data-text":"true",ref:e},"B"):vp("br",{"data-text":"true",ref:e},"B")},lAe=function(n){eAe(e,n);function e(r){var i;return i=n.call(this,r)||this,zR(HR(i),"_forceFlag",void 0),zR(HR(i),"_node",void 0),i._forceFlag=!1,i}var t=e.prototype;return t.shouldComponentUpdate=function(i){var a=this._node,o=i.children==="";iAe(a)||rAe(!1);var s=a;return o?!aAe(s):s.textContent!==i.children},t.componentDidMount=function(){this._forceFlag=!this._forceFlag},t.componentDidUpdate=function(){this._forceFlag=!this._forceFlag},t.render=function(){var i=this;return this.props.children===""?this._forceFlag?oAe(function(a){return i._node=a}):sAe(function(a){return i._node=a}):vp("span",{"data-text":"true",ref:function(o){return i._node=o},children:this.props.children},this._forceFlag?"A":"B")},e}(tAe.Component),uAe=lAe,cAe=ud;function dAe(n){return!n||!n.ownerDocument?!1:cAe(n)&&n.nodeName==="BR"}var T7=dAe;function AAe(n){var e=n?n.ownerDocument||n:document,t=e.defaultView||window;return!!(n&&(typeof t.Node=="function"?n instanceof t.Node:typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.nodeName=="string"))}var fAe=AAe,hAe=fAe;function pAe(n){return hAe(n)&&n.nodeType==3}var mAe=pAe,WR=mAe;function b7(n,e){return!n||!e?!1:n===e?!0:WR(n)?!1:WR(e)?b7(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1}var nD=b7;function SAe(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var P7=SAe,T4=v7,gAe=pa,R7=nD,_Ae=P7,rD=v2,xAe=rn,L7=ud,vAe=gAe.isBrowser("IE");function wAe(n,e){if(!n)return"[empty]";var t=B7(n,e);if(t.nodeType===Node.TEXT_NODE)return t.textContent;L7(t)||xAe(!1);var r=t;return r.outerHTML}function B7(n,e){var t=e!==void 0?e(n):[];if(n.nodeType===Node.TEXT_NODE){var r=n.textContent.length;return rD(n).createTextNode("[text "+r+(t.length?" | "+t.join(", "):"")+"]")}var i=n.cloneNode();i.nodeType===1&&t.length&&i.setAttribute("data-labels",t.join(", "));for(var a=n.childNodes,o=0;o<a.length;o++)i.appendChild(B7(a[o],e));return i}function b4(n,e){for(var t=n,r=t;t;){if(L7(t)&&r.hasAttribute("contenteditable"))return wAe(t,e);t=t.parentNode,r=t}return"Could not find contentEditable parent of node"}function M7(n){return n.nodeValue===null?n.childNodes.length:n.nodeValue.length}function yAe(n,e,t,r,i){var a=rD(e);if(!!R7(a.documentElement,e)){var o=a.defaultView.getSelection(),s=n.getAnchorKey(),l=n.getAnchorOffset(),c=n.getFocusKey(),d=n.getFocusOffset(),h=n.getIsBackward();if(!o.extend&&h){var f=s,m=l;s=c,l=d,c=f,d=m,h=!1}var g=s===t&&r<=l&&i>=l,x=c===t&&r<=d&&i>=d;if(g&&x){o.removeAllRanges(),fg(o,e,l-r,n),qg(o,e,d-r,n);return}if(!h)g&&(o.removeAllRanges(),fg(o,e,l-r,n)),x&&qg(o,e,d-r,n);else if(x&&(o.removeAllRanges(),fg(o,e,d-r,n)),g){var E=o.focusNode,_=o.focusOffset;o.removeAllRanges(),fg(o,e,l-r,n),qg(o,E,_,n)}}}function qg(n,e,t,r){var i=_Ae(),a=n.extend;if(a&&e!=null&&R7(i,e)){t>M7(e)&&T4.logSelectionStateFailure({anonymizedDom:b4(e),extraParams:JSON.stringify({offset:t}),selectionState:JSON.stringify(r.toJS())});var o=e===n.focusNode;try{n.rangeCount>0&&n.extend&&n.extend(e,t)}catch(l){throw T4.logSelectionStateFailure({anonymizedDom:b4(e,function(c){var d=[];return c===i&&d.push("active element"),c===n.anchorNode&&d.push("selection anchor node"),c===n.focusNode&&d.push("selection focus node"),d}),extraParams:JSON.stringify({activeElementName:i?i.nodeName:null,nodeIsFocus:e===n.focusNode,nodeWasFocus:o,selectionRangeCount:n.rangeCount,selectionAnchorNodeName:n.anchorNode?n.anchorNode.nodeName:null,selectionAnchorOffset:n.anchorOffset,selectionFocusNodeName:n.focusNode?n.focusNode.nodeName:null,selectionFocusOffset:n.focusOffset,message:l?""+l:null,offset:t},null,2),selectionState:JSON.stringify(r.toJS(),null,2)}),l}}else if(e&&n.rangeCount>0){var s=n.getRangeAt(0);s.setEnd(e,t),n.addRange(s.cloneRange())}}function fg(n,e,t,r){var i=rD(e).createRange();if(t>M7(e)&&T4.logSelectionStateFailure({anonymizedDom:b4(e),extraParams:JSON.stringify({offset:t}),selectionState:JSON.stringify(r.toJS())}),i.setStart(e,t),vAe)try{n.addRange(i)}catch{}else n.addRange(i)}var EAe={setDraftEditorSelection:yAe,addFocusToSelection:qg},XR=Wo.jsx,KR=Tde;function CAe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function VAe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function DAe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var FAe=uAe,TAe=Ne.exports,hg=rn,bAe=T7,PAe=EAe.setDraftEditorSelection,RAe=function(n){VAe(e,n);function e(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=n.call.apply(n,[this].concat(a))||this,DAe(CAe(r),"leaf",void 0),r}var t=e.prototype;return t._setSelection=function(){var i=this.props.selection;if(!(i==null||!i.getHasFocus())){var a=this.props,o=a.block,s=a.start,l=a.text,c=o.getKey(),d=s+l.length;if(!!i.hasEdgeWithin(c,s,d)){var h=this.leaf;h||hg(!1);var f=h.firstChild;f||hg(!1);var m;f.nodeType===Node.TEXT_NODE?m=f:bAe(f)?m=h:(m=f.firstChild,m||hg(!1)),PAe(i,m,c,s,d)}}},t.shouldComponentUpdate=function(i){var a=this.leaf;a||hg(!1);var o=a.textContent!==i.text||i.styleSet!==this.props.styleSet||i.forceSelection;return o},t.componentDidUpdate=function(){this._setSelection()},t.componentDidMount=function(){this._setSelection()},t.render=function(){var i=this,a=this.props.block,o=this.props.text;o.endsWith(`
`)&&this.props.isLast&&(o+=`
`);var s=this.props,l=s.customStyleMap,c=s.customStyleFn,d=s.offsetKey,h=s.styleSet,f=h.reduce(function(g,x){var E={},_=l[x];return _!==void 0&&g.textDecoration!==_.textDecoration&&(E.textDecoration=[g.textDecoration,_.textDecoration].join(" ").trim()),KR(g,_,E)},{});if(c){var m=c(h,a);f=KR(f,m)}return XR("span",{"data-offset-key":d,ref:function(x){return i.leaf=x},style:f,children:XR(FAe,{children:o})})},e}(TAe.Component),I7=RAe,iw,YR;function LAe(){if(YR)return iw;YR=1;var n=Wo.jsx;function e(c,d){c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.__proto__=d}var t=$1e(),r=I7,i=Al,a=q0.exports,o=Ne.exports,s=ld;a.List;var l=function(c){e(d,c);function d(){return c.apply(this,arguments)||this}var h=d.prototype;return h.render=function(){var m=this.props,g=m.block,x=m.contentState,E=m.customStyleFn,_=m.customStyleMap,v=m.decorator,C=m.direction,D=m.forceSelection,V=m.hasSelection,H=m.selection,R=m.tree,j=g.getKey(),te=g.getText(),$=R.size-1,z=this.props.children||R.map(function(I,q){var P=I.get("decoratorKey"),ee=I.get("leaves"),ce=ee.size-1,U=ee.map(function(O,G){var re=i.encode(j,q,G),oe=O.get("start"),se=O.get("end");return n(r,{offsetKey:re,block:g,start:oe,selection:V?H:null,forceSelection:D,text:te.slice(oe,se),styleSet:g.getInlineStyleAt(oe),customStyleMap:_,customStyleFn:E,isLast:P===$&&G===ce},re)}).toArray();return!P||!v?U:n(t,{block:g,children:U,contentState:x,decorator:v,decoratorKey:P,direction:C,leafSet:I,text:te},q)}).toArray();return n("div",{"data-offset-key":i.encode(j,0,0),className:s({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":C==="LTR","public/DraftStyleDefault/rtl":C==="RTL"}),children:z})},d}(o.Component);return iw=l,iw}function pg(n,e){return!!e&&(n===e.documentElement||n===e.body)}var BAe={getTop:function(e){var t=e.ownerDocument;return pg(e,t)?t.body.scrollTop||t.documentElement.scrollTop:e.scrollTop},setTop:function(e,t){var r=e.ownerDocument;pg(e,r)?r.body.scrollTop=r.documentElement.scrollTop=t:e.scrollTop=t},getLeft:function(e){var t=e.ownerDocument;return pg(e,t)?t.body.scrollLeft||t.documentElement.scrollLeft:e.scrollLeft},setLeft:function(e,t){var r=e.ownerDocument;pg(e,r)?r.body.scrollLeft=r.documentElement.scrollLeft=t:e.scrollLeft=t}},iD=BAe,MAe=/-(.)/g;function IAe(n){return n.replace(MAe,function(e,t){return t.toUpperCase()})}var OAe=IAe,kAe=/([A-Z])/g;function NAe(n){return n.replace(kAe,"-$1").toLowerCase()}var UAe=NAe,qR=OAe,QR=UAe;function Qf(n){return n==null?n:String(n)}function jAe(n,e){var t;if(window.getComputedStyle&&(t=window.getComputedStyle(n,null),t))return Qf(t.getPropertyValue(QR(e)));if(document.defaultView&&document.defaultView.getComputedStyle){if(t=document.defaultView.getComputedStyle(n,null),t)return Qf(t.getPropertyValue(QR(e)));if(e==="display")return"none"}return n.currentStyle?Qf(e==="float"?n.currentStyle.cssFloat||n.currentStyle.styleFloat:n.currentStyle[qR(e)]):Qf(n.style&&n.style[qR(e)])}var GAe=jAe,HAe=GAe;function aw(n,e){var t=O7.get(n,e);return t==="auto"||t==="scroll"}var O7={get:HAe,getScrollParent:function(e){if(!e)return null;for(var t=e.ownerDocument;e&&e!==t.body;){if(aw(e,"overflow")||aw(e,"overflowY")||aw(e,"overflowX"))return e;e=e.parentNode}return t.defaultView||t.parentWindow}},E2=O7,zAe=nD;function WAe(n){var e=n.ownerDocument.documentElement;if(!("getBoundingClientRect"in n)||!zAe(e,n))return{left:0,right:0,top:0,bottom:0};var t=n.getBoundingClientRect();return{left:Math.round(t.left)-e.clientLeft,right:Math.round(t.right)-e.clientLeft,top:Math.round(t.top)-e.clientTop,bottom:Math.round(t.bottom)-e.clientTop}}var XAe=WAe,KAe=XAe;function YAe(n){var e=KAe(n);return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}var k7=YAe,qAe=typeof navigator<"u"&&navigator.userAgent.indexOf("AppleWebKit")>-1;function QAe(n){return n=n||document,n.scrollingElement?n.scrollingElement:!qAe&&n.compatMode==="CSS1Compat"?n.documentElement:n.body}var JAe=QAe;function ZAe(n){return n.Window&&n instanceof n.Window?{x:n.pageXOffset||n.document.documentElement.scrollLeft,y:n.pageYOffset||n.document.documentElement.scrollTop}:{x:n.scrollLeft,y:n.scrollTop}}var $Ae=ZAe,efe=JAe,tfe=$Ae;function nfe(n){var e=efe(n.ownerDocument||n.document);n.Window&&n instanceof n.Window&&(n=e);var t=tfe(n),r=n===e?n.ownerDocument.documentElement:n,i=n.scrollWidth-r.clientWidth,a=n.scrollHeight-r.clientHeight;return t.x=Math.max(0,Math.min(t.x,i)),t.y=Math.max(0,Math.min(t.y,a)),t}var C2=nfe;function N7(){var n;return document.documentElement&&(n=document.documentElement.clientWidth),!n&&document.body&&(n=document.body.clientWidth),n||0}function U7(){var n;return document.documentElement&&(n=document.documentElement.clientHeight),!n&&document.body&&(n=document.body.clientHeight),n||0}function j7(){return{width:window.innerWidth||N7(),height:window.innerHeight||U7()}}j7.withoutScrollbars=function(){return{width:N7(),height:U7()}};var G7=j7,ow,JR;function rfe(){if(JR)return ow;JR=1;var n=Wo.jsx;function e(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function t(j,te){j.prototype=Object.create(te.prototype),j.prototype.constructor=j,j.__proto__=te}function r(j){for(var te=1;te<arguments.length;te++){var $=arguments[te]!=null?arguments[te]:{},z=Object.keys($);typeof Object.getOwnPropertySymbols=="function"&&(z=z.concat(Object.getOwnPropertySymbols($).filter(function(I){return Object.getOwnPropertyDescriptor($,I).enumerable}))),z.forEach(function(I){i(j,I,$[I])})}return j}function i(j,te,$){return te in j?Object.defineProperty(j,te,{value:$,enumerable:!0,configurable:!0,writable:!0}):j[te]=$,j}var a=LAe(),o=Al,s=Ne.exports,l=iD,c=E2,d=k7,h=C2,f=G7,m=q0.exports,g=rn,x=hm,E=10;m.List;var _=function(te,$){return te.getAnchorKey()===$||te.getFocusKey()===$},v=function(te,$){var z=te.getNextSiblingKey();return z?$.getBlockForKey(z).getType()===te.getType():!1},C=function(te,$,z){var I=[],q=!0,P=!1,ee=void 0;try{for(var ce=z.reverse()[Symbol.iterator](),U;!(q=(U=ce.next()).done);q=!0){var O=U.value;if(O.type!==$)break;I.push(O)}}catch(oe){P=!0,ee=oe}finally{try{!q&&ce.return!=null&&ce.return()}finally{if(P)throw ee}}z.splice(z.indexOf(I[0]),I.length+1);var G=I.reverse(),re=G[0].key;return z.push(s.cloneElement(te,{key:"".concat(re,"-wrap"),"data-offset-key":o.encode(re,0,0)},G)),z},D=function(te,$){var z=$.get(te.getType())||$.get("unstyled"),I=z.wrapper,q=z.element||$.get("unstyled").element;return{Element:q,wrapperTemplate:I}},V=function(te,$){var z=$(te);if(!z)return{};var I=z.component,q=z.props,P=z.editable;return{CustomComponent:I,customProps:q,customEditable:P}},H=function(te,$,z,I,q,P){var ee={"data-block":!0,"data-editor":$,"data-offset-key":z,key:te.getKey(),ref:P},ce=I(te);return ce&&(ee.className=ce),q.customEditable!==void 0&&(ee=r({},ee,{contentEditable:q.customEditable,suppressContentEditableWarning:!0})),ee},R=function(j){t(te,j);function te(){for(var z,I=arguments.length,q=new Array(I),P=0;P<I;P++)q[P]=arguments[P];return z=j.call.apply(j,[this].concat(q))||this,i(e(z),"wrapperRef",s.createRef()),z}var $=te.prototype;return $.shouldComponentUpdate=function(I){var q=this.props,P=q.block,ee=q.direction,ce=q.tree,U=!P.getChildKeys().isEmpty(),O=P!==I.block||ce!==I.tree||ee!==I.direction||_(I.selection,I.block.getKey())&&I.forceSelection;return U||O},$.componentDidMount=function(){var I=this.props.selection,q=I.getEndKey();if(!(!I.getHasFocus()||q!==this.props.block.getKey())){var P=this.wrapperRef.current;if(!!P){var ee=c.getScrollParent(P),ce=h(ee),U;if(ee===window){var O=d(P),G=O.y+O.height,re=f().height;U=G-re,U>0&&window.scrollTo(ce.x,ce.y+U+E)}else{x(P)||g(!1);var oe=P,se=oe.offsetHeight+oe.offsetTop,be=ee.offsetHeight+ce.y;U=se-be,U>0&&l.setTop(ee,l.getTop(ee)+U+E)}}}},$.render=function(){var I=this,q=this.props,P=q.block,ee=q.blockRenderMap,ce=q.blockRendererFn,U=q.blockStyleFn,O=q.contentState,G=q.decorator,re=q.editorKey,oe=q.editorState,se=q.customStyleFn,be=q.customStyleMap,Be=q.direction,Te=q.forceSelection,ye=q.selection,We=q.tree,at=null;P.children.size&&(at=P.children.reduce(function(le,ne){var fe=o.encode(ne,0,0),He=O.getBlockForKey(ne),ae=V(He,ce),Y=ae.CustomComponent||te,_e=D(He,ee),Fe=_e.Element,Le=_e.wrapperTemplate,Re=H(He,re,fe,U,ae,null),rt=r({},I.props,{tree:oe.getBlockTree(ne),blockProps:ae.customProps,offsetKey:fe,block:He});return le.push(n(Fe,{...Re,children:n(Y,{...rt})})),!Le||v(He,O)||C(Le,Fe,le),le},[]));var Ke=P.getKey(),tt=o.encode(Ke,0,0),lt=V(P,ce),Ie=lt.CustomComponent,Ue=Ie!=null?n(Ie,{...this.props,tree:oe.getBlockTree(Ke),blockProps:lt.customProps,offsetKey:tt,block:P}):n(a,{block:P,children:at,contentState:O,customStyleFn:se,customStyleMap:be,decorator:G,direction:Be,forceSelection:Te,hasSelection:_(ye,Ke),selection:ye,tree:We});if(P.getParentKey())return Ue;var k=D(P,ee),De=k.Element,we=H(P,re,tt,U,lt,this.wrapperRef);return n(De,{...we,children:Ue})},te}(s.Component);return ow=R,ow}var sw,ZR;function ife(){if(ZR)return sw;ZR=1;var n=Wo.jsx;function e(s,l){s.prototype=Object.create(l.prototype),s.prototype.constructor=s,s.__proto__=l}var t=rfe(),r=Al,i=Ne.exports,a=ha,o=function(s){e(l,s);function l(){return s.apply(this,arguments)||this}var c=l.prototype;return c.shouldComponentUpdate=function(h){var f=this.props.editorState,m=h.editorState,g=f.getDirectionMap(),x=m.getDirectionMap();if(g!==x)return!0;var E=f.getSelection().getHasFocus(),_=m.getSelection().getHasFocus();if(E!==_)return!0;var v=m.getNativelyRenderedContent(),C=f.isInCompositionMode(),D=m.isInCompositionMode();if(f===m||v!==null&&m.getCurrentContent()===v||C&&D)return!1;var V=f.getCurrentContent(),H=m.getCurrentContent(),R=f.getDecorator(),j=m.getDecorator();return C!==D||V!==H||R!==j||m.mustForceSelection()},c.render=function(){for(var h=this.props,f=h.blockRenderMap,m=h.blockRendererFn,g=h.blockStyleFn,x=h.customStyleMap,E=h.customStyleFn,_=h.editorState,v=h.editorKey,C=h.textDirectionality,D=_.getCurrentContent(),V=_.getSelection(),H=_.mustForceSelection(),R=_.getDecorator(),j=a(_.getDirectionMap()),te=D.getBlocksAsArray(),$=te[0],z=[],I=$;I;){var q=I.getKey(),P={blockRenderMap:f,blockRendererFn:m,blockStyleFn:g,contentState:D,customStyleFn:E,customStyleMap:x,decorator:R,editorKey:v,editorState:_,forceSelection:H,selection:V,block:I,direction:C||j.get(q),tree:_.getBlockTree(q)},ee=f.get(I.getType())||f.get("unstyled"),ce=ee.wrapper;z.push({block:n(t,{...P},q),wrapperTemplate:ce,key:q,offsetKey:r.encode(q,0,0)});var U=I.getNextSiblingKey();I=U?D.getBlockForKey(U):null}for(var O=[],G=0;G<z.length;){var re=z[G];if(re.wrapperTemplate){var oe=[];do oe.push(z[G].block),G++;while(G<z.length&&z[G].wrapperTemplate===re.wrapperTemplate);var se=i.cloneElement(re.wrapperTemplate,{key:re.key+"-wrap","data-offset-key":re.offsetKey},oe);O.push(se)}else O.push(re.block),G++}return n("div",{"data-contents":"true",children:O})},l}(i.Component);return sw=o,sw}var $R=Wo.jsx,afe=Ne.exports.createElement;function ofe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sfe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function lfe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var ufe=I7,eL=Al,cfe=Ne.exports,tL=iD,dfe=E2,Afe=qV,ffe=_2,hfe=ld,pfe=k7,mfe=C2,Sfe=G7,gfe=rn,_fe=hm,xfe=ha,nL=10,rL=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},vfe=function(n){sfe(e,n);function e(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=n.call.apply(n,[this].concat(a))||this,lfe(ofe(r),"_node",void 0),r}var t=e.prototype;return t.shouldComponentUpdate=function(i){return this.props.block!==i.block||this.props.tree!==i.tree||this.props.direction!==i.direction||rL(i.selection,i.block.getKey())&&i.forceSelection},t.componentDidMount=function(){if(!this.props.preventScroll){var i=this.props.selection,a=i.getEndKey();if(!(!i.getHasFocus()||a!==this.props.block.getKey())){var o=this._node;if(o!=null){var s=dfe.getScrollParent(o),l=mfe(s),c;if(s===window){var d=pfe(o),h=d.y+d.height,f=Sfe().height;c=h-f,c>0&&window.scrollTo(l.x,l.y+c+nL)}else{_fe(o)||gfe(!1);var m=o.offsetHeight+o.offsetTop,g=s.offsetTop+s.offsetHeight,x=g+l.y;c=m-x,c>0&&tL.setTop(s,tL.getTop(s)+c+nL)}}}}},t._renderChildren=function(){var i=this,a=this.props.block,o=a.getKey(),s=a.getText(),l=this.props.tree.size-1,c=rL(this.props.selection,o);return this.props.tree.map(function(d,h){var f=d.get("leaves");if(f.size===0)return null;var m=f.size-1,g=f.map(function($,z){var I=eL.encode(o,h,z),q=$.get("start"),P=$.get("end");return $R(ufe,{offsetKey:I,block:a,start:q,selection:c?i.props.selection:null,forceSelection:i.props.forceSelection,text:s.slice(q,P),styleSet:a.getInlineStyleAt(q),customStyleMap:i.props.customStyleMap,customStyleFn:i.props.customStyleFn,isLast:h===l&&z===m},I)}).toArray(),x=d.get("decoratorKey");if(x==null||!i.props.decorator)return g;var E=xfe(i.props.decorator),_=E.getComponentForKey(x);if(!_)return g;var v=E.getPropsForKey(x),C=eL.encode(o,h,0),D=f.first().get("start"),V=f.last().get("end"),H=s.slice(D,V),R=a.getEntityAt(d.get("start")),j=ffe.getHTMLDirIfDifferent(Afe.getDirection(H),i.props.direction),te={contentState:i.props.contentState,decoratedText:H,dir:j,start:D,end:V,blockKey:o,entityKey:R,offsetKey:C};return afe(_,{...v,...te,key:C},g)}).toArray()},t.render=function(){var i=this,a=this.props,o=a.direction,s=a.offsetKey,l=hfe({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":o==="LTR","public/DraftStyleDefault/rtl":o==="RTL"});return $R("div",{"data-offset-key":s,className:l,ref:function(d){return i._node=d},children:this._renderChildren()})},e}(cfe.Component),H7=vfe,lw,iL;function wfe(){if(iL)return lw;iL=1;function n(e){var t=e||"",r=arguments.length;if(r>1)for(var i=1;i<r;i++){var a=arguments[i];a&&(t=(t?t+" ":"")+a)}return t}return lw=n,lw}var uw,aL;function yfe(){if(aL)return uw;aL=1;var n=Ne.exports.createElement,e=Wo.jsx;function t(m){for(var g=1;g<arguments.length;g++){var x=arguments[g]!=null?arguments[g]:{},E=Object.keys(x);typeof Object.getOwnPropertySymbols=="function"&&(E=E.concat(Object.getOwnPropertySymbols(x).filter(function(_){return Object.getOwnPropertyDescriptor(x,_).enumerable}))),E.forEach(function(_){r(m,_,x[_])})}return m}function r(m,g,x){return g in m?Object.defineProperty(m,g,{value:x,enumerable:!0,configurable:!0,writable:!0}):m[g]=x,m}function i(m,g){m.prototype=Object.create(g.prototype),m.prototype.constructor=m,m.__proto__=g}var a=H7,o=Al,s=Ne.exports,l=ld,c=wfe(),d=ha,h=function(g,x,E,_){return l({"public/DraftStyleDefault/unorderedListItem":g==="unordered-list-item","public/DraftStyleDefault/orderedListItem":g==="ordered-list-item","public/DraftStyleDefault/reset":E,"public/DraftStyleDefault/depth0":x===0,"public/DraftStyleDefault/depth1":x===1,"public/DraftStyleDefault/depth2":x===2,"public/DraftStyleDefault/depth3":x===3,"public/DraftStyleDefault/depth4":x>=4,"public/DraftStyleDefault/listLTR":_==="LTR","public/DraftStyleDefault/listRTL":_==="RTL"})},f=function(m){i(g,m);function g(){return m.apply(this,arguments)||this}var x=g.prototype;return x.shouldComponentUpdate=function(_){var v=this.props.editorState,C=_.editorState,D=v.getDirectionMap(),V=C.getDirectionMap();if(D!==V)return!0;var H=v.getSelection().getHasFocus(),R=C.getSelection().getHasFocus();if(H!==R)return!0;var j=C.getNativelyRenderedContent(),te=v.isInCompositionMode(),$=C.isInCompositionMode();if(v===C||j!==null&&C.getCurrentContent()===j||te&&$)return!1;var z=v.getCurrentContent(),I=C.getCurrentContent(),q=v.getDecorator(),P=C.getDecorator();return te!==$||z!==I||q!==P||C.mustForceSelection()},x.render=function(){for(var _=this.props,v=_.blockRenderMap,C=_.blockRendererFn,D=_.blockStyleFn,V=_.customStyleMap,H=_.customStyleFn,R=_.editorState,j=_.editorKey,te=_.preventScroll,$=_.textDirectionality,z=R.getCurrentContent(),I=R.getSelection(),q=R.mustForceSelection(),P=R.getDecorator(),ee=d(R.getDirectionMap()),ce=z.getBlocksAsArray(),U=[],O=null,G=null,re=0;re<ce.length;re++){var oe=ce[re],se=oe.getKey(),be=oe.getType(),Be=C(oe),Te=void 0,ye=void 0,We=void 0;Be&&(Te=Be.component,ye=Be.props,We=Be.editable);var at=$||ee.get(se),Ke=o.encode(se,0,0),tt={contentState:z,block:oe,blockProps:ye,blockStyleFn:D,customStyleMap:V,customStyleFn:H,decorator:P,direction:at,forceSelection:q,offsetKey:Ke,preventScroll:te,selection:I,tree:R.getBlockTree(se)},lt=v.get(be)||v.get("unstyled"),Ie=lt.wrapper,Ue=lt.element||v.get("unstyled").element,k=oe.getDepth(),De="";if(D&&(De=D(oe)),Ue==="li"){var we=G!==Ie||O===null||k>O;De=c(De,h(be,k,we,at))}var le=Te||a,ne={className:De,"data-block":!0,"data-editor":j,"data-offset-key":Ke,key:se};We!==void 0&&(ne=t({},ne,{contentEditable:We,suppressContentEditableWarning:!0}));var fe=e(Ue,{...ne,children:n(le,{...tt,key:se})});U.push({block:fe,wrapperTemplate:Ie,key:se,offsetKey:Ke}),Ie?O=oe.getDepth():O=null,G=Ie}for(var He=[],ae=0;ae<U.length;){var Y=U[ae];if(Y.wrapperTemplate){var _e=[];do _e.push(U[ae].block),ae++;while(ae<U.length&&U[ae].wrapperTemplate===Y.wrapperTemplate);var Fe=s.cloneElement(Y.wrapperTemplate,{key:Y.key+"-wrap","data-offset-key":Y.offsetKey},_e);He.push(Fe)}else He.push(Y.block),ae++}return e("div",{"data-contents":"true",children:He})},g}(s.Component);return uw=f,uw}var Efe=Ou,Cfe=Efe("draft_tree_data_support"),Vfe=Cfe?ife():yfe(),z7={isImage:function(e){return oL(e)[0]==="image"},isJpeg:function(e){var t=oL(e);return z7.isImage(e)&&(t[1]==="jpeg"||t[1]==="pjpeg")}};function oL(n){return n.split("/")}var Dfe=z7,mg=rn;function Ffe(n){var e=n.length;if(!Array.isArray(n)&&(typeof n=="object"||typeof n=="function")||mg(!1),typeof e!="number"&&mg(!1),e===0||e-1 in n||mg(!1),typeof n.callee=="function"&&mg(!1),n.hasOwnProperty)try{return Array.prototype.slice.call(n)}catch{}for(var t=Array(e),r=0;r<e;r++)t[r]=n[r];return t}function Tfe(n){return!!n&&(typeof n=="object"||typeof n=="function")&&"length"in n&&!("setInterval"in n)&&typeof n.nodeType!="number"&&(Array.isArray(n)||"callee"in n||"item"in n)}function bfe(n){return Tfe(n)?Array.isArray(n)?n.slice():Ffe(n):[n]}var Pfe=bfe;function V2(n){return function(){return n}}var cd=function(){};cd.thatReturns=V2;cd.thatReturnsFalse=V2(!1);cd.thatReturnsTrue=V2(!0);cd.thatReturnsNull=V2(null);cd.thatReturnsThis=function(){return this};cd.thatReturnsArgument=function(n){return n};var Rfe=cd,Lfe=Dfe,Bfe=Pfe,Mfe=Rfe,Ife=new RegExp(`\r
`,"g"),Ofe=`
`,kfe={"text/rtf":1,"text/html":1};function Nfe(n){if(n.kind=="file")return n.getAsFile()}var Ufe=function(){function n(t){this.data=t,this.types=t.types?Bfe(t.types):[]}var e=n.prototype;return e.isRichText=function(){return this.getHTML()&&this.getText()?!0:this.isImage()?!1:this.types.some(function(r){return kfe[r]})},e.getText=function(){var r;return this.data.getData&&(this.types.length?this.types.indexOf("text/plain")!=-1&&(r=this.data.getData("text/plain")):r=this.data.getData("Text")),r?r.replace(Ife,Ofe):null},e.getHTML=function(){if(this.data.getData)if(this.types.length){if(this.types.indexOf("text/html")!=-1)return this.data.getData("text/html")}else return this.data.getData("Text")},e.isLink=function(){return this.types.some(function(r){return r.indexOf("Url")!=-1||r.indexOf("text/uri-list")!=-1||r.indexOf("text/x-moz-url")})},e.getLink=function(){if(this.data.getData){if(this.types.indexOf("text/x-moz-url")!=-1){var r=this.data.getData("text/x-moz-url").split(`
`);return r[0]}return this.types.indexOf("text/uri-list")!=-1?this.data.getData("text/uri-list"):this.data.getData("url")}return null},e.isImage=function(){var r=this.types.some(function(s){return s.indexOf("application/x-moz-file")!=-1});if(r)return!0;for(var i=this.getFiles(),a=0;a<i.length;a++){var o=i[a].type;if(!Lfe.isImage(o))return!1}return!0},e.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},e.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(Nfe).filter(Mfe.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},e.hasFiles=function(){return this.getFiles().length>0},n}(),W7=Ufe,jfe=rn,sL=/\.textClipping$/,Gfe={"text/plain":!0,"text/html":!0,"text/rtf":!0},Hfe=5e3;function zfe(n,e){var t=0,r=[];n.forEach(function(i){Wfe(i,function(a){t++,a&&r.push(a.slice(0,Hfe)),t==n.length&&e(r.join("\r"))})})}function Wfe(n,e){if(!window.FileReader||n.type&&!(n.type in Gfe)){e("");return}if(n.type===""){var t="";sL.test(n.name)&&(t=n.name.replace(sL,"")),e(t);return}var r=new FileReader;r.onload=function(){var i=r.result;typeof i!="string"&&jfe(!1),e(i)},r.onerror=function(){e("")},r.readAsText(n)}var X7=zfe;function Xfe(n){return n==="handled"||n===!0}var D2=Xfe,Kfe=W7,K7=fa,Y7=On,Yfe=w2,qfe=v2,Qfe=X7,Jfe=y7,Zfe=x7,lL=D2,cw=ha;function $fe(n,e){var t=null,r=null,i=qfe(n.currentTarget);if(typeof i.caretRangeFromPoint=="function"){var a=i.caretRangeFromPoint(n.x,n.y);t=a.startContainer,r=a.startOffset}else if(n.rangeParent)t=n.rangeParent,r=n.rangeOffset;else return null;t=cw(t),r=cw(r);var o=cw(Yfe(t));return Jfe(e,o,r,o,r)}var ehe={onDragEnd:function(e){e.exitCurrentMode(),uL(e)},onDrop:function(e,t){var r=new Kfe(t.nativeEvent.dataTransfer),i=e._latestEditorState,a=$fe(t.nativeEvent,i);if(t.preventDefault(),e._dragCount=0,e.exitCurrentMode(),a!=null){var o=r.getFiles();if(o.length>0){if(e.props.handleDroppedFiles&&lL(e.props.handleDroppedFiles(a,o)))return;Qfe(o,function(l){l&&e.update(cL(i,a,l))});return}var s=e._internalDrag?"internal":"external";e.props.handleDrop&&lL(e.props.handleDrop(a,r,s))||(e._internalDrag?e.update(the(i,a)):e.update(cL(i,a,r.getText()))),uL(e)}}};function uL(n){n._internalDrag=!1;var e=n.editorContainer;if(e){var t=new MouseEvent("mouseup",{view:Zfe(e),bubbles:!0,cancelable:!0});e.dispatchEvent(t)}}function the(n,e){var t=K7.moveText(n.getCurrentContent(),n.getSelection(),e);return Y7.push(n,t,"insert-fragment")}function cL(n,e,t){var r=K7.insertText(n.getCurrentContent(),e,t,n.getCurrentInlineStyle());return Y7.push(n,r,"insert-fragment")}var nhe=ehe;function rhe(n){var e=n.getSelection(),t=e.getAnchorKey(),r=n.getBlockTree(t),i=e.getStartOffset(),a=!1;return r.some(function(o){return i===o.get("start")?(a=!0,!0):i<o.get("end")?o.get("leaves").some(function(s){var l=s.get("start");return i===l?(a=!0,!0):!1}):!1}),a}var ihe=rhe;(function(n,e){if(n.setImmediate)return;var t=1,r={},i=!1,a=n.document,o;function s(v){typeof v!="function"&&(v=new Function(""+v));for(var C=new Array(arguments.length-1),D=0;D<C.length;D++)C[D]=arguments[D+1];var V={callback:v,args:C};return r[t]=V,o(t),t++}function l(v){delete r[v]}function c(v){var C=v.callback,D=v.args;switch(D.length){case 0:C();break;case 1:C(D[0]);break;case 2:C(D[0],D[1]);break;case 3:C(D[0],D[1],D[2]);break;default:C.apply(e,D);break}}function d(v){if(i)setTimeout(d,0,v);else{var C=r[v];if(C){i=!0;try{c(C)}finally{l(v),i=!1}}}}function h(){o=function(v){process.nextTick(function(){d(v)})}}function f(){if(n.postMessage&&!n.importScripts){var v=!0,C=n.onmessage;return n.onmessage=function(){v=!1},n.postMessage("","*"),n.onmessage=C,v}}function m(){var v="setImmediate$"+Math.random()+"$",C=function(D){D.source===n&&typeof D.data=="string"&&D.data.indexOf(v)===0&&d(+D.data.slice(v.length))};n.addEventListener?n.addEventListener("message",C,!1):n.attachEvent("onmessage",C),o=function(D){n.postMessage(v+D,"*")}}function g(){var v=new MessageChannel;v.port1.onmessage=function(C){var D=C.data;d(D)},o=function(C){v.port2.postMessage(C)}}function x(){var v=a.documentElement;o=function(C){var D=a.createElement("script");D.onreadystatechange=function(){d(C),D.onreadystatechange=null,v.removeChild(D),D=null},v.appendChild(D)}}function E(){o=function(v){setTimeout(d,0,v)}}var _=Object.getPrototypeOf&&Object.getPrototypeOf(n);_=_&&_.setTimeout?_:n,{}.toString.call(n.process)==="[object process]"?h():f()?m():n.MessageChannel?g():a&&"onreadystatechange"in a.createElement("script")?x():E(),_.setImmediate=s,_.clearImmediate=l})(typeof self>"u"?typeof window>"u"?wA:window:self);var ahe=window.setImmediate,ohe=fa,P4=On,she=pa,dL=eD,lhe=D2,uhe=ihe,AL=ha,che=ahe,dhe="'",Ahe="/",fhe=she.isBrowser("Firefox");function hhe(n){return fhe&&(n==dhe||n==Ahe)}function fL(n,e,t,r,i){var a=ohe.replaceText(n.getCurrentContent(),n.getSelection(),e,t,r);return P4.push(n,a,"insert-characters",i)}function phe(n,e){n._pendingStateFromBeforeInput!==void 0&&(n.update(n._pendingStateFromBeforeInput),n._pendingStateFromBeforeInput=void 0);var t=n._latestEditorState,r=e.data;if(!!r){if(n.props.handleBeforeInput&&lhe(n.props.handleBeforeInput(r,t,e.timeStamp))){e.preventDefault();return}var i=t.getSelection(),a=i.getStartOffset(),o=i.getAnchorKey();if(!i.isCollapsed()){e.preventDefault(),n.update(fL(t,r,t.getCurrentInlineStyle(),dL(t.getCurrentContent(),t.getSelection()),!0));return}var s=fL(t,r,t.getCurrentInlineStyle(),dL(t.getCurrentContent(),t.getSelection()),!1),l=!1;if(l||(l=uhe(n._latestCommittedEditorState)),!l){var c=t.getBlockTree(o),d=s.getBlockTree(o);l=c.size!==d.size||c.zip(d).some(function(h){var f=h[0],m=h[1],g=f.get("start"),x=g+(g>=a?r.length:0),E=f.get("end"),_=E+(E>=a?r.length:0),v=m.get("start"),C=m.get("end"),D=m.get("decoratorKey");return f.get("decoratorKey")!==D||f.get("leaves").size!==m.get("leaves").size||x!==v||_!==C||D!=null&&C-v!==E-g})}if(l||(l=hhe(r)),l||(l=AL(s.getDirectionMap()).get(o)!==AL(t.getDirectionMap()).get(o)),l){e.preventDefault(),s=P4.set(s,{forceSelection:!0}),n.update(s);return}s=P4.set(s,{nativelyRenderedContent:s.getCurrentContent()}),n._pendingStateFromBeforeInput=s,che(function(){n._pendingStateFromBeforeInput!==void 0&&(n.update(n._pendingStateFromBeforeInput),n._pendingStateFromBeforeInput=void 0)})}}var mhe=phe,She=On,hL=nD,ghe=P7;function _he(n,e){var t=e.currentTarget.ownerDocument;if(!Boolean(n.props.preserveSelectionOnBlur)&&ghe(t)===t.body){var r=t.defaultView.getSelection(),i=n.editor;r.rangeCount===1&&hL(i,r.anchorNode)&&hL(i,r.focusNode)&&r.removeAllRanges()}var a=n._latestEditorState,o=a.getSelection();if(!!o.getHasFocus()){var s=o.set("hasFocus",!1);n.props.onBlur&&n.props.onBlur(e),n.update(She.acceptSelection(a,s))}}var xhe=_he,vhe=On;function whe(n,e){n.setMode("composite"),n.update(vhe.set(n._latestEditorState,{inCompositionMode:!0})),n._onCompositionStart(e)}var yhe=whe,Ehe=p2;function Che(n){var e=n.getSelection();return e.isCollapsed()?null:Ehe(n.getCurrentContent(),e)}var q7=Che,Vhe=q7;function Dhe(n,e){var t=n._latestEditorState,r=t.getSelection();if(r.isCollapsed()){e.preventDefault();return}n.setClipboard(Vhe(n._latestEditorState))}var Fhe=Dhe;function The(n){if(!n||!("ownerDocument"in n))return!1;if("ownerDocument"in n){var e=n;if(!e.ownerDocument.defaultView)return e instanceof Node;if(e instanceof e.ownerDocument.defaultView.Node)return!0}return!1}var bhe=The,Phe=fa,Rhe=On,Lhe=E2,Bhe=q7,Mhe=C2,Ihe=bhe;function Ohe(n,e){var t=n._latestEditorState,r=t.getSelection(),i=e.target,a;if(r.isCollapsed()){e.preventDefault();return}if(Ihe(i)){var o=i;a=Mhe(Lhe.getScrollParent(o))}var s=Bhe(t);n.setClipboard(s),n.setMode("cut"),setTimeout(function(){n.restoreEditorDOM(a),n.exitCurrentMode(),n.update(khe(t))},0)}function khe(n){var e=Phe.removeRange(n.getCurrentContent(),n.getSelection(),"forward");return Rhe.push(n,e,"remove-range")}var Nhe=Ohe;function Uhe(n,e){n.setMode("drag"),e.preventDefault()}var jhe=Uhe;function Ghe(n){n._internalDrag=!0,n.setMode("drag")}var Hhe=Ghe,pL=On,zhe=pa;function Whe(n,e){var t=n._latestEditorState,r=t.getSelection();if(!r.getHasFocus()){var i=r.set("hasFocus",!0);n.props.onFocus&&n.props.onFocus(e),zhe.isBrowser("Chrome < 60.0.3081.0")?n.update(pL.forceSelection(t,i)):n.update(pL.acceptSelection(t,i))}}var Xhe=Whe,Khe=rn,Q7=55296,Yhe=56319,qhe=56320,J7=57343,Qhe=/[\uD800-\uDFFF]/;function Z7(n){return Q7<=n&&n<=J7}function Jhe(n,e){if(0<=e&&e<n.length||Khe(!1),e+1===n.length)return!1;var t=n.charCodeAt(e),r=n.charCodeAt(e+1);return Q7<=t&&t<=Yhe&&qhe<=r&&r<=J7}function aD(n){return Qhe.test(n)}function nA(n,e){return 1+Z7(n.charCodeAt(e))}function Zhe(n){if(!aD(n))return n.length;for(var e=0,t=0;t<n.length;t+=nA(n,t))e++;return e}function $7(n,e,t){if(e=e||0,t=t===void 0?1/0:t||0,!aD(n))return n.substr(e,t);var r=n.length;if(r<=0||e>r||t<=0)return"";var i=0;if(e>0){for(;e>0&&i<r;e--)i+=nA(n,i);if(i>=r)return""}else if(e<0){for(i=r;e<0&&0<i;e++)i-=nA(n,i-1);i<0&&(i=0)}var a=r;if(t<r)for(a=i;t>0&&a<r;t--)a+=nA(n,a);return n.substring(i,a)}function $he(n,e,t){e=e||0,t=t===void 0?1/0:t||0,e<0&&(e=0),t<0&&(t=0);var r=Math.abs(t-e);return e=e<t?e:t,$7(n,e,r)}function epe(n){for(var e=[],t=0;t<n.length;t+=nA(n,t))e.push(n.codePointAt(t));return e}var tpe={getCodePoints:epe,getUTF16Length:nA,hasSurrogateUnit:aD,isCodeUnitInSurrogateRange:Z7,isSurrogatePair:Jhe,strlen:Zhe,substring:$he,substr:$7},dd=tpe;function npe(n,e){var t=n.getSelection(),r=n.getCurrentContent(),i=t.getStartKey(),a=t.getStartOffset(),o=i,s=0;if(e>a){var l=r.getKeyBefore(i);if(l==null)o=i;else{o=l;var c=r.getBlockForKey(l);s=c.getText().length}}else s=a-e;return t.merge({focusKey:o,focusOffset:s,isBackward:!0})}var oD=npe,rpe=fa,ipe=Ou,mL=ipe("draft_tree_data_support");function ape(n,e,t){var r=n.getSelection(),i=n.getCurrentContent(),a=r,o=r.getAnchorKey(),s=r.getFocusKey(),l=i.getBlockForKey(o);if(mL&&t==="forward"&&o!==s)return i;if(r.isCollapsed()){if(t==="forward"){if(n.isSelectionAtEndOfContent())return i;if(mL){var c=r.getAnchorOffset()===i.getBlockForKey(o).getLength();if(c){var d=i.getBlockForKey(l.nextSibling);if(!d||d.getLength()===0)return i}}}else if(n.isSelectionAtStartOfContent())return i;if(a=e(n),a===r)return i}return rpe.removeRange(i,a,t)}var pm=ape,ope=On,spe=dd,lpe=oD,upe=pm;function cpe(n){var e=upe(n,function(r){var i=r.getSelection(),a=r.getCurrentContent(),o=i.getAnchorKey(),s=i.getAnchorOffset(),l=a.getBlockForKey(o).getText()[s-1];return lpe(r,l?spe.getUTF16Length(l,0):1)},"backward");if(e===n.getCurrentContent())return n;var t=n.getSelection();return ope.push(n,e.set("selectionBefore",t),t.isCollapsed()?"backspace-character":"remove-range")}var e9=cpe,dpe=fa,Ape=Al,fpe=On,hpe=pa,ppe=D7,mpe=ppe.notEmptyKey,Spe=w2,gpe=e9,_pe=ha,xpe=hpe.isEngine("Gecko"),vpe=`

`;function wpe(n,e){switch(n){case"deleteContentBackward":return gpe(e)}return e}function ype(n,e){n._pendingStateFromBeforeInput!==void 0&&(n.update(n._pendingStateFromBeforeInput),n._pendingStateFromBeforeInput=void 0);var t=n.editor,r=t.ownerDocument.defaultView.getSelection(),i=r.anchorNode,a=r.isCollapsed,o=(i==null?void 0:i.nodeType)!==Node.TEXT_NODE&&(i==null?void 0:i.nodeType)!==Node.ELEMENT_NODE;if(!(i==null||o)){if(i.nodeType===Node.TEXT_NODE&&(i.previousSibling!==null||i.nextSibling!==null)){var s=i.parentNode;if(s==null)return;i.nodeValue=s.textContent;for(var l=s.firstChild;l!=null;l=l.nextSibling)l!==i&&s.removeChild(l)}var c=i.textContent,d=n._latestEditorState,h=_pe(Spe(i)),f=Ape.decode(h),m=f.blockKey,g=f.decoratorKey,x=f.leafKey,E=d.getBlockTree(m).getIn([g,"leaves",x]),_=E.start,v=E.end,C=d.getCurrentContent(),D=C.getBlockForKey(m),V=D.getText().slice(_,v);if(c.endsWith(vpe)&&(c=c.slice(0,-1)),c===V){var H=e.nativeEvent.inputType;if(H){var R=wpe(H,d);if(R!==d){n.restoreEditorDOM(),n.update(R);return}}return}var j=d.getSelection(),te=j.merge({anchorOffset:_,focusOffset:v,isBackward:!1}),$=D.getEntityAt(_),z=mpe($)?C.getEntity($):null,I=z!=null?z.getMutability():null,q=I==="MUTABLE",P=q?"spellcheck-change":"apply-entity",ee=dpe.replaceText(C,te,c,D.getInlineStyleAt(_),q?D.getEntityAt(_):null),ce,U,O,G;if(xpe)ce=r.anchorOffset,U=r.focusOffset,O=_+Math.min(ce,U),G=O+Math.abs(ce-U),ce=O,U=G;else{var re=c.length-V.length;O=j.getStartOffset(),G=j.getEndOffset(),ce=a?G+re:O,U=G+re}var oe=ee.merge({selectionBefore:C.getSelectionAfter(),selectionAfter:j.merge({anchorOffset:ce,focusOffset:U})});n.update(fpe.push(d,oe,P))}}var Epe=ype,Cpe=y2;function Vpe(n){return n.which===Cpe.RETURN&&(n.getModifierState("Shift")||n.getModifierState("Alt")||n.getModifierState("Control"))}var Dpe=Vpe,Fpe=pa,Tpe=Dpe,dw=Fpe.isPlatform("Mac OS X"),t9={isCtrlKeyCommand:function(e){return!!e.ctrlKey&&!e.altKey},isOptionKeyCommand:function(e){return dw&&e.altKey},usesMacOSHeuristics:function(){return dw},hasCommandModifier:function(e){return dw?!!e.metaKey&&!e.altKey:t9.isCtrlKeyCommand(e)},isSoftNewlineEvent:Tpe},sD=t9,SL=fa,gL=On,bpe=p2,Ppe=ha,Aw=null,Rpe={cut:function(e){var t=e.getCurrentContent(),r=e.getSelection(),i=null;if(r.isCollapsed()){var a=r.getAnchorKey(),o=t.getBlockForKey(a).getLength();if(o===r.getAnchorOffset()){var s=t.getKeyAfter(a);if(s==null)return e;i=r.set("focusKey",s).set("focusOffset",0)}else i=r.set("focusOffset",o)}else i=r;i=Ppe(i),Aw=bpe(t,i);var l=SL.removeRange(t,i,"forward");return l===t?e:gL.push(e,l,"remove-range")},paste:function(e){if(!Aw)return e;var t=SL.replaceWithFragment(e.getCurrentContent(),e.getSelection(),Aw);return gL.push(e,t,"insert-fragment")}},Lpe=Rpe,Bpe=pa,Mpe=rn,Ipe=Bpe.isBrowser("Chrome");function Ope(n){for(var e=n.cloneRange(),t=[],r=n.endContainer;r!=null;r=r.parentNode){var i=r===n.commonAncestorContainer;i?e.setStart(n.startContainer,n.startOffset):e.setStart(e.endContainer,0);var a=Array.from(e.getClientRects());if(t.push(a),i){var o;return t.reverse(),(o=[]).concat.apply(o,t)}e.setEndBefore(r)}Mpe(!1)}var kpe=Ipe?Ope:function(n){return Array.from(n.getClientRects())},n9=kpe,Npe=dd,Upe=v2,_L=n9,R4=rn;function jpe(n){var e=getComputedStyle(n),t=Upe(n),r=t.createElement("div");r.style.fontFamily=e.fontFamily,r.style.fontSize=e.fontSize,r.style.fontStyle=e.fontStyle,r.style.fontWeight=e.fontWeight,r.style.lineHeight=e.lineHeight,r.style.position="absolute",r.textContent="M";var i=t.body;i||R4(!1),i.appendChild(r);var a=r.getBoundingClientRect();return i.removeChild(r),a.height}function xL(n,e){for(var t=1/0,r=1/0,i=-1/0,a=-1/0,o=0;o<n.length;o++){var s=n[o];s.width===0||s.width===1||(t=Math.min(t,s.top),r=Math.min(r,s.bottom),i=Math.max(i,s.top),a=Math.max(a,s.bottom))}return i<=r&&i-t<e&&a-r<e}function Gpe(n){switch(n.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return n.length;default:return n.childNodes.length}}function Hpe(n){n.collapsed||R4(!1),n=n.cloneRange();var e=n.startContainer;e.nodeType!==1&&(e=e.parentNode);var t=jpe(e),r=n.endContainer,i=n.endOffset;for(n.setStart(n.startContainer,0);xL(_L(n),t)&&(r=n.startContainer,i=n.startOffset,r.parentNode||R4(!1),n.setStartBefore(r),!(r.nodeType===1&&getComputedStyle(r).display!=="inline")););var a=r,o=i-1;do{for(var s=a.nodeValue,l=o;l>=0;l--)if(!(s!=null&&l>0&&Npe.isSurrogatePair(s,l-1)))if(n.setStart(a,l),xL(_L(n),t))r=a,i=l;else break;if(l===-1||a.childNodes.length===0)break;a=a.childNodes[l],o=Gpe(a)}while(!0);return n.setStart(r,i),n}var zpe=Hpe,Wpe=On,Xpe=zpe,Kpe=E7,Ype=oD,qpe=pm;function Qpe(n,e){var t=qpe(n,function(r){var i=r.getSelection();if(i.isCollapsed()&&i.getAnchorOffset()===0)return Ype(r,1);var a=e.currentTarget.ownerDocument,o=a.defaultView.getSelection(),s=o.getRangeAt(0);return s=Xpe(s),Kpe(r,null,s.endContainer,s.endOffset,s.startContainer,s.startOffset).selectionState},"backward");return t===n.getCurrentContent()?n:Wpe.push(n,t,"remove-range")}var Jpe=Qpe,Zpe=`[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%"~=<>_:;\u30FB\u3001\u3002\u3008-\u3011\u3014-\u301F\uFF1A-\uFF1F\uFF01-\uFF0F\uFF3B-\uFF40\uFF5B-\uFF65\u2E2E\u061F\u066A-\u066C\u061B\u060C\u060D\uFD3E\uFD3F\u1801\u0964\u104A\u104B\u2010-\u2027\u2030-\u205E\xA1-\xB1\xB4-\xB8\xBA\xBB\xBF]`,$pe={getPunctuation:function(){return Zpe}},eme=$pe,tme=eme.getPunctuation(),r9="['\u2018\u2019]",rA="\\s|(?![_])"+tme,nme="^(?:"+rA+")*(?:"+r9+"|(?!"+rA+").)*(?:(?!"+rA+").)",rme=new RegExp(nme),ime="(?:(?!"+rA+").)(?:"+r9+"|(?!"+rA+").)*(?:"+rA+")*$",ame=new RegExp(ime);function vL(n,e){var t=e?ame.exec(n):rme.exec(n);return t?t[0]:n}var ome={getBackward:function(e){return vL(e,!0)},getForward:function(e){return vL(e,!1)}},i9=ome,sme=i9,lme=On,wL=oD,ume=pm;function cme(n){var e=ume(n,function(t){var r=t.getSelection(),i=r.getStartOffset();if(i===0)return wL(t,1);var a=r.getStartKey(),o=t.getCurrentContent(),s=o.getBlockForKey(a).getText().slice(0,i),l=sme.getBackward(s);return wL(t,l.length||1)},"backward");return e===n.getCurrentContent()?n:lme.push(n,e,"remove-range")}var dme=cme;function Ame(n,e){var t=n.getSelection(),r=t.getStartKey(),i=t.getStartOffset(),a=n.getCurrentContent(),o=r,s,l=a.getBlockForKey(r);return e>l.getText().length-i?(o=a.getKeyAfter(r),s=0):s=i+e,t.merge({focusKey:o,focusOffset:s})}var a9=Ame,fme=i9,hme=On,pme=a9,mme=pm;function Sme(n){var e=mme(n,function(t){var r=t.getSelection(),i=r.getStartOffset(),a=r.getStartKey(),o=t.getCurrentContent(),s=o.getBlockForKey(a).getText().slice(i),l=fme.getForward(s);return pme(t,l.length||1)},"forward");return e===n.getCurrentContent()?n:hme.push(n,e,"remove-range")}var gme=Sme,_me=fa,xme=On;function vme(n){var e=_me.splitBlock(n.getCurrentContent(),n.getSelection());return xme.push(n,e,"split-block")}var wme=vme,yme=On;function Eme(n){var e=n.getSelection(),t=e.getEndKey(),r=n.getCurrentContent(),i=r.getBlockForKey(t).getLength();return yme.set(n,{selection:e.merge({anchorKey:t,anchorOffset:i,focusKey:t,focusOffset:i,isBackward:!1}),forceSelection:!0})}var Cme=Eme,Vme=On;function Dme(n){var e=n.getSelection(),t=e.getStartKey();return Vme.set(n,{selection:e.merge({anchorKey:t,anchorOffset:0,focusKey:t,focusOffset:0,isBackward:!1}),forceSelection:!0})}var Fme=Dme,Tme=On,bme=dd,Pme=a9,Rme=pm;function Lme(n){var e=Rme(n,function(r){var i=r.getSelection(),a=r.getCurrentContent(),o=i.getAnchorKey(),s=i.getAnchorOffset(),l=a.getBlockForKey(o).getText()[s];return Pme(r,l?bme.getUTF16Length(l,0):1)},"forward");if(e===n.getCurrentContent())return n;var t=n.getSelection();return Tme.push(n,e.set("selectionBefore",t),t.isCollapsed()?"delete-character":"remove-range")}var Bme=Lme,yL=fa,EL=On,Mme=p2;function Ime(n){var e=n.getSelection();if(!e.isCollapsed())return n;var t=e.getAnchorOffset();if(t===0)return n;var r=e.getAnchorKey(),i=n.getCurrentContent(),a=i.getBlockForKey(r),o=a.getLength();if(o<=1)return n;var s,l;t===o?(s=e.set("anchorOffset",t-1),l=e):(s=e.set("focusOffset",t+1),l=s.set("anchorOffset",t+1));var c=Mme(i,s),d=yL.removeRange(i,s,"backward"),h=d.getSelectionAfter(),f=h.getAnchorOffset()-1,m=h.merge({anchorOffset:f,focusOffset:f}),g=yL.replaceWithFragment(d,m,c),x=EL.push(n,g,"insert-fragment");return EL.acceptSelection(x,l)}var Ome=Ime,fw=On;function kme(n,e,t){var r=fw.undo(e);if(e.getLastChangeType()==="spellcheck-change"){var i=r.getCurrentContent();t(fw.set(r,{nativelyRenderedContent:i}));return}if(n.preventDefault(),!e.getNativelyRenderedContent()){t(r);return}t(fw.set(e,{nativelyRenderedContent:null})),setTimeout(function(){t(r)},0)}var Nme=kme,Ume=fa,o9=On,jme=sD,Ns=y2,CL=Lpe,Gme=pa,VL=D2,Hme=Jpe,zme=dme,Wme=gme,Xme=wme,Kme=Cme,Yme=Fme,qme=e9,Qme=Bme,Jme=Ome,Zme=Nme,DL=jme.isOptionKeyCommand,FL=Gme.isBrowser("Chrome");function $me(n,e,t){switch(n){case"redo":return o9.redo(e);case"delete":return Qme(e);case"delete-word":return Wme(e);case"backspace":return qme(e);case"backspace-word":return zme(e);case"backspace-to-start-of-line":return Hme(e,t);case"split-block":return Xme(e);case"transpose-characters":return Jme(e);case"move-selection-to-start-of-block":return Yme(e);case"move-selection-to-end-of-block":return Kme(e);case"secondary-cut":return CL.cut(e);case"secondary-paste":return CL.paste(e);default:return e}}function eSe(n,e){var t=e.which,r=n._latestEditorState;function i(l){var c=n.props[l];return c?(c(e),!0):!1}switch(t){case Ns.RETURN:if(e.preventDefault(),n.props.handleReturn&&VL(n.props.handleReturn(e,r)))return;break;case Ns.ESC:if(e.preventDefault(),i("onEscape"))return;break;case Ns.TAB:if(i("onTab"))return;break;case Ns.UP:if(i("onUpArrow"))return;break;case Ns.RIGHT:if(i("onRightArrow"))return;break;case Ns.DOWN:if(i("onDownArrow"))return;break;case Ns.LEFT:if(i("onLeftArrow"))return;break;case Ns.SPACE:FL&&DL(e)&&e.preventDefault()}var a=n.props.keyBindingFn(e);if(a==null||a===""){if(t===Ns.SPACE&&FL&&DL(e)){var o=Ume.replaceText(r.getCurrentContent(),r.getSelection(),"\xA0");n.update(o9.push(r,o,"insert-characters"))}return}if(a==="undo"){Zme(e,r,n.update);return}if(e.preventDefault(),!(n.props.handleKeyCommand&&VL(n.props.handleKeyCommand(a,r,e.timeStamp)))){var s=$me(a,r,e);s!==r&&n.update(s)}}var tSe=eSe;function nSe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var rSe=function(){function n(t){nSe(this,"_uri",void 0),this._uri=t}var e=n.prototype;return e.toString=function(){return this._uri},n}(),iSe=rSe,aSe=pa,oSe=rn,sSe=aSe.isBrowser("IE <= 9");function lSe(n){var e,t=null;return!sSe&&document.implementation&&document.implementation.createHTMLDocument&&(e=document.implementation.createHTMLDocument("foo"),e.documentElement||oSe(!1),e.documentElement.innerHTML=n,t=e.getElementsByTagName("body")[0]),t}var s9=lSe,uSe=ud;function cSe(n){return!n||!n.ownerDocument?!1:uSe(n)&&n.nodeName==="A"}var dSe=cSe,ASe=ud;function fSe(n){return!n||!n.ownerDocument?!1:ASe(n)&&n.nodeName==="IMG"}var hSe=fSe,oc;function hw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){di(n,i,t[i])})}return n}function di(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var pSe=mo,mSe=sd,SSe=So,gSe=ZV,TL=m2,l9=iSe,Jf=ld,bL=ws,_Se=s9,u9=Ou,lD=q0.exports,Nl=lD.List,c9=lD.Map,xSe=lD.OrderedSet,d9=dSe,vSe=T7,uD=hm,A9=hSe,PL=u9("draft_tree_data_support"),wSe="&nbsp;",f9=" ",ySe=new RegExp("\r","g"),ESe=new RegExp(`
`,"g"),CSe=new RegExp(`^
`,"g"),VSe=new RegExp(wSe,"g"),DSe=new RegExp("&#13;?","g"),FSe=new RegExp("&#8203;?","g"),TSe=["bold","bolder","500","600","700","800","900"],bSe=["light","lighter","normal","100","200","300","400"],PSe=["className","href","rel","target","title"],RSe=["alt","className","height","src","width"],RL=(oc={},di(oc,Jf("public/DraftStyleDefault/depth0"),0),di(oc,Jf("public/DraftStyleDefault/depth1"),1),di(oc,Jf("public/DraftStyleDefault/depth2"),2),di(oc,Jf("public/DraftStyleDefault/depth3"),3),di(oc,Jf("public/DraftStyleDefault/depth4"),4),oc),LL=c9({b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE",mark:"HIGHLIGHT"}),LSe=function(e){var t={};return e.mapKeys(function(r,i){var a=[i.element];i.aliasedElements!==void 0&&a.push.apply(a,i.aliasedElements),a.forEach(function(o){t[o]===void 0?t[o]=r:typeof t[o]=="string"?t[o]=[t[o],r]:t[o].push(r)})}),c9(t)},BSe=function(e){if(uD(e)){var t=e;if(t.style.fontFamily.includes("monospace"))return"CODE"}return null},MSe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Object.keys(RL).some(function(r){e.classList.contains(r)&&(t=RL[r])}),t},ISe=function(e){if(!d9(e))return!1;var t=e;if(!t.href||t.protocol!=="http:"&&t.protocol!=="https:"&&t.protocol!=="mailto:"&&t.protocol!=="tel:")return!1;try{var r=new l9(t.href);return!0}catch{return!1}},OSe=function(e){if(!A9(e))return!1;var t=e;return!!(t.attributes.getNamedItem("src")&&t.attributes.getNamedItem("src").value)},kSe=function(e,t){if(!uD(e))return t;var r=e,i=r.style.fontWeight,a=r.style.fontStyle,o=r.style.textDecoration;return t.withMutations(function(s){TSe.indexOf(i)>=0?s.add("BOLD"):bSe.indexOf(i)>=0&&s.remove("BOLD"),a==="italic"?s.add("ITALIC"):a==="normal"&&s.remove("ITALIC"),o==="underline"&&s.add("UNDERLINE"),o==="line-through"&&s.add("STRIKETHROUGH"),o==="none"&&(s.remove("UNDERLINE"),s.remove("STRIKETHROUGH"))})},pw=function(e){return e==="ul"||e==="ol"},NSe=function(){function n(t,r){di(this,"characterList",Nl()),di(this,"currentBlockType","unstyled"),di(this,"currentDepth",0),di(this,"currentEntity",null),di(this,"currentText",""),di(this,"wrapper",null),di(this,"blockConfigs",[]),di(this,"contentBlocks",[]),di(this,"entityMap",TL),di(this,"blockTypeMap",void 0),di(this,"disambiguate",void 0),this.clear(),this.blockTypeMap=t,this.disambiguate=r}var e=n.prototype;return e.clear=function(){this.characterList=Nl(),this.blockConfigs=[],this.currentBlockType="unstyled",this.currentDepth=0,this.currentEntity=null,this.currentText="",this.entityMap=TL,this.wrapper=null,this.contentBlocks=[]},e.addDOMNode=function(r){var i;return this.contentBlocks=[],this.currentDepth=0,(i=this.blockConfigs).push.apply(i,this._toBlockConfigs([r],xSe())),this._trimCurrentText(),this.currentText!==""&&this.blockConfigs.push(this._makeBlockConfig()),this},e.getContentBlocks=function(){return this.contentBlocks.length===0&&(PL?this._toContentBlocks(this.blockConfigs):this._toFlatContentBlocks(this.blockConfigs)),{contentBlocks:this.contentBlocks,entityMap:this.entityMap}},e._makeBlockConfig=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.key||bL(),a=hw({key:i,type:this.currentBlockType,text:this.currentText,characterList:this.characterList,depth:this.currentDepth,parent:null,children:Nl(),prevSibling:null,nextSibling:null,childConfigs:[]},r);return this.characterList=Nl(),this.currentBlockType="unstyled",this.currentText="",a},e._toBlockConfigs=function(r,i){for(var a=[],o=0;o<r.length;o++){var s=r[o],l=s.nodeName.toLowerCase();if(l==="body"||pw(l)){this._trimCurrentText(),this.currentText!==""&&a.push(this._makeBlockConfig());var c=this.currentDepth,d=this.wrapper;pw(l)&&(this.wrapper=l,pw(d)&&this.currentDepth++),a.push.apply(a,this._toBlockConfigs(Array.from(s.childNodes),i)),this.currentDepth=c,this.wrapper=d;continue}var h=this.blockTypeMap.get(l);if(h!==void 0){this._trimCurrentText(),this.currentText!==""&&a.push(this._makeBlockConfig());var f=this.currentDepth,m=this.wrapper;if(this.wrapper=l==="pre"?"pre":this.wrapper,typeof h!="string"&&(h=this.disambiguate(l,this.wrapper)||h[0]||"unstyled"),!PL&&uD(s)&&(h==="unordered-list-item"||h==="ordered-list-item")){var g=s;this.currentDepth=MSe(g,this.currentDepth)}var x=bL(),E=this._toBlockConfigs(Array.from(s.childNodes),i);this._trimCurrentText(),a.push(this._makeBlockConfig({key:x,childConfigs:E,type:h})),this.currentDepth=f,this.wrapper=m;continue}if(l==="#text"){this._addTextNode(s,i);continue}if(l==="br"){this._addBreakNode(s,i);continue}if(OSe(s)){this._addImgNode(s,i);continue}if(ISe(s)){this._addAnchorNode(s,a,i);continue}var _=i;LL.has(l)&&(_=_.add(LL.get(l))),_=kSe(s,_);var v=BSe(s);v!=null&&(_=_.add(v)),a.push.apply(a,this._toBlockConfigs(Array.from(s.childNodes),_))}return a},e._appendText=function(r,i){var a;this.currentText+=r;var o=pSe.create({style:i,entity:this.currentEntity});this.characterList=(a=this.characterList).push.apply(a,Array(r.length).fill(o))},e._trimCurrentText=function(){var r=this.currentText.length,i=r-this.currentText.trimLeft().length,a=this.currentText.trimRight().length,o=this.characterList.findEntry(function(s){return s.getEntity()!==null});i=o!==void 0?Math.min(i,o[0]):i,o=this.characterList.reverse().findEntry(function(s){return s.getEntity()!==null}),a=o!==void 0?Math.max(a,r-o[0]):a,i>a?(this.currentText="",this.characterList=Nl()):(this.currentText=this.currentText.slice(i,a),this.characterList=this.characterList.slice(i,a))},e._addTextNode=function(r,i){var a=r.textContent,o=a.trim();o===""&&this.wrapper!=="pre"&&(a=" "),this.wrapper!=="pre"&&(a=a.replace(CSe,""),a=a.replace(ESe,f9)),this._appendText(a,i)},e._addBreakNode=function(r,i){!vSe(r)||this._appendText(`
`,i)},e._addImgNode=function(r,i){if(!!A9(r)){var a=r,o={};RSe.forEach(function(s){var l=a.getAttribute(s);l&&(o[s]=l)}),this.currentEntity=this.entityMap.__create("IMAGE","IMMUTABLE",o),u9("draftjs_fix_paste_for_img")?a.getAttribute("role")!=="presentation"&&this._appendText("\u{1F4F7}",i):this._appendText("\u{1F4F7}",i),this.currentEntity=null}},e._addAnchorNode=function(r,i,a){if(!!d9(r)){var o=r,s={};PSe.forEach(function(l){var c=o.getAttribute(l);c&&(s[l]=c)}),s.url=new l9(o.href).toString(),this.currentEntity=this.entityMap.__create("LINK","MUTABLE",s||{}),i.push.apply(i,this._toBlockConfigs(Array.from(r.childNodes),a)),this.currentEntity=null}},e._toContentBlocks=function(r){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=r.length-1,o=0;o<=a;o++){var s=r[o];s.parent=i,s.prevSibling=o>0?r[o-1].key:null,s.nextSibling=o<a?r[o+1].key:null,s.children=Nl(s.childConfigs.map(function(l){return l.key})),this.contentBlocks.push(new SSe(hw({},s))),this._toContentBlocks(s.childConfigs,s.key)}},e._hoistContainersInBlockConfigs=function(r){var i=this,a=Nl(r).flatMap(function(o){return o.type!=="unstyled"||o.text!==""?[o]:i._hoistContainersInBlockConfigs(o.childConfigs)});return a},e._toFlatContentBlocks=function(r){var i=this,a=this._hoistContainersInBlockConfigs(r);a.forEach(function(o){var s=i._extractTextFromBlockConfigs(o.childConfigs),l=s.text,c=s.characterList;i.contentBlocks.push(new mSe(hw({},o,{text:o.text+l,characterList:o.characterList.concat(c)})))})},e._extractTextFromBlockConfigs=function(r){for(var i=r.length-1,a="",o=Nl(),s=0;s<=i;s++){var l=r[s];a+=l.text,o=o.concat(l.characterList),a!==""&&l.type!=="unstyled"&&(a+=`
`,o=o.push(o.last()));var c=this._extractTextFromBlockConfigs(l.childConfigs);a+=c.text,o=o.concat(c.characterList)}return{text:a,characterList:o}},n}(),USe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_Se,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gSe;e=e.trim().replace(ySe,"").replace(VSe,f9).replace(DSe,"").replace(FSe,"");var i=t(e);if(!i)return null;var a=LSe(r),o=function(l,c){return l==="li"?c==="ol"?"ordered-list-item":"unordered-list-item":null};return new NSe(a,o).addDOMNode(i).getContentBlocks()},h9=USe;function jSe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){GSe(n,i,t[i])})}return n}function GSe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var HSe=sd,zSe=So,WSe=h9,XSe=ws,KSe=s9,YSe=Ou,p9=q0.exports,qSe=JN,QSe=p9.List,JSe=p9.Repeat,m9=YSe("draft_tree_data_support"),ZSe=m9?zSe:HSe,$Se={processHTML:function(e,t){return WSe(e,KSe,t)},processText:function(e,t,r){return e.reduce(function(i,a,o){a=qSe(a);var s=XSe(),l={key:s,type:r,text:a,characterList:QSe(JSe(t,a.length))};if(m9&&o!==0){var c=o-1,d=i[c]=i[c].merge({nextSibling:s});l=jSe({},l,{prevSibling:d.getKey()})}return i.push(new ZSe(l)),i},[])}},ege=$Se;function tge(n,e,t,r){var i=e.getStartKey(),a=e.getEndKey(),o=n.getBlockMap(),s=o.toSeq().skipUntil(function(l,c){return c===i}).takeUntil(function(l,c){return c===a}).concat([[a,o.get(a)]]).map(function(l){var c=l.getDepth()+t;return c=Math.max(0,Math.min(c,r)),l.set("depth",c)});return o=o.merge(s),n.merge({blockMap:o,selectionBefore:e,selectionAfter:e})}var nge=tge,sc=fa,$o=On,rge=nge,ige=ha,is={currentBlockContainsLink:function(e){var t=e.getSelection(),r=e.getCurrentContent(),i=r.getEntityMap();return r.getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some(function(a){var o=a.getEntity();return!!o&&i.__get(o).getType()==="LINK"})},getCurrentBlockType:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey()).getType()},getDataObjectForLinkURL:function(e){return{url:e.toString()}},handleKeyCommand:function(e,t,r){switch(t){case"bold":return is.toggleInlineStyle(e,"BOLD");case"italic":return is.toggleInlineStyle(e,"ITALIC");case"underline":return is.toggleInlineStyle(e,"UNDERLINE");case"code":return is.toggleCode(e);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return is.onBackspace(e);case"delete":case"delete-word":case"delete-to-end-of-block":return is.onDelete(e);default:return null}},insertSoftNewline:function(e){var t=sc.insertText(e.getCurrentContent(),e.getSelection(),`
`,e.getCurrentInlineStyle(),null),r=$o.push(e,t,"insert-characters");return $o.forceSelection(r,t.getSelectionAfter())},onBackspace:function(e){var t=e.getSelection();if(!t.isCollapsed()||t.getAnchorOffset()||t.getFocusOffset())return null;var r=e.getCurrentContent(),i=t.getStartKey(),a=r.getBlockBefore(i);if(a&&a.getType()==="atomic"){var o=r.getBlockMap().delete(a.getKey()),s=r.merge({blockMap:o,selectionAfter:t});if(s!==r)return $o.push(e,s,"remove-range")}var l=is.tryToRemoveBlockStyle(e);return l?$o.push(e,l,"change-block-type"):null},onDelete:function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var r=e.getCurrentContent(),i=t.getStartKey(),a=r.getBlockForKey(i),o=a.getLength();if(t.getStartOffset()<o)return null;var s=r.getBlockAfter(i);if(!s||s.getType()!=="atomic")return null;var l=t.merge({focusKey:s.getKey(),focusOffset:s.getLength()}),c=sc.removeRange(r,l,"forward");return c!==r?$o.push(e,c,"remove-range"):null},onTab:function(e,t,r){var i=t.getSelection(),a=i.getAnchorKey();if(a!==i.getFocusKey())return t;var o=t.getCurrentContent(),s=o.getBlockForKey(a),l=s.getType();if(l!=="unordered-list-item"&&l!=="ordered-list-item")return t;e.preventDefault();var c=s.getDepth();if(!e.shiftKey&&c===r)return t;var d=rge(o,i,e.shiftKey?-1:1,r);return $o.push(t,d,"adjust-depth")},toggleBlockType:function(e,t){var r=e.getSelection(),i=r.getStartKey(),a=r.getEndKey(),o=e.getCurrentContent(),s=r;if(i!==a&&r.getEndOffset()===0){var l=ige(o.getBlockBefore(a));a=l.getKey(),s=s.merge({anchorKey:i,anchorOffset:r.getStartOffset(),focusKey:a,focusOffset:l.getLength(),isBackward:!1})}var c=o.getBlockMap().skipWhile(function(h,f){return f!==i}).reverse().skipWhile(function(h,f){return f!==a}).some(function(h){return h.getType()==="atomic"});if(c)return e;var d=o.getBlockForKey(i).getType()===t?"unstyled":t;return $o.push(e,sc.setBlockType(o,s,d),"change-block-type")},toggleCode:function(e){var t=e.getSelection(),r=t.getAnchorKey(),i=t.getFocusKey();return t.isCollapsed()||r!==i?is.toggleBlockType(e,"code-block"):is.toggleInlineStyle(e,"CODE")},toggleInlineStyle:function(e,t){var r=e.getSelection(),i=e.getCurrentInlineStyle();if(r.isCollapsed())return $o.setInlineStyleOverride(e,i.has(t)?i.remove(t):i.add(t));var a=e.getCurrentContent(),o;return i.has(t)?o=sc.removeInlineStyle(a,r,t):o=sc.applyInlineStyle(a,r,t),$o.push(e,o,"change-inline-style")},toggleLink:function(e,t,r){var i=sc.applyEntity(e.getCurrentContent(),t,r);return $o.push(e,i,"apply-entity")},tryToRemoveBlockStyle:function(e){var t=e.getSelection(),r=t.getAnchorOffset();if(t.isCollapsed()&&r===0){var i=t.getAnchorKey(),a=e.getCurrentContent(),o=a.getBlockForKey(i),s=o.getType(),l=a.getBlockBefore(i);if(s==="code-block"&&l&&l.getType()==="code-block"&&l.getLength()!==0)return null;if(s!=="unstyled")return sc.setBlockType(a,t,"unstyled")}return null}},S9=is,age=/\r\n?|\n/g;function oge(n){return n.split(age)}var sge=oge,mw=sm,BL=mo,lge=W7,g9=fa,Sw=ege,_9=On,ML=S9,IL=eD,uge=X7,OL=D2,kL=sge;function cge(n,e){e.preventDefault();var t=new lge(e.clipboardData);if(!t.isRichText()){var r=t.getFiles(),i=t.getText();if(r.length>0){if(n.props.handlePastedFiles&&OL(n.props.handlePastedFiles(r)))return;uge(r,function(H){if(H=H||i,!!H){var R=n._latestEditorState,j=kL(H),te=BL.create({style:R.getCurrentInlineStyle(),entity:IL(R.getCurrentContent(),R.getSelection())}),$=ML.getCurrentBlockType(R),z=Sw.processText(j,te,$),I=mw.createFromArray(z),q=g9.replaceWithFragment(R.getCurrentContent(),R.getSelection(),I);n.update(_9.push(R,q,"insert-fragment"))}});return}}var a=[],o=t.getText(),s=t.getHTML(),l=n._latestEditorState;if(n.props.formatPastedText){var c=n.props.formatPastedText(o,s),d=c.text,h=c.html;o=d,s=h}if(!(n.props.handlePastedText&&OL(n.props.handlePastedText(o,s,l)))){if(o&&(a=kL(o)),!n.props.stripPastedStyles){var f=n.getClipboard();if(!n.props.formatPastedText&&t.isRichText()&&f){var m;if(((m=s)===null||m===void 0?void 0:m.indexOf(n.getEditorKey()))!==-1||a.length===1&&f.size===1&&f.first().getText()===o){n.update(Sg(n._latestEditorState,f));return}}else if(f&&t.types.includes("com.apple.webarchive")&&!t.types.includes("text/html")&&dge(a,f)){n.update(Sg(n._latestEditorState,f));return}if(s){var g=Sw.processHTML(s,n.props.blockRenderMap);if(g){var x=g.contentBlocks,E=g.entityMap;if(x){var _=mw.createFromArray(x);n.update(Sg(n._latestEditorState,_,E));return}}}n.setClipboard(null)}if(a.length){var v=BL.create({style:l.getCurrentInlineStyle(),entity:IL(l.getCurrentContent(),l.getSelection())}),C=ML.getCurrentBlockType(l),D=Sw.processText(a,v,C),V=mw.createFromArray(D);n.update(Sg(n._latestEditorState,V))}}}function Sg(n,e,t){var r=g9.replaceWithFragment(n.getCurrentContent(),n.getSelection(),e);return _9.push(n,r.set("entityMap",t),"insert-fragment")}function dge(n,e){return n.length===e.size&&e.valueSeq().every(function(t,r){return t.getText()===n[r]})}var Age=cge,x9=pa,fge=mhe,hge=xhe,pge=yhe,mge=Fhe,Sge=Nhe,gge=jhe,_ge=Hhe,xge=Xhe,vge=Epe,wge=tSe,yge=Age,v9=V7,Ege=x9.isBrowser("Chrome"),Cge=x9.isBrowser("Firefox"),NL=Ege||Cge?v9:function(n){},Vge={onBeforeInput:fge,onBlur:hge,onCompositionStart:pge,onCopy:mge,onCut:Sge,onDragOver:gge,onDragStart:_ge,onFocus:xge,onInput:vge,onKeyDown:wge,onPaste:yge,onSelect:v9,onMouseUp:NL,onKeyUp:NL},Dge=Vge,Fge=ls.exports,Tge=Fge.unstable_flushControlled,bge=Tge,UL=Wo.jsx;function Pge(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Rge=Ne.exports,jL=ld,Lge=function(n){Pge(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.shouldComponentUpdate=function(i){return this.props.text!==i.text||this.props.editorState.getSelection().getHasFocus()!==i.editorState.getSelection().getHasFocus()},t.render=function(){var i=this.props.editorState.getSelection().getHasFocus(),a=jL({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":i}),o={whiteSpace:"pre-wrap"};return UL("div",{className:a,children:UL("div",{className:jL("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID,style:o,children:this.props.text})})},e}(Rge.Component),Bge=Lge,w9=sD,Zf=y2,y9=pa,$l=y9.isPlatform("Mac OS X"),GL=$l&&y9.isBrowser("Firefox < 29"),Wl=w9.hasCommandModifier,Us=w9.isCtrlKeyCommand;function E9(n){return $l&&n.altKey||Us(n)}function Mge(n){return Wl(n)?n.shiftKey?"redo":"undo":null}function Ige(n){return!$l&&n.shiftKey?null:E9(n)?"delete-word":"delete"}function Oge(n){return Wl(n)&&$l?"backspace-to-start-of-line":E9(n)?"backspace-word":"backspace"}function kge(n){switch(n.keyCode){case 66:return Wl(n)?"bold":null;case 68:return Us(n)?"delete":null;case 72:return Us(n)?"backspace":null;case 73:return Wl(n)?"italic":null;case 74:return Wl(n)?"code":null;case 75:return $l&&Us(n)?"secondary-cut":null;case 77:return Us(n)?"split-block":null;case 79:return Us(n)?"split-block":null;case 84:return $l&&Us(n)?"transpose-characters":null;case 85:return Wl(n)?"underline":null;case 87:return $l&&Us(n)?"backspace-word":null;case 89:return Us(n)?$l?"secondary-paste":"redo":null;case 90:return Mge(n)||null;case Zf.RETURN:return"split-block";case Zf.DELETE:return Ige(n);case Zf.BACKSPACE:return Oge(n);case Zf.LEFT:return GL&&Wl(n)?"move-selection-to-start-of-block":null;case Zf.RIGHT:return GL&&Wl(n)?"move-selection-to-end-of-block":null;default:return null}}var C9=kge,gw=Wo.jsx,Nge=Ne.exports.createElement,HL=Wo.jsxs;function _w(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){r0(n,i,t[i])})}return n}function s0(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function r0(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function V9(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Uge=ZV,jge=A7,Gge=Z1e,Hge=Vfe,zge=nhe,Wge=Dge,zL=bge,Xge=Bge,Kge=On,D9=Ne.exports,Yge=iD,qge=E2,Qge=pa,xw=ld,Jge=ws,Zge=C9,$ge=C2,e8e=Ou,WL=rn,XL=hm,t8e=ha,F9=Qge.isBrowser("IE"),n8e=!F9,KL={edit:Wge,composite:Gge,drag:zge,cut:null,render:null},YL=!1,r8e=function(n){V9(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){return null},t.componentDidMount=function(){this._update()},t.componentDidUpdate=function(){this._update()},t._update=function(){var i=this.props.editor;i._latestEditorState=this.props.editorState,i._blockSelectEvents=!0},e}(D9.Component),T9=function(n){V9(e,n);function e(r){var i;return i=n.call(this,r)||this,r0(s0(i),"_blockSelectEvents",void 0),r0(s0(i),"_clipboard",void 0),r0(s0(i),"_handler",void 0),r0(s0(i),"_dragCount",void 0),r0(s0(i),"_internalDrag",void 0),r0(s0(i),"_editorKey",void 0),r0(s0(i),"_placeholderAccessibilityID",void 0),r0(s0(i),"_latestEditorState",void 0),r0(s0(i),"_latestCommittedEditorState",void 0),r0(s0(i),"_pendingStateFromBeforeInput",void 0),r0(s0(i),"_onBeforeInput",void 0),r0(s0(i),"_onBlur",void 0),r0(s0(i),"_onCharacterData",void 0),r0(s0(i),"_onCompositionEnd",void 0),r0(s0(i),"_onCompositionStart",void 0),r0(s0(i),"_onCopy",void 0),r0(s0(i),"_onCut",void 0),r0(s0(i),"_onDragEnd",void 0),r0(s0(i),"_onDragOver",void 0),r0(s0(i),"_onDragStart",void 0),r0(s0(i),"_onDrop",void 0),r0(s0(i),"_onInput",void 0),r0(s0(i),"_onFocus",void 0),r0(s0(i),"_onKeyDown",void 0),r0(s0(i),"_onKeyPress",void 0),r0(s0(i),"_onKeyUp",void 0),r0(s0(i),"_onMouseDown",void 0),r0(s0(i),"_onMouseUp",void 0),r0(s0(i),"_onPaste",void 0),r0(s0(i),"_onSelect",void 0),r0(s0(i),"editor",void 0),r0(s0(i),"editorContainer",void 0),r0(s0(i),"focus",void 0),r0(s0(i),"blur",void 0),r0(s0(i),"setMode",void 0),r0(s0(i),"exitCurrentMode",void 0),r0(s0(i),"restoreEditorDOM",void 0),r0(s0(i),"setClipboard",void 0),r0(s0(i),"getClipboard",void 0),r0(s0(i),"getEditorKey",void 0),r0(s0(i),"update",void 0),r0(s0(i),"onDragEnter",void 0),r0(s0(i),"onDragLeave",void 0),r0(s0(i),"_handleEditorContainerRef",function(a){i.editorContainer=a,i.editor=a!==null?a.firstChild:null}),r0(s0(i),"focus",function(a){var o=i.props.editorState,s=o.getSelection().getHasFocus(),l=i.editor;if(!!l){var c=qge.getScrollParent(l),d=a||$ge(c),h=d.x,f=d.y;XL(l)||WL(!1),l.focus(),c===window?window.scrollTo(h,f):Yge.setTop(c,f),s||i.update(Kge.forceSelection(o,o.getSelection()))}}),r0(s0(i),"blur",function(){var a=i.editor;!a||(XL(a)||WL(!1),a.blur())}),r0(s0(i),"setMode",function(a){var o=i.props,s=o.onPaste,l=o.onCut,c=o.onCopy,d=_w({},KL.edit);s&&(d.onPaste=s),l&&(d.onCut=l),c&&(d.onCopy=c);var h=_w({},KL,{edit:d});i._handler=h[a]}),r0(s0(i),"exitCurrentMode",function(){i.setMode("edit")}),r0(s0(i),"restoreEditorDOM",function(a){i.setState({contentsKey:i.state.contentsKey+1},function(){i.focus(a)})}),r0(s0(i),"setClipboard",function(a){i._clipboard=a}),r0(s0(i),"getClipboard",function(){return i._clipboard}),r0(s0(i),"update",function(a){i._latestEditorState=a,i.props.onChange(a)}),r0(s0(i),"onDragEnter",function(){i._dragCount++}),r0(s0(i),"onDragLeave",function(){i._dragCount--,i._dragCount===0&&i.exitCurrentMode()}),i._blockSelectEvents=!1,i._clipboard=null,i._handler=null,i._dragCount=0,i._editorKey=r.editorKey||Jge(),i._placeholderAccessibilityID="placeholder-"+i._editorKey,i._latestEditorState=r.editorState,i._latestCommittedEditorState=r.editorState,i._onBeforeInput=i._buildHandler("onBeforeInput"),i._onBlur=i._buildHandler("onBlur"),i._onCharacterData=i._buildHandler("onCharacterData"),i._onCompositionEnd=i._buildHandler("onCompositionEnd"),i._onCompositionStart=i._buildHandler("onCompositionStart"),i._onCopy=i._buildHandler("onCopy"),i._onCut=i._buildHandler("onCut"),i._onDragEnd=i._buildHandler("onDragEnd"),i._onDragOver=i._buildHandler("onDragOver"),i._onDragStart=i._buildHandler("onDragStart"),i._onDrop=i._buildHandler("onDrop"),i._onInput=i._buildHandler("onInput"),i._onFocus=i._buildHandler("onFocus"),i._onKeyDown=i._buildHandler("onKeyDown"),i._onKeyPress=i._buildHandler("onKeyPress"),i._onKeyUp=i._buildHandler("onKeyUp"),i._onMouseDown=i._buildHandler("onMouseDown"),i._onMouseUp=i._buildHandler("onMouseUp"),i._onPaste=i._buildHandler("onPaste"),i._onSelect=i._buildHandler("onSelect"),i.getEditorKey=function(){return i._editorKey},i.state={contentsKey:0},i}var t=e.prototype;return t._buildHandler=function(i){var a=this;return function(o){if(!a.props.readOnly){var s=a._handler&&a._handler[i];s&&(zL?zL(function(){return s(a,o)}):s(a,o))}}},t._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},t._renderPlaceholder=function(){if(this._showPlaceholder()){var i={text:t8e(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return gw(Xge,{...i})}return null},t._renderARIADescribedBy=function(){var i=this.props.ariaDescribedBy||"",a=this._showPlaceholder()?this._placeholderAccessibilityID:"";return i.replace("{{editor_id_placeholder}}",a)||void 0},t.render=function(){var i=this.props,a=i.blockRenderMap,o=i.blockRendererFn,s=i.blockStyleFn,l=i.customStyleFn,c=i.customStyleMap,d=i.editorState,h=i.preventScroll,f=i.readOnly,m=i.textAlignment,g=i.textDirectionality,x=xw({"DraftEditor/root":!0,"DraftEditor/alignLeft":m==="left","DraftEditor/alignRight":m==="right","DraftEditor/alignCenter":m==="center"}),E={outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},_=this.props.role||"textbox",v=_==="combobox"?!!this.props.ariaExpanded:null,C={blockRenderMap:a,blockRendererFn:o,blockStyleFn:s,customStyleMap:_w({},jge,c),customStyleFn:l,editorKey:this._editorKey,editorState:d,preventScroll:h,textDirectionality:g};return HL("div",{className:x,children:[this._renderPlaceholder(),gw("div",{className:xw("DraftEditor/editorContainer"),ref:this._handleEditorContainerRef,children:HL("div",{"aria-activedescendant":f?null:this.props.ariaActiveDescendantID,"aria-autocomplete":f?null:this.props.ariaAutoComplete,"aria-controls":f?null:this.props.ariaControls,"aria-describedby":this._renderARIADescribedBy(),"aria-expanded":f?null:v,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,"aria-owns":f?null:this.props.ariaOwneeID,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:xw({notranslate:!f,"public/DraftEditor/content":!0}),contentEditable:!f,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:this.props.editorRef,role:f?null:_,spellCheck:n8e&&this.props.spellCheck,style:E,suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex,children:[gw(r8e,{editor:this,editorState:d}),Nge(Hge,{...C,key:"contents"+this.state.contentsKey})]})})]})},t.componentDidMount=function(){this._blockSelectEvents=!1,!YL&&e8e("draft_ods_enabled")&&(YL=!0),this.setMode("edit"),F9&&(this.editor?this.editor.ownerDocument.execCommand("AutoUrlDetect",!1,!1):window.execCommand("AutoUrlDetect",!1,!1))},t.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestEditorState=this.props.editorState,this._latestCommittedEditorState=this.props.editorState},e}(D9.Component);r0(T9,"defaultProps",{ariaDescribedBy:"{{editor_id_placeholder}}",blockRenderMap:Uge,blockRendererFn:function(){return null},blockStyleFn:function(){return""},keyBindingFn:Zge,readOnly:!1,spellCheck:!1,stripPastedStyles:!1});var i8e=T9,a8e={},o8e={stringify:function(e){return"_"+String(e)},unstringify:function(e){return e.slice(1)}},b9=o8e,s8e=b9,l8e=dd,qL=l8e.strlen;function u8e(n,e){var t=[];return n.findEntityRanges(function(r){return!!r.getEntity()},function(r,i){var a=n.getText(),o=n.getEntityAt(r);t.push({offset:qL(a.slice(0,r)),length:qL(a.slice(r,i)),key:Number(e[s8e.stringify(o)])})}),t}var c8e=u8e,QL=dd,d8e=lm,A8e=function(e,t){return e===t},f8e=function(e){return!!e},h8e=[];function p8e(n,e,t){var r=[],i=e.map(function(a){return a.has(t)}).toList();return d8e(i,A8e,f8e,function(a,o){var s=n.getText();r.push({offset:QL.strlen(s.slice(0,a)),length:QL.strlen(s.slice(a,o)),style:t})}),r}function m8e(n){var e=n.getCharacterList().map(function(r){return r.getStyle()}).toList(),t=e.flatten().toSet().map(function(r){return p8e(n,e,r)});return Array.prototype.concat.apply(h8e,t.toJS())}var S8e=m8e;function g8e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){_8e(n,i,t[i])})}return n}function _8e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var x8e=sd,v8e=So,P9=b9,w8e=c8e,y8e=S8e,E8e=rn,JL=function(e,t){return{key:e.getKey(),text:e.getText(),type:e.getType(),depth:e.getDepth(),inlineStyleRanges:y8e(e),entityRanges:w8e(e,t),data:e.getData().toObject()}},C8e=function(e,t,r,i){if(e instanceof x8e){r.push(JL(e,t));return}e instanceof v8e||E8e(!1);var a=e.getParentKey(),o=i[e.getKey()]=g8e({},JL(e,t),{children:[]});if(a){i[a].children.push(o);return}r.push(o)},V8e=function(e,t){var r=t.entityMap,i=[],a={},o={},s=0;return e.getBlockMap().forEach(function(l){l.findEntityRanges(function(c){return c.getEntity()!==null},function(c){var d=l.getEntityAt(c),h=P9.stringify(d);o[h]||(o[h]=d,r[h]="".concat(s),s++)}),C8e(l,r,i,a)}),{blocks:i,entityMap:r}},D8e=function(e,t){var r=t.blocks,i=t.entityMap,a={};return Object.keys(i).forEach(function(o,s){var l=e.getEntity(P9.unstringify(o));a[s]={type:l.getType(),mutability:l.getMutability(),data:l.getData()}}),{blocks:r,entityMap:a}},F8e=function(e){var t={entityMap:{},blocks:[]};return t=V8e(e,t),t=D8e(e,t),t},T8e=F8e;function fh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){b8e(n,i,t[i])})}return n}function b8e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var P8e=ws,R9=rn,R8e=function(e,t){for(var r=[].concat(e).reverse();r.length;){var i=r.pop();t(i);var a=i.children;Array.isArray(a)||R9(!1),r=r.concat([].concat(a.reverse()))}},ZL=function(e){if(!(e&&e.type))return!1;var t=e.type;return t==="unordered-list-item"||t==="ordered-list-item"},L8e=function(e){Array.isArray(e.children)&&(e.children=e.children.map(function(t){return t.type===e.type?fh({},t,{depth:(e.depth||0)+1}):t}))},B8e={fromRawTreeStateToRawState:function(e){var t=e.blocks,r=[];return Array.isArray(t)||R9(!1),!Array.isArray(t)||!t.length?e:(R8e(t,function(i){var a=fh({},i);ZL(i)&&(a.depth=a.depth||0,L8e(i),i.children!=null&&i.children.length>0)||(delete a.children,r.push(a))}),e.blocks=r,fh({},e,{blocks:r}))},fromRawStateToRawTreeState:function(e){var t=[],r=[];return e.blocks.forEach(function(i){var a=ZL(i),o=i.depth||0,s=fh({},i,{children:[]});if(!a){t.push(s);return}var l=r[0];if(l==null&&o===0)t.push(s);else if(l==null||l.depth<o-1){var c={key:P8e(),text:"",depth:o-1,type:i.type,children:[],entityRanges:[],inlineStyleRanges:[]};r.unshift(c),o===1?t.push(c):l!=null&&l.children.push(c),c.children.push(s)}else if(l.depth===o-1)l.children.push(s);else{for(;l!=null&&l.depth>=o;)r.shift(),l=r[0];o>0?l.children.push(s):t.push(s)}}),fh({},e,{blocks:t})}},M8e=B8e,I8e=mo,O8e=q0.exports,k8e=O8e.List;function N8e(n,e){var t=n.map(function(r,i){var a=e[i];return I8e.create({style:r,entity:a})});return k8e(t)}var U8e=N8e,j8e=dd,$L=j8e.substr;function G8e(n,e){var t=Array(n.length).fill(null);return e&&e.forEach(function(r){for(var i=$L(n,0,r.offset).length,a=i+$L(n,r.offset,r.length).length,o=i;o<a;o++)t[o]=r.key}),t}var H8e=G8e,z8e=dd,W8e=q0.exports,X8e=W8e.OrderedSet,eB=z8e.substr,K8e=X8e();function Y8e(n,e){var t=Array(n.length).fill(K8e);return e&&e.forEach(function(r){for(var i=eB(n,0,r.offset).length,a=i+eB(n,r.offset,r.length).length;i<a;)t[i]=t[i].add(r.style),i++}),t}var q8e=Y8e;function wp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){Q8e(n,i,t[i])})}return n}function Q8e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var J8e=sd,tB=So,Z8e=KV,$8e=m2,nB=M8e,rB=S2,e_e=U8e,t_e=H8e,n_e=q8e,L9=ws,r_e=Ou,cD=q0.exports,L4=rn,iB=r_e("draft_tree_data_support"),aB=cD.List,i_e=cD.Map,B9=cD.OrderedMap,B4=function(e,t){var r=e.key,i=e.type,a=e.data,o=e.text,s=e.depth,l={text:o,depth:s||0,type:i||"unstyled",key:r||L9(),data:i_e(a),characterList:a_e(e,t)};return l},a_e=function(e,t){var r=e.text,i=e.entityRanges,a=e.inlineStyleRanges,o=i||[],s=a||[];return e_e(n_e(r,s),t_e(r,o.filter(function(l){return t.hasOwnProperty(l.key)}).map(function(l){return wp({},l,{key:t[l.key]})})))},vw=function(e){return wp({},e,{key:e.key||L9()})},oB=function(e,t,r){var i=t.map(function(a){return wp({},a,{parentRef:r})});return e.concat(i.reverse())},o_e=function(e,t){return e.map(vw).reduce(function(r,i,a){Array.isArray(i.children)||L4(!1);var o=i.children.map(vw),s=new tB(wp({},B4(i,t),{prevSibling:a===0?null:e[a-1].key,nextSibling:a===e.length-1?null:e[a+1].key,children:aB(o.map(function(E){return E.key}))}));r=r.set(s.getKey(),s);for(var l=oB([],o,s);l.length>0;){var c=l.pop(),d=c.parentRef,h=d.getChildKeys(),f=h.indexOf(c.key),m=Array.isArray(c.children);if(!m){m||L4(!1);break}var g=c.children.map(vw),x=new tB(wp({},B4(c,t),{parent:d.getKey(),children:aB(g.map(function(E){return E.key})),prevSibling:f===0?null:h.get(f-1),nextSibling:f===h.size-1?null:h.get(f+1)}));r=r.set(x.getKey(),x),l=oB(l,g,x)}return r},B9())},s_e=function(e,t){return B9(e.map(function(r){var i=new J8e(B4(r,t));return[i.getKey(),i]}))},l_e=function(e,t){var r=e.blocks.find(function(o){return Array.isArray(o.children)&&o.children.length>0}),i=iB&&!r?nB.fromRawStateToRawTreeState(e).blocks:e.blocks;if(!iB)return s_e(r?nB.fromRawTreeStateToRawState(e).blocks:i,t);var a=o_e(i,t);return a},u_e=function(e){var t=e.entityMap,r={};return Object.keys(t).forEach(function(i){var a=t[i],o=a.type,s=a.mutability,l=a.data;r[i]=$8e.__create(o,s,l||{})}),r},c_e=function(e){Array.isArray(e.blocks)||L4(!1);var t=u_e(e),r=l_e(e,t),i=r.isEmpty()?new rB:rB.createEmpty(r.first().getKey());return new Z8e({blockMap:r,entityMap:t,selectionBefore:i,selectionAfter:i})},d_e=c_e,A_e=n9;function f_e(n){var e=A_e(n),t=0,r=0,i=0,a=0;if(e.length){if(e.length>1&&e[0].width===0){var o=e[1];t=o.top,r=o.right,i=o.bottom,a=o.left}else{var s=e[0];t=s.top,r=s.right,i=s.bottom,a=s.left}for(var l=1;l<e.length;l++){var c=e[l];c.height!==0&&c.width!==0&&(t=Math.min(t,c.top),r=Math.max(r,c.right),i=Math.max(i,c.bottom),a=Math.min(a,c.left))}}return{top:t,right:r,bottom:i,left:a,width:r-a,height:i-t}}var h_e=f_e,p_e=h_e;function m_e(n){var e=n.getSelection();if(!e.rangeCount)return null;var t=e.getRangeAt(0),r=p_e(t),i=r.top,a=r.right,o=r.bottom,s=r.left;return i===0&&a===0&&o===0&&s===0?null:r}var S_e=m_e,g_e=cde,__e=sm,x_e=mo,v_e=Sde,w_e=sd,y_e=KV,E_e=ZV,C_e=A7,V_e=i8e,D_e=H7,F_e=m2,T_e=fa,b_e=QN,P_e=On,R_e=sD,L_e=a8e,B_e=S9,M_e=S2,I_e=T8e,O_e=d_e,k_e=ws,N_e=C9,U_e=S_e,j_e=h9,G_e={Editor:V_e,EditorBlock:D_e,EditorState:P_e,CompositeDecorator:v_e,Entity:F_e,EntityInstance:b_e,BlockMapBuilder:__e,CharacterMetadata:x_e,ContentBlock:w_e,ContentState:y_e,RawDraftContentState:L_e,SelectionState:M_e,AtomicBlockUtils:g_e,KeyBindingUtil:R_e,Modifier:T_e,RichUtils:B_e,DefaultDraftBlockRenderMap:E_e,DefaultDraftInlineStyle:C_e,convertFromHTML:j_e,convertFromRaw:O_e,convertToRaw:I_e,genKey:k_e,getDefaultKeyBinding:N_e,getVisibleSelectionRect:U_e},sB=G_e;const H_e=Kj({__proto__:null,default:sB},[sB]),lB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIYAjI6HQXEnwAAABhJREFUKM9jVOAr/M9AAmBiIBGMahgpGgDPZgG2Ib/wLgAAAABJRU5ErkJggg==",z_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEVFxAF7j7NHwAAABhJREFUKM9jZGBg+M9AAmBiIBGMahgpGgBjsgEXVtmPGwAAAABJRU5ErkJggg==",W_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEgU6g5FoNQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAALUlEQVQoz2Pcs2fPfwYSAAsDAwODs7MzUYr37t3LwMRAIhjVMDg0sMBikFgAALmcCIbj7SdmAAAAAElFTkSuQmCC",X_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIYAjMliRb4KwAAABlJREFUKM9jfM4g8p+BBMDEQCIY1TBSNAAAozECElsuYrMAAAAASUVORK5CYII=",K_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbETkTsJY3/wAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAGUlEQVQoz2NkWK35n4EEwMRAIhjVMFI0AABI7wHr2oKergAAAABJRU5ErkJggg==",Y_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbETo20L+wewAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAF0lEQVQY02NksPvJQAgwMRABRhXRWxEALqcBT2IuNqoAAAAASUVORK5CYII=",q_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4gEVFhwDqipNEQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAGUlEQVQoz2N84X72PwMJgImBRDCqYaRoAADu4QMTA4JViQAAAABJRU5ErkJggg==",Q_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEgAVVTehKQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAFklEQVQY02P8/5+BIGBiYBhVNPgUAQCIRAIWwXFSYQAAAABJRU5ErkJggg==",uB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEg8rE86gTQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAjUlEQVQoz2NkgAI2kYb/DHjArzcNjAwMDAwsMMUBNcX41DNsaGH4/+tNAyMDm0jD/7AJn/8L6f7/L6T7HwPAxMMmfP7PJtLwn4WBgYFhz1weBgYGBoa3lxgYhPVQTYaJwdQwMZAISNbAgi7w9hKJGrD5gSInkayBERZxPJL1eBV+ed7I8OtNAyMjqUkDAL98Qt1lcctCAAAAAElFTkSuQmCC",J_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEhIhDHclTwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAcUlEQVQoz7WSQQqAMBADZ8UX9lBvfZNv8KbQPstvxENVqEqlgjku2WxC1jjgETUsGEB/kN0YqvzEpLzkkVuDiOgJRETcOR4ZHjFkFTlhyQrlYjZDRyP660CuzH69eFuoWuKDpf8z2Nny8CI957at9TU2C/U/c6pZEeMAAAAASUVORK5CYII=",Z_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFExsG9NtIRgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAh0lEQVQoz5WSsQ2EMBAE5xBFEEABhKQUQCuU8foy3IoLICWkAC6gCwjgpP8T2GJCe7zeky1cjHW9kyCoCkBp8mcYSBLjHlRFTN6WBYBumv68ue8BqNqWb4znDb+yCYatmVOQwQeUfvOp0u2BO8HXzFbyFD4tx+sZxB5ubJpkclhXgqrI269xAE88PDD7ndcJAAAAAElFTkSuQmCC",$_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFEw8RWaYa1AAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAf0lEQVQoz2NgwALcRBj+u4kw/GcgBriJMPz/f63l//9rLYQ1wRX3KMIxuiZGZMU7D7UwMGybi2GQe8d9hl1vEGpRTLYUYEDBGDahK0Z2DrLY0SiB/24iDP+ZCAXCsRpFFD4TA4mAoAarlvsofBZ069EVoDuJhZCb0QEj0UkACgCWBVpECbXGpQAAAABJRU5ErkJggg==",e2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFEwosfLmigAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAkUlEQVQoz2N0E2H4z0ACYGFgYGDYeaiFoMJjq/YxNE7ZB9HAwMDAwLBtLgMDAwODVct9VIU1ihDGrfcIG2DAquU+QgEOMSaCTkEzgImBREBQA7qfGBkYGBjcRBj+76xQxOtp9477DLveMDAywiSQNaEDmGK4Dfg0ISvGCtxEGP7/71H8/79H8T/RqcBNhAGnYgBzBDZGRVNwNwAAAABJRU5ErkJggg==",t2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFEw4S2bR6LwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAnUlEQVQoz2P8//8/AzpwF2XEFIQCFmyKdx5qwVB4bNU+hsYp+1A1wBVvm4tp9K33qDYgK7ZquY9qeo0iqpPQFSMrYGBgYLBquc/Q4yXAwMDAwMCE1xlYbGBiIBEw7Xz9n9HdrgavImQ/McLiwV2U8f/OCkUMBTAnHTv3nqFx1wdEKO18/Z8Rpgnd0yhOQubsfP2f0b3jPl7nMZKaNAC6Skw3vnsvzwAAAABJRU5ErkJggg==",n2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFEw0C7y45iAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAk0lEQVQoz2N0E2H4z4AD7Hz9nxFdjIWBgYFh56EWDMXHVu1jcBdl/I+uiQXO2jYXRYMVDwNDvZsAhiYWFEUt91FtqVFkqGdgQNHEgqz4WI0iA7oB6JpYGPAAmAFWRoJwTUwMJAK8GpD91LjrAwOKk47VKGL1NAMDA4N7x30GDE8jK0AGyIoJOgldMQMDAwMjqUkDAB8tRZsJcTtlAAAAAElFTkSuQmCC",r2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFExEaGjX8gwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAc0lEQVQoz2NkYGBg0NSU+M9ABLh+/QUjC4wjo6iJV/GT+9cZGBgYGJgYSAQs6AK7tu5D4bt5O+HXgKwAXTNeJ+3aug/DdAYGBgZGGENTU+I/zOPoip/cv85w/foLRqw24DIZpx/Q3U6Sp7EByuIBFpv4AABbOSOQoUM90gAAAABJRU5ErkJggg==",i2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEhUYHDM7gAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAaElEQVQoz2MUkAj6z4ADfHixjhFdjIWBgYFBUDIYl57/6JpYYIx756IwVCsZYWpiQVWwDEXDvXNRGJqYGIgAgpLBDDC/sjAQCaD+/M+C7gR8TiTSD6hiTAwkAvI1YHMvNjFGfEkDGwAAawEiuWY5s24AAAAASUVORK5CYII=",a2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEhsTFWLPhgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAA6klEQVQoz5WQIW7DQBBF31YmkUKC4kohgXOEQZEWR/U1SiMZRDlAVVCpFwgI8QFW5qY+gmFIlG5OMSVey1Yd0I9mV+/t7IxjFFVvzKRtG5fqbAwfT4c5ns8PLEmZqgew4+nA234PwOPxA8B6/TqRAIeqt1DXlhLj3arqbFV1thjvw32oa1P1hqqfleZgVU/Wtg2A61s+meF7GNz9d0svqRDJbbkylisjhAshXEhnkdwmgkhum61Q+JLbdTG8fLsuKHzJZiuDlCV4nN3u/c+3esacSA4wSIUvJ2BovvpuHYBLAvB8S31c10V+ATYFjevs0HWqAAAAAElFTkSuQmCC",o2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMFExQIlPt5jgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAbElEQVQoz2NkQANBugz/kfnrLjMwIvNZ0BUuDUc1IJoBIg7TyAhTDFPIEaTJgA0Eh19nWHeZgZEJWRCXYmTACDOdGMXB4dcZmBhIBHTQsO4yA2P0Sgai3I8RSsQARvSIW7tSE8NkjIgjJWkAAEVpIfbacIN+AAAAAElFTkSuQmCC",s2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEh4tqXQmaAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAiUlEQVQoz6WSMQ6DMBAEByq+ckj+jClc5Dt8JQVF+Ewk+ynQHQUiOhxDiNhydXs3XhkK8g71DuWKvEOnHtUoxVDNHdntGkWn/hutssYzQOMFJEJqAZjHxGPIAq9B9qdMwKoLiWpDObqwDQKM73X+8A2lpv5uqTbbgRWpC+mDcVppjlDyfn6H3F8AX71UuvRrK7wAAAAASUVORK5CYII=",cB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEjYGWJVxggAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAX0lEQVQoz2NgGPqAkYGBgaGqqvM/SRoU+AqJ1sBEqpOYGBgYGDoW6hCluGOhDsRJDAwMDCvWz/1fEX8Fr+KIwGRGRmRBXJpgirGatGL93P8KfIVwvGL9XMIBAtOETTEA6zknEbSumrwAAAAASUVORK5CYII=",l2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AIbEic6JCMuFQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAcElEQVQoz2P8sSaP4fGeuf8ZqABkXZIZGW9ncP+XdUmmhnkMj/fMZWCBcRzKl8AlDnTGkMyHARZkG5AlSOE7lC+Bs5mQFTiUL0GxmRAfG6DIhdgAEwOVAQs+SZj3kMMKH5+BgYGB+slG1iWZkZoJGwCPf0Ey8swM6QAAAABJRU5ErkJggg==",u2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEVFyMekDBhwwAAAFVJREFUKM+V0jkOwCAMBdEJp00KSi4BXVJwXFMhJaw/liy5eNMZHzKAKetD5qiHMk+6cIhzxxNACyqWgjfeBi1eBiM8DWZ4GKxwF+zwJ1AwAH9ew8woChgtC51rKeAAAAAASUVORK5CYII=",c2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAMCAYAAACulacQAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA6cAAAOdQGIKBt4AAAAB3RJTUUH4gEVEjkhkLB0zgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAHklEQVQY02NgGGSAEUr/xybHiMT5j0UTCvg/0F4BAOhDAwINJrvnAAAAAElFTkSuQmCC";const{Editor:d2e,EditorState:Qg,ContentState:A2e,SelectionState:f2e,Modifier:Lh,RichUtils:dB,CompositeDecorator:h2e}=H_e;var yp=(n=>(n[n.Edit=0]="Edit",n[n.Readonly=1]="Readonly",n[n.Display=2]="Display",n))(yp||{}),M9=(n=>(n[n.Top=0]="Top",n[n.Bottom=1]="Bottom",n))(M9||{});const dD=Ne.exports.forwardRef((n,e)=>{const t=Ne.exports.useRef(null),r=Ne.exports.useCallback(()=>{var R;(R=t.current)==null||R.focus()},[]);Ne.exports.useImperativeHandle(e,()=>({focus:r}),[r]);const i=Ne.exports.useRef(n.value),a=Ne.exports.useCallback(()=>n.value?AB.stringToEditorState(n.value):Qg.createEmpty(),[n.value]),[o,s]=Ne.exports.useState(a);let l;"value"in n&&n.value!==i.current?l=a():l=o;const[c,d]=Ne.exports.useState(()=>{let R=n.theme;return typeof n.theme!="number"&&(n.value&&n.value.indexOf("WHITE")>=0?R=1:R=0),R}),h=R=>{const j=AB.editorStateToString(R,{theme:c});i.current=j,s(R),n.onValueChange&&n.onValueChange(n.id,j)},f=(R,j)=>n.maxlines&&j.getCurrentContent().getPlainText().split(`
`).length>=n.maxlines?"handled":"not-handled",m=R=>{n.onFocus&&n.onFocus(R)},g=R=>{n.onBlur&&n.onBlur(R)},x=R=>{switch(R.type){case"COLOR":E(R.key);break;case"IMAGE":_(R.char);break;case"ACTION":switch(R.key){case"DARKLIGHT":d(c===0?1:0);break}break}setTimeout(()=>{r()},0)},E=R=>{const j=l.getSelection(),te=l.getCurrentContent(),$=Object.keys(Ep).reduce((q,P)=>Lh.removeInlineStyle(q,j,P),te);let z=Qg.push(l,$,"change-inline-style");const I=l.getCurrentInlineStyle();j.isCollapsed()&&(z=I.reduce((q,P)=>dB.toggleInlineStyle(q,P),z)),I.has(R)||(z=dB.toggleInlineStyle(z,R)),h(z)},_=R=>{const j=l.getSelection(),te=Lh.replaceText(l.getCurrentContent(),j,R);let $=Qg.push(l,te,"insert-characters");h($)},v=n.displayMode||0;let C;n.showToolbar&&v===0&&(C=B(_2e,{onItemClick:x,itemBlacklist:n.itemBlacklist}));const V=n.toolbarPlacement||0;let H="mpEditor";return v===2&&(H+=" mpDisplay"),c===0?H+=" mpEditorLight":c===1&&(H+=" mpEditorDark"),C&&(V===1?H+=" mpEditorShowToolbarBottom":H+=" mpEditorShowToolbarTop"),Xe("div",{className:H,children:[V===0&&C,B("div",{className:"mpEditorWrapper",children:B(d2e,{ref:R=>{t.current=R},editorState:l,stripPastedStyles:!0,readOnly:v!==0,customStyleMap:Ep,onChange:h,onFocus:m,onBlur:g,handleReturn:f})}),V===1&&C]})});function p2e(n,e,t){const r=n.getText();for(let i=0;i<r.length;i++)AD[r.charAt(i)]&&e(i,i+1)}const m2e=n=>{let e=n.children[0].props.text,t="mpImage",r=AD[e];t+=" mpImageKey-"+r;let i={...n};return delete i.contentState,delete i.decoratedText,delete i.entityKey,delete i.offsetKey,delete i.blockKey,B("span",{...i,className:t,children:B("span",{className:"mpImageTextWrapper",children:n.children})})},S2e=new h2e([{strategy:p2e,component:m2e}]),Ep={DEFAULT:{color:"#200E71"},BLACK:{color:"#000000"},WHITE:{color:"#FFFFFF"},RED:{color:"#E70014"},GREEN:{color:"#00AB29"},BLUE:{color:"#003EF9"},PURPLE:{color:"#E847CD"},YELLOW:{color:"#FFEA38"}},I9=[{key:"COLOR",type:"SUBMENU",icon:lB,desc:"Font color",items:[{key:"DEFAULT",type:"COLOR",icon:lB,desc:"Default"},{key:"BLACK",type:"COLOR",icon:z_e,desc:"Black"},{key:"WHITE",type:"COLOR",icon:W_e,desc:"White"},{key:"RED",type:"COLOR",icon:X_e,desc:"Red"},{key:"GREEN",type:"COLOR",icon:K_e,desc:"Green"},{key:"BLUE",type:"COLOR",icon:Y_e,desc:"Blue"},{key:"PURPLE",type:"COLOR",icon:q_e,desc:"Purple"},{key:"YELLOW",type:"COLOR",icon:Q_e,desc:"Yellow"}]},{key:"IMAGE",type:"SUBMENU",icon:uB,desc:"Insert image",items:[{key:"A",type:"IMAGE",icon:uB,desc:"A button",char:"\u3000"},{key:"B",type:"IMAGE",icon:J_e,desc:"B button",char:"\u3001"},{key:"S",type:"IMAGE",icon:Z_e,desc:"Start button",char:"\u3010"},{key:"CUP",type:"IMAGE",icon:$_e,desc:"C-up button",char:"\u3002"},{key:"CDOWN",type:"IMAGE",icon:e2e,desc:"C-down button",char:"\u3005"},{key:"CLEFT",type:"IMAGE",icon:t2e,desc:"C-left button",char:"\u3004"},{key:"CRIGHT",type:"IMAGE",icon:n2e,desc:"C-right button",char:"\u3003"},{key:"Z",type:"IMAGE",icon:r2e,desc:"Z button",char:"\u3006"},{key:"R",type:"IMAGE",icon:i2e,desc:"R button",char:"\u3011"},{key:"ANALOG",type:"IMAGE",icon:a2e,desc:"Analog stick",char:"\u3007"},{key:"COIN",type:"IMAGE",icon:o2e,desc:"Coin",char:"\u3008"},{key:"STAR",type:"IMAGE",icon:s2e,desc:"Star",char:"\u3009"}]},{key:"ADVANCED",type:"SUBMENU",icon:cB,desc:"Advanced text features",items:[{key:"PAUSE",type:"IMAGE",icon:cB,desc:"Pause to continue",char:"\u3015"},{key:"FEED",type:"IMAGE",icon:l2e,desc:"Feed new page",char:"\u3014"}]},{key:"DARKLIGHT",type:"ACTION",icon:u2e,desc:"Toggle background color (has no effect on actual game)"}];let AD={},g2e={};I9.forEach(O9);function O9(n){n.items&&n.items.forEach(O9),n.char&&(AD[n.char]=n.key,g2e[n.key]=n.char)}function k9(n,e){switch(n.type){case"SUBMENU":return B(x2e,{item:n,onItemClick:e,items:n.items},n.key);default:return B(v2e,{item:n,onItemClick:e},n.key)}}class _2e extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onItemClick=e=>{this.props.onItemClick&&this.props.onItemClick(e)}}render(){const e=this.props.itemBlacklist;let t=I9.map(r=>e&&e.indexOf(r.key)!==-1?null:k9(r,this.onItemClick));return B("div",{className:"mpEditorToolbar",children:t})}}class x2e extends Ne.exports.Component{constructor(){super(...arguments),this.expMenu=null,this.state={expanded:!1},this.onBlur=()=>{this.setState({expanded:!1})},this.onClick=()=>{this.setState({expanded:!this.state.expanded})},this.onItemClick=e=>{this.props.onItemClick&&this.props.onItemClick(e)}}render(){const e=this.props.item;let t;if(this.state.expanded){const r=this.props.items.map(i=>k9(i,this.onItemClick));t=B("div",{ref:i=>{this.expMenu=i},className:"mpEditorToolbarSubmenuExp",tabIndex:-1,onBlur:this.onBlur,children:r})}return Xe("div",{className:"mpEditorToolbarButton",title:e.desc,onClick:this.onClick,children:[B("img",{src:e.icon,alt:e.desc}),B("img",{src:c2e,alt:""}),t]})}componentDidMount(){this.state.expanded&&this.expMenu.focus()}componentDidUpdate(){this.state.expanded&&this.expMenu.focus()}}class v2e extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onClick=()=>{this.props.onItemClick(this.props.item)}}render(){const e=this.props.item;return B("div",{className:"mpEditorToolbarButton",title:e.desc,onClick:this.onClick,children:B("img",{src:e.icon,alt:e.desc})})}}const AB=new class{editorStateToString(e,t){const r=e.getCurrentContent();let i=[];const a=t.theme===0?"DEFAULT":"WHITE";let o=a,s=!1;return r.getBlockMap().forEach(c=>{let d=c.getText();const h={};c.findStyleRanges(m=>{let x=m.getStyle().find(E=>!!Ep[E]);return x||(x=a),x!==o&&(o=x,s=!0),!0},(m,g)=>{!s||(h[m]="<"+o+">")});let f=0;for(let m in h){const g=f+parseInt(m);d=HW(d,g,0,h[m]),f+=h[m].length}i.push(d)}),i.join(`
`)}stringToEditorState(e){let t=A2e.createFromText(e||""),r=t.getBlocksAsArray();for(let i=0;i<r.length;i++){let a=r[i],o=a.getText(),[s,l,c]=fB(o);for(;s;){let d=a.getKey(),h=f2e.createEmpty(a.getKey());h=h.merge({anchorOffset:l,focusKey:d,focusOffset:c}),t=Lh.replaceText(t,h,""),r=t.getBlocksAsArray(),a=r[i],o=a.getText();const f=r[r.length-1];h=h.merge({focusKey:f.getKey(),focusOffset:f.getText().length}),t=Object.keys(Ep).reduce((m,g)=>Lh.removeInlineStyle(m,h,g),t),t=Lh.applyInlineStyle(t,h,s),r=t.getBlocksAsArray(),a=r[i],o=a.getText(),[s,l,c]=fB(o)}}return Qg.createWithContent(t,S2e)}};function fB(n){let e=0;for(;e<n.length;){let t=n.indexOf("<",e)+1;if(!t)return[];let r=n.indexOf(">",t);if(r===-1)return[];const i=n.substring(t,r);if(!Ep[i]){e=t;continue}return[i,t-1,r+1]}return[]}let hB,$f={};function Lo(n="",e){let t=hB;t||(t=hB={});let r=n||"default",i=t[r];i||(i=t[r]=document.createElement("input"),i.type="file"),i.accept=n,$f[r]&&(i.removeEventListener("change",$f[r]),delete $f[r]);let a=o=>{delete $f[r],i.removeEventListener("change",a),e(o),i.value=null};$f[r]=a,i.addEventListener("change",a),i.click()}const{blueImage:N9,blue3Image:w2e,redImage:U9,red3Image:y2e,happeningImage:j9,happening3Image:E2e,chanceImage:C2e,chance2Image:V2e,chance3Image:D2e,bowserImage:G9,bowser3Image:F2e,minigameImage:T2e,shroomImage:b2e,otherImage:fD,starImage:hD,blackstarImage:P2e,arrowImage:H9,startImage:pD,itemImage:R2e,item3Image:L2e,battleImage:B2e,battle3Image:M2e,bankImage:I2e,bank3Image:O2e,gameguyImage:k2e}=qk,N2e=()=>{const n=xs(),e=Ne.exports.useMemo(()=>H2e(n),[n]);let t;switch(n.game){case 1:t=B(U2e,{counts:e});break;case 2:t=B(j2e,{counts:e});break;case 3:t=B(G2e,{counts:e});break}return B("div",{className:"boardStatsContainer",children:B("table",{children:t})})},U2e=({counts:n})=>Xe("tbody",{children:[Xe("tr",{children:[B(I0,{src:N9,alt:"Blue space"}),B(I0,{src:U9,alt:"Red space"}),B(I0,{src:j9,alt:"Happening space"}),B(I0,{src:C2e,alt:"Chance space"}),B(I0,{src:T2e,alt:"Mini-Game space"}),B(I0,{src:b2e,alt:"Mushroom space"}),B(I0,{src:G9,alt:"Bowser space"}),B(I0,{src:hD,alt:"Star space"}),B(I0,{src:pD,alt:"Start space"}),B(I0,{src:fD,alt:"Invisible space"}),B(vA,{text:"Solid"}),B(vA,{text:"Total"})]}),Xe("tr",{children:[B(T0,{count:b0(n,de.BLUE)}),B(T0,{count:b0(n,de.RED)}),B(T0,{count:b0(n,de.HAPPENING)}),B(T0,{count:b0(n,de.CHANCE)}),B(T0,{count:b0(n,de.MINIGAME)}),B(T0,{count:b0(n,de.SHROOM)}),B(T0,{count:b0(n,de.BOWSER)}),B(T0,{count:b0(n,de.STAR)}),B(T0,{count:b0(n,de.START)}),B(T0,{count:b0(n,de.OTHER)}),B(T0,{count:b0(n,de.BLUE,de.RED,de.HAPPENING,de.CHANCE,de.MINIGAME,de.SHROOM,de.BOWSER)}),B(T0,{count:b0(n)})]})]}),j2e=({counts:n})=>Xe("tbody",{children:[Xe("tr",{children:[B(I0,{src:N9,alt:"Blue space"}),B(I0,{src:U9,alt:"Red space"}),B(I0,{src:j9,alt:"Happening space"}),B(I0,{src:V2e,alt:"Chance space"}),B(I0,{src:R2e,alt:"Item space"}),B(I0,{src:B2e,alt:"Battle space"}),B(I0,{src:I2e,alt:"Bank space"}),B(I0,{src:G9,alt:"Bowser space"}),B(I0,{src:hD,alt:"Star space"}),B(I0,{src:P2e,alt:"Black Star space"}),B(I0,{src:H9,alt:"Arrow space"}),B(I0,{src:pD,alt:"Start space"}),B(I0,{src:fD,alt:"Invisible space"}),B(vA,{text:"Solid"}),B(vA,{text:"Total"})]}),Xe("tr",{children:[B(T0,{count:b0(n,de.BLUE)}),B(T0,{count:b0(n,de.RED)}),B(T0,{count:b0(n,de.HAPPENING)}),B(T0,{count:b0(n,de.CHANCE)}),B(T0,{count:b0(n,de.ITEM)}),B(T0,{count:b0(n,de.BATTLE)}),B(T0,{count:b0(n,de.BANK)}),B(T0,{count:b0(n,de.BOWSER)}),B(T0,{count:b0(n,de.STAR)}),B(T0,{count:b0(n,de.BLACKSTAR)}),B(T0,{count:b0(n,de.ARROW)}),B(T0,{count:b0(n,de.START)}),B(T0,{count:b0(n,de.OTHER)}),B(T0,{count:b0(n,de.BLUE,de.RED,de.HAPPENING,de.CHANCE,de.ITEM,de.BATTLE,de.BANK,de.BOWSER)}),B(T0,{count:b0(n)})]})]}),G2e=({counts:n})=>Xe("tbody",{children:[Xe("tr",{children:[B(I0,{src:w2e,alt:"Blue space"}),B(I0,{src:y2e,alt:"Red space"}),B(I0,{src:E2e,alt:"Happening space"}),B(I0,{src:D2e,alt:"Chance space"}),B(I0,{src:L2e,alt:"Item space"}),B(I0,{src:M2e,alt:"Battle space"}),B(I0,{src:O2e,alt:"Bank space"}),B(I0,{src:k2e,alt:"Game Guy space"}),B(I0,{src:F2e,alt:"Bowser space"}),B(I0,{src:hD,alt:"Star space"}),B(I0,{src:H9,alt:"Arrow space"}),B(I0,{src:pD,alt:"Start space"}),B(I0,{src:fD,alt:"Invisible space"}),B(vA,{text:"Solid"}),B(vA,{text:"Total"})]}),Xe("tr",{children:[B(T0,{count:b0(n,de.BLUE)}),B(T0,{count:b0(n,de.RED)}),B(T0,{count:b0(n,de.HAPPENING)}),B(T0,{count:b0(n,de.CHANCE)}),B(T0,{count:b0(n,de.ITEM)}),B(T0,{count:b0(n,de.BATTLE)}),B(T0,{count:b0(n,de.BANK)}),B(T0,{count:b0(n,de.GAMEGUY)}),B(T0,{count:b0(n,de.BOWSER)}),B(T0,{count:b0(n,de.STAR)}),B(T0,{count:b0(n,de.ARROW)}),B(T0,{count:b0(n,de.START)}),B(T0,{count:b0(n,de.OTHER)}),B(T0,{count:b0(n,de.BLUE,de.RED,de.HAPPENING,de.CHANCE,de.ITEM,de.BATTLE,de.BANK,de.GAMEGUY,de.BOWSER)}),B(T0,{count:b0(n)})]})]}),I0=({src:n,alt:e})=>B("td",{className:"boardStatsImageCell",children:B("img",{src:n,alt:e,className:"boardStatsSpaceImage"})}),T0=({count:n})=>B("td",{className:"boardStatsCountCell",children:n||0}),vA=({text:n})=>B("td",{className:"boardStatsTextCell",children:n});function H2e(n){const e=new Map;for(const t of n.spaces)e.has(t.type)?e.set(t.type,e.get(t.type)+1):e.set(t.type,1);return e}function b0(n,...e){let t=0;if(e.length===0)n.forEach(r=>{t+=r});else for(const r of e)t+=n.get(r)||0;return t}const M4="/assets/edit.04fb11d4.png",z2e="/assets/audio.7d30fd5a.png",W2e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiBQ0VISOZx0KOAAABA0lEQVQ4y52SMW7CMBiFPwMTbMnOATJ3bwcW5kpwic5sqFS9QsUtkHKEMrOzcAGD6M5g+hgSklh1nIq3/fL7/N4vGzxpqJ2a2mnoOwb+yJQnvvgpp5Q3pmxolxaSRtU0krQIGzPlcmqTU67MB3J1KS+cpgQcfeK6mgGP6J7Q55Us4tuzMdfmDrPOHWaFs1cS484uY//hLACf/ALvbPkGXnjmA+ixrBxVpYkkKQGQtALQSgJQIkma+JWOACTBMknDUQG2E7A+cMYBaRBIAcfZA4w4RRNORn5C0bEdON6HGrDRSjYMtCcEgIcq/SOhfut59OvN/yYcol8vdKq1LsHbL1rXrhtcbPgQjV6DLQAAAABJRU5ErkJggg==",X2e="data:image/png;base64,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",K2e=[{type:"header",desc:"Basic Info"},{type:"richtext",id:"detailBoardName",desc:"Board name",maxlines:1},{type:"richtext",id:"detailBoardDesc",desc:"Board description",maxlines:2},{type:"difficulty",id:"detailBoardDifficulty",desc:"Difficulty"},{type:"audioheader",desc:"Background Music"},{type:"audio",id:"detailBoardAudio",desc:"Background music"},{type:"header",desc:"Images"},{type:"image",id:"detailBoardSelectImg",desc:"Board select image",width:128,height:64},{type:"image",id:"detailBoardLogoImg",desc:"Board logo",width:250,height:100},{type:"br"},{type:"image",id:"detailBoardLargeSceneBg",desc:"Large scene background",width:320,height:240},{type:"image",id:"detailBoardConversationBg",desc:"Conversation background",width:320,height:240},{type:"image",id:"detailBoardSplashscreenBg",desc:"Splashscreen background",width:320,height:240},{type:"header",desc:"Stats"},{type:"stats"}],Y2e=[{type:"header",desc:"Basic Info"},{type:"richtext",id:"detailBoardName",desc:"Board name",maxlines:1},{type:"richtext",id:"detailBoardDesc",desc:"Board description",maxlines:2},{type:"difficulty",id:"detailBoardDifficulty",desc:"Difficulty"},{type:"costume",id:"detailBoardCostume",desc:"Costume Theme"},{type:"audioheader",desc:"Background Music"},{type:"audio",id:"detailBoardAudio",desc:"Background music"},{type:"header",desc:"Images"},{type:"image",id:"detailBoardSelectImg",desc:"Board select image",width:64,height:48},{type:"image",id:"detailBoardSelectIcon",desc:"Board select icon",width:32,height:32},{type:"image",id:"detailBoardLogoImg",desc:"Board logo",width:260,height:120},{type:"br"},{type:"image",id:"detailBoardLargeSceneBg",desc:"Large scene background",width:320,height:240},{type:"header",desc:"Stats"},{type:"stats"}],q2e=[{type:"header",desc:"Basic Info"},{type:"richtext",id:"detailBoardName",desc:"Board name",maxlines:1},{type:"richtext",id:"detailBoardDesc",desc:"Board description",maxlines:2},{type:"difficulty",id:"detailBoardDifficulty",desc:"Difficulty"},{type:"audioheader",desc:"Background Music"},{type:"audio",id:"detailBoardAudio",desc:"Background music"},{type:"header",desc:"Images"},{type:"image",id:"detailBoardSelectImg",desc:"Board select image",width:64,height:64},{type:"image",id:"detailBoardLogoImg",desc:"Board logo (large)",width:226,height:120},{type:"image",id:"detailBoardLogoTextImg",desc:"Board logo text",width:226,height:36},{type:"br"},{type:"image",id:"detailBoardLogoMediumImg",desc:"Board logo (medium)",width:150,height:50},{type:"image",id:"detailBoardLogoSmallImg",desc:"Board logo (small)",width:100,height:46},{type:"br"},{type:"image",id:"detailBoardLargeSceneBg",desc:"Large scene background",width:320,height:240},{type:"header",desc:"Stats"},{type:"stats"}],Q2e=[{type:"header",desc:"Basic Info"},{type:"richtext",id:"detailBoardName",desc:"Board name",maxlines:1},{type:"richtext",id:"detailBoardDesc",desc:"Board description",maxlines:2},{type:"difficulty",id:"detailBoardDifficulty",desc:"Difficulty"},{type:"header",desc:"Background Music"},{type:"audio",id:"detailBoardAudio",desc:"Background music"},{type:"header",desc:"Images"},{type:"image",id:"detailBoardSelectImg",desc:"Board select image",width:64,height:64},{type:"image",id:"detailBoardLogoImg",desc:"Board logo",width:226,height:120},{type:"image",id:"detailBoardLogoTextImg",desc:"Board logo text",width:226,height:36}];function J2e(){const n=P0(),e=n.game,t=n.type;switch(e){case 1:return K2e;case 2:return Y2e;case 3:switch(t){case G0.DUEL:return Q2e;default:return q2e}}}function Z2e(n,e){switch(n){case"detailBoardName":return e.board.name;case"detailBoardDesc":return e.board.description;case"detailBoardDifficulty":return e.board.difficulty;case"detailBoardCostume":return e.board.costumeTypeIndex;case"detailBoardSelectImg":return e.board.otherbg.boardselect;case"detailBoardSelectIcon":return e.board.otherbg.boardselecticon;case"detailBoardLogoImg":return e.board.otherbg.boardlogo;case"detailBoardLogoTextImg":return e.board.otherbg.boardlogotext;case"detailBoardLogoMediumImg":return e.board.otherbg.boardlogomedium;case"detailBoardLogoSmallImg":return e.board.otherbg.boardlogosmall;case"detailBoardAudio":return e.board.audioIndex;case"detailBoardLargeSceneBg":return e.board.otherbg.largescene;case"detailBoardConversationBg":return e.board.otherbg.conversation;case"detailBoardSplashscreenBg":return e.board.otherbg.splashscreen}return""}function ww(n,e,t){switch(n){case"detailBoardName":dae(e),KP();break;case"detailBoardDesc":Aae(e);break;case"detailBoardDifficulty":fae(e);break;case"detailBoardCostume":hae(e);break;case"detailBoardSelectImg":Os("boardselect",e);break;case"detailBoardSelectIcon":Os("boardselecticon",e);break;case"detailBoardLogoImg":Os("boardlogo",e);break;case"detailBoardLogoTextImg":Os("boardlogotext",e);break;case"detailBoardLogoMediumImg":Os("boardlogomedium",e);break;case"detailBoardLogoSmallImg":Os("boardlogosmall",e);break;case"detailBoardLargeSceneBg":Os("largescene",e);break;case"detailBoardConversationBg":Os("conversation",e);break;case"detailBoardSplashscreenBg":Os("splashscreen",e);break;case"detailBoardAudio":pae(e),KP();break}}function $2e(n,e){if(n==="detailBoardSelectImg"&&P0().game===1){const t=new Uint32Array(e);for(let s=0;s<128;s++)t[s]=0,t[s+128]=0,t[s+128*62]=0,t[s+128*63]=0;for(let s=0;s<6;s++)t[s+128*2]=0,t[s+128*2+122]=0,t[s+128*61]=0,t[s+128*61+122]=0;for(let s=0;s<4;s++)t[s+128*3]=0,t[s+128*3+124]=0,t[s+128*60]=0,t[s+128*60+124]=0;for(let s=0;s<3;s++)t[s+128*4]=0,t[s+128*4+125]=0,t[s+128*59]=0,t[s+128*59+125]=0;for(let s=0;s<2;s++)t[s+128*5]=0,t[s+128*5+126]=0,t[s+128*58]=0,t[s+128*58+126]=0,t[s+128*6]=0,t[s+128*6+126]=0,t[s+128*57]=0,t[s+128*57+126]=0;t[128*7]=0,t[128*7+127]=0,t[128*56]=0,t[128*56+127]=0,t[128*8]=0,t[128*8+127]=0,t[128*55]=0,t[128*55+127]=0;const r={};for(let s=0;s<32;s++)for(let l=0;l<64;l++)r[t[s*128+l]]=!0;const i={};for(let s=0;s<32;s++)for(let l=64;l<128;l++)i[t[s*128+64+l]]=!0;const a={};for(let s=32;s<64;s++)for(let l=0;l<64;l++)a[t[s*128+l]]=!0;const o={};for(let s=32;s<64;s++)for(let l=64;l<128;l++)o[t[s*128+64+l]]=!0;(Object.keys(r).length>256||Object.keys(i).length>256||Object.keys(a).length>256||Object.keys(o).length>256)&&(tn("Sorry, but the palette limit for this image is 256 unique colors. For now, the image has been reduced to 8-bit, but most image editors should be able to reduce the palette for you with higher quality."),pse(t,128,64))}return e}class exe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onTextChange=(e,t)=>{ww(e,t.target.value,this.props.board),this.forceUpdate()},this.onRichTextChange=(e,t)=>{ww(e,t,this.props.board),this.forceUpdate()},this.onValueChange=(e,t)=>{ww(e,t,this.props.board),this.forceUpdate()}}render(){if(!this.props.board)return null;let e=0;const t=Ys(this.props.board),r=J2e().map(i=>{const a=Z2e(i.id,this.props);switch(i.type){case"richtext":{const o=t?yp.Readonly:yp.Edit;return Xe("div",{className:"detailRichTextContainer",children:[B("label",{htmlFor:i.id,children:i.desc}),B(dD,{id:i.id,value:a,showToolbar:!t,displayMode:o,maxlines:i.maxlines||0,itemBlacklist:["COLOR","ADVANCED","DARKLIGHT"],onValueChange:this.onRichTextChange})]},i.id)}case"image":return B(txe,{id:i.id,desc:i.desc,readonly:t,value:a,onImageSelected:this.onValueChange,width:i.width,height:i.height},i.id);case"audio":return B(nxe,{id:i.id,desc:i.desc,readonly:t,value:a,onAudioSelected:this.onValueChange,onAudioDeleted:(o,s)=>this.onValueChange(o,{customAudioIndex:s,delete:!0})},i.id);case"difficulty":return B(ixe,{id:i.id,desc:i.desc,readonly:t,value:a,onDifficultySelected:this.onValueChange},i.id);case"costume":return B(lxe,{id:i.id,desc:i.desc,readonly:t,costumeType:a,onCostumeTypeSelected:o=>this.onValueChange(i.id,o)},i.id);case"stats":return B(N2e,{},"stats"+e++);case"header":return B("h2",{children:i.desc},"header"+e++);case"audioheader":return B("div",{className:"detailsAudioHeaderDiv",children:Xe("h2",{className:"detailsAudioHeader",children:[i.desc,B(rxe,{board:this.props.board})]})},"header"+e++);case"br":return B("br",{},"br"+e++)}return null});return B("div",{id:"detailsForm",children:r})}}class txe extends Ne.exports.Component{constructor(){super(...arguments),this.handleClick=()=>{Mu()||Lo("image/*",this.imageSelected.bind(this))}}imageSelected(e){const t=e.target.files[0];if(!t)return;const r=new FileReader;r.onload=async i=>{const a=this.props.onImageSelected,o=this.props.id,s=this.props.width,l=this.props.height;let d=(await Ca(r.result,s,l)).data.buffer;d=$2e(o,d);const h=Ea(d,s,l);a(o,h)},r.readAsDataURL(t)}render(){const e=this.props.id,t=this.props.desc,r=this.props.width,i=this.props.height;let a=null;if(!this.props.readonly){const s=`${r} \xD7 ${i}`;r>100&&i>50?a=Xe("div",{className:"detailImgHoverCover",children:[B("span",{children:"Choose a new image"}),B("br",{}),B("span",{className:"detailImgHoverCoverSize",children:s})]}):a=B("div",{className:"detailImgHoverCover",title:s})}const o={width:r,height:i,minWidth:r,minHeight:i};return Xe("div",{className:"detailImgContainer",children:[B("label",{children:t}),Xe("div",{className:"detailImgSelect",style:o,onClick:this.handleClick,children:[this.props.value?B("img",{id:e,className:"detailImg",height:i,width:r,style:o,src:this.props.value,alt:t}):B("div",{className:"detailImg",style:o}),a]})]})}}class nxe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onGameMusicIndexSelection=e=>{this.props.onAudioSelected(this.props.id,{gameAudioIndex:parseInt(e.target.value)})},this.onAudioTypeChanged=e=>{this.props.onAudioSelected(this.props.id,{audioType:e})},this.onMidiPrompt=async e=>{Lo("audio/midi",t=>{const r=t.target.files[0];if(!r)return;const i=new FileReader;i.onload=a=>{O0(typeof i.result=="string"),this.props.onAudioSelected(this.props.id,{customAudioIndex:e,midiName:r.name,midiData:i.result})},i.readAsDataURL(r)})},this.onSoundbankIndexPrompt=async e=>{let t=0;return bt.romIsLoaded()&&bt.getGameVersion()===P0().game&&(t=Rr.getSequenceTable(0).soundbanks.banks.length-1),await c2(`Enter new soundbank index${t?` (0 through ${t})`:""}:`).then(r=>{if(!r)return;const i=parseInt(r);if(isNaN(i)||t&&i>t){tn("Invalid soundbank index.");return}this.props.onAudioSelected(this.props.id,{customAudioIndex:e,soundbankIndex:i})})},this.onDeleteAudioEntry=e=>{this.props.onAudioDeleted(this.props.id,e)}}render(){const e=P0();let t;switch(e.audioType){case eo.InGame:{let r=0;const a=u2(e.game).getAudioMap(0).map(o=>{const s=r++;return o?B("option",{value:s,children:o},s):null});t=B("select",{className:"audioSelect",value:this.props.value,disabled:this.props.readonly,onChange:this.onGameMusicIndexSelection,children:a})}break;case eo.Custom:t=e.audioData.map((r,i)=>B(pB,{audioEntry:r,canDelete:!0,onDeleteAudioEntry:()=>this.onDeleteAudioEntry(i),onMidiPrompt:()=>this.onMidiPrompt(i),onSoundbankIndexPrompt:()=>this.onSoundbankIndexPrompt(i)},i+r.name)),t.push(B(pB,{audioEntry:{name:"",data:"",soundbankIndex:0},canDelete:!1,onMidiPrompt:()=>this.onMidiPrompt(e.audioData.length),onSoundbankIndexPrompt:()=>this.onSoundbankIndexPrompt(e.audioData.length)},"newentry"));break}return Xe("div",{className:"audioDetailsContainer",children:[Xe("div",{className:"audioDetailsRadioGroup",children:[B("input",{type:"radio",id:this.props.id+"-romaudio",value:"romaudio",checked:e.audioType===eo.InGame,onChange:()=>this.onAudioTypeChanged(eo.InGame)}),B("label",{htmlFor:this.props.id+"-romaudio",children:"In-Game Music Track"}),B("input",{type:"radio",id:this.props.id+"-custom",value:"custom",checked:e.audioType===eo.Custom,onChange:()=>this.onAudioTypeChanged(eo.Custom)}),B("label",{htmlFor:this.props.id+"-custom",children:"Custom Audio"})]}),t]})}}function pB(n){const e=n.audioEntry.name||"(select a midi file)",t=!!n.audioEntry.data;return Xe("div",{className:"audioCustomEntry",children:[B("img",{src:z2e,className:"audioCustomIcon audioCustomIconAudio",title:"Custom audio track",alt:"Custom audio track"}),Xe("div",{className:"audioCustomTextSections",children:[Xe("div",{className:"audioCustomSection",children:[B("span",{className:"detailsSpan",children:e}),B("img",{src:M4,className:"audioDetailsSmallEditIcon",title:"Upload midi file",alt:"Upload midi file",onClick:n.onMidiPrompt,tabIndex:0})]}),t&&Xe("div",{className:"audioCustomSection",children:[B("label",{children:"Soundbank index: "}),B("span",{className:"detailsSpan",children:n.audioEntry.soundbankIndex||0}),B("img",{src:M4,className:"audioDetailsSmallEditIcon",title:"Change soundbank index",alt:"Change soundbank index",onClick:n.onSoundbankIndexPrompt,tabIndex:0})]})]}),n.canDelete&&B("img",{src:W2e,onClick:n.onDeleteAudioEntry,className:"audioCustomIcon audioCustomIconDelete",title:"Remove audio track",alt:"Remove audio track",tabIndex:0})]})}function rxe(n){return Ys(n.board)||!tr(In.uiAdvanced)?null:B("div",{className:"audioSelectConfigButton",title:"Add custom code for choosing the music to play each turn",tabIndex:0,onClick:()=>vr(A0.AUDIO_SELECTION_CODE),children:B("img",{src:X2e,alt:"Configure audio selection"})})}class ixe extends Ne.exports.Component{constructor(e){super(e),this.onSelection=t=>{this.props.readonly||this.props.onDifficultySelected(this.props.id,t)},this.onDifficultyFocused=t=>{this.props.readonly||this.setState({focusedLevel:t})},this.state={focusedLevel:0}}render(){const e=[];for(let t=1;t<=5;t++)e.push(B(axe,{level:t,readonly:this.props.readonly,currentLevel:this.props.value,focusedLevel:this.state.focusedLevel,onDifficultyLevelSelected:this.onSelection,onDifficultyFocused:this.onDifficultyFocused},t.toString()));return Xe("div",{className:"difficultyDetailsContainer",children:[B("label",{children:this.props.desc}),B("div",{className:"difficultyDetailsLevels",children:e})]})}}class axe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onClick=()=>{this.props.readonly||this.props.onDifficultyLevelSelected(this.props.level)},this.onMouseEnter=()=>{this.props.readonly||this.props.onDifficultyFocused(this.props.level)},this.onMouseLeave=()=>{this.props.readonly||this.props.onDifficultyFocused(0)}}render(){let e="difficultyDetailsLevel";return this.props.readonly||(this.props.level<=this.props.currentLevel&&(e+=" difficultyLevelCurrent"),this.props.focusedLevel>0&&this.props.level<=this.props.focusedLevel&&(e+=" difficultyLevelFocused")),B("div",{className:e,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave})}}const oxe=[dn.NORMAL,dn.WESTERN,dn.PIRATE,dn.HORROR,dn.SPACE,dn.MYSTERY],sxe={[dn.NORMAL]:"Normal",[dn.WESTERN]:"Western",[dn.PIRATE]:"Pirate",[dn.HORROR]:"Horror",[dn.SPACE]:"Space",[dn.MYSTERY]:"Mystery"};function lxe(n){const e=[];for(const t of oxe)e.push({id:t,selected:n.costumeType===t||typeof n.costumeType>"u"&&t===dn.NORMAL,text:sxe[t]});return Xe("div",{className:"difficultyDetailsContainer",children:[B("label",{children:n.desc}),B(e8,{items:e,allowDeselect:!1,readonly:n.readonly,onToggleClick:t=>n.onCostumeTypeSelected(t)})]})}const eu=function(){return navigator.userAgent.toLowerCase().indexOf(" electron/")>-1}(),z9="/assets/logoloading.83411697.png",uxe="/assets/mpllogo.7ebbea6e.png",cxe="/assets/shirt.f6c585e2.png";const dxe=/^(.+)-(\d*)-g([a-z0-9]+)$/,Axe=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={updateCheckInProgress:!1,foundUpdate:null},this.onCheckForUpdatesClick=()=>{if(this.state.updateCheckInProgress)return;window.require("electron").ipcRenderer.send("update-check-start")},this.onStartUpdateClick=()=>{window.require("electron").ipcRenderer.send("update-check-doupdate")},this._onUpdateCheckStarted=()=>{this.setState({updateCheckInProgress:!0,foundUpdate:null})},this._onUpdateCheckNoUpdate=()=>{this.setState({updateCheckInProgress:!1,foundUpdate:!1})},this._onUpdateCheckHasUpdate=()=>{this.setState({updateCheckInProgress:!1,foundUpdate:!0})}}render(){let e="v0.8.2-9-g20ce986";if(e){const i=dxe.exec(e);i&&i[0]&&(e=i[1]+" (+"+i[2]+" <a target='_blank' href='https://github.com/PartyPlanner64/PartyPlanner64/commit/"+i[3]+"'>"+i[3]+"</a>)")}else e="unknown";let t;document.location.href.indexOf("mariopartylegacy")>=0?t="Hosted by":t="Visit";let r=null;return eu&&(this.state.foundUpdate===!0?r=Xe("a",{className:"aboutVersion",onClick:this.onStartUpdateClick,href:"javascript:;",children:[" ","Update found! Click to install."]}):r=Xe("a",{className:"aboutVersion",onClick:this.onCheckForUpdatesClick,href:"javascript:;",children:[" ",this.state.updateCheckInProgress?"Checking...":"Check for Updates"]})),Xe("div",{id:"aboutForm",children:[Xe("div",{className:"aboutHeader",children:[B("img",{src:z9,alt:"PartyPlanner64"}),B("br",{}),Xe("span",{className:"aboutVersion selectable",children:["Version"," ",B("span",{dangerouslySetInnerHTML:{__html:e}})]}),eu&&B("br",{}),r]}),B("br",{}),Xe("div",{className:"aboutText",children:[B("span",{className:"aboutTextLabel",children:"Want more PartyPlanner64?"}),Xe("ul",{children:[Xe("li",{children:["Follow"," ",B("a",{href:"https://twitter.com/PartyPlanner64",target:"_blank",rel:"noopener noreferrer",children:"@PartyPlanner64"})," ","on Twitter."]}),Xe("li",{children:[B("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64",target:"_blank",rel:"noopener noreferrer",children:"Contribute"})," ","to development on Github."]}),Xe("li",{children:["Write or view"," ",B("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/issues",target:"_blank",rel:"noopener noreferrer",children:"bugs and enhancement requests"}),"."]}),Xe("li",{children:["Read the"," ",B("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/wiki/Creating-a-Board",target:"_blank",rel:"noopener noreferrer",children:"usage tutorial"})," ","or"," ",B("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/wiki",rel:"noopener noreferrer",children:"documentation"}),"."]})]})]}),B("br",{}),B("br",{}),Xe("div",{className:"aboutHeader",children:[B("span",{children:t}),B("br",{}),B("a",{href:"http://mariopartylegacy.com/",target:"_blank",rel:"noopener noreferrer",children:B("img",{src:uxe,alt:"Mario Party Legacy"})})]}),B("div",{className:"aboutText",children:Xe("ul",{children:[Xe("li",{children:["Check out discussion in the"," ",B("a",{href:"https://discord.gg/BQMuUpM",target:"_blank",rel:"noopener noreferrer",children:"discord chat"}),"."]}),Xe("li",{children:["Post your creations to the"," ",B("a",{href:"http://www.mariopartylegacy.com/forum/index.php?action=downloads",target:"_blank",rel:"noopener noreferrer",children:"downloads page"}),"."]})]})}),B("br",{}),B("br",{}),B("div",{className:"aboutHeader",children:B("a",{href:"https://teespring.com/stores/partyplanner64",target:"_blank",rel:"noopener",children:Xe("div",{className:"aboutShirt",children:[B("img",{src:cxe,alt:"PartyPlanner64 merchandise",className:"aboutShirtImg"}),B("span",{className:"aboutShirtText",children:"Official merchandise"})]})})}),B("br",{}),B("br",{}),B("span",{className:"aboutDisclaimer",children:"PartyPlanner64 is not affiliated with Nintendo or Hudson."}),B("br",{}),B("span",{className:"aboutDisclaimer",children:"Mario Party is a registered trademark of Nintendo."})]})}componentDidMount(){if(eu){const e=window.require("electron").ipcRenderer;e.on("update-check-checking",this._onUpdateCheckStarted),e.on("update-check-noupdate",this._onUpdateCheckNoUpdate),e.on("update-check-hasupdate",this._onUpdateCheckHasUpdate)}}componentWillUnmount(){if(eu){const e=window.require("electron").ipcRenderer;e.removeListener("update-check-checking",this._onUpdateCheckStarted),e.removeListener("update-check-noupdate",this._onUpdateCheckNoUpdate),e.removeListener("update-check-hasupdate",this._onUpdateCheckHasUpdate)}}},eh=new Se,th=new Se,mB=new Ir;class fxe extends Op{constructor(e,t=1,r=16711680){const i=new yn,a=e.geometry.attributes.normal.count,o=new Bn(a*2*3,3);i.setAttribute("position",o),super(i,new bu({color:r,toneMapped:!1})),this.object=e,this.size=t,this.type="VertexNormalsHelper",this.matrixAutoUpdate=!1,this.update()}update(){this.object.updateMatrixWorld(!0),mB.getNormalMatrix(this.object.matrixWorld);const e=this.object.matrixWorld,t=this.geometry.attributes.position,r=this.object.geometry;if(r&&r.isGeometry){console.error("THREE.VertexNormalsHelper no longer supports Geometry. Use BufferGeometry instead.");return}else if(r&&r.isBufferGeometry){const i=r.attributes.position,a=r.attributes.normal;let o=0;for(let s=0,l=i.count;s<l;s++)eh.set(i.getX(s),i.getY(s),i.getZ(s)).applyMatrix4(e),th.set(a.getX(s),a.getY(s),a.getZ(s)),th.applyMatrix3(mB).normalize().multiplyScalar(this.size).add(eh),t.setXYZ(o,eh.x,eh.y,eh.z),o=o+1,t.setXYZ(o,th.x,th.y,th.z),o=o+1}t.needsUpdate=!0}}const es=new u0,yw=new nn,gg=new Se;class Cp extends ul{constructor(){super(),this.uuid=N6.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){const t=new Ir().getNormalMatrix(e);for(let r=0,i=this.vertices.length;r<i;r++)this.vertices[r].applyMatrix4(e);for(let r=0,i=this.faces.length;r<i;r++){const a=this.faces[r];a.normal.applyMatrix3(t).normalize();for(let o=0,s=a.vertexNormals.length;o<s;o++)a.vertexNormals[o].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return es.makeRotationX(e),this.applyMatrix4(es),this}rotateY(e){return es.makeRotationY(e),this.applyMatrix4(es),this}rotateZ(e){return es.makeRotationZ(e),this.applyMatrix4(es),this}translate(e,t,r){return es.makeTranslation(e,t,r),this.applyMatrix4(es),this}scale(e,t,r){return es.makeScale(e,t,r),this.applyMatrix4(es),this}lookAt(e){return yw.lookAt(e),yw.updateMatrix(),this.applyMatrix4(yw.matrix),this}fromBufferGeometry(e){const t=this,r=e.index!==null?e.index:void 0,i=e.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const a=i.position,o=i.normal,s=i.color,l=i.uv,c=i.uv2;c!==void 0&&(this.faceVertexUvs[1]=[]);for(let f=0;f<a.count;f++)t.vertices.push(new Se().fromBufferAttribute(a,f)),s!==void 0&&t.colors.push(new Jt().fromBufferAttribute(s,f));function d(f,m,g,x){const E=s===void 0?[]:[t.colors[f].clone(),t.colors[m].clone(),t.colors[g].clone()],_=o===void 0?[]:[new Se().fromBufferAttribute(o,f),new Se().fromBufferAttribute(o,m),new Se().fromBufferAttribute(o,g)],v=new I4(f,m,g,_,E,x);t.faces.push(v),l!==void 0&&t.faceVertexUvs[0].push([new pt().fromBufferAttribute(l,f),new pt().fromBufferAttribute(l,m),new pt().fromBufferAttribute(l,g)]),c!==void 0&&t.faceVertexUvs[1].push([new pt().fromBufferAttribute(c,f),new pt().fromBufferAttribute(c,m),new pt().fromBufferAttribute(c,g)])}const h=e.groups;if(h.length>0)for(let f=0;f<h.length;f++){const m=h[f],g=m.start,x=m.count;for(let E=g,_=g+x;E<_;E+=3)r!==void 0?d(r.getX(E),r.getX(E+1),r.getX(E+2),m.materialIndex):d(E,E+1,E+2,m.materialIndex)}else if(r!==void 0)for(let f=0;f<r.count;f+=3)d(r.getX(f),r.getX(f+1),r.getX(f+2));else for(let f=0;f<a.count;f+=3)d(f,f+1,f+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(gg).negate(),this.translate(gg.x,gg.y,gg.z),this}normalize(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,i=new u0;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){const e=new Se,t=new Se;for(let r=0,i=this.faces.length;r<i;r++){const a=this.faces[r],o=this.vertices[a.a],s=this.vertices[a.b],l=this.vertices[a.c];e.subVectors(l,s),t.subVectors(o,s),e.cross(t),e.normalize(),a.normal.copy(e)}}computeVertexNormals(e=!0){const t=new Array(this.vertices.length);for(let r=0,i=this.vertices.length;r<i;r++)t[r]=new Se;if(e){const r=new Se,i=new Se;for(let a=0,o=this.faces.length;a<o;a++){const s=this.faces[a],l=this.vertices[s.a],c=this.vertices[s.b],d=this.vertices[s.c];r.subVectors(d,c),i.subVectors(l,c),r.cross(i),t[s.a].add(r),t[s.b].add(r),t[s.c].add(r)}}else{this.computeFaceNormals();for(let r=0,i=this.faces.length;r<i;r++){const a=this.faces[r];t[a.a].add(a.normal),t[a.b].add(a.normal),t[a.c].add(a.normal)}}for(let r=0,i=this.vertices.length;r<i;r++)t[r].normalize();for(let r=0,i=this.faces.length;r<i;r++){const a=this.faces[r],o=a.vertexNormals;o.length===3?(o[0].copy(t[a.a]),o[1].copy(t[a.b]),o[2].copy(t[a.c])):(o[0]=t[a.a].clone(),o[1]=t[a.b].clone(),o[2]=t[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const r=this.faces[e],i=r.vertexNormals;i.length===3?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,r=this.faces.length;t<r;t++){const i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let a=0,o=i.vertexNormals.length;a<o;a++)i.__originalVertexNormals[a]?i.__originalVertexNormals[a].copy(i.vertexNormals[a]):i.__originalVertexNormals[a]=i.vertexNormals[a].clone()}const e=new Cp;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const a=this.morphNormals[t].faceNormals,o=this.morphNormals[t].vertexNormals;for(let s=0,l=this.faces.length;s<l;s++){const c=new Se,d={a:new Se,b:new Se,c:new Se};a.push(c),o.push(d)}}const i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let a=0,o=this.faces.length;a<o;a++){const s=this.faces[a],l=i.faceNormals[a],c=i.vertexNormals[a];l.copy(s.normal),c.a.copy(s.vertexNormals[0]),c.b.copy(s.vertexNormals[1]),c.c.copy(s.vertexNormals[2])}}for(let t=0,r=this.faces.length;t<r;t++){const i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ho),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ed),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let i;const a=this.vertices.length,o=this.vertices,s=e.vertices,l=this.faces,c=e.faces,d=this.colors,h=e.colors;t!==void 0&&(i=new Ir().getNormalMatrix(t));for(let f=0,m=s.length;f<m;f++){const x=s[f].clone();t!==void 0&&x.applyMatrix4(t),o.push(x)}for(let f=0,m=h.length;f<m;f++)d.push(h[f].clone());for(let f=0,m=c.length;f<m;f++){const g=c[f];let x,E;const _=g.vertexNormals,v=g.vertexColors,C=new I4(g.a+a,g.b+a,g.c+a);C.normal.copy(g.normal),i!==void 0&&C.normal.applyMatrix3(i).normalize();for(let D=0,V=_.length;D<V;D++)x=_[D].clone(),i!==void 0&&x.applyMatrix3(i).normalize(),C.vertexNormals.push(x);C.color.copy(g.color);for(let D=0,V=v.length;D<V;D++)E=v[D],C.vertexColors.push(E.clone());C.materialIndex=g.materialIndex+r,l.push(C)}for(let f=0,m=e.faceVertexUvs.length;f<m;f++){const g=e.faceVertexUvs[f];this.faceVertexUvs[f]===void 0&&(this.faceVertexUvs[f]=[]);for(let x=0,E=g.length;x<E;x++){const _=g[x],v=[];for(let C=0,D=_.length;C<D;C++)v.push(_[C].clone());this.faceVertexUvs[f].push(v)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){const t={},r=[],i=[],a=Math.pow(10,e);for(let l=0,c=this.vertices.length;l<c;l++){const d=this.vertices[l],h=Math.round(d.x*a)+"_"+Math.round(d.y*a)+"_"+Math.round(d.z*a);t[h]===void 0?(t[h]=l,r.push(this.vertices[l]),i[l]=r.length-1):i[l]=i[t[h]]}const o=[];for(let l=0,c=this.faces.length;l<c;l++){const d=this.faces[l];d.a=i[d.a],d.b=i[d.b],d.c=i[d.c];const h=[d.a,d.b,d.c];for(let f=0;f<3;f++)if(h[f]===h[(f+1)%3]){o.push(l);break}}for(let l=o.length-1;l>=0;l--){const c=o[l];this.faces.splice(c,1);for(let d=0,h=this.faceVertexUvs.length;d<h;d++)this.faceVertexUvs[d].splice(c,1)}const s=this.vertices.length-r.length;return this.vertices=r,s}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){const i=e[t];this.vertices.push(new Se(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){const e=this.faces,t=e.length;for(let l=0;l<t;l++)e[l]._id=l;function r(l,c){return l.materialIndex-c.materialIndex}e.sort(r);const i=this.faceVertexUvs[0],a=this.faceVertexUvs[1];let o,s;i&&i.length===t&&(o=[]),a&&a.length===t&&(s=[]);for(let l=0;l<t;l++){const c=e[l]._id;o&&o.push(i[c]),s&&s.push(a[c])}o&&(this.faceVertexUvs[0]=o),s&&(this.faceVertexUvs[1]=s)}toJSON(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){const g=this.parameters;for(const x in g)g[x]!==void 0&&(e[x]=g[x]);return e}const t=[];for(let g=0;g<this.vertices.length;g++){const x=this.vertices[g];t.push(x.x,x.y,x.z)}const r=[],i=[],a={},o=[],s={},l=[],c={};for(let g=0;g<this.faces.length;g++){const x=this.faces[g],E=!0,_=!1,v=this.faceVertexUvs[0][g]!==void 0,C=x.normal.length()>0,D=x.vertexNormals.length>0,V=x.color.r!==1||x.color.g!==1||x.color.b!==1,H=x.vertexColors.length>0;let R=0;if(R=d(R,0,0),R=d(R,1,E),R=d(R,2,_),R=d(R,3,v),R=d(R,4,C),R=d(R,5,D),R=d(R,6,V),R=d(R,7,H),r.push(R),r.push(x.a,x.b,x.c),r.push(x.materialIndex),v){const j=this.faceVertexUvs[0][g];r.push(m(j[0]),m(j[1]),m(j[2]))}if(C&&r.push(h(x.normal)),D){const j=x.vertexNormals;r.push(h(j[0]),h(j[1]),h(j[2]))}if(V&&r.push(f(x.color)),H){const j=x.vertexColors;r.push(f(j[0]),f(j[1]),f(j[2]))}}function d(g,x,E){return E?g|1<<x:g&~(1<<x)}function h(g){const x=g.x.toString()+g.y.toString()+g.z.toString();return a[x]!==void 0||(a[x]=i.length/3,i.push(g.x,g.y,g.z)),a[x]}function f(g){const x=g.r.toString()+g.g.toString()+g.b.toString();return s[x]!==void 0||(s[x]=o.length,o.push(g.getHex())),s[x]}function m(g){const x=g.x.toString()+g.y.toString();return c[x]!==void 0||(c[x]=l.length/2,l.push(g.x,g.y)),c[x]}return e.data={},e.data.vertices=t,e.data.normals=i,o.length>0&&(e.data.colors=o),l.length>0&&(e.data.uvs=[l]),e.data.faces=r,e}clone(){return new Cp().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let f=0,m=t.length;f<m;f++)this.vertices.push(t[f].clone());const r=e.colors;for(let f=0,m=r.length;f<m;f++)this.colors.push(r[f].clone());const i=e.faces;for(let f=0,m=i.length;f<m;f++)this.faces.push(i[f].clone());for(let f=0,m=e.faceVertexUvs.length;f<m;f++){const g=e.faceVertexUvs[f];this.faceVertexUvs[f]===void 0&&(this.faceVertexUvs[f]=[]);for(let x=0,E=g.length;x<E;x++){const _=g[x],v=[];for(let C=0,D=_.length;C<D;C++){const V=_[C];v.push(V.clone())}this.faceVertexUvs[f].push(v)}}const a=e.morphTargets;for(let f=0,m=a.length;f<m;f++){const g={};if(g.name=a[f].name,a[f].vertices!==void 0){g.vertices=[];for(let x=0,E=a[f].vertices.length;x<E;x++)g.vertices.push(a[f].vertices[x].clone())}if(a[f].normals!==void 0){g.normals=[];for(let x=0,E=a[f].normals.length;x<E;x++)g.normals.push(a[f].normals[x].clone())}this.morphTargets.push(g)}const o=e.morphNormals;for(let f=0,m=o.length;f<m;f++){const g={};if(o[f].vertexNormals!==void 0){g.vertexNormals=[];for(let x=0,E=o[f].vertexNormals.length;x<E;x++){const _=o[f].vertexNormals[x],v={};v.a=_.a.clone(),v.b=_.b.clone(),v.c=_.c.clone(),g.vertexNormals.push(v)}}if(o[f].faceNormals!==void 0){g.faceNormals=[];for(let x=0,E=o[f].faceNormals.length;x<E;x++)g.faceNormals.push(o[f].faceNormals[x].clone())}this.morphNormals.push(g)}const s=e.skinWeights;for(let f=0,m=s.length;f<m;f++)this.skinWeights.push(s[f].clone());const l=e.skinIndices;for(let f=0,m=l.length;f<m;f++)this.skinIndices.push(l[f].clone());const c=e.lineDistances;for(let f=0,m=c.length;f<m;f++)this.lineDistances.push(c[f]);const d=e.boundingBox;d!==null&&(this.boundingBox=d.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){const e=new hxe().fromGeometry(this),t=new yn,r=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",new vn(r,3).copyVector3sArray(e.vertices)),e.normals.length>0){const i=new Float32Array(e.normals.length*3);t.setAttribute("normal",new vn(i,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const i=new Float32Array(e.colors.length*3);t.setAttribute("color",new vn(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const i=new Float32Array(e.uvs.length*2);t.setAttribute("uv",new vn(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const i=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",new vn(i,2).copyVector2sArray(e.uvs2))}t.groups=e.groups;for(const i in e.morphTargets){const a=[],o=e.morphTargets[i];for(let s=0,l=o.length;s<l;s++){const c=o[s],d=new Bn(c.data.length*3,3);d.name=c.name,a.push(d.copyVector3sArray(c.data))}t.morphAttributes[i]=a}if(e.skinIndices.length>0){const i=new Bn(e.skinIndices.length*4,4);t.setAttribute("skinIndex",i.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const i=new Bn(e.skinWeights.length*4,4);t.setAttribute("skinWeight",i.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new yn;const r=e.geometry;if(e.isPoints||e.isLine){const i=new Bn(r.vertices.length*3,3),a=new Bn(r.colors.length*3,3);if(t.setAttribute("position",i.copyVector3sArray(r.vertices)),t.setAttribute("color",a.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){const o=new Bn(r.lineDistances.length,1);t.setAttribute("lineDistance",o.copyArray(r.lineDistances))}r.boundingSphere!==null&&(t.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}}Cp.prototype.isGeometry=!0;class hxe{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){const t=[];let r,i,a;const o=e.faces;for(i=0;i<o.length;i++){const s=o[i];s.materialIndex!==a&&(a=s.materialIndex,r!==void 0&&(r.count=i*3-r.start,t.push(r)),r={start:i*3,materialIndex:a})}r!==void 0&&(r.count=i*3-r.start,t.push(r)),this.groups=t}fromGeometry(e){const t=e.faces,r=e.vertices,i=e.faceVertexUvs,a=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,s=e.morphTargets,l=s.length;let c;if(l>0){c=[];for(let _=0;_<l;_++)c[_]={name:s[_].name,data:[]};this.morphTargets.position=c}const d=e.morphNormals,h=d.length;let f;if(h>0){f=[];for(let _=0;_<h;_++)f[_]={name:d[_].name,data:[]};this.morphTargets.normal=f}const m=e.skinIndices,g=e.skinWeights,x=m.length===r.length,E=g.length===r.length;r.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let _=0;_<t.length;_++){const v=t[_];this.vertices.push(r[v.a],r[v.b],r[v.c]);const C=v.vertexNormals;if(C.length===3)this.normals.push(C[0],C[1],C[2]);else{const V=v.normal;this.normals.push(V,V,V)}const D=v.vertexColors;if(D.length===3)this.colors.push(D[0],D[1],D[2]);else{const V=v.color;this.colors.push(V,V,V)}if(a===!0){const V=i[0][_];V!==void 0?this.uvs.push(V[0],V[1],V[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",_),this.uvs.push(new pt,new pt,new pt))}if(o===!0){const V=i[1][_];V!==void 0?this.uvs2.push(V[0],V[1],V[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",_),this.uvs2.push(new pt,new pt,new pt))}for(let V=0;V<l;V++){const H=s[V].vertices;c[V].data.push(H[v.a],H[v.b],H[v.c])}for(let V=0;V<h;V++){const H=d[V].vertexNormals[_];f[V].data.push(H.a,H.b,H.c)}x&&this.skinIndices.push(m[v.a],m[v.b],m[v.c]),E&&this.skinWeights.push(g[v.a],g[v.b],g[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}}class I4{constructor(e,t,r,i,a,o=0){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new Se,this.vertexNormals=Array.isArray(i)?i:[],this.color=a&&a.isColor?a:new Jt,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=o}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}class W9{constructor(){this.bgColor=0,this.showTextures=!0,this.showWireframe=!1,this.showVertexNormals=!1,this.useFormCamera=!1,this.__promises=[]}createModel(e){const t=this._parseMaterials(e);return this.__threeResult=this._parseForm(e,t),new Promise(r=>{Promise.all(this.__promises).then(()=>{this.__promises=[],r(this.__threeResult)})})}_parseForm(e,t){const r=this._parseFormObj(e,t,0);return r.length!==1&&console.warn(`Expected 1 return object from _parseForm, got ${r.length}`),r[0]}_parseFormObj(e,t,r){let i=Or.getByGlobalIndex(e,"OBJ1",r);if(i===null&&(r===0&&(i=e.OBJ1[0].parsed.objects[0],console.warn("Using first object rather than window index 0 object")),!i))throw new Error(`Attempted to get unavailable OBJ ${r}`);Array.isArray(i)||(i=[i]);const a=[];for(let o=0;o<i.length;o++){const s=i[o];if(s.objType===61){const l=this._createObject3DFromOBJ1Entry(s);for(let c=0;c<s.children.length;c++){const d=this._parseFormObj(e,t,s.children[c]);d&&d.length&&d.forEach(h=>{l.add(h)})}a.push(l)}else if(s.objType===16){const l=this._createObject3DFromOBJ1Entry(s),c=s.skeletonGlobalIndex,d=this._parseFormSkl(e,t,c);l.add(d),a.push(l)}else if(s.objType===58){const l=this._createObject3DFromOBJ1Entry(s),c=new Cp;for(let h=s.faceIndex;h<s.faceIndex+s.faceCount;h++){const f=e.FAC1[0].parsed.faces[h];this._populateGeometryWithFace(e,c,f)}const d=c.toBufferGeometry();if(d.setIndex(c.vertices.map((h,f)=>f)),this.showTextures){const h=new Mi(d,t);l.add(h)}if(this.showWireframe){const h=new bu({color:qW(this.bgColor),linewidth:this.showTextures?2:1}),f=new Op(new oZ(d),h);l.add(f)}if(this.showVertexNormals){const h=new fxe(new Mi(d,t),8,65280);l.add(h)}a.push(l)}}return a}_createObject3DFromOBJ1Entry(e){const t=new nn;return e.hasOwnProperty("globalIndex")&&(t.name=this._getObjNameFromId(e.globalIndex)),t.position.x=e.posX,t.position.y=e.posY,t.position.z=e.posZ,t.rotation.x=j1(e.rotX),t.rotation.y=j1(e.rotY),t.rotation.z=j1(e.rotZ),t.rotation.order="ZYX",t.scale.x=e.scaleX,t.scale.y=e.scaleY,t.scale.z=e.scaleZ,t}_getObjNameFromId(e){return At(e)}_parseFormSkl(e,t,r){const i=Or.getByGlobalIndex(e,"SKL1",r);if(i===null||Array.isArray(i))throw new Error("Unexpected SKL1 search result");return this._parseFormSklNode(e,t,i.skls,0)}_parseFormSklNode(e,t,r,i){const a=r[i],o=this._createObject3DFromOBJ1Entry(a),s=a.objGlobalIndex,l=this._parseFormObj(e,t,s);if(l&&l.length&&l.forEach(c=>{o.add(c)}),a.isParentNode){let c=i+1;for(;c;){const d=r[c],h=this._parseFormSklNode(e,t,r,c);if(o.add(h),d.nextSiblingRelativeIndex)c+=d.nextSiblingRelativeIndex;else break}}return o}_populateGeometryWithFace(e,t,r){if(!r.vtxEntries.length)return;const i=e.VTX1[0].parsed.scale,a=r.vtxEntries;let o=[];for(let s=0;s<3;s++){const l=a[s];let c=e.VTX1[0].parsed.vertices[l.vertexIndex];o.push(t.vertices.length),t.vertices.push(this._makeVertex(c,i))}if(a.length===4)for(let s=0;s<4;s++){if(s===1)continue;const l=a[s];let c=e.VTX1[0].parsed.vertices[l.vertexIndex];o.push(t.vertices.length),t.vertices.push(this._makeVertex(c,i))}a.length===3?this._addFace(t,e,r,[o[0],o[1],o[2]],[a[0],a[1],a[2]]):a.length===4&&(this._addFace(t,e,r,[o[0],o[1],o[2]],[a[0],a[1],a[2]]),this._addFace(t,e,r,[o[3],o[4],o[5]],[a[0],a[2],a[3]]))}_addFace(e,t,r,i,a){const o=new I4(i[0],i[1],i[2]);o.vertexNormals=this._makeVertexNormals(t,a[0].vertexIndex,a[1].vertexIndex,a[2].vertexIndex),o.materialIndex=this._getMaterialIndex(r),o.color=new Jt(this._getColorBytes(t,r)),o.vertexColors=this._makeVertexColors(t,r,a[0],a[1],a[2]),e.faceVertexUvs[0].push(this._makeVertexUVs(a[0],a[1],a[2])),e.faces.push(o)}_parseMaterials(e){const t=[new Rc({vertexColors:!0}),new Rc({vertexColors:!0})];if(e.BMP1)if(e.ATR1&&e.ATR1[0]){const r=e.ATR1[0].parsed.atrs;for(let i=0;i<r.length;i++){const a=r[i],o=Or.getByGlobalIndex(e,"BMP1",a.bmpGlobalIndex);if(o===null||Array.isArray(o)){console.warn("Unexpected bitmap result from window index lookup");continue}const s=this._createTextureMaterial(a,o);t.push(s)}}else console.warn("BMPs, but no ATRs");return t}_createTextureMaterial(e,t){const r=Ea(t.src,t.width,t.height);wt("Texture",r);const i=new VI;i.crossOrigin="";let a;const o=new Promise(s=>{a=i.load(r,s),a.flipY=!1,a.wrapS=this._getWrappingBehavior(e.xBehavior),a.wrapT=this._getWrappingBehavior(e.yBehavior)});return this.__promises.push(o),new Rc({alphaTest:.5,map:a,vertexColors:!0})}_getWrappingBehavior(e){switch(e){case 44:return Uh;case 45:return Nh;case 46:return sa;default:return console.warn(`Unknown behavior ${At(e)}`),sa}}_makeVertex(e,t){return new Se(e.x*t,e.y*t,e.z*t)}_makeVertexNormals(e,t,r,i){return[this._makeVertexNormal(e,t),this._makeVertexNormal(e,r),this._makeVertexNormal(e,i)]}_makeVertexNormal(e,t){const r=e.VTX1[0].parsed.vertices[t],i=new Se(r.normalX/(127+(r.normalX<0?1:0)),r.normalY/(127+(r.normalY<0?1:0)),r.normalZ/(127+(r.normalZ<0?1:0)));return i.normalize(),i}_makeVertexUVs(e,t,r){return[this._makeVertexUV(e),this._makeVertexUV(t),this._makeVertexUV(r)]}_makeVertexUV(e){return new pt(e.u,e.v)}_getMaterialIndex(e){if(e.atrIndex>=0||e.mystery3===54)return e.atrIndex+2;if(e.mystery3===55)return 0}_getColorBytes(e,t){if(t.mystery3===54){const r=t.materialIndex;return this._getColorFromMaterial(e,r)}else if(t.mystery3===55)return 16776192;console.warn("Could not determine color for face")}_getColorFromMaterial(e,t){let r;return e.MAT1&&e.MAT1[0]&&e.MAT1[0].parsed&&(r=e.MAT1[0].parsed.materials[t].colorIndex,e.COL1&&e.COL1[0]&&e.COL1[0].parsed&&e.COL1[0].parsed.hasOwnProperty(r))?e.COL1[0].parsed[r]>>>8:(console.warn(`Could not find color ${r} specified by material ${t}`),16776192)}_makeVertexColors(e,t,r,i,a){return t.mystery3!==55?[]:[this._makeVertexColor(e,r),this._makeVertexColor(e,i),this._makeVertexColor(e,a)]}_makeVertexColor(e,t){return t.materialIndex<0?null:new Jt(this._getColorFromMaterial(e,t.materialIndex))}createCamera(e,t,r){const i=new mi(75,t/r,1,999999);if(this.useFormCamera){const a=Or.getObjectsByType(e,97);if(a.length===3){const o=a[0],s=a[1];return i.position.set(o.posX,o.posY,o.posZ),i.lookAt(new Se(s.posX,s.posY,s.posZ)),i}else console.warn(`Unexpected camera object count: ${a.length}`)}return i.position.z=500,i}}class Ic{static isMtnx(e){return e?(e instanceof DataView||(e=new DataView(e)),e.getUint32(0)===1297370712):!1}static unpack(e){if(e instanceof DataView||(e=new DataView(e)),!Ic.isMtnx(e))return null;const t=Object.create(null);t.totalFrames=e.getUint16(10),t.tracks=[];const r=e.getUint16(8),i=e.getUint32(12),a=e.getUint32(16),o=e.getUint32(20),s=new DataView(e.buffer,e.byteOffset+i),l=new DataView(e.buffer,e.byteOffset+a),c=new DataView(e.buffer,e.byteOffset+o);for(let d=0;d<r;d++){const h=e.getUint32(24+d*4),f=new DataView(e.buffer,e.byteOffset+h);t.tracks.push(Ic.parseTrack(f,d,s,l,c))}return t}static parseTrack(e,t,r,i,a){const o=Object.create(null);o.type=e.getUint8(0),o.dimension=e.getUint8(1),o.mystery1=e.getUint8(2),o.mystery2=e.getUint8(3),o.mystery3=e.getUint16(4),o.totalFrames=e.getUint16(6),o.mystery4=e.getUint8(8),o.objIndex=e.getUint8(9),o.keyframeCount=e.getUint16(14),o.d=r.getUint8(t);const s=e.getUint16(10),l=e.getUint16(12);o.keyframes=Object.create(null);for(let c=0;c<o.keyframeCount;c++){const d=i.getUint16(s*2+c*2);o.keyframes[d]=Ic.parseData(a,l,c)}return o}static parseData(e,t,r){const a=Object.create(null);return a.value1=e.getFloat32(t*4+r*12),a.value2=e.getFloat32(t*4+r*12+4),a.value3=e.getFloat32(t*4+r*12+8),a}}var O4=(n=>(n[n.X=69]="X",n[n.Y=70]="Y",n[n.Z=71]="Z",n))(O4||{}),X9=(n=>(n[n.Transform=23]="Transform",n[n.Rotation=76]="Rotation",n[n.Scale=27]="Scale",n))(X9||{});const SB={type:"change"},Ew={type:"start"},gB={type:"end"};class pxe extends ul{constructor(e,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Se,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Wd.ROTATE,MIDDLE:Wd.DOLLY,RIGHT:Wd.PAN},this.touches={ONE:Xd.ROTATE,TWO:Xd.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(ve){ve.addEventListener("keydown",ae),this._domElementKeyEvents=ve},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(SB),r.update(),a=i.NONE},this.update=function(){const ve=new Se,$e=new Si().setFromUnitVectors(e.up,new Se(0,1,0)),gt=$e.clone().invert(),St=new Se,Ce=new Si,Ft=2*Math.PI;return function(){const Nt=r.object.position;ve.copy(Nt).sub(r.target),ve.applyQuaternion($e),s.setFromVector3(ve),r.autoRotate&&a===i.NONE&&te(R()),r.enableDamping?(s.theta+=l.theta*r.dampingFactor,s.phi+=l.phi*r.dampingFactor):(s.theta+=l.theta,s.phi+=l.phi);let Je=r.minAzimuthAngle,mt=r.maxAzimuthAngle;return isFinite(Je)&&isFinite(mt)&&(Je<-Math.PI?Je+=Ft:Je>Math.PI&&(Je-=Ft),mt<-Math.PI?mt+=Ft:mt>Math.PI&&(mt-=Ft),Je<=mt?s.theta=Math.max(Je,Math.min(mt,s.theta)):s.theta=s.theta>(Je+mt)/2?Math.max(Je,s.theta):Math.min(mt,s.theta)),s.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=c,s.radius=Math.max(r.minDistance,Math.min(r.maxDistance,s.radius)),r.enableDamping===!0?r.target.addScaledVector(d,r.dampingFactor):r.target.add(d),ve.setFromSpherical(s),ve.applyQuaternion(gt),Nt.copy(r.target).add(ve),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,d.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),d.set(0,0,0)),c=1,h||St.distanceToSquared(r.object.position)>o||8*(1-Ce.dot(r.object.quaternion))>o?(r.dispatchEvent(SB),St.copy(r.object.position),Ce.copy(r.object.quaternion),h=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",Fe),r.domElement.removeEventListener("pointerdown",k),r.domElement.removeEventListener("pointercancel",le),r.domElement.removeEventListener("wheel",He),r.domElement.removeEventListener("pointermove",De),r.domElement.removeEventListener("pointerup",we),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ae)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=i.NONE;const o=1e-6,s=new cb,l=new cb;let c=1;const d=new Se;let h=!1;const f=new pt,m=new pt,g=new pt,x=new pt,E=new pt,_=new pt,v=new pt,C=new pt,D=new pt,V=[],H={};function R(){return 2*Math.PI/60/60*r.autoRotateSpeed}function j(){return Math.pow(.95,r.zoomSpeed)}function te(ve){l.theta-=ve}function $(ve){l.phi-=ve}const z=function(){const ve=new Se;return function(gt,St){ve.setFromMatrixColumn(St,0),ve.multiplyScalar(-gt),d.add(ve)}}(),I=function(){const ve=new Se;return function(gt,St){r.screenSpacePanning===!0?ve.setFromMatrixColumn(St,1):(ve.setFromMatrixColumn(St,0),ve.crossVectors(r.object.up,ve)),ve.multiplyScalar(gt),d.add(ve)}}(),q=function(){const ve=new Se;return function(gt,St){const Ce=r.domElement;if(r.object.isPerspectiveCamera){const Ft=r.object.position;ve.copy(Ft).sub(r.target);let ht=ve.length();ht*=Math.tan(r.object.fov/2*Math.PI/180),z(2*gt*ht/Ce.clientHeight,r.object.matrix),I(2*St*ht/Ce.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(z(gt*(r.object.right-r.object.left)/r.object.zoom/Ce.clientWidth,r.object.matrix),I(St*(r.object.top-r.object.bottom)/r.object.zoom/Ce.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function P(ve){r.object.isPerspectiveCamera?c/=ve:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*ve)),r.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ee(ve){r.object.isPerspectiveCamera?c*=ve:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/ve)),r.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ce(ve){f.set(ve.clientX,ve.clientY)}function U(ve){v.set(ve.clientX,ve.clientY)}function O(ve){x.set(ve.clientX,ve.clientY)}function G(ve){m.set(ve.clientX,ve.clientY),g.subVectors(m,f).multiplyScalar(r.rotateSpeed);const $e=r.domElement;te(2*Math.PI*g.x/$e.clientHeight),$(2*Math.PI*g.y/$e.clientHeight),f.copy(m),r.update()}function re(ve){C.set(ve.clientX,ve.clientY),D.subVectors(C,v),D.y>0?P(j()):D.y<0&&ee(j()),v.copy(C),r.update()}function oe(ve){E.set(ve.clientX,ve.clientY),_.subVectors(E,x).multiplyScalar(r.panSpeed),q(_.x,_.y),x.copy(E),r.update()}function se(ve){ve.deltaY<0?ee(j()):ve.deltaY>0&&P(j()),r.update()}function be(ve){let $e=!1;switch(ve.code){case r.keys.UP:q(0,r.keyPanSpeed),$e=!0;break;case r.keys.BOTTOM:q(0,-r.keyPanSpeed),$e=!0;break;case r.keys.LEFT:q(r.keyPanSpeed,0),$e=!0;break;case r.keys.RIGHT:q(-r.keyPanSpeed,0),$e=!0;break}$e&&(ve.preventDefault(),r.update())}function Be(){if(V.length===1)f.set(V[0].pageX,V[0].pageY);else{const ve=.5*(V[0].pageX+V[1].pageX),$e=.5*(V[0].pageY+V[1].pageY);f.set(ve,$e)}}function Te(){if(V.length===1)x.set(V[0].pageX,V[0].pageY);else{const ve=.5*(V[0].pageX+V[1].pageX),$e=.5*(V[0].pageY+V[1].pageY);x.set(ve,$e)}}function ye(){const ve=V[0].pageX-V[1].pageX,$e=V[0].pageY-V[1].pageY,gt=Math.sqrt(ve*ve+$e*$e);v.set(0,gt)}function We(){r.enableZoom&&ye(),r.enablePan&&Te()}function at(){r.enableZoom&&ye(),r.enableRotate&&Be()}function Ke(ve){if(V.length==1)m.set(ve.pageX,ve.pageY);else{const gt=Ee(ve),St=.5*(ve.pageX+gt.x),Ce=.5*(ve.pageY+gt.y);m.set(St,Ce)}g.subVectors(m,f).multiplyScalar(r.rotateSpeed);const $e=r.domElement;te(2*Math.PI*g.x/$e.clientHeight),$(2*Math.PI*g.y/$e.clientHeight),f.copy(m)}function tt(ve){if(V.length===1)E.set(ve.pageX,ve.pageY);else{const $e=Ee(ve),gt=.5*(ve.pageX+$e.x),St=.5*(ve.pageY+$e.y);E.set(gt,St)}_.subVectors(E,x).multiplyScalar(r.panSpeed),q(_.x,_.y),x.copy(E)}function lt(ve){const $e=Ee(ve),gt=ve.pageX-$e.x,St=ve.pageY-$e.y,Ce=Math.sqrt(gt*gt+St*St);C.set(0,Ce),D.set(0,Math.pow(C.y/v.y,r.zoomSpeed)),P(D.y),v.copy(C)}function Ie(ve){r.enableZoom&&lt(ve),r.enablePan&&tt(ve)}function Ue(ve){r.enableZoom&&lt(ve),r.enableRotate&&Ke(ve)}function k(ve){r.enabled!==!1&&(V.length===0&&(r.domElement.setPointerCapture(ve.pointerId),r.domElement.addEventListener("pointermove",De),r.domElement.addEventListener("pointerup",we)),Le(ve),ve.pointerType==="touch"?Y(ve):ne(ve))}function De(ve){r.enabled!==!1&&(ve.pointerType==="touch"?_e(ve):fe(ve))}function we(ve){Re(ve),V.length===0&&(r.domElement.releasePointerCapture(ve.pointerId),r.domElement.removeEventListener("pointermove",De),r.domElement.removeEventListener("pointerup",we)),r.dispatchEvent(gB),a=i.NONE}function le(ve){Re(ve)}function ne(ve){let $e;switch(ve.button){case 0:$e=r.mouseButtons.LEFT;break;case 1:$e=r.mouseButtons.MIDDLE;break;case 2:$e=r.mouseButtons.RIGHT;break;default:$e=-1}switch($e){case Wd.DOLLY:if(r.enableZoom===!1)return;U(ve),a=i.DOLLY;break;case Wd.ROTATE:if(ve.ctrlKey||ve.metaKey||ve.shiftKey){if(r.enablePan===!1)return;O(ve),a=i.PAN}else{if(r.enableRotate===!1)return;ce(ve),a=i.ROTATE}break;case Wd.PAN:if(ve.ctrlKey||ve.metaKey||ve.shiftKey){if(r.enableRotate===!1)return;ce(ve),a=i.ROTATE}else{if(r.enablePan===!1)return;O(ve),a=i.PAN}break;default:a=i.NONE}a!==i.NONE&&r.dispatchEvent(Ew)}function fe(ve){if(r.enabled!==!1)switch(a){case i.ROTATE:if(r.enableRotate===!1)return;G(ve);break;case i.DOLLY:if(r.enableZoom===!1)return;re(ve);break;case i.PAN:if(r.enablePan===!1)return;oe(ve);break}}function He(ve){r.enabled===!1||r.enableZoom===!1||a!==i.NONE||(ve.preventDefault(),r.dispatchEvent(Ew),se(ve),r.dispatchEvent(gB))}function ae(ve){r.enabled===!1||r.enablePan===!1||be(ve)}function Y(ve){switch(rt(ve),V.length){case 1:switch(r.touches.ONE){case Xd.ROTATE:if(r.enableRotate===!1)return;Be(),a=i.TOUCH_ROTATE;break;case Xd.PAN:if(r.enablePan===!1)return;Te(),a=i.TOUCH_PAN;break;default:a=i.NONE}break;case 2:switch(r.touches.TWO){case Xd.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;We(),a=i.TOUCH_DOLLY_PAN;break;case Xd.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;at(),a=i.TOUCH_DOLLY_ROTATE;break;default:a=i.NONE}break;default:a=i.NONE}a!==i.NONE&&r.dispatchEvent(Ew)}function _e(ve){switch(rt(ve),a){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ke(ve),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;tt(ve),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ie(ve),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ue(ve),r.update();break;default:a=i.NONE}}function Fe(ve){r.enabled!==!1&&ve.preventDefault()}function Le(ve){V.push(ve)}function Re(ve){delete H[ve.pointerId];for(let $e=0;$e<V.length;$e++)if(V[$e].pointerId==ve.pointerId){V.splice($e,1);return}}function rt(ve){let $e=H[ve.pointerId];$e===void 0&&($e=new pt,H[ve.pointerId]=$e),$e.set(ve.pageX,ve.pageY)}function Ee(ve){const $e=ve.pointerId===V[0].pointerId?V[1]:V[0];return H[$e.pointerId]}r.domElement.addEventListener("contextmenu",Fe),r.domElement.addEventListener("pointerdown",k),r.domElement.addEventListener("pointercancel",le),r.domElement.addEventListener("wheel",He,{passive:!1}),this.update()}}class mD{constructor(){this.pluginCallbacks=[],this.register(function(e){return new Exe(e)}),this.register(function(e){return new Cxe(e)}),this.register(function(e){return new Vxe(e)}),this.register(function(e){return new Fxe(e)}),this.register(function(e){return new Txe(e)}),this.register(function(e){return new Dxe(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){typeof r=="object"&&(console.warn("THREE.GLTFExporter: parse() expects options as the fourth argument now."),i=r);const a=new yxe,o=[];for(let s=0,l=this.pluginCallbacks.length;s<l;s++)o.push(this.pluginCallbacks[s](a));a.setPlugins(o),a.write(e,t,i).catch(r)}parseAsync(e,t){const r=this;return new Promise(function(i,a){r.parse(e,i,a,t)})}}const _n={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Da={};Da[Kr]=_n.NEAREST;Da[$w]=_n.NEAREST_MIPMAP_NEAREST;Da[ey]=_n.NEAREST_MIPMAP_LINEAR;Da[pi]=_n.LINEAR;Da[O6]=_n.LINEAR_MIPMAP_NEAREST;Da[Bp]=_n.LINEAR_MIPMAP_LINEAR;Da[sa]=_n.CLAMP_TO_EDGE;Da[Nh]=_n.REPEAT;Da[Uh]=_n.MIRRORED_REPEAT;const _B={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},xB=12,mxe=1179937895,Sxe=2,vB=8,gxe=1313821514,_xe=5130562;function hh(n,e){return n.length===e.length&&n.every(function(t,r){return t===e[r]})}function xxe(n){if(window.TextEncoder!==void 0)return new TextEncoder().encode(n).buffer;const e=new Uint8Array(new ArrayBuffer(n.length));for(let t=0,r=n.length;t<r;t++){const i=n.charCodeAt(t);e[t]=i>255?32:i}return e.buffer}function vxe(n){return hh(n.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function wxe(n,e,t){const r={min:new Array(n.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(n.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+t;i++)for(let a=0;a<n.itemSize;a++){let o;n.itemSize>4?o=n.array[i*n.itemSize+a]:a===0?o=n.getX(i):a===1?o=n.getY(i):a===2?o=n.getZ(i):a===3&&(o=n.getW(i)),r.min[a]=Math.min(r.min[a],o),r.max[a]=Math.max(r.max[a],o)}return r}function K9(n){return Math.ceil(n/4)*4}function Cw(n,e=0){const t=K9(n.byteLength);if(t!==n.byteLength){const r=new Uint8Array(t);if(r.set(new Uint8Array(n)),e!==0)for(let i=n.byteLength;i<t;i++)r[i]=e;return r.buffer}return n}let wB=null;class yxe{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,r){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const i=this,a=i.buffers,o=i.json;r=i.options;const s=i.extensionsUsed,l=new Blob(a,{type:"application/octet-stream"}),c=Object.keys(s);if(c.length>0&&(o.extensionsUsed=c),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=l.size),r.binary===!0){const d=new window.FileReader;d.readAsArrayBuffer(l),d.onloadend=function(){const h=Cw(d.result),f=new DataView(new ArrayBuffer(vB));f.setUint32(0,h.byteLength,!0),f.setUint32(4,_xe,!0);const m=Cw(xxe(JSON.stringify(o)),32),g=new DataView(new ArrayBuffer(vB));g.setUint32(0,m.byteLength,!0),g.setUint32(4,gxe,!0);const x=new ArrayBuffer(xB),E=new DataView(x);E.setUint32(0,mxe,!0),E.setUint32(4,Sxe,!0);const _=xB+g.byteLength+m.byteLength+f.byteLength+h.byteLength;E.setUint32(8,_,!0);const v=new Blob([x,g,m,f,h],{type:"application/octet-stream"}),C=new window.FileReader;C.readAsArrayBuffer(v),C.onloadend=function(){t(C.result)}}}else if(o.buffers&&o.buffers.length>0){const d=new window.FileReader;d.readAsDataURL(l),d.onloadend=function(){const h=d.result;o.buffers[0].uri=h,t(o)}}else t(o)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const r=this.options,i=this.extensionsUsed;try{const a=JSON.parse(JSON.stringify(e.userData));if(r.includeCustomExtensions&&a.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const o in a.gltfExtensions)t.extensions[o]=a.gltfExtensions[o],i[o]=!0;delete a.gltfExtensions}Object.keys(a).length>0&&(t.extras=a)}catch(a){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+a.message)}}getUID(e){return this.uids.has(e)||this.uids.set(e,this.uid++),this.uids.get(e)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const r=new Se;for(let i=0,a=e.count;i<a;i++)if(Math.abs(r.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const r=e.clone(),i=new Se;for(let a=0,o=r.count;a<o;a++)i.fromBufferAttribute(r,a),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),r.setXYZ(a,i.x,i.y,i.z);return t.attributesNormalized.set(e,r),r}applyTextureTransform(e,t){let r=!1;const i={};(t.offset.x!==0||t.offset.y!==0)&&(i.offset=t.offset.toArray(),r=!0),t.rotation!==0&&(i.rotation=t.rotation,r=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(i.scale=t.repeat.toArray(),r=!0),r&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const r=e==null?void 0:e.image,i=t==null?void 0:t.image,a=Math.max((r==null?void 0:r.width)||0,(i==null?void 0:i.width)||0),o=Math.max((r==null?void 0:r.height)||0,(i==null?void 0:i.height)||0),s=document.createElement("canvas");s.width=a,s.height=o;const l=s.getContext("2d");l.fillStyle="#00ffff",l.fillRect(0,0,a,o);const c=l.getImageData(0,0,a,o);if(r){l.drawImage(r,0,0,a,o);const f=l.getImageData(0,0,a,o).data;for(let m=2;m<f.length;m+=4)c.data[m]=f[m]}if(i){l.drawImage(i,0,0,a,o);const f=l.getImageData(0,0,a,o).data;for(let m=1;m<f.length;m+=4)c.data[m]=f[m]}l.putImageData(c,0,0);const h=(e||t).clone();return h.source=new qr(s).source,h}processBuffer(e){const t=this.json,r=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),r.push(e),0}processBufferView(e,t,r,i,a){const o=this.json;o.bufferViews||(o.bufferViews=[]);let s;t===_n.UNSIGNED_BYTE?s=1:t===_n.UNSIGNED_SHORT?s=2:s=4;const l=K9(i*e.itemSize*s),c=new DataView(new ArrayBuffer(l));let d=0;for(let m=r;m<r+i;m++)for(let g=0;g<e.itemSize;g++){let x;e.itemSize>4?x=e.array[m*e.itemSize+g]:g===0?x=e.getX(m):g===1?x=e.getY(m):g===2?x=e.getZ(m):g===3&&(x=e.getW(m)),t===_n.FLOAT?c.setFloat32(d,x,!0):t===_n.UNSIGNED_INT?c.setUint32(d,x,!0):t===_n.UNSIGNED_SHORT?c.setUint16(d,x,!0):t===_n.UNSIGNED_BYTE&&c.setUint8(d,x),d+=s}const h={buffer:this.processBuffer(c.buffer),byteOffset:this.byteOffset,byteLength:l};return a!==void 0&&(h.target=a),a===_n.ARRAY_BUFFER&&(h.byteStride=e.itemSize*s),this.byteOffset+=l,o.bufferViews.push(h),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,r=t.json;return r.bufferViews||(r.bufferViews=[]),new Promise(function(i){const a=new window.FileReader;a.readAsArrayBuffer(e),a.onloadend=function(){const o=Cw(a.result),s={buffer:t.processBuffer(o),byteOffset:t.byteOffset,byteLength:o.byteLength};t.byteOffset+=o.byteLength,i(r.bufferViews.push(s)-1)}})}processAccessor(e,t,r,i){const a=this.options,o=this.json,s={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};let l;if(e.array.constructor===Float32Array)l=_n.FLOAT;else if(e.array.constructor===Uint32Array)l=_n.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)l=_n.UNSIGNED_SHORT;else if(e.array.constructor===Uint8Array)l=_n.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(r===void 0&&(r=0),i===void 0&&(i=e.count),a.truncateDrawRange&&t!==void 0&&t.index===null){const m=r+i,g=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;r=Math.max(r,t.drawRange.start),i=Math.min(m,g)-r,i<0&&(i=0)}if(i===0)return null;const c=wxe(e,r,i);let d;t!==void 0&&(d=e===t.index?_n.ELEMENT_ARRAY_BUFFER:_n.ARRAY_BUFFER);const h=this.processBufferView(e,l,r,i,d),f={bufferView:h.id,byteOffset:h.byteOffset,componentType:l,count:i,max:c.max,min:c.min,type:s[e.itemSize]};return e.normalized===!0&&(f.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(f)-1}processImage(e,t,r,i="image/png"){const a=this,o=a.cache,s=a.json,l=a.options,c=a.pending;o.images.has(e)||o.images.set(e,{});const d=o.images.get(e),h=i+":flipY/"+r.toString();if(d[h]!==void 0)return d[h];s.images||(s.images=[]);const f={mimeType:i};if(l.embedImages){const g=wB=wB||document.createElement("canvas");g.width=Math.min(e.width,l.maxTextureSize),g.height=Math.min(e.height,l.maxTextureSize);const x=g.getContext("2d");if(r===!0&&(x.translate(0,g.height),x.scale(1,-1)),typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&e instanceof ImageBitmap)x.drawImage(e,0,0,g.width,g.height);else{t!==Qi&&console.error("GLTFExporter: Only RGBAFormat is supported."),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const E=new Uint8ClampedArray(e.height*e.width*4);for(let _=0;_<E.length;_+=4)E[_+0]=e.data[_+0],E[_+1]=e.data[_+1],E[_+2]=e.data[_+2],E[_+3]=e.data[_+3];x.putImageData(new ImageData(E,e.width,e.height),0,0)}l.binary===!0?c.push(new Promise(function(E){g.toBlob(function(_){a.processBufferViewImage(_).then(function(v){f.bufferView=v,E()})},i)})):f.uri=g.toDataURL(i)}else f.uri=e.src;const m=s.images.push(f)-1;return d[h]=m,m}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const r={magFilter:Da[e.magFilter],minFilter:Da[e.minFilter],wrapS:Da[e.wrapS],wrapT:Da[e.wrapT]};return t.samplers.push(r)-1}processTexture(e){const t=this.cache,r=this.json;if(t.textures.has(e))return t.textures.get(e);r.textures||(r.textures=[]);let i=e.userData.mimeType;i==="image/webp"&&(i="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,i)};e.name&&(a.name=e.name),this._invokeAll(function(s){s.writeTexture&&s.writeTexture(e,a)});const o=r.textures.push(a)-1;return t.textures.set(e,o),o}processMaterial(e){const t=this.cache,r=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;r.materials||(r.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const a=e.color.toArray().concat([e.opacity]);if(hh(a,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=a),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const s=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),l={index:this.processTexture(s)};this.applyTextureTransform(l,s),i.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const s={index:this.processTexture(e.map)};this.applyTextureTransform(s,e.map),i.pbrMetallicRoughness.baseColorTexture=s}if(e.emissive){const s=e.emissive.clone().multiplyScalar(e.emissiveIntensity),l=Math.max(s.r,s.g,s.b);if(l>1&&(s.multiplyScalar(1/l),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),l>0&&(i.emissiveFactor=s.toArray()),e.emissiveMap){const c={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(c,e.emissiveMap),i.emissiveTexture=c}}if(e.normalMap){const s={index:this.processTexture(e.normalMap)};e.normalScale&&e.normalScale.x!==1&&(s.scale=e.normalScale.x),this.applyTextureTransform(s,e.normalMap),i.normalTexture=s}if(e.aoMap){const s={index:this.processTexture(e.aoMap),texCoord:1};e.aoMapIntensity!==1&&(s.strength=e.aoMapIntensity),this.applyTextureTransform(s,e.aoMap),i.occlusionTexture=s}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===Nc&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(s){s.writeMaterial&&s.writeMaterial(e,i)});const o=r.materials.push(i)-1;return t.materials.set(e,o),o}processMesh(e){const t=this.cache,r=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let C=0,D=e.material.length;C<D;C++)i.push(e.material[C].uuid);else i.push(e.material.uuid);const a=i.join(":");if(t.meshes.has(a))return t.meshes.get(a);const o=e.geometry;let s;if(e.isLineSegments?s=_n.LINES:e.isLineLoop?s=_n.LINE_LOOP:e.isLine?s=_n.LINE_STRIP:e.isPoints?s=_n.POINTS:s=e.material.wireframe?_n.LINES:_n.TRIANGLES,o.isBufferGeometry!==!0)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");const l={},c={},d=[],h=[],f={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},m=o.getAttribute("normal");m!==void 0&&!this.isNormalizedNormalAttribute(m)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(m)));let g=null;for(let C in o.attributes){if(C.slice(0,5)==="morph")continue;const D=o.attributes[C];if(C=f[C]||C.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(C)||(C="_"+C),t.attributes.has(this.getUID(D))){c[C]=t.attributes.get(this.getUID(D));continue}g=null;const H=D.array;C==="JOINTS_0"&&!(H instanceof Uint16Array)&&!(H instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),g=new vn(new Uint16Array(H),D.itemSize,D.normalized));const R=this.processAccessor(g||D,o);R!==null&&(c[C]=R,t.attributes.set(this.getUID(D),R))}if(m!==void 0&&o.setAttribute("normal",m),Object.keys(c).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const C=[],D=[],V={};if(e.morphTargetDictionary!==void 0)for(const H in e.morphTargetDictionary)V[e.morphTargetDictionary[H]]=H;for(let H=0;H<e.morphTargetInfluences.length;++H){const R={};let j=!1;for(const te in o.morphAttributes){if(te!=="position"&&te!=="normal"){j||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),j=!0);continue}const $=o.morphAttributes[te][H],z=te.toUpperCase(),I=o.attributes[te];if(t.attributes.has(this.getUID($))){R[z]=t.attributes.get(this.getUID($));continue}const q=$.clone();if(!o.morphTargetsRelative)for(let P=0,ee=$.count;P<ee;P++)q.setXYZ(P,$.getX(P)-I.getX(P),$.getY(P)-I.getY(P),$.getZ(P)-I.getZ(P));R[z]=this.processAccessor(q,o),t.attributes.set(this.getUID(I),R[z])}h.push(R),C.push(e.morphTargetInfluences[H]),e.morphTargetDictionary!==void 0&&D.push(V[H])}l.weights=C,D.length>0&&(l.extras={},l.extras.targetNames=D)}const x=Array.isArray(e.material);if(x&&o.groups.length===0)return null;const E=x?e.material:[e.material],_=x?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let C=0,D=_.length;C<D;C++){const V={mode:s,attributes:c};if(this.serializeUserData(o,V),h.length>0&&(V.targets=h),o.index!==null){let R=this.getUID(o.index);(_[C].start!==void 0||_[C].count!==void 0)&&(R+=":"+_[C].start+":"+_[C].count),t.attributes.has(R)?V.indices=t.attributes.get(R):(V.indices=this.processAccessor(o.index,o,_[C].start,_[C].count),t.attributes.set(R,V.indices)),V.indices===null&&delete V.indices}const H=this.processMaterial(E[_[C].materialIndex]);H!==null&&(V.material=H),d.push(V)}l.primitives=d,r.meshes||(r.meshes=[]),this._invokeAll(function(C){C.writeMesh&&C.writeMesh(e,l)});const v=r.meshes.push(l)-1;return t.meshes.set(a,v),v}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const r=e.isOrthographicCamera,i={type:r?"orthographic":"perspective"};return r?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:N6.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){const r=this.json,i=this.nodeMap;r.animations||(r.animations=[]),e=mD.Utils.mergeMorphTargetTracks(e.clone(),t);const a=e.tracks,o=[],s=[];for(let l=0;l<a.length;++l){const c=a[l],d=X0.parseTrackName(c.name);let h=X0.findNode(t,d.nodeName);const f=_B[d.propertyName];if(d.objectName==="bones"&&(h.isSkinnedMesh===!0?h=h.skeleton.getBoneByName(d.objectIndex):h=void 0),!h||!f)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',c.name),null;const m=1;let g=c.values.length/c.times.length;f===_B.morphTargetInfluences&&(g/=h.morphTargetInfluences.length);let x;c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(x="CUBICSPLINE",g/=3):c.getInterpolation()===Gh?x="STEP":x="LINEAR",s.push({input:this.processAccessor(new vn(c.times,m)),output:this.processAccessor(new vn(c.values,g)),interpolation:x}),o.push({sampler:s.length-1,target:{node:i.get(h),path:f}})}return r.animations.push({name:e.name||"clip_"+r.animations.length,samplers:s,channels:o}),r.animations.length-1}processSkin(e){const t=this.json,r=this.nodeMap,i=t.nodes[r.get(e)],a=e.skeleton;if(a===void 0)return null;const o=e.skeleton.bones[0];if(o===void 0)return null;const s=[],l=new Float32Array(a.bones.length*16),c=new u0;for(let h=0;h<a.bones.length;++h)s.push(r.get(a.bones[h])),c.copy(a.boneInverses[h]),c.multiply(e.bindMatrix).toArray(l,h*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new vn(l,16)),joints:s,skeleton:r.get(o)}),i.skin=t.skins.length-1}processNode(e){const t=this.json,r=this.options,i=this.nodeMap;t.nodes||(t.nodes=[]);const a={};if(r.trs){const s=e.quaternion.toArray(),l=e.position.toArray(),c=e.scale.toArray();hh(s,[0,0,0,1])||(a.rotation=s),hh(l,[0,0,0])||(a.translation=l),hh(c,[1,1,1])||(a.scale=c)}else e.matrixAutoUpdate&&e.updateMatrix(),vxe(e.matrix)===!1&&(a.matrix=e.matrix.elements);if(e.name!==""&&(a.name=String(e.name)),this.serializeUserData(e,a),e.isMesh||e.isLine||e.isPoints){const s=this.processMesh(e);s!==null&&(a.mesh=s)}else e.isCamera&&(a.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const s=[];for(let l=0,c=e.children.length;l<c;l++){const d=e.children[l];if(d.visible||r.onlyVisible===!1){const h=this.processNode(d);h!==null&&s.push(h)}}s.length>0&&(a.children=s)}this._invokeAll(function(s){s.writeNode&&s.writeNode(e,a)});const o=t.nodes.push(a)-1;return i.set(e,o),o}processScene(e){const t=this.json,r=this.options;t.scenes||(t.scenes=[],t.scene=0);const i={};e.name!==""&&(i.name=e.name),t.scenes.push(i);const a=[];for(let o=0,s=e.children.length;o<s;o++){const l=e.children[o];if(l.visible||r.onlyVisible===!1){const c=this.processNode(l);c!==null&&a.push(c)}}a.length>0&&(i.nodes=a),this.serializeUserData(e,i)}processObjects(e){const t=new Kh;t.name="AuxScene";for(let r=0;r<e.length;r++)t.children.push(e[r]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});const r=[];for(let i=0;i<e.length;i++)e[i]instanceof Kh?this.processScene(e[i]):r.push(e[i]);r.length>0&&this.processObjects(r);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let t=0,r=this.plugins.length;t<r;t++)e(this.plugins[t])}}class Exe{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const r=this.writer,i=r.json,a=r.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,o.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),a[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},a[this.name]=!0);const s=i.extensions[this.name].lights;s.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:s.length-1}}}class Cxe{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class Vxe{constructor(e){this.writer=e,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(e,t){if(!e.isGLTFSpecularGlossinessMaterial)return;const r=this.writer,i=r.extensionsUsed,a={};t.pbrMetallicRoughness.baseColorFactor&&(a.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);const o=[1,1,1];if(e.specular.toArray(o,0),a.specularFactor=o,a.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(a.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){const s={index:r.processTexture(e.specularMap)};r.applyTextureTransform(s,e.specularMap),a.specularGlossinessTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=a,i[this.name]=!0}}class Dxe{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;const r=this.writer,i=r.extensionsUsed,a={};if(a.clearcoatFactor=e.clearcoat,e.clearcoatMap){const o={index:r.processTexture(e.clearcoatMap)};r.applyTextureTransform(o,e.clearcoatMap),a.clearcoatTexture=o}if(a.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const o={index:r.processTexture(e.clearcoatRoughnessMap)};r.applyTextureTransform(o,e.clearcoatRoughnessMap),a.clearcoatRoughnessTexture=o}if(e.clearcoatNormalMap){const o={index:r.processTexture(e.clearcoatNormalMap)};r.applyTextureTransform(o,e.clearcoatNormalMap),a.clearcoatNormalTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=a,i[this.name]=!0}}class Fxe{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,a={};if(a.transmissionFactor=e.transmission,e.transmissionMap){const o={index:r.processTexture(e.transmissionMap)};r.applyTextureTransform(o,e.transmissionMap),a.transmissionTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=a,i[this.name]=!0}}class Txe{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,a={};if(a.thicknessFactor=e.thickness,e.thicknessMap){const o={index:r.processTexture(e.thicknessMap)};r.applyTextureTransform(o,e.thicknessMap),a.thicknessTexture=o}a.attenuationDistance=e.attenuationDistance,a.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=a,i[this.name]=!0}}mD.Utils={insertKeyframe:function(n,e){const r=n.getValueSize(),i=new n.TimeBufferType(n.times.length+1),a=new n.ValueBufferType(n.values.length+r),o=n.createInterpolant(new n.ValueBufferType(r));let s;if(n.times.length===0){i[0]=e;for(let l=0;l<r;l++)a[l]=0;s=0}else if(e<n.times[0]){if(Math.abs(n.times[0]-e)<.001)return 0;i[0]=e,i.set(n.times,1),a.set(o.evaluate(e),0),a.set(n.values,r),s=0}else if(e>n.times[n.times.length-1]){if(Math.abs(n.times[n.times.length-1]-e)<.001)return n.times.length-1;i[i.length-1]=e,i.set(n.times,0),a.set(n.values,0),a.set(o.evaluate(e),n.values.length),s=i.length-1}else for(let l=0;l<n.times.length;l++){if(Math.abs(n.times[l]-e)<.001)return l;if(n.times[l]<e&&n.times[l+1]>e){i.set(n.times.slice(0,l+1),0),i[l+1]=e,i.set(n.times.slice(l+1),l+2),a.set(n.values.slice(0,(l+1)*r),0),a.set(o.evaluate(e),(l+1)*r),a.set(n.values.slice((l+1)*r),(l+2)*r),s=l+1;break}}return n.times=i,n.values=a,s},mergeMorphTargetTracks:function(n,e){const t=[],r={},i=n.tracks;for(let a=0;a<i.length;++a){let o=i[a];const s=X0.parseTrackName(o.name),l=X0.findNode(e,s.nodeName);if(s.propertyName!=="morphTargetInfluences"||s.propertyIndex===void 0){t.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(Hh)}const c=l.morphTargetInfluences.length,d=l.morphTargetDictionary[s.propertyIndex];if(d===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+s.propertyIndex);let h;if(r[l.uuid]===void 0){h=o.clone();const m=new h.ValueBufferType(c*h.times.length);for(let g=0;g<h.times.length;g++)m[g*c+d]=h.values[g];h.name=(s.nodeName||"")+".morphTargetInfluences",h.values=m,r[l.uuid]=h,t.push(h);continue}const f=o.createInterpolant(new o.ValueBufferType(1));h=r[l.uuid];for(let m=0;m<h.times.length;m++)h.values[m*c+d]=f.evaluate(h.times[m]);for(let m=0;m<o.times.length;m++){const g=this.insertKeyframe(h,o.times[m]);h.values[g*c+d]=o.values[m]}}return n.tracks=t,n}};class bxe{createClip(e){const t=this._createTracks(e),r=this._framesToSeconds(e.totalFrames);return new uy("MTNX",r,t)}_createTracks(e){const t=[];for(let r=0;r<e.tracks.length;r++){const i=this._createTrack(e.tracks[r]);i&&t.push(i)}return this._adjustTrackOrder(t),t}_createTrack(e){const t=X9;switch(e.type){case t.Transform:return this._createTransformTrack(e);case t.Rotation:return this._createRotationTrack(e);case t.Scale:return this._createScaleTrack(e)}console.warn(`Unsupported track type ${At(e.type)}`)}_createTransformTrack(e){const t=this._createTransformTrackName(e),r=this._createKeyframeSecsArr(e.keyframes),i=this._createTransformTrackData(e);return new Lc(t,r,i)}_createTransformTrackName(e){const t=this._getObjNameFromIndex(e.objIndex),r=this._getDimensionProperty(e.dimension);return`${t}.position[${r}]`}_createTransformTrackData(e){const t=[];for(let r in e.keyframes){let i=e.keyframes[r].value1;t.push(i)}return t}_createRotationTrack(e){const t=this._createRotationTrackName(e),r=this._createKeyframeSecsArr(e.keyframes),i=this._createRotationTrackData(e);return new Lc(t,r,i)}_createRotationTrackName(e){const t=this._getObjNameFromIndex(e.objIndex),r=this._getDimensionProperty(e.dimension);return`${t}.rotation[${r}]`}_createRotationTrackData(e){const t=[];for(let r in e.keyframes){const i=e.keyframes[r].value1,a=j1(i);t.push(a)}return t}_createQuaternion(e,t){const r=new Si,i=j1(t),a=O4;switch(e){case a.X:r.setFromAxisAngle(new Se(1,0,0),i);break;case a.Y:r.setFromAxisAngle(new Se(0,1,0),i);break;case a.Z:r.setFromAxisAngle(new Se(0,0,1),i);break;default:console.warn(`Didn't set quaternion value for ${At(e)}`)}return r}_createScaleTrack(e){const t=this._createScaleTrackName(e),r=this._createKeyframeSecsArr(e.keyframes),i=this._createScaleTrackData(e);return new Lc(t,r,i)}_createScaleTrackName(e){const t=this._getObjNameFromIndex(e.objIndex),r=this._getDimensionProperty(e.dimension);return`${t}.scale[${r}]`}_createScaleTrackData(e){const t=[];for(let r in e.keyframes){let i=e.keyframes[r].value1;t.push(i)}return t}_createKeyframeSecsArr(e){const t=[];for(let r in e)t.push(this._framesToSeconds(parseInt(r)));return t}_getDimensionProperty(e){const t=O4;switch(e){case t.X:return"x";case t.Y:return"y";case t.Z:return"z"}throw new Error(`Unknown dimension ${At(e)}`)}_getObjNameFromIndex(e){let t=-1;const r=this.form.OBJ1[0].parsed.objects;for(let i=0;i<r.length;i++)if(r[i].objType===61&&(t++,t===e))return At(r[i].globalIndex);return console.warn(`Couldn't find associated object ${e} for track`),At(e)}_framesToSeconds(e){return e/60}_adjustTrackOrder(e){}}const Pxe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEDBCArhrzjSQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAA3klEQVQ4y9WSPWpCURSEv5GHpLFKaxPEUkhtmSaNYrAVwS1YuIS0LiHapBbFFbgBwUayg0C2kOfYXOF69T0kTfBUhzPDnJ858N+hIsD2EBgBObAHxpIOKS8rEW8ALyGvFTWrlAj8RvlBUn6NlCVjV4H30K0dQU+2p6G+kLShZPe+i2N+cUTbfeAR+Dop2+4Cq4S7ltQNeB3oADm2d0F9lkwyiDovbVci7PUEZMEmgDOLJH3afgDeJPXSTW9xAeAD6JURYhdatifX/LadlprxEbfA819fOQN+gO94r/uKI0KFfwl0bVcYAAAAAElFTkSuQmCC";class Rxe extends Ne.exports.Component{constructor(e){super(e),this.modelToolbar=null,this.onModelSelected=r=>{const i=r.match(/^(\d+)\/(\d+)/);if(!i)throw new Error(`Could not parse selected model string ${this.state.selectedModel}`);const[,a,o]=i;this.setState({selectedModel:r,selectedModelDir:a,selectedModelFile:o,selectedAnim:"",selectedAnimDir:null,selectedAnimFile:null})},this.onAnimSelected=r=>{if(!r){this.setState({selectedAnim:"",selectedAnimDir:null,selectedAnimFile:null});return}const i=r.match(/^(\d+)\/(\d+)/);if(!i)throw new Error(`Error parsing anim string ${r}`);const[,a,o]=i;this.setState({selectedAnim:r,selectedAnimDir:a,selectedAnimFile:o})},this.onBgColorChange=r=>{this.setState({bgColor:r})},this.onFeatureChange=r=>{this.setState(r)},this.onKeyDown=r=>{if(r.key&&this.modelToolbar){const i=r.key.toLowerCase();i==="m"?this.modelToolbar.focusModelSelect():i==="a"&&this.modelToolbar.focusAnimSelect()}},this.state={selectedModel:"",selectedModelDir:null,selectedModelFile:null,selectedAnim:"",selectedAnimDir:null,selectedAnimFile:null,bgColor:0,showTextures:!0,showWireframe:!1,showVertexNormals:!1,useCamera:!1};const t=dt.getDirectoryCount();for(let r=2;r<t;r++){const i=dt.getFileCount(r);for(let a=0;a<i;a++){const o=dt.get(r,a);if(Or.isForm(o)){const s=r+"/"+a;this.state.selectedModel=s,this.state.selectedModelDir=r,this.state.selectedModelFile=a;return}}}}render(){return Xe("div",{className:"modelViewerContainer",tabIndex:-1,onKeyDownCapture:this.onKeyDown,children:[B(Bxe,{ref:e=>{this.modelToolbar=e},selectedModel:this.state.selectedModel,onModelSelected:this.onModelSelected,selectedModelDir:this.state.selectedModelDir,selectedModelFile:this.state.selectedModelFile,selectedAnim:this.state.selectedAnim,onAnimSelected:this.onAnimSelected,selectedAnimDir:this.state.selectedAnimDir,selectedAnimFile:this.state.selectedAnimFile,bgColor:this.state.bgColor,onBgColorChange:this.onBgColorChange,showTextures:this.state.showTextures,showWireframe:this.state.showWireframe,showVertexNormals:this.state.showVertexNormals,useCamera:this.state.useCamera,onFeatureChange:this.onFeatureChange}),B(Lxe,{selectedModelDir:this.state.selectedModelDir,selectedModelFile:this.state.selectedModelFile,selectedAnimDir:this.state.selectedAnimDir,selectedAnimFile:this.state.selectedAnimFile,bgColor:this.state.bgColor,showTextures:this.state.showTextures,showWireframe:this.state.showWireframe,showVertexNormals:this.state.showVertexNormals,useCamera:this.state.useCamera})]})}}let lc=null,_g=null,g1=null,Ul=null,wa=null,yB=null,_1=null,uc=null;class Lxe extends Ne.exports.Component{constructor(){super(...arguments),this.__container=null,this.state={hasError:!1},this.onWindowResize=()=>{if(wa&&g1){const e=this.__container,t=e.offsetHeight,r=e.offsetWidth;g1.aspect=r/t,g1.updateProjectionMatrix(),wa.setSize(r,t)}}}render(){return this.state.hasError?B("p",{children:"An error occurred during rendering, see the browser console."}):B("div",{className:"modelRenderContainer",style:{backgroundColor:"#"+vc(At(this.props.bgColor,""),6,"0")},ref:e=>this.__container=e})}componentDidCatch(e,t){this.setState({hasError:!0}),console.error(e,t)}componentDidMount(){try{window.addEventListener("resize",this.onWindowResize),lc=this,this.initModel()}catch(e){console.error(e)}}componentWillUnmount(){try{window.removeEventListener("resize",this.onWindowResize),lc=null,this.clearViewer()}catch(e){console.error(e)}}componentDidUpdate(){try{this.clearViewer(),this.initModel()}catch(e){console.error(e)}}clearViewer(){this.disposeTHREERenderer(),this.disposeTHREEObj(Ul),Ul=null,uc&&(uc.stopAllAction(),uc=null),_1&&(_1.stop(),_1=null),_g!==null&&(clearTimeout(_g),_g=null)}disposeTHREERenderer(){if(!wa)return;wa.dispose(),wa.forceContextLoss();const e=this.__container;e&&(e.innerHTML=""),wa.domElement=void 0,wa=null}disposeTHREEObj(e){if(!!e){for(let t=0;t<e.children.length;t++)this.disposeTHREEObj(e.children[t]);if(e.geometry&&(e.geometry.dispose(),e.geometry=void 0),e.material){let t;e.material instanceof Array&&(t=e.material),t?t.forEach(function(r){r.map&&r.map.dispose(),r.lightMap&&r.lightMap.dispose(),r.bumpMap&&r.bumpMap.dispose(),r.normalMap&&r.normalMap.dispose(),r.specularMap&&r.specularMap.dispose(),r.envMap&&r.envMap.dispose(),r.dispose()}):(e.material.map&&e.material.map.dispose(),e.material.lightMap&&e.material.lightMap.dispose(),e.material.bumpMap&&e.material.bumpMap.dispose(),e.material.normalMap&&e.material.normalMap.dispose(),e.material.specularMap&&e.material.specularMap.dispose(),e.material.envMap&&e.material.envMap.dispose(),e.material.dispose())}}}initModel(){if(this.props.selectedModelDir===null)return;const[e,t]=[this.props.selectedModelDir,this.props.selectedModelFile],r=this.__container,i=r.offsetHeight,a=r.offsetWidth;wt(`Rendering model ${e}/${t}`);const o=Or.unpack(dt.get(e,t));wt("form",o);const s=new W9;s.bgColor=this.props.bgColor,s.showTextures=this.props.showTextures,s.showWireframe=this.props.showWireframe,s.showVertexNormals=this.props.showVertexNormals,s.useFormCamera=this.props.useCamera,s.createModel(o).then(l=>{if(Ul=new Kh,Ul.background=new Jt(this.props.bgColor),Ul.add(l),wt("Scene",Ul),this.props.selectedAnimDir!==null){const[c,d]=[this.props.selectedAnimDir,this.props.selectedAnimFile],h=Ic.unpack(dt.get(c,d));wt("mtnx",h);const f=new bxe;f.form=o;const m=f.createClip(h);wt("mtnxClip",m),uc=new PI(Ul),uc.clipAction(m).play(),_1=new a$}wa=new fn({antialias:!0}),wa.setSize(a,i),r.appendChild(wa.domElement),g1=s.createCamera(o,a,i),yB=new pxe(g1,wa.domElement),this.animate()})}renderModel(){wa.render(Ul,g1)}animate(){if(!(!lc||!wa)){if(yB.update(),_1){const e=_1.getDelta();uc&&uc.update(e)}lc.renderModel(),tr(In.limitModelFPS)?_g=setTimeout(function(){lc&&requestAnimationFrame(lc.animate)},1e3/30):requestAnimationFrame(lc.animate)}}}class Bxe extends Ne.exports.Component{constructor(){super(...arguments),this.animSelect=null,this.modelSelect=null,this.state={},this.focusModelSelect=()=>{this.modelSelect&&this.modelSelect.focus()},this.focusAnimSelect=()=>{this.animSelect&&this.animSelect.focus()}}render(){return Xe("div",{className:"modelViewerToolbar",children:[B(Mxe,{ref:e=>{this.modelSelect=e},selectedModel:this.props.selectedModel,onModelSelected:this.props.onModelSelected}),B(Ixe,{ref:e=>{this.animSelect=e},selectedAnim:this.props.selectedAnim,selectedModelDir:this.props.selectedModelDir,onAnimSelected:this.props.onAnimSelected}),B(Oxe,{selectedColor:this.props.bgColor,onColorChange:this.props.onBgColorChange}),B(kxe,{showTextures:this.props.showTextures,showWireframe:this.props.showWireframe,showVertexNormals:this.props.showVertexNormals,useCamera:this.props.useCamera,onFeatureChange:this.props.onFeatureChange}),B("div",{className:"modelViewerToolbarSpacer"}),B(Nxe,{selectedModelDir:this.props.selectedModelDir,selectedModelFile:this.props.selectedModelFile,selectedAnimDir:this.props.selectedAnimDir,selectedAnimFile:this.props.selectedAnimFile})]})}}class Mxe extends Ne.exports.Component{constructor(){super(...arguments),this.selectEl=null,this.state={},this.focus=()=>{this.selectEl&&this.selectEl.focus()},this.modelSelected=e=>{this.props.onModelSelected&&this.props.onModelSelected(e.target.value)}}render(){const t=this.getModelEntries().map(r=>{const[i,a]=r,o=i+"/"+a,s="0x"+vc(At(i,""),4,"0")+"/"+vc(At(a,""),4,"0");return B("option",{value:o,title:s,children:o},o)});return Xe("div",{className:"modelSelectContainer",children:["Model:",B("select",{ref:r=>{this.selectEl=r},value:this.props.selectedModel,onChange:this.modelSelected,children:t})]})}getModelEntries(){const e=[],t=dt.getDirectoryCount();for(let r=0;r<t;r++){const i=dt.getFileCount(r);for(let a=0;a<i;a++){const o=dt.get(r,a);if(Or.isForm(o))try{e.push([r,a])}catch(s){console.error(`Could not parse FORM ${r}/${a}`,s)}}}return e}}class Ixe extends Ne.exports.Component{constructor(){super(...arguments),this.selectEl=null,this.state={},this.focus=()=>{this.selectEl&&this.selectEl.focus()},this.animSelected=e=>{this.props.onAnimSelected&&this.props.onAnimSelected(e.target.value)}}render(){const t=this.getAnimEntries().map(r=>B("option",{value:r,children:r},r));return t.unshift(B("option",{value:""},"")),Xe("div",{className:"modelSelectContainer",children:["Animation:",B("select",{ref:r=>{this.selectEl=r},value:this.props.selectedAnim,onChange:this.animSelected,children:t})]})}getAnimEntries(){let e=[];if(this.props.selectedModelDir===null)return e;if(tr(In.limitModelAnimations))return this.getAnimationsInDir(this.props.selectedModelDir);{const t=dt.getDirectoryCount();for(let r=0;r<t;r++)e=e.concat(this.getAnimationsInDir(r));return e}}getAnimationsInDir(e){const t=[],r=dt.getFileCount(e);for(let i=0;i<r;i++){const a=dt.get(e,i);if(Ic.isMtnx(a)){const o=e+"/"+i;try{t.push(o)}catch(s){console.error(`Could not parse MTNX ${e}/${i}`,s)}}}return t}}class Oxe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onColorChange=(e,t)=>{this.setState({color:e}),this.props.onColorChange(e)}}render(){let e;return Hn()&&(e=B(Bo,{id:13035519,allowDeselect:!1,onToggled:this.onColorChange,pressed:this.props.selectedColor===13035519,children:B("span",{className:"colorSwatch",title:"Change background to MP3 motion test (0xC6E7FF)",style:{backgroundColor:"#C6E7FF"}})},2)),Xe("div",{className:"modelViewerColorPicker",children:[B(Bo,{id:0,allowDeselect:!1,onToggled:this.onColorChange,pressed:this.props.selectedColor===0,children:B("span",{className:"colorSwatch",title:"Change background to black",style:{backgroundColor:"#000000"}})},0),B(Bo,{id:16777215,allowDeselect:!1,onToggled:this.onColorChange,pressed:this.props.selectedColor===16777215,children:B("span",{className:"colorSwatch",title:"Change background to white",style:{backgroundColor:"#FFFFFF"}})},1),e]})}}class kxe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onShowTextureChange=e=>{const t=e.target.checked;!t&&!this.props.showWireframe?this.props.onFeatureChange({showTextures:t,showWireframe:!0}):this.props.onFeatureChange({showTextures:t})},this.onShowWireframeChange=e=>{const t=e.target.checked;!t&&!this.props.showTextures?this.props.onFeatureChange({showTextures:!0,showWireframe:t}):this.props.onFeatureChange({showWireframe:t})},this.onShowNormalsChange=e=>{const t=e.target.checked;this.props.onFeatureChange({showVertexNormals:t})},this.onUseCameraChange=e=>{const t=e.target.checked;this.props.onFeatureChange({useCamera:t})}}render(){let e;return tr(In.uiAdvanced)&&(e=[Xe("label",{children:[B("input",{type:"checkbox",checked:this.props.showVertexNormals,onChange:this.onShowNormalsChange}),"Vertex Normals"]},"modelFeatureSelectShowVertexNormals")]),Xe("div",{className:"modelFeatureSelectContainer",children:[Xe("label",{children:[B("input",{type:"checkbox",checked:this.props.showTextures,onChange:this.onShowTextureChange}),"Textures"]},"modelFeatureSelectShowTextures"),Xe("label",{children:[B("input",{type:"checkbox",checked:this.props.showWireframe,onChange:this.onShowWireframeChange}),"Wireframe"]},"modelFeatureSelectShowWireframe"),Xe("label",{title:"Use the camera defined by the model",children:[B("input",{type:"checkbox",checked:this.props.useCamera,onChange:this.onUseCameraChange}),"Camera"]},"modelFeatureSelectUseCamera"),e]})}}class Nxe extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.export=async()=>{const[e,t]=[this.props.selectedModelDir,this.props.selectedModelFile],r=Or.unpack(dt.get(e,t)),a=await new W9().createModel(r);wt("Exporting Three model object",a);const o=!!tr(In.modelUseGLB),s={binary:o},c=await new mD().parseAsync(a,s);o?uo.exports.saveAs(new Blob([c]),`model-${e}-${t}.glb`):uo.exports.saveAs(new Blob([JSON.stringify(c)]),`model-${e}-${t}.gltf`)}}render(){let e;return this.props.selectedAnimDir!==null&&(e="Export current model and animation to a glTF model file"),e="Export current model to a glTF model file",Xe(ir,{onClick:this.export,css:"btnModelExport",title:e,children:[B("img",{src:Pxe,height:"16",width:"16",alt:""}),"glTF"]})}}const Uxe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAaCAYAAACtv5zzAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4wEeAhkYWkovsAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAFXSURBVEjH7ZY/isJAFIe/iUNs7GyHVBrIBfQAnsTKZg4gaC9eQLGzELYQKzvPYGtnp7UQkCCKeVtlN5GVTVa3yw+GyRsmv483f3gDD5L36CPxUyKS8QfYbrcMh0N2ux1FFQQBm80GQAHotPn5fGY6nRJFEYvFgnq9XhjgeV4mTmcg4/GYfr+PMQYA13UBuF6vuK771SdKx0EQsF6v8TyPw+HwlQEikjTxfV/u9/uPixrHsRhjMmPp2BjzOAcRwUmnE0URjuPwTr3XrQQAhGHIfD4nDMP/AVhr0Vpjrc01X+c1VkrR6XQYDAY0m03a7TaVSuX3H9P34PGcF1Gue1Ae0xJQAl7X6XTC9/3ngEajweVy+TNgMpkwGo2eA3q9HsvlsjAkjmOOxyPVapVWq/W86N9uN1arFbPZjP1+n7voa63pdrtYa6nVat8FP/2RPLpe3QelVMbzE+UdW2MGbKCcAAAAAElFTkSuQmCC",Y9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiBQ0VISOZx0KOAAABA0lEQVQ4y52SMW7CMBiFPwMTbMnOATJ3bwcW5kpwic5sqFS9QsUtkHKEMrOzcAGD6M5g+hgSklh1nIq3/fL7/N4vGzxpqJ2a2mnoOwb+yJQnvvgpp5Q3pmxolxaSRtU0krQIGzPlcmqTU67MB3J1KS+cpgQcfeK6mgGP6J7Q55Us4tuzMdfmDrPOHWaFs1cS484uY//hLACf/ALvbPkGXnjmA+ixrBxVpYkkKQGQtALQSgJQIkma+JWOACTBMknDUQG2E7A+cMYBaRBIAcfZA4w4RRNORn5C0bEdON6HGrDRSjYMtCcEgIcq/SOhfut59OvN/yYcol8vdKq1LsHbL1rXrhtcbPgQjV6DLQAAAABJRU5ErkJggg==",jxe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiBQ0VIylLJMkSAAAAvElEQVQ4y+2TsQ2CUBiEv2eIrkDJBDYMALVUlsZCSkdhDBpDaUfNDIYBmIHQmJCchYHkCSgUxsYr77/LveTuwQByVUmSKrnMgUJ1CIfXFQvxN3zF4FiV7dkCXk+cFAA3c53quNQYyulR+GoG8kb+ux1Fai15q+jT9M6W4TxnrUkvT4ZXI48YqEzaGwwXDkDG0ahnYzwg7dZfWBkb5cq1trji+UOcsUeZO7vfTyOQ5ibUiwJqQNlLu1NolcED/6PAXJfmH/wAAAAASUVORK5CYII=",Gxe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiBQ0WBh9uKzI1AAAAoklEQVQoz33NOw4BYRSG4RdDaFxWYBFaSp2E5diBxDok6ilUVBKJa2UTCgsQxKtxCfPPfN3J851zIBhrTj3aJYXLrlW92CsEuM6dJm0gohMluMGCM31gCMwS7EHVuRVHTiz8HXfvOwsr5iH/83tO6zOeuOYev9s7v0kcr7nN5k0WV7O5aMk4lcGBo08lyeBYX5UQgyt9VUJMBMQsWXLLGSo8AaQAqCS0C8xqAAAAAElFTkSuQmCC",Hxe="data:image/png;base64,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",zxe="data:image/png;base64,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",Wxe="data:image/png;base64,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",Xxe="data:image/png;base64,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",Kxe="data:image/png;base64,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";function Yxe(){const n=xs();let e=Bie();const t=d=>{h4(d,!1);const h=Wp(d);vr(EB(h.language))},r=d=>{h4(d,!0);const h=Ss(P0(),d);vr(EB(h.language))},i=async d=>{await Zl(`Are you sure you want to delete ${d.name}?`)&&Ure(d.id)},a=async d=>{await Zl(`Are you sure you want to delete ${d.name} from the board?`)&&eae(d.id)},o=async(d,h)=>{let f=!0;h&&(f=await Zl(`Are you sure you want to overwrite the board's copy of ${d.id}? The two copies are different.`)),f&&Ik(d)},s=async(d,h)=>{let f=!0;h&&(f=await Zl(`Are you sure you want to overwrite the library's copy of ${d.id}? The two copies are different.`)),f&&hr(d)};let l=null;e.length?(e=e.sort((d,h)=>b3(d.name,h.name)),l=e.map(d=>{const h=qxe(d,n),f=VB(d,n);return B(DB,{event:d,onEditEvent:t,onDeleteEvent:i,isDestructiveCopy:h,onCopyToBoard:f?void 0:o},d.id)})):l=B("tr",{children:B("td",{children:"No custom events present \u2014 load or create your own!"})});let c=[];for(let d in n.events){const h=Ss(n,d),f=oo(h.language,h.code),m=Qxe(f),g=VB(f,n);c.push(B(DB,{event:f,onEditEvent:r,onDeleteEvent:a,isDestructiveCopy:m,onCopyToLibrary:g?void 0:s},d))}return c=c.sort((d,h)=>b3(d.key,h.key)),Xe("div",{className:"eventsViewContainer",children:[Xe("h3",{children:["Events for ",n.name]}),c.length?B(CB,{listing:c}):B("p",{children:"No events are associated with this board."}),Xe("h3",{children:[B("img",{src:Uxe,className:"eventsViewHeaderIcon",alt:""})," ","Event Library"]}),B(CB,{listing:l})]})}function EB(n){switch(n){case y0.C:return A0.CREATEEVENT_C;default:return A0.CREATEEVENT_ASM}}function CB(n){return B("div",{className:"eventsViewTable",children:n.listing})}function qxe(n,e){return!e.events||!(n.id in e.events)?!1:e.events[n.id]!==n.asm}function Qxe(n){const e=Wp(n.id);return!!e&&e.asm!==n.asm}function VB(n,e){if(!e.events||!(n.id in e.events))return!1;const t=Wp(n.id);return t?Ss(e,n.id).code===t.asm:!1}class DB extends Ne.exports.Component{constructor(){super(...arguments),this.onExportEvent=()=>{const e=this.props.event,t=new Blob([e.asm]);uo.exports.saveAs(t,Jxe(e))}}render(){let e;return this.props.onCopyToLibrary?e=B("div",{className:"eventTableIconCell",children:B("img",{src:this.props.isDestructiveCopy?Wxe:zxe,alt:"Copy this event into the local library",title:"Copy this event into the local library",onClick:()=>this.props.onCopyToLibrary(this.props.event,this.props.isDestructiveCopy)})}):this.props.onCopyToBoard?e=B("div",{className:"eventTableIconCell",children:B("img",{src:this.props.isDestructiveCopy?Kxe:Xxe,alt:"Copy this event into the board file",title:"Copy this event into the board file",onClick:()=>this.props.onCopyToBoard(this.props.event,this.props.isDestructiveCopy)})}):e=B("div",{className:"eventTableIconCell",children:B("img",{src:Hxe,className:"eventRowIconNoAction",alt:"The event is the same in both the board and library",title:"The event is the same in both the board and library"})}),Xe("div",{className:"eventTableRow",children:[B("div",{className:"eventTableIconCell",children:B("img",{src:Y9,alt:"Delete event",title:"Delete event",onClick:()=>{this.props.onDeleteEvent(this.props.event)}})}),B("div",{className:"eventTableIconCell",children:B("img",{src:jxe,alt:"Download event code",title:"Download event code",onClick:this.onExportEvent})}),e,Xe("div",{className:"eventNameTableCell",onClick:()=>this.props.onEditEvent(this.props.event.id),children:[Xe("span",{className:"eventNameText",children:[this.props.event.name,B("span",{className:"eventNameExtensionText",children:q9(this.props.event)})]}),B("img",{src:Gxe,className:"eventEditCellIcon",alt:"Edit event",title:"Edit event"})]})]})}}function Jxe(n){return n.id+q9(n)}function q9(n){switch(n.language){case y0.C:return".c";case y0.MIPS:default:return".s"}}let bo=null;function e_(n){bo=n}async function Zxe(){const n=bo.getEventName(),e=bo.getSupportedGames(),t=bo.getEventCode();if(!n){tn("An event name must be specified.");return}const r=Wp(n);if(r&&!r.custom){tn("The event name collides with a reserved event name from the original boards.");return}if(!e.length){tn("At least one game must be supported.");return}if(!t){tn("No assembly code was provided.");return}const i=bo.getLanguage(),a=oo(i,t);try{await HE(a)}catch(o){tn(o.toString())}hie()?Ik(a):hr(a),bo&&bo.updateLastSavedCode(t)}function $xe(){return bo?bo.promptExit():Promise.resolve(!0)}function eve(){return bo?bo.getSupportedGames():[]}class Q9 extends Ne.exports.Component{constructor(){super(...arguments),this.onEventNameChange=e=>{this.props.onEventNameChange(e.target.value)},this._gameSupported=e=>this.props.supportedGames.indexOf(e)>=0}render(){const e=[{id:Qe.MP1_USA,text:"MP1 USA",selected:this._gameSupported(Qe.MP1_USA)},{id:Qe.MP2_USA,text:"MP2 USA",selected:this._gameSupported(Qe.MP2_USA)},{id:Qe.MP3_USA,text:"MP3 USA",selected:this._gameSupported(Qe.MP3_USA)},{id:Qe.MP1_JPN,text:"MP1 JPN",selected:this._gameSupported(Qe.MP1_JPN)},{id:Qe.MP2_JPN,text:"MP2 JPN",selected:this._gameSupported(Qe.MP2_JPN)},{id:Qe.MP3_JPN,text:"MP3 JPN",selected:this._gameSupported(Qe.MP3_JPN)},{id:Qe.MP1_PAL,text:"MP1 PAL",selected:this._gameSupported(Qe.MP1_PAL)},{id:Qe.MP2_PAL,text:"MP2 PAL",selected:this._gameSupported(Qe.MP2_PAL)},{id:Qe.MP3_PAL,text:"MP3 PAL",selected:this._gameSupported(Qe.MP3_PAL)}],t=[{id:1,text:"Direct",title:"The game will execute the event function directly",selected:this.props.executionType===sn.DIRECT},{id:2,text:"Process",title:"The game will use its process system when executing the event function",selected:this.props.executionType===sn.PROCESS}];return Xe("div",{className:"createEventForm",children:[B("label",{children:"Name:"}),B("input",{value:this.props.name,onChange:this.onEventNameChange}),B("br",{}),B("br",{}),B("label",{children:"Supported Games:"}),B(e8,{items:e,groupCssClass:"createEventGameToggles",onToggleClick:this.props.onGameToggleClicked}),B("br",{}),B("label",{children:"Execution Type:"}),B(e8,{items:t,allowDeselect:!1,onToggleClick:this.props.onExecTypeToggleClicked}),B("br",{}),B("label",{children:"Parameters:"}),B(tve,{language:this.props.language,parameters:this.props.parameters,onAddEventParameter:this.props.onAddEventParameter,onRemoveEventParameter:this.props.onRemoveEventParameter})]})}}class tve extends Ne.exports.Component{render(){const e=this.props.parameters.map(t=>B(nve,{entry:t,onRemoveEntry:this.props.onRemoveEventParameter},t.name));return Xe("div",{className:"eventParametersList",children:[B("table",{children:B("tbody",{children:e})}),B(rve,{language:this.props.language,onAddEntry:this.props.onAddEventParameter})]})}}class nve extends Ne.exports.Component{constructor(){super(...arguments),this.onDeleteClick=()=>{this.props.onRemoveEntry(this.props.entry)}}render(){const{type:e,name:t}=this.props.entry;return Xe("tr",{className:"eventParameterEntry",children:[B("td",{className:"eventParameterEntryType",children:e}),B("td",{className:"eventParameterEntryName",title:t,children:t}),B("td",{className:"eventParameterEntryDelete",children:B("img",{src:Y9,alt:"Delete",onClick:this.onDeleteClick})})]})}}class rve extends Ne.exports.Component{constructor(){super(...arguments),this.state={selectedType:"",name:""},this.onNameChange=e=>{const t=e.target.value;!t.match(on.validParameterNameRegex)||this.setState({name:t})},this.onTypeChange=e=>{this.setState({selectedType:e.target.value})},this.onAddClick=()=>{!this.state.name||!this.state.selectedType||(this.props.onAddEntry({name:this.state.name,type:this.state.selectedType}),this.setState({name:"",selectedType:""}))}}render(){return Xe("div",{className:"eventParameterAddNewEntry",children:[Xe("select",{value:this.state.selectedType,onChange:this.onTypeChange,children:[B("option",{}),B("option",{value:i0.Boolean,children:"Boolean"}),B("option",{value:i0.Number,children:"Number"}),B("option",{value:i0.PositiveNumber,children:"Positive Number"}),B("option",{value:i0.Space,children:"Space"}),B("option",{value:i0.SpaceArray,children:"Space Array"})]}),B("input",{type:"text",placeholder:"Name",value:this.state.name,onChange:this.onNameChange}),B(ir,{onClick:this.onAddClick,children:"Add"})]})}}class ive extends Ne.exports.Component{constructor(){super(...arguments),this.state={language:y0.C},this.onLanguageChange=e=>{this.setState({language:e})},this.submit=()=>{let e=this.props.onAccept;e&&e(this.state.language)}}render(){return Xe("div",{className:"createEventDropdownContainer",children:[B(ave,{language:this.state.language,onLanguageChange:this.onLanguageChange}),B(ir,{onClick:this.submit,css:"nbCreate",children:"Create"})]})}}class ave extends Ne.exports.Component{constructor(){super(...arguments),this.onLanguageChange=e=>{this.props.onLanguageChange(e)}}render(){return Xe("div",{className:"newBoardVersionSelect",children:[B("label",{className:"nbLabel",children:"Code Language"}),B("br",{}),B(Bo,{id:y0.C,allowDeselect:!1,onToggled:this.onLanguageChange,pressed:this.props.language===y0.C,children:B("span",{className:"newBoardVersion",title:"C programming language",children:"C"})}),B(Bo,{id:y0.MIPS,allowDeselect:!1,onToggled:this.onLanguageChange,pressed:this.props.language===y0.MIPS,children:B("span",{className:"newBoardVersion",title:"MIPS assembly language",children:"MIPS"})})]})}}var Vw={exports:{}},FB;function SD(){return FB||(FB=1,function(n,e){(function(t,r){n.exports=r()})(wA,function(){var t=navigator.userAgent,r=navigator.platform,i=/gecko\/\d/i.test(t),a=/MSIE \d/.test(t),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),s=/Edge\/(\d+)/.exec(t),l=a||o||s,c=l&&(a?document.documentMode||6:+(s||o)[1]),d=!s&&/WebKit\//.test(t),h=d&&/Qt\/\d+\.\d+/.test(t),f=!s&&/Chrome\/(\d+)/.exec(t),m=f&&+f[1],g=/Opera\//.test(t),x=/Apple Computer/.test(navigator.vendor),E=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),_=/PhantomJS/.test(t),v=x&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),C=/Android/.test(t),D=v||C||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),V=v||/Mac/.test(r),H=/\bCrOS\b/.test(t),R=/win/i.test(r),j=g&&t.match(/Version\/(\d*\.\d*)/);j&&(j=Number(j[1])),j&&j>=15&&(g=!1,d=!0);var te=V&&(h||g&&(j==null||j<12.11)),$=i||l&&c>=9;function z(u){return new RegExp("(^|\\s)"+u+"(?:$|\\s)\\s*")}var I=function(u,A){var S=u.className,p=z(A).exec(S);if(p){var w=S.slice(p.index+p[0].length);u.className=S.slice(0,p.index)+(w?p[1]+w:"")}};function q(u){for(var A=u.childNodes.length;A>0;--A)u.removeChild(u.firstChild);return u}function P(u,A){return q(u).appendChild(A)}function ee(u,A,S,p){var w=document.createElement(u);if(S&&(w.className=S),p&&(w.style.cssText=p),typeof A=="string")w.appendChild(document.createTextNode(A));else if(A)for(var F=0;F<A.length;++F)w.appendChild(A[F]);return w}function ce(u,A,S,p){var w=ee(u,A,S,p);return w.setAttribute("role","presentation"),w}var U;document.createRange?U=function(u,A,S,p){var w=document.createRange();return w.setEnd(p||u,S),w.setStart(u,A),w}:U=function(u,A,S){var p=document.body.createTextRange();try{p.moveToElementText(u.parentNode)}catch{return p}return p.collapse(!0),p.moveEnd("character",S),p.moveStart("character",A),p};function O(u,A){if(A.nodeType==3&&(A=A.parentNode),u.contains)return u.contains(A);do if(A.nodeType==11&&(A=A.host),A==u)return!0;while(A=A.parentNode)}function G(u){var A;try{A=u.activeElement}catch{A=u.body||null}for(;A&&A.shadowRoot&&A.shadowRoot.activeElement;)A=A.shadowRoot.activeElement;return A}function re(u,A){var S=u.className;z(A).test(S)||(u.className+=(S?" ":"")+A)}function oe(u,A){for(var S=u.split(" "),p=0;p<S.length;p++)S[p]&&!z(S[p]).test(A)&&(A+=" "+S[p]);return A}var se=function(u){u.select()};v?se=function(u){u.selectionStart=0,u.selectionEnd=u.value.length}:l&&(se=function(u){try{u.select()}catch{}});function be(u){return u.display.wrapper.ownerDocument}function Be(u){return be(u).defaultView}function Te(u){var A=Array.prototype.slice.call(arguments,1);return function(){return u.apply(null,A)}}function ye(u,A,S){A||(A={});for(var p in u)u.hasOwnProperty(p)&&(S!==!1||!A.hasOwnProperty(p))&&(A[p]=u[p]);return A}function We(u,A,S,p,w){A==null&&(A=u.search(/[^\s\u00a0]/),A==-1&&(A=u.length));for(var F=p||0,L=w||0;;){var N=u.indexOf("	",F);if(N<0||N>=A)return L+(A-F);L+=N-F,L+=S-L%S,F=N+1}}var at=function(){this.id=null,this.f=null,this.time=0,this.handler=Te(this.onTimeout,this)};at.prototype.onTimeout=function(u){u.id=0,u.time<=+new Date?u.f():setTimeout(u.handler,u.time-+new Date)},at.prototype.set=function(u,A){this.f=A;var S=+new Date+u;(!this.id||S<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,u),this.time=S)};function Ke(u,A){for(var S=0;S<u.length;++S)if(u[S]==A)return S;return-1}var tt=50,lt={toString:function(){return"CodeMirror.Pass"}},Ie={scroll:!1},Ue={origin:"*mouse"},k={origin:"+move"};function De(u,A,S){for(var p=0,w=0;;){var F=u.indexOf("	",p);F==-1&&(F=u.length);var L=F-p;if(F==u.length||w+L>=A)return p+Math.min(L,A-w);if(w+=F-p,w+=S-w%S,p=F+1,w>=A)return p}}var we=[""];function le(u){for(;we.length<=u;)we.push(ne(we)+" ");return we[u]}function ne(u){return u[u.length-1]}function fe(u,A){for(var S=[],p=0;p<u.length;p++)S[p]=A(u[p],p);return S}function He(u,A,S){for(var p=0,w=S(A);p<u.length&&S(u[p])<=w;)p++;u.splice(p,0,A)}function ae(){}function Y(u,A){var S;return Object.create?S=Object.create(u):(ae.prototype=u,S=new ae),A&&ye(A,S),S}var _e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Fe(u){return/\w/.test(u)||u>"\x80"&&(u.toUpperCase()!=u.toLowerCase()||_e.test(u))}function Le(u,A){return A?A.source.indexOf("\\w")>-1&&Fe(u)?!0:A.test(u):Fe(u)}function Re(u){for(var A in u)if(u.hasOwnProperty(A)&&u[A])return!1;return!0}var rt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ee(u){return u.charCodeAt(0)>=768&&rt.test(u)}function ve(u,A,S){for(;(S<0?A>0:A<u.length)&&Ee(u.charAt(A));)A+=S;return A}function $e(u,A,S){for(var p=A>S?-1:1;;){if(A==S)return A;var w=(A+S)/2,F=p<0?Math.ceil(w):Math.floor(w);if(F==A)return u(F)?A:S;u(F)?S=F:A=F+p}}function gt(u,A,S,p){if(!u)return p(A,S,"ltr",0);for(var w=!1,F=0;F<u.length;++F){var L=u[F];(L.from<S&&L.to>A||A==S&&L.to==A)&&(p(Math.max(L.from,A),Math.min(L.to,S),L.level==1?"rtl":"ltr",F),w=!0)}w||p(A,S,"ltr")}var St=null;function Ce(u,A,S){var p;St=null;for(var w=0;w<u.length;++w){var F=u[w];if(F.from<A&&F.to>A)return w;F.to==A&&(F.from!=F.to&&S=="before"?p=w:St=w),F.from==A&&(F.from!=F.to&&S!="before"?p=w:St=w)}return p!=null?p:St}var Ft=function(){var u="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",A="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function S(Z){return Z<=247?u.charAt(Z):1424<=Z&&Z<=1524?"R":1536<=Z&&Z<=1785?A.charAt(Z-1536):1774<=Z&&Z<=2220?"r":8192<=Z&&Z<=8203?"w":Z==8204?"b":"L"}var p=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,w=/[stwN]/,F=/[LRr]/,L=/[Lb1n]/,N=/[1n]/;function K(Z,pe,ge){this.level=Z,this.from=pe,this.to=ge}return function(Z,pe){var ge=pe=="ltr"?"L":"R";if(Z.length==0||pe=="ltr"&&!p.test(Z))return!1;for(var Ge=Z.length,Oe=[],nt=0;nt<Ge;++nt)Oe.push(S(Z.charCodeAt(nt)));for(var ct=0,xt=ge;ct<Ge;++ct){var Vt=Oe[ct];Vt=="m"?Oe[ct]=xt:xt=Vt}for(var Lt=0,Dt=ge;Lt<Ge;++Lt){var kt=Oe[Lt];kt=="1"&&Dt=="r"?Oe[Lt]="n":F.test(kt)&&(Dt=kt,kt=="r"&&(Oe[Lt]="R"))}for(var n0=1,Qt=Oe[0];n0<Ge-1;++n0){var F0=Oe[n0];F0=="+"&&Qt=="1"&&Oe[n0+1]=="1"?Oe[n0]="1":F0==","&&Qt==Oe[n0+1]&&(Qt=="1"||Qt=="n")&&(Oe[n0]=Qt),Qt=F0}for(var Sn=0;Sn<Ge;++Sn){var Hr=Oe[Sn];if(Hr==",")Oe[Sn]="N";else if(Hr=="%"){var qn=void 0;for(qn=Sn+1;qn<Ge&&Oe[qn]=="%";++qn);for(var ia=Sn&&Oe[Sn-1]=="!"||qn<Ge&&Oe[qn]=="1"?"1":"N",Wi=Sn;Wi<qn;++Wi)Oe[Wi]=ia;Sn=qn-1}}for(var gr=0,Xi=ge;gr<Ge;++gr){var $r=Oe[gr];Xi=="L"&&$r=="1"?Oe[gr]="L":F.test($r)&&(Xi=$r)}for(var Fr=0;Fr<Ge;++Fr)if(w.test(Oe[Fr])){var _r=void 0;for(_r=Fr+1;_r<Ge&&w.test(Oe[_r]);++_r);for(var rr=(Fr?Oe[Fr-1]:ge)=="L",Ki=(_r<Ge?Oe[_r]:ge)=="L",Nd=rr==Ki?rr?"L":"R":ge,Vl=Fr;Vl<_r;++Vl)Oe[Vl]=Nd;Fr=_r-1}for(var li=[],qo,zr=0;zr<Ge;)if(L.test(Oe[zr])){var Sx=zr;for(++zr;zr<Ge&&L.test(Oe[zr]);++zr);li.push(new K(0,Sx,zr))}else{var bs=zr,Zu=li.length,$u=pe=="rtl"?1:0;for(++zr;zr<Ge&&Oe[zr]!="L";++zr);for(var Ci=bs;Ci<zr;)if(N.test(Oe[Ci])){bs<Ci&&(li.splice(Zu,0,new K(1,bs,Ci)),Zu+=$u);var Ud=Ci;for(++Ci;Ci<zr&&N.test(Oe[Ci]);++Ci);li.splice(Zu,0,new K(2,Ud,Ci)),Zu+=$u,bs=Ci}else++Ci;bs<zr&&li.splice(Zu,0,new K(1,bs,zr))}return pe=="ltr"&&(li[0].level==1&&(qo=Z.match(/^\s+/))&&(li[0].from=qo[0].length,li.unshift(new K(0,0,qo[0].length))),ne(li).level==1&&(qo=Z.match(/\s+$/))&&(ne(li).to-=qo[0].length,li.push(new K(0,Ge-qo[0].length,Ge)))),pe=="rtl"?li.reverse():li}}();function ht(u,A){var S=u.order;return S==null&&(S=u.order=Ft(u.text,A)),S}var Nt=[],Je=function(u,A,S){if(u.addEventListener)u.addEventListener(A,S,!1);else if(u.attachEvent)u.attachEvent("on"+A,S);else{var p=u._handlers||(u._handlers={});p[A]=(p[A]||Nt).concat(S)}};function mt(u,A){return u._handlers&&u._handlers[A]||Nt}function Wt(u,A,S){if(u.removeEventListener)u.removeEventListener(A,S,!1);else if(u.detachEvent)u.detachEvent("on"+A,S);else{var p=u._handlers,w=p&&p[A];if(w){var F=Ke(w,S);F>-1&&(p[A]=w.slice(0,F).concat(w.slice(F+1)))}}}function _t(u,A){var S=mt(u,A);if(!!S.length)for(var p=Array.prototype.slice.call(arguments,2),w=0;w<S.length;++w)S[w].apply(null,p)}function a0(u,A,S){return typeof A=="string"&&(A={type:A,preventDefault:function(){this.defaultPrevented=!0}}),_t(u,S||A.type,u,A),ta(A)||A.codemirrorIgnore}function v0(u){var A=u._handlers&&u._handlers.cursorActivity;if(!!A)for(var S=u.curOp.cursorActivityHandlers||(u.curOp.cursorActivityHandlers=[]),p=0;p<A.length;++p)Ke(S,A[p])==-1&&S.push(A[p])}function M0(u,A){return mt(u,A).length>0}function Vn(u){u.prototype.on=function(A,S){Je(this,A,S)},u.prototype.off=function(A,S){Wt(this,A,S)}}function Xn(u){u.preventDefault?u.preventDefault():u.returnValue=!1}function ki(u){u.stopPropagation?u.stopPropagation():u.cancelBubble=!0}function ta(u){return u.defaultPrevented!=null?u.defaultPrevented:u.returnValue==!1}function $t(u){Xn(u),ki(u)}function Nr(u){return u.target||u.srcElement}function xi(u){var A=u.which;return A==null&&(u.button&1?A=1:u.button&2?A=3:u.button&4&&(A=2)),V&&u.ctrlKey&&A==1&&(A=3),A}var S0=function(){if(l&&c<9)return!1;var u=ee("div");return"draggable"in u||"dragDrop"in u}(),Q;function he(u){if(Q==null){var A=ee("span","\u200B");P(u,ee("span",[A,document.createTextNode("x")])),u.firstChild.offsetHeight!=0&&(Q=A.offsetWidth<=1&&A.offsetHeight>2&&!(l&&c<8))}var S=Q?ee("span","\u200B"):ee("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return S.setAttribute("cm-text",""),S}var qe;function st(u){if(qe!=null)return qe;var A=P(u,document.createTextNode("A\u062EA")),S=U(A,0,1).getBoundingClientRect(),p=U(A,1,2).getBoundingClientRect();return q(u),!S||S.left==S.right?!1:qe=p.right-S.right<3}var Ze=`

b`.split(/\n/).length!=3?function(u){for(var A=0,S=[],p=u.length;A<=p;){var w=u.indexOf(`
`,A);w==-1&&(w=u.length);var F=u.slice(A,u.charAt(w-1)=="\r"?w-1:w),L=F.indexOf("\r");L!=-1?(S.push(F.slice(0,L)),A+=L+1):(S.push(F),A=w+1)}return S}:function(u){return u.split(/\r\n?|\n/)},ft=window.getSelection?function(u){try{return u.selectionStart!=u.selectionEnd}catch{return!1}}:function(u){var A;try{A=u.ownerDocument.selection.createRange()}catch{}return!A||A.parentElement()!=u?!1:A.compareEndPoints("StartToEnd",A)!=0},t0=function(){var u=ee("div");return"oncopy"in u?!0:(u.setAttribute("oncopy","return;"),typeof u.oncopy=="function")}(),p0=null;function E0(u){if(p0!=null)return p0;var A=P(u,ee("span","x")),S=A.getBoundingClientRect(),p=U(A,0,1).getBoundingClientRect();return p0=Math.abs(S.left-p.left)>1}var m0={},D0={};function f0(u,A){arguments.length>2&&(A.dependencies=Array.prototype.slice.call(arguments,2)),m0[u]=A}function jt(u,A){D0[u]=A}function z0(u){if(typeof u=="string"&&D0.hasOwnProperty(u))u=D0[u];else if(u&&typeof u.name=="string"&&D0.hasOwnProperty(u.name)){var A=D0[u.name];typeof A=="string"&&(A={name:A}),u=Y(A,u),u.name=A.name}else{if(typeof u=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(u))return z0("application/xml");if(typeof u=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(u))return z0("application/json")}return typeof u=="string"?{name:u}:u||{name:"null"}}function Jr(u,A){A=z0(A);var S=m0[A.name];if(!S)return Jr(u,"text/plain");var p=S(u,A);if(c0.hasOwnProperty(A.name)){var w=c0[A.name];for(var F in w)!w.hasOwnProperty(F)||(p.hasOwnProperty(F)&&(p["_"+F]=p[F]),p[F]=w[F])}if(p.name=A.name,A.helperType&&(p.helperType=A.helperType),A.modeProps)for(var L in A.modeProps)p[L]=A.modeProps[L];return p}var c0={};function ai(u,A){var S=c0.hasOwnProperty(u)?c0[u]:c0[u]={};ye(A,S)}function mn(u,A){if(A===!0)return A;if(u.copyState)return u.copyState(A);var S={};for(var p in A){var w=A[p];w instanceof Array&&(w=w.concat([])),S[p]=w}return S}function C0(u,A){for(var S;u.innerMode&&(S=u.innerMode(A),!(!S||S.mode==u));)A=S.state,u=S.mode;return S||{mode:u,state:A}}function Ur(u,A,S){return u.startState?u.startState(A,S):!0}var e0=function(u,A,S){this.pos=this.start=0,this.string=u,this.tabSize=A||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=S};e0.prototype.eol=function(){return this.pos>=this.string.length},e0.prototype.sol=function(){return this.pos==this.lineStart},e0.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},e0.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},e0.prototype.eat=function(u){var A=this.string.charAt(this.pos),S;if(typeof u=="string"?S=A==u:S=A&&(u.test?u.test(A):u(A)),S)return++this.pos,A},e0.prototype.eatWhile=function(u){for(var A=this.pos;this.eat(u););return this.pos>A},e0.prototype.eatSpace=function(){for(var u=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>u},e0.prototype.skipToEnd=function(){this.pos=this.string.length},e0.prototype.skipTo=function(u){var A=this.string.indexOf(u,this.pos);if(A>-1)return this.pos=A,!0},e0.prototype.backUp=function(u){this.pos-=u},e0.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=We(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?We(this.string,this.lineStart,this.tabSize):0)},e0.prototype.indentation=function(){return We(this.string,null,this.tabSize)-(this.lineStart?We(this.string,this.lineStart,this.tabSize):0)},e0.prototype.match=function(u,A,S){if(typeof u=="string"){var p=function(L){return S?L.toLowerCase():L},w=this.string.substr(this.pos,u.length);if(p(w)==p(u))return A!==!1&&(this.pos+=u.length),!0}else{var F=this.string.slice(this.pos).match(u);return F&&F.index>0?null:(F&&A!==!1&&(this.pos+=F[0].length),F)}},e0.prototype.current=function(){return this.string.slice(this.start,this.pos)},e0.prototype.hideFirstChars=function(u,A){this.lineStart+=u;try{return A()}finally{this.lineStart-=u}},e0.prototype.lookAhead=function(u){var A=this.lineOracle;return A&&A.lookAhead(u)},e0.prototype.baseToken=function(){var u=this.lineOracle;return u&&u.baseToken(this.pos)};function Rt(u,A){if(A-=u.first,A<0||A>=u.size)throw new Error("There is no line "+(A+u.first)+" in the document.");for(var S=u;!S.lines;)for(var p=0;;++p){var w=S.children[p],F=w.chunkSize();if(A<F){S=w;break}A-=F}return S.lines[A]}function Dn(u,A,S){var p=[],w=A.line;return u.iter(A.line,S.line+1,function(F){var L=F.text;w==S.line&&(L=L.slice(0,S.ch)),w==A.line&&(L=L.slice(A.ch)),p.push(L),++w}),p}function vi(u,A,S){var p=[];return u.iter(A,S,function(w){p.push(w.text)}),p}function Vr(u,A){var S=A-u.height;if(S)for(var p=u;p;p=p.parent)p.height+=S}function o0(u){if(u.parent==null)return null;for(var A=u.parent,S=Ke(A.lines,u),p=A.parent;p;A=p,p=p.parent)for(var w=0;p.children[w]!=A;++w)S+=p.children[w].chunkSize();return S+A.first}function En(u,A){var S=u.first;e:do{for(var p=0;p<u.children.length;++p){var w=u.children[p],F=w.height;if(A<F){u=w;continue e}A-=F,S+=w.chunkSize()}return S}while(!u.lines);for(var L=0;L<u.lines.length;++L){var N=u.lines[L],K=N.height;if(A<K)break;A-=K}return S+L}function Ni(u,A){return A>=u.first&&A<u.first+u.size}function b(u,A){return String(u.lineNumberFormatter(A+u.firstLineNumber))}function M(u,A,S){if(S===void 0&&(S=null),!(this instanceof M))return new M(u,A,S);this.line=u,this.ch=A,this.sticky=S}function X(u,A){return u.line-A.line||u.ch-A.ch}function Ae(u,A){return u.sticky==A.sticky&&X(u,A)==0}function xe(u){return M(u.line,u.ch)}function Me(u,A){return X(u,A)<0?A:u}function ze(u,A){return X(u,A)<0?u:A}function Ye(u,A){return Math.max(u.first,Math.min(A,u.first+u.size-1))}function it(u,A){if(A.line<u.first)return M(u.first,0);var S=u.first+u.size-1;return A.line>S?M(S,Rt(u,S).text.length):Gt(A,Rt(u,A.line).text.length)}function Gt(u,A){var S=u.ch;return S==null||S>A?M(u.line,A):S<0?M(u.line,0):u}function Zt(u,A){for(var S=[],p=0;p<A.length;p++)S[p]=it(u,A[p]);return S}var x0=function(u,A){this.state=u,this.lookAhead=A},zt=function(u,A,S,p){this.state=A,this.doc=u,this.line=S,this.maxLookAhead=p||0,this.baseTokens=null,this.baseTokenPos=1};zt.prototype.lookAhead=function(u){var A=this.doc.getLine(this.line+u);return A!=null&&u>this.maxLookAhead&&(this.maxLookAhead=u),A},zt.prototype.baseToken=function(u){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=u;)this.baseTokenPos+=2;var A=this.baseTokens[this.baseTokenPos+1];return{type:A&&A.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-u}},zt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},zt.fromSaved=function(u,A,S){return A instanceof x0?new zt(u,mn(u.mode,A.state),S,A.lookAhead):new zt(u,mn(u.mode,A),S)},zt.prototype.save=function(u){var A=u!==!1?mn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new x0(A,this.maxLookAhead):A};function qt(u,A,S,p){var w=[u.state.modeGen],F={};un(u,A.text,u.doc.mode,S,function(Z,pe){return w.push(Z,pe)},F,p);for(var L=S.state,N=function(Z){S.baseTokens=w;var pe=u.state.overlays[Z],ge=1,Ge=0;S.state=!0,un(u,A.text,pe.mode,S,function(Oe,nt){for(var ct=ge;Ge<Oe;){var xt=w[ge];xt>Oe&&w.splice(ge,1,Oe,w[ge+1],xt),ge+=2,Ge=Math.min(Oe,xt)}if(!!nt)if(pe.opaque)w.splice(ct,ge-ct,Oe,"overlay "+nt),ge=ct+2;else for(;ct<ge;ct+=2){var Vt=w[ct+1];w[ct+1]=(Vt?Vt+" ":"")+"overlay "+nt}},F),S.state=L,S.baseTokens=null,S.baseTokenPos=1},K=0;K<u.state.overlays.length;++K)N(K);return{styles:w,classes:F.bgClass||F.textClass?F:null}}function w0(u,A,S){if(!A.styles||A.styles[0]!=u.state.modeGen){var p=Kn(u,o0(A)),w=A.text.length>u.options.maxHighlightLength&&mn(u.doc.mode,p.state),F=qt(u,A,p);w&&(p.state=w),A.stateAfter=p.save(!w),A.styles=F.styles,F.classes?A.styleClasses=F.classes:A.styleClasses&&(A.styleClasses=null),S===u.doc.highlightFrontier&&(u.doc.modeFrontier=Math.max(u.doc.modeFrontier,++u.doc.highlightFrontier))}return A.styles}function Kn(u,A,S){var p=u.doc,w=u.display;if(!p.mode.startState)return new zt(p,!0,A);var F=ku(u,A,S),L=F>p.first&&Rt(p,F-1).stateAfter,N=L?zt.fromSaved(p,L,F):new zt(p,Ur(p.mode),F);return p.iter(F,A,function(K){ka(u,K.text,N);var Z=N.line;K.stateAfter=Z==A-1||Z%5==0||Z>=w.viewFrom&&Z<w.viewTo?N.save():null,N.nextLine()}),S&&(p.modeFrontier=N.line),N}function ka(u,A,S,p){var w=u.doc.mode,F=new e0(A,u.options.tabSize,S);for(F.start=F.pos=p||0,A==""&&Zr(w,S.state);!F.eol();)N0(w,F,S.state),F.start=F.pos}function Zr(u,A){if(u.blankLine)return u.blankLine(A);if(!!u.innerMode){var S=C0(u,A);if(S.mode.blankLine)return S.mode.blankLine(S.state)}}function N0(u,A,S,p){for(var w=0;w<10;w++){p&&(p[0]=C0(u,S).mode);var F=u.token(A,S);if(A.pos>A.start)return F}throw new Error("Mode "+u.name+" failed to advance stream.")}var mr=function(u,A,S){this.start=u.start,this.end=u.pos,this.string=u.current(),this.type=A||null,this.state=S};function wi(u,A,S,p){var w=u.doc,F=w.mode,L;A=it(w,A);var N=Rt(w,A.line),K=Kn(u,A.line,S),Z=new e0(N.text,u.options.tabSize,K),pe;for(p&&(pe=[]);(p||Z.pos<A.ch)&&!Z.eol();)Z.start=Z.pos,L=N0(F,Z,K.state),p&&pe.push(new mr(Z,L,mn(w.mode,K.state)));return p?pe:new mr(Z,L,K.state)}function kn(u,A){if(u)for(;;){var S=u.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!S)break;u=u.slice(0,S.index)+u.slice(S.index+S[0].length);var p=S[1]?"bgClass":"textClass";A[p]==null?A[p]=S[2]:new RegExp("(?:^|\\s)"+S[2]+"(?:$|\\s)").test(A[p])||(A[p]+=" "+S[2])}return u}function un(u,A,S,p,w,F,L){var N=S.flattenSpans;N==null&&(N=u.options.flattenSpans);var K=0,Z=null,pe=new e0(A,u.options.tabSize,p),ge,Ge=u.options.addModeClass&&[null];for(A==""&&kn(Zr(S,p.state),F);!pe.eol();){if(pe.pos>u.options.maxHighlightLength?(N=!1,L&&ka(u,A,p,pe.pos),pe.pos=A.length,ge=null):ge=kn(N0(S,pe,p.state,Ge),F),Ge){var Oe=Ge[0].name;Oe&&(ge="m-"+(ge?Oe+" "+ge:Oe))}if(!N||Z!=ge){for(;K<pe.start;)K=Math.min(pe.start,K+5e3),w(K,Z);Z=ge}pe.start=pe.pos}for(;K<pe.pos;){var nt=Math.min(pe.pos,K+5e3);w(nt,Z),K=nt}}function ku(u,A,S){for(var p,w,F=u.doc,L=S?-1:A-(u.doc.mode.innerMode?1e3:100),N=A;N>L;--N){if(N<=F.first)return F.first;var K=Rt(F,N-1),Z=K.stateAfter;if(Z&&(!S||N+(Z instanceof x0?Z.lookAhead:0)<=F.modeFrontier))return N;var pe=We(K.text,null,u.options.tabSize);(w==null||p>pe)&&(w=N-1,p=pe)}return w}function mm(u,A){if(u.modeFrontier=Math.min(u.modeFrontier,A),!(u.highlightFrontier<A-10)){for(var S=u.first,p=A-1;p>S;p--){var w=Rt(u,p).stateAfter;if(w&&(!(w instanceof x0)||p+w.lookAhead<A)){S=p+1;break}}u.highlightFrontier=Math.min(u.highlightFrontier,S)}}var fl=!1,Na=!1;function XA(){fl=!0}function M2(){Na=!0}function hl(u,A,S){this.marker=u,this.from=A,this.to=S}function Ua(u,A){if(u)for(var S=0;S<u.length;++S){var p=u[S];if(p.marker==A)return p}}function Sm(u,A){for(var S,p=0;p<u.length;++p)u[p]!=A&&(S||(S=[])).push(u[p]);return S}function Xo(u,A,S){var p=S&&window.WeakSet&&(S.markedSpans||(S.markedSpans=new WeakSet));p&&u.markedSpans&&p.has(u.markedSpans)?u.markedSpans.push(A):(u.markedSpans=u.markedSpans?u.markedSpans.concat([A]):[A],p&&p.add(u.markedSpans)),A.marker.attachLine(u)}function Ad(u,A,S){var p;if(u)for(var w=0;w<u.length;++w){var F=u[w],L=F.marker,N=F.from==null||(L.inclusiveLeft?F.from<=A:F.from<A);if(N||F.from==A&&L.type=="bookmark"&&(!S||!F.marker.insertLeft)){var K=F.to==null||(L.inclusiveRight?F.to>=A:F.to>A);(p||(p=[])).push(new hl(L,F.from,K?null:F.to))}}return p}function Nu(u,A,S){var p;if(u)for(var w=0;w<u.length;++w){var F=u[w],L=F.marker,N=F.to==null||(L.inclusiveRight?F.to>=A:F.to>A);if(N||F.from==A&&L.type=="bookmark"&&(!S||F.marker.insertLeft)){var K=F.from==null||(L.inclusiveLeft?F.from<=A:F.from<A);(p||(p=[])).push(new hl(L,K?null:F.from-A,F.to==null?null:F.to-A))}}return p}function Nn(u,A){if(A.full)return null;var S=Ni(u,A.from.line)&&Rt(u,A.from.line).markedSpans,p=Ni(u,A.to.line)&&Rt(u,A.to.line).markedSpans;if(!S&&!p)return null;var w=A.from.ch,F=A.to.ch,L=X(A.from,A.to)==0,N=Ad(S,w,L),K=Nu(p,F,L),Z=A.text.length==1,pe=ne(A.text).length+(Z?w:0);if(N)for(var ge=0;ge<N.length;++ge){var Ge=N[ge];if(Ge.to==null){var Oe=Ua(K,Ge.marker);Oe?Z&&(Ge.to=Oe.to==null?null:Oe.to+pe):Ge.to=w}}if(K)for(var nt=0;nt<K.length;++nt){var ct=K[nt];if(ct.to!=null&&(ct.to+=pe),ct.from==null){var xt=Ua(N,ct.marker);xt||(ct.from=pe,Z&&(N||(N=[])).push(ct))}else ct.from+=pe,Z&&(N||(N=[])).push(ct)}N&&(N=KA(N)),K&&K!=N&&(K=KA(K));var Vt=[N];if(!Z){var Lt=A.text.length-2,Dt;if(Lt>0&&N)for(var kt=0;kt<N.length;++kt)N[kt].to==null&&(Dt||(Dt=[])).push(new hl(N[kt].marker,null,null));for(var n0=0;n0<Lt;++n0)Vt.push(Dt);Vt.push(K)}return Vt}function KA(u){for(var A=0;A<u.length;++A){var S=u[A];S.from!=null&&S.from==S.to&&S.marker.clearWhenEmpty!==!1&&u.splice(A--,1)}return u.length?u:null}function YA(u,A,S){var p=null;if(u.iter(A.line,S.line+1,function(Oe){if(Oe.markedSpans)for(var nt=0;nt<Oe.markedSpans.length;++nt){var ct=Oe.markedSpans[nt].marker;ct.readOnly&&(!p||Ke(p,ct)==-1)&&(p||(p=[])).push(ct)}}),!p)return null;for(var w=[{from:A,to:S}],F=0;F<p.length;++F)for(var L=p[F],N=L.find(0),K=0;K<w.length;++K){var Z=w[K];if(!(X(Z.to,N.from)<0||X(Z.from,N.to)>0)){var pe=[K,1],ge=X(Z.from,N.from),Ge=X(Z.to,N.to);(ge<0||!L.inclusiveLeft&&!ge)&&pe.push({from:Z.from,to:N.from}),(Ge>0||!L.inclusiveRight&&!Ge)&&pe.push({from:N.to,to:Z.to}),w.splice.apply(w,pe),K+=pe.length-3}}return w}function qA(u){var A=u.markedSpans;if(!!A){for(var S=0;S<A.length;++S)A[S].marker.detachLine(u);u.markedSpans=null}}function Uu(u,A){if(!!A){for(var S=0;S<A.length;++S)A[S].marker.attachLine(u);u.markedSpans=A}}function ju(u){return u.inclusiveLeft?-1:0}function oi(u){return u.inclusiveRight?1:0}function Ko(u,A){var S=u.lines.length-A.lines.length;if(S!=0)return S;var p=u.find(),w=A.find(),F=X(p.from,w.from)||ju(u)-ju(A);if(F)return-F;var L=X(p.to,w.to)||oi(u)-oi(A);return L||A.id-u.id}function ys(u,A){var S=Na&&u.markedSpans,p;if(S)for(var w=void 0,F=0;F<S.length;++F)w=S[F],w.marker.collapsed&&(A?w.from:w.to)==null&&(!p||Ko(p,w.marker)<0)&&(p=w.marker);return p}function Es(u){return ys(u,!0)}function Gu(u){return ys(u,!1)}function gm(u,A){var S=Na&&u.markedSpans,p;if(S)for(var w=0;w<S.length;++w){var F=S[w];F.marker.collapsed&&(F.from==null||F.from<A)&&(F.to==null||F.to>A)&&(!p||Ko(p,F.marker)<0)&&(p=F.marker)}return p}function fd(u,A,S,p,w){var F=Rt(u,A),L=Na&&F.markedSpans;if(L)for(var N=0;N<L.length;++N){var K=L[N];if(!!K.marker.collapsed){var Z=K.marker.find(0),pe=X(Z.from,S)||ju(K.marker)-ju(w),ge=X(Z.to,p)||oi(K.marker)-oi(w);if(!(pe>=0&&ge<=0||pe<=0&&ge>=0)&&(pe<=0&&(K.marker.inclusiveRight&&w.inclusiveLeft?X(Z.to,S)>=0:X(Z.to,S)>0)||pe>=0&&(K.marker.inclusiveRight&&w.inclusiveLeft?X(Z.from,p)<=0:X(Z.from,p)<0)))return!0}}}function na(u){for(var A;A=Es(u);)u=A.find(-1,!0).line;return u}function I2(u){for(var A;A=Gu(u);)u=A.find(1,!0).line;return u}function O2(u){for(var A,S;A=Gu(u);)u=A.find(1,!0).line,(S||(S=[])).push(u);return S}function Hu(u,A){var S=Rt(u,A),p=na(S);return S==p?A:o0(p)}function _m(u,A){if(A>u.lastLine())return A;var S=Rt(u,A),p;if(!go(u,S))return A;for(;p=Gu(S);)S=p.find(1,!0).line;return o0(S)+1}function go(u,A){var S=Na&&A.markedSpans;if(S){for(var p=void 0,w=0;w<S.length;++w)if(p=S[w],!!p.marker.collapsed){if(p.from==null)return!0;if(!p.marker.widgetNode&&p.from==0&&p.marker.inclusiveLeft&&QA(u,A,p))return!0}}}function QA(u,A,S){if(S.to==null){var p=S.marker.find(1,!0);return QA(u,p.line,Ua(p.line.markedSpans,S.marker))}if(S.marker.inclusiveRight&&S.to==A.text.length)return!0;for(var w=void 0,F=0;F<A.markedSpans.length;++F)if(w=A.markedSpans[F],w.marker.collapsed&&!w.marker.widgetNode&&w.from==S.to&&(w.to==null||w.to!=S.from)&&(w.marker.inclusiveLeft||S.marker.inclusiveRight)&&QA(u,A,w))return!0}function ja(u){u=na(u);for(var A=0,S=u.parent,p=0;p<S.lines.length;++p){var w=S.lines[p];if(w==u)break;A+=w.height}for(var F=S.parent;F;S=F,F=S.parent)for(var L=0;L<F.children.length;++L){var N=F.children[L];if(N==S)break;A+=N.height}return A}function hd(u){if(u.height==0)return 0;for(var A=u.text.length,S,p=u;S=Es(p);){var w=S.find(0,!0);p=w.from.line,A+=w.from.ch-w.to.ch}for(p=u;S=Gu(p);){var F=S.find(0,!0);A-=p.text.length-F.from.ch,p=F.to.line,A+=p.text.length-F.to.ch}return A}function JA(u){var A=u.display,S=u.doc;A.maxLine=Rt(S,S.first),A.maxLineLength=hd(A.maxLine),A.maxLineChanged=!0,S.iter(function(p){var w=hd(p);w>A.maxLineLength&&(A.maxLineLength=w,A.maxLine=p)})}var ma=function(u,A,S){this.text=u,Uu(this,A),this.height=S?S(this):1};ma.prototype.lineNo=function(){return o0(this)},Vn(ma);function pd(u,A,S,p){u.text=A,u.stateAfter&&(u.stateAfter=null),u.styles&&(u.styles=null),u.order!=null&&(u.order=null),qA(u),Uu(u,S);var w=p?p(u):1;w!=u.height&&Vr(u,w)}function xm(u){u.parent=null,qA(u)}var ZA={},cn={};function $A(u,A){if(!u||/^\s*$/.test(u))return null;var S=A.addModeClass?cn:ZA;return S[u]||(S[u]=u.replace(/\S+/g,"cm-$&"))}function ef(u,A){var S=ce("span",null,null,d?"padding-right: .1px":null),p={pre:ce("pre",[S],"CodeMirror-line"),content:S,col:0,pos:0,cm:u,trailingSpace:!1,splitSpaces:u.getOption("lineWrapping")};A.measure={};for(var w=0;w<=(A.rest?A.rest.length:0);w++){var F=w?A.rest[w-1]:A.line,L=void 0;p.pos=0,p.addToken=Ga,st(u.display.measure)&&(L=ht(F,u.doc.direction))&&(p.addToken=wm(p.addToken,L)),p.map=[];var N=A!=u.display.externalMeasured&&o0(F);Ui(F,p,w0(u,F,N)),F.styleClasses&&(F.styleClasses.bgClass&&(p.bgClass=oe(F.styleClasses.bgClass,p.bgClass||"")),F.styleClasses.textClass&&(p.textClass=oe(F.styleClasses.textClass,p.textClass||""))),p.map.length==0&&p.map.push(0,0,p.content.appendChild(he(u.display.measure))),w==0?(A.measure.map=p.map,A.measure.cache={}):((A.measure.maps||(A.measure.maps=[])).push(p.map),(A.measure.caches||(A.measure.caches=[])).push({}))}if(d){var K=p.content.lastChild;(/\bcm-tab\b/.test(K.className)||K.querySelector&&K.querySelector(".cm-tab"))&&(p.content.className="cm-tab-wrap-hack")}return _t(u,"renderLine",u,A.line,p.pre),p.pre.className&&(p.textClass=oe(p.pre.className,p.textClass||"")),p}function vm(u){var A=ee("span","\u2022","cm-invalidchar");return A.title="\\u"+u.charCodeAt(0).toString(16),A.setAttribute("aria-label",A.title),A}function Ga(u,A,S,p,w,F,L){if(!!A){var N=u.splitSpaces?tf(A,u.trailingSpace):A,K=u.cm.state.specialChars,Z=!1,pe;if(!K.test(A))u.col+=A.length,pe=document.createTextNode(N),u.map.push(u.pos,u.pos+A.length,pe),l&&c<9&&(Z=!0),u.pos+=A.length;else{pe=document.createDocumentFragment();for(var ge=0;;){K.lastIndex=ge;var Ge=K.exec(A),Oe=Ge?Ge.index-ge:A.length-ge;if(Oe){var nt=document.createTextNode(N.slice(ge,ge+Oe));l&&c<9?pe.appendChild(ee("span",[nt])):pe.appendChild(nt),u.map.push(u.pos,u.pos+Oe,nt),u.col+=Oe,u.pos+=Oe}if(!Ge)break;ge+=Oe+1;var ct=void 0;if(Ge[0]=="	"){var xt=u.cm.options.tabSize,Vt=xt-u.col%xt;ct=pe.appendChild(ee("span",le(Vt),"cm-tab")),ct.setAttribute("role","presentation"),ct.setAttribute("cm-text","	"),u.col+=Vt}else Ge[0]=="\r"||Ge[0]==`
`?(ct=pe.appendChild(ee("span",Ge[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),ct.setAttribute("cm-text",Ge[0]),u.col+=1):(ct=u.cm.options.specialCharPlaceholder(Ge[0]),ct.setAttribute("cm-text",Ge[0]),l&&c<9?pe.appendChild(ee("span",[ct])):pe.appendChild(ct),u.col+=1);u.map.push(u.pos,u.pos+1,ct),u.pos++}}if(u.trailingSpace=N.charCodeAt(A.length-1)==32,S||p||w||Z||F||L){var Lt=S||"";p&&(Lt+=p),w&&(Lt+=w);var Dt=ee("span",[pe],Lt,F);if(L)for(var kt in L)L.hasOwnProperty(kt)&&kt!="style"&&kt!="class"&&Dt.setAttribute(kt,L[kt]);return u.content.appendChild(Dt)}u.content.appendChild(pe)}}function tf(u,A){if(u.length>1&&!/  /.test(u))return u;for(var S=A,p="",w=0;w<u.length;w++){var F=u.charAt(w);F==" "&&S&&(w==u.length-1||u.charCodeAt(w+1)==32)&&(F="\xA0"),p+=F,S=F==" "}return p}function wm(u,A){return function(S,p,w,F,L,N,K){w=w?w+" cm-force-border":"cm-force-border";for(var Z=S.pos,pe=Z+p.length;;){for(var ge=void 0,Ge=0;Ge<A.length&&(ge=A[Ge],!(ge.to>Z&&ge.from<=Z));Ge++);if(ge.to>=pe)return u(S,p,w,F,L,N,K);u(S,p.slice(0,ge.to-Z),w,F,null,N,K),F=null,p=p.slice(ge.to-Z),Z=ge.to}}}function nf(u,A,S,p){var w=!p&&S.widgetNode;w&&u.map.push(u.pos,u.pos+A,w),!p&&u.cm.display.input.needsContentAttribute&&(w||(w=u.content.appendChild(document.createElement("span"))),w.setAttribute("cm-marker",S.id)),w&&(u.cm.display.input.setUneditable(w),u.content.appendChild(w)),u.pos+=A,u.trailingSpace=!1}function Ui(u,A,S){var p=u.markedSpans,w=u.text,F=0;if(!p){for(var L=1;L<S.length;L+=2)A.addToken(A,w.slice(F,F=S[L]),$A(S[L+1],A.cm.options));return}for(var N=w.length,K=0,Z=1,pe="",ge,Ge,Oe=0,nt,ct,xt,Vt,Lt;;){if(Oe==K){nt=ct=xt=Ge="",Lt=null,Vt=null,Oe=1/0;for(var Dt=[],kt=void 0,n0=0;n0<p.length;++n0){var Qt=p[n0],F0=Qt.marker;if(F0.type=="bookmark"&&Qt.from==K&&F0.widgetNode)Dt.push(F0);else if(Qt.from<=K&&(Qt.to==null||Qt.to>K||F0.collapsed&&Qt.to==K&&Qt.from==K)){if(Qt.to!=null&&Qt.to!=K&&Oe>Qt.to&&(Oe=Qt.to,ct=""),F0.className&&(nt+=" "+F0.className),F0.css&&(Ge=(Ge?Ge+";":"")+F0.css),F0.startStyle&&Qt.from==K&&(xt+=" "+F0.startStyle),F0.endStyle&&Qt.to==Oe&&(kt||(kt=[])).push(F0.endStyle,Qt.to),F0.title&&((Lt||(Lt={})).title=F0.title),F0.attributes)for(var Sn in F0.attributes)(Lt||(Lt={}))[Sn]=F0.attributes[Sn];F0.collapsed&&(!Vt||Ko(Vt.marker,F0)<0)&&(Vt=Qt)}else Qt.from>K&&Oe>Qt.from&&(Oe=Qt.from)}if(kt)for(var Hr=0;Hr<kt.length;Hr+=2)kt[Hr+1]==Oe&&(ct+=" "+kt[Hr]);if(!Vt||Vt.from==K)for(var qn=0;qn<Dt.length;++qn)nf(A,0,Dt[qn]);if(Vt&&(Vt.from||0)==K){if(nf(A,(Vt.to==null?N+1:Vt.to)-K,Vt.marker,Vt.from==null),Vt.to==null)return;Vt.to==K&&(Vt=!1)}}if(K>=N)break;for(var ia=Math.min(N,Oe);;){if(pe){var Wi=K+pe.length;if(!Vt){var gr=Wi>ia?pe.slice(0,ia-K):pe;A.addToken(A,gr,ge?ge+nt:nt,xt,K+gr.length==Oe?ct:"",Ge,Lt)}if(Wi>=ia){pe=pe.slice(ia-K),K=ia;break}K=Wi,xt=""}pe=w.slice(F,F=S[Z++]),ge=$A(S[Z++],A.cm.options)}}}function Dr(u,A,S){this.line=A,this.rest=O2(A),this.size=this.rest?o0(ne(this.rest))-S+1:1,this.node=this.text=null,this.hidden=go(u,A)}function Cs(u,A,S){for(var p=[],w,F=A;F<S;F=w){var L=new Dr(u.doc,Rt(u.doc,F),F);w=F+L.size,p.push(L)}return p}var Vs=null;function k2(u){Vs?Vs.ops.push(u):u.ownsGroup=Vs={ops:[u],delayedCallbacks:[]}}function N2(u){var A=u.delayedCallbacks,S=0;do{for(;S<A.length;S++)A[S].call(null);for(var p=0;p<u.ops.length;p++){var w=u.ops[p];if(w.cursorActivityHandlers)for(;w.cursorActivityCalled<w.cursorActivityHandlers.length;)w.cursorActivityHandlers[w.cursorActivityCalled++].call(null,w.cm)}}while(S<A.length)}function Fn(u,A){var S=u.ownsGroup;if(!!S)try{N2(S)}finally{Vs=null,A(S)}}var Ds=null;function ur(u,A){var S=mt(u,A);if(!!S.length){var p=Array.prototype.slice.call(arguments,2),w;Vs?w=Vs.delayedCallbacks:Ds?w=Ds:(w=Ds=[],setTimeout(ji,0));for(var F=function(N){w.push(function(){return S[N].apply(null,p)})},L=0;L<S.length;++L)F(L)}}function ji(){var u=Ds;Ds=null;for(var A=0;A<u.length;++A)u[A]()}function md(u,A,S,p){for(var w=0;w<A.changes.length;w++){var F=A.changes[w];F=="text"?Ha(u,A):F=="gutter"?zu(u,A,S,p):F=="class"?gd(u,A):F=="widget"&&Em(u,A,p)}A.changes=null}function pl(u){return u.node==u.text&&(u.node=ee("div",null,null,"position: relative"),u.text.parentNode&&u.text.parentNode.replaceChild(u.node,u.text),u.node.appendChild(u.text),l&&c<8&&(u.node.style.zIndex=2)),u.node}function ym(u,A){var S=A.bgClass?A.bgClass+" "+(A.line.bgClass||""):A.line.bgClass;if(S&&(S+=" CodeMirror-linebackground"),A.background)S?A.background.className=S:(A.background.parentNode.removeChild(A.background),A.background=null);else if(S){var p=pl(A);A.background=p.insertBefore(ee("div",null,S),p.firstChild),u.display.input.setUneditable(A.background)}}function Sd(u,A){var S=u.display.externalMeasured;return S&&S.line==A.line?(u.display.externalMeasured=null,A.measure=S.measure,S.built):ef(u,A)}function Ha(u,A){var S=A.text.className,p=Sd(u,A);A.text==A.node&&(A.node=p.pre),A.text.parentNode.replaceChild(p.pre,A.text),A.text=p.pre,p.bgClass!=A.bgClass||p.textClass!=A.textClass?(A.bgClass=p.bgClass,A.textClass=p.textClass,gd(u,A)):S&&(A.text.className=S)}function gd(u,A){ym(u,A),A.line.wrapClass?pl(A).className=A.line.wrapClass:A.node!=A.text&&(A.node.className="");var S=A.textClass?A.textClass+" "+(A.line.textClass||""):A.line.textClass;A.text.className=S||""}function zu(u,A,S,p){if(A.gutter&&(A.node.removeChild(A.gutter),A.gutter=null),A.gutterBackground&&(A.node.removeChild(A.gutterBackground),A.gutterBackground=null),A.line.gutterClass){var w=pl(A);A.gutterBackground=ee("div",null,"CodeMirror-gutter-background "+A.line.gutterClass,"left: "+(u.options.fixedGutter?p.fixedPos:-p.gutterTotalWidth)+"px; width: "+p.gutterTotalWidth+"px"),u.display.input.setUneditable(A.gutterBackground),w.insertBefore(A.gutterBackground,A.text)}var F=A.line.gutterMarkers;if(u.options.lineNumbers||F){var L=pl(A),N=A.gutter=ee("div",null,"CodeMirror-gutter-wrapper","left: "+(u.options.fixedGutter?p.fixedPos:-p.gutterTotalWidth)+"px");if(N.setAttribute("aria-hidden","true"),u.display.input.setUneditable(N),L.insertBefore(N,A.text),A.line.gutterClass&&(N.className+=" "+A.line.gutterClass),u.options.lineNumbers&&(!F||!F["CodeMirror-linenumbers"])&&(A.lineNumber=N.appendChild(ee("div",b(u.options,S),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+p.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+u.display.lineNumInnerWidth+"px"))),F)for(var K=0;K<u.display.gutterSpecs.length;++K){var Z=u.display.gutterSpecs[K].className,pe=F.hasOwnProperty(Z)&&F[Z];pe&&N.appendChild(ee("div",[pe],"CodeMirror-gutter-elt","left: "+p.gutterLeft[Z]+"px; width: "+p.gutterWidth[Z]+"px"))}}}function Em(u,A,S){A.alignable&&(A.alignable=null);for(var p=z("CodeMirror-linewidget"),w=A.node.firstChild,F=void 0;w;w=F)F=w.nextSibling,p.test(w.className)&&A.node.removeChild(w);_d(u,A,S)}function Cm(u,A,S,p){var w=Sd(u,A);return A.text=A.node=w.pre,w.bgClass&&(A.bgClass=w.bgClass),w.textClass&&(A.textClass=w.textClass),gd(u,A),zu(u,A,S,p),_d(u,A,p),A.node}function _d(u,A,S){if(nr(u,A.line,A,S,!0),A.rest)for(var p=0;p<A.rest.length;p++)nr(u,A.rest[p],A,S,!1)}function nr(u,A,S,p,w){if(!!A.widgets)for(var F=pl(S),L=0,N=A.widgets;L<N.length;++L){var K=N[L],Z=ee("div",[K.node],"CodeMirror-linewidget"+(K.className?" "+K.className:""));K.handleMouseEvents||Z.setAttribute("cm-ignore-events","true"),Vm(K,Z,S,p),u.display.input.setUneditable(Z),w&&K.above?F.insertBefore(Z,S.gutter||S.text):F.appendChild(Z),ur(K,"redraw")}}function Vm(u,A,S,p){if(u.noHScroll){(S.alignable||(S.alignable=[])).push(A);var w=p.wrapperWidth;A.style.left=p.fixedPos+"px",u.coverGutter||(w-=p.gutterTotalWidth,A.style.paddingLeft=p.gutterTotalWidth+"px"),A.style.width=w+"px"}u.coverGutter&&(A.style.zIndex=5,A.style.position="relative",u.noHScroll||(A.style.marginLeft=-p.gutterTotalWidth+"px"))}function ml(u){if(u.height!=null)return u.height;var A=u.doc.cm;if(!A)return 0;if(!O(document.body,u.node)){var S="position: relative;";u.coverGutter&&(S+="margin-left: -"+A.display.gutters.offsetWidth+"px;"),u.noHScroll&&(S+="width: "+A.display.wrapper.clientWidth+"px;"),P(A.display.measure,ee("div",[u.node],null,S))}return u.height=u.node.parentNode.offsetHeight}function yi(u,A){for(var S=Nr(A);S!=u.wrapper;S=S.parentNode)if(!S||S.nodeType==1&&S.getAttribute("cm-ignore-events")=="true"||S.parentNode==u.sizer&&S!=u.mover)return!0}function Yo(u){return u.lineSpace.offsetTop}function xd(u){return u.mover.offsetHeight-u.lineSpace.offsetHeight}function vd(u){if(u.cachedPaddingH)return u.cachedPaddingH;var A=P(u.measure,ee("pre","x","CodeMirror-line-like")),S=window.getComputedStyle?window.getComputedStyle(A):A.currentStyle,p={left:parseInt(S.paddingLeft),right:parseInt(S.paddingRight)};return!isNaN(p.left)&&!isNaN(p.right)&&(u.cachedPaddingH=p),p}function Sr(u){return tt-u.display.nativeBarWidth}function Yn(u){return u.display.scroller.clientWidth-Sr(u)-u.display.barWidth}function Sl(u){return u.display.scroller.clientHeight-Sr(u)-u.display.barHeight}function U2(u,A,S){var p=u.options.lineWrapping,w=p&&Yn(u);if(!A.measure.heights||p&&A.measure.width!=w){var F=A.measure.heights=[];if(p){A.measure.width=w;for(var L=A.text.firstChild.getClientRects(),N=0;N<L.length-1;N++){var K=L[N],Z=L[N+1];Math.abs(K.bottom-Z.bottom)>2&&F.push((K.bottom+Z.top)/2-S.top)}}F.push(S.bottom-S.top)}}function Dm(u,A,S){if(u.line==A)return{map:u.measure.map,cache:u.measure.cache};if(u.rest){for(var p=0;p<u.rest.length;p++)if(u.rest[p]==A)return{map:u.measure.maps[p],cache:u.measure.caches[p]};for(var w=0;w<u.rest.length;w++)if(o0(u.rest[w])>S)return{map:u.measure.maps[w],cache:u.measure.caches[w],before:!0}}}function wd(u,A){A=na(A);var S=o0(A),p=u.display.externalMeasured=new Dr(u.doc,A,S);p.lineN=S;var w=p.built=ef(u,p);return p.text=w.pre,P(u.display.lineMeasure,w.pre),p}function rf(u,A,S,p){return Sa(u,gl(u,A),S,p)}function yd(u,A){if(A>=u.display.viewFrom&&A<u.display.viewTo)return u.display.view[Ku(u,A)];var S=u.display.externalMeasured;if(S&&A>=S.lineN&&A<S.lineN+S.size)return S}function gl(u,A){var S=o0(A),p=yd(u,S);p&&!p.text?p=null:p&&p.changes&&(md(u,p,S,G2(u)),u.curOp.forceUpdate=!0),p||(p=wd(u,A));var w=Dm(p,A,S);return{line:A,view:p,rect:null,map:w.map,cache:w.cache,before:w.before,hasHeights:!1}}function Sa(u,A,S,p,w){A.before&&(S=-1);var F=S+(p||""),L;return A.cache.hasOwnProperty(F)?L=A.cache[F]:(A.rect||(A.rect=A.view.text.getBoundingClientRect()),A.hasHeights||(U2(u,A.view,A.rect),A.hasHeights=!0),L=j2(u,A,S,p),L.bogus||(A.cache[F]=L)),{left:L.left,right:L.right,top:w?L.rtop:L.top,bottom:w?L.rbottom:L.bottom}}var Fm={left:0,right:0,top:0,bottom:0};function Tm(u,A,S){for(var p,w,F,L,N,K,Z=0;Z<u.length;Z+=3)if(N=u[Z],K=u[Z+1],A<N?(w=0,F=1,L="left"):A<K?(w=A-N,F=w+1):(Z==u.length-3||A==K&&u[Z+3]>A)&&(F=K-N,w=F-1,A>=K&&(L="right")),w!=null){if(p=u[Z+2],N==K&&S==(p.insertLeft?"left":"right")&&(L=S),S=="left"&&w==0)for(;Z&&u[Z-2]==u[Z-3]&&u[Z-1].insertLeft;)p=u[(Z-=3)+2],L="left";if(S=="right"&&w==K-N)for(;Z<u.length-3&&u[Z+3]==u[Z+4]&&!u[Z+5].insertLeft;)p=u[(Z+=3)+2],L="right";break}return{node:p,start:w,end:F,collapse:L,coverStart:N,coverEnd:K}}function bm(u,A){var S=Fm;if(A=="left")for(var p=0;p<u.length&&(S=u[p]).left==S.right;p++);else for(var w=u.length-1;w>=0&&(S=u[w]).left==S.right;w--);return S}function j2(u,A,S,p){var w=Tm(A.map,S,p),F=w.node,L=w.start,N=w.end,K=w.collapse,Z;if(F.nodeType==3){for(var pe=0;pe<4;pe++){for(;L&&Ee(A.line.text.charAt(w.coverStart+L));)--L;for(;w.coverStart+N<w.coverEnd&&Ee(A.line.text.charAt(w.coverStart+N));)++N;if(l&&c<9&&L==0&&N==w.coverEnd-w.coverStart?Z=F.parentNode.getBoundingClientRect():Z=bm(U(F,L,N).getClientRects(),p),Z.left||Z.right||L==0)break;N=L,L=L-1,K="right"}l&&c<11&&(Z=y(u.display.measure,Z))}else{L>0&&(K=p="right");var ge;u.options.lineWrapping&&(ge=F.getClientRects()).length>1?Z=ge[p=="right"?ge.length-1:0]:Z=F.getBoundingClientRect()}if(l&&c<9&&!L&&(!Z||!Z.left&&!Z.right)){var Ge=F.parentNode.getClientRects()[0];Ge?Z={left:Ge.left,right:Ge.left+Vd(u.display),top:Ge.top,bottom:Ge.bottom}:Z=Fm}for(var Oe=Z.top-A.rect.top,nt=Z.bottom-A.rect.top,ct=(Oe+nt)/2,xt=A.view.measure.heights,Vt=0;Vt<xt.length-1&&!(ct<xt[Vt]);Vt++);var Lt=Vt?xt[Vt-1]:0,Dt=xt[Vt],kt={left:(K=="right"?Z.right:Z.left)-A.rect.left,right:(K=="left"?Z.left:Z.right)-A.rect.left,top:Lt,bottom:Dt};return!Z.left&&!Z.right&&(kt.bogus=!0),u.options.singleCursorHeightPerLine||(kt.rtop=Oe,kt.rbottom=nt),kt}function y(u,A){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!E0(u))return A;var S=screen.logicalXDPI/screen.deviceXDPI,p=screen.logicalYDPI/screen.deviceYDPI;return{left:A.left*S,right:A.right*S,top:A.top*p,bottom:A.bottom*p}}function T(u){if(u.measure&&(u.measure.cache={},u.measure.heights=null,u.rest))for(var A=0;A<u.rest.length;A++)u.measure.caches[A]={}}function W(u){u.display.externalMeasure=null,q(u.display.lineMeasure);for(var A=0;A<u.display.view.length;A++)T(u.display.view[A])}function J(u){W(u),u.display.cachedCharWidth=u.display.cachedTextHeight=u.display.cachedPaddingH=null,u.options.lineWrapping||(u.display.maxLineChanged=!0),u.display.lineNumChars=null}function ie(u){return f&&C?-(u.body.getBoundingClientRect().left-parseInt(getComputedStyle(u.body).marginLeft)):u.defaultView.pageXOffset||(u.documentElement||u.body).scrollLeft}function me(u){return f&&C?-(u.body.getBoundingClientRect().top-parseInt(getComputedStyle(u.body).marginTop)):u.defaultView.pageYOffset||(u.documentElement||u.body).scrollTop}function Ve(u){var A=na(u),S=A.widgets,p=0;if(S)for(var w=0;w<S.length;++w)S[w].above&&(p+=ml(S[w]));return p}function je(u,A,S,p,w){if(!w){var F=Ve(A);S.top+=F,S.bottom+=F}if(p=="line")return S;p||(p="local");var L=ja(A);if(p=="local"?L+=Yo(u.display):L-=u.display.viewOffset,p=="page"||p=="window"){var N=u.display.lineSpace.getBoundingClientRect();L+=N.top+(p=="window"?0:me(be(u)));var K=N.left+(p=="window"?0:ie(be(u)));S.left+=K,S.right+=K}return S.top+=L,S.bottom+=L,S}function et(u,A,S){if(S=="div")return A;var p=A.left,w=A.top;if(S=="page")p-=ie(be(u)),w-=me(be(u));else if(S=="local"||!S){var F=u.display.sizer.getBoundingClientRect();p+=F.left,w+=F.top}var L=u.display.lineSpace.getBoundingClientRect();return{left:p-L.left,top:w-L.top}}function ot(u,A,S,p,w){return p||(p=Rt(u.doc,A.line)),je(u,p,rf(u,p,A.ch,w),S)}function ut(u,A,S,p,w,F){p=p||Rt(u.doc,A.line),w||(w=gl(u,p));function L(nt,ct){var xt=Sa(u,w,nt,ct?"right":"left",F);return ct?xt.left=xt.right:xt.right=xt.left,je(u,p,xt,S)}var N=ht(p,u.doc.direction),K=A.ch,Z=A.sticky;if(K>=p.text.length?(K=p.text.length,Z="before"):K<=0&&(K=0,Z="after"),!N)return L(Z=="before"?K-1:K,Z=="before");function pe(nt,ct,xt){var Vt=N[ct],Lt=Vt.level==1;return L(xt?nt-1:nt,Lt!=xt)}var ge=Ce(N,K,Z),Ge=St,Oe=pe(K,ge,Z=="before");return Ge!=null&&(Oe.other=pe(K,Ge,Z!="before")),Oe}function Ot(u,A){var S=0;A=it(u.doc,A),u.options.lineWrapping||(S=Vd(u.display)*A.ch);var p=Rt(u.doc,A.line),w=ja(p)+Yo(u.display);return{left:S,right:S,top:w,bottom:w+p.height}}function Ht(u,A,S,p,w){var F=M(u,A,S);return F.xRel=w,p&&(F.outside=p),F}function g0(u,A,S){var p=u.doc;if(S+=u.display.viewOffset,S<0)return Ht(p.first,0,null,-1,-1);var w=En(p,S),F=p.first+p.size-1;if(w>F)return Ht(p.first+p.size-1,Rt(p,F).text.length,null,1,1);A<0&&(A=0);for(var L=Rt(p,w);;){var N=za(u,L,w,A,S),K=gm(L,N.ch+(N.xRel>0||N.outside>0?1:0));if(!K)return N;var Z=K.find(1);if(Z.line==w)return Z;L=Rt(p,w=Z.line)}}function R0(u,A,S,p){p-=Ve(A);var w=A.text.length,F=$e(function(L){return Sa(u,S,L-1).bottom<=p},w,0);return w=$e(function(L){return Sa(u,S,L).top>p},F,w),{begin:F,end:w}}function Cn(u,A,S,p){S||(S=gl(u,A));var w=je(u,A,Sa(u,S,p),"line").top;return R0(u,A,S,w)}function Gi(u,A,S,p){return u.bottom<=S?!1:u.top>S?!0:(p?u.left:u.right)>A}function za(u,A,S,p,w){w-=ja(A);var F=gl(u,A),L=Ve(A),N=0,K=A.text.length,Z=!0,pe=ht(A,u.doc.direction);if(pe){var ge=(u.options.lineWrapping?RU:Ed)(u,A,S,F,pe,p,w);Z=ge.level!=1,N=Z?ge.from:ge.to-1,K=Z?ge.to:ge.from-1}var Ge=null,Oe=null,nt=$e(function(n0){var Qt=Sa(u,F,n0);return Qt.top+=L,Qt.bottom+=L,Gi(Qt,p,w,!1)?(Qt.top<=w&&Qt.left<=p&&(Ge=n0,Oe=Qt),!0):!1},N,K),ct,xt,Vt=!1;if(Oe){var Lt=p-Oe.left<Oe.right-p,Dt=Lt==Z;nt=Ge+(Dt?0:1),xt=Dt?"after":"before",ct=Lt?Oe.left:Oe.right}else{!Z&&(nt==K||nt==N)&&nt++,xt=nt==0?"after":nt==A.text.length?"before":Sa(u,F,nt-(Z?1:0)).bottom+L<=w==Z?"after":"before";var kt=ut(u,M(S,nt,xt),"line",A,F);ct=kt.left,Vt=w<kt.top?-1:w>=kt.bottom?1:0}return nt=ve(A.text,nt,1),Ht(S,nt,xt,Vt,p-ct)}function Ed(u,A,S,p,w,F,L){var N=$e(function(ge){var Ge=w[ge],Oe=Ge.level!=1;return Gi(ut(u,M(S,Oe?Ge.to:Ge.from,Oe?"before":"after"),"line",A,p),F,L,!0)},0,w.length-1),K=w[N];if(N>0){var Z=K.level!=1,pe=ut(u,M(S,Z?K.from:K.to,Z?"after":"before"),"line",A,p);Gi(pe,F,L,!0)&&pe.top>L&&(K=w[N-1])}return K}function RU(u,A,S,p,w,F,L){var N=R0(u,A,p,L),K=N.begin,Z=N.end;/\s/.test(A.text.charAt(Z-1))&&Z--;for(var pe=null,ge=null,Ge=0;Ge<w.length;Ge++){var Oe=w[Ge];if(!(Oe.from>=Z||Oe.to<=K)){var nt=Oe.level!=1,ct=Sa(u,p,nt?Math.min(Z,Oe.to)-1:Math.max(K,Oe.from)).right,xt=ct<F?F-ct+1e9:ct-F;(!pe||ge>xt)&&(pe=Oe,ge=xt)}}return pe||(pe=w[w.length-1]),pe.from<K&&(pe={from:K,to:pe.to,level:pe.level}),pe.to>Z&&(pe={from:pe.from,to:Z,level:pe.level}),pe}var Wu;function Cd(u){if(u.cachedTextHeight!=null)return u.cachedTextHeight;if(Wu==null){Wu=ee("pre",null,"CodeMirror-line-like");for(var A=0;A<49;++A)Wu.appendChild(document.createTextNode("x")),Wu.appendChild(ee("br"));Wu.appendChild(document.createTextNode("x"))}P(u.measure,Wu);var S=Wu.offsetHeight/50;return S>3&&(u.cachedTextHeight=S),q(u.measure),S||1}function Vd(u){if(u.cachedCharWidth!=null)return u.cachedCharWidth;var A=ee("span","xxxxxxxxxx"),S=ee("pre",[A],"CodeMirror-line-like");P(u.measure,S);var p=A.getBoundingClientRect(),w=(p.right-p.left)/10;return w>2&&(u.cachedCharWidth=w),w||10}function G2(u){for(var A=u.display,S={},p={},w=A.gutters.clientLeft,F=A.gutters.firstChild,L=0;F;F=F.nextSibling,++L){var N=u.display.gutterSpecs[L].className;S[N]=F.offsetLeft+F.clientLeft+w,p[N]=F.clientWidth}return{fixedPos:H2(A),gutterTotalWidth:A.gutters.offsetWidth,gutterLeft:S,gutterWidth:p,wrapperWidth:A.wrapper.clientWidth}}function H2(u){return u.scroller.getBoundingClientRect().left-u.sizer.getBoundingClientRect().left}function ND(u){var A=Cd(u.display),S=u.options.lineWrapping,p=S&&Math.max(5,u.display.scroller.clientWidth/Vd(u.display)-3);return function(w){if(go(u.doc,w))return 0;var F=0;if(w.widgets)for(var L=0;L<w.widgets.length;L++)w.widgets[L].height&&(F+=w.widgets[L].height);return S?F+(Math.ceil(w.text.length/p)||1)*A:F+A}}function z2(u){var A=u.doc,S=ND(u);A.iter(function(p){var w=S(p);w!=p.height&&Vr(p,w)})}function Xu(u,A,S,p){var w=u.display;if(!S&&Nr(A).getAttribute("cm-not-content")=="true")return null;var F,L,N=w.lineSpace.getBoundingClientRect();try{F=A.clientX-N.left,L=A.clientY-N.top}catch{return null}var K=g0(u,F,L),Z;if(p&&K.xRel>0&&(Z=Rt(u.doc,K.line).text).length==K.ch){var pe=We(Z,Z.length,u.options.tabSize)-Z.length;K=M(K.line,Math.max(0,Math.round((F-vd(u.display).left)/Vd(u.display))-pe))}return K}function Ku(u,A){if(A>=u.display.viewTo||(A-=u.display.viewFrom,A<0))return null;for(var S=u.display.view,p=0;p<S.length;p++)if(A-=S[p].size,A<0)return p}function Hi(u,A,S,p){A==null&&(A=u.doc.first),S==null&&(S=u.doc.first+u.doc.size),p||(p=0);var w=u.display;if(p&&S<w.viewTo&&(w.updateLineNumbers==null||w.updateLineNumbers>A)&&(w.updateLineNumbers=A),u.curOp.viewChanged=!0,A>=w.viewTo)Na&&Hu(u.doc,A)<w.viewTo&&xl(u);else if(S<=w.viewFrom)Na&&_m(u.doc,S+p)>w.viewFrom?xl(u):(w.viewFrom+=p,w.viewTo+=p);else if(A<=w.viewFrom&&S>=w.viewTo)xl(u);else if(A<=w.viewFrom){var F=Pm(u,S,S+p,1);F?(w.view=w.view.slice(F.index),w.viewFrom=F.lineN,w.viewTo+=p):xl(u)}else if(S>=w.viewTo){var L=Pm(u,A,A,-1);L?(w.view=w.view.slice(0,L.index),w.viewTo=L.lineN):xl(u)}else{var N=Pm(u,A,A,-1),K=Pm(u,S,S+p,1);N&&K?(w.view=w.view.slice(0,N.index).concat(Cs(u,N.lineN,K.lineN)).concat(w.view.slice(K.index)),w.viewTo+=p):xl(u)}var Z=w.externalMeasured;Z&&(S<Z.lineN?Z.lineN+=p:A<Z.lineN+Z.size&&(w.externalMeasured=null))}function _l(u,A,S){u.curOp.viewChanged=!0;var p=u.display,w=u.display.externalMeasured;if(w&&A>=w.lineN&&A<w.lineN+w.size&&(p.externalMeasured=null),!(A<p.viewFrom||A>=p.viewTo)){var F=p.view[Ku(u,A)];if(F.node!=null){var L=F.changes||(F.changes=[]);Ke(L,S)==-1&&L.push(S)}}}function xl(u){u.display.viewFrom=u.display.viewTo=u.doc.first,u.display.view=[],u.display.viewOffset=0}function Pm(u,A,S,p){var w=Ku(u,A),F,L=u.display.view;if(!Na||S==u.doc.first+u.doc.size)return{index:w,lineN:S};for(var N=u.display.viewFrom,K=0;K<w;K++)N+=L[K].size;if(N!=A){if(p>0){if(w==L.length-1)return null;F=N+L[w].size-A,w++}else F=N-A;A+=F,S+=F}for(;Hu(u.doc,S)!=S;){if(w==(p<0?0:L.length-1))return null;S+=p*L[w-(p<0?1:0)].size,w+=p}return{index:w,lineN:S}}function LU(u,A,S){var p=u.display,w=p.view;w.length==0||A>=p.viewTo||S<=p.viewFrom?(p.view=Cs(u,A,S),p.viewFrom=A):(p.viewFrom>A?p.view=Cs(u,A,p.viewFrom).concat(p.view):p.viewFrom<A&&(p.view=p.view.slice(Ku(u,A))),p.viewFrom=A,p.viewTo<S?p.view=p.view.concat(Cs(u,p.viewTo,S)):p.viewTo>S&&(p.view=p.view.slice(0,Ku(u,S)))),p.viewTo=S}function UD(u){for(var A=u.display.view,S=0,p=0;p<A.length;p++){var w=A[p];!w.hidden&&(!w.node||w.changes)&&++S}return S}function af(u){u.display.input.showSelection(u.display.input.prepareSelection())}function jD(u,A){A===void 0&&(A=!0);var S=u.doc,p={},w=p.cursors=document.createDocumentFragment(),F=p.selection=document.createDocumentFragment(),L=u.options.$customCursor;L&&(A=!0);for(var N=0;N<S.sel.ranges.length;N++)if(!(!A&&N==S.sel.primIndex)){var K=S.sel.ranges[N];if(!(K.from().line>=u.display.viewTo||K.to().line<u.display.viewFrom)){var Z=K.empty();if(L){var pe=L(u,K);pe&&W2(u,pe,w)}else(Z||u.options.showCursorWhenSelecting)&&W2(u,K.head,w);Z||BU(u,K,F)}}return p}function W2(u,A,S){var p=ut(u,A,"div",null,null,!u.options.singleCursorHeightPerLine),w=S.appendChild(ee("div","\xA0","CodeMirror-cursor"));if(w.style.left=p.left+"px",w.style.top=p.top+"px",w.style.height=Math.max(0,p.bottom-p.top)*u.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(u.getWrapperElement().className)){var F=ot(u,A,"div",null,null),L=F.right-F.left;w.style.width=(L>0?L:u.defaultCharWidth())+"px"}if(p.other){var N=S.appendChild(ee("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));N.style.display="",N.style.left=p.other.left+"px",N.style.top=p.other.top+"px",N.style.height=(p.other.bottom-p.other.top)*.85+"px"}}function Rm(u,A){return u.top-A.top||u.left-A.left}function BU(u,A,S){var p=u.display,w=u.doc,F=document.createDocumentFragment(),L=vd(u.display),N=L.left,K=Math.max(p.sizerWidth,Yn(u)-p.sizer.offsetLeft)-L.right,Z=w.direction=="ltr";function pe(Dt,kt,n0,Qt){kt<0&&(kt=0),kt=Math.round(kt),Qt=Math.round(Qt),F.appendChild(ee("div",null,"CodeMirror-selected","position: absolute; left: "+Dt+`px;
                             top: `+kt+"px; width: "+(n0==null?K-Dt:n0)+`px;
                             height: `+(Qt-kt)+"px"))}function ge(Dt,kt,n0){var Qt=Rt(w,Dt),F0=Qt.text.length,Sn,Hr;function qn(gr,Xi){return ot(u,M(Dt,gr),"div",Qt,Xi)}function ia(gr,Xi,$r){var Fr=Cn(u,Qt,null,gr),_r=Xi=="ltr"==($r=="after")?"left":"right",rr=$r=="after"?Fr.begin:Fr.end-(/\s/.test(Qt.text.charAt(Fr.end-1))?2:1);return qn(rr,_r)[_r]}var Wi=ht(Qt,w.direction);return gt(Wi,kt||0,n0==null?F0:n0,function(gr,Xi,$r,Fr){var _r=$r=="ltr",rr=qn(gr,_r?"left":"right"),Ki=qn(Xi-1,_r?"right":"left"),Nd=kt==null&&gr==0,Vl=n0==null&&Xi==F0,li=Fr==0,qo=!Wi||Fr==Wi.length-1;if(Ki.top-rr.top<=3){var zr=(Z?Nd:Vl)&&li,Sx=(Z?Vl:Nd)&&qo,bs=zr?N:(_r?rr:Ki).left,Zu=Sx?K:(_r?Ki:rr).right;pe(bs,rr.top,Zu-bs,rr.bottom)}else{var $u,Ci,Ud,gx;_r?($u=Z&&Nd&&li?N:rr.left,Ci=Z?K:ia(gr,$r,"before"),Ud=Z?N:ia(Xi,$r,"after"),gx=Z&&Vl&&qo?K:Ki.right):($u=Z?ia(gr,$r,"before"):N,Ci=!Z&&Nd&&li?K:rr.right,Ud=!Z&&Vl&&qo?N:Ki.left,gx=Z?ia(Xi,$r,"after"):K),pe($u,rr.top,Ci-$u,rr.bottom),rr.bottom<Ki.top&&pe(N,rr.bottom,null,Ki.top),pe(Ud,Ki.top,gx-Ud,Ki.bottom)}(!Sn||Rm(rr,Sn)<0)&&(Sn=rr),Rm(Ki,Sn)<0&&(Sn=Ki),(!Hr||Rm(rr,Hr)<0)&&(Hr=rr),Rm(Ki,Hr)<0&&(Hr=Ki)}),{start:Sn,end:Hr}}var Ge=A.from(),Oe=A.to();if(Ge.line==Oe.line)ge(Ge.line,Ge.ch,Oe.ch);else{var nt=Rt(w,Ge.line),ct=Rt(w,Oe.line),xt=na(nt)==na(ct),Vt=ge(Ge.line,Ge.ch,xt?nt.text.length+1:null).end,Lt=ge(Oe.line,xt?0:null,Oe.ch).start;xt&&(Vt.top<Lt.top-2?(pe(Vt.right,Vt.top,null,Vt.bottom),pe(N,Lt.top,Lt.left,Lt.bottom)):pe(Vt.right,Vt.top,Lt.left-Vt.right,Vt.bottom)),Vt.bottom<Lt.top&&pe(N,Vt.bottom,null,Lt.top)}S.appendChild(F)}function X2(u){if(!!u.state.focused){var A=u.display;clearInterval(A.blinker);var S=!0;A.cursorDiv.style.visibility="",u.options.cursorBlinkRate>0?A.blinker=setInterval(function(){u.hasFocus()||Dd(u),A.cursorDiv.style.visibility=(S=!S)?"":"hidden"},u.options.cursorBlinkRate):u.options.cursorBlinkRate<0&&(A.cursorDiv.style.visibility="hidden")}}function GD(u){u.hasFocus()||(u.display.input.focus(),u.state.focused||Y2(u))}function K2(u){u.state.delayingBlurEvent=!0,setTimeout(function(){u.state.delayingBlurEvent&&(u.state.delayingBlurEvent=!1,u.state.focused&&Dd(u))},100)}function Y2(u,A){u.state.delayingBlurEvent&&!u.state.draggingText&&(u.state.delayingBlurEvent=!1),u.options.readOnly!="nocursor"&&(u.state.focused||(_t(u,"focus",u,A),u.state.focused=!0,re(u.display.wrapper,"CodeMirror-focused"),!u.curOp&&u.display.selForContextMenu!=u.doc.sel&&(u.display.input.reset(),d&&setTimeout(function(){return u.display.input.reset(!0)},20)),u.display.input.receivedFocus()),X2(u))}function Dd(u,A){u.state.delayingBlurEvent||(u.state.focused&&(_t(u,"blur",u,A),u.state.focused=!1,I(u.display.wrapper,"CodeMirror-focused")),clearInterval(u.display.blinker),setTimeout(function(){u.state.focused||(u.display.shift=!1)},150))}function Lm(u){for(var A=u.display,S=A.lineDiv.offsetTop,p=Math.max(0,A.scroller.getBoundingClientRect().top),w=A.lineDiv.getBoundingClientRect().top,F=0,L=0;L<A.view.length;L++){var N=A.view[L],K=u.options.lineWrapping,Z=void 0,pe=0;if(!N.hidden){if(w+=N.line.height,l&&c<8){var ge=N.node.offsetTop+N.node.offsetHeight;Z=ge-S,S=ge}else{var Ge=N.node.getBoundingClientRect();Z=Ge.bottom-Ge.top,!K&&N.text.firstChild&&(pe=N.text.firstChild.getBoundingClientRect().right-Ge.left-1)}var Oe=N.line.height-Z;if((Oe>.005||Oe<-.005)&&(w<p&&(F-=Oe),Vr(N.line,Z),HD(N.line),N.rest))for(var nt=0;nt<N.rest.length;nt++)HD(N.rest[nt]);if(pe>u.display.sizerWidth){var ct=Math.ceil(pe/Vd(u.display));ct>u.display.maxLineLength&&(u.display.maxLineLength=ct,u.display.maxLine=N.line,u.display.maxLineChanged=!0)}}}Math.abs(F)>2&&(A.scroller.scrollTop+=F)}function HD(u){if(u.widgets)for(var A=0;A<u.widgets.length;++A){var S=u.widgets[A],p=S.node.parentNode;p&&(S.height=p.offsetHeight)}}function Bm(u,A,S){var p=S&&S.top!=null?Math.max(0,S.top):u.scroller.scrollTop;p=Math.floor(p-Yo(u));var w=S&&S.bottom!=null?S.bottom:p+u.wrapper.clientHeight,F=En(A,p),L=En(A,w);if(S&&S.ensure){var N=S.ensure.from.line,K=S.ensure.to.line;N<F?(F=N,L=En(A,ja(Rt(A,N))+u.wrapper.clientHeight)):Math.min(K,A.lastLine())>=L&&(F=En(A,ja(Rt(A,K))-u.wrapper.clientHeight),L=K)}return{from:F,to:Math.max(L,F+1)}}function MU(u,A){if(!a0(u,"scrollCursorIntoView")){var S=u.display,p=S.sizer.getBoundingClientRect(),w=null,F=S.wrapper.ownerDocument;if(A.top+p.top<0?w=!0:A.bottom+p.top>(F.defaultView.innerHeight||F.documentElement.clientHeight)&&(w=!1),w!=null&&!_){var L=ee("div","\u200B",null,`position: absolute;
                         top: `+(A.top-S.viewOffset-Yo(u.display))+`px;
                         height: `+(A.bottom-A.top+Sr(u)+S.barHeight)+`px;
                         left: `+A.left+"px; width: "+Math.max(2,A.right-A.left)+"px;");u.display.lineSpace.appendChild(L),L.scrollIntoView(w),u.display.lineSpace.removeChild(L)}}}function IU(u,A,S,p){p==null&&(p=0);var w;!u.options.lineWrapping&&A==S&&(S=A.sticky=="before"?M(A.line,A.ch+1,"before"):A,A=A.ch?M(A.line,A.sticky=="before"?A.ch-1:A.ch,"after"):A);for(var F=0;F<5;F++){var L=!1,N=ut(u,A),K=!S||S==A?N:ut(u,S);w={left:Math.min(N.left,K.left),top:Math.min(N.top,K.top)-p,right:Math.max(N.left,K.left),bottom:Math.max(N.bottom,K.bottom)+p};var Z=q2(u,w),pe=u.doc.scrollTop,ge=u.doc.scrollLeft;if(Z.scrollTop!=null&&(sf(u,Z.scrollTop),Math.abs(u.doc.scrollTop-pe)>1&&(L=!0)),Z.scrollLeft!=null&&(Yu(u,Z.scrollLeft),Math.abs(u.doc.scrollLeft-ge)>1&&(L=!0)),!L)break}return w}function OU(u,A){var S=q2(u,A);S.scrollTop!=null&&sf(u,S.scrollTop),S.scrollLeft!=null&&Yu(u,S.scrollLeft)}function q2(u,A){var S=u.display,p=Cd(u.display);A.top<0&&(A.top=0);var w=u.curOp&&u.curOp.scrollTop!=null?u.curOp.scrollTop:S.scroller.scrollTop,F=Sl(u),L={};A.bottom-A.top>F&&(A.bottom=A.top+F);var N=u.doc.height+xd(S),K=A.top<p,Z=A.bottom>N-p;if(A.top<w)L.scrollTop=K?0:A.top;else if(A.bottom>w+F){var pe=Math.min(A.top,(Z?N:A.bottom)-F);pe!=w&&(L.scrollTop=pe)}var ge=u.options.fixedGutter?0:S.gutters.offsetWidth,Ge=u.curOp&&u.curOp.scrollLeft!=null?u.curOp.scrollLeft:S.scroller.scrollLeft-ge,Oe=Yn(u)-S.gutters.offsetWidth,nt=A.right-A.left>Oe;return nt&&(A.right=A.left+Oe),A.left<10?L.scrollLeft=0:A.left<Ge?L.scrollLeft=Math.max(0,A.left+ge-(nt?0:10)):A.right>Oe+Ge-3&&(L.scrollLeft=A.right+(nt?0:10)-Oe),L}function Q2(u,A){A!=null&&(Mm(u),u.curOp.scrollTop=(u.curOp.scrollTop==null?u.doc.scrollTop:u.curOp.scrollTop)+A)}function Fd(u){Mm(u);var A=u.getCursor();u.curOp.scrollToPos={from:A,to:A,margin:u.options.cursorScrollMargin}}function of(u,A,S){(A!=null||S!=null)&&Mm(u),A!=null&&(u.curOp.scrollLeft=A),S!=null&&(u.curOp.scrollTop=S)}function kU(u,A){Mm(u),u.curOp.scrollToPos=A}function Mm(u){var A=u.curOp.scrollToPos;if(A){u.curOp.scrollToPos=null;var S=Ot(u,A.from),p=Ot(u,A.to);zD(u,S,p,A.margin)}}function zD(u,A,S,p){var w=q2(u,{left:Math.min(A.left,S.left),top:Math.min(A.top,S.top)-p,right:Math.max(A.right,S.right),bottom:Math.max(A.bottom,S.bottom)+p});of(u,w.scrollLeft,w.scrollTop)}function sf(u,A){Math.abs(u.doc.scrollTop-A)<2||(i||Z2(u,{top:A}),WD(u,A,!0),i&&Z2(u),cf(u,100))}function WD(u,A,S){A=Math.max(0,Math.min(u.display.scroller.scrollHeight-u.display.scroller.clientHeight,A)),!(u.display.scroller.scrollTop==A&&!S)&&(u.doc.scrollTop=A,u.display.scrollbars.setScrollTop(A),u.display.scroller.scrollTop!=A&&(u.display.scroller.scrollTop=A))}function Yu(u,A,S,p){A=Math.max(0,Math.min(A,u.display.scroller.scrollWidth-u.display.scroller.clientWidth)),!((S?A==u.doc.scrollLeft:Math.abs(u.doc.scrollLeft-A)<2)&&!p)&&(u.doc.scrollLeft=A,QD(u),u.display.scroller.scrollLeft!=A&&(u.display.scroller.scrollLeft=A),u.display.scrollbars.setScrollLeft(A))}function lf(u){var A=u.display,S=A.gutters.offsetWidth,p=Math.round(u.doc.height+xd(u.display));return{clientHeight:A.scroller.clientHeight,viewHeight:A.wrapper.clientHeight,scrollWidth:A.scroller.scrollWidth,clientWidth:A.scroller.clientWidth,viewWidth:A.wrapper.clientWidth,barLeft:u.options.fixedGutter?S:0,docHeight:p,scrollHeight:p+Sr(u)+A.barHeight,nativeBarWidth:A.nativeBarWidth,gutterWidth:S}}var qu=function(u,A,S){this.cm=S;var p=this.vert=ee("div",[ee("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),w=this.horiz=ee("div",[ee("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");p.tabIndex=w.tabIndex=-1,u(p),u(w),Je(p,"scroll",function(){p.clientHeight&&A(p.scrollTop,"vertical")}),Je(w,"scroll",function(){w.clientWidth&&A(w.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,l&&c<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};qu.prototype.update=function(u){var A=u.scrollWidth>u.clientWidth+1,S=u.scrollHeight>u.clientHeight+1,p=u.nativeBarWidth;if(S){this.vert.style.display="block",this.vert.style.bottom=A?p+"px":"0";var w=u.viewHeight-(A?p:0);this.vert.firstChild.style.height=Math.max(0,u.scrollHeight-u.clientHeight+w)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(A){this.horiz.style.display="block",this.horiz.style.right=S?p+"px":"0",this.horiz.style.left=u.barLeft+"px";var F=u.viewWidth-u.barLeft-(S?p:0);this.horiz.firstChild.style.width=Math.max(0,u.scrollWidth-u.clientWidth+F)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&u.clientHeight>0&&(p==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:S?p:0,bottom:A?p:0}},qu.prototype.setScrollLeft=function(u){this.horiz.scrollLeft!=u&&(this.horiz.scrollLeft=u),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},qu.prototype.setScrollTop=function(u){this.vert.scrollTop!=u&&(this.vert.scrollTop=u),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},qu.prototype.zeroWidthHack=function(){var u=V&&!E?"12px":"18px";this.horiz.style.height=this.vert.style.width=u,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new at,this.disableVert=new at},qu.prototype.enableZeroWidthBar=function(u,A,S){u.style.visibility="";function p(){var w=u.getBoundingClientRect(),F=S=="vert"?document.elementFromPoint(w.right-1,(w.top+w.bottom)/2):document.elementFromPoint((w.right+w.left)/2,w.bottom-1);F!=u?u.style.visibility="hidden":A.set(1e3,p)}A.set(1e3,p)},qu.prototype.clear=function(){var u=this.horiz.parentNode;u.removeChild(this.horiz),u.removeChild(this.vert)};var uf=function(){};uf.prototype.update=function(){return{bottom:0,right:0}},uf.prototype.setScrollLeft=function(){},uf.prototype.setScrollTop=function(){},uf.prototype.clear=function(){};function Td(u,A){A||(A=lf(u));var S=u.display.barWidth,p=u.display.barHeight;XD(u,A);for(var w=0;w<4&&S!=u.display.barWidth||p!=u.display.barHeight;w++)S!=u.display.barWidth&&u.options.lineWrapping&&Lm(u),XD(u,lf(u)),S=u.display.barWidth,p=u.display.barHeight}function XD(u,A){var S=u.display,p=S.scrollbars.update(A);S.sizer.style.paddingRight=(S.barWidth=p.right)+"px",S.sizer.style.paddingBottom=(S.barHeight=p.bottom)+"px",S.heightForcer.style.borderBottom=p.bottom+"px solid transparent",p.right&&p.bottom?(S.scrollbarFiller.style.display="block",S.scrollbarFiller.style.height=p.bottom+"px",S.scrollbarFiller.style.width=p.right+"px"):S.scrollbarFiller.style.display="",p.bottom&&u.options.coverGutterNextToScrollbar&&u.options.fixedGutter?(S.gutterFiller.style.display="block",S.gutterFiller.style.height=p.bottom+"px",S.gutterFiller.style.width=A.gutterWidth+"px"):S.gutterFiller.style.display=""}var KD={native:qu,null:uf};function YD(u){u.display.scrollbars&&(u.display.scrollbars.clear(),u.display.scrollbars.addClass&&I(u.display.wrapper,u.display.scrollbars.addClass)),u.display.scrollbars=new KD[u.options.scrollbarStyle](function(A){u.display.wrapper.insertBefore(A,u.display.scrollbarFiller),Je(A,"mousedown",function(){u.state.focused&&setTimeout(function(){return u.display.input.focus()},0)}),A.setAttribute("cm-not-content","true")},function(A,S){S=="horizontal"?Yu(u,A):sf(u,A)},u),u.display.scrollbars.addClass&&re(u.display.wrapper,u.display.scrollbars.addClass)}var NU=0;function Qu(u){u.curOp={cm:u,viewChanged:!1,startHeight:u.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++NU,markArrays:null},k2(u.curOp)}function Ju(u){var A=u.curOp;A&&Fn(A,function(S){for(var p=0;p<S.ops.length;p++)S.ops[p].cm.curOp=null;UU(S)})}function UU(u){for(var A=u.ops,S=0;S<A.length;S++)jU(A[S]);for(var p=0;p<A.length;p++)GU(A[p]);for(var w=0;w<A.length;w++)HU(A[w]);for(var F=0;F<A.length;F++)zU(A[F]);for(var L=0;L<A.length;L++)WU(A[L])}function jU(u){var A=u.cm,S=A.display;KU(A),u.updateMaxLine&&JA(A),u.mustUpdate=u.viewChanged||u.forceUpdate||u.scrollTop!=null||u.scrollToPos&&(u.scrollToPos.from.line<S.viewFrom||u.scrollToPos.to.line>=S.viewTo)||S.maxLineChanged&&A.options.lineWrapping,u.update=u.mustUpdate&&new Im(A,u.mustUpdate&&{top:u.scrollTop,ensure:u.scrollToPos},u.forceUpdate)}function GU(u){u.updatedDisplay=u.mustUpdate&&J2(u.cm,u.update)}function HU(u){var A=u.cm,S=A.display;u.updatedDisplay&&Lm(A),u.barMeasure=lf(A),S.maxLineChanged&&!A.options.lineWrapping&&(u.adjustWidthTo=rf(A,S.maxLine,S.maxLine.text.length).left+3,A.display.sizerWidth=u.adjustWidthTo,u.barMeasure.scrollWidth=Math.max(S.scroller.clientWidth,S.sizer.offsetLeft+u.adjustWidthTo+Sr(A)+A.display.barWidth),u.maxScrollLeft=Math.max(0,S.sizer.offsetLeft+u.adjustWidthTo-Yn(A))),(u.updatedDisplay||u.selectionChanged)&&(u.preparedSelection=S.input.prepareSelection())}function zU(u){var A=u.cm;u.adjustWidthTo!=null&&(A.display.sizer.style.minWidth=u.adjustWidthTo+"px",u.maxScrollLeft<A.doc.scrollLeft&&Yu(A,Math.min(A.display.scroller.scrollLeft,u.maxScrollLeft),!0),A.display.maxLineChanged=!1);var S=u.focus&&u.focus==G(be(A));u.preparedSelection&&A.display.input.showSelection(u.preparedSelection,S),(u.updatedDisplay||u.startHeight!=A.doc.height)&&Td(A,u.barMeasure),u.updatedDisplay&&ex(A,u.barMeasure),u.selectionChanged&&X2(A),A.state.focused&&u.updateInput&&A.display.input.reset(u.typing),S&&GD(u.cm)}function WU(u){var A=u.cm,S=A.display,p=A.doc;if(u.updatedDisplay&&qD(A,u.update),S.wheelStartX!=null&&(u.scrollTop!=null||u.scrollLeft!=null||u.scrollToPos)&&(S.wheelStartX=S.wheelStartY=null),u.scrollTop!=null&&WD(A,u.scrollTop,u.forceScroll),u.scrollLeft!=null&&Yu(A,u.scrollLeft,!0,!0),u.scrollToPos){var w=IU(A,it(p,u.scrollToPos.from),it(p,u.scrollToPos.to),u.scrollToPos.margin);MU(A,w)}var F=u.maybeHiddenMarkers,L=u.maybeUnhiddenMarkers;if(F)for(var N=0;N<F.length;++N)F[N].lines.length||_t(F[N],"hide");if(L)for(var K=0;K<L.length;++K)L[K].lines.length&&_t(L[K],"unhide");S.wrapper.offsetHeight&&(p.scrollTop=A.display.scroller.scrollTop),u.changeObjs&&_t(A,"changes",A,u.changeObjs),u.update&&u.update.finish()}function ra(u,A){if(u.curOp)return A();Qu(u);try{return A()}finally{Ju(u)}}function jr(u,A){return function(){if(u.curOp)return A.apply(u,arguments);Qu(u);try{return A.apply(u,arguments)}finally{Ju(u)}}}function Ei(u){return function(){if(this.curOp)return u.apply(this,arguments);Qu(this);try{return u.apply(this,arguments)}finally{Ju(this)}}}function Gr(u){return function(){var A=this.cm;if(!A||A.curOp)return u.apply(this,arguments);Qu(A);try{return u.apply(this,arguments)}finally{Ju(A)}}}function cf(u,A){u.doc.highlightFrontier<u.display.viewTo&&u.state.highlight.set(A,Te(XU,u))}function XU(u){var A=u.doc;if(!(A.highlightFrontier>=u.display.viewTo)){var S=+new Date+u.options.workTime,p=Kn(u,A.highlightFrontier),w=[];A.iter(p.line,Math.min(A.first+A.size,u.display.viewTo+500),function(F){if(p.line>=u.display.viewFrom){var L=F.styles,N=F.text.length>u.options.maxHighlightLength?mn(A.mode,p.state):null,K=qt(u,F,p,!0);N&&(p.state=N),F.styles=K.styles;var Z=F.styleClasses,pe=K.classes;pe?F.styleClasses=pe:Z&&(F.styleClasses=null);for(var ge=!L||L.length!=F.styles.length||Z!=pe&&(!Z||!pe||Z.bgClass!=pe.bgClass||Z.textClass!=pe.textClass),Ge=0;!ge&&Ge<L.length;++Ge)ge=L[Ge]!=F.styles[Ge];ge&&w.push(p.line),F.stateAfter=p.save(),p.nextLine()}else F.text.length<=u.options.maxHighlightLength&&ka(u,F.text,p),F.stateAfter=p.line%5==0?p.save():null,p.nextLine();if(+new Date>S)return cf(u,u.options.workDelay),!0}),A.highlightFrontier=p.line,A.modeFrontier=Math.max(A.modeFrontier,p.line),w.length&&ra(u,function(){for(var F=0;F<w.length;F++)_l(u,w[F],"text")})}}var Im=function(u,A,S){var p=u.display;this.viewport=A,this.visible=Bm(p,u.doc,A),this.editorIsHidden=!p.wrapper.offsetWidth,this.wrapperHeight=p.wrapper.clientHeight,this.wrapperWidth=p.wrapper.clientWidth,this.oldDisplayWidth=Yn(u),this.force=S,this.dims=G2(u),this.events=[]};Im.prototype.signal=function(u,A){M0(u,A)&&this.events.push(arguments)},Im.prototype.finish=function(){for(var u=0;u<this.events.length;u++)_t.apply(null,this.events[u])};function KU(u){var A=u.display;!A.scrollbarsClipped&&A.scroller.offsetWidth&&(A.nativeBarWidth=A.scroller.offsetWidth-A.scroller.clientWidth,A.heightForcer.style.height=Sr(u)+"px",A.sizer.style.marginBottom=-A.nativeBarWidth+"px",A.sizer.style.borderRightWidth=Sr(u)+"px",A.scrollbarsClipped=!0)}function YU(u){if(u.hasFocus())return null;var A=G(be(u));if(!A||!O(u.display.lineDiv,A))return null;var S={activeElt:A};if(window.getSelection){var p=Be(u).getSelection();p.anchorNode&&p.extend&&O(u.display.lineDiv,p.anchorNode)&&(S.anchorNode=p.anchorNode,S.anchorOffset=p.anchorOffset,S.focusNode=p.focusNode,S.focusOffset=p.focusOffset)}return S}function qU(u){if(!(!u||!u.activeElt||u.activeElt==G(u.activeElt.ownerDocument))&&(u.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(u.activeElt.nodeName)&&u.anchorNode&&O(document.body,u.anchorNode)&&O(document.body,u.focusNode))){var A=u.activeElt.ownerDocument,S=A.defaultView.getSelection(),p=A.createRange();p.setEnd(u.anchorNode,u.anchorOffset),p.collapse(!1),S.removeAllRanges(),S.addRange(p),S.extend(u.focusNode,u.focusOffset)}}function J2(u,A){var S=u.display,p=u.doc;if(A.editorIsHidden)return xl(u),!1;if(!A.force&&A.visible.from>=S.viewFrom&&A.visible.to<=S.viewTo&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo)&&S.renderedView==S.view&&UD(u)==0)return!1;JD(u)&&(xl(u),A.dims=G2(u));var w=p.first+p.size,F=Math.max(A.visible.from-u.options.viewportMargin,p.first),L=Math.min(w,A.visible.to+u.options.viewportMargin);S.viewFrom<F&&F-S.viewFrom<20&&(F=Math.max(p.first,S.viewFrom)),S.viewTo>L&&S.viewTo-L<20&&(L=Math.min(w,S.viewTo)),Na&&(F=Hu(u.doc,F),L=_m(u.doc,L));var N=F!=S.viewFrom||L!=S.viewTo||S.lastWrapHeight!=A.wrapperHeight||S.lastWrapWidth!=A.wrapperWidth;LU(u,F,L),S.viewOffset=ja(Rt(u.doc,S.viewFrom)),u.display.mover.style.top=S.viewOffset+"px";var K=UD(u);if(!N&&K==0&&!A.force&&S.renderedView==S.view&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo))return!1;var Z=YU(u);return K>4&&(S.lineDiv.style.display="none"),QU(u,S.updateLineNumbers,A.dims),K>4&&(S.lineDiv.style.display=""),S.renderedView=S.view,qU(Z),q(S.cursorDiv),q(S.selectionDiv),S.gutters.style.height=S.sizer.style.minHeight=0,N&&(S.lastWrapHeight=A.wrapperHeight,S.lastWrapWidth=A.wrapperWidth,cf(u,400)),S.updateLineNumbers=null,!0}function qD(u,A){for(var S=A.viewport,p=!0;;p=!1){if(!p||!u.options.lineWrapping||A.oldDisplayWidth==Yn(u)){if(S&&S.top!=null&&(S={top:Math.min(u.doc.height+xd(u.display)-Sl(u),S.top)}),A.visible=Bm(u.display,u.doc,S),A.visible.from>=u.display.viewFrom&&A.visible.to<=u.display.viewTo)break}else p&&(A.visible=Bm(u.display,u.doc,S));if(!J2(u,A))break;Lm(u);var w=lf(u);af(u),Td(u,w),ex(u,w),A.force=!1}A.signal(u,"update",u),(u.display.viewFrom!=u.display.reportedViewFrom||u.display.viewTo!=u.display.reportedViewTo)&&(A.signal(u,"viewportChange",u,u.display.viewFrom,u.display.viewTo),u.display.reportedViewFrom=u.display.viewFrom,u.display.reportedViewTo=u.display.viewTo)}function Z2(u,A){var S=new Im(u,A);if(J2(u,S)){Lm(u),qD(u,S);var p=lf(u);af(u),Td(u,p),ex(u,p),S.finish()}}function QU(u,A,S){var p=u.display,w=u.options.lineNumbers,F=p.lineDiv,L=F.firstChild;function N(nt){var ct=nt.nextSibling;return d&&V&&u.display.currentWheelTarget==nt?nt.style.display="none":nt.parentNode.removeChild(nt),ct}for(var K=p.view,Z=p.viewFrom,pe=0;pe<K.length;pe++){var ge=K[pe];if(!ge.hidden)if(!ge.node||ge.node.parentNode!=F){var Ge=Cm(u,ge,Z,S);F.insertBefore(Ge,L)}else{for(;L!=ge.node;)L=N(L);var Oe=w&&A!=null&&A<=Z&&ge.lineNumber;ge.changes&&(Ke(ge.changes,"gutter")>-1&&(Oe=!1),md(u,ge,Z,S)),Oe&&(q(ge.lineNumber),ge.lineNumber.appendChild(document.createTextNode(b(u.options,Z)))),L=ge.node.nextSibling}Z+=ge.size}for(;L;)L=N(L)}function $2(u){var A=u.gutters.offsetWidth;u.sizer.style.marginLeft=A+"px",ur(u,"gutterChanged",u)}function ex(u,A){u.display.sizer.style.minHeight=A.docHeight+"px",u.display.heightForcer.style.top=A.docHeight+"px",u.display.gutters.style.height=A.docHeight+u.display.barHeight+Sr(u)+"px"}function QD(u){var A=u.display,S=A.view;if(!(!A.alignWidgets&&(!A.gutters.firstChild||!u.options.fixedGutter))){for(var p=H2(A)-A.scroller.scrollLeft+u.doc.scrollLeft,w=A.gutters.offsetWidth,F=p+"px",L=0;L<S.length;L++)if(!S[L].hidden){u.options.fixedGutter&&(S[L].gutter&&(S[L].gutter.style.left=F),S[L].gutterBackground&&(S[L].gutterBackground.style.left=F));var N=S[L].alignable;if(N)for(var K=0;K<N.length;K++)N[K].style.left=F}u.options.fixedGutter&&(A.gutters.style.left=p+w+"px")}}function JD(u){if(!u.options.lineNumbers)return!1;var A=u.doc,S=b(u.options,A.first+A.size-1),p=u.display;if(S.length!=p.lineNumChars){var w=p.measure.appendChild(ee("div",[ee("div",S)],"CodeMirror-linenumber CodeMirror-gutter-elt")),F=w.firstChild.offsetWidth,L=w.offsetWidth-F;return p.lineGutter.style.width="",p.lineNumInnerWidth=Math.max(F,p.lineGutter.offsetWidth-L)+1,p.lineNumWidth=p.lineNumInnerWidth+L,p.lineNumChars=p.lineNumInnerWidth?S.length:-1,p.lineGutter.style.width=p.lineNumWidth+"px",$2(u.display),!0}return!1}function tx(u,A){for(var S=[],p=!1,w=0;w<u.length;w++){var F=u[w],L=null;if(typeof F!="string"&&(L=F.style,F=F.className),F=="CodeMirror-linenumbers")if(A)p=!0;else continue;S.push({className:F,style:L})}return A&&!p&&S.push({className:"CodeMirror-linenumbers",style:null}),S}function ZD(u){var A=u.gutters,S=u.gutterSpecs;q(A),u.lineGutter=null;for(var p=0;p<S.length;++p){var w=S[p],F=w.className,L=w.style,N=A.appendChild(ee("div",null,"CodeMirror-gutter "+F));L&&(N.style.cssText=L),F=="CodeMirror-linenumbers"&&(u.lineGutter=N,N.style.width=(u.lineNumWidth||1)+"px")}A.style.display=S.length?"":"none",$2(u)}function df(u){ZD(u.display),Hi(u),QD(u)}function JU(u,A,S,p){var w=this;this.input=S,w.scrollbarFiller=ee("div",null,"CodeMirror-scrollbar-filler"),w.scrollbarFiller.setAttribute("cm-not-content","true"),w.gutterFiller=ee("div",null,"CodeMirror-gutter-filler"),w.gutterFiller.setAttribute("cm-not-content","true"),w.lineDiv=ce("div",null,"CodeMirror-code"),w.selectionDiv=ee("div",null,null,"position: relative; z-index: 1"),w.cursorDiv=ee("div",null,"CodeMirror-cursors"),w.measure=ee("div",null,"CodeMirror-measure"),w.lineMeasure=ee("div",null,"CodeMirror-measure"),w.lineSpace=ce("div",[w.measure,w.lineMeasure,w.selectionDiv,w.cursorDiv,w.lineDiv],null,"position: relative; outline: none");var F=ce("div",[w.lineSpace],"CodeMirror-lines");w.mover=ee("div",[F],null,"position: relative"),w.sizer=ee("div",[w.mover],"CodeMirror-sizer"),w.sizerWidth=null,w.heightForcer=ee("div",null,null,"position: absolute; height: "+tt+"px; width: 1px;"),w.gutters=ee("div",null,"CodeMirror-gutters"),w.lineGutter=null,w.scroller=ee("div",[w.sizer,w.heightForcer,w.gutters],"CodeMirror-scroll"),w.scroller.setAttribute("tabIndex","-1"),w.wrapper=ee("div",[w.scrollbarFiller,w.gutterFiller,w.scroller],"CodeMirror"),w.wrapper.setAttribute("translate","no"),l&&c<8&&(w.gutters.style.zIndex=-1,w.scroller.style.paddingRight=0),!d&&!(i&&D)&&(w.scroller.draggable=!0),u&&(u.appendChild?u.appendChild(w.wrapper):u(w.wrapper)),w.viewFrom=w.viewTo=A.first,w.reportedViewFrom=w.reportedViewTo=A.first,w.view=[],w.renderedView=null,w.externalMeasured=null,w.viewOffset=0,w.lastWrapHeight=w.lastWrapWidth=0,w.updateLineNumbers=null,w.nativeBarWidth=w.barHeight=w.barWidth=0,w.scrollbarsClipped=!1,w.lineNumWidth=w.lineNumInnerWidth=w.lineNumChars=null,w.alignWidgets=!1,w.cachedCharWidth=w.cachedTextHeight=w.cachedPaddingH=null,w.maxLine=null,w.maxLineLength=0,w.maxLineChanged=!1,w.wheelDX=w.wheelDY=w.wheelStartX=w.wheelStartY=null,w.shift=!1,w.selForContextMenu=null,w.activeTouch=null,w.gutterSpecs=tx(p.gutters,p.lineNumbers),ZD(w),S.init(w)}var Om=0,Fs=null;l?Fs=-.53:i?Fs=15:f?Fs=-.7:x&&(Fs=-1/3);function $D(u){var A=u.wheelDeltaX,S=u.wheelDeltaY;return A==null&&u.detail&&u.axis==u.HORIZONTAL_AXIS&&(A=u.detail),S==null&&u.detail&&u.axis==u.VERTICAL_AXIS?S=u.detail:S==null&&(S=u.wheelDelta),{x:A,y:S}}function ZU(u){var A=$D(u);return A.x*=Fs,A.y*=Fs,A}function eF(u,A){f&&m==102&&(u.display.chromeScrollHack==null?u.display.sizer.style.pointerEvents="none":clearTimeout(u.display.chromeScrollHack),u.display.chromeScrollHack=setTimeout(function(){u.display.chromeScrollHack=null,u.display.sizer.style.pointerEvents=""},100));var S=$D(A),p=S.x,w=S.y,F=Fs;A.deltaMode===0&&(p=A.deltaX,w=A.deltaY,F=1);var L=u.display,N=L.scroller,K=N.scrollWidth>N.clientWidth,Z=N.scrollHeight>N.clientHeight;if(!!(p&&K||w&&Z)){if(w&&V&&d){e:for(var pe=A.target,ge=L.view;pe!=N;pe=pe.parentNode)for(var Ge=0;Ge<ge.length;Ge++)if(ge[Ge].node==pe){u.display.currentWheelTarget=pe;break e}}if(p&&!i&&!g&&F!=null){w&&Z&&sf(u,Math.max(0,N.scrollTop+w*F)),Yu(u,Math.max(0,N.scrollLeft+p*F)),(!w||w&&Z)&&Xn(A),L.wheelStartX=null;return}if(w&&F!=null){var Oe=w*F,nt=u.doc.scrollTop,ct=nt+L.wrapper.clientHeight;Oe<0?nt=Math.max(0,nt+Oe-50):ct=Math.min(u.doc.height,ct+Oe+50),Z2(u,{top:nt,bottom:ct})}Om<20&&A.deltaMode!==0&&(L.wheelStartX==null?(L.wheelStartX=N.scrollLeft,L.wheelStartY=N.scrollTop,L.wheelDX=p,L.wheelDY=w,setTimeout(function(){if(L.wheelStartX!=null){var xt=N.scrollLeft-L.wheelStartX,Vt=N.scrollTop-L.wheelStartY,Lt=Vt&&L.wheelDY&&Vt/L.wheelDY||xt&&L.wheelDX&&xt/L.wheelDX;L.wheelStartX=L.wheelStartY=null,Lt&&(Fs=(Fs*Om+Lt)/(Om+1),++Om)}},200)):(L.wheelDX+=p,L.wheelDY+=w))}}var ga=function(u,A){this.ranges=u,this.primIndex=A};ga.prototype.primary=function(){return this.ranges[this.primIndex]},ga.prototype.equals=function(u){if(u==this)return!0;if(u.primIndex!=this.primIndex||u.ranges.length!=this.ranges.length)return!1;for(var A=0;A<this.ranges.length;A++){var S=this.ranges[A],p=u.ranges[A];if(!Ae(S.anchor,p.anchor)||!Ae(S.head,p.head))return!1}return!0},ga.prototype.deepCopy=function(){for(var u=[],A=0;A<this.ranges.length;A++)u[A]=new Q0(xe(this.ranges[A].anchor),xe(this.ranges[A].head));return new ga(u,this.primIndex)},ga.prototype.somethingSelected=function(){for(var u=0;u<this.ranges.length;u++)if(!this.ranges[u].empty())return!0;return!1},ga.prototype.contains=function(u,A){A||(A=u);for(var S=0;S<this.ranges.length;S++){var p=this.ranges[S];if(X(A,p.from())>=0&&X(u,p.to())<=0)return S}return-1};var Q0=function(u,A){this.anchor=u,this.head=A};Q0.prototype.from=function(){return ze(this.anchor,this.head)},Q0.prototype.to=function(){return Me(this.anchor,this.head)},Q0.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function _o(u,A,S){var p=u&&u.options.selectionsMayTouch,w=A[S];A.sort(function(Ge,Oe){return X(Ge.from(),Oe.from())}),S=Ke(A,w);for(var F=1;F<A.length;F++){var L=A[F],N=A[F-1],K=X(N.to(),L.from());if(p&&!L.empty()?K>0:K>=0){var Z=ze(N.from(),L.from()),pe=Me(N.to(),L.to()),ge=N.empty()?L.from()==L.head:N.from()==N.head;F<=S&&--S,A.splice(--F,2,new Q0(ge?pe:Z,ge?Z:pe))}}return new ga(A,S)}function vl(u,A){return new ga([new Q0(u,A||u)],0)}function wl(u){return u.text?M(u.from.line+u.text.length-1,ne(u.text).length+(u.text.length==1?u.from.ch:0)):u.to}function tF(u,A){if(X(u,A.from)<0)return u;if(X(u,A.to)<=0)return wl(A);var S=u.line+A.text.length-(A.to.line-A.from.line)-1,p=u.ch;return u.line==A.to.line&&(p+=wl(A).ch-A.to.ch),M(S,p)}function nx(u,A){for(var S=[],p=0;p<u.sel.ranges.length;p++){var w=u.sel.ranges[p];S.push(new Q0(tF(w.anchor,A),tF(w.head,A)))}return _o(u.cm,S,u.sel.primIndex)}function nF(u,A,S){return u.line==A.line?M(S.line,u.ch-A.ch+S.ch):M(S.line+(u.line-A.line),u.ch)}function $U(u,A,S){for(var p=[],w=M(u.first,0),F=w,L=0;L<A.length;L++){var N=A[L],K=nF(N.from,w,F),Z=nF(wl(N),w,F);if(w=N.to,F=Z,S=="around"){var pe=u.sel.ranges[L],ge=X(pe.head,pe.anchor)<0;p[L]=new Q0(ge?Z:K,ge?K:Z)}else p[L]=new Q0(K,K)}return new ga(p,u.sel.primIndex)}function rx(u){u.doc.mode=Jr(u.options,u.doc.modeOption),Af(u)}function Af(u){u.doc.iter(function(A){A.stateAfter&&(A.stateAfter=null),A.styles&&(A.styles=null)}),u.doc.modeFrontier=u.doc.highlightFrontier=u.doc.first,cf(u,100),u.state.modeGen++,u.curOp&&Hi(u)}function rF(u,A){return A.from.ch==0&&A.to.ch==0&&ne(A.text)==""&&(!u.cm||u.cm.options.wholeLineUpdateBefore)}function ix(u,A,S,p){function w(Lt){return S?S[Lt]:null}function F(Lt,Dt,kt){pd(Lt,Dt,kt,p),ur(Lt,"change",Lt,A)}function L(Lt,Dt){for(var kt=[],n0=Lt;n0<Dt;++n0)kt.push(new ma(Z[n0],w(n0),p));return kt}var N=A.from,K=A.to,Z=A.text,pe=Rt(u,N.line),ge=Rt(u,K.line),Ge=ne(Z),Oe=w(Z.length-1),nt=K.line-N.line;if(A.full)u.insert(0,L(0,Z.length)),u.remove(Z.length,u.size-Z.length);else if(rF(u,A)){var ct=L(0,Z.length-1);F(ge,ge.text,Oe),nt&&u.remove(N.line,nt),ct.length&&u.insert(N.line,ct)}else if(pe==ge)if(Z.length==1)F(pe,pe.text.slice(0,N.ch)+Ge+pe.text.slice(K.ch),Oe);else{var xt=L(1,Z.length-1);xt.push(new ma(Ge+pe.text.slice(K.ch),Oe,p)),F(pe,pe.text.slice(0,N.ch)+Z[0],w(0)),u.insert(N.line+1,xt)}else if(Z.length==1)F(pe,pe.text.slice(0,N.ch)+Z[0]+ge.text.slice(K.ch),w(0)),u.remove(N.line+1,nt);else{F(pe,pe.text.slice(0,N.ch)+Z[0],w(0)),F(ge,Ge+ge.text.slice(K.ch),Oe);var Vt=L(1,Z.length-1);nt>1&&u.remove(N.line+1,nt-1),u.insert(N.line+1,Vt)}ur(u,"change",u,A)}function yl(u,A,S){function p(w,F,L){if(w.linked)for(var N=0;N<w.linked.length;++N){var K=w.linked[N];if(K.doc!=F){var Z=L&&K.sharedHist;S&&!Z||(A(K.doc,Z),p(K.doc,w,Z))}}}p(u,null,!0)}function iF(u,A){if(A.cm)throw new Error("This document is already in use.");u.doc=A,A.cm=u,z2(u),rx(u),aF(u),u.options.direction=A.direction,u.options.lineWrapping||JA(u),u.options.mode=A.modeOption,Hi(u)}function aF(u){(u.doc.direction=="rtl"?re:I)(u.display.lineDiv,"CodeMirror-rtl")}function ej(u){ra(u,function(){aF(u),Hi(u)})}function km(u){this.done=[],this.undone=[],this.undoDepth=u?u.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=u?u.maxGeneration:1}function ax(u,A){var S={from:xe(A.from),to:wl(A),text:Dn(u,A.from,A.to)};return lF(u,S,A.from.line,A.to.line+1),yl(u,function(p){return lF(p,S,A.from.line,A.to.line+1)},!0),S}function oF(u){for(;u.length;){var A=ne(u);if(A.ranges)u.pop();else break}}function tj(u,A){if(A)return oF(u.done),ne(u.done);if(u.done.length&&!ne(u.done).ranges)return ne(u.done);if(u.done.length>1&&!u.done[u.done.length-2].ranges)return u.done.pop(),ne(u.done)}function sF(u,A,S,p){var w=u.history;w.undone.length=0;var F=+new Date,L,N;if((w.lastOp==p||w.lastOrigin==A.origin&&A.origin&&(A.origin.charAt(0)=="+"&&w.lastModTime>F-(u.cm?u.cm.options.historyEventDelay:500)||A.origin.charAt(0)=="*"))&&(L=tj(w,w.lastOp==p)))N=ne(L.changes),X(A.from,A.to)==0&&X(A.from,N.to)==0?N.to=wl(A):L.changes.push(ax(u,A));else{var K=ne(w.done);for((!K||!K.ranges)&&Nm(u.sel,w.done),L={changes:[ax(u,A)],generation:w.generation},w.done.push(L);w.done.length>w.undoDepth;)w.done.shift(),w.done[0].ranges||w.done.shift()}w.done.push(S),w.generation=++w.maxGeneration,w.lastModTime=w.lastSelTime=F,w.lastOp=w.lastSelOp=p,w.lastOrigin=w.lastSelOrigin=A.origin,N||_t(u,"historyAdded")}function nj(u,A,S,p){var w=A.charAt(0);return w=="*"||w=="+"&&S.ranges.length==p.ranges.length&&S.somethingSelected()==p.somethingSelected()&&new Date-u.history.lastSelTime<=(u.cm?u.cm.options.historyEventDelay:500)}function rj(u,A,S,p){var w=u.history,F=p&&p.origin;S==w.lastSelOp||F&&w.lastSelOrigin==F&&(w.lastModTime==w.lastSelTime&&w.lastOrigin==F||nj(u,F,ne(w.done),A))?w.done[w.done.length-1]=A:Nm(A,w.done),w.lastSelTime=+new Date,w.lastSelOrigin=F,w.lastSelOp=S,p&&p.clearRedo!==!1&&oF(w.undone)}function Nm(u,A){var S=ne(A);S&&S.ranges&&S.equals(u)||A.push(u)}function lF(u,A,S,p){var w=A["spans_"+u.id],F=0;u.iter(Math.max(u.first,S),Math.min(u.first+u.size,p),function(L){L.markedSpans&&((w||(w=A["spans_"+u.id]={}))[F]=L.markedSpans),++F})}function ij(u){if(!u)return null;for(var A,S=0;S<u.length;++S)u[S].marker.explicitlyCleared?A||(A=u.slice(0,S)):A&&A.push(u[S]);return A?A.length?A:null:u}function aj(u,A){var S=A["spans_"+u.id];if(!S)return null;for(var p=[],w=0;w<A.text.length;++w)p.push(ij(S[w]));return p}function uF(u,A){var S=aj(u,A),p=Nn(u,A);if(!S)return p;if(!p)return S;for(var w=0;w<S.length;++w){var F=S[w],L=p[w];if(F&&L){e:for(var N=0;N<L.length;++N){for(var K=L[N],Z=0;Z<F.length;++Z)if(F[Z].marker==K.marker)continue e;F.push(K)}}else L&&(S[w]=L)}return S}function bd(u,A,S){for(var p=[],w=0;w<u.length;++w){var F=u[w];if(F.ranges){p.push(S?ga.prototype.deepCopy.call(F):F);continue}var L=F.changes,N=[];p.push({changes:N});for(var K=0;K<L.length;++K){var Z=L[K],pe=void 0;if(N.push({from:Z.from,to:Z.to,text:Z.text}),A)for(var ge in Z)(pe=ge.match(/^spans_(\d+)$/))&&Ke(A,Number(pe[1]))>-1&&(ne(N)[ge]=Z[ge],delete Z[ge])}}return p}function ox(u,A,S,p){if(p){var w=u.anchor;if(S){var F=X(A,w)<0;F!=X(S,w)<0?(w=A,A=S):F!=X(A,S)<0&&(A=S)}return new Q0(w,A)}else return new Q0(S||A,A)}function Um(u,A,S,p,w){w==null&&(w=u.cm&&(u.cm.display.shift||u.extend)),si(u,new ga([ox(u.sel.primary(),A,S,w)],0),p)}function cF(u,A,S){for(var p=[],w=u.cm&&(u.cm.display.shift||u.extend),F=0;F<u.sel.ranges.length;F++)p[F]=ox(u.sel.ranges[F],A[F],null,w);var L=_o(u.cm,p,u.sel.primIndex);si(u,L,S)}function sx(u,A,S,p){var w=u.sel.ranges.slice(0);w[A]=S,si(u,_o(u.cm,w,u.sel.primIndex),p)}function dF(u,A,S,p){si(u,vl(A,S),p)}function oj(u,A,S){var p={ranges:A.ranges,update:function(w){this.ranges=[];for(var F=0;F<w.length;F++)this.ranges[F]=new Q0(it(u,w[F].anchor),it(u,w[F].head))},origin:S&&S.origin};return _t(u,"beforeSelectionChange",u,p),u.cm&&_t(u.cm,"beforeSelectionChange",u.cm,p),p.ranges!=A.ranges?_o(u.cm,p.ranges,p.ranges.length-1):A}function AF(u,A,S){var p=u.history.done,w=ne(p);w&&w.ranges?(p[p.length-1]=A,jm(u,A,S)):si(u,A,S)}function si(u,A,S){jm(u,A,S),rj(u,u.sel,u.cm?u.cm.curOp.id:NaN,S)}function jm(u,A,S){(M0(u,"beforeSelectionChange")||u.cm&&M0(u.cm,"beforeSelectionChange"))&&(A=oj(u,A,S));var p=S&&S.bias||(X(A.primary().head,u.sel.primary().head)<0?-1:1);fF(u,pF(u,A,p,!0)),!(S&&S.scroll===!1)&&u.cm&&u.cm.getOption("readOnly")!="nocursor"&&Fd(u.cm)}function fF(u,A){A.equals(u.sel)||(u.sel=A,u.cm&&(u.cm.curOp.updateInput=1,u.cm.curOp.selectionChanged=!0,v0(u.cm)),ur(u,"cursorActivity",u))}function hF(u){fF(u,pF(u,u.sel,null,!1))}function pF(u,A,S,p){for(var w,F=0;F<A.ranges.length;F++){var L=A.ranges[F],N=A.ranges.length==u.sel.ranges.length&&u.sel.ranges[F],K=Gm(u,L.anchor,N&&N.anchor,S,p),Z=L.head==L.anchor?K:Gm(u,L.head,N&&N.head,S,p);(w||K!=L.anchor||Z!=L.head)&&(w||(w=A.ranges.slice(0,F)),w[F]=new Q0(K,Z))}return w?_o(u.cm,w,A.primIndex):A}function Pd(u,A,S,p,w){var F=Rt(u,A.line);if(F.markedSpans)for(var L=0;L<F.markedSpans.length;++L){var N=F.markedSpans[L],K=N.marker,Z="selectLeft"in K?!K.selectLeft:K.inclusiveLeft,pe="selectRight"in K?!K.selectRight:K.inclusiveRight;if((N.from==null||(Z?N.from<=A.ch:N.from<A.ch))&&(N.to==null||(pe?N.to>=A.ch:N.to>A.ch))){if(w&&(_t(K,"beforeCursorEnter"),K.explicitlyCleared))if(F.markedSpans){--L;continue}else break;if(!K.atomic)continue;if(S){var ge=K.find(p<0?1:-1),Ge=void 0;if((p<0?pe:Z)&&(ge=mF(u,ge,-p,ge&&ge.line==A.line?F:null)),ge&&ge.line==A.line&&(Ge=X(ge,S))&&(p<0?Ge<0:Ge>0))return Pd(u,ge,A,p,w)}var Oe=K.find(p<0?-1:1);return(p<0?Z:pe)&&(Oe=mF(u,Oe,p,Oe.line==A.line?F:null)),Oe?Pd(u,Oe,A,p,w):null}}return A}function Gm(u,A,S,p,w){var F=p||1,L=Pd(u,A,S,F,w)||!w&&Pd(u,A,S,F,!0)||Pd(u,A,S,-F,w)||!w&&Pd(u,A,S,-F,!0);return L||(u.cantEdit=!0,M(u.first,0))}function mF(u,A,S,p){return S<0&&A.ch==0?A.line>u.first?it(u,M(A.line-1)):null:S>0&&A.ch==(p||Rt(u,A.line)).text.length?A.line<u.first+u.size-1?M(A.line+1,0):null:new M(A.line,A.ch+S)}function SF(u){u.setSelection(M(u.firstLine(),0),M(u.lastLine()),Ie)}function gF(u,A,S){var p={canceled:!1,from:A.from,to:A.to,text:A.text,origin:A.origin,cancel:function(){return p.canceled=!0}};return S&&(p.update=function(w,F,L,N){w&&(p.from=it(u,w)),F&&(p.to=it(u,F)),L&&(p.text=L),N!==void 0&&(p.origin=N)}),_t(u,"beforeChange",u,p),u.cm&&_t(u.cm,"beforeChange",u.cm,p),p.canceled?(u.cm&&(u.cm.curOp.updateInput=2),null):{from:p.from,to:p.to,text:p.text,origin:p.origin}}function Rd(u,A,S){if(u.cm){if(!u.cm.curOp)return jr(u.cm,Rd)(u,A,S);if(u.cm.state.suppressEdits)return}if(!((M0(u,"beforeChange")||u.cm&&M0(u.cm,"beforeChange"))&&(A=gF(u,A,!0),!A))){var p=fl&&!S&&YA(u,A.from,A.to);if(p)for(var w=p.length-1;w>=0;--w)_F(u,{from:p[w].from,to:p[w].to,text:w?[""]:A.text,origin:A.origin});else _F(u,A)}}function _F(u,A){if(!(A.text.length==1&&A.text[0]==""&&X(A.from,A.to)==0)){var S=nx(u,A);sF(u,A,S,u.cm?u.cm.curOp.id:NaN),ff(u,A,S,Nn(u,A));var p=[];yl(u,function(w,F){!F&&Ke(p,w.history)==-1&&(yF(w.history,A),p.push(w.history)),ff(w,A,null,Nn(w,A))})}}function Hm(u,A,S){var p=u.cm&&u.cm.state.suppressEdits;if(!(p&&!S)){for(var w=u.history,F,L=u.sel,N=A=="undo"?w.done:w.undone,K=A=="undo"?w.undone:w.done,Z=0;Z<N.length&&(F=N[Z],!(S?F.ranges&&!F.equals(u.sel):!F.ranges));Z++);if(Z!=N.length){for(w.lastOrigin=w.lastSelOrigin=null;;)if(F=N.pop(),F.ranges){if(Nm(F,K),S&&!F.equals(u.sel)){si(u,F,{clearRedo:!1});return}L=F}else if(p){N.push(F);return}else break;var pe=[];Nm(L,K),K.push({changes:pe,generation:w.generation}),w.generation=F.generation||++w.maxGeneration;for(var ge=M0(u,"beforeChange")||u.cm&&M0(u.cm,"beforeChange"),Ge=function(ct){var xt=F.changes[ct];if(xt.origin=A,ge&&!gF(u,xt,!1))return N.length=0,{};pe.push(ax(u,xt));var Vt=ct?nx(u,xt):ne(N);ff(u,xt,Vt,uF(u,xt)),!ct&&u.cm&&u.cm.scrollIntoView({from:xt.from,to:wl(xt)});var Lt=[];yl(u,function(Dt,kt){!kt&&Ke(Lt,Dt.history)==-1&&(yF(Dt.history,xt),Lt.push(Dt.history)),ff(Dt,xt,null,uF(Dt,xt))})},Oe=F.changes.length-1;Oe>=0;--Oe){var nt=Ge(Oe);if(nt)return nt.v}}}}function xF(u,A){if(A!=0&&(u.first+=A,u.sel=new ga(fe(u.sel.ranges,function(w){return new Q0(M(w.anchor.line+A,w.anchor.ch),M(w.head.line+A,w.head.ch))}),u.sel.primIndex),u.cm)){Hi(u.cm,u.first,u.first-A,A);for(var S=u.cm.display,p=S.viewFrom;p<S.viewTo;p++)_l(u.cm,p,"gutter")}}function ff(u,A,S,p){if(u.cm&&!u.cm.curOp)return jr(u.cm,ff)(u,A,S,p);if(A.to.line<u.first){xF(u,A.text.length-1-(A.to.line-A.from.line));return}if(!(A.from.line>u.lastLine())){if(A.from.line<u.first){var w=A.text.length-1-(u.first-A.from.line);xF(u,w),A={from:M(u.first,0),to:M(A.to.line+w,A.to.ch),text:[ne(A.text)],origin:A.origin}}var F=u.lastLine();A.to.line>F&&(A={from:A.from,to:M(F,Rt(u,F).text.length),text:[A.text[0]],origin:A.origin}),A.removed=Dn(u,A.from,A.to),S||(S=nx(u,A)),u.cm?sj(u.cm,A,p):ix(u,A,p),jm(u,S,Ie),u.cantEdit&&Gm(u,M(u.firstLine(),0))&&(u.cantEdit=!1)}}function sj(u,A,S){var p=u.doc,w=u.display,F=A.from,L=A.to,N=!1,K=F.line;u.options.lineWrapping||(K=o0(na(Rt(p,F.line))),p.iter(K,L.line+1,function(Oe){if(Oe==w.maxLine)return N=!0,!0})),p.sel.contains(A.from,A.to)>-1&&v0(u),ix(p,A,S,ND(u)),u.options.lineWrapping||(p.iter(K,F.line+A.text.length,function(Oe){var nt=hd(Oe);nt>w.maxLineLength&&(w.maxLine=Oe,w.maxLineLength=nt,w.maxLineChanged=!0,N=!1)}),N&&(u.curOp.updateMaxLine=!0)),mm(p,F.line),cf(u,400);var Z=A.text.length-(L.line-F.line)-1;A.full?Hi(u):F.line==L.line&&A.text.length==1&&!rF(u.doc,A)?_l(u,F.line,"text"):Hi(u,F.line,L.line+1,Z);var pe=M0(u,"changes"),ge=M0(u,"change");if(ge||pe){var Ge={from:F,to:L,text:A.text,removed:A.removed,origin:A.origin};ge&&ur(u,"change",u,Ge),pe&&(u.curOp.changeObjs||(u.curOp.changeObjs=[])).push(Ge)}u.display.selForContextMenu=null}function Ld(u,A,S,p,w){var F;p||(p=S),X(p,S)<0&&(F=[p,S],S=F[0],p=F[1]),typeof A=="string"&&(A=u.splitLines(A)),Rd(u,{from:S,to:p,text:A,origin:w})}function vF(u,A,S,p){S<u.line?u.line+=p:A<u.line&&(u.line=A,u.ch=0)}function wF(u,A,S,p){for(var w=0;w<u.length;++w){var F=u[w],L=!0;if(F.ranges){F.copied||(F=u[w]=F.deepCopy(),F.copied=!0);for(var N=0;N<F.ranges.length;N++)vF(F.ranges[N].anchor,A,S,p),vF(F.ranges[N].head,A,S,p);continue}for(var K=0;K<F.changes.length;++K){var Z=F.changes[K];if(S<Z.from.line)Z.from=M(Z.from.line+p,Z.from.ch),Z.to=M(Z.to.line+p,Z.to.ch);else if(A<=Z.to.line){L=!1;break}}L||(u.splice(0,w+1),w=0)}}function yF(u,A){var S=A.from.line,p=A.to.line,w=A.text.length-(p-S)-1;wF(u.done,S,p,w),wF(u.undone,S,p,w)}function hf(u,A,S,p){var w=A,F=A;return typeof A=="number"?F=Rt(u,Ye(u,A)):w=o0(A),w==null?null:(p(F,w)&&u.cm&&_l(u.cm,w,S),F)}function pf(u){this.lines=u,this.parent=null;for(var A=0,S=0;S<u.length;++S)u[S].parent=this,A+=u[S].height;this.height=A}pf.prototype={chunkSize:function(){return this.lines.length},removeInner:function(u,A){for(var S=u,p=u+A;S<p;++S){var w=this.lines[S];this.height-=w.height,xm(w),ur(w,"delete")}this.lines.splice(u,A)},collapse:function(u){u.push.apply(u,this.lines)},insertInner:function(u,A,S){this.height+=S,this.lines=this.lines.slice(0,u).concat(A).concat(this.lines.slice(u));for(var p=0;p<A.length;++p)A[p].parent=this},iterN:function(u,A,S){for(var p=u+A;u<p;++u)if(S(this.lines[u]))return!0}};function mf(u){this.children=u;for(var A=0,S=0,p=0;p<u.length;++p){var w=u[p];A+=w.chunkSize(),S+=w.height,w.parent=this}this.size=A,this.height=S,this.parent=null}mf.prototype={chunkSize:function(){return this.size},removeInner:function(u,A){this.size-=A;for(var S=0;S<this.children.length;++S){var p=this.children[S],w=p.chunkSize();if(u<w){var F=Math.min(A,w-u),L=p.height;if(p.removeInner(u,F),this.height-=L-p.height,w==F&&(this.children.splice(S--,1),p.parent=null),(A-=F)==0)break;u=0}else u-=w}if(this.size-A<25&&(this.children.length>1||!(this.children[0]instanceof pf))){var N=[];this.collapse(N),this.children=[new pf(N)],this.children[0].parent=this}},collapse:function(u){for(var A=0;A<this.children.length;++A)this.children[A].collapse(u)},insertInner:function(u,A,S){this.size+=A.length,this.height+=S;for(var p=0;p<this.children.length;++p){var w=this.children[p],F=w.chunkSize();if(u<=F){if(w.insertInner(u,A,S),w.lines&&w.lines.length>50){for(var L=w.lines.length%25+25,N=L;N<w.lines.length;){var K=new pf(w.lines.slice(N,N+=25));w.height-=K.height,this.children.splice(++p,0,K),K.parent=this}w.lines=w.lines.slice(0,L),this.maybeSpill()}break}u-=F}},maybeSpill:function(){if(!(this.children.length<=10)){var u=this;do{var A=u.children.splice(u.children.length-5,5),S=new mf(A);if(u.parent){u.size-=S.size,u.height-=S.height;var w=Ke(u.parent.children,u);u.parent.children.splice(w+1,0,S)}else{var p=new mf(u.children);p.parent=u,u.children=[p,S],u=p}S.parent=u.parent}while(u.children.length>10);u.parent.maybeSpill()}},iterN:function(u,A,S){for(var p=0;p<this.children.length;++p){var w=this.children[p],F=w.chunkSize();if(u<F){var L=Math.min(A,F-u);if(w.iterN(u,L,S))return!0;if((A-=L)==0)break;u=0}else u-=F}}};var Sf=function(u,A,S){if(S)for(var p in S)S.hasOwnProperty(p)&&(this[p]=S[p]);this.doc=u,this.node=A};Sf.prototype.clear=function(){var u=this.doc.cm,A=this.line.widgets,S=this.line,p=o0(S);if(!(p==null||!A)){for(var w=0;w<A.length;++w)A[w]==this&&A.splice(w--,1);A.length||(S.widgets=null);var F=ml(this);Vr(S,Math.max(0,S.height-F)),u&&(ra(u,function(){EF(u,S,-F),_l(u,p,"widget")}),ur(u,"lineWidgetCleared",u,this,p))}},Sf.prototype.changed=function(){var u=this,A=this.height,S=this.doc.cm,p=this.line;this.height=null;var w=ml(this)-A;!w||(go(this.doc,p)||Vr(p,p.height+w),S&&ra(S,function(){S.curOp.forceUpdate=!0,EF(S,p,w),ur(S,"lineWidgetChanged",S,u,o0(p))}))},Vn(Sf);function EF(u,A,S){ja(A)<(u.curOp&&u.curOp.scrollTop||u.doc.scrollTop)&&Q2(u,S)}function lj(u,A,S,p){var w=new Sf(u,S,p),F=u.cm;return F&&w.noHScroll&&(F.display.alignWidgets=!0),hf(u,A,"widget",function(L){var N=L.widgets||(L.widgets=[]);if(w.insertAt==null?N.push(w):N.splice(Math.min(N.length,Math.max(0,w.insertAt)),0,w),w.line=L,F&&!go(u,L)){var K=ja(L)<u.scrollTop;Vr(L,L.height+ml(w)),K&&Q2(F,w.height),F.curOp.forceUpdate=!0}return!0}),F&&ur(F,"lineWidgetAdded",F,w,typeof A=="number"?A:o0(A)),w}var CF=0,El=function(u,A){this.lines=[],this.type=A,this.doc=u,this.id=++CF};El.prototype.clear=function(){if(!this.explicitlyCleared){var u=this.doc.cm,A=u&&!u.curOp;if(A&&Qu(u),M0(this,"clear")){var S=this.find();S&&ur(this,"clear",S.from,S.to)}for(var p=null,w=null,F=0;F<this.lines.length;++F){var L=this.lines[F],N=Ua(L.markedSpans,this);u&&!this.collapsed?_l(u,o0(L),"text"):u&&(N.to!=null&&(w=o0(L)),N.from!=null&&(p=o0(L))),L.markedSpans=Sm(L.markedSpans,N),N.from==null&&this.collapsed&&!go(this.doc,L)&&u&&Vr(L,Cd(u.display))}if(u&&this.collapsed&&!u.options.lineWrapping)for(var K=0;K<this.lines.length;++K){var Z=na(this.lines[K]),pe=hd(Z);pe>u.display.maxLineLength&&(u.display.maxLine=Z,u.display.maxLineLength=pe,u.display.maxLineChanged=!0)}p!=null&&u&&this.collapsed&&Hi(u,p,w+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,u&&hF(u.doc)),u&&ur(u,"markerCleared",u,this,p,w),A&&Ju(u),this.parent&&this.parent.clear()}},El.prototype.find=function(u,A){u==null&&this.type=="bookmark"&&(u=1);for(var S,p,w=0;w<this.lines.length;++w){var F=this.lines[w],L=Ua(F.markedSpans,this);if(L.from!=null&&(S=M(A?F:o0(F),L.from),u==-1))return S;if(L.to!=null&&(p=M(A?F:o0(F),L.to),u==1))return p}return S&&{from:S,to:p}},El.prototype.changed=function(){var u=this,A=this.find(-1,!0),S=this,p=this.doc.cm;!A||!p||ra(p,function(){var w=A.line,F=o0(A.line),L=yd(p,F);if(L&&(T(L),p.curOp.selectionChanged=p.curOp.forceUpdate=!0),p.curOp.updateMaxLine=!0,!go(S.doc,w)&&S.height!=null){var N=S.height;S.height=null;var K=ml(S)-N;K&&Vr(w,w.height+K)}ur(p,"markerChanged",p,u)})},El.prototype.attachLine=function(u){if(!this.lines.length&&this.doc.cm){var A=this.doc.cm.curOp;(!A.maybeHiddenMarkers||Ke(A.maybeHiddenMarkers,this)==-1)&&(A.maybeUnhiddenMarkers||(A.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(u)},El.prototype.detachLine=function(u){if(this.lines.splice(Ke(this.lines,u),1),!this.lines.length&&this.doc.cm){var A=this.doc.cm.curOp;(A.maybeHiddenMarkers||(A.maybeHiddenMarkers=[])).push(this)}},Vn(El);function Bd(u,A,S,p,w){if(p&&p.shared)return uj(u,A,S,p,w);if(u.cm&&!u.cm.curOp)return jr(u.cm,Bd)(u,A,S,p,w);var F=new El(u,w),L=X(A,S);if(p&&ye(p,F,!1),L>0||L==0&&F.clearWhenEmpty!==!1)return F;if(F.replacedWith&&(F.collapsed=!0,F.widgetNode=ce("span",[F.replacedWith],"CodeMirror-widget"),p.handleMouseEvents||F.widgetNode.setAttribute("cm-ignore-events","true"),p.insertLeft&&(F.widgetNode.insertLeft=!0)),F.collapsed){if(fd(u,A.line,A,S,F)||A.line!=S.line&&fd(u,S.line,A,S,F))throw new Error("Inserting collapsed marker partially overlapping an existing one");M2()}F.addToHistory&&sF(u,{from:A,to:S,origin:"markText"},u.sel,NaN);var N=A.line,K=u.cm,Z;if(u.iter(N,S.line+1,function(ge){K&&F.collapsed&&!K.options.lineWrapping&&na(ge)==K.display.maxLine&&(Z=!0),F.collapsed&&N!=A.line&&Vr(ge,0),Xo(ge,new hl(F,N==A.line?A.ch:null,N==S.line?S.ch:null),u.cm&&u.cm.curOp),++N}),F.collapsed&&u.iter(A.line,S.line+1,function(ge){go(u,ge)&&Vr(ge,0)}),F.clearOnEnter&&Je(F,"beforeCursorEnter",function(){return F.clear()}),F.readOnly&&(XA(),(u.history.done.length||u.history.undone.length)&&u.clearHistory()),F.collapsed&&(F.id=++CF,F.atomic=!0),K){if(Z&&(K.curOp.updateMaxLine=!0),F.collapsed)Hi(K,A.line,S.line+1);else if(F.className||F.startStyle||F.endStyle||F.css||F.attributes||F.title)for(var pe=A.line;pe<=S.line;pe++)_l(K,pe,"text");F.atomic&&hF(K.doc),ur(K,"markerAdded",K,F)}return F}var gf=function(u,A){this.markers=u,this.primary=A;for(var S=0;S<u.length;++S)u[S].parent=this};gf.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var u=0;u<this.markers.length;++u)this.markers[u].clear();ur(this,"clear")}},gf.prototype.find=function(u,A){return this.primary.find(u,A)},Vn(gf);function uj(u,A,S,p,w){p=ye(p),p.shared=!1;var F=[Bd(u,A,S,p,w)],L=F[0],N=p.widgetNode;return yl(u,function(K){N&&(p.widgetNode=N.cloneNode(!0)),F.push(Bd(K,it(K,A),it(K,S),p,w));for(var Z=0;Z<K.linked.length;++Z)if(K.linked[Z].isParent)return;L=ne(F)}),new gf(F,L)}function VF(u){return u.findMarks(M(u.first,0),u.clipPos(M(u.lastLine())),function(A){return A.parent})}function cj(u,A){for(var S=0;S<A.length;S++){var p=A[S],w=p.find(),F=u.clipPos(w.from),L=u.clipPos(w.to);if(X(F,L)){var N=Bd(u,F,L,p.primary,p.primary.type);p.markers.push(N),N.parent=p}}}function dj(u){for(var A=function(p){var w=u[p],F=[w.primary.doc];yl(w.primary.doc,function(K){return F.push(K)});for(var L=0;L<w.markers.length;L++){var N=w.markers[L];Ke(F,N.doc)==-1&&(N.parent=null,w.markers.splice(L--,1))}},S=0;S<u.length;S++)A(S)}var Aj=0,zi=function(u,A,S,p,w){if(!(this instanceof zi))return new zi(u,A,S,p,w);S==null&&(S=0),mf.call(this,[new pf([new ma("",null)])]),this.first=S,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=S;var F=M(S,0);this.sel=vl(F),this.history=new km(null),this.id=++Aj,this.modeOption=A,this.lineSep=p,this.direction=w=="rtl"?"rtl":"ltr",this.extend=!1,typeof u=="string"&&(u=this.splitLines(u)),ix(this,{from:F,to:F,text:u}),si(this,vl(F),Ie)};zi.prototype=Y(mf.prototype,{constructor:zi,iter:function(u,A,S){S?this.iterN(u-this.first,A-u,S):this.iterN(this.first,this.first+this.size,u)},insert:function(u,A){for(var S=0,p=0;p<A.length;++p)S+=A[p].height;this.insertInner(u-this.first,A,S)},remove:function(u,A){this.removeInner(u-this.first,A)},getValue:function(u){var A=vi(this,this.first,this.first+this.size);return u===!1?A:A.join(u||this.lineSeparator())},setValue:Gr(function(u){var A=M(this.first,0),S=this.first+this.size-1;Rd(this,{from:A,to:M(S,Rt(this,S).text.length),text:this.splitLines(u),origin:"setValue",full:!0},!0),this.cm&&of(this.cm,0,0),si(this,vl(A),Ie)}),replaceRange:function(u,A,S,p){A=it(this,A),S=S?it(this,S):A,Ld(this,u,A,S,p)},getRange:function(u,A,S){var p=Dn(this,it(this,u),it(this,A));return S===!1?p:S===""?p.join(""):p.join(S||this.lineSeparator())},getLine:function(u){var A=this.getLineHandle(u);return A&&A.text},getLineHandle:function(u){if(Ni(this,u))return Rt(this,u)},getLineNumber:function(u){return o0(u)},getLineHandleVisualStart:function(u){return typeof u=="number"&&(u=Rt(this,u)),na(u)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(u){return it(this,u)},getCursor:function(u){var A=this.sel.primary(),S;return u==null||u=="head"?S=A.head:u=="anchor"?S=A.anchor:u=="end"||u=="to"||u===!1?S=A.to():S=A.from(),S},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Gr(function(u,A,S){dF(this,it(this,typeof u=="number"?M(u,A||0):u),null,S)}),setSelection:Gr(function(u,A,S){dF(this,it(this,u),it(this,A||u),S)}),extendSelection:Gr(function(u,A,S){Um(this,it(this,u),A&&it(this,A),S)}),extendSelections:Gr(function(u,A){cF(this,Zt(this,u),A)}),extendSelectionsBy:Gr(function(u,A){var S=fe(this.sel.ranges,u);cF(this,Zt(this,S),A)}),setSelections:Gr(function(u,A,S){if(!!u.length){for(var p=[],w=0;w<u.length;w++)p[w]=new Q0(it(this,u[w].anchor),it(this,u[w].head||u[w].anchor));A==null&&(A=Math.min(u.length-1,this.sel.primIndex)),si(this,_o(this.cm,p,A),S)}}),addSelection:Gr(function(u,A,S){var p=this.sel.ranges.slice(0);p.push(new Q0(it(this,u),it(this,A||u))),si(this,_o(this.cm,p,p.length-1),S)}),getSelection:function(u){for(var A=this.sel.ranges,S,p=0;p<A.length;p++){var w=Dn(this,A[p].from(),A[p].to());S=S?S.concat(w):w}return u===!1?S:S.join(u||this.lineSeparator())},getSelections:function(u){for(var A=[],S=this.sel.ranges,p=0;p<S.length;p++){var w=Dn(this,S[p].from(),S[p].to());u!==!1&&(w=w.join(u||this.lineSeparator())),A[p]=w}return A},replaceSelection:function(u,A,S){for(var p=[],w=0;w<this.sel.ranges.length;w++)p[w]=u;this.replaceSelections(p,A,S||"+input")},replaceSelections:Gr(function(u,A,S){for(var p=[],w=this.sel,F=0;F<w.ranges.length;F++){var L=w.ranges[F];p[F]={from:L.from(),to:L.to(),text:this.splitLines(u[F]),origin:S}}for(var N=A&&A!="end"&&$U(this,p,A),K=p.length-1;K>=0;K--)Rd(this,p[K]);N?AF(this,N):this.cm&&Fd(this.cm)}),undo:Gr(function(){Hm(this,"undo")}),redo:Gr(function(){Hm(this,"redo")}),undoSelection:Gr(function(){Hm(this,"undo",!0)}),redoSelection:Gr(function(){Hm(this,"redo",!0)}),setExtending:function(u){this.extend=u},getExtending:function(){return this.extend},historySize:function(){for(var u=this.history,A=0,S=0,p=0;p<u.done.length;p++)u.done[p].ranges||++A;for(var w=0;w<u.undone.length;w++)u.undone[w].ranges||++S;return{undo:A,redo:S}},clearHistory:function(){var u=this;this.history=new km(this.history),yl(this,function(A){return A.history=u.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(u){return u&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(u){return this.history.generation==(u||this.cleanGeneration)},getHistory:function(){return{done:bd(this.history.done),undone:bd(this.history.undone)}},setHistory:function(u){var A=this.history=new km(this.history);A.done=bd(u.done.slice(0),null,!0),A.undone=bd(u.undone.slice(0),null,!0)},setGutterMarker:Gr(function(u,A,S){return hf(this,u,"gutter",function(p){var w=p.gutterMarkers||(p.gutterMarkers={});return w[A]=S,!S&&Re(w)&&(p.gutterMarkers=null),!0})}),clearGutter:Gr(function(u){var A=this;this.iter(function(S){S.gutterMarkers&&S.gutterMarkers[u]&&hf(A,S,"gutter",function(){return S.gutterMarkers[u]=null,Re(S.gutterMarkers)&&(S.gutterMarkers=null),!0})})}),lineInfo:function(u){var A;if(typeof u=="number"){if(!Ni(this,u)||(A=u,u=Rt(this,u),!u))return null}else if(A=o0(u),A==null)return null;return{line:A,handle:u,text:u.text,gutterMarkers:u.gutterMarkers,textClass:u.textClass,bgClass:u.bgClass,wrapClass:u.wrapClass,widgets:u.widgets}},addLineClass:Gr(function(u,A,S){return hf(this,u,A=="gutter"?"gutter":"class",function(p){var w=A=="text"?"textClass":A=="background"?"bgClass":A=="gutter"?"gutterClass":"wrapClass";if(!p[w])p[w]=S;else{if(z(S).test(p[w]))return!1;p[w]+=" "+S}return!0})}),removeLineClass:Gr(function(u,A,S){return hf(this,u,A=="gutter"?"gutter":"class",function(p){var w=A=="text"?"textClass":A=="background"?"bgClass":A=="gutter"?"gutterClass":"wrapClass",F=p[w];if(F)if(S==null)p[w]=null;else{var L=F.match(z(S));if(!L)return!1;var N=L.index+L[0].length;p[w]=F.slice(0,L.index)+(!L.index||N==F.length?"":" ")+F.slice(N)||null}else return!1;return!0})}),addLineWidget:Gr(function(u,A,S){return lj(this,u,A,S)}),removeLineWidget:function(u){u.clear()},markText:function(u,A,S){return Bd(this,it(this,u),it(this,A),S,S&&S.type||"range")},setBookmark:function(u,A){var S={replacedWith:A&&(A.nodeType==null?A.widget:A),insertLeft:A&&A.insertLeft,clearWhenEmpty:!1,shared:A&&A.shared,handleMouseEvents:A&&A.handleMouseEvents};return u=it(this,u),Bd(this,u,u,S,"bookmark")},findMarksAt:function(u){u=it(this,u);var A=[],S=Rt(this,u.line).markedSpans;if(S)for(var p=0;p<S.length;++p){var w=S[p];(w.from==null||w.from<=u.ch)&&(w.to==null||w.to>=u.ch)&&A.push(w.marker.parent||w.marker)}return A},findMarks:function(u,A,S){u=it(this,u),A=it(this,A);var p=[],w=u.line;return this.iter(u.line,A.line+1,function(F){var L=F.markedSpans;if(L)for(var N=0;N<L.length;N++){var K=L[N];!(K.to!=null&&w==u.line&&u.ch>=K.to||K.from==null&&w!=u.line||K.from!=null&&w==A.line&&K.from>=A.ch)&&(!S||S(K.marker))&&p.push(K.marker.parent||K.marker)}++w}),p},getAllMarks:function(){var u=[];return this.iter(function(A){var S=A.markedSpans;if(S)for(var p=0;p<S.length;++p)S[p].from!=null&&u.push(S[p].marker)}),u},posFromIndex:function(u){var A,S=this.first,p=this.lineSeparator().length;return this.iter(function(w){var F=w.text.length+p;if(F>u)return A=u,!0;u-=F,++S}),it(this,M(S,A))},indexFromPos:function(u){u=it(this,u);var A=u.ch;if(u.line<this.first||u.ch<0)return 0;var S=this.lineSeparator().length;return this.iter(this.first,u.line,function(p){A+=p.text.length+S}),A},copy:function(u){var A=new zi(vi(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return A.scrollTop=this.scrollTop,A.scrollLeft=this.scrollLeft,A.sel=this.sel,A.extend=!1,u&&(A.history.undoDepth=this.history.undoDepth,A.setHistory(this.getHistory())),A},linkedDoc:function(u){u||(u={});var A=this.first,S=this.first+this.size;u.from!=null&&u.from>A&&(A=u.from),u.to!=null&&u.to<S&&(S=u.to);var p=new zi(vi(this,A,S),u.mode||this.modeOption,A,this.lineSep,this.direction);return u.sharedHist&&(p.history=this.history),(this.linked||(this.linked=[])).push({doc:p,sharedHist:u.sharedHist}),p.linked=[{doc:this,isParent:!0,sharedHist:u.sharedHist}],cj(p,VF(this)),p},unlinkDoc:function(u){if(u instanceof Un&&(u=u.doc),this.linked)for(var A=0;A<this.linked.length;++A){var S=this.linked[A];if(S.doc==u){this.linked.splice(A,1),u.unlinkDoc(this),dj(VF(this));break}}if(u.history==this.history){var p=[u.id];yl(u,function(w){return p.push(w.id)},!0),u.history=new km(null),u.history.done=bd(this.history.done,p),u.history.undone=bd(this.history.undone,p)}},iterLinkedDocs:function(u){yl(this,u)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(u){return this.lineSep?u.split(this.lineSep):Ze(u)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Gr(function(u){u!="rtl"&&(u="ltr"),u!=this.direction&&(this.direction=u,this.iter(function(A){return A.order=null}),this.cm&&ej(this.cm))})}),zi.prototype.eachLine=zi.prototype.iter;var DF=0;function fj(u){var A=this;if(FF(A),!(a0(A,u)||yi(A.display,u))){Xn(u),l&&(DF=+new Date);var S=Xu(A,u,!0),p=u.dataTransfer.files;if(!(!S||A.isReadOnly()))if(p&&p.length&&window.FileReader&&window.File)for(var w=p.length,F=Array(w),L=0,N=function(){++L==w&&jr(A,function(){S=it(A.doc,S);var Oe={from:S,to:S,text:A.doc.splitLines(F.filter(function(nt){return nt!=null}).join(A.doc.lineSeparator())),origin:"paste"};Rd(A.doc,Oe),AF(A.doc,vl(it(A.doc,S),it(A.doc,wl(Oe))))})()},K=function(Oe,nt){if(A.options.allowDropFileTypes&&Ke(A.options.allowDropFileTypes,Oe.type)==-1){N();return}var ct=new FileReader;ct.onerror=function(){return N()},ct.onload=function(){var xt=ct.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(xt)){N();return}F[nt]=xt,N()},ct.readAsText(Oe)},Z=0;Z<p.length;Z++)K(p[Z],Z);else{if(A.state.draggingText&&A.doc.sel.contains(S)>-1){A.state.draggingText(u),setTimeout(function(){return A.display.input.focus()},20);return}try{var pe=u.dataTransfer.getData("Text");if(pe){var ge;if(A.state.draggingText&&!A.state.draggingText.copy&&(ge=A.listSelections()),jm(A.doc,vl(S,S)),ge)for(var Ge=0;Ge<ge.length;++Ge)Ld(A.doc,"",ge[Ge].anchor,ge[Ge].head,"drag");A.replaceSelection(pe,"around","paste"),A.display.input.focus()}}catch{}}}}function hj(u,A){if(l&&(!u.state.draggingText||+new Date-DF<100)){$t(A);return}if(!(a0(u,A)||yi(u.display,A))&&(A.dataTransfer.setData("Text",u.getSelection()),A.dataTransfer.effectAllowed="copyMove",A.dataTransfer.setDragImage&&!x)){var S=ee("img",null,null,"position: fixed; left: 0; top: 0;");S.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",g&&(S.width=S.height=1,u.display.wrapper.appendChild(S),S._top=S.offsetTop),A.dataTransfer.setDragImage(S,0,0),g&&S.parentNode.removeChild(S)}}function pj(u,A){var S=Xu(u,A);if(!!S){var p=document.createDocumentFragment();W2(u,S,p),u.display.dragCursor||(u.display.dragCursor=ee("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),u.display.lineSpace.insertBefore(u.display.dragCursor,u.display.cursorDiv)),P(u.display.dragCursor,p)}}function FF(u){u.display.dragCursor&&(u.display.lineSpace.removeChild(u.display.dragCursor),u.display.dragCursor=null)}function TF(u){if(!!document.getElementsByClassName){for(var A=document.getElementsByClassName("CodeMirror"),S=[],p=0;p<A.length;p++){var w=A[p].CodeMirror;w&&S.push(w)}S.length&&S[0].operation(function(){for(var F=0;F<S.length;F++)u(S[F])})}}var bF=!1;function mj(){bF||(Sj(),bF=!0)}function Sj(){var u;Je(window,"resize",function(){u==null&&(u=setTimeout(function(){u=null,TF(gj)},100))}),Je(window,"blur",function(){return TF(Dd)})}function gj(u){var A=u.display;A.cachedCharWidth=A.cachedTextHeight=A.cachedPaddingH=null,A.scrollbarsClipped=!1,u.setSize()}for(var Cl={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},_f=0;_f<10;_f++)Cl[_f+48]=Cl[_f+96]=String(_f);for(var zm=65;zm<=90;zm++)Cl[zm]=String.fromCharCode(zm);for(var xf=1;xf<=12;xf++)Cl[xf+111]=Cl[xf+63235]="F"+xf;var Ts={};Ts.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ts.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ts.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ts.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ts.default=V?Ts.macDefault:Ts.pcDefault;function _j(u){var A=u.split(/-(?!$)/);u=A[A.length-1];for(var S,p,w,F,L=0;L<A.length-1;L++){var N=A[L];if(/^(cmd|meta|m)$/i.test(N))F=!0;else if(/^a(lt)?$/i.test(N))S=!0;else if(/^(c|ctrl|control)$/i.test(N))p=!0;else if(/^s(hift)?$/i.test(N))w=!0;else throw new Error("Unrecognized modifier name: "+N)}return S&&(u="Alt-"+u),p&&(u="Ctrl-"+u),F&&(u="Cmd-"+u),w&&(u="Shift-"+u),u}function xj(u){var A={};for(var S in u)if(u.hasOwnProperty(S)){var p=u[S];if(/^(name|fallthrough|(de|at)tach)$/.test(S))continue;if(p=="..."){delete u[S];continue}for(var w=fe(S.split(" "),_j),F=0;F<w.length;F++){var L=void 0,N=void 0;F==w.length-1?(N=w.join(" "),L=p):(N=w.slice(0,F+1).join(" "),L="...");var K=A[N];if(!K)A[N]=L;else if(K!=L)throw new Error("Inconsistent bindings for "+N)}delete u[S]}for(var Z in A)u[Z]=A[Z];return u}function Md(u,A,S,p){A=Wm(A);var w=A.call?A.call(u,p):A[u];if(w===!1)return"nothing";if(w==="...")return"multi";if(w!=null&&S(w))return"handled";if(A.fallthrough){if(Object.prototype.toString.call(A.fallthrough)!="[object Array]")return Md(u,A.fallthrough,S,p);for(var F=0;F<A.fallthrough.length;F++){var L=Md(u,A.fallthrough[F],S,p);if(L)return L}}}function PF(u){var A=typeof u=="string"?u:Cl[u.keyCode];return A=="Ctrl"||A=="Alt"||A=="Shift"||A=="Mod"}function RF(u,A,S){var p=u;return A.altKey&&p!="Alt"&&(u="Alt-"+u),(te?A.metaKey:A.ctrlKey)&&p!="Ctrl"&&(u="Ctrl-"+u),(te?A.ctrlKey:A.metaKey)&&p!="Mod"&&(u="Cmd-"+u),!S&&A.shiftKey&&p!="Shift"&&(u="Shift-"+u),u}function LF(u,A){if(g&&u.keyCode==34&&u.char)return!1;var S=Cl[u.keyCode];return S==null||u.altGraphKey?!1:(u.keyCode==3&&u.code&&(S=u.code),RF(S,u,A))}function Wm(u){return typeof u=="string"?Ts[u]:u}function Id(u,A){for(var S=u.doc.sel.ranges,p=[],w=0;w<S.length;w++){for(var F=A(S[w]);p.length&&X(F.from,ne(p).to)<=0;){var L=p.pop();if(X(L.from,F.from)<0){F.from=L.from;break}}p.push(F)}ra(u,function(){for(var N=p.length-1;N>=0;N--)Ld(u.doc,"",p[N].from,p[N].to,"+delete");Fd(u)})}function lx(u,A,S){var p=ve(u.text,A+S,S);return p<0||p>u.text.length?null:p}function ux(u,A,S){var p=lx(u,A.ch,S);return p==null?null:new M(A.line,p,S<0?"after":"before")}function cx(u,A,S,p,w){if(u){A.doc.direction=="rtl"&&(w=-w);var F=ht(S,A.doc.direction);if(F){var L=w<0?ne(F):F[0],N=w<0==(L.level==1),K=N?"after":"before",Z;if(L.level>0||A.doc.direction=="rtl"){var pe=gl(A,S);Z=w<0?S.text.length-1:0;var ge=Sa(A,pe,Z).top;Z=$e(function(Ge){return Sa(A,pe,Ge).top==ge},w<0==(L.level==1)?L.from:L.to-1,Z),K=="before"&&(Z=lx(S,Z,1))}else Z=w<0?L.to:L.from;return new M(p,Z,K)}}return new M(p,w<0?S.text.length:0,w<0?"before":"after")}function vj(u,A,S,p){var w=ht(A,u.doc.direction);if(!w)return ux(A,S,p);S.ch>=A.text.length?(S.ch=A.text.length,S.sticky="before"):S.ch<=0&&(S.ch=0,S.sticky="after");var F=Ce(w,S.ch,S.sticky),L=w[F];if(u.doc.direction=="ltr"&&L.level%2==0&&(p>0?L.to>S.ch:L.from<S.ch))return ux(A,S,p);var N=function(Vt,Lt){return lx(A,Vt instanceof M?Vt.ch:Vt,Lt)},K,Z=function(Vt){return u.options.lineWrapping?(K=K||gl(u,A),Cn(u,A,K,Vt)):{begin:0,end:A.text.length}},pe=Z(S.sticky=="before"?N(S,-1):S.ch);if(u.doc.direction=="rtl"||L.level==1){var ge=L.level==1==p<0,Ge=N(S,ge?1:-1);if(Ge!=null&&(ge?Ge<=L.to&&Ge<=pe.end:Ge>=L.from&&Ge>=pe.begin)){var Oe=ge?"before":"after";return new M(S.line,Ge,Oe)}}var nt=function(Vt,Lt,Dt){for(var kt=function(Sn,Hr){return Hr?new M(S.line,N(Sn,1),"before"):new M(S.line,Sn,"after")};Vt>=0&&Vt<w.length;Vt+=Lt){var n0=w[Vt],Qt=Lt>0==(n0.level!=1),F0=Qt?Dt.begin:N(Dt.end,-1);if(n0.from<=F0&&F0<n0.to||(F0=Qt?n0.from:N(n0.to,-1),Dt.begin<=F0&&F0<Dt.end))return kt(F0,Qt)}},ct=nt(F+p,p,pe);if(ct)return ct;var xt=p>0?pe.end:N(pe.begin,-1);return xt!=null&&!(p>0&&xt==A.text.length)&&(ct=nt(p>0?0:w.length-1,p,Z(xt)),ct)?ct:null}var vf={selectAll:SF,singleSelection:function(u){return u.setSelection(u.getCursor("anchor"),u.getCursor("head"),Ie)},killLine:function(u){return Id(u,function(A){if(A.empty()){var S=Rt(u.doc,A.head.line).text.length;return A.head.ch==S&&A.head.line<u.lastLine()?{from:A.head,to:M(A.head.line+1,0)}:{from:A.head,to:M(A.head.line,S)}}else return{from:A.from(),to:A.to()}})},deleteLine:function(u){return Id(u,function(A){return{from:M(A.from().line,0),to:it(u.doc,M(A.to().line+1,0))}})},delLineLeft:function(u){return Id(u,function(A){return{from:M(A.from().line,0),to:A.from()}})},delWrappedLineLeft:function(u){return Id(u,function(A){var S=u.charCoords(A.head,"div").top+5,p=u.coordsChar({left:0,top:S},"div");return{from:p,to:A.from()}})},delWrappedLineRight:function(u){return Id(u,function(A){var S=u.charCoords(A.head,"div").top+5,p=u.coordsChar({left:u.display.lineDiv.offsetWidth+100,top:S},"div");return{from:A.from(),to:p}})},undo:function(u){return u.undo()},redo:function(u){return u.redo()},undoSelection:function(u){return u.undoSelection()},redoSelection:function(u){return u.redoSelection()},goDocStart:function(u){return u.extendSelection(M(u.firstLine(),0))},goDocEnd:function(u){return u.extendSelection(M(u.lastLine()))},goLineStart:function(u){return u.extendSelectionsBy(function(A){return BF(u,A.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(u){return u.extendSelectionsBy(function(A){return MF(u,A.head)},{origin:"+move",bias:1})},goLineEnd:function(u){return u.extendSelectionsBy(function(A){return wj(u,A.head.line)},{origin:"+move",bias:-1})},goLineRight:function(u){return u.extendSelectionsBy(function(A){var S=u.cursorCoords(A.head,"div").top+5;return u.coordsChar({left:u.display.lineDiv.offsetWidth+100,top:S},"div")},k)},goLineLeft:function(u){return u.extendSelectionsBy(function(A){var S=u.cursorCoords(A.head,"div").top+5;return u.coordsChar({left:0,top:S},"div")},k)},goLineLeftSmart:function(u){return u.extendSelectionsBy(function(A){var S=u.cursorCoords(A.head,"div").top+5,p=u.coordsChar({left:0,top:S},"div");return p.ch<u.getLine(p.line).search(/\S/)?MF(u,A.head):p},k)},goLineUp:function(u){return u.moveV(-1,"line")},goLineDown:function(u){return u.moveV(1,"line")},goPageUp:function(u){return u.moveV(-1,"page")},goPageDown:function(u){return u.moveV(1,"page")},goCharLeft:function(u){return u.moveH(-1,"char")},goCharRight:function(u){return u.moveH(1,"char")},goColumnLeft:function(u){return u.moveH(-1,"column")},goColumnRight:function(u){return u.moveH(1,"column")},goWordLeft:function(u){return u.moveH(-1,"word")},goGroupRight:function(u){return u.moveH(1,"group")},goGroupLeft:function(u){return u.moveH(-1,"group")},goWordRight:function(u){return u.moveH(1,"word")},delCharBefore:function(u){return u.deleteH(-1,"codepoint")},delCharAfter:function(u){return u.deleteH(1,"char")},delWordBefore:function(u){return u.deleteH(-1,"word")},delWordAfter:function(u){return u.deleteH(1,"word")},delGroupBefore:function(u){return u.deleteH(-1,"group")},delGroupAfter:function(u){return u.deleteH(1,"group")},indentAuto:function(u){return u.indentSelection("smart")},indentMore:function(u){return u.indentSelection("add")},indentLess:function(u){return u.indentSelection("subtract")},insertTab:function(u){return u.replaceSelection("	")},insertSoftTab:function(u){for(var A=[],S=u.listSelections(),p=u.options.tabSize,w=0;w<S.length;w++){var F=S[w].from(),L=We(u.getLine(F.line),F.ch,p);A.push(le(p-L%p))}u.replaceSelections(A)},defaultTab:function(u){u.somethingSelected()?u.indentSelection("add"):u.execCommand("insertTab")},transposeChars:function(u){return ra(u,function(){for(var A=u.listSelections(),S=[],p=0;p<A.length;p++)if(!!A[p].empty()){var w=A[p].head,F=Rt(u.doc,w.line).text;if(F){if(w.ch==F.length&&(w=new M(w.line,w.ch-1)),w.ch>0)w=new M(w.line,w.ch+1),u.replaceRange(F.charAt(w.ch-1)+F.charAt(w.ch-2),M(w.line,w.ch-2),w,"+transpose");else if(w.line>u.doc.first){var L=Rt(u.doc,w.line-1).text;L&&(w=new M(w.line,1),u.replaceRange(F.charAt(0)+u.doc.lineSeparator()+L.charAt(L.length-1),M(w.line-1,L.length-1),w,"+transpose"))}}S.push(new Q0(w,w))}u.setSelections(S)})},newlineAndIndent:function(u){return ra(u,function(){for(var A=u.listSelections(),S=A.length-1;S>=0;S--)u.replaceRange(u.doc.lineSeparator(),A[S].anchor,A[S].head,"+input");A=u.listSelections();for(var p=0;p<A.length;p++)u.indentLine(A[p].from().line,null,!0);Fd(u)})},openLine:function(u){return u.replaceSelection(`
`,"start")},toggleOverwrite:function(u){return u.toggleOverwrite()}};function BF(u,A){var S=Rt(u.doc,A),p=na(S);return p!=S&&(A=o0(p)),cx(!0,u,p,A,1)}function wj(u,A){var S=Rt(u.doc,A),p=I2(S);return p!=S&&(A=o0(p)),cx(!0,u,S,A,-1)}function MF(u,A){var S=BF(u,A.line),p=Rt(u.doc,S.line),w=ht(p,u.doc.direction);if(!w||w[0].level==0){var F=Math.max(S.ch,p.text.search(/\S/)),L=A.line==S.line&&A.ch<=F&&A.ch;return M(S.line,L?0:F,S.sticky)}return S}function Xm(u,A,S){if(typeof A=="string"&&(A=vf[A],!A))return!1;u.display.input.ensurePolled();var p=u.display.shift,w=!1;try{u.isReadOnly()&&(u.state.suppressEdits=!0),S&&(u.display.shift=!1),w=A(u)!=lt}finally{u.display.shift=p,u.state.suppressEdits=!1}return w}function yj(u,A,S){for(var p=0;p<u.state.keyMaps.length;p++){var w=Md(A,u.state.keyMaps[p],S,u);if(w)return w}return u.options.extraKeys&&Md(A,u.options.extraKeys,S,u)||Md(A,u.options.keyMap,S,u)}var Ej=new at;function wf(u,A,S,p){var w=u.state.keySeq;if(w){if(PF(A))return"handled";if(/\'$/.test(A)?u.state.keySeq=null:Ej.set(50,function(){u.state.keySeq==w&&(u.state.keySeq=null,u.display.input.reset())}),IF(u,w+" "+A,S,p))return!0}return IF(u,A,S,p)}function IF(u,A,S,p){var w=yj(u,A,p);return w=="multi"&&(u.state.keySeq=A),w=="handled"&&ur(u,"keyHandled",u,A,S),(w=="handled"||w=="multi")&&(Xn(S),X2(u)),!!w}function OF(u,A){var S=LF(A,!0);return S?A.shiftKey&&!u.state.keySeq?wf(u,"Shift-"+S,A,function(p){return Xm(u,p,!0)})||wf(u,S,A,function(p){if(typeof p=="string"?/^go[A-Z]/.test(p):p.motion)return Xm(u,p)}):wf(u,S,A,function(p){return Xm(u,p)}):!1}function Cj(u,A,S){return wf(u,"'"+S+"'",A,function(p){return Xm(u,p,!0)})}var dx=null;function kF(u){var A=this;if(!(u.target&&u.target!=A.display.input.getField())&&(A.curOp.focus=G(be(A)),!a0(A,u))){l&&c<11&&u.keyCode==27&&(u.returnValue=!1);var S=u.keyCode;A.display.shift=S==16||u.shiftKey;var p=OF(A,u);g&&(dx=p?S:null,!p&&S==88&&!t0&&(V?u.metaKey:u.ctrlKey)&&A.replaceSelection("",null,"cut")),i&&!V&&!p&&S==46&&u.shiftKey&&!u.ctrlKey&&document.execCommand&&document.execCommand("cut"),S==18&&!/\bCodeMirror-crosshair\b/.test(A.display.lineDiv.className)&&Vj(A)}}function Vj(u){var A=u.display.lineDiv;re(A,"CodeMirror-crosshair");function S(p){(p.keyCode==18||!p.altKey)&&(I(A,"CodeMirror-crosshair"),Wt(document,"keyup",S),Wt(document,"mouseover",S))}Je(document,"keyup",S),Je(document,"mouseover",S)}function NF(u){u.keyCode==16&&(this.doc.sel.shift=!1),a0(this,u)}function UF(u){var A=this;if(!(u.target&&u.target!=A.display.input.getField())&&!(yi(A.display,u)||a0(A,u)||u.ctrlKey&&!u.altKey||V&&u.metaKey)){var S=u.keyCode,p=u.charCode;if(g&&S==dx){dx=null,Xn(u);return}if(!(g&&(!u.which||u.which<10)&&OF(A,u))){var w=String.fromCharCode(p==null?S:p);w!="\b"&&(Cj(A,u,w)||A.display.input.onKeyPress(u))}}}var Dj=400,Ax=function(u,A,S){this.time=u,this.pos=A,this.button=S};Ax.prototype.compare=function(u,A,S){return this.time+Dj>u&&X(A,this.pos)==0&&S==this.button};var yf,Ef;function Fj(u,A){var S=+new Date;return Ef&&Ef.compare(S,u,A)?(yf=Ef=null,"triple"):yf&&yf.compare(S,u,A)?(Ef=new Ax(S,u,A),yf=null,"double"):(yf=new Ax(S,u,A),Ef=null,"single")}function jF(u){var A=this,S=A.display;if(!(a0(A,u)||S.activeTouch&&S.input.supportsTouch())){if(S.input.ensurePolled(),S.shift=u.shiftKey,yi(S,u)){d||(S.scroller.draggable=!1,setTimeout(function(){return S.scroller.draggable=!0},100));return}if(!fx(A,u)){var p=Xu(A,u),w=xi(u),F=p?Fj(p,w):"single";Be(A).focus(),w==1&&A.state.selectingText&&A.state.selectingText(u),!(p&&Tj(A,w,p,F,u))&&(w==1?p?Pj(A,p,F,u):Nr(u)==S.scroller&&Xn(u):w==2?(p&&Um(A.doc,p),setTimeout(function(){return S.input.focus()},20)):w==3&&($?A.display.input.onContextMenu(u):K2(A)))}}}function Tj(u,A,S,p,w){var F="Click";return p=="double"?F="Double"+F:p=="triple"&&(F="Triple"+F),F=(A==1?"Left":A==2?"Middle":"Right")+F,wf(u,RF(F,w),w,function(L){if(typeof L=="string"&&(L=vf[L]),!L)return!1;var N=!1;try{u.isReadOnly()&&(u.state.suppressEdits=!0),N=L(u,S)!=lt}finally{u.state.suppressEdits=!1}return N})}function bj(u,A,S){var p=u.getOption("configureMouse"),w=p?p(u,A,S):{};if(w.unit==null){var F=H?S.shiftKey&&S.metaKey:S.altKey;w.unit=F?"rectangle":A=="single"?"char":A=="double"?"word":"line"}return(w.extend==null||u.doc.extend)&&(w.extend=u.doc.extend||S.shiftKey),w.addNew==null&&(w.addNew=V?S.metaKey:S.ctrlKey),w.moveOnDrag==null&&(w.moveOnDrag=!(V?S.altKey:S.ctrlKey)),w}function Pj(u,A,S,p){l?setTimeout(Te(GD,u),0):u.curOp.focus=G(be(u));var w=bj(u,S,p),F=u.doc.sel,L;u.options.dragDrop&&S0&&!u.isReadOnly()&&S=="single"&&(L=F.contains(A))>-1&&(X((L=F.ranges[L]).from(),A)<0||A.xRel>0)&&(X(L.to(),A)>0||A.xRel<0)?Rj(u,p,A,w):Lj(u,p,A,w)}function Rj(u,A,S,p){var w=u.display,F=!1,L=jr(u,function(Z){d&&(w.scroller.draggable=!1),u.state.draggingText=!1,u.state.delayingBlurEvent&&(u.hasFocus()?u.state.delayingBlurEvent=!1:K2(u)),Wt(w.wrapper.ownerDocument,"mouseup",L),Wt(w.wrapper.ownerDocument,"mousemove",N),Wt(w.scroller,"dragstart",K),Wt(w.scroller,"drop",L),F||(Xn(Z),p.addNew||Um(u.doc,S,null,null,p.extend),d&&!x||l&&c==9?setTimeout(function(){w.wrapper.ownerDocument.body.focus({preventScroll:!0}),w.input.focus()},20):w.input.focus())}),N=function(Z){F=F||Math.abs(A.clientX-Z.clientX)+Math.abs(A.clientY-Z.clientY)>=10},K=function(){return F=!0};d&&(w.scroller.draggable=!0),u.state.draggingText=L,L.copy=!p.moveOnDrag,Je(w.wrapper.ownerDocument,"mouseup",L),Je(w.wrapper.ownerDocument,"mousemove",N),Je(w.scroller,"dragstart",K),Je(w.scroller,"drop",L),u.state.delayingBlurEvent=!0,setTimeout(function(){return w.input.focus()},20),w.scroller.dragDrop&&w.scroller.dragDrop()}function GF(u,A,S){if(S=="char")return new Q0(A,A);if(S=="word")return u.findWordAt(A);if(S=="line")return new Q0(M(A.line,0),it(u.doc,M(A.line+1,0)));var p=S(u,A);return new Q0(p.from,p.to)}function Lj(u,A,S,p){l&&K2(u);var w=u.display,F=u.doc;Xn(A);var L,N,K=F.sel,Z=K.ranges;if(p.addNew&&!p.extend?(N=F.sel.contains(S),N>-1?L=Z[N]:L=new Q0(S,S)):(L=F.sel.primary(),N=F.sel.primIndex),p.unit=="rectangle")p.addNew||(L=new Q0(S,S)),S=Xu(u,A,!0,!0),N=-1;else{var pe=GF(u,S,p.unit);p.extend?L=ox(L,pe.anchor,pe.head,p.extend):L=pe}p.addNew?N==-1?(N=Z.length,si(F,_o(u,Z.concat([L]),N),{scroll:!1,origin:"*mouse"})):Z.length>1&&Z[N].empty()&&p.unit=="char"&&!p.extend?(si(F,_o(u,Z.slice(0,N).concat(Z.slice(N+1)),0),{scroll:!1,origin:"*mouse"}),K=F.sel):sx(F,N,L,Ue):(N=0,si(F,new ga([L],0),Ue),K=F.sel);var ge=S;function Ge(Dt){if(X(ge,Dt)!=0)if(ge=Dt,p.unit=="rectangle"){for(var kt=[],n0=u.options.tabSize,Qt=We(Rt(F,S.line).text,S.ch,n0),F0=We(Rt(F,Dt.line).text,Dt.ch,n0),Sn=Math.min(Qt,F0),Hr=Math.max(Qt,F0),qn=Math.min(S.line,Dt.line),ia=Math.min(u.lastLine(),Math.max(S.line,Dt.line));qn<=ia;qn++){var Wi=Rt(F,qn).text,gr=De(Wi,Sn,n0);Sn==Hr?kt.push(new Q0(M(qn,gr),M(qn,gr))):Wi.length>gr&&kt.push(new Q0(M(qn,gr),M(qn,De(Wi,Hr,n0))))}kt.length||kt.push(new Q0(S,S)),si(F,_o(u,K.ranges.slice(0,N).concat(kt),N),{origin:"*mouse",scroll:!1}),u.scrollIntoView(Dt)}else{var Xi=L,$r=GF(u,Dt,p.unit),Fr=Xi.anchor,_r;X($r.anchor,Fr)>0?(_r=$r.head,Fr=ze(Xi.from(),$r.anchor)):(_r=$r.anchor,Fr=Me(Xi.to(),$r.head));var rr=K.ranges.slice(0);rr[N]=Bj(u,new Q0(it(F,Fr),_r)),si(F,_o(u,rr,N),Ue)}}var Oe=w.wrapper.getBoundingClientRect(),nt=0;function ct(Dt){var kt=++nt,n0=Xu(u,Dt,!0,p.unit=="rectangle");if(!!n0)if(X(n0,ge)!=0){u.curOp.focus=G(be(u)),Ge(n0);var Qt=Bm(w,F);(n0.line>=Qt.to||n0.line<Qt.from)&&setTimeout(jr(u,function(){nt==kt&&ct(Dt)}),150)}else{var F0=Dt.clientY<Oe.top?-20:Dt.clientY>Oe.bottom?20:0;F0&&setTimeout(jr(u,function(){nt==kt&&(w.scroller.scrollTop+=F0,ct(Dt))}),50)}}function xt(Dt){u.state.selectingText=!1,nt=1/0,Dt&&(Xn(Dt),w.input.focus()),Wt(w.wrapper.ownerDocument,"mousemove",Vt),Wt(w.wrapper.ownerDocument,"mouseup",Lt),F.history.lastSelOrigin=null}var Vt=jr(u,function(Dt){Dt.buttons===0||!xi(Dt)?xt(Dt):ct(Dt)}),Lt=jr(u,xt);u.state.selectingText=Lt,Je(w.wrapper.ownerDocument,"mousemove",Vt),Je(w.wrapper.ownerDocument,"mouseup",Lt)}function Bj(u,A){var S=A.anchor,p=A.head,w=Rt(u.doc,S.line);if(X(S,p)==0&&S.sticky==p.sticky)return A;var F=ht(w);if(!F)return A;var L=Ce(F,S.ch,S.sticky),N=F[L];if(N.from!=S.ch&&N.to!=S.ch)return A;var K=L+(N.from==S.ch==(N.level!=1)?0:1);if(K==0||K==F.length)return A;var Z;if(p.line!=S.line)Z=(p.line-S.line)*(u.doc.direction=="ltr"?1:-1)>0;else{var pe=Ce(F,p.ch,p.sticky),ge=pe-L||(p.ch-S.ch)*(N.level==1?-1:1);pe==K-1||pe==K?Z=ge<0:Z=ge>0}var Ge=F[K+(Z?-1:0)],Oe=Z==(Ge.level==1),nt=Oe?Ge.from:Ge.to,ct=Oe?"after":"before";return S.ch==nt&&S.sticky==ct?A:new Q0(new M(S.line,nt,ct),p)}function HF(u,A,S,p){var w,F;if(A.touches)w=A.touches[0].clientX,F=A.touches[0].clientY;else try{w=A.clientX,F=A.clientY}catch{return!1}if(w>=Math.floor(u.display.gutters.getBoundingClientRect().right))return!1;p&&Xn(A);var L=u.display,N=L.lineDiv.getBoundingClientRect();if(F>N.bottom||!M0(u,S))return ta(A);F-=N.top-L.viewOffset;for(var K=0;K<u.display.gutterSpecs.length;++K){var Z=L.gutters.childNodes[K];if(Z&&Z.getBoundingClientRect().right>=w){var pe=En(u.doc,F),ge=u.display.gutterSpecs[K];return _t(u,S,u,pe,ge.className,A),ta(A)}}}function fx(u,A){return HF(u,A,"gutterClick",!0)}function zF(u,A){yi(u.display,A)||Mj(u,A)||a0(u,A,"contextmenu")||$||u.display.input.onContextMenu(A)}function Mj(u,A){return M0(u,"gutterContextMenu")?HF(u,A,"gutterContextMenu",!1):!1}function WF(u){u.display.wrapper.className=u.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+u.options.theme.replace(/(^|\s)\s*/g," cm-s-"),J(u)}var Od={toString:function(){return"CodeMirror.Init"}},XF={},Km={};function Ij(u){var A=u.optionHandlers;function S(p,w,F,L){u.defaults[p]=w,F&&(A[p]=L?function(N,K,Z){Z!=Od&&F(N,K,Z)}:F)}u.defineOption=S,u.Init=Od,S("value","",function(p,w){return p.setValue(w)},!0),S("mode",null,function(p,w){p.doc.modeOption=w,rx(p)},!0),S("indentUnit",2,rx,!0),S("indentWithTabs",!1),S("smartIndent",!0),S("tabSize",4,function(p){Af(p),J(p),Hi(p)},!0),S("lineSeparator",null,function(p,w){if(p.doc.lineSep=w,!!w){var F=[],L=p.doc.first;p.doc.iter(function(K){for(var Z=0;;){var pe=K.text.indexOf(w,Z);if(pe==-1)break;Z=pe+w.length,F.push(M(L,pe))}L++});for(var N=F.length-1;N>=0;N--)Ld(p.doc,w,F[N],M(F[N].line,F[N].ch+w.length))}}),S("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(p,w,F){p.state.specialChars=new RegExp(w.source+(w.test("	")?"":"|	"),"g"),F!=Od&&p.refresh()}),S("specialCharPlaceholder",vm,function(p){return p.refresh()},!0),S("electricChars",!0),S("inputStyle",D?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),S("spellcheck",!1,function(p,w){return p.getInputField().spellcheck=w},!0),S("autocorrect",!1,function(p,w){return p.getInputField().autocorrect=w},!0),S("autocapitalize",!1,function(p,w){return p.getInputField().autocapitalize=w},!0),S("rtlMoveVisually",!R),S("wholeLineUpdateBefore",!0),S("theme","default",function(p){WF(p),df(p)},!0),S("keyMap","default",function(p,w,F){var L=Wm(w),N=F!=Od&&Wm(F);N&&N.detach&&N.detach(p,L),L.attach&&L.attach(p,N||null)}),S("extraKeys",null),S("configureMouse",null),S("lineWrapping",!1,kj,!0),S("gutters",[],function(p,w){p.display.gutterSpecs=tx(w,p.options.lineNumbers),df(p)},!0),S("fixedGutter",!0,function(p,w){p.display.gutters.style.left=w?H2(p.display)+"px":"0",p.refresh()},!0),S("coverGutterNextToScrollbar",!1,function(p){return Td(p)},!0),S("scrollbarStyle","native",function(p){YD(p),Td(p),p.display.scrollbars.setScrollTop(p.doc.scrollTop),p.display.scrollbars.setScrollLeft(p.doc.scrollLeft)},!0),S("lineNumbers",!1,function(p,w){p.display.gutterSpecs=tx(p.options.gutters,w),df(p)},!0),S("firstLineNumber",1,df,!0),S("lineNumberFormatter",function(p){return p},df,!0),S("showCursorWhenSelecting",!1,af,!0),S("resetSelectionOnContextMenu",!0),S("lineWiseCopyCut",!0),S("pasteLinesPerSelection",!0),S("selectionsMayTouch",!1),S("readOnly",!1,function(p,w){w=="nocursor"&&(Dd(p),p.display.input.blur()),p.display.input.readOnlyChanged(w)}),S("screenReaderLabel",null,function(p,w){w=w===""?null:w,p.display.input.screenReaderLabelChanged(w)}),S("disableInput",!1,function(p,w){w||p.display.input.reset()},!0),S("dragDrop",!0,Oj),S("allowDropFileTypes",null),S("cursorBlinkRate",530),S("cursorScrollMargin",0),S("cursorHeight",1,af,!0),S("singleCursorHeightPerLine",!0,af,!0),S("workTime",100),S("workDelay",100),S("flattenSpans",!0,Af,!0),S("addModeClass",!1,Af,!0),S("pollInterval",100),S("undoDepth",200,function(p,w){return p.doc.history.undoDepth=w}),S("historyEventDelay",1250),S("viewportMargin",10,function(p){return p.refresh()},!0),S("maxHighlightLength",1e4,Af,!0),S("moveInputWithCursor",!0,function(p,w){w||p.display.input.resetPosition()}),S("tabindex",null,function(p,w){return p.display.input.getField().tabIndex=w||""}),S("autofocus",null),S("direction","ltr",function(p,w){return p.doc.setDirection(w)},!0),S("phrases",null)}function Oj(u,A,S){var p=S&&S!=Od;if(!A!=!p){var w=u.display.dragFunctions,F=A?Je:Wt;F(u.display.scroller,"dragstart",w.start),F(u.display.scroller,"dragenter",w.enter),F(u.display.scroller,"dragover",w.over),F(u.display.scroller,"dragleave",w.leave),F(u.display.scroller,"drop",w.drop)}}function kj(u){u.options.lineWrapping?(re(u.display.wrapper,"CodeMirror-wrap"),u.display.sizer.style.minWidth="",u.display.sizerWidth=null):(I(u.display.wrapper,"CodeMirror-wrap"),JA(u)),z2(u),Hi(u),J(u),setTimeout(function(){return Td(u)},100)}function Un(u,A){var S=this;if(!(this instanceof Un))return new Un(u,A);this.options=A=A?ye(A):{},ye(XF,A,!1);var p=A.value;typeof p=="string"?p=new zi(p,A.mode,null,A.lineSeparator,A.direction):A.mode&&(p.modeOption=A.mode),this.doc=p;var w=new Un.inputStyles[A.inputStyle](this),F=this.display=new JU(u,p,w,A);F.wrapper.CodeMirror=this,WF(this),A.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),YD(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new at,keySeq:null,specialChars:null},A.autofocus&&!D&&F.input.focus(),l&&c<11&&setTimeout(function(){return S.display.input.reset(!0)},20),Nj(this),mj(),Qu(this),this.curOp.forceUpdate=!0,iF(this,p),A.autofocus&&!D||this.hasFocus()?setTimeout(function(){S.hasFocus()&&!S.state.focused&&Y2(S)},20):Dd(this);for(var L in Km)Km.hasOwnProperty(L)&&Km[L](this,A[L],Od);JD(this),A.finishInit&&A.finishInit(this);for(var N=0;N<hx.length;++N)hx[N](this);Ju(this),d&&A.lineWrapping&&getComputedStyle(F.lineDiv).textRendering=="optimizelegibility"&&(F.lineDiv.style.textRendering="auto")}Un.defaults=XF,Un.optionHandlers=Km;function Nj(u){var A=u.display;Je(A.scroller,"mousedown",jr(u,jF)),l&&c<11?Je(A.scroller,"dblclick",jr(u,function(K){if(!a0(u,K)){var Z=Xu(u,K);if(!(!Z||fx(u,K)||yi(u.display,K))){Xn(K);var pe=u.findWordAt(Z);Um(u.doc,pe.anchor,pe.head)}}})):Je(A.scroller,"dblclick",function(K){return a0(u,K)||Xn(K)}),Je(A.scroller,"contextmenu",function(K){return zF(u,K)}),Je(A.input.getField(),"contextmenu",function(K){A.scroller.contains(K.target)||zF(u,K)});var S,p={end:0};function w(){A.activeTouch&&(S=setTimeout(function(){return A.activeTouch=null},1e3),p=A.activeTouch,p.end=+new Date)}function F(K){if(K.touches.length!=1)return!1;var Z=K.touches[0];return Z.radiusX<=1&&Z.radiusY<=1}function L(K,Z){if(Z.left==null)return!0;var pe=Z.left-K.left,ge=Z.top-K.top;return pe*pe+ge*ge>20*20}Je(A.scroller,"touchstart",function(K){if(!a0(u,K)&&!F(K)&&!fx(u,K)){A.input.ensurePolled(),clearTimeout(S);var Z=+new Date;A.activeTouch={start:Z,moved:!1,prev:Z-p.end<=300?p:null},K.touches.length==1&&(A.activeTouch.left=K.touches[0].pageX,A.activeTouch.top=K.touches[0].pageY)}}),Je(A.scroller,"touchmove",function(){A.activeTouch&&(A.activeTouch.moved=!0)}),Je(A.scroller,"touchend",function(K){var Z=A.activeTouch;if(Z&&!yi(A,K)&&Z.left!=null&&!Z.moved&&new Date-Z.start<300){var pe=u.coordsChar(A.activeTouch,"page"),ge;!Z.prev||L(Z,Z.prev)?ge=new Q0(pe,pe):!Z.prev.prev||L(Z,Z.prev.prev)?ge=u.findWordAt(pe):ge=new Q0(M(pe.line,0),it(u.doc,M(pe.line+1,0))),u.setSelection(ge.anchor,ge.head),u.focus(),Xn(K)}w()}),Je(A.scroller,"touchcancel",w),Je(A.scroller,"scroll",function(){A.scroller.clientHeight&&(sf(u,A.scroller.scrollTop),Yu(u,A.scroller.scrollLeft,!0),_t(u,"scroll",u))}),Je(A.scroller,"mousewheel",function(K){return eF(u,K)}),Je(A.scroller,"DOMMouseScroll",function(K){return eF(u,K)}),Je(A.wrapper,"scroll",function(){return A.wrapper.scrollTop=A.wrapper.scrollLeft=0}),A.dragFunctions={enter:function(K){a0(u,K)||$t(K)},over:function(K){a0(u,K)||(pj(u,K),$t(K))},start:function(K){return hj(u,K)},drop:jr(u,fj),leave:function(K){a0(u,K)||FF(u)}};var N=A.input.getField();Je(N,"keyup",function(K){return NF.call(u,K)}),Je(N,"keydown",jr(u,kF)),Je(N,"keypress",jr(u,UF)),Je(N,"focus",function(K){return Y2(u,K)}),Je(N,"blur",function(K){return Dd(u,K)})}var hx=[];Un.defineInitHook=function(u){return hx.push(u)};function Cf(u,A,S,p){var w=u.doc,F;S==null&&(S="add"),S=="smart"&&(w.mode.indent?F=Kn(u,A).state:S="prev");var L=u.options.tabSize,N=Rt(w,A),K=We(N.text,null,L);N.stateAfter&&(N.stateAfter=null);var Z=N.text.match(/^\s*/)[0],pe;if(!p&&!/\S/.test(N.text))pe=0,S="not";else if(S=="smart"&&(pe=w.mode.indent(F,N.text.slice(Z.length),N.text),pe==lt||pe>150)){if(!p)return;S="prev"}S=="prev"?A>w.first?pe=We(Rt(w,A-1).text,null,L):pe=0:S=="add"?pe=K+u.options.indentUnit:S=="subtract"?pe=K-u.options.indentUnit:typeof S=="number"&&(pe=K+S),pe=Math.max(0,pe);var ge="",Ge=0;if(u.options.indentWithTabs)for(var Oe=Math.floor(pe/L);Oe;--Oe)Ge+=L,ge+="	";if(Ge<pe&&(ge+=le(pe-Ge)),ge!=Z)return Ld(w,ge,M(A,0),M(A,Z.length),"+input"),N.stateAfter=null,!0;for(var nt=0;nt<w.sel.ranges.length;nt++){var ct=w.sel.ranges[nt];if(ct.head.line==A&&ct.head.ch<Z.length){var xt=M(A,Z.length);sx(w,nt,new Q0(xt,xt));break}}}var xo=null;function Ym(u){xo=u}function px(u,A,S,p,w){var F=u.doc;u.display.shift=!1,p||(p=F.sel);var L=+new Date-200,N=w=="paste"||u.state.pasteIncoming>L,K=Ze(A),Z=null;if(N&&p.ranges.length>1)if(xo&&xo.text.join(`
`)==A){if(p.ranges.length%xo.text.length==0){Z=[];for(var pe=0;pe<xo.text.length;pe++)Z.push(F.splitLines(xo.text[pe]))}}else K.length==p.ranges.length&&u.options.pasteLinesPerSelection&&(Z=fe(K,function(Vt){return[Vt]}));for(var ge=u.curOp.updateInput,Ge=p.ranges.length-1;Ge>=0;Ge--){var Oe=p.ranges[Ge],nt=Oe.from(),ct=Oe.to();Oe.empty()&&(S&&S>0?nt=M(nt.line,nt.ch-S):u.state.overwrite&&!N?ct=M(ct.line,Math.min(Rt(F,ct.line).text.length,ct.ch+ne(K).length)):N&&xo&&xo.lineWise&&xo.text.join(`
`)==K.join(`
`)&&(nt=ct=M(nt.line,0)));var xt={from:nt,to:ct,text:Z?Z[Ge%Z.length]:K,origin:w||(N?"paste":u.state.cutIncoming>L?"cut":"+input")};Rd(u.doc,xt),ur(u,"inputRead",u,xt)}A&&!N&&YF(u,A),Fd(u),u.curOp.updateInput<2&&(u.curOp.updateInput=ge),u.curOp.typing=!0,u.state.pasteIncoming=u.state.cutIncoming=-1}function KF(u,A){var S=u.clipboardData&&u.clipboardData.getData("Text");if(S)return u.preventDefault(),!A.isReadOnly()&&!A.options.disableInput&&A.hasFocus()&&ra(A,function(){return px(A,S,0,null,"paste")}),!0}function YF(u,A){if(!(!u.options.electricChars||!u.options.smartIndent))for(var S=u.doc.sel,p=S.ranges.length-1;p>=0;p--){var w=S.ranges[p];if(!(w.head.ch>100||p&&S.ranges[p-1].head.line==w.head.line)){var F=u.getModeAt(w.head),L=!1;if(F.electricChars){for(var N=0;N<F.electricChars.length;N++)if(A.indexOf(F.electricChars.charAt(N))>-1){L=Cf(u,w.head.line,"smart");break}}else F.electricInput&&F.electricInput.test(Rt(u.doc,w.head.line).text.slice(0,w.head.ch))&&(L=Cf(u,w.head.line,"smart"));L&&ur(u,"electricInput",u,w.head.line)}}}function qF(u){for(var A=[],S=[],p=0;p<u.doc.sel.ranges.length;p++){var w=u.doc.sel.ranges[p].head.line,F={anchor:M(w,0),head:M(w+1,0)};S.push(F),A.push(u.getRange(F.anchor,F.head))}return{text:A,ranges:S}}function QF(u,A,S,p){u.setAttribute("autocorrect",S?"":"off"),u.setAttribute("autocapitalize",p?"":"off"),u.setAttribute("spellcheck",!!A)}function JF(){var u=ee("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),A=ee("div",[u],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return d?u.style.width="1000px":u.setAttribute("wrap","off"),v&&(u.style.border="1px solid black"),QF(u),A}function Uj(u){var A=u.optionHandlers,S=u.helpers={};u.prototype={constructor:u,focus:function(){Be(this).focus(),this.display.input.focus()},setOption:function(p,w){var F=this.options,L=F[p];F[p]==w&&p!="mode"||(F[p]=w,A.hasOwnProperty(p)&&jr(this,A[p])(this,w,L),_t(this,"optionChange",this,p))},getOption:function(p){return this.options[p]},getDoc:function(){return this.doc},addKeyMap:function(p,w){this.state.keyMaps[w?"push":"unshift"](Wm(p))},removeKeyMap:function(p){for(var w=this.state.keyMaps,F=0;F<w.length;++F)if(w[F]==p||w[F].name==p)return w.splice(F,1),!0},addOverlay:Ei(function(p,w){var F=p.token?p:u.getMode(this.options,p);if(F.startState)throw new Error("Overlays may not be stateful.");He(this.state.overlays,{mode:F,modeSpec:p,opaque:w&&w.opaque,priority:w&&w.priority||0},function(L){return L.priority}),this.state.modeGen++,Hi(this)}),removeOverlay:Ei(function(p){for(var w=this.state.overlays,F=0;F<w.length;++F){var L=w[F].modeSpec;if(L==p||typeof p=="string"&&L.name==p){w.splice(F,1),this.state.modeGen++,Hi(this);return}}}),indentLine:Ei(function(p,w,F){typeof w!="string"&&typeof w!="number"&&(w==null?w=this.options.smartIndent?"smart":"prev":w=w?"add":"subtract"),Ni(this.doc,p)&&Cf(this,p,w,F)}),indentSelection:Ei(function(p){for(var w=this.doc.sel.ranges,F=-1,L=0;L<w.length;L++){var N=w[L];if(N.empty())N.head.line>F&&(Cf(this,N.head.line,p,!0),F=N.head.line,L==this.doc.sel.primIndex&&Fd(this));else{var K=N.from(),Z=N.to(),pe=Math.max(F,K.line);F=Math.min(this.lastLine(),Z.line-(Z.ch?0:1))+1;for(var ge=pe;ge<F;++ge)Cf(this,ge,p);var Ge=this.doc.sel.ranges;K.ch==0&&w.length==Ge.length&&Ge[L].from().ch>0&&sx(this.doc,L,new Q0(K,Ge[L].to()),Ie)}}}),getTokenAt:function(p,w){return wi(this,p,w)},getLineTokens:function(p,w){return wi(this,M(p),w,!0)},getTokenTypeAt:function(p){p=it(this.doc,p);var w=w0(this,Rt(this.doc,p.line)),F=0,L=(w.length-1)/2,N=p.ch,K;if(N==0)K=w[2];else for(;;){var Z=F+L>>1;if((Z?w[Z*2-1]:0)>=N)L=Z;else if(w[Z*2+1]<N)F=Z+1;else{K=w[Z*2+2];break}}var pe=K?K.indexOf("overlay "):-1;return pe<0?K:pe==0?null:K.slice(0,pe-1)},getModeAt:function(p){var w=this.doc.mode;return w.innerMode?u.innerMode(w,this.getTokenAt(p).state).mode:w},getHelper:function(p,w){return this.getHelpers(p,w)[0]},getHelpers:function(p,w){var F=[];if(!S.hasOwnProperty(w))return F;var L=S[w],N=this.getModeAt(p);if(typeof N[w]=="string")L[N[w]]&&F.push(L[N[w]]);else if(N[w])for(var K=0;K<N[w].length;K++){var Z=L[N[w][K]];Z&&F.push(Z)}else N.helperType&&L[N.helperType]?F.push(L[N.helperType]):L[N.name]&&F.push(L[N.name]);for(var pe=0;pe<L._global.length;pe++){var ge=L._global[pe];ge.pred(N,this)&&Ke(F,ge.val)==-1&&F.push(ge.val)}return F},getStateAfter:function(p,w){var F=this.doc;return p=Ye(F,p==null?F.first+F.size-1:p),Kn(this,p+1,w).state},cursorCoords:function(p,w){var F,L=this.doc.sel.primary();return p==null?F=L.head:typeof p=="object"?F=it(this.doc,p):F=p?L.from():L.to(),ut(this,F,w||"page")},charCoords:function(p,w){return ot(this,it(this.doc,p),w||"page")},coordsChar:function(p,w){return p=et(this,p,w||"page"),g0(this,p.left,p.top)},lineAtHeight:function(p,w){return p=et(this,{top:p,left:0},w||"page").top,En(this.doc,p+this.display.viewOffset)},heightAtLine:function(p,w,F){var L=!1,N;if(typeof p=="number"){var K=this.doc.first+this.doc.size-1;p<this.doc.first?p=this.doc.first:p>K&&(p=K,L=!0),N=Rt(this.doc,p)}else N=p;return je(this,N,{top:0,left:0},w||"page",F||L).top+(L?this.doc.height-ja(N):0)},defaultTextHeight:function(){return Cd(this.display)},defaultCharWidth:function(){return Vd(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(p,w,F,L,N){var K=this.display;p=ut(this,it(this.doc,p));var Z=p.bottom,pe=p.left;if(w.style.position="absolute",w.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(w),K.sizer.appendChild(w),L=="over")Z=p.top;else if(L=="above"||L=="near"){var ge=Math.max(K.wrapper.clientHeight,this.doc.height),Ge=Math.max(K.sizer.clientWidth,K.lineSpace.clientWidth);(L=="above"||p.bottom+w.offsetHeight>ge)&&p.top>w.offsetHeight?Z=p.top-w.offsetHeight:p.bottom+w.offsetHeight<=ge&&(Z=p.bottom),pe+w.offsetWidth>Ge&&(pe=Ge-w.offsetWidth)}w.style.top=Z+"px",w.style.left=w.style.right="",N=="right"?(pe=K.sizer.clientWidth-w.offsetWidth,w.style.right="0px"):(N=="left"?pe=0:N=="middle"&&(pe=(K.sizer.clientWidth-w.offsetWidth)/2),w.style.left=pe+"px"),F&&OU(this,{left:pe,top:Z,right:pe+w.offsetWidth,bottom:Z+w.offsetHeight})},triggerOnKeyDown:Ei(kF),triggerOnKeyPress:Ei(UF),triggerOnKeyUp:NF,triggerOnMouseDown:Ei(jF),execCommand:function(p){if(vf.hasOwnProperty(p))return vf[p].call(null,this)},triggerElectric:Ei(function(p){YF(this,p)}),findPosH:function(p,w,F,L){var N=1;w<0&&(N=-1,w=-w);for(var K=it(this.doc,p),Z=0;Z<w&&(K=mx(this.doc,K,N,F,L),!K.hitSide);++Z);return K},moveH:Ei(function(p,w){var F=this;this.extendSelectionsBy(function(L){return F.display.shift||F.doc.extend||L.empty()?mx(F.doc,L.head,p,w,F.options.rtlMoveVisually):p<0?L.from():L.to()},k)}),deleteH:Ei(function(p,w){var F=this.doc.sel,L=this.doc;F.somethingSelected()?L.replaceSelection("",null,"+delete"):Id(this,function(N){var K=mx(L,N.head,p,w,!1);return p<0?{from:K,to:N.head}:{from:N.head,to:K}})}),findPosV:function(p,w,F,L){var N=1,K=L;w<0&&(N=-1,w=-w);for(var Z=it(this.doc,p),pe=0;pe<w;++pe){var ge=ut(this,Z,"div");if(K==null?K=ge.left:ge.left=K,Z=ZF(this,ge,N,F),Z.hitSide)break}return Z},moveV:Ei(function(p,w){var F=this,L=this.doc,N=[],K=!this.display.shift&&!L.extend&&L.sel.somethingSelected();if(L.extendSelectionsBy(function(pe){if(K)return p<0?pe.from():pe.to();var ge=ut(F,pe.head,"div");pe.goalColumn!=null&&(ge.left=pe.goalColumn),N.push(ge.left);var Ge=ZF(F,ge,p,w);return w=="page"&&pe==L.sel.primary()&&Q2(F,ot(F,Ge,"div").top-ge.top),Ge},k),N.length)for(var Z=0;Z<L.sel.ranges.length;Z++)L.sel.ranges[Z].goalColumn=N[Z]}),findWordAt:function(p){var w=this.doc,F=Rt(w,p.line).text,L=p.ch,N=p.ch;if(F){var K=this.getHelper(p,"wordChars");(p.sticky=="before"||N==F.length)&&L?--L:++N;for(var Z=F.charAt(L),pe=Le(Z,K)?function(ge){return Le(ge,K)}:/\s/.test(Z)?function(ge){return/\s/.test(ge)}:function(ge){return!/\s/.test(ge)&&!Le(ge)};L>0&&pe(F.charAt(L-1));)--L;for(;N<F.length&&pe(F.charAt(N));)++N}return new Q0(M(p.line,L),M(p.line,N))},toggleOverwrite:function(p){p!=null&&p==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?re(this.display.cursorDiv,"CodeMirror-overwrite"):I(this.display.cursorDiv,"CodeMirror-overwrite"),_t(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==G(be(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Ei(function(p,w){of(this,p,w)}),getScrollInfo:function(){var p=this.display.scroller;return{left:p.scrollLeft,top:p.scrollTop,height:p.scrollHeight-Sr(this)-this.display.barHeight,width:p.scrollWidth-Sr(this)-this.display.barWidth,clientHeight:Sl(this),clientWidth:Yn(this)}},scrollIntoView:Ei(function(p,w){p==null?(p={from:this.doc.sel.primary().head,to:null},w==null&&(w=this.options.cursorScrollMargin)):typeof p=="number"?p={from:M(p,0),to:null}:p.from==null&&(p={from:p,to:null}),p.to||(p.to=p.from),p.margin=w||0,p.from.line!=null?kU(this,p):zD(this,p.from,p.to,p.margin)}),setSize:Ei(function(p,w){var F=this,L=function(K){return typeof K=="number"||/^\d+$/.test(String(K))?K+"px":K};p!=null&&(this.display.wrapper.style.width=L(p)),w!=null&&(this.display.wrapper.style.height=L(w)),this.options.lineWrapping&&W(this);var N=this.display.viewFrom;this.doc.iter(N,this.display.viewTo,function(K){if(K.widgets){for(var Z=0;Z<K.widgets.length;Z++)if(K.widgets[Z].noHScroll){_l(F,N,"widget");break}}++N}),this.curOp.forceUpdate=!0,_t(this,"refresh",this)}),operation:function(p){return ra(this,p)},startOperation:function(){return Qu(this)},endOperation:function(){return Ju(this)},refresh:Ei(function(){var p=this.display.cachedTextHeight;Hi(this),this.curOp.forceUpdate=!0,J(this),of(this,this.doc.scrollLeft,this.doc.scrollTop),$2(this.display),(p==null||Math.abs(p-Cd(this.display))>.5||this.options.lineWrapping)&&z2(this),_t(this,"refresh",this)}),swapDoc:Ei(function(p){var w=this.doc;return w.cm=null,this.state.selectingText&&this.state.selectingText(),iF(this,p),J(this),this.display.input.reset(),of(this,p.scrollLeft,p.scrollTop),this.curOp.forceScroll=!0,ur(this,"swapDoc",this,w),w}),phrase:function(p){var w=this.options.phrases;return w&&Object.prototype.hasOwnProperty.call(w,p)?w[p]:p},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Vn(u),u.registerHelper=function(p,w,F){S.hasOwnProperty(p)||(S[p]=u[p]={_global:[]}),S[p][w]=F},u.registerGlobalHelper=function(p,w,F,L){u.registerHelper(p,w,L),S[p]._global.push({pred:F,val:L})}}function mx(u,A,S,p,w){var F=A,L=S,N=Rt(u,A.line),K=w&&u.direction=="rtl"?-S:S;function Z(){var Lt=A.line+K;return Lt<u.first||Lt>=u.first+u.size?!1:(A=new M(Lt,A.ch,A.sticky),N=Rt(u,Lt))}function pe(Lt){var Dt;if(p=="codepoint"){var kt=N.text.charCodeAt(A.ch+(S>0?0:-1));if(isNaN(kt))Dt=null;else{var n0=S>0?kt>=55296&&kt<56320:kt>=56320&&kt<57343;Dt=new M(A.line,Math.max(0,Math.min(N.text.length,A.ch+S*(n0?2:1))),-S)}}else w?Dt=vj(u.cm,N,A,S):Dt=ux(N,A,S);if(Dt==null)if(!Lt&&Z())A=cx(w,u.cm,N,A.line,K);else return!1;else A=Dt;return!0}if(p=="char"||p=="codepoint")pe();else if(p=="column")pe(!0);else if(p=="word"||p=="group")for(var ge=null,Ge=p=="group",Oe=u.cm&&u.cm.getHelper(A,"wordChars"),nt=!0;!(S<0&&!pe(!nt));nt=!1){var ct=N.text.charAt(A.ch)||`
`,xt=Le(ct,Oe)?"w":Ge&&ct==`
`?"n":!Ge||/\s/.test(ct)?null:"p";if(Ge&&!nt&&!xt&&(xt="s"),ge&&ge!=xt){S<0&&(S=1,pe(),A.sticky="after");break}if(xt&&(ge=xt),S>0&&!pe(!nt))break}var Vt=Gm(u,A,F,L,!0);return Ae(F,Vt)&&(Vt.hitSide=!0),Vt}function ZF(u,A,S,p){var w=u.doc,F=A.left,L;if(p=="page"){var N=Math.min(u.display.wrapper.clientHeight,Be(u).innerHeight||w(u).documentElement.clientHeight),K=Math.max(N-.5*Cd(u.display),3);L=(S>0?A.bottom:A.top)+S*K}else p=="line"&&(L=S>0?A.bottom+3:A.top-3);for(var Z;Z=g0(u,F,L),!!Z.outside;){if(S<0?L<=0:L>=w.height){Z.hitSide=!0;break}L+=S*5}return Z}var an=function(u){this.cm=u,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new at,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};an.prototype.init=function(u){var A=this,S=this,p=S.cm,w=S.div=u.lineDiv;w.contentEditable=!0,QF(w,p.options.spellcheck,p.options.autocorrect,p.options.autocapitalize);function F(N){for(var K=N.target;K;K=K.parentNode){if(K==w)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(K.className))break}return!1}Je(w,"paste",function(N){!F(N)||a0(p,N)||KF(N,p)||c<=11&&setTimeout(jr(p,function(){return A.updateFromDOM()}),20)}),Je(w,"compositionstart",function(N){A.composing={data:N.data,done:!1}}),Je(w,"compositionupdate",function(N){A.composing||(A.composing={data:N.data,done:!1})}),Je(w,"compositionend",function(N){A.composing&&(N.data!=A.composing.data&&A.readFromDOMSoon(),A.composing.done=!0)}),Je(w,"touchstart",function(){return S.forceCompositionEnd()}),Je(w,"input",function(){A.composing||A.readFromDOMSoon()});function L(N){if(!(!F(N)||a0(p,N))){if(p.somethingSelected())Ym({lineWise:!1,text:p.getSelections()}),N.type=="cut"&&p.replaceSelection("",null,"cut");else if(p.options.lineWiseCopyCut){var K=qF(p);Ym({lineWise:!0,text:K.text}),N.type=="cut"&&p.operation(function(){p.setSelections(K.ranges,0,Ie),p.replaceSelection("",null,"cut")})}else return;if(N.clipboardData){N.clipboardData.clearData();var Z=xo.text.join(`
`);if(N.clipboardData.setData("Text",Z),N.clipboardData.getData("Text")==Z){N.preventDefault();return}}var pe=JF(),ge=pe.firstChild;p.display.lineSpace.insertBefore(pe,p.display.lineSpace.firstChild),ge.value=xo.text.join(`
`);var Ge=G(w.ownerDocument);se(ge),setTimeout(function(){p.display.lineSpace.removeChild(pe),Ge.focus(),Ge==w&&S.showPrimarySelection()},50)}}Je(w,"copy",L),Je(w,"cut",L)},an.prototype.screenReaderLabelChanged=function(u){u?this.div.setAttribute("aria-label",u):this.div.removeAttribute("aria-label")},an.prototype.prepareSelection=function(){var u=jD(this.cm,!1);return u.focus=G(this.div.ownerDocument)==this.div,u},an.prototype.showSelection=function(u,A){!u||!this.cm.display.view.length||((u.focus||A)&&this.showPrimarySelection(),this.showMultipleSelections(u))},an.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},an.prototype.showPrimarySelection=function(){var u=this.getSelection(),A=this.cm,S=A.doc.sel.primary(),p=S.from(),w=S.to();if(A.display.viewTo==A.display.viewFrom||p.line>=A.display.viewTo||w.line<A.display.viewFrom){u.removeAllRanges();return}var F=qm(A,u.anchorNode,u.anchorOffset),L=qm(A,u.focusNode,u.focusOffset);if(!(F&&!F.bad&&L&&!L.bad&&X(ze(F,L),p)==0&&X(Me(F,L),w)==0)){var N=A.display.view,K=p.line>=A.display.viewFrom&&$F(A,p)||{node:N[0].measure.map[2],offset:0},Z=w.line<A.display.viewTo&&$F(A,w);if(!Z){var pe=N[N.length-1].measure,ge=pe.maps?pe.maps[pe.maps.length-1]:pe.map;Z={node:ge[ge.length-1],offset:ge[ge.length-2]-ge[ge.length-3]}}if(!K||!Z){u.removeAllRanges();return}var Ge=u.rangeCount&&u.getRangeAt(0),Oe;try{Oe=U(K.node,K.offset,Z.offset,Z.node)}catch{}Oe&&(!i&&A.state.focused?(u.collapse(K.node,K.offset),Oe.collapsed||(u.removeAllRanges(),u.addRange(Oe))):(u.removeAllRanges(),u.addRange(Oe)),Ge&&u.anchorNode==null?u.addRange(Ge):i&&this.startGracePeriod()),this.rememberSelection()}},an.prototype.startGracePeriod=function(){var u=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){u.gracePeriod=!1,u.selectionChanged()&&u.cm.operation(function(){return u.cm.curOp.selectionChanged=!0})},20)},an.prototype.showMultipleSelections=function(u){P(this.cm.display.cursorDiv,u.cursors),P(this.cm.display.selectionDiv,u.selection)},an.prototype.rememberSelection=function(){var u=this.getSelection();this.lastAnchorNode=u.anchorNode,this.lastAnchorOffset=u.anchorOffset,this.lastFocusNode=u.focusNode,this.lastFocusOffset=u.focusOffset},an.prototype.selectionInEditor=function(){var u=this.getSelection();if(!u.rangeCount)return!1;var A=u.getRangeAt(0).commonAncestorContainer;return O(this.div,A)},an.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||G(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},an.prototype.blur=function(){this.div.blur()},an.prototype.getField=function(){return this.div},an.prototype.supportsTouch=function(){return!0},an.prototype.receivedFocus=function(){var u=this,A=this;this.selectionInEditor()?setTimeout(function(){return u.pollSelection()},20):ra(this.cm,function(){return A.cm.curOp.selectionChanged=!0});function S(){A.cm.state.focused&&(A.pollSelection(),A.polling.set(A.cm.options.pollInterval,S))}this.polling.set(this.cm.options.pollInterval,S)},an.prototype.selectionChanged=function(){var u=this.getSelection();return u.anchorNode!=this.lastAnchorNode||u.anchorOffset!=this.lastAnchorOffset||u.focusNode!=this.lastFocusNode||u.focusOffset!=this.lastFocusOffset},an.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var u=this.getSelection(),A=this.cm;if(C&&f&&this.cm.display.gutterSpecs.length&&jj(u.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var S=qm(A,u.anchorNode,u.anchorOffset),p=qm(A,u.focusNode,u.focusOffset);S&&p&&ra(A,function(){si(A.doc,vl(S,p),Ie),(S.bad||p.bad)&&(A.curOp.selectionChanged=!0)})}}},an.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var u=this.cm,A=u.display,S=u.doc.sel.primary(),p=S.from(),w=S.to();if(p.ch==0&&p.line>u.firstLine()&&(p=M(p.line-1,Rt(u.doc,p.line-1).length)),w.ch==Rt(u.doc,w.line).text.length&&w.line<u.lastLine()&&(w=M(w.line+1,0)),p.line<A.viewFrom||w.line>A.viewTo-1)return!1;var F,L,N;p.line==A.viewFrom||(F=Ku(u,p.line))==0?(L=o0(A.view[0].line),N=A.view[0].node):(L=o0(A.view[F].line),N=A.view[F-1].node.nextSibling);var K=Ku(u,w.line),Z,pe;if(K==A.view.length-1?(Z=A.viewTo-1,pe=A.lineDiv.lastChild):(Z=o0(A.view[K+1].line)-1,pe=A.view[K+1].node.previousSibling),!N)return!1;for(var ge=u.doc.splitLines(Gj(u,N,pe,L,Z)),Ge=Dn(u.doc,M(L,0),M(Z,Rt(u.doc,Z).text.length));ge.length>1&&Ge.length>1;)if(ne(ge)==ne(Ge))ge.pop(),Ge.pop(),Z--;else if(ge[0]==Ge[0])ge.shift(),Ge.shift(),L++;else break;for(var Oe=0,nt=0,ct=ge[0],xt=Ge[0],Vt=Math.min(ct.length,xt.length);Oe<Vt&&ct.charCodeAt(Oe)==xt.charCodeAt(Oe);)++Oe;for(var Lt=ne(ge),Dt=ne(Ge),kt=Math.min(Lt.length-(ge.length==1?Oe:0),Dt.length-(Ge.length==1?Oe:0));nt<kt&&Lt.charCodeAt(Lt.length-nt-1)==Dt.charCodeAt(Dt.length-nt-1);)++nt;if(ge.length==1&&Ge.length==1&&L==p.line)for(;Oe&&Oe>p.ch&&Lt.charCodeAt(Lt.length-nt-1)==Dt.charCodeAt(Dt.length-nt-1);)Oe--,nt++;ge[ge.length-1]=Lt.slice(0,Lt.length-nt).replace(/^\u200b+/,""),ge[0]=ge[0].slice(Oe).replace(/\u200b+$/,"");var n0=M(L,Oe),Qt=M(Z,Ge.length?ne(Ge).length-nt:0);if(ge.length>1||ge[0]||X(n0,Qt))return Ld(u.doc,ge,n0,Qt,"+input"),!0},an.prototype.ensurePolled=function(){this.forceCompositionEnd()},an.prototype.reset=function(){this.forceCompositionEnd()},an.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},an.prototype.readFromDOMSoon=function(){var u=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(u.readDOMTimeout=null,u.composing)if(u.composing.done)u.composing=null;else return;u.updateFromDOM()},80))},an.prototype.updateFromDOM=function(){var u=this;(this.cm.isReadOnly()||!this.pollContent())&&ra(this.cm,function(){return Hi(u.cm)})},an.prototype.setUneditable=function(u){u.contentEditable="false"},an.prototype.onKeyPress=function(u){u.charCode==0||this.composing||(u.preventDefault(),this.cm.isReadOnly()||jr(this.cm,px)(this.cm,String.fromCharCode(u.charCode==null?u.keyCode:u.charCode),0))},an.prototype.readOnlyChanged=function(u){this.div.contentEditable=String(u!="nocursor")},an.prototype.onContextMenu=function(){},an.prototype.resetPosition=function(){},an.prototype.needsContentAttribute=!0;function $F(u,A){var S=yd(u,A.line);if(!S||S.hidden)return null;var p=Rt(u.doc,A.line),w=Dm(S,p,A.line),F=ht(p,u.doc.direction),L="left";if(F){var N=Ce(F,A.ch);L=N%2?"right":"left"}var K=Tm(w.map,A.ch,L);return K.offset=K.collapse=="right"?K.end:K.start,K}function jj(u){for(var A=u;A;A=A.parentNode)if(/CodeMirror-gutter-wrapper/.test(A.className))return!0;return!1}function kd(u,A){return A&&(u.bad=!0),u}function Gj(u,A,S,p,w){var F="",L=!1,N=u.doc.lineSeparator(),K=!1;function Z(Oe){return function(nt){return nt.id==Oe}}function pe(){L&&(F+=N,K&&(F+=N),L=K=!1)}function ge(Oe){Oe&&(pe(),F+=Oe)}function Ge(Oe){if(Oe.nodeType==1){var nt=Oe.getAttribute("cm-text");if(nt){ge(nt);return}var ct=Oe.getAttribute("cm-marker"),xt;if(ct){var Vt=u.findMarks(M(p,0),M(w+1,0),Z(+ct));Vt.length&&(xt=Vt[0].find(0))&&ge(Dn(u.doc,xt.from,xt.to).join(N));return}if(Oe.getAttribute("contenteditable")=="false")return;var Lt=/^(pre|div|p|li|table|br)$/i.test(Oe.nodeName);if(!/^br$/i.test(Oe.nodeName)&&Oe.textContent.length==0)return;Lt&&pe();for(var Dt=0;Dt<Oe.childNodes.length;Dt++)Ge(Oe.childNodes[Dt]);/^(pre|p)$/i.test(Oe.nodeName)&&(K=!0),Lt&&(L=!0)}else Oe.nodeType==3&&ge(Oe.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ge(A),A!=S;)A=A.nextSibling,K=!1;return F}function qm(u,A,S){var p;if(A==u.display.lineDiv){if(p=u.display.lineDiv.childNodes[S],!p)return kd(u.clipPos(M(u.display.viewTo-1)),!0);A=null,S=0}else for(p=A;;p=p.parentNode){if(!p||p==u.display.lineDiv)return null;if(p.parentNode&&p.parentNode==u.display.lineDiv)break}for(var w=0;w<u.display.view.length;w++){var F=u.display.view[w];if(F.node==p)return Hj(F,A,S)}}function Hj(u,A,S){var p=u.text.firstChild,w=!1;if(!A||!O(p,A))return kd(M(o0(u.line),0),!0);if(A==p&&(w=!0,A=p.childNodes[S],S=0,!A)){var F=u.rest?ne(u.rest):u.line;return kd(M(o0(F),F.text.length),w)}var L=A.nodeType==3?A:null,N=A;for(!L&&A.childNodes.length==1&&A.firstChild.nodeType==3&&(L=A.firstChild,S&&(S=L.nodeValue.length));N.parentNode!=p;)N=N.parentNode;var K=u.measure,Z=K.maps;function pe(xt,Vt,Lt){for(var Dt=-1;Dt<(Z?Z.length:0);Dt++)for(var kt=Dt<0?K.map:Z[Dt],n0=0;n0<kt.length;n0+=3){var Qt=kt[n0+2];if(Qt==xt||Qt==Vt){var F0=o0(Dt<0?u.line:u.rest[Dt]),Sn=kt[n0]+Lt;return(Lt<0||Qt!=xt)&&(Sn=kt[n0+(Lt?1:0)]),M(F0,Sn)}}}var ge=pe(L,N,S);if(ge)return kd(ge,w);for(var Ge=N.nextSibling,Oe=L?L.nodeValue.length-S:0;Ge;Ge=Ge.nextSibling){if(ge=pe(Ge,Ge.firstChild,0),ge)return kd(M(ge.line,ge.ch-Oe),w);Oe+=Ge.textContent.length}for(var nt=N.previousSibling,ct=S;nt;nt=nt.previousSibling){if(ge=pe(nt,nt.firstChild,-1),ge)return kd(M(ge.line,ge.ch+ct),w);ct+=nt.textContent.length}}var cr=function(u){this.cm=u,this.prevInput="",this.pollingFast=!1,this.polling=new at,this.hasSelection=!1,this.composing=null};cr.prototype.init=function(u){var A=this,S=this,p=this.cm;this.createField(u);var w=this.textarea;u.wrapper.insertBefore(this.wrapper,u.wrapper.firstChild),v&&(w.style.width="0px"),Je(w,"input",function(){l&&c>=9&&A.hasSelection&&(A.hasSelection=null),S.poll()}),Je(w,"paste",function(L){a0(p,L)||KF(L,p)||(p.state.pasteIncoming=+new Date,S.fastPoll())});function F(L){if(!a0(p,L)){if(p.somethingSelected())Ym({lineWise:!1,text:p.getSelections()});else if(p.options.lineWiseCopyCut){var N=qF(p);Ym({lineWise:!0,text:N.text}),L.type=="cut"?p.setSelections(N.ranges,null,Ie):(S.prevInput="",w.value=N.text.join(`
`),se(w))}else return;L.type=="cut"&&(p.state.cutIncoming=+new Date)}}Je(w,"cut",F),Je(w,"copy",F),Je(u.scroller,"paste",function(L){if(!(yi(u,L)||a0(p,L))){if(!w.dispatchEvent){p.state.pasteIncoming=+new Date,S.focus();return}var N=new Event("paste");N.clipboardData=L.clipboardData,w.dispatchEvent(N)}}),Je(u.lineSpace,"selectstart",function(L){yi(u,L)||Xn(L)}),Je(w,"compositionstart",function(){var L=p.getCursor("from");S.composing&&S.composing.range.clear(),S.composing={start:L,range:p.markText(L,p.getCursor("to"),{className:"CodeMirror-composing"})}}),Je(w,"compositionend",function(){S.composing&&(S.poll(),S.composing.range.clear(),S.composing=null)})},cr.prototype.createField=function(u){this.wrapper=JF(),this.textarea=this.wrapper.firstChild},cr.prototype.screenReaderLabelChanged=function(u){u?this.textarea.setAttribute("aria-label",u):this.textarea.removeAttribute("aria-label")},cr.prototype.prepareSelection=function(){var u=this.cm,A=u.display,S=u.doc,p=jD(u);if(u.options.moveInputWithCursor){var w=ut(u,S.sel.primary().head,"div"),F=A.wrapper.getBoundingClientRect(),L=A.lineDiv.getBoundingClientRect();p.teTop=Math.max(0,Math.min(A.wrapper.clientHeight-10,w.top+L.top-F.top)),p.teLeft=Math.max(0,Math.min(A.wrapper.clientWidth-10,w.left+L.left-F.left))}return p},cr.prototype.showSelection=function(u){var A=this.cm,S=A.display;P(S.cursorDiv,u.cursors),P(S.selectionDiv,u.selection),u.teTop!=null&&(this.wrapper.style.top=u.teTop+"px",this.wrapper.style.left=u.teLeft+"px")},cr.prototype.reset=function(u){if(!(this.contextMenuPending||this.composing)){var A=this.cm;if(A.somethingSelected()){this.prevInput="";var S=A.getSelection();this.textarea.value=S,A.state.focused&&se(this.textarea),l&&c>=9&&(this.hasSelection=S)}else u||(this.prevInput=this.textarea.value="",l&&c>=9&&(this.hasSelection=null))}},cr.prototype.getField=function(){return this.textarea},cr.prototype.supportsTouch=function(){return!1},cr.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!D||G(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},cr.prototype.blur=function(){this.textarea.blur()},cr.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},cr.prototype.receivedFocus=function(){this.slowPoll()},cr.prototype.slowPoll=function(){var u=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){u.poll(),u.cm.state.focused&&u.slowPoll()})},cr.prototype.fastPoll=function(){var u=!1,A=this;A.pollingFast=!0;function S(){var p=A.poll();!p&&!u?(u=!0,A.polling.set(60,S)):(A.pollingFast=!1,A.slowPoll())}A.polling.set(20,S)},cr.prototype.poll=function(){var u=this,A=this.cm,S=this.textarea,p=this.prevInput;if(this.contextMenuPending||!A.state.focused||ft(S)&&!p&&!this.composing||A.isReadOnly()||A.options.disableInput||A.state.keySeq)return!1;var w=S.value;if(w==p&&!A.somethingSelected())return!1;if(l&&c>=9&&this.hasSelection===w||V&&/[\uf700-\uf7ff]/.test(w))return A.display.input.reset(),!1;if(A.doc.sel==A.display.selForContextMenu){var F=w.charCodeAt(0);if(F==8203&&!p&&(p="\u200B"),F==8666)return this.reset(),this.cm.execCommand("undo")}for(var L=0,N=Math.min(p.length,w.length);L<N&&p.charCodeAt(L)==w.charCodeAt(L);)++L;return ra(A,function(){px(A,w.slice(L),p.length-L,null,u.composing?"*compose":null),w.length>1e3||w.indexOf(`
`)>-1?S.value=u.prevInput="":u.prevInput=w,u.composing&&(u.composing.range.clear(),u.composing.range=A.markText(u.composing.start,A.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},cr.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},cr.prototype.onKeyPress=function(){l&&c>=9&&(this.hasSelection=null),this.fastPoll()},cr.prototype.onContextMenu=function(u){var A=this,S=A.cm,p=S.display,w=A.textarea;A.contextMenuPending&&A.contextMenuPending();var F=Xu(S,u),L=p.scroller.scrollTop;if(!F||g)return;var N=S.options.resetSelectionOnContextMenu;N&&S.doc.sel.contains(F)==-1&&jr(S,si)(S.doc,vl(F),Ie);var K=w.style.cssText,Z=A.wrapper.style.cssText,pe=A.wrapper.offsetParent.getBoundingClientRect();A.wrapper.style.cssText="position: static",w.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(u.clientY-pe.top-5)+"px; left: "+(u.clientX-pe.left-5)+`px;
      z-index: 1000; background: `+(l?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var ge;d&&(ge=w.ownerDocument.defaultView.scrollY),p.input.focus(),d&&w.ownerDocument.defaultView.scrollTo(null,ge),p.input.reset(),S.somethingSelected()||(w.value=A.prevInput=" "),A.contextMenuPending=Oe,p.selForContextMenu=S.doc.sel,clearTimeout(p.detectingSelectAll);function Ge(){if(w.selectionStart!=null){var ct=S.somethingSelected(),xt="\u200B"+(ct?w.value:"");w.value="\u21DA",w.value=xt,A.prevInput=ct?"":"\u200B",w.selectionStart=1,w.selectionEnd=xt.length,p.selForContextMenu=S.doc.sel}}function Oe(){if(A.contextMenuPending==Oe&&(A.contextMenuPending=!1,A.wrapper.style.cssText=Z,w.style.cssText=K,l&&c<9&&p.scrollbars.setScrollTop(p.scroller.scrollTop=L),w.selectionStart!=null)){(!l||l&&c<9)&&Ge();var ct=0,xt=function(){p.selForContextMenu==S.doc.sel&&w.selectionStart==0&&w.selectionEnd>0&&A.prevInput=="\u200B"?jr(S,SF)(S):ct++<10?p.detectingSelectAll=setTimeout(xt,500):(p.selForContextMenu=null,p.input.reset())};p.detectingSelectAll=setTimeout(xt,200)}}if(l&&c>=9&&Ge(),$){$t(u);var nt=function(){Wt(window,"mouseup",nt),setTimeout(Oe,20)};Je(window,"mouseup",nt)}else setTimeout(Oe,50)},cr.prototype.readOnlyChanged=function(u){u||this.reset(),this.textarea.disabled=u=="nocursor",this.textarea.readOnly=!!u},cr.prototype.setUneditable=function(){},cr.prototype.needsContentAttribute=!1;function zj(u,A){if(A=A?ye(A):{},A.value=u.value,!A.tabindex&&u.tabIndex&&(A.tabindex=u.tabIndex),!A.placeholder&&u.placeholder&&(A.placeholder=u.placeholder),A.autofocus==null){var S=G(u.ownerDocument);A.autofocus=S==u||u.getAttribute("autofocus")!=null&&S==document.body}function p(){u.value=N.getValue()}var w;if(u.form&&(Je(u.form,"submit",p),!A.leaveSubmitMethodAlone)){var F=u.form;w=F.submit;try{var L=F.submit=function(){p(),F.submit=w,F.submit(),F.submit=L}}catch{}}A.finishInit=function(K){K.save=p,K.getTextArea=function(){return u},K.toTextArea=function(){K.toTextArea=isNaN,p(),u.parentNode.removeChild(K.getWrapperElement()),u.style.display="",u.form&&(Wt(u.form,"submit",p),!A.leaveSubmitMethodAlone&&typeof u.form.submit=="function"&&(u.form.submit=w))}},u.style.display="none";var N=Un(function(K){return u.parentNode.insertBefore(K,u.nextSibling)},A);return N}function Wj(u){u.off=Wt,u.on=Je,u.wheelEventPixels=ZU,u.Doc=zi,u.splitLines=Ze,u.countColumn=We,u.findColumn=De,u.isWordChar=Fe,u.Pass=lt,u.signal=_t,u.Line=ma,u.changeEnd=wl,u.scrollbarModel=KD,u.Pos=M,u.cmpPos=X,u.modes=m0,u.mimeModes=D0,u.resolveMode=z0,u.getMode=Jr,u.modeExtensions=c0,u.extendMode=ai,u.copyState=mn,u.startState=Ur,u.innerMode=C0,u.commands=vf,u.keyMap=Ts,u.keyName=LF,u.isModifierKey=PF,u.lookupKey=Md,u.normalizeKeyMap=xj,u.StringStream=e0,u.SharedTextMarker=gf,u.TextMarker=El,u.LineWidget=Sf,u.e_preventDefault=Xn,u.e_stopPropagation=ki,u.e_stop=$t,u.addClass=re,u.contains=O,u.rmClass=I,u.keyNames=Cl}Ij(Un),Uj(Un);var Xj="iter insert remove copy getEditor constructor".split(" ");for(var Qm in zi.prototype)zi.prototype.hasOwnProperty(Qm)&&Ke(Xj,Qm)<0&&(Un.prototype[Qm]=function(u){return function(){return u.apply(this.doc,arguments)}}(zi.prototype[Qm]));return Vn(zi),Un.inputStyles={textarea:cr,contenteditable:an},Un.defineMode=function(u){!Un.defaults.mode&&u!="null"&&(Un.defaults.mode=u),f0.apply(this,arguments)},Un.defineMIME=jt,Un.defineMode("null",function(){return{token:function(u){return u.skipToEnd()}}}),Un.defineMIME("text/plain","null"),Un.defineExtension=function(u,A){Un.prototype[u]=A},Un.defineDocExtension=function(u,A){zi.prototype[u]=A},Un.fromTextArea=zj,Wj(Un),Un.version="5.65.7",Un})}(Vw)),Vw.exports}var _c=SD();(function(n,e){(function(t){t(SD())})(function(t){var r="CodeMirror-hint",i="CodeMirror-hint-active";t.showHint=function(_,v,C){if(!v)return _.showHint(C);C&&C.async&&(v.async=!0);var D={hint:v};if(C)for(var V in C)D[V]=C[V];return _.showHint(D)},t.defineExtension("showHint",function(_){_=l(this,this.getCursor("start"),_);var v=this.listSelections();if(!(v.length>1)){if(this.somethingSelected()){if(!_.hint.supportsSelection)return;for(var C=0;C<v.length;C++)if(v[C].head.line!=v[C].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var D=this.state.completionActive=new a(this,_);!D.options.hint||(t.signal(this,"startCompletion",this),D.update(!0))}}),t.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});function a(_,v){if(this.cm=_,this.options=v,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var C=this;_.on("cursorActivity",this.activityFunc=function(){C.cursorActivity()})}}var o=window.requestAnimationFrame||function(_){return setTimeout(_,1e3/60)},s=window.cancelAnimationFrame||clearTimeout;a.prototype={close:function(){!this.active()||(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&t.signal(this.data,"close"),this.widget&&this.widget.close(),t.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(_,v){var C=_.list[v],D=this;this.cm.operation(function(){C.hint?C.hint(D.cm,_,C):D.cm.replaceRange(c(C),C.from||_.from,C.to||_.to,"complete"),t.signal(_,"pick",C),D.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(s(this.debounce),this.debounce=0);var _=this.startPos;this.data&&(_=this.data.from);var v=this.cm.getCursor(),C=this.cm.getLine(v.line);if(v.line!=this.startPos.line||C.length-v.ch!=this.startLen-this.startPos.ch||v.ch<_.ch||this.cm.somethingSelected()||!v.ch||this.options.closeCharacters.test(C.charAt(v.ch-1)))this.close();else{var D=this;this.debounce=o(function(){D.update()}),this.widget&&this.widget.disable()}},update:function(_){if(this.tick!=null){var v=this,C=++this.tick;g(this.options.hint,this.cm,this.options,function(D){v.tick==C&&v.finishUpdate(D,_)})}},finishUpdate:function(_,v){this.data&&t.signal(this.data,"update");var C=this.widget&&this.widget.picked||v&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=_,_&&_.list.length&&(C&&_.list.length==1?this.pick(_,0):(this.widget=new f(this,_),t.signal(_,"shown")))}};function l(_,v,C){var D=_.options.hintOptions,V={};for(var H in E)V[H]=E[H];if(D)for(var H in D)D[H]!==void 0&&(V[H]=D[H]);if(C)for(var H in C)C[H]!==void 0&&(V[H]=C[H]);return V.hint.resolve&&(V.hint=V.hint.resolve(_,v)),V}function c(_){return typeof _=="string"?_:_.text}function d(_,v){var C={Up:function(){v.moveFocus(-1)},Down:function(){v.moveFocus(1)},PageUp:function(){v.moveFocus(-v.menuSize()+1,!0)},PageDown:function(){v.moveFocus(v.menuSize()-1,!0)},Home:function(){v.setFocus(0)},End:function(){v.setFocus(v.length-1)},Enter:v.pick,Tab:v.pick,Esc:v.close},D=/Mac/.test(navigator.platform);D&&(C["Ctrl-P"]=function(){v.moveFocus(-1)},C["Ctrl-N"]=function(){v.moveFocus(1)});var V=_.options.customKeys,H=V?{}:C;function R($,z){var I;typeof z!="string"?I=function(q){return z(q,v)}:C.hasOwnProperty(z)?I=C[z]:I=z,H[$]=I}if(V)for(var j in V)V.hasOwnProperty(j)&&R(j,V[j]);var te=_.options.extraKeys;if(te)for(var j in te)te.hasOwnProperty(j)&&R(j,te[j]);return H}function h(_,v){for(;v&&v!=_;){if(v.nodeName.toUpperCase()==="LI"&&v.parentNode==_)return v;v=v.parentNode}}function f(_,v){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=_,this.data=v,this.picked=!1;var C=this,D=_.cm,V=D.getInputField().ownerDocument,H=V.defaultView||V.parentWindow,R=this.hints=V.createElement("ul");R.setAttribute("role","listbox"),R.setAttribute("aria-expanded","true"),R.id=this.id;var j=_.cm.options.theme;R.className="CodeMirror-hints "+j,this.selectedHint=v.selectedHint||0;for(var te=v.list,$=0;$<te.length;++$){var z=R.appendChild(V.createElement("li")),I=te[$],q=r+($!=this.selectedHint?"":" "+i);I.className!=null&&(q=I.className+" "+q),z.className=q,$==this.selectedHint&&z.setAttribute("aria-selected","true"),z.id=this.id+"-"+$,z.setAttribute("role","option"),I.render?I.render(z,v,I):z.appendChild(V.createTextNode(I.displayText||c(I))),z.hintId=$}var P=_.options.container||V.body,ee=D.cursorCoords(_.options.alignWithWord?v.from:null),ce=ee.left,U=ee.bottom,O=!0,G=0,re=0;if(P!==V.body){var oe=["absolute","relative","fixed"].indexOf(H.getComputedStyle(P).position)!==-1,se=oe?P:P.offsetParent,be=se.getBoundingClientRect(),Be=V.body.getBoundingClientRect();G=be.left-Be.left-se.scrollLeft,re=be.top-Be.top-se.scrollTop}R.style.left=ce-G+"px",R.style.top=U-re+"px";var Te=H.innerWidth||Math.max(V.body.offsetWidth,V.documentElement.offsetWidth),ye=H.innerHeight||Math.max(V.body.offsetHeight,V.documentElement.offsetHeight);P.appendChild(R),D.getInputField().setAttribute("aria-autocomplete","list"),D.getInputField().setAttribute("aria-owns",this.id),D.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var We=_.options.moveOnOverlap?R.getBoundingClientRect():new DOMRect,at=_.options.paddingForScrollbar?R.scrollHeight>R.clientHeight+1:!1,Ke;setTimeout(function(){Ke=D.getScrollInfo()});var tt=We.bottom-ye;if(tt>0){var lt=We.bottom-We.top,Ie=ee.top-(ee.bottom-We.top);if(Ie-lt>0)R.style.top=(U=ee.top-lt-re)+"px",O=!1;else if(lt>ye){R.style.height=ye-5+"px",R.style.top=(U=ee.bottom-We.top-re)+"px";var Ue=D.getCursor();v.from.ch!=Ue.ch&&(ee=D.cursorCoords(Ue),R.style.left=(ce=ee.left-G)+"px",We=R.getBoundingClientRect())}}var k=We.right-Te;if(at&&(k+=D.display.nativeBarWidth),k>0&&(We.right-We.left>Te&&(R.style.width=Te-5+"px",k-=We.right-We.left-Te),R.style.left=(ce=Math.max(ee.left-k-G,0))+"px"),at)for(var De=R.firstChild;De;De=De.nextSibling)De.style.paddingRight=D.display.nativeBarWidth+"px";if(D.addKeyMap(this.keyMap=d(_,{moveFocus:function(ne,fe){C.changeActive(C.selectedHint+ne,fe)},setFocus:function(ne){C.changeActive(ne)},menuSize:function(){return C.screenAmount()},length:te.length,close:function(){_.close()},pick:function(){C.pick()},data:v})),_.options.closeOnUnfocus){var we;D.on("blur",this.onBlur=function(){we=setTimeout(function(){_.close()},100)}),D.on("focus",this.onFocus=function(){clearTimeout(we)})}D.on("scroll",this.onScroll=function(){var ne=D.getScrollInfo(),fe=D.getWrapperElement().getBoundingClientRect();Ke||(Ke=D.getScrollInfo());var He=U+Ke.top-ne.top,ae=He-(H.pageYOffset||(V.documentElement||V.body).scrollTop);if(O||(ae+=R.offsetHeight),ae<=fe.top||ae>=fe.bottom)return _.close();R.style.top=He+"px",R.style.left=ce+Ke.left-ne.left+"px"}),t.on(R,"dblclick",function(ne){var fe=h(R,ne.target||ne.srcElement);fe&&fe.hintId!=null&&(C.changeActive(fe.hintId),C.pick())}),t.on(R,"click",function(ne){var fe=h(R,ne.target||ne.srcElement);fe&&fe.hintId!=null&&(C.changeActive(fe.hintId),_.options.completeOnSingleClick&&C.pick())}),t.on(R,"mousedown",function(){setTimeout(function(){D.focus()},20)});var le=this.getSelectedHintRange();return(le.from!==0||le.to!==0)&&this.scrollToActive(),t.signal(v,"select",te[this.selectedHint],R.childNodes[this.selectedHint]),!0}f.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var _=this.completion.cm.getInputField();_.removeAttribute("aria-activedescendant"),_.removeAttribute("aria-owns");var v=this.completion.cm;this.completion.options.closeOnUnfocus&&(v.off("blur",this.onBlur),v.off("focus",this.onFocus)),v.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var _=this;this.keyMap={Enter:function(){_.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(_,v){if(_>=this.data.list.length?_=v?this.data.list.length-1:0:_<0&&(_=v?0:this.data.list.length-1),this.selectedHint!=_){var C=this.hints.childNodes[this.selectedHint];C&&(C.className=C.className.replace(" "+i,""),C.removeAttribute("aria-selected")),C=this.hints.childNodes[this.selectedHint=_],C.className+=" "+i,C.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",C.id),this.scrollToActive(),t.signal(this.data,"select",this.data.list[this.selectedHint],C)}},scrollToActive:function(){var _=this.getSelectedHintRange(),v=this.hints.childNodes[_.from],C=this.hints.childNodes[_.to],D=this.hints.firstChild;v.offsetTop<this.hints.scrollTop?this.hints.scrollTop=v.offsetTop-D.offsetTop:C.offsetTop+C.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=C.offsetTop+C.offsetHeight-this.hints.clientHeight+D.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var _=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-_),to:Math.min(this.data.list.length-1,this.selectedHint+_)}}};function m(_,v){if(!_.somethingSelected())return v;for(var C=[],D=0;D<v.length;D++)v[D].supportsSelection&&C.push(v[D]);return C}function g(_,v,C,D){if(_.async)_(v,D,C);else{var V=_(v,C);V&&V.then?V.then(D):D(V)}}function x(_,v){var C=_.getHelpers(v,"hint"),D;if(C.length){var V=function(H,R,j){var te=m(H,C);function $(z){if(z==te.length)return R(null);g(te[z],H,j,function(I){I&&I.list.length>0?R(I):$(z+1)})}$(0)};return V.async=!0,V.supportsSelection=!0,V}else return(D=_.getHelper(_.getCursor(),"hintWords"))?function(H){return t.hint.fromList(H,{words:D})}:t.hint.anyword?function(H,R){return t.hint.anyword(H,R)}:function(){}}t.registerHelper("hint","auto",{resolve:x}),t.registerHelper("hint","fromList",function(_,v){var C=_.getCursor(),D=_.getTokenAt(C),V,H=t.Pos(C.line,D.start),R=C;D.start<C.ch&&/\w/.test(D.string.charAt(C.ch-D.start-1))?V=D.string.substr(0,C.ch-D.start):(V="",H=C);for(var j=[],te=0;te<v.words.length;te++){var $=v.words[te];$.slice(0,V.length)==V&&j.push($)}if(j.length)return{list:j,from:H,to:R}}),t.commands.autocomplete=t.showHint;var E={hint:t.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};t.defineOption("hintOptions",null)})})();_c.defineMode("mips-pp64",function(){const n=/\.(ascii|asciiz|align|beginstatic|byte|definelabel|else|elseif|endif|endstatic|fill|float|halfword|if|skip|word)\b/i,e=/\$?(a([0-3]|t)|f([0-9][1-9]?|p)|g(p)|k([0-1])|r(0|a)|s([0-8]|p)|t(\d)|v([0-1])|zero)\b/i,t=/\b(abs\.s|abs\.d|add|add\.s|add\.d|addi|addiu|addu|and|andi|bc1f|bc1fl|bc1t|bc1tl|beq|beql|beqz|bgez|bgezal|bgezall|bgezl|bgtz|bgtzl|blez|blezl|bltz|bltzal|bltzall|bltzl|bne|bnel|bnez|bnezl|break|c\.f\.s|c\.un\.s|c\.eq\.s|c\.ueq\.s|c\.olt\.s|c\.ult\.s|c\.ole\.s|c\.ule\.s|c\.sf\.s|c\.ngle\.s|c\.seq\.s|c\.ngl\.s|c\.lt\.s|c\.nge\.s|c\.le\.s|c\.ngt\.s|c\.f\.d|c\.un\.d|c\.eq\.d|c\.ueq\.d|c\.olt\.d|c\.ult\.d|c\.ole\.d|c\.ule\.d|c\.sf\.d|c\.ngle\.d|c\.seq\.d|c\.ngl\.d|c\.lt\.d|c\.nge\.d|c\.le\.d|c\.ngt\.d|ceil\.l\.s|ceil\.l\.d|ceil\.w\.s|ceil\.w\.d|cfc1|ctc1|cop0|cop1|cop2|cop3|cvt\.d\.s|cvt\.d\.w|cvt\.d\.l|cvt\.l\.d|cvt\.l\.d|cvt\.s\.d|cvt\.s\.w|cvt\.s\.l|cvt\.w\.s|cvt\.w\.d|dadd|daddi|daddiu|daddu|ddiv|ddivu|div|div\.s|div\.d|divu|dmfc1|dmult|dmultu|dmtc1|dsll|dsll32|dsllv|dsra|dsra32|dsrav|dsrl|dsrl32|dsrlv|dsub|dsubu|floor\.l\.s|floor\.l\.d|floor\.w\.s|floor\.w\.d|j|jal|jalr|jr|lb|lbu|ld|ldc1|ldc2|ldl|ldr|lh|lhu|li|ll|lld|lui|lw|lwc1|lwc2|lwc3|lwl|lwr|lwu|madd\.s|madd\.d|mfc1|mfhi|mflo|mov\.s|mov\.d|move|movt|msub\.s|msub\.d|mtc1|mthi|mtlo|mul\.s|mul\.d|mult|multu|neg\.s|neg\.d|nop|nor|or|ori|round\.l\.s|round\.l\.d|round\.w\.s|round\.w\.d|sb|sc|scd|sd|sdc1|sdc2|sdl|sdr|sh|sll|sllv|slt|slti|sltiu|sltu|sqrt\.s|sqrt\.d|sra|srav|srl|srlv|sub|sub\.s|sub\.d|subu|sw|swc1|swc2|swc3|swl|swr|sync|syscall|teq|teqi|tge|tgei|tgeiu|tgeu|tlt|tlti|tltiu|tltu|tne|tnei|trunc\.l\.s|trunc\.l\.d|trunc\.w\.s|trunc\.w\.d|xor|xori)\b/i,r=/\b(0x[\da-f]+|o[0-7]+|b[0-1]+|\d+)\b/i;return{startState:function(){return{blockComment:!1}},token:function(i,a){if(i.eatSpace())return null;let o;if(a.blockComment||i.match("/*")){a.blockComment=!0;let s=!1;for(;o=i.next();)if(o==="/"&&s){a.blockComment=!1;break}else s=o==="*";return"comment"}if(i.eat(";")||i.match("//"))return i.skipToEnd(),"comment";if(i.eat('"')){for(;(o=i.next())&&o!=='"';);return"string"}if(i.eat(".")){if(i.eatWhile(/\w/))return o=i.current(),n.test(o)?"def":null}else if(i.eatWhile(/[$\w.]/)){if(o=i.current(),t.test(o)){let s="keyword";return o.toLowerCase()==="nop"&&(s+=" nop"),s}if(e.test(o))return"atom";if(r.test(o))return"number"}return i.next(),null}}});_c.registerHelper("hint","mips-pp64",function(n){const e=n.getCursor(),t=n.getTokenAt(e),r=t.string,i=t.start,a=e.ch,o=n.getLine(e.line);if(o[0]===".")return{list:["ascii","asciiz","align","byte","definelabel","else","elseif","endif","fill","float","halfword","if","skip","word"],from:_c.Pos(e.line,1),to:_c.Pos(e.line,a)};const s=eve();function l(m,g){if(!m.length)return[];if(m.length===1)return Vg(m[0],g);let x=Vg(m[0],g);for(let E=0;E<m.length-1;E++){const _=Vg(m[E+1],g);x=aG(x,_,(v,C)=>v.name===C.name)}return x}if(/^(j|jal)\s+/i.test(o)){let m=l(s,"code");return h(m)}if(/^\w+\s+/.test(o)){let m=l(s);return h(m)}function h(m){let g=m.map(E=>E.name),x=1;return r.trim()&&(x=r.lastIndexOf("(")+1,r.substring(x)&&(g=f(r,g))),{list:g.sort(),from:_c.Pos(e.line,i+x),to:_c.Pos(e.line,a)}}function f(m,g){return g.filter(x=>x.startsWith(m))}});(function(n,e){(function(t){t(SD())})(function(t){function r(O,G,re,oe,se,be){this.indented=O,this.column=G,this.type=re,this.info=oe,this.align=se,this.prev=be}function i(O,G,re,oe){var se=O.indented;return O.context&&O.context.type=="statement"&&re!="statement"&&(se=O.context.indented),O.context=new r(se,G,re,oe,null,O.context)}function a(O){var G=O.context.type;return(G==")"||G=="]"||G=="}")&&(O.indented=O.context.indented),O.context=O.context.prev}function o(O,G,re){if(G.prevToken=="variable"||G.prevToken=="type"||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(O.string.slice(0,re))||G.typeAtEndOfLine&&O.column()==O.indentation())return!0}function s(O){for(;;){if(!O||O.type=="top")return!0;if(O.type=="}"&&O.prev.info!="namespace")return!1;O=O.prev}}t.defineMode("clike",function(O,G){var re=O.indentUnit,oe=G.statementIndentUnit||re,se=G.dontAlignCalls,be=G.keywords||{},Be=G.types||{},Te=G.builtin||{},ye=G.blockKeywords||{},We=G.defKeywords||{},at=G.atoms||{},Ke=G.hooks||{},tt=G.multiLineStrings,lt=G.indentStatements!==!1,Ie=G.indentSwitch!==!1,Ue=G.namespaceSeparator,k=G.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,De=G.numberStart||/[\d\.]/,we=G.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,le=G.isOperatorChar||/[+\-*&%=<>!?|\/]/,ne=G.isIdentifierChar||/[\w\$_\xa1-\uffff]/,fe=G.isReservedIdentifier||!1,He,ae;function Y(Re,rt){var Ee=Re.next();if(Ke[Ee]){var ve=Ke[Ee](Re,rt);if(ve!==!1)return ve}if(Ee=='"'||Ee=="'")return rt.tokenize=_e(Ee),rt.tokenize(Re,rt);if(De.test(Ee)){if(Re.backUp(1),Re.match(we))return"number";Re.next()}if(k.test(Ee))return He=Ee,null;if(Ee=="/"){if(Re.eat("*"))return rt.tokenize=Fe,Fe(Re,rt);if(Re.eat("/"))return Re.skipToEnd(),"comment"}if(le.test(Ee)){for(;!Re.match(/^\/[\/*]/,!1)&&Re.eat(le););return"operator"}if(Re.eatWhile(ne),Ue)for(;Re.match(Ue);)Re.eatWhile(ne);var $e=Re.current();return c(be,$e)?(c(ye,$e)&&(He="newstatement"),c(We,$e)&&(ae=!0),"keyword"):c(Be,$e)?"type":c(Te,$e)||fe&&fe($e)?(c(ye,$e)&&(He="newstatement"),"builtin"):c(at,$e)?"atom":"variable"}function _e(Re){return function(rt,Ee){for(var ve=!1,$e,gt=!1;($e=rt.next())!=null;){if($e==Re&&!ve){gt=!0;break}ve=!ve&&$e=="\\"}return(gt||!(ve||tt))&&(Ee.tokenize=null),"string"}}function Fe(Re,rt){for(var Ee=!1,ve;ve=Re.next();){if(ve=="/"&&Ee){rt.tokenize=null;break}Ee=ve=="*"}return"comment"}function Le(Re,rt){G.typeFirstDefinitions&&Re.eol()&&s(rt.context)&&(rt.typeAtEndOfLine=o(Re,rt,Re.pos))}return{startState:function(Re){return{tokenize:null,context:new r((Re||0)-re,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(Re,rt){var Ee=rt.context;if(Re.sol()&&(Ee.align==null&&(Ee.align=!1),rt.indented=Re.indentation(),rt.startOfLine=!0),Re.eatSpace())return Le(Re,rt),null;He=ae=null;var ve=(rt.tokenize||Y)(Re,rt);if(ve=="comment"||ve=="meta")return ve;if(Ee.align==null&&(Ee.align=!0),He==";"||He==":"||He==","&&Re.match(/^\s*(?:\/\/.*)?$/,!1))for(;rt.context.type=="statement";)a(rt);else if(He=="{")i(rt,Re.column(),"}");else if(He=="[")i(rt,Re.column(),"]");else if(He=="(")i(rt,Re.column(),")");else if(He=="}"){for(;Ee.type=="statement";)Ee=a(rt);for(Ee.type=="}"&&(Ee=a(rt));Ee.type=="statement";)Ee=a(rt)}else He==Ee.type?a(rt):lt&&((Ee.type=="}"||Ee.type=="top")&&He!=";"||Ee.type=="statement"&&He=="newstatement")&&i(rt,Re.column(),"statement",Re.current());if(ve=="variable"&&(rt.prevToken=="def"||G.typeFirstDefinitions&&o(Re,rt,Re.start)&&s(rt.context)&&Re.match(/^\s*\(/,!1))&&(ve="def"),Ke.token){var $e=Ke.token(Re,rt,ve);$e!==void 0&&(ve=$e)}return ve=="def"&&G.styleDefs===!1&&(ve="variable"),rt.startOfLine=!1,rt.prevToken=ae?"def":ve||He,Le(Re,rt),ve},indent:function(Re,rt){if(Re.tokenize!=Y&&Re.tokenize!=null||Re.typeAtEndOfLine)return t.Pass;var Ee=Re.context,ve=rt&&rt.charAt(0),$e=ve==Ee.type;if(Ee.type=="statement"&&ve=="}"&&(Ee=Ee.prev),G.dontIndentStatements)for(;Ee.type=="statement"&&G.dontIndentStatements.test(Ee.info);)Ee=Ee.prev;if(Ke.indent){var gt=Ke.indent(Re,Ee,rt,re);if(typeof gt=="number")return gt}var St=Ee.prev&&Ee.prev.info=="switch";if(G.allmanIndentation&&/[{(]/.test(ve)){for(;Ee.type!="top"&&Ee.type!="}";)Ee=Ee.prev;return Ee.indented}return Ee.type=="statement"?Ee.indented+(ve=="{"?0:oe):Ee.align&&(!se||Ee.type!=")")?Ee.column+($e?0:1):Ee.type==")"&&!$e?Ee.indented+oe:Ee.indented+($e?0:re)+(!$e&&St&&!/^(?:case|default)\b/.test(rt)?re:0)},electricInput:Ie?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:"//",fold:"brace"}});function l(O){for(var G={},re=O.split(" "),oe=0;oe<re.length;++oe)G[re[oe]]=!0;return G}function c(O,G){return typeof O=="function"?O(G):O.propertyIsEnumerable(G)}var d="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile inline restrict asm fortran",h="alignas alignof and and_eq audit axiom bitand bitor catch class compl concept constexpr const_cast decltype delete dynamic_cast explicit export final friend import module mutable namespace new noexcept not not_eq operator or or_eq override private protected public reinterpret_cast requires static_assert static_cast template this thread_local throw try typeid typename using virtual xor xor_eq",f="bycopy byref in inout oneway out self super atomic nonatomic retain copy readwrite readonly strong weak assign typeof nullable nonnull null_resettable _cmd @interface @implementation @end @protocol @encode @property @synthesize @dynamic @class @public @package @private @protected @required @optional @try @catch @finally @import @selector @encode @defs @synchronized @autoreleasepool @compatibility_alias @available",m="FOUNDATION_EXPORT FOUNDATION_EXTERN NS_INLINE NS_FORMAT_FUNCTION  NS_RETURNS_RETAINEDNS_ERROR_ENUM NS_RETURNS_NOT_RETAINED NS_RETURNS_INNER_POINTER NS_DESIGNATED_INITIALIZER NS_ENUM NS_OPTIONS NS_REQUIRES_NIL_TERMINATION NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_SWIFT_NAME NS_REFINED_FOR_SWIFT",g=l("int long char short double float unsigned signed void bool"),x=l("SEL instancetype id Class Protocol BOOL");function E(O){return c(g,O)||/.+_t$/.test(O)}function _(O){return E(O)||c(x,O)}var v="case do else for if switch while struct enum union",C="struct enum union";function D(O,G){if(!G.startOfLine)return!1;for(var re,oe=null;re=O.peek();){if(re=="\\"&&O.match(/^.$/)){oe=D;break}else if(re=="/"&&O.match(/^\/[\/\*]/,!1))break;O.next()}return G.tokenize=oe,"meta"}function V(O,G){return G.prevToken=="type"?"type":!1}function H(O){return!O||O.length<2||O[0]!="_"?!1:O[1]=="_"||O[1]!==O[1].toLowerCase()}function R(O){return O.eatWhile(/[\w\.']/),"number"}function j(O,G){if(O.backUp(1),O.match(/^(?:R|u8R|uR|UR|LR)/)){var re=O.match(/^"([^\s\\()]{0,16})\(/);return re?(G.cpp11RawStringDelim=re[1],G.tokenize=z,z(O,G)):!1}return O.match(/^(?:u8|u|U|L)/)?O.match(/^["']/,!1)?"string":!1:(O.next(),!1)}function te(O){var G=/(\w+)::~?(\w+)$/.exec(O);return G&&G[1]==G[2]}function $(O,G){for(var re;(re=O.next())!=null;)if(re=='"'&&!O.eat('"')){G.tokenize=null;break}return"string"}function z(O,G){var re=G.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),oe=O.match(new RegExp(".*?\\)"+re+'"'));return oe?G.tokenize=null:O.skipToEnd(),"string"}function I(O,G){typeof O=="string"&&(O=[O]);var re=[];function oe(be){if(be)for(var Be in be)be.hasOwnProperty(Be)&&re.push(Be)}oe(G.keywords),oe(G.types),oe(G.builtin),oe(G.atoms),re.length&&(G.helperType=O[0],t.registerHelper("hintWords",O[0],re));for(var se=0;se<O.length;++se)t.defineMIME(O[se],G)}I(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:l(d),types:E,blockKeywords:l(v),defKeywords:l(C),typeFirstDefinitions:!0,atoms:l("NULL true false"),isReservedIdentifier:H,hooks:{"#":D,"*":V},modeProps:{fold:["brace","include"]}}),I(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:l(d+" "+h),types:E,blockKeywords:l(v+" class try catch"),defKeywords:l(C+" class namespace"),typeFirstDefinitions:!0,atoms:l("true false NULL nullptr"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,isReservedIdentifier:H,hooks:{"#":D,"*":V,u:j,U:j,L:j,R:j,0:R,1:R,2:R,3:R,4:R,5:R,6:R,7:R,8:R,9:R,token:function(O,G,re){if(re=="variable"&&O.peek()=="("&&(G.prevToken==";"||G.prevToken==null||G.prevToken=="}")&&te(O.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),I("text/x-java",{name:"clike",keywords:l("abstract assert break case catch class const continue default do else enum extends final finally for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:l("var byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:l("catch class do else finally for if switch try while"),defKeywords:l("class interface enum @interface"),typeFirstDefinitions:!0,atoms:l("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(O){return O.match("interface",!1)?!1:(O.eatWhile(/[\w\$_]/),"meta")},'"':function(O,G){return O.match(/""$/)?(G.tokenize=q,G.tokenize(O,G)):!1}},modeProps:{fold:["brace","import"]}}),I("text/x-csharp",{name:"clike",keywords:l("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get window group into join let orderby partial remove select set value var yield"),types:l("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:l("catch class do else finally for foreach if struct switch try while"),defKeywords:l("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:l("true false null"),hooks:{"@":function(O,G){return O.eat('"')?(G.tokenize=$,$(O,G)):(O.eatWhile(/[\w\$_]/),"meta")}}});function q(O,G){for(var re=!1;!O.eol();){if(!re&&O.match('"""')){G.tokenize=null;break}re=O.next()=="\\"&&!re}return"string"}function P(O){return function(G,re){for(var oe;oe=G.next();)if(oe=="*"&&G.eat("/"))if(O==1){re.tokenize=null;break}else return re.tokenize=P(O-1),re.tokenize(G,re);else if(oe=="/"&&G.eat("*"))return re.tokenize=P(O+1),re.tokenize(G,re);return"comment"}}I("text/x-scala",{name:"clike",keywords:l("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:l("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:l("catch class enum do else finally for forSome if match switch try while"),defKeywords:l("class enum def object package trait type val var"),atoms:l("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(O){return O.eatWhile(/[\w\$_]/),"meta"},'"':function(O,G){return O.match('""')?(G.tokenize=q,G.tokenize(O,G)):!1},"'":function(O){return O.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(O,G){var re=G.context;return re.type=="}"&&re.align&&O.eat(">")?(G.context=new r(re.indented,re.column,re.type,re.info,null,re.prev),"operator"):!1},"/":function(O,G){return O.eat("*")?(G.tokenize=P(1),G.tokenize(O,G)):!1}},modeProps:{closeBrackets:{pairs:'()[]{}""',triples:'"'}}});function ee(O){return function(G,re){for(var oe=!1,se,be=!1;!G.eol();){if(!O&&!oe&&G.match('"')){be=!0;break}if(O&&G.match('"""')){be=!0;break}se=G.next(),!oe&&se=="$"&&G.match("{")&&G.skipTo("}"),oe=!oe&&se=="\\"&&!O}return(be||!O)&&(re.tokenize=null),"string"}}I("text/x-kotlin",{name:"clike",keywords:l("package as typealias class interface this super val operator var fun for is in This throw return annotation break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend actual expect setparam value"),types:l("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void Annotation Any BooleanArray ByteArray Char CharArray DeprecationLevel DoubleArray Enum FloatArray Function Int IntArray Lazy LazyThreadSafetyMode LongArray Nothing ShortArray Unit"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+(\.\d+)?|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:l("catch class do else finally for if where try while enum"),defKeywords:l("class val var object interface fun"),atoms:l("true false null this"),hooks:{"@":function(O){return O.eatWhile(/[\w\$_]/),"meta"},"*":function(O,G){return G.prevToken=="."?"variable":"operator"},'"':function(O,G){return G.tokenize=ee(O.match('""')),G.tokenize(O,G)},"/":function(O,G){return O.eat("*")?(G.tokenize=P(1),G.tokenize(O,G)):!1},indent:function(O,G,re,oe){var se=re&&re.charAt(0);if((O.prevToken=="}"||O.prevToken==")")&&re=="")return O.indented;if(O.prevToken=="operator"&&re!="}"&&O.context.type!="}"||O.prevToken=="variable"&&se=="."||(O.prevToken=="}"||O.prevToken==")")&&se==".")return oe*2+G.indented;if(G.align&&G.type=="}")return G.indented+(O.context.type==(re||"").charAt(0)?0:oe)}},modeProps:{closeBrackets:{triples:'"'}}}),I(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:l("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:l("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:l("for while do if else struct"),builtin:l("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:l("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TextureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":D},modeProps:{fold:["brace","include"]}}),I("text/x-nesc",{name:"clike",keywords:l(d+" as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:E,blockKeywords:l(v),atoms:l("null true false"),hooks:{"#":D},modeProps:{fold:["brace","include"]}}),I("text/x-objectivec",{name:"clike",keywords:l(d+" "+f),types:_,builtin:l(m),blockKeywords:l(v+" @synthesize @try @catch @finally @autoreleasepool @synchronized"),defKeywords:l(C+" @interface @implementation @protocol @class"),dontIndentStatements:/^@.*$/,typeFirstDefinitions:!0,atoms:l("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:H,hooks:{"#":D,"*":V},modeProps:{fold:["brace","include"]}}),I("text/x-objectivec++",{name:"clike",keywords:l(d+" "+f+" "+h),types:_,builtin:l(m),blockKeywords:l(v+" @synthesize @try @catch @finally @autoreleasepool @synchronized class try catch"),defKeywords:l(C+" @interface @implementation @protocol @class class namespace"),dontIndentStatements:/^@.*$|^template$/,typeFirstDefinitions:!0,atoms:l("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:H,hooks:{"#":D,"*":V,u:j,U:j,L:j,R:j,0:R,1:R,2:R,3:R,4:R,5:R,6:R,7:R,8:R,9:R,token:function(O,G,re){if(re=="variable"&&O.peek()=="("&&(G.prevToken==";"||G.prevToken==null||G.prevToken=="}")&&te(O.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),I("text/x-squirrel",{name:"clike",keywords:l("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:E,blockKeywords:l("case catch class else for foreach if switch try while"),defKeywords:l("function local class"),typeFirstDefinitions:!0,atoms:l("true false null"),hooks:{"#":D},modeProps:{fold:["brace","include"]}});var ce=null;function U(O){return function(G,re){for(var oe=!1,se,be=!1;!G.eol();){if(!oe&&G.match('"')&&(O=="single"||G.match('""'))){be=!0;break}if(!oe&&G.match("``")){ce=U(O),be=!0;break}se=G.next(),oe=O=="single"&&!oe&&se=="\\"}return be&&(re.tokenize=null),"string"}}I("text/x-ceylon",{name:"clike",keywords:l("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(O){var G=O.charAt(0);return G===G.toUpperCase()&&G!==G.toLowerCase()},blockKeywords:l("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:l("class dynamic function interface module object package value"),builtin:l("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:l("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(O){return O.eatWhile(/[\w\$_]/),"meta"},'"':function(O,G){return G.tokenize=U(O.match('""')?"triple":"single"),G.tokenize(O,G)},"`":function(O,G){return!ce||!O.match("`")?!1:(G.tokenize=ce,ce=null,G.tokenize(O,G))},"'":function(O){return O.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(O,G,re){if((re=="variable"||re=="type")&&G.prevToken==".")return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})})})();class t_ extends Ne.exports.Component{constructor(){super(...arguments),this.el=null,this.codemirror=null,this.onInternalValueChanged=(e,t)=>{this.props.onChange&&t.origin!=="setValue"&&this.props.onChange(e.getValue(),t)}}render(){let e=this.props.className;return this.props.readOnly&&(e+=" CodeMirror-readonly"),B("div",{ref:t=>{this.el=t},className:e})}componentDidMount(){const e=this.el;this.codemirror=_c(function(t){e.appendChild(t)},{mode:ove(this.props.mode),indentUnit:sve(this.props.mode),value:this.props.value||this.props.defaultValue||"",extraKeys:{"Ctrl-Space":"autocomplete"},readOnly:this.props.readOnly||!1,viewportMargin:3e3}),this.codemirror.on("change",this.onInternalValueChanged)}componentWillUnmount(){this.codemirror=null}componentDidUpdate(e){this.codemirror&&this.props.value!==void 0&&this.props.value!==e.value&&P3(this.codemirror.getValue())!==P3(this.props.value)&&this.codemirror.setValue(this.props.value)}}function ove(n){switch(n){case"c":return{name:"text/x-csrc"};case"mips-pp64":default:return"mips-pp64"}}function sve(n){switch(n){case"c":return 4;case"mips-pp64":default:return 2}}const lve=`; NAME:
; GAMES:
; EXECUTION: Direct

ADDIU SP SP -4
SW RA 0(SP)

; Your code here
; For code examples, see:
; https://github.com/PartyPlanner64/events

LW RA 0(SP)
JR RA
ADDIU SP SP 4`;class uve extends Ne.exports.Component{constructor(e){super(e),this.onEventNameChange=r=>{const i={...this.state,eventName:r};this.setState({eventName:r}),this.syncTextToStateVars(i,this.state.asm)},this.onAsmChange=r=>{this.setState({asm:r}),this.syncStateVarsToText(r)},this.onGameToggleClicked=(r,i)=>{const a=this.state.supportedGames,o=a.indexOf(r);let s;o===-1&&i?(this.setState({supportedGames:[...a,r]}),s={...this.state},s.supportedGames=[...a,r]):o>=0&&!i&&(a.splice(o,1),this.setState({supportedGames:a}),s={...this.state},s.supportedGames=a),s&&this.syncTextToStateVars(s,this.state.asm)},this.onExecTypeToggleClicked=(r,i)=>{let a={...this.state};a.executionType=r,this.setState({executionType:r}),this.syncTextToStateVars(a,this.state.asm)},this.onAddEventParameter=r=>{let i={...this.state};i.parameters=[...this.state.parameters,r],this.setState(i),this.syncTextToStateVars(i,this.state.asm)},this.onRemoveEventParameter=r=>{let i={...this.state};i.parameters=this.state.parameters.filter(a=>a.name!==r.name),this.setState(i),this.syncTextToStateVars(i,this.state.asm)},this.getEventName=()=>this.state.eventName,this.getSupportedGames=()=>this.state.supportedGames,this.getExecutionType=()=>this.state.executionType,this.getEventCode=()=>this.state.asm,this.syncTextToStateVars=(r,i)=>{let a=cve(i,["NAME","GAMES","EXECUTION","PARAM"]);a=`
`+a,a=dve(a,"PARAM",r.parameters.map(o=>`${o.type}|${o.name}`)),a=Dw(a,"EXECUTION",ZB(r.executionType)),a=Dw(a,"GAMES",r.supportedGames.map(Oc).join(",")),a=Dw(a,"NAME",r.eventName.trim()),a!==i&&this.setState({asm:a})},this.syncStateVarsToText=r=>{let i=Ave(r,"NAME");i!==null&&this.setState({eventName:(i||"").trim()}),i=on.readSupportedGames(r),i!==null&&this.setState({supportedGames:i}),i=on.readExecutionType(r),i&&this.setState({executionType:i}),i=on.readParameters(r),i&&this.setState({parameters:i})},this.promptExit=async()=>{const r=this.state.asm,i=this.state.originalAsm;return!i||i!==r?await Zl("Are you sure you want to exit without saving the event?"):!0};const t=Pk();t?this.state={eventName:t.name,supportedGames:t.supportedGames,executionType:t.executionType,asm:t.asm,parameters:t.parameters,originalAsm:t.asm}:this.state={eventName:"",supportedGames:[],executionType:sn.DIRECT,asm:lve,parameters:[]}}render(){return this.state.hasError?B("p",{children:"An error was encountered."}):Xe("div",{className:"createEventViewContainer",children:[B(t_,{mode:"mips-pp64",className:"eventcodemirror createeventcodemirror",value:this.state.asm,onChange:this.onAsmChange}),B(Q9,{name:this.state.eventName,onEventNameChange:this.onEventNameChange,supportedGames:this.state.supportedGames,onGameToggleClicked:this.onGameToggleClicked,executionType:this.state.executionType,onExecTypeToggleClicked:this.onExecTypeToggleClicked,language:y0.MIPS,parameters:this.state.parameters,onAddEventParameter:this.onAddEventParameter,onRemoveEventParameter:this.onRemoveEventParameter})]})}componentDidMount(){e_(this)}componentWillUnmount(){e_(null)}updateLastSavedCode(e){this.setState({originalAsm:e})}getLanguage(){return y0.MIPS}}function cve(n,e){return on.clearDiscreteProperties(n,e)}function Dw(n,e,t){return on.writeDiscreteProperty(n,e,t,";")}function dve(n,e,t){return on.writeDiscretePropertyArray(n,e,t,";")}function Ave(n,e){return on.readDiscreteProperty(n,e)}const fve=n=>{const[e,t]=Ne.exports.useState(0),r=typeof n.activeTabIndex=="number",i=r?n.activeTabIndex:e,a=$g.Children.toArray(n.children)[i].props.children;return Xe("div",{className:n.className,children:[B("div",{className:n.tabsClassName,children:$g.Children.map(n.children,(o,s)=>{if(!o)return null;const l=o;let c=l.props.className;return s===i&&(c+=" activeTab"),B(k4,{caption:l.props.caption,className:c,onClick:()=>{i!==s&&(r||t(s),n.onActiveTabChanged&&n.onActiveTabChanged(s))}})})}),B("div",{className:n.contentClassName,children:a})]})},k4=n=>B("div",{className:n.className,onClick:n.onClick,children:n.caption}),hve=`// NAME:
// GAMES:
// EXECUTION: Direct

#include "ultra64.h"

void main() {
    // Your code here!
    // For code examples, see:
    // https://github.com/PartyPlanner64/events
}`;class pve extends Ne.exports.Component{constructor(e){super(e),this.onEventNameChange=r=>{const i={...this.state,eventName:r};this.setState({eventName:r}),this.syncTextToStateVars(i,this.state.code)},this.onCodeChange=r=>{this.setState({code:r}),this.syncStateVarsToText(r)},this.onGameToggleClicked=(r,i)=>{const a=this.state.supportedGames,o=a.indexOf(r);let s;o===-1&&i?(this.setState({supportedGames:[...a,r]}),s={...this.state},s.supportedGames=[...a,r]):o>=0&&!i&&(a.splice(o,1),this.setState({supportedGames:a}),s={...this.state},s.supportedGames=a),s&&this.syncTextToStateVars(s,this.state.code)},this.onExecTypeToggleClicked=(r,i)=>{const a={...this.state};a.executionType=r,this.setState({executionType:r}),this.syncTextToStateVars(a,this.state.code)},this.onAddEventParameter=r=>{const i={...this.state};i.parameters=[...this.state.parameters,r],this.setState(i),this.syncTextToStateVars(i,this.state.code)},this.onRemoveEventParameter=r=>{const i={...this.state};i.parameters=this.state.parameters.filter(a=>a.name!==r.name),this.setState(i),this.syncTextToStateVars(i,this.state.code)},this.getEventName=()=>this.state.eventName,this.getSupportedGames=()=>this.state.supportedGames,this.getExecutionType=()=>this.state.executionType,this.getEventCode=()=>this.state.code,this.syncTextToStateVars=(r,i)=>{let a=mve(i,["NAME","GAMES","EXECUTION","PARAM"]);a=`
`+a,a=Sve(a,"PARAM",r.parameters.map(o=>`${o.type}|${o.name}`)),a=Fw(a,"EXECUTION",ZB(r.executionType)),a=Fw(a,"GAMES",r.supportedGames.map(Oc).join(",")),a=Fw(a,"NAME",r.eventName.trim()),a!==i&&this.setState({code:a})},this.syncStateVarsToText=r=>{let i=gve(r,"NAME");i!==null&&this.setState({eventName:(i||"").trim()}),i=on.readSupportedGames(r),i!==null&&this.setState({supportedGames:i}),i=on.readExecutionType(r),i&&this.setState({executionType:i}),i=on.readParameters(r),i&&this.setState({parameters:i})},this.promptExit=async()=>{const r=this.state.code,i=this.state.originalCode;return!i||i!==r?await Zl("Are you sure you want to exit without saving the event?"):!0},this.onActiveTabChanged=async r=>{switch(r){case 0:this.setState({activeCodeTabIndex:0,compiledAsm:null});break;case 1:{if(!this.getEventName()){tn("The event name is missing.");return}if(!this.getSupportedGames().length){tn("At least one game must be supported.");return}let i;const a=oo(y0.C,this.state.code);try{await HE(a)}catch(o){tn(o.toString())}try{i=await on.testCustomEvent(y0.C,this.state.code,this.state.parameters,{game:a.supportedGames[0]})}catch(o){tn(o.toString());return}this.setState({activeCodeTabIndex:1,compiledAsm:i})}break}};const t=Pk();t?this.state={eventName:t.name,supportedGames:t.supportedGames,executionType:t.executionType,code:t.asm,parameters:t.parameters,originalCode:t.asm,compiledAsm:null,activeCodeTabIndex:0}:this.state={eventName:"",supportedGames:[],executionType:sn.DIRECT,code:hve,parameters:[],compiledAsm:null,activeCodeTabIndex:0}}render(){return this.state.hasError?B("p",{children:"An error was encountered."}):Xe("div",{className:"createEventViewContainer",children:[Xe(fve,{activeTabIndex:this.state.activeCodeTabIndex,className:"createEventTabStrip",contentClassName:"createEventTabStripContent",tabsClassName:"createEventTabStripTabs",onActiveTabChanged:this.onActiveTabChanged,children:[B(k4,{caption:"C Source",className:"createEventTabStripTab",children:B(t_,{mode:"c",className:"eventcodemirror createeventcodemirror",value:this.state.code,onChange:this.onCodeChange},"c")}),B(k4,{caption:"MIPS Assembly",className:"createEventTabStripTab",children:B(t_,{mode:"mips-pp64",className:"eventcodemirror createeventcodemirror",value:this.state.compiledAsm||void 0,readOnly:!0},"mips")})]}),B(Q9,{name:this.state.eventName,onEventNameChange:this.onEventNameChange,supportedGames:this.state.supportedGames,onGameToggleClicked:this.onGameToggleClicked,executionType:this.state.executionType,onExecTypeToggleClicked:this.onExecTypeToggleClicked,language:y0.C,parameters:this.state.parameters,onAddEventParameter:this.onAddEventParameter,onRemoveEventParameter:this.onRemoveEventParameter})]})}componentDidMount(){e_(this)}componentWillUnmount(){e_(null)}updateLastSavedCode(e){this.setState({originalCode:e})}getLanguage(){return y0.C}}function mve(n,e){return on.clearDiscreteProperties(n,e)}function Fw(n,e,t){return on.writeDiscreteProperty(n,e,t,"//")}function Sve(n,e,t){return on.writeDiscretePropertyArray(n,e,t,"//")}function gve(n,e){return on.readDiscreteProperty(n,e)}class _ve extends Ne.exports.Component{constructor(e){super(e),this.state={hasError:!1}}render(){if(this.state.hasError)return B("p",{children:"An error was encountered."});let e=[],t;bt.getGameVersion()===3?t=Ln.getStringCount("en",0):t=Bt.getStringCount();for(let i=0;i<t;i++)e.push(B(xve,{strIndex:i}));return Xe("div",{className:"stringViewerContainer",children:[B("p",{children:"This is an experimental strings editor, probably doesn't work yet."}),e]})}componentDidCatch(e,t){this.setState({hasError:!0}),console.error(e)}}class xve extends Ne.exports.Component{constructor(){super(...arguments),this.editor=null,this.state={hasFocus:!1},this.onValueChanged=(e,t)=>{if(bt.getGameVersion()!==3){let i=hi(Bt._strToBytes(t));Bt.write(this.props.strIndex,i)}},this.onFocus=()=>{this.setState({hasFocus:!0})},this.onBlur=()=>{this.setState({hasFocus:!1})}}render(){let e;return bt.getGameVersion()===3?e=Ln.read("en",0,this.props.strIndex):e=Bt.read(this.props.strIndex),B(dD,{ref:r=>{this.editor=r},value:e,displayMode:yp.Edit,showToolbar:!0,toolbarPlacement:M9.Top,onValueChange:this.onValueChanged,onFocus:this.onFocus,onBlur:this.onBlur})}componentDidMount(){this.state.hasFocus&&this.editor.focus()}componentDidUpdate(){this.state.hasFocus&&this.editor.focus()}}var gD={exports:{}};(function(n){(function(e,t){n.exports?n.exports=t():window[e]=t()})("basicContext",function(){var e=null,t="item",r="separator",i=function(){var g=arguments.length<=0||arguments[0]===void 0?"":arguments[0];return document.querySelector(".basicContext "+g)},a=function(){var g=arguments.length<=0||arguments[0]===void 0?{}:arguments[0],x=Object.keys(g).length===0;return x===!0&&(g.type=r),g.type==null&&(g.type=t),g.class==null&&(g.class=""),g.visible!==!1&&(g.visible=!0),g.icon==null&&(g.icon=null),g.title==null&&(g.title="Undefined"),g.disabled!==!0&&(g.disabled=!1),g.disabled===!0&&(g.class+=" basicContext__item--disabled"),g.fn==null&&g.type!==r&&g.disabled===!1?(console.warn("Missing fn for item '"+g.title+"'"),!1):!0},o=function(g,x){var E="",_="";return a(g)===!1||g.visible===!1?"":(g.num=x,g.icon!==null&&(_="<span class='basicContext__icon "+g.icon+"'></span>"),g.type===t?E=`
		       <tr class='basicContext__item `+g.class+`'>
		           <td class='basicContext__data' data-num='`+g.num+"'>"+_+g.title+`</td>
		       </tr>
		       `:g.type===r&&(E=`
		       <tr class='basicContext__item basicContext__item--separator'></tr>
		       `),E)},s=function(g){var x="";return x+=`
	        <div class='basicContextContainer'>
	            <div class='basicContext'>
	                <table>
	                    <tbody>
	        `,g.forEach(function(E,_){return x+=o(E,_)}),x+=`
	                    </tbody>
	                </table>
	            </div>
	        </div>
	        `},l=function(){var g=arguments.length<=0||arguments[0]===void 0?{}:arguments[0],x={x:g.clientX,y:g.clientY};if(g.type==="touchend"&&(x.x==null||x.y==null)){var E=g.changedTouches;E!=null&&E.length>0&&(x.x=E[0].clientX,x.y=E[0].clientY)}return(x.x==null||x.x<0)&&(x.x=0),(x.y==null||x.y<0)&&(x.y=0),x},c=function(g,x){var E=l(g),_=E.x,v=E.y,C={width:window.innerWidth,height:window.innerHeight},D={width:x.offsetWidth,height:x.offsetHeight};_+D.width>C.width&&(_-=_+D.width-C.width),v+D.height>C.height&&(v-=v+D.height-C.height),D.height>C.height&&(v=0,x.classList.add("basicContext--scrollable"));var V=E.x-_,H=E.y-v;return{x:_,y:v,rx:V,ry:H}},d=function(){var g=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];return g.fn==null||g.visible===!1||g.disabled===!0?!1:(i("td[data-num='"+g.num+"']").onclick=g.fn,i("td[data-num='"+g.num+"']").oncontextmenu=g.fn,!0)},h=function(g,x,E,_){var v=s(g);document.body.insertAdjacentHTML("beforeend",v),e==null&&(e=document.body.style.overflow,document.body.style.overflow="hidden");var C=i(),D=c(x,C);return C.style.left=D.x+"px",C.style.top=D.y+"px",C.style.transformOrigin=D.rx+"px "+D.ry+"px",C.style.opacity=1,E==null&&(E=m),C.parentElement.onclick=E,C.parentElement.oncontextmenu=E,g.forEach(d),typeof x.preventDefault=="function"&&x.preventDefault(),typeof x.stopPropagation=="function"&&x.stopPropagation(),typeof _=="function"&&_(),!0},f=function(){var g=i();return!(g==null||g.length===0)},m=function(){if(f()===!1)return!1;var g=document.querySelector(".basicContextContainer");return g.parentElement.removeChild(g),e!=null&&(document.body.style.overflow=e,e=null),!0};return{ITEM:t,SEPARATOR:r,show:h,visible:f,close:m}})})(gD);const vve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wYVFSYNYLnIVQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACsklEQVRIx+1WTU9TQRQ9d2bea99rKW3aRG2gWCAxRpQNJq6oEhdqdyYFf4P/xkT+Ah/RnyBdSWzCqhbUolAloWihAm1f2/deO+MCJMqHSqyGBWc1ycyce8/NPXcGOMdZB520YRgA534KBDzkNYLkOk1h27bGOQcAyLaEx6u7Qve27MYuKpWmtO2acpyjAdQxgYTP0EPRnt7wwMDlOOeeq5pG1zXdjPtMbw/n/JKmaQoAWq5LrXarZNXtNce21tyWysq2my8UPn0oFtfL1Wp9G4B7WJHm93tu3xm7Ozp8Y/jWwsLClVRqvDcWiyEcDiMYDMI0Tei6DqK9K1IquK6Det3Czs4utspb+LyxgampqeLIyM3l/Lu3mbn03Pz2duUFgKaI9UYuDg5emxyfeJQYGhoKdXV1sfX1IhKJBCKRCKSUUEpBKQUp5c/yhUB3dxDBYAjxeBy1Wg3pdDqaSqWilmWN3n+QrMzOzmTeL2Ufi2i0Z2x8YuJhMpmE67pQSoGIIKVEu90+Qn4YSqm90hAdrH0+HwKBAIvFYkGv13Nv8umTJGPEoGnawaFOQikFTWjgxMB+zOpfNPJ3ZtZ5xxyfNOtsqU7eY/9rMjAighDiwB8dHTtEEIKDGIFZtRpWV1dh23bHA9m2jXx+GdVKFYwY4c3SEubnX3ZcTSbzCouLOTBiYH6fH319fSiXy78152kgpUS5/BX9/QPwB/z7Pvr1IP8LVfvsChCA4pxzeHQdpmmCAAjBYRgGDMM4xszqBFIGpRSEEDAMA5xz6LoOzgVA4KJhVfO5XK79pbTJbbcFArCyUsD09AxM0wel5J88XyAiuK6DwupHzD57DgYg+zqLzVIJVr2Sp0jIzxoOXSBihq5zBQCNhgOvVzt1yysoNOstGKYGAHCcNkkpHdNkG+d/jLOPb9oFHOb0bqxwAAAAAElFTkSuQmCC",wve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AYaEggWSdu7PgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAuklEQVQ4y6XTQWoCQRCF4U/NGBlR3HpJEXIFCeQ2gWShnkAQFFeeQbOLmF1msinBxXR0nAdNN82jqrr/KtKaYIU1ZsjUUI45ylh7jKuMbQ31lLj/wScG4Znjq8rYupFgFPs3ijoVXNSJJJ1UAIN+P/UP0yCwxSu6dQLkWNxF4XQ+F4kKiqYUPqKSLCgcH6EwjP0UT6nVSC08o3cHrUq9YIMd3pIU/pmFZdNZ+L06l49QeI+ys+iJQ5XxD4g7KTK7osn1AAAAAElFTkSuQmCC";class yve extends Ne.exports.Component{render(){let e=this.props.boards.map(function(i,a){return B(TB,{board:i,index:a},a)});const t=!!tr(In.uiShowRomBoards);let r;return t&&(r=Nk().map(function(i,a){return B(TB,{board:i,index:a},"r"+a)})),B("div",{className:"boardMenu",role:"listbox",children:Xe("div",{className:"boardMenuInner",role:"presentation",children:[e,r]})})}}const TB=class extends Ne.exports.Component{constructor(){super(...arguments),this.handleClick=()=>{const e=Ys(this.props.board);Jp(this.props.index,e),wt("Now viewing board",this.props.board)},this.onDragStart=e=>{if(Ys(this.props.board)){e.preventDefault();return}Boe(),e.nativeEvent.dataTransfer.setData("text/plain",this.props.index),Moe(function(t){t.preventDefault();var r=parseInt(t.dataTransfer.getData("text/plain"));isNaN(r)||(JP(),qP(r))})},this.onDragEnd=e=>{JP()},this.onRightClick=e=>{e.preventDefault();let t=[{title:"Copy",fn:this.onCopyBoard},{title:"Delete",fn:this.onDeleteBoard,visible:!Ys(this.props.board)}];gD.exports.show(t,e.nativeEvent)},this.onDeleteBoard=()=>{qP(this.props.index)},this.onCopyBoard=()=>{rV()}}render(){let e=`Open "${this.props.board.name}"`,t="boardEntry";const r=P0()===this.props.board;r&&(t+=" boardEntryCurrent");let i=this.props.board.otherbg.boardlogo||"",a;i?a=B("img",{className:"boardEntryImg",src:i,width:"200",height:"88",alt:""}):a=B("div",{className:"boardEntryNoImg"});const o=this.props.board.name,s=Ys(this.props.board),l=Qc(this.handleClick);return Xe("div",{className:t,title:e,role:"option",tabIndex:0,"aria-selected":r,onClick:this.handleClick,onKeyDown:l,onContextMenu:this.onRightClick,draggable:!0,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,children:[a,B(Eve,{rom:s}),B(Cve,{name:o}),B(Vve,{rom:s,onDeleteBoard:this.onDeleteBoard,onCopyBoard:this.onCopyBoard})]})}},Eve=class extends Ne.exports.Component{render(){return this.props.rom?B("div",{className:"boardEntryRomIcon",title:"Loaded from ROM",children:B("img",{src:vve,width:"26",height:"26",alt:"From ROM"})}):null}};class Cve extends Ne.exports.Component{constructor(){super(...arguments),this.state={editing:!1},this.handleClick=()=>{this.setState({editing:!!this.state.editing})}}render(){return B("div",{className:"boardName",children:B(dD,{value:this.props.name,displayMode:yp.Display})})}}class Vve extends Ne.exports.Component{constructor(){super(...arguments),this.handleClick=e=>{e.preventDefault();let t=[{title:"Copy",fn:this.props.onCopyBoard},{title:"Delete",fn:this.props.onDeleteBoard,visible:!this.props.rom}];gD.exports.show(t,e.nativeEvent)}}render(){return B("img",{className:"boardMenuIcon",src:wve,onClick:this.handleClick,alt:"Board Options"})}}var _D=(n=>(n[n.Red=0]="Red",n[n.Green=1]="Green",n[n.Blue=2]="Blue",n))(_D||{});class J9 extends Ne.exports.Component{constructor(){super(...arguments),this.onCloseClick=()=>{this.props.onClose&&this.props.onClose()}}render(){const e="notification "+this.getColorClass(this.props.color);return Xe("div",{className:e,children:[B("div",{className:"notificationContent",children:this.props.children}),B("div",{className:"notificationClose",role:"button",tabIndex:0,onClick:this.onCloseClick})]})}getColorClass(e){switch(e){case 0:return"notificationRed";case 1:return"notificationGreen";case 2:return"notificationBlue"}}}class Dve extends Ne.exports.Component{render(){const e={};return Ne.exports.Children.count(this.props.children)||(e.display="none"),B("div",{className:"notificationBar",style:e,children:this.props.children})}}class Z9 extends Ne.exports.Component{render(){return B("button",{className:"notificationButton",onClick:this.props.onClick,children:this.props.children})}}const Fve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABICAIAAACGBWc0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AYHAigfG9YLCgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAK0lEQVR42u3BAQ0AAADCoPdPbQ43oAAAAAAAAAAAAAAAAAAAAAAAAAAAPgxRSAABIBiyrgAAAABJRU5ErkJggg==",$9=[{name:"Blank",id:"default"}],Tve={default:Fve};class bve extends Ne.exports.Component{constructor(){super(...arguments),this.state={version:1,type:G0.NORMAL,theme:0},this.onVersionChange=e=>{this.setState({version:e}),e!==3&&this.setState({type:G0.NORMAL})},this.onTypeChange=e=>{this.setState({type:e})},this.onThemeChange=e=>{this.setState({theme:e})},this.submit=()=>{if(this.state.type===G0.DUEL&&(tn("Duel board support is partially finished, coming soon!"),!Hn()))return;let e=this.props.onAccept;e&&e(this.state.version,this.state.type,$9[this.state.theme])}}render(){return Xe("div",{className:"newBoardContainer",children:[B(Pve,{onVersionChange:this.onVersionChange}),B(Rve,{onThemeChange:this.onThemeChange}),B(ir,{onClick:this.submit,css:"nbCreate",children:"Create"})]})}}class Pve extends Ne.exports.Component{constructor(){super(...arguments),this.state={version:1},this.onVersionChange=(e,t)=>{this.setState({version:e}),this.props.onVersionChange(e)}}render(){let e=[B(Bo,{id:1,allowDeselect:!1,onToggled:this.onVersionChange,pressed:this.state.version===1,children:B("span",{className:"newBoardVersion",title:"Mario Party 1",children:"MP1"})},1)];return e.push(B(Bo,{id:2,allowDeselect:!1,onToggled:this.onVersionChange,pressed:this.state.version===2,children:B("span",{className:"newBoardVersion",title:"Mario Party 2",children:"MP2"})},2)),e.push(B(Bo,{id:3,allowDeselect:!1,onToggled:this.onVersionChange,pressed:this.state.version===3,children:B("span",{className:"newBoardVersion",title:"Mario Party 3",children:"MP3"})},3)),Xe("div",{className:"newBoardVersionSelect",children:[B("label",{className:"nbLabel",children:"Game Version"}),B("br",{}),e]})}}class Rve extends Ne.exports.Component{constructor(){super(...arguments),this.state={theme:0},this.onThemeChange=(e,t)=>{this.setState({theme:e}),this.props.onThemeChange(e)}}render(){let e=$9.map((t,r)=>{let i=Tve[t.id];return Xe(Bo,{id:r,allowDeselect:!1,css:"nbTheme",onToggled:this.onThemeChange,pressed:this.state.theme===r,children:[B("img",{src:i,className:"newBoardThemePreview",width:"96",height:"72",alt:""}),B("span",{className:"newBoardTheme",children:B("span",{className:"newBoardThemeInner",children:t.name})})]},r)});return Xe("div",{className:"NewBoardThemeSelect",children:[B("label",{className:"nbLabel",children:"Theme"}),B("br",{}),e]})}}function Lve(n,e){try{window.gtag&&window.gtag("event",n,e)}catch(t){console.error(t)}}const eU=Object.create(null),Bve={id:"",name:"",level:wn.ERROR,fails:function(n,e){throw new Error("fails not implemented")}};function pr(n,e,t){let r=Object.create(Bve);return r.id=n,r.name=e,r.level=t,eU[n]=r,r}function V0(n,e){let t=eU[n];return{id:t.id,name:t.name,level:t.level,fails:function(i){return t.fails(i,e)}}}const Mve=pr("HASSTART","Has start space",wn.ERROR);Mve.fails=function({board:n},e){return A2(n)<0?"No start space found on board.":!1};const Ive=pr("GAMEVERSION","Game version mismatch",wn.ERROR);Ive.fails=function({board:n},e){let t=bt.getGameVersion();return t!==n.game?`Board is for MP${n.game}, but ROM is MP${t}`:!1};const Ove=pr("DEADEND","No dead ends",wn.WARNING);Ove.fails=function({board:n},e){const t=Ok(n),r=A2(n);return r<0?!1:t.indexOf(r)>=0?"Start space does not lead anywhere.":t.length?"There is a dead end on the board.":!1};const kve=pr("TOOMANYSPACES","Too many spaces",wn.ERROR);kve.fails=function({board:n},e){return n.spaces.length>65535?"There is a hard limit of 65535 spaces.":!1};const Nve=pr("OVERRECOMMENDEDSPACES","Over recommended spaces",wn.WARNING);Nve.fails=function({board:n},e){const t=n.spaces.length;return t>e.max?`${t} spaces present, more than ${e.max} spaces can be unstable.`:!1};const WA=function(n,e){let t=pr(`TOOMANY${e.toUpperCase().replace(/\s+/g,"")}`,`Too many ${e}`,wn.ERROR);t.fails=function({board:r},i={}){let a=i.limit||0,o=r.spaces.filter(s=>s&&s.subtype===n).length;return o>a?`There are ${o} ${e}, but the limit is ${a} for this board.`:!1}};WA(yt.BOO,"Boos");WA(yt.BOWSER,"Bowsers");WA(yt.KOOPA,"Koopas");WA(yt.BANK,"Banks");WA(yt.ITEMSHOP,"Item Shops");WA(yt.GATE,"Gates");function tU(n){return n.spaces.filter(e=>e&&e.star).length}const Uve=pr("BADSTARCOUNT","Bad star count",wn.ERROR);Uve.fails=function({board:n},e){const t=tU(n);if((e.disallowed||{})[t])return t===1?"There cannot be exactly 1 star space.":`There cannot be exactly ${t} star spaces.`;const i=e.low||0,a=e.high||0;return t<i||t>a?i!==a?`There are ${t} stars, but the range is ${i}-${a} for this board.`:`There are ${t} stars, but the count must be ${i} for this board.`:!1};const jve=pr("WARNNOSTARSPACES","No star spaces",wn.WARNING);jve.fails=function({board:n},e={}){return tU(n)===0?"There are no star spaces, this may be unintentional.":!1};const nU=function(n,e){let t=pr(`TOOFEW${e.toUpperCase().replace(/\s+/g,"")}SPACES`,`Too few ${e} spaces`,wn.ERROR);t.fails=function({board:r},i={}){let a=i.low||0,o=r.spaces.filter(s=>s&&s.type===n).length;return o<a?`There are ${o} ${e} spaces, need at least ${a} spaces of this type.`:!1}};nU(de.BLUE,"Blue");nU(de.RED,"Red");const Gve=pr("TOOMANYOFEVENT","Too many of event",wn.ERROR);Gve.fails=function({board:n},e){let t=0;n.spaces.forEach(a=>{!a||!a.events||a.events.forEach(o=>{o.id===e.event.id&&t++})});let r=e.low||0,i=e.high||0;if(t<r||t>i){if(r&&i)return`There are ${t} of event ${e.event.name}, but the range is ${r}-${i} for this board.`;if(r)return`There are ${t} of event ${e.event.name}, but there must be at least ${r} for this board.`;if(i)return`There are ${t} of event ${e.event.name}, but there can be at most ${i} for this board.`}return!1};const Hve=pr("UNRECOGNIZEDEVENTS","Unrecognized events",wn.ERROR);Hve.fails=function({board:n},e){let t=Object.create(null);n.spaces.forEach(o=>{!o||!o.events||o.events.forEach(s=>{jo(s.id,n,Gn())||(t[s.id]=!0)})});let r=[];for(var i in t)r.push(i);if(!r.length)return!1;let a=`The following events were unrecognized:
`;return r.forEach(o=>{a+="	"+o+`
`}),a};const zve=pr("UNSUPPORTEDEVENTS","Unsupported events",wn.ERROR);zve.fails=function({board:n},e){let t=Object.create(null),r=bt.getROMGame();n.spaces.forEach(s=>{!s||!s.events||s.events.forEach(l=>{const c=jo(l.id,n,Gn());!c||Mie(c,r)&&(t[l.id]=!0)})});let i=[];for(var a in t)i.push(a);if(!i.length)return!1;let o=`The following events cannot be written to this ROM:
`;return i.forEach(s=>{o+="	"+s+`
`}),o};const Wve=pr("CUSTOMEVENTFAIL","Custom event errors",wn.ERROR);Wve.fails=async function({board:n,boardInfo:e},t){let r=Object.create(null),i=bt.getROMGame();async function a(c){try{const d=jo(c.id,n,Gn()),h=Ss(n,c.id);await on.testCustomEvent(h.language,h.code,d.parameters,{game:i,audioIndices:C6(n),board:n,boardInfo:e})}catch(d){console.error(d),r[c.id]||(r[c.id]=!0)}}for(const c of n.spaces)if(!(!c||!c.events))for(const d of c.events)!d||!d.custom||await a(d);if(n.boardevents)for(const c of n.boardevents)!c.custom||await a(c);let o=[];for(var s in r)o.push(s);if(!o.length)return!1;let l=`The following custom events fail to assemble:
`;return o.forEach(c=>{l+="	"+c+`
`}),l};const Xve=pr("CUSTOMEVENTBADPARAMS","Custom event parameter issues",wn.ERROR);Xve.fails=function({board:n},e){const t=Object.create(null);function r(a){const s=jo(a.id,n,Gn()).parameters;if(s&&s.length)for(const l of s)$B(l.type)||(!a.parameterValues||!a.parameterValues.hasOwnProperty(l.name))&&(t[l.name]||(t[l.name]=0),t[l.name]++)}if(n.spaces.forEach(a=>{!a||!a.events||a.events.forEach(o=>{!o||!o.custom||r(o)})}),n.boardevents)for(const a of n.boardevents)!a.custom||r(a);let i=[];for(let a in t){const o=t[a];!o||i.push(`	${o} ${a} event parameter${o>1?"s are ":" is "}not set`)}return i.length?`Some event parameters need to be set:
`+i.join(`
`):!1};const Kve=pr("TOOMANYPATHOPTIONS","Too many path options",wn.ERROR);Kve.fails=function({board:n},e={}){let t=e.limit||2;for(var r in n.links){let i=n.links[r];if(Array.isArray(i)&&i.length>t)return`A space branches in ${i.length} directions, but the maximum is ${t}.`}return!1};const Yve=pr("CHARACTERSONPATH","Characters are on path",wn.WARNING);Yve.fails=function({board:n},e={}){for(var t in n.links){let r=n.spaces[t];if(r.hasOwnProperty("subtype")&&r.subtype!==yt.GATE)return"Characters and objects <a href='https://github.com/PartyPlanner64/PartyPlanner64/wiki/Creating-a-Board#special-charactersobjects' target='_blank'>should not be on the player path</a>."}return!1};const qve=pr("SPLITATNONINVISIBLESPACE","Split at non-invisible space",wn.WARNING);qve.fails=function({board:n},e={}){const t=[de.OTHER,de.STAR,de.START,de.BLACKSTAR,de.ARROW];for(let r in n.links)if(Pa(parseInt(r),n).length>1){let a=n.spaces[r];if(t.indexOf(a.type)===-1)return"There is a <a href='https://github.com/PartyPlanner64/PartyPlanner64/wiki/Creating-a-Board#board-flow' target='_blank'>non-conventional path split</a>."}return!1};const Qve=pr("TOOMANYARROWROTATIONS","Too many arrow rotations",wn.WARNING);Qve.fails=function({board:n},e={}){let t=0;return n.spaces.forEach(r=>{!r||typeof r.rotation=="number"&&t++}),t>e.limit?`Only ${e.limit} arrows will be rotated in-game.`:!1};const Jve=pr("GATESETUP","Incorrect gate setup",wn.ERROR);Jve.fails=function({board:n},e={}){let t=Mr(yt.GATE,n);for(let i=0;i<t.length;i++){let a=t[i];if(n.spaces[a].type!==de.OTHER)return"Only invisible spaces can have gates.";let s=Pa(a,n);if(s.length!==1)return"A single path should leave a gate space.";let l=s[0],c=n.spaces[l];if(!c||c.type!==de.OTHER)return"Space after a gate space must be invisible.";if(c.subtype===yt.GATE)return"Gate spaces must be 2 or more spaces apart.";if(r(l).length!==1)return"A single path should connect to the space after a gate space.";let d=Pa(l,n);if(d.length!==1)return"A single path should leave the space after a gate space";let h=d[0];if(n.spaces[h].subtype===yt.GATE)return"Gate spaces must be 2 or more spaces apart.";let m=r(a);if(m.length!==1)return"A single path should connect to a gate space.";let g=m[0],x=n.spaces[g];if(!x||x.type!==de.OTHER)return"Space before a gate space must be invisible.";if(x.subtype===yt.GATE)return"Gate spaces must be 2 or more spaces apart.";if(r(g).length!==1)return"A single path should connect to the space before a gate space."}function r(i){let a=[];for(let o in n.links)Pa(parseInt(o),n).forEach(l=>{l===i&&a.push(Number(o))});return a}return!1};const Zve=pr("ADDITIONALBGCODEISSUE","Additional background code issue",wn.ERROR);Zve.fails=async function({board:n},e={}){const t=tV(n);if(!t)return!1;const r=bt.getROMGame(),i=await _6(t.code,t.language,n,r);return i.length?(console.error(i),"The additional background code failed a test assembly."):!1};const $ve=pr("GETAUDIOINDEXCODEISSUE","Audio selection code issue",wn.ERROR);$ve.fails=async function({board:n},e={}){const t=nV(n);if(!t)return!1;const r=bt.getROMGame(),i=await E6(t.code,t.language,n,r);return i.length?(console.error(i),"The music selection code failed a test assembly."):!1};const ewe=pr("AUDIODETAILSISSUE","Audio details issue",wn.ERROR);ewe.fails=async function({board:n},e={}){if(typeof n.audioType!="number")return"Expected audioType to be defined.";switch(n.audioType){case eo.InGame:if(typeof n.audioIndex!="number")return"Expected an audio track index to be defined.";break;case eo.Custom:if(!n.audioData)return"Expected custom audio data to be defined.";if(!Array.isArray(n.audioData))return"Expected custom audio data to be an array.";if(!n.audioData.length)return"Custom audio was chosen, but a midi file was not uploaded.";for(const t of n.audioData){const r=t.soundbankIndex,a=Rr.getSequenceTable(0).soundbanks.banks.length;if(r<0||r>=a)return`Soundbank index for custom audio is out of range (0 - ${a-1})`;if(!t.data)return"Custom audio was chosen, but a midi file was not uploaded.";let o;try{o=sM(t.data)}catch{return"Custom audio midi data could not be parsed into an ArrayBuffer."}let s;try{s=XC(o,{loop:!0})}catch{return"Custom audio midi data could not be converted into game audio."}if(!s)return"Custom audio midi data could not be converted into game audio."}break}return!1};const twe=[V0("TOOMANYGATES",{limit:0}),V0("ADDITIONALBGCODEISSUE"),V0("GETAUDIOINDEXCODEISSUE"),V0("TOOMANYBOOS",{limit:2}),V0("TOOMANYBOWSERS",{limit:1}),V0("TOOMANYKOOPAS",{limit:1}),V0("BADSTARCOUNT",{low:0,high:7,disallowed:{1:!0}}),V0("WARNNOSTARSPACES")];function nwe(n){return twe.slice(0)}const rwe=[V0("TOOMANYBOWSERS",{limit:0}),V0("TOOMANYKOOPAS",{limit:0}),V0("TOOMANYGATES",{limit:0})];function iwe(n){const e=rwe.slice(0),t=f_();return e.push(V0("TOOMANYARROWROTATIONS",{limit:t})),e}function awe(n,e){return e===0?[V0("TOOMANYBANKS",{limit:2}),V0("TOOMANYITEMSHOPS",{limit:1}),V0("TOOMANYBOOS",{limit:2}),V0("BADSTARCOUNT",{low:7,high:7})]:[]}const owe=[V0("TOOMANYBOWSERS",{limit:0}),V0("TOOMANYKOOPAS",{limit:0}),V0("GATESETUP"),V0("OVERRECOMMENDEDSPACES",{max:128}),V0("ADDITIONALBGCODEISSUE"),V0("GETAUDIOINDEXCODEISSUE")];function swe(n){const e=owe.slice(0),t=f_();return e.push(V0("TOOMANYARROWROTATIONS",{limit:t})),e.push(V0("TOOMANYOFEVENT",{event:GA,high:2})),e.push(V0("TOOMANYBANKS",{limit:2})),e.push(V0("TOOMANYOFEVENT",{event:l2,high:2})),e.push(V0("TOOMANYITEMSHOPS",{limit:2})),e.push(V0("TOOMANYBOOS",{limit:1})),e.push(V0("TOOMANYGATES",{limit:2})),e.push(V0("BADSTARCOUNT",{low:0,high:8,disallowed:{1:!0}})),e.push(V0("WARNNOSTARSPACES")),e}function bB(n){return n?typeof n.then=="function":!1}function lwe(n){return!!n.canOverwrite}function uwe(n,e){return typeof e!="string"?n.type===G0.DUEL:n.type!==e}function cwe(n){let e=[V0("HASSTART"),V0("GAMEVERSION"),V0("DEADEND"),V0("TOOMANYSPACES"),V0("UNRECOGNIZEDEVENTS"),V0("UNSUPPORTEDEVENTS"),V0("CUSTOMEVENTFAIL"),V0("CUSTOMEVENTBADPARAMS"),V0("TOOMANYPATHOPTIONS"),V0("CHARACTERSONPATH"),V0("SPLITATNONINVISIBLESPACE"),V0("AUDIODETAILSISSUE")];switch(n){case Qe.MP1_USA:case Qe.MP1_JPN:e=e.concat(nwe());break;case Qe.MP2_USA:case Qe.MP2_JPN:e=e.concat(iwe());break;case Qe.MP3_USA:case Qe.MP3_JPN:e=e.concat(swe());break}return e}function dwe(n,e){let t=[];switch(n){case Qe.MP2_USA:case Qe.MP2_JPN:t=t.concat(awe(n,e));break}return t}async function Awe(){let n=bt.getROMGame();if(!n)return null;let e=[],t=Nk(),r=P0();const i=tr(In.uiSkipValidation);let a=[],o=[];if(!i)for(const c of cwe(n)){let d=c.fails({board:r,boardInfo:bg});bB(d)&&(d=await d),d&&(c.level===wn.ERROR?a.push(d):c.level===wn.WARNING&&o.push(d))}e.push({errors:a,warnings:o});const s=!i&&a.length>0,l=J4(n);if(l)for(let c=0;c<t.length;c++){const d=t[c];if(uwe(d,r.type))continue;const h=l[c];let f=!lwe(h),m=[],g=[];if(!f&&!tr(In.uiSkipValidation)){let x=dwe(n,c);for(const E of x){let _=E.fails({board:r,boardInfo:h});bB(_)&&(_=await _),_&&(E.level===wn.ERROR?m.push(_):E.level===wn.WARNING&&g.push(_))}}e.push({name:d.name,unavailable:f,forcedDisabled:s,errors:m,warnings:g})}return e}let ss=null;class PB extends Ne.exports.Component{constructor(e){super(e),this.onCodeChangeInternal=r=>{this.setState({code:r})},this.onLanguageToggleClicked=async r=>{(!this.codeHasChanged({fromDefaultOnly:!0})||await Zl("Are you sure you want to switch languages? The current code will not be kept."))&&this.setState({language:r,code:this.props.getDefaultCode(r)})},this.getCode=()=>this.state.code,this.getLanguage=()=>this.state.language,this.getBoard=()=>this.props.board,this.getDefaultCodeForLanguage=r=>this.props.getDefaultCode(r),this.onSetCode=(r,i)=>this.props.onSetCode(r,i),this.canSaveAndExit=()=>this.props.canSaveAndExit(this.state.code,this.state.language),this.promptExit=async()=>this.codeHasChanged()?await Zl("Are you sure you want to exit without saving your code?"):!0;const t=this.props.getExistingCode();t?this.state={code:t.code,language:t.language}:this.state={code:this.props.getDefaultCode(y0.C),language:y0.C}}render(){const e=[{id:y0.C,text:"C",selected:this.state.language===y0.C},{id:y0.MIPS,text:"MIPS",selected:this.state.language===y0.MIPS}],t=this.state.language===y0.C?"c":"mips-pp64";return Xe("div",{className:"basicCodeViewContainer",children:[B("h2",{children:this.props.title}),Xe("div",{className:"editorSettingsSplit",children:[B("div",{children:B(t_,{mode:t,className:"eventcodemirror basiccodemirror",value:this.state.code,onChange:this.onCodeChangeInternal},t)}),Xe("div",{className:"createEventForm",children:[B("label",{children:"Language:"}),B(e8,{items:e,onToggleClick:this.onLanguageToggleClicked})]})]})]})}componentDidMount(){ss=this}componentWillUnmount(){ss=null}codeHasChanged(e){const t=this.state.code,r=this.props.getExistingCode(),i=r&&r.code!==t;let a=t!==this.props.getDefaultCode(this.state.language);return a&&(!e||!e.fromDefaultOnly)&&(a=!r),i||a}}async function fwe(){let n=ss.getCode();const e=ss.getLanguage();if(!n){tn("No code was provided, any existing code will be removed."),ss.onSetCode("",e);return}const t=await ss.canSaveAndExit();if(t.length>0){tn(t.join(`
`));return}n===ss.getDefaultCodeForLanguage(e)&&(n=""),ss.onSetCode(n,e)}function RB(){return ss?ss.promptExit():Promise.resolve(!0)}const hwe="/assets/logo.5f198d95.png",pwe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wUDEjATsbMk9wAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADxklEQVRYw+2YXU8jVRjH/+fMtEw7fYGWnYK7FGiK2RDYrBay9EIXuFmLWbnC3awXGxPDrbcSY/wAfgi5NOyNXCuSyBrMkkiykmjBaBtKmZYWLcVOX+acsxf0JatEUFmLyfyTySRn5mR+ed7meQ5gyZIlS5dS5N/uvX0bHZlMdxc75hQAjPpDR/1OVSKCHfnCF09Rqi+JFwlKgsHuHkqJZhj0mqKQfput4zqoo8Pr6ui2y1KYyrJDttlAKT2h4RymyWCa1UrNZD8Xf6/orFY2TbOyUy7zn5xOkikWzVQul8sCYP8YNBQKaKwiQjVBIm63e9zv776paZoWCPT4ent7aU9PwOb3d8Pr9UJVVdjtdlBKW6BCwDRNVKsVlEoGjo6OkM/nkMlkzL10mh1kM8fZ7IF+eJj7vlA4egKITVnmPyaTB/qZoBPX4NiXtJucS5Oa1nsnGOy7kUgk3LHYjDw7Owufzwen0wlJkkAIASGt7UKc7VEhBDjnYIyhXDZwePgrVlZW8OjREguFQkYqtfc0q+99BV772u7MfhuPo9jYKwFAJAIbpT1vcJf2wejoqx/OzLz51jsPHgzEYjOO7e1tGomMYWJiAoqinAoJoLl21kUphSzLUBQFnZ2dMAwDyWSSLiws2KPRaN9LV/teI5L9bj7PRu12G152HSf2j1GTh4evuHJZ6aNbt6LvTk1NXYlGo+jq6gIAlMvlptGFEH+CuwideEJAURSEw2GEw2ESi8W6NjY25lZXV+9883jts+H+ysdyzaDDwYHQe/Pz876hoaGmdc7jyhdShgiB2+3G9PQ0RkdHPIXCbw9/2Nr8nAouqCxJkt/vb77Y9ppZZ/B4vHA6HBBcyPT/UvBpuy13Xg9aFj1vxp83aS2LWqAW6EWDCsEvHZwQotllUwDY13UsLy8jlUq17R//R0Bd17G0tISdnZ0WqEt1IplMYnFxEcVi8VTY/6oHEEKgVCphcfFTJBK/wOvxtEDdbg/m5t5GJqMjnU633aLZbBa7u7u4d+8+tEDg+RhtNMWMsbaDcs5BCIGqqs0RhF7cUHpJylO7k6zNdZT8tRdF6xBAliRmmsyslcsGAPFcR9OYZxqjb2NuuqgKcDKVsmZcNr7L+UlNr9aqqFYrgkq8Sm4EoB47rn7yylj0/nY8TsbGx+Hz+QAAjDE8XlvD4OAg+gcGAFGfp0457CB/M8ZF3Vy6vo+trS28PjkJmywDAAqFAtbX1zEyMoLN7558SUjhfQIA49fd/viBGoIQly6belUzFd/Np2HJkiVLl1PPAJFxm2lUWqFHAAAAAElFTkSuQmCC",xD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkWAyclMXUDawAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADUElEQVRYw+2Yy04bSRSG/6o6demu6uqmaKCRIiQeaCLNykF5kRH77LPkCYCQRaSQRxmZBYt5g4ENCNG4axaxDfY0dnvwdBKJI5XadZM+/+fUqQvwaq/2cxtb0PexqqrfiEgAaMZtMcYIAA1jbPI7jksz/rLxF3PtbW2TOqvrur66uvpW1/WHNhhaALp9fn7+Zn9/XzVNgxjjtIyJW+sTm8zB4z9cOP/i4uLu8PDwr+FwaAHcdAYtikJ577G5udmLa+/v7/ne3p4dDodpGyh/Zl5WVZXlnPO+YpCIhPfeA0ja+p8D8VVVWSkl6wtUKSW89zkAsxLo1tZWRkS9gWqtYa11APRKoGVZpn0qKoSAMUatCpqFEHoF5Zxj7EG5CqjN8zwVQvSX0BmDlJKvGqOptZaICH0qKqUUAPwqoNoYA8ZYr6DWWgGgWElRpRTrE1QIgTRNSWsdVgF143jpFdRaS1mWlZ1BhRCF1pr3rahzjpxzW22HpTZQFUIokiRhPe6gU0WNMaErqMzzfMMY06uiRATnHGmtyzauVkWzLNtM07RXUMYY0jTlUsqiK6h0zm0kSdLn4en7LmMtpJS262KS1to8TdO1pqfT42N8OjnpEqut22grqDEmT5JkrX4/O/2MTydnS5N+kiQcgOsCSlpraYxZq1sjRogYdUr6AEIXUKOUYn3H5wTUey8AlF1AiyRJet0+n6Yo7z0B2OlyuQvOuRelptPjY5ydfp5x9eXlJQDg97dvn9zVBQbv32EwGEwVzfNctoG2KVq+NIeuMlc8GSulRAiBAOwuVVQpte29f1EOHRwcYHBwMNM2UfLL168LY7QoCimE2BmNRosV1VpXLwX9ryalRFEUxBjbXup6pdR2nuc/BJSIEEIQnPNyqeuJaOf/AGVYfv/inCPLMsYY21gKKoQoi6JYO+jg/buZhfOcZVkGxpjqAhryPF97Hp2koC6qKqXE3d3d0sXkdnd38SMS/mTlhxDE/DY6r2h2fX3Njo6OYIxB03x/Fp1/Lpzu33NPiIyxpePm+57OJyLc3Nzg9vaWALwB8PdjjM/KvhNjPFdKPcQYR9PzxOOj68TaHm2bf51DZgubq7eNQ4yRHh4eRkT0R13Xf+LVXu0XsX8AW2z37xq4Q9gAAAAASUVORK5CYII=",vD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkWAykCCvybjgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADf0lEQVRYw+2Yz0rsSBTGv0qdqlRSlUqMrUZoZATxJQR3DSIMiPggrmRwI4KzFGbpIyioGwd8kaFdOe6E2YxubMR4U3dxu3vavrl20gNxBjxQJKk/8Ms5le+cFPBpn/bfNvbO2G9Zlv1MRBxA0e9zzjkAKBhjg3vXb0X/yvpXjPWX9Q2eWZ7n+cPDw+95nv9aBkPvgM5fXV21l5eXZVEUcM4NW5+49HlggzX45w3fXX9zc/O8v79/1+12NYCnyqBJkkhrLWZnZxsJ7cvLi7e0tKS73W5YBur9YF2UZZn2PM9rag8SEbfWWgBB2fiPQGyWZVoIwZoClVJya20MQNUCnZubi4ioMVDf96G1NgD8WqCtVits0qOccyilZF3QKE3TRkE9z0M/gqIOqI7jOOScNyfojEEI4dXdo6HWmogITXpUCMEB2DqgvlIKjLFGQbXWHEBSy6NSStYkKOccYRiS7/tpHVDT3y+NgmqtKYqiVmVQznni+77XtEeNMWSMmSsrlspAZZqmSRAErMEMOvSoUiqtCiriOJ5RSjXqUSKCMYZ832+VcZV6NIqi2TAMGwVljCEMQ08IkVQFFcaYmSAImiyevmUZrSGE0FULZ6G1jsMwrC1PeZ7j+voavV5vtK7FxsZGnb06SKMvk+b+tLW19df9/b2ra3t7e27kt2PYDg4OKq2/u7tznU7nTwALVUJPvu8LpVTt0N3e3pb2Hx4egjH2XQvDEJeXl9+JPoC0SuiVlHJqaVpbW8Pu7m6lucfHxzg/P8f29vYQ1FrLAbSqgCZBEEydPtvtNnZ2dirNPT09RVEUbyTKWktVQ58aYxqVptHQx3EsqoK2mtbQodwIgTRNCcDiRFAp5by1tnENHXg0SRLBOZ/sUd/3s48CFUIgSRJijM1X8mgcxx8CSkRI05R7nteaCEpEC9OCrqys4OzsrFQzy9rFxQVWV1ffVPlRFDHG2MxEeeKct5IkmQr06OgI6+vrb1Loe2aMQafTefv7G0VgjMkqoGkcx1PpKBFhc3PzX/87SSn58/PzxI/JLC4u4iPkafDlp2nKx9PouEejx8dHdnJyAqXUMGuMHxeOHiWOjjPGJs4bHxtdT0R4enpCr9cjAG0Afw/r1TG3LzjnrqSUr865LyMHrW7shcoObYuxOeNVFBt7LpsH5xy9vr5+IaJf8jz/A5/2af8T+woUyWfEnN7KnQAAAABJRU5ErkJggg==",wD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkWAyUJMZsNCgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADvklEQVRYw+2YPUskSRjH/0+9dFd3dVe37aijrILfYjAz0egCwYlV9BOYeJgfGF4gaO5H8BIDxUjHSA/OUeRgg402OUVQDke7LnD0ZmZ73lzpvQMfKLqqq4r5zfNaXcCHfMh/W6jD3K/FYvEnIQQHkNbfWWstAKRE9NK39ZbWn1R/ouV91ruXMdVqtdr19fVvtVrtlywY0QF0eHd399Pk5KSTpimsta+tTpw5fpGXPfj3H3bcf3Fx8ff6+vrnarWqAdz1DBrHsWOMweDgYC6mfXh4YBMTE7parfpZoKzNvrBYLGrGGMvLB4UQ3BhjAHhZ8+1ATLFY1FJKygvUcRxujIkAqL5Ah4aGQiFEbqCu60JrHQBw+wItFAp+nhrlnEMp5fQLGiZJkisoYwx1C8p+QHUURT7nPL+ETgQpJevXR32ttRBCIE+NSik5ANMPqKuUAhHlCqq15gDivjTqOA7lCco5h+/7wnXdpB/QoO4vuYJqrUUYhoWeQTnnseu6LG+NBkEggiAYyjosZYE6SZLEnudRjhX0VaNKqaRXUBlF0YBSKleNCiEQBIFwXbeQxZWp0TAMB33fzxWUiOD7PpNSxr2CyiAIBjzPy/Pw9FxltIaUUvcaTFJrHfm+/+b0tLCwAMYYiKhtm5qawu3tbZavZpbRrNIjlVKR53lvtvvOzg5WV1dRKpUy58vlMo6PjzE7O4u9vT08H0Ofk77neQxA0Hp4zgIVrutKpdSbTWitRalUwvz8fMd1lUoFMzMzqFQqTUkfQALgazfTK8dxcktNJycnTSnKGMMBFHoxfex53neXz3K5/KYUZYwRAEZ6CaYkCIJcU1OjRqMoklmgWRotvHcOJSJMT0/DWovDw8Omz+imKJYSSZIIAKNdNeo4zrAx5l1z6NbWFvb393FwcIDNzc2OGo3jWHLOu5vedd3ie4MuLS299peXl9uuk1IijmNBRMM9aTSKoncFPTs7e+2fnp52DKYkSThjrHvUCyFGvheUiJr8cG5uDmtra7DWYmNj45u1jaf8MAyJiAa6/sjY2NjvR0dH6dPTk32rLC4uWiKyDZdjmY2I7MrKStPey8tLq5T6syvo+Pj4l/Pzc5umqf0RcnV1ZY0xn3sJpmB0dBQ/Io++RH6SJLxeRtv6aHhzc0Pb29tQSiFN02+uFFuvEhvnG32z3brWucb9Qgjc3d3h/v5eAPgE4K/Mi1zG2Ii1dtdxnEdr7VPDRWtrhs66tE1bzyYtjVrGWetgrRWPj49PQoifa7XaH/iQD/mfyD/OxfLhU+RunwAAAABJRU5ErkJggg==",yD="/assets/debug.e0e74a89.png",ED="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AceFSgko8VmfgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEqklEQVRYw+2YTWsUSRjH/9X10i/Vb3Ymkxk0ul6ikoM38Sx6yGETDwEPEvIJBDWXRbyJiqcsOZljPsPs1YMHL1EGhGUcNGTyhiCEjYOJM6R7uvbgZEzGTmbaSLMLeaDorq6q4Tf/eup5qgo4sRP7bxs5ou3PQqHwO2OMAojb35RSCgBiQsjeu2qXuP0k7Se6vid926uTMAzDra2tv8IwfJwEw44AzZdKpTPnz58XcRxDKdUpbeLE+p7tjcH3f3jk+Hfv3jUfPHhQq1QqEsBO36C+7wvXdTEwMJDJ1O7u7mpnz56VlUrFSgLVDhnnFAoFqWmalpUPMsao67ouADOp/TAQt1AoSM45yQpUCEFd1/UAGKlABwcHHcZYZqC6rkNKaQPQU4HmcjkrS0UppTAMQ6QFdYIgyBRU0zS0Z5CnAZWe51mU0uwCOiHgnGtpfdSSUjLGGLJUlHNOAbhpQHXDMEAIyRRUSkkB+KkUFUKQLEEppbAsi+m6HqQBtdv+kimolJI5jpPrG5RS6uu6rmWtqG3bzLbtwaTNUhKoCILAN02TZJhBO4oahhH0C8o9zztlGEamijLGYNs203U9l8SVqKjjOAOWZWUKSgiBZVka59zvF5Tbtn3KNM0sN0/fsoyU4JzLfjfOXErpWZZ17PD0/v17vHr1Co1G41tedhxcv34dxWLxKF/dS6O7vX7/t5s3b376+PGjSmtxHKsoilQURapcLqvx8XFFCOkUTdPU9PS0Wl5e7vTbb7VaTd24cWMZwFA/ijJd17lhGKnU29rawtzcHD58+AClFJaWlrC4uHigj1IKCwsLWFlZwenTp2FZFkZHR3Hnzh1QSjtBH0AA4FMvUEMIkTo0lctlPHv2rDPNewvk2rVrGB0dRavVwuvXr7G4uIiXL1/CMAxMTk6iVCphbGwMFy5cAKUUrutSALl+FpNvmmZq/wzD8MBhjhCCe/fuYWJiAvV6Ha1WC7dv38atW7cAAM1mE2/evEG1WkWr1eqEKNd1Wb9TH9i2fezQdOnSJYyMjODp06dYXV0FAFy9ehVTU1N48eIFNjc3Ua1WMTQ0dCDoe57Hk0CTFM39ihg6PDyMer2OtbW1A+5hmiby+XziGM45giBgAIo9QYUQedd1jx1D6/U6HMfB/j2t53lQSmF7e/vQNOr7PqeU9lZU1/XCrwB9+/YtGo0G7t69i3PnzuHixYu4f/8+arUa1tfXD1XU931GCMn39FEhRN7zvGODNhoNzM7OYnp6Gg8fPkQURahWq5ifnz+w6LrzfRAEVNO0XE9QxtjQz4Dquv7DiWBjYwNPnjyB67qI4xhfvnxJOs933EPTNDiOQwghp3qCUkpzvu+nBr1y5QoePXqEpaWlQxVL8snLly9jZGTk+/HXcUAIEf2ABp7npY6jUkrMzMz0Dbk/3nafnYQQtNls9lxMdrFY/OmDHSEkVUlSOQgC2k6jhyrqfP78mTx//hyGYSCO4x+uFLuvEve3E0J69utu2z+eMYadnR18/fqVATgD4J/Ei1xN04aUUiUhRKSUau27aO2ez6RL27irj+oqpKue1A9KKRZFUYsx9kcYhn/jxE7sf2L/Ao3G7H18/ZeRAAAAAElFTkSuQmCC",CD="/assets/events.ab9e914f.png",mwe="/assets/eventload.ac71847b.png",VD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AQVAjUWHbYTxgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAGd0lEQVRYw+WZb0zT+R3HX/KnSGftHyiWRRyItIXswRLC/ENuUEZ0US86GZcAM4c6fbDEEBcUdmEm7BITfbgHZptpxGQRo7OeGSbYVYFLMOYOwbMsYlEBJwNLWwpEkAl89mCFcUpbiz1yy70f/v68v+/f98/78+cH/ydYFUWuHYDhjWuDgOPbJDQzPj7+b2VlZUadTgeAx+OhsbHxH7Ozsx8Cz74tK1OZn58/7fF4ZB5DQ0OSm5s7BXwUjQFiosARCxRbLBZFUlLSwkWDwYDFYlkNFEdpnLD4MVAGpC1xLw74aXJycn9bW5u8iebmZtFoNC7gJ4EPehMbgXIg731FFgKtZrNZ4uPjvwRqAuRrgFLgzxqNxnXw4EEZHx9/S6jH45Hy8nJRq9U9wB+BnwPfA4zAJwqFotNsNgvQAhS8l8iqqirp7+8Xq9UqO3fulMTExK+ANqPROF1TUyMOh0N8Pp8Eg8fjkZs3b0p1dbVs2rRpCvhcpVJ179mzRxoaGsTlcsnhw4eXLXYz0FJVVSWjo6MLg/r9frl+/bqcP39enE6nRIp79+6J1WqVpqYmmZiYWLg+ODi4WOyPIhFakZOTIwMDA7JScDqdkpmZKYHt8c6nvv3Jkyedt2/fXjF/u3PnDn19fXeAu5EI7Z+env6rzWZjYmLiGxc5OjqKzWZjbm7uKjAU6fublEqls6mp6Z2WzufzidPplPb2dmlvbxen0/m1/R0KV65cEaVS2RHEAhd8MBiGJycnRz0eT8ivcblcXL58Gbvd/rq3t3fw5cuXHmDVmjVrkk0m0/odO3bElpaWkpmZGZTD7XYzOTk5BniXsyK/MJvNrx48eBB0Ji5duiTbtm2bA2zAx0AWoAV0gBk4DHxWWFgo165dC8rT0dEh6enpE8CHkYqMA87V1NQEJb948aJs3LjxFVAHqENw6YBPc3JyZmw2W1C+qqoqAf4QSbiNASxarbbX4XAsSfrw4UPZunXrHPC7d8zAYoHfFxUVSX9//5KcN27cEJVK1Q18EI4zA6gAGrRa7dPKysqgEae+vl6AK4AqglXSAzfOnDmzJKfb7Zby8nLRarVPAGsgB0h/k2R7XFxc9+bNm6dqa2vF4XCI3+8Perrz8/NfA5XL2Pe/Lioqmg3mBj6fT+x2u5w4cULy8vKmYmNjuwIzvICP9+/fP+N2u8Nayf3790Wv1z8NHJxI8cO0tLR/9vT0hB1neHhYysrKXgMlXzP8pKQk9Hp92JHGxsaYmpoaAUaWIXTI7/d7fD5f2AdTUlKYrxailTivCBaEer1ewpk7gFqtJjExUQ+kLGO8VLVanbx4pkIFgcUzPx+ZhhsbGx89fvw4s7CwMKG4uJjc3FzU6rftccOGDRiNxrSRkZFtgCtCoR8Yjcbvr1u3bsmbfr+fjo4OHA4HLS0trzo7Ox8B7qXKgl8CF3Q6Xd+BAweibU/rwtlTRUWFaLXap8D5gFVmhNsORe9o+HURbLFPLRZLSMNfu3Ztd6C+WhVRCK2trQ0Z541G4xRwEkgKdYCBU9nZ2TNXr16NagidR6nJZJoOVXI0NjbOz+w14BBgAjSBxMQM/Aq4XlBQEDYpycjIWFZSQqDS/LyhoSGkMff09Eh9fb3k5+fPGAyGpyqV6guVSvWlwWDoKygomDl16pS4XK6QHGfPnhXgFqBcTj5qUCqVmsVNhaVgMpk4efIkR48ejX3+/HnG2NhYxryNrV+/Hq1WGz4J0OtRKpVrJycnk4DJSGf0t7t3716yXo82vF6vbN++XYDfRNrS+UFCQkJJSUkJKpXqG486Op2Offv2ERMTUwKkRlwuP3v2bMXK5e7u7pDlcmwQocqRkZEsIH3Lli2sXr0agPHxcex2O3fv3iU+Pp6UlMiiaFdXF83NzQwNDZGamopCofhvpjI0xOnTp3E4HK3AJWA44pbOsWPHZGBgQKxWq+zatUsSExMfAG0mk2m6trZWbt26FbLa9Hq9Yrfb5fjx45KVlbXQ0tm7d69cuHBBent75ciRI9HpP2VnZ4tCoegAaoHMgHV9BJzTarW9hw4dCtokq6ioEI1G8wj4E7Av8K4J+CQhIaErOzv7vUUu7kPtDxJ359uOAyHajr0h2o7GQPWaxwogFvhLXV3dW0Krq6sFOBeNvDcaifMs4Ghtbf231/u//sGLFy9obW19BfwdmPvO/GyI5u+bny3x++ZfgJ3vEv4DXc0mnOOJDqUAAAAASUVORK5CYII=",DD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AQWAhQoQv20YAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADA0lEQVRYw+2Yu0tjQRTGv7l5STBiMBFUthArQZSNxk62FKwEEUQN2IoQ8qdYaG8T0ASbWwUxhS8Em22EbbQIC1v5whgxueZ+21wX9eYxufcmPtYPpplMzvzunDlnzgzwpf9Uws6fSXoBDAKYAPADwHcA34yffwP4CWAPwAGAX0KIUku/juQAyTU2rjWSA60A7CWZon2lSPY2C3KBzmvBSUDFopsb2Q6KE5ApNl8pW7D1VvLq6oqqqjIWi3F0dJShUIg+n49er5fBYJCRSISJRIKnp6fUdb3uyjq+J8vlMldWVtjW1kZFUeo2j8fDWCzGm5sbZ/esEd1VpWkaJycnpSCft6mpKRYKhXqwFbNBtX2x2ozMsbOzg2QyWW/YqhSokZBnpY82IdDX14f5+Xlks1kcHx8jHo+js7PTNFbXdWxubkLTtFomZ6UOBZlU9OT6sbExZjIZappmGnN0dMRAIGByf39/P6+vr+0FFkmvTC4pl8s8OTmpCPikQqHASCRiAu3p6eHFxYXMNN5arh+UcbeiKIhGo3C73VXHlEol5PN5U39HRwc8Ho/MNIO1QCecChxVVZHL5Uz9w8PDaG9vlzExUcv1aSeOmWw2y66uLpPb/X4/d3d3Zc2ka4Ge2YVUVZXBYNAE6XK5uLy8zMfHR1lTZ7VAi3Ygt7e3K0a6y+XizMyMTLJ/rmJTQPf396uu5NzcHO/u7ho1WXTc9fl8niMjIxUhl5aWWCxa+v4zx4Pp8PCQfr/fBDo+Ps7b21urTkrXSk97VlJRLpfDw8ODqX96ehqBQMBqhnvB8jpjH1ix2N3djWg0Cl3XX9QAQ0NDdlLxQdXrsnFsFd/JVd73/HqtvKqESgDW3wHket03AOPO3pC2trYYDocZCoX+tXA4zI2NDauBZCrz3BXqy3Mj4qRr0vv7e1xeXlbst6C0EOJctsJPvKHbE9JXESHEHwCLbwC5aMwtfWeCECLZ4sBaN+ZEQ6CG4gDSLYBMG3N98iedD/VI9uGeHd/6IfdzP41/6TPoL3empoogJdXtAAAAAElFTkSuQmCC",rU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wgIEDgk7cKcLgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAE+klEQVRYw+2YS0xUVxjHf+feO8MMw/AYYICI4zCtaCgYFaZg4yu4sGBEN4pKTaMx2kWTGuOiSRPrg4VNV7ppgouSdKHBNNGFblptgjU2TVNDA20GFSEgDI9JRSgww733dMEwYEXFBx1N5p/c3OQ87vnd7/vOd79zIaGEFkwrgCHAAHTgG0D9z5h8oCM6xgCuAknxgP0UiEQhxoAts/o04LtZkA+Ad+JlVVvUStMwASAn2rcTmIi2h4F98Q6BZUDfLNgGwAvcn9X2PWCZa7J4hYUFwIYNJPX3Z2UYo6YCMB7ttEfvikNIT1Jo+Ic/GAMOAWejMRqJxuXy6NBeYH0U/KVBhceTlasowj0+ruTbbGKJxZK0HMWelJaSlGXV1HcVTbNrFguKogAgTRNdN9D1SHhSNzpG/gkHJ8Njsru7d62u60WAnPV8HTgQjdU5pT2tw+fLcRth6ZuUotTpdPozM7NWut1ud05OrisvL0/Jzc2xZGZmkZaWhsPhwGq1oijKDKiU6LpOJBJmbGy8+NGjR4RCQ7S1/Wk0nDvHxPiEEl1KapoWyM7O6LNaye3qGgw+F7QiH3uf6l5pmurGjIy8zR7P4hWdnZ3Oqqpqbdu2bbhcLpKTk1FVFSEEQsw4REr5XLdIKXE609SGhnOz5wpN04pLS/2XBgeHWhSs1zEnm63JA78EAoxMD1IBSkuxKEruh2aK+/OSktVfVFdvqanbs8dbVVVtb29vV0pLy6ioqMBms80JCcTannWFQiEOHfqEwcHBx+bqui5WrVptPXz48OJF+Z51QrVuDYWMEqvVQmHKaGffKJNqUVF2yvDfqSf87685UVu7+4O6urqU8vIKkZ2djRCC5uZmfD4fhYWFT8C9iEzT5OTJk1y//hMALpeL7du309bWhpSSe/fusWlTJVVVVaK8vNzu8Sx5T0o2Bx48zF+UnvSbNjmuFHm8vgMHDx50LV26NGad+bjyRXTt2jXOn78w5UZV5ciRI+zevYuWlhba2toIh8OcOlXPhQvnSU9Pp7KykpKS4tTh4Ycf/9V6+5IiTaloqqpmZmbGIF+3BgYGOHbsS8LhMADr1q1l796PcDgc7N+/D4tlKnXevXuXM2fOxoyUmppGst2ONKWmLHSWNwyD06e/oqOjA4CsrCzq6+ux2WwAeL1eli0rjGWLpqYmbt68+cRzFhz0ypWrXLx4Mebyo0ePMjvEhBAUFHjx+8sACIfDHD9+nKGhofnl0delmpqt1NRsfeYYVVVpaGjA4XDEQk9KGQuV/8Wiz8ur8920cQV9ESVAE6BvDaiU5hsHJ6WMFa0KQF8wyOXLl+np6Xnt3/iXBQwGgzQ1NXHnzp0Z0BRHMl1dXTQ2NjIyMjIn7ELUAE+DHBsbo7HxWzo775OWmjoD6nSmsmPHTvr7g/T29sbdogMDA3R3d1Nbuwt3Ts7jMTpdFBuGEXdQ0zQRQkx9Uufe9eLtT0/x3mRxzqPi2V6UM2dqTVUNXTf0yYmJcUA+VtFM3WXs6CulnPNg9yo73DSNWFxOr2uaUzk9MhkhEglLRTUjYkUOjlH7oq9Xla3Z1R4IiDK/H5fLFavOf75xg4KCApZ4vSCj5ynkU/5kzP8FZNRcwWAfra2trN+4EYs2VR4PDw9z69YtiouLuf37rz8KMfyZAPAvd2YGBh0+pHzjdlOeQ+8JdId6SSihhBJ6M/UvkRLqf5NwFscAAAAASUVORK5CYII=",iU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkWBAgakEAAvgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAESUlEQVRYw+2Y3U8jVRjGn3NmWvpBGWjZFtylQFPMlsBmFcjSBLvAzVoIyxXuZr0wJspeeisxxj/Av2DjhVwa9kbScKVIAhjMkkiyktSC0TaU0pYWHYr9nJnjBf2QDwVaVtZsn2QyycycmV/e97zPOe8AVVVVVVUvpUilY+/eRU0k0tggHygUAFL5m9r8meoJs9bExW+eI5m/xF4kKLFaG5soJeZUit7QaEirSlVzE1RbI9TWNKp5zk55XsurVKCUHtIoCiRJhiRlMzlJ/jXxZyYs59KSJGU202nlF52ORBIJKRiLxaIA5LJBbTaLWc4wW46RHoPB0GcyNd42m81mi6XJ2NzcTJuaLCqTqRGCIECv10OtVoNSWgJlDJIkIZvNIJlMYX9/H/F4DJFIRNoOheTdaOQgGt0N7+3FfhLF/WcAW+N55edAYDd8Jmj/DWh3OPNtReEGzebme1Zryy2/329wu0f48fFxGI1G6HQ6cBwHQggIKQ1n7OyMMsagKApkWUY6ncLe3u+Yn5/H06czss1mSwWD28+j4e3voOQW1broDz4fEoWxHAD09EBFadPbSq354+7uNz8ZGRm9/+6jR21u94h2Y2OD9vT0or+/HxqN5lRIAMVrZx2UUvA8D41Gg/r6eqRSKQQCATo1NaV2Op0tr11veYtw6rF4XO5Wq1V4vfbAv3OAHN/Zea02FuU+vXPH+f7Q0NA1p9OJhoYGAEA6nS4GnTF2Au4ydJgJBo1GA7vdDrvdTtxud8Pq6urEwsLCve+Xl77qbM18xudStNPaZvtgcnLS2NHRUYzOeVL5QmyIEBgMBgwPD6O7u6tOFP94z7u+9jVlCqM8x3Emk6n44JV7Zp6hrk6ATqsFUxhP/y+Gf+mgLtcAXK6Bc0fuvBl8dSN60Yo/b9FWI/rKgvKVVjgAOBwOPHnyxanPPH78IbxeLwBgcXH5aiK6uLgMQRDg9XoxNjZ64v7Y2Ci8Xi8EQagI8ggoY0pZL/B45iAIAkRRPOKfLtcARFGEIAjweObKd4W/g+6Ew5idnUUwGCxrjS/AHle5kIwxhMNhzMzMYHNzswRaq9chEAhgenoaiUTiVNizVpDjsJVAJpNJTE9/Cb//Nwh1dSVQg6EOExPvIBIJIxQKlb1UejxzcDgccDgcJyAvsrRGo1FsbW3hwYOHMFssR6u+sCmWZbmiSf9P1X8RKYoCQgj0en2xBeErbUrPG6X/zPCvaiNdseFX6oulDP5LFlnpJwDPcbIkyVIunU4BYEd2NIV+ptD6Fvqmy+oCDrtSuTgvC99VlENPz+ayyGYzjHJKltyyQH+gvf75G73Ohxs+H+nt64PRaAQAyLKM5aUltLe3o7WtDWD5fuqUnx3kgnOc5cMVDu9gfX0drsFBqPjDBIuiiJWVFXR1dWHtx2ffEiJ+RACg76bB5NvV28DY1TdMx9Ssl4K+rXgIVVVVVVUvp/4CVivTPqtayYoAAAAASUVORK5CYII=",aU="data:image/png;base64,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",Swe="data:image/png;base64,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",oU="/assets/audio.7d30fd5a.png",sU="data:image/png;base64,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",lU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS0UqInYQcchQnSyIijhqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxc3NSdJES/5cUWsR4cNyPd/ced+8AoVFhmtU1Dmi6baaTCTGbWxXDrxAQQhBx9MvMMuYkKQXf8XWPAF/v4jzL/9yfo1fNWwwIiMSzzDBt4g3i6U3b4LxPHGUlWSU+Jx4z6YLEj1xXPH7jXHRZ4JlRM5OeJ44Si8UOVjqYlUyNeIo4pmo65QtZj1XOW5y1So217slfGMnrK8tcpzmMJBaxBAkiFNRQRgU29VWGToqFNO0nfPxDrl8il0KuMhg5FlCFBtn1g//B726twuSElxRJAKEXx/kYAcK7QLPuON/HjtM8AYLPwJXe9lcbwMwn6fW2FjsC+raBi+u2puwBlzvA4JMhm7IrBWkKhQLwfkbflAMGboGeNa+31j5OH4AMdZW6AQ4OgdEiZa/7vLu7s7d/z7T6+wEgYnKG3s9puAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+UCBQMwAvRNakUAAADjSURBVGje7ZqxDcMgEEVNlAUoKViDgRiMgajZgIKSEZIq0QUFnDM4CuRfZRcn/KTnjzhbbANKSnnj9uScxYi1L9vkNT2AGKFKSom9sFJqiF5Q6KcVKpWpqRJj7HqIEMLLvbX2Y52gEAA663q0kXqvte7qh0JLxSiNzjI2j2hDe4wxbyO51InG6l6kQiEAAAAAAAAAAAAAAAAA4PtHyrOPilAIAAD4EwDWcNd7/7yuTSVac//aJALDXQDMuBPXdlz6nrR6Su+h0JIxuherj3LOsRemUVkWPrMuqxBXrVbhZ49VAO7oTlveWOIKeQAAAABJRU5ErkJggg==",F2="data:image/png;base64,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",gwe="data:image/png;base64,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",FD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gIZFDEXnijShQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADPUlEQVRYw+2ZPUgcQRTHfzMbcickURElaJEjXCWCjQS1iEEMBOxsJIUg2mpjBLXQQvCDHIc2dgqCWAQ0XDgIgRTR5apEiwO5JoWVhR9YKIrG7E0K3cveet7umju9iA+GHd7OvPnv/N/HDCv4KwJ4RP7lFPjldZK4eJYAIaAGkIDKA0ABJIFdIAbMAEdejcxdgLuplgROgGYvIB8D328YqNlOgTduQD64oESaip6eHurq6pBSkkgkmJycdDRSVVXFxMQEyWQSpc69RgjB3t4eIyMjHB8fA9Dd3c3Ozg7RaNSc+hD4CLwFPjmt8wT4YX7l8vKyMmVlZcXVzgwNDalMcnR0pBobG1PjFhcXlVJKhcNhpWma3U7WnZV2hbkj9n42uWqcUiqjvb6+PsbGxuzDPwCvXQO9KRkYGGBubs7O7GegtaCAAnR1dTE8PIwQwhozS8CrggIKMDo6yvT0tFXlByJAS0EBBejt7SUUCll3thj4ArwoKKBCCPr7+xkcHLSqtYtq6c8ZULfZwUnGx8ftbvASeJ4zoGdnZ2npyGyGYWAYhidbHR0dVFdXW1XNZpT9s8zPz1/KmQAHBwfE43FPO19cXEwgECCRSJiqZ45A/X6/K6D7+/tMTU05jisqKnLlr5agSrGelfr6+noqKytz4n/l5eXU1tZee74j9aurq8zMzLC1tXXtQCstLaWzs5NgMJg/oMFg0BWt+ZaCyKP3QO+B3gWgjlG/vb3NwsICm5ubOV9c0zQaGhpoa2vD5/M5jk+7My0tLaXde2pqavJ+G21vb0+tZxiGam1ttb4PO1K/trbGxsZG3mmNRCLs7u5en/rDw8M0mlpaWlzXf3t1stZv8yodi8VS709OTq4P1Grc5/MxOzubk9ovpUTXdZqamnIXTPYFpMxNovBqR3ql8L/Io7Zz4n3Cv7tA8+mTXm3L2/JJr7ZltrRh7QshcpaaMqUnTdNS+kwfcSmPxuNxSkpKkFKyvr6e0huGga7rlJWVZa06biqUpmmXrtG6rlNRUYFhGFeW07RDib0JIfJ2GHFp+71J/SHws4AD6qtJvQLeAeVAgL+/dG5bfgNR4BsZQD0tEKACOOP8nxQAfwAPG9nwqzxsWQAAAABJRU5ErkJggg==",_we="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AQaACoUZQW4TAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAlElEQVQY032PQQrCMBQF56UVwZ00eMviFTxAN5LDlN6jp5BmXaTauDApIRUHQuDn5U0CgHdWccc7G+IiPxORx91SGQIZ7xVdrhMAJt04n3SjIM28s9qU8G1rWh+VTcqraSfqsqU+iF+k4Pa217LLBEDKtX+QKUPdMNMN867VlJN+XOjHvV/e2ZDcleAYP/NcAmvm+gBPyjeWUUkCqAAAAABJRU5ErkJggg==",xwe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AsGEjAJMRMmpgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAkklEQVQY042QsQnEMAxFv4SjQQwHniqQMTKB98hCuS6dmkBmMIbYVxw2iqv8Sl886QsRjFaRan3MmVrtLDR7XywI1WphrCL1COE+Qrhl4ioTd99S3LjpkQ1g9r5AtTJeyo2Nr/+0kgEUax5arhPLdcJCAMAxZ9pU+8CeEvaUOrCpcsyZaHxPqf+7mag0CADo7cN/EYBJPjUCHZkAAAAASUVORK5CYII=",vwe="data:image/gif;base64,R0lGODlhKwALAPEAAP///wAAAIKCggAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAKwALAAACMoSOCMuW2diD88UKG95W88uF4DaGWFmhZid93pq+pwxnLUnXh8ou+sSz+T64oCAyTBUAACH5BAkKAAAALAAAAAArAAsAAAI9xI4IyyAPYWOxmoTHrHzzmGHe94xkmJifyqFKQ0pwLLgHa82xrekkDrIBZRQab1jyfY7KTtPimixiUsevAAAh+QQJCgAAACwAAAAAKwALAAACPYSOCMswD2FjqZpqW9xv4g8KE7d54XmMpNSgqLoOpgvC60xjNonnyc7p+VKamKw1zDCMR8rp8pksYlKorgAAIfkECQoAAAAsAAAAACsACwAAAkCEjgjLltnYmJS6Bxt+sfq5ZUyoNJ9HHlEqdCfFrqn7DrE2m7Wdj/2y45FkQ13t5itKdshFExC8YCLOEBX6AhQAADsAAAAAAAAAAAA=";const wwe=[{name:"Load ROM",icon:pwe,type:ue.ROM_LOAD,details:"Load a ROM image and read its boards"},{name:"New board",icon:xD,type:ue.BOARD_NEW,details:"Create a new board",dropdownFn:TD},{name:"Import board",icon:vD,type:ue.BOARD_LOAD,details:"Import a board file into the editor"},{name:"Export board",icon:wD,type:ue.BOARD_SAVE,details:"Export a board file for distribution"},{name:"Debug",icon:yD,type:ue.DEBUG,details:"Debug functionality",advanced:!0},{name:"Screenshot",icon:ED,type:ue.SCREENSHOT,details:"Take a screenshot of the current board",dropdownFn:bD},{name:"Events",icon:CD,type:ue.EVENTS,details:"View and manage events",advanced:!0},{name:"Settings",icon:VD,type:ue.SETTINGS,details:"Editor settings"},{name:"About",icon:DD,type:ue.ABOUT,details:"About PartyPlanner64"}],ywe=[{name:"Close ROM",icon:rU,type:ue.ROM_UNLOAD,details:"Close the ROM file and remove its boards"},{name:"Save ROM",icon:iU,type:ue.ROM_SAVE,details:"Save changes out to a ROM file"},{name:"New board",icon:xD,type:ue.BOARD_NEW,details:"Create a new board",dropdownFn:TD},{name:"Import board",icon:vD,type:ue.BOARD_LOAD,details:"Import a board file into the editor"},{name:"Export board",icon:wD,type:ue.BOARD_SAVE,details:"Export a board file for distribution"},{name:"Debug",icon:yD,type:ue.DEBUG,details:"Debug functionality",advanced:!0},{name:"Screenshot",icon:ED,type:ue.SCREENSHOT,details:"Take a screenshot of the current board",dropdownFn:bD},{name:"Events",icon:CD,type:ue.EVENTS,details:"View and manage events",advanced:!0},{name:"Patches",icon:aU,type:ue.PATCHES,details:"Apply patches to the ROM",advanced:!0},{name:"Model Viewer",icon:sU,type:ue.MODEL_VIEWER,details:"View 3D model data in the ROM"},{name:"Sprites",icon:lU,type:ue.SPRITE_VIEWER,details:"View sprite data in the ROM",advanced:!0},{name:"Audio",icon:oU,type:ue.AUDIO,details:"Game audio options",advanced:!0},{name:"Settings",icon:VD,type:ue.SETTINGS,details:"Editor settings"},{name:"About",icon:DD,type:ue.ABOUT,details:"About PartyPlanner64"}],Ewe=[{name:"Close ROM",icon:rU,type:ue.ROM_UNLOAD,details:"Close the ROM file and remove its boards"},{name:"Save ROM",icon:iU,type:ue.ROM_SAVE,details:"Save changes out to a ROM file"},{name:"Overwrite",icon:Swe,type:ue.BOARD_WRITE,details:"Overwrite a ROM board with the current board",dropdownFn:kwe},{name:"New board",icon:xD,type:ue.BOARD_NEW,details:"Create a new board",dropdownFn:TD},{name:"Import board",icon:vD,type:ue.BOARD_LOAD,details:"Import a board file into the editor"},{name:"Export board",icon:wD,type:ue.BOARD_SAVE,details:"Export a board file for distribution"},{name:"Debug",icon:yD,type:ue.DEBUG,details:"Debug functionality",advanced:!0},{name:"Screenshot",icon:ED,type:ue.SCREENSHOT,details:"Take a screenshot of the current board",dropdownFn:bD},{name:"Events",icon:CD,type:ue.EVENTS,details:"View and manage events",advanced:!0},{name:"Patches",icon:aU,type:ue.PATCHES,details:"Apply patches to the ROM",advanced:!0},{name:"Model Viewer",icon:sU,type:ue.MODEL_VIEWER,details:"View 3D model data in the ROM"},{name:"Sprites",icon:lU,type:ue.SPRITE_VIEWER,details:"View sprite data in the ROM",advanced:!0},{name:"Audio",icon:oU,type:ue.AUDIO,details:"Game audio options",advanced:!0},{name:"Settings",icon:VD,type:ue.SETTINGS,details:"Editor settings"},{name:"About",icon:DD,type:ue.ABOUT,details:"About PartyPlanner64"}],uU=[{name:"Back to editor",icon:F2,type:ue.BOARD_EDITOR,details:"Return to the board editor"}],Cwe=uU.concat([{name:"Create Event",icon:gwe,type:ue.CREATEEVENT,details:"Create your own event code",dropdownFn:Gwe},{name:"Import Event",icon:mwe,type:ue.EVENT_LOAD,details:"Load event code from a file"}]),Vwe=[{name:"Back to event list",icon:F2,type:ue.BACK_TO_EVENTS,details:"Return to the event list"},{name:"Save",icon:FD,type:ue.SAVE_EVENT,details:"Save the event"}],Dwe=[{name:"Back to editor",icon:F2,type:ue.ADDITIONALBG_BACK,details:"Return to the board editor"},{name:"Save",icon:FD,type:ue.SAVE_ADDITIONALBG,details:"Save the code"}],Fwe=[{name:"Back to editor",icon:F2,type:ue.AUDIOSELECTCODE_BACK,details:"Return to the board editor"},{name:"Save",icon:FD,type:ue.SAVE_AUDIOSELECTCODE,details:"Save the code"}],LB={name:"",icon:"",type:"MORE",details:"More options"};async function Twe(n){switch(n){case ue.ROM_LOAD:Lo(".z64,.v64,.rom,.n64",bwe);break;case ue.ROM_UNLOAD:bt.clear(),Xk(),Yp(),Jp(0),Fk();break;case ue.ROM_SAVE:io(!0),setTimeout(()=>{bt.saveROM(),io(!1),Mwe()},0);break;case ue.BOARD_LOAD:Lo(".json",Pwe);break;case ue.BOARD_SAVE:let e=P0();e=cU(e);let t=new Blob([JSON.stringify(e)]);uo.exports.saveAs(t,e.name+".json");break;case ue.BOARD_COPY:rV();break;case ue.BOARD_DETAILS:vr(A0.DETAILS);break;case ue.BOARD_EDITOR:vr(A0.EDITOR);break;case ue.SETTINGS:vr(A0.SETTINGS);break;case ue.ABOUT:vr(A0.ABOUT);break;case ue.MODEL_VIEWER:vr(A0.MODELS);break;case ue.SPRITE_VIEWER:vr(A0.SPRITES);break;case ue.EVENTS:vr(A0.EVENTS);break;case ue.BACK_TO_EVENTS:await $xe()&&(h4(null),vr(A0.EVENTS));break;case ue.EVENT_LOAD:Lo(".c,.s",Lwe);break;case ue.SAVE_EVENT:Zxe();break;case ue.STRINGS_EDITOR:vr(A0.STRINGS);break;case ue.PATCHES:vr(A0.PATCHES);break;case ue.DEBUG:vr(A0.DEBUG);break;case ue.AUDIO:vr(A0.AUDIO);break;case ue.SET_BG:Lo("image/*",Rwe);break;case ue.SAVE_ADDITIONALBG:case ue.SAVE_AUDIOSELECTCODE:fwe();break;case ue.ADDITIONALBG_BACK:await RB()&&vr(A0.EDITOR);break;case ue.AUDIOSELECTCODE_BACK:await RB()&&vr(A0.DETAILS);break}}function cU(n={}){if(typeof n!="object")return n;n=JSON.parse(JSON.stringify(n));for(var e in n)!n.hasOwnProperty(e)||(e.charAt(0)==="_"&&delete n[e],typeof n[e]=="object"&&n[e]!==null&&(n[e]=cU(n[e])));return n}function bwe(n){const e=n.target.files[0];if(!e)return;io(!0);let t=new FileReader;t.onload=r=>{if(!r.target.result){io(!1);return}let i=bt.setROMBuffer(r.target.result);!i||i.then(a=>{Fk(),Wk(),io(!1),wt("ROM loaded")},a=>{console.error(a),tn(`Error loading the ROM file.

${a}`)})},t.readAsArrayBuffer(e)}function Pwe(n){const e=n.target.files[0];if(!e)return;const t=new FileReader;t.onload=()=>{let r;try{r=JSON.parse(t.result)}catch{tn("Board could not be parsed.");return}let i=Mk(r);Jp(i)},t.readAsText(e)}function Rwe(n){const e=n.target.files[0];if(!e)return;let t=new FileReader;t.onload=()=>{Uk(t.result)},t.readAsDataURL(e)}function Lwe(n){const e=n.target&&n.target.files;if(!!(e&&e[0]))for(let t=0;t<e.length;t++){const r=e[t];let i=new FileReader;i.onload=async()=>{try{const a=Bwe(r.name),o=i.result,s=oo(a,o);await HE(s),hr(s)}catch(a){tn("Event file load failed. "+a);return}},i.readAsText(r)}}function Bwe(n){const e=n.toLowerCase();if(e.endsWith(".s"))return y0.MIPS;if(e.endsWith(".c"))return y0.C;throw new Error(`Only .s or .c file extensions are recongized. (Saw ${n})`)}function Tw(n,e,t){let r;return n!==A0.EDITOR?n===A0.EVENTS?r=Cwe:n===A0.CREATEEVENT_ASM||n===A0.CREATEEVENT_C?r=Vwe:n===A0.ADDITIONAL_BGS?r=Dwe:n===A0.AUDIO_SELECTION_CODE?r=Fwe:r=uU:t?Ys(e)?r=ywe:r=Ewe:r=wwe,tr(In.uiAdvanced)||(r=r.filter(i=>!i.advanced)),r=r.filter(i=>!i.show||i.show()),r}function Mwe(){const n="romSaveNotice",e=()=>{mie(n)};pie(Xe(J9,{color:_D.Green,onClose:e,children:["Before trying the game, review"," ",B("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/wiki/Emulator-Setup",target:"_blank",rel:"noopener noreferrer",children:"emulator setup instructions"}),".",B(Z9,{onClick:e,children:"Got it"})]},n))}let bw=!1;const Iwe=class extends Ne.exports.Component{constructor(e){super(e),this.actionsEl=null;const t=Tw(e.view,e.board,e.romLoaded);this.state={actions:t,totalActions:t,overflow:[]}}refresh(){const e=Tw(this.props.view,this.props.board,this.props.romLoaded);this.setState({actions:e,totalActions:e,overflow:[]})}render(){let t=this.state.actions.map(i=>i.dropdownFn?B(N4,{action:i,fn:i.dropdownFn},i.type):B(dU,{action:i},i.type)),r;return this.state.overflow.length&&(r=B(N4,{action:LB,overflow:this.state.overflow,fn:jwe},LB.type)),Xe("div",{className:"header",role:"toolbar",children:[B(Owe,{}),Xe("div",{className:"headerActions",ref:i=>{this.actionsEl=i},children:[t,r]})]})}componentDidMount(){bw=!0,window.addEventListener("resize",this.refresh.bind(this),!1),setTimeout(()=>{window.requestAnimationFrame(this.handleOverflow.bind(this))},0)}componentDidUpdate(){const e=Tw(this.props.view,this.props.board,this.props.romLoaded);iG(this.state.totalActions,e)||this.setState({actions:e,totalActions:e,overflow:[]}),setTimeout(()=>{window.requestAnimationFrame(this.handleOverflow.bind(this))},0)}componentWillUnmount(){bw=!1,wt("Why did Header unmount?")}handleOverflow(){if(!bw)return;let e=this.state.actions.slice(),t=this.state.overflow.length,r=this.state.overflow.slice(),i=ls.exports.findDOMNode(this),a=this.actionsEl;if(!!a){for(;a.offsetWidth>i.offsetWidth-215-(t?0:80);){let o=a.children[e.length-(t?2:1)];if(!o)break;o.style.display="none",r.unshift(e.pop())}for(let o=0;o<a.children.length-(t?2:1);o++){let s=a.children[o];s.style.display=""}e.length===this.state.actions.length&&r.length===this.state.overflow.length||this.setState({actions:e,overflow:r})}}},Owe=class extends Ne.exports.Component{render(){return B("img",{className:"headerLogo",src:hwe,alt:"PartyPlanner64 Logo"})}},dU=class extends Ne.exports.Component{constructor(){super(...arguments),this.handleClick=()=>{Twe(this.props.action.type)}}render(){let e;return this.props.action.icon&&(e=B("img",{className:"headerButtonIcon",src:this.props.action.icon,alt:""})),Xe("div",{className:"headerButton",title:this.props.action.details,role:"button",tabIndex:0,onClick:this.handleClick,onKeyDown:Qc(this.handleClick),children:[e,B("span",{className:"headerButtonText",children:this.props.action.name})]})}},N4=class extends Ne.exports.Component{constructor(){super(...arguments),this.dropdown=null,this.state={opened:!1},this.globalClickHandler=e=>{this.elementIsWithin(e.target)||this.close()},this.onButtonClick=e=>{this.state.opened&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),this.setState({opened:!this.state.opened})},this.onDropdownClick=e=>{e.stopPropagation()},this.close=()=>{this.state.opened&&this.setState({opened:!1})}}addGlobalHandler(){document.addEventListener("click",this.globalClickHandler)}removeGlobalHandler(){document.removeEventListener("click",this.globalClickHandler)}elementIsWithin(e){return this.dropdown?this.dropdown.contains(e):!0}componentDidMount(){this.addGlobalHandler(),window.addEventListener("resize",this.close,!1)}componentWillUnmount(){this.removeGlobalHandler(),window.removeEventListener("resize",this.close)}render(){let e="headerButton",t=null;if(this.state.opened){e+=" headerButtonExpanded";let i=this.props.fn(this.close,this.props);t=B("div",{className:"headerDropdown",onClick:this.onDropdownClick,children:i})}let r;return this.props.action.icon&&(r=B("img",{className:"headerButtonIcon",src:this.props.action.icon,alt:""})),Xe("div",{className:e,tabIndex:0,role:"button","aria-haspopup":"true",title:this.props.action.details,ref:i=>this.dropdown=i,onClick:this.onButtonClick,children:[r,B("span",{className:"headerButtonText",children:this.props.action.name}),B("div",{className:"headerDropdownArrow",children:"\u25BE"}),t]})}};function kwe(n){const e=Awe();return B(Nwe,{resultsPromise:e,onClose:n})}const Nwe=n=>{const{resultsPromise:e,onClose:t}=n,[r,i]=Ne.exports.useState(null);return Ne.exports.useEffect(()=>{e.then(a=>{i(a)},a=>{t(),console.error(a),tn(`An error occurred during board validation, please submit an issue.

`+a.toString())})},[e,t]),r?B(Aa,{children:r.map(function(a,o){return B(Uwe,{name:a.name,errors:a.errors,warnings:a.warnings,unavailable:a.unavailable,forcedDisabled:a.forcedDisabled,closeCallback:t,boardIndex:o-1},o)})}):B(Hwe,{})},Uwe=class extends Ne.exports.Component{constructor(){super(...arguments),this.boardClicked=async e=>{if(!!this.props.name){if(e.target&&e.target.tagName.toUpperCase()==="A"){e.stopPropagation();return}if(!this.hasErrors()&&!this.props.unavailable&&!this.props.forcedDisabled){this.props.closeCallback();const t=HA();if(!t)return;io(!0);let r=P0();try{await t.overwriteBoard(this.props.boardIndex,r)}catch(a){console.error(a),tn(`Error overwriting the board.

`+a);return}wt("Board overwritten"),Xk(),Wk();let i=qie(r);i<0&&(i=0),Jp(i),Lve("board_write",{event_category:"action",event_label:r.name}),io(!1)}}}}hasErrors(){return!!this.props.errors.length}hasWarnings(){return!!this.props.warnings.length}render(){let e="overwriteEntry",t="";this.props.name&&(e+=" overwriteBoardEntry",t=`Overwrite ${this.props.name} with the current board.`);let r=[];return this.props.unavailable?(e+=" unavailable",r.push(B("div",{className:"overwriteBoardMessage",children:"Board cannot be overwritten currently."},"unavailable"))):(this.props.forcedDisabled&&(e+=" unavailable",r.push(B("div",{className:"overwriteBoardMessage",children:"Current issues must be resolved."},"unavailable"))),this.hasErrors()&&(e+=" failed",r=r.concat(this.props.errors.map((i,a)=>Xe("div",{className:"overwriteBoardMessage",children:[B("img",{src:xwe,alt:"",className:"overwriteBoardIssueIcon"}),B("span",{dangerouslySetInnerHTML:{__html:i}})]},a+"e")))),this.hasWarnings()&&(r=r.concat(this.props.warnings.map((i,a)=>Xe("div",{className:"overwriteBoardMessage",children:[B("img",{src:_we,alt:"",className:"overwriteBoardIssueIcon"}),B("span",{dangerouslySetInnerHTML:{__html:i}})]},a+"w"))))),r.length?(t="Issues with the current board.",Xe("div",{className:e,onClick:this.boardClicked,title:t,children:[this.props.name&&Xe(Aa,{children:[B("span",{className:"overwriteBoardName",children:this.props.name}),B("br",{})]}),r]})):this.props.name?B("div",{className:e,onClick:this.boardClicked,title:t,children:B("span",{className:"overwriteBoardName",children:this.props.name})}):null}};function jwe(n,e){let t=e.overflow;return t.length?t.map(r=>r.dropdownFn?B(N4,{action:r,fn:r.dropdownFn},r.type):B(dU,{action:r},r.type)):null}function TD(n){function e(t,r,i){n();const a=Mk(null,{game:t,type:r});Jp(a)}return B(bve,{onAccept:e})}function bD(n){function e(t,r){if(eu)r.then(i=>{uo.exports.saveAs(i,"BoardScreenshot.png")});else{let i=window.open();if(i){let a=i.document;a&&(a.write(""),a.close(),a.body.appendChild(a.createElement("img")).src=t)}}n()}return B(Koe,{onAccept:e})}function Gwe(n){function e(t){switch(n(),t){case y0.MIPS:vr(A0.CREATEEVENT_ASM);break;case y0.C:vr(A0.CREATEEVENT_C);break;default:throw new Error(`Unrecognized event code language ${t}`)}}return B(ive,{onAccept:e})}const Hwe=()=>B("div",{className:"pendingDropdownBox",children:B("img",{className:"pendingDropdownImage",src:vwe,alt:"Loading"})});class xg extends Ne.exports.Component{constructor(){super(...arguments),this.state={left:-1e3,top:-1e3,manuallyPlaced:!1},this.mouseDown=e=>{Tc=this,[n_,r_]=[e.clientX,e.clientY];const t=this.getContainerEl();t.addEventListener("mousemove",AU),t.addEventListener("mouseup",i_),t.addEventListener("mouseleave",i_),t.classList.add("moving")},this.onWindowResize=()=>{this.updatePositionState()}}render(){if(!this.props.visible)return null;const e={left:this.state.left,top:this.state.top};return Xe("div",{className:"toolWindow",style:e,children:[Xe("div",{className:"toolWindowName",onMouseDown:this.mouseDown,children:[this.props.name,this.props.canClose&&B("div",{className:"toolWindowCloseBtn","aria-label":"Close",onClick:this.props.onCloseClick,children:"\xD7"})]}),this.props.children]})}componentDidMount(){this.props.visible&&this.updatePositionState(),window.addEventListener("resize",this.onWindowResize),this.attachMutationObserver()}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize),this.detachMutationObserver()}componentDidUpdate(){this.props.visible&&this.updatePositionState(),this.detachMutationObserver(),this.attachMutationObserver()}shouldComponentUpdate(e,t){return!this.tryUpdatePosition(t)}attachMutationObserver(){const e=ls.exports.findDOMNode(this);if(e&&"MutationObserver"in window){const t=new MutationObserver(i=>{this.updatePositionState()}),r={childList:!0,subtree:!0};t.observe(e,r),vg[this.props.name]=t}}detachMutationObserver(){vg[this.props.name]&&(vg[this.props.name].disconnect(),delete vg[this.props.name])}tryUpdatePosition(e){const t=this.state.left!==e.left||this.state.top!==e.top;return t&&this.updatePosition(e),t}updatePosition(e){e=e||this.state;const t=ls.exports.findDOMNode(this);t&&(t.style.left=e.left+"px",t.style.top=e.top+"px")}tryUpdatePositionState(e){const t=this.state.left!==e.left||this.state.top!==e.top;return t&&this.setState(e),t}updatePositionState(){if(this.state.manuallyPlaced){const e=fU(this,{left:this.state.left,top:this.state.top});this.tryUpdatePositionState(e)}else{const e={},t=this.props.position;t.indexOf("Left")!==-1&&(e.left=0),t.indexOf("Right")!==-1&&(e.left=this.getContainerWidth()-this.getWidth()),t.indexOf("Top")!==-1&&(e.top=0),t.indexOf("Bottom")!==-1&&(e.top=this.getContainerHeight()-this.getHeight()),this.tryUpdatePositionState(e)}}getWidth(){const e=ls.exports.findDOMNode(this);return e&&e.offsetWidth||0}getHeight(){const e=ls.exports.findDOMNode(this);return e&&e.offsetHeight||0}getContainerWidth(){const e=document.getElementsByClassName("main")[0];return e&&e.offsetWidth||0}getContainerHeight(){const e=document.getElementsByClassName("main")[0];return e&&e.offsetHeight||0}getContainerEl(){const e=ls.exports.findDOMNode(this);return e&&e.offsetParent||null}}let n_=null,r_=null,Tc=null;const vg={};function AU(n){const[e,t]=[n.clientX,n.clientY],[r,i]=[e-n_,t-r_];let a={left:Tc.state.left+r,top:Tc.state.top+i,manuallyPlaced:!0};a=fU(Tc,a),Tc.setState(a),[n_,r_]=[e,t]}function i_(n){const e=Tc.getContainerEl();n.type==="mouseleave"&&n.target!==e||(e.removeEventListener("mousemove",AU),e.removeEventListener("mouseup",i_),e.removeEventListener("mouseleave",i_),e.classList.remove("moving"),Tc=null,n_=r_=null)}function fU(n,e){if(e.left<0)e.left=0;else{const t=n.getContainerWidth()-n.getWidth();e.left>t&&(e.left=t)}if(e.top<0)e.top=0;else{const t=n.getContainerHeight()-n.getHeight();e.top>t&&(e.top=t)}return e}const T2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wUCFjEB5KSrRwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADdElEQVRYw+2Yz0s6eRjHnzEv1V7ay3bwL4huC0F0KLqVl4K6hRCk/SSioHGyH0iDSDEpRIfC6CJUf0C36LB1MaSoS3VK9DZNG2HOOI7jew+LkqvzbXT3my74hgdmPj9fn8d5Pp/nI1FDdS6Hw4HR0VHUNSTHcUgmk3h+fsbExER9wnq9XqiqirxEUcTCwkJ9wW5tbUHXdfxTyWQSHo+nPmB3d3eRy+VgJE3TwPN8bWFDoRDMKhAI1Ab24OAAHx8fBctmsyVwqqoWtfk3sEy1Hfv7+//MP1sslrbJyUkaGRkpanN4eEjHx8cagI982cXFxa81/QwCgUCJR91u93/2c1v+LwdJA/RbQV0uF3p7e6M/G2JgYAAOhwNVgS4vL4PneWpra/vdzGSappGiKEWm67opUJvNRjzP08zMTGXB5/V6kU6noaoqhoaGUIlnPpvZfk6nE7qu4/X1FUtLS+b6bW9vF87tSkGrVR4UAGRZxtraWsmc1s8ve3t7mJ6eJoZh8hs52e12stlsZWElSaKTkxNTh8b4+DhaW1vL1vX09BSem5ubaX19nVpaWsBxXOnYR0dHZc9oXdcN7fr62rS3Y7GY4ThGSU0wGCwe//T0FNUoGo2aBo3H41XNsb+/j0LUi6JIQP0l5JqmkSiKxYV+vx+ZTKZkRYqiQJblsnZ5eWl6dY+Pj4bjpNPpskn3ysoKSoLJ7XYzqVQKLMtS/qPPZDIkCAJdXV2VnVyW5T/Mgs7NzZHVai1bNzg4SLOzs2Sx/L2tv7y8kM/no2AwaByoi4uLkCSpZttTLBaD0+n88fZERLSzs8PIsgyO46i9vd30ZN3d3f6Ojg72c1k0Gv3t7u5ONDvGw8MD+Xw+CofD5vPksbEx3N7emvaoIAjIZrNFxrIszHo0EolgeHjYsL3VqCIcDjNvb29IJBK/mMpuLBZqamoqvj4w5hxzf3+/6PF4ds7Pz5mKQYmIzs7OmO/YhiKRSICIAo3EuQFa6Tf6VaR+DprOzs6SNl1dXUXtAFAoFGK+dYWCIEDTtEIGVE65XK5Qr6oqNjc3a5NQ+P1+aJr2ZQaUSqWwurpa26xnY2MDiqIYQkqSZP568bPFsize399LIBOJBKampuorf5yfn4coigXIp6enL6/ANZPL5UI8HsfNzU39/49vt9vR19f3SA3Vuf4CRa8N5ZfnXoAAAAAASUVORK5CYII=",b2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wUCFjgyirZxGAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADeklEQVRYw+2YTWgcZRjHf89kJ7ubJZWNtNUWbA62YHNxhbZg4hJTd9e2WALFqBQPhXiY0YMml3qxAcGqtBYPuytKUUGQ6KkgIbtpK2JaRbD2UL96CT0Y+2Gs0qabTXbm8bCbmi/Z3SSzLbj/y8C88z7zm+d9Pt53oK666vp/Sap5WLP2OgxpRLUTmJFYavCuA9WM1QskgC6gpThTPpN46pm7BlSz1mHgIIoLGPNmK8clke6946CasZKAXcbKMYmn+7wENcpAvlMWEkB5RbPWwB0B1RF7O0KiinU5pFmrr/YeVTpQtlaWabevRzVr99YMVL98yQe6vypLt2H1Ax2xe2rjUUdNoGnZVl0d1BF7l+eg8kQyB9K/IsuuDmnGeszzGJV4agjh2RXaP6Un7Yc9L08STw9iyAtlK67fj+M4EAxCKASGAaYJoZBJg/m1jvZvrlFnsvtAj85Lmln5fIyPjXF6aIh7wmH8gQCTN2/S6PcTbmnBcQpcu3zl2n0bN0Ta3/z1N+97fdYeQPXQogHTZHR4mF8uXKSxsRSeTvF7DAPyU7Ct/REi0eglDI1I9N3rq770C2J2AJFjiwYKBW5NTiJzPtloKEIWCtCx81Ei0ShM5zeRmz6jZ14Oegpagu1DOD5vHYJBQs3NmOachHfBcSAa62Trjh2Qz8+GzENM5r/SG28bnoKWEqwX5fO5sDP5PKr/LjsKXbvjbI5EYGpqoYltnB076TkogCTSPSjDAORy/DkxgesUvWg0QGzvHlrb2paCnPXs45q1TngOWoLdhTCKaeIPBFAF0zR4srubjVu2LA05X3s1Y33iOSgA94a6aAqeN00fwSaT3fv2sa61tRLIomeF/Zq1Uqt+ZlpKPx9pb/7+m2/PPdXT8+Ca9euLiVN9kXxL4umDnoICuF8cWCuhNeeZmd6wqCFU7C55XeKp1zwFBdBTL26i4P4AhJfZei7/8ffUA2uf/nBm9WN07nt2Ji9hSAeQW6aJHwsF1/EmmRbCxlI/IXQC7jJmv3f/cx+7NQEtNYTvMCRWRVAp8Clw1rvy9N+ePQ3SXWEW3AKyEk+N1xy0tC84gSHPlz1lCYclkf7I8zpawfbQRjW54PYNYAxISiL9fk0KfoWwr6L6BjCBMA4cAbkg8dQ5T/7mrQg2Y23HZ/x+/a/c1fCetmkJ9Ct11VVX7fUP4forz+3Bw0wAAAAASUVORK5CYII=",P2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AEJETYS/bn+YgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAFD0lEQVRYw+2WaWxUZRSGn3NnpstMGUrLtDOVlpYCZYkQCLJITMUlBBRFI/wRNKAWNCQoi6hRoRGRuATRiFIV3EgUohAkKFYRCGBIQBRQEQ2VSstS6OJMmXbmznf8UVQoBRFlBhPen/d+J/c57znnng8u67L+59Ivi526bpwn0RxyLkDCRcVYci1Keyw+kOGLt1xSoLq4xEVnxoE1A6Qbog5U12O0VEaWbU4EqNXm0zwZCjIdkV4ILhALkeuw5HH9pGTIJQGqXxY7EYaCdGtlvoXIjYg8oetKBiXe0Q0bDWg1cPyMJBQLkeGoPKFr77sq8T36zjgPWe7JiDUDxA9gVKmrrcUYA4Kxo9GPg3U1c4oe2vpNYqd++Zg02mfej8oMhKxgMMiWL9bTUF8PCh2zs2KFRUUr8wsLSmX4a3sSM0yAjF0RIsl6FXQB6DFVpSncRLjxBGleL91693bkdSkYjfKYrrmnZ8JAAWTYohBNkVcwZkE0atfGbJuc3Fz6DxlEbuc8LBEnyB04XY/p6pIeCSn9aW2weWK7A99VPXio8uC0rj17pmf6fK0CNYIx72PM03LTG/sSBgqwc0Hf9LzsomkZmRlTQbyt3/9UbUWXbEjZvPDT9vvDtqsDGqvBtndi7E2E5v4QN1CAho/GZ3pT3TNBpmCJB8COKWWfu1m6JcDXR4vUpHQSnGkQa4RwleFE5R6ajiylgUVQGokLKICuneDD4XoYte5X8Dy32sNT6/oQcg8FTz6I45TDBk5UQt22MMEf5lPPPCi1//NhajOzkUtrcMSeBxav2Z7U9OL67hpqdx2kFZ4OeXKZ4cmHjsWpuAun0l5vuyhTf1bYG948smOfY+HcVd5dh+gnpHY6d0CKH9KvzMCRPAamX9CV0XmhGQ54OF3Em+2lU5fzC3AXgCtzIGmRXELsjYujALicAXV6/TjTzu+8ww2udpk4rEDcSt8SaaIQi0LsPKfQgMZsYkTiC2rbB4kG9xOpO8/zDaRSX5tsRarjC9r4zFHsui8I7m1x65xuKgT3MnZAderx94710Av4LV44KCjN9nIadm/lt90tMGeF/J5+6duYdH2j35PMo6ybPOyfwjr+1V6LbjqCa3AtkZquqJ2D0wuW6+QeMWCHoGEnvVM28sjIKkb0jwhKHmgud161v3TZ9sqLtpnaVLvZg3E47iYlMJIUnw+HO0VijRFf8mFrVO8DrvHXNFLcyz7VZQUtR3WOjCj7Kn6gAMxOwhMrwindEfF7nFpXNrmhz+2DouNTksg5ldG0tIkirG22m2Z7bn57RxxB22jP1SVukpkM1kwQv6py5PBhKisqUFUsh8OIMSs7ZGfN6fpA+Z6LNUx/X65byk4Qtl8nxkJUjwEcP1rDj7v2sPfbXVT/8qvVwZd1a0Fh4SNafm/3hIECyOglQQguQs1LKlIXMzFQJaOjj74DB1DQtdBpwRiMY5aWT+iSMNCWG9ey32hqfhn05UhzJOjz++k3eCB5XQqwRABJArkTkzRL10zsHPceba365WMy9v9cMSsQuGJKdk6O+8yPaxjVJTRF58noJdVxd/QPpY9dURvo1OEFf8D/hqDNbfiWCjKOVNfVCSn9qQrcVX6UKM+ivIWq3WqLKXAQo1UJBwWQUYurUJ2P8O6fsC1LoBE1HxKs253QHj2jIz+b1A0jTwI3g1YAq1B9XUaUHbqkQAH0k0n5GNMTsQ8QClXI2BVhLuuy/tLvf98EyDtglo8AAAAASUVORK5CYII=",hU="data:image/png;base64,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",R2="data:image/png;base64,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",L2="/assets/telescope.2e141eb5.png",PD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AoGAxcR2D7sYgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEPElEQVRYw82Z32tbdRjGP+ckTZo5O8VGqwlp1Wk3q0Wm0tE1otPhjbvZemE3vBQRQYeI07+g9Ebj8MYLb4RRL+a88GLIUArVaS9UjFgcsq2LCVTbbjZ17RqXxos8p357mqSJOUvyQMhJzvecPHl/PO/7fY9FfbCAHUAf0A3cBdyic9eAP4AMkAJmgZV6fqhWBIAYsCwiEeAAcA9gV7juBjANfKFra4KvRoJDwIvAg8B1YE7vPiAMBMtcmwf+BH4ArgK3AVFgSec8s2gv8ILxuSBXnhWB7fpxW+ece/uBkF5XgDSwBjwMPKGw+QQ4Xy9RP3AQ6Hd9/zNwAVit0YNLIv2sPOCEShL4XOFRM9EQ8LL+tYPzwC/AP3UmYZsSsNf4bhH4sFzCWRVIviGLOvgSmMdbdALPuBLu3VJkfWUS7CXFHcDfwBkgi/dYVghFlaw2sBv43oj1skS7lBghaeFZD1zNFrI1A9wpS15R7C9Ucr1frw7gAWVpiMbAMUZWBloxrepzBfiAFi1K726ncfBJ6pbEpUthV3ATHTK0bV6B3mjcqtzoBx5TAfkdQ8cCwNNy+S6XJDUaIeBxleQD4rZOdJex8Nf/2QN4hbz02jK5OUT3Gwsv0nyYHPY7REOGqxfUZDQb1w152gGEbGWXgxlaByaXLlu9pYO5FiJqconZanzNktYqcLisAXf7gW0SWatSm9UE3FCcLgM5C7hXwh8Q+1bCikpr3pIlLSnA/U3WUFy7iN8cCbWUTBaQ0w7S3yJE8/JwEFjzA3vUDy4D51rI7QHgORnxkh+4Gh/s+ayeO06em9l9E4huV5MCsGDFB3sKyeTlsquHBoprv55aKrumv7/7ZpDdqQ4K4GN7q9X7BjrYN9DRDNf3GMezFRMnFgkQiwbXj1OZXKNItgN3GLvTlYpERw6HOTocBiCVXmXsRKZRRO8zjr9ii1lRs9AGPOLqj0sTjUUCHH8twhFZE+DIcJiRQ52NsqZTISek71jxwZ5C385rvH0sSnc0WPNdRxNpzkz4vcr6v5TtvYrRhEPUBhg/Pc/BkWlOnqq+y5v8LsvzI9Nexm1WO9+fNEv4yCGJWS5TmRyvvnWRVHqVd45FK97x5Kk5xt5Pe6kCtiy5jeKUMO1ukDZlvWOhcmRHE2mvs79d+6I2WTQJTFFiMtJMuIdknXJ9oZTJN5XMob3lK1EsGiQWCXghQY+6SC4C71Fm7GiXKplxg+hoIs1oIv3fH9lbV0ltBx4CDrFxNpoEPqDCwwh/tQkz/ukcx1+PcnQ4vF5WS9wrz8bReE7ZnFNT/mSJKUxVo/FNRFPpVV558wLjpzfObE1VKIPDrs9rFJ+aTAKXgMsaLPSp15wAvjUlqGqisUiAb6ayFWVn7ESm2Kxs3aTYFOf0e2TVWeBHio9wUtUSxHAP8cGeQp2N81Padpd6IDYjcoulsrla/AsaEynP92lgNQAAAABJRU5ErkJggg==",zwe="data:image/png;base64,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";const Wwe=[{name:"Move spaces",icon:T2,type:ue.MOVE},{name:"Connect spaces",icon:b2,type:ue.LINE},{name:"Connect multiple spaces in one click",icon:P2,type:ue.LINE_STICKY},{name:"Erase spaces and lines",icon:R2,type:ue.ERASE},{name:"Telescope tool: move your cursor over the map to visualize how it will look during gameplay",icon:L2,type:ue.TELESCOPE},{spacer:!0},{name:"Add blue space",icon:$p,type:ue.ADD_BLUE,draggable:!0},{name:"Add red space",icon:em,type:ue.ADD_RED,draggable:!0},{name:"Add happening space",icon:tm,type:ue.ADD_HAPPENING,draggable:!0},{name:"Add chance time space",icon:lV,type:ue.ADD_CHANCE,draggable:!0},{name:"Add Bowser space",icon:nm,type:ue.ADD_BOWSER,draggable:!0},{name:"Add Mini-Game space",icon:AV,type:ue.ADD_MINIGAME,draggable:!0},{name:"Add shroom space",icon:fV,type:ue.ADD_SHROOM,draggable:!0},{name:"Add invisible space",icon:dl,type:ue.ADD_OTHER,draggable:!0},{name:"Add star space (decoration)",icon:id,type:ue.ADD_STAR,draggable:!0,advanced:!0},{name:"Add start space",icon:ad,type:ue.ADD_START,draggable:!0,advanced:!0},{spacer:!0},{name:"Add Toad",icon:am,type:ue.ADD_TOAD_CHARACTER,draggable:!0},{name:"Add Boo",icon:od,type:ue.ADD_BOO_CHARACTER,draggable:!0},{name:"Add Bowser",icon:DV,type:ue.ADD_BOWSER_CHARACTER,draggable:!0},{name:"Add Koopa Troopa",icon:FV,type:ue.ADD_KOOPA_CHARACTER,draggable:!0},{name:"Mark space as hosting star",icon:PD,type:ue.MARK_STAR}],Xwe=[{name:"Move spaces",icon:T2,type:ue.MOVE},{name:"Connect spaces",icon:b2,type:ue.LINE},{name:"Connect multiple spaces in one click",icon:P2,type:ue.LINE_STICKY},{name:"Erase spaces and lines",icon:R2,type:ue.ERASE},{name:"Rotate arrow spaces",icon:hU,type:ue.ROTATE},{name:"Telescope tool: move your cursor over the map to visualize how it will look during gameplay",icon:L2,type:ue.TELESCOPE},{spacer:!0},{name:"Add blue space",icon:$p,type:ue.ADD_BLUE,draggable:!0},{name:"Add red space",icon:em,type:ue.ADD_RED,draggable:!0},{name:"Add happening space",icon:tm,type:ue.ADD_HAPPENING,draggable:!0},{name:"Add chance time space",icon:uV,type:ue.ADD_CHANCE,draggable:!0},{name:"Add Bowser space",icon:nm,type:ue.ADD_BOWSER,draggable:!0},{name:"Add item space",icon:pV,type:ue.ADD_ITEM,draggable:!0},{name:"Add battle space",icon:SV,type:ue.ADD_BATTLE,draggable:!0},{name:"Add bank space",icon:_V,type:ue.ADD_BANK,draggable:!0},{name:"Add invisible space",icon:dl,type:ue.ADD_OTHER,draggable:!0},{name:"Add star space (decoration)",icon:id,type:ue.ADD_STAR,draggable:!0,advanced:!0},{name:"Add black star space (decoration)",icon:hV,type:ue.ADD_BLACKSTAR,draggable:!0,advanced:!0},{name:"Add start space",icon:ad,type:ue.ADD_START,draggable:!0,advanced:!0},{name:"Add arrow space",icon:rm,type:ue.ADD_ARROW,draggable:!0},{spacer:!0},{name:"Add Toad",icon:am,type:ue.ADD_TOAD_CHARACTER,draggable:!0},{name:"Add Boo",icon:od,type:ue.ADD_BOO_CHARACTER,draggable:!0},{name:"Add bank",icon:yV,type:ue.ADD_BANK_SUBTYPE,draggable:!0},{name:"Add bank coin stack",icon:im,type:ue.ADD_BANKCOIN_SUBTYPE,draggable:!0},{name:"Add item shop",icon:CV,type:ue.ADD_ITEMSHOP_SUBTYPE,draggable:!0},{name:"Mark space as hosting star",icon:PD,type:ue.MARK_STAR}],Kwe=[{name:"Move spaces",icon:T2,type:ue.MOVE},{name:"Connect spaces",icon:b2,type:ue.LINE},{name:"Connect multiple spaces in one click",icon:P2,type:ue.LINE_STICKY},{name:"Erase spaces and lines",icon:R2,type:ue.ERASE},{name:"Rotate arrow spaces",icon:hU,type:ue.ROTATE},{name:"Telescope tool: move your cursor over the map to visualize how it will look during gameplay",icon:L2,type:ue.TELESCOPE},{spacer:!0},{name:"Add blue space",icon:aV,type:ue.ADD_BLUE,draggable:!0},{name:"Add red space",icon:oV,type:ue.ADD_RED,draggable:!0},{name:"Add happening space",icon:sV,type:ue.ADD_HAPPENING,draggable:!0},{name:"Add chance time space",icon:cV,type:ue.ADD_CHANCE,draggable:!0},{name:"Add Bowser space",icon:dV,type:ue.ADD_BOWSER,draggable:!0},{name:"Add item space",icon:mV,type:ue.ADD_ITEM,draggable:!0},{name:"Add battle space",icon:gV,type:ue.ADD_BATTLE,draggable:!0},{name:"Add bank space",icon:xV,type:ue.ADD_BANK,draggable:!0},{name:"Add Game Guy space",icon:vV,type:ue.ADD_GAMEGUY,draggable:!0},{name:"Add invisible space",icon:dl,type:ue.ADD_OTHER,draggable:!0},{name:"Add star space (decoration)",icon:id,type:ue.ADD_STAR,draggable:!0,advanced:!0},{name:"Add start space",icon:ad,type:ue.ADD_START,draggable:!0,advanced:!0},{name:"Add arrow space",icon:rm,type:ue.ADD_ARROW,draggable:!0},{spacer:!0},{name:"Add Millennium Star",icon:VV,type:ue.ADD_TOAD_CHARACTER,draggable:!0},{name:"Add Boo",icon:od,type:ue.ADD_BOO_CHARACTER,draggable:!0},{name:"Add bank",icon:wV,type:ue.ADD_BANK_SUBTYPE,draggable:!0},{name:"Add bank coin stack",icon:im,type:ue.ADD_BANKCOIN_SUBTYPE,draggable:!0},{name:"Add item shop",icon:EV,type:ue.ADD_ITEMSHOP_SUBTYPE,draggable:!0},{name:"Mark space as hosting star",icon:PD,type:ue.MARK_STAR},{name:"Mark space as Skeleton Key gate",icon:zwe,type:ue.MARK_GATE}],Ywe=[{name:"Move spaces",icon:T2,type:ue.MOVE},{name:"Connect spaces",icon:b2,type:ue.LINE},{name:"Connect multiple spaces in one click",icon:P2,type:ue.LINE_STICKY},{name:"Erase spaces and lines",icon:R2,type:ue.ERASE},{name:"Telescope tool: move your cursor over the map to visualize how it will look during gameplay",icon:L2,type:ue.TELESCOPE},{spacer:!0},{name:"Add basic space",icon:TV,type:ue.ADD_DUEL_BASIC,draggable:!0},{name:"Add Mini-Game space",icon:bV,type:ue.ADD_MINIGAME,draggable:!0},{name:"Add reverse space",icon:PV,type:ue.ADD_DUEL_REVERSE,draggable:!0},{name:"Add happening space",icon:RV,type:ue.ADD_HAPPENING,draggable:!0},{name:"Add Game Guy space",icon:LV,type:ue.ADD_GAMEGUY,draggable:!0},{name:"Add power-up space",icon:BV,type:ue.ADD_DUEL_POWERUP,draggable:!0},{name:"Add invisible space",icon:dl,type:ue.ADD_OTHER,draggable:!0},{name:"Add blue start space",icon:MV,type:ue.ADD_DUEL_START_BLUE,draggable:!0,advanced:!0},{name:"Add red start space",icon:IV,type:ue.ADD_DUEL_START_RED,draggable:!0,advanced:!0}];function qwe(n){return"spacer"in n&&n.spacer}function Qwe(n,e){let t;switch(n){case 1:t=Wwe;break;case 2:t=Xwe;break;case 3:e===G0.DUEL?t=Ywe:t=Kwe;break;default:throw new Error(`Unknown game version found by Toolbar (${n})`)}return tr(In.uiAdvanced)||(t=t.filter(r=>!r.advanced)),t}function Jwe(n){QC(n)}class Zwe extends Ne.exports.Component{constructor(){super(...arguments),this.state={}}render(){if(Mu())return B("div",{className:"toolbarReadonly",children:"Board is readonly."});let e=0;const r=Qwe(this.props.gameVersion,this.props.boardType).map(i=>{if(qwe(i))return B(eye,{},"spacer"+e++);const a=this.props.currentAction===i.type;return B($we,{current:a,action:i},i.type)});return B("div",{className:"toolbar",role:"toolbar",children:r})}}class $we extends Ne.exports.Component{constructor(){super(...arguments),this.handleClick=()=>{Jwe(this.props.action.type)},this.onDragStart=e=>{!this.props.action.draggable||e.dataTransfer.setData("text",JSON.stringify({action:this.props.action}))}}render(){let e="toolbarButton";return this.props.current&&(e+=" selected"),B("div",{className:e,title:this.props.action.name,role:"button",tabIndex:0,onClick:this.handleClick,onKeyDown:Qc(this.handleClick),draggable:this.props.action.draggable,onDragStart:this.onDragStart,children:B("img",{className:"toolbarIcon",src:this.props.action.icon,alt:""})})}}const eye=class extends Ne.exports.Component{render(){return B("div",{className:"toolbarSpacer",role:"separator"})}},tye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AEZBAIzQA4rzwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAtElEQVQoz42RsQ6CMBBAX02TziRMJs5u/IAf4ODIf7iyMbjxMYwM/ga/4ErCTII5B6wcJxre0vTae3fXOoCQFjL4HIAw1gxd5XRMxzHs+MHQVS6M9bz3OSEtZLNgTRLJEmSTQBNFWYKcD7PEf1X1OSFF4rzTeyDXfbW4d7tA2SDeVljj+JyTT9m0lg20Pc7ptiL3x7S2PU7P/a66OFsVaJGV6P3iDWJrVqCxyZ8O7Nf8S7C8APRySvghpgzSAAAAAElFTkSuQmCC",nye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AEZAzg2EIIXvAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAhklEQVQoz2NkQALsIuX/f7IEI/h/1jIwMDAwoIv9fNPJCOMzMVAIqGcAuvNxgZ8swQzsIuX/qeYCFpRAhAYa3DZoYLGLMPzHZQAjAwMDg54gRIG7LEJi52MGhkvvEfLocgwMEHkWdEliAJL6/ywMDAwM1nqYimC2wAAuNSheQAYw58MALjUAddwsIs4hVlkAAAAASUVORK5CYII=",rye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AYht+miiIVByuIOASpThZERcRJq1CECqFWaNXB5NI/aNKQpLg4Cq4FB38Wqw4uzro6uAqC4A+Ii6uToouU+F1SaBHjHcc9vPe9L3ffAUKtxDSrbQzQdNtMxmNiOrMqdrwihD6aMxiSmWXMSVICvuPrHgG+30V5ln/dn6NbzVoMCIjEs8wwbeIN4qlN2+C8TxxmBVklPiceNemCxI9cVzx+45x3WeCZYTOVnCcOE4v5FlZamBVMjXiSOKJqOuULaY9VzluctVKFNe7JXxjK6ivLXKc1iDgWsQQJIhRUUEQJNqK066RYSNJ5zMc/4PolcinkKoKRYwFlaJBdP/gf/O6tlZsY95JCMaD9xXE+hoGOXaBedZzvY8epnwDBZ+BKb/rLNWD6k/RqU4scAT3bwMV1U1P2gMsdoP/JkE3ZlYK0hFwOeD+jb8oAvbdA15rXt8Y5Th+AFPUqcQMcHAIjecpe93l3Z2vf/q1p9O8H1Ihyzj5/J3QAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfjDBUXAR2dR2FNAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAFFJREFUKM/FksEKwDAIQ/P8/3/OLov0sI5uPVQQgxBMVGxrJ0qbgSTbRpKAlpPekoIQQ1ol97DkvY9pfcL1w3JjwPXF83ix4Hojj0udSjr+BxdRVz7lI5zTZAAAAABJRU5ErkJggg==",iye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAADa3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjarZRtuvMoCIb/s4pZgoCKLsdEva7ZwSx/Ho39nL496enEVg0hgNwQav/83ekvXGzqyAdLMcfocPnssxRskjuuMmd2fs7rxl02D3Jays4JRIpVj9sUl7xBLtCXJd+XnQJ5uDOU23qwPT4oy5Ck5eASynKkfDhwdRkqy5DK8uyP+215jjnZ/RHq5WhpSdLxpzF5NYkhsnnMXpxZzNgncd6QtzoCVZv+r46e7+miKohJmrK6OfsjSj3+Za5jztBjTdiHNYeZX0dAhhBgOa/cNnfN5kNurrheX3TmWKscHnBfd6sM6ErJvS6D2JaGPtGL13XK6fkBh9e4J9O7iMyvnRzyqyGfZhXdrnT7915T7+04XfERR47rUJcjMo0dFLdRBPO1iGH4B+xtjoyRcPYdqKvb3Yaxc2YB4s6eKxfuxG1udt4Ro5cmhlVkF52yBBZZdh3Q/RjcxTRrBXzRHaWikErvtGLh6TdPfzsneK4MVWEYY7zy46AzSu9G76OXmGeLlCNhiEtG2SOMQW7MUAMR7iupYSb4Mh4LcoFVIAwzzQkHLG47TGyBb7WlE7RCL2A9eoytHu8PQx6+A4JhBQIXWQNHdiZizEhkAqDCLol62UCAQ5CKIMWrRrBBE8A14R3jqStBDjm+kiARNKqBTdYCWN4H1I/5hBoq6FQfQojBQgo5lKjREzosRovjc1tMzVuwaGbJspWkyaeQYrKUUk4lS1Z8jUNGO+aUcy4FPgssl0gF+gWSTTbd/Ba2uNmWtryVHeWz+z3scbc97XkvVapW9HGN1WqquZbGDaXUfAvUYrOWWm6lo9a6dt9Dj9166rmXK7VF9T/jA2q8qMkkNfTsSg1Ss2OlWS8wMpiBmHgGcRsEUNAymLnE3ssgN5i5LOiKIAgyDDaVXeEontQ3ltD5yu5G7iNuFP1bbnKWHA10X5Kb3KiFO24vqNXxDd4nsaMLR06dovugUyThh2aVRJfNt+tLQ9r++I623l8+op/9vTF7t9JXZ7qLj/6P/ExD5/Jxp/WHLNF3J7uJ6LfRPEvppPKPT+nEy6eipPPBv4+SPim6d/HRb5P7LKVXdXH6UCeT/REC+rluz5mmTz4V71b6vjkuyf4qjl827buUEz7vmf4F3/014MDFlSwAAAGEaUNDUElDQyBwcm9maWxlAAB4nH2RPUjDQBiG36ZKtVQc7CDikKE6WRAVcdQqFKFCqBVadTC59A+aNCQpLo6Ca8HBn8Wqg4uzrg6ugiD4A+Lk6KToIiV+lxRaxHhw3MN797733XeA0KgwzeoaBzTdNtPJhJjNrYqhVwgIA5hGr8wsY06SUvAdX/cI8PUuzrP8z/05+tS8xYCASDzLDNMm3uA3b9oG533iKCvJKvE58ZhJBRI/cl3x+I1z0WWBZ0bNTHqeOEosFjtY6WBWMjXiKeKYqumUL2Q9VjlvcdYqNdaqk78wktdXlrlOcxhJLGIJEkQoqKGMCmzEadVJsZCm/YSPf8j1S+RSyFUGI8cCqtAgu37wP/jdW6swOeElRRJA94vjfIwAoV2gWXec72PHaZ4AwWfgSm/7qw1g5pP0eluLHQH928DFdVtT9oDLHWDwyZBN2ZWCNIVCAXg/o2/KAQO3QHjN61trH6cPQIZ6lboBDg6B0SJlr/u8u6ezb/+eafXvByV2coh2WvlxAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AIKADo4Wdcm1wAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAABXSURBVCjPpZJRDoAwCENfife/8vNHzWaic44fCCm0oURlNpJc9TYAOtwFXCA1EwoEUufQxLANqRw38Cm/1YD1hbQXEJtehgtal26OBaB+XL7Hr/5BsRg7g2c4+PmXx4cAAAAASUVORK5CYII=",aye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AYht+miiIVByuIOASpThZERcRJq1CECqFWaNXB5NI/aNKQpLg4Cq4FB38Wqw4uzro6uAqC4A+Ii6uToouU+F1SaBHjHcc9vPe9L3ffAUKtxDSrbQzQdNtMxmNiOrMqdrwihD6aMxiSmWXMSVICvuPrHgG+30V5ln/dn6NbzVoMCIjEs8wwbeIN4qlN2+C8TxxmBVklPiceNemCxI9cVzx+45x3WeCZYTOVnCcOE4v5FlZamBVMjXiSOKJqOuULaY9VzluctVKFNe7JXxjK6ivLXKc1iDgWsQQJIhRUUEQJNqK066RYSNJ5zMc/4PolcinkKoKRYwFlaJBdP/gf/O6tlZsY95JCMaD9xXE+hoGOXaBedZzvY8epnwDBZ+BKb/rLNWD6k/RqU4scAT3bwMV1U1P2gMsdoP/JkE3ZlYK0hFwOeD+jb8oAvbdA15rXt8Y5Th+AFPUqcQMcHAIjecpe93l3Z2vf/q1p9O8H1Ihyzj5/J3QAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfjDBUWGyKaztycAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAIRJREFUKM9jYBhowMjAwPAfSqOAHxYM/7Fp4DiBqhZmAAOyIbg0YzOMBYkPd8kWF4RgsAqEs/bOHjibMWEP3DImdFPX1DD8hymE0ejg/wKX//8XuPxHNwAjHNbe2YPiEmQ+zCCMQFxTA/E/uu3omhkYGBhCWhgYGXEFEMyJOKMPKRwoAgAIjCtnT63FJQAAAABJRU5ErkJggg==",oye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AYht+miiIVByuIOASpThZERcRJq1CECqFWaNXB5NI/aNKQpLg4Cq4FB38Wqw4uzro6uAqC4A+Ii6uToouU+F1SaBHjHcc9vPe9L3ffAUKtxDSrbQzQdNtMxmNiOrMqdrwihD6aMxiSmWXMSVICvuPrHgG+30V5ln/dn6NbzVoMCIjEs8wwbeIN4qlN2+C8TxxmBVklPiceNemCxI9cVzx+45x3WeCZYTOVnCcOE4v5FlZamBVMjXiSOKJqOuULaY9VzluctVKFNe7JXxjK6ivLXKc1iDgWsQQJIhRUUEQJNqK066RYSNJ5zMc/4PolcinkKoKRYwFlaJBdP/gf/O6tlZsY95JCMaD9xXE+hoGOXaBedZzvY8epnwDBZ+BKb/rLNWD6k/RqU4scAT3bwMV1U1P2gMsdoP/JkE3ZlYK0hFwOeD+jb8oAvbdA15rXt8Y5Th+AFPUqcQMcHAIjecpe93l3Z2vf/q1p9O8H1Ihyzj5/J3QAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfjDBUWCSub5hTrAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAGJJREFUKM9jZMABHMwn/YexD5zMY8SljgWXxn3Hc+BiTpYM/3EZxEhIM8KQKVhdw4SucN/xHAYnyylwDTA2NkOxegHZBfg04nQBqWDgDUAJgwMn8xhhUYYajVMYiIpGchISAIKHK/w7Gd2gAAAAAElFTkSuQmCC";class pU extends Ne.exports.Component{constructor(){super(...arguments),this.onDelete=(e,t)=>{this.props.onEventMouseLeave&&this.state.hoveredEvent===e&&(this.setState({hoveredEvent:null}),this.props.onEventMouseLeave(e,t)),this.props.onEventDeleted(e,t)},this.onMouseEnter=(e,t)=>{this.setState({hoveredEvent:e}),this.props.onEventMouseEnter&&this.props.onEventMouseEnter(e,t)},this.onMouseLeave=(e,t)=>{this.setState({hoveredEvent:null}),this.props.onEventMouseLeave&&this.props.onEventMouseLeave(e,t)}}render(){const e=this.props.events||[];let t=0;const r=e.map((i,a)=>B(sye,{event:i,eventIndex:a,board:this.props.board,onEventDeleted:this.onDelete,onEventActivationTypeToggle:this.props.onEventActivationTypeToggle,onEventParameterSet:this.props.onEventParameterSet,onEventMouseEnter:this.onMouseEnter,onEventMouseLeave:this.onMouseLeave},`${i.id}-${t++}`));return Xe("div",{className:"eventsList",children:[r,B(mye,{onEventAdded:this.props.onEventAdded})]})}}const sye=n=>{const e=l_(),t=Ne.exports.useCallback(()=>{n.onEventDeleted(n.event,n.eventIndex)},[n.onEventDeleted,n.event,n.eventIndex]),r=Ne.exports.useCallback(()=>{n.onEventActivationTypeToggle(n.event,n.eventIndex),e()},[n.onEventActivationTypeToggle,n.event,n.eventIndex,e]),i=Ne.exports.useCallback((f,m)=>{n.onEventParameterSet(n.event,n.eventIndex,f,m),e()},[n.onEventParameterSet,n.event,n.eventIndex,e]),a=Ne.exports.useCallback(()=>{n.onEventMouseEnter&&n.onEventMouseEnter(n.event,n.eventIndex)},[n.onEventMouseEnter,n.event,n.eventIndex]),o=Ne.exports.useCallback(()=>{n.onEventMouseLeave&&n.onEventMouseLeave(n.event,n.eventIndex)},[n.onEventMouseLeave,n.event,n.eventIndex]),s=j0(y_);let l=n.event;const c=jo(l.id,n.board,s);if(!c)return null;let d=c.name||l.id,h;return c.parameters&&(h=B(lye,{parameters:c.parameters,eventInstance:l,onEventParameterSet:i})),Xe("div",{className:"eventEntry",onMouseEnter:a,onMouseLeave:o,children:[Xe("div",{className:"eventEntryHeader",children:[B("span",{className:"eventEntryName",title:d,children:d}),B("div",{role:"button",className:"eventEntryDelete",onClick:t,title:"Remove this event"})]}),Xe("div",{className:"eventEntryOptions",children:[B(Aye,{activationType:l.activationType,onEventActivationTypeToggle:r}),h]})]})},lye=n=>{const{parameters:e,eventInstance:t,onEventParameterSet:r}=n,i=Xoe();return B(Aa,{children:e.map(a=>{const o=t.parameterValues&&t.parameterValues[a.name];switch(a.type){case i0.Boolean:return B(hye,{parameter:a,parameterValue:o,onEventParameterSet:r},a.name);case i0.Number:case i0.PositiveNumber:return B(fye,{parameter:a,parameterValue:o,positiveOnly:a.type==="+Number",onEventParameterSet:r},a.name);case i0.Space:return B(Pw,{parameter:a,parameterValue:o,colorQueue:i,onEventParameterSet:r},a.name);case i0.SpaceArray:let s=[];return Array.isArray(o)&&(s=o.map((l,c)=>B(Pw,{parameter:a,parameterValue:o,parameterArrayIndex:c,colorQueue:i,onEventParameterSet:r},`${a.name}[${c}]`))),s.push(B(Pw,{parameter:a,parameterValue:o,parameterArrayIndex:s.length,colorQueue:i,onEventParameterSet:r},`${a.name}[${s.length}]`)),s;case i0.NumberArray:default:return null}})})},uye={[Yt.WALKOVER]:tye,[Yt.LANDON]:nye,[Yt.BEGINORWALKOVER]:void 0,[Yt.BEFORE_TURN]:rye,[Yt.AFTER_TURN]:iye,[Yt.BEFORE_PLAYER_TURN]:aye,[Yt.BEFORE_DICE_ROLL]:oye},cye={[Yt.WALKOVER]:"Passing event",[Yt.LANDON]:"Land-on event",[Yt.BEGINORWALKOVER]:void 0,[Yt.BEFORE_TURN]:"Before turn",[Yt.AFTER_TURN]:"After turn",[Yt.BEFORE_PLAYER_TURN]:"Before player turn",[Yt.BEFORE_DICE_ROLL]:"Before dice roll"},dye={[Yt.WALKOVER]:"Occurs when passing over the space",[Yt.LANDON]:"Occurs when landing on the space",[Yt.BEGINORWALKOVER]:void 0,[Yt.BEFORE_TURN]:'Occurs once per turn, prior to seeing "PLAYER START" for the first player',[Yt.AFTER_TURN]:"Occurs once per turn, prior to the Mini-Game selection list appearing",[Yt.BEFORE_PLAYER_TURN]:'Occurs for each player prior to seeing "PLAYER START" on their turn',[Yt.BEFORE_DICE_ROLL]:"Occurs for each player prior to the dice roll"};class Aye extends Ne.exports.Component{constructor(){super(...arguments),this.onTypeToggle=()=>{this.props.onEventActivationTypeToggle()}}render(){let e=this.props.activationType;const t=cye[e],r=uye[e];return Xe("div",{className:"eventEntryItem eventEntryActivationTypeItem",onClick:this.onTypeToggle,children:[r&&B("img",{className:"eventEntryActivationTypeToggle",alt:"Activation Type",src:r,title:dye[e]}),B("span",{children:t})]})}}class fye extends Ne.exports.Component{constructor(){super(...arguments),this.onParameterClicked=async()=>{const e=this.props.parameter.name,t=this.props.positiveOnly,r=await c2(`Enter a${t?" positive ":" "}numeric value for the ${e} parameter:`);if(!r)return;const i=parseInt(r);if(isNaN(i)){tn("The value entered could not be parsed into a number");return}if(this.props.positiveOnly&&i<=0){tn("The value entered must be a positive number");return}this.props.onEventParameterSet(e,i)}}render(){const e=this.props.parameterValue,t=e!=null,r=`(Number) ${this.props.parameter.name}: ${t?e:"null"}`;return Xe("div",{className:"eventEntryItem",title:r,onClick:this.onParameterClicked,children:[Xe("span",{className:"eventEntryItemParameterName",children:[this.props.parameter.name,":"]}),"\xA0",t?B("span",{children:this.props.parameterValue}):B("span",{className:"eventEntryItemParameterUnset",children:"null"})]})}}class hye extends Ne.exports.Component{constructor(){super(...arguments),this.onParameterClicked=()=>{const e=this.props.parameterValue;this.props.onEventParameterSet(this.props.parameter.name,!e)}}render(){const e=this.props.parameterValue,t=e!=null,r=`(Boolean) ${this.props.parameter.name}: ${t?e:"null"}`;return Xe("div",{className:"eventEntryItem",title:r,onClick:this.onParameterClicked,children:[Xe("span",{className:"eventEntryItemParameterName",children:[this.props.parameter.name,":"]}),"\xA0",t?B("span",{children:this.props.parameterValue.toString()}):B("span",{className:"eventEntryItemParameterUnset",children:"null"})]})}}class Pw extends Ne.exports.Component{constructor(){super(...arguments),this.onDragStart=e=>{ZP(this.onSpaceDroppedOn),e.dataTransfer.setDragImage(U0("targetImg"),3,0),e.dataTransfer.setData("text",JSON.stringify({isEventParamDrop:!0}))},this.onSpaceDroppedOn=e=>{if(ZP(null),e>=0)if(typeof this.props.parameterArrayIndex=="number"){const i=[...this.props.parameterValue||[]];i[this.props.parameterArrayIndex]=e,this.props.onEventParameterSet(this.props.parameter.name,i)}else this.props.onEventParameterSet(this.props.parameter.name,e)},this.onDeleteButtonClicked=()=>{const e=this.props.parameterArrayIndex;O0(typeof e=="number");const r=this.props.parameterValue||[];if(r.length){const i=[...r];i.splice(e,1),this.props.onEventParameterSet(this.props.parameter.name,i)}},this.onParameterClicked=()=>{tn("To associate a space with this event parameter, click and drag from this list entry and release over the target space.")}}render(){const e=typeof this.props.parameterArrayIndex=="number",t=this.props.parameterValue;let r,i=this.props.parameter.name;if(e){const l=t&&t[this.props.parameterArrayIndex];r=typeof l<"u"&&l!==null,i+=`[${this.props.parameterArrayIndex}]`}else r=typeof t<"u"&&t!==null;let a="eventEntryItemParameterName";e&&!r&&(a+=" eventEntryItemParameterHypothetical");let o=`(Space) ${this.props.parameter.name}: `;r?(o+="set",Hn()&&(o+=` (to space index ${t})`)):o+="null",o+=`
Drag to a space to associate it`;let s;return r?s=Xe("span",{className:"eventEntryItemParameterSpaceSetWrapper",children:[B("span",{style:{backgroundColor:`rgb(${this.props.colorQueue.next().join(", ")})`},className:"eventEntryItemParameterColorSwatch"})," ","set"]}):e?s=B("span",{children:"\u2014"}):s=B("span",{className:"eventEntryItemParameterUnset",children:"null"}),Xe("div",{className:"eventEntryItem eventEntryItemDraggable",title:o,draggable:!0,onDragStart:this.onDragStart,onClick:this.onParameterClicked,children:[B("img",{alt:"Target",src:Yk}),Xe("span",{className:a,children:[i,":"]}),"\xA0",s,e&&r&&B(pye,{onDeleteButtonClicked:this.onDeleteButtonClicked})]})}}function pye(n){return B("div",{role:"button",className:"eventParameterRightAlign eventParameterDelete",onClick:e=>{e.stopPropagation(),n.onDeleteButtonClicked()},title:"Remove this array entry"})}class mye extends Ne.exports.Component{constructor(e){super(e),this.onSelection=r=>{let i=r.target.value;if(i.toString()==="-1")return;const[a,o]=i.split(",");let s=pu(this.state[a][o]);if(!s)throw new Error(`Could not add event ${i}`);this.props.onEventAdded(s),this._refreshLists()};const t=BB();this.state={selectedValue:-1,libraryEvents:t.libraryEvents.sort(wg),boardEvents:t.boardEvents.sort(wg)}}_refreshLists(){const e=BB();this.setState({libraryEvents:e.libraryEvents.sort(wg),boardEvents:e.boardEvents.sort(wg)})}render(){if(!this.state.libraryEvents.length&&!this.state.boardEvents.length)return null;const e=[B("option",{value:"-1",disabled:!0,children:"Add event"},"-1")];let t=0;return this.state.boardEvents.length&&e.push(B("optgroup",{label:"Board Events",children:this.state.boardEvents.map(r=>{const i="boardEvents,"+t++;return B("option",{value:i,children:r.name},i)})},"boardEvents")),t=0,e.push(B("optgroup",{label:"Library Events",children:this.state.libraryEvents.map(r=>{const i="libraryEvents,"+t++;return B("option",{value:i,children:r.name},i)})},"libraryEvents")),B("div",{className:"eventAddSelectEntry",children:B("select",{className:"eventAddSelect",value:this.state.selectedValue,onChange:this.onSelection,children:e})})}}function BB(){let n=Rie(),e=[];const t=P0();for(let r in t.events){const i=Ss(t,r);e.push(oo(i.language,i.code))}return n=n.filter(r=>!(r.name in t.events)),{libraryEvents:n,boardEvents:e}}function wg(n,e){return n.name<e.name?-1:n.name>e.name?1:0}const RD=n=>Xe("span",{className:"propertySectionTitle",children:[n.text,n.children]});function Sye(n){const e=l_(),t=Wne(),r=Xne(),i=Ne.exports.useCallback((v,C)=>{vt.dispatch(zI({spaceIndices:t,type:v,subtype:C})),e()},[t,e]),a=Ne.exports.useCallback(v=>{jk(ms(),!!v),e()},[e]);if(!r||!r.length)return B("div",{className:"propertiesEmptyText",children:"No space selected."});const o=r.length>1,s=r[0],l=ms()[0],c=n.gameVersion,d=n.boardType,h=d===G0.DUEL,f=Vye(c,d),m=Dye(c,d);let g=s.type,x=s.subtype,E=s.star||!1,_=!1;if(o)for(const v of r)!v||(v.type!==g&&(g=void 0),v.subtype!==x&&(x=void 0),!!v.star!==E&&(_=!0));return Xe("div",{className:"properties",children:[Xe("div",{className:"propertiesPadded",children:[!o&&B(gye,{space:s,spaceIndex:l}),B(MB,{toggleTypes:f,type:g,subtype:x,typeChanged:i}),B(MB,{toggleTypes:m,type:g,subtype:x,typeChanged:i}),!h&&B(Tye,{checked:E,indeterminate:_,onStarCheckChanged:a}),B(bye,{space:s})]}),!o&&B(Pye,{selectedSpace:s})]})}class gye extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onChangeX=e=>{var t=parseInt(e.target.value,10),r=e.target.value==="",i=P0().bg.width;!r&&isNaN(t)||t<0||t>i||(this.state.oldX||this.setState({oldX:this.props.space.x}),vt.dispatch(qs({spaceIndices:[this.props.spaceIndex],coords:[{x:r?0:t}]})),this.forceUpdate())},this.onChangeY=e=>{let t=parseInt(e.target.value,10),r=e.target.value==="",i=P0().bg.height;!r&&isNaN(t)||t<0||t>i||(this.state.oldY||this.setState({oldY:this.props.space.y}),vt.dispatch(qs({spaceIndices:[this.props.spaceIndex],coords:[{y:r?0:t}]})),this.forceUpdate())},this.onCoordSet=()=>{vt.dispatch(qs({spaceIndices:[this.props.spaceIndex],coords:[{x:this.props.space.x||0,y:this.props.space.y||0}]})),this.setState({oldX:void 0,oldY:void 0,oldRot:void 0}),this.forceUpdate()},this.onKeyUp=e=>{e.key==="Enter"&&this.onCoordSet()}}render(){let e=this.props.space;return e?B(Aa,{children:Xe("div",{className:"spaceCoordRow",children:[B("span",{className:"coordLabel",children:"X:"}),B("input",{className:"coordInput",type:"number",value:e.x,onChange:this.onChangeX,onBlur:this.onCoordSet,onKeyUp:this.onKeyUp}),B("span",{className:"coordLabel",children:"Y:"}),B("input",{className:"coordInput",type:"number",value:e.y,onChange:this.onChangeY,onBlur:this.onCoordSet,onKeyUp:this.onKeyUp})]})}):null}}const _ye=[{name:"Change to blue space",icon:$p,type:de.BLUE},{name:"Change to red space",icon:em,type:de.RED},{name:"Change to happening space",icon:tm,type:de.HAPPENING},{name:"Change to chance time space",icon:lV,type:de.CHANCE},{name:"Change to Mini-Game space",icon:AV,type:de.MINIGAME},{name:"Change to shroom space",icon:fV,type:de.SHROOM},{name:"Change to Bowser space",icon:nm,type:de.BOWSER},{name:"Change to invisible space",icon:dl,type:de.OTHER},{name:"Change to star space",icon:id,type:de.STAR,advanced:!0},{name:"Change to start space",icon:ad,type:de.START,advanced:!0}],xye=[{name:"Show Toad",icon:am,subtype:yt.TOAD},{name:"Show Boo",icon:od,subtype:yt.BOO},{name:"Show Bowser",icon:DV,subtype:yt.BOWSER},{name:"Show Koopa Troopa",icon:FV,subtype:yt.KOOPA}],vye=[{name:"Change to blue space",icon:$p,type:de.BLUE},{name:"Change to red space",icon:em,type:de.RED},{name:"Change to happening space",icon:tm,type:de.HAPPENING},{name:"Change to chance time space",icon:uV,type:de.CHANCE},{name:"Change to Bowser space",icon:nm,type:de.BOWSER},{name:"Change to item space",icon:pV,type:de.ITEM},{name:"Change to battle space",icon:SV,type:de.BATTLE},{name:"Change to bank space",icon:_V,type:de.BANK},{name:"Change to invisible space",icon:dl,type:de.OTHER},{name:"Change to star space",icon:id,type:de.STAR,advanced:!0},{name:"Change to black star space",icon:hV,type:de.BLACKSTAR,advanced:!0},{name:"Change to start space",icon:ad,type:de.START,advanced:!0},{name:"Change to arrow space",icon:rm,type:de.ARROW}],wye=[{name:"Show Toad",icon:am,subtype:yt.TOAD},{name:"Show Boo",icon:od,subtype:yt.BOO},{name:"Show bank",icon:yV,subtype:yt.BANK},{name:"Show bank coin stack",icon:im,subtype:yt.BANKCOIN},{name:"Show item shop",icon:CV,subtype:yt.ITEMSHOP}],yye=[{name:"Change to blue space",icon:aV,type:de.BLUE},{name:"Change to red space",icon:oV,type:de.RED},{name:"Change to happening space",icon:sV,type:de.HAPPENING},{name:"Change to chance time space",icon:cV,type:de.CHANCE},{name:"Change to Bowser space",icon:dV,type:de.BOWSER},{name:"Change to item space",icon:mV,type:de.ITEM},{name:"Change to battle space",icon:gV,type:de.BATTLE},{name:"Change to bank space",icon:xV,type:de.BANK},{name:"Change to Game Guy space",icon:vV,type:de.GAMEGUY},{name:"Change to invisible space",icon:dl,type:de.OTHER},{name:"Change to star space",icon:id,type:de.STAR,advanced:!0},{name:"Change to start space",icon:ad,type:de.START,advanced:!0},{name:"Change to arrow space",icon:rm,type:de.ARROW}],Eye=[{name:"Show Millenium Star",icon:VV,subtype:yt.TOAD},{name:"Show Boo",icon:od,subtype:yt.BOO},{name:"Show bank",icon:wV,subtype:yt.BANK},{name:"Show bank coin stack",icon:im,subtype:yt.BANKCOIN},{name:"Show item shop",icon:EV,subtype:yt.ITEMSHOP}],Cye=[{name:"Change to basic space",icon:TV,type:de.DUEL_BASIC},{name:"Change to Mini-Game space",icon:bV,type:de.MINIGAME},{name:"Change to reverse space",icon:PV,type:de.DUEL_REVERSE},{name:"Change to happening space",icon:RV,type:de.HAPPENING},{name:"Change to Game Guy space",icon:LV,type:de.GAMEGUY},{name:"Change to power-up space",icon:BV,type:de.DUEL_POWERUP},{name:"Change to invisible space",icon:dl,type:de.OTHER},{name:"Change to blue start space",icon:MV,type:de.DUEL_START_BLUE,advanced:!0},{name:"Change to red start space",icon:IV,type:de.DUEL_START_RED,advanced:!0}];function Vye(n,e){let t=[];switch(n){case 1:t=_ye;break;case 2:t=vye;break;case 3:switch(e){case G0.DUEL:t=Cye;break;default:t=yye;break}break}return tr(In.uiAdvanced)||(t=t.filter(r=>!r.advanced)),t}function Dye(n,e){let t=[];switch(n){case 1:t=xye;break;case 2:t=wye;break;case 3:switch(e){case G0.DUEL:t=[];break;default:t=Eye;break}break}return tr(In.uiAdvanced)||(t=t.filter(r=>!r.advanced)),t}class MB extends Ne.exports.Component{constructor(){super(...arguments),this.onTypeChanged=(e,t)=>{this.props.typeChanged(e,t)}}render(){const e=this.props.type;if(e===de.START&&!tr(In.uiAdvanced))return null;const t=this.props.subtype,r=this.onTypeChanged,a=(this.props.toggleTypes||[]).map(o=>{const s=o.type+"-"+o.subtype,l=o.type!==void 0&&e===o.type||o.subtype!==void 0&&t!==void 0&&t===o.subtype;return B(Fye,{type:o.type,subtype:o.subtype,icon:o.icon,title:o.name,selected:l,typeChanged:r},s)});return B("div",{className:"spaceToggleContainer",children:a})}}class Fye extends Ne.exports.Component{constructor(){super(...arguments),this.onTypeChanged=()=>{this.props.subtype!==void 0&&this.props.selected?this.props.typeChanged(this.props.type,void 0):this.props.typeChanged(this.props.type,this.props.subtype)}}render(){let e="spaceToggleButton";this.props.selected&&(e+=" selected");const t=this.props.subtype!==void 0?25:20;return B("div",{className:e,title:this.props.title,tabIndex:0,onClick:this.onTypeChanged,onKeyDown:Qc(this.onTypeChanged),children:B("img",{src:this.props.icon,height:t,width:t,alt:""})})}}class Tye extends Ne.exports.Component{constructor(){super(...arguments),this.checkboxEl=null,this.onChange=e=>{this.props.onStarCheckChanged(e.target.checked)}}render(){return B("div",{className:"starCheckbox",children:Xe("label",{children:[B("input",{type:"checkbox",ref:e=>this.checkboxEl=e,checked:this.props.checked,value:this.props.checked,onChange:this.onChange})," ","Hosts star"]})})}componentDidMount(){this.checkboxEl.indeterminate=this.props.indeterminate}componentDidUpdate(e){e.indeterminate!==this.props.indeterminate&&(this.checkboxEl.indeterminate=this.props.indeterminate)}}function bye(n){return n.space.aiTree?B(ir,{css:"propertiesAiTreeButton",onClick:()=>{wt("Showing decision tree",n.space.aiTree),Rk(n.space.aiTree)},children:"AI Decision Tree"}):null}const Pye=n=>{const e=l_();function t(o){const s=n.selectedSpace,l=fi(o,{activationType:Rye(s)});Zie(l),e()}function r(o,s){$ie(s),e()}function i(o,s){let l;o.activationType===Yt.WALKOVER?l=Yt.LANDON:l=Yt.WALKOVER,vt.dispatch(Mee({eventIndex:s,activationType:l}))}function a(o,s,l,c){vt.dispatch(Iee({eventIndex:s,name:l,value:c}))}return Xe(Aa,{children:[B(RD,{text:"Events"}),B("div",{className:"propertiesPadded",children:B(pU,{events:n.selectedSpace.events,board:P0(),onEventAdded:t,onEventDeleted:r,onEventActivationTypeToggle:i,onEventParameterSet:a})})]})};function Rye(n){switch(n.type){case de.OTHER:case de.START:case de.ARROW:case de.STAR:case de.BLACKSTAR:return Yt.WALKOVER}return Yt.LANDON}const Lye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wUDFgECGlerawAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAC1klEQVRYw+2Yy07dMBCGf9vjS2zHNuYAQaqQeKC+T8W++y55D/oo1WHZNyhsQBWhcRc9oVWUcnI2TisxkpX4Fn35M2M7A7zZm/3bxl7p+9R13XsiEgCGXVsppQDAwBgb78uuDLsr210xaZ9rG+us7/v+7u7uc9/3H+dg6BXQ05ubm3eXl5dqGAaUUl7Kjni2Pto4B7/f8NX5t7e336+urr5ut1sH4GExaEpJhRBwfHxc5dM+PT3xi4sLt91u7Rwo/8u8tus6xznntXyQiEQIIQBo5vr/BhK6rnNSSlYLVCklQggRgDkI9OTkpCWiaqBaazjnPAB9EOhms7E1FRVCwBijDgVtc85VQTnn2H1BeQioizFaIUS9BZ0xSCn5oT5qnXNERKipqJRSAAiHgGpjDBhjVUGdcwJAOkhRpRSrCSqEgLWWtNb5EFC/85eqoM45att2sxhUCJG01ry2ot578t6fzB2W5kBVzjk1TcMq7qAvihpj8lJQGWM8MsZUVZSI4L0nrfVmjmtW0bZtj621VUEZY7DWcillWgoqvfdHTdPUPDz92mWcg5TSLQ0m6ZyL1tqqy9Mfvjq7jc6CGmNi0zTVKTnnaJqGA/BLQElrLY0xa6gJay0ByEtAjVKK1fbPETSEIABsloCmpmlW8U8iQgiBAJwtAc3ee75SICHGKJeCbmqvoS9RLCVyzgTgfC+oUuo0hMDX8tGUkhRC7FdUa92tBSqlREqJGGOnixSNMa4CSkTIOQvO+f6oJ6KztUA552jbljHGjvaCCiE2KaVVQAGgbVswxtQS0BxjXGUdHVVVSoklweTPz8+xFqgQAjlnMd1Gp//D7f39Pbu+voYxBsPwKy06TReONk0hMsb2jpv2/TmfiPDw8IDHx0cC8A7At5fz6kT2s1LKjVLquZTyY3wOfiddR5tL2g6TMWVS2KQ+Nw6lFHp+fv5BRB/6vv+CN3uz/8R+AkL+03xKi0HYAAAAAElFTkSuQmCC",Bye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AoGAy4zA9ogPAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADW0lEQVRYw+2Yz07sNhTGP9vHfxInTjADBOkKiT2vwbLrmYfgASr23VeaDY8ws6ZLHqMalt2zKGxAFYH4biZ0SMNMkovSVuJIVuIkzvzy+ficMwa+7Mv+28a23Pu1KIqfiEgAqNbXQggBACrGWH0e1q1aH9n6iMb1tmt1n5VlWd7f3/9WluUvbTC0BfTw+vr62+npqaqqCiGEt7Ymbu3XVo/B31+4dfzt7e1fl5eXf6xWKwvgsTNonufKOYf9/f1Rpvb5+ZmfnJzY1WoVt4HyD8alRVFYzjkfyweJSDjnHICo7f5HIK4oCiulZGOBKqWEcy4DYHqBHhwcpEQ0GqjWGtbaBIDuBTqZTOIxFRVCwBij+oKm3vtRQTnnWM+g7ANqsyyLhRDjBXTGIKXkfX00ttYSEWFMRaWUAoDrA6qNMWCMjQpqrRUA8l6KKqXYmKBCCMRxTFpr3wc0WfvLqKDWWkrTdNIZVAiRa6352IomSUJJkhy0FUttoMp7n0dRxEbMoG+KGmN8V1CZZdmeMWZURYkISZKQ1nrSxtWqaJqm+3EcjwrKGEMcx1xKmbdxtQVKmSTJXhRFnYunH/2guia11kJKabsWztJam8Vx3Ck8McbeFchD1azfIYSo0+jzTh81xmRRFPWW6ezsDIwxzGazwUE/iiIOIOnio6S1lsaYXj8ym81wd3cHAFgulzg/Px8c9AH4LlNvlFK9Q9NyuXzXv7m5GQTqnBMAJl0UzaMo6p0+p9Ppu/7FxcWgEOWcIwBHXUB9kiS9Q9NisXiDm06nmM/ngxTNskx2BZ0MjaHz+RwhBCwWi3crerNtMyklvPcE4HinjyqlDp1zg/6Adg1n2xTN81wKIY5eX1+3K6q1LoaAfkYWk1Iiz3NijB3unHql1GGWZb1APyvVEhG894JzvnvVE9FRX9DPrPLTNGWMsb2doEKISZ7n/wooAKRpCsaY6gLqsyzrHEd/NM8338E5h1JK7ATVWifHx8e9/G5zZ25Ia658771optFmeEofHh7Y1dUVjDGoquofW4rNrcTN+5tV0EfPtc1CPZ6I8Pj4iKenJwLwDcCfbwu24cxHIYRrpdRLCKEOZJubsLW1bdpWTaEbjTX6bc8hhEAvLy+vRPRzWZa/48u+7H9i3wGhxjGlD/oIjAAAAABJRU5ErkJggg==",Mye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkWBAMYnbq4WQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAD8UlEQVRYw+2YO0/rSBTH//Pya+yxMXk4JLwKkPgwdzvqFFRoO6pVekS7FaJHkejZj7IEBBJXSUACCV0QiGhFsGeLTVgSDEmI5LsrcaSRPTNn5J/PmTnHPsCXfMl/W8gHc79HUfSNc84AJL0xrbUGgIQQ0r/XvZb0rqR3xdB42li/T7rdbvf29vaPbre7nQbDPwAtHB4eVpaXl40kSaC1fmk94tR+X/pr8O8bfrj++Pj4r1qt9r3RaEgAj2ODBkFgKKUwOzubiWufnp7owsKCbDQaThoofWedF0WRpJTSrPYg55wppRQAO23+PRAVRZEUQpCsQA3DYEopH4A1EWg+n/c455mBmqYJKaULwJwINJfLOVlalDEGy7KMSUG9MAwzBaWUoudBMQmo9H3fYYxlF9AJgRCCTrpHHSkl55wjS4sKIRgANQmoaVkWCCGZgkopGYBgIosahkGyBGWMwXEcbppmOAmo29svmYJKKbnnebmxQRljgWmaNGuLuq7LXdfNp30spYEaYRgGtm2TDDPoi0UtywrHBRW+789YlpWpRTnncF2Xm6aZS+NKtajnebOO42QKSgiB4zhUCBGMCypc152xbTvLj6d/soyUEELIcQ+TkFL6juN8OjwtLi6CEIJKpYIkSbC/vw9CSGqLomh4r6am0VRQy7J827Y/7fdWqwUAuLy8BAC02+13da+vrweCvm3bFIA7Dig3TVNYlvVpF5bLZQBAqVQa6KdJPp9/E/QBhOOAWoZhTBWaWq0W4jjGxcUFKKWoVquI4zi1XV1dDYAqpRiA3Dj/TIFt21Olz3q9jna7jXK5jGq1imaziXq9nqpbLBaxsbHxEqKUUhxAcZzn/LK1tXV/f3+vPyuvfo91HMd6e3t7YGy49eXm5kbXarUfAH4dx/W5rGPoyykWAmEYcgClka43DKOglJoqhu7u7qLVamFubg6UUqyvr+Ph4SG9eFAoDOzRIAgEY6wYx/HHoKZpRtOCbm5uDvRXVlaws7MzlkWDIOCEkMJI1xuGUfB9fyrQtbU12LaN1dVVJEmCg4MDSClh2/abtrS0NJDvwzBklNLRp55zXpwW9OTkBABwdnYGADg/P0en00nVbTabAwHf8zxCCJkZaVHGWC4IgqlAi8XiQDDv998pHQ3+/noeCCHGyIfMz8+3j46OdJIk+mfI6empVkp9H2lR0zTdUqmEnxGe+ic/DEM2nEaH96h3d3dH9vb2YFkWkiR5U1IcLiW+nieEjNQbnnu9nnOOx8dHdDodDqAC4EdqIZdSWtRaHxqG8ay1jl8VWvXQC6UVbZMhneEMRIb6aXrQWvPn5+eYc/5bt9v9E1/yJf8T+RujWhC1/6r2lgAAAABJRU5ErkJggg==",Iye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEKBA4VMdK4RAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAADSUlEQVRIx9WVb0jcdRzHX5/v77zzz51XaevypNBcHrLDuYtae9IfKExljMF8sBiDxczYnlUsKKGkhuWDQSxBKyiKRklZUcwWA90Go4XIGg6sNkqdszFnuzv19H73+/TA263SsfPak74Pv3y/7xff9+f7eX/g/77kVoho/7MP4uh6NDXCbPS0NPfGbxlAv2t9HKUNYROqP6N8TlIPyuaey/8ZoIdbGhHzMiIPL22oAknQt/Ak3pDHPkyY3G1p3Y6Y/RlxABEB8oAtRPU+gFUDFESPPNeKagcQXl5VEZDqlOXZoIq4ViXeHcn7aVp2u86MvBIKrwsYVbnB1xm2LP1NBM0aoJ9tK8BfsrvUPfnSyaODd6tCaF0Nlvyb4RwHfZ36904AZAXQL3f5yHe3oPqC42hgbi7OyNAQLpdFVah6CaKqKANAuzzVM3DtrnVT8b6dt3E12YZl9uB23RWNRhn79RwLiQTRKzMUFBZQXHJHyihHUKddGnqO/f2+C0AfqfHizX8ClUmK5oel9+wigH7f4ufUVDfnZrbisVwauhOr2ODz+3GcFMnFJOdHf7FF5KuKiqo3paHnxxU7WRvDlYj7a4QAqoewnXb21ca4SAcnxvYyEVt66cYgTqSMuVgMjMG2bXthYf7jyakLnRtePHV2JQdcAPLtmfPaFPkCkTZgD3kyTSJ/lLFLexmPWohA5e0QKsUAXp9vyXOj3diFHYEdfRM3sjhTg1erA+MgdYjcC3IPV2YdJuMR5m3B74GHglBaeK0yDkoXHn1Nnnx3Kuuw06a6HYjpQsQLegEkiCpsLIcHytKHNIGhi/jsftn60fTNPsk/Ozk2fAjlkzQ7CMCaollCJal0G18FDmQrvgwgg9hIagDVeCa8FlMDFLk/QJ0fwOnEjnZmK75yo6kVRijK5MqfiTV8erqd5vsvoX9clKb+hZwHjjbWPoqx3kdMJarjQHnamrf5Zuh5gdRqwzFjkdZXFSNWS1p8BtiH6juICMIzNNVtzyXWr9cgz/80Is1p7/uJXu7DJA+iehQRLyK7tD5cvlrA9Ro4zgzGnMTRIEqvDP6eAEa1IXIAo/MgFRj3WmAi9xHYUBPQxvW1y/Y3Vft0c12Z5jBi/wIUBFGN7nsmaQAAAABJRU5ErkJggg==",Oye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkXAAwrGkcKOQAAAFVJREFUSMdjYBgFQwb8////5H8EOEGsPkYSLPiPopGRkSi9TLT2+agFpFuAllrgAFukYwEnCKYibIaRAtBT14DEwUkKzDs2mtFGLcALTuJLLaNg8AIAfWhOIFXsg6IAAAAASUVORK5CYII=";class kye extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onAddAnimBG=e=>{aae(e),this.forceUpdate()},this.onRemoveAnimBG=e=>{oae(e),this.forceUpdate()},this.onAddAdditionalBG=e=>{lae(e),this.forceUpdate()},this.onRemoveAdditionalBG=e=>{uae(e),this.forceUpdate()},this.onSetOverrideBackground=e=>{_A(e),this.forceUpdate()}}render(){const e=this.props.currentBoard,t=Ys(e);let r;sae(e)&&(r=B(IB,{list:"animbg",title:"Animation Backgrounds",onAddBackground:this.onAddAnimBG,onRemoveBackground:this.onRemoveAnimBG,onSetOverrideBackground:this.onSetOverrideBackground,children:B(zye,{board:e})}));let i;if(cae(e)){const a=!!tr(In.uiAdvanced),o=e.additionalbg&&e.additionalbg.length,s=!!e.additionalbgcode;i=(a||o||s)&&B(IB,{list:"additionalbg",title:"Additional Backgrounds",onAddBackground:this.onAddAdditionalBG,onRemoveBackground:this.onRemoveAdditionalBG,onSetOverrideBackground:this.onSetOverrideBackground,children:B(Wye,{})})}return Xe("div",{className:"properties",children:[Hn()&&B(Xye,{}),B(Uye,{romBoard:t}),!t&&B(Nye,{gameVersion:e.game,boardType:e.type}),!t&&B(jye,{board:this.props.currentBoard}),r,i,!t&&B(Yye,{board:e})]})}}const Nye=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onChangeBg=()=>{Lo("image/*",this.bgSelected)},this.bgSelected=e=>{let t=e.target.files[0];if(!t)return;let r=new FileReader;r.onload=i=>{Uk(r.result)},r.readAsDataURL(t)}}render(){let e;switch(this.props.gameVersion){case 1:e="960 x 720";break;case 2:case 3:this.props.boardType===G0.DUEL?e="896 x 672":e="1152 x 864";break}return Xe("div",{className:"propertiesActionButton",onClick:this.onChangeBg,title:e,children:[B("img",{src:Bye,className:"propertiesActionButtonImg",width:"24",height:"24",alt:""}),B("span",{className:"propertiesActionButtonSpan",children:"Change main background"})]})}};function Uye(n){const e=Ne.exports.useCallback(()=>{vr(A0.DETAILS)},[]);let t=n.romBoard?"View board details":"Edit board details";return Xe("div",{className:"propertiesActionButton",onClick:e,children:[B("img",{src:Mye,className:"propertiesActionButtonImg",width:"24",height:"24",alt:""}),B("span",{className:"propertiesActionButtonSpan",children:t})]})}class jye extends Ne.exports.Component{constructor(){super(...arguments),this.state={noDeadEnds:!1},this.checkForDeadEnds=()=>{const e=Ok(this.props.board);wt("Dead ends",e),e.length?bk(e):(this.setState({noDeadEnds:!0}),this._noDeadEndsTimeout=setTimeout(()=>{delete this._noDeadEndsTimeout,this.setState({noDeadEnds:!1})},1e3))}}componentWillUnmount(){this._noDeadEndsTimeout&&(delete this._noDeadEndsTimeout,clearTimeout(this._noDeadEndsTimeout))}render(){let e,t;return this.state.noDeadEnds?e="\u2713 No dead ends":(e="Check for dead ends",t=this.checkForDeadEnds),Xe("div",{className:"propertiesActionButton",onClick:t,children:[B("img",{src:Iye,className:"propertiesActionButtonImg",width:"24",height:"24",alt:""}),B("span",{className:"propertiesActionButtonSpan",children:e})]})}}const IB=n=>{const e=xs(),t=j0(l=>l.app.overrideBg);let r=e[n.list]||[],i=0,a=r.map(l=>(i++,B(Gye,{bg:l,text:"Background "+i,index:i-1,showing:l===t,onRemoveBackground:n.onRemoveBackground,onSetOverrideBackground:n.onSetOverrideBackground},i)));const o=Ys(e);let s;return o||(s=B(Hye,{onAddBackground:n.onAddBackground})),!s&&!a.length?null:Xe("div",{className:"propertiesAnimationBGList",children:[B(RD,{text:n.title,children:n.children}),a,s]})};class Gye extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onRemove=e=>{e.stopPropagation(),this.props.onRemoveBackground(this.props.index),this.props.showing&&this.props.onSetOverrideBackground(null)},this.onEyeClick=e=>{e.stopPropagation(),PN()||this.props.onSetOverrideBackground(this.props.showing?null:this.props.bg)}}render(){let e="propertiesActionButtonEyeBtn";return this.props.showing&&(e+=" propertiesActionButtonEyeBtnShowing"),Xe("div",{className:"propertiesActionButton",children:[B("img",{src:this.props.bg,className:"propertiesActionButtonImg",width:"24",height:"24",alt:""}),B("span",{className:"propertiesActionButtonSpan",children:this.props.text}),B("span",{className:"propertiesActionButtonSpacer"}),B("div",{role:"button",onClick:this.onEyeClick,className:e,title:"Show this background until dismissed"}),B("div",{role:"button",className:"propertiesActionButtonDeleteBtn",onClick:this.onRemove,title:"Remove this background"})]})}}class Hye extends Ne.exports.Component{constructor(){super(...arguments),this.state={},this.onAddAnimBg=()=>{Lo("image/*",this.bgSelected)},this.bgSelected=e=>{let t=e.target.files[0];if(!t)return;let r=new FileReader;r.onload=i=>{this.props.onAddBackground(r.result)},r.readAsDataURL(t)}}render(){return Xe("div",{className:"propertiesActionButton",onClick:this.onAddAnimBg,children:[B("img",{src:Oye,className:"propertiesActionButtonImg",width:"24",height:"24",alt:""}),B("span",{className:"propertiesActionButtonSpan",children:"Add background"})]})}}class zye extends Ne.exports.Component{constructor(e){super(e),this.onClick=()=>{this.setState({playing:!this.state.playing}),this.state.playing?_4():ose()},this.state={playing:PN()}}render(){if(!this.props.board.animbg||!this.props.board.animbg.length)return null;let e=this.state.playing?"\u25AE\u25AE":"\u25BA";return B("div",{className:"bgListActionButton",onClick:this.onClick,children:e})}componentWillUnmount(){_4()}}function Wye(){const n=Ne.exports.useCallback(()=>{vr(A0.ADDITIONAL_BGS)},[]);return B("div",{className:"bgListActionButton",title:"Configure additional background usage",onClick:n,children:"\u2699"})}class Xye extends Ne.exports.Component{constructor(){super(...arguments),this.state={}}async onFindSpace(){const e=await c2("Enter a space index:");if(e){const t=parseInt(e);isNaN(t)||bk([t])}}render(){return Xe("div",{className:"propertiesActionButton",onClick:this.onFindSpace,children:[B("img",{src:Lye,className:"propertiesActionButtonImg",width:"24",height:"24",alt:""}),B("span",{className:"propertiesActionButtonSpan",children:"Find space by index"})]})}}function Kye(n){return n.game===3?[Yt.BEFORE_TURN,Yt.AFTER_TURN,Yt.BEFORE_PLAYER_TURN,Yt.BEFORE_DICE_ROLL]:[Yt.BEFORE_TURN,Yt.BEFORE_PLAYER_TURN,Yt.BEFORE_DICE_ROLL]}const Yye=n=>{const e=l_();function t(l){const c=fi(l,{activationType:Yt.BEFORE_PLAYER_TURN});Qie(c),e()}function r(l,c){Jie(c),e()}function i(l,c){XP(c)}function a(l){XP(-1)}function o(l,c){const d=Kye(n.board),h=d.indexOf(l.activationType);if(h===-1)throw new Error(`Unexpected board event activation type ${l.activationType}`);const f=d[(h+1)%d.length];vt.dispatch(Pee({eventIndex:c,activationType:f}))}function s(l,c,d,h){vt.dispatch(Ree({eventIndex:c,name:d,value:h}))}return Xe(Aa,{children:[B(RD,{text:"Events"}),B("div",{className:"propertiesPadded",children:B(pU,{events:n.board.boardevents,board:n.board,onEventAdded:t,onEventDeleted:r,onEventActivationTypeToggle:o,onEventParameterSet:s,onEventMouseEnter:i,onEventMouseLeave:a})})]})};window.addEventListener("beforeunload",function(n){let e=!1;if(window.localStorage){const t=Lie();try{localStorage.setItem("events",JSON.stringify(t))}catch{e=!0}let r=iae();try{localStorage.setItem("boards",JSON.stringify(r))}catch{e=!0}}else e=!0;if(e){let t="Cannot save all your boards. Return to the editor and export them?";return n.returnValue=t,t}});const qye={id:"BOULDERCHASE",name:"Boulder chase",activationType:Yt.LANDON,executionType:sn.DIRECT,fakeEvent:!0,supportedGames:[Qe.MP1_USA],parse(n,e){const t={METHOD_START:"6E26BAB74BC8411901472C0A40E2FC1D"};return!!H0([n.buffer,e.offset,116],t.METHOD_START)}};hr(qye);const Qye={id:"BOWSER",name:"Visit Bowser",activationType:Yt.WALKOVER,executionType:sn.DIRECT,supportedGames:[Qe.MP1_USA],parse(n,e){const t={PLAYER_DIRECTION_CHANGE:"DAD5E635FE90ED982D02B3F1D5C0CE21",METHOD_END:"8A835D982BE35F1804E9ABD65C5699F4"};if(H0([n.buffer,e.offset,20],t.PLAYER_DIRECTION_CHANGE)&&H0([n.buffer,e.offset+28,28],t.METHOD_END)){const r=n.getUint16(e.offset+26);return[72,73,79,83,84,91,93].indexOf(r)!==-1}return!1},write(n,e,t,r){return`
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)

      ; TODO: Turn player towards bowser
      ;addiu A0, R0, -1 ; current player
      ;addiu A1, R0, 8
      ;jal   0x8004D2A4
      ;addiu A2, R0, BOWSER_STANDING_SPACE_INDEX

      addiu A0, R0, ${[72,73,79,83,84,91,93][t.boardIndex]}
      addu  A1, R0, R0
      addiu A2, R0, 3
      jal   0x800587BC
      addiu A3, R0, 1

      lw    RA, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x18
    `}};hr(Qye);const Jye={id:"PASSSTART",name:"Pass start",activationType:Yt.WALKOVER,executionType:sn.PROCESS,supportedGames:[Qe.MP1_USA],parse(n,e){const t={METHOD_START:"D87057256E3E3CA9A6878AA03EF4C486",METHOD_END:"9AB28DCC38CFBE9AE8FEA4515E86D7B2"};return!!(H0([n.buffer,e.offset,22],t.METHOD_START)&&H0([n.buffer,e.offset+28,24],t.METHOD_END))},write(n,e,t,r){return`
      addiu SP, SP, -0x18
      sw    RA, 0x10(SP)

      ; TODO: Face player towards koopa troopa
      ;addiu A0, R0, -1
      ;addiu A1, R0, 8
      ;jal   0x8004D2A4
      ;addiu A2, R0, KOOPA_TROOPA_STANDING_SPACE_INDEX

      jal   koopa_start_space_event_inner
      NOP
      jal   EndProcess
      addu  A0, R0, R0
      lw    RA, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x18

  .definelabel CORE_800ED192,0x800ED192

  koopa_start_space_event_inner:
      addiu SP, SP, -0x18
      sw    RA, 0x14(SP)
      sw    S0, 0x10(SP)
      lui   S0, hi(CORE_800ED192)
      addiu S0, S0, lo(CORE_800ED192)
      lhu   V0, 0(S0)
      addiu V0, V0, 1
      sh    V0, 0(S0)
      jal   IsBoardFeatureFlagSet
      addiu A0, R0, 66
      bne   V0, R0, L800F965C
      lui   V1, 0x6666
      lhu   V0, 0(S0)
      sll   V0, V0, 0x10
      sra   A0, V0, 0x10
      ori V1, V1, 0x6667
      mult  A0, V1
      mfhi  A3
      sra   V1, A3, 2
      sra   V0, V0, 0x1f
      subu  V1, V1, V0
      sll   V0, V1, 2
      addu  V0, V0, V1
      sll   V0, V0, 1
      subu  A0, A0, V0
      sll   A0, A0, 0x10
      beq   A0, R0, L800F9624
      NOP
      jal   IsBoardFeatureFlagSet
      addiu A0, R0, 77
      bne   V0, R0, L800F965C
      NOP
    L800F9624:
      jal   IsBoardFeatureFlagSet
      addiu A0, R0, 77
      beq   V0, R0, L800F963C
      addiu A0, R0, -1
      jal   0x80058910
      addiu A1, R0, 1
    L800F963C:
      jal   SetBoardFeatureFlag
      addiu A0, R0, 77
      addiu A0, R0, 95
      addu  A1, R0, R0
      jal   0x800587EC
      addiu A2, R0, 1
      j     L800F9664
      NOP
    L800F965C:
      jal   receive_koopa_bonus
      NOP
    L800F9664:
      lw    RA, 0x14(SP)
      lw    S0, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x18

  receive_koopa_bonus:
      addiu SP, SP, -0x20
      sw    RA, 0x1c(SP)
      sw    S2, 0x18(SP)
      sw    S1, 0x14(SP)
      jal   GetCurrentPlayerIndex
      sw    S0, 0x10(SP)
      addu  S1, V0, R0
      sll   A0, S1, 0x10
      jal   0x800405DC
      sra   A0, A0, 0x10
      addiu A0, R0, -1
      addiu A1, R0, -1
      jal   0x80052BE8
      addiu A2, R0, 2
      jal   IsBoardFeatureFlagSet
      addiu A0, R0, 66
      bnel  V0, R0, L800F94F0
      addiu A0, R0, 65
      addiu A0, R0, 72
      addiu A1, R0, 60
      addiu A2, R0, 16
      jal   CreateTextWindow
      addiu A3, R0, 3
      addu  S0, V0, R0
      sll   V0, V0, 0x10
      sra   A0, V0, 0x10
      addiu A1, R0, 569 ; "Nice work! Take this 10 Coin Bonus! Use it wisely"
      addiu A2, R0, -1
      jal   LoadStringIntoWindow
      addiu A3, R0, -1
      j     L800F9520
      addiu S2, R0, 10
    L800F94F0:
      addiu A1, R0, 60
      addiu A2, R0, 17
      jal   CreateTextWindow
      addiu A3, R0, 3
      addu  S0, V0, R0
      sll   V0, V0, 0x10
      sra   A0, V0, 0x10
      addiu    A1, R0, 570 ; "Nice work! Take this 20 Coin Bonus! Just a little bit longer..."
      addiu    A2, R0, -1
      jal   LoadStringIntoWindow
      addiu    A3, R0, -1
      addiu    S2, R0, 20
    L800F9520:
      sll   S0, S0, 0x10
      sra   S0, S0, 0x10
      addu  A0, S0, R0
      jal   SetTextCharsPerFrame
      addu  A1, R0, R0
      jal   ShowTextWindow
      addu  A0, S0, R0
      jal   PlaySound
      addiu A0, R0, 1074  ; Metal metal? :D
      sll   S1, S1, 0x10
      sra   S1, S1, 0x10
      addu  A0, S0, R0
      jal   0x8004DBD4
      addu  A1, S1, R0
      jal   HideTextWindow
      addu  A0, S0, R0
      addu  S0, S2, R0
      addu  A0, S1, R0
      jal   AdjustPlayerCoinsGradual
      addu  A1, S0, R0
      addu  A0, S1, R0
      jal   ShowPlayerCoinChange
      addu  A1, S0, R0
      jal   SleepProcess
      addiu A0, R0, 30 ; 30 frames
      jal   0x8003FEFC
      addu  A0, S1, R0
      lw    RA, 0x1c(SP)
      lw    S2, 0x18(SP)
      lw    S1, 0x14(SP)
      lw    S0, 0x10(SP)
      jr    RA
      addiu SP, SP, 0x20
    `}};hr(Jye);const Zye={id:"THWOMPCHAINSPLIT",name:"Thwomp Chain Split",activationType:Yt.WALKOVER,executionType:sn.PROCESS,fakeEvent:!0,supportedGames:[Qe.MP1_USA],parse(n,e){var t={METHOD_START:"A45C16B1E285427C790C6FAD1EC78394"};return!!H0([n.buffer,e.offset,64],t.METHOD_START)}};hr(Zye);const mU={id:"GATECHAINSPLIT",name:"",fakeEvent:!0,activationType:Yt.WALKOVER,executionType:sn.PROCESS,supportedGames:[Qe.MP3_USA],parse(n,e){let t={GATE_FILTER:"A99A70CBC4A1F9509AAB966831FC584E"};return H0([n.buffer,e.offset,68],t.GATE_FILTER),!1},write(n,e,t,r){throw new Error(`${mU.id} not implemented`)}};hr(mU);const SU={id:"REVERSECHAINSPLIT",name:"",fakeEvent:!0,activationType:Yt.WALKOVER,executionType:sn.DIRECT,supportedGames:[Qe.MP3_USA],parse(n,e){let t={REVERSE_FILTER:"0909C95D982B8A9B1F096AC54FFFB816"};return!!H0([n.buffer,e.offset,48],t.REVERSE_FILTER)},write(n,e,t,r){throw new Error(`${SU.id} not implemented`)}};hr(SU);function yg(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gU={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,a){function o(c,d){if(!i[c]){if(!r[c]){var h=typeof yg=="function"&&yg;if(!d&&h)return h(c,!0);if(s)return s(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var m=i[c]={exports:{}};r[c][0].call(m.exports,function(g){var x=r[c][1][g];return o(x||g)},m,m.exports,t,r,i,a)}return i[c].exports}for(var s=typeof yg=="function"&&yg,l=0;l<a.length;l++)o(a[l]);return o}({1:[function(t,r,i){var a=t("./utils"),o=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,d,h,f,m,g,x,E=[],_=0,v=l.length,C=v,D=a.getTypeOf(l)!=="string";_<l.length;)C=v-_,h=D?(c=l[_++],d=_<v?l[_++]:0,_<v?l[_++]:0):(c=l.charCodeAt(_++),d=_<v?l.charCodeAt(_++):0,_<v?l.charCodeAt(_++):0),f=c>>2,m=(3&c)<<4|d>>4,g=1<C?(15&d)<<2|h>>6:64,x=2<C?63&h:64,E.push(s.charAt(f)+s.charAt(m)+s.charAt(g)+s.charAt(x));return E.join("")},i.decode=function(l){var c,d,h,f,m,g,x=0,E=0,_="data:";if(l.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");var v,C=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===s.charAt(64)&&C--,l.charAt(l.length-2)===s.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|C):new Array(0|C);x<l.length;)c=s.indexOf(l.charAt(x++))<<2|(f=s.indexOf(l.charAt(x++)))>>4,d=(15&f)<<4|(m=s.indexOf(l.charAt(x++)))>>2,h=(3&m)<<6|(g=s.indexOf(l.charAt(x++))),v[E++]=c,m!==64&&(v[E++]=d),g!==64&&(v[E++]=h);return v}},{"./support":30,"./utils":32}],2:[function(t,r,i){var a=t("./external"),o=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function c(d,h,f,m,g){this.compressedSize=d,this.uncompressedSize=h,this.crc32=f,this.compression=m,this.compressedContent=g}c.prototype={getContentWorker:function(){var d=new o(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,h,f){return d.pipe(new s).pipe(new l("uncompressedSize")).pipe(h.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var a=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var a=t("./utils"),o=function(){for(var s,l=[],c=0;c<256;c++){s=c;for(var d=0;d<8;d++)s=1&s?3988292384^s>>>1:s>>>1;l[c]=s}return l}();r.exports=function(s,l){return s!==void 0&&s.length?a.getTypeOf(s)!=="string"?function(c,d,h,f){var m=o,g=f+h;c^=-1;for(var x=f;x<g;x++)c=c>>>8^m[255&(c^d[x])];return-1^c}(0|l,s,s.length,0):function(c,d,h,f){var m=o,g=f+h;c^=-1;for(var x=f;x<g;x++)c=c>>>8^m[255&(c^d.charCodeAt(x))];return-1^c}(0|l,s,s.length,0):0}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var a=null;a=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:a}},{lie:37}],7:[function(t,r,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),s=t("./utils"),l=t("./stream/GenericWorker"),c=a?"uint8array":"array";function d(h,f){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=f,this.meta={}}i.magic="\b\0",s.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(c,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(f){h.push({data:f,meta:h.meta})}},i.compressWorker=function(h){return new d("Deflate",h)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){function a(m,g){var x,E="";for(x=0;x<g;x++)E+=String.fromCharCode(255&m),m>>>=8;return E}function o(m,g,x,E,_,v){var C,D,V=m.file,H=m.compression,R=v!==c.utf8encode,j=s.transformTo("string",v(V.name)),te=s.transformTo("string",c.utf8encode(V.name)),$=V.comment,z=s.transformTo("string",v($)),I=s.transformTo("string",c.utf8encode($)),q=te.length!==V.name.length,P=I.length!==$.length,ee="",ce="",U="",O=V.dir,G=V.date,re={crc32:0,compressedSize:0,uncompressedSize:0};g&&!x||(re.crc32=m.crc32,re.compressedSize=m.compressedSize,re.uncompressedSize=m.uncompressedSize);var oe=0;g&&(oe|=8),R||!q&&!P||(oe|=2048);var se=0,be=0;O&&(se|=16),_==="UNIX"?(be=798,se|=function(Te,ye){var We=Te;return Te||(We=ye?16893:33204),(65535&We)<<16}(V.unixPermissions,O)):(be=20,se|=function(Te){return 63&(Te||0)}(V.dosPermissions)),C=G.getUTCHours(),C<<=6,C|=G.getUTCMinutes(),C<<=5,C|=G.getUTCSeconds()/2,D=G.getUTCFullYear()-1980,D<<=4,D|=G.getUTCMonth()+1,D<<=5,D|=G.getUTCDate(),q&&(ce=a(1,1)+a(d(j),4)+te,ee+="up"+a(ce.length,2)+ce),P&&(U=a(1,1)+a(d(z),4)+I,ee+="uc"+a(U.length,2)+U);var Be="";return Be+=`
\0`,Be+=a(oe,2),Be+=H.magic,Be+=a(C,2),Be+=a(D,2),Be+=a(re.crc32,4),Be+=a(re.compressedSize,4),Be+=a(re.uncompressedSize,4),Be+=a(j.length,2),Be+=a(ee.length,2),{fileRecord:h.LOCAL_FILE_HEADER+Be+j+ee,dirRecord:h.CENTRAL_FILE_HEADER+a(be,2)+Be+a(z.length,2)+"\0\0\0\0"+a(se,4)+a(E,4)+j+ee+z}}var s=t("../utils"),l=t("../stream/GenericWorker"),c=t("../utf8"),d=t("../crc32"),h=t("../signature");function f(m,g,x,E){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=x,this.encodeFileName=E,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(f,l),f.prototype.push=function(m){var g=m.meta.percent||0,x=this.entriesCount,E=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:x?(g+100*(x-E-1))/x:100}}))},f.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var g=this.streamFiles&&!m.file.dir;if(g){var x=o(m,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(m){this.accumulate=!1;var g=this.streamFiles&&!m.file.dir,x=o(m,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),g)this.push({data:function(E){return h.DATA_DESCRIPTOR+a(E.crc32,4)+a(E.compressedSize,4)+a(E.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var m=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var x=this.bytesWritten-m,E=function(_,v,C,D,V){var H=s.transformTo("string",V(D));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(_,2)+a(_,2)+a(v,4)+a(C,4)+a(H.length,2)+H}(this.dirRecords.length,x,m,this.zipComment,this.encodeFileName);this.push({data:E,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(m){this._sources.push(m);var g=this;return m.on("data",function(x){g.processChunk(x)}),m.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),m.on("error",function(x){g.error(x)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(m){var g=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var x=0;x<g.length;x++)try{g[x].error(m)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,g=0;g<m.length;g++)m[g].lock()},r.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var a=t("../compressions"),o=t("./ZipFileWorker");i.generateWorker=function(s,l,c){var d=new o(l.streamFiles,c,l.platform,l.encodeFileName),h=0;try{s.forEach(function(f,m){h++;var g=function(v,C){var D=v||C,V=a[D];if(!V)throw new Error(D+" is not a valid compression method !");return V}(m.options.compression,l.compression),x=m.options.compressionOptions||l.compressionOptions||{},E=m.dir,_=m.date;m._compressWorker(g,x).withStreamInfo("file",{name:f,dir:E,date:_,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(f){d.error(f)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new a;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(o,s){return new a().loadAsync(o,s)},a.external=t("./external"),r.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var a=t("./utils"),o=t("./external"),s=t("./utf8"),l=t("./zipEntries"),c=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function h(f){return new o.Promise(function(m,g){var x=f.decompressed.getContentWorker().pipe(new c);x.on("error",function(E){g(E)}).on("end",function(){x.streamInfo.crc32!==f.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(f,m){var g=this;return m=a.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),d.isNode&&d.isStream(f)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",f,!0,m.optimizedBinaryString,m.base64).then(function(x){var E=new l(m);return E.load(x),E}).then(function(x){var E=[o.Promise.resolve(x)],_=x.files;if(m.checkCRC32)for(var v=0;v<_.length;v++)E.push(h(_[v]));return o.Promise.all(E)}).then(function(x){for(var E=x.shift(),_=E.files,v=0;v<_.length;v++){var C=_[v],D=C.fileNameStr,V=a.resolve(C.fileNameStr);g.file(V,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:m.createFolders}),C.dir||(g.file(V).unsafeOriginalName=D)}return E.zipComment.length&&(g.comment=E.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var a=t("../utils"),o=t("../stream/GenericWorker");function s(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}a.inherits(s,o),s.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var a=t("readable-stream").Readable;function o(s,l,c){a.call(this,l),this._helper=s;var d=this;s.on("data",function(h,f){d.push(h)||d._helper.pause(),c&&c(f)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}t("../utils").inherits(o,a),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,o);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,o)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var o=new Buffer(a);return o.fill(0),o},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,r,i){function a(V,H,R){var j,te=s.getTypeOf(H),$=s.extend(R||{},d);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(V=_(V)),$.createFolders&&(j=E(V))&&v.call(this,j,!0);var z=te==="string"&&$.binary===!1&&$.base64===!1;R&&R.binary!==void 0||($.binary=!z),(H instanceof h&&H.uncompressedSize===0||$.dir||!H||H.length===0)&&($.base64=!1,$.binary=!0,H="",$.compression="STORE",te="string");var I=null;I=H instanceof h||H instanceof l?H:g.isNode&&g.isStream(H)?new x(V,H):s.prepareContent(V,H,$.binary,$.optimizedBinaryString,$.base64);var q=new f(V,I,$);this.files[V]=q}var o=t("./utf8"),s=t("./utils"),l=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),d=t("./defaults"),h=t("./compressedObject"),f=t("./zipObject"),m=t("./generate"),g=t("./nodejsUtils"),x=t("./nodejs/NodejsStreamInputAdapter"),E=function(V){V.slice(-1)==="/"&&(V=V.substring(0,V.length-1));var H=V.lastIndexOf("/");return 0<H?V.substring(0,H):""},_=function(V){return V.slice(-1)!=="/"&&(V+="/"),V},v=function(V,H){return H=H!==void 0?H:d.createFolders,V=_(V),this.files[V]||a.call(this,V,null,{dir:!0,createFolders:H}),this.files[V]};function C(V){return Object.prototype.toString.call(V)==="[object RegExp]"}var D={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(V){var H,R,j;for(H in this.files)j=this.files[H],(R=H.slice(this.root.length,H.length))&&H.slice(0,this.root.length)===this.root&&V(R,j)},filter:function(V){var H=[];return this.forEach(function(R,j){V(R,j)&&H.push(j)}),H},file:function(V,H,R){if(arguments.length!==1)return V=this.root+V,a.call(this,V,H,R),this;if(C(V)){var j=V;return this.filter(function($,z){return!z.dir&&j.test($)})}var te=this.files[this.root+V];return te&&!te.dir?te:null},folder:function(V){if(!V)return this;if(C(V))return this.filter(function(te,$){return $.dir&&V.test(te)});var H=this.root+V,R=v.call(this,H),j=this.clone();return j.root=R.name,j},remove:function(V){V=this.root+V;var H=this.files[V];if(H||(V.slice(-1)!=="/"&&(V+="/"),H=this.files[V]),H&&!H.dir)delete this.files[V];else for(var R=this.filter(function(te,$){return $.name.slice(0,V.length)===V}),j=0;j<R.length;j++)delete this.files[R[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(V){var H,R={};try{if((R=s.extend(V||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");s.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var j=R.comment||this.comment||"";H=m.generateWorker(this,R,j)}catch(te){(H=new l("error")).error(te)}return new c(H,R.type||"string",R.mimeType)},generateAsync:function(V,H){return this.generateInternalStream(V).accumulate(H)},generateNodeStream:function(V,H){return(V=V||{}).type||(V.type="nodebuffer"),this.generateInternalStream(V).toNodejsStream(H)}};r.exports=D},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var a=t("./DataReader");function o(s){a.call(this,s);for(var l=0;l<this.data.length;l++)s[l]=255&s[l]}t("../utils").inherits(o,a),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var l=s.charCodeAt(0),c=s.charCodeAt(1),d=s.charCodeAt(2),h=s.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===c&&this.data[f+2]===d&&this.data[f+3]===h)return f-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var l=s.charCodeAt(0),c=s.charCodeAt(1),d=s.charCodeAt(2),h=s.charCodeAt(3),f=this.readData(4);return l===f[0]&&c===f[1]&&d===f[2]&&h===f[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var a=t("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var l,c=0;for(this.checkOffset(s),l=this.index+s-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=s,c},readString:function(s){return a.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(t,r,i){var a=t("./Uint8ArrayReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var a=t("./DataReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var a=t("./ArrayReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var a=t("../utils"),o=t("../support"),s=t("./ArrayReader"),l=t("./StringReader"),c=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");r.exports=function(h){var f=a.getTypeOf(h);return a.checkSupport(f),f!=="string"||o.uint8array?f==="nodebuffer"?new c(h):o.uint8array?new d(a.transformTo("uint8array",h)):new s(a.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var a=t("./GenericWorker"),o=t("../utils");function s(l){a.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(s,a),s.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var a=t("./GenericWorker"),o=t("../crc32");function s(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,a),s.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var a=t("../utils"),o=t("./GenericWorker");function s(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}a.inherits(s,o),s.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var a=t("../utils"),o=t("./GenericWorker");function s(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=a.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}a.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function a(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(l){s.processChunk(l)}),o.on("end",function(){s.end()}),o.on("error",function(l){s.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=a},{}],29:[function(t,r,i){var a=t("../utils"),o=t("./ConvertWorker"),s=t("./GenericWorker"),l=t("../base64"),c=t("../support"),d=t("../external"),h=null;if(c.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(g,x){return new d.Promise(function(E,_){var v=[],C=g._internalType,D=g._outputType,V=g._mimeType;g.on("data",function(H,R){v.push(H),x&&x(R)}).on("error",function(H){v=[],_(H)}).on("end",function(){try{var H=function(R,j,te){switch(R){case"blob":return a.newBlob(a.transformTo("arraybuffer",j),te);case"base64":return l.encode(j);default:return a.transformTo(R,j)}}(D,function(R,j){var te,$=0,z=null,I=0;for(te=0;te<j.length;te++)I+=j[te].length;switch(R){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(z=new Uint8Array(I),te=0;te<j.length;te++)z.set(j[te],$),$+=j[te].length;return z;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+R+"'")}}(C,v),V);E(H)}catch(R){_(R)}v=[]}).resume()})}function m(g,x,E){var _=x;switch(x){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string"}try{this._internalType=_,this._outputType=x,this._mimeType=E,a.checkSupport(_),this._worker=g.pipe(new o(_)),g.lock()}catch(v){this._worker=new s("error"),this._worker.error(v)}}m.prototype={accumulate:function(g){return f(this,g)},on:function(g,x){var E=this;return g==="data"?this._worker.on(g,function(_){x.call(E,_.data,_.meta)}):this._worker.on(g,function(){a.delay(x,arguments,E)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},g)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(a),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var a=t("./utils"),o=t("./support"),s=t("./nodejsUtils"),l=t("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}i.utf8encode=function(m){return o.nodebuffer?s.newBufferFrom(m,"utf-8"):function(g){var x,E,_,v,C,D=g.length,V=0;for(v=0;v<D;v++)(64512&(E=g.charCodeAt(v)))==55296&&v+1<D&&(64512&(_=g.charCodeAt(v+1)))==56320&&(E=65536+(E-55296<<10)+(_-56320),v++),V+=E<128?1:E<2048?2:E<65536?3:4;for(x=o.uint8array?new Uint8Array(V):new Array(V),v=C=0;C<V;v++)(64512&(E=g.charCodeAt(v)))==55296&&v+1<D&&(64512&(_=g.charCodeAt(v+1)))==56320&&(E=65536+(E-55296<<10)+(_-56320),v++),E<128?x[C++]=E:(E<2048?x[C++]=192|E>>>6:(E<65536?x[C++]=224|E>>>12:(x[C++]=240|E>>>18,x[C++]=128|E>>>12&63),x[C++]=128|E>>>6&63),x[C++]=128|63&E);return x}(m)},i.utf8decode=function(m){return o.nodebuffer?a.transformTo("nodebuffer",m).toString("utf-8"):function(g){var x,E,_,v,C=g.length,D=new Array(2*C);for(x=E=0;x<C;)if((_=g[x++])<128)D[E++]=_;else if(4<(v=c[_]))D[E++]=65533,x+=v-1;else{for(_&=v===2?31:v===3?15:7;1<v&&x<C;)_=_<<6|63&g[x++],v--;1<v?D[E++]=65533:_<65536?D[E++]=_:(_-=65536,D[E++]=55296|_>>10&1023,D[E++]=56320|1023&_)}return D.length!==E&&(D.subarray?D=D.subarray(0,E):D.length=E),a.applyFromCharCode(D)}(m=a.transformTo(o.uint8array?"uint8array":"array",m))},a.inherits(h,l),h.prototype.processChunk=function(m){var g=a.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=g;(g=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),g.set(x,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var E=function(v,C){var D;for((C=C||v.length)>v.length&&(C=v.length),D=C-1;0<=D&&(192&v[D])==128;)D--;return D<0||D===0?C:D+c[v[D]]>C?D:C}(g),_=g;E!==g.length&&(o.uint8array?(_=g.subarray(0,E),this.leftOver=g.subarray(E,g.length)):(_=g.slice(0,E),this.leftOver=g.slice(E,g.length))),this.push({data:i.utf8decode(_),meta:m.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,a.inherits(f,l),f.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var a=t("./support"),o=t("./base64"),s=t("./nodejsUtils"),l=t("./external");function c(x){return x}function d(x,E){for(var _=0;_<x.length;++_)E[_]=255&x.charCodeAt(_);return E}t("setimmediate"),i.newBlob=function(x,E){i.checkSupport("blob");try{return new Blob([x],{type:E})}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(x),_.getBlob(E)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(x,E,_){var v=[],C=0,D=x.length;if(D<=_)return String.fromCharCode.apply(null,x);for(;C<D;)E==="array"||E==="nodebuffer"?v.push(String.fromCharCode.apply(null,x.slice(C,Math.min(C+_,D)))):v.push(String.fromCharCode.apply(null,x.subarray(C,Math.min(C+_,D)))),C+=_;return v.join("")},stringifyByChar:function(x){for(var E="",_=0;_<x.length;_++)E+=String.fromCharCode(x[_]);return E},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function f(x){var E=65536,_=i.getTypeOf(x),v=!0;if(_==="uint8array"?v=h.applyCanBeUsed.uint8array:_==="nodebuffer"&&(v=h.applyCanBeUsed.nodebuffer),v)for(;1<E;)try{return h.stringifyByChunk(x,_,E)}catch{E=Math.floor(E/2)}return h.stringifyByChar(x)}function m(x,E){for(var _=0;_<x.length;_++)E[_]=x[_];return E}i.applyFromCharCode=f;var g={};g.string={string:c,array:function(x){return d(x,new Array(x.length))},arraybuffer:function(x){return g.string.uint8array(x).buffer},uint8array:function(x){return d(x,new Uint8Array(x.length))},nodebuffer:function(x){return d(x,s.allocBuffer(x.length))}},g.array={string:f,array:c,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return s.newBufferFrom(x)}},g.arraybuffer={string:function(x){return f(new Uint8Array(x))},array:function(x){return m(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:c,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return s.newBufferFrom(new Uint8Array(x))}},g.uint8array={string:f,array:function(x){return m(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:c,nodebuffer:function(x){return s.newBufferFrom(x)}},g.nodebuffer={string:f,array:function(x){return m(x,new Array(x.length))},arraybuffer:function(x){return g.nodebuffer.uint8array(x).buffer},uint8array:function(x){return m(x,new Uint8Array(x.length))},nodebuffer:c},i.transformTo=function(x,E){if(E=E||"",!x)return E;i.checkSupport(x);var _=i.getTypeOf(E);return g[_][x](E)},i.resolve=function(x){for(var E=x.split("/"),_=[],v=0;v<E.length;v++){var C=E[v];C==="."||C===""&&v!==0&&v!==E.length-1||(C===".."?_.pop():_.push(C))}return _.join("/")},i.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":a.nodebuffer&&s.isBuffer(x)?"nodebuffer":a.uint8array&&x instanceof Uint8Array?"uint8array":a.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(x){if(!a[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(x){var E,_,v="";for(_=0;_<(x||"").length;_++)v+="\\x"+((E=x.charCodeAt(_))<16?"0":"")+E.toString(16).toUpperCase();return v},i.delay=function(x,E,_){setImmediate(function(){x.apply(_||null,E||[])})},i.inherits=function(x,E){function _(){}_.prototype=E.prototype,x.prototype=new _},i.extend=function(){var x,E,_={};for(x=0;x<arguments.length;x++)for(E in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],E)&&_[E]===void 0&&(_[E]=arguments[x][E]);return _},i.prepareContent=function(x,E,_,v,C){return l.Promise.resolve(E).then(function(D){return a.blob&&(D instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(D))!==-1)&&typeof FileReader<"u"?new l.Promise(function(V,H){var R=new FileReader;R.onload=function(j){V(j.target.result)},R.onerror=function(j){H(j.target.error)},R.readAsArrayBuffer(D)}):D}).then(function(D){var V=i.getTypeOf(D);return V?(V==="arraybuffer"?D=i.transformTo("uint8array",D):V==="string"&&(C?D=o.decode(D):_&&v!==!0&&(D=function(H){return d(H,a.uint8array?new Uint8Array(H.length):new Array(H.length))}(D))),D):l.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var a=t("./reader/readerFor"),o=t("./utils"),s=t("./signature"),l=t("./zipEntry"),c=t("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(f)+", expected "+o.pretty(h)+")")}},isSignature:function(h,f){var m=this.reader.index;this.reader.setIndex(h);var g=this.reader.readString(4)===f;return this.reader.setIndex(m),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),f=c.uint8array?"uint8array":"array",m=o.transformTo(f,h);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,f,m,g=this.zip64EndOfCentralSize-44;0<g;)h=this.reader.readInt(2),f=this.reader.readInt(4),m=this.reader.readData(f),this.zip64ExtensibleData[h]={id:h,length:f,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,f;for(h=0;h<this.files.length;h++)f=this.files[h],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var f=h;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var g=f-m;if(0<g)this.isSignature(f,s.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(h){this.reader=a(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var a=t("./reader/readerFor"),o=t("./utils"),s=t("./compressedObject"),l=t("./crc32"),c=t("./utf8"),d=t("./compressions"),h=t("./support");function f(m,g){this.options=m,this.loadOptions=g}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var g,x;if(m.skip(22),this.fileNameLength=m.readInt(2),x=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(E){for(var _ in d)if(Object.prototype.hasOwnProperty.call(d,_)&&d[_].magic===E)return d[_];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,g,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var g=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(g),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=a(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var g,x,E,_=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<_;)g=m.readInt(2),x=m.readInt(2),E=m.readData(x),this.extraFields[g]={id:g,length:x,value:E};m.setIndex(_)},handleUTF8:function(){var m=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var x=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var E=this.findExtraFieldUnicodeComment();if(E!==null)this.fileCommentStr=E;else{var _=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var g=a(m.value);return g.readInt(1)!==1||l(this.fileName)!==g.readInt(4)?null:c.utf8decode(g.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var g=a(m.value);return g.readInt(1)!==1||l(this.fileComment)!==g.readInt(4)?null:c.utf8decode(g.readData(m.length-5))}return null}},r.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){function a(g,x,E){this.name=g,this.dir=E.dir,this.date=E.date,this.comment=E.comment,this.unixPermissions=E.unixPermissions,this.dosPermissions=E.dosPermissions,this._data=x,this._dataBinary=E.binary,this.options={compression:E.compression,compressionOptions:E.compressionOptions}}var o=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),l=t("./utf8"),c=t("./compressedObject"),d=t("./stream/GenericWorker");a.prototype={internalStream:function(g){var x=null,E="string";try{if(!g)throw new Error("No output type specified.");var _=(E=g.toLowerCase())==="string"||E==="text";E!=="binarystring"&&E!=="text"||(E="string"),x=this._decompressWorker();var v=!this._dataBinary;v&&!_&&(x=x.pipe(new l.Utf8EncodeWorker)),!v&&_&&(x=x.pipe(new l.Utf8DecodeWorker))}catch(C){(x=new d("error")).error(C)}return new o(x,E,"")},async:function(g,x){return this.internalStream(g).accumulate(x)},nodeStream:function(g,x){return this.internalStream(g||"nodebuffer").toNodejsStream(x)},_compressWorker:function(g,x){if(this._data instanceof c&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var E=this._decompressWorker();return this._dataBinary||(E=E.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(E,g,x)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new s(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<h.length;m++)a.prototype[h[m]]=f;r.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(a){var o,s,l=a.MutationObserver||a.WebKitMutationObserver;if(l){var c=0,d=new l(g),h=a.document.createTextNode("");d.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(a.setImmediate||a.MessageChannel===void 0)o="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var x=a.document.createElement("script");x.onreadystatechange=function(){g(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},a.document.documentElement.appendChild(x)}:function(){setTimeout(g,0)};else{var f=new a.MessageChannel;f.port1.onmessage=g,o=function(){f.port2.postMessage(0)}}var m=[];function g(){var x,E;s=!0;for(var _=m.length;_;){for(E=m,m=[],x=-1;++x<_;)E[x]();_=m.length}s=!1}r.exports=function(x){m.push(x)!==1||s||o()}}).call(this,typeof window<"u"?window:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var a=t("immediate");function o(){}var s={},l=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function h(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,_!==o&&x(this,_)}function f(_,v,C){this.promise=_,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function m(_,v,C){a(function(){var D;try{D=v(C)}catch(V){return s.reject(_,V)}D===_?s.reject(_,new TypeError("Cannot resolve promise with itself")):s.resolve(_,D)})}function g(_){var v=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof v=="function")return function(){v.apply(_,arguments)}}function x(_,v){var C=!1;function D(R){C||(C=!0,s.reject(_,R))}function V(R){C||(C=!0,s.resolve(_,R))}var H=E(function(){v(V,D)});H.status==="error"&&D(H.value)}function E(_,v){var C={};try{C.value=_(v),C.status="success"}catch(D){C.status="error",C.value=D}return C}(r.exports=h).prototype.finally=function(_){if(typeof _!="function")return this;var v=this.constructor;return this.then(function(C){return v.resolve(_()).then(function(){return C})},function(C){return v.resolve(_()).then(function(){throw C})})},h.prototype.catch=function(_){return this.then(null,_)},h.prototype.then=function(_,v){if(typeof _!="function"&&this.state===c||typeof v!="function"&&this.state===l)return this;var C=new this.constructor(o);return this.state!==d?m(C,this.state===c?_:v,this.outcome):this.queue.push(new f(C,_,v)),C},f.prototype.callFulfilled=function(_){s.resolve(this.promise,_)},f.prototype.otherCallFulfilled=function(_){m(this.promise,this.onFulfilled,_)},f.prototype.callRejected=function(_){s.reject(this.promise,_)},f.prototype.otherCallRejected=function(_){m(this.promise,this.onRejected,_)},s.resolve=function(_,v){var C=E(g,v);if(C.status==="error")return s.reject(_,C.value);var D=C.value;if(D)x(_,D);else{_.state=c,_.outcome=v;for(var V=-1,H=_.queue.length;++V<H;)_.queue[V].callFulfilled(v)}return _},s.reject=function(_,v){_.state=l,_.outcome=v;for(var C=-1,D=_.queue.length;++C<D;)_.queue[C].callRejected(v);return _},h.resolve=function(_){return _ instanceof this?_:s.resolve(new this(o),_)},h.reject=function(_){var v=new this(o);return s.reject(v,_)},h.all=function(_){var v=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=_.length,D=!1;if(!C)return this.resolve([]);for(var V=new Array(C),H=0,R=-1,j=new this(o);++R<C;)te(_[R],R);return j;function te($,z){v.resolve($).then(function(I){V[z]=I,++H!==C||D||(D=!0,s.resolve(j,V))},function(I){D||(D=!0,s.reject(j,I))})}},h.race=function(_){var v=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=_.length,D=!1;if(!C)return this.resolve([]);for(var V=-1,H=new this(o);++V<C;)R=_[V],v.resolve(R).then(function(j){D||(D=!0,s.resolve(H,j))},function(j){D||(D=!0,s.reject(H,j))});var R;return H}},{immediate:36}],38:[function(t,r,i){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var a=t("./zlib/deflate"),o=t("./utils/common"),s=t("./utils/strings"),l=t("./zlib/messages"),c=t("./zlib/zstream"),d=Object.prototype.toString,h=0,f=-1,m=0,g=8;function x(_){if(!(this instanceof x))return new x(_);this.options=o.assign({level:f,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},_||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var C=a.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(C!==h)throw new Error(l[C]);if(v.header&&a.deflateSetHeader(this.strm,v.header),v.dictionary){var D;if(D=typeof v.dictionary=="string"?s.string2buf(v.dictionary):d.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(C=a.deflateSetDictionary(this.strm,D))!==h)throw new Error(l[C]);this._dict_set=!0}}function E(_,v){var C=new x(v);if(C.push(_,!0),C.err)throw C.msg||l[C.err];return C.result}x.prototype.push=function(_,v){var C,D,V=this.strm,H=this.options.chunkSize;if(this.ended)return!1;D=v===~~v?v:v===!0?4:0,typeof _=="string"?V.input=s.string2buf(_):d.call(_)==="[object ArrayBuffer]"?V.input=new Uint8Array(_):V.input=_,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new o.Buf8(H),V.next_out=0,V.avail_out=H),(C=a.deflate(V,D))!==1&&C!==h)return this.onEnd(C),!(this.ended=!0);V.avail_out!==0&&(V.avail_in!==0||D!==4&&D!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(V.output,V.next_out))):this.onData(o.shrinkBuf(V.output,V.next_out)))}while((0<V.avail_in||V.avail_out===0)&&C!==1);return D===4?(C=a.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===h):D!==2||(this.onEnd(h),!(V.avail_out=0))},x.prototype.onData=function(_){this.chunks.push(_)},x.prototype.onEnd=function(_){_===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},i.Deflate=x,i.deflate=E,i.deflateRaw=function(_,v){return(v=v||{}).raw=!0,E(_,v)},i.gzip=function(_,v){return(v=v||{}).gzip=!0,E(_,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var a=t("./zlib/inflate"),o=t("./utils/common"),s=t("./utils/strings"),l=t("./zlib/constants"),c=t("./zlib/messages"),d=t("./zlib/zstream"),h=t("./zlib/gzheader"),f=Object.prototype.toString;function m(x){if(!(this instanceof m))return new m(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var E=this.options;E.raw&&0<=E.windowBits&&E.windowBits<16&&(E.windowBits=-E.windowBits,E.windowBits===0&&(E.windowBits=-15)),!(0<=E.windowBits&&E.windowBits<16)||x&&x.windowBits||(E.windowBits+=32),15<E.windowBits&&E.windowBits<48&&(15&E.windowBits)==0&&(E.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var _=a.inflateInit2(this.strm,E.windowBits);if(_!==l.Z_OK)throw new Error(c[_]);this.header=new h,a.inflateGetHeader(this.strm,this.header)}function g(x,E){var _=new m(E);if(_.push(x,!0),_.err)throw _.msg||c[_.err];return _.result}m.prototype.push=function(x,E){var _,v,C,D,V,H,R=this.strm,j=this.options.chunkSize,te=this.options.dictionary,$=!1;if(this.ended)return!1;v=E===~~E?E:E===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof x=="string"?R.input=s.binstring2buf(x):f.call(x)==="[object ArrayBuffer]"?R.input=new Uint8Array(x):R.input=x,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(j),R.next_out=0,R.avail_out=j),(_=a.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&te&&(H=typeof te=="string"?s.string2buf(te):f.call(te)==="[object ArrayBuffer]"?new Uint8Array(te):te,_=a.inflateSetDictionary(this.strm,H)),_===l.Z_BUF_ERROR&&$===!0&&(_=l.Z_OK,$=!1),_!==l.Z_STREAM_END&&_!==l.Z_OK)return this.onEnd(_),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&_!==l.Z_STREAM_END&&(R.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=s.utf8border(R.output,R.next_out),D=R.next_out-C,V=s.buf2string(R.output,C),R.next_out=D,R.avail_out=j-D,D&&o.arraySet(R.output,R.output,C,D,0),this.onData(V)):this.onData(o.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&($=!0)}while((0<R.avail_in||R.avail_out===0)&&_!==l.Z_STREAM_END);return _===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(_=a.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},m.prototype.onData=function(x){this.chunks.push(x)},m.prototype.onEnd=function(x){x===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},i.Inflate=m,i.inflate=g,i.inflateRaw=function(x,E){return(E=E||{}).raw=!0,g(x,E)},i.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,d,h,f){if(c.subarray&&l.subarray)l.set(c.subarray(d,d+h),f);else for(var m=0;m<h;m++)l[f+m]=c[d+m]},flattenChunks:function(l){var c,d,h,f,m,g;for(c=h=0,d=l.length;c<d;c++)h+=l[c].length;for(g=new Uint8Array(h),c=f=0,d=l.length;c<d;c++)m=l[c],g.set(m,f),f+=m.length;return g}},s={arraySet:function(l,c,d,h,f){for(var m=0;m<h;m++)l[f+m]=c[d+m]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(a)},{}],42:[function(t,r,i){var a=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var l=new a.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(h,f){if(f<65537&&(h.subarray&&s||!h.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(h,f));for(var m="",g=0;g<f;g++)m+=String.fromCharCode(h[g]);return m}l[254]=l[254]=1,i.string2buf=function(h){var f,m,g,x,E,_=h.length,v=0;for(x=0;x<_;x++)(64512&(m=h.charCodeAt(x)))==55296&&x+1<_&&(64512&(g=h.charCodeAt(x+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),x++),v+=m<128?1:m<2048?2:m<65536?3:4;for(f=new a.Buf8(v),x=E=0;E<v;x++)(64512&(m=h.charCodeAt(x)))==55296&&x+1<_&&(64512&(g=h.charCodeAt(x+1)))==56320&&(m=65536+(m-55296<<10)+(g-56320),x++),m<128?f[E++]=m:(m<2048?f[E++]=192|m>>>6:(m<65536?f[E++]=224|m>>>12:(f[E++]=240|m>>>18,f[E++]=128|m>>>12&63),f[E++]=128|m>>>6&63),f[E++]=128|63&m);return f},i.buf2binstring=function(h){return d(h,h.length)},i.binstring2buf=function(h){for(var f=new a.Buf8(h.length),m=0,g=f.length;m<g;m++)f[m]=h.charCodeAt(m);return f},i.buf2string=function(h,f){var m,g,x,E,_=f||h.length,v=new Array(2*_);for(m=g=0;m<_;)if((x=h[m++])<128)v[g++]=x;else if(4<(E=l[x]))v[g++]=65533,m+=E-1;else{for(x&=E===2?31:E===3?15:7;1<E&&m<_;)x=x<<6|63&h[m++],E--;1<E?v[g++]=65533:x<65536?v[g++]=x:(x-=65536,v[g++]=55296|x>>10&1023,v[g++]=56320|1023&x)}return d(v,g)},i.utf8border=function(h,f){var m;for((f=f||h.length)>h.length&&(f=h.length),m=f-1;0<=m&&(192&h[m])==128;)m--;return m<0||m===0?f:m+l[h[m]]>f?m:f}},{"./common":41}],43:[function(t,r,i){r.exports=function(a,o,s,l){for(var c=65535&a|0,d=a>>>16&65535|0,h=0;s!==0;){for(s-=h=2e3<s?2e3:s;d=d+(c=c+o[l++]|0)|0,--h;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){var a=function(){for(var o,s=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;s[l]=o}return s}();r.exports=function(o,s,l,c){var d=a,h=c+l;o^=-1;for(var f=c;f<h;f++)o=o>>>8^d[255&(o^s[f])];return-1^o}},{}],46:[function(t,r,i){var a,o=t("../utils/common"),s=t("./trees"),l=t("./adler32"),c=t("./crc32"),d=t("./messages"),h=0,f=4,m=0,g=-2,x=-1,E=4,_=2,v=8,C=9,D=286,V=30,H=19,R=2*D+1,j=15,te=3,$=258,z=$+te+1,I=42,q=113,P=1,ee=2,ce=3,U=4;function O(k,De){return k.msg=d[De],De}function G(k){return(k<<1)-(4<k?9:0)}function re(k){for(var De=k.length;0<=--De;)k[De]=0}function oe(k){var De=k.state,we=De.pending;we>k.avail_out&&(we=k.avail_out),we!==0&&(o.arraySet(k.output,De.pending_buf,De.pending_out,we,k.next_out),k.next_out+=we,De.pending_out+=we,k.total_out+=we,k.avail_out-=we,De.pending-=we,De.pending===0&&(De.pending_out=0))}function se(k,De){s._tr_flush_block(k,0<=k.block_start?k.block_start:-1,k.strstart-k.block_start,De),k.block_start=k.strstart,oe(k.strm)}function be(k,De){k.pending_buf[k.pending++]=De}function Be(k,De){k.pending_buf[k.pending++]=De>>>8&255,k.pending_buf[k.pending++]=255&De}function Te(k,De){var we,le,ne=k.max_chain_length,fe=k.strstart,He=k.prev_length,ae=k.nice_match,Y=k.strstart>k.w_size-z?k.strstart-(k.w_size-z):0,_e=k.window,Fe=k.w_mask,Le=k.prev,Re=k.strstart+$,rt=_e[fe+He-1],Ee=_e[fe+He];k.prev_length>=k.good_match&&(ne>>=2),ae>k.lookahead&&(ae=k.lookahead);do if(_e[(we=De)+He]===Ee&&_e[we+He-1]===rt&&_e[we]===_e[fe]&&_e[++we]===_e[fe+1]){fe+=2,we++;do;while(_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&_e[++fe]===_e[++we]&&fe<Re);if(le=$-(Re-fe),fe=Re-$,He<le){if(k.match_start=De,ae<=(He=le))break;rt=_e[fe+He-1],Ee=_e[fe+He]}}while((De=Le[De&Fe])>Y&&--ne!=0);return He<=k.lookahead?He:k.lookahead}function ye(k){var De,we,le,ne,fe,He,ae,Y,_e,Fe,Le=k.w_size;do{if(ne=k.window_size-k.lookahead-k.strstart,k.strstart>=Le+(Le-z)){for(o.arraySet(k.window,k.window,Le,Le,0),k.match_start-=Le,k.strstart-=Le,k.block_start-=Le,De=we=k.hash_size;le=k.head[--De],k.head[De]=Le<=le?le-Le:0,--we;);for(De=we=Le;le=k.prev[--De],k.prev[De]=Le<=le?le-Le:0,--we;);ne+=Le}if(k.strm.avail_in===0)break;if(He=k.strm,ae=k.window,Y=k.strstart+k.lookahead,_e=ne,Fe=void 0,Fe=He.avail_in,_e<Fe&&(Fe=_e),we=Fe===0?0:(He.avail_in-=Fe,o.arraySet(ae,He.input,He.next_in,Fe,Y),He.state.wrap===1?He.adler=l(He.adler,ae,Fe,Y):He.state.wrap===2&&(He.adler=c(He.adler,ae,Fe,Y)),He.next_in+=Fe,He.total_in+=Fe,Fe),k.lookahead+=we,k.lookahead+k.insert>=te)for(fe=k.strstart-k.insert,k.ins_h=k.window[fe],k.ins_h=(k.ins_h<<k.hash_shift^k.window[fe+1])&k.hash_mask;k.insert&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[fe+te-1])&k.hash_mask,k.prev[fe&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=fe,fe++,k.insert--,!(k.lookahead+k.insert<te)););}while(k.lookahead<z&&k.strm.avail_in!==0)}function We(k,De){for(var we,le;;){if(k.lookahead<z){if(ye(k),k.lookahead<z&&De===h)return P;if(k.lookahead===0)break}if(we=0,k.lookahead>=te&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+te-1])&k.hash_mask,we=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),we!==0&&k.strstart-we<=k.w_size-z&&(k.match_length=Te(k,we)),k.match_length>=te)if(le=s._tr_tally(k,k.strstart-k.match_start,k.match_length-te),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=te){for(k.match_length--;k.strstart++,k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+te-1])&k.hash_mask,we=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart,--k.match_length!=0;);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+1])&k.hash_mask;else le=s._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if(le&&(se(k,!1),k.strm.avail_out===0))return P}return k.insert=k.strstart<te-1?k.strstart:te-1,De===f?(se(k,!0),k.strm.avail_out===0?ce:U):k.last_lit&&(se(k,!1),k.strm.avail_out===0)?P:ee}function at(k,De){for(var we,le,ne;;){if(k.lookahead<z){if(ye(k),k.lookahead<z&&De===h)return P;if(k.lookahead===0)break}if(we=0,k.lookahead>=te&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+te-1])&k.hash_mask,we=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=te-1,we!==0&&k.prev_length<k.max_lazy_match&&k.strstart-we<=k.w_size-z&&(k.match_length=Te(k,we),k.match_length<=5&&(k.strategy===1||k.match_length===te&&4096<k.strstart-k.match_start)&&(k.match_length=te-1)),k.prev_length>=te&&k.match_length<=k.prev_length){for(ne=k.strstart+k.lookahead-te,le=s._tr_tally(k,k.strstart-1-k.prev_match,k.prev_length-te),k.lookahead-=k.prev_length-1,k.prev_length-=2;++k.strstart<=ne&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+te-1])&k.hash_mask,we=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),--k.prev_length!=0;);if(k.match_available=0,k.match_length=te-1,k.strstart++,le&&(se(k,!1),k.strm.avail_out===0))return P}else if(k.match_available){if((le=s._tr_tally(k,0,k.window[k.strstart-1]))&&se(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return P}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&(le=s._tr_tally(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<te-1?k.strstart:te-1,De===f?(se(k,!0),k.strm.avail_out===0?ce:U):k.last_lit&&(se(k,!1),k.strm.avail_out===0)?P:ee}function Ke(k,De,we,le,ne){this.good_length=k,this.max_lazy=De,this.nice_length=we,this.max_chain=le,this.func=ne}function tt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*R),this.dyn_dtree=new o.Buf16(2*(2*V+1)),this.bl_tree=new o.Buf16(2*(2*H+1)),re(this.dyn_ltree),re(this.dyn_dtree),re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(j+1),this.heap=new o.Buf16(2*D+1),re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*D+1),re(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function lt(k){var De;return k&&k.state?(k.total_in=k.total_out=0,k.data_type=_,(De=k.state).pending=0,De.pending_out=0,De.wrap<0&&(De.wrap=-De.wrap),De.status=De.wrap?I:q,k.adler=De.wrap===2?0:1,De.last_flush=h,s._tr_init(De),m):O(k,g)}function Ie(k){var De=lt(k);return De===m&&function(we){we.window_size=2*we.w_size,re(we.head),we.max_lazy_match=a[we.level].max_lazy,we.good_match=a[we.level].good_length,we.nice_match=a[we.level].nice_length,we.max_chain_length=a[we.level].max_chain,we.strstart=0,we.block_start=0,we.lookahead=0,we.insert=0,we.match_length=we.prev_length=te-1,we.match_available=0,we.ins_h=0}(k.state),De}function Ue(k,De,we,le,ne,fe){if(!k)return g;var He=1;if(De===x&&(De=6),le<0?(He=0,le=-le):15<le&&(He=2,le-=16),ne<1||C<ne||we!==v||le<8||15<le||De<0||9<De||fe<0||E<fe)return O(k,g);le===8&&(le=9);var ae=new tt;return(k.state=ae).strm=k,ae.wrap=He,ae.gzhead=null,ae.w_bits=le,ae.w_size=1<<ae.w_bits,ae.w_mask=ae.w_size-1,ae.hash_bits=ne+7,ae.hash_size=1<<ae.hash_bits,ae.hash_mask=ae.hash_size-1,ae.hash_shift=~~((ae.hash_bits+te-1)/te),ae.window=new o.Buf8(2*ae.w_size),ae.head=new o.Buf16(ae.hash_size),ae.prev=new o.Buf16(ae.w_size),ae.lit_bufsize=1<<ne+6,ae.pending_buf_size=4*ae.lit_bufsize,ae.pending_buf=new o.Buf8(ae.pending_buf_size),ae.d_buf=1*ae.lit_bufsize,ae.l_buf=3*ae.lit_bufsize,ae.level=De,ae.strategy=fe,ae.method=we,Ie(k)}a=[new Ke(0,0,0,0,function(k,De){var we=65535;for(we>k.pending_buf_size-5&&(we=k.pending_buf_size-5);;){if(k.lookahead<=1){if(ye(k),k.lookahead===0&&De===h)return P;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;var le=k.block_start+we;if((k.strstart===0||k.strstart>=le)&&(k.lookahead=k.strstart-le,k.strstart=le,se(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-z&&(se(k,!1),k.strm.avail_out===0))return P}return k.insert=0,De===f?(se(k,!0),k.strm.avail_out===0?ce:U):(k.strstart>k.block_start&&(se(k,!1),k.strm.avail_out),P)}),new Ke(4,4,8,4,We),new Ke(4,5,16,8,We),new Ke(4,6,32,32,We),new Ke(4,4,16,16,at),new Ke(8,16,32,32,at),new Ke(8,16,128,128,at),new Ke(8,32,128,256,at),new Ke(32,128,258,1024,at),new Ke(32,258,258,4096,at)],i.deflateInit=function(k,De){return Ue(k,De,v,15,8,0)},i.deflateInit2=Ue,i.deflateReset=Ie,i.deflateResetKeep=lt,i.deflateSetHeader=function(k,De){return k&&k.state?k.state.wrap!==2?g:(k.state.gzhead=De,m):g},i.deflate=function(k,De){var we,le,ne,fe;if(!k||!k.state||5<De||De<0)return k?O(k,g):g;if(le=k.state,!k.output||!k.input&&k.avail_in!==0||le.status===666&&De!==f)return O(k,k.avail_out===0?-5:g);if(le.strm=k,we=le.last_flush,le.last_flush=De,le.status===I)if(le.wrap===2)k.adler=0,be(le,31),be(le,139),be(le,8),le.gzhead?(be(le,(le.gzhead.text?1:0)+(le.gzhead.hcrc?2:0)+(le.gzhead.extra?4:0)+(le.gzhead.name?8:0)+(le.gzhead.comment?16:0)),be(le,255&le.gzhead.time),be(le,le.gzhead.time>>8&255),be(le,le.gzhead.time>>16&255),be(le,le.gzhead.time>>24&255),be(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),be(le,255&le.gzhead.os),le.gzhead.extra&&le.gzhead.extra.length&&(be(le,255&le.gzhead.extra.length),be(le,le.gzhead.extra.length>>8&255)),le.gzhead.hcrc&&(k.adler=c(k.adler,le.pending_buf,le.pending,0)),le.gzindex=0,le.status=69):(be(le,0),be(le,0),be(le,0),be(le,0),be(le,0),be(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),be(le,3),le.status=q);else{var He=v+(le.w_bits-8<<4)<<8;He|=(2<=le.strategy||le.level<2?0:le.level<6?1:le.level===6?2:3)<<6,le.strstart!==0&&(He|=32),He+=31-He%31,le.status=q,Be(le,He),le.strstart!==0&&(Be(le,k.adler>>>16),Be(le,65535&k.adler)),k.adler=1}if(le.status===69)if(le.gzhead.extra){for(ne=le.pending;le.gzindex<(65535&le.gzhead.extra.length)&&(le.pending!==le.pending_buf_size||(le.gzhead.hcrc&&le.pending>ne&&(k.adler=c(k.adler,le.pending_buf,le.pending-ne,ne)),oe(k),ne=le.pending,le.pending!==le.pending_buf_size));)be(le,255&le.gzhead.extra[le.gzindex]),le.gzindex++;le.gzhead.hcrc&&le.pending>ne&&(k.adler=c(k.adler,le.pending_buf,le.pending-ne,ne)),le.gzindex===le.gzhead.extra.length&&(le.gzindex=0,le.status=73)}else le.status=73;if(le.status===73)if(le.gzhead.name){ne=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>ne&&(k.adler=c(k.adler,le.pending_buf,le.pending-ne,ne)),oe(k),ne=le.pending,le.pending===le.pending_buf_size)){fe=1;break}fe=le.gzindex<le.gzhead.name.length?255&le.gzhead.name.charCodeAt(le.gzindex++):0,be(le,fe)}while(fe!==0);le.gzhead.hcrc&&le.pending>ne&&(k.adler=c(k.adler,le.pending_buf,le.pending-ne,ne)),fe===0&&(le.gzindex=0,le.status=91)}else le.status=91;if(le.status===91)if(le.gzhead.comment){ne=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>ne&&(k.adler=c(k.adler,le.pending_buf,le.pending-ne,ne)),oe(k),ne=le.pending,le.pending===le.pending_buf_size)){fe=1;break}fe=le.gzindex<le.gzhead.comment.length?255&le.gzhead.comment.charCodeAt(le.gzindex++):0,be(le,fe)}while(fe!==0);le.gzhead.hcrc&&le.pending>ne&&(k.adler=c(k.adler,le.pending_buf,le.pending-ne,ne)),fe===0&&(le.status=103)}else le.status=103;if(le.status===103&&(le.gzhead.hcrc?(le.pending+2>le.pending_buf_size&&oe(k),le.pending+2<=le.pending_buf_size&&(be(le,255&k.adler),be(le,k.adler>>8&255),k.adler=0,le.status=q)):le.status=q),le.pending!==0){if(oe(k),k.avail_out===0)return le.last_flush=-1,m}else if(k.avail_in===0&&G(De)<=G(we)&&De!==f)return O(k,-5);if(le.status===666&&k.avail_in!==0)return O(k,-5);if(k.avail_in!==0||le.lookahead!==0||De!==h&&le.status!==666){var ae=le.strategy===2?function(Y,_e){for(var Fe;;){if(Y.lookahead===0&&(ye(Y),Y.lookahead===0)){if(_e===h)return P;break}if(Y.match_length=0,Fe=s._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++,Fe&&(se(Y,!1),Y.strm.avail_out===0))return P}return Y.insert=0,_e===f?(se(Y,!0),Y.strm.avail_out===0?ce:U):Y.last_lit&&(se(Y,!1),Y.strm.avail_out===0)?P:ee}(le,De):le.strategy===3?function(Y,_e){for(var Fe,Le,Re,rt,Ee=Y.window;;){if(Y.lookahead<=$){if(ye(Y),Y.lookahead<=$&&_e===h)return P;if(Y.lookahead===0)break}if(Y.match_length=0,Y.lookahead>=te&&0<Y.strstart&&(Le=Ee[Re=Y.strstart-1])===Ee[++Re]&&Le===Ee[++Re]&&Le===Ee[++Re]){rt=Y.strstart+$;do;while(Le===Ee[++Re]&&Le===Ee[++Re]&&Le===Ee[++Re]&&Le===Ee[++Re]&&Le===Ee[++Re]&&Le===Ee[++Re]&&Le===Ee[++Re]&&Le===Ee[++Re]&&Re<rt);Y.match_length=$-(rt-Re),Y.match_length>Y.lookahead&&(Y.match_length=Y.lookahead)}if(Y.match_length>=te?(Fe=s._tr_tally(Y,1,Y.match_length-te),Y.lookahead-=Y.match_length,Y.strstart+=Y.match_length,Y.match_length=0):(Fe=s._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++),Fe&&(se(Y,!1),Y.strm.avail_out===0))return P}return Y.insert=0,_e===f?(se(Y,!0),Y.strm.avail_out===0?ce:U):Y.last_lit&&(se(Y,!1),Y.strm.avail_out===0)?P:ee}(le,De):a[le.level].func(le,De);if(ae!==ce&&ae!==U||(le.status=666),ae===P||ae===ce)return k.avail_out===0&&(le.last_flush=-1),m;if(ae===ee&&(De===1?s._tr_align(le):De!==5&&(s._tr_stored_block(le,0,0,!1),De===3&&(re(le.head),le.lookahead===0&&(le.strstart=0,le.block_start=0,le.insert=0))),oe(k),k.avail_out===0))return le.last_flush=-1,m}return De!==f?m:le.wrap<=0?1:(le.wrap===2?(be(le,255&k.adler),be(le,k.adler>>8&255),be(le,k.adler>>16&255),be(le,k.adler>>24&255),be(le,255&k.total_in),be(le,k.total_in>>8&255),be(le,k.total_in>>16&255),be(le,k.total_in>>24&255)):(Be(le,k.adler>>>16),Be(le,65535&k.adler)),oe(k),0<le.wrap&&(le.wrap=-le.wrap),le.pending!==0?m:1)},i.deflateEnd=function(k){var De;return k&&k.state?(De=k.state.status)!==I&&De!==69&&De!==73&&De!==91&&De!==103&&De!==q&&De!==666?O(k,g):(k.state=null,De===q?O(k,-3):m):g},i.deflateSetDictionary=function(k,De){var we,le,ne,fe,He,ae,Y,_e,Fe=De.length;if(!k||!k.state||(fe=(we=k.state).wrap)===2||fe===1&&we.status!==I||we.lookahead)return g;for(fe===1&&(k.adler=l(k.adler,De,Fe,0)),we.wrap=0,Fe>=we.w_size&&(fe===0&&(re(we.head),we.strstart=0,we.block_start=0,we.insert=0),_e=new o.Buf8(we.w_size),o.arraySet(_e,De,Fe-we.w_size,we.w_size,0),De=_e,Fe=we.w_size),He=k.avail_in,ae=k.next_in,Y=k.input,k.avail_in=Fe,k.next_in=0,k.input=De,ye(we);we.lookahead>=te;){for(le=we.strstart,ne=we.lookahead-(te-1);we.ins_h=(we.ins_h<<we.hash_shift^we.window[le+te-1])&we.hash_mask,we.prev[le&we.w_mask]=we.head[we.ins_h],we.head[we.ins_h]=le,le++,--ne;);we.strstart=le,we.lookahead=te-1,ye(we)}return we.strstart+=we.lookahead,we.block_start=we.strstart,we.insert=we.lookahead,we.lookahead=0,we.match_length=we.prev_length=te-1,we.match_available=0,k.next_in=ae,k.input=Y,k.avail_in=He,we.wrap=fe,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,i){r.exports=function(a,o){var s,l,c,d,h,f,m,g,x,E,_,v,C,D,V,H,R,j,te,$,z,I,q,P,ee;s=a.state,l=a.next_in,P=a.input,c=l+(a.avail_in-5),d=a.next_out,ee=a.output,h=d-(o-a.avail_out),f=d+(a.avail_out-257),m=s.dmax,g=s.wsize,x=s.whave,E=s.wnext,_=s.window,v=s.hold,C=s.bits,D=s.lencode,V=s.distcode,H=(1<<s.lenbits)-1,R=(1<<s.distbits)-1;e:do{C<15&&(v+=P[l++]<<C,C+=8,v+=P[l++]<<C,C+=8),j=D[v&H];t:for(;;){if(v>>>=te=j>>>24,C-=te,(te=j>>>16&255)===0)ee[d++]=65535&j;else{if(!(16&te)){if((64&te)==0){j=D[(65535&j)+(v&(1<<te)-1)];continue t}if(32&te){s.mode=12;break e}a.msg="invalid literal/length code",s.mode=30;break e}$=65535&j,(te&=15)&&(C<te&&(v+=P[l++]<<C,C+=8),$+=v&(1<<te)-1,v>>>=te,C-=te),C<15&&(v+=P[l++]<<C,C+=8,v+=P[l++]<<C,C+=8),j=V[v&R];n:for(;;){if(v>>>=te=j>>>24,C-=te,!(16&(te=j>>>16&255))){if((64&te)==0){j=V[(65535&j)+(v&(1<<te)-1)];continue n}a.msg="invalid distance code",s.mode=30;break e}if(z=65535&j,C<(te&=15)&&(v+=P[l++]<<C,(C+=8)<te&&(v+=P[l++]<<C,C+=8)),m<(z+=v&(1<<te)-1)){a.msg="invalid distance too far back",s.mode=30;break e}if(v>>>=te,C-=te,(te=d-h)<z){if(x<(te=z-te)&&s.sane){a.msg="invalid distance too far back",s.mode=30;break e}if(q=_,(I=0)===E){if(I+=g-te,te<$){for($-=te;ee[d++]=_[I++],--te;);I=d-z,q=ee}}else if(E<te){if(I+=g+E-te,(te-=E)<$){for($-=te;ee[d++]=_[I++],--te;);if(I=0,E<$){for($-=te=E;ee[d++]=_[I++],--te;);I=d-z,q=ee}}}else if(I+=E-te,te<$){for($-=te;ee[d++]=_[I++],--te;);I=d-z,q=ee}for(;2<$;)ee[d++]=q[I++],ee[d++]=q[I++],ee[d++]=q[I++],$-=3;$&&(ee[d++]=q[I++],1<$&&(ee[d++]=q[I++]))}else{for(I=d-z;ee[d++]=ee[I++],ee[d++]=ee[I++],ee[d++]=ee[I++],2<($-=3););$&&(ee[d++]=ee[I++],1<$&&(ee[d++]=ee[I++]))}break}}break}}while(l<c&&d<f);l-=$=C>>3,v&=(1<<(C-=$<<3))-1,a.next_in=l,a.next_out=d,a.avail_in=l<c?c-l+5:5-(l-c),a.avail_out=d<f?f-d+257:257-(d-f),s.hold=v,s.bits=C}},{}],49:[function(t,r,i){var a=t("../utils/common"),o=t("./adler32"),s=t("./crc32"),l=t("./inffast"),c=t("./inftrees"),d=1,h=2,f=0,m=-2,g=1,x=852,E=592;function _(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(I){var q;return I&&I.state?(q=I.state,I.total_in=I.total_out=q.total=0,I.msg="",q.wrap&&(I.adler=1&q.wrap),q.mode=g,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new a.Buf32(x),q.distcode=q.distdyn=new a.Buf32(E),q.sane=1,q.back=-1,f):m}function D(I){var q;return I&&I.state?((q=I.state).wsize=0,q.whave=0,q.wnext=0,C(I)):m}function V(I,q){var P,ee;return I&&I.state?(ee=I.state,q<0?(P=0,q=-q):(P=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?m:(ee.window!==null&&ee.wbits!==q&&(ee.window=null),ee.wrap=P,ee.wbits=q,D(I))):m}function H(I,q){var P,ee;return I?(ee=new v,(I.state=ee).window=null,(P=V(I,q))!==f&&(I.state=null),P):m}var R,j,te=!0;function $(I){if(te){var q;for(R=new a.Buf32(512),j=new a.Buf32(32),q=0;q<144;)I.lens[q++]=8;for(;q<256;)I.lens[q++]=9;for(;q<280;)I.lens[q++]=7;for(;q<288;)I.lens[q++]=8;for(c(d,I.lens,0,288,R,0,I.work,{bits:9}),q=0;q<32;)I.lens[q++]=5;c(h,I.lens,0,32,j,0,I.work,{bits:5}),te=!1}I.lencode=R,I.lenbits=9,I.distcode=j,I.distbits=5}function z(I,q,P,ee){var ce,U=I.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new a.Buf8(U.wsize)),ee>=U.wsize?(a.arraySet(U.window,q,P-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(ee<(ce=U.wsize-U.wnext)&&(ce=ee),a.arraySet(U.window,q,P-ee,ce,U.wnext),(ee-=ce)?(a.arraySet(U.window,q,P-ee,ee,0),U.wnext=ee,U.whave=U.wsize):(U.wnext+=ce,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=ce))),0}i.inflateReset=D,i.inflateReset2=V,i.inflateResetKeep=C,i.inflateInit=function(I){return H(I,15)},i.inflateInit2=H,i.inflate=function(I,q){var P,ee,ce,U,O,G,re,oe,se,be,Be,Te,ye,We,at,Ke,tt,lt,Ie,Ue,k,De,we,le,ne=0,fe=new a.Buf8(4),He=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return m;(P=I.state).mode===12&&(P.mode=13),O=I.next_out,ce=I.output,re=I.avail_out,U=I.next_in,ee=I.input,G=I.avail_in,oe=P.hold,se=P.bits,be=G,Be=re,De=f;e:for(;;)switch(P.mode){case g:if(P.wrap===0){P.mode=13;break}for(;se<16;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}if(2&P.wrap&&oe===35615){fe[P.check=0]=255&oe,fe[1]=oe>>>8&255,P.check=s(P.check,fe,2,0),se=oe=0,P.mode=2;break}if(P.flags=0,P.head&&(P.head.done=!1),!(1&P.wrap)||(((255&oe)<<8)+(oe>>8))%31){I.msg="incorrect header check",P.mode=30;break}if((15&oe)!=8){I.msg="unknown compression method",P.mode=30;break}if(se-=4,k=8+(15&(oe>>>=4)),P.wbits===0)P.wbits=k;else if(k>P.wbits){I.msg="invalid window size",P.mode=30;break}P.dmax=1<<k,I.adler=P.check=1,P.mode=512&oe?10:12,se=oe=0;break;case 2:for(;se<16;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}if(P.flags=oe,(255&P.flags)!=8){I.msg="unknown compression method",P.mode=30;break}if(57344&P.flags){I.msg="unknown header flags set",P.mode=30;break}P.head&&(P.head.text=oe>>8&1),512&P.flags&&(fe[0]=255&oe,fe[1]=oe>>>8&255,P.check=s(P.check,fe,2,0)),se=oe=0,P.mode=3;case 3:for(;se<32;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}P.head&&(P.head.time=oe),512&P.flags&&(fe[0]=255&oe,fe[1]=oe>>>8&255,fe[2]=oe>>>16&255,fe[3]=oe>>>24&255,P.check=s(P.check,fe,4,0)),se=oe=0,P.mode=4;case 4:for(;se<16;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}P.head&&(P.head.xflags=255&oe,P.head.os=oe>>8),512&P.flags&&(fe[0]=255&oe,fe[1]=oe>>>8&255,P.check=s(P.check,fe,2,0)),se=oe=0,P.mode=5;case 5:if(1024&P.flags){for(;se<16;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}P.length=oe,P.head&&(P.head.extra_len=oe),512&P.flags&&(fe[0]=255&oe,fe[1]=oe>>>8&255,P.check=s(P.check,fe,2,0)),se=oe=0}else P.head&&(P.head.extra=null);P.mode=6;case 6:if(1024&P.flags&&(G<(Te=P.length)&&(Te=G),Te&&(P.head&&(k=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),a.arraySet(P.head.extra,ee,U,Te,k)),512&P.flags&&(P.check=s(P.check,ee,Te,U)),G-=Te,U+=Te,P.length-=Te),P.length))break e;P.length=0,P.mode=7;case 7:if(2048&P.flags){if(G===0)break e;for(Te=0;k=ee[U+Te++],P.head&&k&&P.length<65536&&(P.head.name+=String.fromCharCode(k)),k&&Te<G;);if(512&P.flags&&(P.check=s(P.check,ee,Te,U)),G-=Te,U+=Te,k)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=8;case 8:if(4096&P.flags){if(G===0)break e;for(Te=0;k=ee[U+Te++],P.head&&k&&P.length<65536&&(P.head.comment+=String.fromCharCode(k)),k&&Te<G;);if(512&P.flags&&(P.check=s(P.check,ee,Te,U)),G-=Te,U+=Te,k)break e}else P.head&&(P.head.comment=null);P.mode=9;case 9:if(512&P.flags){for(;se<16;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}if(oe!==(65535&P.check)){I.msg="header crc mismatch",P.mode=30;break}se=oe=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),I.adler=P.check=0,P.mode=12;break;case 10:for(;se<32;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}I.adler=P.check=_(oe),se=oe=0,P.mode=11;case 11:if(P.havedict===0)return I.next_out=O,I.avail_out=re,I.next_in=U,I.avail_in=G,P.hold=oe,P.bits=se,2;I.adler=P.check=1,P.mode=12;case 12:if(q===5||q===6)break e;case 13:if(P.last){oe>>>=7&se,se-=7&se,P.mode=27;break}for(;se<3;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}switch(P.last=1&oe,se-=1,3&(oe>>>=1)){case 0:P.mode=14;break;case 1:if($(P),P.mode=20,q!==6)break;oe>>>=2,se-=2;break e;case 2:P.mode=17;break;case 3:I.msg="invalid block type",P.mode=30}oe>>>=2,se-=2;break;case 14:for(oe>>>=7&se,se-=7&se;se<32;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}if((65535&oe)!=(oe>>>16^65535)){I.msg="invalid stored block lengths",P.mode=30;break}if(P.length=65535&oe,se=oe=0,P.mode=15,q===6)break e;case 15:P.mode=16;case 16:if(Te=P.length){if(G<Te&&(Te=G),re<Te&&(Te=re),Te===0)break e;a.arraySet(ce,ee,U,Te,O),G-=Te,U+=Te,re-=Te,O+=Te,P.length-=Te;break}P.mode=12;break;case 17:for(;se<14;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}if(P.nlen=257+(31&oe),oe>>>=5,se-=5,P.ndist=1+(31&oe),oe>>>=5,se-=5,P.ncode=4+(15&oe),oe>>>=4,se-=4,286<P.nlen||30<P.ndist){I.msg="too many length or distance symbols",P.mode=30;break}P.have=0,P.mode=18;case 18:for(;P.have<P.ncode;){for(;se<3;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}P.lens[He[P.have++]]=7&oe,oe>>>=3,se-=3}for(;P.have<19;)P.lens[He[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,we={bits:P.lenbits},De=c(0,P.lens,0,19,P.lencode,0,P.work,we),P.lenbits=we.bits,De){I.msg="invalid code lengths set",P.mode=30;break}P.have=0,P.mode=19;case 19:for(;P.have<P.nlen+P.ndist;){for(;Ke=(ne=P.lencode[oe&(1<<P.lenbits)-1])>>>16&255,tt=65535&ne,!((at=ne>>>24)<=se);){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}if(tt<16)oe>>>=at,se-=at,P.lens[P.have++]=tt;else{if(tt===16){for(le=at+2;se<le;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}if(oe>>>=at,se-=at,P.have===0){I.msg="invalid bit length repeat",P.mode=30;break}k=P.lens[P.have-1],Te=3+(3&oe),oe>>>=2,se-=2}else if(tt===17){for(le=at+3;se<le;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}se-=at,k=0,Te=3+(7&(oe>>>=at)),oe>>>=3,se-=3}else{for(le=at+7;se<le;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}se-=at,k=0,Te=11+(127&(oe>>>=at)),oe>>>=7,se-=7}if(P.have+Te>P.nlen+P.ndist){I.msg="invalid bit length repeat",P.mode=30;break}for(;Te--;)P.lens[P.have++]=k}}if(P.mode===30)break;if(P.lens[256]===0){I.msg="invalid code -- missing end-of-block",P.mode=30;break}if(P.lenbits=9,we={bits:P.lenbits},De=c(d,P.lens,0,P.nlen,P.lencode,0,P.work,we),P.lenbits=we.bits,De){I.msg="invalid literal/lengths set",P.mode=30;break}if(P.distbits=6,P.distcode=P.distdyn,we={bits:P.distbits},De=c(h,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,we),P.distbits=we.bits,De){I.msg="invalid distances set",P.mode=30;break}if(P.mode=20,q===6)break e;case 20:P.mode=21;case 21:if(6<=G&&258<=re){I.next_out=O,I.avail_out=re,I.next_in=U,I.avail_in=G,P.hold=oe,P.bits=se,l(I,Be),O=I.next_out,ce=I.output,re=I.avail_out,U=I.next_in,ee=I.input,G=I.avail_in,oe=P.hold,se=P.bits,P.mode===12&&(P.back=-1);break}for(P.back=0;Ke=(ne=P.lencode[oe&(1<<P.lenbits)-1])>>>16&255,tt=65535&ne,!((at=ne>>>24)<=se);){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}if(Ke&&(240&Ke)==0){for(lt=at,Ie=Ke,Ue=tt;Ke=(ne=P.lencode[Ue+((oe&(1<<lt+Ie)-1)>>lt)])>>>16&255,tt=65535&ne,!(lt+(at=ne>>>24)<=se);){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}oe>>>=lt,se-=lt,P.back+=lt}if(oe>>>=at,se-=at,P.back+=at,P.length=tt,Ke===0){P.mode=26;break}if(32&Ke){P.back=-1,P.mode=12;break}if(64&Ke){I.msg="invalid literal/length code",P.mode=30;break}P.extra=15&Ke,P.mode=22;case 22:if(P.extra){for(le=P.extra;se<le;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}P.length+=oe&(1<<P.extra)-1,oe>>>=P.extra,se-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=23;case 23:for(;Ke=(ne=P.distcode[oe&(1<<P.distbits)-1])>>>16&255,tt=65535&ne,!((at=ne>>>24)<=se);){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}if((240&Ke)==0){for(lt=at,Ie=Ke,Ue=tt;Ke=(ne=P.distcode[Ue+((oe&(1<<lt+Ie)-1)>>lt)])>>>16&255,tt=65535&ne,!(lt+(at=ne>>>24)<=se);){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}oe>>>=lt,se-=lt,P.back+=lt}if(oe>>>=at,se-=at,P.back+=at,64&Ke){I.msg="invalid distance code",P.mode=30;break}P.offset=tt,P.extra=15&Ke,P.mode=24;case 24:if(P.extra){for(le=P.extra;se<le;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}P.offset+=oe&(1<<P.extra)-1,oe>>>=P.extra,se-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){I.msg="invalid distance too far back",P.mode=30;break}P.mode=25;case 25:if(re===0)break e;if(Te=Be-re,P.offset>Te){if((Te=P.offset-Te)>P.whave&&P.sane){I.msg="invalid distance too far back",P.mode=30;break}ye=Te>P.wnext?(Te-=P.wnext,P.wsize-Te):P.wnext-Te,Te>P.length&&(Te=P.length),We=P.window}else We=ce,ye=O-P.offset,Te=P.length;for(re<Te&&(Te=re),re-=Te,P.length-=Te;ce[O++]=We[ye++],--Te;);P.length===0&&(P.mode=21);break;case 26:if(re===0)break e;ce[O++]=P.length,re--,P.mode=21;break;case 27:if(P.wrap){for(;se<32;){if(G===0)break e;G--,oe|=ee[U++]<<se,se+=8}if(Be-=re,I.total_out+=Be,P.total+=Be,Be&&(I.adler=P.check=P.flags?s(P.check,ce,Be,O-Be):o(P.check,ce,Be,O-Be)),Be=re,(P.flags?oe:_(oe))!==P.check){I.msg="incorrect data check",P.mode=30;break}se=oe=0}P.mode=28;case 28:if(P.wrap&&P.flags){for(;se<32;){if(G===0)break e;G--,oe+=ee[U++]<<se,se+=8}if(oe!==(4294967295&P.total)){I.msg="incorrect length check",P.mode=30;break}se=oe=0}P.mode=29;case 29:De=1;break e;case 30:De=-3;break e;case 31:return-4;case 32:default:return m}return I.next_out=O,I.avail_out=re,I.next_in=U,I.avail_in=G,P.hold=oe,P.bits=se,(P.wsize||Be!==I.avail_out&&P.mode<30&&(P.mode<27||q!==4))&&z(I,I.output,I.next_out,Be-I.avail_out)?(P.mode=31,-4):(be-=I.avail_in,Be-=I.avail_out,I.total_in+=be,I.total_out+=Be,P.total+=Be,P.wrap&&Be&&(I.adler=P.check=P.flags?s(P.check,ce,Be,I.next_out-Be):o(P.check,ce,Be,I.next_out-Be)),I.data_type=P.bits+(P.last?64:0)+(P.mode===12?128:0)+(P.mode===20||P.mode===15?256:0),(be==0&&Be===0||q===4)&&De===f&&(De=-5),De)},i.inflateEnd=function(I){if(!I||!I.state)return m;var q=I.state;return q.window&&(q.window=null),I.state=null,f},i.inflateGetHeader=function(I,q){var P;return I&&I.state?(2&(P=I.state).wrap)==0?m:((P.head=q).done=!1,f):m},i.inflateSetDictionary=function(I,q){var P,ee=q.length;return I&&I.state?(P=I.state).wrap!==0&&P.mode!==11?m:P.mode===11&&o(1,q,ee,0)!==P.check?-3:z(I,q,ee,ee)?(P.mode=31,-4):(P.havedict=1,f):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var a=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,f,m,g,x,E,_){var v,C,D,V,H,R,j,te,$,z=_.bits,I=0,q=0,P=0,ee=0,ce=0,U=0,O=0,G=0,re=0,oe=0,se=null,be=0,Be=new a.Buf16(16),Te=new a.Buf16(16),ye=null,We=0;for(I=0;I<=15;I++)Be[I]=0;for(q=0;q<m;q++)Be[h[f+q]]++;for(ce=z,ee=15;1<=ee&&Be[ee]===0;ee--);if(ee<ce&&(ce=ee),ee===0)return g[x++]=20971520,g[x++]=20971520,_.bits=1,0;for(P=1;P<ee&&Be[P]===0;P++);for(ce<P&&(ce=P),I=G=1;I<=15;I++)if(G<<=1,(G-=Be[I])<0)return-1;if(0<G&&(d===0||ee!==1))return-1;for(Te[1]=0,I=1;I<15;I++)Te[I+1]=Te[I]+Be[I];for(q=0;q<m;q++)h[f+q]!==0&&(E[Te[h[f+q]]++]=q);if(R=d===0?(se=ye=E,19):d===1?(se=o,be-=257,ye=s,We-=257,256):(se=l,ye=c,-1),I=P,H=x,O=q=oe=0,D=-1,V=(re=1<<(U=ce))-1,d===1&&852<re||d===2&&592<re)return 1;for(;;){for(j=I-O,$=E[q]<R?(te=0,E[q]):E[q]>R?(te=ye[We+E[q]],se[be+E[q]]):(te=96,0),v=1<<I-O,P=C=1<<U;g[H+(oe>>O)+(C-=v)]=j<<24|te<<16|$|0,C!==0;);for(v=1<<I-1;oe&v;)v>>=1;if(v!==0?(oe&=v-1,oe+=v):oe=0,q++,--Be[I]==0){if(I===ee)break;I=h[f+E[q]]}if(ce<I&&(oe&V)!==D){for(O===0&&(O=ce),H+=P,G=1<<(U=I-O);U+O<ee&&!((G-=Be[U+O])<=0);)U++,G<<=1;if(re+=1<<U,d===1&&852<re||d===2&&592<re)return 1;g[D=oe&V]=ce<<24|U<<16|H-x|0}}return oe!==0&&(g[H+oe]=I-O<<24|64<<16|0),_.bits=ce,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var a=t("../utils/common"),o=0,s=1;function l(ne){for(var fe=ne.length;0<=--fe;)ne[fe]=0}var c=0,d=29,h=256,f=h+1+d,m=30,g=19,x=2*f+1,E=15,_=16,v=7,C=256,D=16,V=17,H=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(2*(f+2));l(z);var I=new Array(2*m);l(I);var q=new Array(512);l(q);var P=new Array(256);l(P);var ee=new Array(d);l(ee);var ce,U,O,G=new Array(m);function re(ne,fe,He,ae,Y){this.static_tree=ne,this.extra_bits=fe,this.extra_base=He,this.elems=ae,this.max_length=Y,this.has_stree=ne&&ne.length}function oe(ne,fe){this.dyn_tree=ne,this.max_code=0,this.stat_desc=fe}function se(ne){return ne<256?q[ne]:q[256+(ne>>>7)]}function be(ne,fe){ne.pending_buf[ne.pending++]=255&fe,ne.pending_buf[ne.pending++]=fe>>>8&255}function Be(ne,fe,He){ne.bi_valid>_-He?(ne.bi_buf|=fe<<ne.bi_valid&65535,be(ne,ne.bi_buf),ne.bi_buf=fe>>_-ne.bi_valid,ne.bi_valid+=He-_):(ne.bi_buf|=fe<<ne.bi_valid&65535,ne.bi_valid+=He)}function Te(ne,fe,He){Be(ne,He[2*fe],He[2*fe+1])}function ye(ne,fe){for(var He=0;He|=1&ne,ne>>>=1,He<<=1,0<--fe;);return He>>>1}function We(ne,fe,He){var ae,Y,_e=new Array(E+1),Fe=0;for(ae=1;ae<=E;ae++)_e[ae]=Fe=Fe+He[ae-1]<<1;for(Y=0;Y<=fe;Y++){var Le=ne[2*Y+1];Le!==0&&(ne[2*Y]=ye(_e[Le]++,Le))}}function at(ne){var fe;for(fe=0;fe<f;fe++)ne.dyn_ltree[2*fe]=0;for(fe=0;fe<m;fe++)ne.dyn_dtree[2*fe]=0;for(fe=0;fe<g;fe++)ne.bl_tree[2*fe]=0;ne.dyn_ltree[2*C]=1,ne.opt_len=ne.static_len=0,ne.last_lit=ne.matches=0}function Ke(ne){8<ne.bi_valid?be(ne,ne.bi_buf):0<ne.bi_valid&&(ne.pending_buf[ne.pending++]=ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0}function tt(ne,fe,He,ae){var Y=2*fe,_e=2*He;return ne[Y]<ne[_e]||ne[Y]===ne[_e]&&ae[fe]<=ae[He]}function lt(ne,fe,He){for(var ae=ne.heap[He],Y=He<<1;Y<=ne.heap_len&&(Y<ne.heap_len&&tt(fe,ne.heap[Y+1],ne.heap[Y],ne.depth)&&Y++,!tt(fe,ae,ne.heap[Y],ne.depth));)ne.heap[He]=ne.heap[Y],He=Y,Y<<=1;ne.heap[He]=ae}function Ie(ne,fe,He){var ae,Y,_e,Fe,Le=0;if(ne.last_lit!==0)for(;ae=ne.pending_buf[ne.d_buf+2*Le]<<8|ne.pending_buf[ne.d_buf+2*Le+1],Y=ne.pending_buf[ne.l_buf+Le],Le++,ae===0?Te(ne,Y,fe):(Te(ne,(_e=P[Y])+h+1,fe),(Fe=R[_e])!==0&&Be(ne,Y-=ee[_e],Fe),Te(ne,_e=se(--ae),He),(Fe=j[_e])!==0&&Be(ne,ae-=G[_e],Fe)),Le<ne.last_lit;);Te(ne,C,fe)}function Ue(ne,fe){var He,ae,Y,_e=fe.dyn_tree,Fe=fe.stat_desc.static_tree,Le=fe.stat_desc.has_stree,Re=fe.stat_desc.elems,rt=-1;for(ne.heap_len=0,ne.heap_max=x,He=0;He<Re;He++)_e[2*He]!==0?(ne.heap[++ne.heap_len]=rt=He,ne.depth[He]=0):_e[2*He+1]=0;for(;ne.heap_len<2;)_e[2*(Y=ne.heap[++ne.heap_len]=rt<2?++rt:0)]=1,ne.depth[Y]=0,ne.opt_len--,Le&&(ne.static_len-=Fe[2*Y+1]);for(fe.max_code=rt,He=ne.heap_len>>1;1<=He;He--)lt(ne,_e,He);for(Y=Re;He=ne.heap[1],ne.heap[1]=ne.heap[ne.heap_len--],lt(ne,_e,1),ae=ne.heap[1],ne.heap[--ne.heap_max]=He,ne.heap[--ne.heap_max]=ae,_e[2*Y]=_e[2*He]+_e[2*ae],ne.depth[Y]=(ne.depth[He]>=ne.depth[ae]?ne.depth[He]:ne.depth[ae])+1,_e[2*He+1]=_e[2*ae+1]=Y,ne.heap[1]=Y++,lt(ne,_e,1),2<=ne.heap_len;);ne.heap[--ne.heap_max]=ne.heap[1],function(Ee,ve){var $e,gt,St,Ce,Ft,ht,Nt=ve.dyn_tree,Je=ve.max_code,mt=ve.stat_desc.static_tree,Wt=ve.stat_desc.has_stree,_t=ve.stat_desc.extra_bits,a0=ve.stat_desc.extra_base,v0=ve.stat_desc.max_length,M0=0;for(Ce=0;Ce<=E;Ce++)Ee.bl_count[Ce]=0;for(Nt[2*Ee.heap[Ee.heap_max]+1]=0,$e=Ee.heap_max+1;$e<x;$e++)v0<(Ce=Nt[2*Nt[2*(gt=Ee.heap[$e])+1]+1]+1)&&(Ce=v0,M0++),Nt[2*gt+1]=Ce,Je<gt||(Ee.bl_count[Ce]++,Ft=0,a0<=gt&&(Ft=_t[gt-a0]),ht=Nt[2*gt],Ee.opt_len+=ht*(Ce+Ft),Wt&&(Ee.static_len+=ht*(mt[2*gt+1]+Ft)));if(M0!==0){do{for(Ce=v0-1;Ee.bl_count[Ce]===0;)Ce--;Ee.bl_count[Ce]--,Ee.bl_count[Ce+1]+=2,Ee.bl_count[v0]--,M0-=2}while(0<M0);for(Ce=v0;Ce!==0;Ce--)for(gt=Ee.bl_count[Ce];gt!==0;)Je<(St=Ee.heap[--$e])||(Nt[2*St+1]!==Ce&&(Ee.opt_len+=(Ce-Nt[2*St+1])*Nt[2*St],Nt[2*St+1]=Ce),gt--)}}(ne,fe),We(_e,rt,ne.bl_count)}function k(ne,fe,He){var ae,Y,_e=-1,Fe=fe[1],Le=0,Re=7,rt=4;for(Fe===0&&(Re=138,rt=3),fe[2*(He+1)+1]=65535,ae=0;ae<=He;ae++)Y=Fe,Fe=fe[2*(ae+1)+1],++Le<Re&&Y===Fe||(Le<rt?ne.bl_tree[2*Y]+=Le:Y!==0?(Y!==_e&&ne.bl_tree[2*Y]++,ne.bl_tree[2*D]++):Le<=10?ne.bl_tree[2*V]++:ne.bl_tree[2*H]++,_e=Y,rt=(Le=0)===Fe?(Re=138,3):Y===Fe?(Re=6,3):(Re=7,4))}function De(ne,fe,He){var ae,Y,_e=-1,Fe=fe[1],Le=0,Re=7,rt=4;for(Fe===0&&(Re=138,rt=3),ae=0;ae<=He;ae++)if(Y=Fe,Fe=fe[2*(ae+1)+1],!(++Le<Re&&Y===Fe)){if(Le<rt)for(;Te(ne,Y,ne.bl_tree),--Le!=0;);else Y!==0?(Y!==_e&&(Te(ne,Y,ne.bl_tree),Le--),Te(ne,D,ne.bl_tree),Be(ne,Le-3,2)):Le<=10?(Te(ne,V,ne.bl_tree),Be(ne,Le-3,3)):(Te(ne,H,ne.bl_tree),Be(ne,Le-11,7));_e=Y,rt=(Le=0)===Fe?(Re=138,3):Y===Fe?(Re=6,3):(Re=7,4)}}l(G);var we=!1;function le(ne,fe,He,ae){Be(ne,(c<<1)+(ae?1:0),3),function(Y,_e,Fe,Le){Ke(Y),Le&&(be(Y,Fe),be(Y,~Fe)),a.arraySet(Y.pending_buf,Y.window,_e,Fe,Y.pending),Y.pending+=Fe}(ne,fe,He,!0)}i._tr_init=function(ne){we||(function(){var fe,He,ae,Y,_e,Fe=new Array(E+1);for(Y=ae=0;Y<d-1;Y++)for(ee[Y]=ae,fe=0;fe<1<<R[Y];fe++)P[ae++]=Y;for(P[ae-1]=Y,Y=_e=0;Y<16;Y++)for(G[Y]=_e,fe=0;fe<1<<j[Y];fe++)q[_e++]=Y;for(_e>>=7;Y<m;Y++)for(G[Y]=_e<<7,fe=0;fe<1<<j[Y]-7;fe++)q[256+_e++]=Y;for(He=0;He<=E;He++)Fe[He]=0;for(fe=0;fe<=143;)z[2*fe+1]=8,fe++,Fe[8]++;for(;fe<=255;)z[2*fe+1]=9,fe++,Fe[9]++;for(;fe<=279;)z[2*fe+1]=7,fe++,Fe[7]++;for(;fe<=287;)z[2*fe+1]=8,fe++,Fe[8]++;for(We(z,f+1,Fe),fe=0;fe<m;fe++)I[2*fe+1]=5,I[2*fe]=ye(fe,5);ce=new re(z,R,h+1,f,E),U=new re(I,j,0,m,E),O=new re(new Array(0),te,0,g,v)}(),we=!0),ne.l_desc=new oe(ne.dyn_ltree,ce),ne.d_desc=new oe(ne.dyn_dtree,U),ne.bl_desc=new oe(ne.bl_tree,O),ne.bi_buf=0,ne.bi_valid=0,at(ne)},i._tr_stored_block=le,i._tr_flush_block=function(ne,fe,He,ae){var Y,_e,Fe=0;0<ne.level?(ne.strm.data_type===2&&(ne.strm.data_type=function(Le){var Re,rt=4093624447;for(Re=0;Re<=31;Re++,rt>>>=1)if(1&rt&&Le.dyn_ltree[2*Re]!==0)return o;if(Le.dyn_ltree[18]!==0||Le.dyn_ltree[20]!==0||Le.dyn_ltree[26]!==0)return s;for(Re=32;Re<h;Re++)if(Le.dyn_ltree[2*Re]!==0)return s;return o}(ne)),Ue(ne,ne.l_desc),Ue(ne,ne.d_desc),Fe=function(Le){var Re;for(k(Le,Le.dyn_ltree,Le.l_desc.max_code),k(Le,Le.dyn_dtree,Le.d_desc.max_code),Ue(Le,Le.bl_desc),Re=g-1;3<=Re&&Le.bl_tree[2*$[Re]+1]===0;Re--);return Le.opt_len+=3*(Re+1)+5+5+4,Re}(ne),Y=ne.opt_len+3+7>>>3,(_e=ne.static_len+3+7>>>3)<=Y&&(Y=_e)):Y=_e=He+5,He+4<=Y&&fe!==-1?le(ne,fe,He,ae):ne.strategy===4||_e===Y?(Be(ne,2+(ae?1:0),3),Ie(ne,z,I)):(Be(ne,4+(ae?1:0),3),function(Le,Re,rt,Ee){var ve;for(Be(Le,Re-257,5),Be(Le,rt-1,5),Be(Le,Ee-4,4),ve=0;ve<Ee;ve++)Be(Le,Le.bl_tree[2*$[ve]+1],3);De(Le,Le.dyn_ltree,Re-1),De(Le,Le.dyn_dtree,rt-1)}(ne,ne.l_desc.max_code+1,ne.d_desc.max_code+1,Fe+1),Ie(ne,ne.dyn_ltree,ne.dyn_dtree)),at(ne),ae&&Ke(ne)},i._tr_tally=function(ne,fe,He){return ne.pending_buf[ne.d_buf+2*ne.last_lit]=fe>>>8&255,ne.pending_buf[ne.d_buf+2*ne.last_lit+1]=255&fe,ne.pending_buf[ne.l_buf+ne.last_lit]=255&He,ne.last_lit++,fe===0?ne.dyn_ltree[2*He]++:(ne.matches++,fe--,ne.dyn_ltree[2*(P[He]+h+1)]++,ne.dyn_dtree[2*se(fe)]++),ne.last_lit===ne.lit_bufsize-1},i._tr_align=function(ne){Be(ne,2,3),Te(ne,C,z),function(fe){fe.bi_valid===16?(be(fe,fe.bi_buf),fe.bi_buf=0,fe.bi_valid=0):8<=fe.bi_valid&&(fe.pending_buf[fe.pending++]=255&fe.bi_buf,fe.bi_buf>>=8,fe.bi_valid-=8)}(ne)}},{"../utils/common":41}],53:[function(t,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,i){(function(a){(function(o,s){if(!o.setImmediate){var l,c,d,h,f=1,m={},g=!1,x=o.document,E=Object.getPrototypeOf&&Object.getPrototypeOf(o);E=E&&E.setTimeout?E:o,l={}.toString.call(o.process)==="[object process]"?function(D){process.nextTick(function(){v(D)})}:function(){if(o.postMessage&&!o.importScripts){var D=!0,V=o.onmessage;return o.onmessage=function(){D=!1},o.postMessage("","*"),o.onmessage=V,D}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",C,!1):o.attachEvent("onmessage",C),function(D){o.postMessage(h+D,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(D){v(D.data)},function(D){d.port2.postMessage(D)}):x&&"onreadystatechange"in x.createElement("script")?(c=x.documentElement,function(D){var V=x.createElement("script");V.onreadystatechange=function(){v(D),V.onreadystatechange=null,c.removeChild(V),V=null},c.appendChild(V)}):function(D){setTimeout(v,0,D)},E.setImmediate=function(D){typeof D!="function"&&(D=new Function(""+D));for(var V=new Array(arguments.length-1),H=0;H<V.length;H++)V[H]=arguments[H+1];var R={callback:D,args:V};return m[f]=R,l(f),f++},E.clearImmediate=_}function _(D){delete m[D]}function v(D){if(g)setTimeout(v,0,D);else{var V=m[D];if(V){g=!0;try{(function(H){var R=H.callback,j=H.args;switch(j.length){case 0:R();break;case 1:R(j[0]);break;case 2:R(j[0],j[1]);break;case 3:R(j[0],j[1],j[2]);break;default:R.apply(s,j)}})(V)}finally{_(D),g=!1}}}}function C(D){D.source===o&&typeof D.data=="string"&&D.data.indexOf(h)===0&&v(+D.data.slice(h.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof window<"u"?window:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(gU);const LD=gU.exports,$ye=[{w:10,h:12},{w:8,h:8}];function e4e(n){const e=new DataView(n);if(e.byteLength<32)return!1;const t=e.getUint32(0),r=e.getUint32(4),i=e.getUint32(8);return t>r||r>i||t===r&&t!==0||t!==12&&r!==12&&i!==12||(r-t)%2!==0?!1:!!_U(r,i,e.byteLength)}function _U(n,e,t){for(const r of $ye){const i=r.w*r.h;if(!(n>0&&(e-n)%i!==0||(t-e)%(i/2)!==0))return r}return null}function t4e(n,e,t){return!1}function n4e(n){const e=new DataView(n),t=e.getUint32(0),r=e.getUint32(4),i=e.getUint32(8),a=_U(r,i,e.byteLength);if(!a)throw new Error("Unrecongized font size");const o=a.w*a.h,s={images:[],chars:[],bpp:32,charWidth:a.w,charHeight:a.h},l=[];if(t>0){const h=(r-t)/2;for(let f=0;f<h;f++)l.push(e.getUint16(t+f*2))}if(r>0){let h=r;for(;h<i;){const f=o8(new DataView(n,h,o),l,8,16),m=Tp(f,a.w,a.h);s.images.push(m),h+=o}}const c=[0];for(let h=1;h<16;h++)c.push(Math.floor(255*((h+1)/16)));let d=i;for(;d<n.byteLength;){const h=o8(new DataView(n,d,o/2),c,4,32);s.chars.push(h),d+=o/2}return s}function r4e(n){const e=new LD,t=e.folder("mainfs"),r=dt.getDirectoryCount();for(let i=0;i<r;i++){const a=t.folder(i.toString()),o=dt.getFileCount(i);for(let s=0;s<o;s++){const l=dt.get(i,s);let c=s.toString();Or.isForm(l)?c+=".form":Ic.isMtnx(l)&&(c+=".mtnx"),a.file(c,l)}}e.generateAsync({type:"blob"}).then(n)}function i4e(n){new LD().loadAsync(n).then(t=>{t.folder("mainfs").forEach((i,a)=>{const o=/(\d+)\/(\d+)/,s=i.match(o);if(!s)return;const l=parseInt(s[1]),c=parseInt(s[2]);isNaN(l)||isNaN(c)||a.async("arraybuffer").then(d=>{wt(`Overwriting MainFS ${l}/${c}`),dt.write(l,c,d)})})},t=>{wt(t),tn(`Something went wrong while loading the zip. ${t}`)})}function a4e(){const n=new LD,e=bt.getROMGame(),t=n.folder("mainfs"),r=dt.getDirectoryCount();for(let o=0;o<r;o++){const s=t.folder(o.toString()),l=dt.getFileCount(o);for(let c=0;c<l;c++)try{const d=dt.get(o,c);if(Or.isForm(d)){try{const f=Or.unpack(d);f.BMP1.length&&f.BMP1.forEach((m,g)=>{const x=Ea(m.parsed.src,m.parsed.width,m.parsed.height);s.file(`${c}.${g}.png`,x.substr(x.indexOf(",")+1),{base64:!0})})}catch{}continue}if(o===0&&e4e(d)||t4e(e,o,c)){let f;try{f=n4e(d)}catch{}if(f){const{charWidth:m,charHeight:g}=f;let x=0;f.chars.forEach(C=>{const D=Ea(C,m,g);s.file(`${c}.${x}.png`,D.substr(D.indexOf(",")+1),{base64:!0}),x++}),f.images.forEach(C=>{const D=Ea(C,m,g);s.file(`${c}.${x}.png`,D.substr(D.indexOf(",")+1),{base64:!0}),x++});const E=f.chars.concat(f.images).map(C=>new DataView(C)),_=Mh(E,E.length,1,m*4,g),v=Ea(_,m*E.length,g);s.file(`${c}.all.png`,v.substr(v.indexOf(",")+1),{base64:!0});continue}}const h=a(o,c);if(h.forEach((f,m)=>{const g=Ea(f.src,f.width,f.height);s.file(`${c}.${m}.png`,g.substr(g.indexOf(",")+1),{base64:!0})}),h.length>1){const f=Mh(i(o,c),h.length,1,h[0].width*4,h[0].height),m=Ea(f,h[0].width*h.length,h[0].height);s.file(`${c}.all.png`,m.substr(m.indexOf(",")+1),{base64:!0})}}catch{}}n.generateAsync({type:"blob"}).then(o=>{uo.exports.saveAs(o,`mp${bt.getGameVersion()}-images.zip`)});function i(o,s){const l=dt.get(o,s),c=xc(l);return!c||!c.length?void 0:c.map(h=>new DataView(h.src))}function a(o,s){const l=dt.get(o,s),c=xc(l);if(!(!c||!c.length))return c}}function o4e(){const n=dt.getDirectoryCount();for(let e=0;e<n;e++){const t=dt.getFileCount(e);for(let r=0;r<t;r++){const i=dt.get(e,r);if(!!Or.isForm(i))try{const a=Or.unpack(i);a.BMP1.length&&a.BMP1.forEach(o=>{const s=Ea(o.parsed.src,o.parsed.width,o.parsed.height);console.log(`${e}/${r}:`),console.log(s)})}catch{}}}}function s4e(n="",e=!1){const t=Ln.getDirectoryCount("en");for(let r=0;r<t;r++){const i=Ln.getStringCount("en",r);for(let a=0;a<i;a++){const o=Ln.read("en",r,a);if(o.indexOf(n)<0)continue;let s=`${r}/${a} (${At(r)}/${At(a)}):
`+o;e&&(s+=`
`+G4(Ln.read("en",r,a,!0))),console.log(s)}}}function l4e(n="",e=!1){const t=Bt.getStringCount();for(let r=0;r<t;r++){const i=Bt.read(r);if(i.indexOf(n)<0)continue;let a=`${r} (${At(r)}):
`+i;e&&(a+=`
`+G4(Bt.read(r,!0))),console.log(a)}}function u4e(){if(!bt.romIsLoaded()){console.log("ROM is not loaded");return}const n=l0.count(),e=[];for(let t=0;t<n;t++){const r=l0.getInfo(t);e.push({i:At(t),rom_start:At(r.rom_start),rom_end:At(r.rom_end),code_start:At(r.code_start),rodata_start:At(r.rodata_start),bss_start:At(r.bss_start),bss_end:At(r.bss_end)})}console.table(e)}function c4e(){if(!bt.romIsLoaded()){console.log("ROM is not loaded");return}const n=l0.count(),e=[];for(let t=0;t<n;t++){const r=l0.getInfo(t);e.push(`   - [${At(r.rom_start)}, ${At(r.rom_start+(r.code_end-r.code_start))}, "asm", "overlay${t}_main", ${At(r.code_start)}]`),e.push(`   - [${At(r.rom_start+(r.rodata_start-r.code_start))}, ${At(r.rom_start+(r.rodata_end-r.code_start))}, "bin", "overlay${t}_rodata_bin"]`),e.push(`   # overlay${t} bss: ${At(r.bss_start)} - ${At(r.bss_end)}`)}console.log(e.join(`
`))}function d4e(){if(!bt.romIsLoaded()){console.log("ROM is not loaded");return}const n=l0.count(),e=[];for(let t=0;t<n;t++){const r=l0.getInfo(t);e.push(`  - name: overlay${t}`),e.push("    type: code"),e.push("    overlay: True"),e.push(`    start: ${At(r.rom_start)}`),e.push(`    vram: ${At(r.code_start)}`),e.push("    files:"),e.push(`      - [${At(r.rom_start)}, "asm"]`),e.push(`      - [${At(r.rom_start+(r.rodata_start-r.code_start))}, "bin"] # rodata`),e.push("")}console.log(e.join(`
`))}function A4e(n){const e=l0.getInfo(n);let t=e.code_start;const r=l0.getCodeDataView(n),i=[];for(let l=0;l<r.byteLength;l+=4){const c=r.getUint32(l);let d="? "+At(c);try{d=RH(c)}catch{console.log("UNRECOGNIZED: "+At(c))}i.push(At(t)+": "+d),t+=4}console.log(i.join(`
`));const a=l0.getRoDataView(n);let o=[];t=e.rodata_start;let s=0;for(;s<a.byteLength;)o.push("D_"+At(t,"")+": "+vc(At(a.getUint32(s),""),8,"0")),o.push("D_"+At(t+4,"")+": "+vc(At(a.getUint32(s+4),""),8,"0")),o.push("D_"+At(t+8,"")+": "+vc(At(a.getUint32(s+8),""),8,"0")),o.push("D_"+At(t+12,"")+": "+vc(At(a.getUint32(s+12),""),8,"0")),t+=16,s+=16;console.log(o.join(`
`)),o=[];for(let l=e.bss_start;l<e.bss_end;l+=4)o.push(`D_${At(l,"")}: .word 0`);console.log(o.join(`
`))}const f4e=class extends Ne.exports.Component{constructor(){super(...arguments),this.state={sceneIndex:"",sceneRamStartAddr:"",sceneCodeStartAddr:"",sceneCodeEndAddr:"",sceneRodataStartAddr:"",sceneRodataEndAddr:"",sceneBssStartAddr:"",sceneBssEndAddr:"",romToRamNumber:"",romToRamResult:"",mainfsToRomDir:"",mainfsToRomIndex:"",mainfsToRomResult:"",printStringDir:"",printStringIndex:"",findStringValue:"",printStringRaw:!1},this.onPrintSceneAsmClick=()=>{const e=parseInt(this.state.sceneIndex);isNaN(e)||A4e(e)},this.onPrintStringClick=()=>{const e=parseInt(this.state.printStringIndex,16);if(isNaN(e))return;let t;const r=this.state.printStringRaw,i=bt.getGameVersion()===3;let a;if(i){if(a=parseInt(this.state.printStringDir,16),isNaN(a))return;t=Ln.read("en",a,e,r)}else t=Bt.read(e,r);t instanceof ArrayBuffer?nG(t):console.log(t)},this.onFindStringClick=()=>{bt.getGameVersion()===3?s4e(this.state.findStringValue):l4e(this.state.findStringValue)},this.onRomToRamClick=()=>{let e="";const t=parseInt(this.state.romToRamNumber,16);if(!isNaN(t)){const r=l0.count();for(let i=0;i<r;i++){const a=l0.getInfo(i);if(a.rom_start<=t&&t<=a.rom_end){const o=t-a.rom_start;e=`RAM: ${At(a.ram_start+o,"")}
`,e+=`Overlay ${i} (${At(i)}) offset +${o} (+${At(o)})`;break}}e||(e=this.findInMainFS(t)),e||t>=4096&&(e=`RAM: ${At(fG(t))}`)}e?this.setState({romToRamResult:e}):this.setState({romToRamResult:"Unknown"})},this.onMainFSToRomClick=()=>{let e="";const t=parseInt(this.state.mainfsToRomDir,10),r=parseInt(this.state.mainfsToRomIndex,10);if(!isNaN(t)&&!isNaN(r)){let i=dt.getROMOffset();const a=dt.getDirectoryCount();i+=4,i+=4*a;for(let o=0;o<a;o++){const s=dt.getFileCount(o);i+=4,i+=4*s;for(let l=0;l<s;l++){if(i+=dt.getFileHeaderSize(o,l),o===t&&l===r){e=`ROM: ${At(i)}`;break}i+=dt.getCompressedSize(o,l),i=_0(i,2)}if(e)break}}this.setState({mainfsToRomResult:e||"Unknown"})},this.onSceneIndexChange=e=>{this.setState({sceneIndex:e.target.value});const t=parseInt(e.target.value);if(isNaN(t)){this.clearSceneValues();return}const r=l0.getInfo(t);if(!r){this.clearSceneValues();return}this.setState({sceneRamStartAddr:At(r.ram_start,"")}),this.setState({sceneCodeStartAddr:At(r.code_start,"")}),this.setState({sceneCodeEndAddr:At(r.code_end,"")}),this.setState({sceneRodataStartAddr:At(r.rodata_start,"")}),this.setState({sceneRodataEndAddr:At(r.rodata_end,"")}),this.setState({sceneBssStartAddr:At(r.bss_start,"")}),this.setState({sceneBssEndAddr:At(r.bss_end,"")})},this.onOverlayDownloadClick=()=>{const e=parseInt(this.state.sceneIndex);if(!isNaN(e)){const t=l0.getDataView(e);uo.exports.saveAs(new Blob([t]),`overlay-${e}.bin`)}},this.onOverlayReplaceClick=()=>{const e=parseInt(this.state.sceneIndex);isNaN(e)||Lo("",t=>{const r=t.target.files[0];if(!r)return;const i=new FileReader;i.onload=a=>{const o={ram_start:parseInt(this.state.sceneRamStartAddr,16),code_start:parseInt(this.state.sceneCodeStartAddr,16),code_end:parseInt(this.state.sceneCodeEndAddr,16),rodata_start:parseInt(this.state.sceneRodataStartAddr,16),rodata_end:parseInt(this.state.sceneRodataEndAddr,16),bss_start:parseInt(this.state.sceneBssStartAddr,16),bss_end:parseInt(this.state.sceneBssEndAddr,16)};l0.replace(e,i.result,o)},i.readAsArrayBuffer(r)})}}render(){const e=!!bt.getROMBuffer();let t;return e&&(t=Xe(Aa,{children:[B(ir,{onClick:h4e,children:"Import file dump"}),B(ir,{onClick:m4e,children:"Export file dump"}),B("br",{}),B("br",{}),B(ir,{onClick:a4e,children:"Dump images"}),B(ir,{onClick:o4e,children:"Print FORM images (console)"}),B("br",{}),B("br",{}),B(ir,{onClick:u4e,children:"Print scene table (console)"}),B(ir,{onClick:c4e,children:"Print scene table n64split (console)"}),B(ir,{onClick:d4e,children:"Print scene table n64splat (console)"}),B("br",{}),B("br",{}),B("input",{type:"text",placeholder:"Directory",className:"dbInputShort",value:this.state.printStringDir,onChange:r=>this.setState({printStringDir:r.target.value})}),B("input",{type:"text",placeholder:"Index",className:"dbInputShort",value:this.state.printStringIndex,onChange:r=>this.setState({printStringIndex:r.target.value})}),B(ir,{onClick:this.onPrintStringClick,children:"Print string (console)"}),B("input",{type:"checkbox",checked:this.state.printStringRaw,onChange:r=>this.setState({printStringRaw:r.target.checked})})," ",B("label",{children:"Raw?"}),B("br",{}),B("input",{type:"text",placeholder:"Search string",className:"dbInputShort",value:this.state.findStringValue,onChange:r=>this.setState({findStringValue:r.target.value})}),B(ir,{onClick:this.onFindStringClick,children:"Find string (console)"}),B("br",{}),B("br",{}),B("input",{type:"text",placeholder:"ROM Offset",className:"dbInputShort",value:this.state.romToRamNumber,onChange:r=>this.setState({romToRamNumber:r.target.value,romToRamResult:""})}),Xe(ir,{onClick:this.onRomToRamClick,children:["ROM ","->"," RAM"]}),B("br",{}),B("span",{className:"selectable dbMonospace",children:this.state.romToRamResult}),B("br",{}),B("br",{}),B("input",{type:"text",placeholder:"Directory",className:"dbInputShort",value:this.state.mainfsToRomDir,onChange:r=>this.setState({mainfsToRomDir:r.target.value,mainfsToRomResult:""})}),B("input",{type:"text",placeholder:"Index",className:"dbInputShort",value:this.state.mainfsToRomIndex,onChange:r=>this.setState({mainfsToRomIndex:r.target.value,mainfsToRomResult:""})}),Xe(ir,{onClick:this.onMainFSToRomClick,children:["MainFS ","->"," ROM"]}),B("br",{}),B("span",{className:"selectable dbMonospace",children:this.state.mainfsToRomResult}),B("br",{}),B("br",{}),B("input",{type:"text",placeholder:"Scene number",className:"dbInputShort",value:this.state.sceneIndex,onChange:this.onSceneIndexChange}),B(ir,{onClick:this.onPrintSceneAsmClick,children:"Print scene assembly (console)"}),B(ir,{onClick:this.onOverlayDownloadClick,children:"Download"}),B(ir,{onClick:this.onOverlayReplaceClick,children:"Replace"}),B("br",{}),B("table",{role:"presentation",children:Xe("tbody",{children:[B(cc,{label:"RAM start:",value:this.state.sceneRamStartAddr,onChange:this.makeSceneValueSetter("sceneRamStartAddr")}),B(cc,{label:"code start:",value:this.state.sceneCodeStartAddr,onChange:this.makeSceneValueSetter("sceneCodeStartAddr")}),B(cc,{label:"code end:",value:this.state.sceneCodeEndAddr,onChange:this.makeSceneValueSetter("sceneCodeEndAddr")}),B(cc,{label:"rodata start:",value:this.state.sceneRodataStartAddr,onChange:this.makeSceneValueSetter("sceneRodataStartAddr")}),B(cc,{label:"rodata end:",value:this.state.sceneRodataEndAddr,onChange:this.makeSceneValueSetter("sceneRodataEndAddr")}),B(cc,{label:"bss start:",value:this.state.sceneBssStartAddr,onChange:this.makeSceneValueSetter("sceneBssStartAddr")}),B(cc,{label:"bss end:",value:this.state.sceneBssEndAddr,onChange:this.makeSceneValueSetter("sceneBssEndAddr")})]})})]})),Xe("div",{id:"debugView",children:[B("h3",{children:"Debug Functionality"}),!e&&B("p",{children:"Load a ROM to access more functionality here."}),t]})}findInMainFS(e){const t=dt.getROMOffset(),r=dt.getByteLength();if(e>t&&e<t+r){let i=t;const a=dt.getDirectoryCount();for(let o=0;o<a;o++){const s=dt.getFileCount(o);for(let l=0;l<s;l++){const c=dt.getCompressedSize(o,l);if(i+=c,i>e){const d=e-(i-c);let h=`RAM: N/A
`;return h+=`MainFS ${o}/${l} (${At(o)}/${At(l)}) offset +${d} (+${At(d)})`,h}}}}return""}makeSceneValueSetter(e){return t=>{const r=parseInt(t.target.value,16);isNaN(r)||this.setState({[e]:At(r,"")})}}clearSceneValues(){this.setState({sceneRamStartAddr:""}),this.setState({sceneCodeStartAddr:""}),this.setState({sceneCodeEndAddr:""}),this.setState({sceneRodataStartAddr:""}),this.setState({sceneRodataEndAddr:""}),this.setState({sceneBssStartAddr:""}),this.setState({sceneBssEndAddr:""})}};function cc(n){return Xe("tr",{children:[B("td",{children:B("label",{children:n.label})}),B("td",{children:B("input",{type:"text",className:"dbInputShort",value:n.value,onChange:n.onChange})})]})}function h4e(){Lo(".zip",p4e)}function p4e(n){let e=n.target.files[0];if(!e)return;let t=new FileReader;t.onload=r=>{i4e(t.result)},t.readAsArrayBuffer(e)}function m4e(){io(!0),r4e(S4e)}function S4e(n){uo.exports.saveAs(n,`mp${bt.getGameVersion()}-files.zip`),io(!1)}const g4e=["setUint8","setInt8","setUint16","setInt16","setUint32","setInt32","setFloat32","setFloat64"];g4e.forEach(n=>{const e=DataView.prototype[n];DataView.prototype[n]=function(t,r){if(typeof t!="number")throw new Error(`Invalid offset in ${n}`);if(typeof r!="number")throw new Error(`Invalid value in ${n}`);e.apply(this,arguments)}});function Jg(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jg=function(e){return typeof e}:Jg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jg(n)}function BD(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function OB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function MD(n,e,t){return e&&OB(n.prototype,e),t&&OB(n,t),n}var qa={VERSION:"2.0.16",NOTES:[],HEADER_CHUNK_LENGTH:14,CIRCLE_OF_FOURTHS:["C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","Bbb","Ebb","Abb"],CIRCLE_OF_FIFTHS:["C","G","D","A","E","B","F#","C#","G#","D#","A#","E#"]},_4e=[["C"],["C#","Db"],["D"],["D#","Eb"],["E"],["F"],["F#","Gb"],["G"],["G#","Ab"],["A"],["A#","Bb"],["B"]],kB=0,x4e=function(e){_4e.forEach(function(t){t.forEach(function(r){return qa.NOTES[kB]=r+e}),kB++})};for(var Rw=-1;Rw<=9;Rw++)x4e(Rw);var wr=function(){function n(){BD(this,n)}return MD(n,null,[{key:"byteToHex",value:function(t){return("0"+t.toString(16)).slice(-2)}},{key:"bytesToHex",value:function(t){var r=[];return t.forEach(function(i){return r.push(n.byteToHex(i))}),r.join("")}},{key:"hexToNumber",value:function(t){return parseInt(t,16)}},{key:"bytesToNumber",value:function(t){return n.hexToNumber(n.bytesToHex(t))}},{key:"bytesToLetters",value:function(t){var r=[];return t.forEach(function(i){return r.push(String.fromCharCode(i))}),r.join("")}},{key:"decToBinary",value:function(t){return(t>>>0).toString(2)}},{key:"getVarIntLength",value:function(t){for(var r=t[0],i=1;r>=128;)r=t[i],i++;return i}},{key:"readVarInt",value:function(t){var r=0;return t.forEach(function(i){var a=i;a&128?(r+=a&127,r<<=7):r+=a}),r}},{key:"atob",value:function(e){function t(r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return typeof atob=="function"?atob(e):Buffer.from(e,"base64").toString("binary")})}]),n}(),v4e=function(){function n(e,t){BD(this,n),this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.index=e,this.data=t,this.delta=0,this.runningDelta=0,this.events=[];var r=this.data.subarray(this.data.length-3,this.data.length);if(!(r[0]===255&&r[1]===47&&r[2]===0))throw"Invalid MIDI file; Last three bytes of track "+this.index+"must be FF 2F 00 to mark end of track"}return MD(n,[{key:"reset",value:function(){return this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.delta=0,this.runningDelta=0,this}},{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"setEventIndexByTick",value:function(t){t=t||0;for(var r in this.events)if(this.events[r].tick>=t)return this.eventIndex=r,this}},{key:"getCurrentByte",value:function(){return this.data[this.pointer]}},{key:"getDeltaByteCount",value:function(){return wr.getVarIntLength(this.data.subarray(this.pointer))}},{key:"getDelta",value:function(){return wr.readVarInt(this.data.subarray(this.pointer,this.pointer+this.getDeltaByteCount()))}},{key:"handleEvent",value:function(t,r){if(r=r||!1,r){var i=t-this.lastTick,a=this.getDelta(),o=i>=a;if(this.pointer<this.data.length&&(r||o)){var s=this.parseEvent();if(this.enabled)return s}}else if(this.events[this.eventIndex]&&this.events[this.eventIndex].tick<=t&&(this.eventIndex++,this.enabled))return this.events[this.eventIndex-1];return null}},{key:"getStringData",value:function(t){var r=wr.getVarIntLength(this.data.subarray(t+2)),i=wr.readVarInt(this.data.subarray(t+2,t+2+r)),a=wr.bytesToLetters(this.data.subarray(t+2+r,t+2+r+i));return a}},{key:"parseEvent",value:function(){var t=this.pointer+this.getDeltaByteCount(),r={},i=this.getDeltaByteCount();if(r.track=this.index+1,r.delta=this.getDelta(),this.lastTick=this.lastTick+r.delta,this.runningDelta+=r.delta,r.tick=this.runningDelta,r.byteIndex=this.pointer,this.data[t]==255){switch(this.data[t+1]){case 0:r.name="Sequence Number";break;case 1:r.name="Text Event",r.string=this.getStringData(t);break;case 2:r.name="Copyright Notice";break;case 3:r.name="Sequence/Track Name",r.string=this.getStringData(t);break;case 4:r.name="Instrument Name",r.string=this.getStringData(t);break;case 5:r.name="Lyric",r.string=this.getStringData(t);break;case 6:r.name="Marker";break;case 7:r.name="Cue Point",r.string=this.getStringData(t);break;case 9:r.name="Device Name",r.string=this.getStringData(t);break;case 32:r.name="MIDI Channel Prefix";break;case 33:r.name="MIDI Port",r.data=wr.bytesToNumber([this.data[t+3]]);break;case 47:r.name="End of Track";break;case 81:r.name="Set Tempo",r.data=Math.round(6e7/wr.bytesToNumber(this.data.subarray(t+3,t+6))),this.tempo=r.data;break;case 84:r.name="SMTPE Offset";break;case 88:r.name="Time Signature",r.data=this.data.subarray(t+3,t+7),r.timeSignature=""+r.data[0]+"/"+Math.pow(2,r.data[1]);break;case 89:r.name="Key Signature",r.data=this.data.subarray(t+3,t+5),r.data[0]>=0?r.keySignature=qa.CIRCLE_OF_FIFTHS[r.data[0]]:r.data[0]<0&&(r.keySignature=qa.CIRCLE_OF_FOURTHS[Math.abs(r.data[0])]),r.data[1]==0?r.keySignature+=" Major":r.data[1]==1&&(r.keySignature+=" Minor");break;case 127:r.name="Sequencer-Specific Meta-event";break;default:r.name="Unknown: "+this.data[t+1].toString(16);break}var a=wr.getVarIntLength(this.data.subarray(t+2)),o=wr.readVarInt(this.data.subarray(t+2,t+2+a));this.pointer+=i+3+o}else if(this.data[t]===240){r.name="Sysex";var s=wr.getVarIntLength(this.data.subarray(t+1)),l=wr.readVarInt(this.data.subarray(t+1,t+1+s));r.data=this.data.subarray(t+1+s,t+1+s+l),this.pointer+=i+1+s+l}else if(this.data[t]===247){r.name="Sysex (escape)";var c=wr.getVarIntLength(this.data.subarray(t+1)),d=wr.readVarInt(this.data.subarray(t+1,t+1+c));r.data=this.data.subarray(t+1+c,t+1+c+d),this.pointer+=i+1+c+d}else if(this.data[t]<128)if(r.running=!0,r.noteNumber=this.data[t],r.noteName=qa.NOTES[this.data[t]],r.velocity=this.data[t+1],this.lastStatus<=143)r.name="Note off",r.channel=this.lastStatus-128+1,this.pointer+=i+2;else if(this.lastStatus<=159)r.name="Note on",r.channel=this.lastStatus-144+1,this.pointer+=i+2;else if(this.lastStatus<=175)r.name="Polyphonic Key Pressure",r.channel=this.lastStatus-160+1,r.note=qa.NOTES[this.data[t+1]],r.pressure=event[1],this.pointer+=i+2;else if(this.lastStatus<=191)r.name="Controller Change",r.channel=this.lastStatus-176+1,r.number=this.data[t+1],r.value=this.data[t+2],this.pointer+=i+2;else if(this.lastStatus<=207)r.name="Program Change",r.channel=this.lastStatus-192+1,r.value=this.data[t+1],this.pointer+=i+1;else if(this.lastStatus<=223)r.name="Channel Key Pressure",r.channel=this.lastStatus-208+1,this.pointer+=i+1;else if(this.lastStatus<=239)r.name="Pitch Bend",r.channel=this.lastStatus-224+1,r.value=this.data[t+2],this.pointer+=i+2;else throw"Unknown event (running): ".concat(this.lastStatus);else if(this.lastStatus=this.data[t],this.data[t]<=143)r.name="Note off",r.channel=this.lastStatus-128+1,r.noteNumber=this.data[t+1],r.noteName=qa.NOTES[this.data[t+1]],r.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=i+3;else if(this.data[t]<=159)r.name="Note on",r.channel=this.lastStatus-144+1,r.noteNumber=this.data[t+1],r.noteName=qa.NOTES[this.data[t+1]],r.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=i+3;else if(this.data[t]<=175)r.name="Polyphonic Key Pressure",r.channel=this.lastStatus-160+1,r.note=qa.NOTES[this.data[t+1]],r.pressure=event[2],this.pointer+=i+3;else if(this.data[t]<=191)r.name="Controller Change",r.channel=this.lastStatus-176+1,r.number=this.data[t+1],r.value=this.data[t+2],this.pointer+=i+3;else if(this.data[t]<=207)r.name="Program Change",r.channel=this.lastStatus-192+1,r.value=this.data[t+1],this.pointer+=i+2;else if(this.data[t]<=223)r.name="Channel Key Pressure",r.channel=this.lastStatus-208+1,this.pointer+=i+2;else if(this.data[t]<=239)r.name="Pitch Bend",r.channel=this.lastStatus-224+1,this.pointer+=i+3;else throw"Unknown event: ".concat(this.data[t]);return this.delta+=r.delta,this.events.push(r),r}},{key:"endOfTrack",value:function(){return this.data[this.pointer+1]==255&&this.data[this.pointer+2]==47&&this.data[this.pointer+3]==0}}]),n}();Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach});var w4e=function(){function n(e,t){BD(this,n),this.sampleRate=5,this.startTime=0,this.buffer=t||null,this.midiChunksByteLength=null,this.division,this.format,this.setIntervalId=!1,this.tracks=[],this.instruments=[],this.defaultTempo=120,this.tempo=null,this.startTick=0,this.tick=0,this.lastTick=null,this.inLoop=!1,this.totalTicks=0,this.events=[],this.totalEvents=0,this.eventListeners={},typeof e=="function"&&this.on("midiEvent",e)}return MD(n,[{key:"loadFile",value:function(t){throw"loadFile is only supported on Node.js"}},{key:"loadArrayBuffer",value:function(t){return this.buffer=new Uint8Array(t),this.fileLoaded()}},{key:"loadDataUri",value:function(t){for(var r=wr.atob(t.split(",")[1]),i=new Uint8Array(r.length),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return this.buffer=i,this.fileLoaded()}},{key:"getFilesize",value:function(){return this.buffer?this.buffer.length:0}},{key:"fileLoaded",value:function(){if(!this.validate())throw"Invalid MIDI file; should start with MThd";return this.setTempo(this.defaultTempo).getDivision().getFormat().getTracks().dryRun()}},{key:"validate",value:function(){return wr.bytesToLetters(this.buffer.subarray(0,4))==="MThd"}},{key:"getFormat",value:function(){return this.format=wr.bytesToNumber(this.buffer.subarray(8,10)),this}},{key:"getTracks",value:function(){this.tracks=[];for(var t=0;t<this.buffer.length;){if(wr.bytesToLetters(this.buffer.subarray(t,t+4))=="MTrk"){var r=wr.bytesToNumber(this.buffer.subarray(t+4,t+8));this.tracks.push(new v4e(this.tracks.length,this.buffer.subarray(t+8,t+8+r)))}t+=wr.bytesToNumber(this.buffer.subarray(t+4,t+8))+8}var i=0;return this.tracks.forEach(function(a){i+=8+a.data.length}),this.midiChunksByteLength=qa.HEADER_CHUNK_LENGTH+i,this}},{key:"enableTrack",value:function(t){return this.tracks[t-1].enable(),this}},{key:"disableTrack",value:function(t){return this.tracks[t-1].disable(),this}},{key:"getDivision",value:function(){return this.division=wr.bytesToNumber(this.buffer.subarray(12,qa.HEADER_CHUNK_LENGTH)),this}},{key:"playLoop",value:function(t){this.inLoop||(this.inLoop=!0,this.tick=this.getCurrentTick(),this.tracks.forEach(function(r,i){if(!t&&this.endOfFile())this.triggerPlayerEvent("endOfFile"),this.stop();else{var a=r.handleEvent(this.tick,t);t&&a?(a.hasOwnProperty("name")&&a.name==="Set Tempo"&&(this.defaultTempo=a.data,this.setTempo(a.data)),a.hasOwnProperty("name")&&a.name==="Program Change"&&(this.instruments.includes(a.value)||this.instruments.push(a.value))):a&&(a.hasOwnProperty("name")&&a.name==="Set Tempo"&&(this.setTempo(a.data),this.isPlaying()&&this.pause().play()),this.emitEvent(a))}},this),t||this.triggerPlayerEvent("playing",{tick:this.tick}),this.inLoop=!1)}},{key:"setTempo",value:function(t){return this.tempo=t,this}},{key:"setStartTime",value:function(t){return this.startTime=t,this}},{key:"play",value:function(){if(this.isPlaying())throw"Already playing...";return this.startTime||(this.startTime=new Date().getTime()),this.setIntervalId=setInterval(this.playLoop.bind(this),this.sampleRate),this}},{key:"loop",value:function(){setTimeout(function(){this.playLoop(),this.loop()}.bind(this),this.sampleRate)}},{key:"pause",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=this.tick,this.startTime=0,this}},{key:"stop",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=0,this.startTime=0,this.resetTracks(),this}},{key:"skipToTick",value:function(t){return this.stop(),this.startTick=t,this.tracks.forEach(function(r){r.setEventIndexByTick(t)}),this}},{key:"skipToPercent",value:function(t){if(t<0||t>100)throw"Percent must be number between 1 and 100.";return this.skipToTick(Math.round(t/100*this.totalTicks)),this}},{key:"skipToSeconds",value:function(t){var r=this.getSongTime();if(t<0||t>r)throw t+" seconds not within song time of "+r;return this.skipToPercent(t/r*100),this}},{key:"isPlaying",value:function(){return this.setIntervalId>0||Jg(this.setIntervalId)==="object"}},{key:"dryRun",value:function(){for(this.resetTracks();!this.endOfFile();)this.playLoop(!0);return this.events=this.getEvents(),this.totalEvents=this.getTotalEvents(),this.totalTicks=this.getTotalTicks(),this.startTick=0,this.startTime=0,this.resetTracks(),this.triggerPlayerEvent("fileLoaded",this),this}},{key:"resetTracks",value:function(){return this.tracks.forEach(function(t){return t.reset()}),this}},{key:"getEvents",value:function(){return this.tracks.map(function(t){return t.events})}},{key:"getTotalTicks",value:function(){return Math.max.apply(null,this.tracks.map(function(t){return t.delta}))}},{key:"getTotalEvents",value:function(){return this.tracks.reduce(function(t,r){return{events:{length:t.events.length+r.events.length}}},{events:{length:0}}).events.length}},{key:"getSongTime",value:function(){return this.totalTicks/this.division/this.tempo*60}},{key:"getSongTimeRemaining",value:function(){return Math.round((this.totalTicks-this.getCurrentTick())/this.division/this.tempo*60)}},{key:"getSongPercentRemaining",value:function(){return Math.round(this.getSongTimeRemaining()/this.getSongTime()*100)}},{key:"bytesProcessed",value:function(){return qa.HEADER_CHUNK_LENGTH+this.tracks.length*8+this.tracks.reduce(function(t,r){return{pointer:t.pointer+r.pointer}},{pointer:0}).pointer}},{key:"eventsPlayed",value:function(){return this.tracks.reduce(function(t,r){return{eventIndex:t.eventIndex+r.eventIndex}},{eventIndex:0}).eventIndex}},{key:"endOfFile",value:function(){return this.isPlaying()?this.totalTicks-this.tick<=0:this.bytesProcessed()>=this.midiChunksByteLength}},{key:"getCurrentTick",value:function(){return this.startTime?Math.round((new Date().getTime()-this.startTime)/1e3*(this.division*(this.tempo/60)))+this.startTick:this.startTick}},{key:"emitEvent",value:function(t){return this.triggerPlayerEvent("midiEvent",t),this}},{key:"on",value:function(t,r){return this.eventListeners.hasOwnProperty(t)||(this.eventListeners[t]=[]),this.eventListeners[t].push(r),this}},{key:"triggerPlayerEvent",value:function(t,r){return this.eventListeners.hasOwnProperty(t)&&this.eventListeners[t].forEach(function(i){return i(r||{})}),this}}]),n}(),y4e={Player:w4e,Utils:wr,Constants:qa};const NB=new Int16Array([0,1,2,3,4,5,6,7,-8,-7,-6,-5,-4,-3,-2,-1]);function E4e(n,e,t,r,i){const a=new Int16Array(8);let o,s,l=0,c=0,d=0,h=new Int16Array(16*r.npredictors);for(let f=0;f<8*r.order*r.npredictors;f++)h[f]=r.predictors[f];if(i){let f=Math.floor(t/5)*5;for(;f>0;){o=n.getUint8(l)>>4&15,s=n.getUint8(l)&15,s=s%r.npredictors,f--;let m=s*16;l++,jB(n,l,e,c,o,h,m,a),l+=2,f-=2,c+=16,jB(n,l,e,c,o,h,m,a),l+=2,f-=2,c+=16,d+=16}}else{let f=Math.floor(t/9)*9;for(;f>0;){o=n.getUint8(l)>>4&15,s=n.getUint8(l)&15,s=s%r.npredictors,f--;let m=s*16;l++,UB(n,l,e,c,o,h,m,a),l+=4,f-=4,c+=16,UB(n,l,e,c,o,h,m,a),l+=4,f-=4,c+=16,d+=16}}return d}function UB(n,e,t,r,i,a,o,s){let l=new Int16Array(8),c=0;const d=new DataView(t,r);let h=o+8;for(let f=0;f<8;f++)f&1?(l[f]=NB[n.getUint8(e)&15]<<i,e++):l[f]=NB[n.getUint8(e)>>4&15]<<i,l[f]=js(i+4,l[f]);for(let f=0;f<8;f++){if(c=a[o+f]*s[6],c+=a[h+f]*s[7],f>0)for(let x=f-1;x>-1;x--)c+=l[f-1-x]*a[h+x];let m=0,g=(l[f]<<11)+c>>11;g>32767?m=32767:g<-32768?m=-32768:m=g,d.setInt16(f*2,m,!0)}for(let f=0;f<8;f++)s[f]=d.getInt16(f*2,!0)}function jB(n,e,t,r,i,a,o,s){let l=new Int16Array(8),c=0;const d=new DataView(t,r);let h=o+8;l[0]=((n.getUint8(e)&192)>>6&3)<<i,l[0]=js(i+2,l[0]),l[1]=((n.getUint8(e)&48)>>4&3)<<i,l[1]=js(i+2,l[1]),l[2]=((n.getUint8(e)&12)>>2&3)<<i,l[2]=js(i+2,l[2]),l[3]=(n.getUint8(e)&3&3)<<i,e++,l[3]=js(i+2,l[3]),l[4]=((n.getUint8(e)&192)>>6&3)<<i,l[4]=js(i+2,l[4]),l[5]=((n.getUint8(e)&48)>>4&3)<<i,l[5]=js(i+2,l[5]),l[6]=((n.getUint8(e)&12)>>2&3)<<i,l[6]=js(i+2,l[6]),l[7]=(n.getUint8(e)&3&3)<<i,e++,l[7]=js(i+2,l[7]);for(let f=0;f<8;f++){if(c=a[o+f]*s[6],c+=a[h+f]*s[7],f>0)for(let x=f-1;x>-1;x--)c+=l[f-1-x]*a[h+x];let m=0,g=(l[f]<<11)+c>>11;g>32767?m=32767:g<-32768?m=-32768:m=g,d.setInt16(f*2,m,!0)}for(let f=0;f<8;f++)s[f]=d.getInt16(f*2,!0)}function js(n,e){let t=1<<n-1;return e=e&(1<<n)-1,(e^t)-t}const Lw=8,Bw=24,GB=8,HB=68;function C4e(n,e,t,r){if(t>=e.instruments.length||!e.instruments.length)throw new Error("Invalid bank instrument index"+t);const i=e.instruments[t];if(r>=i.sounds.length||!i.sounds.length)throw new Error("Invalid sound instrument index"+r);const a=i.sounds[r];return ID(n,a,e.sampleRate)}function ID(n,e,t){const r=e.wave,i=new DataView(n,r.waveBase);if(r.type===zw.AL_RAW16_WAVE){const a=Lw+4+Bw+GB+(r.waveLen-2)+HB,o=new ArrayBuffer(a),s=new DataView(o);s.setUint32(0,1380533830);const l=a-8;s.setUint32(4,l,!0),s.setUint32(8,1463899717),s.setUint32(12,1718449184),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,1,!0),s.setUint32(24,t,!0),s.setUint32(28,t*2,!0),s.setUint16(32,2,!0),s.setUint16(34,16,!0),s.setUint32(36,1684108385);const c=r.waveLen-2;s.setUint32(40,c,!0);let d=44;for(let f=0;f<c;f++,d++)s.setUint8(d,i.getUint8(f+1));s.setUint32(d,1936552044),d+=4,s.setUint32(d,60,!0),d+=4,s.setUint32(d,0),d+=4,s.setUint32(d,0),d+=4,s.setUint32(d,0),d+=4;let h=60;return e.keymap&&e.keymap.keyBase!==0&&(h=e.keymap.keyBase),s.setUint32(d,h,!0),d+=4,r.rawWave.loop!==null&&(s.setUint32(d,0),d+=4,s.setUint32(d,0),d+=4,s.setUint32(d,0),d+=4,s.setUint32(d,1,!0),d+=4,s.setUint32(d,0),d+=4,r.rawWave.loop.count>0&&(s.setUint32(d,0),d+=4,s.setUint32(d,0),d+=4,s.setUint32(d,r.rawWave.loop.start,!0),d+=4,s.setUint32(d,r.rawWave.loop.end,!0),d+=4,s.setUint32(d,0),d+=4,r.rawWave.loop.count===4294967295?s.setUint32(d,0):s.setUint32(d,r.rawWave.loop.count,!0),d+=4)),o}else if(r.type===zw.AL_ADPCM_WAVE){const a=r.adpcmWave;if(!a||!a.book)throw new Error("Cannot decode AL_ADPCM_WAVE without book");const o=new ArrayBuffer(r.waveLen*4*2),s=E4e(i,o,r.waveLen,a.book,(r.flags&48)===48),l=Lw+4+Bw+GB+s*2+HB,c=new ArrayBuffer(l),d=new DataView(c);d.setUint32(0,1380533830);const h=l-Lw;d.setUint32(4,h,!0),d.setUint32(8,1463899717),d.setUint32(12,1718449184),d.setUint32(16,Bw-8,!0),d.setUint16(20,1,!0),d.setUint16(22,1,!0),d.setUint32(24,t,!0),d.setUint32(28,t*2,!0),d.setUint16(32,2,!0),d.setUint16(34,16,!0),d.setUint32(36,1684108385);const f=s*2;d.setUint32(40,f,!0);const m=new DataView(o);let g=44;for(let E=0;E<s*2;E++,g++)d.setUint8(g,m.getUint8(E));d.setUint32(g,1936552044),g+=4,d.setUint32(g,60,!0),g+=4,d.setUint32(g,0),g+=4,d.setUint32(g,0),g+=4,d.setUint32(g,0),g+=4;let x=60;return e.keymap&&e.keymap.keyBase!==0&&(x=e.keymap.keyBase),d.setUint32(g,x,!0),g+=4,a.loop!==null&&(d.setUint32(g,0),g+=4,d.setUint32(g,0),g+=4,d.setUint32(g,0),g+=4,d.setUint32(g,1,!0),g+=4,d.setUint32(g,0),g+=4,a.loop.count>0&&(d.setUint32(g,0),g+=4,d.setUint32(g,0),g+=4,d.setUint32(g,a.loop.start,!0),g+=4,d.setUint32(g,a.loop.end,!0),g+=4,d.setUint32(g,0),g+=4,a.loop.count===4294967295?d.setUint32(g,0):d.setUint32(g,a.loop.count,!0),g+=4)),c}else throw new Error(`Unsupported wave type ${r.type}`)}let Mw,xU=!1;function OD(){return Mw||(Mw=new AudioContext),Mw}function vU(){return xU}function a_(n){xU=n}class wU{constructor(e){this._player=e,this._onFinishedCallbacks=[],this._player.on("endOfFile",()=>{this._onFinishedCallbacks.forEach(t=>t())})}stop(){this._player&&(this._player.stop(),a_(!1),this._onFinishedCallbacks.forEach(e=>e()))}addOnFinished(e){this._onFinishedCallbacks.push(e)}}function V4e(n,e){if(vU())throw new Error("Should not play more than one audio source at once.");const t=OD(),r=Rr.getSequenceTable(n);console.log(r);const i=r.midis[e].buffer,a=yk(new DataView(i),i.byteLength);wt(a);const o=[],s=[],l=r.midis[e].soundbankIndex,c=r.soundbanks.banks[l];for(let v=0;v<c.instruments.length;v++){s[v]=[];const C=c.instruments[v];for(let D=0;D<C.sounds.length;D++){const V=C.sounds[D],H=C4e(r.tbl,c,v,D),R=s[v];R.push(null);const j=R.length-1,te=C.volume,$=t.decodeAudioData(H).then(z=>{R[j]={audioBuffer:z,keymap:V.keymap,instrumentVolume:te,soundVolume:V.sampleVolume}});o.push($)}}const d=[];for(let v=0;v<c.instruments.length;v++);const h=[],f=16,m=[],g=[];for(let v=0;v<=f;v++)g.push(127);function x(v,C){const D=C.track,V=C.channel;if("channel"in C&&"track"in C&&(h[D]=V),v==="Program Change")m[C.channel]=C.value;else if(v==="Controller Change")switch(C.number){case 7:"value"in C&&(g[V]=C.value);break;default:wt("Unrecongized controller change event",C);break}else v==="Note on"?E(C):C.running?"track"in C&&"noteNumber"in C&&"velocity"in C&&E(C):v==="End of Track"||wt("Ignored event",C)}function E(v){const C=v.track,D=v.channel||h[C],V=m[D];if(!s[V]){console.warn(`Instrument ${V} is unrecongized`);return}d[D]||(d[D]={}),d[D][C]||(d[D][C]={});const H=D4e(s[V],v.noteNumber);if(!H){console.warn(`No note for channel ${D} instrument ${V} note number ${v.noteNumber}`);return}const R=d[D][C][v.noteNumber];if(!v.velocity)R?R.stop():console.warn(`There wasn't a node to stop playing for channel ${D} track ${C} note number ${v.noteNumber}`),d[D][C][v.noteNumber]=null;else{R&&console.warn(`There was a previous node playing for ${D} note number ${v.noteNumber}`);const j=F4e(H,v.noteNumber,v.velocity,g[D]);j.start(0),d[D][C][v.noteNumber]=j}}const _=new y4e.Player(function(v){wt(v),x(v.name,v)});return _.on("endOfFile",function(){a_(!1)}),_.loadArrayBuffer(a),Promise.all(o).then(()=>{wt(s),_.play()}),new wU(_)}function D4e(n,e){for(const t of n)if(e>=t.keymap.keyMin&&e<=t.keymap.keyMax)return t;return null}const Eg=127;function F4e(n,e,t,r){const i=OD(),a=i.createBufferSource();if(a.buffer=n.audioBuffer,a.detune.value=n.keymap.detune,e!==n.keymap.keyBase){const l=(e-n.keymap.keyBase)*100;a.detune.value+=l}const o=i.createGain();return o.gain.value=n.instrumentVolume/Eg,o.gain.value*=n.soundVolume/Eg,o.gain.value*=r/Eg,o.gain.value*=t/Eg,o.connect(i.destination),a.connect(o),a}function T4e(n,e){if(vU())throw new Error("Should not play more than one audio source at once.");const t=OD(),r=Rr.getSoundTable(n),i=r.sounds[e],a=ID(r.tbl,i,i.sampleRate);let o,s;return t.decodeAudioData(a).then(l=>{s=t.createBufferSource(),s.buffer=l,s.connect(t.destination),s.start(0),s.onended=()=>{a_(!1),o&&o()}}),new wU({stop:()=>{s&&(s.stop(),a_(!1))},on:(l,c)=>{if(l!=="endOfFile")throw new Error("Unexpected AudioPlayerController event "+l);o=c}})}const zB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEDBCArhrzjSQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAA3klEQVQ4y9WSPWpCURSEv5GHpLFKaxPEUkhtmSaNYrAVwS1YuIS0LiHapBbFFbgBwUayg0C2kOfYXOF69T0kTfBUhzPDnJ858N+hIsD2EBgBObAHxpIOKS8rEW8ALyGvFTWrlAj8RvlBUn6NlCVjV4H30K0dQU+2p6G+kLShZPe+i2N+cUTbfeAR+Dop2+4Cq4S7ltQNeB3oADm2d0F9lkwyiDovbVci7PUEZMEmgDOLJH3afgDeJPXSTW9xAeAD6JURYhdatifX/LadlprxEbfA819fOQN+gO94r/uKI0KFfwl0bVcYAAAAAElFTkSuQmCC",b4e="data:image/png;base64,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",P4e="data:image/png;base64,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",R4e="data:image/png;base64,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",L4e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bxSIVByuIqGSoThZERTpqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxcnRSdJES/5cUWsR4cNyPd/ced+8Af73MVLNjAlA1y0gl4kImuyp0vSKIYfRjBDGJmfqcKCbhOb7u4ePrXZRneZ/7c/QoOZMBPoF4lumGRbxBPLNp6Zz3icOsKCnE58TjBl2Q+JHrsstvnAsO+3lm2Ein5onDxEKhjeU2ZkVDJZ4mjiiqRvn+jMsK5y3OarnKmvfkLwzltJVlrtMcQgKLWIIIATKqKKEMC1FaNVJMpGg/7uEfdPwiuWRylcDIsYAKVEiOH/wPfndr5qcm3aRQHOh8se2PUaBrF2jUbPv72LYbJ0DgGbjSWv5KHYh9kl5raZEjoHcbuLhuafIecLkDDDzpkiE5UoCmP58H3s/om7JA3y3Qveb21tzH6QOQpq6SN8DBITBWoOx1j3cH23v790yzvx/R7XLN420FDQAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+QIHRUjG/0j6KEAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAkUlEQVQ4y7WSQRLCIBAEe6n8wAeZe/IYH4d3fJBvaC8YUVOF0ThVHFhmGXaYAFAnILMNM3BNtflbHEK1KVyA0mkageOy84Gijj1JdaxcVVNzViKivJCz+uRN5Sy8oSPY9SfxI9LKjPk+34pPefcXvHkQEXOrXGvxNw96v3Dmg2D8FKRdojzVtRUndWgv2YoB4AYjjupcJsGbEwAAAABJRU5ErkJggg==",B4e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bxSIVByuIqGSoThZERTpqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxcnRSdJES/5cUWsR4cNyPd/ced+8Af73MVLNjAlA1y0gl4kImuyp0vSKIYfRjBDGJmfqcKCbhOb7u4ePrXZRneZ/7c/QoOZMBPoF4lumGRbxBPLNp6Zz3icOsKCnE58TjBl2Q+JHrsstvnAsO+3lm2Ein5onDxEKhjeU2ZkVDJZ4mjiiqRvn+jMsK5y3OarnKmvfkLwzltJVlrtMcQgKLWIIIATKqKKEMC1FaNVJMpGg/7uEfdPwiuWRylcDIsYAKVEiOH/wPfndr5qcm3aRQHOh8se2PUaBrF2jUbPv72LYbJ0DgGbjSWv5KHYh9kl5raZEjoHcbuLhuafIecLkDDDzpkiE5UoCmP58H3s/om7JA3y3Qveb21tzH6QOQpq6SN8DBITBWoOx1j3cH23v790yzvx/R7XLN420FDQAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+QIHRY3HTioJJgAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABDklEQVQ4y53TQUqcQRDF8V93vgSTLIIIAV3qIniHIB4gl/E2OYg7McgEcgURwUUg2cSFi3ySUceXhSUMQjLO/KHoLqh+dFW/bpBkF5+xgxsEDWseuKn8uuIXDjAOdRg61vHG/3kUgbctyTFeYRtnmCwQ2MMHXGAqyWmSMcmXJPsLDkuyX7VjkvOOS7zGpLV2skigaiY1n1nHiJnlucN1x6bVGPC+Ywsv5no8zL85fKrS8afeeJUWLgdMnwzp0xItvOvz11+SjtuO31bnquNlWXPvuUYqN44YWpKjMsWyVj7HD0l2K76WPR+ZJZnWOs9YtR+T9KG1dlo/8hbfaybrNeWr2t/hZ7W7Ufm31tr9Xwlpvj6240ExAAAAAElFTkSuQmCC";class M4e extends Ne.exports.Component{constructor(e){super(e),this.onPlayMidi=(t,r)=>{const i=V4e(t,r);i.addOnFinished(()=>{this.setState({playbackController:null,playing:!1})}),this.setState({playbackController:i,playingType:"midi",playing:[t,r]})},this.onPlaySound=(t,r)=>{const i=T4e(t,r);i.addOnFinished(()=>{this.setState({playbackController:null,playing:!1})}),this.setState({playbackController:i,playingType:"sound",playing:[t,r]})},this.onStop=(t,r)=>{this.state.playbackController&&this.state.playbackController.stop()},this.state={playingType:"none",hasError:!1,playing:!1}}render(){if(this.state.hasError)return B("p",{children:"An error was encountered."});const e=bt.getGameVersion(),t=u2(e),r=tr(In.uiAdvanced),i=[],a=Rr.getSequenceTableCount();for(let l=0;l<a;l++){const c=l,d=t.getAudioMap(c);l>0&&i.push(B("tr",{children:B("td",{colSpan:2,children:B("hr",{})})},l+"hr"));const h=Rr.getSequenceTable(l);for(let f=0;f<h.midis.length;f++){const m=f;let g=!1,x=!1;this.state.playing&&(g=l===this.state.playing[0]&&f===this.state.playing[1]&&this.state.playingType==="midi",x=!g);let E;const _=d[m],v=`${m}, 0x${m.toString(16).toUpperCase()}`;_?E=Xe("span",{title:v,children:[_,r&&B("span",{className:"audioIndexBesideName",children:` (${v})`})]}):E=B("span",{title:v,children:v}),i.push(B(XB,{table:c,index:m,isPlaying:g,cannotPlay:x,trackName:E,onPlay:this.onPlayMidi,onStop:this.onStop,expandContent:B(Aa,{children:Xe("div",{children:[Xe(ir,{onClick:()=>I4e(c,m,_||"Unknown"),css:"btnAudioExport",children:[B("img",{src:zB,height:"16",width:"16",alt:"Export midi"}),"Download midi"]}),Xe(ir,{onClick:()=>k4e(c,m),css:"btnAudioExport",children:[B("img",{src:b4e,height:"16",width:"16",alt:"Import midi"}),"Replace midi"]}),Xe("label",{className:"audioTableExpandedLabel",children:["Soundbank index:"," "]}),h.midis[f].soundbankIndex,B("img",{src:M4,className:"audioTableSmallEditIcon",title:"Change soundbank index",alt:"Change soundbank index",onClick:async()=>{await N4e(c,m)&&this.forceUpdate()}})]})})},c+"-"+m))}}const o=[],s=Rr.getSoundTableCount();for(let l=0;l<s;l++){l>0&&o.push(B("tr",{children:B("td",{colSpan:2,children:B("hr",{})})},l+"-s-hr"));const c=Rr.getSoundTable(l),d=t.getSoundEffectMap(l);for(let h=0;h<c.sounds.length;h++){let f=!1,m=!1;this.state.playing&&(f=l===this.state.playing[0]&&h===this.state.playing[1]&&this.state.playingType==="sound",m=!f);let g;const x=d[h],E=`${h}, 0x${h.toString(16).toUpperCase()}`;x?g=Xe("span",{title:E,children:[x,r&&B("span",{className:"audioIndexBesideName",children:` (${E})`})]}):g=B("span",{title:E,children:E});const _=x||`${h}`;o.push(B(XB,{table:l,index:h,isPlaying:f,cannotPlay:m,trackName:g,onPlay:this.onPlaySound,onStop:this.onStop,expandContent:Xe(ir,{onClick:()=>O4e(l,h,_),css:"btnAudioExport",children:[B("img",{src:zB,height:"16",width:"16",alt:"Export"}),"Download .wav"]})},l+"-s-"+h))}}return Xe("div",{className:"audioViewContainer",children:[B("h2",{children:"Audio"}),B("p",{children:"This is an experimental audio player."}),B("h3",{children:"Sound Tracks"}),B(WB,{listing:i}),B("h3",{children:"Sound Effects"}),B(WB,{listing:o})]})}componentWillUnmount(){this.state.playbackController&&this.state.playbackController.stop()}componentDidCatch(e,t){this.setState({hasError:!0}),console.error(e)}}function WB(n){return Xe("table",{className:"audioViewTable",children:[Array.isArray(n.listing)?B("thead",{children:Xe("tr",{children:[B("th",{className:"audioViewTableIconColumn"}),B("th",{}),B("th",{className:"audioViewTableIconColumn"})]})}):null,B("tbody",{children:n.listing})]})}function XB(n){const[e,t]=Ne.exports.useState(!1);let r=B("td",{});if(n.isPlaying)r=B("td",{children:B("img",{src:P4e,alt:"Stop audio",title:"Stop audio",onClick:()=>n.onStop(n.table,n.index)})});else{const s=n.cannotPlay?"audioRowIconNoAction":"";r=B("td",{children:B("img",{src:R4e,alt:`Play ${n.trackName}`,title:`Play ${n.trackName}`,className:s,onClick:()=>{n.cannotPlay||n.onPlay(n.table,n.index)}})})}const i=1+(r?1:0)+(n.expandContent?1:0);let a;e&&n.expandContent&&(a=B("tr",{children:B("td",{colSpan:i,className:"audioTableExpandedContent",children:n.expandContent})}));let o="audioTableRow";return e&&(o+=" audioTableRowExpanded"),Xe(Aa,{children:[Xe("tr",{className:o,children:[n.expandContent&&B("td",{children:B("img",{src:e?B4e:L4e,alt:e?"Collapse":"Expand",onClick:()=>t(s=>!s)})}),B("td",{children:n.trackName}),r]}),a]})}function I4e(n,e,t){t=t||"music";const i=Rr.getSequenceTable(n).midis[e].buffer,a=yk(new DataView(i),i.byteLength);uo.exports.saveAs(new Blob([a]),`${t}.mid`)}function O4e(n,e,t){t=t||"sound";const r=Rr.getSoundTable(n),i=r.sounds[e],a=ID(r.tbl,i,i.sampleRate);uo.exports.saveAs(new Blob([a]),`${t}.wav`)}function k4e(n,e){const t=Rr.getSequenceTable(n);Lo("audio/midi",r=>{const i=r.target.files[0];if(!i)return;const a=new FileReader;a.onload=o=>{O0(a.result instanceof ArrayBuffer);const s=XC(a.result,{loop:!0});if(!s){tn("Could not process midi for insertion into the game");return}t.midis[e].buffer=s},a.readAsArrayBuffer(i)})}async function N4e(n,e){const t=Rr.getSequenceTable(n),r=t.soundbanks.banks.length;return await c2(`Enter new soundbank index (0 through ${r-1}):`).then(i=>{if(!i)return!1;const a=parseInt(i);return isNaN(a)||a<0||a>=r?(tn("Invalid soundbank index."),!1):(t.midis[e].soundbankIndex=a,!0)})}function U4e(n){const e=n.root;if(!e)return B("div",{children:"No decision tree provided."});const t=e.map((r,i)=>B(yU,{node:r},i));return B("div",{className:"aiEditor",children:t})}function yU(n){const e=n.node;let t=!1,r;return Array.isArray(e.decision)?r=e.decision.map((i,a)=>B(yU,{node:i},a)):t=!0,Xe("div",{className:"aiTreeNode",children:[j4e(e),r,t&&B(G4e,{node:e})]})}function j4e(n){switch(n.type){case ts.leaf:return null;case ts.hasCoins:return Xe("div",{className:"aiNodeCondition",children:["Has ",n.data," coins"]});case ts.star:return Xe("div",{className:"aiNodeCondition",children:["Stars: ",At(n.data)]});case ts.remainingSpaces:return Xe("div",{className:"aiNodeCondition",children:["Player has ",n.data," remaining spaces"]});case ts.stateComparison:return Xe("div",{className:"aiNodeCondition",children:["State ",At(n.data)]});case ts.winningHeuristic:return Xe("div",{className:"aiNodeCondition",children:["Heuristic ",At(n.data)]});case ts.customCode:return Xe("div",{className:"aiNodeCondition",children:["Custom function at ",At(n.data)]});case ts.turnsElapsed:return Xe("div",{className:"aiNodeCondition",children:[n.data," turns elapsed"]});case ts.hasItem:return Xe("div",{className:"aiNodeCondition",children:["Has the ",At(n.data)," item"]})}return B("div",{className:"aiNodeCondition",children:"Unknown Condition!"})}function G4e(n){const e=n.node.decision;let t;return e.probability.length===2?t=B(nh,{probability:e.probability[1],difficultyLong:"Normal / Hard",difficultyShort:"N/H"}):t=B(nh,{probability:e.probability[1],difficultyLong:"Normal",difficultyShort:"N"}),Xe("div",{children:[B("span",{className:"aiNodeDecision",children:e.value})," @ ",B(nh,{probability:e.probability[0],difficultyLong:"Easy",difficultyShort:"E"})," ",t,e.probability.length>2&&Xe(Aa,{children:[" ",B(nh,{probability:e.probability[2],difficultyLong:"Hard",difficultyShort:"H"})," ",B(nh,{probability:e.probability[3],difficultyLong:"Super Hard",difficultyShort:"SH"})]})]})}function nh(n){return Xe(Aa,{children:[Xe("span",{className:"aiNodeDifficulty",title:`Probability on ${n.difficultyLong} difficulty`,children:[n.difficultyShort,":"]})," ",B("span",{className:"aiNodeDifficulty",children:n.probability})]})}const H4e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAApCAYAAAB9ctS7AAAABmJLR0QA+gDpAOT6kz7NAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4AMbAB0GDCfSRQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAALh0lEQVRo3u2aeXRU1R3HP783SyYJAbJICBLBgiBgN0WtSnGlBWu1WgvlqIW6oIIoIG6lek4Xa2m1PS1YFUhVlOJGxWIXBUKxeBTEUkEsGgGBgES2JGabzLz76x9vmTeTCYIGXOo95515727v3u/9/tY30E5RVVS1SFWfVNUTvbrPS/uAjddUeVtVxwbB/Lykg2U0e7lbVcs/Ryglgkd5yNx411xd/frmbKD9U1W/8X/PNlX9mapqQ1OLDhj7uA4a96x+/ZpH9M9LX1M1diZojao6UVVzP8ugyX7AUoDKlRu4ef67iFiAYEySfTvfYdyIL3D1hYMp7NIpc+hc4G4RWfdZA8tqRwQHec+33luJSMhrxbJCFPfow1NrbOIJO9ucPwDWquomVb3IY9lngW1twBIRgEkAe+saaYqWAW032vL+ProW5KXVPfDYEt6p3uU9Hg0scEn6E6DHpx20bMyygCsB/vbC6+QWFKWDqYqoog3vEsuJ+PWvrnubmZXNDJ/2AudPnstLazYGh90BbFfV5cDJnxmwgFO8m58+/DK4TBB1Ltzr0mH90gbdMONFcvM607lrMTtNL8bPeptBo+7n0UWvUFff6HUbCrysqglVHauqBZ8mtmUD62aA6p37yC3pi7hsQhWM82u3NHL9JWf4A+b9ZQUNodIgP4lEouSX9uf3/6jn+MufZNL0hWzcWuN1CAMPAvWqWgEc86mzhqoaA5oBplcsZsG6iMskl13G+bX3vMHq+df5404aNx/N7+EwD7d/gC3euJaGevKTO/jlDedwyleOJhKJBF+/A7gEeEFEjKp6+vMTy6xznL0a7vvLmw6TjEGMOhtWRZOtzLn9PH/ArMcrSeaUtHMU6ZuN5RdgF/TjxtmbGHTxHGY+soxde+q85h7AMsBW1R8BpZ90MbwVYMOmnRSWfgGxHaAwCrYDWHxfNV8e0MsfULGkmlA42hYkDygR1JIUh0WwwmGKyvry6IokZ1yziNGTH2LjlprgDHcCO1V1edCN+bh1mxXwrQqB0wBmL1hFTjTmihOgBjEGkjZXntvLF49t29+jNVzyQaHAfhVAQWE3Njf2YNQdLzPwW/fw3PJ1NDW1BA3C626U8F0g/+METQKnNgZ4qLU1Qb+LZlNafkzK+uGAlmzcw+p5o/3BZ151Hw2dBrad1APZA0sENCXKXr2ogknpOOfZsLdmK6POLmPCZadTekTXzOkfBG4Xke0AxhgsyzrsYngLwKvrt1HSvTdiK9jG0Vm2QZI25fl70gbXh4/s4KMTsCyKSnuxeG2E4eP/wTmX/I4Nb+/AGOP1+iFQrarVqnqSiIQPF9vEfUk5sBVgzC3zeGtvScCqOUyxW5tYPuc8YrEcx7+4+ykqtxUjWU5V0tatbS2qz7x0dgVdFPHHKJpoZff2Kn46aQjnDzue/PxY5itvAmaJSP0hZZarf0YB1NU38NL6JodRtsso20DSYDVv84ECWLIhkRWotjrrQ2Y9AjeWFaFb+QBmPrGLr108l3FTH6RmV22w+6+BOlVdqarlqiqHUgwnAaxYvYmi4jLHVbANknTAMvFmfjX1bH/QP1e+juQdcfAilqVORZxVePfOEYLgPHvWFOe+c2F31u8o4vxxf+fkEdNZ9WoViWTSd/lcCUmq6rmHQgwHAusBzr38AWrtngFRccRB4lv514KUE3rc92eSW/bF/UyaRQw9pR4UQ2mr6MXTTSalAvxxxjh1pKIJbJs9NZu5clR/Jlw5nFgszY25WkRmdSSzxngPZ5zQHW3YiWmNu4pdSbY08ttpw/wBzS1xosV99i9C4ly+wQ34WI7PJe1m0jw2+X3839S94vlxgoRClHTvw8JlCU44ezoO6qlEiKp+pyPBGuqpiJsnXMBLC67gnikDsOs2YeLN5GkNg4/vn0pW/XgeoWjuR3dYsoploF7SdZcPUDag1XEhxl02OFu4+7SqDukwP8tNyzwDjAC8TB/7auupeW8Px/Y72okJbcPx1z5NNL/kAGX8IKyiyWxPiWOmWsCYgOgaRCHZUM1Lf5sIwOY31/Hi3x/l0knTgwsYJCJvfGQFLyJGRL7t+ixTvAMt7NrZBwqg4onFhKKdDtjEpYmjtm1LsUTSxS3TIEgm68RhmlsSiVYmjxvsPz83905K2cLDPx8TfOV6Ve3R0Sma34qIpapfBN4PNowb/U0euWEAiZ2vYccbPoQfkCV2DHaRLJ8FfGDSxRNxVy8WBdE9jPyOk4Z7498r6FHQiiVCz4JWHr7jwuBs21S1c4d/sEgmk4TDYZqammKxWGyJiJwa7J9IJLh4SgVbWroR6VS03+nSxDEQ7vhipZrmAPv3rvVr47CaVHgUb27mnpu+xNBTnbDr95OHM7B3YdpKdtU1M/y62XQtOgLXAuSJSPxg00DtepXhcJiqqiry8vJajDFDbNsOqeqdXnskEuGZGdfwn9kXcUH/epr2bEXt5MEdSdpCg4pb2rMKASXvMK5PWdwHauXSp+lTVuAmBnyvm9KueSyfdTWvvbzU23OTqloHmy87aE/XGCPAGSKyOGgMABa/uJYpM14gWnIMViSWYUWyMKuNos8W9mi77Gp8v5Z5009n0LFHAfC768/k2N6lWBYI4oSaAesajyepzTuO74+/w1tRGDAHCtpBh+uWZallWcuMMRGgEKjy2oad9iXWzp/As7efSF79OhJNdelO6Yc9QsnU9A4rh3451wfq+ScfoG/PYieWDLzPeIciQiQSIjeaNpkNhA40CP/QuY1QKKQiUisi/VyG3e8tqqy0iOUV1/HKvd/i5JJ3qd9bjWJQtK1iT7OK7D+JGLCK+/bVcOv4M510dUsLb/3rT2mpGs0ATY2STBrOGjkx8y3xAwWsoxJBRkSuBSLASF+vhUPMnDaa9Q+NZso5MfZuXYexW1NEy2IVD7RcNqInPboXA/BMxc856sgjXFa13bTHrqYEFHR28mNXjP2hf+6u1bc+CLAOAcuTeVVNisiT7gL6AtUAIcti9HmnUPXUBObeMJBkzRoSrY2+IksLgbyA2lPi/rPnRsCunVuYOHao44BW/ZfGLSuxLEkZVVfBB9mlQH0y19O7rFq1kmFnneVtIRd474PyYh2aYvTEwHVyN4pIOVAAPOW1D+x7JGsem8ySu06nT3QzTXU1ToB8EOX2q79Kp3xn488/ehfFhZ2djymBXH3mphNJm8HDLwfgr4uexRKL3bt3M+ri73ldioHNItIuYIcjH9sgIt8DYsBV/soKC5j/68tZef+FjPxqK7t3vImqwU9HtAmgHfbufncjl1xwEgArFi8kz94FkhK14EaDe07ahkGDh6Kq3Dx1KsYY1ChvvfUmN06a7HXrrapr2gPskIMVMMtxEZnjmusTgH0A+bk5TL1iBP99/CruHlvO3m1rsFubs+seY/OHH59NKOR4LKuevY/83JgPijEaDC/TFH3cDvvOdOafVZZVVnLvjBnekK+o6tJsgB2eTH86aLaI/FtEioCewHMA0UiYoScdS9WiqSz82akUtGygubE2TXfZ9VUMG+I4oI89cBfdu0RdcAKWT9NF0auva3Xeb2zb11teu4jwxzkVPPP0Qm+NZ6nq45n+12EDKwtoiMh2ERnu+mvTPPenZ1kRSx6aSOWMEXy9dy21u7ZQt3sHi+4b64ZiNtvXPkc4HGrrxkl6wlEEbGPT+zjXzYjHERGXcY5FMOrozGm33caypZXeTCNV9Q8fyYM/FMWL0VQ1CgwBlgTX1tDYzNbq9xjY3/m4+5vbxlCQ2O6NwTemliBASMQlpGBZQjzeygW3PEFhcQmrX3mFitlzKC8vp1fvXhzTvz/dunUjGo2Sk5NDOBymS5cuweX9QkSmfWLAygTNve8LzAcGZ/arr92LZYl72s7nM8sVV3EvkACLhWhOzkdZ122WZf3yk/XPi+xs6+5+05z0MS9p4v8AZA8eyIv8uZgAAAAASUVORK5CYII=",z4e=n=>{const[e,t]=Ne.exports.useState("");let r;if(n.message||n.messageHTML){let i;n.message?i=B("span",{className:"loadingMsgTxt selectable",children:n.message}):i=B("span",{className:"loadingMsgTxt selectable",dangerouslySetInnerHTML:{__html:n.messageHTML}});let a;n.prompt&&(a=B("input",{className:"blockerPromptInput",autoFocus:!0,value:e,onChange:o=>t(o.target.value),onKeyDown:Qc(o=>n.onAccept(e),{enter:!0})})),r=Xe("div",{className:"loadingMsg",children:[i,B("br",{}),B("br",{}),n.prompt&&Xe(Aa,{children:[a,B("br",{}),B("br",{})]}),B("button",{autoFocus:!n.prompt,onClick:()=>n.onAccept(e),children:n.confirm?"Yes":"OK"}),(n.prompt||n.confirm)&&B("button",{onClick:()=>n.onCancel(),children:n.confirm?"No":"Cancel"})]})}else r=B("img",{className:"loadingGif swing",src:H4e,alt:"Loading"});return Xe("div",{className:"loading",children:[B("div",{className:"loadingEscapeBackDoor",onClick:n.onForceClose}),B("img",{className:"loadingLogo",src:z9,alt:"Loading"}),B("br",{}),r]})};function W4e(){const[n,e]=Ne.exports.useState([]),[t,r]=Ne.exports.useState(null);Ne.exports.useEffect(()=>{const a=Q4e();e(a),r(a[0])},[]);const i=Ne.exports.useCallback(a=>r(a),[]);return n.length?Xe("div",{className:"spriteViewerContainer",children:[B(X4e,{spriteFsEntries:n,selectedSprite:t,onSelectedSpriteChanged:i}),B(Y4e,{selectedSprite:t})]}):null}function X4e(n){return B("div",{className:"spriteViewerToolbar",children:B(K4e,{spriteFsEntries:n.spriteFsEntries,selectedSprite:n.selectedSprite,onSelectedSpriteChanged:n.onSelectedSpriteChanged})})}function K4e(n){const e=n.spriteFsEntries.map(t=>{const r=t.join("/");return B("option",{value:r,children:r},r)});return Xe("div",{className:"spriteSelectContainer",children:["Sprite:",B("select",{value:n.selectedSprite.join("/"),onChange:t=>{const[r,i]=t.target.value.split("/").map(o=>parseInt(o)),a=n.spriteFsEntries.find(o=>o[0]===r&&o[1]===i);a&&n.onSelectedSpriteChanged(a)},children:e})]})}function Y4e(n){const[e,t]=n.selectedSprite,i=Ne.exports.useMemo(()=>EU(e,t),[e,t]).map((a,o)=>{const s=Ea(a.src,a.width,a.height);return B(q4e,{name:`Sprite ${e}/${t}`,dataUri:s,height:a.height,width:a.width},`${e}-${t}-${o}`)});return B("div",{className:"spriteDisplayContainer",children:i})}function q4e(n){return B("div",{className:"spriteImageDiv",children:B("img",{src:n.dataUri,height:n.height,width:n.width,alt:n.name},n.name)})}function Q4e(){const n=[];let e=dt.getDirectoryCount();for(let t=0;t<e;t++){let r=dt.getFileCount(t);for(let i=0;i<r;i++)try{EU(t,i)&&n.push([t,i])}catch{}}return n}function EU(n,e){let t=dt.get(n,e),r=xc(t);return!r||!r.length?null:r}class J4e extends $g.Component{constructor(e){super(e),this.state={hasError:!1}}render(){return this.state.hasError?B("p",{children:"An error was encountered."}):this.props.children}componentDidCatch(e){this.setState({hasError:!0}),console.error(e)}}var Iw=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Ow(n,e,t,r){n.addEventListener?n.addEventListener(e,t,r):n.attachEvent&&n.attachEvent("on".concat(e),function(){t(window.event)})}function CU(n,e){for(var t=e.slice(0,e.length-1),r=0;r<t.length;r++)t[r]=n[t[r].toLowerCase()];return t}function VU(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");for(var e=n.split(","),t=e.lastIndexOf("");t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function Z4e(n,e){for(var t=n.length>=e.length?n:e,r=n.length>=e.length?e:n,i=!0,a=0;a<t.length;a++)r.indexOf(t[a])===-1&&(i=!1);return i}var kD={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":Iw?173:189,"=":Iw?61:187,";":Iw?59:186,"'":222,"[":219,"]":221,"\\":220},yu={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},U4={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Ai={16:!1,18:!1,17:!1,91:!1},br={};for(var Cg=1;Cg<20;Cg++)kD["f".concat(Cg)]=111+Cg;var Jn=[],KB=!1,DU="all",FU=[],B2=function(e){return kD[e.toLowerCase()]||yu[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function TU(n){DU=n||"all"}function Vp(){return DU||"all"}function $4e(){return Jn.slice(0)}function eEe(n){var e=n.target||n.srcElement,t=e.tagName,r=!0;return(e.isContentEditable||(t==="INPUT"||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(r=!1),r}function tEe(n){return typeof n=="string"&&(n=B2(n)),Jn.indexOf(n)!==-1}function nEe(n,e){var t,r;n||(n=Vp());for(var i in br)if(Object.prototype.hasOwnProperty.call(br,i))for(t=br[i],r=0;r<t.length;)t[r].scope===n?t.splice(r,1):r++;Vp()===n&&TU(e||"all")}function rEe(n){var e=n.keyCode||n.which||n.charCode,t=Jn.indexOf(e);if(t>=0&&Jn.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&Jn.splice(0,Jn.length),(e===93||e===224)&&(e=91),e in Ai){Ai[e]=!1;for(var r in yu)yu[r]===e&&(Fa[r]=!1)}}function iEe(n){if(typeof n>"u")Object.keys(br).forEach(function(o){return delete br[o]});else if(Array.isArray(n))n.forEach(function(o){o.key&&kw(o)});else if(typeof n=="object")n.key&&kw(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var i=t[0],a=t[1];typeof i=="function"&&(a=i,i=""),kw({key:n,scope:i,method:a,splitKey:"+"})}}var kw=function(e){var t=e.key,r=e.scope,i=e.method,a=e.splitKey,o=a===void 0?"+":a,s=VU(t);s.forEach(function(l){var c=l.split(o),d=c.length,h=c[d-1],f=h==="*"?"*":B2(h);if(!!br[f]){r||(r=Vp());var m=d>1?CU(yu,c):[];br[f]=br[f].filter(function(g){var x=i?g.method===i:!0;return!(x&&g.scope===r&&Z4e(g.mods,m))})}})};function YB(n,e,t,r){if(e.element===r){var i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(var a in Ai)Object.prototype.hasOwnProperty.call(Ai,a)&&(!Ai[a]&&e.mods.indexOf(+a)>-1||Ai[a]&&e.mods.indexOf(+a)===-1)&&(i=!1);(e.mods.length===0&&!Ai[16]&&!Ai[18]&&!Ai[17]&&!Ai[91]||i||e.shortcut==="*")&&e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0))}}}function qB(n,e){var t=br["*"],r=n.keyCode||n.which||n.charCode;if(!!Fa.filter.call(this,n)){if((r===93||r===224)&&(r=91),Jn.indexOf(r)===-1&&r!==229&&Jn.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(g){var x=U4[g];n[g]&&Jn.indexOf(x)===-1?Jn.push(x):!n[g]&&Jn.indexOf(x)>-1?Jn.splice(Jn.indexOf(x),1):g==="metaKey"&&n[g]&&Jn.length===3&&(n.ctrlKey||n.shiftKey||n.altKey||(Jn=Jn.slice(Jn.indexOf(x))))}),r in Ai){Ai[r]=!0;for(var i in yu)yu[i]===r&&(Fa[i]=!0);if(!t)return}for(var a in Ai)Object.prototype.hasOwnProperty.call(Ai,a)&&(Ai[a]=n[U4[a]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(Jn.indexOf(17)===-1&&Jn.push(17),Jn.indexOf(18)===-1&&Jn.push(18),Ai[17]=!0,Ai[18]=!0);var o=Vp();if(t)for(var s=0;s<t.length;s++)t[s].scope===o&&(n.type==="keydown"&&t[s].keydown||n.type==="keyup"&&t[s].keyup)&&YB(n,t[s],o,e);if(r in br){for(var l=0;l<br[r].length;l++)if((n.type==="keydown"&&br[r][l].keydown||n.type==="keyup"&&br[r][l].keyup)&&br[r][l].key){for(var c=br[r][l],d=c.splitKey,h=c.key.split(d),f=[],m=0;m<h.length;m++)f.push(B2(h[m]));f.sort().join("")===Jn.sort().join("")&&YB(n,c,o,e)}}}}function aEe(n){return FU.indexOf(n)>-1}function Fa(n,e,t){Jn=[];var r=VU(n),i=[],a="all",o=document,s=0,l=!1,c=!0,d="+",h=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(a=e.scope),e.element&&(o=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(c=e.keydown),e.capture!==void 0&&(h=e.capture),typeof e.splitKey=="string"&&(d=e.splitKey)),typeof e=="string"&&(a=e);s<r.length;s++)n=r[s].split(d),i=[],n.length>1&&(i=CU(yu,n)),n=n[n.length-1],n=n==="*"?"*":B2(n),n in br||(br[n]=[]),br[n].push({keyup:l,keydown:c,scope:a,mods:i,shortcut:r[s],method:t,key:r[s],splitKey:d,element:o});typeof o<"u"&&!aEe(o)&&window&&(FU.push(o),Ow(o,"keydown",function(f){qB(f,o)},h),KB||(KB=!0,Ow(window,"focus",function(){Jn=[]},h)),Ow(o,"keyup",function(f){qB(f,o),rEe(f)},h))}function oEe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(br).forEach(function(t){var r=br[t].find(function(i){return i.scope===e&&i.shortcut===n});r&&r.method&&r.method()})}var Nw={setScope:TU,getScope:Vp,deleteScope:nEe,getPressedKeyCodes:$4e,isPressed:tEe,filter:eEe,trigger:oEe,unbind:iEe,keyMap:kD,modifier:yu,modifierMap:U4};for(var Uw in Nw)Object.prototype.hasOwnProperty.call(Nw,Uw)&&(Fa[Uw]=Nw[Uw]);if(typeof window<"u"){var sEe=window.hotkeys;Fa.noConflict=function(n){return n&&window.hotkeys===Fa&&(window.hotkeys=sEe),Fa},window.hotkeys=Fa}Fa.filter=function(){return!0};var bU=function(e,t){var r=e.target,i=r&&r.tagName;return Boolean(i&&t&&t.includes(i))},lEe=function(e){return bU(e,["INPUT","TEXTAREA","SELECT"])};function QB(n,e,t,r){t instanceof Array&&(r=t,t=void 0);var i=t||{},a=i.enableOnTags,o=i.filter,s=i.keyup,l=i.keydown,c=i.filterPreventDefault,d=c===void 0?!0:c,h=i.enabled,f=h===void 0?!0:h,m=i.enableOnContentEditable,g=m===void 0?!1:m,x=Ne.exports.useRef(null),E=Ne.exports.useCallback(function(_,v){var C,D;return o&&!o(_)?!d:lEe(_)&&!bU(_,a)||(C=_.target)!=null&&C.isContentEditable&&!g?!0:x.current===null||document.activeElement===x.current||(D=x.current)!=null&&D.contains(document.activeElement)?(e(_,v),!0):!1},r?[x,a,o].concat(r):[x,a,o]);return Ne.exports.useEffect(function(){if(!f){Fa.unbind(n,E);return}return s&&l!==!0&&(t.keydown=!1),Fa(n,t||{},E),function(){return Fa.unbind(n,E)}},[E,n,f]),x}Fa.isPressed;function uEe(){let n=window.localStorage&&localStorage.getItem("boards");return n&&(n=JSON.parse(n)),!n||!n.length?null:n}function cEe(){let n=window.localStorage&&localStorage.getItem("events");return n&&(n=JSON.parse(n)),!n||!n.length?null:n}class dEe extends Ne.exports.Component{constructor(){super(...arguments),this.state={aiTree:null,error:null,errorInfo:null,initialized:!1},this._onUpdateCheckHasUpdate=()=>{vt.dispatch(xre(!0))}}render(){return this.state.error?B(_Ee,{error:this.state.error,errorInfo:this.state.errorInfo,onClearError:()=>{this.setState({error:null,errorInfo:null}),io(!1)}}):this.state.initialized?B(AEe,{...this.state}):null}componentDidCatch(e,t){PU(this,e,t)}componentDidMount(){if(eu)try{const e=window.require("electron").ipcRenderer;e.on("update-check-hasupdate",this._onUpdateCheckHasUpdate),e.send("update-check-start")}catch(e){console.error("Auto update failed in componentDidMount: ",e)}this.state.initialized||(mEe(),this.setState({initialized:!0}))}componentWillUnmount(){if(eu)try{window.require("electron").ipcRenderer.removeListener("update-check-hasupdate",this._onUpdateCheckHasUpdate)}catch(e){console.error("Auto update failed in componentWillUnmount: ",e)}}}function AEe(n){const e=j0(mk),t=j0(HC),r=j0(KE),i=j0(rl),a=j0(wre),o=j0(yre);Kne(i.name),qne(),fEe();let s;switch(e){case A0.EDITOR:s=B(hse,{});break;case A0.DETAILS:s=B(exe,{board:i});break;case A0.SETTINGS:s=B(eH,{});break;case A0.ABOUT:s=B(Axe,{});break;case A0.MODELS:s=B(Rxe,{});break;case A0.SPRITES:s=B(W4e,{});break;case A0.EVENTS:s=B(J4e,{children:B(Yxe,{})});break;case A0.CREATEEVENT_ASM:s=B(uve,{});break;case A0.CREATEEVENT_C:s=B(pve,{});break;case A0.STRINGS:s=B(_ve,{});break;case A0.PATCHES:s=B(xie,{});break;case A0.DEBUG:s=B(f4e,{});break;case A0.AUDIO:s=B(M4e,{});break;case A0.ADDITIONAL_BGS:s=B(PB,{board:i,title:"Additional Background Configuration",getExistingCode:()=>tV(i),getDefaultCode:d=>EW(d),onSetCode:(d,h)=>tae(d,h),canSaveAndExit:(d,h)=>VW(d,h,i)});break;case A0.AUDIO_SELECTION_CODE:s=B(PB,{board:i,title:"Background Music Selection Code",getExistingCode:()=>nV(i),getDefaultCode:d=>bW(d),onSetCode:(d,h)=>nae(d,h),canSaveAndExit:(d,h)=>PW(d,h,i)});break}let l;switch(e){case A0.EDITOR:case A0.DETAILS:case A0.EVENTS:l=B("div",{className:"sidebar",children:B(yve,{boards:r})});break}let c="body";return a===ue.ERASE&&(c+=" eraser"),Xe("div",{className:c,children:[B(hEe,{}),B(Iwe,{view:e,romLoaded:o,board:i}),Xe("div",{className:"content",onKeyDownCapture:t?GG:void 0,children:[l,Xe("div",{className:"main",children:[s,Xe("div",{className:"mainOverlay",children:[B(xg,{name:"Toolbox",position:"TopRight",visible:e===A0.EDITOR,children:B(Zwe,{currentAction:a,gameVersion:i.game,boardType:i.type})}),B(xg,{name:"Space Properties",position:"BottomRight",visible:e===A0.EDITOR,children:B(Sye,{gameVersion:i.game,boardType:i.type})}),B(xg,{name:"Board Properties",position:"BottomLeft",visible:e===A0.EDITOR,children:B(kye,{currentBoard:i})}),n.aiTree&&B(xg,{name:"AI Decision Tree",position:"TopLeft",visible:e===A0.EDITOR,canClose:!0,onCloseClick:()=>Rk(null),children:B(U4e,{root:n.aiTree})})]}),B("div",{id:"dragZone"})]})]}),B(pEe,{})]})}function fEe(){const n=j0(mk),t=!j0(HC)&&n===A0.EDITOR;QB("ctrl+z",(r,i)=>{Sie()},{enabled:t,enableOnTags:["INPUT","SELECT"]}),QB("ctrl+y",(r,i)=>{gie()},{enabled:t,enableOnTags:["INPUT","SELECT"]})}function hEe(){const n=zne(),e=Ne.exports.useCallback(()=>{n(LP(!0))},[n]),t=Ne.exports.useCallback(()=>{n(LP(!0)),io(!0),eu&&window.require("electron").ipcRenderer.send("update-check-doupdate")},[n]),r=j0(o=>o.app.updateHideNotification),i=j0(Ere),a=j0(Cre).slice();return i&&!r&&a.push(Xe(J9,{color:_D.Blue,onClose:e,children:["An update is available.",B(Z9,{onClick:t,children:"Install"})]},"update")),B(Dve,{children:a})}function pEe(){const n=j0(HC),e=j0(Rre),t=j0(Lre),r=j0(Bre),i=j0(Mre),a=j0(Ire);return n?B(z4e,{message:e,messageHTML:t,prompt:r,confirm:i,onAccept:o=>{tn(),a&&a(o)},onCancel:()=>{tn(),a&&a()},onForceClose:()=>io(!1)}):null}window.onerror=function(n,e,t,r,i){const a=window._PP64instance;i&&(a?PU(a,i,null):alert(i))};function mEe(){let n;const e=uEe();e&&e.length?n=e.map(r=>kk(r)):n=[K8(1)],vt.dispatch(eee({boards:n}));const t=cEe();t&&t.length&&t.forEach(r=>{if(!(!r||!r.asm))try{const i=r,a=oo(i.language||y0.MIPS,i.asm);vt.dispatch(XE({event:a}))}catch(i){console.error("Error reading cached event",i)}}),Qp()}const SEe=document.getElementById("body"),gEe=Kk(SEe);gEe.render(B(Nne,{store:vt,children:B(dEe,{ref:n=>window._PP64instance=n})}));function PU(n,e,t){n.setState({error:e,errorInfo:t}),console.error(e,t)}function _Ee(n){const e=n.errorInfo&&n.errorInfo.componentStack;return Xe("div",{className:"errorDiv selectable",children:[Xe("h2",{children:["Hey, it seeems like something's wrong in\xA0",B("span",{className:"errorStrikeoutText",children:"Mushroom Village"}),"\xA0 PartyPlanner64."]}),Xe("p",{children:["Please \xA0",B("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/issues",target:"_blank",rel:"noopener noreferrer",children:"file an issue"}),"\xA0 with the following details, and refresh the page. Or \xA0",B("a",{href:"#",onClick:n.onClearError,children:"click here"}),"\xA0 to dismiss this error, but you may be in a bad state."]}),B("pre",{children:n.error.toString()}),n.error.stack?Xe(Ne.exports.Fragment,{children:[B("div",{children:"Stack Error Details:"}),B("pre",{children:n.error.stack})]}):null,B("div",{children:"Component Stack Error Details:"}),B("pre",{children:e||"N/A"})]})}
